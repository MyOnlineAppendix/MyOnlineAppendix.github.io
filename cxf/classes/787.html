<h3 style="margin:0px">Class: org.apache.cxf.systest.ws.rm.SequenceTest (35 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(25)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="12"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('12')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-12"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="13"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('13')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-13"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="18"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('18')" data-toggle="tooltip" title="Invokes logging operations"><kbd id="tag-18"class="label-info"style="display: inline-block;font-size:7pt" >Logger&nbsp;(1)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Releases resources used by the test cases"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >TestCleaner&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-3 type-12 type-5 type-2 type-1 type-13 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInactivityTimeout() throws Exception {
  init("org/apache/cxf/systest/ws/rm/inactivity-timeout.xml");
  greeter.greetMe("one");
  try {
    Thread.sleep(500);
  }
 catch (  InterruptedException ex) {
  }
  try {
    greeter.greetMe("two");
    fail("Expected fault.");
  }
 catch (  WebServiceException ex) {
    SoapFault sf=(SoapFault)ex.getCause();
    assertEquals("Unexpected fault code.",Soap11.getInstance().getSender(),sf.getFaultCode());
    assertNull("Unexpected sub code.",sf.getSubCode());
    assertTrue("Unexpected reason.",sf.getReason().endsWith("is not a known Sequence identifier."));
  }
  awaitMessages(3,3,5000);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  String[] expectedActions=new String[3];
  expectedActions[0]=RM10Constants.CREATE_SEQUENCE_ACTION;
  for (int i=1; i < expectedActions.length; i++) {
    expectedActions[i]=GREETME_ACTION;
  }
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1","2"},true);
  mf.verifyLastMessage(new boolean[3],true);
  mf.verifyAcknowledgements(new boolean[]{false,false,false},true);
  mf.verifyMessages(3,false);
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,GREETME_RESPONSE_ACTION,RM10_GENERIC_FAULT_ACTION};
  mf.verifyActions(expectedActions,false);
  mf.verifyMessageNumbers(new String[]{null,"1",null},false);
  mf.verifyAcknowledgements(new boolean[]{false,true,false},false);
  mf.verifySequenceFault(RM10Constants.UNKNOWN_SEQUENCE_FAULT_QNAME,false,2);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCreateSequenceAfterSequenceExpiration() throws Exception {
  init("org/apache/cxf/systest/ws/rm/expire-fast-seq.xml",true);
  RMManager manager=greeterBus.getExtension(RMManager.class);
  assertEquals("Unexpected expiration",DatatypeFactory.createDuration("PT5S"),manager.getSourcePolicy().getSequenceExpiration());
  greeter.greetMeOneWay("one");
  greeter.greetMeOneWay("two");
  Thread.sleep(8000);
  awaitMessages(3,2,5000);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(3,true);
  verifyCreateSequenceAction(0,"PT5S",mf,true);
  String[] expectedActions=new String[]{RM10Constants.INSTANCE.getCreateSequenceAction(),GREETMEONEWAY_ACTION,GREETMEONEWAY_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1","2"},true);
  mf.verifyAcknowledgementRange(1,2);
  outRecorder.getOutboundMessages().clear();
  inRecorder.getInboundMessages().clear();
  greeter.greetMeOneWay("three");
  awaitMessages(2,2,5000);
  mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(2,true);
  verifyCreateSequenceAction(0,"PT5S",mf,true);
  expectedActions=new String[]{RM10Constants.INSTANCE.getCreateSequenceAction(),GREETMEONEWAY_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1"},true);
  mf.verifyMessages(2,false);
  expectedActions=new String[]{RM10Constants.INSTANCE.getCreateSequenceResponseAction(),RM10Constants.INSTANCE.getSequenceAckAction()};
  mf.verifyActions(expectedActions,false);
  mf.purge();
  assertEquals(0,outRecorder.getOutboundMessages().size());
  assertEquals(0,inRecorder.getInboundMessages().size());
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnewayMessageLoss() throws Exception {
  Thread.sleep(5000);
  testOnewayMessageLoss(null);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnewayAnonymousAcksDispatchProvider() throws Exception {
  init("org/apache/cxf/systest/ws/rm/rminterceptors_provider.xml",false,true);
  dispatch.getRequestContext().put(MessageContext.WSDL_OPERATION,GREETMEONEWAY_NAME);
  dispatch.invokeOneWay(getDOMRequest("One",true));
  dispatch.invokeOneWay(getDOMRequest("Two",true));
  dispatch.invokeOneWay(getDOMRequest("Three",true));
  verifyOnewayAnonymousAcks();
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnewayDeferredNonAnonymousAcks() throws Exception {
  init("org/apache/cxf/systest/ws/rm/deferred.xml",true);
  greeter.greetMeOneWay("once");
  greeter.greetMeOneWay("twice");
  awaitMessages(3,1);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(3,true);
  String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETMEONEWAY_ACTION,GREETMEONEWAY_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1","2"},true);
  mf.verifyMessages(1,false);
  mf.verifyMessageNumbers(new String[1],false);
  mf.verifyAcknowledgements(new boolean[1],false);
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION};
  mf.verifyActionsIgnoringPartialResponses(expectedActions);
  mf.purge();
  try {
    Thread.sleep(3 * 1000);
  }
 catch (  InterruptedException ex) {
  }
  awaitMessages(0,1);
  mf.reset(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages());
  mf.verifyMessages(0,true);
  mf.verifyMessages(1,false);
  mf.verifyAcknowledgements(new boolean[]{true},false);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnewayDeferredAnonymousAcks() throws Exception {
  init("org/apache/cxf/systest/ws/rm/deferred.xml");
  greeter.greetMeOneWay("once");
  greeter.greetMeOneWay("twice");
  try {
    Thread.sleep(3 * 1000);
  }
 catch (  InterruptedException ex) {
  }
  greeter.greetMeOneWay("thrice");
  awaitMessages(4,2);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(4,true);
  String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETMEONEWAY_ACTION,GREETMEONEWAY_ACTION,GREETMEONEWAY_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1","2","3"},true);
  mf.verifyMessages(2,false);
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION};
  mf.verifyActions(expectedActions,false);
  mf.verifyMessageNumbers(new String[]{null,null},false);
  mf.verifyAcknowledgements(new boolean[]{false,true},false);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnewayAnonymousAcksClientSequenceDemarcation() throws Exception {
  init("org/apache/cxf/systest/ws/rm/rminterceptors.xml");
  greeter.greetMeOneWay("once");
  ((BindingProvider)greeter).getRequestContext().put(RMManager.WSRM_LAST_MESSAGE_PROPERTY,Boolean.TRUE);
  greeter.greetMeOneWay("twice");
  ((BindingProvider)greeter).getRequestContext().remove(RMManager.WSRM_LAST_MESSAGE_PROPERTY);
  greeter.greetMeOneWay("thrice");
  awaitMessages(6,5);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(6,true);
  String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETMEONEWAY_ACTION,GREETMEONEWAY_ACTION,RM10Constants.TERMINATE_SEQUENCE_ACTION,RM10Constants.CREATE_SEQUENCE_ACTION,GREETMEONEWAY_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1","2",null,null,"1"},true);
  mf.verifyLastMessage(new boolean[]{false,false,true,false,false,false},true);
  mf.verifyMessages(5,false);
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION,RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION};
  mf.verifyActions(expectedActions,false);
  mf.verifyMessageNumbers(new String[]{null,null,null,null,null},false);
  mf.verifyLastMessage(new boolean[]{false,false,false,false,false},false);
  mf.verifyAcknowledgements(new boolean[]{false,true,true,false,true},false);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwowayMessageLoss() throws Exception {
  testTwowayMessageLoss(null);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnewayAnonymousAcksSuppressedAsyncExecutor() throws Exception {
  testOnewayAnonymousAcksSuppressed(Executors.newSingleThreadExecutor());
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnewayAnonymousAcksProvider() throws Exception {
  init("org/apache/cxf/systest/ws/rm/rminterceptors_provider.xml");
  greeter.greetMeOneWay("once");
  greeter.greetMeOneWay("twice");
  greeter.greetMeOneWay("thrice");
  verifyOnewayAnonymousAcks();
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTwowayNonAnonymousMaximumSequenceLength2() throws Exception {
  init("org/apache/cxf/systest/ws/rm/seqlength10.xml",true);
  RMManager manager=greeterBus.getExtension(RMManager.class);
  assertEquals("Unexpected maximum sequence length.",10,manager.getSourcePolicy().getSequenceTerminationPolicy().getMaxLength());
  manager.getSourcePolicy().getSequenceTerminationPolicy().setMaxLength(2);
  greeter.greetMe("one");
  greeter.greetMe("two");
  greeter.greetMe("three");
  awaitMessages(7,6,5000);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(7,true);
  String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETME_ACTION,GREETME_ACTION,RM10Constants.TERMINATE_SEQUENCE_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION,RM10Constants.CREATE_SEQUENCE_ACTION,GREETME_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1","2",null,null,null,"1"},true);
  mf.verifyLastMessage(new boolean[]{false,false,true,false,false,false,false},true);
  mf.verifyAcknowledgements(new boolean[]{false,false,true,false,true,false,false},true);
  mf.verifyMessages(6,false);
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,GREETME_RESPONSE_ACTION,GREETME_RESPONSE_ACTION,RM10Constants.TERMINATE_SEQUENCE_ACTION,RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,GREETME_RESPONSE_ACTION};
  mf.verifyActions(expectedActions,false);
  mf.verifyMessageNumbers(new String[]{null,"1","2",null,null,"1"},false);
  boolean[] expected=new boolean[6];
  expected[2]=true;
  mf.verifyLastMessage(expected,false);
  expected[1]=true;
  expected[5]=true;
  mf.verifyAcknowledgements(expected,false);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwowayNonAnonymousDeferred() throws Exception {
  init("org/apache/cxf/systest/ws/rm/deferred.xml",true);
  greeter.greetMe("one");
  greeter.greetMe("two");
  awaitMessages(3,3);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(3,true);
  String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETME_ACTION,GREETME_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1","2"},true);
  mf.verifyLastMessage(new boolean[3],true);
  mf.verifyAcknowledgements(new boolean[3],true);
  mf.verifyMessages(3,false);
  mf.verifyLastMessage(new boolean[3],false);
  mf.verifyAcknowledgements(new boolean[3],false);
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,GREETME_RESPONSE_ACTION,GREETME_RESPONSE_ACTION};
  mf.verifyActions(expectedActions,false);
  mf.verifyMessageNumbers(new String[]{null,"1","2"},false);
  mf.purge();
  awaitMessages(1,0);
  mf.reset(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages());
  mf.verifyMessageNumbers(new String[1],true);
  mf.verifyLastMessage(new boolean[1],true);
  mf.verifyAcknowledgements(new boolean[]{true},true);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwowayNonAnonymousDispatch() throws Exception {
  init("org/apache/cxf/systest/ws/rm/rminterceptors.xml",true,true);
  dispatch.getRequestContext().put(MessageContext.WSDL_OPERATION,GREETME_NAME);
  verifyDOMResponse(dispatch.invoke(getDOMRequest("One")),"ONE");
  verifyDOMResponse(dispatch.invoke(getDOMRequest("Two")),"TWO");
  verifyDOMResponse(dispatch.invoke(getDOMRequest("Three")),"THREE");
  verifyTwowayNonAnonymous();
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwowayMessageLossAsyncExecutor() throws Exception {
  testTwowayMessageLoss(Executors.newSingleThreadExecutor());
}

</code></pre>

<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@After public void tearDown() throws Exception {
  try {
    stopClient();
    stopControl();
  }
 catch (  Throwable t) {
  }
}

</code></pre>

<pre class="type-3 type-12 type-5 type-2 type-1 type-13 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnknownSequence() throws Exception {
  init("org/apache/cxf/systest/ws/rm/rminterceptors.xml");
class SequenceIdInterceptor extends AbstractPhaseInterceptor<Message> {
    SequenceIdInterceptor(){
      super(Phase.PRE_STREAM);
    }
    public void handleMessage(    Message m){
      RMProperties rmps=RMContextUtils.retrieveRMProperties(m,true);
      if (null != rmps && null != rmps.getSequence()) {
        rmps.getSequence().getIdentifier().setValue("UNKNOWN");
      }
    }
  }
  greeterBus.getOutInterceptors().add(new SequenceIdInterceptor());
  RMManager manager=greeterBus.getExtension(RMManager.class);
  manager.getConfiguration().setBaseRetransmissionInterval(new Long(2000));
  try {
    greeter.greetMe("one");
    fail("Expected fault.");
  }
 catch (  WebServiceException ex) {
    SoapFault sf=(SoapFault)ex.getCause();
    assertEquals("Unexpected fault code.",Soap11.getInstance().getSender(),sf.getFaultCode());
    assertNull("Unexpected sub code.",sf.getSubCode());
    assertTrue("Unexpected reason.",sf.getReason().endsWith("is not a known Sequence identifier."));
  }
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifySequenceFault(RM10Constants.UNKNOWN_SEQUENCE_FAULT_QNAME,false,1);
  String[] expectedActions=new String[3];
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,RM10_GENERIC_FAULT_ACTION};
  mf.verifyActions(expectedActions,false);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnewayAnonymousAcksDispatch() throws Exception {
  init("org/apache/cxf/systest/ws/rm/rminterceptors.xml",false,true);
  dispatch.getRequestContext().put(MessageContext.WSDL_OPERATION,GREETMEONEWAY_NAME);
  dispatch.invokeOneWay(getDOMRequest("One",true));
  dispatch.invokeOneWay(getDOMRequest("Two",true));
  dispatch.invokeOneWay(getDOMRequest("Three",true));
  verifyOnewayAnonymousAcks();
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testServerSideMessageLoss() throws Exception {
  init("org/apache/cxf/systest/ws/rm/message-loss-server.xml",true);
  List<Interceptor<? extends Message>> outInterceptors=greeterBus.getOutInterceptors();
  for (  Interceptor<? extends Message> i : outInterceptors) {
    if (i.getClass().equals(MessageLossSimulator.class)) {
      outInterceptors.remove(i);
      break;
    }
  }
  greeterBus.getExtension(RMManager.class).getConfiguration().setBaseRetransmissionInterval(new Long(60000));
  greeter.greetMe("one");
  greeter.greetMe("two");
  awaitMessages(3,3);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(3,true);
  String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETME_ACTION,GREETME_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1","2"},true);
  mf.verifyLastMessage(new boolean[]{false,false,false},true);
  mf.verifyAcknowledgements(new boolean[]{false,false,true},true);
  mf.verifyMessages(3,false);
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,GREETME_RESPONSE_ACTION,GREETME_RESPONSE_ACTION};
  mf.verifyActions(expectedActions,false);
  mf.verifyMessageNumbers(new String[]{null,"1","2"},false);
  mf.verifyLastMessage(new boolean[3],false);
  mf.verifyAcknowledgements(new boolean[]{false,true,true},false);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwowayNonAnonymousDispatchProvider() throws Exception {
  init("org/apache/cxf/systest/ws/rm/rminterceptors_provider.xml",true,true);
  dispatch.getRequestContext().put(MessageContext.WSDL_OPERATION,GREETME_NAME);
  verifyDOMResponse(dispatch.invoke(getDOMRequest("One")),"ONE");
  verifyDOMResponse(dispatch.invoke(getDOMRequest("Two")),"TWO");
  verifyDOMResponse(dispatch.invoke(getDOMRequest("Three")),"THREE");
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testConcurrency() throws Exception {
  init("org/apache/cxf/systest/ws/rm/rminterceptors.xml",true);
  int max=5;
  for (int i=0; i < max; i++) {
    greeter.greetMeAsync(Integer.toString(i));
  }
  awaitMessages(max + 1,1,7500);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(max + 1,true);
  String[] expectedActions=new String[max + 1];
  expectedActions[0]=RM10Constants.CREATE_SEQUENCE_ACTION;
  for (int i=1; i < expectedActions.length; i++) {
    expectedActions[i]=GREETME_ACTION;
  }
  mf.verifyActions(expectedActions,true);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnewayMessageLossAsyncExecutor() throws Exception {
  testOnewayMessageLoss(Executors.newSingleThreadExecutor());
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTwowayNonAnonymousProvider() throws Exception {
  init("org/apache/cxf/systest/ws/rm/rminterceptors_provider.xml",true);
  assertEquals("ONE",greeter.greetMe("one"));
  assertEquals("TWO",greeter.greetMe("two"));
  assertEquals("THREE",greeter.greetMe("three"));
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwowayNonAnonymousEndpointSpecific() throws Exception {
  init("org/apache/cxf/systest/ws/rm/twoway-endpoint-specific.xml",true);
  greeter.greetMe("one");
  greeter.greetMe("two");
  greeter.greetMe("three");
  awaitMessages(4,4);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(4,true);
  String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETME_ACTION,GREETME_ACTION,GREETME_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1","2","3"},true);
  mf.verifyLastMessage(new boolean[]{false,false,false,false},true);
  mf.verifyAcknowledgements(new boolean[]{false,false,true,true},true);
  mf.verifyMessages(4,false);
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,GREETME_RESPONSE_ACTION,GREETME_RESPONSE_ACTION,GREETME_RESPONSE_ACTION};
  mf.verifyActions(expectedActions,false);
  mf.verifyMessageNumbers(new String[]{null,"1","2","3"},false);
  mf.verifyLastMessage(new boolean[4],false);
  mf.verifyAcknowledgements(new boolean[]{false,true,true,true},false);
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTwowayAnonymousSequenceLength1() throws Exception {
  init("org/apache/cxf/systest/ws/rm/seqlength1.xml");
  String v=greeter.greetMe("once");
  assertEquals("Unexpected response","ONCE",v);
  awaitMessages(4,3);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(4,true);
  String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETME_ACTION,RM10Constants.TERMINATE_SEQUENCE_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1",null,null},true);
  mf.verifyLastMessage(new boolean[]{false,true,false,false},true);
  mf.verifyAcknowledgements(new boolean[]{false,false,false,true},true);
  mf.verifyMessages(3,false);
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,GREETME_RESPONSE_ACTION,RM10Constants.TERMINATE_SEQUENCE_ACTION};
  mf.verifyActions(expectedActions,false);
  mf.verifyMessageNumbers(new String[]{null,"1",null},false);
  mf.verifyLastMessage(new boolean[]{false,true,false},false);
  mf.verifyAcknowledgements(new boolean[]{false,true,false},false);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiClientOneway() throws Exception {
  SpringBusFactory bf=new SpringBusFactory();
  String cfgResource="org/apache/cxf/systest/ws/rm/rminterceptors.xml";
  initControl(bf,cfgResource);
class ClientThread extends Thread {
    Greeter greeter;
    Bus greeterBus;
    InMessageRecorder inRecorder;
    OutMessageRecorder outRecorder;
    String id;
    ClientThread(    SpringBusFactory bf,    String cfgResource,    int n){
      SequenceTest.this.initGreeter(bf,cfgResource,false,null);
      greeter=SequenceTest.this.greeter;
      greeterBus=SequenceTest.this.greeterBus;
      inRecorder=SequenceTest.this.inRecorder;
      outRecorder=SequenceTest.this.outRecorder;
      id="client " + n;
    }
    public void run(){
      greeter.greetMeOneWay(id + ": once");
      greeter.greetMeOneWay(id + ": twice");
      greeter.greetMeOneWay(id + ": thrice");
      awaitMessages(4,4);
    }
  }
  ClientThread clients[]=new ClientThread[2];
  try {
    for (int i=0; i < clients.length; i++) {
      clients[i]=new ClientThread(bf,cfgResource,i);
    }
    for (int i=0; i < clients.length; i++) {
      clients[i].start();
    }
    for (int i=0; i < clients.length; i++) {
      clients[i].join();
      MessageFlow mf=new MessageFlow(clients[i].outRecorder.getOutboundMessages(),clients[i].inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
      mf.verifyMessages(4,true);
      String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETMEONEWAY_ACTION,GREETMEONEWAY_ACTION,GREETMEONEWAY_ACTION};
      mf.verifyActions(expectedActions,true);
      mf.verifyMessageNumbers(new String[]{null,"1","2","3"},true);
      mf.verifyMessages(4,false);
      expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION};
      mf.verifyActions(expectedActions,false);
      mf.verifyMessageNumbers(new String[]{null,null,null,null},false);
      mf.verifyAcknowledgements(new boolean[]{false,true,true,true},false);
    }
  }
  finally {
    for (int i=0; i < clients.length; i++) {
      greeter=clients[i].greeter;
      greeterBus=clients[i].greeterBus;
      stopClient();
    }
    greeter=null;
  }
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnewayAnonymousAcks() throws Exception {
  init("org/apache/cxf/systest/ws/rm/rminterceptors.xml");
  greeter.greetMeOneWay("once");
  greeter.greetMeOneWay("twice");
  greeter.greetMeOneWay("thrice");
  verifyOnewayAnonymousAcks();
}

</code></pre>

<pre class="type-18 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testMultiClientTwoway() throws Exception {
  SpringBusFactory bf=new SpringBusFactory();
  String cfgResource="org/apache/cxf/systest/ws/rm/rminterceptors.xml";
  initControl(bf,cfgResource);
class ClientThread extends Thread {
    Greeter greeter;
    Bus greeterBus;
    InMessageRecorder inRecorder;
    OutMessageRecorder outRecorder;
    String id;
    ClientThread(    SpringBusFactory bf,    String cfgResource,    int n){
      super("client " + n);
      SequenceTest.this.initGreeter(bf,cfgResource,true,null);
      greeter=SequenceTest.this.greeter;
      greeterBus=SequenceTest.this.greeterBus;
      inRecorder=SequenceTest.this.inRecorder;
      outRecorder=SequenceTest.this.outRecorder;
      id="client " + n;
    }
    public void run(){
      String s=greeter.greetMe(id + ": a").toLowerCase();
      if (!s.contains(id)) {
        System.out.println("Correlation problem <" + s + ">  <"+ id+ ">");
      }
      s=greeter.greetMe(id + ": b").toLowerCase();
      if (!s.contains(id)) {
        System.out.println("Correlation problem <" + s + ">  <"+ id+ ">");
      }
      s=greeter.greetMe(id + ": c").toLowerCase();
      if (!s.contains(id)) {
        System.out.println("Correlation problem <" + s + ">  <"+ id+ ">");
      }
      awaitMessages(5,4);
    }
  }
  ClientThread clients[]=new ClientThread[2];
  try {
    for (int i=0; i < clients.length; i++) {
      clients[i]=new ClientThread(bf,cfgResource,i);
    }
    for (int i=0; i < clients.length; i++) {
      clients[i].start();
    }
    for (int i=0; i < clients.length; i++) {
      clients[i].join();
    }
    for (int i=0; i < clients.length; i++) {
      MessageFlow mf=new MessageFlow(clients[i].outRecorder.getOutboundMessages(),clients[i].inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
      mf.verifyMessages(5,true);
      String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETME_ACTION,GREETME_ACTION,GREETME_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION};
      mf.verifyActions(expectedActions,true);
      mf.verifyMessageNumbers(new String[]{null,"1","2","3",null},true);
      mf.verifyLastMessage(new boolean[]{false,false,false,false,false},true);
      mf.verifyAcknowledgements(new boolean[]{false,false,true,true,true},true);
      mf.verifyMessages(4,false);
      expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,GREETME_RESPONSE_ACTION,GREETME_RESPONSE_ACTION,GREETME_RESPONSE_ACTION};
      mf.verifyActions(expectedActions,false);
      mf.verifyMessageNumbers(new String[]{null,"1","2","3"},false);
      mf.verifyLastMessage(new boolean[4],false);
      mf.verifyAcknowledgements(new boolean[]{false,true,true,true},false);
    }
  }
  finally {
    for (int i=0; i < clients.length; i++) {
      greeter=clients[i].greeter;
      greeterBus=clients[i].greeterBus;
      stopClient();
    }
    greeter=null;
  }
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwowayAtMostOnce() throws Exception {
  doTestTwowayNoDuplicates("org/apache/cxf/systest/ws/rm/atmostonce.xml");
}

</code></pre>

<pre class="type-12 type-2 type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateSequenceRefused() throws Exception {
  init("org/apache/cxf/systest/ws/rm/limit-seqs.xml");
  RMManager manager=greeterBus.getExtension(RMManager.class);
  assertEquals("Unexpected maximum sequence count.",1,manager.getDestinationPolicy().getMaxSequences());
  greeter.greetMe("one");
  Closeable oldGreeter=(Closeable)greeter;
  initProxy(false,null);
  try {
    greeter.greetMe("two");
    fail("Expected fault.");
  }
 catch (  WebServiceException ex) {
  }
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifySequenceFault(RM10Constants.CREATE_SEQUENCE_REFUSED_FAULT_QNAME,false,2);
  String[] expectedActions=new String[3];
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,GREETME_RESPONSE_ACTION,RM10_GENERIC_FAULT_ACTION};
  mf.verifyActions(expectedActions,false);
  oldGreeter.close();
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnewayAnonymousAcksSuppressed() throws Exception {
  testOnewayAnonymousAcksSuppressed(null);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testOnewayAnonymousAcksSequenceLength1() throws Exception {
  init("org/apache/cxf/systest/ws/rm/seqlength1.xml");
  greeter.greetMeOneWay("once");
  greeter.greetMeOneWay("twice");
  awaitMessages(6,4);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(6,true);
  String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETMEONEWAY_ACTION,RM10Constants.TERMINATE_SEQUENCE_ACTION,RM10Constants.CREATE_SEQUENCE_ACTION,GREETMEONEWAY_ACTION,RM10Constants.TERMINATE_SEQUENCE_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1",null,null,"1",null},true);
  mf.verifyLastMessage(new boolean[]{false,true,false,false,true,false},true);
  mf.verifyMessages(4,false);
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION,RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION};
  mf.verifyActions(expectedActions,false);
  mf.verifyMessageNumbers(new String[]{null,null,null,null},false);
  mf.verifyLastMessage(new boolean[]{false,false,false,false},false);
  mf.verifyAcknowledgements(new boolean[]{false,true,false,true},false);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwowayExactlyOnce() throws Exception {
  doTestTwowayNoDuplicates("org/apache/cxf/systest/ws/rm/exactlyonce.xml");
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTwowayNonAnonymous() throws Exception {
  init("org/apache/cxf/systest/ws/rm/rminterceptors.xml",true);
  assertEquals("ONE",greeter.greetMe("one"));
  assertEquals("TWO",greeter.greetMe("two"));
  assertEquals("THREE",greeter.greetMe("three"));
  verifyTwowayNonAnonymous();
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTerminateOnShutdown() throws Exception {
  init("org/apache/cxf/systest/ws/rm/terminate-on-shutdown.xml",true);
  RMManager manager=greeterBus.getExtension(RMManager.class);
  RMMemoryStore store=new RMMemoryStore();
  manager.setStore(store);
  greeter.greetMeOneWay("neutrophil");
  greeter.greetMeOneWay("basophil");
  greeter.greetMeOneWay("eosinophil");
  stopGreeterButNotCloseConduit();
  awaitMessages(6,2);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(6,true);
  String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETMEONEWAY_ACTION,GREETMEONEWAY_ACTION,GREETMEONEWAY_ACTION,RM10Constants.CLOSE_SEQUENCE_ACTION,RM10Constants.TERMINATE_SEQUENCE_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1","2","3","4",null},true);
  mf.verifyMessages(2,false);
  mf.verifyMessageNumbers(new String[2],false);
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,RM10Constants.SEQUENCE_ACKNOWLEDGMENT_ACTION};
  mf.verifyActions(expectedActions,false);
  mf.verifyAcknowledgements(new boolean[]{false,true},false);
  assertEquals("sequences not released from DB",0,store.ssmap.size());
  assertEquals("messages not released from DB",0,store.ommap.size());
  assertEquals("sequence not closed in DB",1,store.ssclosed.size());
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTwowayNonAnonymousNoOffer() throws Exception {
  init("org/apache/cxf/systest/ws/rm/no-offer.xml",true);
  greeter.greetMe("one");
  awaitMessages(3,3);
  MessageFlow mf=new MessageFlow(outRecorder.getOutboundMessages(),inRecorder.getInboundMessages(),Names200408.WSA_NAMESPACE_NAME,RM10Constants.NAMESPACE_URI);
  mf.verifyMessages(3,true);
  String[] expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_ACTION,GREETME_ACTION,RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION};
  mf.verifyActions(expectedActions,true);
  mf.verifyMessageNumbers(new String[]{null,"1",null},true);
  mf.verifyLastMessage(new boolean[]{false,false,false},true);
  mf.verifyAcknowledgements(new boolean[]{false,false,false},true);
  expectedActions=new String[]{RM10Constants.CREATE_SEQUENCE_RESPONSE_ACTION,RM10Constants.CREATE_SEQUENCE_ACTION,GREETME_RESPONSE_ACTION};
  mf.verifyActions(expectedActions,false);
  mf.verifyMessageNumbers(new String[]{null,null,"1"},false);
  mf.verifyAcknowledgements(new boolean[]{false,false,false},false);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
