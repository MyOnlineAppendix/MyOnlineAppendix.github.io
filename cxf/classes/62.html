<h3 style="margin:0px">Class: org.apache.cxf.attachment.AttachmentDeserializerTest (16 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(13)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(11)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(10)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="13"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('13')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-13"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="16"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('16')" data-toggle="tooltip" title="Verifies values related to public fields."><kbd id="tag-16"class="label-info"style="display: inline-block;font-size:7pt" >PublicFieldVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="15"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('15')" data-toggle="tooltip" title="Verifies assertions in iterations"><kbd id="tag-15"class="label-info"style="display: inline-block;font-size:7pt" >IterativeVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(2)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-3 type-15 type-5 type-2 type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLazyAttachmentCollection() throws Exception {
  InputStream is=getClass().getResourceAsStream("mimedata2");
  String ct="multipart/related; type=\"application/xop+xml\"; " + "start=\"<soap.xml@xfire.codehaus.org>\"; " + "start-info=\"text/xml; charset=utf-8\"; "+ "boundary=\"----=_Part_4_701508.1145579811786\"";
  msg.put(Message.CONTENT_TYPE,ct);
  msg.setContent(InputStream.class,is);
  AttachmentDeserializer deserializer=new AttachmentDeserializer(msg);
  deserializer.initializeAttachments();
  InputStream attBody=msg.getContent(InputStream.class);
  assertTrue(attBody != is);
  assertTrue(attBody instanceof DelegatingInputStream);
  attBody.close();
  assertEquals(2,msg.getAttachments().size());
  List<String> cidlist=new ArrayList<String>();
  cidlist.add("xfire_logo.jpg");
  cidlist.add("xfire_logo2.jpg");
  for (Iterator<Attachment> it=msg.getAttachments().iterator(); it.hasNext(); ) {
    Attachment a=it.next();
    assertTrue(cidlist.remove(a.getId()));
    it.remove();
  }
  assertEquals(0,cidlist.size());
  assertEquals(0,msg.getAttachments().size());
}

</code></pre>

<pre class="type-3 type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCXF3582c() throws Exception {
  String contentType="multipart/related; type=\"application/xop+xml\"; " + "boundary=\"uuid:906fa67b-85f9-4ef5-8e3d-52416022d463\"; " + "start=\"<root.message@cxf.apache.org>\"; start-info=\"text/xml\"";
  Message message=new MessageImpl();
  message.put(Message.CONTENT_TYPE,contentType);
  message.setContent(InputStream.class,getClass().getResourceAsStream("cxf3582.data"));
  message.put(AttachmentDeserializer.ATTACHMENT_DIRECTORY,System.getProperty("java.io.tmpdir"));
  message.put(AttachmentDeserializer.ATTACHMENT_MEMORY_THRESHOLD,String.valueOf(AttachmentDeserializer.THRESHOLD));
  AttachmentDeserializer ad=new AttachmentDeserializer(message,Collections.singletonList("multipart/related"));
  ad.initializeAttachments();
  String cid="1a66bb35-67fc-4e89-9f33-48af417bf9fe-1@apache.org";
  DataSource ds=AttachmentUtil.getAttachmentDataSource(cid,message.getAttachments());
  byte bts[]=new byte[1024];
  InputStream ins=ds.getInputStream();
  int count=0;
  int x=ins.read(bts,100,600);
  while (x != -1) {
    count+=x;
    x=ins.read(bts,100,600);
  }
  assertEquals(500,count);
  assertEquals(-1,ins.read(new byte[1000],100,600));
  cid="1a66bb35-67fc-4e89-9f33-48af417bf9fe-2@apache.org";
  ds=AttachmentUtil.getAttachmentDataSource(cid,message.getAttachments());
  bts=new byte[1024];
  ins=ds.getInputStream();
  count=0;
  x=ins.read(bts,100,600);
  while (x != -1) {
    count+=x;
    x=ins.read(bts,100,600);
  }
  assertEquals(1249,count);
  assertEquals(-1,ins.read(new byte[1000],100,600));
}

</code></pre>

<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  msg=new MessageImpl();
  Exchange exchange=new ExchangeImpl();
  msg.setExchange(exchange);
}

</code></pre>

<pre class="type-3 type-5 type-2 type-13 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeserializerSwA() throws Exception {
  InputStream is=getClass().getResourceAsStream("swadata");
  String ct="multipart/related; type=\"text/xml\"; " + "start=\"<86048FF3556694F7DA1918466DDF8143>\";    " + "boundary=\"----=_Part_0_14158819.1167275505862\"";
  msg.put(Message.CONTENT_TYPE,ct);
  msg.setContent(InputStream.class,is);
  AttachmentDeserializer deserializer=new AttachmentDeserializer(msg);
  deserializer.initializeAttachments();
  InputStream attBody=msg.getContent(InputStream.class);
  assertTrue(attBody != is);
  assertTrue(attBody instanceof DelegatingInputStream);
  Collection<Attachment> atts=msg.getAttachments();
  assertNotNull(atts);
  Iterator<Attachment> itr=atts.iterator();
  assertTrue(itr.hasNext());
  Attachment a=itr.next();
  assertNotNull(a);
  InputStream attIs=a.getDataHandler().getInputStream();
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  IOUtils.copy(attBody,out);
  assertTrue(out.toString().startsWith("<?xml"));
  assertTrue(attIs.read() == 'f');
  assertTrue(attIs.read() == 'o');
  assertTrue(attIs.read() == 'o');
  assertTrue(attIs.read() == 'b');
  assertTrue(attIs.read() == 'a');
  assertTrue(attIs.read() == 'r');
  assertTrue(attIs.read() == -1);
}

</code></pre>

<pre class="type-3 type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCXF3582b() throws Exception {
  String contentType="multipart/related; type=\"application/xop+xml\"; " + "boundary=\"uuid:906fa67b-85f9-4ef5-8e3d-52416022d463\"; " + "start=\"<root.message@cxf.apache.org>\"; start-info=\"text/xml\"";
  Message message=new MessageImpl();
  message.put(Message.CONTENT_TYPE,contentType);
  message.setContent(InputStream.class,getClass().getResourceAsStream("cxf3582.data"));
  message.put(AttachmentDeserializer.ATTACHMENT_DIRECTORY,System.getProperty("java.io.tmpdir"));
  message.put(AttachmentDeserializer.ATTACHMENT_MEMORY_THRESHOLD,String.valueOf(AttachmentDeserializer.THRESHOLD));
  AttachmentDeserializer ad=new AttachmentDeserializer(message,Collections.singletonList("multipart/related"));
  ad.initializeAttachments();
  String cid="1a66bb35-67fc-4e89-9f33-48af417bf9fe-1@apache.org";
  DataSource ds=AttachmentUtil.getAttachmentDataSource(cid,message.getAttachments());
  byte bts[]=new byte[1024];
  InputStream ins=ds.getInputStream();
  int count=0;
  int x=ins.read(bts,500,200);
  while (x != -1) {
    count+=x;
    x=ins.read(bts,500,200);
  }
  assertEquals(500,count);
  assertEquals(-1,ins.read(new byte[1000],500,500));
  cid="1a66bb35-67fc-4e89-9f33-48af417bf9fe-2@apache.org";
  ds=AttachmentUtil.getAttachmentDataSource(cid,message.getAttachments());
  bts=new byte[1024];
  ins=ds.getInputStream();
  count=0;
  x=ins.read(bts,500,200);
  while (x != -1) {
    count+=x;
    x=ins.read(bts,500,200);
  }
  assertEquals(1249,count);
  assertEquals(-1,ins.read(new byte[1000],500,500));
}

</code></pre>

<pre class="type-3 type-5 type-2 type-1 type-13 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeserializerMtomWithAxis2StyleBoundaries() throws Exception {
  InputStream is=getClass().getResourceAsStream("axis2_mimedata");
  String ct="multipart/related; type=\"application/xop+xml\"; " + "start=\"<soap.xml@xfire.codehaus.org>\"; " + "start-info=\"text/xml; charset=utf-8\"; "+ "boundary=MIMEBoundaryurn_uuid_6BC4984D5D38EB283C1177616488109";
  msg.put(Message.CONTENT_TYPE,ct);
  msg.setContent(InputStream.class,is);
  AttachmentDeserializer deserializer=new AttachmentDeserializer(msg);
  deserializer.initializeAttachments();
  InputStream attBody=msg.getContent(InputStream.class);
  assertTrue(attBody != is);
  assertTrue(attBody instanceof DelegatingInputStream);
  Collection<Attachment> atts=msg.getAttachments();
  assertNotNull(atts);
  Iterator<Attachment> itr=atts.iterator();
  assertTrue(itr.hasNext());
  Attachment a=itr.next();
  assertNotNull(a);
  InputStream attIs=a.getDataHandler().getInputStream();
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  IOUtils.copy(attBody,out);
  assertTrue(out.toString().startsWith("<env:Envelope"));
  assertEquals(255,attIs.read());
  assertEquals(216,attIs.read());
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSmallStream() throws Exception {
  byte[] messageBytes=("------=_Part_1\n\nJJJJ\n------=_Part_1\n\n" + "Content-Transfer-Encoding: binary\n\n=3D=3D=3D\n------=_Part_1\n").getBytes();
  PushbackInputStream pushbackStream=new PushbackInputStream(new ByteArrayInputStream(messageBytes),2048);
  pushbackStream.read(new byte[4096],0,4015);
  pushbackStream.unread(messageBytes);
  pushbackStream.read(new byte[72]);
  MimeBodyPartInputStream m=new MimeBodyPartInputStream(pushbackStream,"------=_Part_1".getBytes(),2048);
  assertEquals(10,m.read(new byte[1000]));
  assertEquals(-1,m.read(new byte[1000]));
  assertEquals(-1,m.read(new byte[1000]));
  m.close();
}

</code></pre>

<pre class="type-3 type-15 type-5 type-2 type-1 type-16 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCXF3383() throws Exception {
  String contentType="multipart/related; type=\"application/xop+xml\";" + " boundary=\"uuid:7a555f51-c9bb-4bd4-9929-706899e2f793\"; start=" + "\"<root.message@cxf.apache.org>\"; start-info=\"text/xml\"";
  Message message=new MessageImpl();
  message.put(Message.CONTENT_TYPE,contentType);
  message.setContent(InputStream.class,getClass().getResourceAsStream("cxf3383.data"));
  message.put(AttachmentDeserializer.ATTACHMENT_DIRECTORY,System.getProperty("java.io.tmpdir"));
  message.put(AttachmentDeserializer.ATTACHMENT_MEMORY_THRESHOLD,String.valueOf(AttachmentDeserializer.THRESHOLD));
  AttachmentDeserializer ad=new AttachmentDeserializer(message,Collections.singletonList("multipart/related"));
  ad.initializeAttachments();
  for (int x=1; x < 50; x++) {
    String cid="1882f79d-e20a-4b36-a222-7a75518cf395-" + x + "@cxf.apache.org";
    DataSource ds=AttachmentUtil.getAttachmentDataSource(cid,message.getAttachments());
    byte bts[]=new byte[1024];
    InputStream ins=ds.getInputStream();
    int count=0;
    int sz=ins.read(bts,0,bts.length);
    while (sz != -1) {
      count+=sz;
      assertTrue(count < bts.length);
      sz=ins.read(bts,count,bts.length - count);
    }
    assertEquals(x + 1,count);
  }
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCXF2542() throws Exception {
  StringBuilder buf=new StringBuilder();
  buf.append("------=_Part_0_2180223.1203118300920\n");
  buf.append("Content-Type: application/xop+xml; charset=UTF-8; type=\"text/xml\"\n");
  buf.append("Content-Transfer-Encoding: 8bit\n");
  buf.append("Content-ID: <soap.xml@xfire.codehaus.org>\n");
  buf.append("\n");
  buf.append("<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" " + "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" " + "xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">"+ "<soap:Body><getNextMessage xmlns=\"http://foo.bar\" /></soap:Body>"+ "</soap:Envelope>\n");
  buf.append("------=_Part_0_2180223.1203118300920--\n");
  InputStream rawInputStream=new ByteArrayInputStream(buf.toString().getBytes());
  MessageImpl message=new MessageImpl();
  message.setContent(InputStream.class,rawInputStream);
  message.put(Message.CONTENT_TYPE,"multipart/related; type=\"application/xop+xml\"; " + "start=\"<soap.xml@xfire.codehaus.org>\"; " + "start-info=\"text/xml\"; boundary=\"----=_Part_0_2180223.1203118300920\"");
  new AttachmentDeserializer(message).initializeAttachments();
  InputStream inputStreamWithoutAttachments=message.getContent(InputStream.class);
  SAXParser parser=SAXParserFactory.newInstance().newSAXParser();
  parser.parse(inputStreamWithoutAttachments,new DefaultHandler());
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void imitateAttachmentInInterceptorForMessageWithMissingBoundary() throws Exception {
  ByteArrayInputStream inputStream;
  String contentType="multipart/mixed;boundary=abc123";
  String data="--abc123\r\n\r\n<Document></Document>\r\n\r\n";
  Message message;
  inputStream=new ByteArrayInputStream(data.getBytes());
  message=new XMLMessage(new MessageImpl());
  message.put(Message.CONTENT_TYPE,contentType);
  message.setContent(InputStream.class,inputStream);
  message.put(AttachmentDeserializer.ATTACHMENT_DIRECTORY,System.getProperty("java.io.tmpdir"));
  message.put(AttachmentDeserializer.ATTACHMENT_MEMORY_THRESHOLD,String.valueOf(AttachmentDeserializer.THRESHOLD));
  AttachmentDeserializer ad=new AttachmentDeserializer(message,Collections.singletonList("multipart/mixed"));
  ad.initializeAttachments();
  message.getAttachments().size();
}

</code></pre>

<pre class="type-3 type-2 type-1 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testCXF3582() throws Exception {
  String contentType="multipart/related; type=\"application/xop+xml\"; " + "boundary=\"uuid:906fa67b-85f9-4ef5-8e3d-52416022d463\"; " + "start=\"<root.message@cxf.apache.org>\"; start-info=\"text/xml\"";
  Message message=new MessageImpl();
  message.put(Message.CONTENT_TYPE,contentType);
  message.setContent(InputStream.class,getClass().getResourceAsStream("cxf3582.data"));
  message.put(AttachmentDeserializer.ATTACHMENT_DIRECTORY,System.getProperty("java.io.tmpdir"));
  message.put(AttachmentDeserializer.ATTACHMENT_MEMORY_THRESHOLD,String.valueOf(AttachmentDeserializer.THRESHOLD));
  AttachmentDeserializer ad=new AttachmentDeserializer(message,Collections.singletonList("multipart/related"));
  ad.initializeAttachments();
  String cid="1a66bb35-67fc-4e89-9f33-48af417bf9fe-1@apache.org";
  DataSource ds=AttachmentUtil.getAttachmentDataSource(cid,message.getAttachments());
  byte bts[]=new byte[1024];
  InputStream ins=ds.getInputStream();
  int count=ins.read(bts,0,bts.length);
  assertEquals(500,count);
  assertEquals(-1,ins.read(new byte[1000],500,500));
  cid="1a66bb35-67fc-4e89-9f33-48af417bf9fe-2@apache.org";
  ds=AttachmentUtil.getAttachmentDataSource(cid,message.getAttachments());
  bts=new byte[1024];
  ins=ds.getInputStream();
  count=ins.read(bts,0,bts.length);
  assertEquals(1024,count);
  assertEquals(225,ins.read(new byte[1000],500,500));
  assertEquals(-1,ins.read(new byte[1000],500,500));
}

</code></pre>

<pre class="type-3 type-5 type-2 type-1 type-13 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeserializerMtom() throws Exception {
  InputStream is=getClass().getResourceAsStream("mimedata");
  String ct="multipart/related; type=\"application/xop+xml\"; " + "start=\"<soap.xml@xfire.codehaus.org>\"; " + "start-info=\"text/xml; charset=utf-8\"; "+ "boundary=\"----=_Part_4_701508.1145579811786\"";
  msg.put(Message.CONTENT_TYPE,ct);
  msg.setContent(InputStream.class,is);
  AttachmentDeserializer deserializer=new AttachmentDeserializer(msg);
  deserializer.initializeAttachments();
  InputStream attBody=msg.getContent(InputStream.class);
  assertTrue(attBody != is);
  assertTrue(attBody instanceof DelegatingInputStream);
  Collection<Attachment> atts=msg.getAttachments();
  assertNotNull(atts);
  Iterator<Attachment> itr=atts.iterator();
  assertTrue(itr.hasNext());
  Attachment a=itr.next();
  assertNotNull(a);
  InputStream attIs=a.getDataHandler().getInputStream();
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  IOUtils.copy(attBody,out);
  assertTrue(out.toString().startsWith("<env:Envelope"));
  assertEquals(255,attIs.read());
  assertEquals(216,(char)attIs.read());
}

</code></pre>

<pre class="type-3 type-5 type-2 type-13 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeserializerSwAWithoutBoundryInContentType() throws Exception {
  InputStream is=getClass().getResourceAsStream("swadata");
  String ct="multipart/related; type=\"text/xml\"; ";
  msg.put(Message.CONTENT_TYPE,ct);
  msg.setContent(InputStream.class,is);
  AttachmentDeserializer deserializer=new AttachmentDeserializer(msg);
  deserializer.initializeAttachments();
  InputStream attBody=msg.getContent(InputStream.class);
  assertTrue(attBody != is);
  assertTrue(attBody instanceof DelegatingInputStream);
  Collection<Attachment> atts=msg.getAttachments();
  assertNotNull(atts);
  Iterator<Attachment> itr=atts.iterator();
  assertTrue(itr.hasNext());
  Attachment a=itr.next();
  assertNotNull(a);
  InputStream attIs=a.getDataHandler().getInputStream();
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  IOUtils.copy(attBody,out);
  assertTrue(out.toString().startsWith("<?xml"));
  assertTrue(attIs.read() == 'f');
  assertTrue(attIs.read() == 'o');
  assertTrue(attIs.read() == 'o');
  assertTrue(attIs.read() == 'b');
  assertTrue(attIs.read() == 'a');
  assertTrue(attIs.read() == 'r');
  assertTrue(attIs.read() == -1);
  assertFalse(itr.hasNext());
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDoesntReturnZero() throws Exception {
  String contentType="multipart/mixed;boundary=----=_Part_1";
  byte[] messageBytes=("------=_Part_1\n\n" + "JJJJ\n" + "------=_Part_1"+ "\n\nContent-Transfer-Encoding: binary\n\n"+ "ABCD1\r\n"+ "------=_Part_1"+ "\n\nContent-Transfer-Encoding: binary\n\n"+ "ABCD2\r\n"+ "------=_Part_1"+ "\n\nContent-Transfer-Encoding: binary\n\n"+ "ABCD3\r\n"+ "------=_Part_1--").getBytes(StandardCharsets.UTF_8);
  ByteArrayInputStream in=new ByteArrayInputStream(messageBytes){
    public int read(    byte[] b,    int off,    int len){
      return super.read(b,off,len >= 2 ? 2 : len);
    }
  }
;
  Message message=new MessageImpl();
  message.put(Message.CONTENT_TYPE,contentType);
  message.setContent(InputStream.class,in);
  message.put(AttachmentDeserializer.ATTACHMENT_DIRECTORY,System.getProperty("java.io.tmpdir"));
  message.put(AttachmentDeserializer.ATTACHMENT_MEMORY_THRESHOLD,String.valueOf(AttachmentDeserializer.THRESHOLD));
  AttachmentDeserializer ad=new AttachmentDeserializer(message,Collections.singletonList("multipart/mixed"));
  ad.initializeAttachments();
  String s=getString(message.getContent(InputStream.class));
  assertEquals("JJJJ",s.trim());
  int count=1;
  for (  Attachment a : message.getAttachments()) {
    s=getString(a.getDataHandler().getInputStream());
    assertEquals("ABCD" + count++,s);
  }
}

</code></pre>

<pre class="type-3 type-5 type-2 type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoBoundaryInCT() throws Exception {
  String message="SomeHeader: foo\n" + "------=_Part_34950_1098328613.1263781527359\n" + "Content-Type: text/xml; charset=UTF-8\n"+ "Content-Transfer-Encoding: binary\n"+ "Content-Id: <318731183421.1263781527359.IBM.WEBSERVICES@auhpap02>\n"+ "\n"+ "<envelope/>\n"+ "------=_Part_34950_1098328613.1263781527359\n"+ "Content-Type: text/xml\n"+ "Content-Transfer-Encoding: binary\n"+ "Content-Id: <b86a5f2d-e7af-4e5e-b71a-9f6f2307cab0>\n"+ "\n"+ "<message>\n"+ "------=_Part_34950_1098328613.1263781527359--";
  Matcher m=Pattern.compile("^--(\\S*)$").matcher(message);
  Assert.assertFalse(m.find());
  m=Pattern.compile("^--(\\S*)$",Pattern.MULTILINE).matcher(message);
  Assert.assertTrue(m.find());
  msg=new MessageImpl();
  msg.setContent(InputStream.class,new ByteArrayInputStream(message.getBytes(StandardCharsets.UTF_8)));
  msg.put(Message.CONTENT_TYPE,"multipart/related");
  AttachmentDeserializer ad=new AttachmentDeserializer(msg);
  ad.initializeAttachments();
  assertEquals(1,msg.getAttachments().size());
}

</code></pre>

<pre class="type-3 type-5 type-2 type-13 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeserializerWithCachedFile() throws Exception {
  InputStream is=getClass().getResourceAsStream("mimedata");
  String ct="multipart/related; type=\"application/xop+xml\"; " + "start=\"<soap.xml@xfire.codehaus.org>\"; " + "start-info=\"text/xml; charset=utf-8\"; "+ "boundary=\"----=_Part_4_701508.1145579811786\"";
  msg.put(Message.CONTENT_TYPE,ct);
  msg.setContent(InputStream.class,is);
  msg.put(AttachmentDeserializer.ATTACHMENT_MEMORY_THRESHOLD,"10");
  AttachmentDeserializer deserializer=new AttachmentDeserializer(msg);
  deserializer.initializeAttachments();
  InputStream attBody=msg.getContent(InputStream.class);
  assertTrue(attBody != is);
  assertTrue(attBody instanceof DelegatingInputStream);
  Collection<Attachment> atts=msg.getAttachments();
  assertNotNull(atts);
  Iterator<Attachment> itr=atts.iterator();
  assertTrue(itr.hasNext());
  Attachment a=itr.next();
  assertNotNull(a);
  InputStream attIs=a.getDataHandler().getInputStream();
  assertFalse(itr.hasNext());
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  IOUtils.copy(attIs,out);
  assertTrue(out.size() > 1000);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
