<h3><span class=" glyphicon glyphicon-tag"/>&nbspBooleanVerifier</h3><kbd>Verifies boolean conditions</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.karaf.bundle.command.bundletree.TreeTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hasAncestor() throws IOException {
  Tree<String> tree=new Tree<String>("root");
  Node<String> child1=tree.addChild("child1");
  child1.addChild("grandchild");
  Node child2=tree.addChild("child2");
  Node node=child2.addChild("grandchild2");
  assertTrue(node.hasAncestor("child2"));
  assertTrue(node.hasAncestor("root"));
  assertFalse(node.hasAncestor("child1"));
}

</code></pre>

<br>
<pre class="type-3 type-4 type-5 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void flattenTree() throws IOException {
  Tree<String> tree=new Tree<String>("root");
  Node<String> child1=tree.addChild("child1");
  child1.addChild("grandchild");
  Node child2=tree.addChild("child2");
  child2.addChild("grandchild");
  Set<String> elements=tree.flatten();
  assertNotNull(elements);
  assertEquals(4,elements.size());
  assertTrue(elements.contains("root"));
  assertTrue(elements.contains("child1"));
  assertTrue(elements.contains("child2"));
  assertTrue(elements.contains("grandchild"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.deployer.kar.KarArtifactInstallerTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void shouldHandleKarFile() throws Exception {
  assertTrue(karArtifactInstaller.canHandle(new File(goodKarFile)));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void shouldHandleZipFileWithKarafManifest() throws Exception {
  assertTrue(karArtifactInstaller.canHandle(new File(zipFileWithKarafManifest)));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void shouldIgnoreZipFileWithoutKarafManifest() throws Exception {
  assertFalse(karArtifactInstaller.canHandle(new File(zipFileWithoutKarafManifest)));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void shouldIgnoreBadZipFile() throws Exception {
  assertFalse(karArtifactInstaller.canHandle(new File(badZipFile)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.features.FeaturesServiceTest </h4><pre class="type-10 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test checks schema validation of submited uri.
 */
@Test public void testSchemaValidation() throws Exception {
  URI uri=createTempRepo("<features name='test' xmlns='http://karaf.apache.org/xmlns/features/v1.0.0'>" + "  <featur><bundle>somebundle</bundle></featur></features>");
  FeaturesServiceImpl svc=new FeaturesServiceImpl(null,null,new Storage(),null,null,null,resolver,null,null,null,null,null,null,null,0,0,0,null);
  try {
    svc.addRepository(uri);
    fail("exception expected");
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("Unable to validate"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.features.command.ListFeaturesCommandTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testShowHiddenFeatures() throws Exception {
  FeaturesService service=EasyMock.createMock(FeaturesService.class);
  Repository repo=EasyMock.createMock(Repository.class);
  Feature feature=EasyMock.createMock(Feature.class);
  EasyMock.expect(service.listRepositories()).andReturn(new Repository[]{repo});
  EasyMock.expect(repo.getFeatures()).andReturn(new Feature[]{feature});
  EasyMock.expect(feature.isHidden()).andReturn(true).anyTimes();
  EasyMock.expect(feature.getName()).andReturn("feature");
  EasyMock.expect(feature.getId()).andReturn("feature/1.0.0");
  EasyMock.expect(service.getState(EasyMock.eq("feature/1.0.0"))).andReturn(FeatureState.Started);
  EasyMock.expect(feature.getDescription()).andReturn("description");
  EasyMock.expect(feature.getVersion()).andReturn("1.0.0");
  EasyMock.expect(service.isRequired(feature)).andReturn(true);
  EasyMock.expect(repo.getName()).andReturn("repository").anyTimes();
  EasyMock.replay(service,repo,feature);
  ListFeaturesCommand command=new ListFeaturesCommand();
  command.setFeaturesService(service);
  command.noFormat=true;
  command.showHidden=true;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  PrintStream out=new PrintStream(baos);
  System.setOut(out);
  command.execute();
  out.flush();
  assertTrue(baos.toString().contains("feature"));
  EasyMock.verify(service,repo,feature);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHiddenFeatures() throws Exception {
  FeaturesService service=EasyMock.createMock(FeaturesService.class);
  Repository repo=EasyMock.createMock(Repository.class);
  Feature feature=EasyMock.createMock(Feature.class);
  EasyMock.expect(service.listRepositories()).andReturn(new Repository[]{repo});
  EasyMock.expect(repo.getFeatures()).andReturn(new Feature[]{feature});
  EasyMock.expect(feature.isHidden()).andReturn(true);
  EasyMock.replay(service,repo,feature);
  ListFeaturesCommand command=new ListFeaturesCommand();
  command.setFeaturesService(service);
  command.noFormat=true;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  PrintStream out=new PrintStream(baos);
  System.setOut(out);
  command.execute();
  out.flush();
  assertFalse(baos.toString().contains("feature"));
  EasyMock.verify(service,repo,feature);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.features.internal.service.BlacklistTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testBlacklistFeatureWithoutVersion(){
  URL url=getClass().getResource("f02.xml");
  Features features=JaxbUtil.unmarshal(url.toExternalForm(),true);
  List<String> blacklist=new ArrayList<>();
  blacklist.add("spring");
  Blacklist.blacklist(features,blacklist);
  for (  Feature feature : features.getFeature()) {
    assertFalse(feature.getId().startsWith("spring/"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.features.internal.service.FeaturesValidationTest </h4><pre class="type-6 type-3 type-4 type-5 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNs13Unmarshall() throws Exception {
  URL url=getClass().getResource("f07.xml");
  Features features=JaxbUtil.unmarshal(url.toExternalForm(),true);
  assertNotNull(features);
  assertEquals("2.5.6.SEC02",features.getFeature().get(0).getVersion());
  assertTrue(features.getFeature().get(1).isHidden());
  assertNotNull(features.getFeature().get(1).getLibraries());
  assertEquals(1,features.getFeature().get(0).getLibraries().size());
  assertEquals("my-library",features.getFeature().get(0).getLibraries().get(0).getLocation());
  assertEquals(Library.TYPE_ENDORSED,features.getFeature().get(0).getLibraries().get(0).getType());
  assertFalse(features.getFeature().get(0).getLibraries().get(0).isExport());
  assertTrue(features.getFeature().get(0).getLibraries().get(0).isDelegate());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.instance.core.internal.InstanceServiceImplTest </h4><pre class="type-3 type-4 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * <p>
 * Test the renaming of an existing instance.
 * </p>
 */
@Test public void testToSimulateRenameInstanceByExternalProcess() throws Exception {
  InstanceServiceImpl service=new InstanceServiceImpl();
  File storageLocation=tempFolder.newFolder("instances");
  service.setStorageLocation(storageLocation);
  InstanceSettings settings=new InstanceSettings(8122,1122,44444,getName(),null,null,null);
  service.createInstance(getName(),settings,true);
  File storageFile=new File(storageLocation,InstanceServiceImpl.STORAGE_FILE);
  assertTrue(storageFile.isFile());
  Properties storage=loadStorage(storageFile);
  storage.setProperty("item.0.name",getName() + "b");
  saveStorage(storage,storageFile,"testToSimulateRenameInstanceByExternalProcess");
  assertNotNull(service.getInstance(getName() + "b"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.BundleTests </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void classesCommand() throws Exception {
  String allClassesOutput=executeCommand("bundle:classes");
  assertFalse(allClassesOutput.isEmpty());
  String jmxWhiteboardBundleClassesOutput=executeCommand("bundle:classes org.apache.aries.jmx.whiteboard");
  System.out.println(jmxWhiteboardBundleClassesOutput);
  assertTrue(jmxWhiteboardBundleClassesOutput.contains("org/apache/aries/jmx/whiteboard/Activator$MBeanTracker.class"));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void capabilitiesCommand() throws Exception {
  String allCapabilitiesOutput=executeCommand("bundle:capabilities");
  System.out.println(allCapabilitiesOutput);
  assertFalse(allCapabilitiesOutput.isEmpty());
  String jmxWhiteboardBundleCapabilitiesOutput=executeCommand("bundle:capabilities org.apache.aries.jmx.whiteboard");
  System.out.println(jmxWhiteboardBundleCapabilitiesOutput);
  assertTrue(jmxWhiteboardBundleCapabilitiesOutput.contains("osgi.wiring.bundle; org.apache.aries.jmx.whiteboard 1.0.0 [UNUSED]"));
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void listViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=bundle,name=root");
  TabularDataSupport value=(TabularDataSupport)mbeanServer.getAttribute(name,"Bundles");
  assertTrue(value.size() > 0);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void statusCommand() throws Exception {
  String statusOutput=executeCommand("bundle:status org.apache.karaf.management.server");
  System.out.println(statusOutput);
  assertFalse(statusOutput.isEmpty());
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void listCommand() throws Exception {
  String listOutput=executeCommand("bundle:list -t 0");
  System.out.println(listOutput);
  assertFalse(listOutput.isEmpty());
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void infoCommand() throws Exception {
  String infoOutput=executeCommand("bundle:info org.apache.karaf.management.server");
  System.out.println(infoOutput);
  assertTrue(infoOutput.contains("This bundle starts the Karaf embedded MBean server"));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void showTreeCommand() throws Exception {
  String bundleTreeOutput=executeCommand("bundle:tree-show org.apache.karaf.management.server");
  System.out.println(bundleTreeOutput);
  assertFalse(bundleTreeOutput.isEmpty());
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * TODO We need some more thorough tests for diag
 */
@Test public void diagCommand() throws Exception {
  String allDiagOutput=executeCommand("bundle:diag");
  assertTrue(allDiagOutput.isEmpty());
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void headersCommand() throws Exception {
  String headersOutput=executeCommand("bundle:headers org.apache.aries.jmx.whiteboard");
  System.out.println(headersOutput);
  assertTrue(headersOutput.contains("Bundle-Activator = org.apache.aries.jmx.whiteboard.Activator"));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void findClassCommand() throws Exception {
  String findClassOutput=executeCommand("bundle:find-class jmx");
  System.out.println(findClassOutput);
  assertFalse(findClassOutput.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.ConfigTest </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@SuppressWarnings("unchecked") @Test public void configsViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=config,name=root");
  List<String> configs=(List<String>)mbeanServer.getAttribute(name,"Configs");
  assertTrue(configs.size() > 0);
  assertTrue(configs.contains("org.apache.karaf.features"));
  Map<String,String> properties=(Map<String,String>)mbeanServer.invoke(name,"listProperties",new Object[]{"org.apache.karaf.features"},new String[]{"java.lang.String"});
  assertTrue(properties.keySet().size() > 0);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void listCommand() throws Exception {
  String configListOutput=executeCommand("config:list");
  System.out.println(configListOutput);
  assertFalse(configListOutput.isEmpty());
  configListOutput=executeCommand("config:list \"(service.pid=org.apache.karaf.features)\"");
  System.out.println(configListOutput);
  assertFalse(configListOutput.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.FeatureSshCommandSecurityTest </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testFeatureCommandSecurityViaSsh() throws Exception {
  String vieweruser="viewer" + System.nanoTime() + "_features";
  String feature="wrapper";
  addViewer(vieweruser);
  String r=assertCommand(vieweruser,"feature:list -i --no-format",Result.OK);
  Assert.assertFalse("Precondition failed, this test uses the " + feature + " subsystem to test features with...",r.contains(feature));
  assertCommand(vieweruser,"feature:install -r " + feature,Result.NOT_FOUND);
  String r2=assertCommand("karaf","feature:list -i --no-format",Result.OK);
  Assert.assertFalse(feature + " features should not have been installed, as viewer doesn't have credentials",r2.contains(feature));
  assertCommand("karaf","feature:install -r " + feature,Result.OK);
  String r3=assertCommand(vieweruser,"feature:list -i --no-format",Result.OK);
  Assert.assertTrue(feature + " feature should have been installed by 'karaf' user",r3.contains(feature));
  assertCommand(vieweruser,"feature:uninstall -r " + feature,Result.NOT_FOUND);
  String r4=assertCommand("karaf","feature:list -i --no-format",Result.OK);
  Assert.assertTrue(feature + " feature should still be there, as viewer doesn't have credentials",r4.contains(feature));
  assertCommand("karaf","feature:uninstall -r " + feature,Result.OK);
  String r5=assertCommand(vieweruser,"feature:list -i --no-format",Result.OK);
  Assert.assertFalse(feature + " feature should have been uninstalled",r5.contains(feature));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.FeatureTest </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void listViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=feature,name=root");
  TabularData features=(TabularData)mbeanServer.getAttribute(name,"Features");
  assertTrue(features.size() > 0);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void listCommand() throws Exception {
  String featureListOutput=executeCommand("feature:list");
  System.out.println(featureListOutput);
  assertFalse(featureListOutput.isEmpty());
  featureListOutput=executeCommand("feature:list -i");
  System.out.println(featureListOutput);
  assertFalse(featureListOutput.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.HttpTest </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void listViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=http,name=root");
  TabularData servlets=(TabularData)mbeanServer.getAttribute(name,"Servlets");
  assertTrue(servlets.size() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.InstanceTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void renameCommand() throws Exception {
  System.out.println(executeCommand("instance:create itest"));
  System.out.println(executeCommand("instance:rename itest new_itest"));
  String instanceListOutput=executeCommand("instance:list");
  System.out.println(instanceListOutput);
  assertTrue(instanceListOutput.contains("new_itest"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.JaasSshCommandSecurityTest </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testJaasCommandSecurityViaSsh() throws Exception {
  String vieweruser="viewer" + System.nanoTime() + "_jaas";
  addViewer(vieweruser);
  String userName="XXX" + System.nanoTime();
  assertCommand(vieweruser,"jaas:realm-manage --realm karaf;" + "jaas:user-add " + userName + " pwd;"+ "jaas:update",Result.NOT_FOUND);
  String r=assertCommand(vieweruser,"jaas:realm-manage --realm karaf;" + "jaas:user-list",Result.OK);
  assertFalse("The viewer should not have the credentials to add the new user",r.contains(userName));
  assertCommand("karaf","jaas:realm-manage --realm karaf;" + "jaas:user-add " + userName + " pwd;"+ "jaas:update",Result.OK);
  String r2=assertCommand(vieweruser,"jaas:realm-manage --realm karaf;" + "jaas:user-list",Result.OK);
  assertTrue("The admin user should have the rights to add the new user",r2.contains(userName));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.JmsTest </h4><pre class="type-6 type-3 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=120000) public void testMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=jms,name=root");
  System.out.println("JMS MBean create operation invocation");
  mbeanServer.invoke(name,"create",new String[]{"testMBean","activemq","tcp://localhost:61616","karaf","karaf"},new String[]{"java.lang.String","java.lang.String","java.lang.String","java.lang.String","java.lang.String"});
  getOsgiService(ConnectionFactory.class,"name=testMBean",30000);
  List<String> connectionFactories=(List<String>)mbeanServer.getAttribute(name,"Connectionfactories");
  assertEquals(true,connectionFactories.size() >= 1);
  System.out.println("JMS MBean send operation invocation");
  mbeanServer.invoke(name,"send",new String[]{"testMBean","queueMBean","message",null,"karaf","karaf"},new String[]{"java.lang.String","java.lang.String","java.lang.String","java.lang.String","java.lang.String","java.lang.String"});
  System.out.println("JMS MBean count operation invocation");
  Integer count=(Integer)mbeanServer.invoke(name,"count",new String[]{"testMBean","queueMBean","karaf","karaf"},new String[]{"java.lang.String","java.lang.String","java.lang.String","java.lang.String"});
  assertEquals(1,count.intValue());
  System.out.print("JMS MBean queues operation invocation: ");
  List<String> queues=(List<String>)mbeanServer.invoke(name,"queues",new String[]{"testMBean","karaf","karaf"},new String[]{"java.lang.String","java.lang.String","java.lang.String"});
  System.out.println(queues);
  assertTrue(queues.size() >= 1);
  System.out.println("JMS MBean delete operation invocation");
  mbeanServer.invoke(name,"delete",new String[]{"testMBean"},new String[]{"java.lang.String"});
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.LogTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void setGetDebugAndClear() throws Exception {
  assertSetLevel("DEBUG");
  assertSetLevel("INFO");
  System.out.println(executeCommand("log:clear"));
  String displayOutput=executeCommand("log:display").trim();
  assertTrue("Should be empty but was: " + displayOutput,displayOutput.trim().isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.PackageTest </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void exportsViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=package,name=root");
  TabularData exports=(TabularData)mbeanServer.getAttribute(name,"Exports");
  assertTrue(exports.size() > 0);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void exportsCommand() throws Exception {
  String exportsOutput=executeCommand("package:exports");
  System.out.println(exportsOutput);
  assertFalse(exportsOutput.isEmpty());
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void importsViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=package,name=root");
  TabularData imports=(TabularData)mbeanServer.getAttribute(name,"Imports");
  assertTrue(imports.size() > 0);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void importsCommand() throws Exception {
  String importsOutput=executeCommand("package:imports");
  System.out.println(importsOutput);
  assertFalse(importsOutput.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.ServiceTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void listCommand() throws Exception {
  String listOutput=executeCommand("service:list");
  System.out.println(listOutput);
  assertFalse(listOutput.isEmpty());
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void listViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=service,name=root");
  TabularData services=(TabularData)mbeanServer.getAttribute(name,"Services");
  assertTrue(services.size() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.SystemCommandSecurityTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSystemCommandSecurityViaSsh() throws Exception {
  String manageruser="man" + System.nanoTime() + "_"+ counter++;
  String vieweruser="view" + System.nanoTime() + "_"+ counter++;
  addUsers(manageruser,vieweruser);
  assertCommand(vieweruser,"system:name",Result.OK);
  assertCommand(vieweruser,"system:start-level",Result.OK);
  assertCommand(vieweruser,"system:start-level 150",Result.NO_CREDENTIALS);
  assertCommand(vieweruser,"system:property",Result.NOT_FOUND);
  assertCommand(vieweruser,"system:shutdown",Result.NOT_FOUND);
  assertCommand(manageruser,"system:name",Result.OK);
  assertCommand(manageruser,"system:start-level",Result.OK);
  assertCommand(manageruser,"system:start-level 0",Result.NO_CREDENTIALS);
  assertCommand(manageruser,"system:start-level  1 ",Result.NO_CREDENTIALS);
  assertCommand(manageruser,"system:start-level 99",Result.NO_CREDENTIALS);
  assertCommand(manageruser,"system:start-level 105",Result.OK);
  assertCommand(manageruser,"system:property",Result.NOT_FOUND);
  assertCommand(manageruser,"system:shutdown",Result.NOT_FOUND);
  assertCommand("karaf","system:name",Result.OK);
  assertCommand("karaf","system:start-level",Result.OK);
  assertCommand("karaf","system:start-level 99",Result.OK);
  Assert.assertTrue(assertCommand("karaf","system:start-level",Result.OK).contains("99"));
  assertCommand("karaf","system:start-level 100",Result.OK);
  assertCommand("karaf","system:property vieweruser " + vieweruser,Result.OK);
  Assert.assertTrue(assertCommand("karaf","system:property vieweruser",Result.OK).contains(vieweruser));
  assertCommand("karaf","system:shutdown --help",Result.OK);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.WebTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void listCommand() throws Exception {
  String listOutput=executeCommand("web:list");
  System.out.println(listOutput);
  assertFalse(listOutput.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.WrapperTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void installCommand() throws Exception {
  String installOutput=executeCommand("wrapper:install");
  System.out.println(installOutput);
  assertFalse(installOutput.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.jaas.modules.jdbc.JdbcLoginModuleTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEngine() throws Exception {
  JDBCBackingEngine engine=new JDBCBackingEngine(dataSource);
  assertTrue(engine.listUsers().isEmpty());
  engine.addUser("abc","xyz");
  assertTrue(engine.listUsers().contains(new UserPrincipal("abc")));
  assertTrue(engine.listRoles(new UserPrincipal("abc")).isEmpty());
  assertTrue(engine.listRoles(new GroupPrincipal("group1")).isEmpty());
  assertTrue(engine.listGroups(new UserPrincipal("abc")).isEmpty());
  engine.addRole("abc","role1");
  assertTrue(engine.listUsers().contains(new UserPrincipal("abc")));
  assertTrue(engine.listRoles(new UserPrincipal("abc")).contains(new RolePrincipal("role1")));
  assertTrue(engine.listRoles(new GroupPrincipal("group1")).isEmpty());
  assertTrue(engine.listGroups(new UserPrincipal("abc")).isEmpty());
  engine.addGroupRole("group1","role2");
  assertTrue(engine.listUsers().contains(new UserPrincipal("abc")));
  assertTrue(engine.listRoles(new UserPrincipal("abc")).contains(new RolePrincipal("role1")));
  assertTrue(engine.listRoles(new GroupPrincipal("group1")).contains(new RolePrincipal("role2")));
  assertTrue(engine.listGroups(new UserPrincipal("abc")).isEmpty());
  engine.addGroup("abc","group1");
  assertTrue(engine.listUsers().contains(new UserPrincipal("abc")));
  assertTrue(engine.listRoles(new UserPrincipal("abc")).contains(new RolePrincipal("role1")));
  assertTrue(engine.listRoles(new UserPrincipal("abc")).contains(new RolePrincipal("role2")));
  assertTrue(engine.listRoles(new GroupPrincipal("group1")).contains(new RolePrincipal("role2")));
  assertTrue(engine.listGroups(new UserPrincipal("abc")).contains(new GroupPrincipal("group1")));
  engine.deleteRole("abc","role1");
  assertTrue(engine.listUsers().contains(new UserPrincipal("abc")));
  assertTrue(engine.listRoles(new UserPrincipal("abc")).contains(new RolePrincipal("role2")));
  assertTrue(engine.listRoles(new GroupPrincipal("group1")).contains(new RolePrincipal("role2")));
  assertTrue(engine.listGroups(new UserPrincipal("abc")).contains(new GroupPrincipal("group1")));
  engine.deleteGroupRole("group1","role2");
  assertTrue(engine.listUsers().contains(new UserPrincipal("abc")));
  assertTrue(engine.listRoles(new UserPrincipal("abc")).isEmpty());
  assertTrue(engine.listRoles(new GroupPrincipal("group1")).isEmpty());
  assertTrue(engine.listGroups(new UserPrincipal("abc")).contains(new GroupPrincipal("group1")));
  engine.addGroupRole("group1","role3");
  assertTrue(engine.listUsers().contains(new UserPrincipal("abc")));
  assertTrue(engine.listRoles(new UserPrincipal("abc")).contains(new RolePrincipal("role3")));
  assertTrue(engine.listRoles(new GroupPrincipal("group1")).contains(new RolePrincipal("role3")));
  assertTrue(engine.listGroups(new UserPrincipal("abc")).contains(new GroupPrincipal("group1")));
  engine.deleteGroup("abc","group1");
  assertTrue(engine.listUsers().contains(new UserPrincipal("abc")));
  assertTrue(engine.listRoles(new UserPrincipal("abc")).isEmpty());
  assertTrue(engine.listRoles(new GroupPrincipal("group1")).isEmpty());
  assertTrue(engine.listGroups(new UserPrincipal("abc")).isEmpty());
  engine.deleteUser("abc");
  assertTrue(engine.listUsers().isEmpty());
  assertTrue(engine.listRoles(new UserPrincipal("abc")).isEmpty());
  assertTrue(engine.listRoles(new GroupPrincipal("group1")).isEmpty());
  assertTrue(engine.listGroups(new UserPrincipal("abc")).isEmpty());
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testLoginModuleWithGroups() throws Exception {
  JDBCBackingEngine engine=new JDBCBackingEngine(dataSource);
  engine.addGroupRole("group1","role2");
  engine.addUser("abc","xyz");
  engine.addRole("abc","role1");
  engine.addGroup("abc","group1");
  JDBCLoginModule module=new JDBCLoginModule();
  Subject subject=new Subject();
  module.initialize(subject,getCallbackHandler("abc","xyz"),null,options);
  module.login();
  module.commit();
  assertTrue(subject.getPrincipals().contains(new UserPrincipal("abc")));
  assertTrue(subject.getPrincipals().contains(new GroupPrincipal("group1")));
  assertTrue(subject.getPrincipals().contains(new RolePrincipal("role1")));
  assertTrue(subject.getPrincipals().contains(new RolePrincipal("role2")));
}

</code></pre>

<br>
<pre class="type-3 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLoginModule() throws Exception {
  JDBCBackingEngine engine=new JDBCBackingEngine(dataSource);
  engine.addUser("abc","xyz");
  engine.addRole("abc","role1");
  JDBCLoginModule module=new JDBCLoginModule();
  Subject subject=new Subject();
  module.initialize(subject,getCallbackHandler("abc","xyz"),null,options);
  module.login();
  module.commit();
  assertFalse(subject.getPrincipals(UserPrincipal.class).isEmpty());
  assertEquals("abc",subject.getPrincipals(UserPrincipal.class).iterator().next().getName());
  assertFalse(subject.getPrincipals(RolePrincipal.class).isEmpty());
  assertEquals("role1",subject.getPrincipals(RolePrincipal.class).iterator().next().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.jaas.modules.ldap.LdapCacheTest </h4><pre class="type-14 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdminLogin() throws Exception {
  Properties options=ldapLoginModuleOptions();
  LDAPLoginModule module=new LDAPLoginModule();
  CallbackHandler cb=new CallbackHandler(){
    public void handle(    Callback[] callbacks) throws IOException, UnsupportedCallbackException {
      for (      Callback cb : callbacks) {
        if (cb instanceof NameCallback) {
          ((NameCallback)cb).setName("admin");
        }
 else         if (cb instanceof PasswordCallback) {
          ((PasswordCallback)cb).setPassword("admin123".toCharArray());
        }
      }
    }
  }
;
  Subject subject=new Subject();
  module.initialize(subject,cb,null,options);
  assertEquals("Precondition",0,subject.getPrincipals().size());
  assertTrue(module.login());
  assertTrue(module.commit());
  assertEquals(2,subject.getPrincipals().size());
  boolean foundUser=false;
  boolean foundRole=false;
  for (  Principal pr : subject.getPrincipals()) {
    if (pr instanceof UserPrincipal) {
      assertEquals("admin",pr.getName());
      foundUser=true;
    }
 else     if (pr instanceof RolePrincipal) {
      assertEquals("admin",pr.getName());
      foundRole=true;
    }
  }
  assertTrue(foundUser);
  assertTrue(foundRole);
  assertTrue(module.logout());
  assertEquals("Principals should be gone as the user has logged out",0,subject.getPrincipals().size());
  DirContext context=new LDAPCache(new LDAPOptions(options)).open();
  Attributes entry=new BasicAttributes();
  entry.put(new BasicAttribute("cn","another"));
  Attribute oc=new BasicAttribute("objectClass");
  oc.add("top");
  oc.add("groupOfNames");
  entry.put(oc);
  Attribute mb=new BasicAttribute("member");
  mb.add("cn=admin,ou=people,dc=example,dc=com");
  entry.put(mb);
  context.createSubcontext("cn=another,ou=groups,dc=example,dc=com",entry);
  Thread.sleep(100);
  module=new LDAPLoginModule();
  subject=new Subject();
  module.initialize(subject,cb,null,options);
  assertEquals("Precondition",0,subject.getPrincipals().size());
  assertTrue(module.login());
  assertTrue(module.commit());
  assertEquals("Postcondition",3,subject.getPrincipals().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.jaas.modules.ldap.LdapCaseInsensitiveDNTest </h4><pre class="type-14 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCaseInsensitiveDN() throws Exception {
  Properties options=ldapLoginModuleOptions();
  LDAPLoginModule module=new LDAPLoginModule();
  CallbackHandler cb=new CallbackHandler(){
    public void handle(    Callback[] callbacks) throws IOException, UnsupportedCallbackException {
      for (      Callback cb : callbacks) {
        if (cb instanceof NameCallback) {
          ((NameCallback)cb).setName("admin");
        }
 else         if (cb instanceof PasswordCallback) {
          ((PasswordCallback)cb).setPassword("admin123".toCharArray());
        }
      }
    }
  }
;
  Subject subject=new Subject();
  module.initialize(subject,cb,null,options);
  assertEquals("Precondition",0,subject.getPrincipals().size());
  assertTrue(module.login());
  assertTrue(module.commit());
  assertEquals(2,subject.getPrincipals().size());
  boolean foundUser=false;
  boolean foundRole=false;
  for (  Principal pr : subject.getPrincipals()) {
    if (pr instanceof UserPrincipal) {
      assertEquals("admin",pr.getName());
      foundUser=true;
    }
 else     if (pr instanceof RolePrincipal) {
      assertEquals("admin",pr.getName());
      foundRole=true;
    }
  }
  assertTrue(foundUser);
  assertTrue(foundRole);
  assertTrue(module.logout());
  assertEquals("Principals should be gone as the user has logged out",0,subject.getPrincipals().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.jaas.modules.ldap.LdapLoginModuleTest </h4><pre class="type-14 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonAdminLogin() throws Exception {
  Properties options=ldapLoginModuleOptions();
  LDAPLoginModule module=new LDAPLoginModule();
  CallbackHandler cb=new CallbackHandler(){
    public void handle(    Callback[] callbacks) throws IOException, UnsupportedCallbackException {
      for (      Callback cb : callbacks) {
        if (cb instanceof NameCallback) {
          ((NameCallback)cb).setName("cheese");
        }
 else         if (cb instanceof PasswordCallback) {
          ((PasswordCallback)cb).setPassword("foodie".toCharArray());
        }
      }
    }
  }
;
  Subject subject=new Subject();
  module.initialize(subject,cb,null,options);
  assertEquals("Precondition",0,subject.getPrincipals().size());
  assertTrue(module.login());
  assertTrue(module.commit());
  assertEquals(1,subject.getPrincipals().size());
  boolean foundUser=false;
  boolean foundRole=false;
  for (  Principal pr : subject.getPrincipals()) {
    if (pr instanceof UserPrincipal) {
      assertEquals("cheese",pr.getName());
      foundUser=true;
    }
 else     if (pr instanceof RolePrincipal) {
      assertEquals("admin",pr.getName());
      foundRole=true;
    }
  }
  assertTrue(foundUser);
  assertFalse(foundRole);
  assertTrue(module.logout());
  assertEquals("Principals should be gone as the user has logged out",0,subject.getPrincipals().size());
}

</code></pre>

<br>
<pre class="type-14 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdminLogin() throws Exception {
  Properties options=ldapLoginModuleOptions();
  LDAPLoginModule module=new LDAPLoginModule();
  CallbackHandler cb=new CallbackHandler(){
    public void handle(    Callback[] callbacks) throws IOException, UnsupportedCallbackException {
      for (      Callback cb : callbacks) {
        if (cb instanceof NameCallback) {
          ((NameCallback)cb).setName("admin");
        }
 else         if (cb instanceof PasswordCallback) {
          ((PasswordCallback)cb).setPassword("admin123".toCharArray());
        }
      }
    }
  }
;
  Subject subject=new Subject();
  module.initialize(subject,cb,null,options);
  assertEquals("Precondition",0,subject.getPrincipals().size());
  assertTrue(module.login());
  assertTrue(module.commit());
  assertEquals(2,subject.getPrincipals().size());
  boolean foundUser=false;
  boolean foundRole=false;
  for (  Principal pr : subject.getPrincipals()) {
    if (pr instanceof UserPrincipal) {
      assertEquals("admin",pr.getName());
      foundUser=true;
    }
 else     if (pr instanceof RolePrincipal) {
      assertEquals("admin",pr.getName());
      foundRole=true;
    }
  }
  assertTrue(foundUser);
  assertTrue(foundRole);
  assertTrue(module.logout());
  assertEquals("Principals should be gone as the user has logged out",0,subject.getPrincipals().size());
}

</code></pre>

<br>
<pre class="type-14 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRoleMappingAdvanced() throws Exception {
  Properties options=ldapLoginModuleOptions();
  options.put(LDAPOptions.ROLE_MAPPING,"admin=karaf,test;admin=another");
  LDAPLoginModule module=new LDAPLoginModule();
  CallbackHandler cb=new CallbackHandler(){
    public void handle(    Callback[] callbacks) throws IOException, UnsupportedCallbackException {
      for (      Callback cb : callbacks) {
        if (cb instanceof NameCallback) {
          ((NameCallback)cb).setName("admin");
        }
 else         if (cb instanceof PasswordCallback) {
          ((PasswordCallback)cb).setPassword("admin123".toCharArray());
        }
      }
    }
  }
;
  Subject subject=new Subject();
  module.initialize(subject,cb,null,options);
  assertEquals("Precondition",0,subject.getPrincipals().size());
  assertTrue(module.login());
  assertTrue(module.commit());
  assertEquals(4,subject.getPrincipals().size());
  final List<String> roles=new ArrayList<String>(Arrays.asList("karaf","test","another"));
  boolean foundUser=false;
  boolean foundRole=false;
  for (  Principal principal : subject.getPrincipals()) {
    if (principal instanceof UserPrincipal) {
      assertEquals("admin",principal.getName());
      foundUser=true;
    }
 else     if (principal instanceof RolePrincipal) {
      assertTrue(roles.remove(principal.getName()));
      foundRole=true;
    }
  }
  assertTrue(foundUser);
  assertTrue(foundRole);
  assertTrue(roles.isEmpty());
  assertTrue(module.logout());
  assertEquals("Principals should be gone as the user has logged out",0,subject.getPrincipals().size());
}

</code></pre>

<br>
<pre class="type-14 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRoleMappingSimple() throws Exception {
  Properties options=ldapLoginModuleOptions();
  options.put(LDAPOptions.ROLE_MAPPING,"admin=karaf");
  LDAPLoginModule module=new LDAPLoginModule();
  CallbackHandler cb=new CallbackHandler(){
    @Override public void handle(    Callback[] callbacks) throws IOException, UnsupportedCallbackException {
      for (      Callback cb : callbacks) {
        if (cb instanceof NameCallback) {
          ((NameCallback)cb).setName("admin");
        }
 else         if (cb instanceof PasswordCallback) {
          ((PasswordCallback)cb).setPassword("admin123".toCharArray());
        }
      }
    }
  }
;
  Subject subject=new Subject();
  module.initialize(subject,cb,null,options);
  assertEquals("Precondition",0,subject.getPrincipals().size());
  assertTrue(module.login());
  assertTrue(module.commit());
  assertEquals(2,subject.getPrincipals().size());
  boolean foundUser=false;
  boolean foundRole=false;
  for (  Principal principal : subject.getPrincipals()) {
    if (principal instanceof UserPrincipal) {
      assertEquals("admin",principal.getName());
      foundUser=true;
    }
 else     if (principal instanceof RolePrincipal) {
      assertEquals("karaf",principal.getName());
      foundRole=true;
    }
  }
  assertTrue(foundUser);
  assertTrue(foundRole);
  assertTrue(module.logout());
  assertEquals("Principals should be gone as the user has logged out",0,subject.getPrincipals().size());
}

</code></pre>

<br>
<pre class="type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadPassword() throws Exception {
  Properties options=ldapLoginModuleOptions();
  LDAPLoginModule module=new LDAPLoginModule();
  CallbackHandler cb=new CallbackHandler(){
    public void handle(    Callback[] callbacks) throws IOException, UnsupportedCallbackException {
      for (      Callback cb : callbacks) {
        if (cb instanceof NameCallback) {
          ((NameCallback)cb).setName("admin");
        }
 else         if (cb instanceof PasswordCallback) {
          ((PasswordCallback)cb).setPassword("blahblah".toCharArray());
        }
      }
    }
  }
;
  Subject subject=new Subject();
  module.initialize(subject,cb,null,options);
  assertEquals("Precondition",0,subject.getPrincipals().size());
  assertFalse(module.login());
}

</code></pre>

<br>
<pre class="type-14 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRoleMappingParsing() throws Exception {
  Properties options=ldapLoginModuleOptions();
  options.put(LDAPOptions.ROLE_MAPPING,"admin = karaf, test; admin = another");
  LDAPLoginModule module=new LDAPLoginModule();
  CallbackHandler cb=new CallbackHandler(){
    public void handle(    Callback[] callbacks) throws IOException, UnsupportedCallbackException {
      for (      Callback cb : callbacks) {
        if (cb instanceof NameCallback) {
          ((NameCallback)cb).setName("admin");
        }
 else         if (cb instanceof PasswordCallback) {
          ((PasswordCallback)cb).setPassword("admin123".toCharArray());
        }
      }
    }
  }
;
  Subject subject=new Subject();
  module.initialize(subject,cb,null,options);
  assertEquals("Precondition",0,subject.getPrincipals().size());
  assertTrue(module.login());
  assertTrue(module.commit());
  assertEquals(4,subject.getPrincipals().size());
  final List<String> roles=new ArrayList<String>(Arrays.asList("karaf","test","another"));
  boolean foundUser=false;
  boolean foundRole=false;
  for (  Principal pr : subject.getPrincipals()) {
    if (pr instanceof UserPrincipal) {
      assertEquals("admin",pr.getName());
      foundUser=true;
    }
 else     if (pr instanceof RolePrincipal) {
      assertTrue(roles.remove(pr.getName()));
      foundRole=true;
    }
  }
  assertTrue(foundUser);
  assertTrue(foundRole);
  assertTrue(roles.isEmpty());
  assertTrue(module.logout());
  assertEquals("Principals should be gone as the user has logged out",0,subject.getPrincipals().size());
}

</code></pre>

<br>
<pre class="type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserNotFound() throws Exception {
  Properties options=ldapLoginModuleOptions();
  LDAPLoginModule module=new LDAPLoginModule();
  CallbackHandler cb=new CallbackHandler(){
    public void handle(    Callback[] callbacks) throws IOException, UnsupportedCallbackException {
      for (      Callback cb : callbacks) {
        if (cb instanceof NameCallback) {
          ((NameCallback)cb).setName("imnothere");
        }
 else         if (cb instanceof PasswordCallback) {
          ((PasswordCallback)cb).setPassword("admin123".toCharArray());
        }
      }
    }
  }
;
  Subject subject=new Subject();
  module.initialize(subject,cb,null,options);
  assertEquals("Precondition",0,subject.getPrincipals().size());
  assertFalse(module.login());
}

</code></pre>

<br>
<pre class="type-10 type-3 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyPassword() throws Exception {
  Properties options=ldapLoginModuleOptions();
  LDAPLoginModule module=new LDAPLoginModule();
  CallbackHandler cb=new CallbackHandler(){
    public void handle(    Callback[] callbacks) throws IOException, UnsupportedCallbackException {
      for (      Callback cb : callbacks) {
        if (cb instanceof NameCallback) {
          ((NameCallback)cb).setName("imnothere");
        }
 else         if (cb instanceof PasswordCallback) {
          ((PasswordCallback)cb).setPassword("".toCharArray());
        }
      }
    }
  }
;
  Subject subject=new Subject();
  module.initialize(subject,cb,null,options);
  assertEquals("Precondition",0,subject.getPrincipals().size());
  try {
    module.login();
    fail("Should have failed");
  }
 catch (  LoginException e) {
    assertTrue(e.getMessage().equals("Empty passwords not allowed"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.jaas.modules.properties.PropertiesLoginModuleTest </h4><pre class="type-14 type-10 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLoginWithGroups() throws Exception {
  File f=File.createTempFile(getClass().getName(),".tmp");
  try {
    Properties p=new Properties(f);
    PropertiesBackingEngine pbe=new PropertiesBackingEngine(p);
    pbe.addUser("abc","xyz");
    pbe.addRole("abc","myrole");
    pbe.addUser("pqr","abc");
    pbe.addGroup("pqr","group1");
    pbe.addGroupRole("group1","r1");
    PropertiesLoginModule module=new PropertiesLoginModule();
    Map<String,String> options=new HashMap<String,String>();
    options.put(PropertiesLoginModule.USER_FILE,f.getAbsolutePath());
    CallbackHandler cb=new CallbackHandler(){
      @Override public void handle(      Callback[] callbacks) throws IOException, UnsupportedCallbackException {
        for (        Callback cb : callbacks) {
          if (cb instanceof NameCallback) {
            ((NameCallback)cb).setName("pqr");
          }
 else           if (cb instanceof PasswordCallback) {
            ((PasswordCallback)cb).setPassword("abc".toCharArray());
          }
        }
      }
    }
;
    Subject subject=new Subject();
    module.initialize(subject,cb,null,options);
    Assert.assertEquals("Precondition",0,subject.getPrincipals().size());
    Assert.assertTrue(module.login());
    Assert.assertTrue(module.commit());
    Assert.assertEquals(3,subject.getPrincipals().size());
    boolean foundUser=false;
    boolean foundRole=false;
    boolean foundGroup=false;
    for (    Principal pr : subject.getPrincipals()) {
      if (pr instanceof UserPrincipal) {
        Assert.assertEquals("pqr",pr.getName());
        foundUser=true;
      }
 else       if (pr instanceof GroupPrincipal) {
        Assert.assertEquals("group1",pr.getName());
        foundGroup=true;
      }
 else       if (pr instanceof RolePrincipal) {
        Assert.assertEquals("r1",pr.getName());
        foundRole=true;
      }
    }
    Assert.assertTrue(foundUser);
    Assert.assertTrue(foundGroup);
    Assert.assertTrue(foundRole);
  }
  finally {
    if (!f.delete()) {
      Assert.fail("Could not delete temporary file: " + f);
    }
  }
}

</code></pre>

<br>
<pre class="type-14 type-10 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicLogin() throws Exception {
  File f=File.createTempFile(getClass().getName(),".tmp");
  try {
    Properties p=new Properties(f);
    PropertiesBackingEngine pbe=new PropertiesBackingEngine(p);
    pbe.addUser("abc","xyz");
    pbe.addRole("abc","myrole");
    pbe.addUser("pqr","abc");
    PropertiesLoginModule module=new PropertiesLoginModule();
    Map<String,String> options=new HashMap<String,String>();
    options.put(PropertiesLoginModule.USER_FILE,f.getAbsolutePath());
    CallbackHandler cb=new CallbackHandler(){
      @Override public void handle(      Callback[] callbacks) throws IOException, UnsupportedCallbackException {
        for (        Callback cb : callbacks) {
          if (cb instanceof NameCallback) {
            ((NameCallback)cb).setName("abc");
          }
 else           if (cb instanceof PasswordCallback) {
            ((PasswordCallback)cb).setPassword("xyz".toCharArray());
          }
        }
      }
    }
;
    Subject subject=new Subject();
    module.initialize(subject,cb,null,options);
    Assert.assertEquals("Precondition",0,subject.getPrincipals().size());
    Assert.assertTrue(module.login());
    Assert.assertTrue(module.commit());
    Assert.assertEquals(2,subject.getPrincipals().size());
    boolean foundUser=false;
    boolean foundRole=false;
    for (    Principal pr : subject.getPrincipals()) {
      if (pr instanceof UserPrincipal) {
        Assert.assertEquals("abc",pr.getName());
        foundUser=true;
      }
 else       if (pr instanceof RolePrincipal) {
        Assert.assertEquals("myrole",pr.getName());
        foundRole=true;
      }
    }
    Assert.assertTrue(foundUser);
    Assert.assertTrue(foundRole);
    Assert.assertTrue(module.logout());
    Assert.assertEquals("Principals should be gone as the user has logged out",0,subject.getPrincipals().size());
  }
  finally {
    if (!f.delete()) {
      Assert.fail("Could not delete temporary file: " + f);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.main.lock.BaseJDBCLockIntegrationTest </h4><pre class="type-6 type-3 type-4 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void release() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  lock.release();
  assertNull(lock.lockConnection);
  assertTableIsUnlocked();
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void initShouldCreateTheSchemaIfItNotExists() throws Exception {
  long start=System.currentTimeMillis();
  lock=createLock(props);
  long end=System.currentTimeMillis();
  long moment=queryDatabaseSingleResult("SELECT MOMENT FROM " + tableName);
  assertTrue(moment >= start);
  assertTrue(moment <= end);
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isAliveShouldReturnTrueIfItHoldsTheLock() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  assertTrue(lock.isAlive());
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isAliveShouldReturnFalseIfTheConnectionIsClosed() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  lock.lockConnection.rollback();
  lock.lockConnection.close();
  assertFalse(lock.isAlive());
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Is not executed with the test suite
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @Ignore public void lockShouldRestoreTheLockAfterADbFailure() throws Exception {
  Lock lock1=createLock(props);
  assertTrue(lock1.lock());
  assertTrue(lock1.isAlive());
  assertFalse(lock1.isAlive());
  assertTrue(lock1.lock());
  assertTrue(lock1.isAlive());
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void lockShouldReturnFalseIfTheTableIsEmpty() throws Exception {
  Connection connection=null;
  try {
    lock=createLock(props);
    truncateTable();
    connection=lock(tableName,clustername);
    assertFalse(lock.lock());
  }
  finally {
    close(connection);
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void releaseShouldSucceedForAnAlreadyClosedConnection() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  lock.lockConnection.rollback();
  lock.lockConnection.close();
  lock.release();
  assertTableIsUnlocked();
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isAliveShouldReturnFalseIfTheConnectionIsNull() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  lock.lockConnection.rollback();
  lock.lockConnection.close();
  lock.lockConnection=null;
  assertFalse(lock.isAlive());
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isAliveShouldReturnFalseIfItNotHoldsTheLock() throws Exception {
  Connection connection=null;
  try {
    lock=createLock(props);
    assertTrue(lock.lock());
    lock.lockConnection.rollback();
    connection=lock(tableName,clustername);
    assertFalse(lock.isAlive());
  }
  finally {
    close(connection);
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void lockShouldReturnFalseIfTheRowIsAlreadyLocked() throws Exception {
  Connection connection=null;
  try {
    lock=createLock(props);
    connection=lock(tableName,clustername);
    assertFalse(lock.lock());
  }
  finally {
    close(connection);
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void lockShouldReturnFalseIfAnotherRowIsLocked() throws Exception {
  Connection connection=null;
  try {
    lock=createLock(props);
    executeStatement("INSERT INTO " + tableName + " (MOMENT, NODE) VALUES (1, '"+ clustername+ "_2')");
    connection=lock(tableName,clustername + "_2");
    assertFalse(lock.lock());
  }
  finally {
    close(connection);
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void releaseShouldSucceedForANullConnectionReference() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  lock.lockConnection.rollback();
  lock.lockConnection.close();
  lock.lockConnection=null;
  lock.release();
  assertTableIsUnlocked();
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void lockShouldReturnTrueItTheTableIsNotLocked() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  assertTableIsLocked();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.main.lock.BaseJDBCLockTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isAliveShouldReturnFalseIfItNotHoldsTheLock() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("UPDATE " + tableName + " SET MOMENT = 1")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.executeUpdate()).andThrow(new SQLException());
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean alive=lock.isAlive();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(alive);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void lockShouldReturnFalseIfAnotherRowIsLocked() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.execute()).andReturn(true);
  preparedStatement.close();
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("UPDATE " + tableName + " SET MOMENT = 1")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.executeUpdate()).andThrow(new SQLException());
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean lockAquired=lock.lock();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(lockAquired);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void lockShouldReturnTrueItTheTableIsNotLocked() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.execute()).andReturn(true);
  preparedStatement.close();
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("UPDATE " + tableName + " SET MOMENT = 1")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.executeUpdate()).andReturn(1);
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean lockAquired=lock.lock();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertTrue(lockAquired);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isAliveShouldReturnFalseIfTheConnectionIsClosed() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(true);
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean alive=lock.isAlive();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(alive);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isAliveShouldReturnFalseIfTheConnectionIsNull() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  lock.lockConnection=null;
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean alive=lock.isAlive();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(alive);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void lockShouldReturnFalseIfTableIsEmpty() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.execute()).andReturn(true);
  preparedStatement.close();
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("UPDATE " + tableName + " SET MOMENT = 1")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.executeUpdate()).andReturn(0);
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean lockAquired=lock.lock();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(lockAquired);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void lockShouldReturnFalseIfTheRowIsAlreadyLocked() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.execute()).andReturn(true);
  preparedStatement.close();
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("UPDATE " + tableName + " SET MOMENT = 1")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.executeUpdate()).andThrow(new SQLException());
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean lockAquired=lock.lock();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(lockAquired);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isAliveShouldReturnTrueIfItHoldsTheLock() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("UPDATE " + tableName + " SET MOMENT = 1")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.executeUpdate()).andReturn(1);
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean alive=lock.isAlive();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertTrue(alive);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.main.lock.DefaultJDBCLockIntegrationTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void initShouldCreateTheDatabaseIfItNotExists() throws Exception {
  String database="test" + System.currentTimeMillis();
  url="jdbc:derby://127.0.0.1:1527/" + database;
  props.put("karaf.lock.jdbc.url",url);
  lock=createLock(props);
  lock.lock();
  assertTrue(lock.lockConnection.getMetaData().getURL().contains(database));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.main.lock.DerbyJDBCLockIntegrationTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void initShouldCreateTheDatabaseIfItNotExists() throws Exception {
  String database="test" + System.currentTimeMillis();
  url="jdbc:derby://127.0.0.1:1527/" + database;
  props.put("karaf.lock.jdbc.url",url);
  lock=createLock(props);
  lock.lock();
  assertTrue(lock.lockConnection.getMetaData().getURL().contains(database));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.main.lock.MySQLJDBCLockIntegrationTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void initShouldCreateTheDatabaseIfItNotExists() throws Exception {
  String database="test" + System.currentTimeMillis();
  try {
    executeStatement("DROP DATABASE " + database);
  }
 catch (  Exception e) {
  }
  url="jdbc:mysql://127.0.0.1:3306/" + database;
  props.put("karaf.lock.jdbc.url",url);
  lock=createLock(props);
  Connection connection=getConnection("jdbc:mysql://127.0.0.1:3306/" + database,user,password);
  assertFalse(connection.isClosed());
  executeStatement("DROP DATABASE " + database);
  close(connection);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.main.lock.OracleJDBCLockTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void isAliveShouldReturnFalseIfItNotHoldsTheLock() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.execute()).andThrow(new SQLException());
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean alive=lock.isAlive();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(alive);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void lockShouldReturnFalseIfTableIsEmpty() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.execute()).andReturn(true);
  preparedStatement.close();
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT COUNT(*) FROM " + tableName)).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.executeQuery()).andReturn(resultSet);
  expect(resultSet.next()).andReturn(Boolean.TRUE);
  expect(resultSet.getInt(1)).andReturn(0);
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean lockAquired=lock.lock();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(lockAquired);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void isAliveShouldReturnTrueIfItHoldsTheLock() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.execute()).andReturn(true);
  preparedStatement.close();
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT COUNT(*) FROM " + tableName)).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.executeQuery()).andReturn(resultSet);
  expect(resultSet.next()).andReturn(Boolean.TRUE);
  expect(resultSet.getInt(1)).andReturn(1);
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean alive=lock.isAlive();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertTrue(alive);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test @Override public void lockShouldReturnFalseIfTheRowIsAlreadyLocked() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.execute()).andThrow(new SQLException());
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean lockAquired=lock.lock();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(lockAquired);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test @Override public void lockShouldReturnTrueItTheTableIsNotLocked() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.execute()).andReturn(true);
  preparedStatement.close();
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT COUNT(*) FROM " + tableName)).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.executeQuery()).andReturn(resultSet);
  expect(resultSet.next()).andReturn(Boolean.TRUE);
  expect(resultSet.getInt(1)).andReturn(1);
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean lockAquired=lock.lock();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertTrue(lockAquired);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test @Override public void lockShouldReturnFalseIfAnotherRowIsLocked() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(10);
  expect(preparedStatement.execute()).andThrow(new SQLException());
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean lockAquired=lock.lock();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(lockAquired);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.main.lock.PostgreSQLJDBCLockIntegrationTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void initShouldCreateTheDatabaseIfItNotExists() throws Exception {
  String database="test" + System.currentTimeMillis();
  url="jdbc:postgresql://127.0.0.1:5432/" + database;
  props.put("karaf.lock.jdbc.url",url);
  lock=createLock(props);
  lock.lock();
  assertTrue(lock.lockConnection.getMetaData().getURL().contains(database));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.main.lock.PostgreSQLJDBCLockTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test @Override public void lockShouldReturnTrueItTheTableIsNotLocked() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(0);
  expect(preparedStatement.execute()).andReturn(true);
  preparedStatement.close();
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("UPDATE " + tableName + " SET MOMENT = 1")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(0);
  expect(preparedStatement.executeUpdate()).andReturn(1);
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean lockAquired=lock.lock();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertTrue(lockAquired);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test @Override public void lockShouldReturnFalseIfTableIsEmpty() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(0);
  expect(preparedStatement.execute()).andReturn(true);
  preparedStatement.close();
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("UPDATE " + tableName + " SET MOMENT = 1")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(0);
  expect(preparedStatement.executeUpdate()).andReturn(0);
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean lockAquired=lock.lock();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(lockAquired);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test @Override public void lockShouldReturnFalseIfTheRowIsAlreadyLocked() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(0);
  expect(preparedStatement.execute()).andReturn(true);
  preparedStatement.close();
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("UPDATE " + tableName + " SET MOMENT = 1")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(0);
  expect(preparedStatement.executeUpdate()).andThrow(new SQLException());
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean lockAquired=lock.lock();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(lockAquired);
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test @Override public void lockShouldReturnFalseIfAnotherRowIsLocked() throws Exception {
  initShouldNotCreateTheSchemaIfItAlreadyExists();
  reset(connection,metaData,statement,preparedStatement,resultSet);
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("SELECT * FROM " + tableName + " FOR UPDATE")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(0);
  expect(preparedStatement.execute()).andReturn(true);
  preparedStatement.close();
  expect(connection.isClosed()).andReturn(false);
  expect(connection.prepareStatement("UPDATE " + tableName + " SET MOMENT = 1")).andReturn(preparedStatement);
  preparedStatement.setQueryTimeout(0);
  expect(preparedStatement.executeUpdate()).andThrow(new SQLException());
  preparedStatement.close();
  replay(connection,metaData,statement,preparedStatement,resultSet);
  boolean lockAquired=lock.lock();
  verify(connection,metaData,statement,preparedStatement,resultSet);
  assertFalse(lockAquired);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.service.command.ObjectClassMatcherTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMatchesAtLeastOneName(){
  Assert.assertTrue(ObjectClassMatcher.matchesAtLeastOneName(new String[]{"other","org.apache.TestClass"},"TestClass"));
  Assert.assertFalse(ObjectClassMatcher.matchesAtLeastOneName(new String[]{"TestClass2"},"TestClass"));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMatchesName(){
  Assert.assertTrue(ObjectClassMatcher.matchesName("org.apache.TestClass","TestClass"));
  Assert.assertTrue(ObjectClassMatcher.matchesName("TestClass","TestClass"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.service.guard.impl.GuardProxyCatalogTest </h4><pre class="type-6 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testHandleProxificationForHook() throws Exception {
  Dictionary<String,Object> config=new Hashtable<String,Object>();
  config.put(Constants.SERVICE_PID,GuardProxyCatalog.SERVICE_ACL_PREFIX + "foo");
  config.put(GuardProxyCatalog.SERVICE_GUARD_KEY,"(a>=5)");
  BundleContext bc=mockConfigAdminBundleContext(config);
  GuardProxyCatalog gpc=new GuardProxyCatalog(bc);
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(Constants.SERVICE_ID,13L);
  props.put("a","6");
  props.put(GuardProxyCatalog.PROXY_SERVICE_KEY,Boolean.TRUE);
  ServiceReference<?> sref2=mockServiceReference(props);
  assertFalse("Should not hide an existing proxy for this client",gpc.handleProxificationForHook(sref2));
  assertEquals("No proxy should have been created",0,gpc.proxyMap.size());
  Dictionary<String,Object> props4=new Hashtable<String,Object>();
  props4.put(Constants.SERVICE_ID,15L);
  props4.put("a","7");
  ServiceReference<?> sref4=mockServiceReference(props4);
  assertTrue("Should hide a service that needs to be proxied",gpc.handleProxificationForHook(sref4));
  assertEquals("Should trigger proxy creation",1,gpc.proxyMap.size());
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 type-5 type-19 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings({"unchecked","rawtypes"}) @Test public void testHandleServiceModified2() throws Exception {
  BundleContext bc=mockConfigAdminBundleContext();
  GuardProxyCatalog gpc=new GuardProxyCatalog(bc);
  long serviceID=1L;
  final Hashtable<String,Object> serviceProps=new Hashtable<String,Object>();
  serviceProps.put(Constants.OBJECTCLASS,new String[]{TestServiceAPI.class.getName()});
  serviceProps.put(Constants.SERVICE_ID,serviceID);
  BundleContext providerBC=EasyMock.createNiceMock(BundleContext.class);
  EasyMock.expect(providerBC.registerService(EasyMock.aryEq(new String[]{TestServiceAPI.class.getName()}),EasyMock.anyObject(),EasyMock.anyObject(Dictionary.class))).andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      final Dictionary props=(Dictionary)EasyMock.getCurrentArguments()[2];
      assertEquals(Boolean.TRUE,props.get(GuardProxyCatalog.PROXY_SERVICE_KEY));
      ServiceRegistration reg=EasyMock.createMock(ServiceRegistration.class);
      ServiceReference sr=mockServiceReference(props);
      EasyMock.expect(reg.getReference()).andReturn(sr).anyTimes();
      reg.setProperties(EasyMock.isA(Dictionary.class));
      EasyMock.expectLastCall().andAnswer(new IAnswer(){
        @Override public Object answer() throws Throwable {
          ArrayList<String> oldKeys=Collections.list(props.keys());
          for (          String key : oldKeys) {
            props.remove(key);
          }
          Dictionary<String,Object> newProps=(Dictionary<String,Object>)EasyMock.getCurrentArguments()[0];
          for (          String key : Collections.list(newProps.keys())) {
            props.put(key,newProps.get(key));
          }
          return null;
        }
      }
).once();
      EasyMock.replay(reg);
      return reg;
    }
  }
).anyTimes();
  EasyMock.replay(providerBC);
  BundleWiring bw=EasyMock.createMock(BundleWiring.class);
  EasyMock.expect(bw.getClassLoader()).andReturn(getClass().getClassLoader()).anyTimes();
  EasyMock.replay(bw);
  Bundle providerBundle=EasyMock.createNiceMock(Bundle.class);
  EasyMock.expect(providerBundle.getBundleContext()).andReturn(providerBC).anyTimes();
  EasyMock.expect(providerBundle.adapt(BundleWiring.class)).andReturn(bw).anyTimes();
  EasyMock.replay(providerBundle);
  ServiceReference sr=mockServiceReference(providerBundle,serviceProps);
  gpc.proxyIfNotAlreadyProxied(sr);
  GuardProxyCatalog.CreateProxyRunnable runnable=gpc.createProxyQueue.take();
  runnable.run(getProxyManager());
  ServiceRegistrationHolder holder=gpc.proxyMap.get(serviceID);
  ServiceRegistration<?> reg=holder.registration;
  assertFalse("No roles defined for this service using configuration, so roles property should not be set",Arrays.asList(reg.getReference().getPropertyKeys()).contains(GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY));
  for (  String key : serviceProps.keySet()) {
    assertEquals(serviceProps.get(key),reg.getReference().getProperty(key));
  }
  assertEquals(Boolean.TRUE,reg.getReference().getProperty(GuardProxyCatalog.PROXY_SERVICE_KEY));
  serviceProps.put(GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY,"foobar");
  assertEquals("Precondition, the mocked reference should have picked up this change","foobar",sr.getProperty(GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY));
  gpc.serviceChanged(new ServiceEvent(ServiceEvent.MODIFIED,sr));
  assertEquals("Changing the service should not change the number of proxies",1,gpc.proxyMap.size());
  assertFalse("The roles property set on the modified service should have been removed",Arrays.asList(reg.getReference().getPropertyKeys()).contains(GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY));
  assertEquals(Boolean.TRUE,reg.getReference().getProperty(GuardProxyCatalog.PROXY_SERVICE_KEY));
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsProxy() throws Exception {
  BundleContext bc=mockBundleContext();
  GuardProxyCatalog gpc=new GuardProxyCatalog(bc);
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(GuardProxyCatalog.PROXY_SERVICE_KEY,Boolean.TRUE);
  assertTrue(gpc.isProxy(mockServiceReference(props)));
  assertFalse(gpc.isProxy(mockServiceReference(new Hashtable<String,Object>())));
}

</code></pre>

<br>
<pre class="type-14 type-3 type-4 type-5 type-7 type-19 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings({"unchecked","rawtypes"}) @Test public void testProxyCreationThread() throws Exception {
  ProxyManager proxyManager=getProxyManager();
  ConfigurationAdmin ca=EasyMock.createMock(ConfigurationAdmin.class);
  EasyMock.expect(ca.listConfigurations(EasyMock.anyObject(String.class))).andReturn(null).anyTimes();
  EasyMock.replay(ca);
  ServiceReference pmSref=EasyMock.createMock(ServiceReference.class);
  EasyMock.replay(pmSref);
  ServiceReference pmSref2=EasyMock.createMock(ServiceReference.class);
  EasyMock.replay(pmSref2);
  ServiceReference cmSref=EasyMock.createMock(ServiceReference.class);
  EasyMock.replay(cmSref);
  Bundle b=EasyMock.createMock(Bundle.class);
  EasyMock.expect(b.getBundleId()).andReturn(23992734L).anyTimes();
  EasyMock.replay(b);
  BundleContext bc=EasyMock.createNiceMock(BundleContext.class);
  EasyMock.expect(bc.getBundle()).andReturn(b).anyTimes();
  EasyMock.expect(bc.createFilter(EasyMock.isA(String.class))).andAnswer(new IAnswer<Filter>(){
    @Override public Filter answer() throws Throwable {
      return FrameworkUtil.createFilter((String)EasyMock.getCurrentArguments()[0]);
    }
  }
).anyTimes();
  final ServiceListener[] pmListenerHolder=new ServiceListener[1];
  String pmFilter="(&(objectClass=" + ProxyManager.class.getName() + ")"+ "(!("+ GuardProxyCatalog.PROXY_SERVICE_KEY+ "=*)))";
  bc.addServiceListener(EasyMock.isA(ServiceListener.class),EasyMock.eq(pmFilter));
  EasyMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      pmListenerHolder[0]=(ServiceListener)EasyMock.getCurrentArguments()[0];
      return null;
    }
  }
).anyTimes();
  EasyMock.expect(bc.getServiceReferences(EasyMock.anyObject(String.class),EasyMock.contains(ConfigurationAdmin.class.getName()))).andReturn(new ServiceReference[]{cmSref}).anyTimes();
  EasyMock.expect(bc.getService(pmSref)).andReturn(proxyManager).anyTimes();
  EasyMock.expect(bc.getService(pmSref2)).andReturn(proxyManager).anyTimes();
  EasyMock.expect(bc.getService(cmSref)).andReturn(ca).anyTimes();
  EasyMock.replay(bc);
  GuardProxyCatalog gpc=new GuardProxyCatalog(bc);
  final Hashtable<String,Object> serviceProps=new Hashtable<String,Object>();
  serviceProps.put(Constants.OBJECTCLASS,new String[]{TestServiceAPI.class.getName()});
  serviceProps.put(Constants.SERVICE_ID,162L);
  final Map<ServiceReference<?>,Object> serviceMap=new HashMap<ServiceReference<?>,Object>();
  BundleContext providerBC=EasyMock.createMock(BundleContext.class);
  final Hashtable<String,Object> expectedProxyProps=new Hashtable<String,Object>(serviceProps);
  expectedProxyProps.put(GuardProxyCatalog.PROXY_SERVICE_KEY,Boolean.TRUE);
  EasyMock.expect(providerBC.registerService(EasyMock.isA(String[].class),EasyMock.anyObject(),EasyMock.isA(Dictionary.class))).andAnswer(new IAnswer(){
    @Override public ServiceRegistration answer() throws Throwable {
      Dictionary<String,Object> props=(Dictionary<String,Object>)EasyMock.getCurrentArguments()[2];
      ServiceRegistration reg=EasyMock.createMock(ServiceRegistration.class);
      ServiceReference sr=mockServiceReference(props);
      EasyMock.expect(reg.getReference()).andReturn(sr).anyTimes();
      reg.unregister();
      EasyMock.expectLastCall().once();
      EasyMock.replay(reg);
      serviceMap.put(sr,EasyMock.getCurrentArguments()[1]);
      return reg;
    }
  }
).once();
  EasyMock.expect(providerBC.getService(EasyMock.isA(ServiceReference.class))).andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      return serviceMap.get(EasyMock.getCurrentArguments()[0]);
    }
  }
).anyTimes();
  EasyMock.replay(providerBC);
  BundleWiring bw=EasyMock.createMock(BundleWiring.class);
  EasyMock.expect(bw.getClassLoader()).andReturn(getClass().getClassLoader()).anyTimes();
  EasyMock.replay(bw);
  Bundle providerBundle=EasyMock.createNiceMock(Bundle.class);
  EasyMock.expect(providerBundle.getBundleContext()).andReturn(providerBC).anyTimes();
  EasyMock.expect(providerBundle.adapt(BundleWiring.class)).andReturn(bw).anyTimes();
  EasyMock.replay(providerBundle);
  ServiceReference sr=mockServiceReference(providerBundle,serviceProps);
  assertEquals("Precondition",0,gpc.proxyMap.size());
  assertEquals("Precondition",0,gpc.createProxyQueue.size());
  gpc.proxyIfNotAlreadyProxied(sr);
  assertEquals(1,gpc.proxyMap.size());
  assertEquals(1,gpc.createProxyQueue.size());
  GuardProxyCatalog.ServiceRegistrationHolder holder=gpc.proxyMap.get(162L);
  assertNull("The registration shouldn't have happened yet",holder.registration);
  assertEquals(1,gpc.createProxyQueue.size());
  Thread[] tarray=new Thread[Thread.activeCount()];
  Thread.enumerate(tarray);
  for (  Thread t : tarray) {
    if (t != null) {
      assertTrue(!GuardProxyCatalog.PROXY_CREATOR_THREAD_NAME.equals(t.getName()));
    }
  }
  pmListenerHolder[0].serviceChanged(new ServiceEvent(ServiceEvent.REGISTERED,pmSref));
  Thread.sleep(400);
  Thread ourThread=null;
  Thread[] tarray2=new Thread[Thread.activeCount()];
  Thread.enumerate(tarray2);
  for (  Thread t : tarray2) {
    if (t != null) {
      if (t.getName().equals(GuardProxyCatalog.PROXY_CREATOR_THREAD_NAME)) {
        ourThread=t;
      }
    }
  }
  assertNotNull(ourThread);
  assertTrue(ourThread.isDaemon());
  assertTrue(ourThread.isAlive());
  assertNotNull(holder.registration);
  assertEquals(0,gpc.createProxyQueue.size());
  int numProxyThreads=0;
  pmListenerHolder[0].serviceChanged(new ServiceEvent(ServiceEvent.REGISTERED,pmSref2));
  Thread.sleep(300);
  Thread[] tarray3=new Thread[Thread.activeCount()];
  Thread.enumerate(tarray3);
  for (  Thread t : tarray3) {
    if (t != null) {
      if (t.getName().equals(GuardProxyCatalog.PROXY_CREATOR_THREAD_NAME)) {
        numProxyThreads++;
      }
    }
  }
  assertEquals("Maximum 1 proxy thread, even if there is more than 1 proxy service",1,numProxyThreads);
  pmListenerHolder[0].serviceChanged(new ServiceEvent(ServiceEvent.UNREGISTERING,pmSref));
  Thread.sleep(300);
  Thread[] tarray4=new Thread[Thread.activeCount()];
  Thread.enumerate(tarray4);
  for (  Thread t : tarray4) {
    if (t != null) {
      assertTrue(!GuardProxyCatalog.PROXY_CREATOR_THREAD_NAME.equals(t.getName()));
    }
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGuardProxyCatalog() throws Exception {
  Bundle b=EasyMock.createMock(Bundle.class);
  EasyMock.expect(b.getBundleId()).andReturn(9823L).anyTimes();
  EasyMock.replay(b);
  BundleContext bc=EasyMock.createNiceMock(BundleContext.class);
  EasyMock.expect(bc.getBundle()).andReturn(b).anyTimes();
  bc.addServiceListener(EasyMock.isA(ServiceListener.class));
  EasyMock.expectLastCall().once();
  String caFilter="(&(objectClass=org.osgi.service.cm.ConfigurationAdmin)" + "(!(" + GuardProxyCatalog.PROXY_SERVICE_KEY + "=*)))";
  EasyMock.expect(bc.createFilter(caFilter)).andReturn(FrameworkUtil.createFilter(caFilter)).anyTimes();
  String pmFilter="(&(objectClass=org.apache.aries.proxy.ProxyManager)" + "(!(" + GuardProxyCatalog.PROXY_SERVICE_KEY + "=*)))";
  EasyMock.expect(bc.createFilter(pmFilter)).andReturn(FrameworkUtil.createFilter(pmFilter)).anyTimes();
  EasyMock.replay(bc);
  GuardProxyCatalog gpc=new GuardProxyCatalog(bc);
  assertTrue("Service Tracker for ConfigAdmin should be opened",gpc.configAdminTracker.getTrackingCount() != -1);
  assertTrue("Service Tracker for ProxyManager should be opened",gpc.proxyManagerTracker.getTrackingCount() != -1);
  EasyMock.verify(bc);
  EasyMock.reset(bc);
  bc.removeServiceListener(EasyMock.isA(ServiceListener.class));
  EasyMock.expectLastCall().once();
  EasyMock.replay(bc);
  gpc.close();
  assertEquals("Service Tracker for ConfigAdmin should be closed",-1,gpc.configAdminTracker.getTrackingCount());
  assertEquals("Service Tracker for ProxyManager should be closed",-1,gpc.proxyManagerTracker.getTrackingCount());
  EasyMock.verify(bc);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.shell.console.impl.jline.ConsoleImplTest </h4><pre class="type-3 type-4 type-11 type-5 type-7 type-19 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConsoleImpl() throws Exception {
  ServiceReference<?> cmRef=EasyMock.createMock(ServiceReference.class);
  EasyMock.expect(cmRef.getProperty(CommandProcessor.COMMAND_SCOPE)).andReturn("myscope").anyTimes();
  EasyMock.expect(cmRef.getProperty(CommandProcessor.COMMAND_FUNCTION)).andReturn("myfunction").anyTimes();
  EasyMock.replay(cmRef);
  ServiceReference<?>[] cmRefs=new ServiceReference[]{cmRef};
  BundleContext bc=EasyMock.createMock(BundleContext.class);
  EasyMock.expect(bc.getServiceReference((Class<?>)EasyMock.anyObject())).andReturn(null).anyTimes();
  EasyMock.expect(bc.getService((ServiceReference<?>)EasyMock.anyObject())).andReturn(null).anyTimes();
  bc.addServiceListener(EasyMock.isA(ServiceListener.class),EasyMock.isA(String.class));
  EasyMock.expectLastCall().anyTimes();
  EasyMock.expect(bc.getServiceReferences((String)null,"(&(osgi.command.scope=*)(osgi.command.function=*)" + "(|(org.apache.karaf.service.guard.roles=myrole)(!(org.apache.karaf.service.guard.roles=*))))")).andReturn(cmRefs).anyTimes();
  EasyMock.expect(bc.getServiceReferences(Converter.class.getName(),null)).andReturn(null).anyTimes();
  EasyMock.expect(bc.getServiceReferences(CommandSessionListener.class.getName(),null)).andReturn(null).anyTimes();
  EasyMock.expect(bc.createFilter(EasyMock.isA(String.class))).andAnswer(new IAnswer<Filter>(){
    @Override public Filter answer() throws Throwable {
      return FrameworkUtil.createFilter((String)EasyMock.getCurrentArguments()[0]);
    }
  }
).anyTimes();
  EasyMock.replay(bc);
  final ConsoleImpl console=new ConsoleImpl(null,new ThreadIOImpl(),System.in,System.out,System.err,null,"UTF-8",null,bc,true);
  assertTrue(console.session instanceof DelegateSession);
  console.session.put("foo","bar");
  final DelegateSession ds=(DelegateSession)console.session;
  assertNull("Precondition",ds.delegate);
  Subject subject=new Subject();
  subject.getPrincipals().add(new RolePrincipal("myrole"));
  Subject.doAs(subject,new PrivilegedAction(){
    @Override public Object run(){
      SecuredCommandProcessorImpl secCP=console.createSecuredCommandProcessor();
      assertNotNull(ds.delegate);
      assertEquals("Attributes set before the delegate was set should have been transferred","bar",ds.get("foo"));
      assertEquals("Attributes set before the delegate was set should have been transferred","bar",ds.delegate.get("foo"));
      assertSame(System.out,ds.delegate.getConsole());
      assertSame(System.out,ds.getConsole());
      assertTrue(secCP.getCommands().contains("myscope:myfunction"));
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.shell.security.impl.SecuredCommandConfigTransformerTest </h4><pre class="type-14 type-10 type-3 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransformation() throws Exception {
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put("foo","a,b,c");
  props.put("bar[/.*[a]+*/]","d");
  props.put("bar","e");
  props.put("zar[/.*HiThere*/]","f");
  props.put("service.pid",SecuredCommandConfigTransformer.PROXY_COMMAND_ACL_PID_PREFIX + "abc");
  Configuration commandConfig=mockConfiguration(props);
  Dictionary<String,Object> props2=new Hashtable<String,Object>();
  props2.put("xxx","yyy");
  props2.put("service.pid",SecuredCommandConfigTransformer.PROXY_COMMAND_ACL_PID_PREFIX + "xyz.123");
  Configuration commandConfig2=mockConfiguration(props2);
  Dictionary<String,Object> props3=new Hashtable<String,Object>();
  props3.put("test","toast");
  props3.put("service.pid","xyz.123");
  Configuration otherConfig=mockConfiguration(props3);
  final Map<String,Configuration> configurations=new HashMap<String,Configuration>();
  ConfigurationAdmin ca=EasyMock.createMock(ConfigurationAdmin.class);
  EasyMock.expect(ca.listConfigurations("(service.pid=" + SecuredCommandConfigTransformer.PROXY_COMMAND_ACL_PID_PREFIX + "*)")).andReturn(new Configuration[]{commandConfig,commandConfig2,otherConfig}).anyTimes();
  EasyMock.expect(ca.getConfiguration(EasyMock.isA(String.class),EasyMock.anyString())).andAnswer(new IAnswer<Configuration>(){
    @Override public Configuration answer() throws Throwable {
      String pid=(String)EasyMock.getCurrentArguments()[0];
      Configuration c=configurations.get(pid);
      if (c == null) {
        c=EasyMock.createMock(Configuration.class);
        Dictionary<String,Object> m=new Hashtable<String,Object>();
        if ("org.apache.karaf.service.acl.command.abc.foo".equals(pid)) {
          m.put("service.guard","(&(osgi.command.scope=abc)(osgi.command.function=foo))");
          m.put("execute","a,b,c");
          m.put("foo","a,b,c");
        }
 else         if ("org.apache.karaf.service.acl.command.abc.bar".equals(pid)) {
          m.put("service.guard","(&(osgi.command.scope=abc)(osgi.command.function=bar))");
          m.put("execute[/.*/,/.*[a]+*/]","d");
          m.put("execute","e");
          m.put("bar[/.*[a]+*/]","d");
          m.put("bar","e");
        }
 else         if ("org.apache.karaf.service.acl.command.abc.zar".equals(pid)) {
          m.put("service.guard","(&(osgi.command.scope=abc)(osgi.command.function=zar))");
          m.put("execute[/.*/,/.*HiThere*/]","f");
          m.put("zar[/.*HiThere*/]","f");
        }
 else {
          fail("Unexpected PID: " + pid);
        }
        m.put("*","*");
        c.update(m);
        EasyMock.expectLastCall().once();
        EasyMock.replay(c);
        configurations.put(pid,c);
      }
      return c;
    }
  }
).anyTimes();
  EasyMock.replay(ca);
  SecuredCommandConfigTransformer scct=new SecuredCommandConfigTransformer();
  scct.setConfigAdmin(ca);
  scct.init();
  assertEquals(3,configurations.size());
  boolean foundFoo=false;
  boolean foundBar=false;
  boolean foundZar=false;
  for (  Map.Entry<String,Configuration> entry : configurations.entrySet()) {
    Configuration c=entry.getValue();
    EasyMock.verify(c);
    if ("org.apache.karaf.service.acl.command.abc.foo".equals(entry.getKey())) {
      foundFoo=true;
    }
 else     if ("org.apache.karaf.service.acl.command.abc.bar".equals(entry.getKey())) {
      foundBar=true;
    }
 else     if ("org.apache.karaf.service.acl.command.abc.zar".equals(entry.getKey())) {
      foundZar=true;
    }
  }
  assertTrue(foundFoo);
  assertTrue(foundBar);
  assertTrue(foundZar);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.shell.security.impl.SecuredCommandProcessorImplTest </h4><pre class="type-6 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommandProcessor() throws Exception {
  ThreadIO tio=EasyMock.createMock(ThreadIO.class);
  EasyMock.replay(tio);
  @SuppressWarnings("unchecked") ServiceReference<ThreadIO> tioRef=EasyMock.createMock(ServiceReference.class);
  EasyMock.replay(tioRef);
  final BundleContext bc=EasyMock.createMock(BundleContext.class);
  EasyMock.expect(bc.getServiceReference(ThreadIO.class)).andReturn(tioRef).anyTimes();
  EasyMock.expect(bc.getService(tioRef)).andReturn(tio).anyTimes();
  EasyMock.expect(bc.createFilter(EasyMock.isA(String.class))).andAnswer(new IAnswer<Filter>(){
    @Override public Filter answer() throws Throwable {
      return FrameworkUtil.createFilter((String)EasyMock.getCurrentArguments()[0]);
    }
  }
).anyTimes();
  EasyMock.expect(bc.getServiceReferences((String)EasyMock.anyObject(),(String)EasyMock.anyObject())).andReturn(null).anyTimes();
  final Map<String,ServiceListener> listeners=new HashMap<String,ServiceListener>();
  final String commandFilter="(&(osgi.command.scope=*)(osgi.command.function=*)" + "(|(org.apache.karaf.service.guard.roles=aaabbbccc)(!(org.apache.karaf.service.guard.roles=*))))";
  expectServiceTracker(bc,commandFilter,listeners);
  expectServiceTracker(bc,"(objectClass=" + Converter.class.getName() + ")",listeners);
  expectServiceTracker(bc,"(objectClass=" + CommandSessionListener.class.getName() + ")",listeners);
  EasyMock.replay(bc);
  Subject subject=new Subject();
  subject.getPrincipals().add(new RolePrincipal("aaabbbccc"));
  Subject.doAs(subject,new PrivilegedAction(){
    @Override public Object run(){
      MySecuredCommandProcessorImpl scp=new MySecuredCommandProcessorImpl(bc){
      }
;
      assertEquals(3,scp.getCommands().size());
      assertTrue(scp.getCommands().contains("osgi:addcommand"));
      assertTrue(scp.getCommands().contains("osgi:removecommand"));
      assertTrue(scp.getCommands().contains("osgi:eval"));
      assertEquals(1,scp.getConstants().size());
      assertEquals(bc,scp.getConstants().get(".context"));
      ServiceListener commandListener=listeners.get(commandFilter);
      ServiceReference<?> cdRef=EasyMock.createMock(ServiceReference.class);
      EasyMock.expect(cdRef.getProperty(CommandProcessor.COMMAND_SCOPE)).andReturn("foo");
      EasyMock.expect(cdRef.getProperty(CommandProcessor.COMMAND_FUNCTION)).andReturn("bar");
      EasyMock.replay(cdRef);
      ServiceEvent event=new ServiceEvent(ServiceEvent.REGISTERED,cdRef);
      commandListener.serviceChanged(event);
      assertEquals(4,scp.getCommands().size());
      assertTrue(scp.getCommands().contains("foo:bar"));
      ServiceReference<?> cd2Ref=EasyMock.createMock(ServiceReference.class);
      EasyMock.expect(cd2Ref.getProperty(CommandProcessor.COMMAND_SCOPE)).andReturn("xxx");
      EasyMock.expect(cd2Ref.getProperty(CommandProcessor.COMMAND_FUNCTION)).andReturn(new String[]{"aaa","bbb"});
      EasyMock.replay(cd2Ref);
      ServiceEvent event2=new ServiceEvent(ServiceEvent.REGISTERED,cd2Ref);
      commandListener.serviceChanged(event2);
      assertEquals(6,scp.getCommands().size());
      assertTrue(scp.getCommands().contains("xxx:aaa"));
      assertTrue(scp.getCommands().contains("xxx:bbb"));
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.shell.ssh.ServerKeyVerifierImplTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testKnownAndCorrectKey() throws NoSuchAlgorithmException, InvalidKeySpecException {
  SocketAddress address=LOCALHOST;
  PublicKey validServerKey=createPubKey();
  KnownHostsManager knowHostsManager=EasyMock.createMock(KnownHostsManager.class);
  EasyMock.expect(knowHostsManager.getKnownKey(address,ALGORITHM)).andReturn(validServerKey);
  EasyMock.replay(knowHostsManager);
  ServerKeyVerifierImpl verifier=new ServerKeyVerifierImpl(knowHostsManager,true);
  boolean verified=verifier.verifyServerKey(null,address,validServerKey);
  Assert.assertTrue("Key should be verified as the key is known and matches the key we verify",verified);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNewKey() throws NoSuchAlgorithmException, InvalidKeySpecException {
  SocketAddress address=LOCALHOST;
  PublicKey validServerKey=createPubKey();
  KnownHostsManager knowHostsManager=EasyMock.createMock(KnownHostsManager.class);
  EasyMock.expect(knowHostsManager.getKnownKey(address,ALGORITHM)).andReturn(null);
  knowHostsManager.storeKeyForHost(address,validServerKey);
  EasyMock.expectLastCall();
  EasyMock.replay(knowHostsManager);
  ServerKeyVerifierImpl verifier=new ServerKeyVerifierImpl(knowHostsManager,true);
  boolean verified=verifier.verifyServerKey(null,address,validServerKey);
  Assert.assertTrue("Key should be verified as the key is new",verified);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testKnownAndIncorrectKey() throws NoSuchAlgorithmException, InvalidKeySpecException {
  SocketAddress address=LOCALHOST;
  PublicKey validServerKey=createPubKey();
  PublicKey otherServerKey=createPubKey();
  KnownHostsManager knowHostsManager=EasyMock.createMock(KnownHostsManager.class);
  EasyMock.expect(knowHostsManager.getKnownKey(address,ALGORITHM)).andReturn(otherServerKey);
  EasyMock.replay(knowHostsManager);
  ServerKeyVerifierImpl verifier=new ServerKeyVerifierImpl(knowHostsManager,true);
  boolean verified=verifier.verifyServerKey(null,address,validServerKey);
  Assert.assertFalse("Key should not be verified as the key is known and does not match the key we verify",verified);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.tooling.features.GenerateDescriptorMojoTest </h4><pre class="type-6 type-3 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadXml100() throws JAXBException, SAXException, ParserConfigurationException, XMLStreamException {
  URL url=getClass().getClassLoader().getResource("input-features-1.0.0.xml");
  Features featuresRoot=JaxbUtil.unmarshal(url.toExternalForm(),false);
  assertEquals(featuresRoot.getRepository().size(),1);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  JaxbUtil.marshal(featuresRoot,baos);
  String text=new String(baos.toByteArray());
  assertTrue(text.contains("repository"));
  assertTrue(text.contains(FeaturesNamespaces.URI_CURRENT));
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
