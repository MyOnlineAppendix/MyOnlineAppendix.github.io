<h3><span class=" glyphicon glyphicon-tag"/>&nbspAPIUtilityVerifier</h3><kbd>Verifies values of objects/variables related to API calls (Java or TPL) </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.karaf.bundle.command.bundletree.TreeTest </h4><pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void writeTreeWithOneChild() throws IOException {
  Tree<String> tree=new Tree<String>("root");
  tree.addChild("child");
  BufferedReader reader=read(tree);
  assertEquals("root",reader.readLine());
  assertEquals("+- child",reader.readLine());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void writeTreeWithChildAndGrandChild() throws IOException {
  Tree<String> tree=new Tree<String>("root");
  Node<String> node=tree.addChild("child");
  node.addChild("grandchild");
  BufferedReader reader=read(tree);
  assertEquals("root",reader.readLine());
  assertEquals("+- child",reader.readLine());
  assertEquals("   +- grandchild",reader.readLine());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void writeTreeWithTwoChildrenAndOneGrandchild() throws IOException {
  Tree<String> tree=new Tree<String>("root");
  Node<String> child=tree.addChild("child1");
  child.addChild("grandchild");
  tree.addChild("child2");
  BufferedReader reader=read(tree);
  assertEquals("root",reader.readLine());
  assertEquals("+- child1",reader.readLine());
  assertEquals("|  +- grandchild",reader.readLine());
  assertEquals("+- child2",reader.readLine());
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void writeTreeWithOneChildAndNodeConverter() throws IOException {
  Tree<String> tree=new Tree<String>("root");
  tree.addChild("child");
  StringWriter writer=new StringWriter();
  tree.write(new PrintWriter(writer),new Tree.Converter<String>(){
    public String toString(    Node<String> node){
      return "my " + node.getValue();
    }
  }
);
  BufferedReader reader=new BufferedReader(new StringReader(writer.getBuffer().toString()));
  assertEquals("my root",reader.readLine());
  assertEquals("+- my child",reader.readLine());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.features.internal.service.FeaturesServiceImplTest </h4><pre class="type-6 type-4 type-11 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetFeature() throws Exception {
  Feature transactionFeature=feature("transaction","1.0.0");
  final Map<String,Map<String,Feature>> features=features(transactionFeature);
  final FeaturesServiceImpl impl=new FeaturesServiceImpl(null,null,new Storage(),null,null,null,this.resolver,null,"",null,null,null,null,null,0,0,0,null){
    protected Map<String,Map<String,Feature>> getFeatures() throws Exception {
      return features;
    }
  }
;
  assertNotNull(impl.getFeatures("transaction",org.apache.karaf.features.internal.model.Feature.DEFAULT_VERSION));
  assertSame(transactionFeature,impl.getFeatures("transaction",org.apache.karaf.features.internal.model.Feature.DEFAULT_VERSION)[0]);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.features.internal.service.FeaturesValidationTest </h4><pre class="type-6 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testNs10NoNameUnmarshall() throws Exception {
  URL url=getClass().getResource("f03.xml");
  Features features=JaxbUtil.unmarshal(url.toExternalForm(),true);
  assertNotNull(features);
}

</code></pre>

<br>
<pre class="type-6 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testNs11Unmarshall() throws Exception {
  URL url=getClass().getResource("f04.xml");
  Features features=JaxbUtil.unmarshal(url.toExternalForm(),true);
  assertNotNull(features);
}

</code></pre>

<br>
<pre class="type-6 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testNs12Unmarshall() throws Exception {
  URL url=getClass().getResource("f06.xml");
  Features features=JaxbUtil.unmarshal(url.toExternalForm(),true);
  assertNotNull(features);
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 type-5 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNs13Unmarshall() throws Exception {
  URL url=getClass().getResource("f07.xml");
  Features features=JaxbUtil.unmarshal(url.toExternalForm(),true);
  assertNotNull(features);
  assertEquals("2.5.6.SEC02",features.getFeature().get(0).getVersion());
  assertTrue(features.getFeature().get(1).isHidden());
  assertNotNull(features.getFeature().get(1).getLibraries());
  assertEquals(1,features.getFeature().get(0).getLibraries().size());
  assertEquals("my-library",features.getFeature().get(0).getLibraries().get(0).getLocation());
  assertEquals(Library.TYPE_ENDORSED,features.getFeature().get(0).getLibraries().get(0).getType());
  assertFalse(features.getFeature().get(0).getLibraries().get(0).isExport());
  assertTrue(features.getFeature().get(0).getLibraries().get(0).isDelegate());
}

</code></pre>

<br>
<pre class="type-6 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testNs10Unmarshall() throws Exception {
  URL url=getClass().getResource("f02.xml");
  Features features=JaxbUtil.unmarshal(url.toExternalForm(),true);
  assertNotNull(features);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.features.internal.service.OverridesTest </h4><pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNotMatching() throws IOException {
  Map<String,Resource> map=asResourceMap(b100,b110);
  assertEquals(b100,map.get(getUri(b100)));
  Overrides.override(map,Arrays.asList(getUri(b110)));
  assertEquals(b100,map.get(getUri(b100)));
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDifferentVendors() throws IOException {
  Map<String,Resource> map=asResourceMap(c100,c101,c110);
  assertEquals(c100,map.get(getUri(c100)));
  Overrides.override(map,Arrays.asList(getUri(c101),getUri(c110)));
  assertEquals(c101,map.get(getUri(c100)));
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMatching102() throws IOException {
  Map<String,Resource> map=asResourceMap(b100,b101,b102,b110);
  assertEquals(b100,map.get(getUri(b100)));
  Overrides.override(map,Arrays.asList(getUri(b101),getUri(b102),getUri(b110)));
  assertEquals(b102,map.get(getUri(b100)));
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMatching101() throws IOException {
  Map<String,Resource> map=asResourceMap(b100,b101,b110);
  assertEquals(b100,map.get(getUri(b100)));
  Overrides.override(map,Arrays.asList(getUri(b101),getUri(b110)));
  assertEquals(b101,map.get(getUri(b100)));
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMatchingRange() throws IOException {
  Map<String,Resource> map=asResourceMap(b100,b101,b110);
  assertEquals(b100,map.get(getUri(b100)));
  Overrides.override(map,Arrays.asList(getUri(b101),getUri(b110) + ";range=\"[1.0, 2.0)\""));
  assertEquals(b110,map.get(getUri(b100)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.BundleTests </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void listViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=bundle,name=root");
  TabularDataSupport value=(TabularDataSupport)mbeanServer.getAttribute(name,"Bundles");
  assertTrue(value.size() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.ConfigTest </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@SuppressWarnings("unchecked") @Test public void configsViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=config,name=root");
  List<String> configs=(List<String>)mbeanServer.getAttribute(name,"Configs");
  assertTrue(configs.size() > 0);
  assertTrue(configs.contains("org.apache.karaf.features"));
  Map<String,String> properties=(Map<String,String>)mbeanServer.invoke(name,"listProperties",new Object[]{"org.apache.karaf.features"},new String[]{"java.lang.String"});
  assertTrue(properties.keySet().size() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.FeatureSshCommandSecurityTest </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testFeatureCommandSecurityViaSsh() throws Exception {
  String vieweruser="viewer" + System.nanoTime() + "_features";
  String feature="wrapper";
  addViewer(vieweruser);
  String r=assertCommand(vieweruser,"feature:list -i --no-format",Result.OK);
  Assert.assertFalse("Precondition failed, this test uses the " + feature + " subsystem to test features with...",r.contains(feature));
  assertCommand(vieweruser,"feature:install -r " + feature,Result.NOT_FOUND);
  String r2=assertCommand("karaf","feature:list -i --no-format",Result.OK);
  Assert.assertFalse(feature + " features should not have been installed, as viewer doesn't have credentials",r2.contains(feature));
  assertCommand("karaf","feature:install -r " + feature,Result.OK);
  String r3=assertCommand(vieweruser,"feature:list -i --no-format",Result.OK);
  Assert.assertTrue(feature + " feature should have been installed by 'karaf' user",r3.contains(feature));
  assertCommand(vieweruser,"feature:uninstall -r " + feature,Result.NOT_FOUND);
  String r4=assertCommand("karaf","feature:list -i --no-format",Result.OK);
  Assert.assertTrue(feature + " feature should still be there, as viewer doesn't have credentials",r4.contains(feature));
  assertCommand("karaf","feature:uninstall -r " + feature,Result.OK);
  String r5=assertCommand(vieweruser,"feature:list -i --no-format",Result.OK);
  Assert.assertFalse(feature + " feature should have been uninstalled",r5.contains(feature));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.FeatureTest </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void listViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=feature,name=root");
  TabularData features=(TabularData)mbeanServer.getAttribute(name,"Features");
  assertTrue(features.size() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.HttpTest </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void listViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=http,name=root");
  TabularData servlets=(TabularData)mbeanServer.getAttribute(name,"Servlets");
  assertTrue(servlets.size() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.InstanceTest </h4><pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void createDestroyViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=instance,name=root");
  int oldNum=getInstancesNum(mbeanServer,name);
  mbeanServer.invoke(name,"createInstance",new Object[]{"itest2",0,0,0,null,null,null,null},new String[]{"java.lang.String","int","int","int","java.lang.String","java.lang.String","java.lang.String","java.lang.String"});
  Assert.assertEquals(oldNum + 1,getInstancesNum(mbeanServer,name));
  mbeanServer.invoke(name,"destroyInstance",new Object[]{"itest2"},new String[]{"java.lang.String"});
  Assert.assertEquals(oldNum,getInstancesNum(mbeanServer,name));
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void cloneViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=instance,name=root");
  int oldNum=getInstancesNum(mbeanServer,name);
  mbeanServer.invoke(name,"cloneInstance",new Object[]{"root","itest4",0,0,0,null,null},new String[]{"java.lang.String","java.lang.String","int","int","int","java.lang.String","java.lang.String"});
  Assert.assertEquals(oldNum + 1,getInstancesNum(mbeanServer,name));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.JMXSecurityTest </h4><pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJMXSecurityAsViewer() throws Exception {
  String suffix="_" + counter.incrementAndGet();
  String managerUser="managerUser" + System.currentTimeMillis() + suffix;
  String managerGroup="managerGroup" + System.currentTimeMillis() + suffix;
  String viewerUser="viewerUser" + System.currentTimeMillis() + suffix;
  System.out.println(executeCommand("jaas:realm-manage --realm karaf" + ";jaas:user-add " + managerUser + " "+ managerUser+ ";jaas:group-add "+ managerUser+ " "+ managerGroup+ ";jaas:group-role-add "+ managerGroup+ " viewer"+ ";jaas:group-role-add "+ managerGroup+ " manager"+ ";jaas:user-add "+ viewerUser+ " "+ viewerUser+ ";jaas:role-add "+ viewerUser+ " viewer"+ ";jaas:update"+ ";jaas:realm-manage --realm karaf"+ ";jaas:user-list",new RolePrincipal("admin")));
  ConfigurationAdmin configurationAdmin=getOsgiService(ConfigurationAdmin.class,30000);
  org.osgi.service.cm.Configuration configuration=configurationAdmin.getConfiguration("org.apache.karaf.management",null);
  if (configuration == null) {
  }
  JMXConnector connector=getJMXConnector(viewerUser,viewerUser);
  MBeanServerConnection connection=connector.getMBeanServerConnection();
  ObjectName systemMBean=new ObjectName("org.apache.karaf:type=system,name=root");
  assertEquals(100,connection.getAttribute(systemMBean,"StartLevel"));
  assertSetAttributeSecEx(connection,systemMBean,new Attribute("StartLevel",101));
  assertEquals("Changing the start level should have no effect for a viewer",100,connection.getAttribute(systemMBean,"StartLevel"));
  assertInvokeSecEx(connection,systemMBean,"halt");
  ObjectName memoryMBean=new ObjectName("java.lang:type=Memory");
  assertEquals(false,connection.getAttribute(memoryMBean,"Verbose"));
  assertSetAttributeSecEx(connection,memoryMBean,new Attribute("Verbose",true));
  assertEquals("Changing the verbosity should have no effect for a viewer",false,connection.getAttribute(memoryMBean,"Verbose"));
  assertInvokeSecEx(connection,memoryMBean,"gc");
  testJMXSecurityMBean(connection,false,false);
  testKarafConfigAdminMBean(connection,false,false);
  testOSGiConfigAdminMBean(connection,false,false);
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJMXSecurityAsManager() throws Exception {
  String suffix="_" + counter.incrementAndGet();
  String managerUser="managerUser" + System.currentTimeMillis() + suffix;
  String managerGroup="managerGroup" + System.currentTimeMillis() + suffix;
  String viewerUser="viewerUser" + System.currentTimeMillis() + suffix;
  System.out.println(executeCommand("jaas:realm-manage --realm karaf" + ";jaas:user-add " + managerUser + " "+ managerUser+ ";jaas:group-add "+ managerUser+ " "+ managerGroup+ ";jaas:group-role-add "+ managerGroup+ " viewer"+ ";jaas:group-role-add "+ managerGroup+ " manager"+ ";jaas:user-add "+ viewerUser+ " "+ viewerUser+ ";jaas:role-add "+ viewerUser+ " viewer"+ ";jaas:update"+ ";jaas:realm-manage --realm karaf"+ ";jaas:user-list",new RolePrincipal("admin")));
  JMXConnector connector=getJMXConnector(managerUser,managerUser);
  MBeanServerConnection connection=connector.getMBeanServerConnection();
  ObjectName systemMBean=new ObjectName("org.apache.karaf:type=system,name=root");
  assertEquals(100,connection.getAttribute(systemMBean,"StartLevel"));
  assertSetAttributeSecEx(connection,systemMBean,new Attribute("StartLevel",101));
  assertEquals("Changing the start level should have no effect for a viewer",100,connection.getAttribute(systemMBean,"StartLevel"));
  assertInvokeSecEx(connection,systemMBean,"halt");
  ObjectName memoryMBean=new ObjectName("java.lang:type=Memory");
  assertEquals(false,connection.getAttribute(memoryMBean,"Verbose"));
  assertSetAttributeSecEx(connection,memoryMBean,new Attribute("Verbose",true));
  assertEquals("Changing the verbosity should have no effect for a viewer",false,connection.getAttribute(memoryMBean,"Verbose"));
  connection.invoke(memoryMBean,"gc",new Object[]{},new String[]{});
  testJMXSecurityMBean(connection,true,false);
  testKarafConfigAdminMBean(connection,true,false);
  testOSGiConfigAdminMBean(connection,true,false);
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJMXSecurityAsAdmin() throws Exception {
  JMXConnector connector=getJMXConnector();
  MBeanServerConnection connection=connector.getMBeanServerConnection();
  ObjectName systemMBean=new ObjectName("org.apache.karaf:type=system,name=root");
  assertEquals(100,connection.getAttribute(systemMBean,"StartLevel"));
  try {
    connection.setAttribute(systemMBean,new Attribute("StartLevel",101));
    assertGetAttributeRetry("Start level should have been changed",101,connection,systemMBean,"StartLevel");
  }
  finally {
    connection.setAttribute(systemMBean,new Attribute("StartLevel",100));
  }
  assertGetAttributeRetry("Start level should be changed back now",100,connection,systemMBean,"StartLevel");
  ObjectName memoryMBean=new ObjectName("java.lang:type=Memory");
  assertEquals(false,connection.getAttribute(memoryMBean,"Verbose"));
  try {
    connection.setAttribute(memoryMBean,new Attribute("Verbose",true));
    assertEquals(true,connection.getAttribute(memoryMBean,"Verbose"));
  }
  finally {
    connection.setAttribute(memoryMBean,new Attribute("Verbose",false));
  }
  assertEquals("Verbosity should be changed back to false",false,connection.getAttribute(memoryMBean,"Verbose"));
  connection.invoke(memoryMBean,"gc",new Object[]{},new String[]{});
  testJMXSecurityMBean(connection,true,true);
  testKarafConfigAdminMBean(connection,true,true);
  testOSGiConfigAdminMBean(connection,true,true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.JaasSshCommandSecurityTest </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testJaasCommandSecurityViaSsh() throws Exception {
  String vieweruser="viewer" + System.nanoTime() + "_jaas";
  addViewer(vieweruser);
  String userName="XXX" + System.nanoTime();
  assertCommand(vieweruser,"jaas:realm-manage --realm karaf;" + "jaas:user-add " + userName + " pwd;"+ "jaas:update",Result.NOT_FOUND);
  String r=assertCommand(vieweruser,"jaas:realm-manage --realm karaf;" + "jaas:user-list",Result.OK);
  assertFalse("The viewer should not have the credentials to add the new user",r.contains(userName));
  assertCommand("karaf","jaas:realm-manage --realm karaf;" + "jaas:user-add " + userName + " pwd;"+ "jaas:update",Result.OK);
  String r2=assertCommand(vieweruser,"jaas:realm-manage --realm karaf;" + "jaas:user-list",Result.OK);
  assertTrue("The admin user should have the rights to add the new user",r2.contains(userName));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.JmsTest </h4><pre class="type-6 type-3 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=120000) public void testMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=jms,name=root");
  System.out.println("JMS MBean create operation invocation");
  mbeanServer.invoke(name,"create",new String[]{"testMBean","activemq","tcp://localhost:61616","karaf","karaf"},new String[]{"java.lang.String","java.lang.String","java.lang.String","java.lang.String","java.lang.String"});
  getOsgiService(ConnectionFactory.class,"name=testMBean",30000);
  List<String> connectionFactories=(List<String>)mbeanServer.getAttribute(name,"Connectionfactories");
  assertEquals(true,connectionFactories.size() >= 1);
  System.out.println("JMS MBean send operation invocation");
  mbeanServer.invoke(name,"send",new String[]{"testMBean","queueMBean","message",null,"karaf","karaf"},new String[]{"java.lang.String","java.lang.String","java.lang.String","java.lang.String","java.lang.String","java.lang.String"});
  System.out.println("JMS MBean count operation invocation");
  Integer count=(Integer)mbeanServer.invoke(name,"count",new String[]{"testMBean","queueMBean","karaf","karaf"},new String[]{"java.lang.String","java.lang.String","java.lang.String","java.lang.String"});
  assertEquals(1,count.intValue());
  System.out.print("JMS MBean queues operation invocation: ");
  List<String> queues=(List<String>)mbeanServer.invoke(name,"queues",new String[]{"testMBean","karaf","karaf"},new String[]{"java.lang.String","java.lang.String","java.lang.String"});
  System.out.println(queues);
  assertTrue(queues.size() >= 1);
  System.out.println("JMS MBean delete operation invocation");
  mbeanServer.invoke(name,"delete",new String[]{"testMBean"},new String[]{"java.lang.String"});
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.KarTest </h4><pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void listViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=kar,name=root");
  @SuppressWarnings("unchecked") List<String> kars=(List<String>)mbeanServer.getAttribute(name,"Kars");
  assertEquals(0,kars.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.LogTest </h4><pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void setDebugViaMBean() throws Exception {
  assertSetLevel("INFO");
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=log,name=root");
  Attribute attribute=new Attribute("Level","DEBUG");
  mbeanServer.setAttribute(name,attribute);
  String logLevel=(String)mbeanServer.getAttribute(name,"Level");
  assertEquals("DEBUG",logLevel);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.ObrTest </h4><pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void listsViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=obr,name=root");
  @SuppressWarnings("unchecked") List<String> urls=(List<String>)mbeanServer.getAttribute(name,"Urls");
  assertEquals(0,urls.size());
  TabularData bundles=(TabularData)mbeanServer.getAttribute(name,"Bundles");
  assertEquals(0,bundles.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.PackageTest </h4><pre class="type-6 type-14 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void duplicatePackageTest() throws Exception {
  Map<String,Integer> expectedDups=new HashMap<String,Integer>();
  List<PackageVersion> packageVersionMap=packageService.getExports();
  for (  PackageVersion pVer : packageVersionMap) {
    if (pVer.getBundles().size() > 1) {
      String packageName=pVer.getPackageName();
      int expectedNum=expectedDups.containsKey(packageName) ? expectedDups.get(packageName) : 0;
      Assert.assertEquals("Expecting number of duplicates for package " + packageName,expectedNum,pVer.getBundles().size());
    }
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void exportsViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=package,name=root");
  TabularData exports=(TabularData)mbeanServer.getAttribute(name,"Exports");
  assertTrue(exports.size() > 0);
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void importsViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=package,name=root");
  TabularData imports=(TabularData)mbeanServer.getAttribute(name,"Imports");
  assertTrue(imports.size() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.ServiceTest </h4><pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void listViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=service,name=root");
  TabularData services=(TabularData)mbeanServer.getAttribute(name,"Services");
  assertTrue(services.size() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.SystemTest </h4><pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void nameViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=system,name=root");
  String currentName=(String)mbeanServer.getAttribute(name,"Name");
  assertEquals("root",currentName);
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void frameworkViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=system,name=root");
  String framework=(String)mbeanServer.getAttribute(name,"Framework");
  assertEquals("felix",framework);
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void startLevelViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=system,name=root");
  int startLevel=(Integer)mbeanServer.getAttribute(name,"StartLevel");
  assertEquals(100,startLevel);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.WebTest </h4><pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void listViaMBean() throws Exception {
  MBeanServer mbeanServer=ManagementFactory.getPlatformMBeanServer();
  ObjectName name=new ObjectName("org.apache.karaf:type=web,name=root");
  TabularData webBundles=(TabularData)mbeanServer.getAttribute(name,"WebBundles");
  assertEquals(0,webBundles.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.jaas.blueprint.jasypt.handler.EncryptableConfigAdminPropertyPlaceholderTest </h4><pre class="type-16 type-6 type-14 type-4 type-5 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEncryptConfigProperty() throws Exception {
  for (  Bundle bundle : bundleContext.getBundles()) {
    System.out.println(bundle.getSymbolicName() + " / " + bundle.getVersion());
  }
  configAdmin=getOsgiService(ConfigurationAdmin.class);
  assertNotNull(configAdmin);
  Configuration config=configAdmin.createFactoryConfiguration("encrypt.config",null);
  Dictionary props=new Properties();
  encryptedValue=enc.encrypt("bar");
  props.put("foo",encryptedValue);
  config.update(props);
  Configuration[] configs=configAdmin.listConfigurations(null);
  for (  Configuration conf : configs) {
    String pid=conf.getPid();
    Dictionary<String,?> dict=conf.getProperties();
    for (Enumeration e=dict.keys(); e.hasMoreElements(); ) {
      String key=(String)e.nextElement();
      Object value=dict.get(key);
      if (key.equals("foo")) {
        String val=(String)value;
        assertEquals(encryptedValue,val);
        String decrypt=enc.decrypt(val);
        assertEquals("bar",decrypt);
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.main.lock.BaseJDBCLockIntegrationTest </h4><pre class="type-6 type-3 type-4 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void release() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  lock.release();
  assertNull(lock.lockConnection);
  assertTableIsUnlocked();
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isAliveShouldReturnTrueIfItHoldsTheLock() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  assertTrue(lock.isAlive());
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isAliveShouldReturnFalseIfTheConnectionIsClosed() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  lock.lockConnection.rollback();
  lock.lockConnection.close();
  assertFalse(lock.isAlive());
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Is not executed with the test suite
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @Ignore public void lockShouldRestoreTheLockAfterADbFailure() throws Exception {
  Lock lock1=createLock(props);
  assertTrue(lock1.lock());
  assertTrue(lock1.isAlive());
  assertFalse(lock1.isAlive());
  assertTrue(lock1.lock());
  assertTrue(lock1.isAlive());
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void lockShouldReturnFalseIfTheTableIsEmpty() throws Exception {
  Connection connection=null;
  try {
    lock=createLock(props);
    truncateTable();
    connection=lock(tableName,clustername);
    assertFalse(lock.lock());
  }
  finally {
    close(connection);
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void releaseShouldSucceedForAnAlreadyClosedConnection() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  lock.lockConnection.rollback();
  lock.lockConnection.close();
  lock.release();
  assertTableIsUnlocked();
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isAliveShouldReturnFalseIfTheConnectionIsNull() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  lock.lockConnection.rollback();
  lock.lockConnection.close();
  lock.lockConnection=null;
  assertFalse(lock.isAlive());
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void isAliveShouldReturnFalseIfItNotHoldsTheLock() throws Exception {
  Connection connection=null;
  try {
    lock=createLock(props);
    assertTrue(lock.lock());
    lock.lockConnection.rollback();
    connection=lock(tableName,clustername);
    assertFalse(lock.isAlive());
  }
  finally {
    close(connection);
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void lockShouldReturnFalseIfTheRowIsAlreadyLocked() throws Exception {
  Connection connection=null;
  try {
    lock=createLock(props);
    connection=lock(tableName,clustername);
    assertFalse(lock.lock());
  }
  finally {
    close(connection);
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void lockShouldReturnFalseIfAnotherRowIsLocked() throws Exception {
  Connection connection=null;
  try {
    lock=createLock(props);
    executeStatement("INSERT INTO " + tableName + " (MOMENT, NODE) VALUES (1, '"+ clustername+ "_2')");
    connection=lock(tableName,clustername + "_2");
    assertFalse(lock.lock());
  }
  finally {
    close(connection);
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void releaseShouldSucceedForANullConnectionReference() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  lock.lockConnection.rollback();
  lock.lockConnection.close();
  lock.lockConnection=null;
  lock.release();
  assertTableIsUnlocked();
}

</code></pre>

<br>
<pre class="type-6 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void lockShouldReturnTrueItTheTableIsNotLocked() throws Exception {
  lock=createLock(props);
  assertTrue(lock.lock());
  assertTableIsLocked();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.main.util.SimpleMavenResolverTest </h4><pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void mavenToPath() throws MalformedURLException {
  String resolvedPath=Parser.pathFromMaven(ARTIFACT_COORDS);
  Assert.assertEquals("org/apache/karaf/features/framework/1.0.0/framework-1.0.0-features.xml",resolvedPath);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.profile.impl.ProfilesTest </h4><pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProfilePlaceholderResolver(){
  Profile profile=ProfileBuilder.Factory.create("test").addConfiguration("pid1","foo","b${profile:pid2/bar}").addConfiguration("pid2","bar","a${rep}").addConfiguration("pid2","rep","h").getProfile();
  Profile effective=Profiles.getEffective(profile);
  assertEquals("bah",effective.getConfiguration("pid1").get("foo"));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProfilesOverlayComments(){
  String pid1="# My comment\nfoo = bar\n";
  Profile parent=ProfileBuilder.Factory.create("parent").addFileConfiguration("pid1.cfg",pid1.getBytes()).getProfile();
  Profile profile=ProfileBuilder.Factory.create("test").addConfiguration("pid1","foo","bar2").addParent("parent").getProfile();
  Map<String,Profile> profiles=new HashMap<>();
  profiles.put(parent.getId(),parent);
  profiles.put(profile.getId(),profile);
  Profile overlay=Profiles.getOverlay(profile,profiles);
  String outPid1=new String(overlay.getFileConfiguration("pid1.cfg"));
  assertEquals(String.format("%1$s%n%2$s%n","# My comment","foo = bar2"),outPid1);
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonSubstitution(){
  Profile profile=ProfileBuilder.Factory.create("test").addConfiguration("pid1","key","${foo}/${bar}").getProfile();
  Profile effective=Profiles.getEffective(profile,false);
  assertEquals("${foo}/${bar}",effective.getConfiguration("pid1").get("key"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.service.guard.impl.GuardProxyCatalogTest </h4><pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings({"unchecked","rawtypes"}) @Test public void testHandleServiceUnregistering() throws Exception {
  BundleContext clientBC=openStrictMockBundleContext(mockBundle(12345L));
  BundleContext client2BC=openStrictMockBundleContext(mockBundle(6L));
  EasyMock.replay(clientBC);
  EasyMock.replay(client2BC);
  Hashtable<String,Object> props=new Hashtable<String,Object>();
  long originalServiceID=12345678901234L;
  props.put(Constants.SERVICE_ID,new Long(originalServiceID));
  props.put("foo","bar");
  ServiceReference<?> originalRef=mockServiceReference(props);
  Hashtable<String,Object> props2=new Hashtable<String,Object>();
  long anotherServiceID=5123456789012345L;
  props2.put(Constants.SERVICE_ID,anotherServiceID);
  ServiceReference<?> anotherRef=mockServiceReference(props2);
  GuardProxyCatalog gpc=new GuardProxyCatalog(mockBundleContext());
  ServiceRegistration<?> proxyReg=EasyMock.createMock(ServiceRegistration.class);
  EasyMock.expect(proxyReg.getReference()).andReturn((ServiceReference)mockServiceReference(props)).anyTimes();
  proxyReg.unregister();
  EasyMock.expectLastCall().once();
  EasyMock.replay(proxyReg);
  ServiceRegistrationHolder srh=new GuardProxyCatalog.ServiceRegistrationHolder();
  srh.registration=proxyReg;
  ServiceRegistration<?> proxy2Reg=EasyMock.createMock(ServiceRegistration.class);
  EasyMock.replay(proxy2Reg);
  ServiceRegistrationHolder srh2=new GuardProxyCatalog.ServiceRegistrationHolder();
  srh2.registration=proxy2Reg;
  gpc.proxyMap.put(originalServiceID,srh);
  gpc.proxyMap.put(anotherServiceID,srh2);
  assertEquals("Precondition",2,gpc.proxyMap.size());
  gpc.createProxyQueue.put(new MockCreateProxyRunnable(originalServiceID));
  gpc.createProxyQueue.put(new MockCreateProxyRunnable(777));
  assertEquals("Precondition",2,gpc.createProxyQueue.size());
  gpc.serviceChanged(new ServiceEvent(ServiceEvent.REGISTERED,originalRef));
  assertEquals("Registered events should be ignored",2,gpc.proxyMap.size());
  assertEquals("Registered events should be ignored",2,gpc.createProxyQueue.size());
  Hashtable<String,Object> proxyProps=new Hashtable<String,Object>(props);
  proxyProps.put(GuardProxyCatalog.PROXY_SERVICE_KEY,Boolean.TRUE);
  ServiceReference<?> proxyRef=mockServiceReference(proxyProps);
  gpc.serviceChanged(new ServiceEvent(ServiceEvent.UNREGISTERING,proxyRef));
  assertEquals("Unregistering the proxy should be ignored by the listener",2,gpc.proxyMap.size());
  assertEquals("Unregistering the proxy should be ignored by the listener",2,gpc.createProxyQueue.size());
  gpc.serviceChanged(new ServiceEvent(ServiceEvent.UNREGISTERING,originalRef));
  assertEquals("The proxy for this service should have been removed",1,gpc.proxyMap.size());
  assertEquals(anotherRef.getProperty(Constants.SERVICE_ID),gpc.proxyMap.keySet().iterator().next());
  assertEquals("The create proxy job for this service should have been removed",1,gpc.createProxyQueue.size());
  assertEquals(777,gpc.createProxyQueue.iterator().next().getOriginalServiceID());
  EasyMock.verify(proxyReg);
  EasyMock.verify(proxy2Reg);
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testHandleProxificationForHook() throws Exception {
  Dictionary<String,Object> config=new Hashtable<String,Object>();
  config.put(Constants.SERVICE_PID,GuardProxyCatalog.SERVICE_ACL_PREFIX + "foo");
  config.put(GuardProxyCatalog.SERVICE_GUARD_KEY,"(a>=5)");
  BundleContext bc=mockConfigAdminBundleContext(config);
  GuardProxyCatalog gpc=new GuardProxyCatalog(bc);
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(Constants.SERVICE_ID,13L);
  props.put("a","6");
  props.put(GuardProxyCatalog.PROXY_SERVICE_KEY,Boolean.TRUE);
  ServiceReference<?> sref2=mockServiceReference(props);
  assertFalse("Should not hide an existing proxy for this client",gpc.handleProxificationForHook(sref2));
  assertEquals("No proxy should have been created",0,gpc.proxyMap.size());
  Dictionary<String,Object> props4=new Hashtable<String,Object>();
  props4.put(Constants.SERVICE_ID,15L);
  props4.put("a","7");
  ServiceReference<?> sref4=mockServiceReference(props4);
  assertTrue("Should hide a service that needs to be proxied",gpc.handleProxificationForHook(sref4));
  assertEquals("Should trigger proxy creation",1,gpc.proxyMap.size());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-11 type-5 type-19 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings({"unchecked","rawtypes"}) public void testServiceFactoryBehaviour() throws Exception {
  final Map<ServiceReference,Object> serviceMap=new HashMap<ServiceReference,Object>();
  TestServiceAPI testService=new TestService();
  BundleContext bc=mockConfigAdminBundleContext();
  GuardProxyCatalog gpc=new GuardProxyCatalog(bc);
  long serviceID=117L;
  final Hashtable<String,Object> serviceProps=new Hashtable<String,Object>();
  serviceProps.put(Constants.OBJECTCLASS,new String[]{TestServiceAPI.class.getName()});
  serviceProps.put(Constants.SERVICE_ID,serviceID);
  serviceProps.put("bar",42L);
  BundleContext providerBC=EasyMock.createMock(BundleContext.class);
  EasyMock.expect(providerBC.registerService(EasyMock.isA(String[].class),EasyMock.anyObject(),EasyMock.isA(Dictionary.class))).andAnswer(new IAnswer(){
    @Override public ServiceRegistration answer() throws Throwable {
      Dictionary<String,Object> props=(Dictionary<String,Object>)EasyMock.getCurrentArguments()[2];
      ServiceRegistration reg=EasyMock.createMock(ServiceRegistration.class);
      ServiceReference sr=mockServiceReference(props);
      EasyMock.expect(reg.getReference()).andReturn(sr).anyTimes();
      EasyMock.replay(reg);
      serviceMap.put(sr,EasyMock.getCurrentArguments()[1]);
      return reg;
    }
  }
).once();
  EasyMock.expect(providerBC.getService(EasyMock.isA(ServiceReference.class))).andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      return serviceMap.get(EasyMock.getCurrentArguments()[0]);
    }
  }
).anyTimes();
  EasyMock.replay(providerBC);
  BundleWiring bw=EasyMock.createMock(BundleWiring.class);
  EasyMock.expect(bw.getClassLoader()).andReturn(getClass().getClassLoader()).anyTimes();
  EasyMock.replay(bw);
  Bundle providerBundle=EasyMock.createNiceMock(Bundle.class);
  EasyMock.expect(providerBundle.getBundleContext()).andReturn(providerBC).anyTimes();
  EasyMock.expect(providerBundle.adapt(BundleWiring.class)).andReturn(bw).anyTimes();
  EasyMock.replay(providerBundle);
  ServiceReference sr=mockServiceReference(providerBundle,serviceProps);
  BundleContext clientBC=EasyMock.createMock(BundleContext.class);
  EasyMock.expect(clientBC.getService(sr)).andReturn(testService).anyTimes();
  EasyMock.replay(clientBC);
  Bundle clientBundle=EasyMock.createNiceMock(Bundle.class);
  EasyMock.expect(clientBundle.getBundleContext()).andReturn(clientBC).anyTimes();
  EasyMock.replay(clientBundle);
  gpc.proxyIfNotAlreadyProxied(sr);
  GuardProxyCatalog.ServiceRegistrationHolder holder=gpc.proxyMap.get(serviceID);
  GuardProxyCatalog.CreateProxyRunnable runnable=gpc.createProxyQueue.take();
  assertEquals(117L,runnable.getOriginalServiceID());
  ProxyManager pm=getProxyManager();
  runnable.run(pm);
  ServiceReference<?> proxySR=holder.registration.getReference();
  EasyMock.verify(providerBC);
  ServiceFactory proxyServiceSF=(ServiceFactory)serviceMap.get(proxySR);
  TestServiceAPI proxyService=(TestServiceAPI)proxyServiceSF.getService(clientBundle,null);
  assertNotSame("The proxy should not be the same object as the original service",testService,proxyService);
  assertEquals("Doing it",proxyService.doit());
  EasyMock.reset(clientBC);
  EasyMock.expect(clientBC.ungetService(sr)).andReturn(true).once();
  EasyMock.replay(clientBC);
  proxyServiceSF.ungetService(clientBundle,null,proxyService);
  EasyMock.verify(clientBC);
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testAssignRoles4() throws Exception {
  Dictionary<String,Object> config=new Hashtable<String,Object>();
  config.put(Constants.SERVICE_PID,"foobar");
  config.put("service.guard","(objectClass=" + TestServiceAPI.class.getName() + ")");
  config.put("somemethod","b");
  config.put("someOtherMethod","b");
  config.put("somethingelse","*");
  BundleContext bc=mockConfigAdminBundleContext(config);
  Dictionary<String,Object> proxyProps=testCreateProxy(bc,TestServiceAPI.class,new TestService());
  Collection<String> result=(Collection<String>)proxyProps.get(GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY);
  assertEquals(1,result.size());
  assertEquals("b",result.iterator().next());
}

</code></pre>

<br>
<pre class="type-6 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@SuppressWarnings("unchecked") @Test public void testAssignRoles2() throws Exception {
  Dictionary<String,Object> config=new Hashtable<String,Object>();
  config.put(Constants.SERVICE_PID,"foobar");
  config.put("service.guard","(objectClass=" + TestServiceAPI2.class.getName() + ")");
  config.put("doit","X");
  BundleContext bc=mockConfigAdminBundleContext(config);
  Dictionary<String,Object> proxyProps=testCreateProxy(bc,TestServiceAPI.class,new TestService());
  assertNull("No security defined for this API, so no roles should be specified at all",proxyProps.get(GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY));
}

</code></pre>

<br>
<pre class="type-6 type-14 type-4 type-5 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@SuppressWarnings({"unchecked","rawtypes"}) @Test public void testHandleServiceModified() throws Exception {
  Dictionary<String,Object> config=new Hashtable<String,Object>();
  config.put(Constants.SERVICE_PID,"test.1.2.3");
  config.put("service.guard","(objectClass=" + TestServiceAPI.class.getName() + ")");
  config.put("doit","role.1");
  Dictionary<String,Object> config2=new Hashtable<String,Object>();
  config2.put(Constants.SERVICE_PID,"test.1.2.4");
  config2.put("service.guard","(objectClass=" + TestServiceAPI2.class.getName() + ")");
  config2.put("doit","role.2");
  BundleContext bc=mockConfigAdminBundleContext(config,config2);
  GuardProxyCatalog gpc=new GuardProxyCatalog(bc);
  long serviceID=1L;
  final Hashtable<String,Object> serviceProps=new Hashtable<String,Object>();
  serviceProps.put(Constants.OBJECTCLASS,new String[]{TestServiceAPI.class.getName(),TestServiceAPI2.class.getName()});
  serviceProps.put(Constants.SERVICE_ID,serviceID);
  serviceProps.put(GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY,Arrays.asList("someone"));
  Object myObject=new Object();
  serviceProps.put("foo.bar",myObject);
  BundleContext providerBC=EasyMock.createNiceMock(BundleContext.class);
  EasyMock.expect(providerBC.registerService(EasyMock.aryEq(new String[]{TestServiceAPI.class.getName(),TestServiceAPI2.class.getName()}),EasyMock.anyObject(),EasyMock.anyObject(Dictionary.class))).andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      final Dictionary props=(Dictionary)EasyMock.getCurrentArguments()[2];
      assertEquals(Boolean.TRUE,props.get(GuardProxyCatalog.PROXY_SERVICE_KEY));
      ServiceRegistration reg=EasyMock.createMock(ServiceRegistration.class);
      ServiceReference sr=mockServiceReference(props);
      EasyMock.expect(reg.getReference()).andReturn(sr).anyTimes();
      reg.setProperties(EasyMock.isA(Dictionary.class));
      EasyMock.expectLastCall().andAnswer(new IAnswer(){
        @Override public Object answer() throws Throwable {
          ArrayList<String> oldKeys=Collections.list(props.keys());
          for (          String key : oldKeys) {
            props.remove(key);
          }
          Dictionary<String,Object> newProps=(Dictionary<String,Object>)EasyMock.getCurrentArguments()[0];
          for (          String key : Collections.list(newProps.keys())) {
            props.put(key,newProps.get(key));
          }
          return null;
        }
      }
).once();
      EasyMock.replay(reg);
      return reg;
    }
  }
).anyTimes();
  EasyMock.replay(providerBC);
  BundleWiring bw=EasyMock.createMock(BundleWiring.class);
  EasyMock.expect(bw.getClassLoader()).andReturn(getClass().getClassLoader()).anyTimes();
  EasyMock.replay(bw);
  Bundle providerBundle=EasyMock.createNiceMock(Bundle.class);
  EasyMock.expect(providerBundle.getBundleContext()).andReturn(providerBC).anyTimes();
  EasyMock.expect(providerBundle.adapt(BundleWiring.class)).andReturn(bw).anyTimes();
  EasyMock.replay(providerBundle);
  ServiceReference sr=mockServiceReference(providerBundle,serviceProps);
  gpc.proxyIfNotAlreadyProxied(sr);
  GuardProxyCatalog.CreateProxyRunnable runnable=gpc.createProxyQueue.take();
  runnable.run(getProxyManager());
  ServiceRegistrationHolder holder=gpc.proxyMap.get(serviceID);
  ServiceRegistration<?> reg=holder.registration;
  for (  String key : serviceProps.keySet()) {
    if (GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY.equals(key)) {
      assertEquals(new HashSet(Arrays.asList("role.1","role.2")),reg.getReference().getProperty(key));
    }
 else {
      assertEquals(serviceProps.get(key),reg.getReference().getProperty(key));
    }
  }
  assertEquals(Boolean.TRUE,reg.getReference().getProperty(GuardProxyCatalog.PROXY_SERVICE_KEY));
  serviceProps.put("test","property");
  assertEquals("Precondition, the mocked reference should have picked up this change","property",sr.getProperty("test"));
  gpc.serviceChanged(new ServiceEvent(ServiceEvent.MODIFIED,sr));
  assertEquals("Changing the service should not change the number of proxies",1,gpc.proxyMap.size());
  for (  String key : serviceProps.keySet()) {
    if (GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY.equals(key)) {
      assertEquals(new HashSet(Arrays.asList("role.1","role.2")),reg.getReference().getProperty(key));
    }
 else {
      assertEquals(serviceProps.get(key),reg.getReference().getProperty(key));
    }
  }
  assertEquals("property",reg.getReference().getProperty("test"));
  assertEquals(Boolean.TRUE,reg.getReference().getProperty(GuardProxyCatalog.PROXY_SERVICE_KEY));
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testAssignRoles() throws Exception {
  Dictionary<String,Object> config=new Hashtable<String,Object>();
  config.put(Constants.SERVICE_PID,"foobar");
  config.put("service.guard","(objectClass=" + TestServiceAPI.class.getName() + ")");
  config.put("somemethod","a,b");
  config.put("someOtherMethod(int)","c");
  config.put("someOtherMethod(int)[/12/]","d");
  config.put("someOtherMethod(int)[\"42\"]","e");
  config.put("someOtherMethod[/.*[x][y][z].*/]","f");
  config.put("someFoo*","g");
  BundleContext bc=mockConfigAdminBundleContext(config);
  Dictionary<String,Object> proxyProps=testCreateProxy(bc,TestServiceAPI.class,new TestService());
  assertEquals(new HashSet<String>(Arrays.asList("a","b","c","d","e","f","g")),new HashSet<String>((Collection<String>)proxyProps.get(GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY)));
}

</code></pre>

<br>
<pre class="type-6 type-14 type-10 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testInvocationBlocking2() throws Exception {
  Dictionary<String,Object> config=new Hashtable<String,Object>();
  config.put(Constants.SERVICE_PID,"barfoobar");
  config.put("service.guard","(objectClass=" + TestObjectWithoutInterface.class.getName() + ")");
  config.put("compute(long)[\"42\"]","b");
  config.put("compute(long)","c");
  BundleContext bc=mockConfigAdminBundleContext(config);
  final Object proxy=testCreateProxy(bc,new Class[]{TestServiceAPI.class,TestObjectWithoutInterface.class},new CombinedTestService());
  Subject subject=new Subject();
  subject.getPrincipals().add(new RolePrincipal("b"));
  Subject.doAs(subject,new PrivilegedAction(){
    @Override public Object run(){
      if (!runningUnderCoverage) {
        assertEquals(-42L,((TestObjectWithoutInterface)proxy).compute(42L));
        try {
          ((TestObjectWithoutInterface)proxy).compute(44L);
          fail("Should have been blocked");
        }
 catch (        SecurityException se) {
        }
      }
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-6 type-3 type-4 type-5 type-19 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings({"unchecked","rawtypes"}) @Test public void testHandleServiceModified2() throws Exception {
  BundleContext bc=mockConfigAdminBundleContext();
  GuardProxyCatalog gpc=new GuardProxyCatalog(bc);
  long serviceID=1L;
  final Hashtable<String,Object> serviceProps=new Hashtable<String,Object>();
  serviceProps.put(Constants.OBJECTCLASS,new String[]{TestServiceAPI.class.getName()});
  serviceProps.put(Constants.SERVICE_ID,serviceID);
  BundleContext providerBC=EasyMock.createNiceMock(BundleContext.class);
  EasyMock.expect(providerBC.registerService(EasyMock.aryEq(new String[]{TestServiceAPI.class.getName()}),EasyMock.anyObject(),EasyMock.anyObject(Dictionary.class))).andAnswer(new IAnswer(){
    @Override public Object answer() throws Throwable {
      final Dictionary props=(Dictionary)EasyMock.getCurrentArguments()[2];
      assertEquals(Boolean.TRUE,props.get(GuardProxyCatalog.PROXY_SERVICE_KEY));
      ServiceRegistration reg=EasyMock.createMock(ServiceRegistration.class);
      ServiceReference sr=mockServiceReference(props);
      EasyMock.expect(reg.getReference()).andReturn(sr).anyTimes();
      reg.setProperties(EasyMock.isA(Dictionary.class));
      EasyMock.expectLastCall().andAnswer(new IAnswer(){
        @Override public Object answer() throws Throwable {
          ArrayList<String> oldKeys=Collections.list(props.keys());
          for (          String key : oldKeys) {
            props.remove(key);
          }
          Dictionary<String,Object> newProps=(Dictionary<String,Object>)EasyMock.getCurrentArguments()[0];
          for (          String key : Collections.list(newProps.keys())) {
            props.put(key,newProps.get(key));
          }
          return null;
        }
      }
).once();
      EasyMock.replay(reg);
      return reg;
    }
  }
).anyTimes();
  EasyMock.replay(providerBC);
  BundleWiring bw=EasyMock.createMock(BundleWiring.class);
  EasyMock.expect(bw.getClassLoader()).andReturn(getClass().getClassLoader()).anyTimes();
  EasyMock.replay(bw);
  Bundle providerBundle=EasyMock.createNiceMock(Bundle.class);
  EasyMock.expect(providerBundle.getBundleContext()).andReturn(providerBC).anyTimes();
  EasyMock.expect(providerBundle.adapt(BundleWiring.class)).andReturn(bw).anyTimes();
  EasyMock.replay(providerBundle);
  ServiceReference sr=mockServiceReference(providerBundle,serviceProps);
  gpc.proxyIfNotAlreadyProxied(sr);
  GuardProxyCatalog.CreateProxyRunnable runnable=gpc.createProxyQueue.take();
  runnable.run(getProxyManager());
  ServiceRegistrationHolder holder=gpc.proxyMap.get(serviceID);
  ServiceRegistration<?> reg=holder.registration;
  assertFalse("No roles defined for this service using configuration, so roles property should not be set",Arrays.asList(reg.getReference().getPropertyKeys()).contains(GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY));
  for (  String key : serviceProps.keySet()) {
    assertEquals(serviceProps.get(key),reg.getReference().getProperty(key));
  }
  assertEquals(Boolean.TRUE,reg.getReference().getProperty(GuardProxyCatalog.PROXY_SERVICE_KEY));
  serviceProps.put(GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY,"foobar");
  assertEquals("Precondition, the mocked reference should have picked up this change","foobar",sr.getProperty(GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY));
  gpc.serviceChanged(new ServiceEvent(ServiceEvent.MODIFIED,sr));
  assertEquals("Changing the service should not change the number of proxies",1,gpc.proxyMap.size());
  assertFalse("The roles property set on the modified service should have been removed",Arrays.asList(reg.getReference().getPropertyKeys()).contains(GuardProxyCatalog.SERVICE_GUARD_ROLES_PROPERTY));
  assertEquals(Boolean.TRUE,reg.getReference().getProperty(GuardProxyCatalog.PROXY_SERVICE_KEY));
}

</code></pre>

<br>
<pre class="type-6 type-10 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testInvocationBlocking3() throws Exception {
class MyService implements TestServiceAPI, TestServiceAPI2 {
    public String doit(    String s){
      return new StringBuilder(s).reverse().toString();
    }
    public String doit(){
      return "Doing it";
    }
  }
  ;
  Dictionary<String,Object> c1=new Hashtable<String,Object>();
  c1.put(Constants.SERVICE_PID,"foobar");
  c1.put("service.guard","(objectClass=" + TestServiceAPI.class.getName() + ")");
  c1.put("do*","c");
  Dictionary<String,Object> c2=new Hashtable<String,Object>();
  c2.put(Constants.SERVICE_PID,"foobar2");
  c2.put("service.guard","(objectClass=" + TestServiceAPI2.class.getName() + ")");
  c2.put("doit(java.lang.String)[/[tT][a]+/]","b,d # a regex rule");
  c2.put("doit(java.lang.String)","a");
  BundleContext bc=mockConfigAdminBundleContext(c1,c2);
  final Object proxy=testCreateProxy(bc,new Class[]{TestServiceAPI.class,TestServiceAPI2.class},new MyService());
  Subject subject=new Subject();
  subject.getPrincipals().add(new RolePrincipal("c"));
  Subject.doAs(subject,new PrivilegedAction(){
    @Override public Object run(){
      assertEquals("Doing it",((TestServiceAPI)proxy).doit());
      return null;
    }
  }
);
  Subject subject2=new Subject();
  subject2.getPrincipals().add(new RolePrincipal("b"));
  subject2.getPrincipals().add(new RolePrincipal("f"));
  Subject.doAs(subject2,new PrivilegedAction(){
    @Override public Object run(){
      try {
        assertEquals("Doing it",((TestServiceAPI)proxy).doit());
        fail("Should have been blocked");
      }
 catch (      SecurityException se) {
      }
      assertEquals("aaT",((TestServiceAPI2)proxy).doit("Taa"));
      try {
        ((TestServiceAPI2)proxy).doit("t");
        fail("Should have been blocked");
      }
 catch (      SecurityException se) {
      }
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-6 type-14 type-10 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testInvocationBlocking1() throws Exception {
  Dictionary<String,Object> c1=new Hashtable<String,Object>();
  c1.put(Constants.SERVICE_PID,"foobar");
  c1.put("service.guard","(objectClass=" + TestServiceAPI.class.getName() + ")");
  c1.put("doit","a,b");
  Dictionary<String,Object> c2=new Hashtable<String,Object>();
  c2.put(Constants.SERVICE_PID,"barfoobar");
  c2.put("service.guard","(objectClass=" + TestObjectWithoutInterface.class.getName() + ")");
  c2.put("compute","c");
  BundleContext bc=mockConfigAdminBundleContext(c1,c2);
  final Object proxy=testCreateProxy(bc,new Class[]{TestServiceAPI.class,TestObjectWithoutInterface.class},new CombinedTestService());
  Subject subject=new Subject();
  subject.getPrincipals().add(new RolePrincipal("b"));
  Subject.doAs(subject,new PrivilegedAction(){
    @Override public Object run(){
      assertEquals("Doing it",((TestServiceAPI)proxy).doit());
      if (!runningUnderCoverage) {
        try {
          ((TestObjectWithoutInterface)proxy).compute(44L);
          fail("Should have been blocked");
        }
 catch (        SecurityException se) {
        }
      }
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-6 type-10 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testInvocationBlocking7() throws Exception {
  Dictionary<String,Object> c1=new Hashtable<String,Object>();
  c1.put(Constants.SERVICE_PID,"foobar");
  c1.put("service.guard","(objectClass=" + TestServiceAPI3.class.getName() + ")");
  c1.put("foo()","a");
  c1.put("bar","b");
  c1.put("*","*");
  BundleContext bc=mockConfigAdminBundleContext(c1);
  final Object proxy=testCreateProxy(bc,new Class[]{TestServiceAPI3.class},new TestService3());
  Subject s1=new Subject();
  Subject.doAs(s1,new PrivilegedAction(){
    @Override public Object run(){
      TestServiceAPI3 obj=(TestServiceAPI3)proxy;
      assertEquals("Should have allowed this invocation for any (or no) role",-7,obj.foo(7));
      try {
        obj.foo();
        fail("Should have been blocked");
      }
 catch (      SecurityException se) {
      }
      try {
        obj.bar();
        fail("Should have been blocked");
      }
 catch (      SecurityException se) {
      }
      return null;
    }
  }
);
  Subject s2=new Subject();
  s2.getPrincipals().add(new RolePrincipal("a"));
  s2.getPrincipals().add(new RolePrincipal("b"));
  s2.getPrincipals().add(new RolePrincipal("d"));
  Subject.doAs(s2,new PrivilegedAction(){
    @Override public Object run(){
      TestServiceAPI3 obj=(TestServiceAPI3)proxy;
      assertEquals(42,obj.foo());
      assertEquals(99,obj.bar());
      assertEquals(-32767,obj.foo(32767));
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-6 type-14 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testInvocationBlocking4() throws Exception {
  BundleContext bc=mockConfigAdminBundleContext();
  final Object proxy=testCreateProxy(bc,new Class[]{TestServiceAPI.class,TestObjectWithoutInterface.class},new CombinedTestService());
  Subject subject=new Subject();
  subject.getPrincipals().add(new RolePrincipal("b"));
  Subject.doAs(subject,new PrivilegedAction(){
    @Override public Object run(){
      assertEquals("Doing it",((TestServiceAPI)proxy).doit());
      if (!runningUnderCoverage) {
        assertEquals(42L,((TestObjectWithoutInterface)proxy).compute(-42L));
        assertEquals(-44L,((TestObjectWithoutInterface)proxy).compute(44L));
      }
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testInvocationBlocking5() throws Exception {
  Dictionary<String,Object> c1=new Hashtable<String,Object>();
  c1.put(Constants.SERVICE_PID,"foobar");
  c1.put("service.guard","(objectClass=" + TestServiceAPI.class.getName() + ")");
  c1.put("doit","a,b");
  BundleContext bc=mockConfigAdminBundleContext(c1);
  final Object proxy=testCreateProxy(bc,new Class[]{TestServiceAPI2.class},new TestServiceAPI2(){
    @Override public String doit(    String s){
      return s.toUpperCase();
    }
  }
);
  Subject subject=new Subject();
  subject.getPrincipals().add(new RolePrincipal("c"));
  Subject.doAs(subject,new PrivilegedAction(){
    @Override public Object run(){
      assertEquals("The invocation under role 'c' should be ok, as there are no rules specified " + "for this service at all.","HELLO",((TestServiceAPI2)proxy).doit("hello"));
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.service.guard.impl.GuardingEventHookTest </h4><pre class="type-6 type-5 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testEventHookEvents() throws Exception {
  BundleContext frameworkBC=mockBundleContext(0L);
  Dictionary<String,Object> config=new Hashtable<String,Object>();
  config.put("service.guard","(service.id=*)");
  BundleContext hookBC=mockConfigAdminBundleContext(config);
  GuardProxyCatalog gpc=new GuardProxyCatalog(hookBC);
  Filter serviceFilter=FrameworkUtil.createFilter("(foo=bar)");
  GuardingEventHook geh=new GuardingEventHook(hookBC,gpc,serviceFilter);
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(Constants.SERVICE_ID,13L);
  ServiceReference<?> sref=mockServiceReference(props);
  BundleContext client1BC=mockBundleContext(123L);
  Map<BundleContext,Collection<ListenerInfo>> listeners=new HashMap<BundleContext,Collection<ListenerInfo>>();
  listeners.put(client1BC,Collections.<ListenerInfo>emptyList());
  assertEquals("Precondition",0,gpc.proxyMap.size());
  geh.event(new ServiceEvent(ServiceEvent.REGISTERED,sref),listeners);
  assertEquals("No proxy should have been created because the service doesn't match the filter",0,gpc.proxyMap.size());
  assertEquals("Nothing should have been removed from the listeners",1,listeners.size());
  long service2ID=887L;
  Dictionary<String,Object> props2=new Hashtable<String,Object>();
  props2.put(Constants.SERVICE_ID,service2ID);
  props2.put("a","b");
  props2.put("foo","bar");
  ServiceReference<?> sref2=mockServiceReference(props2);
  ServiceEvent se2=new ServiceEvent(ServiceEvent.REGISTERED,sref2);
  Map<BundleContext,Collection<ListenerInfo>> listeners2=new Hashtable<BundleContext,Collection<ListenerInfo>>();
  listeners2.put(frameworkBC,Collections.<ListenerInfo>emptyList());
  listeners2.put(hookBC,Collections.<ListenerInfo>emptyList());
  geh.event(se2,listeners2);
  assertEquals("No proxies to be created for the hook bundle or the system bundle",0,gpc.proxyMap.size());
  assertEquals("Nothing should have been removed from the listeners",2,listeners2.size());
  Map<BundleContext,Collection<ListenerInfo>> listeners3=new HashMap<BundleContext,Collection<ListenerInfo>>();
  listeners3.put(client1BC,Collections.<ListenerInfo>emptyList());
  geh.event(se2,listeners3);
  assertEquals("The service should be hidden from these listeners",0,listeners3.size());
  assertEquals("Proxy should have been created for this client",1,gpc.proxyMap.size());
  assertEquals(new Long(service2ID),gpc.proxyMap.keySet().iterator().next());
  props2.put("a","c");
  Map<BundleContext,Collection<ListenerInfo>> listeners4=new HashMap<BundleContext,Collection<ListenerInfo>>();
  BundleContext client2BC=mockBundleContext(11);
  listeners4.put(client2BC,Collections.<ListenerInfo>emptyList());
  listeners4.put(client1BC,Collections.<ListenerInfo>emptyList());
  geh.event(new ServiceEvent(ServiceEvent.MODIFIED,sref2),listeners4);
  assertEquals("The service should be hidden from these listeners",0,listeners4.size());
  assertEquals("There should not be an additional proxy for client 2",1,gpc.proxyMap.size());
  assertNotNull(gpc.proxyMap.get(service2ID));
  long service3ID=1L;
  Dictionary<String,Object> props3=new Hashtable<String,Object>();
  props3.put(Constants.SERVICE_ID,service3ID);
  props3.put("foo","bar");
  ServiceReference<?> sref3=mockServiceReference(props3);
  Map<BundleContext,Collection<ListenerInfo>> listeners5=new HashMap<BundleContext,Collection<ListenerInfo>>();
  listeners5.put(client1BC,Collections.<ListenerInfo>emptyList());
  listeners5.put(client1BC,Collections.<ListenerInfo>emptyList());
  geh.event(new ServiceEvent(ServiceEvent.REGISTERED,sref3),listeners5);
  assertEquals("There should be an additional procy for client1 to the new service",2,gpc.proxyMap.size());
  assertEquals("The service should be hidden from these listeners",0,listeners5.size());
  assertNotNull(gpc.proxyMap.get(service2ID));
  assertNotNull(gpc.proxyMap.get(service3ID));
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testEventHookProxyEvents() throws Exception {
  Dictionary<String,Object> config=new Hashtable<String,Object>();
  config.put("service.guard","(service.id=*)");
  BundleContext hookBC=mockConfigAdminBundleContext(config);
  GuardProxyCatalog gpc=new GuardProxyCatalog(hookBC);
  Filter serviceFilter=FrameworkUtil.createFilter("(service.id=*)");
  GuardingEventHook geh=new GuardingEventHook(hookBC,gpc,serviceFilter);
  BundleContext client1BC=mockBundleContext(123L);
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(Constants.SERVICE_ID,13L);
  props.put(GuardProxyCatalog.PROXY_SERVICE_KEY,Boolean.TRUE);
  ServiceReference<?> sref=mockServiceReference(props);
  Map<BundleContext,Collection<ListenerInfo>> listeners=new HashMap<BundleContext,Collection<ListenerInfo>>();
  listeners.put(client1BC,Collections.<ListenerInfo>emptyList());
  assertEquals("Precondition",0,gpc.proxyMap.size());
  geh.event(new ServiceEvent(ServiceEvent.REGISTERED,sref),listeners);
  assertEquals("No changes expected for the proxy map.",0,gpc.proxyMap.size());
  assertEquals("The event should be delivered to the client",1,listeners.size());
  Map<BundleContext,Collection<ListenerInfo>> listeners2=new HashMap<BundleContext,Collection<ListenerInfo>>();
  listeners2.put(mockBundleContext(51L),Collections.<ListenerInfo>emptyList());
  geh.event(new ServiceEvent(ServiceEvent.REGISTERED,sref),listeners2);
  assertEquals("No changes expected for the proxy map.",0,gpc.proxyMap.size());
  assertEquals("The event should be delivered to the client",1,listeners2.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.service.guard.impl.GuardingFindHookTest </h4><pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testFindHook() throws Exception {
  Dictionary<String,Object> config=new Hashtable<String,Object>();
  config.put("service.guard","(|(moo=foo)(foo=*))");
  BundleContext hookBC=mockConfigAdminBundleContext(config);
  GuardProxyCatalog gpc=new GuardProxyCatalog(hookBC);
  Filter serviceFilter=FrameworkUtil.createFilter("(foo=*)");
  GuardingFindHook gfh=new GuardingFindHook(hookBC,gpc,serviceFilter);
  BundleContext clientBC=mockBundleContext(31L);
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(Constants.SERVICE_ID,16L);
  props.put("moo","foo");
  ServiceReference<?> sref=mockServiceReference(props);
  Collection<ServiceReference<?>> refs=new ArrayList<ServiceReference<?>>();
  refs.add(sref);
  assertEquals("Precondition",0,gpc.proxyMap.size());
  gfh.find(clientBC,null,null,true,refs);
  assertEquals("The service doesn't match the filter so should have no effect",0,gpc.proxyMap.size());
  assertEquals("The service doesn't match the filter so should be presented to the client",Collections.singletonList(sref),refs);
  long service2ID=17L;
  Dictionary<String,Object> props2=new Hashtable<String,Object>();
  props2.put(Constants.SERVICE_ID,service2ID);
  props2.put("foo",new Object());
  ServiceReference<?> sref2=mockServiceReference(props2);
  Collection<ServiceReference<?>> refs2=new ArrayList<ServiceReference<?>>();
  refs2.add(sref2);
  gfh.find(clientBC,null,null,true,refs2);
  assertEquals("The service should be hidden from the client",0,refs2.size());
  assertEquals("The service should have caused a proxy creation",1,gpc.proxyMap.size());
  assertEquals("A proxy creation job should have been created",1,gpc.createProxyQueue.size());
  assertEquals(sref2.getProperty(Constants.SERVICE_ID),gpc.proxyMap.keySet().iterator().next());
  Collection<ServiceReference<?>> refs3=new ArrayList<ServiceReference<?>>();
  refs3.add(sref2);
  gfh.find(hookBC,null,null,true,refs3);
  assertEquals("The service should not be hidden from the hook bundle",Collections.singletonList(sref2),refs3);
  assertEquals("No proxy creation caused in this case",1,gpc.proxyMap.size());
  assertEquals("No change expected",sref2.getProperty(Constants.SERVICE_ID),gpc.proxyMap.keySet().iterator().next());
  gfh.find(mockBundleContext(0L),null,null,true,refs3);
  assertEquals("The service should not be hidden from the framework bundle",Collections.singletonList(sref2),refs3);
  assertEquals("No proxy creation caused in this case",1,gpc.proxyMap.size());
  assertEquals("No change expected",sref2.getProperty(Constants.SERVICE_ID),gpc.proxyMap.keySet().iterator().next());
  gpc.createProxyQueue.clear();
  gfh.find(clientBC,null,null,true,refs3);
  assertEquals("The service should be hidden from the client",0,refs3.size());
  assertEquals("There is already a proxy for this client, no need for an additional one",1,gpc.proxyMap.size());
  assertEquals("No additional jobs should have been scheduled",0,gpc.createProxyQueue.size());
  assertEquals("No change expected",sref2.getProperty(Constants.SERVICE_ID),gpc.proxyMap.keySet().iterator().next());
  Collection<ServiceReference<?>> refs4=new ArrayList<ServiceReference<?>>();
  refs4.add(sref2);
  BundleContext client2BC=mockBundleContext(32768L);
  gfh.find(client2BC,null,null,true,refs4);
  assertEquals("The service should be hidden for this new client",0,refs4.size());
  assertEquals("No proxy creation job should have been created",0,gpc.createProxyQueue.size());
  assertEquals("No proxy creation caused in this case",1,gpc.proxyMap.size());
  assertEquals("No change expected",sref2.getProperty(Constants.SERVICE_ID),gpc.proxyMap.keySet().iterator().next());
}

</code></pre>

<br>
<pre class="type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("unchecked") @Test public void testFindHookProxyServices() throws Exception {
  Dictionary<String,Object> config=new Hashtable<String,Object>();
  config.put("service.guard","(service.id=*)");
  BundleContext hookBC=mockConfigAdminBundleContext(config);
  GuardProxyCatalog gpc=new GuardProxyCatalog(hookBC);
  Filter serviceFilter=FrameworkUtil.createFilter("(service.id=*)");
  GuardingFindHook gfh=new GuardingFindHook(hookBC,gpc,serviceFilter);
  BundleContext clientBC=mockBundleContext(31L);
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(Constants.SERVICE_ID,16L);
  props.put(GuardProxyCatalog.PROXY_SERVICE_KEY,Boolean.TRUE);
  ServiceReference<?> sref=mockServiceReference(props);
  Collection<ServiceReference<?>> refs=new ArrayList<ServiceReference<?>>();
  refs.add(sref);
  gfh.find(clientBC,null,null,false,refs);
  assertEquals("No proxy should have been created for the proxy find",0,gpc.proxyMap.size());
  assertEquals("As the proxy is for this bundle is should be visible and remain on the list",Collections.singletonList(sref),refs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.shell.impl.console.parsing.ParsingTest </h4><pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultParser(){
  String command=" foo  bar (a +  b) ; another command ";
  String subCmd=" foo  bar (a +  b) ";
  DefaultParser parser=new DefaultParser();
  CommandLine line=parser.parse(null,command,command.length());
  assertEquals(3,line.getArguments().length);
  assertEquals("foo",line.getArguments()[0]);
  assertEquals("bar",line.getArguments()[1]);
  assertEquals("(a +  b)",line.getArguments()[2]);
  assertEquals(subCmd,line.getBuffer());
}

</code></pre>

<br>
<pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommandLineParserMultiLine(){
  SessionFactoryImpl sessionFactory=new SessionFactoryImpl(new ThreadIOImpl());
  ManagerImpl manager=new ManagerImpl(sessionFactory,sessionFactory);
  sessionFactory.getRegistry().register(new ActionCommand(manager,FooCommand.class));
  sessionFactory.getRegistry().register(new ActionCommand(manager,AnotherCommand.class));
  sessionFactory.getRegistry().register(new CustomParser());
  Session session=new HeadlessSessionImpl(sessionFactory,sessionFactory.getCommandProcessor(),new ByteArrayInputStream(new byte[0]),new PrintStream(new ByteArrayOutputStream()),new PrintStream(new ByteArrayOutputStream()));
  String parsed=CommandLineParser.parse(session,"echo a\necho b");
  assertEquals("echo a\necho b",parsed);
}

</code></pre>

<br>
<pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommandLineParser(){
  SessionFactoryImpl sessionFactory=new SessionFactoryImpl(new ThreadIOImpl());
  ManagerImpl manager=new ManagerImpl(sessionFactory,sessionFactory);
  sessionFactory.getRegistry().register(new ActionCommand(manager,FooCommand.class));
  sessionFactory.getRegistry().register(new ActionCommand(manager,AnotherCommand.class));
  sessionFactory.getRegistry().register(new CustomParser());
  Session session=new HeadlessSessionImpl(sessionFactory,sessionFactory.getCommandProcessor(),new ByteArrayInputStream(new byte[0]),new PrintStream(new ByteArrayOutputStream()),new PrintStream(new ByteArrayOutputStream()));
  String parsed=CommandLineParser.parse(session," foo bar (a + b); another   command with spaces ");
  assertEquals("foo bar (a + b) ; another \"command with spaces\"",parsed);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.shell.security.impl.SecuredCommandProcessorImplTest </h4><pre class="type-6 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommandProcessor() throws Exception {
  ThreadIO tio=EasyMock.createMock(ThreadIO.class);
  EasyMock.replay(tio);
  @SuppressWarnings("unchecked") ServiceReference<ThreadIO> tioRef=EasyMock.createMock(ServiceReference.class);
  EasyMock.replay(tioRef);
  final BundleContext bc=EasyMock.createMock(BundleContext.class);
  EasyMock.expect(bc.getServiceReference(ThreadIO.class)).andReturn(tioRef).anyTimes();
  EasyMock.expect(bc.getService(tioRef)).andReturn(tio).anyTimes();
  EasyMock.expect(bc.createFilter(EasyMock.isA(String.class))).andAnswer(new IAnswer<Filter>(){
    @Override public Filter answer() throws Throwable {
      return FrameworkUtil.createFilter((String)EasyMock.getCurrentArguments()[0]);
    }
  }
).anyTimes();
  EasyMock.expect(bc.getServiceReferences((String)EasyMock.anyObject(),(String)EasyMock.anyObject())).andReturn(null).anyTimes();
  final Map<String,ServiceListener> listeners=new HashMap<String,ServiceListener>();
  final String commandFilter="(&(osgi.command.scope=*)(osgi.command.function=*)" + "(|(org.apache.karaf.service.guard.roles=aaabbbccc)(!(org.apache.karaf.service.guard.roles=*))))";
  expectServiceTracker(bc,commandFilter,listeners);
  expectServiceTracker(bc,"(objectClass=" + Converter.class.getName() + ")",listeners);
  expectServiceTracker(bc,"(objectClass=" + CommandSessionListener.class.getName() + ")",listeners);
  EasyMock.replay(bc);
  Subject subject=new Subject();
  subject.getPrincipals().add(new RolePrincipal("aaabbbccc"));
  Subject.doAs(subject,new PrivilegedAction(){
    @Override public Object run(){
      MySecuredCommandProcessorImpl scp=new MySecuredCommandProcessorImpl(bc){
      }
;
      assertEquals(3,scp.getCommands().size());
      assertTrue(scp.getCommands().contains("osgi:addcommand"));
      assertTrue(scp.getCommands().contains("osgi:removecommand"));
      assertTrue(scp.getCommands().contains("osgi:eval"));
      assertEquals(1,scp.getConstants().size());
      assertEquals(bc,scp.getConstants().get(".context"));
      ServiceListener commandListener=listeners.get(commandFilter);
      ServiceReference<?> cdRef=EasyMock.createMock(ServiceReference.class);
      EasyMock.expect(cdRef.getProperty(CommandProcessor.COMMAND_SCOPE)).andReturn("foo");
      EasyMock.expect(cdRef.getProperty(CommandProcessor.COMMAND_FUNCTION)).andReturn("bar");
      EasyMock.replay(cdRef);
      ServiceEvent event=new ServiceEvent(ServiceEvent.REGISTERED,cdRef);
      commandListener.serviceChanged(event);
      assertEquals(4,scp.getCommands().size());
      assertTrue(scp.getCommands().contains("foo:bar"));
      ServiceReference<?> cd2Ref=EasyMock.createMock(ServiceReference.class);
      EasyMock.expect(cd2Ref.getProperty(CommandProcessor.COMMAND_SCOPE)).andReturn("xxx");
      EasyMock.expect(cd2Ref.getProperty(CommandProcessor.COMMAND_FUNCTION)).andReturn(new String[]{"aaa","bbb"});
      EasyMock.replay(cd2Ref);
      ServiceEvent event2=new ServiceEvent(ServiceEvent.REGISTERED,cd2Ref);
      commandListener.serviceChanged(event2);
      assertEquals(6,scp.getCommands().size());
      assertTrue(scp.getCommands().contains("xxx:aaa"));
      assertTrue(scp.getCommands().contains("xxx:bbb"));
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.system.internal.SystemServiceImplTest </h4><pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetName() throws URISyntaxException, IOException {
  SystemServiceImpl system=new SystemServiceImpl();
  BundleContext bundleContext=EasyMock.createMock(BundleContext.class);
  URL propUrl=this.getClass().getClassLoader().getResource("etc/system.properties");
  File propfile=new File(propUrl.toURI());
  EasyMock.expect(bundleContext.getProperty("karaf.etc")).andReturn(propfile.getParentFile().getParent() + "/etc");
  EasyMock.replay(bundleContext);
  system.setBundleContext(bundleContext);
  system.setName(NEW_NAME);
  EasyMock.verify(bundleContext);
  Properties props=new Properties(propfile);
  String nameAfter=props.getProperty("karaf.name");
  Assert.assertEquals(NEW_NAME,nameAfter);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.tooling.features.GenerateDescriptorMojoTest </h4><pre class="type-6 type-3 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadXml100() throws JAXBException, SAXException, ParserConfigurationException, XMLStreamException {
  URL url=getClass().getClassLoader().getResource("input-features-1.0.0.xml");
  Features featuresRoot=JaxbUtil.unmarshal(url.toExternalForm(),false);
  assertEquals(featuresRoot.getRepository().size(),1);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  JaxbUtil.marshal(featuresRoot,baos);
  String text=new String(baos.toByteArray());
  assertTrue(text.contains("repository"));
  assertTrue(text.contains(FeaturesNamespaces.URI_CURRENT));
}

</code></pre>

<br>
<pre class="type-6 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadXml1() throws Exception {
  URL url=getClass().getClassLoader().getResource("input-features-1.1.0.xml");
  Features featuresRoot=JaxbUtil.unmarshal(url.toExternalForm(),false);
  List<Feature> featuresList=featuresRoot.getFeature();
  assertEquals(featuresList.size(),1);
  Feature feature=featuresList.get(0);
  assertEquals(feature.getInstall(),"auto");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.util.ParserTest </h4><pre class="type-6 type-5 type-7 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void parserTest() throws Exception {
  Map parts=new HashMap();
  String uri=Parser.pathToMaven(PATH_WITH_CLASSIFIER,parts);
  Assert.assertEquals("mvn:org.apache.karaf/test/1.0-SNAPSHOT/xml/feature",uri);
  Assert.assertEquals("feature",parts.get("classifier"));
  uri=Parser.pathToMaven(PATH_WITHOUT_CLASSIFIER,parts);
  Assert.assertEquals("mvn:org.apache.karaf/test/1.0-SNAPSHOT/xml",uri);
  Assert.assertNull(parts.get("classifier"));
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
