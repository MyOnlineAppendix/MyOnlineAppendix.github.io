<h3><span class=" glyphicon glyphicon-tag"/>&nbspUtilityVerifier</h3><kbd>Verifies (un)successful execution of the test case by reporting explicitly a failure</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.karaf.features.FeaturesServiceTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testInstallBatchFeatureWithFailure() throws Exception {
  String bundle1Uri="file:bundle1";
  String bundle2Uri="file:bundle2";
  URI uri=createTempRepo(FEATURE_WITH_INVALID_BUNDLE,bundle1Uri,bundle2Uri);
  BundleContext bundleContext=EasyMock.createMock(BundleContext.class);
  Bundle bundle=EasyMock.createMock(Bundle.class);
  FrameworkStartLevel fsl=EasyMock.createMock(FrameworkStartLevel.class);
  expect(bundleContext.getBundles()).andReturn(new Bundle[0]);
  expect(bundleContext.getBundle()).andReturn(bundle);
  expect(bundle.adapt(FrameworkStartLevel.class)).andReturn(fsl);
  expect(fsl.getInitialBundleStartLevel()).andReturn(50);
  expect(fsl.getStartLevel()).andReturn(100);
  replay(bundleContext,bundle,fsl);
  FeaturesServiceImpl svc=new FeaturesServiceImpl(null,bundleContext,new Storage(),null,null,null,resolver,null,null,null,null,null,null,null,0,0,0,null);
  svc.addRepository(uri);
  try {
    List<String> features=new ArrayList<String>();
    for (    Feature feature : svc.listFeatures()) {
      features.add(feature.getId());
    }
    Collections.reverse(features);
    svc.installFeatures(new CopyOnWriteArraySet<String>(features),EnumSet.noneOf(FeaturesService.Option.class));
    fail("Call should have thrown an exception");
  }
 catch (  Exception t) {
  }
  verify(bundleContext);
}

</code></pre>

<br>
<pre class="type-10 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test checks schema validation of submited uri.
 */
@Test public void testSchemaValidation() throws Exception {
  URI uri=createTempRepo("<features name='test' xmlns='http://karaf.apache.org/xmlns/features/v1.0.0'>" + "  <featur><bundle>somebundle</bundle></featur></features>");
  FeaturesServiceImpl svc=new FeaturesServiceImpl(null,null,new Storage(),null,null,null,resolver,null,null,null,null,null,null,null,0,0,0,null);
  try {
    svc.addRepository(uri);
    fail("exception expected");
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("Unable to validate"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.features.internal.service.DeployerTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testPrerequisite() throws Exception {
  String dataDir="data2";
  TestDownloadManager manager=new TestDownloadManager(getClass(),dataDir);
  RepositoryImpl repo=new RepositoryImpl(getClass().getResource(dataDir + "/features.xml").toURI());
  repo.load(true);
  Feature f1=repo.getFeatures()[0];
  Feature f2=repo.getFeatures()[1];
  Bundle serviceBundle1=createTestBundle(1,Bundle.ACTIVE,dataDir,"a100");
  Bundle serviceBundle2=createTestBundle(2,Bundle.ACTIVE,dataDir,"b100");
  Deployer.DeployCallback callback=EasyMock.createMock(Deployer.DeployCallback.class);
  Deployer deployer=new Deployer(manager,resolver,callback);
  callback.print(EasyMock.anyString(),EasyMock.anyBoolean());
  EasyMock.expectLastCall().anyTimes();
  callback.installBundle(EasyMock.eq(ROOT_REGION),EasyMock.eq("a100"),EasyMock.<InputStream>anyObject());
  EasyMock.expectLastCall().andReturn(serviceBundle1);
  callback.replaceDigraph(EasyMock.<Map<String,Map<String,Map<String,Set<String>>>>>anyObject(),EasyMock.<Map<String,Set<Long>>>anyObject());
  EasyMock.expectLastCall();
  callback.saveState(EasyMock.<State>anyObject());
  EasyMock.expectLastCall();
  callback.installFeature(f1);
  EasyMock.expectLastCall();
  callback.resolveBundles(EasyMock.<Set<Bundle>>anyObject(),EasyMock.<Map<Resource,List<Wire>>>anyObject(),EasyMock.<Map<Resource,Bundle>>anyObject());
  EasyMock.expectLastCall();
  callback.callListeners(EasyMock.<FeatureEvent>anyObject());
  EasyMock.expectLastCall();
  EasyMock.replay(callback);
  Deployer.DeploymentState dstate=new Deployer.DeploymentState();
  dstate.state=new State();
  dstate.bundles=new HashMap<>();
  dstate.bundlesPerRegion=new HashMap<>();
  dstate.features=new HashMap<>();
  dstate.features.put(f1.getId(),f1);
  dstate.features.put(f2.getId(),f2);
  dstate.filtersPerRegion=new HashMap<>();
  dstate.filtersPerRegion.put(ROOT_REGION,new HashMap<String,Map<String,Set<String>>>());
  Deployer.DeploymentRequest request=new Deployer.DeploymentRequest();
  request.bundleUpdateRange=DEFAULT_BUNDLE_UPDATE_RANGE;
  request.featureResolutionRange=DEFAULT_FEATURE_RESOLUTION_RANGE;
  request.globalRepository=null;
  request.options=EnumSet.noneOf(Option.class);
  request.overrides=Collections.emptySet();
  request.stateChanges=Collections.emptyMap();
  request.updateSnaphots=UPDATE_SNAPSHOTS_NONE;
  request.requirements=new HashMap<>();
  addToMapSet(request.requirements,ROOT_REGION,f2.getName());
  try {
    deployer.deploy(dstate,request);
    fail("Should have thrown an exception");
  }
 catch (  Deployer.PartialDeploymentException e) {
  }
  EasyMock.verify(callback);
  EasyMock.reset(callback);
  callback.print(EasyMock.anyString(),EasyMock.anyBoolean());
  EasyMock.expectLastCall().anyTimes();
  callback.installBundle(EasyMock.eq(ROOT_REGION),EasyMock.eq("b100"),EasyMock.<InputStream>anyObject());
  EasyMock.expectLastCall().andReturn(serviceBundle2);
  callback.replaceDigraph(EasyMock.<Map<String,Map<String,Map<String,Set<String>>>>>anyObject(),EasyMock.<Map<String,Set<Long>>>anyObject());
  EasyMock.expectLastCall();
  callback.saveState(EasyMock.<State>anyObject());
  EasyMock.expectLastCall();
  callback.installFeature(f2);
  EasyMock.expectLastCall();
  callback.resolveBundles(EasyMock.<Set<Bundle>>anyObject(),EasyMock.<Map<Resource,List<Wire>>>anyObject(),EasyMock.<Map<Resource,Bundle>>anyObject());
  EasyMock.expectLastCall();
  callback.callListeners(EasyMock.<FeatureEvent>anyObject());
  EasyMock.expectLastCall();
  EasyMock.replay(callback);
  dstate=new Deployer.DeploymentState();
  dstate.state=new State();
  addToMapSet(dstate.state.installedFeatures,ROOT_REGION,f1.getId());
  dstate.state.stateFeatures.put(ROOT_REGION,Collections.singletonMap(f1.getId(),"Started"));
  addToMapSet(dstate.state.managedBundles,ROOT_REGION,serviceBundle1.getBundleId());
  dstate.bundles=new HashMap<>();
  dstate.bundles.put(serviceBundle1.getBundleId(),serviceBundle1);
  dstate.bundlesPerRegion=new HashMap<>();
  addToMapSet(dstate.bundlesPerRegion,ROOT_REGION,serviceBundle1.getBundleId());
  dstate.features=new HashMap<>();
  dstate.features.put(f1.getId(),f1);
  dstate.features.put(f2.getId(),f2);
  dstate.filtersPerRegion=new HashMap<>();
  dstate.filtersPerRegion.put(ROOT_REGION,new HashMap<String,Map<String,Set<String>>>());
  request=new Deployer.DeploymentRequest();
  request.bundleUpdateRange=DEFAULT_BUNDLE_UPDATE_RANGE;
  request.featureResolutionRange=DEFAULT_FEATURE_RESOLUTION_RANGE;
  request.globalRepository=null;
  request.options=EnumSet.noneOf(Option.class);
  request.overrides=Collections.emptySet();
  request.stateChanges=Collections.emptyMap();
  request.updateSnaphots=UPDATE_SNAPSHOTS_NONE;
  request.requirements=new HashMap<>();
  addToMapSet(request.requirements,ROOT_REGION,f2.getName());
  deployer.deploy(dstate,request);
  EasyMock.verify(callback);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.features.internal.service.FeaturesValidationTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testNs11NoName() throws Exception {
  try {
    FeatureValidationUtil.validate(getClass().getResource("f05.xml").toURI());
    fail("Validation should have failed");
  }
 catch (  Exception e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.itests.JMXSecurityTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testJMXSecurityCannotLogInAsGroupDirectly() throws Exception {
  String suffix="_" + counter.incrementAndGet();
  String managerUser="managerUser" + System.currentTimeMillis() + suffix;
  String managerGroup="managerGroup" + System.currentTimeMillis() + suffix;
  String viewerUser="viewerUser" + System.currentTimeMillis() + suffix;
  System.out.println(executeCommand("jaas:realm-manage --realm karaf" + ";jaas:user-add " + managerUser + " "+ managerUser+ ";jaas:group-add "+ managerUser+ " "+ managerGroup+ ";jaas:group-role-add "+ managerGroup+ " viewer"+ ";jaas:group-role-add "+ managerGroup+ " manager"+ ";jaas:user-add "+ viewerUser+ " "+ viewerUser+ ";jaas:role-add "+ viewerUser+ " viewer"+ ";jaas:update"+ ";jaas:realm-manage --realm karaf"+ ";jaas:user-list",new RolePrincipal("admin")));
  try {
    getJMXConnector("admingroup","group");
    fail("Login with a group name should have failed");
  }
 catch (  SecurityException se) {
  }
  try {
    getJMXConnector("_g_:admingroup","group");
    fail("Login with a group name should have failed");
  }
 catch (  SecurityException se) {
  }
  try {
    getJMXConnector(managerGroup,"group");
    fail("Login with a group name should have failed");
  }
 catch (  SecurityException se) {
  }
  try {
    getJMXConnector("_g_:" + managerGroup,"group");
    fail("Login with a group name should have failed");
  }
 catch (  SecurityException se) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.jaas.modules.ldap.LdapLoginModuleTest </h4><pre class="type-10 type-3 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyPassword() throws Exception {
  Properties options=ldapLoginModuleOptions();
  LDAPLoginModule module=new LDAPLoginModule();
  CallbackHandler cb=new CallbackHandler(){
    public void handle(    Callback[] callbacks) throws IOException, UnsupportedCallbackException {
      for (      Callback cb : callbacks) {
        if (cb instanceof NameCallback) {
          ((NameCallback)cb).setName("imnothere");
        }
 else         if (cb instanceof PasswordCallback) {
          ((PasswordCallback)cb).setPassword("".toCharArray());
        }
      }
    }
  }
;
  Subject subject=new Subject();
  module.initialize(subject,cb,null,options);
  assertEquals("Precondition",0,subject.getPrincipals().size());
  try {
    module.login();
    fail("Should have failed");
  }
 catch (  LoginException e) {
    assertTrue(e.getMessage().equals("Empty passwords not allowed"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.jaas.modules.properties.PropertiesLoginModuleTest </h4><pre class="type-14 type-10 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLoginWithGroups() throws Exception {
  File f=File.createTempFile(getClass().getName(),".tmp");
  try {
    Properties p=new Properties(f);
    PropertiesBackingEngine pbe=new PropertiesBackingEngine(p);
    pbe.addUser("abc","xyz");
    pbe.addRole("abc","myrole");
    pbe.addUser("pqr","abc");
    pbe.addGroup("pqr","group1");
    pbe.addGroupRole("group1","r1");
    PropertiesLoginModule module=new PropertiesLoginModule();
    Map<String,String> options=new HashMap<String,String>();
    options.put(PropertiesLoginModule.USER_FILE,f.getAbsolutePath());
    CallbackHandler cb=new CallbackHandler(){
      @Override public void handle(      Callback[] callbacks) throws IOException, UnsupportedCallbackException {
        for (        Callback cb : callbacks) {
          if (cb instanceof NameCallback) {
            ((NameCallback)cb).setName("pqr");
          }
 else           if (cb instanceof PasswordCallback) {
            ((PasswordCallback)cb).setPassword("abc".toCharArray());
          }
        }
      }
    }
;
    Subject subject=new Subject();
    module.initialize(subject,cb,null,options);
    Assert.assertEquals("Precondition",0,subject.getPrincipals().size());
    Assert.assertTrue(module.login());
    Assert.assertTrue(module.commit());
    Assert.assertEquals(3,subject.getPrincipals().size());
    boolean foundUser=false;
    boolean foundRole=false;
    boolean foundGroup=false;
    for (    Principal pr : subject.getPrincipals()) {
      if (pr instanceof UserPrincipal) {
        Assert.assertEquals("pqr",pr.getName());
        foundUser=true;
      }
 else       if (pr instanceof GroupPrincipal) {
        Assert.assertEquals("group1",pr.getName());
        foundGroup=true;
      }
 else       if (pr instanceof RolePrincipal) {
        Assert.assertEquals("r1",pr.getName());
        foundRole=true;
      }
    }
    Assert.assertTrue(foundUser);
    Assert.assertTrue(foundGroup);
    Assert.assertTrue(foundRole);
  }
  finally {
    if (!f.delete()) {
      Assert.fail("Could not delete temporary file: " + f);
    }
  }
}

</code></pre>

<br>
<pre class="type-14 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testLoginIncorrectPassword() throws Exception {
  File f=File.createTempFile(getClass().getName(),".tmp");
  try {
    Properties p=new Properties(f);
    PropertiesBackingEngine pbe=new PropertiesBackingEngine(p);
    pbe.addUser("abc","xyz");
    pbe.addUser("pqr","abc");
    PropertiesLoginModule module=new PropertiesLoginModule();
    Map<String,String> options=new HashMap<String,String>();
    options.put(PropertiesLoginModule.USER_FILE,f.getAbsolutePath());
    CallbackHandler cb=new CallbackHandler(){
      @Override public void handle(      Callback[] callbacks) throws IOException, UnsupportedCallbackException {
        for (        Callback cb : callbacks) {
          if (cb instanceof NameCallback) {
            ((NameCallback)cb).setName("abc");
          }
 else           if (cb instanceof PasswordCallback) {
            ((PasswordCallback)cb).setPassword("abc".toCharArray());
          }
        }
      }
    }
;
    module.initialize(new Subject(),cb,null,options);
    try {
      module.login();
      Assert.fail("The login should have failed as the passwords didn't match");
    }
 catch (    FailedLoginException fle) {
    }
  }
  finally {
    if (!f.delete()) {
      Assert.fail("Could not delete temporary file: " + f);
    }
  }
}

</code></pre>

<br>
<pre class="type-10 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNullPassword() throws Exception {
  PropertiesLoginModule module=new PropertiesLoginModule();
  Subject subject=new Subject();
  CallbackHandler handler=new NullHandler();
  Map<String,String> options=new HashMap<String,String>();
  options.put(PropertiesLoginModule.USER_FILE,getTestUsersFile());
  module.initialize(subject,handler,null,options);
  try {
    module.login();
    Assert.fail("LoginException expected");
  }
 catch (  LoginException e) {
    Assert.assertEquals("Password can not be null",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-10 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNullCallbackHandler(){
  PropertiesLoginModule module=new PropertiesLoginModule();
  Subject subject=new Subject();
  Map<String,String> options=new HashMap<String,String>();
  options.put(PropertiesLoginModule.USER_FILE,getTestUsersFile());
  module.initialize(subject,null,null,options);
  try {
    module.login();
    Assert.fail("LoginException expected");
  }
 catch (  LoginException e) {
    Assert.assertEquals("Username can not be null",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-14 type-10 type-3 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicLogin() throws Exception {
  File f=File.createTempFile(getClass().getName(),".tmp");
  try {
    Properties p=new Properties(f);
    PropertiesBackingEngine pbe=new PropertiesBackingEngine(p);
    pbe.addUser("abc","xyz");
    pbe.addRole("abc","myrole");
    pbe.addUser("pqr","abc");
    PropertiesLoginModule module=new PropertiesLoginModule();
    Map<String,String> options=new HashMap<String,String>();
    options.put(PropertiesLoginModule.USER_FILE,f.getAbsolutePath());
    CallbackHandler cb=new CallbackHandler(){
      @Override public void handle(      Callback[] callbacks) throws IOException, UnsupportedCallbackException {
        for (        Callback cb : callbacks) {
          if (cb instanceof NameCallback) {
            ((NameCallback)cb).setName("abc");
          }
 else           if (cb instanceof PasswordCallback) {
            ((PasswordCallback)cb).setPassword("xyz".toCharArray());
          }
        }
      }
    }
;
    Subject subject=new Subject();
    module.initialize(subject,cb,null,options);
    Assert.assertEquals("Precondition",0,subject.getPrincipals().size());
    Assert.assertTrue(module.login());
    Assert.assertTrue(module.commit());
    Assert.assertEquals(2,subject.getPrincipals().size());
    boolean foundUser=false;
    boolean foundRole=false;
    for (    Principal pr : subject.getPrincipals()) {
      if (pr instanceof UserPrincipal) {
        Assert.assertEquals("abc",pr.getName());
        foundUser=true;
      }
 else       if (pr instanceof RolePrincipal) {
        Assert.assertEquals("myrole",pr.getName());
        foundRole=true;
      }
    }
    Assert.assertTrue(foundUser);
    Assert.assertTrue(foundRole);
    Assert.assertTrue(module.logout());
    Assert.assertEquals("Principals should be gone as the user has logged out",0,subject.getPrincipals().size());
  }
  finally {
    if (!f.delete()) {
      Assert.fail("Could not delete temporary file: " + f);
    }
  }
}

</code></pre>

<br>
<pre class="type-10 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNullUsersFile(){
  try {
    testWithUsersFile(null);
    Assert.fail("LoginException expected");
  }
 catch (  LoginException e) {
    Assert.assertEquals("The property users may not be null",e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.service.guard.impl.GuardProxyCatalogTest </h4><pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@SuppressWarnings("unchecked") @Test public void testCustomRole() throws Exception {
class MyRolePrincipal implements Principal {
    @Override public String getName(){
      return "role1";
    }
  }
  ;
  Dictionary<String,Object> c1=new Hashtable<String,Object>();
  c1.put(Constants.SERVICE_PID,"foobar");
  c1.put("service.guard","(objectClass=" + TestServiceAPI.class.getName() + ")");
  c1.put("doit",MyRolePrincipal.class.getName() + ":role1");
  BundleContext bc=mockConfigAdminBundleContext(c1);
  final Object proxy=testCreateProxy(bc,new Class[]{TestServiceAPI.class},new TestService());
  Subject s1=new Subject();
  s1.getPrincipals().add(new RolePrincipal("role1"));
  Subject.doAs(s1,new PrivilegedAction(){
    @Override public Object run(){
      try {
        ((TestServiceAPI)proxy).doit();
        fail("Should have prevented this invocation as the custom role is required");
      }
 catch (      SecurityException se) {
      }
      return null;
    }
  }
);
  Subject s2=new Subject();
  s2.getPrincipals().add(new MyRolePrincipal());
  Subject.doAs(s2,new PrivilegedAction(){
    @Override public Object run(){
      ((TestServiceAPI)proxy).doit();
      return null;
    }
  }
);
  Subject s3=new Subject();
  s3.getPrincipals().add(new MyRolePrincipal());
  s3.getPrincipals().add(new RolePrincipal("role1"));
  Subject.doAs(s3,new PrivilegedAction(){
    @Override public Object run(){
      ((TestServiceAPI)proxy).doit();
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-6 type-14 type-10 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testInvocationBlocking2() throws Exception {
  Dictionary<String,Object> config=new Hashtable<String,Object>();
  config.put(Constants.SERVICE_PID,"barfoobar");
  config.put("service.guard","(objectClass=" + TestObjectWithoutInterface.class.getName() + ")");
  config.put("compute(long)[\"42\"]","b");
  config.put("compute(long)","c");
  BundleContext bc=mockConfigAdminBundleContext(config);
  final Object proxy=testCreateProxy(bc,new Class[]{TestServiceAPI.class,TestObjectWithoutInterface.class},new CombinedTestService());
  Subject subject=new Subject();
  subject.getPrincipals().add(new RolePrincipal("b"));
  Subject.doAs(subject,new PrivilegedAction(){
    @Override public Object run(){
      if (!runningUnderCoverage) {
        assertEquals(-42L,((TestObjectWithoutInterface)proxy).compute(42L));
        try {
          ((TestObjectWithoutInterface)proxy).compute(44L);
          fail("Should have been blocked");
        }
 catch (        SecurityException se) {
        }
      }
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-6 type-10 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testInvocationBlocking3() throws Exception {
class MyService implements TestServiceAPI, TestServiceAPI2 {
    public String doit(    String s){
      return new StringBuilder(s).reverse().toString();
    }
    public String doit(){
      return "Doing it";
    }
  }
  ;
  Dictionary<String,Object> c1=new Hashtable<String,Object>();
  c1.put(Constants.SERVICE_PID,"foobar");
  c1.put("service.guard","(objectClass=" + TestServiceAPI.class.getName() + ")");
  c1.put("do*","c");
  Dictionary<String,Object> c2=new Hashtable<String,Object>();
  c2.put(Constants.SERVICE_PID,"foobar2");
  c2.put("service.guard","(objectClass=" + TestServiceAPI2.class.getName() + ")");
  c2.put("doit(java.lang.String)[/[tT][a]+/]","b,d # a regex rule");
  c2.put("doit(java.lang.String)","a");
  BundleContext bc=mockConfigAdminBundleContext(c1,c2);
  final Object proxy=testCreateProxy(bc,new Class[]{TestServiceAPI.class,TestServiceAPI2.class},new MyService());
  Subject subject=new Subject();
  subject.getPrincipals().add(new RolePrincipal("c"));
  Subject.doAs(subject,new PrivilegedAction(){
    @Override public Object run(){
      assertEquals("Doing it",((TestServiceAPI)proxy).doit());
      return null;
    }
  }
);
  Subject subject2=new Subject();
  subject2.getPrincipals().add(new RolePrincipal("b"));
  subject2.getPrincipals().add(new RolePrincipal("f"));
  Subject.doAs(subject2,new PrivilegedAction(){
    @Override public Object run(){
      try {
        assertEquals("Doing it",((TestServiceAPI)proxy).doit());
        fail("Should have been blocked");
      }
 catch (      SecurityException se) {
      }
      assertEquals("aaT",((TestServiceAPI2)proxy).doit("Taa"));
      try {
        ((TestServiceAPI2)proxy).doit("t");
        fail("Should have been blocked");
      }
 catch (      SecurityException se) {
      }
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-6 type-14 type-10 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testInvocationBlocking1() throws Exception {
  Dictionary<String,Object> c1=new Hashtable<String,Object>();
  c1.put(Constants.SERVICE_PID,"foobar");
  c1.put("service.guard","(objectClass=" + TestServiceAPI.class.getName() + ")");
  c1.put("doit","a,b");
  Dictionary<String,Object> c2=new Hashtable<String,Object>();
  c2.put(Constants.SERVICE_PID,"barfoobar");
  c2.put("service.guard","(objectClass=" + TestObjectWithoutInterface.class.getName() + ")");
  c2.put("compute","c");
  BundleContext bc=mockConfigAdminBundleContext(c1,c2);
  final Object proxy=testCreateProxy(bc,new Class[]{TestServiceAPI.class,TestObjectWithoutInterface.class},new CombinedTestService());
  Subject subject=new Subject();
  subject.getPrincipals().add(new RolePrincipal("b"));
  Subject.doAs(subject,new PrivilegedAction(){
    @Override public Object run(){
      assertEquals("Doing it",((TestServiceAPI)proxy).doit());
      if (!runningUnderCoverage) {
        try {
          ((TestObjectWithoutInterface)proxy).compute(44L);
          fail("Should have been blocked");
        }
 catch (        SecurityException se) {
        }
      }
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@SuppressWarnings("unchecked") @Test public void testInvocationBlocking6() throws Exception {
  Dictionary<String,Object> c1=new Hashtable<String,Object>();
  c1.put(Constants.SERVICE_PID,"foobar");
  c1.put("service.guard","(objectClass=" + TestServiceAPI.class.getName() + ")");
  c1.put("doit","a,b");
  Dictionary<String,Object> c2=new Hashtable<String,Object>();
  c2.put(Constants.SERVICE_PID,"foobar2");
  c2.put("service.guard","(objectClass=" + TestServiceAPI2.class.getName() + ")");
  c2.put("bar","c");
  BundleContext bc=mockConfigAdminBundleContext(c1,c2);
  final Object proxy=testCreateProxy(bc,new Class[]{TestServiceAPI2.class},new TestServiceAPI2(){
    @Override public String doit(    String s){
      return s.toUpperCase();
    }
  }
);
  Subject subject=new Subject();
  subject.getPrincipals().add(new RolePrincipal("a"));
  subject.getPrincipals().add(new RolePrincipal("b"));
  subject.getPrincipals().add(new RolePrincipal("c"));
  Subject.doAs(subject,new PrivilegedAction(){
    @Override public Object run(){
      try {
        ((TestServiceAPI2)proxy).doit("hello");
        fail("The invocation should not process as the 'doit' operation has no roles associated with it");
      }
 catch (      SecurityException se) {
      }
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-6 type-10 type-4 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testInvocationBlocking7() throws Exception {
  Dictionary<String,Object> c1=new Hashtable<String,Object>();
  c1.put(Constants.SERVICE_PID,"foobar");
  c1.put("service.guard","(objectClass=" + TestServiceAPI3.class.getName() + ")");
  c1.put("foo()","a");
  c1.put("bar","b");
  c1.put("*","*");
  BundleContext bc=mockConfigAdminBundleContext(c1);
  final Object proxy=testCreateProxy(bc,new Class[]{TestServiceAPI3.class},new TestService3());
  Subject s1=new Subject();
  Subject.doAs(s1,new PrivilegedAction(){
    @Override public Object run(){
      TestServiceAPI3 obj=(TestServiceAPI3)proxy;
      assertEquals("Should have allowed this invocation for any (or no) role",-7,obj.foo(7));
      try {
        obj.foo();
        fail("Should have been blocked");
      }
 catch (      SecurityException se) {
      }
      try {
        obj.bar();
        fail("Should have been blocked");
      }
 catch (      SecurityException se) {
      }
      return null;
    }
  }
);
  Subject s2=new Subject();
  s2.getPrincipals().add(new RolePrincipal("a"));
  s2.getPrincipals().add(new RolePrincipal("b"));
  s2.getPrincipals().add(new RolePrincipal("d"));
  Subject.doAs(s2,new PrivilegedAction(){
    @Override public Object run(){
      TestServiceAPI3 obj=(TestServiceAPI3)proxy;
      assertEquals(42,obj.foo());
      assertEquals(99,obj.bar());
      assertEquals(-32767,obj.foo(32767));
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.shell.security.impl.SecuredCommandConfigTransformerTest </h4><pre class="type-14 type-10 type-3 type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransformation() throws Exception {
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put("foo","a,b,c");
  props.put("bar[/.*[a]+*/]","d");
  props.put("bar","e");
  props.put("zar[/.*HiThere*/]","f");
  props.put("service.pid",SecuredCommandConfigTransformer.PROXY_COMMAND_ACL_PID_PREFIX + "abc");
  Configuration commandConfig=mockConfiguration(props);
  Dictionary<String,Object> props2=new Hashtable<String,Object>();
  props2.put("xxx","yyy");
  props2.put("service.pid",SecuredCommandConfigTransformer.PROXY_COMMAND_ACL_PID_PREFIX + "xyz.123");
  Configuration commandConfig2=mockConfiguration(props2);
  Dictionary<String,Object> props3=new Hashtable<String,Object>();
  props3.put("test","toast");
  props3.put("service.pid","xyz.123");
  Configuration otherConfig=mockConfiguration(props3);
  final Map<String,Configuration> configurations=new HashMap<String,Configuration>();
  ConfigurationAdmin ca=EasyMock.createMock(ConfigurationAdmin.class);
  EasyMock.expect(ca.listConfigurations("(service.pid=" + SecuredCommandConfigTransformer.PROXY_COMMAND_ACL_PID_PREFIX + "*)")).andReturn(new Configuration[]{commandConfig,commandConfig2,otherConfig}).anyTimes();
  EasyMock.expect(ca.getConfiguration(EasyMock.isA(String.class),EasyMock.anyString())).andAnswer(new IAnswer<Configuration>(){
    @Override public Configuration answer() throws Throwable {
      String pid=(String)EasyMock.getCurrentArguments()[0];
      Configuration c=configurations.get(pid);
      if (c == null) {
        c=EasyMock.createMock(Configuration.class);
        Dictionary<String,Object> m=new Hashtable<String,Object>();
        if ("org.apache.karaf.service.acl.command.abc.foo".equals(pid)) {
          m.put("service.guard","(&(osgi.command.scope=abc)(osgi.command.function=foo))");
          m.put("execute","a,b,c");
          m.put("foo","a,b,c");
        }
 else         if ("org.apache.karaf.service.acl.command.abc.bar".equals(pid)) {
          m.put("service.guard","(&(osgi.command.scope=abc)(osgi.command.function=bar))");
          m.put("execute[/.*/,/.*[a]+*/]","d");
          m.put("execute","e");
          m.put("bar[/.*[a]+*/]","d");
          m.put("bar","e");
        }
 else         if ("org.apache.karaf.service.acl.command.abc.zar".equals(pid)) {
          m.put("service.guard","(&(osgi.command.scope=abc)(osgi.command.function=zar))");
          m.put("execute[/.*/,/.*HiThere*/]","f");
          m.put("zar[/.*HiThere*/]","f");
        }
 else {
          fail("Unexpected PID: " + pid);
        }
        m.put("*","*");
        c.update(m);
        EasyMock.expectLastCall().once();
        EasyMock.replay(c);
        configurations.put(pid,c);
      }
      return c;
    }
  }
).anyTimes();
  EasyMock.replay(ca);
  SecuredCommandConfigTransformer scct=new SecuredCommandConfigTransformer();
  scct.setConfigAdmin(ca);
  scct.init();
  assertEquals(3,configurations.size());
  boolean foundFoo=false;
  boolean foundBar=false;
  boolean foundZar=false;
  for (  Map.Entry<String,Configuration> entry : configurations.entrySet()) {
    Configuration c=entry.getValue();
    EasyMock.verify(c);
    if ("org.apache.karaf.service.acl.command.abc.foo".equals(entry.getKey())) {
      foundFoo=true;
    }
 else     if ("org.apache.karaf.service.acl.command.abc.bar".equals(entry.getKey())) {
      foundBar=true;
    }
 else     if ("org.apache.karaf.service.acl.command.abc.zar".equals(entry.getKey())) {
      foundZar=true;
    }
  }
  assertTrue(foundFoo);
  assertTrue(foundBar);
  assertTrue(foundZar);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
