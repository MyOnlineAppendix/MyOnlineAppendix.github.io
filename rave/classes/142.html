<h3 style="margin:0px">Class: org.apache.rave.portal.service.impl.DefaultUserServiceTest (25 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(10)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >ConditionMatcher&nbsp;(10)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(10)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >ExceptionVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;<button id="15"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('15')" data-toggle="tooltip" title="Releases resources used by the test cases"><kbd id="tag-15"class="label-info"style="display: inline-block;font-size:7pt" >TestCleaner&nbsp;(1)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void updateUserProfile(){
  User user=new UserImpl(USER_ID,USER_NAME);
  expect(userRepository.save(user)).andReturn(user).once();
  replay(userRepository);
  service.updateUserProfile(user);
  assertTrue("Save called",true);
  verify(userRepository);
}

</code></pre>

<pre class="type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=UsernameNotFoundException.class) public void setAuthenticatedUser_invalid_null(){
  expect(userRepository.get(USER_ID)).andReturn(null).anyTimes();
  replay(userRepository);
  service.setAuthenticatedUser(USER_ID);
  verify(userRepository);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  userRepository=createMock(UserRepository.class);
  pageRepository=createMock(PageRepository.class);
  pageTemplateRepository=createMock(PageTemplateRepository.class);
  widgetRepository=createMock(WidgetRepository.class);
  categoryRepository=createMock(CategoryRepository.class);
  personRepository=createMock(PersonRepository.class);
  service=new DefaultUserService(pageRepository,userRepository,widgetRepository,pageTemplateRepository,categoryRepository,personRepository);
}

</code></pre>

<pre class="type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=UsernameNotFoundException.class) public void loadUserDetails_invalid_exception(){
  expect(userRepository.getByOpenId(OPENID_INVALID)).andReturn(null);
  replay(userRepository);
  OpenIDAuthenticationToken postAuthToken=new OpenIDAuthenticationToken(OpenIDAuthenticationStatus.SUCCESS,OPENID_INVALID,"Some message",new ArrayList<OpenIDAttribute>());
  service.loadUserDetails(postAuthToken);
  verify(userRepository);
}

</code></pre>

<pre class="type-5 type-6 type-8 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setAuthenticatedUser_validRole(){
  final User authUser=new UserImpl(USER_ID);
  final Authority userRole=new AuthorityImpl();
  userRole.setAuthority("admin");
  authUser.addAuthority(userRole);
  expect(userRepository.get(USER_ID)).andReturn(authUser).anyTimes();
  replay(userRepository);
  service.setAuthenticatedUser(USER_ID);
  assertThat((User)SecurityContextHolder.getContext().getAuthentication().getPrincipal(),is(sameInstance(authUser)));
  final GrantedAuthority grantedAuthority=SecurityContextHolder.getContext().getAuthentication().getAuthorities().iterator().next();
  assertEquals("has authority admin","admin",grantedAuthority.getAuthority());
  verify(userRepository);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void clearAuthentication(){
  SecurityContext context=new SecurityContextImpl();
  SecurityContextHolder.setContext(context);
  service.clearAuthenticatedUser();
  assertThat(SecurityContextHolder.getContext(),not(sameInstance(context)));
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void registerNewUser_valid(){
  User user=new UserImpl();
  expect(userRepository.save(user)).andReturn(user).once();
  expect(pageTemplateRepository.getDefaultPage(PageType.PERSON_PROFILE.toString())).andReturn(new PageTemplateImpl()).once();
  expect(pageRepository.createPageForUser(isA(UserImpl.class),isA(PageTemplate.class))).andReturn(new PageImpl());
  replay(userRepository,pageTemplateRepository,pageRepository);
  service.registerNewUser(user);
  verify(userRepository,pageTemplateRepository,pageRepository);
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void deleteUser_invalidUserId(){
  expect(userRepository.get(INVALID_USER_ID)).andReturn(null);
  replay(userRepository,pageRepository,widgetRepository);
  service.deleteUser(INVALID_USER_ID);
  verify(userRepository,pageRepository,widgetRepository);
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void deleteUser(){
  final int NUM_COMMENTS=33;
  final int NUM_RATINGS=99;
  final int NUM_WIDGETS_OWNED=4;
  UserImpl user=new UserImpl(USER_ID,USER_NAME);
  Page page=new PageImpl("1",user.getId());
  List<Page> pages=new ArrayList<Page>();
  pages.add(page);
  expect(userRepository.get(USER_ID)).andReturn(user);
  expect(pageRepository.deletePages(USER_ID,PageType.USER.toString())).andReturn(pages.size());
  expect(pageRepository.deletePages(USER_ID,PageType.PERSON_PROFILE.toString())).andReturn(pages.size());
  expect(widgetRepository.deleteAllWidgetComments(USER_ID)).andReturn(NUM_COMMENTS);
  expect(widgetRepository.deleteAllWidgetRatings(USER_ID)).andReturn(NUM_RATINGS);
  expect(widgetRepository.unassignWidgetOwner(USER_ID)).andReturn(NUM_WIDGETS_OWNED);
  expect(categoryRepository.removeFromCreatedOrModifiedFields(USER_ID)).andReturn(NUM_WIDGETS_OWNED);
  userRepository.delete(user);
  expectLastCall();
  replay(userRepository,pageRepository,widgetRepository,categoryRepository);
  service.deleteUser(USER_ID);
  verify(userRepository,pageRepository,widgetRepository,categoryRepository);
}

</code></pre>

<pre class="type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getUserByEmail_valid(){
  final User authUser=new UserImpl(USER_ID,USER_NAME);
  authUser.setEmail(USER_EMAIL);
  expect(userRepository.getByUserEmail(USER_EMAIL)).andReturn(authUser).anyTimes();
  replay(userRepository);
  UserDetails result=service.getUserByEmail(USER_EMAIL);
  assertThat((User)result,is(sameInstance(authUser)));
  verify(userRepository);
}

</code></pre>

<pre class="type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=UsernameNotFoundException.class) public void loadByUsername_invalid_exception(){
  expect(userRepository.getByUsername(USER_NAME)).andReturn(null);
  replay(userRepository);
  service.loadUserByUsername(USER_NAME);
  verify(userRepository);
}

</code></pre>

<pre class="type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=UsernameNotFoundException.class) public void loadByUsername_invalid_null(){
  expect(userRepository.get(USER_ID)).andReturn(null).anyTimes();
  replay(userRepository);
  service.setAuthenticatedUser(USER_ID);
  verify(userRepository);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void setAuthenticatedUser_valid(){
  final User authUser=new UserImpl(USER_ID);
  expect(userRepository.get(USER_ID)).andReturn(authUser).anyTimes();
  replay(userRepository);
  service.setAuthenticatedUser(USER_ID);
  assertThat((User)SecurityContextHolder.getContext().getAuthentication().getPrincipal(),is(sameInstance(authUser)));
  verify(userRepository);
}

</code></pre>

<pre class="type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=SecurityException.class) public void getAuthenticatedUser_wrongPrincipalType(){
  AbstractAuthenticationToken auth=createNiceMock(AbstractAuthenticationToken.class);
  expect(auth.getPrincipal()).andReturn(USER_ID).anyTimes();
  replay(auth);
  SecurityContext context=new SecurityContextImpl();
  SecurityContextHolder.setContext(context);
  service.getAuthenticatedUser();
  verify(auth);
}

</code></pre>

<pre class="type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void loadUserDetails_valid(){
  final User authUser=new UserImpl(USER_ID,USER_NAME);
  authUser.setOpenId(OPENID_VALID);
  expect(userRepository.getByOpenId(OPENID_VALID)).andReturn(authUser).anyTimes();
  replay(userRepository);
  OpenIDAuthenticationToken postAuthToken=new OpenIDAuthenticationToken(OpenIDAuthenticationStatus.SUCCESS,OPENID_VALID,"Some message",new ArrayList<OpenIDAttribute>());
  UserDetails result=service.loadUserDetails(postAuthToken);
  assertThat((User)result,is(sameInstance(authUser)));
  verify(userRepository);
}

</code></pre>

<pre class="type-2 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=SecurityException.class) public void getAuthenticatedUser_nullAuth(){
  SecurityContext context=new SecurityContextImpl();
  SecurityContextHolder.setContext(context);
  service.getAuthenticatedUser();
}

</code></pre>

<pre class="type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getAllByAddedWidget(){
  List<User> userList=new ArrayList<User>();
  userList.add(new UserImpl());
  userList.add(new UserImpl());
  List<Person> personList=new ArrayList<Person>();
  personList.add(userList.get(0).toPerson());
  personList.add(userList.get(1).toPerson());
  expect(userRepository.getAllByAddedWidget(VALID_WIDGET_ID)).andReturn(userList);
  replay(userRepository);
  List<Person> allByAddedWidget=service.getAllByAddedWidget(VALID_WIDGET_ID);
  assertThat(allByAddedWidget,is(equalTo(personList)));
  verify(userRepository);
}

</code></pre>

<pre class="type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getAuthenticatedUser_validUser(){
  final User authUser=new UserImpl(USER_ID);
  AbstractAuthenticationToken auth=createNiceMock(AbstractAuthenticationToken.class);
  expect(auth.getPrincipal()).andReturn(authUser).anyTimes();
  replay(auth);
  SecurityContext context=new SecurityContextImpl();
  context.setAuthentication(auth);
  SecurityContextHolder.setContext(context);
  User result=service.getAuthenticatedUser();
  assertThat(result,is(sameInstance(authUser)));
  verify(auth);
}

</code></pre>

<pre class="type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getLimitedList(){
  User user1=new UserImpl("123","john.doe.sr");
  User user2=new UserImpl("456","john.doe.jr");
  List<User> users=new ArrayList<User>();
  users.add(user1);
  users.add(user2);
  final int offset=0;
  final int pageSize=10;
  expect(userRepository.getCountAll()).andReturn(users.size());
  expect(userRepository.getLimitedList(offset,pageSize)).andReturn(users);
  replay(userRepository);
  SearchResult<User> result=service.getLimitedList(offset,pageSize);
  assertEquals(pageSize,result.getPageSize());
  assertEquals(users.size(),result.getResultSet().size());
  assertEquals(user1,result.getResultSet().get(0));
  verify(userRepository);
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void getAllPeople(){
  expect(personRepository.getAll()).andReturn(new ArrayList<Person>());
  replay(personRepository);
  service.getAllPeople();
  verify(personRepository);
}

</code></pre>

<pre class="type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getAll(){
  List<User> users=new ArrayList<User>();
  expect(userRepository.getCountAll()).andReturn(1);
  expect(userRepository.getAll()).andReturn(users);
  replay(userRepository);
  List<User> result=service.getAll().getResultSet();
  assertThat(result,is(sameInstance(users)));
  verify(userRepository);
}

</code></pre>

<pre class="type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getUsersByFreeTextSearch(){
  final String searchTerm="Doe";
  User user1=new UserImpl("123","john.doe.sr");
  User user2=new UserImpl("456","john.doe.jr");
  List<User> users=new ArrayList<User>();
  users.add(user1);
  users.add(user2);
  final int offset=0;
  final int pageSize=10;
  expect(userRepository.getCountByUsernameOrEmail(searchTerm)).andReturn(users.size());
  expect(userRepository.findByUsernameOrEmail(searchTerm,offset,pageSize)).andReturn(users);
  replay(userRepository);
  SearchResult<User> result=service.getUsersByFreeTextSearch(searchTerm,offset,pageSize);
  assertEquals(pageSize,result.getPageSize());
  assertEquals(users.size(),result.getResultSet().size());
  assertEquals(user1,result.getResultSet().get(0));
  verify(userRepository);
}

</code></pre>

<pre class="type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getUserByOpenId_valid(){
  final User authUser=new UserImpl(USER_ID,USER_NAME);
  authUser.setOpenId(OPENID_VALID);
  expect(userRepository.getByOpenId(OPENID_VALID)).andReturn(authUser).anyTimes();
  replay(userRepository);
  UserDetails result=service.getUserByOpenId(OPENID_VALID);
  assertThat((User)result,is(sameInstance(authUser)));
  verify(userRepository);
}

</code></pre>

<pre class="type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@After public void tearDown(){
  SecurityContextHolder.clearContext();
}

</code></pre>

<pre class="type-5 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void loadByUsername_valid(){
  final User authUser=new UserImpl(USER_ID,USER_NAME);
  expect(userRepository.getByUsername(USER_NAME)).andReturn(authUser).anyTimes();
  replay(userRepository);
  UserDetails result=service.loadUserByUsername(USER_NAME);
  assertThat((User)result,is(sameInstance(authUser)));
  verify(userRepository);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
