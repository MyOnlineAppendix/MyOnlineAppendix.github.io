<h3><span class=" glyphicon glyphicon-tag"/>&nbspEqualityVerifier</h3><kbd>Verifies whether objects/variable are equal to an expected value </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.accumulo.cluster.standalone.StandaloneClusterControlTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPaths(){
  String accumuloHome="/usr/lib/accumulo", accumuloConfDir="/etc/accumulo/conf", accumuloServerConfDir="/etc/accumulo/conf/server";
  StandaloneClusterControl control=new StandaloneClusterControl("accumulo",accumuloHome,accumuloConfDir,accumuloServerConfDir);
  assertEquals(accumuloHome,control.accumuloHome);
  assertEquals(accumuloConfDir,control.clientAccumuloConfDir);
  assertEquals(accumuloHome + "/bin/accumulo",control.accumuloPath);
  assertEquals(accumuloHome + "/bin/start-server.sh",control.startServerPath);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.cli.ClientOnDefaultTableTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonDefaultTable(){
  client.parseArgs("program",new String[]{"--table","other"});
  assertEquals("other",client.getTableName());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultTable(){
  assertEquals("test",client.getTableName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.cli.TestClientOpts </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrincipalWithSasl() throws IOException {
  ClientOpts args=new ClientOpts();
  File clientConfFile=tmpDir.newFile();
  JCommander jc=new JCommander();
  jc.addObject(args);
  jc.parse("--config-file",clientConfFile.getCanonicalPath(),"--sasl","-i","instance_name");
  ClientConfiguration clientConf=args.getClientConfiguration();
  assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSasl(){
  ClientOpts args=new ClientOpts();
  JCommander jc=new JCommander();
  jc.addObject(args);
  jc.parse("--sasl");
  assertEquals(true,args.saslEnabled);
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  BatchWriterConfig cfg=new BatchWriterConfig();
  ClientOpts args=new ClientOpts();
  BatchWriterOpts bwOpts=new BatchWriterOpts();
  BatchScannerOpts bsOpts=new BatchScannerOpts();
  try {
    assertNull(args.getPrincipal());
    fail("Expected to receive exception fetching non-existent principal");
  }
 catch (  AccumuloSecurityException e) {
  }
  assertNull(args.getSecurePassword());
  assertNull(args.getToken());
  assertEquals(Long.valueOf(cfg.getMaxLatency(TimeUnit.MILLISECONDS)),bwOpts.batchLatency);
  assertEquals(Long.valueOf(cfg.getTimeout(TimeUnit.MILLISECONDS)),bwOpts.batchTimeout);
  assertEquals(Long.valueOf(cfg.getMaxMemory()),bwOpts.batchMemory);
  assertFalse(args.debug);
  assertFalse(args.trace);
  assertEquals(10,bsOpts.scanThreads.intValue());
  assertEquals(null,args.instance);
  assertEquals(Authorizations.EMPTY,args.auths);
  assertEquals("localhost:2181",args.zookeepers);
  assertFalse(args.help);
  JCommander jc=new JCommander();
  jc.addObject(args);
  jc.addObject(bwOpts);
  jc.addObject(bsOpts);
  jc.parse("-u","bar","-p","foo","--batchLatency","3s","--batchTimeout","2s","--batchMemory","1M","--debug","--trace","--scanThreads","7","-i","instance","--auths","G1,G2,G3","-z","zoohost1,zoohost2","--help");
  assertEquals("bar",args.getPrincipal());
  assertNull(args.getSecurePassword());
  assertEquals(new PasswordToken("foo"),args.getToken());
  assertEquals(Long.valueOf(3000),bwOpts.batchLatency);
  assertEquals(Long.valueOf(2000),bwOpts.batchTimeout);
  assertEquals(Long.valueOf(1024 * 1024),bwOpts.batchMemory);
  assertTrue(args.debug);
  assertTrue(args.trace);
  assertEquals(7,bsOpts.scanThreads.intValue());
  assertEquals("instance",args.instance);
  assertEquals(new Authorizations("G1","G2","G3"),args.auths);
  assertEquals("zoohost1,zoohost2",args.zookeepers);
  assertTrue(args.help);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyTokenProperties(){
  ClientOpts args=new ClientOpts();
  JCommander jc=new JCommander();
  jc.addObject(args);
  jc.parse("-tc",EmptyToken.class.getName());
  assertEquals(new EmptyToken(),args.getToken());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSaslWithClientConfig() throws IOException {
  ClientOpts args=new ClientOpts();
  File clientConfFile=tmpDir.newFile();
  FileWriter writer=new FileWriter(clientConfFile);
  try {
    writer.write(String.format("%s=%s\n",ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),"true"));
  }
  finally {
    writer.close();
  }
  JCommander jc=new JCommander();
  jc.addObject(args);
  jc.parse("--config-file",clientConfFile.getCanonicalPath());
  args.updateKerberosCredentials();
  assertEquals(KerberosToken.CLASS_NAME,args.getTokenClassName());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSsl(){
  ClientOpts args=new ClientOpts();
  JCommander jc=new JCommander();
  jc.addObject(args);
  jc.parse("--ssl");
  assertEquals(true,args.sslEnabled);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.cli.TestHelp </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInvalidArgs(){
  String[] args={"foo"};
  HelpStub help=new HelpStub();
  try {
    help.parseArgs("program",args);
  }
 catch (  RuntimeException e) {
    assertEquals("1",e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.BatchWriterConfigTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialize() throws IOException {
  final BatchWriterConfig bwDefaults=new BatchWriterConfig();
  assertNotEquals(7654321l,bwDefaults.getMaxLatency(TimeUnit.MILLISECONDS));
  assertNotEquals(9898989l,bwDefaults.getTimeout(TimeUnit.MILLISECONDS));
  assertNotEquals(42,bwDefaults.getMaxWriteThreads());
  assertNotEquals(1123581321l,bwDefaults.getMaxMemory());
  assertNotEquals(Durability.FLUSH,bwDefaults.getDurability());
  BatchWriterConfig bwConfig=new BatchWriterConfig();
  bwConfig.setMaxLatency(7654321l,TimeUnit.MILLISECONDS);
  bwConfig.setTimeout(9898989l,TimeUnit.MILLISECONDS);
  bwConfig.setMaxWriteThreads(42);
  bwConfig.setMaxMemory(1123581321l);
  bwConfig.setDurability(Durability.FLUSH);
  byte[] bytes=createBytes(bwConfig);
  checkBytes(bwConfig,bytes);
  bwConfig=new BatchWriterConfig();
  bwConfig.setMaxWriteThreads(42);
  bytes=createBytes(bwConfig);
  assertEquals("     i#maxWriteThreads=42",new String(bytes,UTF_8));
  checkBytes(bwConfig,bytes);
  bwConfig=new BatchWriterConfig();
  bwConfig.setMaxWriteThreads(24);
  bwConfig.setTimeout(3,TimeUnit.SECONDS);
  bytes=createBytes(bwConfig);
  assertEquals("     v#maxWriteThreads=24,timeout=3000",new String(bytes,UTF_8));
  checkBytes(bwConfig,bytes);
  bwConfig=new BatchWriterConfig();
  bwConfig.setDurability(Durability.LOG);
  bytes=createBytes(bwConfig);
  assertEquals("     e#durability=LOG",new String(bytes,UTF_8));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultEquality(){
  BatchWriterConfig cfg1=new BatchWriterConfig(), cfg2=new BatchWriterConfig();
  assertEquals(cfg1,cfg2);
  assertEquals(cfg1.hashCode(),cfg2.hashCode());
  cfg2.setMaxMemory(1);
  assertNotEquals(cfg1,cfg2);
  cfg2=new BatchWriterConfig();
  cfg2.setDurability(Durability.FLUSH);
  assertNotEquals(cfg1,cfg2);
  assertNotEquals(cfg1.hashCode(),cfg2.hashCode());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOverridingDefaults(){
  BatchWriterConfig bwConfig=new BatchWriterConfig();
  bwConfig.setMaxMemory(1123581321l);
  bwConfig.setMaxLatency(22,TimeUnit.HOURS);
  bwConfig.setTimeout(33,TimeUnit.DAYS);
  bwConfig.setMaxWriteThreads(42);
  bwConfig.setDurability(Durability.NONE);
  assertEquals(1123581321l,bwConfig.getMaxMemory());
  assertEquals(22 * 60 * 60* 1000l,bwConfig.getMaxLatency(TimeUnit.MILLISECONDS));
  assertEquals(33 * 24 * 60* 60* 1000l,bwConfig.getTimeout(TimeUnit.MILLISECONDS));
  assertEquals(42,bwConfig.getMaxWriteThreads());
  assertEquals(Durability.NONE,bwConfig.getDurability());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTinyTimeConversions(){
  BatchWriterConfig bwConfig=new BatchWriterConfig();
  bwConfig.setMaxLatency(999,TimeUnit.MICROSECONDS);
  bwConfig.setTimeout(999,TimeUnit.MICROSECONDS);
  assertEquals(1000,bwConfig.getMaxLatency(TimeUnit.MICROSECONDS));
  assertEquals(1000,bwConfig.getTimeout(TimeUnit.MICROSECONDS));
  assertEquals(1,bwConfig.getMaxLatency(TimeUnit.MILLISECONDS));
  assertEquals(1,bwConfig.getTimeout(TimeUnit.MILLISECONDS));
  bwConfig.setMaxLatency(10,TimeUnit.NANOSECONDS);
  bwConfig.setTimeout(10,TimeUnit.NANOSECONDS);
  assertEquals(1000000,bwConfig.getMaxLatency(TimeUnit.NANOSECONDS));
  assertEquals(1000000,bwConfig.getTimeout(TimeUnit.NANOSECONDS));
  assertEquals(1,bwConfig.getMaxLatency(TimeUnit.MILLISECONDS));
  assertEquals(1,bwConfig.getTimeout(TimeUnit.MILLISECONDS));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReasonableDefaults(){
  long expectedMaxMemory=50 * 1024 * 1024l;
  long expectedMaxLatency=120000l;
  long expectedTimeout=Long.MAX_VALUE;
  int expectedMaxWriteThreads=3;
  Durability expectedDurability=Durability.DEFAULT;
  BatchWriterConfig defaults=new BatchWriterConfig();
  assertEquals(expectedMaxMemory,defaults.getMaxMemory());
  assertEquals(expectedMaxLatency,defaults.getMaxLatency(TimeUnit.MILLISECONDS));
  assertEquals(expectedTimeout,defaults.getTimeout(TimeUnit.MILLISECONDS));
  assertEquals(expectedMaxWriteThreads,defaults.getMaxWriteThreads());
  assertEquals(expectedDurability,defaults.getDurability());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testZeroValues(){
  BatchWriterConfig bwConfig=new BatchWriterConfig();
  bwConfig.setMaxLatency(0,TimeUnit.MILLISECONDS);
  bwConfig.setTimeout(0,TimeUnit.MILLISECONDS);
  bwConfig.setMaxMemory(0);
  assertEquals(Long.MAX_VALUE,bwConfig.getMaxLatency(TimeUnit.MILLISECONDS));
  assertEquals(Long.MAX_VALUE,bwConfig.getTimeout(TimeUnit.MILLISECONDS));
  assertEquals(0,bwConfig.getMaxMemory());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testManualEquality(){
  BatchWriterConfig cfg1=new BatchWriterConfig(), cfg2=new BatchWriterConfig();
  cfg1.setMaxLatency(10,TimeUnit.SECONDS);
  cfg2.setMaxLatency(10000,TimeUnit.MILLISECONDS);
  cfg1.setMaxMemory(100);
  cfg2.setMaxMemory(100);
  cfg1.setTimeout(10,TimeUnit.SECONDS);
  cfg2.setTimeout(10000,TimeUnit.MILLISECONDS);
  assertEquals(cfg1,cfg2);
  assertEquals(cfg1.hashCode(),cfg2.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.ClientConfigurationTest </h4><pre class="type-11 type-5 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfPath() throws IOException {
  File target=new File(System.getProperty("user.dir"),"target");
  assertTrue("'target' build directory does not exist",target.exists());
  File testDir=new File(target,getClass().getName());
  if (!testDir.exists()) {
    assertTrue("Failed to create test dir " + testDir,testDir.mkdirs());
  }
  File clientConf=new File(testDir,"client.conf");
  if (!clientConf.exists()) {
    assertTrue("Failed to create file " + clientConf,clientConf.createNewFile());
  }
  assertEquals(clientConf.toString(),ClientConfiguration.getClientConfPath(testDir.toString()));
  assertEquals(clientConf.toString(),ClientConfiguration.getClientConfPath(clientConf.toString()));
  final File missing=new File("foobarbaz12332112");
  assertEquals(missing.toString(),ClientConfiguration.getClientConfPath(missing.toString()));
  assertNull(ClientConfiguration.getClientConfPath(null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.IteratorSettingTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquivalentConstructor(){
  IteratorSetting setting1=new IteratorSetting(100,Combiner.class);
  IteratorSetting setting2=new IteratorSetting(100,"Combiner",Combiner.class,new HashMap<String,String>());
  assertEquals(setting1,setting2);
  IteratorSetting notEqual1=new IteratorSetting(100,"FooCombiner",Combiner.class,new HashMap<String,String>());
  assertNotEquals(setting1,notEqual1);
  Map<String,String> props=new HashMap<String,String>();
  props.put("foo","bar");
  IteratorSetting notEquals2=new IteratorSetting(100,"Combiner",Combiner.class,props);
  assertNotEquals(setting1,notEquals2);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public final void testEqualsNullSetting(){
  assertNotEquals(setting1,nullsetting);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public final void testEqualsObjectReflexive(){
  assertEquals(setting1,setting1);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public final void testEqualsObjectNotEqual(){
  assertNotEquals(setting1,devnull);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public final void testEqualsObjectTransitive(){
  assertEquals(setting1,setting2);
  assertEquals(setting2,setting3);
  assertEquals(setting1,setting3);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public final void testEqualsObjectProperties(){
  IteratorSetting mysettings=new IteratorSetting(500,"combiner",Combiner.class.getName());
  assertEquals(setting1,mysettings);
  mysettings.addOption("myoption1","myvalue1");
  assertNotEquals(setting1,mysettings);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public final void testEqualsObjectSymmetric(){
  assertEquals(setting1,setting2);
  assertEquals(setting2,setting1);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public final void testHashCodeSameObject(){
  assertEquals(setting1.hashCode(),setting1.hashCode());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public final void testHashCodeEqualObjects(){
  assertEquals(setting1.hashCode(),setting2.hashCode());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public final void testEqualsDifferentMembers(){
  assertNotEquals(setting1,setting4);
  assertNotEquals(setting1,setting5);
  assertNotEquals(setting1,setting6);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.RowIteratorTest </h4><pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnreadRow(){
  final RowIterator i=new RowIterator(makeIterator("a b c d","a 1 2 3","b 1 2 3"));
  assertTrue(i.hasNext());
  Iterator<Entry<Key,Value>> firstRow=i.next();
  assertEquals(0,i.getKVCount());
  assertTrue(i.hasNext());
  assertEquals(2,i.getKVCount());
  Iterator<Entry<Key,Value>> nextRow=i.next();
  assertEquals(2,i.getKVCount());
  assertFalse(i.hasNext());
  assertEquals(3,i.getKVCount());
  try {
    firstRow.hasNext();
    fail();
  }
 catch (  IllegalStateException e) {
  }
  try {
    nextRow.next();
    fail();
  }
 catch (  IllegalStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRowIterator(){
  List<List<Entry<Key,Value>>> rows=getRows(makeIterator());
  assertEquals(0,rows.size());
  rows=getRows(makeIterator("a b c d"));
  assertEquals(1,rows.size());
  assertEquals(1,rows.get(0).size());
  rows=getRows(makeIterator("a cf cq1 v","a cf cq2 v","a cf cq3 v","b cf cq1 x"));
  assertEquals(2,rows.size());
  assertEquals(3,rows.get(0).size());
  assertEquals(1,rows.get(1).size());
  RowIterator i=new RowIterator(makeIterator());
  try {
    i.next();
    fail();
  }
 catch (  NoSuchElementException ex) {
  }
  i=new RowIterator(makeIterator("a b c d","a 1 2 3"));
  assertTrue(i.hasNext());
  Iterator<Entry<Key,Value>> row=i.next();
  assertTrue(row.hasNext());
  row.next();
  assertTrue(row.hasNext());
  row.next();
  assertFalse(row.hasNext());
  try {
    row.next();
    fail();
  }
 catch (  NoSuchElementException ex) {
  }
  assertEquals(0,i.getKVCount());
  assertFalse(i.hasNext());
  assertEquals(2,i.getKVCount());
  try {
    i.next();
    fail();
  }
 catch (  NoSuchElementException ex) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.ZooKeeperInstanceTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetInstanceID_Direct(){
  config=createMock(ClientConfiguration.class);
  mockIdConstruction(config);
  replay(config);
  zki=new ZooKeeperInstance(config,zcf);
  expect(zc.get(Constants.ZROOT + "/" + IID_STRING)).andReturn("yup".getBytes());
  replay(zc);
  assertEquals(IID_STRING,zki.getInstanceID());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleGetters(){
  assertEquals("instance",zki.getInstanceName());
  assertEquals("zk1",zki.getZooKeepers());
  assertEquals(30000,zki.getZooKeepersSessionTimeOut());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAllZooKeepersAreUsed(){
  final String zookeepers="zk1,zk2,zk3", instanceName="accumulo";
  ZooCacheFactory factory=createMock(ZooCacheFactory.class);
  EasyMock.reset(zc);
  expect(factory.getZooCache(zookeepers,30000)).andReturn(zc).anyTimes();
  expect(zc.get(Constants.ZROOT + Constants.ZINSTANCES + "/"+ instanceName)).andReturn(IID_STRING.getBytes(UTF_8));
  expect(zc.get(Constants.ZROOT + "/" + IID_STRING)).andReturn("yup".getBytes());
  replay(zc,factory);
  ClientConfiguration cfg=ClientConfiguration.loadDefault().withInstance(instanceName).withZkHosts(zookeepers);
  ZooKeeperInstance zki=new ZooKeeperInstance(cfg,factory);
  assertEquals(zookeepers,zki.getZooKeepers());
  assertEquals(instanceName,zki.getInstanceName());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetInstanceID_FromCache(){
  expect(zc.get(Constants.ZROOT + Constants.ZINSTANCES + "/instance")).andReturn(IID_STRING.getBytes(UTF_8));
  expect(zc.get(Constants.ZROOT + "/" + IID_STRING)).andReturn("yup".getBytes());
  replay(zc);
  assertEquals(IID_STRING,zki.getInstanceID());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetInstanceName(){
  config=createMock(ClientConfiguration.class);
  mockIdConstruction(config);
  replay(config);
  zki=new ZooKeeperInstance(config,zcf);
  expect(zc.get(Constants.ZROOT + "/" + IID_STRING)).andReturn("yup".getBytes());
  List<String> children=new java.util.ArrayList<String>();
  children.add("child1");
  children.add("child2");
  expect(zc.getChildren(Constants.ZROOT + Constants.ZINSTANCES)).andReturn(children);
  expect(zc.get(Constants.ZROOT + Constants.ZINSTANCES + "/child1")).andReturn(UUID.randomUUID().toString().getBytes(UTF_8));
  expect(zc.get(Constants.ZROOT + Constants.ZINSTANCES + "/child2")).andReturn(IID_STRING.getBytes(UTF_8));
  replay(zc);
  assertEquals("child2",zki.getInstanceName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.admin.DelegationTokenConfigTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoTimeout(){
  DelegationTokenConfig config=new DelegationTokenConfig();
  config.setTokenLifetime(0,TimeUnit.MILLISECONDS);
  assertEquals(0,config.getTokenLifetime(TimeUnit.MILLISECONDS));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimeUnit(){
  DelegationTokenConfig config1=new DelegationTokenConfig(), config2=new DelegationTokenConfig();
  config1.setTokenLifetime(1000,TimeUnit.MILLISECONDS);
  config2.setTokenLifetime(1,TimeUnit.SECONDS);
  assertEquals(config1.getTokenLifetime(TimeUnit.MILLISECONDS),config2.getTokenLifetime(TimeUnit.MILLISECONDS));
  assertEquals(config1,config2);
  assertEquals(config1.hashCode(),config2.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.ClientContextTest </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void defaultValueForSensitiveProperty(){
  if (!isCredentialProviderAvailable) {
    return;
  }
  ClientConfiguration clientConf=new ClientConfiguration();
  AccumuloConfiguration accClientConf=ClientContext.convertClientConfig(clientConf);
  Assert.assertEquals(Property.INSTANCE_SECRET.getDefaultValue(),accClientConf.get(Property.INSTANCE_SECRET));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void loadSensitivePropertyFromCredentialProvider(){
  if (!isCredentialProviderAvailable) {
    return;
  }
  String absPath=getKeyStoreUrl(keystore);
  ClientConfiguration clientConf=new ClientConfiguration();
  clientConf.addProperty(Property.GENERAL_SECURITY_CREDENTIAL_PROVIDER_PATHS.getKey(),absPath);
  AccumuloConfiguration accClientConf=ClientContext.convertClientConfig(clientConf);
  Assert.assertEquals("mysecret",accClientConf.get(Property.INSTANCE_SECRET));
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sensitivePropertiesIncludedInProperties(){
  if (!isCredentialProviderAvailable) {
    return;
  }
  String absPath=getKeyStoreUrl(keystore);
  ClientConfiguration clientConf=new ClientConfiguration();
  clientConf.addProperty(Property.GENERAL_SECURITY_CREDENTIAL_PROVIDER_PATHS.getKey(),absPath);
  AccumuloConfiguration accClientConf=ClientContext.convertClientConfig(clientConf);
  Map<String,String> props=new HashMap<String,String>();
  Predicate<String> all=Predicates.alwaysTrue();
  accClientConf.getProperties(props,all);
  Assert.assertEquals(Property.GENERAL_RPC_TIMEOUT.getDefaultValue(),props.get(Property.GENERAL_RPC_TIMEOUT.getKey()));
  Assert.assertFalse(props.containsKey("ignored.property"));
  Assert.assertEquals("mysecret",props.get(Property.INSTANCE_SECRET.getKey()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.DelegationTokenConfigSerializerTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test(){
  DelegationTokenConfig cfg=new DelegationTokenConfig();
  cfg.setTokenLifetime(8323,TimeUnit.HOURS);
  TDelegationTokenConfig tCfg=DelegationTokenConfigSerializer.serialize(cfg);
  assertEquals(tCfg.getLifetime(),cfg.getTokenLifetime(TimeUnit.MILLISECONDS));
  assertEquals(cfg,DelegationTokenConfigSerializer.deserialize(tCfg));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.ScannerImplTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testValidReadaheadValues(){
  Scanner s=new ScannerImpl(context,"foo",Authorizations.EMPTY);
  s.setReadaheadThreshold(0);
  s.setReadaheadThreshold(10);
  s.setReadaheadThreshold(Long.MAX_VALUE);
  Assert.assertEquals(Long.MAX_VALUE,s.getReadaheadThreshold());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAuthorizations(){
  Authorizations expected=new Authorizations("a,b");
  Scanner s=new ScannerImpl(context,"foo",expected);
  assertEquals(expected,s.getAuthorizations());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.ScannerOptionsTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFetchColumn(){
  ScannerOptions options=new ScannerOptions();
  assertEquals(0,options.getFetchedColumns().size());
  IteratorSetting.Column col=new IteratorSetting.Column(new Text("family"),new Text("qualifier"));
  options.fetchColumn(col);
  SortedSet<Column> fetchedColumns=options.getFetchedColumns();
  assertEquals(1,fetchedColumns.size());
  Column fetchCol=fetchedColumns.iterator().next();
  assertEquals(col.getColumnFamily(),new Text(fetchCol.getColumnFamily()));
  assertEquals(col.getColumnQualifier(),new Text(fetchCol.getColumnQualifier()));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test that you properly add and remove iterators from a scanner
 */
@Test public void testAddRemoveIterator() throws Throwable {
  ScannerOptions options=new ScannerOptions();
  options.addScanIterator(new IteratorSetting(1,"NAME",WholeRowIterator.class));
  assertEquals(1,options.serverSideIteratorList.size());
  options.removeScanIterator("NAME");
  assertEquals(0,options.serverSideIteratorList.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.TableOperationsHelperTest </h4><pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAttachIterator() throws Exception {
  TableOperationsHelper t=getHelper();
  Map<String,String> empty=Collections.emptyMap();
  t.attachIterator("table",new IteratorSetting(10,"someName","foo.bar",empty),EnumSet.of(IteratorScope.scan));
  check(t,"table",new String[]{"table.iterator.scan.someName=10,foo.bar"});
  t.removeIterator("table","someName",EnumSet.of(IteratorScope.scan));
  check(t,"table",new String[]{});
  IteratorSetting setting=new IteratorSetting(10,"someName","foo.bar");
  setting.addOptions(Collections.singletonMap("key","value"));
  t.attachIterator("table",setting,EnumSet.of(IteratorScope.majc));
  setting=new IteratorSetting(10,"someName","foo.bar");
  t.attachIterator("table",setting,EnumSet.of(IteratorScope.scan));
  check(t,"table",new String[]{"table.iterator.majc.someName=10,foo.bar","table.iterator.majc.someName.opt.key=value","table.iterator.scan.someName=10,foo.bar"});
  t.removeIterator("table","someName",EnumSet.of(IteratorScope.scan));
  setting=new IteratorSetting(20,"otherName","some.classname");
  setting.addOptions(Collections.singletonMap("key","value"));
  t.attachIterator("table",setting,EnumSet.of(IteratorScope.majc));
  setting=new IteratorSetting(20,"otherName","some.classname");
  t.attachIterator("table",setting,EnumSet.of(IteratorScope.scan));
  Map<String,EnumSet<IteratorScope>> two=t.listIterators("table");
  Assert.assertEquals(2,two.size());
  Assert.assertTrue(two.containsKey("otherName"));
  Assert.assertTrue(two.get("otherName").size() == 2);
  Assert.assertTrue(two.get("otherName").contains(IteratorScope.majc));
  Assert.assertTrue(two.get("otherName").contains(IteratorScope.scan));
  Assert.assertTrue(two.containsKey("someName"));
  Assert.assertTrue(two.get("someName").size() == 1);
  Assert.assertTrue(two.get("someName").contains(IteratorScope.majc));
  t.removeIterator("table","someName",EnumSet.allOf(IteratorScope.class));
  check(t,"table",new String[]{"table.iterator.majc.otherName=20,some.classname","table.iterator.majc.otherName.opt.key=value","table.iterator.scan.otherName=20,some.classname"});
  setting=t.getIteratorSetting("table","otherName",IteratorScope.scan);
  Assert.assertEquals(20,setting.getPriority());
  Assert.assertEquals("some.classname",setting.getIteratorClass());
  Assert.assertTrue(setting.getOptions().isEmpty());
  setting=t.getIteratorSetting("table","otherName",IteratorScope.majc);
  Assert.assertEquals(20,setting.getPriority());
  Assert.assertEquals("some.classname",setting.getIteratorClass());
  Assert.assertFalse(setting.getOptions().isEmpty());
  Assert.assertEquals(Collections.singletonMap("key","value"),setting.getOptions());
  t.attachIterator("table",setting,EnumSet.of(IteratorScope.minc));
  check(t,"table",new String[]{"table.iterator.majc.otherName=20,some.classname","table.iterator.majc.otherName.opt.key=value","table.iterator.minc.otherName=20,some.classname","table.iterator.minc.otherName.opt.key=value","table.iterator.scan.otherName=20,some.classname"});
  try {
    t.attachIterator("table",setting);
    Assert.fail();
  }
 catch (  AccumuloException e) {
  }
  setting.setName("thirdName");
  try {
    t.attachIterator("table",setting);
    Assert.fail();
  }
 catch (  AccumuloException e) {
  }
  setting.setPriority(10);
  t.setProperty("table","table.iterator.minc.thirdName.opt.key","value");
  try {
    t.attachIterator("table",setting);
    Assert.fail();
  }
 catch (  AccumuloException e) {
  }
  t.removeProperty("table","table.iterator.minc.thirdName.opt.key");
  t.attachIterator("table",setting);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.TabletServerBatchReaderTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAuthorizations(){
  Authorizations expected=new Authorizations("a,b");
  BatchScanner s=new TabletServerBatchReader(context,"foo",expected,1);
  assertEquals(expected,s.getAuthorizations());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.ThriftTransportKeyTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConnectionCaching() throws IOException, InterruptedException {
  UserGroupInformation user1=UserGroupInformation.createUserForTesting("user1",new String[0]);
  final KerberosToken token=EasyMock.createMock(KerberosToken.class);
  final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
  final String primary="accumulo";
  clientConf.withSasl(true,primary);
  SaslConnectionParams saslParams1=user1.doAs(new PrivilegedExceptionAction<SaslConnectionParams>(){
    @Override public SaslConnectionParams run() throws Exception {
      return new SaslConnectionParams(clientConf,token);
    }
  }
);
  SaslConnectionParams saslParams2=user1.doAs(new PrivilegedExceptionAction<SaslConnectionParams>(){
    @Override public SaslConnectionParams run() throws Exception {
      return new SaslConnectionParams(clientConf,token);
    }
  }
);
  ThriftTransportKey ttk1=new ThriftTransportKey(HostAndPort.fromParts("localhost",9997),1l,null,saslParams1), ttk2=new ThriftTransportKey(HostAndPort.fromParts("localhost",9997),1l,null,saslParams2);
  assertEquals(ttk1,ttk2);
  assertEquals(ttk1.hashCode(),ttk2.hashCode());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSaslPrincipalIsSignificant() throws IOException, InterruptedException {
  UserGroupInformation user1=UserGroupInformation.createUserForTesting("user1",new String[0]);
  final KerberosToken token=EasyMock.createMock(KerberosToken.class);
  SaslConnectionParams saslParams1=user1.doAs(new PrivilegedExceptionAction<SaslConnectionParams>(){
    @Override public SaslConnectionParams run() throws Exception {
      final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      final String primary="accumulo";
      clientConf.withSasl(true,primary);
      assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
      return new SaslConnectionParams(clientConf,token);
    }
  }
);
  UserGroupInformation user2=UserGroupInformation.createUserForTesting("user2",new String[0]);
  SaslConnectionParams saslParams2=user2.doAs(new PrivilegedExceptionAction<SaslConnectionParams>(){
    @Override public SaslConnectionParams run() throws Exception {
      final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      final String primary="accumulo";
      clientConf.withSasl(true,primary);
      assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
      return new SaslConnectionParams(clientConf,token);
    }
  }
);
  ThriftTransportKey ttk1=new ThriftTransportKey(HostAndPort.fromParts("localhost",9997),1l,null,saslParams1), ttk2=new ThriftTransportKey(HostAndPort.fromParts("localhost",9997),1l,null,saslParams2);
  assertNotEquals(ttk1,ttk2);
  assertNotEquals(ttk1.hashCode(),ttk2.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.lexicoder.impl.ByteUtilsTest </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSplit() throws Exception {
  byte[][] result;
  result=ByteUtils.split(empty);
  Assert.assertEquals(1,result.length);
  Assert.assertArrayEquals(empty,result[0]);
  result=ByteUtils.split(noSplits);
  Assert.assertEquals(1,result.length);
  Assert.assertArrayEquals(noSplits,result[0]);
  result=ByteUtils.split(splitAt5);
  Assert.assertEquals(2,result.length);
  Assert.assertArrayEquals("1234".getBytes(),result[0]);
  Assert.assertArrayEquals("56789".getBytes(),result[1]);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapred.AccumuloFileOutputFormatTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void validateConfiguration() throws IOException, InterruptedException {
  int a=7;
  long b=300l;
  long c=50l;
  long d=10l;
  String e="snappy";
  SamplerConfiguration samplerConfig=new SamplerConfiguration(RowSampler.class.getName());
  samplerConfig.addOption("hasher","murmur3_32");
  samplerConfig.addOption("modulus","109");
  JobConf job=new JobConf();
  AccumuloFileOutputFormat.setReplication(job,a);
  AccumuloFileOutputFormat.setFileBlockSize(job,b);
  AccumuloFileOutputFormat.setDataBlockSize(job,c);
  AccumuloFileOutputFormat.setIndexBlockSize(job,d);
  AccumuloFileOutputFormat.setCompressionType(job,e);
  AccumuloFileOutputFormat.setSampler(job,samplerConfig);
  AccumuloConfiguration acuconf=FileOutputConfigurator.getAccumuloConfiguration(AccumuloFileOutputFormat.class,job);
  assertEquals(7,acuconf.getCount(Property.TABLE_FILE_REPLICATION));
  assertEquals(300l,acuconf.getMemoryInBytes(Property.TABLE_FILE_BLOCK_SIZE));
  assertEquals(50l,acuconf.getMemoryInBytes(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE));
  assertEquals(10l,acuconf.getMemoryInBytes(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE_INDEX));
  assertEquals("snappy",acuconf.get(Property.TABLE_FILE_COMPRESSION_TYPE));
  assertEquals(new SamplerConfigurationImpl(samplerConfig),SamplerConfigurationImpl.newSamplerConfig(acuconf));
  a=17;
  b=1300l;
  c=150l;
  d=110l;
  e="lzo";
  samplerConfig=new SamplerConfiguration(RowSampler.class.getName());
  samplerConfig.addOption("hasher","md5");
  samplerConfig.addOption("modulus","100003");
  job=new JobConf();
  AccumuloFileOutputFormat.setReplication(job,a);
  AccumuloFileOutputFormat.setFileBlockSize(job,b);
  AccumuloFileOutputFormat.setDataBlockSize(job,c);
  AccumuloFileOutputFormat.setIndexBlockSize(job,d);
  AccumuloFileOutputFormat.setCompressionType(job,e);
  AccumuloFileOutputFormat.setSampler(job,samplerConfig);
  acuconf=FileOutputConfigurator.getAccumuloConfiguration(AccumuloFileOutputFormat.class,job);
  assertEquals(17,acuconf.getCount(Property.TABLE_FILE_REPLICATION));
  assertEquals(1300l,acuconf.getMemoryInBytes(Property.TABLE_FILE_BLOCK_SIZE));
  assertEquals(150l,acuconf.getMemoryInBytes(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE));
  assertEquals(110l,acuconf.getMemoryInBytes(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE_INDEX));
  assertEquals("lzo",acuconf.get(Property.TABLE_FILE_COMPRESSION_TYPE));
  assertEquals(new SamplerConfigurationImpl(samplerConfig),SamplerConfigurationImpl.newSamplerConfig(acuconf));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapred.AccumuloInputFormatTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddIterator() throws IOException {
  AccumuloInputFormat.addIterator(job,new IteratorSetting(1,"WholeRow",WholeRowIterator.class));
  AccumuloInputFormat.addIterator(job,new IteratorSetting(2,"Versions","org.apache.accumulo.core.iterators.VersioningIterator"));
  IteratorSetting iter=new IteratorSetting(3,"Count","org.apache.accumulo.core.iterators.CountingIterator");
  iter.addOption("v1","1");
  iter.addOption("junk","\0omg:!\\xyzzy");
  AccumuloInputFormat.addIterator(job,iter);
  List<IteratorSetting> list=AccumuloInputFormat.getIterators(job);
  assertTrue(list.size() == 3);
  IteratorSetting setting=list.get(0);
  assertEquals(1,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.user.WholeRowIterator",setting.getIteratorClass());
  assertEquals("WholeRow",setting.getName());
  assertEquals(0,setting.getOptions().size());
  setting=list.get(1);
  assertEquals(2,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.VersioningIterator",setting.getIteratorClass());
  assertEquals("Versions",setting.getName());
  assertEquals(0,setting.getOptions().size());
  setting=list.get(2);
  assertEquals(3,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.CountingIterator",setting.getIteratorClass());
  assertEquals("Count",setting.getName());
  assertEquals(2,setting.getOptions().size());
  assertEquals("1",setting.getOptions().get("v1"));
  assertEquals("\0omg:!\\xyzzy",setting.getOptions().get("junk"));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Check that the iterator configuration is getting stored in the Job conf correctly.
 */
@Test public void testSetIterator() throws IOException {
  IteratorSetting is=new IteratorSetting(1,"WholeRow","org.apache.accumulo.core.iterators.WholeRowIterator");
  AccumuloInputFormat.addIterator(job,is);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  is.write(new DataOutputStream(baos));
  String iterators=job.get("AccumuloInputFormat.ScanOpts.Iterators");
  assertEquals(Base64.encodeBase64String(baos.toByteArray()),iterators);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test adding iterator options where the keys and values contain both the FIELD_SEPARATOR character (':') and ITERATOR_SEPARATOR (',') characters. There
 * should be no exceptions thrown when trying to parse these types of option entries.
 * This test makes sure that the expected raw values, as appears in the Job, are equal to what's expected.
 */
@Test public void testIteratorOptionEncoding() throws Throwable {
  String key="colon:delimited:key";
  String value="comma,delimited,value";
  IteratorSetting someSetting=new IteratorSetting(1,"iterator","Iterator.class");
  someSetting.addOption(key,value);
  AccumuloInputFormat.addIterator(job,someSetting);
  List<IteratorSetting> list=AccumuloInputFormat.getIterators(job);
  assertEquals(1,list.size());
  assertEquals(1,list.get(0).getOptions().size());
  assertEquals(list.get(0).getOptions().get(key),value);
  someSetting.addOption(key + "2",value);
  someSetting.setPriority(2);
  someSetting.setName("it2");
  AccumuloInputFormat.addIterator(job,someSetting);
  list=AccumuloInputFormat.getIterators(job);
  assertEquals(2,list.size());
  assertEquals(1,list.get(0).getOptions().size());
  assertEquals(list.get(0).getOptions().get(key),value);
  assertEquals(2,list.get(1).getOptions().size());
  assertEquals(list.get(1).getOptions().get(key),value);
  assertEquals(list.get(1).getOptions().get(key + "2"),value);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test getting iterator settings for multiple iterators set
 */
@Test public void testGetIteratorSettings() throws IOException {
  AccumuloInputFormat.addIterator(job,new IteratorSetting(1,"WholeRow","org.apache.accumulo.core.iterators.WholeRowIterator"));
  AccumuloInputFormat.addIterator(job,new IteratorSetting(2,"Versions","org.apache.accumulo.core.iterators.VersioningIterator"));
  AccumuloInputFormat.addIterator(job,new IteratorSetting(3,"Count","org.apache.accumulo.core.iterators.CountingIterator"));
  List<IteratorSetting> list=AccumuloInputFormat.getIterators(job);
  assertTrue(list.size() == 3);
  IteratorSetting setting=list.get(0);
  assertEquals(1,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.WholeRowIterator",setting.getIteratorClass());
  assertEquals("WholeRow",setting.getName());
  setting=list.get(1);
  assertEquals(2,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.VersioningIterator",setting.getIteratorClass());
  assertEquals("Versions",setting.getName());
  setting=list.get(2);
  assertEquals(3,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.CountingIterator",setting.getIteratorClass());
  assertEquals("Count",setting.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapred.AccumuloMultiTableInputFormatTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Verify {@link org.apache.accumulo.core.client.mapreduce.InputTableConfig} objects get correctly serialized in the JobContext.
 */
@Test public void testTableQueryConfigSerialization() throws IOException {
  String table1Name=testName.getMethodName() + "1";
  String table2Name=testName.getMethodName() + "2";
  JobConf job=new JobConf();
  InputTableConfig table1=new InputTableConfig().setRanges(Collections.singletonList(new Range("a","b"))).fetchColumns(Collections.singleton(new Pair<Text,Text>(new Text("CF1"),new Text("CQ1")))).setIterators(Collections.singletonList(new IteratorSetting(50,"iter1","iterclass1")));
  InputTableConfig table2=new InputTableConfig().setRanges(Collections.singletonList(new Range("a","b"))).fetchColumns(Collections.singleton(new Pair<Text,Text>(new Text("CF1"),new Text("CQ1")))).setIterators(Collections.singletonList(new IteratorSetting(50,"iter1","iterclass1")));
  Map<String,InputTableConfig> configMap=new HashMap<String,InputTableConfig>();
  configMap.put(table1Name,table1);
  configMap.put(table2Name,table2);
  AccumuloMultiTableInputFormat.setInputTableConfigs(job,configMap);
  assertEquals(table1,AccumuloMultiTableInputFormat.getInputTableConfig(job,table1Name));
  assertEquals(table2,AccumuloMultiTableInputFormat.getInputTableConfig(job,table2Name));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapred.AccumuloOutputFormatTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBWSettings() throws IOException {
  JobConf job=new JobConf();
  final BatchWriterConfig bwDefaults=new BatchWriterConfig();
  assertNotEquals(7654321l,bwDefaults.getMaxLatency(TimeUnit.MILLISECONDS));
  assertNotEquals(9898989l,bwDefaults.getTimeout(TimeUnit.MILLISECONDS));
  assertNotEquals(42,bwDefaults.getMaxWriteThreads());
  assertNotEquals(1123581321l,bwDefaults.getMaxMemory());
  final BatchWriterConfig bwConfig=new BatchWriterConfig();
  bwConfig.setMaxLatency(7654321l,TimeUnit.MILLISECONDS);
  bwConfig.setTimeout(9898989l,TimeUnit.MILLISECONDS);
  bwConfig.setMaxWriteThreads(42);
  bwConfig.setMaxMemory(1123581321l);
  AccumuloOutputFormat.setBatchWriterOptions(job,bwConfig);
  AccumuloOutputFormat myAOF=new AccumuloOutputFormat(){
    @Override public void checkOutputSpecs(    FileSystem ignored,    JobConf job) throws IOException {
      BatchWriterConfig bwOpts=getBatchWriterOptions(job);
      assertEquals(bwConfig.getMaxLatency(TimeUnit.MILLISECONDS),bwOpts.getMaxLatency(TimeUnit.MILLISECONDS));
      assertEquals(bwConfig.getTimeout(TimeUnit.MILLISECONDS),bwOpts.getTimeout(TimeUnit.MILLISECONDS));
      assertEquals(bwConfig.getMaxWriteThreads(),bwOpts.getMaxWriteThreads());
      assertEquals(bwConfig.getMaxMemory(),bwOpts.getMaxMemory());
      assertEquals(7654321l,bwOpts.getMaxLatency(TimeUnit.MILLISECONDS));
      assertEquals(9898989l,bwOpts.getTimeout(TimeUnit.MILLISECONDS));
      assertEquals(42,bwOpts.getMaxWriteThreads());
      assertEquals(1123581321l,bwOpts.getMaxMemory());
    }
  }
;
  myAOF.checkOutputSpecs(null,job);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapred.RangeInputSplitTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleWritable() throws IOException {
  RangeInputSplit split=new RangeInputSplit("table","1",new Range(new Key("a"),new Key("b")),new String[]{"localhost"});
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  split.write(dos);
  RangeInputSplit newSplit=new RangeInputSplit();
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream dis=new DataInputStream(bais);
  newSplit.readFields(dis);
  Assert.assertEquals(split.getRange(),newSplit.getRange());
  Assert.assertTrue(Arrays.equals(split.getLocations(),newSplit.getLocations()));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAllFieldsWritable() throws IOException {
  RangeInputSplit split=new RangeInputSplit("table","1",new Range(new Key("a"),new Key("b")),new String[]{"localhost"});
  Set<Pair<Text,Text>> fetchedColumns=new HashSet<Pair<Text,Text>>();
  fetchedColumns.add(new Pair<Text,Text>(new Text("colf1"),new Text("colq1")));
  fetchedColumns.add(new Pair<Text,Text>(new Text("colf2"),new Text("colq2")));
  ArrayList<IteratorSetting> iterators=new ArrayList<IteratorSetting>();
  IteratorSetting setting=new IteratorSetting(50,SummingCombiner.class);
  setting.addOption("foo","bar");
  iterators.add(setting);
  setting=new IteratorSetting(100,WholeRowIterator.class);
  setting.addOption("bar","foo");
  iterators.add(setting);
  split.setAuths(new Authorizations("foo"));
  split.setOffline(true);
  split.setIsolatedScan(true);
  split.setUsesLocalIterators(true);
  split.setFetchedColumns(fetchedColumns);
  split.setToken(new PasswordToken("password"));
  split.setPrincipal("root");
  split.setInstanceName("instance");
  DeprecationUtil.setMockInstance(split,true);
  split.setZooKeepers("localhost");
  split.setIterators(iterators);
  split.setLogLevel(Level.WARN);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  split.write(dos);
  RangeInputSplit newSplit=new RangeInputSplit();
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream dis=new DataInputStream(bais);
  newSplit.readFields(dis);
  Assert.assertEquals(split.getRange(),newSplit.getRange());
  Assert.assertArrayEquals(split.getLocations(),newSplit.getLocations());
  Assert.assertEquals(split.getAuths(),newSplit.getAuths());
  Assert.assertEquals(split.isOffline(),newSplit.isOffline());
  Assert.assertEquals(split.isIsolatedScan(),newSplit.isOffline());
  Assert.assertEquals(split.usesLocalIterators(),newSplit.usesLocalIterators());
  Assert.assertEquals(split.getFetchedColumns(),newSplit.getFetchedColumns());
  Assert.assertEquals(split.getToken(),newSplit.getToken());
  Assert.assertEquals(split.getPrincipal(),newSplit.getPrincipal());
  Assert.assertEquals(split.getInstanceName(),newSplit.getInstanceName());
  Assert.assertEquals(DeprecationUtil.isMockInstanceSet(split),DeprecationUtil.isMockInstanceSet(newSplit));
  Assert.assertEquals(split.getZooKeepers(),newSplit.getZooKeepers());
  Assert.assertEquals(split.getIterators(),newSplit.getIterators());
  Assert.assertEquals(split.getLogLevel(),newSplit.getLogLevel());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapreduce.AccumuloFileOutputFormatTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void validateConfiguration() throws IOException, InterruptedException {
  int a=7;
  long b=300l;
  long c=50l;
  long d=10l;
  String e="snappy";
  SamplerConfiguration samplerConfig=new SamplerConfiguration(RowSampler.class.getName());
  samplerConfig.addOption("hasher","murmur3_32");
  samplerConfig.addOption("modulus","109");
  Job job1=Job.getInstance();
  AccumuloFileOutputFormat.setReplication(job1,a);
  AccumuloFileOutputFormat.setFileBlockSize(job1,b);
  AccumuloFileOutputFormat.setDataBlockSize(job1,c);
  AccumuloFileOutputFormat.setIndexBlockSize(job1,d);
  AccumuloFileOutputFormat.setCompressionType(job1,e);
  AccumuloFileOutputFormat.setSampler(job1,samplerConfig);
  AccumuloConfiguration acuconf=FileOutputConfigurator.getAccumuloConfiguration(AccumuloFileOutputFormat.class,job1.getConfiguration());
  assertEquals(7,acuconf.getCount(Property.TABLE_FILE_REPLICATION));
  assertEquals(300l,acuconf.getMemoryInBytes(Property.TABLE_FILE_BLOCK_SIZE));
  assertEquals(50l,acuconf.getMemoryInBytes(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE));
  assertEquals(10l,acuconf.getMemoryInBytes(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE_INDEX));
  assertEquals("snappy",acuconf.get(Property.TABLE_FILE_COMPRESSION_TYPE));
  assertEquals(new SamplerConfigurationImpl(samplerConfig),SamplerConfigurationImpl.newSamplerConfig(acuconf));
  a=17;
  b=1300l;
  c=150l;
  d=110l;
  e="lzo";
  samplerConfig=new SamplerConfiguration(RowSampler.class.getName());
  samplerConfig.addOption("hasher","md5");
  samplerConfig.addOption("modulus","100003");
  Job job2=Job.getInstance();
  AccumuloFileOutputFormat.setReplication(job2,a);
  AccumuloFileOutputFormat.setFileBlockSize(job2,b);
  AccumuloFileOutputFormat.setDataBlockSize(job2,c);
  AccumuloFileOutputFormat.setIndexBlockSize(job2,d);
  AccumuloFileOutputFormat.setCompressionType(job2,e);
  AccumuloFileOutputFormat.setSampler(job2,samplerConfig);
  acuconf=FileOutputConfigurator.getAccumuloConfiguration(AccumuloFileOutputFormat.class,job2.getConfiguration());
  assertEquals(17,acuconf.getCount(Property.TABLE_FILE_REPLICATION));
  assertEquals(1300l,acuconf.getMemoryInBytes(Property.TABLE_FILE_BLOCK_SIZE));
  assertEquals(150l,acuconf.getMemoryInBytes(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE));
  assertEquals(110l,acuconf.getMemoryInBytes(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE_INDEX));
  assertEquals("lzo",acuconf.get(Property.TABLE_FILE_COMPRESSION_TYPE));
  assertEquals(new SamplerConfigurationImpl(samplerConfig),SamplerConfigurationImpl.newSamplerConfig(acuconf));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapreduce.AccumuloInputFormatTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Check that the iterator configuration is getting stored in the Job conf correctly.
 */
@Test public void testSetIterator() throws IOException {
  Job job=Job.getInstance();
  IteratorSetting is=new IteratorSetting(1,"WholeRow","org.apache.accumulo.core.iterators.WholeRowIterator");
  AccumuloInputFormat.addIterator(job,is);
  Configuration conf=job.getConfiguration();
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  is.write(new DataOutputStream(baos));
  String iterators=conf.get("AccumuloInputFormat.ScanOpts.Iterators");
  assertEquals(Base64.encodeBase64String(baos.toByteArray()),iterators);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddIterator() throws IOException {
  Job job=Job.getInstance();
  AccumuloInputFormat.addIterator(job,new IteratorSetting(1,"WholeRow",WholeRowIterator.class));
  AccumuloInputFormat.addIterator(job,new IteratorSetting(2,"Versions","org.apache.accumulo.core.iterators.VersioningIterator"));
  IteratorSetting iter=new IteratorSetting(3,"Count","org.apache.accumulo.core.iterators.CountingIterator");
  iter.addOption("v1","1");
  iter.addOption("junk","\0omg:!\\xyzzy");
  AccumuloInputFormat.addIterator(job,iter);
  List<IteratorSetting> list=AccumuloInputFormat.getIterators(job);
  assertTrue(list.size() == 3);
  IteratorSetting setting=list.get(0);
  assertEquals(1,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.user.WholeRowIterator",setting.getIteratorClass());
  assertEquals("WholeRow",setting.getName());
  assertEquals(0,setting.getOptions().size());
  setting=list.get(1);
  assertEquals(2,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.VersioningIterator",setting.getIteratorClass());
  assertEquals("Versions",setting.getName());
  assertEquals(0,setting.getOptions().size());
  setting=list.get(2);
  assertEquals(3,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.CountingIterator",setting.getIteratorClass());
  assertEquals("Count",setting.getName());
  assertEquals(2,setting.getOptions().size());
  assertEquals("1",setting.getOptions().get("v1"));
  assertEquals("\0omg:!\\xyzzy",setting.getOptions().get("junk"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test getting iterator settings for multiple iterators set
 */
@Test public void testGetIteratorSettings() throws IOException {
  Job job=Job.getInstance();
  AccumuloInputFormat.addIterator(job,new IteratorSetting(1,"WholeRow","org.apache.accumulo.core.iterators.WholeRowIterator"));
  AccumuloInputFormat.addIterator(job,new IteratorSetting(2,"Versions","org.apache.accumulo.core.iterators.VersioningIterator"));
  AccumuloInputFormat.addIterator(job,new IteratorSetting(3,"Count","org.apache.accumulo.core.iterators.CountingIterator"));
  List<IteratorSetting> list=AccumuloInputFormat.getIterators(job);
  assertTrue(list.size() == 3);
  IteratorSetting setting=list.get(0);
  assertEquals(1,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.WholeRowIterator",setting.getIteratorClass());
  assertEquals("WholeRow",setting.getName());
  setting=list.get(1);
  assertEquals(2,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.VersioningIterator",setting.getIteratorClass());
  assertEquals("Versions",setting.getName());
  setting=list.get(2);
  assertEquals(3,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.CountingIterator",setting.getIteratorClass());
  assertEquals("Count",setting.getName());
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyColumnFamily() throws IOException {
  Job job=Job.getInstance();
  Set<Pair<Text,Text>> cols=new HashSet<Pair<Text,Text>>();
  cols.add(new Pair<Text,Text>(new Text(""),null));
  cols.add(new Pair<Text,Text>(new Text("foo"),new Text("bar")));
  cols.add(new Pair<Text,Text>(new Text(""),new Text("bar")));
  cols.add(new Pair<Text,Text>(new Text(""),new Text("")));
  cols.add(new Pair<Text,Text>(new Text("foo"),new Text("")));
  AccumuloInputFormat.fetchColumns(job,cols);
  Set<Pair<Text,Text>> setCols=AccumuloInputFormat.getFetchedColumns(job);
  assertEquals(cols,setCols);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test adding iterator options where the keys and values contain both the FIELD_SEPARATOR character (':') and ITERATOR_SEPARATOR (',') characters. There
 * should be no exceptions thrown when trying to parse these types of option entries.
 * This test makes sure that the expected raw values, as appears in the Job, are equal to what's expected.
 */
@Test public void testIteratorOptionEncoding() throws Throwable {
  String key="colon:delimited:key";
  String value="comma,delimited,value";
  IteratorSetting someSetting=new IteratorSetting(1,"iterator","Iterator.class");
  someSetting.addOption(key,value);
  Job job=Job.getInstance();
  AccumuloInputFormat.addIterator(job,someSetting);
  List<IteratorSetting> list=AccumuloInputFormat.getIterators(job);
  assertEquals(1,list.size());
  assertEquals(1,list.get(0).getOptions().size());
  assertEquals(list.get(0).getOptions().get(key),value);
  someSetting.addOption(key + "2",value);
  someSetting.setPriority(2);
  someSetting.setName("it2");
  AccumuloInputFormat.addIterator(job,someSetting);
  list=AccumuloInputFormat.getIterators(job);
  assertEquals(2,list.size());
  assertEquals(1,list.get(0).getOptions().size());
  assertEquals(list.get(0).getOptions().get(key),value);
  assertEquals(2,list.get(1).getOptions().size());
  assertEquals(list.get(1).getOptions().get(key),value);
  assertEquals(list.get(1).getOptions().get(key + "2"),value);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapreduce.AccumuloMultiTableInputFormatTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Verify {@link InputTableConfig} objects get correctly serialized in the JobContext.
 */
@Test public void testInputTableConfigSerialization() throws IOException {
  String table1=testName.getMethodName() + "1";
  String table2=testName.getMethodName() + "2";
  Job job=Job.getInstance();
  InputTableConfig tableConfig=new InputTableConfig().setRanges(Collections.singletonList(new Range("a","b"))).fetchColumns(Collections.singleton(new Pair<Text,Text>(new Text("CF1"),new Text("CQ1")))).setIterators(Collections.singletonList(new IteratorSetting(50,"iter1","iterclass1")));
  Map<String,InputTableConfig> configMap=new HashMap<String,InputTableConfig>();
  configMap.put(table1,tableConfig);
  configMap.put(table2,tableConfig);
  AccumuloMultiTableInputFormat.setInputTableConfigs(job,configMap);
  assertEquals(tableConfig,AccumuloMultiTableInputFormat.getInputTableConfig(job,table1));
  assertEquals(tableConfig,AccumuloMultiTableInputFormat.getInputTableConfig(job,table2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapreduce.AccumuloOutputFormatTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBWSettings() throws IOException {
  Job job=Job.getInstance();
  final BatchWriterConfig bwDefaults=new BatchWriterConfig();
  assertNotEquals(7654321l,bwDefaults.getMaxLatency(TimeUnit.MILLISECONDS));
  assertNotEquals(9898989l,bwDefaults.getTimeout(TimeUnit.MILLISECONDS));
  assertNotEquals(42,bwDefaults.getMaxWriteThreads());
  assertNotEquals(1123581321l,bwDefaults.getMaxMemory());
  final BatchWriterConfig bwConfig=new BatchWriterConfig();
  bwConfig.setMaxLatency(7654321l,TimeUnit.MILLISECONDS);
  bwConfig.setTimeout(9898989l,TimeUnit.MILLISECONDS);
  bwConfig.setMaxWriteThreads(42);
  bwConfig.setMaxMemory(1123581321l);
  AccumuloOutputFormat.setBatchWriterOptions(job,bwConfig);
  AccumuloOutputFormat myAOF=new AccumuloOutputFormat(){
    @Override public void checkOutputSpecs(    JobContext job) throws IOException {
      BatchWriterConfig bwOpts=getBatchWriterOptions(job);
      assertEquals(bwConfig.getMaxLatency(TimeUnit.MILLISECONDS),bwOpts.getMaxLatency(TimeUnit.MILLISECONDS));
      assertEquals(bwConfig.getTimeout(TimeUnit.MILLISECONDS),bwOpts.getTimeout(TimeUnit.MILLISECONDS));
      assertEquals(bwConfig.getMaxWriteThreads(),bwOpts.getMaxWriteThreads());
      assertEquals(bwConfig.getMaxMemory(),bwOpts.getMaxMemory());
      assertEquals(7654321l,bwOpts.getMaxLatency(TimeUnit.MILLISECONDS));
      assertEquals(9898989l,bwOpts.getTimeout(TimeUnit.MILLISECONDS));
      assertEquals(42,bwOpts.getMaxWriteThreads());
      assertEquals(1123581321l,bwOpts.getMaxMemory());
    }
  }
;
  myAOF.checkOutputSpecs(job);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapreduce.InputTableConfigTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialization_ranges() throws IOException {
  List<Range> ranges=new ArrayList<Range>();
  ranges.add(new Range("a","b"));
  ranges.add(new Range("c","d"));
  tableQueryConfig.setRanges(ranges);
  byte[] serialized=serialize(tableQueryConfig);
  InputTableConfig actualConfig=deserialize(serialized);
  assertEquals(ranges,actualConfig.getRanges());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialization_columns() throws IOException {
  Set<Pair<Text,Text>> columns=new HashSet<Pair<Text,Text>>();
  columns.add(new Pair<Text,Text>(new Text("cf1"),new Text("cq1")));
  columns.add(new Pair<Text,Text>(new Text("cf2"),null));
  tableQueryConfig.fetchColumns(columns);
  byte[] serialized=serialize(tableQueryConfig);
  InputTableConfig actualConfig=deserialize(serialized);
  assertEquals(actualConfig.getFetchedColumns(),columns);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialization_iterators() throws IOException {
  List<IteratorSetting> settings=new ArrayList<IteratorSetting>();
  settings.add(new IteratorSetting(50,"iter","iterclass"));
  settings.add(new IteratorSetting(55,"iter2","iterclass2"));
  tableQueryConfig.setIterators(settings);
  byte[] serialized=serialize(tableQueryConfig);
  InputTableConfig actualConfig=deserialize(serialized);
  assertEquals(actualConfig.getIterators(),settings);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialization_allBooleans() throws IOException {
  tableQueryConfig.setAutoAdjustRanges(false);
  tableQueryConfig.setOfflineScan(true);
  tableQueryConfig.setUseIsolatedScanners(true);
  tableQueryConfig.setUseLocalIterators(true);
  byte[] serialized=serialize(tableQueryConfig);
  InputTableConfig actualConfig=deserialize(serialized);
  assertEquals(tableQueryConfig,actualConfig);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialization_OnlyTable() throws IOException {
  byte[] serialized=serialize(tableQueryConfig);
  InputTableConfig actualConfig=deserialize(serialized);
  assertEquals(tableQueryConfig,actualConfig);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapreduce.RangeInputSplitTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAllFieldsWritable() throws IOException {
  RangeInputSplit split=new RangeInputSplit("table","1",new Range(new Key("a"),new Key("b")),new String[]{"localhost"});
  Set<Pair<Text,Text>> fetchedColumns=new HashSet<Pair<Text,Text>>();
  fetchedColumns.add(new Pair<Text,Text>(new Text("colf1"),new Text("colq1")));
  fetchedColumns.add(new Pair<Text,Text>(new Text("colf2"),new Text("colq2")));
  ArrayList<IteratorSetting> iterators=new ArrayList<IteratorSetting>();
  IteratorSetting setting=new IteratorSetting(50,SummingCombiner.class);
  setting.addOption("foo","bar");
  iterators.add(setting);
  setting=new IteratorSetting(100,WholeRowIterator.class);
  setting.addOption("bar","foo");
  iterators.add(setting);
  split.setTableName("table");
  split.setAuths(new Authorizations("foo"));
  split.setOffline(true);
  split.setIsolatedScan(true);
  split.setUsesLocalIterators(true);
  split.setFetchedColumns(fetchedColumns);
  split.setToken(new PasswordToken("password"));
  split.setPrincipal("root");
  split.setInstanceName("instance");
  DeprecationUtil.setMockInstance(split,true);
  split.setZooKeepers("localhost");
  split.setIterators(iterators);
  split.setLogLevel(Level.WARN);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  split.write(dos);
  RangeInputSplit newSplit=new RangeInputSplit();
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream dis=new DataInputStream(bais);
  newSplit.readFields(dis);
  Assert.assertEquals(split.getRange(),newSplit.getRange());
  Assert.assertArrayEquals(split.getLocations(),newSplit.getLocations());
  Assert.assertEquals(split.getTableName(),newSplit.getTableName());
  Assert.assertEquals(split.getAuths(),newSplit.getAuths());
  Assert.assertEquals(split.isOffline(),newSplit.isOffline());
  Assert.assertEquals(split.isIsolatedScan(),newSplit.isOffline());
  Assert.assertEquals(split.usesLocalIterators(),newSplit.usesLocalIterators());
  Assert.assertEquals(split.getFetchedColumns(),newSplit.getFetchedColumns());
  Assert.assertEquals(split.getToken(),newSplit.getToken());
  Assert.assertEquals(split.getPrincipal(),newSplit.getPrincipal());
  Assert.assertEquals(split.getInstanceName(),newSplit.getInstanceName());
  Assert.assertEquals(DeprecationUtil.isMockInstanceSet(split),DeprecationUtil.isMockInstanceSet(newSplit));
  Assert.assertEquals(split.getZooKeepers(),newSplit.getZooKeepers());
  Assert.assertEquals(split.getIterators(),newSplit.getIterators());
  Assert.assertEquals(split.getLogLevel(),newSplit.getLogLevel());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleWritable() throws IOException {
  RangeInputSplit split=new RangeInputSplit("table","1",new Range(new Key("a"),new Key("b")),new String[]{"localhost"});
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  split.write(dos);
  RangeInputSplit newSplit=new RangeInputSplit();
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream dis=new DataInputStream(bais);
  newSplit.readFields(dis);
  Assert.assertEquals(split.getTableName(),newSplit.getTableName());
  Assert.assertEquals(split.getTableId(),newSplit.getTableId());
  Assert.assertEquals(split.getRange(),newSplit.getRange());
  Assert.assertTrue(Arrays.equals(split.getLocations(),newSplit.getLocations()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapreduce.impl.BatchInputSplitTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleWritable() throws IOException {
  Range[] ranges=new Range[]{new Range(new Key("a"),new Key("b"))};
  BatchInputSplit split=new BatchInputSplit("table","1",Arrays.asList(ranges),new String[]{"localhost"});
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  split.write(dos);
  BatchInputSplit newSplit=new BatchInputSplit();
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream dis=new DataInputStream(bais);
  newSplit.readFields(dis);
  Assert.assertEquals(split.getTableName(),newSplit.getTableName());
  Assert.assertEquals(split.getTableId(),newSplit.getTableId());
  Assert.assertEquals(split.getRanges(),newSplit.getRanges());
  Assert.assertTrue(Arrays.equals(split.getLocations(),newSplit.getLocations()));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAllFieldsWritable() throws IOException {
  Range[] ranges=new Range[]{new Range(new Key("a"),new Key("b"))};
  BatchInputSplit split=new BatchInputSplit("table","1",Arrays.asList(ranges),new String[]{"localhost"});
  Set<Pair<Text,Text>> fetchedColumns=new HashSet<Pair<Text,Text>>();
  fetchedColumns.add(new Pair<Text,Text>(new Text("colf1"),new Text("colq1")));
  fetchedColumns.add(new Pair<Text,Text>(new Text("colf2"),new Text("colq2")));
  ArrayList<IteratorSetting> iterators=new ArrayList<IteratorSetting>();
  IteratorSetting setting=new IteratorSetting(50,SummingCombiner.class);
  setting.addOption("foo","bar");
  iterators.add(setting);
  setting=new IteratorSetting(100,WholeRowIterator.class);
  setting.addOption("bar","foo");
  iterators.add(setting);
  split.setTableName("table");
  split.setAuths(new Authorizations("foo"));
  split.setFetchedColumns(fetchedColumns);
  split.setToken(new PasswordToken("password"));
  split.setPrincipal("root");
  DeprecationUtil.setMockInstance(split,true);
  split.setInstanceName("instance");
  split.setZooKeepers("localhost");
  split.setIterators(iterators);
  split.setLogLevel(Level.WARN);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  split.write(dos);
  BatchInputSplit newSplit=new BatchInputSplit();
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream dis=new DataInputStream(bais);
  newSplit.readFields(dis);
  Assert.assertEquals(split.getRanges(),newSplit.getRanges());
  Assert.assertArrayEquals(split.getLocations(),newSplit.getLocations());
  Assert.assertEquals(split.getTableName(),newSplit.getTableName());
  Assert.assertEquals(split.getAuths(),newSplit.getAuths());
  Assert.assertEquals(split.getFetchedColumns(),newSplit.getFetchedColumns());
  Assert.assertEquals(split.getToken(),newSplit.getToken());
  Assert.assertEquals(split.getPrincipal(),newSplit.getPrincipal());
  Assert.assertEquals(split.getInstanceName(),newSplit.getInstanceName());
  Assert.assertEquals(DeprecationUtil.isMockInstanceSet(split),DeprecationUtil.isMockInstanceSet(newSplit));
  Assert.assertEquals(split.getZooKeepers(),newSplit.getZooKeepers());
  Assert.assertEquals(split.getIterators(),newSplit.getIterators());
  Assert.assertEquals(split.getLogLevel(),newSplit.getLogLevel());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapreduce.lib.impl.ConfiguratorBaseTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetVisibiltyCacheSize(){
  Configuration conf=new Configuration();
  assertEquals(Constants.DEFAULT_VISIBILITY_CACHE_SIZE,ConfiguratorBase.getVisibilityCacheSize(conf));
  ConfiguratorBase.setVisibilityCacheSize(conf,2000);
  assertEquals(2000,ConfiguratorBase.getVisibilityCacheSize(conf));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetConnectorInfoClassOfQConfigurationStringAuthenticationToken() throws AccumuloSecurityException {
  Configuration conf=new Configuration();
  assertFalse(ConfiguratorBase.isConnectorInfoSet(this.getClass(),conf));
  ConfiguratorBase.setConnectorInfo(this.getClass(),conf,"testUser",new PasswordToken("testPassword"));
  assertTrue(ConfiguratorBase.isConnectorInfoSet(this.getClass(),conf));
  assertEquals("testUser",ConfiguratorBase.getPrincipal(this.getClass(),conf));
  AuthenticationToken token=ConfiguratorBase.getAuthenticationToken(this.getClass(),conf);
  assertEquals(PasswordToken.class,token.getClass());
  assertEquals(new PasswordToken("testPassword"),token);
  assertEquals("inline:" + PasswordToken.class.getName() + ":"+ Base64.encodeBase64String(AuthenticationTokenSerializer.serialize(new PasswordToken("testPassword"))),conf.get(ConfiguratorBase.enumToConfKey(this.getClass(),ConfiguratorBase.ConnectorInfo.TOKEN)));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEnumToConfKey(){
  assertEquals(this.getClass().getSimpleName() + ".PrivateTestingEnum.Something",ConfiguratorBase.enumToConfKey(this.getClass(),PrivateTestingEnum.SOMETHING));
  assertEquals(this.getClass().getSimpleName() + ".PrivateTestingEnum.SomethingElse",ConfiguratorBase.enumToConfKey(this.getClass(),PrivateTestingEnum.SOMETHING_ELSE));
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetConnectorInfoClassOfQConfigurationStringString() throws AccumuloSecurityException {
  Configuration conf=new Configuration();
  assertFalse(ConfiguratorBase.isConnectorInfoSet(this.getClass(),conf));
  ConfiguratorBase.setConnectorInfo(this.getClass(),conf,"testUser","testFile");
  assertTrue(ConfiguratorBase.isConnectorInfoSet(this.getClass(),conf));
  assertEquals("testUser",ConfiguratorBase.getPrincipal(this.getClass(),conf));
  assertEquals("file:testFile",conf.get(ConfiguratorBase.enumToConfKey(this.getClass(),ConfiguratorBase.ConnectorInfo.TOKEN)));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetLogLevel(){
  Configuration conf=new Configuration();
  Level currentLevel=Logger.getLogger(this.getClass()).getLevel();
  ConfiguratorBase.setLogLevel(this.getClass(),conf,Level.DEBUG);
  Logger.getLogger(this.getClass()).setLevel(currentLevel);
  assertEquals(Level.DEBUG,ConfiguratorBase.getLogLevel(this.getClass(),conf));
  ConfiguratorBase.setLogLevel(this.getClass(),conf,Level.INFO);
  Logger.getLogger(this.getClass()).setLevel(currentLevel);
  assertEquals(Level.INFO,ConfiguratorBase.getLogLevel(this.getClass(),conf));
  ConfiguratorBase.setLogLevel(this.getClass(),conf,Level.FATAL);
  Logger.getLogger(this.getClass()).setLevel(currentLevel);
  assertEquals(Level.FATAL,ConfiguratorBase.getLogLevel(this.getClass(),conf));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("deprecation") @Test public void testSetMockInstance(){
  Class<?> mockClass=org.apache.accumulo.core.client.mock.MockInstance.class;
  Configuration conf=new Configuration();
  ConfiguratorBase.setMockInstance(this.getClass(),conf,"testInstanceName");
  assertEquals("testInstanceName",conf.get(ConfiguratorBase.enumToConfKey(this.getClass(),ConfiguratorBase.InstanceOpts.NAME)));
  assertEquals(null,conf.get(ConfiguratorBase.enumToConfKey(this.getClass(),ConfiguratorBase.InstanceOpts.ZOO_KEEPERS)));
  assertEquals(mockClass.getSimpleName(),conf.get(ConfiguratorBase.enumToConfKey(this.getClass(),ConfiguratorBase.InstanceOpts.TYPE)));
  Instance instance=ConfiguratorBase.getInstance(this.getClass(),conf);
  assertEquals(mockClass.getName(),instance.getClass().getName());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetZooKeeperInstance(){
  Configuration conf=new Configuration();
  ConfiguratorBase.setZooKeeperInstance(this.getClass(),conf,new ClientConfiguration().withInstance("testInstanceName").withZkHosts("testZooKeepers").withSsl(true).withZkTimeout(1234));
  ClientConfiguration clientConf=ClientConfiguration.deserialize(conf.get(ConfiguratorBase.enumToConfKey(this.getClass(),ConfiguratorBase.InstanceOpts.CLIENT_CONFIG)));
  assertEquals("testInstanceName",clientConf.get(ClientProperty.INSTANCE_NAME));
  assertEquals("testZooKeepers",clientConf.get(ClientProperty.INSTANCE_ZK_HOST));
  assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SSL_ENABLED));
  assertEquals("1234",clientConf.get(ClientProperty.INSTANCE_ZK_TIMEOUT));
  assertEquals(ZooKeeperInstance.class.getSimpleName(),conf.get(ConfiguratorBase.enumToConfKey(this.getClass(),ConfiguratorBase.InstanceOpts.TYPE)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mock.MockConnectorTest </h4><pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCMod() throws Exception {
  Connector c=new MockConnector("root",new MockInstance());
  c.tableOperations().create("test");
  BatchWriter bw=c.createBatchWriter("test",new BatchWriterConfig());
  for (int i=0; i < 10; i++) {
    Mutation m1=new Mutation("r" + i);
    m1.put("cf1","cq1",1,"v" + i);
    bw.addMutation(m1);
  }
  bw.flush();
  int count=10;
  Scanner scanner=c.createScanner("test",Authorizations.EMPTY);
  for (  Entry<Key,Value> entry : scanner) {
    Key key=entry.getKey();
    Mutation m=new Mutation(key.getRow());
    m.put(key.getColumnFamily().toString(),key.getColumnQualifier().toString(),key.getTimestamp() + 1,"v" + (count));
    count++;
    bw.addMutation(m);
  }
  bw.flush();
  count=10;
  for (  Entry<Key,Value> entry : scanner) {
    assertEquals(entry.getValue().toString(),"v" + (count++));
  }
  assertEquals(count,20);
  try {
    c.tableOperations().create("test_this_$tableName");
    assertTrue(false);
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMockMultiTableBatchWriter() throws Exception {
  Connector c=new MockConnector("root",new MockInstance());
  c.tableOperations().create("a");
  c.tableOperations().create("b");
  MultiTableBatchWriter bw=c.createMultiTableBatchWriter(new BatchWriterConfig());
  Mutation m1=new Mutation("r1");
  m1.put("cf1","cq1",1,"v1");
  BatchWriter b=bw.getBatchWriter("a");
  b.addMutation(m1);
  b.flush();
  b=bw.getBatchWriter("b");
  b.addMutation(m1);
  b.flush();
  Scanner scanner=c.createScanner("a",Authorizations.EMPTY);
  int count=Iterators.size(scanner.iterator());
  assertEquals(1,count);
  scanner=c.createScanner("b",Authorizations.EMPTY);
  count=Iterators.size(scanner.iterator());
  assertEquals(1,count);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUpdate() throws Exception {
  Connector c=new MockConnector("root",new MockInstance());
  c.tableOperations().create("test");
  BatchWriter bw=c.createBatchWriter("test",new BatchWriterConfig());
  for (int i=0; i < 10; i++) {
    Mutation m=new Mutation("r1");
    m.put("cf1","cq1","" + i);
    bw.addMutation(m);
  }
  bw.close();
  Scanner scanner=c.createScanner("test",Authorizations.EMPTY);
  Entry<Key,Value> entry=scanner.iterator().next();
  assertEquals("9",entry.getValue().toString());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMockConnectorReturnsCorrectInstance() throws AccumuloException, AccumuloSecurityException {
  String name="an-interesting-instance-name";
  Instance mockInstance=new MockInstance(name);
  assertEquals(mockInstance,mockInstance.getConnector("foo",new PasswordToken("bar")).getInstance());
  assertEquals(name,mockInstance.getConnector("foo",new PasswordToken("bar")).getInstance().getInstanceName());
}

</code></pre>

<br>
<pre class="type-11 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSunnyDay() throws Exception {
  Connector c=new MockConnector("root",new MockInstance());
  c.tableOperations().create("test");
  BatchWriter bw=c.createBatchWriter("test",new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    int r=random.nextInt();
    Mutation m=new Mutation(asText(r));
    m.put(asText(random.nextInt()),asText(random.nextInt()),new Value(Integer.toHexString(r).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  BatchScanner s=c.createBatchScanner("test",Authorizations.EMPTY,2);
  s.setRanges(Collections.singletonList(new Range()));
  Key key=null;
  int count=0;
  for (  Entry<Key,Value> entry : s) {
    if (key != null)     assertTrue(key.compareTo(entry.getKey()) < 0);
    assertEquals(entry.getKey().getRow(),new Text(entry.getValue().get()));
    key=entry.getKey();
    count++;
  }
  assertEquals(100,count);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelete() throws Exception {
  Connector c=new MockConnector("root",new MockInstance());
  c.tableOperations().create("test");
  BatchWriter bw=c.createBatchWriter("test",new BatchWriterConfig());
  Mutation m1=new Mutation("r1");
  m1.put("cf1","cq1",1,"v1");
  bw.addMutation(m1);
  bw.flush();
  Mutation m2=new Mutation("r1");
  m2.putDelete("cf1","cq1",2);
  bw.addMutation(m2);
  bw.flush();
  Scanner scanner=c.createScanner("test",Authorizations.EMPTY);
  int count=Iterators.size(scanner.iterator());
  assertEquals(0,count);
  try {
    c.tableOperations().create("test_this_$tableName");
    assertTrue(false);
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mock.MockTableOperationsTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTableIdMap() throws Exception {
  TableOperations tops=conn.tableOperations();
  tops.create("foo");
  Assert.assertNotEquals("foo",tops.tableIdMap().get("foo"));
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-14 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImport() throws Throwable {
  ImportTestFilesAndData dataAndFiles=prepareTestFiles();
  TableOperations tableOperations=conn.tableOperations();
  tableOperations.create("a_table");
  tableOperations.importDirectory("a_table",dataAndFiles.importPath.toString(),dataAndFiles.failurePath.toString(),false);
  Scanner scanner=conn.createScanner("a_table",new Authorizations());
  Iterator<Entry<Key,Value>> iterator=scanner.iterator();
  for (int i=0; i < 5; i++) {
    Assert.assertTrue(iterator.hasNext());
    Entry<Key,Value> kv=iterator.next();
    Pair<Key,Value> expected=dataAndFiles.keyVals.get(i);
    Assert.assertEquals(expected.getFirst(),kv.getKey());
    Assert.assertEquals(expected.getSecond(),kv.getValue());
  }
  Assert.assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteRows() throws Exception {
  TableOperations to=conn.tableOperations();
  to.create("test");
  BatchWriter bw=conn.createBatchWriter("test",new BatchWriterConfig());
  for (int r=0; r < 20; r++) {
    Mutation m=new Mutation("" + r);
    for (int c=0; c < 5; c++) {
      m.put(new Text("cf"),new Text("" + c),new Value(("" + c).getBytes()));
    }
    bw.addMutation(m);
  }
  bw.flush();
  to.deleteRows("test",new Text("1"),new Text("2"));
  Scanner s=conn.createScanner("test",Authorizations.EMPTY);
  int oneCnt=0;
  for (  Entry<Key,Value> entry : s) {
    char rowStart=entry.getKey().getRow().toString().charAt(0);
    Assert.assertTrue(rowStart != '2');
    oneCnt+=rowStart == '1' ? 1 : 0;
  }
  Assert.assertEquals(5,oneCnt);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteRowsWithNullKeys() throws Exception {
  TableOperations to=conn.tableOperations();
  to.create("test2");
  BatchWriter bw=conn.createBatchWriter("test2",new BatchWriterConfig());
  for (int r=0; r < 30; r++) {
    Mutation m=new Mutation(Integer.toString(r));
    for (int c=0; c < 5; c++) {
      m.put(new Text("cf"),new Text(Integer.toString(c)),new Value(Integer.toString(c).getBytes()));
    }
    bw.addMutation(m);
  }
  bw.flush();
  to.deleteRows("test2",new Text("30"),null);
  Scanner s=conn.createScanner("test2",Authorizations.EMPTY);
  int rowCnt=0;
  for (  Entry<Key,Value> entry : s) {
    String rowId=entry.getKey().getRow().toString();
    Assert.assertFalse(rowId.startsWith("30"));
    rowCnt++;
  }
  s.close();
  Assert.assertEquals(120,rowCnt);
  to.deleteRows("test2",null,new Text("2"));
  s=conn.createScanner("test2",Authorizations.EMPTY);
  rowCnt=0;
  for (  Entry<Key,Value> entry : s) {
    char rowStart=entry.getKey().getRow().toString().charAt(0);
    Assert.assertTrue(rowStart >= '2');
    rowCnt++;
  }
  s.close();
  Assert.assertEquals(55,rowCnt);
  to.deleteRows("test2",null,null);
  s=conn.createScanner("test2",Authorizations.EMPTY);
  rowCnt=Iterators.size(s.iterator());
  s.close();
  to.delete("test2");
  Assert.assertEquals(0,rowCnt);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mock.TestBatchScanner821 </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  MockInstance inst=new MockInstance();
  Connector conn=inst.getConnector("root",new PasswordToken(""));
  conn.tableOperations().create("test");
  BatchWriter bw=conn.createBatchWriter("test",new BatchWriterConfig());
  for (  String row : "A,B,C,D".split(",")) {
    Mutation m=new Mutation(row);
    m.put("cf","cq","");
    bw.addMutation(m);
  }
  bw.flush();
  BatchScanner bs=conn.createBatchScanner("test",Authorizations.EMPTY,1);
  IteratorSetting cfg=new IteratorSetting(100,TransformIterator.class);
  bs.addScanIterator(cfg);
  bs.setRanges(Collections.singletonList(new Range("A","Z")));
  StringBuilder sb=new StringBuilder();
  String comma="";
  for (  Entry<Key,Value> entry : bs) {
    sb.append(comma);
    sb.append(entry.getKey().getRow());
    comma=",";
  }
  assertEquals("a,b,c,d",sb.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.security.SecurityErrorCodeTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEnumsSame(){
  HashSet<String> secNames1=new HashSet<String>();
  HashSet<String> secNames2=new HashSet<String>();
  for (  SecurityErrorCode sec : SecurityErrorCode.values())   secNames1.add(sec.name());
  for (  org.apache.accumulo.core.client.impl.thrift.SecurityErrorCode sec : org.apache.accumulo.core.client.impl.thrift.SecurityErrorCode.values())   secNames2.add(sec.name());
  Assert.assertEquals(secNames1,secNames2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.security.tokens.CredentialProviderTokenTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPasswordsFromCredentialProvider() throws Exception {
  if (!isCredentialProviderAvailable) {
    return;
  }
  CredentialProviderToken token=new CredentialProviderToken("root.password",keystorePath);
  Assert.assertArrayEquals("password".getBytes(UTF_8),token.getPassword());
  token=new CredentialProviderToken("bob.password",keystorePath);
  Assert.assertArrayEquals("bob".getBytes(UTF_8),token.getPassword());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void cloneReturnsCorrectObject() throws Exception {
  if (!isCredentialProviderAvailable) {
    return;
  }
  CredentialProviderToken token=new CredentialProviderToken("root.password",keystorePath);
  CredentialProviderToken clone=token.clone();
  Assert.assertEquals(token,clone);
  Assert.assertArrayEquals(token.getPassword(),clone.getPassword());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEqualityAfterInit() throws Exception {
  if (!isCredentialProviderAvailable) {
    return;
  }
  CredentialProviderToken token=new CredentialProviderToken("root.password",keystorePath);
  CredentialProviderToken uninitializedToken=new CredentialProviderToken();
  Properties props=new Properties();
  props.put(CredentialProviderToken.NAME_PROPERTY,"root.password");
  props.put(CredentialProviderToken.CREDENTIAL_PROVIDERS_PROPERTY,keystorePath);
  uninitializedToken.init(props);
  Assert.assertArrayEquals(token.getPassword(),uninitializedToken.getPassword());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.security.tokens.DelegationTokenImplTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialization() throws IOException {
  AuthenticationTokenIdentifier identifier=new AuthenticationTokenIdentifier("user",1,1000l,2000l,"instanceid");
  DelegationTokenImpl token=new DelegationTokenImpl(new byte[]{'f','a','k','e'},identifier);
  assertEquals(token,token);
  assertEquals(token.hashCode(),token.hashCode());
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  token.write(new DataOutputStream(baos));
  DelegationTokenImpl copy=new DelegationTokenImpl();
  copy.readFields(new DataInputStream(new ByteArrayInputStream(baos.toByteArray())));
  assertEquals(token,copy);
  assertEquals(token.hashCode(),copy.hashCode());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquality() throws IOException {
  AuthenticationTokenIdentifier identifier=new AuthenticationTokenIdentifier("user",1,1000l,2000l,"instanceid");
  DelegationTokenImpl token=new DelegationTokenImpl(new byte[]{'f','a','k','e'},identifier);
  AuthenticationTokenIdentifier identifier2=new AuthenticationTokenIdentifier("user1",1,1000l,2000l,"instanceid");
  DelegationTokenImpl token2=new DelegationTokenImpl(new byte[]{'f','a','k','e'},identifier2);
  assertNotEquals(token,token2);
  assertNotEquals(token.hashCode(),token2.hashCode());
  DelegationTokenImpl token3=new DelegationTokenImpl(new byte[]{'f','a','k','e','0'},identifier);
  assertNotEquals(token,token3);
  assertNotEquals(token.hashCode(),token3.hashCode());
  assertNotEquals(token2,token3);
  assertNotEquals(token2.hashCode(),token3.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.security.tokens.PasswordTokenTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultiByte() throws DestroyFailedException {
  PasswordToken pt=new PasswordToken();
  AuthenticationToken.Properties props=new AuthenticationToken.Properties();
  props.put("password","");
  pt.init(props);
  props.destroy();
  String s=new String(pt.getPassword(),UTF_8);
  Assert.assertEquals("",s);
  pt=new PasswordToken("");
  s=new String(pt.getPassword(),UTF_8);
  Assert.assertEquals("",s);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.AccumuloConfigurationTest </h4><pre class="type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyByString(){
  AccumuloConfiguration c=AccumuloConfiguration.getDefaultConfiguration();
  boolean found=false;
  for (  Property p : Property.values()) {
    if (p.getType() != PropertyType.PREFIX) {
      found=true;
      assertEquals(c.get(p),c.get(p.getKey()));
      assertEquals(p.getDefaultValue(),c.get(p.getKey()));
    }
  }
  assertTrue("test was a dud, and did nothing",found);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetMemoryInBytes() throws Exception {
  assertEquals(42l,AccumuloConfiguration.getMemoryInBytes("42"));
  assertEquals(42l,AccumuloConfiguration.getMemoryInBytes("42b"));
  assertEquals(42l,AccumuloConfiguration.getMemoryInBytes("42B"));
  assertEquals(42l * 1024l,AccumuloConfiguration.getMemoryInBytes("42K"));
  assertEquals(42l * 1024l,AccumuloConfiguration.getMemoryInBytes("42k"));
  assertEquals(42l * 1024l * 1024l,AccumuloConfiguration.getMemoryInBytes("42M"));
  assertEquals(42l * 1024l * 1024l,AccumuloConfiguration.getMemoryInBytes("42m"));
  assertEquals(42l * 1024l * 1024l* 1024l,AccumuloConfiguration.getMemoryInBytes("42G"));
  assertEquals(42l * 1024l * 1024l* 1024l,AccumuloConfiguration.getMemoryInBytes("42g"));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetTimeInMillis(){
  assertEquals(42L * 24 * 60* 60* 1000,AccumuloConfiguration.getTimeInMillis("42d"));
  assertEquals(42L * 60 * 60* 1000,AccumuloConfiguration.getTimeInMillis("42h"));
  assertEquals(42L * 60 * 1000,AccumuloConfiguration.getTimeInMillis("42m"));
  assertEquals(42L * 1000,AccumuloConfiguration.getTimeInMillis("42s"));
  assertEquals(42L * 1000,AccumuloConfiguration.getTimeInMillis("42"));
  assertEquals(42L,AccumuloConfiguration.getTimeInMillis("42ms"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.CredentialProviderFactoryShimTest </h4><pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonExistentClassesDoesntFail() throws IOException {
  Configuration conf=new Configuration();
  conf.set(CredentialProviderFactoryShim.CREDENTIAL_PROVIDER_PATH,"jceks://file/foo/bar.jceks");
  List<String> keys=CredentialProviderFactoryShim.getKeys(conf);
  Assert.assertNotNull(keys);
  Assert.assertEquals(Collections.emptyList(),keys);
  Assert.assertNull(CredentialProviderFactoryShim.getValueFromCredentialProvider(conf,"key1"));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void existingConfigurationReturned(){
  Configuration conf=new Configuration(false);
  conf.set("foo","bar");
  Configuration conf2=CredentialProviderFactoryShim.getConfiguration(conf,"jceks:///file/accumulo.jceks");
  Assert.assertSame(conf,conf2);
  Assert.assertEquals("bar",conf.get("foo"));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void createKeystoreProvider() throws Exception {
  File targetDir=new File(System.getProperty("user.dir") + "/target");
  File keystoreFile=new File(targetDir,"create.jks");
  if (keystoreFile.exists()) {
    if (!keystoreFile.delete()) {
      log.error("Unable to delete {}",keystoreFile);
    }
  }
  String providerUrl="jceks://file" + keystoreFile.getAbsolutePath();
  Configuration conf=new Configuration();
  conf.set(CredentialProviderFactoryShim.CREDENTIAL_PROVIDER_PATH,providerUrl);
  String alias="foo";
  char[] credential="bar".toCharArray();
  CredentialProviderFactoryShim.createEntry(conf,alias,credential);
  Assert.assertArrayEquals(credential,CredentialProviderFactoryShim.getValueFromCredentialProvider(conf,alias));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfigurationCreation() throws IOException {
  final String path="jceks://file/tmp/foo.jks";
  final Configuration actualConf=CredentialProviderFactoryShim.getConfiguration(path);
  Assert.assertNotNull(actualConf);
  Assert.assertEquals(path,actualConf.get(CredentialProviderFactoryShim.CREDENTIAL_PROVIDER_PATH));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.DefaultConfigurationTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGet(){
  assertEquals(Property.MASTER_CLIENTPORT.getDefaultValue(),c.get(Property.MASTER_CLIENTPORT));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetProperties(){
  Predicate<String> all=Predicates.alwaysTrue();
  Map<String,String> p=new java.util.HashMap<String,String>();
  c.getProperties(p,all);
  assertEquals(Property.MASTER_CLIENTPORT.getDefaultValue(),p.get(Property.MASTER_CLIENTPORT.getKey()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.ObservableConfigurationTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddAndRemove(){
  ConfigurationObserver co2=createMock(ConfigurationObserver.class);
  c.addObserver(co1);
  c.addObserver(co2);
  Collection<ConfigurationObserver> cos=c.getObservers();
  assertEquals(2,cos.size());
  assertTrue(cos.contains(co1));
  assertTrue(cos.contains(co2));
  c.removeObserver(co1);
  cos=c.getObservers();
  assertEquals(1,cos.size());
  assertTrue(cos.contains(co2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.PropertyTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSensitiveKeys(){
  final TreeMap<String,String> extras=new TreeMap<String,String>();
  extras.put("trace.token.property.blah","something");
  AccumuloConfiguration conf=new DefaultConfiguration(){
    @Override public Iterator<Entry<String,String>> iterator(){
      final Iterator<Entry<String,String>> parent=super.iterator();
      final Iterator<Entry<String,String>> mine=extras.entrySet().iterator();
      return new Iterator<Entry<String,String>>(){
        @Override public boolean hasNext(){
          return parent.hasNext() || mine.hasNext();
        }
        @Override public Entry<String,String> next(){
          return parent.hasNext() ? parent.next() : mine.next();
        }
        @Override public void remove(){
          throw new UnsupportedOperationException();
        }
      }
;
    }
  }
;
  TreeSet<String> expected=new TreeSet<String>();
  for (  Entry<String,String> entry : conf) {
    String key=entry.getKey();
    if (key.equals(Property.INSTANCE_SECRET.getKey()) || key.toLowerCase().contains("password") || key.toLowerCase().endsWith("secret")|| key.startsWith(Property.TRACE_TOKEN_PROPERTY_PREFIX.getKey()))     expected.add(key);
  }
  TreeSet<String> actual=new TreeSet<String>();
  for (  Entry<String,String> entry : conf) {
    String key=entry.getKey();
    if (Property.isSensitive(key))     actual.add(key);
  }
  assertEquals(expected,actual);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetDefaultValue_AbsolutePath(){
  assertEquals("",Property.GENERAL_MAVEN_PROJECT_BASEDIR.getDefaultValue());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRawDefaultValues(){
  AccumuloConfiguration conf=AccumuloConfiguration.getDefaultConfiguration();
  assertEquals("${java.io.tmpdir}" + File.separator + "accumulo-vfs-cache-${user.name}",Property.VFS_CLASSLOADER_CACHE_DIR.getRawDefaultValue());
  assertEquals(new File(System.getProperty("java.io.tmpdir"),"accumulo-vfs-cache-" + System.getProperty("user.name")).getAbsolutePath(),conf.get(Property.VFS_CLASSLOADER_CACHE_DIR));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.PropertyTypeTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetFormatDescription(){
  assertEquals("An arbitrary string of characters whose format is unspecified and interpreted based on the context of the property to which it applies.",PropertyType.STRING.getFormatDescription());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToString(){
  assertEquals("string",PropertyType.STRING.toString());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFullCoverage(){
  Iterable<String> types=Iterables.transform(Arrays.asList(PropertyType.values()),new Function<PropertyType,String>(){
    @Override public String apply(    final PropertyType input){
      return input.name();
    }
  }
);
  Iterable<String> typesTested=Iterables.transform(Iterables.filter(Iterables.transform(Arrays.asList(this.getClass().getMethods()),new Function<Method,String>(){
    @Override public String apply(    final Method input){
      return input.getName();
    }
  }
),new Predicate<String>(){
    @Override public boolean apply(    final String input){
      return input.startsWith("testType");
    }
  }
),new Function<String,String>(){
    @Override public String apply(    final String input){
      return input.substring(8);
    }
  }
);
  for (  String t : types) {
    assertTrue(PropertyType.class.getSimpleName() + "." + t+ " does not have a test.",Iterables.contains(typesTested,t));
  }
  assertEquals(Iterables.size(types),Iterables.size(typesTested));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.SiteConfigurationTest </h4><pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnlySensitivePropertiesExtractedFromCredetialProvider() throws SecurityException, NoSuchMethodException {
  if (!isCredentialProviderAvailable) {
    return;
  }
  SiteConfiguration siteCfg=EasyMock.createMockBuilder(SiteConfiguration.class).addMockedMethod("getHadoopConfiguration").withConstructor(AccumuloConfiguration.class).withArgs(DefaultConfiguration.getInstance()).createMock();
  siteCfg.set(Property.INSTANCE_SECRET,"ignored");
  URL keystore=SiteConfigurationTest.class.getResource("/site-cfg.jceks");
  Assert.assertNotNull(keystore);
  String keystorePath=new File(keystore.getFile()).getAbsolutePath();
  Configuration hadoopConf=new Configuration();
  hadoopConf.set(CredentialProviderFactoryShim.CREDENTIAL_PROVIDER_PATH,"jceks://file" + keystorePath);
  EasyMock.expect(siteCfg.getHadoopConfiguration()).andReturn(hadoopConf).once();
  EasyMock.replay(siteCfg);
  Map<String,String> props=new HashMap<String,String>();
  Predicate<String> all=Predicates.alwaysTrue();
  siteCfg.getProperties(props,all);
  Assert.assertEquals("mysecret",props.get(Property.INSTANCE_SECRET.getKey()));
  Assert.assertEquals(null,props.get("ignored.property"));
  Assert.assertEquals(Property.GENERAL_RPC_TIMEOUT.getDefaultValue(),props.get(Property.GENERAL_RPC_TIMEOUT.getKey()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.constraints.DefaultKeySizeConstraintTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstraint(){
  Mutation m=new Mutation("rowId");
  m.put("colf","colq",new Value(new byte[]{}));
  assertEquals(Collections.emptyList(),constraint.check(null,m));
  m=new Mutation(oversized);
  m.put("colf","colq",new Value(new byte[]{}));
  assertEquals(Collections.singletonList(DefaultKeySizeConstraint.MAX__KEY_SIZE_EXCEEDED_VIOLATION),constraint.check(null,m));
  m=new Mutation("rowid");
  m.put(new Text(oversized),new Text("colq"),new Value(new byte[]{}));
  assertEquals(Collections.singletonList(DefaultKeySizeConstraint.MAX__KEY_SIZE_EXCEEDED_VIOLATION),constraint.check(null,m));
  m=new Mutation("rowid");
  m.put(new Text(oversized),new Text("colq"),new Value(new byte[]{}));
  assertEquals(Collections.singletonList(DefaultKeySizeConstraint.MAX__KEY_SIZE_EXCEEDED_VIOLATION),constraint.check(null,m));
  m=new Mutation(large);
  m.put(new Text(large),new Text(large),new Value(new byte[]{}));
  assertEquals(Collections.singletonList(DefaultKeySizeConstraint.MAX__KEY_SIZE_EXCEEDED_VIOLATION),constraint.check(null,m));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.ArrayByteSequenceTest </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFromByteBuffer(){
  ByteBuffer bb=ByteBuffer.wrap(data,1,4);
  abs=new ArrayByteSequence(bb);
  assertEquals("mile",abs.toString());
  bb=bb.asReadOnlyBuffer();
  abs=new ArrayByteSequence(bb);
  assertEquals("mile",abs.toString());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToString(){
  assertEquals("String conversion should round trip correctly","",new ArrayByteSequence("").toString());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSubSequence(){
  assertEquals(0,abs.subSequence(0,0).length());
  assertEquals("mile",abs.subSequence(1,5).toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.ColumnTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testThriftRoundTrip(){
  for (  Column c : col) {
    TColumn tc=c.toThrift();
    assertEquals(c,new Column(tc));
  }
}

</code></pre>

<br>
<pre class="type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEqualsCompare(){
  for (int i=0; i < col.length; i++)   for (int j=0; j < col.length; j++)   assertEquals(col[i].equals(col[j]),col[i].compareTo(col[j]) == 0);
}

</code></pre>

<br>
<pre class="type-13 type-11 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompare(){
  for (int i=0; i < col.length; i++) {
    for (int j=0; j < col.length; j++) {
      if (i == j || (i == 0 && j == 1) || (i == 1 && j == 0))       assertEquals(0,col[i].compareTo(col[j]));
 else       assertNotEquals(0,col[i].compareTo(col[j]));
    }
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWriteReadFields() throws IOException {
  for (  Column c : col) {
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    c.write(new DataOutputStream(baos));
    Column other=new Column();
    other.readFields(new DataInputStream(new ByteArrayInputStream(baos.toByteArray())));
    assertEquals(c,other);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.ConditionTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetValue_ByteSequence(){
  c.setValue(new ArrayByteSequence(VALUE.getBytes(UTF_8)));
  assertEquals(VALUE,toString(c.getValue()));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetValue_CharSequence(){
  c.setValue(VALUE);
  assertEquals(VALUE,toString(c.getValue()));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHashCode(){
  ColumnVisibility cvis=new ColumnVisibility(VISIBILITY);
  c.setVisibility(cvis);
  c.setValue(VALUE);
  c.setTimestamp(1234L);
  c.setIterators(ITERATORS);
  int hc1=c.hashCode();
  Condition c2=new Condition(FAMILY,QUALIFIER);
  c2.setVisibility(cvis);
  c2.setValue(VALUE);
  c2.setTimestamp(1234L);
  c2.setIterators(ITERATORS);
  assertTrue(c.equals(c2));
  assertEquals(hc1,c2.hashCode());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetSetTimestamp(){
  c.setTimestamp(1234L);
  assertEquals(Long.valueOf(1234L),c.getTimestamp());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstruction_Text(){
  c=new Condition(new Text(FAMILY),new Text(QUALIFIER));
  assertEquals(FAMILY,toString(c.getFamily()));
  assertEquals(QUALIFIER,toString(c.getQualifier()));
  assertEquals(EMPTY,c.getVisibility());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstruction_ByteSequence(){
  c=new Condition(new ArrayByteSequence(FAMILY.getBytes(UTF_8)),new ArrayByteSequence(QUALIFIER.getBytes(UTF_8)));
  assertEquals(FAMILY,toString(c.getFamily()));
  assertEquals(QUALIFIER,toString(c.getQualifier()));
  assertEquals(EMPTY,c.getVisibility());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstruction_CharSequence(){
  assertEquals(FAMILY,toString(c.getFamily()));
  assertEquals(QUALIFIER,toString(c.getQualifier()));
  assertEquals(EMPTY,c.getVisibility());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetValue_ByteArray(){
  c.setValue(VALUE.getBytes(UTF_8));
  assertEquals(VALUE,toString(c.getValue()));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetValue_Text(){
  c.setValue(new Text(VALUE));
  assertEquals(VALUE,toString(c.getValue()));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetSetVisibility(){
  ColumnVisibility vis=new ColumnVisibility(VISIBILITY);
  c.setVisibility(vis);
  assertEquals(VISIBILITY,toString(c.getVisibility()));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstruction_ByteArray(){
  c=new Condition(FAMILY.getBytes(UTF_8),QUALIFIER.getBytes(UTF_8));
  assertEquals(FAMILY,toString(c.getFamily()));
  assertEquals(QUALIFIER,toString(c.getQualifier()));
  assertEquals(EMPTY,c.getVisibility());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetSetIterators(){
  c.setIterators(ITERATORS);
  assertArrayEquals(ITERATORS,c.getIterators());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.ConditionalMutationTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHashcode(){
  ConditionalMutation cm2=new ConditionalMutation(ROW,c1,c2);
  assertTrue(cm.equals(cm2));
  assertEquals(cm2.hashCode(),cm.hashCode());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCopyConstructor(){
  ConditionalMutation cm2=new ConditionalMutation(cm);
  assertArrayEquals(cm.getRow(),cm2.getRow());
  assertEquals(cm.getConditions(),cm2.getConditions());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstruction_Text(){
  cm=new ConditionalMutation(new Text(ROW),c1,c2);
  assertArrayEquals(ROW,cm.getRow());
  List<Condition> cs=cm.getConditions();
  assertEquals(2,cs.size());
  assertEquals(c1,cs.get(0));
  assertEquals(c2,cs.get(1));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstruction_CharSequence(){
  cm=new ConditionalMutation(new String(ROW,UTF_8),c1,c2);
  assertArrayEquals(ROW,cm.getRow());
  List<Condition> cs=cm.getConditions();
  assertEquals(2,cs.size());
  assertEquals(c1,cs.get(0));
  assertEquals(c2,cs.get(1));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAddCondition(){
  Condition c3=new Condition(FAMILY,QUALIFIER3);
  cm.addCondition(c3);
  List<Condition> cs=cm.getConditions();
  assertEquals(3,cs.size());
  assertEquals(c1,cs.get(0));
  assertEquals(c2,cs.get(1));
  assertEquals(c3,cs.get(2));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstruction_ByteSequence(){
  cm=new ConditionalMutation(new ArrayByteSequence(ROW),c1,c2);
  assertArrayEquals(ROW,cm.getRow());
  List<Condition> cs=cm.getConditions();
  assertEquals(2,cs.size());
  assertEquals(c1,cs.get(0));
  assertEquals(c2,cs.get(1));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstruction_ByteArray_StartAndLength(){
  cm=new ConditionalMutation(ROW,1,1,c1,c2);
  assertArrayEquals("o".getBytes(UTF_8),cm.getRow());
  List<Condition> cs=cm.getConditions();
  assertEquals(2,cs.size());
  assertEquals(c1,cs.get(0));
  assertEquals(c2,cs.get(1));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstruction_ByteArray(){
  assertArrayEquals(ROW,cm.getRow());
  List<Condition> cs=cm.getConditions();
  assertEquals(2,cs.size());
  assertEquals(c1,cs.get(0));
  assertEquals(c2,cs.get(1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.ConstraintViolationSummaryTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToString(){
  ConstraintViolationSummary cvs=new ConstraintViolationSummary("fooClass",(short)1,"fooDescription",100L);
  assertEquals("ConstraintViolationSummary(constrainClass:fooClass, violationCode:1, violationDescription:fooDescription, numberOfViolatingMutations:100)",cvs.toString());
  cvs=new ConstraintViolationSummary(null,(short)2,null,101L);
  assertEquals("ConstraintViolationSummary(constrainClass:null, violationCode:2, violationDescription:null, numberOfViolatingMutations:101)",cvs.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.KeyExtentTest </h4><pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecodeEncode(){
  assertNull(KeyExtent.decodePrevEndRow(KeyExtent.encodePrevEndRow(null)));
  Text x=new Text();
  assertEquals(x,KeyExtent.decodePrevEndRow(KeyExtent.encodePrevEndRow(x)));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void testKeyExtentsForSimpleRange(){
  Collection<KeyExtent> results;
  results=KeyExtent.getKeyExtentsForRange(null,null,null);
  assertTrue("Non-empty set returned from no extents",results.isEmpty());
  results=KeyExtent.getKeyExtentsForRange(null,null,Collections.<KeyExtent>emptySet());
  assertTrue("Non-empty set returned from no extents",results.isEmpty());
  KeyExtent t=nke("t",null,null);
  results=KeyExtent.getKeyExtentsForRange(null,null,Collections.<KeyExtent>singleton(t));
  assertEquals("Single tablet should always be returned",1,results.size());
  assertEquals(t,results.iterator().next());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecodingMetadataRow(){
  Text flattenedExtent=new Text("foo;bar");
  ke=new KeyExtent(flattenedExtent,(Text)null);
  assertEquals(new Text("bar"),ke.getEndRow());
  assertEquals(new Text("foo"),ke.getTableId());
  assertNull(ke.getPrevEndRow());
  flattenedExtent=new Text("foo<");
  ke=new KeyExtent(flattenedExtent,(Text)null);
  assertNull(ke.getEndRow());
  assertEquals(new Text("foo"),ke.getTableId());
  assertNull(ke.getPrevEndRow());
  flattenedExtent=new Text("foo;bar;");
  ke=new KeyExtent(flattenedExtent,(Text)null);
  assertEquals(new Text("bar;"),ke.getEndRow());
  assertEquals(new Text("foo"),ke.getTableId());
  assertNull(ke.getPrevEndRow());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWriteReadFields() throws Exception {
  ke=nke("t","e","b");
  assertEquals(ke,writeAndReadFields(ke));
  ke=nke("t","e",null);
  assertEquals(ke,writeAndReadFields(ke));
  ke=nke("t",null,"b");
  assertEquals(ke,writeAndReadFields(ke));
  ke=nke("t",null,null);
  assertEquals(ke,writeAndReadFields(ke));
}

</code></pre>

<br>
<pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindContainingExtents(){
  assertNull(KeyExtent.findContainingExtent(nke("t",null,null),set0));
  assertNull(KeyExtent.findContainingExtent(nke("t","1","0"),set0));
  assertNull(KeyExtent.findContainingExtent(nke("t","1",null),set0));
  assertNull(KeyExtent.findContainingExtent(nke("t",null,"0"),set0));
  TreeSet<KeyExtent> set1=new TreeSet<KeyExtent>();
  set1.add(nke("t",null,null));
  assertEquals(nke("t",null,null),KeyExtent.findContainingExtent(nke("t",null,null),set1));
  assertEquals(nke("t",null,null),KeyExtent.findContainingExtent(nke("t","1","0"),set1));
  assertEquals(nke("t",null,null),KeyExtent.findContainingExtent(nke("t","1",null),set1));
  assertEquals(nke("t",null,null),KeyExtent.findContainingExtent(nke("t",null,"0"),set1));
  TreeSet<KeyExtent> set2=new TreeSet<KeyExtent>();
  set2.add(nke("t","g",null));
  set2.add(nke("t",null,"g"));
  assertNull(KeyExtent.findContainingExtent(nke("t",null,null),set2));
  assertEquals(nke("t","g",null),KeyExtent.findContainingExtent(nke("t","c","a"),set2));
  assertEquals(nke("t","g",null),KeyExtent.findContainingExtent(nke("t","c",null),set2));
  assertEquals(nke("t","g",null),KeyExtent.findContainingExtent(nke("t","g","a"),set2));
  assertEquals(nke("t","g",null),KeyExtent.findContainingExtent(nke("t","g",null),set2));
  assertNull(KeyExtent.findContainingExtent(nke("t","h","a"),set2));
  assertNull(KeyExtent.findContainingExtent(nke("t","h",null),set2));
  assertNull(KeyExtent.findContainingExtent(nke("t","z","f"),set2));
  assertNull(KeyExtent.findContainingExtent(nke("t",null,"f"),set2));
  assertEquals(nke("t",null,"g"),KeyExtent.findContainingExtent(nke("t","z","g"),set2));
  assertEquals(nke("t",null,"g"),KeyExtent.findContainingExtent(nke("t",null,"g"),set2));
  assertEquals(nke("t",null,"g"),KeyExtent.findContainingExtent(nke("t","z","h"),set2));
  assertEquals(nke("t",null,"g"),KeyExtent.findContainingExtent(nke("t",null,"h"),set2));
  TreeSet<KeyExtent> set3=new TreeSet<KeyExtent>();
  set3.add(nke("t","g",null));
  set3.add(nke("t","s","g"));
  set3.add(nke("t",null,"s"));
  assertNull(KeyExtent.findContainingExtent(nke("t",null,null),set3));
  assertEquals(nke("t","g",null),KeyExtent.findContainingExtent(nke("t","g",null),set3));
  assertEquals(nke("t","s","g"),KeyExtent.findContainingExtent(nke("t","s","g"),set3));
  assertEquals(nke("t",null,"s"),KeyExtent.findContainingExtent(nke("t",null,"s"),set3));
  assertNull(KeyExtent.findContainingExtent(nke("t","t","g"),set3));
  assertNull(KeyExtent.findContainingExtent(nke("t","t","f"),set3));
  assertNull(KeyExtent.findContainingExtent(nke("t","s","f"),set3));
  assertEquals(nke("t","s","g"),KeyExtent.findContainingExtent(nke("t","r","h"),set3));
  assertEquals(nke("t","s","g"),KeyExtent.findContainingExtent(nke("t","s","h"),set3));
  assertEquals(nke("t","s","g"),KeyExtent.findContainingExtent(nke("t","r","g"),set3));
  assertEquals(nke("t",null,"s"),KeyExtent.findContainingExtent(nke("t",null,"t"),set3));
  assertNull(KeyExtent.findContainingExtent(nke("t",null,"r"),set3));
  assertEquals(nke("t","g",null),KeyExtent.findContainingExtent(nke("t","f",null),set3));
  assertNull(KeyExtent.findContainingExtent(nke("t","h",null),set3));
  TreeSet<KeyExtent> set4=new TreeSet<KeyExtent>();
  set4.add(nke("t1","d",null));
  set4.add(nke("t1","q","d"));
  set4.add(nke("t1",null,"q"));
  set4.add(nke("t2","g",null));
  set4.add(nke("t2","s","g"));
  set4.add(nke("t2",null,"s"));
  assertNull(KeyExtent.findContainingExtent(nke("t",null,null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("z",null,null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("t11",null,null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("t1",null,null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("t2",null,null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("t","g",null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("z","g",null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("t11","g",null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("t1","g",null),set4));
  assertEquals(nke("t2","g",null),KeyExtent.findContainingExtent(nke("t2","g",null),set4));
  assertEquals(nke("t2","s","g"),KeyExtent.findContainingExtent(nke("t2","s","g"),set4));
  assertEquals(nke("t2",null,"s"),KeyExtent.findContainingExtent(nke("t2",null,"s"),set4));
  assertEquals(nke("t1","d",null),KeyExtent.findContainingExtent(nke("t1","d",null),set4));
  assertEquals(nke("t1","q","d"),KeyExtent.findContainingExtent(nke("t1","q","d"),set4));
  assertEquals(nke("t1",null,"q"),KeyExtent.findContainingExtent(nke("t1",null,"q"),set4));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.KeyTest </h4><pre class="type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCopyData(){
  byte row[]="r".getBytes();
  byte cf[]="cf".getBytes();
  byte cq[]="cq".getBytes();
  byte cv[]="cv".getBytes();
  Key k1=new Key(row,cf,cq,cv,5l,false,false);
  Key k2=new Key(row,cf,cq,cv,5l,false,true);
  assertSame(row,k1.getRowBytes());
  assertSame(cf,k1.getColFamily());
  assertSame(cq,k1.getColQualifier());
  assertSame(cv,k1.getColVisibility());
  assertSame(row,k1.getRowData().getBackingArray());
  assertSame(cf,k1.getColumnFamilyData().getBackingArray());
  assertSame(cq,k1.getColumnQualifierData().getBackingArray());
  assertSame(cv,k1.getColumnVisibilityData().getBackingArray());
  assertNotSame(row,k2.getRowBytes());
  assertNotSame(cf,k2.getColFamily());
  assertNotSame(cq,k2.getColQualifier());
  assertNotSame(cv,k2.getColVisibility());
  assertNotSame(row,k2.getRowData().getBackingArray());
  assertNotSame(cf,k2.getColumnFamilyData().getBackingArray());
  assertNotSame(cq,k2.getColumnQualifierData().getBackingArray());
  assertNotSame(cv,k2.getColumnVisibilityData().getBackingArray());
  assertEquals(k1,k2);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testVisibilityFollowingKey(){
  Key k=new Key("r","f","q","v");
  assertEquals(k.followingKey(PartialKey.ROW_COLFAM_COLQUAL_COLVIS).toString(),"r f:q [v%00;] " + Long.MAX_VALUE + " false");
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testThrift(){
  Key k=new Key("r1","cf2","cq2","cv");
  TKey tk=k.toThrift();
  Key k2=new Key(tk);
  assertEquals(k,k2);
}

</code></pre>

<br>
<pre class="type-9 type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompressDecompress(){
  List<KeyValue> kvs=new ArrayList<KeyValue>();
  kvs.add(new KeyValue(new Key(),new byte[]{}));
  kvs.add(new KeyValue(new Key("r"),new byte[]{}));
  kvs.add(new KeyValue(new Key("r","cf"),new byte[]{}));
  kvs.add(new KeyValue(new Key("r2","cf"),new byte[]{}));
  kvs.add(new KeyValue(new Key("r","cf","cq"),new byte[]{}));
  kvs.add(new KeyValue(new Key("r2","cf2","cq"),new byte[]{}));
  kvs.add(new KeyValue(new Key("r","cf","cq","cv"),new byte[]{}));
  kvs.add(new KeyValue(new Key("r2","cf2","cq2","cv"),new byte[]{}));
  kvs.add(new KeyValue(new Key("r2","cf2","cq2","cv"),new byte[]{}));
  kvs.add(new KeyValue(new Key(),new byte[]{}));
  List<TKeyValue> tkvs=Key.compress(kvs);
  Key.decompress(tkvs);
  assertEquals(kvs.size(),tkvs.size());
  Iterator<KeyValue> kvi=kvs.iterator();
  Iterator<TKeyValue> tkvi=tkvs.iterator();
  while (kvi.hasNext()) {
    KeyValue kv=kvi.next();
    TKeyValue tkv=tkvi.next();
    assertEquals(kv.getKey(),new Key(tkv.getKey()));
  }
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testString(){
  Key k1=new Key("r1");
  Key k2=new Key(new Text("r1"));
  assertEquals(k2,k1);
  k1=new Key("r1","cf1");
  k2=new Key(new Text("r1"),new Text("cf1"));
  assertEquals(k2,k1);
  k1=new Key("r1","cf2","cq2");
  k2=new Key(new Text("r1"),new Text("cf2"),new Text("cq2"));
  assertEquals(k2,k1);
  k1=new Key("r1","cf2","cq2","cv");
  k2=new Key(new Text("r1"),new Text("cf2"),new Text("cq2"),new Text("cv"));
  assertEquals(k2,k1);
  k1=new Key("r1","cf2","cq2","cv",89);
  k2=new Key(new Text("r1"),new Text("cf2"),new Text("cq2"),new Text("cv"),89);
  assertEquals(k2,k1);
  k1=new Key("r1","cf2","cq2",89);
  k2=new Key(new Text("r1"),new Text("cf2"),new Text("cq2"),89);
  assertEquals(k2,k1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.MutationTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test for regression on bug 3422. If a {@link Mutation} object is reused for multiple calls to readFields, the mutation would previously be "locked in" to
 * the first set of column updates (and value lengths). Hadoop input formats reuse objects when reading, so if Mutations are used with an input format (or as
 * the input to a combiner or reducer) then they will be used in this fashion.
 */
@Test public void testMultipleReadFieldsCalls() throws IOException {
  Mutation m1=new Mutation("row1");
  m1.put("cf1.1","cq1.1",new ColumnVisibility("A|B"),"val1.1");
  m1.put("cf1.2","cq1.2",new ColumnVisibility("C|D"),"val1.2");
  byte[] val1_3=new byte[Mutation.VALUE_SIZE_COPY_CUTOFF + 3];
  Arrays.fill(val1_3,(byte)3);
  m1.put("cf1.3","cq1.3",new ColumnVisibility("E|F"),new String(val1_3));
  int size1=m1.size();
  long nb1=m1.numBytes();
  Mutation m2=new Mutation("row2");
  byte[] val2=new byte[Mutation.VALUE_SIZE_COPY_CUTOFF + 2];
  Arrays.fill(val2,(byte)2);
  m2.put("cf2","cq2",new ColumnVisibility("G|H"),1234,new String(val2));
  int size2=m2.size();
  long nb2=m2.numBytes();
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(bos);
  m1.write(dos);
  m2.write(dos);
  dos.close();
  ByteArrayInputStream bis=new ByteArrayInputStream(bos.toByteArray());
  DataInputStream dis=new DataInputStream(bis);
  Mutation m=new Mutation();
  m.readFields(dis);
  assertEquals("row1",new String(m.getRow()));
  assertEquals(size1,m.size());
  assertEquals(nb1,m.numBytes());
  assertEquals(3,m.getUpdates().size());
  verifyColumnUpdate(m.getUpdates().get(0),"cf1.1","cq1.1","A|B",0L,false,false,"val1.1");
  verifyColumnUpdate(m.getUpdates().get(1),"cf1.2","cq1.2","C|D",0L,false,false,"val1.2");
  verifyColumnUpdate(m.getUpdates().get(2),"cf1.3","cq1.3","E|F",0L,false,false,new String(val1_3));
  m.readFields(dis);
  assertEquals("row2",new String(m.getRow()));
  assertEquals(size2,m.size());
  assertEquals(nb2,m.numBytes());
  assertEquals(1,m.getUpdates().size());
  verifyColumnUpdate(m.getUpdates().get(0),"cf2","cq2","G|H",1234L,true,false,new String(val2));
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test3() throws IOException {
  Mutation m=new Mutation(new Text("r1"));
  for (int i=0; i < 5; i++) {
    int len=Mutation.VALUE_SIZE_COPY_CUTOFF - 2 + i;
    byte val[]=new byte[len];
    for (int j=0; j < len; j++)     val[j]=(byte)i;
    m.put(new Text("cf" + i),new Text("cq" + i),new Value(val));
  }
  for (int r=0; r < 3; r++) {
    assertEquals("r1",new String(m.getRow()));
    List<ColumnUpdate> updates=m.getUpdates();
    assertEquals(5,updates.size());
    for (int i=0; i < 5; i++) {
      ColumnUpdate cu=updates.get(i);
      assertEquals("cf" + i,new String(cu.getColumnFamily()));
      assertEquals("cq" + i,new String(cu.getColumnQualifier()));
      assertEquals("",new String(cu.getColumnVisibility()));
      assertFalse(cu.hasTimestamp());
      byte[] val=cu.getValue();
      int len=Mutation.VALUE_SIZE_COPY_CUTOFF - 2 + i;
      assertEquals(len,val.length);
      for (int j=0; j < len; j++)       assertEquals(i,val[j]);
    }
    m=cloneMutation(m);
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test4() throws Exception {
  Mutation m1=new Mutation(new Text("r1"));
  m1.put(nt("cf1"),nt("cq1"),nv("v1"));
  m1.put(nt("cf2"),nt("cq2"),new ColumnVisibility("cv2"),nv("v2"));
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(bos);
  m1.write(dos);
  dos.close();
  Mutation m2=new Mutation(new Text("r2"));
  m2.put(nt("cf3"),nt("cq3"),nv("v3"));
  m2.put(nt("cf4"),nt("cq4"),new ColumnVisibility("cv2"),nv("v4"));
  ByteArrayInputStream bis=new ByteArrayInputStream(bos.toByteArray());
  DataInputStream dis=new DataInputStream(bis);
  m2.readFields(dis);
  assertEquals("r1",new String(m2.getRow()));
  assertEquals(2,m2.getUpdates().size());
  assertEquals(2,m2.size());
  verifyColumnUpdate(m2.getUpdates().get(0),"cf1","cq1","",0l,false,false,"v1");
  verifyColumnUpdate(m2.getUpdates().get(1),"cf2","cq2","cv2",0l,false,false,"v2");
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReserialize() throws Exception {
  OldMutation om=new OldMutation("r1");
  om.put("cf1","cq1","v1");
  om.put("cf2","cq2",new ColumnVisibility("cv2"),"v2");
  om.putDelete("cf3","cq3");
  StringBuilder bigVal=new StringBuilder();
  for (int i=0; i < 100000; i++) {
    bigVal.append('a');
  }
  om.put("cf2","big",bigVal);
  Mutation m1=convert(om);
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(bos);
  m1.write(dos);
  dos.close();
  Mutation m2=new Mutation();
  ByteArrayInputStream bis=new ByteArrayInputStream(bos.toByteArray());
  DataInputStream dis=new DataInputStream(bis);
  m2.readFields(dis);
  assertEquals("r1",new String(m1.getRow()));
  assertEquals(4,m2.getUpdates().size());
  assertEquals(4,m2.size());
  verifyColumnUpdate(m2.getUpdates().get(0),"cf1","cq1","",0l,false,false,"v1");
  verifyColumnUpdate(m2.getUpdates().get(1),"cf2","cq2","cv2",0l,false,false,"v2");
  verifyColumnUpdate(m2.getUpdates().get(2),"cf3","cq3","",0l,false,true,"");
  verifyColumnUpdate(m2.getUpdates().get(3),"cf2","big","",0l,false,false,bigVal.toString());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNewSerialization() throws Exception {
  OldMutation m2=new OldMutation("r1");
  m2.put("cf1","cq1","v1");
  m2.put("cf2","cq2",new ColumnVisibility("cv2"),"v2");
  m2.putDelete("cf3","cq3");
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(bos);
  m2.write(dos);
  dos.close();
  long oldSize=dos.size();
  ByteArrayInputStream bis=new ByteArrayInputStream(bos.toByteArray());
  DataInputStream dis=new DataInputStream(bis);
  m2.readFields(dis);
  dis.close();
  assertEquals("r1",new String(m2.getRow()));
  assertEquals(3,m2.getUpdates().size());
  assertEquals(3,m2.size());
  verifyColumnUpdate(m2.getUpdates().get(0),"cf1","cq1","",0l,false,false,"v1");
  verifyColumnUpdate(m2.getUpdates().get(1),"cf2","cq2","cv2",0l,false,false,"v2");
  verifyColumnUpdate(m2.getUpdates().get(2),"cf3","cq3","",0l,false,true,"");
  Mutation m1=convert(m2);
  assertEquals("r1",new String(m1.getRow()));
  assertEquals(3,m1.getUpdates().size());
  assertEquals(3,m1.size());
  verifyColumnUpdate(m1.getUpdates().get(0),"cf1","cq1","",0l,false,false,"v1");
  verifyColumnUpdate(m1.getUpdates().get(1),"cf2","cq2","cv2",0l,false,false,"v2");
  verifyColumnUpdate(m1.getUpdates().get(2),"cf3","cq3","",0l,false,true,"");
  Text exampleRow=new Text(" 123456789 123456789 123456789 123456789 123456789");
  int exampleLen=exampleRow.getLength();
  m1=new Mutation(exampleRow);
  m1.put("","","");
  bos=new ByteArrayOutputStream();
  dos=new DataOutputStream(bos);
  m1.write(dos);
  dos.close();
  long newSize=dos.size();
  assertTrue(newSize < oldSize);
  assertEquals(10,newSize - exampleLen);
  assertEquals(68,oldSize - exampleLen);
  assertEquals(14705,(int)(((newSize - exampleLen) * 100. / (oldSize - exampleLen)) * 1000));
  StringBuilder sb=new StringBuilder();
  byte[] ba=bos.toByteArray();
  for (int i=0; i < bos.size(); i+=4) {
    for (int j=i; j < bos.size() && j < i + 4; j++) {
      sb.append(String.format("%02x",ba[j]));
    }
    sb.append(" ");
  }
  assertEquals("80322031 32333435 36373839 20313233 34353637 38392031 32333435 36373839 20313233 34353637 38392031 32333435 36373839 06000000 00000001 ",sb.toString());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testThrift(){
  Mutation m1=new Mutation("r1");
  m1.put("cf1","cq1","v1");
  TMutation tm1=m1.toThrift();
  Mutation m2=new Mutation(tm1);
  assertEquals(m1,m2);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPutsString(){
  Mutation m=new Mutation("r1");
  m.put("cf1","cq1",nv("v1"));
  m.put("cf2","cq2",new ColumnVisibility("cv2"),nv("v2"));
  m.put("cf3","cq3",3l,nv("v3"));
  m.put("cf4","cq4",new ColumnVisibility("cv4"),4l,nv("v4"));
  m.putDelete("cf5","cq5");
  m.putDelete("cf6","cq6",new ColumnVisibility("cv6"));
  m.putDelete("cf7","cq7",7l);
  m.putDelete("cf8","cq8",new ColumnVisibility("cv8"),8l);
  assertEquals(8,m.size());
  List<ColumnUpdate> updates=m.getUpdates();
  assertEquals(8,m.size());
  assertEquals(8,updates.size());
  verifyColumnUpdate(updates.get(0),"cf1","cq1","",0l,false,false,"v1");
  verifyColumnUpdate(updates.get(1),"cf2","cq2","cv2",0l,false,false,"v2");
  verifyColumnUpdate(updates.get(2),"cf3","cq3","",3l,true,false,"v3");
  verifyColumnUpdate(updates.get(3),"cf4","cq4","cv4",4l,true,false,"v4");
  verifyColumnUpdate(updates.get(4),"cf5","cq5","",0l,false,true,"");
  verifyColumnUpdate(updates.get(5),"cf6","cq6","cv6",0l,false,true,"");
  verifyColumnUpdate(updates.get(6),"cf7","cq7","",7l,true,true,"");
  verifyColumnUpdate(updates.get(7),"cf8","cq8","cv8",8l,true,true,"");
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1(){
  Mutation m=new Mutation(new Text("r1"));
  m.put(new Text("cf1"),new Text("cq1"),new Value("v1".getBytes()));
  List<ColumnUpdate> updates=m.getUpdates();
  assertEquals(1,updates.size());
  ColumnUpdate cu=updates.get(0);
  assertEquals("cf1",new String(cu.getColumnFamily()));
  assertEquals("cq1",new String(cu.getColumnQualifier()));
  assertEquals("",new String(cu.getColumnVisibility()));
  assertFalse(cu.hasTimestamp());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPuts(){
  Mutation m=new Mutation(new Text("r1"));
  m.put(nt("cf1"),nt("cq1"),nv("v1"));
  m.put(nt("cf2"),nt("cq2"),new ColumnVisibility("cv2"),nv("v2"));
  m.put(nt("cf3"),nt("cq3"),3l,nv("v3"));
  m.put(nt("cf4"),nt("cq4"),new ColumnVisibility("cv4"),4l,nv("v4"));
  m.putDelete(nt("cf5"),nt("cq5"));
  m.putDelete(nt("cf6"),nt("cq6"),new ColumnVisibility("cv6"));
  m.putDelete(nt("cf7"),nt("cq7"),7l);
  m.putDelete(nt("cf8"),nt("cq8"),new ColumnVisibility("cv8"),8l);
  assertEquals(8,m.size());
  List<ColumnUpdate> updates=m.getUpdates();
  assertEquals(8,m.size());
  assertEquals(8,updates.size());
  verifyColumnUpdate(updates.get(0),"cf1","cq1","",0l,false,false,"v1");
  verifyColumnUpdate(updates.get(1),"cf2","cq2","cv2",0l,false,false,"v2");
  verifyColumnUpdate(updates.get(2),"cf3","cq3","",3l,true,false,"v3");
  verifyColumnUpdate(updates.get(3),"cf4","cq4","cv4",4l,true,false,"v4");
  verifyColumnUpdate(updates.get(4),"cf5","cq5","",0l,false,true,"");
  verifyColumnUpdate(updates.get(5),"cf6","cq6","cv6",0l,false,true,"");
  verifyColumnUpdate(updates.get(6),"cf7","cq7","",7l,true,true,"");
  verifyColumnUpdate(updates.get(7),"cf8","cq8","cv8",8l,true,true,"");
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPutsStringString(){
  Mutation m=new Mutation("r1");
  m.put("cf1","cq1","v1");
  m.put("cf2","cq2",new ColumnVisibility("cv2"),"v2");
  m.put("cf3","cq3",3l,"v3");
  m.put("cf4","cq4",new ColumnVisibility("cv4"),4l,"v4");
  m.putDelete("cf5","cq5");
  m.putDelete("cf6","cq6",new ColumnVisibility("cv6"));
  m.putDelete("cf7","cq7",7l);
  m.putDelete("cf8","cq8",new ColumnVisibility("cv8"),8l);
  assertEquals(8,m.size());
  assertEquals("r1",new String(m.getRow()));
  List<ColumnUpdate> updates=m.getUpdates();
  assertEquals(8,m.size());
  assertEquals(8,updates.size());
  verifyColumnUpdate(updates.get(0),"cf1","cq1","",0l,false,false,"v1");
  verifyColumnUpdate(updates.get(1),"cf2","cq2","cv2",0l,false,false,"v2");
  verifyColumnUpdate(updates.get(2),"cf3","cq3","",3l,true,false,"v3");
  verifyColumnUpdate(updates.get(3),"cf4","cq4","cv4",4l,true,false,"v4");
  verifyColumnUpdate(updates.get(4),"cf5","cq5","",0l,false,true,"");
  verifyColumnUpdate(updates.get(5),"cf6","cq6","cv6",0l,false,true,"");
  verifyColumnUpdate(updates.get(6),"cf7","cq7","",7l,true,true,"");
  verifyColumnUpdate(updates.get(7),"cf8","cq8","cv8",8l,true,true,"");
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInitialBufferSizesEquals(){
  Mutation m1=new Mutation("r1");
  Mutation m2=new Mutation("r1",4242);
  Mutation m3=new Mutation(new Text("r1"));
  Mutation m4=new Mutation(new Text("r1"),4242);
  byte[] r1Bytes="r1".getBytes(UTF_8);
  Mutation m5=new Mutation(r1Bytes);
  Mutation m6=new Mutation(r1Bytes,4242);
  Mutation m7=new Mutation(r1Bytes,0,r1Bytes.length);
  Mutation m8=new Mutation(r1Bytes,0,r1Bytes.length,4242);
  Mutation[] muts=new Mutation[]{m1,m2,m3,m4,m5,m6,m7,m8};
  populate(muts);
  for (  Mutation m : muts) {
    assertEquals(m1,m);
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2() throws IOException {
  Mutation m=new Mutation(new Text("r1"));
  m.put(new Text("cf1"),new Text("cq1"),new Value("v1".getBytes()));
  m.put(new Text("cf2"),new Text("cq2"),56,new Value("v2".getBytes()));
  List<ColumnUpdate> updates=m.getUpdates();
  assertEquals(2,updates.size());
  assertEquals("r1",new String(m.getRow()));
  ColumnUpdate cu=updates.get(0);
  assertEquals("cf1",new String(cu.getColumnFamily()));
  assertEquals("cq1",new String(cu.getColumnQualifier()));
  assertEquals("",new String(cu.getColumnVisibility()));
  assertFalse(cu.hasTimestamp());
  cu=updates.get(1);
  assertEquals("cf2",new String(cu.getColumnFamily()));
  assertEquals("cq2",new String(cu.getColumnQualifier()));
  assertEquals("",new String(cu.getColumnVisibility()));
  assertTrue(cu.hasTimestamp());
  assertEquals(56,cu.getTimestamp());
  m=cloneMutation(m);
  assertEquals("r1",new String(m.getRow()));
  updates=m.getUpdates();
  assertEquals(2,updates.size());
  cu=updates.get(0);
  assertEquals("cf1",new String(cu.getColumnFamily()));
  assertEquals("cq1",new String(cu.getColumnQualifier()));
  assertEquals("",new String(cu.getColumnVisibility()));
  assertFalse(cu.hasTimestamp());
  cu=updates.get(1);
  assertEquals("cf2",new String(cu.getColumnFamily()));
  assertEquals("cq2",new String(cu.getColumnQualifier()));
  assertEquals("",new String(cu.getColumnVisibility()));
  assertTrue(cu.hasTimestamp());
  assertEquals(56,cu.getTimestamp());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEquals(){
  Mutation m1=new Mutation("r1");
  m1.put("cf1","cq1","v1");
  m1.put("cf1","cq1",new ColumnVisibility("A&B"),"v2");
  m1.put("cf1","cq1",3,"v3");
  m1.put("cf1","cq1",new ColumnVisibility("A&B&C"),4,"v4");
  m1.putDelete("cf2","cf3");
  m1.putDelete("cf2","cf4",3);
  m1.putDelete("cf2","cf4",new ColumnVisibility("A&B&C"),3);
  Mutation m2=new Mutation("r1");
  m2.put("cf1","cq1","v1");
  m2.put("cf1","cq1",new ColumnVisibility("A&B"),"v2");
  m2.put("cf1","cq1",3,"v3");
  m2.put("cf1","cq1",new ColumnVisibility("A&B&C"),4,"v4");
  m2.putDelete("cf2","cf3");
  m2.putDelete("cf2","cf4",3);
  m2.putDelete("cf2","cf4",new ColumnVisibility("A&B&C"),3);
  Mutation m3=new Mutation("r2");
  m3.put("cf1","cq1","v1");
  m3.put("cf1","cq1",new ColumnVisibility("A&B"),"v2");
  m3.put("cf1","cq1",3,"v3");
  m3.put("cf1","cq1",new ColumnVisibility("A&B&C"),4,"v4");
  m3.putDelete("cf2","cf3");
  m3.putDelete("cf2","cf4",3);
  m3.putDelete("cf2","cf4",new ColumnVisibility("A&B&C"),3);
  Mutation m4=new Mutation("r1");
  m4.put("cf2","cq1","v1");
  m4.put("cf1","cq1",new ColumnVisibility("A&B"),"v2");
  m4.put("cf1","cq1",3,"v3");
  m4.put("cf1","cq1",new ColumnVisibility("A&B&C"),4,"v4");
  m4.putDelete("cf2","cf3");
  m4.putDelete("cf2","cf4",3);
  m4.putDelete("cf2","cf4",new ColumnVisibility("A&B&C"),3);
  Mutation m5=new Mutation("r1");
  m5.put("cf1","cq1","v1");
  m5.put("cf1","cq1",new ColumnVisibility("A&B"),"v2");
  m5.put("cf1","cq1",3,"v4");
  m5.put("cf1","cq1",new ColumnVisibility("A&B&C"),4,"v4");
  m5.putDelete("cf2","cf3");
  m5.putDelete("cf2","cf4",3);
  m5.putDelete("cf2","cf4",new ColumnVisibility("A&B&C"),3);
  assertEquals(m1,m1);
  assertEquals(m1,m2);
  assertEquals(m2,m1);
  assertEquals(m2.hashCode(),m1.hashCode());
  assertFalse(0 == m1.hashCode());
  assertFalse(m1.equals(m3));
  assertFalse(m3.equals(m1));
  assertFalse(m1.equals(m4));
  assertFalse(m4.equals(m1));
  assertFalse(m3.equals(m4));
  assertFalse(m1.equals(m5));
  assertFalse(m5.equals(m1));
  assertFalse(m3.equals(m5));
  assertFalse(m4.equals(m5));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.ValueTest </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test @Deprecated public void testToArray(){
  List<byte[]> l=new java.util.ArrayList<byte[]>();
  byte[] one=toBytes("one");
  byte[] two=toBytes("two");
  byte[] three=toBytes("three");
  l.add(one);
  l.add(two);
  l.add(three);
  byte[][] a=Value.toArray(l);
  assertEquals(3,a.length);
  assertArrayEquals(one,a[0]);
  assertArrayEquals(two,a[1]);
  assertArrayEquals(three,a[2]);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testByteBuffer(){
  Value v=new Value(DATABUFF);
  assertArrayEquals(DATA,v.get());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefault(){
  Value v=new Value();
  assertEquals(0,v.get().length);
}

</code></pre>

<br>
<pre class="type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSet(){
  Value v=new Value();
  v.set(DATA);
  assertArrayEquals(DATA,v.get());
  assertSame(DATA,v.get());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testByteBufferCopy(){
  @SuppressWarnings("deprecation") Value v=new Value(DATABUFF,true);
  assertArrayEquals(DATA,v.get());
}

</code></pre>

<br>
<pre class="type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testByteArrayCopy(){
  Value v=new Value(DATA,true);
  assertArrayEquals(DATA,v.get());
  assertNotSame(DATA,v.get());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetSize(){
  Value v=new Value(DATA);
  assertEquals(DATA.length,v.getSize());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWriteRead() throws Exception {
  Value v=new Value(DATA);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  v.write(dos);
  dos.close();
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream dis=new DataInputStream(bais);
  Value v2=new Value();
  v2.readFields(dis);
  dis.close();
  assertArrayEquals(DATA,v2.get());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetSizeDefault(){
  Value v=new Value();
  assertEquals(0,v.getSize());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHashCode(){
  Value v1=new Value(DATA);
  Value v2=new Value(DATA);
  assertEquals(v1.hashCode(),v2.hashCode());
}

</code></pre>

<br>
<pre class="type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCopy(){
  Value v=new Value();
  v.copy(DATA);
  assertArrayEquals(DATA,v.get());
  assertNotSame(DATA,v.get());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testValueCopy(){
  Value ov=createMock(Value.class);
  expect(ov.get()).andReturn(DATA);
  expect(ov.getSize()).andReturn(4);
  replay(ov);
  Value v=new Value(ov);
  assertArrayEquals(DATA,v.get());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testByteArrayOffsetLength(){
  Value v=new Value(DATA,0,4);
  assertArrayEquals(DATA,v.get());
}

</code></pre>

<br>
<pre class="type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testByteArray(){
  Value v=new Value(DATA);
  assertArrayEquals(DATA,v.get());
  assertSame(DATA,v.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.file.rfile.BlockIndexTest </h4><pre class="type-9 type-13 type-11 type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1() throws IOException {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(baos);
  Key prevKey=null;
  int num=1000;
  for (int i=0; i < num; i++) {
    Key key=new Key(RFileTest.nf("",i),"cf1","cq1");
    new RelativeKey(prevKey,key).write(out);
    new Value(new byte[0]).write(out);
    prevKey=key;
  }
  out.close();
  final byte[] data=baos.toByteArray();
  CacheEntry ce=new MyCacheEntry(data);
  ABlockReader cacheBlock=new CachableBlockFile.CachedBlockRead(ce,data);
  BlockIndex blockIndex=null;
  for (int i=0; i < 129; i++)   blockIndex=BlockIndex.getIndex(cacheBlock,new IndexEntry(prevKey,num,0,0,0));
  BlockIndexEntry[] indexEntries=blockIndex.getIndexEntries();
  for (int i=0; i < indexEntries.length; i++) {
    int row=Integer.parseInt(indexEntries[i].getPrevKey().getRowData().toString());
    BlockIndexEntry bie;
    bie=blockIndex.seekBlock(new Key(RFileTest.nf("",row),"cf1","cq1"),cacheBlock);
    if (i == 0)     Assert.assertSame(null,bie);
 else     Assert.assertSame(indexEntries[i - 1],bie);
    Assert.assertSame(bie,blockIndex.seekBlock(new Key(RFileTest.nf("",row - 1),"cf1","cq1"),cacheBlock));
    bie=blockIndex.seekBlock(new Key(RFileTest.nf("",row + 1),"cf1","cq1"),cacheBlock);
    Assert.assertSame(indexEntries[i],bie);
    RelativeKey rk=new RelativeKey();
    rk.setPrevKey(bie.getPrevKey());
    rk.readFields(cacheBlock);
    Assert.assertEquals(rk.getKey(),new Key(RFileTest.nf("",row + 1),"cf1","cq1"));
  }
  cacheBlock.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.file.rfile.RFileMetricsTest </h4><pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void oneEntryDefaultLocGroup() throws IOException {
  trf.openWriter();
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get(null);
  AtomicLongMap<String> blocks=vmg.blocks.get(null);
  assertEquals(1,metrics.get("L1"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,vmg.numEntries.get(vmg.localityGroups.indexOf(null)).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf(null)).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void nonDefaultAndDefaultLocGroup() throws IOException {
  trf.openWriter(false);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq2","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq2","L2",55),RFileTest.nv("foo"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","A",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","B",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(2,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(3,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  metrics=vmg.metric.get(null);
  blocks=vmg.blocks.get(null);
  assertEquals(1,metrics.get("A"));
  assertEquals(1,metrics.get("B"));
  assertEquals(1,blocks.get("A"));
  assertEquals(1,blocks.get("B"));
  assertEquals(2,vmg.numEntries.get(vmg.localityGroups.indexOf(null)).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf(null)).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void multiBlockNonDefaultLocGroup() throws IOException {
  trf.openWriter(false,20);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  lg1.add(new ArrayByteSequence("cf3"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq2","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq2","L2",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(3,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(3,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(4,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(4,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void multiBlockMultiCFNonDefaultAndDefaultLocGroup() throws IOException {
  trf.openWriter(false,20);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  lg1.add(new ArrayByteSequence("cf3"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq2","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq2","L2",55),RFileTest.nv("foo"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","A",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","B",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf4","cq1","A",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf4","cq1","B",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(3,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(3,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(4,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(4,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  metrics=vmg.metric.get(null);
  blocks=vmg.blocks.get(null);
  assertEquals(2,metrics.get("A"));
  assertEquals(2,metrics.get("B"));
  assertEquals(2,blocks.get("A"));
  assertEquals(2,blocks.get("B"));
  assertEquals(4,vmg.numEntries.get(vmg.localityGroups.indexOf(null)).longValue());
  assertEquals(4,vmg.numBlocks.get(vmg.localityGroups.indexOf(null)).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void oneEntryNonDefaultLocGroup() throws IOException {
  trf.openWriter(false);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(1,metrics.get("L1"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void twoEntryNonDefaultLocGroup() throws IOException {
  trf.openWriter(false);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L2",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(1,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(2,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void multiCFNonDefaultAndDefaultLocGroup() throws IOException {
  trf.openWriter(false);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  lg1.add(new ArrayByteSequence("cf3"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq2","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq2","L2",55),RFileTest.nv("foo"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","A",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","B",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf4","cq1","A",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf4","cq1","B",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(3,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(4,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  metrics=vmg.metric.get(null);
  blocks=vmg.blocks.get(null);
  assertEquals(2,metrics.get("A"));
  assertEquals(2,metrics.get("B"));
  assertEquals(1,blocks.get("A"));
  assertEquals(1,blocks.get("B"));
  assertEquals(4,vmg.numEntries.get(vmg.localityGroups.indexOf(null)).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf(null)).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void multiBlockDefaultLocGroup() throws IOException {
  trf.openWriter(20);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq2","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq2","L2",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get(null);
  AtomicLongMap<String> blocks=vmg.blocks.get(null);
  assertEquals(3,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(3,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(4,vmg.numEntries.get(vmg.localityGroups.indexOf(null)).longValue());
  assertEquals(4,vmg.numBlocks.get(vmg.localityGroups.indexOf(null)).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void twoNonDefaultLocGroups() throws IOException {
  trf.openWriter(false);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L2",55),RFileTest.nv("foo"));
  Set<ByteSequence> lg2=new HashSet<>();
  lg2.add(new ArrayByteSequence("cf2"));
  trf.writer.startNewLocalityGroup("lg2",lg2);
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","L2",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(1,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(2,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  metrics=vmg.metric.get("lg2");
  blocks=vmg.blocks.get("lg2");
  assertEquals(1,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(2,vmg.numEntries.get(vmg.localityGroups.indexOf("lg2")).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg2")).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void emptyFile() throws IOException {
  trf.openWriter();
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  Map<String,AtomicLongMap<String>> metrics=vmg.metric;
  Map<String,AtomicLongMap<String>> blocks=vmg.blocks;
  assertEquals(0,metrics.size());
  assertEquals(0,blocks.size());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void twoEntriesDefaultLocGroup() throws IOException {
  trf.openWriter();
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L2",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get(null);
  AtomicLongMap<String> blocks=vmg.blocks.get(null);
  assertEquals(1,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(2,vmg.numEntries.get(vmg.localityGroups.indexOf(null)).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf(null)).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.file.rfile.RFileTest </h4><pre class="type-13 type-11 type-5 type-3 type-2 type-14 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test11() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("3mod10"));
  for (int i=3; i < 1024; i+=10) {
    trf.writer.append(nk(nf("i",i),"3mod10","","",i + 2),nv("" + i));
  }
  trf.writer.startNewLocalityGroup("lg2",ncfs("5mod10","7mod10"));
  for (int i=5; i < 1024; ) {
    trf.writer.append(nk(nf("i",i),"5mod10","","",i + 2),nv("" + i));
    i+=2;
    trf.writer.append(nk(nf("i",i),"7mod10","","",i + 2),nv("" + i));
    i+=8;
  }
  trf.writer.startDefaultLocalityGroup();
  for (int i=0; i < 1024; i++) {
    int m10=i % 10;
    if (m10 == 3 || m10 == 5 || m10 == 7)     continue;
    trf.writer.append(nk(nf("i",i),m10 + "mod10","","",i + 2),nv("" + i));
  }
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertEquals(3,trf.reader.getNumLocalityGroupsSeeked());
  for (int i=0; i < 1024; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("i",i),(i % 10) + "mod10","","",i + 2),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  assertFalse(trf.iter.hasTop());
  for (int m=0; m < 10; m++) {
    trf.iter.seek(new Range(new Key(),true,null,true),ncfs(m + "mod10"),true);
    assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
    for (int i=m; i < 1024; i+=10) {
      assertTrue(trf.iter.hasTop());
      assertEquals(nk(nf("i",i),(i % 10) + "mod10","","",i + 2),trf.iter.getTopKey());
      assertEquals(nv("" + i),trf.iter.getTopValue());
      trf.iter.next();
    }
    assertFalse(trf.iter.hasTop());
    trf.iter.seek(new Range(new Key(),true,null,true),ncfs(m + "mod10"),false);
    if (m == 3)     assertEquals(2,trf.reader.getNumLocalityGroupsSeeked());
 else     assertEquals(3,trf.reader.getNumLocalityGroupsSeeked());
    for (int i=0; i < 1024; i++) {
      if (i % 10 == m)       continue;
      assertTrue(trf.iter.hasTop());
      assertEquals(nk(nf("i",i),(i % 10) + "mod10","","",i + 2),trf.iter.getTopKey());
      assertEquals(nv("" + i),trf.iter.getTopValue());
      trf.iter.next();
    }
    assertFalse(trf.iter.hasTop());
  }
  SortedKeyValueIterator<Key,Value> reader2=trf.iter.deepCopy(null);
  for (int m=0; m < 9; m++) {
    trf.iter.seek(new Range(new Key(),true,null,true),ncfs(m + "mod10"),true);
    assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
    reader2.seek(new Range(new Key(),true,null,true),ncfs((m + 1) + "mod10"),true);
    for (int i=m; i < 1024; i+=10) {
      assertTrue(trf.iter.hasTop());
      assertEquals(nk(nf("i",i),(i % 10) + "mod10","","",i + 2),trf.iter.getTopKey());
      assertEquals(nv("" + i),trf.iter.getTopValue());
      trf.iter.next();
      if (i + 1 < 1024) {
        assertTrue(reader2.hasTop());
        assertEquals(nk(nf("i",(i + 1)),((i + 1) % 10) + "mod10","","",i + 3),reader2.getTopKey());
        assertEquals(nv("" + (i + 1)),reader2.getTopValue());
        reader2.next();
      }
    }
    assertFalse(trf.iter.hasTop());
    assertFalse(reader2.hasTop());
  }
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test7() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  for (int i=2; i < 50; i++) {
    trf.writer.append(nk(nf("r_",i),"cf1","cq1","L1",55),nv("foo" + i));
  }
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range(nk(nf("r_",3),"cf1","cq1","L1",55),true,nk(nf("r_",4),"cf1","cq1","L1",55),false),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk(nf("r_",3),"cf1","cq1","L1",55)));
  assertEquals(nv("foo" + 3),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk(nf("r_",4) + "a","cf1","cq1","L1",55),true,nk(nf("r_",4) + "b","cf1","cq1","L1",55),true),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk(nf("r_",4) + "c","cf1","cq1","L1",55),true,nk(nf("r_",4) + "d","cf1","cq1","L1",55),true),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk(nf("r_",4) + "e","cf1","cq1","L1",55),true,nk(nf("r_",4) + "f","cf1","cq1","L1",55),true),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk(nf("r_",5),"cf1","cq1","L1",55),true,nk(nf("r_",6),"cf1","cq1","L1",55),false),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk(nf("r_",5),"cf1","cq1","L1",55)));
  assertEquals(nv("foo" + 5),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk(nf("r_",0),"cf1","cq1","L1",55),true,nk(nf("r_",2),"cf1","cq1","L1",55),false),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  assertEquals(nk(nf("r_",49),"cf1","cq1","L1",55),trf.reader.getLastKey());
  trf.reader.close();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test3() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  int val=0;
  ArrayList<Key> expectedKeys=new ArrayList<Key>(10000);
  ArrayList<Value> expectedValues=new ArrayList<Value>(10000);
  for (int row=0; row < 4; row++) {
    String rowS=nf("r_",row);
    for (int cf=0; cf < 4; cf++) {
      String cfS=nf("cf_",cf);
      for (int cq=0; cq < 4; cq++) {
        String cqS=nf("cq_",cq);
        for (int cv='A'; cv < 'A' + 4; cv++) {
          String cvS="" + (char)cv;
          for (int ts=4; ts > 0; ts--) {
            Key k=nk(rowS,cfS,cqS,cvS,ts);
            k.setDeleted(true);
            Value v=nv("" + val);
            trf.writer.append(k,v);
            expectedKeys.add(k);
            expectedValues.add(v);
            k=nk(rowS,cfS,cqS,cvS,ts);
            v=nv("" + val);
            trf.writer.append(k,v);
            expectedKeys.add(k);
            expectedValues.add(v);
            val++;
          }
        }
      }
    }
  }
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range((Key)null,null),EMPTY_COL_FAMS,false);
  verify(trf,expectedKeys.iterator(),expectedValues.iterator());
  int index=expectedKeys.size() / 2;
  trf.seek(expectedKeys.get(index));
  verify(trf,expectedKeys.subList(index,expectedKeys.size()).iterator(),expectedValues.subList(index,expectedKeys.size()).iterator());
  index=0;
  trf.seek(expectedKeys.get(index));
  verify(trf,expectedKeys.subList(index,expectedKeys.size()).iterator(),expectedValues.subList(index,expectedKeys.size()).iterator());
  index=expectedKeys.size() - 1;
  trf.seek(expectedKeys.get(index));
  verify(trf,expectedKeys.subList(index,expectedKeys.size()).iterator(),expectedValues.subList(index,expectedKeys.size()).iterator());
  index=expectedKeys.size();
  trf.seek(new Key(new Text("z")));
  verify(trf,expectedKeys.subList(index,expectedKeys.size()).iterator(),expectedValues.subList(index,expectedKeys.size()).iterator());
  index=expectedKeys.size() / 2;
  trf.seek(expectedKeys.get(index));
  assertTrue(trf.iter.hasTop());
  assertEquals(expectedKeys.get(index),trf.iter.getTopKey());
  assertEquals(expectedValues.get(index),trf.iter.getTopValue());
  trf.iter.next();
  index++;
  assertTrue(trf.iter.hasTop());
  assertEquals(expectedKeys.get(index),trf.iter.getTopKey());
  assertEquals(expectedValues.get(index),trf.iter.getTopValue());
  trf.seek(expectedKeys.get(index));
  assertTrue(trf.iter.hasTop());
  assertEquals(expectedKeys.get(index),trf.iter.getTopKey());
  assertEquals(expectedValues.get(index),trf.iter.getTopValue());
  index=0;
  for (  Key key : expectedKeys) {
    trf.seek(key);
    assertTrue(trf.iter.hasTop());
    assertEquals(key,trf.iter.getTopKey());
    assertEquals(expectedValues.get(index),trf.iter.getTopValue());
    if (index > 0) {
      expectedKeys.get(index - 1);
    }
    index++;
  }
  for (int i=expectedKeys.size() - 1; i >= 0; i--) {
    Key key=expectedKeys.get(i);
    trf.seek(key);
    assertTrue(trf.iter.hasTop());
    assertEquals(key,trf.iter.getTopKey());
    assertEquals(expectedValues.get(i),trf.iter.getTopValue());
    if (i - 1 > 0) {
      expectedKeys.get(i - 1);
    }
  }
  assertEquals(expectedKeys.get(expectedKeys.size() - 1),trf.reader.getLastKey());
  Random rand=new Random();
  for (int i=0; i < 12; i++) {
    index=rand.nextInt(expectedKeys.size());
    trf.seek(expectedKeys.get(index));
    for (; index < expectedKeys.size(); index++) {
      assertTrue(trf.iter.hasTop());
      assertEquals(expectedKeys.get(index),trf.iter.getTopKey());
      assertEquals(expectedValues.get(index),trf.iter.getTopValue());
      trf.iter.next();
    }
  }
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testSample() throws IOException {
  int num=10000;
  for (  int sampleBufferSize : new int[]{1 << 10,1 << 20}) {
    RFile.setSampleBufferSize(sampleBufferSize);
    for (    int modulus : new int[]{19,103,1019}) {
      Hasher dataHasher=Hashing.md5().newHasher();
      List<Entry<Key,Value>> sampleData=new ArrayList<Entry<Key,Value>>();
      ConfigurationCopy sampleConf=new ConfigurationCopy(conf == null ? AccumuloConfiguration.getDefaultConfiguration() : conf);
      sampleConf.set(Property.TABLE_SAMPLER,RowSampler.class.getName());
      sampleConf.set(Property.TABLE_SAMPLER_OPTS + "hasher","murmur3_32");
      sampleConf.set(Property.TABLE_SAMPLER_OPTS + "modulus",modulus + "");
      Sampler sampler=SamplerFactory.newSampler(SamplerConfigurationImpl.newSamplerConfig(sampleConf),sampleConf);
      TestRFile trf=new TestRFile(sampleConf);
      trf.openWriter();
      for (int i=0; i < num; i++) {
        add(trf,nk(i,0),nv(i,0),dataHasher,sampleData,sampler);
        add(trf,nk(i,1),nv(i,1),dataHasher,sampleData,sampler);
      }
      HashCode expectedDataHash=dataHasher.hash();
      trf.closeWriter();
      trf.openReader();
      FileSKVIterator sample=trf.reader.getSample(SamplerConfigurationImpl.newSamplerConfig(sampleConf));
      checkSample(sample,sampleData);
      Assert.assertEquals(expectedDataHash,hash(trf.reader));
      SampleIE ie=new SampleIE(SamplerConfigurationImpl.newSamplerConfig(sampleConf).toSamplerConfiguration());
      for (int i=0; i < 3; i++) {
        trf.reader.closeDeepCopies();
        sample=trf.reader.getSample(SamplerConfigurationImpl.newSamplerConfig(sampleConf));
        SortedKeyValueIterator<Key,Value> sampleDC1=sample.deepCopy(ie);
        SortedKeyValueIterator<Key,Value> sampleDC2=sample.deepCopy(ie);
        SortedKeyValueIterator<Key,Value> sampleDC3=trf.reader.deepCopy(ie);
        SortedKeyValueIterator<Key,Value> allDC1=sampleDC1.deepCopy(new SampleIE(null));
        SortedKeyValueIterator<Key,Value> allDC2=sample.deepCopy(new SampleIE(null));
        Assert.assertEquals(expectedDataHash,hash(allDC1));
        Assert.assertEquals(expectedDataHash,hash(allDC2));
        checkSample(sample,sampleData);
        checkSample(sampleDC1,sampleData);
        checkSample(sampleDC2,sampleData);
        checkSample(sampleDC3,sampleData);
      }
      trf.reader.closeDeepCopies();
      trf.closeReader();
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test12() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("a","b"));
  trf.writer.append(nk("0007","a","cq1","",4),nv("1"));
  try {
    trf.writer.append(nk("0009","c","cq1","",4),nv("1"));
    assertFalse(true);
  }
 catch (  IllegalArgumentException ioe) {
  }
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertEquals(nk("0007","a","cq1","",4),trf.iter.getTopKey());
  assertEquals(nv("1"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
}

</code></pre>

<br>
<pre class="type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test6() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  for (int i=0; i < 500; i++) {
    trf.writer.append(nk(nf("r_",i),"cf1","cq1","L1",55),nv("foo1"));
  }
  trf.closeWriter();
  trf.openReader();
  for (int i=0; i < 10; i++) {
    trf.seek(nk(nf("q_",i),"cf1","cq1","L1",55));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),"cf1","cq1","L1",55),trf.iter.getTopKey());
    assertEquals(nv("foo1"),trf.iter.getTopValue());
  }
  for (int i=0; i < 10; i++) {
    trf.seek(nk(nf("s_",i),"cf1","cq1","L1",55));
    assertFalse(trf.iter.hasTop());
  }
  assertEquals(nk(nf("r_",499),"cf1","cq1","L1",55),trf.reader.getLastKey());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  trf.writer.append(nk("r1","cf1","cq1","L1",55),nv("foo"));
  trf.closeWriter();
  trf.openReader();
  trf.seek(null);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("r1","cf1","cq1","L1",55)));
  assertTrue(trf.iter.getTopValue().equals(nv("foo")));
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.seek(nk("r2","cf1","cq1","L1",55));
  assertFalse(trf.iter.hasTop());
  trf.seek(nk("r1","cf1","cq1","L1",55));
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("r1","cf1","cq1","L1",55)));
  assertTrue(trf.iter.getTopValue().equals(nv("foo")));
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  assertEquals(nk("r1","cf1","cq1","L1",55),trf.reader.getLastKey());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test17() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startDefaultLocalityGroup();
  for (int i=0; i < 2048; i++) {
    trf.writer.append(nk("r0000","cf1","cq1","",1),nv("" + i));
  }
  for (int i=2048; i < 4096; i++) {
    trf.writer.append(nk("r0001","cf1","cq1","",1),nv("" + i));
  }
  trf.writer.close();
  trf.openReader();
  FileSKVIterator indexIter=trf.reader.getIndex();
  int count=0;
  while (indexIter.hasTop()) {
    count++;
    indexIter.next();
  }
  assertTrue(count > 4);
  trf.iter.seek(new Range(nk("r0000","cf1","cq1","",1),true,nk("r0001","cf1","cq1","",1),false),EMPTY_COL_FAMS,false);
  for (int i=0; i < 2048; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk("r0000","cf1","cq1","",1),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk("r0000","cf1","cq1","",1),false,nk("r0001","cf1","cq1","",1),true),EMPTY_COL_FAMS,false);
  for (int i=2048; i < 4096; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk("r0001","cf1","cq1","",1),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk("r0001","cf1","cq1","",1),true,nk("r0001","cf1","cq1","",1),true),EMPTY_COL_FAMS,false);
  for (int i=2048; i < 4096; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk("r0001","cf1","cq1","",1),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk("r0002","cf1","cq1","",1),true,nk("r0002","cf1","cq1","",1),true),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range((Key)null,null),EMPTY_COL_FAMS,false);
  for (int i=0; i < 2048; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk("r0000","cf1","cq1","",1),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  for (int i=2048; i < 4096; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk("r0001","cf1","cq1","",1),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test13() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("a","b"));
  trf.writer.append(nk("0007","a","cq1","",4),nv("1"));
  trf.writer.startDefaultLocalityGroup();
  try {
    trf.writer.append(nk("0008","a","cq1","",4),nv("1"));
    assertFalse(true);
  }
 catch (  IllegalArgumentException ioe) {
  }
  try {
    trf.writer.append(nk("0009","b","cq1","",4),nv("1"));
    assertFalse(true);
  }
 catch (  IllegalArgumentException ioe) {
  }
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertEquals(nk("0007","a","cq1","",4),trf.iter.getTopKey());
  assertEquals(nv("1"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test9() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.append(nk("0000","cf1","doe,john","",4),nv("1123 West Left st"));
  trf.writer.append(nk("0002","cf2","doe,jane","",5),nv("1124 East Right st"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  trf.writer.append(nk("0001","cf3","buck,john","",4),nv("90 Slum st"));
  trf.writer.append(nk("0003","cf4","buck,jane","",5),nv("09 Slum st"));
  trf.writer.close();
  trf.openReader();
  Range r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf1","cf2"),true);
  assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf3","cf4"),true);
  assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0001","cf3","buck,john","",4)));
  assertEquals(nv("90 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0003","cf4","buck,jane","",5)));
  assertEquals(nv("09 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,EMPTY_COL_FAMS,false);
  assertEquals(2,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0001","cf3","buck,john","",4)));
  assertEquals(nv("90 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0003","cf4","buck,jane","",5)));
  assertEquals(nv("09 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("saint","dogooder"),true);
  assertEquals(0,trf.reader.getNumLocalityGroupsSeeked());
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf4"),true);
  assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0003","cf4","buck,jane","",5)));
  assertEquals(nv("09 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf3"),true);
  assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0001","cf3","buck,john","",4)));
  assertEquals(nv("90 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf1"),true);
  assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf2"),true);
  assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf1","cf4"),true);
  assertEquals(2,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0003","cf4","buck,jane","",5)));
  assertEquals(nv("09 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test5() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  trf.writer.append(nk("r1","cf1","cq1","L1",55),nv("foo1"));
  trf.writer.append(nk("r1","cf1","cq4","L1",56),nv("foo2"));
  trf.closeWriter();
  trf.openReader();
  trf.seek(nk("r1","cf1","cq3","L1",55));
  assertTrue(trf.iter.hasTop());
  assertEquals(nk("r1","cf1","cq4","L1",56),trf.iter.getTopKey());
  assertEquals(nv("foo2"),trf.iter.getTopValue());
  trf.seek(nk("r1","cf1","cq0","L1",55));
  assertTrue(trf.iter.hasTop());
  assertEquals(nk("r1","cf1","cq1","L1",55),trf.iter.getTopKey());
  assertEquals(nv("foo1"),trf.iter.getTopValue());
  assertEquals(nk("r1","cf1","cq4","L1",56),trf.reader.getLastKey());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range((Key)null,null),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  assertEquals(null,trf.reader.getLastKey());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReseekUnconsumed() throws Exception {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  for (int i=0; i < 2500; i++) {
    trf.writer.append(nk(nf("r_",i),"cf1","cq1","L1",42),nv("foo" + i));
  }
  trf.closeWriter();
  trf.openReader();
  Set<ByteSequence> cfs=Collections.emptySet();
  Random rand=new Random();
  for (int count=0; count < 100; count++) {
    int start=rand.nextInt(2300);
    Range range=new Range(nk(nf("r_",start),"cf1","cq1","L1",42),nk(nf("r_",start + 100),"cf1","cq1","L1",42));
    trf.reader.seek(range,cfs,false);
    int numToScan=rand.nextInt(100);
    for (int j=0; j < numToScan; j++) {
      assertTrue(trf.reader.hasTop());
      assertEquals(nk(nf("r_",start + j),"cf1","cq1","L1",42),trf.reader.getTopKey());
      trf.reader.next();
    }
    assertTrue(trf.reader.hasTop());
    assertEquals(nk(nf("r_",start + numToScan),"cf1","cq1","L1",42),trf.reader.getTopKey());
    int start2=start + numToScan + rand.nextInt(3);
    int end2=start2 + rand.nextInt(3);
    range=new Range(nk(nf("r_",start2),"cf1","cq1","L1",42),nk(nf("r_",end2),"cf1","cq1","L1",42));
    trf.reader.seek(range,cfs,false);
    for (int j=start2; j <= end2; j++) {
      assertTrue(trf.reader.hasTop());
      assertEquals(nk(nf("r_",j),"cf1","cq1","L1",42),trf.reader.getTopKey());
      trf.reader.next();
    }
    assertFalse(trf.reader.hasTop());
  }
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-11 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testCryptoDoesntLeakSensitive() throws IOException {
  conf=setAndGetAccumuloConfig(CryptoTest.CRYPTO_ON_CONF);
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  trf.closeWriter();
  byte[] rfBytes=trf.baos.toByteArray();
  for (  Property prop : Property.values()) {
    if (prop.isSensitive()) {
      byte[] toCheck=prop.getKey().getBytes();
      assertEquals(-1,Bytes.indexOf(rfBytes,toCheck));
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test10() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
  trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.append(nk("0000","cf1","doe,john","",4),nv("1123 West Left st"));
  trf.writer.append(nk("0002","cf2","doe,jane","",5),nv("1124 East Right st"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
  trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  trf.writer.append(nk("0001","cf3","buck,john","",4),nv("90 Slum st"));
  trf.writer.append(nk("0003","cf4","buck,jane","",5),nv("09 Slum st"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0001","cf3","buck,john","",4)));
  assertEquals(nv("90 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0003","cf4","buck,jane","",5)));
  assertEquals(nv("09 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
  trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.append(nk("0007","good citizen","q,john","",4),nv("70 Apple st"));
  trf.writer.append(nk("0008","model citizen","q,jane","",5),nv("81 Plum st"));
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0007","good citizen","q,john","",4)));
  assertEquals(nv("70 Apple st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0008","model citizen","q,jane","",5)));
  assertEquals(nv("81 Plum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
  trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.append(nk("0000","cf1","doe,john","",4),nv("1123 West Left st"));
  trf.writer.append(nk("0002","cf2","doe,jane","",5),nv("1124 East Right st"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.append(nk("0007","good citizen","q,john","",4),nv("70 Apple st"));
  trf.writer.append(nk("0008","model citizen","q,jane","",5),nv("81 Plum st"));
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0007","good citizen","q,john","",4)));
  assertEquals(nv("70 Apple st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0008","model citizen","q,jane","",5)));
  assertEquals(nv("81 Plum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test8() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  for (int i=0; i < 2500; i++) {
    trf.writer.append(nk(nf("r_",i),"cf1","cq1","L1",42),nv("foo" + i));
  }
  trf.closeWriter();
  trf.openReader();
  for (int i=0; i < 2499; i++) {
    trf.seek(nk(nf("r_",i),"cf1","cq1","L1",42).followingKey(PartialKey.ROW));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",i + 1),"cf1","cq1","L1",42),trf.iter.getTopKey());
  }
  for (int i=0; i < 2499; i+=2) {
    trf.seek(nk(nf("r_",i),"cf1","cq1","L1",42).followingKey(PartialKey.ROW));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",i + 1),"cf1","cq1","L1",42),trf.iter.getTopKey());
  }
  for (int i=2498; i >= 0; i--) {
    trf.seek(nk(nf("r_",i),"cf1","cq1","L1",42).followingKey(PartialKey.ROW));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",i + 1),"cf1","cq1","L1",42),trf.iter.getTopKey());
  }
  trf.closeReader();
  trf=new TestRFile(conf);
  trf.openWriter();
  for (int i=0; i < 2500; i++) {
    trf.writer.append(nk(nf("r_",0),nf("cf_",i),"cq1","L1",42),nv("foo" + i));
  }
  trf.closeWriter();
  trf.openReader();
  for (int i=0; i < 2499; i++) {
    trf.seek(nk(nf("r_",0),nf("cf_",i),"cq1","L1",42).followingKey(PartialKey.ROW_COLFAM));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),nf("cf_",i + 1),"cq1","L1",42),trf.iter.getTopKey());
  }
  for (int i=0; i < 2499; i+=2) {
    trf.seek(nk(nf("r_",0),nf("cf_",i),"cq1","L1",42).followingKey(PartialKey.ROW_COLFAM));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),nf("cf_",i + 1),"cq1","L1",42),trf.iter.getTopKey());
  }
  for (int i=2498; i >= 0; i--) {
    trf.seek(nk(nf("r_",0),nf("cf_",i),"cq1","L1",42).followingKey(PartialKey.ROW_COLFAM));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),nf("cf_",i + 1),"cq1","L1",42),trf.iter.getTopKey());
  }
  trf.closeReader();
  trf=new TestRFile(conf);
  trf.openWriter();
  for (int i=0; i < 2500; i++) {
    trf.writer.append(nk(nf("r_",0),nf("cf_",0),nf("cq_",i),"L1",42),nv("foo" + i));
  }
  trf.closeWriter();
  trf.openReader();
  for (int i=0; i < 2499; i++) {
    trf.seek(nk(nf("r_",0),nf("cf_",0),nf("cq_",i),"L1",42).followingKey(PartialKey.ROW_COLFAM_COLQUAL));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),nf("cf_",0),nf("cq_",i + 1),"L1",42),trf.iter.getTopKey());
  }
  for (int i=0; i < 2499; i+=2) {
    trf.seek(nk(nf("r_",0),nf("cf_",0),nf("cq_",i),"L1",42).followingKey(PartialKey.ROW_COLFAM_COLQUAL));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),nf("cf_",0),nf("cq_",i + 1),"L1",42),trf.iter.getTopKey());
  }
  for (int i=2498; i >= 0; i--) {
    trf.seek(nk(nf("r_",0),nf("cf_",0),nf("cq_",i),"L1",42).followingKey(PartialKey.ROW_COLFAM_COLQUAL));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),nf("cf_",0),nf("cq_",i + 1),"L1",42),trf.iter.getTopKey());
  }
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-14 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test19() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.append(nk("0000","cf1","doe,john","",4),nv("1123 West Left st"));
  trf.writer.append(nk("0002","cf2","doe,jane","",5),nv("1124 East Right st"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  DataOutputStream dos=trf.writer.createMetaStore("count");
  dos.writeInt(2);
  dos.writeUTF("data1");
  dos.writeInt(1);
  dos.writeUTF("data2");
  dos.writeInt(1);
  dos.close();
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  DataInputStream in=trf.reader.getMetaStore("count");
  assertEquals(2,in.readInt());
  assertEquals("data1",in.readUTF());
  assertEquals(1,in.readInt());
  assertEquals("data2",in.readUTF());
  assertEquals(1,in.readInt());
  in.close();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.file.rfile.RelativeKeyTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadWritePrefix() throws IOException {
  Key prevKey=new Key("row1","columnfamily1","columnqualifier1","columnvisibility1",1000);
  Key newKey=new Key("row2","columnfamily2","columnqualifier2","columnvisibility2",3000);
  RelativeKey expected=new RelativeKey(prevKey,newKey);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(baos);
  expected.write(out);
  RelativeKey actual=new RelativeKey();
  actual.setPrevKey(prevKey);
  actual.readFields(new DataInputStream(new ByteArrayInputStream(baos.toByteArray())));
  assertEquals(expected.getKey(),actual.getKey());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBasicRelativeKey(){
  assertEquals(1,UnsynchronizedBuffer.nextArraySize(0));
  assertEquals(1,UnsynchronizedBuffer.nextArraySize(1));
  assertEquals(2,UnsynchronizedBuffer.nextArraySize(2));
  assertEquals(4,UnsynchronizedBuffer.nextArraySize(3));
  assertEquals(4,UnsynchronizedBuffer.nextArraySize(4));
  assertEquals(8,UnsynchronizedBuffer.nextArraySize(5));
  assertEquals(8,UnsynchronizedBuffer.nextArraySize(8));
  assertEquals(16,UnsynchronizedBuffer.nextArraySize(9));
  assertEquals(1 << 16,UnsynchronizedBuffer.nextArraySize((1 << 16) - 1));
  assertEquals(1 << 16,UnsynchronizedBuffer.nextArraySize(1 << 16));
  assertEquals(1 << 17,UnsynchronizedBuffer.nextArraySize((1 << 16) + 1));
  assertEquals(1 << 30,UnsynchronizedBuffer.nextArraySize((1 << 30) - 1));
  assertEquals(1 << 30,UnsynchronizedBuffer.nextArraySize(1 << 30));
  assertEquals(Integer.MAX_VALUE,UnsynchronizedBuffer.nextArraySize(Integer.MAX_VALUE - 1));
  assertEquals(Integer.MAX_VALUE,UnsynchronizedBuffer.nextArraySize(Integer.MAX_VALUE));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSeekMiddle() throws IOException {
  int seekIndex=expectedKeys.size() / 2;
  Key seekKey=expectedKeys.get(seekIndex);
  Key prevKey=new Key();
  Key currKey=null;
  MutableByteSequence value=new MutableByteSequence(new byte[64],0,0);
  RelativeKey.SkippR skippr=RelativeKey.fastSkip(in,seekKey,value,prevKey,currKey);
  assertEquals(seekIndex + 1,skippr.skipped);
  assertEquals(expectedKeys.get(seekIndex - 1),skippr.prevKey);
  assertEquals(expectedKeys.get(seekIndex),skippr.rk.getKey());
  assertEquals(expectedValues.get(seekIndex).toString(),value.toString());
  skippr.rk.readFields(in);
  assertEquals(expectedValues.get(seekIndex + 1).toString(),value.toString());
  in.reset();
  Key fKey=expectedKeys.get(seekIndex).followingKey(PartialKey.ROW_COLFAM_COLQUAL);
  int i;
  for (i=seekIndex; expectedKeys.get(i).compareTo(fKey) < 0; i++) {
  }
  skippr=RelativeKey.fastSkip(in,expectedKeys.get(i),value,prevKey,currKey);
  assertEquals(i + 1,skippr.skipped);
  assertEquals(expectedKeys.get(i - 1),skippr.prevKey);
  assertEquals(expectedKeys.get(i),skippr.rk.getKey());
  assertEquals(expectedValues.get(i).toString(),value.toString());
  skippr=RelativeKey.fastSkip(in,expectedKeys.get(i),value,expectedKeys.get(i - 1),expectedKeys.get(i));
  assertEquals(0,skippr.skipped);
  assertEquals(expectedKeys.get(i - 1),skippr.prevKey);
  assertEquals(expectedKeys.get(i),skippr.rk.getKey());
  assertEquals(expectedValues.get(i).toString(),value.toString());
  fKey=expectedKeys.get(i).followingKey(PartialKey.ROW_COLFAM);
  int j;
  for (j=i; expectedKeys.get(j).compareTo(fKey) < 0; j++) {
  }
  skippr=RelativeKey.fastSkip(in,fKey,value,expectedKeys.get(i - 1),expectedKeys.get(i));
  assertEquals(j - i,skippr.skipped);
  assertEquals(expectedKeys.get(j - 1),skippr.prevKey);
  assertEquals(expectedKeys.get(j),skippr.rk.getKey());
  assertEquals(expectedValues.get(j).toString(),value.toString());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSeekBeforeEverything() throws IOException {
  Key seekKey=new Key();
  Key prevKey=new Key();
  Key currKey=null;
  MutableByteSequence value=new MutableByteSequence(new byte[64],0,0);
  RelativeKey.SkippR skippr=RelativeKey.fastSkip(in,seekKey,value,prevKey,currKey);
  assertEquals(1,skippr.skipped);
  assertEquals(new Key(),skippr.prevKey);
  assertEquals(expectedKeys.get(0),skippr.rk.getKey());
  assertEquals(expectedValues.get(0).toString(),value.toString());
  skippr.rk.readFields(in);
  assertEquals(expectedKeys.get(1),skippr.rk.getKey());
  in.reset();
  seekKey=new Key("a","b","c","d",1);
  seekKey.setDeleted(true);
  skippr=RelativeKey.fastSkip(in,seekKey,value,prevKey,currKey);
  assertEquals(1,skippr.skipped);
  assertEquals(new Key(),skippr.prevKey);
  assertEquals(expectedKeys.get(0),skippr.rk.getKey());
  assertEquals(expectedValues.get(0).toString(),value.toString());
  skippr.rk.readFields(in);
  assertEquals(expectedKeys.get(1),skippr.rk.getKey());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCommonPrefix(){
  ArrayByteSequence exact=new ArrayByteSequence("abc");
  assertEquals(-1,RelativeKey.getCommonPrefix(exact,exact));
  assertEquals(-1,commonPrefixHelper("",""));
  assertEquals(-1,commonPrefixHelper("a","a"));
  assertEquals(-1,commonPrefixHelper("aa","aa"));
  assertEquals(-1,commonPrefixHelper("aaa","aaa"));
  assertEquals(-1,commonPrefixHelper("abab","abab"));
  assertEquals(-1,commonPrefixHelper(new String("aaa"),new ArrayByteSequence("aaa").toString()));
  assertEquals(-1,commonPrefixHelper("abababababab".substring(3,6),"ccababababcc".substring(3,6)));
  assertEquals(0,commonPrefixHelper("","a"));
  assertEquals(0,commonPrefixHelper("a",""));
  assertEquals(0,commonPrefixHelper("a","b"));
  assertEquals(0,commonPrefixHelper("aaaa","bbbb"));
  assertEquals(1,commonPrefixHelper("a","ab"));
  assertEquals(1,commonPrefixHelper("ab","ac"));
  assertEquals(1,commonPrefixHelper("ab","ac"));
  assertEquals(2,commonPrefixHelper("aa","aaaa"));
  assertEquals(4,commonPrefixHelper("aaaaa","aaaab"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.AggregatingIteratorTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test2() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,"2");
  nkv(tm1,1,1,1,2,false,"3");
  nkv(tm1,1,1,1,3,false,"4");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> opts=new HashMap<String,String>();
  opts.put("cf001",SummationAggregator.class.getName());
  ai.init(new SortedMapIterator(tm1),opts,null);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,3),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,1),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,4),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test7() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,2,true,"");
  nkv(tm1,1,1,1,3,false,"4");
  nkv(tm1,1,1,1,4,false,"3");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> opts=new HashMap<String,String>();
  opts.put("cf001",SummationAggregator.class.getName());
  ai.init(new SortedMapIterator(tm1),opts,new DefaultIteratorEnvironment());
  ai.seek(nr(1,1,1,4,true),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,4),ai.getTopKey());
  assertEquals("7",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2,true),ai.getTopKey());
  assertEquals("",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,2,true,"");
  ai=new AggregatingIterator();
  ai.init(new SortedMapIterator(tm1),opts,new DefaultIteratorEnvironment());
  ai.seek(nr(1,1,1,4,true),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2,true),ai.getTopKey());
  assertEquals("",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test3() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,"2");
  nkv(tm1,1,1,1,2,false,"3");
  nkv(tm1,1,1,1,3,false,"4");
  nkv(tm1,2,2,1,1,false,"2");
  nkv(tm1,2,2,1,2,false,"3");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> opts=new HashMap<String,String>();
  opts.put("cf001",SummationAggregator.class.getName());
  ai.init(new SortedMapIterator(tm1),opts,null);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,1),ai.getTopKey());
  assertEquals("2",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
  ai.seek(nr(1,1,1,4),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test4() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,0,0,1,1,false,"7");
  nkv(tm1,1,1,1,1,false,"2");
  nkv(tm1,1,1,1,2,false,"3");
  nkv(tm1,1,1,1,3,false,"4");
  nkv(tm1,2,2,1,1,false,"2");
  nkv(tm1,2,2,1,2,false,"3");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> opts=new HashMap<String,String>();
  opts.put("cf001",SummationAggregator.class.getName());
  ai.init(new SortedMapIterator(tm1),opts,null);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(0,0,1,1),ai.getTopKey());
  assertEquals("7",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,1),ai.getTopKey());
  assertEquals("2",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(0,0,1,0),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test5() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,"2");
  TreeMap<Key,Value> tm2=new TreeMap<Key,Value>();
  nkv(tm2,1,1,1,1,false,"3");
  TreeMap<Key,Value> tm3=new TreeMap<Key,Value>();
  nkv(tm3,1,1,1,1,false,"4");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> opts=new HashMap<String,String>();
  opts.put("cf001",SummationAggregator.class.getName());
  List<SortedKeyValueIterator<Key,Value>> sources=new ArrayList<SortedKeyValueIterator<Key,Value>>(3);
  sources.add(new SortedMapIterator(tm1));
  sources.add(new SortedMapIterator(tm2));
  sources.add(new SortedMapIterator(tm3));
  MultiIterator mi=new MultiIterator(sources,true);
  ai.init(mi,opts,null);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,1),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test1() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,"2");
  nkv(tm1,1,1,1,2,false,"3");
  nkv(tm1,1,1,1,3,false,"4");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> emptyMap=Collections.emptyMap();
  ai.init(new SortedMapIterator(tm1),emptyMap,null);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("4",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,1),ai.getTopKey());
  assertEquals("2",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,1),ai.getTopKey());
  assertEquals("2",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,0),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.FirstEntryInRowIteratorTest </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws IOException {
  TreeMap<Key,Value> sourceMap=new TreeMap<Key,Value>();
  Value emptyValue=new Value("".getBytes());
  sourceMap.put(new Key("r1","cf","cq"),emptyValue);
  sourceMap.put(new Key("r2","cf","cq"),emptyValue);
  sourceMap.put(new Key("r3","cf","cq"),emptyValue);
  TreeMap<Key,Value> resultMap=new TreeMap<Key,Value>();
  long numSourceEntries=sourceMap.size();
  long numNexts=process(sourceMap,resultMap,new Range(),10);
  assertEquals(numNexts,numSourceEntries);
  assertEquals(sourceMap.size(),resultMap.size());
  for (int i=0; i < 20; i++) {
    sourceMap.put(new Key("r2","cf","cq" + i),emptyValue);
  }
  resultMap.clear();
  numNexts=process(sourceMap,resultMap,new Range(new Key("r1"),(new Key("r2")).followingKey(PartialKey.ROW)),10);
  assertEquals(numNexts,resultMap.size() + 10);
  assertEquals(resultMap.size(),2);
  resultMap.clear();
  numNexts=process(sourceMap,resultMap,new Range(new Key("r1"),new Key("r2","cf2")),10);
  assertEquals(numNexts,resultMap.size() + 10);
  assertEquals(resultMap.size(),2);
  resultMap.clear();
  numNexts=process(sourceMap,resultMap,new Range(new Key("r1"),new Key("r4")),10);
  assertEquals(numNexts,resultMap.size() + 10);
  assertEquals(resultMap.size(),3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.IteratorUtilTest </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void onlyReadsRelevantIteratorScopeConfigurations() throws Exception {
  Map<String,String> data=new HashMap<String,String>();
  data.put(Property.TABLE_ITERATOR_SCAN_PREFIX + "foo","50," + SummingCombiner.class.getName());
  data.put(Property.TABLE_ITERATOR_SCAN_PREFIX + "foo.opt." + SummingCombiner.ALL_OPTION,"true");
  data.put(Property.TABLE_ITERATOR_PREFIX + ".fakescope.bar","50," + SummingCombiner.class.getName());
  data.put(Property.TABLE_ITERATOR_SCAN_PREFIX + "foo.opt.fakeopt","fakevalue");
  AccumuloConfiguration conf=new ConfigurationCopy(data);
  List<IterInfo> iterators=new ArrayList<IterInfo>();
  Map<String,Map<String,String>> options=new HashMap<String,Map<String,String>>();
  IteratorUtil.parseIterConf(IteratorScope.scan,iterators,options,conf);
  Assert.assertEquals(1,iterators.size());
  IterInfo ii=iterators.get(0);
  Assert.assertEquals(new IterInfo(50,SummingCombiner.class.getName(),"foo"),ii);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.system.TimeSettingIteratorTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAvoidKeyCopy() throws Exception {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  final Key k=new Key("r0","cf1","cq1",9l);
  tm1.put(k,new Value("v0".getBytes()));
  TimeSettingIterator tsi=new TimeSettingIterator(new SortedMapIterator(tm1),50);
  tsi.seek(new Range(),new HashSet<ByteSequence>(),false);
  assertTrue(tsi.hasTop());
  final Key topKey=tsi.getTopKey();
  assertTrue("Expected the topKey to be the same object",k == topKey);
  assertEquals(new Key("r0","cf1","cq1",50l),topKey);
  assertEquals("v0",tsi.getTopValue().toString());
  tsi.next();
  assertFalse(tsi.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1() throws Exception {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  tm1.put(new Key("r0","cf1","cq1",9l),new Value("v0".getBytes()));
  tm1.put(new Key("r1","cf1","cq1",Long.MAX_VALUE),new Value("v1".getBytes()));
  tm1.put(new Key("r1","cf1","cq1",90l),new Value("v2".getBytes()));
  tm1.put(new Key("r1","cf1","cq1",0l),new Value("v3".getBytes()));
  tm1.put(new Key("r2","cf1","cq1",6l),new Value("v4".getBytes()));
  TimeSettingIterator tsi=new TimeSettingIterator(new SortedMapIterator(tm1),50);
  tsi.seek(new Range(new Key("r1","cf1","cq1",50l),true,new Key("r1","cf1","cq1",50l),true),new HashSet<ByteSequence>(),false);
  assertTrue(tsi.hasTop());
  assertEquals(new Key("r1","cf1","cq1",50l),tsi.getTopKey());
  assertEquals("v1",tsi.getTopValue().toString());
  tsi.next();
  assertTrue(tsi.hasTop());
  assertEquals(new Key("r1","cf1","cq1",50l),tsi.getTopKey());
  assertEquals("v2",tsi.getTopValue().toString());
  tsi.next();
  assertTrue(tsi.hasTop());
  assertEquals(new Key("r1","cf1","cq1",50l),tsi.getTopKey());
  assertEquals("v3",tsi.getTopValue().toString());
  tsi.next();
  assertFalse(tsi.hasTop());
  tsi.seek(new Range(new Key("r1","cf1","cq1",50l),false,null,true),new HashSet<ByteSequence>(),false);
  assertTrue(tsi.hasTop());
  assertEquals(new Key("r2","cf1","cq1",50l),tsi.getTopKey());
  assertEquals("v4",tsi.getTopValue().toString());
  tsi.next();
  assertFalse(tsi.hasTop());
  tsi.seek(new Range(null,true,new Key("r1","cf1","cq1",50l),false),new HashSet<ByteSequence>(),false);
  assertTrue(tsi.hasTop());
  assertEquals(new Key("r0","cf1","cq1",50l),tsi.getTopKey());
  assertEquals("v0",tsi.getTopValue().toString());
  tsi.next();
  assertFalse(tsi.hasTop());
  tsi.seek(new Range(new Key("r1","cf1","cq1",51l),true,new Key("r1","cf1","cq1",50l),false),new HashSet<ByteSequence>(),false);
  assertFalse(tsi.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.BigDecimalCombinerTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMin() throws IOException {
  ai=new BigDecimalCombiner.BigDecimalMinCombiner();
  IteratorSetting is=new IteratorSetting(1,BigDecimalCombiner.BigDecimalMinCombiner.class);
  Combiner.setColumns(is,columns);
  ai.init(new SortedMapIterator(tm1),is.getOptions(),CombinerTest.SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(CombinerTest.nk(1,1,1,3),ai.getTopKey());
  assertEquals(-14.0,encoder.decode(ai.getTopValue().get()).doubleValue(),delta);
  verify();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSums() throws IOException {
  ai=new BigDecimalCombiner.BigDecimalSummingCombiner();
  IteratorSetting is=new IteratorSetting(1,BigDecimalCombiner.BigDecimalSummingCombiner.class);
  Combiner.setColumns(is,columns);
  ai.init(new SortedMapIterator(tm1),is.getOptions(),CombinerTest.SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(CombinerTest.nk(1,1,1,3),ai.getTopKey());
  assertEquals(-9.7,encoder.decode(ai.getTopValue().get()).doubleValue(),delta);
  verify();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMax() throws IOException {
  ai=new BigDecimalCombiner.BigDecimalMaxCombiner();
  IteratorSetting is=new IteratorSetting(1,BigDecimalCombiner.BigDecimalMaxCombiner.class);
  Combiner.setColumns(is,columns);
  ai.init(new SortedMapIterator(tm1),is.getOptions(),CombinerTest.SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(CombinerTest.nk(1,1,1,3),ai.getTopKey());
  assertEquals(2.3,encoder.decode(ai.getTopValue().get()).doubleValue(),delta);
  verify();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.CombinerTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sumAllColumns() throws IOException {
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  tm.put(new Key("r","count","a",1),new Value("1".getBytes()));
  tm.put(new Key("r","count","a",2),new Value("1".getBytes()));
  tm.put(new Key("r","count","b",3),new Value("1".getBytes()));
  tm.put(new Key("r","count","b",4),new Value("1".getBytes()));
  tm.put(new Key("r","count","b",5),new Value("1".getBytes()));
  tm.put(new Key("r","count","c",6),new Value("1".getBytes()));
  SortedMapIterator smi=new SortedMapIterator(tm);
  Combiner iter=new SummingCombiner();
  IteratorSetting s=new IteratorSetting(10,"s",SummingCombiner.class);
  SummingCombiner.setColumns(s,Collections.singletonList(new IteratorSetting.Column("count")));
  SummingCombiner.setEncodingType(s,LongCombiner.StringEncoder.class);
  iter.init(smi,s.getOptions(),SCAN_IE);
  Combiner iter2=new SummingCombiner();
  IteratorSetting s2=new IteratorSetting(10,"s2",SummingCombiner.class);
  SummingCombiner.setColumns(s2,Collections.singletonList(new IteratorSetting.Column("count","a")));
  SummingCombiner.setEncodingType(s2,LongCombiner.StringEncoder.class);
  iter2.init(iter,s.getOptions(),SCAN_IE);
  iter2.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(iter2.hasTop());
  assertEquals("2",iter2.getTopValue().toString());
  iter2.next();
  assertTrue(iter2.hasTop());
  assertEquals("3",iter2.getTopValue().toString());
  iter2.next();
  assertTrue(iter2.hasTop());
  assertEquals("1",iter2.getTopValue().toString());
  iter2.next();
  assertFalse(iter2.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test7() throws IOException {
  Encoder<Long> encoder=LongCombiner.FIXED_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,2,true,0l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  nkv(tm1,1,1,1,4,false,3l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,SummingCombiner.Type.FIXEDLEN);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(nr(1,1,1,4,true),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,4),ai.getTopKey());
  assertEquals("7",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2,true),ai.getTopKey());
  assertEquals("0",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,2,true,0l,encoder);
  ai=new SummingCombiner();
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(nr(1,1,1,4,true),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2,true),ai.getTopKey());
  assertEquals("0",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test3() throws IOException {
  Encoder<Long> encoder=LongCombiner.FIXED_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,2l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  nkv(tm1,2,2,1,1,false,2l,encoder);
  nkv(tm1,2,2,1,2,false,3l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,FixedLenEncoder.class.getName());
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,1),ai.getTopKey());
  assertEquals("2",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.seek(nr(1,1,1,4),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test4() throws IOException {
  Encoder<Long> encoder=LongCombiner.STRING_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,0,0,1,1,false,7l,encoder);
  nkv(tm1,1,1,1,1,false,2l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  nkv(tm1,2,2,1,1,false,2l,encoder);
  nkv(tm1,2,2,1,2,false,3l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,SummingCombiner.Type.STRING);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(0,0,1,1),ai.getTopKey());
  assertEquals("7",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,1),ai.getTopKey());
  assertEquals("2",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(0,0,1,0),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,SummingCombiner.Type.STRING);
  Combiner.setCombineAllColumns(is,true);
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(0,0,1,1),ai.getTopKey());
  assertEquals("7",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("5",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1() throws IOException {
  Encoder<Long> encoder=LongCombiner.VAR_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,2l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,SummingCombiner.Type.VARLEN);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("2")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("4",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,1),ai.getTopKey());
  assertEquals("2",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,1),ai.getTopKey());
  assertEquals("2",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,0),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeepCopy() throws IOException {
  Encoder<Long> encoder=LongCombiner.FIXED_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,2l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  nkv(tm1,2,2,1,1,false,2l,encoder);
  nkv(tm1,2,2,1,2,false,3l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,FixedLenEncoder.class.getName());
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  SortedKeyValueIterator<Key,Value> ai2=ai.deepCopy(null);
  SortedKeyValueIterator<Key,Value> ai3=ai.deepCopy(null);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,1),ai.getTopKey());
  assertEquals("2",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai2.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai2.hasTop());
  assertEquals(nk(2,2,1,2),ai2.getTopKey());
  assertEquals("3",encoder.decode(ai2.getTopValue().get()).toString());
  ai3.seek(nr(1,1,1,4),EMPTY_COL_FAMS,false);
  assertTrue(ai3.hasTop());
  assertEquals(nk(1,1,1,3),ai3.getTopKey());
  assertEquals("9",encoder.decode(ai3.getTopValue().get()).toString());
  ai3.next();
  assertTrue(ai3.hasTop());
  assertEquals(nk(2,2,1,2),ai3.getTopKey());
  assertEquals("3",encoder.decode(ai3.getTopValue().get()).toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test5() throws IOException {
  Encoder<Long> encoder=LongCombiner.STRING_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,2l,encoder);
  TreeMap<Key,Value> tm2=new TreeMap<Key,Value>();
  nkv(tm2,1,1,1,1,false,3l,encoder);
  TreeMap<Key,Value> tm3=new TreeMap<Key,Value>();
  nkv(tm3,1,1,1,1,false,4l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,StringEncoder.class);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  List<SortedKeyValueIterator<Key,Value>> sources=new ArrayList<SortedKeyValueIterator<Key,Value>>(3);
  sources.add(new SortedMapIterator(tm1));
  sources.add(new SortedMapIterator(tm2));
  sources.add(new SortedMapIterator(tm3));
  MultiIterator mi=new MultiIterator(sources,true);
  ai.init(mi,is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,1),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void maxMinTest() throws IOException {
  Encoder<Long> encoder=LongCombiner.VAR_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,4l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,2l,encoder);
  Combiner ai=new MaxCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,SummingCombiner.Type.VARLEN);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("4",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai=new MinCombiner();
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("2",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void valueIteratorTest() throws IOException {
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  tm.put(new Key("r","f","q",1),new Value("1".getBytes()));
  tm.put(new Key("r","f","q",2),new Value("2".getBytes()));
  SortedMapIterator smi=new SortedMapIterator(tm);
  smi.seek(new Range(),EMPTY_COL_FAMS,false);
  ValueIterator iter=new ValueIterator(smi);
  assertEquals(iter.next().toString(),"2");
  assertEquals(iter.next().toString(),"1");
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAdds(){
  assertEquals(LongCombiner.safeAdd(Long.MIN_VALUE + 5,-10),Long.MIN_VALUE);
  assertEquals(LongCombiner.safeAdd(Long.MAX_VALUE - 5,10),Long.MAX_VALUE);
  assertEquals(LongCombiner.safeAdd(Long.MIN_VALUE + 5,-5),Long.MIN_VALUE);
  assertEquals(LongCombiner.safeAdd(Long.MAX_VALUE - 5,5),Long.MAX_VALUE);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2() throws IOException {
  Encoder<Long> encoder=LongCombiner.VAR_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,2l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,VarLenEncoder.class);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,3),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,1),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,4),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.FilterTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test3() throws IOException {
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  HashSet<Column> hsc=new HashSet<Column>();
  hsc.add(new Column("c".getBytes(),null,null));
  Text colf1=new Text("a");
  Text colq1=new Text("b");
  Text colf2=new Text("c");
  Text colq2=new Text("d");
  Text colf;
  Text colq;
  for (int i=0; i < 1000; i++) {
    if (Math.abs(Math.ceil(i / 2.0) - i / 2.0) < .001) {
      colf=colf1;
      colq=colq1;
    }
 else {
      colf=colf2;
      colq=colq2;
    }
    Key k=new Key(new Text(String.format("%03d",i)),colf,colq);
    k.setTimestamp(157l);
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 1000);
  ColumnQualifierFilter a=new ColumnQualifierFilter(new SortedMapIterator(tm),hsc);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),1000);
  hsc=new HashSet<Column>();
  hsc.add(new Column("a".getBytes(),"b".getBytes(),null));
  a=new ColumnQualifierFilter(new SortedMapIterator(tm),hsc);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  int size=size(a);
  assertTrue("size was " + size,size == 500);
  hsc=new HashSet<Column>();
  a=new ColumnQualifierFilter(new SortedMapIterator(tm),hsc);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  size=size(a);
  assertTrue("size was " + size,size == 1000);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimestampFilter() throws IOException, ParseException {
  Text colf=new Text("a");
  Text colq=new Text("b");
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  for (int i=0; i < 100; i++) {
    Key k=new Key(new Text(String.format("%02d",i)),colf,colq);
    k.setTimestamp(i);
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 100);
  SimpleDateFormat dateParser=new SimpleDateFormat("yyyyMMddHHmmssz");
  long baseTime=dateParser.parse("19990101000000GMT").getTime();
  tm.clear();
  for (int i=0; i < 100; i++) {
    Key k=new Key(new Text(String.format("%02d",i)),colf,colq);
    k.setTimestamp(baseTime + (i * 1000));
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 100);
  TimestampFilter a=new TimestampFilter();
  IteratorSetting is=new IteratorSetting(1,TimestampFilter.class);
  TimestampFilter.setRange(is,"19990101010011GMT+01:00","19990101010031GMT+01:00");
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a=(TimestampFilter)a.deepCopy(null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),21);
  TimestampFilter.setRange(is,baseTime + 11000,baseTime + 31000);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),21);
  TimestampFilter.setEnd(is,"19990101000031GMT",false);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),20);
  TimestampFilter.setStart(is,"19990101000011GMT",false);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),19);
  TimestampFilter.setEnd(is,"19990101000031GMT",true);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),20);
  is.clearOptions();
  TimestampFilter.setStart(is,"19990101000011GMT",true);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),89);
  TimestampFilter.setStart(is,"19990101000011GMT",false);
  assertTrue(a.validateOptions(is.getOptions()));
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),88);
  is.clearOptions();
  TimestampFilter.setEnd(is,"19990101000031GMT",true);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),32);
  TimestampFilter.setEnd(is,"19990101000031GMT",false);
  assertTrue(a.validateOptions(is.getOptions()));
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),31);
  TimestampFilter.setEnd(is,253402300800001l,true);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  is.clearOptions();
  is.addOption(TimestampFilter.START,"19990101000011GMT");
  assertTrue(a.validateOptions(is.getOptions()));
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),89);
  is.clearOptions();
  is.addOption(TimestampFilter.END,"19990101000031GMT");
  assertTrue(a.validateOptions(is.getOptions()));
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),32);
  try {
    a.validateOptions(EMPTY_OPTS);
    assertTrue(false);
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2a() throws IOException {
  Text colf=new Text("a");
  Text colq=new Text("b");
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  IteratorSetting is=new IteratorSetting(1,ColumnAgeOffFilter.class);
  ColumnAgeOffFilter.addTTL(is,new IteratorSetting.Column("a"),901l);
  long ts=System.currentTimeMillis();
  for (long i=0; i < 1000; i++) {
    Key k=new Key(new Text(String.format("%03d",i)),colf,colq,ts - i);
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 1000);
  ColumnAgeOffFilter a=new ColumnAgeOffFilter();
  assertTrue(a.validateOptions(is.getOptions()));
  a.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  a.overrideCurrentTime(ts);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),902);
  ColumnAgeOffFilter.addTTL(is,new IteratorSetting.Column("a","b"),101l);
  a.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  a.overrideCurrentTime(ts);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),102);
  ColumnAgeOffFilter.removeTTL(is,new IteratorSetting.Column("a","b"));
  a.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  a=(ColumnAgeOffFilter)a.deepCopy(null);
  a.overrideCurrentTime(ts);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),902);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2() throws IOException {
  Text colf=new Text("a");
  Text colq=new Text("b");
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  for (int i=0; i < 1000; i++) {
    Key k=new Key(new Text(String.format("%03d",i)),colf,colq);
    k.setTimestamp(i);
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 1000);
  SortedKeyValueIterator<Key,Value> a=new AgeOffFilter();
  IteratorSetting is=new IteratorSetting(1,AgeOffFilter.class);
  AgeOffFilter.setTTL(is,101l);
  AgeOffFilter.setCurrentTime(is,1001l);
  AgeOffFilter.setNegate(is,true);
  assertTrue(((AgeOffFilter)a).validateOptions(is.getOptions()));
  try {
    ((AgeOffFilter)a).validateOptions(EMPTY_OPTS);
    assertTrue(false);
  }
 catch (  IllegalArgumentException e) {
  }
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a=a.deepCopy(null);
  SortedKeyValueIterator<Key,Value> copy=a.deepCopy(null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),900);
  copy.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(copy),900);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.RowEncodingIteratorTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEncodeAll() throws IOException {
  byte[] kbVal=new byte[1024];
  SortedMap<Key,Value> map1=new TreeMap<Key,Value>();
  pkv(map1,"row1","cf1","cq1","cv1",5,kbVal);
  pkv(map1,"row1","cf1","cq2","cv1",6,kbVal);
  SortedMap<Key,Value> map2=new TreeMap<Key,Value>();
  pkv(map2,"row2","cf1","cq1","cv1",5,kbVal);
  pkv(map2,"row2","cf1","cq2","cv1",6,kbVal);
  SortedMap<Key,Value> map3=new TreeMap<Key,Value>();
  pkv(map3,"row3","cf1","cq1","cv1",5,kbVal);
  pkv(map3,"row3","cf1","cq2","cv1",6,kbVal);
  SortedMap<Key,Value> map=new TreeMap<Key,Value>();
  map.putAll(map1);
  map.putAll(map2);
  map.putAll(map3);
  SortedMapIterator src=new SortedMapIterator(map);
  Range range=new Range(new Text("row1"),true,new Text("row2"),true);
  RowEncodingIteratorImpl iter=new RowEncodingIteratorImpl();
  Map<String,String> bigBufferOpts=new HashMap<String,String>();
  bigBufferOpts.put(RowEncodingIterator.MAX_BUFFER_SIZE_OPT,"3K");
  iter.init(src,bigBufferOpts,new DummyIteratorEnv());
  iter.seek(range,new ArrayList<ByteSequence>(),false);
  assertTrue(iter.hasTop());
  assertEquals(map1,RowEncodingIteratorImpl.decodeRow(iter.getTopKey(),iter.getTopValue()));
  range=new Range(iter.getTopKey(),false,range.getEndKey(),range.isEndKeyInclusive());
  iter.seek(range,new ArrayList<ByteSequence>(),false);
  assertTrue(iter.hasTop());
  assertEquals(map2,RowEncodingIteratorImpl.decodeRow(iter.getTopKey(),iter.getTopValue()));
  iter.next();
  assertFalse(iter.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.RowFilterTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test1() throws Exception {
  ColumnFamilySkippingIterator source=new ColumnFamilySkippingIterator(new SortedMapIterator(createKeyValues()));
  RowFilter filter=new SummingRowFilter();
  filter.init(source,Collections.<String,String>emptyMap(),new DefaultIteratorEnvironment());
  filter.seek(new Range(),Collections.<ByteSequence>emptySet(),false);
  assertEquals(new HashSet<String>(Arrays.asList("2","3")),getRows(filter));
  ByteSequence cf=new ArrayByteSequence("cf2");
  filter.seek(new Range(),ImmutableSet.of(cf),true);
  assertEquals(new HashSet<String>(Arrays.asList("1","3","0","4")),getRows(filter));
  filter.seek(new Range("0","4"),Collections.<ByteSequence>emptySet(),false);
  assertEquals(new HashSet<String>(Arrays.asList("2","3")),getRows(filter));
  filter.seek(new Range("2"),Collections.<ByteSequence>emptySet(),false);
  assertEquals(new HashSet<String>(Arrays.asList("2")),getRows(filter));
  filter.seek(new Range("4"),Collections.<ByteSequence>emptySet(),false);
  assertEquals(new HashSet<String>(),getRows(filter));
  filter.seek(new Range("4"),ImmutableSet.of(cf),true);
  assertEquals(new HashSet<String>(Arrays.asList("4")),getRows(filter));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFilterConjunction() throws Exception {
  SortedMapIterator source=new SortedMapIterator(createKeyValues());
  RowFilter filter0=new RowZeroOrOneFilter();
  filter0.init(source,Collections.<String,String>emptyMap(),new DefaultIteratorEnvironment());
  RowFilter filter=new RowOneOrTwoFilter();
  filter.init(filter0,Collections.<String,String>emptyMap(),new DefaultIteratorEnvironment());
  filter.seek(new Range(),Collections.<ByteSequence>emptySet(),false);
  assertEquals(new HashSet<String>(Arrays.asList("1")),getRows(filter));
}

</code></pre>

<br>
<pre class="type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deepCopyCopiesTheSource() throws Exception {
  SortedMapIterator source=new SortedMapIterator(createKeyValues());
  RowFilter filter=new RowZeroOrOneFilter();
  filter.init(source,Collections.<String,String>emptyMap(),new DefaultIteratorEnvironment());
  filter.seek(new Range(),Collections.<ByteSequence>emptySet(),false);
  Key firstKey=filter.getTopKey();
  Value firstValue=filter.getTopValue();
  assertEquals("0",firstKey.getRow().toString());
  Key lastKeyRead=null;
  for (int i=0; i < 5; i++) {
    filter.next();
    lastKeyRead=filter.getTopKey();
    assertEquals("0",lastKeyRead.getRow().toString());
  }
  RowFilter copy=(RowFilter)filter.deepCopy(new DefaultIteratorEnvironment());
  copy.seek(new Range(),Collections.<ByteSequence>emptySet(),false);
  assertTrue("deepCopy'ed RowFilter did not have a top key",copy.hasTop());
  Key firstKeyFromCopy=copy.getTopKey();
  Value firstValueFromCopy=copy.getTopValue();
  assertEquals(firstKey,firstKeyFromCopy);
  assertEquals(firstValue,firstValueFromCopy);
  filter.next();
  Key finalKeyRead=filter.getTopKey();
  assertTrue("Expected next key read to be greater than the previous after deepCopy",lastKeyRead.compareTo(finalKeyRead) < 0);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChainedRowFilters() throws Exception {
  SortedMapIterator source=new SortedMapIterator(createKeyValues());
  RowFilter filter0=new TrueFilter();
  filter0.init(source,Collections.<String,String>emptyMap(),new DefaultIteratorEnvironment());
  RowFilter filter=new TrueFilter();
  filter.init(filter0,Collections.<String,String>emptyMap(),new DefaultIteratorEnvironment());
  filter.seek(new Range(),Collections.<ByteSequence>emptySet(),false);
  assertEquals(new HashSet<String>(Arrays.asList("0","1","2","3","4")),getRows(filter));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.TransformingIteratorTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReplaceKeyParts() throws Exception {
  TransformingIterator it=new IdentityKeyTransformingIterator();
  Key originalKey=new Key("r","cf","cq","cv",42);
  originalKey.setDeleted(true);
  Key newKey=it.replaceColumnFamily(originalKey,new Text("test"));
  assertEquals(createDeleteKey("r","test","cq","cv",42),newKey);
  newKey=it.replaceColumnQualifier(originalKey,new Text("test"));
  assertEquals(createDeleteKey("r","cf","test","cv",42),newKey);
  newKey=it.replaceColumnVisibility(originalKey,new Text("test"));
  assertEquals(createDeleteKey("r","cf","cq","test",42),newKey);
  newKey=it.replaceKeyParts(originalKey,new Text("testCQ"),new Text("testCV"));
  assertEquals(createDeleteKey("r","cf","testCQ","testCV",42),newKey);
  newKey=it.replaceKeyParts(originalKey,new Text("testCF"),new Text("testCQ"),new Text("testCV"));
  assertEquals(createDeleteKey("r","testCF","testCQ","testCV",42),newKey);
}

</code></pre>

<br>
<pre class="type-13 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDupes() throws Exception {
  setUpTransformIterator(DupeTransformingIterator.class);
  titer.seek(new Range(),new HashSet<ByteSequence>(),false);
  int count=0;
  while (titer.hasTop()) {
    Key key=titer.getTopKey();
    titer.next();
    assertEquals("cf1",key.getColumnFamily().toString());
    assertEquals("cq1",key.getColumnQualifier().toString());
    assertEquals("",key.getColumnVisibility().toString());
    assertEquals(5l,key.getTimestamp());
    count++;
  }
  assertEquals(81,count);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeepCopy() throws Exception {
  ColumnVisibility vis1=new ColumnVisibility("vis1");
  ColumnVisibility vis3=new ColumnVisibility("vis3");
  data.clear();
  Value ev=new Value("".getBytes());
  data.put(new Key("shard001","foo","doc02",vis1,78),ev);
  data.put(new Key("shard001","dog","doc02",vis3,78),ev);
  data.put(new Key("shard001","cat","doc02",vis3,78),ev);
  data.put(new Key("shard001","bar","doc03",vis1,78),ev);
  data.put(new Key("shard001","dog","doc03",vis3,78),ev);
  data.put(new Key("shard001","cat","doc03",vis3,78),ev);
  setUpTransformIterator(ColVisReversingKeyTransformingIterator.class);
  IntersectingIterator iiIter=new IntersectingIterator();
  IteratorSetting iicfg=new IteratorSetting(22,IntersectingIterator.class);
  IntersectingIterator.setColumnFamilies(iicfg,new Text[]{new Text("foo"),new Text("dog"),new Text("cat")});
  iiIter.init(titer,iicfg.getOptions(),null);
  iiIter.seek(new Range(),new HashSet<ByteSequence>(),false);
  assertTrue(iiIter.hasTop());
  Key docKey=iiIter.getTopKey();
  assertEquals("shard001",docKey.getRowData().toString());
  assertEquals("doc02",docKey.getColumnQualifierData().toString());
  iiIter.next();
  assertFalse(iiIter.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.VisibilityFilterTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStaticConfigurators(){
  IteratorSetting is=new IteratorSetting(1,VisibilityFilter.class);
  VisibilityFilter.filterInvalidLabelsOnly(is,false);
  VisibilityFilter.setNegate(is,true);
  VisibilityFilter.setAuthorizations(is,new Authorizations("abc","def"));
  Map<String,String> opts=is.getOptions();
  assertEquals("false",opts.get("filterInvalid"));
  assertEquals("true",opts.get("negate"));
  assertEquals(new Authorizations("abc","def").serialize(),opts.get("auths"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.WholeRowIteratorTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testContinue() throws Exception {
  SortedMap<Key,Value> map1=new TreeMap<Key,Value>();
  pkv(map1,"row1","cf1","cq1","cv1",5,"foo");
  pkv(map1,"row1","cf1","cq2","cv1",6,"bar");
  SortedMap<Key,Value> map2=new TreeMap<Key,Value>();
  pkv(map2,"row2","cf1","cq1","cv1",5,"foo");
  pkv(map2,"row2","cf1","cq2","cv1",6,"bar");
  SortedMap<Key,Value> map3=new TreeMap<Key,Value>();
  pkv(map3,"row3","cf1","cq1","cv1",5,"foo");
  pkv(map3,"row3","cf1","cq2","cv1",6,"bar");
  SortedMap<Key,Value> map=new TreeMap<Key,Value>();
  map.putAll(map1);
  map.putAll(map2);
  map.putAll(map3);
  SortedMapIterator source=new SortedMapIterator(map);
  WholeRowIterator iter=new WholeRowIterator(source);
  Range range=new Range(new Text("row1"),true,new Text("row2"),true);
  iter.seek(range,new ArrayList<ByteSequence>(),false);
  assertTrue(iter.hasTop());
  assertEquals(map1,WholeRowIterator.decodeRow(iter.getTopKey(),iter.getTopValue()));
  range=new Range(iter.getTopKey(),false,range.getEndKey(),range.isEndKeyInclusive());
  iter.seek(range,new ArrayList<ByteSequence>(),false);
  assertTrue(iter.hasTop());
  assertEquals(map2,WholeRowIterator.decodeRow(iter.getTopKey(),iter.getTopValue()));
  iter.next();
  assertFalse(iter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBug1() throws Exception {
  SortedMap<Key,Value> map1=new TreeMap<Key,Value>();
  pkv(map1,"row1","cf1","cq1","cv1",5,"foo");
  pkv(map1,"row1","cf1","cq2","cv1",6,"bar");
  SortedMap<Key,Value> map2=new TreeMap<Key,Value>();
  pkv(map2,"row2","cf1","cq1","cv1",5,"foo");
  SortedMap<Key,Value> map=new TreeMap<Key,Value>();
  map.putAll(map1);
  map.putAll(map2);
  MultiIterator source=new MultiIterator(Collections.singletonList((SortedKeyValueIterator<Key,Value>)new SortedMapIterator(map)),new Range(null,true,new Text("row1"),true));
  WholeRowIterator iter=new WholeRowIterator(source);
  Range range=new Range(new Text("row1"),true,new Text("row2"),true);
  iter.seek(range,new ArrayList<ByteSequence>(),false);
  assertTrue(iter.hasTop());
  assertEquals(map1,WholeRowIterator.decodeRow(iter.getTopKey(),iter.getTopValue()));
  range=new Range(iter.getTopKey(),false,range.getEndKey(),range.isEndKeyInclusive());
  iter.seek(range,new ArrayList<ByteSequence>(),false);
  assertFalse(iter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyStuff() throws IOException {
  SortedMap<Key,Value> map=new TreeMap<Key,Value>();
  SortedMap<Key,Value> map2=new TreeMap<Key,Value>();
  final Map<Text,Boolean> toInclude=new HashMap<Text,Boolean>();
  map.put(new Key(new Text("r1"),new Text("cf1"),new Text("cq1"),new Text("cv1"),1l),new Value("val1".getBytes()));
  map.put(new Key(new Text("r1"),new Text("cf1"),new Text("cq2"),new Text("cv1"),2l),new Value("val2".getBytes()));
  map.put(new Key(new Text("r2"),new Text("cf1"),new Text("cq1"),new Text("cv1"),3l),new Value("val3".getBytes()));
  map.put(new Key(new Text("r2"),new Text("cf2"),new Text("cq1"),new Text("cv1"),4l),new Value("val4".getBytes()));
  map.put(new Key(new Text("r3"),new Text("cf1"),new Text("cq1"),new Text("cv1"),5l),new Value("val4".getBytes()));
  map.put(new Key(new Text("r3"),new Text("cf1"),new Text("cq1"),new Text("cv2"),6l),new Value("val4".getBytes()));
  map.put(new Key(new Text("r4"),new Text("cf1"),new Text("cq1"),new Text("cv1"),7l),new Value("".getBytes()));
  map.put(new Key(new Text("r4"),new Text("cf1"),new Text("cq1"),new Text(""),8l),new Value("val1".getBytes()));
  map.put(new Key(new Text("r4"),new Text("cf1"),new Text(""),new Text("cv1"),9l),new Value("val1".getBytes()));
  map.put(new Key(new Text("r4"),new Text(""),new Text("cq1"),new Text("cv1"),10l),new Value("val1".getBytes()));
  map.put(new Key(new Text(""),new Text("cf1"),new Text("cq1"),new Text("cv1"),11l),new Value("val1".getBytes()));
  boolean b=true;
  int trueCount=0;
  for (  Key k : map.keySet()) {
    if (toInclude.containsKey(k.getRow())) {
      if (toInclude.get(k.getRow())) {
        map2.put(k,map.get(k));
      }
      continue;
    }
    b=!b;
    toInclude.put(k.getRow(),b);
    if (b) {
      trueCount++;
      map2.put(k,map.get(k));
    }
  }
  SortedMapIterator source=new SortedMapIterator(map);
  WholeRowIterator iter=new WholeRowIterator(source);
  SortedMap<Key,Value> resultMap=new TreeMap<Key,Value>();
  iter.seek(new Range(),new ArrayList<ByteSequence>(),false);
  int numRows=0;
  while (iter.hasTop()) {
    numRows++;
    Key rowKey=iter.getTopKey();
    Value rowValue=iter.getTopValue();
    resultMap.putAll(WholeRowIterator.decodeRow(rowKey,rowValue));
    iter.next();
  }
  assertTrue(numRows == 5);
  assertEquals(resultMap,map);
  WholeRowIterator iter2=new WholeRowIterator(source){
    @Override public boolean filter(    Text row,    List<Key> keys,    List<Value> values){
      return toInclude.get(row);
    }
  }
;
  resultMap.clear();
  iter2.seek(new Range(),new ArrayList<ByteSequence>(),false);
  numRows=0;
  while (iter2.hasTop()) {
    numRows++;
    Key rowKey=iter2.getTopKey();
    Value rowValue=iter2.getTopValue();
    resultMap.putAll(WholeRowIterator.decodeRow(rowKey,rowValue));
    iter2.next();
  }
  assertTrue(numRows == trueCount);
  assertEquals(resultMap,map2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.metadata.MetadataServicerTest </h4><pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCorrectServicer() throws AccumuloException, AccumuloSecurityException, TableExistsException, TableNotFoundException {
  MetadataServicer ms=MetadataServicer.forTableId(context,RootTable.ID);
  assertTrue(ms instanceof ServicerForRootTable);
  assertFalse(ms instanceof TableMetadataServicer);
  assertEquals(RootTable.ID,ms.getServicedTableId());
  ms=MetadataServicer.forTableId(context,MetadataTable.ID);
  assertTrue(ms instanceof ServicerForMetadataTable);
  assertTrue(ms instanceof TableMetadataServicer);
  assertEquals(RootTable.NAME,((TableMetadataServicer)ms).getServicingTableName());
  assertEquals(MetadataTable.ID,ms.getServicedTableId());
  ms=MetadataServicer.forTableId(context,ReplicationTable.ID);
  assertTrue(ms instanceof ServicerForUserTables);
  assertTrue(ms instanceof TableMetadataServicer);
  assertEquals(MetadataTable.NAME,((TableMetadataServicer)ms).getServicingTableName());
  assertEquals(ReplicationTable.ID,ms.getServicedTableId());
  ms=MetadataServicer.forTableId(context,userTableId);
  assertTrue(ms instanceof ServicerForUserTables);
  assertTrue(ms instanceof TableMetadataServicer);
  assertEquals(MetadataTable.NAME,((TableMetadataServicer)ms).getServicingTableName());
  assertEquals(userTableId,ms.getServicedTableId());
  ms=MetadataServicer.forTableName(context,RootTable.NAME);
  assertTrue(ms instanceof ServicerForRootTable);
  assertFalse(ms instanceof TableMetadataServicer);
  assertEquals(RootTable.ID,ms.getServicedTableId());
  ms=MetadataServicer.forTableName(context,MetadataTable.NAME);
  assertTrue(ms instanceof ServicerForMetadataTable);
  assertTrue(ms instanceof TableMetadataServicer);
  assertEquals(RootTable.NAME,((TableMetadataServicer)ms).getServicingTableName());
  assertEquals(MetadataTable.ID,ms.getServicedTableId());
  ms=MetadataServicer.forTableName(context,ReplicationTable.NAME);
  assertTrue(ms instanceof ServicerForUserTables);
  assertTrue(ms instanceof TableMetadataServicer);
  assertEquals(MetadataTable.NAME,((TableMetadataServicer)ms).getServicingTableName());
  assertEquals(ReplicationTable.ID,ms.getServicedTableId());
  ms=MetadataServicer.forTableName(context,userTableName);
  assertTrue(ms instanceof ServicerForUserTables);
  assertTrue(ms instanceof TableMetadataServicer);
  assertEquals(MetadataTable.NAME,((TableMetadataServicer)ms).getServicingTableName());
  assertEquals(userTableId,ms.getServicedTableId());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkSystemTableIdentifiers(){
  assertNotEquals(RootTable.ID,MetadataTable.ID);
  assertNotEquals(RootTable.NAME,MetadataTable.NAME);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.replication.ReplicationSchemaTest </h4><pre class="type-2 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalArgumentException.class) public void failOnExtractEmptyFile(){
  String file="";
  Key k=new Key(file);
  Text extractedFile=new Text();
  StatusSection.getFile(k,extractedFile);
  Assert.assertEquals(file,extractedFile.toString());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void orderSerialization(){
  long now=System.currentTimeMillis();
  Mutation m=OrderSection.createMutation("/accumulo/file",now);
  Key k=new Key(new Text(m.getRow()));
  Assert.assertEquals("/accumulo/file",OrderSection.getFile(k));
  Assert.assertEquals(now,OrderSection.getTimeClosed(k));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void extractTableIdUsingText(){
  Text tableId=new Text("1");
  Key k=new Key(new Text("foo"),StatusSection.NAME,tableId);
  Text buffer=new Text();
  StatusSection.getTableId(k,buffer);
  Assert.assertEquals(tableId.toString(),buffer.toString());
}

</code></pre>

<br>
<pre class="type-9 type-13 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void separatorDoesntInterferWithSplit(){
  Text buff=new Text();
  for (long i=1; i < 258; i++) {
    Mutation m=OrderSection.createMutation("/accumulo/file",i);
    Key k=new Key(new Text(m.getRow()));
    Assert.assertEquals("/accumulo/file",OrderSection.getFile(k,buff));
    Assert.assertEquals(i,OrderSection.getTimeClosed(k,buff));
  }
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void extractTableId(){
  Text tableId=new Text("1");
  Key k=new Key(new Text("foo"),StatusSection.NAME,tableId);
  Assert.assertEquals(tableId.toString(),StatusSection.getTableId(k));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void extractFile(){
  String file="hdfs://foo:8020/bar";
  Key k=new Key(new Text(file),StatusSection.NAME);
  Text extractedFile=new Text();
  StatusSection.getFile(k,extractedFile);
  Assert.assertEquals(file,extractedFile.toString());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void orderSerializationWithBuffer(){
  Text buff=new Text();
  long now=System.currentTimeMillis();
  Mutation m=OrderSection.createMutation("/accumulo/file",now);
  Key k=new Key(new Text(m.getRow()));
  Assert.assertEquals("/accumulo/file",OrderSection.getFile(k,buff));
  Assert.assertEquals(now,OrderSection.getTimeClosed(k,buff));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.replication.ReplicationTargetTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void staticToTextHelper() throws Exception {
  ReplicationTarget expected=new ReplicationTarget("foo","bar","1");
  DataOutputBuffer buffer=new DataOutputBuffer();
  expected.write(buffer);
  Text t=new Text();
  t.set(buffer.getData(),0,buffer.getLength());
  Assert.assertEquals(t,expected.toText());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void staticFromTextHelper() throws Exception {
  ReplicationTarget expected=new ReplicationTarget("foo","bar","1");
  DataOutputBuffer buffer=new DataOutputBuffer();
  expected.write(buffer);
  Text t=new Text();
  t.set(buffer.getData(),0,buffer.getLength());
  Assert.assertEquals(expected,ReplicationTarget.from(t));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void staticFromStringHelper() throws Exception {
  ReplicationTarget expected=new ReplicationTarget("foo","bar","1");
  DataOutputBuffer buffer=new DataOutputBuffer();
  expected.write(buffer);
  Text t=new Text();
  t.set(buffer.getData(),0,buffer.getLength());
  Assert.assertEquals(expected,ReplicationTarget.from(t.toString()));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void properEquality(){
  ReplicationTarget expected1=new ReplicationTarget("foo","bar","1");
  Assert.assertEquals(expected1,new ReplicationTarget("foo","bar","1"));
  Assert.assertNotEquals(expected1,new ReplicationTarget("foo","foo","1"));
  Assert.assertNotEquals(expected1,new ReplicationTarget("bar","bar","1"));
  Assert.assertNotEquals(expected1,new ReplicationTarget(null,"bar","1"));
  Assert.assertNotEquals(expected1,new ReplicationTarget("foo",null,"1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.rpc.SaslClientDigestCallbackHandlerTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquality(){
  SaslClientDigestCallbackHandler handler1=new SaslClientDigestCallbackHandler("user","mypass".toCharArray()), handler2=new SaslClientDigestCallbackHandler("user","mypass".toCharArray());
  assertEquals(handler1,handler2);
  assertEquals(handler1.hashCode(),handler2.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.rpc.SaslConnectionParamsTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquality() throws Exception {
  final KerberosToken token=EasyMock.createMock(KerberosToken.class);
  SaslConnectionParams params1=testUser.doAs(new PrivilegedExceptionAction<SaslConnectionParams>(){
    @Override public SaslConnectionParams run() throws Exception {
      final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      final String primary="accumulo";
      clientConf.withSasl(true,primary);
      final AccumuloConfiguration rpcConf=ClientContext.convertClientConfig(clientConf);
      assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
      return new SaslConnectionParams(rpcConf,token);
    }
  }
);
  SaslConnectionParams params2=testUser.doAs(new PrivilegedExceptionAction<SaslConnectionParams>(){
    @Override public SaslConnectionParams run() throws Exception {
      final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      final String primary="accumulo";
      clientConf.withSasl(true,primary);
      final AccumuloConfiguration rpcConf=ClientContext.convertClientConfig(clientConf);
      assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
      return new SaslConnectionParams(rpcConf,token);
    }
  }
);
  assertEquals(params1,params2);
  assertEquals(params1.hashCode(),params2.hashCode());
  final DelegationTokenImpl delToken1=new DelegationTokenImpl(new byte[0],new AuthenticationTokenIdentifier("user",1,10l,20l,"instanceid"));
  SaslConnectionParams params3=testUser.doAs(new PrivilegedExceptionAction<SaslConnectionParams>(){
    @Override public SaslConnectionParams run() throws Exception {
      final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      final String primary="accumulo";
      clientConf.withSasl(true,primary);
      final AccumuloConfiguration rpcConf=ClientContext.convertClientConfig(clientConf);
      assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
      return new SaslConnectionParams(rpcConf,delToken1);
    }
  }
);
  assertNotEquals(params1,params3);
  assertNotEquals(params1.hashCode(),params3.hashCode());
  assertNotEquals(params2,params3);
  assertNotEquals(params2.hashCode(),params3.hashCode());
  final DelegationTokenImpl delToken2=new DelegationTokenImpl(new byte[0],new AuthenticationTokenIdentifier("user",1,10l,20l,"instanceid"));
  SaslConnectionParams params4=testUser.doAs(new PrivilegedExceptionAction<SaslConnectionParams>(){
    @Override public SaslConnectionParams run() throws Exception {
      final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      final String primary="accumulo";
      clientConf.withSasl(true,primary);
      final AccumuloConfiguration rpcConf=ClientContext.convertClientConfig(clientConf);
      assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
      return new SaslConnectionParams(rpcConf,delToken2);
    }
  }
);
  assertNotEquals(params1,params4);
  assertNotEquals(params1.hashCode(),params4.hashCode());
  assertNotEquals(params2,params4);
  assertNotEquals(params2.hashCode(),params4.hashCode());
  assertEquals(params3,params4);
  assertEquals(params3.hashCode(),params4.hashCode());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultParams() throws Exception {
  final KerberosToken token=EasyMock.createMock(KerberosToken.class);
  testUser.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      final String primary="accumulo";
      clientConf.withSasl(true,primary);
      final AccumuloConfiguration rpcConf=ClientContext.convertClientConfig(clientConf);
      assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
      final SaslConnectionParams saslParams=new SaslConnectionParams(rpcConf,token);
      assertEquals(primary,saslParams.getKerberosServerPrimary());
      final QualityOfProtection defaultQop=QualityOfProtection.get(Property.RPC_SASL_QOP.getDefaultValue());
      assertEquals(defaultQop,saslParams.getQualityOfProtection());
      Map<String,String> properties=saslParams.getSaslProperties();
      assertEquals(1,properties.size());
      assertEquals(defaultQop.getQuality(),properties.get(Sasl.QOP));
      assertEquals(username,saslParams.getPrincipal());
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultParamsAsClient() throws Exception {
  final KerberosToken token=EasyMock.createMock(KerberosToken.class);
  testUser.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      final String primary="accumulo";
      clientConf.withSasl(true,primary);
      assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
      final SaslConnectionParams saslParams=new SaslConnectionParams(clientConf,token);
      assertEquals(primary,saslParams.getKerberosServerPrimary());
      final QualityOfProtection defaultQop=QualityOfProtection.get(Property.RPC_SASL_QOP.getDefaultValue());
      assertEquals(defaultQop,saslParams.getQualityOfProtection());
      Map<String,String> properties=saslParams.getSaslProperties();
      assertEquals(1,properties.size());
      assertEquals(defaultQop.getQuality(),properties.get(Sasl.QOP));
      assertEquals(username,saslParams.getPrincipal());
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelegationTokenImpl() throws Exception {
  final DelegationTokenImpl token=new DelegationTokenImpl(new byte[0],new AuthenticationTokenIdentifier("user",1,10l,20l,"instanceid"));
  testUser.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      final String primary="accumulo";
      clientConf.withSasl(true,primary);
      final AccumuloConfiguration rpcConf=ClientContext.convertClientConfig(clientConf);
      assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
      final SaslConnectionParams saslParams=new SaslConnectionParams(rpcConf,token);
      assertEquals(primary,saslParams.getKerberosServerPrimary());
      final QualityOfProtection defaultQop=QualityOfProtection.get(Property.RPC_SASL_QOP.getDefaultValue());
      assertEquals(defaultQop,saslParams.getQualityOfProtection());
      assertEquals(SaslMechanism.DIGEST_MD5,saslParams.getMechanism());
      assertNotNull(saslParams.getCallbackHandler());
      assertEquals(SaslClientDigestCallbackHandler.class,saslParams.getCallbackHandler().getClass());
      Map<String,String> properties=saslParams.getSaslProperties();
      assertEquals(1,properties.size());
      assertEquals(defaultQop.getQuality(),properties.get(Sasl.QOP));
      assertEquals(username,saslParams.getPrincipal());
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.AuthenticationTokenIdentifierTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNullMsg() throws IOException {
  AuthenticationTokenIdentifier token=new AuthenticationTokenIdentifier();
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(baos);
  token.write(out);
  DataInputStream in=new DataInputStream(new ByteArrayInputStream(baos.toByteArray()));
  AuthenticationTokenIdentifier deserializedToken=new AuthenticationTokenIdentifier();
  deserializedToken.readFields(in);
  assertEquals(token,deserializedToken);
  assertEquals(token.hashCode(),deserializedToken.hashCode());
  assertEquals(token.toString(),deserializedToken.toString());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExtendedEquality(){
  String principal="user";
  AuthenticationTokenIdentifier token=new AuthenticationTokenIdentifier(principal);
  assertEquals(token,token);
  AuthenticationTokenIdentifier newToken=new AuthenticationTokenIdentifier(principal,1,5l,10l,"uuid");
  assertNotEquals(token,newToken);
  assertNotEquals(token.hashCode(),newToken.hashCode());
  AuthenticationTokenIdentifier dblNewToken=new AuthenticationTokenIdentifier(principal);
  dblNewToken.setKeyId(1);
  dblNewToken.setIssueDate(5l);
  dblNewToken.setExpirationDate(10l);
  dblNewToken.setInstanceId("uuid");
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialization() throws IOException {
  String principal="my_special_principal";
  AuthenticationTokenIdentifier token=new AuthenticationTokenIdentifier(principal);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(baos);
  token.write(out);
  DataInputStream in=new DataInputStream(new ByteArrayInputStream(baos.toByteArray()));
  AuthenticationTokenIdentifier deserializedToken=new AuthenticationTokenIdentifier();
  deserializedToken.readFields(in);
  assertEquals(token,deserializedToken);
  assertEquals(token.hashCode(),deserializedToken.hashCode());
  assertEquals(token.toString(),deserializedToken.toString());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTokenKind(){
  String principal="my_special_principal";
  AuthenticationTokenIdentifier token=new AuthenticationTokenIdentifier(principal);
  assertEquals(AuthenticationTokenIdentifier.TOKEN_KIND,token.getKind());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUgi(){
  String principal="user";
  AuthenticationTokenIdentifier token=new AuthenticationTokenIdentifier(principal);
  UserGroupInformation actual=token.getUser(), expected=UserGroupInformation.createRemoteUser(principal);
  assertEquals(expected.getAuthenticationMethod(),actual.getAuthenticationMethod());
  assertEquals(expected.getUserName(),expected.getUserName());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquality(){
  String principal="user";
  AuthenticationTokenIdentifier token=new AuthenticationTokenIdentifier(principal);
  assertEquals(token,token);
  AuthenticationTokenIdentifier newToken=new AuthenticationTokenIdentifier(principal);
  assertEquals(token,newToken);
  assertEquals(token.hashCode(),newToken.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.AuthenticationTokenTest </h4><pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSerializeDeserializeToken() throws AccumuloSecurityException, IOException {
  Random random=new Random();
  byte[] randomBytes=new byte[12];
  random.nextBytes(randomBytes);
  boolean allZero=true;
  for (  byte b : randomBytes)   allZero=allZero && b == 0;
  assertFalse(allZero);
  byte[] serialized=AuthenticationTokenSerializer.serialize(new PasswordToken(randomBytes));
  PasswordToken passwordToken=AuthenticationTokenSerializer.deserialize(PasswordToken.class,serialized);
  assertArrayEquals(randomBytes,passwordToken.getPassword());
  serialized=AuthenticationTokenSerializer.serialize(new NullToken());
  AuthenticationToken nullToken=AuthenticationTokenSerializer.deserialize(NullToken.class,serialized);
  assertEquals(new NullToken(),nullToken);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.AuthorizationsTest </h4><pre class="type-2 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=UnsupportedOperationException.class) public void testUnmodifiableList(){
  Authorizations expected=new Authorizations("foo");
  Authorizations actual=new Authorizations("foo");
  assertArrayEquals(expected.getAuthorizationsArray(),actual.getAuthorizationsArray());
  actual.getAuthorizationsBB().add(ByteBuffer.wrap(new byte[]{'a'}));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialization(){
  Authorizations a1=new Authorizations("a","b");
  Authorizations a2=new Authorizations("b","a");
  assertEquals(a1,a2);
  assertEquals(a1.serialize(),a2.serialize());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefensiveAccess(){
  Authorizations expected=new Authorizations("foo","a");
  Authorizations actual=new Authorizations("foo","a");
  for (  byte[] bytes : actual) {
    bytes[0]++;
  }
  assertArrayEquals(expected.getAuthorizationsArray(),actual.getAuthorizationsArray());
  actual.getAuthorizations().get(0)[0]++;
  assertArrayEquals(expected.getAuthorizationsArray(),actual.getAuthorizationsArray());
  assertEquals(expected.serialize(),actual.serialize());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadOnlyByteBuffer(){
  Authorizations expected=new Authorizations("foo");
  Authorizations actual=new Authorizations("foo");
  assertArrayEquals(expected.getAuthorizationsArray(),actual.getAuthorizationsArray());
  actual.getAuthorizationsBB().get(0).array()[0]++;
  assertArrayEquals(expected.getAuthorizationsArray(),actual.getAuthorizationsArray());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEncodeDecode(){
  Authorizations a=new Authorizations("a","abcdefg","hijklmno",",");
  byte[] array=a.getAuthorizationsArray();
  Authorizations b=new Authorizations(array);
  assertEquals(a,b);
  a=new Authorizations();
  array=a.getAuthorizationsArray();
  b=new Authorizations(array);
  assertEquals(a,b);
  a=new Authorizations("","b","c","");
  array=a.getAuthorizationsArray();
  b=new Authorizations(array);
  assertEquals(a,b);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.ColumnVisibilityTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmpty(){
  ColumnVisibility a=new ColumnVisibility();
  ColumnVisibility b=new ColumnVisibility(new byte[0]);
  ColumnVisibility c=new ColumnVisibility("");
  ColumnVisibility d=new ColumnVisibility(new Text());
  assertEquals(a,b);
  assertEquals(a,c);
  assertEquals(a,d);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToString(){
  ColumnVisibility cv=new ColumnVisibility(quote("a"));
  assertEquals("[a]",cv.toString());
  cv=new ColumnVisibility(quote(""));
  assertEquals("[\"\"]",cv.toString());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmptyParseTreesAreEqual(){
  Comparator<Node> comparator=new NodeComparator(new byte[]{});
  Node empty=new ColumnVisibility().getParseTree();
  assertEquals(0,comparator.compare(empty,parse("")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.CredentialsTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEqualsAndHashCode(){
  Credentials nullNullCreds=new Credentials(null,null);
  Credentials abcNullCreds=new Credentials("abc",new NullToken());
  Credentials cbaNullCreds=new Credentials("cba",new NullToken());
  Credentials abcBlahCreds=new Credentials("abc",new PasswordToken("blah"));
  assertEquals(0,nullNullCreds.hashCode());
  assertEquals("abc".hashCode(),abcNullCreds.hashCode());
  assertEquals(abcNullCreds.hashCode(),abcBlahCreds.hashCode());
  assertFalse(abcNullCreds.hashCode() == cbaNullCreds.hashCode());
  assertEquals(abcNullCreds,abcNullCreds);
  assertEquals(new Credentials("abc",new NullToken()),abcNullCreds);
  assertEquals(new Credentials("abc",new PasswordToken("abc".getBytes(UTF_8))),new Credentials("abc",new PasswordToken("abc")));
  assertFalse(nullNullCreds.equals(abcBlahCreds));
  assertFalse(nullNullCreds.equals(abcNullCreds));
  assertFalse(abcNullCreds.equals(abcBlahCreds));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void roundtripThrift() throws DestroyFailedException {
  Credentials creds=new Credentials("test",new PasswordToken("testing"));
  TCredentials tCreds=creds.toThrift(inst);
  Credentials roundtrip=Credentials.fromThrift(tCreds);
  assertEquals("Roundtrip through thirft changed credentials equality",creds,roundtrip);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCredentialsSerialization() throws AccumuloSecurityException {
  Credentials creds=new Credentials("a:b-c",new PasswordToken("d-e-f".getBytes(UTF_8)));
  String serialized=creds.serialize();
  Credentials result=Credentials.deserialize(serialized);
  assertEquals(creds,result);
  assertEquals("a:b-c",result.getPrincipal());
  assertEquals(new PasswordToken("d-e-f"),result.getToken());
  Credentials nullNullCreds=new Credentials(null,null);
  serialized=nullNullCreds.serialize();
  result=Credentials.deserialize(serialized);
  assertEquals(null,result.getPrincipal());
  assertEquals(null,result.getToken());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToString(){
  Credentials creds=new Credentials(null,null);
  assertEquals(Credentials.class.getName() + ":null:null:<hidden>",creds.toString());
  creds=new Credentials("",new NullToken());
  assertEquals(Credentials.class.getName() + "::" + NullToken.class.getName()+ ":<hidden>",creds.toString());
  creds=new Credentials("abc",null);
  assertEquals(Credentials.class.getName() + ":abc:null:<hidden>",creds.toString());
  creds=new Credentials("abc",new PasswordToken(""));
  assertEquals(Credentials.class.getName() + ":abc:" + PasswordToken.class.getName()+ ":<hidden>",creds.toString());
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testToThrift() throws DestroyFailedException {
  Credentials creds=new Credentials("test",new PasswordToken("testing"));
  TCredentials tCreds=creds.toThrift(inst);
  assertEquals("test",tCreds.getPrincipal());
  assertEquals(PasswordToken.class.getName(),tCreds.getTokenClassName());
  assertArrayEquals(AuthenticationTokenSerializer.serialize(new PasswordToken("testing")),tCreds.getToken());
  creds.getToken().destroy();
  try {
    creds.toThrift(inst);
    fail();
  }
 catch (  Exception e) {
    assertTrue(e instanceof RuntimeException);
    assertTrue(e.getCause() instanceof AccumuloSecurityException);
    assertTrue(AccumuloSecurityException.class.cast(e.getCause()).getSecurityErrorCode().equals(SecurityErrorCode.TOKEN_EXPIRED));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.VisibilityConstraintTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testVisibilityNoAuth(){
  mutation.put(D,D,bad,D);
  assertEquals("unauthorized",ENOAUTH,vc.check(env,mutation));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMixedVisibilities(){
  mutation.put(D,D,bad,D);
  mutation.put(D,D,good,D);
  assertEquals("unauthorized",ENOAUTH,vc.check(env,mutation));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.VisibilityEvaluatorTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testQuote(){
  assertEquals("\"A#C\"",quote("A#C"));
  assertEquals("\"A\\\"C\"",quote("A\"C"));
  assertEquals("\"A\\\"\\\\C\"",quote("A\"\\C"));
  assertEquals("ACS",quote("ACS"));
  assertEquals("\"\"",quote(""));
  assertEquals("\"\"",quote(""));
}

</code></pre>

<br>
<pre class="type-8 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnescape(){
  assertEquals("a\"b",VisibilityEvaluator.unescape(new ArrayByteSequence("a\\\"b")).toString());
  assertEquals("a\\b",VisibilityEvaluator.unescape(new ArrayByteSequence("a\\\\b")).toString());
  assertEquals("a\\\"b",VisibilityEvaluator.unescape(new ArrayByteSequence("a\\\\\\\"b")).toString());
  assertEquals("\\\"",VisibilityEvaluator.unescape(new ArrayByteSequence("\\\\\\\"")).toString());
  assertEquals("a\\b\\c\\d",VisibilityEvaluator.unescape(new ArrayByteSequence("a\\\\b\\\\c\\\\d")).toString());
  try {
    VisibilityEvaluator.unescape(new ArrayByteSequence("a\\b"));
    fail("Expected failure to unescape invalid escape sequence");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    VisibilityEvaluator.unescape(new ArrayByteSequence("a\\b\\c"));
    fail("Expected failure to unescape invalid escape sequence");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    VisibilityEvaluator.unescape(new ArrayByteSequence("a\"b\\"));
    fail("Expected failure to unescape invalid escape sequence");
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.crypto.BlockedIOStreamTest </h4><pre class="type-9 type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGiantWrite() throws IOException {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  int blockSize=16;
  BlockedOutputStream blockOut=new BlockedOutputStream(baos,blockSize,blockSize);
  Random r=new Random(22);
  int size=1024 * 1024 * 128;
  byte[] giant=new byte[size];
  byte[] pattern=new byte[1024];
  r.nextBytes(pattern);
  for (int i=0; i < size / 1024; i++) {
    System.arraycopy(pattern,0,giant,i * 1024,1024);
  }
  blockOut.write(giant);
  blockOut.flush();
  blockOut.close();
  baos.close();
  int blocks=(int)Math.ceil(size / (blockSize - 4.0));
  byte[] byteStream=baos.toByteArray();
  assertEquals(blocks * 16,byteStream.length);
  DataInputStream blockIn=new DataInputStream(new BlockedInputStream(new ByteArrayInputStream(byteStream),blockSize,blockSize));
  Arrays.fill(giant,(byte)0);
  blockIn.readFully(giant,0,size);
  blockIn.close();
  for (int i=0; i < size / 1024; i++) {
    byte[] readChunk=new byte[1024];
    System.arraycopy(giant,i * 1024,readChunk,0,1024);
    assertArrayEquals(pattern,readChunk);
  }
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSpillingOverOutputStream() throws IOException {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  BlockedOutputStream blockOut=new BlockedOutputStream(baos,16,16);
  Random r=new Random(22);
  byte[] undersized=new byte[11];
  byte[] perfectSized=new byte[12];
  byte[] overSized=new byte[13];
  byte[] perfectlyOversized=new byte[13];
  byte filler=(byte)r.nextInt();
  r.nextBytes(undersized);
  r.nextBytes(perfectSized);
  r.nextBytes(overSized);
  r.nextBytes(perfectlyOversized);
  blockOut.write(undersized);
  blockOut.write(filler);
  blockOut.flush();
  blockOut.write(perfectSized);
  blockOut.write(filler);
  blockOut.flush();
  blockOut.write(overSized);
  blockOut.write(filler);
  blockOut.flush();
  blockOut.write(undersized);
  blockOut.write(perfectlyOversized);
  blockOut.write(filler);
  blockOut.flush();
  blockOut.close();
  assertEquals(16 * 8,baos.toByteArray().length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.crypto.CryptoTest </h4><pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCryptoModuleParamsParsing(){
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertNotNull(params);
  assertEquals("AES",params.getAlgorithmName());
  assertEquals("CFB",params.getEncryptionMode());
  assertEquals("NoPadding",params.getPadding());
  assertEquals(128,params.getKeyLength());
  assertEquals("SHA1PRNG",params.getRandomNumberGenerator());
  assertEquals("SUN",params.getRandomNumberGeneratorProvider());
  assertEquals("org.apache.accumulo.core.security.crypto.CachingHDFSSecretKeyEncryptionStrategy",params.getKeyEncryptionStrategyClass());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCryptoModuleBasicReadWrite() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_KEK_OFF_CONF);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  byte[] resultingBytes=setUpSampleEncryptedBytes(cryptoModule,params);
  ByteArrayInputStream in=new ByteArrayInputStream(resultingBytes);
  params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  params.setEncryptedInputStream(in);
  params=cryptoModule.getDecryptingInputStream(params);
  InputStream plaintextIn=params.getPlaintextInputStream();
  assertNotNull(plaintextIn);
  assertTrue(plaintextIn != in);
  DataInputStream dataIn=new DataInputStream(plaintextIn);
  String markerString=dataIn.readUTF();
  int markerInt=dataIn.readInt();
  assertEquals(MARKER_STRING,markerString);
  assertEquals(MARKER_INT,markerInt);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoCryptoStream() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_OFF_CONF);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertNotNull(params);
  assertEquals("NullCipher",params.getAlgorithmName());
  assertNull(params.getEncryptionMode());
  assertNull(params.getPadding());
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  assertNotNull(cryptoModule);
  assertTrue(cryptoModule instanceof CryptoModuleFactory.NullCryptoModule);
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  params.setPlaintextOutputStream(out);
  params=cryptoModule.getEncryptingOutputStream(params);
  assertNotNull(params.getEncryptedOutputStream());
  assertEquals(out,params.getEncryptedOutputStream());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKeyEncryptionNormalPath() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  assertNotNull(params.getKeyEncryptionStrategyClass());
  assertEquals("org.apache.accumulo.core.security.crypto.CachingHDFSSecretKeyEncryptionStrategy",params.getKeyEncryptionStrategyClass());
  byte[] resultingBytes=setUpSampleEncryptedBytes(cryptoModule,params);
  params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  params.setOverrideStreamsSecretKeyEncryptionStrategy(true);
  ByteArrayInputStream in=new ByteArrayInputStream(resultingBytes);
  params.setEncryptedInputStream(in);
  params=cryptoModule.getDecryptingInputStream(params);
  assertNotNull(params.getPlaintextInputStream());
  DataInputStream dataIn=new DataInputStream(params.getPlaintextInputStream());
  String markerString=dataIn.readUTF();
  int markerInt=dataIn.readInt();
  assertEquals(MARKER_STRING,markerString);
  assertEquals(MARKER_INT,markerInt);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKeyEncryptionAndCheckThatFileCannotBeReadWithoutKEK() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  assertNotNull(params.getKeyEncryptionStrategyClass());
  assertEquals("org.apache.accumulo.core.security.crypto.CachingHDFSSecretKeyEncryptionStrategy",params.getKeyEncryptionStrategyClass());
  byte[] resultingBytes=setUpSampleEncryptedBytes(cryptoModule,params);
  conf=setAndGetAccumuloConfig(CRYPTO_ON_KEK_OFF_CONF);
  params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  params.setOverrideStreamsSecretKeyEncryptionStrategy(true);
  ByteArrayInputStream in=new ByteArrayInputStream(resultingBytes);
  params.setEncryptedInputStream(in);
  params=cryptoModule.getDecryptingInputStream(params);
  assertNotNull(params.getPlaintextInputStream());
  DataInputStream dataIn=new DataInputStream(params.getPlaintextInputStream());
  exception.expect(IOException.class);
  @SuppressWarnings("unused") String markerString=dataIn.readUTF();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangingCryptoParamsAndCanStillDecryptPreviouslyEncryptedFiles() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  assertNotNull(params.getKeyEncryptionStrategyClass());
  assertEquals("org.apache.accumulo.core.security.crypto.CachingHDFSSecretKeyEncryptionStrategy",params.getKeyEncryptionStrategyClass());
  byte[] resultingBytes=setUpSampleEncryptedBytes(cryptoModule,params);
  params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  params.setAlgorithmName("DESede");
  params.setKeyLength(24 * 8);
  ByteArrayInputStream in=new ByteArrayInputStream(resultingBytes);
  params.setEncryptedInputStream(in);
  params=cryptoModule.getDecryptingInputStream(params);
  assertNotNull(params.getPlaintextInputStream());
  DataInputStream dataIn=new DataInputStream(params.getPlaintextInputStream());
  String markerString=dataIn.readUTF();
  int markerInt=dataIn.readInt();
  assertEquals(MARKER_STRING,markerString);
  assertEquals(MARKER_INT,markerInt);
}

</code></pre>

<br>
<pre class="type-9 type-11 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCryptoModuleDoesntLeakSensitive() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  params.setPlaintextOutputStream(baos);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  cryptoModule.getEncryptingOutputStream(params);
  params.getEncryptedOutputStream().close();
  byte[] streamBytes=baos.toByteArray();
  for (  Property prop : Property.values()) {
    if (prop.isSensitive()) {
      byte[] toCheck=prop.getKey().getBytes();
      assertEquals(-1,Bytes.indexOf(streamBytes,toCheck));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.AsyncSocketAppenderTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDelegates(){
  asa=new AsyncSocketAppender();
  asa.setApplication("myapp");
  asa.setLocationInfo(true);
  asa.setPort(1234);
  asa.setReconnectionDelay(56);
  asa.setRemoteHost("remotehost");
  assertEquals("myapp",asa.getApplication());
  assertEquals(true,asa.getLocationInfo());
  assertEquals(1234,asa.getPort());
  assertEquals(56,asa.getReconnectionDelay());
  assertEquals("remotehost",asa.getRemoteHost());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.ByteBufferUtilTest </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testZeroArrayOffsetAndPosition(){
  byte[] data="0123456789".getBytes(UTF_8);
  ByteBuffer bb1=ByteBuffer.wrap(data,0,4);
  assertEquals("0123",bb1);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testZeroArrayOffsetAndNonZeroPosition(){
  byte[] data="0123456789".getBytes(UTF_8);
  ByteBuffer bb1=ByteBuffer.wrap(data,3,4);
  assertEquals("3456",bb1);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDirectByteBuffer(){
  ByteBuffer bb=ByteBuffer.allocateDirect(10);
  bb.put("0123456789".getBytes(UTF_8));
  bb.rewind();
  assertEquals("0123456789",bb);
  bb.get();
  assertEquals("123456789",bb);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonZeroArrayOffset(){
  byte[] data="0123456789".getBytes(UTF_8);
  ByteBuffer bb1=ByteBuffer.wrap(data,3,4);
  ByteBuffer bb2=bb1.slice();
  Assert.assertEquals(3,bb2.arrayOffset());
  Assert.assertEquals(0,bb2.position());
  Assert.assertEquals(4,bb2.limit());
  assertEquals("3456",bb2);
  bb2.get();
  assertEquals("456",bb2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.LocalityGroupUtilTest </h4><pre class="type-9 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testColumnFamilySet(){
  ConfigurationCopy conf=new ConfigurationCopy();
  conf.set("table.group.lg1","cf1,cf2");
  conf.set("table.groups.enabled","lg1");
  try {
    Map<String,Set<ByteSequence>> groups=LocalityGroupUtil.getLocalityGroups(conf);
    assertEquals(1,groups.size());
    assertNotNull(groups.get("lg1"));
    assertEquals(2,groups.get("lg1").size());
    assertTrue(groups.get("lg1").contains(new ArrayByteSequence("cf1")));
  }
 catch (  LocalityGroupConfigurationError err) {
    fail();
  }
  try {
    conf.set("table.group.lg2","cf1");
    conf.set("table.groups.enabled","lg1,lg2");
    LocalityGroupUtil.getLocalityGroups(conf);
    fail();
  }
 catch (  LocalityGroupConfigurationError err) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEncoding() throws Exception {
  byte test1[]=new byte[256];
  byte test2[]=new byte[256];
  for (int i=0; i < 256; i++) {
    test1[i]=(byte)(0xff & i);
    test2[i]=(byte)(0xff & (255 - i));
  }
  ArrayByteSequence bs1=new ArrayByteSequence(test1);
  String ecf=LocalityGroupUtil.encodeColumnFamily(bs1);
  ByteSequence bs2=LocalityGroupUtil.decodeColumnFamily(ecf);
  assertEquals(bs1,bs2);
  assertEquals(ecf,LocalityGroupUtil.encodeColumnFamily(bs2));
  HashSet<Text> in=new HashSet<Text>();
  HashSet<ByteSequence> in2=new HashSet<ByteSequence>();
  in.add(new Text(test1));
  in2.add(new ArrayByteSequence(test1));
  in.add(new Text(test2));
  in2.add(new ArrayByteSequence(test2));
  Set<ByteSequence> out=LocalityGroupUtil.decodeColumnFamilies(LocalityGroupUtil.encodeColumnFamilies(in));
  assertEquals(in2,out);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.MergeTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMergomatic() throws Exception {
  int i;
  MergeTester test=new MergeTester(10,20,30);
  test.mergomatic(null,"table",null,null,1000,false);
  assertEquals(1,test.merges.size());
  assertArrayEquals(new int[]{10,20,30},sizes(test.merges.get(i=0)));
  test=new MergeTester(1,2,100,1000,17,1000,4,5,6,900);
  test.mergomatic(null,"table",null,null,1000,false);
  assertEquals(2,test.merges.size());
  assertArrayEquals(new int[]{1,2,100},sizes(test.merges.get(i=0)));
  assertArrayEquals(new int[]{4,5,6,900},sizes(test.merges.get(++i)));
  test=new MergeTester(1,2,100,1000,17,1000,4,5,6,900);
  test.mergomatic(null,"table",null,null,1000,true);
  assertEquals(3,test.merges.size());
  assertArrayEquals(new int[]{1,2,100},sizes(test.merges.get(i=0)));
  assertArrayEquals(new int[]{17,1000},sizes(test.merges.get(++i)));
  assertArrayEquals(new int[]{4,5,6,900},sizes(test.merges.get(++i)));
  test=new MergeTester(1,2,1000,17,1000,4,5,6,900);
  test.mergomatic(null,"table",new Text("00004"),null,1000,false);
  assertEquals(1,test.merges.size());
  assertArrayEquals(new int[]{4,5,6,900},sizes(test.merges.get(i=0)));
  test=new MergeTester(1,2,1000,17,1000,4,5,6,900);
  test.mergomatic(null,"table",null,new Text("00004"),1000,false);
  assertEquals(1,test.merges.size());
  assertArrayEquals(new int[]{1,2},sizes(test.merges.get(i=0)));
  test=new MergeTester(1,2,1000,17,1000,4,5,6,900);
  test.mergomatic(null,"table",new Text("00002"),new Text("00004"),1000,true);
  assertEquals(1,test.merges.size());
  assertArrayEquals(new int[]{17,1000},sizes(test.merges.get(i=0)));
  test=new MergeTester(100,250,500,600,100,200,500,200);
  test.mergomatic(null,"table",null,null,1000,false);
  assertEquals(3,test.merges.size());
  assertArrayEquals(new int[]{100,250,500},sizes(test.merges.get(i=0)));
  assertArrayEquals(new int[]{600,100,200},sizes(test.merges.get(++i)));
  assertArrayEquals(new int[]{500,200},sizes(test.merges.get(++i)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.NumUtilTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBigNumberForSize(){
  assertEquals("1,000",bigNumberForSize(1000));
  assertEquals("1.00K",bigNumberForSize(1024));
  assertEquals("1.50K",bigNumberForSize(1024 + (1024 / 2)));
  assertEquals("1,024.00K",bigNumberForSize(1024 * 1024 - 1));
  assertEquals("1.00M",bigNumberForSize(1024 * 1024));
  assertEquals("1.50M",bigNumberForSize(1024 * 1024 + (1024 * 1024 / 2)));
  assertEquals("1,024.00M",bigNumberForSize(1073741823));
  assertEquals("1.00G",bigNumberForSize(1073741824));
  assertEquals("1,024.00G",bigNumberForSize(1099511627775l));
  assertEquals("1.00T",bigNumberForSize(1099511627776l));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBigNumberForQuantity(){
  assertEquals("999",bigNumberForQuantity(999));
  assertEquals("1.00K",bigNumberForQuantity(1000));
  assertEquals("1.02K",bigNumberForQuantity(1024));
  assertEquals("5.00K",bigNumberForQuantity(5000));
  assertEquals("50.00K",bigNumberForQuantity(50000));
  assertEquals("5.00M",bigNumberForQuantity(5000000));
  assertEquals("5.00B",bigNumberForQuantity(5000000000l));
  assertEquals("5.00T",bigNumberForQuantity(5000000000000l));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.OpTimerTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Validate reset functionality
 */
@Test public void verifyReset(){
  OpTimer timer=new OpTimer().start();
  try {
    Thread.sleep(50);
  }
 catch (  InterruptedException ex) {
    log.info("sleep sleep interrupted");
    Thread.currentThread().interrupt();
  }
  timer.stop();
  long tValue=timer.now();
  log.debug("Time value before reset {}",String.format("%.3f ms",timer.scale(TimeUnit.MILLISECONDS)));
  timer.reset().start();
  try {
    Thread.sleep(1);
  }
 catch (  InterruptedException ex) {
    log.info("sleep sleep interrupted");
    Thread.currentThread().interrupt();
  }
  timer.stop();
  assertTrue(timer.now() > 0);
  assertTrue(tValue > timer.now());
  timer.reset();
  log.debug("Time value after reset {}",String.format("%.3f ms",timer.scale(TimeUnit.MILLISECONDS)));
  assertEquals(0,timer.now());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Validate that scale returns correct values.
 */
@Test public void scale(){
  OpTimer timer=new OpTimer().start();
  try {
    Thread.sleep(50);
  }
 catch (  InterruptedException ex) {
    log.info("sleep sleep interrupted");
    Thread.currentThread().interrupt();
  }
  timer.stop();
  long tValue=timer.now();
  assertEquals(tValue / 1000000.0,timer.scale(TimeUnit.MILLISECONDS),0.00000001);
  assertEquals(tValue / 1000000000.0,timer.scale(TimeUnit.SECONDS),0.00000001);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.PairTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test method for {@link org.apache.accumulo.core.util.Pair#toString(java.lang.String,java.lang.String,java.lang.String)}.
 */
@Test public void testToStringStringStringString(){
  Pair<Integer,String> pair=new Pair<Integer,String>(25,"twenty-five");
  assertEquals("---25~~~twenty-five+++",pair.toString("---","~~~","+++"));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test method for {@link org.apache.accumulo.core.util.Pair#getFirst()}.
 */
@Test public void testGetFirst(){
  Pair<Integer,String> pair=new Pair<Integer,String>(25,"twenty-five");
  assertEquals((Integer)25,pair.getFirst());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test method for {@link org.apache.accumulo.core.util.Pair#toString()}.
 */
@Test public void testToString(){
  Pair<Integer,String> pair=new Pair<Integer,String>(25,"twenty-five");
  assertEquals("(25,twenty-five)",pair.toString());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test method for {@link org.apache.accumulo.core.util.Pair#swap()}.
 */
@Test public void testSwap(){
  Pair<Integer,String> pair=new Pair<Integer,String>(25,"twenty-five");
  assertEquals(pair,pair.swap().swap());
  Pair<String,Integer> pair2=new Pair<String,Integer>("twenty-five",25);
  assertEquals(pair,pair2.swap());
  assertEquals(pair2,pair.swap());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test method for {@link org.apache.accumulo.core.util.Pair#toMapEntry()}.
 */
@Test public void testToMapEntry(){
  Pair<Integer,String> pair=new Pair<Integer,String>(10,"IO");
  Entry<Integer,String> entry=pair.toMapEntry();
  assertEquals(pair.getFirst(),entry.getKey());
  assertEquals(pair.getSecond(),entry.getValue());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test method for {@link org.apache.accumulo.core.util.Pair#getSecond()}.
 */
@Test public void testGetSecond(){
  Pair<Integer,String> pair=new Pair<Integer,String>(25,"twenty-five");
  assertEquals("twenty-five",pair.getSecond());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test method for {@link org.apache.accumulo.core.util.Pair#equals(java.lang.Object)}.
 */
@Test public void testEqualsObject(){
  Pair<Integer,String> pair=new Pair<Integer,String>(25,"twenty-five");
  Pair<Integer,String> pair2=new Pair<Integer,String>(25,"twenty-five");
  assertEquals(pair,pair2);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test method for {@link org.apache.accumulo.core.util.Pair#fromEntry(java.util.Map.Entry)}.
 */
@Test public void testFromEntry(){
  Entry<Integer,String> entry=new SimpleImmutableEntry<Integer,String>(10,"IO");
  Pair<Integer,String> pair0=Pair.fromEntry(entry);
  assertEquals(entry.getKey(),pair0.getFirst());
  assertEquals(entry.getValue(),pair0.getSecond());
  Pair<Object,Object> pair=Pair.<Object,Object,Integer,String>fromEntry(entry);
  assertEquals(entry.getKey(),pair.getFirst());
  assertEquals(entry.getValue(),pair.getSecond());
  Pair<Number,CharSequence> pair2=Pair.<Number,CharSequence,Integer,String>fromEntry(entry);
  assertEquals(entry.getKey(),pair2.getFirst());
  assertEquals(entry.getValue(),pair2.getSecond());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.PartitionerTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test1(){
  PreAllocatedArray<Map<ByteSequence,MutableLong>> groups=new PreAllocatedArray<>(2);
  groups.set(0,new HashMap<ByteSequence,MutableLong>());
  groups.get(0).put(new ArrayByteSequence("cf1"),new MutableLong(1));
  groups.get(0).put(new ArrayByteSequence("cf2"),new MutableLong(1));
  groups.set(1,new HashMap<ByteSequence,MutableLong>());
  groups.get(1).put(new ArrayByteSequence("cf3"),new MutableLong(1));
  Partitioner p1=new Partitioner(groups);
  Mutation m1=new Mutation("r1");
  m1.put("cf1","cq1","v1");
  Mutation m2=new Mutation("r2");
  m2.put("cf1","cq1","v2");
  m2.put("cf2","cq2","v3");
  Mutation m3=new Mutation("r3");
  m3.put("cf1","cq1","v4");
  m3.put("cf3","cq2","v5");
  Mutation m4=new Mutation("r4");
  m4.put("cf1","cq1","v6");
  m4.put("cf3","cq2","v7");
  m4.put("cf5","cq3","v8");
  Mutation m5=new Mutation("r5");
  m5.put("cf5","cq3","v9");
  List<Mutation> mutations=Arrays.asList(m1,m2,m3,m4,m5);
  PreAllocatedArray<List<Mutation>> partitioned=new PreAllocatedArray<>(3);
  for (int i=0; i < partitioned.length; i++) {
    partitioned.set(i,new ArrayList<Mutation>());
  }
  p1.partition(mutations,partitioned);
  m1=new Mutation("r1");
  m1.put("cf1","cq1","v1");
  m2=new Mutation("r2");
  m2.put("cf1","cq1","v2");
  m2.put("cf2","cq2","v3");
  m3=new Mutation("r3");
  m3.put("cf1","cq1","v4");
  m4=new Mutation("r4");
  m4.put("cf1","cq1","v6");
  Assert.assertEquals(toKeySet(m1,m2,m3,m4),toKeySet(partitioned.get(0)));
  m3=new Mutation("r3");
  m3.put("cf3","cq2","v5");
  m4=new Mutation("r4");
  m4.put("cf3","cq2","v7");
  Assert.assertEquals(toKeySet(m3,m4),toKeySet(partitioned.get(1)));
  m4=new Mutation("r4");
  m4.put("cf5","cq3","v8");
  Assert.assertEquals(toKeySet(m4,m5),toKeySet(partitioned.get(2)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.PreAllocatedArrayTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.accumulo.core.util.PreAllocatedArray#set(int,java.lang.Object)}.<br>
 * Test method for {@link org.apache.accumulo.core.util.PreAllocatedArray#get(int)}.<br>
 * Test method for {@link org.apache.accumulo.core.util.PreAllocatedArray#iterator()}.
 */
@Test public void testSet(){
  int capacity=5;
  PreAllocatedArray<String> strings=new PreAllocatedArray<>(capacity);
  assertEquals(capacity,strings.length);
  strings.set(1,"a");
  strings.set(4,"b");
  assertEquals(capacity,strings.length);
  String b=strings.set(4,"c");
  assertEquals("b",b);
  assertEquals(capacity,strings.length);
  Iterator<String> iter=strings.iterator();
  assertNull(iter.next());
  assertEquals("a",iter.next());
  assertNull(iter.next());
  assertNull(iter.next());
  assertEquals("c",iter.next());
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test method for {@link org.apache.accumulo.core.util.PreAllocatedArray#PreAllocatedArray(int)}.
 */
@Test public void testPreAllocatedArray(){
  PreAllocatedArray<String> strings=new PreAllocatedArray<>(5);
  assertEquals(5,strings.length);
  strings=new PreAllocatedArray<>(3);
  assertEquals(3,strings.length);
  strings=new PreAllocatedArray<>(0);
  assertEquals(0,strings.length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.StatTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetStdDev(){
  assertEquals(0,zero.getStdDev(),delta);
  assertEquals(2073.7656569632,stat.getStdDev(),delta);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAverage(){
  assertEquals(0,zero.getAverage(),delta);
  assertEquals(5529,stat.getAverage(),delta);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetMin(){
  assertEquals(0,zero.getMin());
  assertEquals(3677,stat.getMin());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetMax(){
  assertEquals(0,zero.getMax());
  assertEquals(9792,stat.getMax());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testClear(){
  zero.clear();
  stat.clear();
  assertEquals(0,zero.getMax());
  assertEquals(zero.getMax(),stat.getMax());
  assertEquals(0,zero.getMin());
  assertEquals(zero.getMin(),stat.getMin());
  assertEquals(0,zero.getSum());
  assertEquals(zero.getSum(),stat.getSum());
  assertEquals(Double.NaN,zero.getAverage(),0);
  assertEquals(zero.getAverage(),stat.getAverage(),0);
  assertEquals(Double.NaN,zero.getStdDev(),0);
  assertEquals(zero.getStdDev(),stat.getStdDev(),0);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetSum(){
  assertEquals(0,zero.getSum());
  assertEquals(38703,stat.getSum());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.ThriftMessageUtilTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerializationAsByteArray() throws IOException {
  ByteBuffer buff=util.serialize(msg);
  TAuthenticationTokenIdentifier copy=new TAuthenticationTokenIdentifier();
  byte[] array=new byte[buff.limit()];
  System.arraycopy(buff.array(),0,array,0,buff.limit());
  util.deserialize(array,copy);
  assertEquals(msg,copy);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerializationAsByteArrayWithLimits() throws IOException {
  ByteBuffer buff=util.serialize(msg);
  TAuthenticationTokenIdentifier copy=new TAuthenticationTokenIdentifier();
  byte[] array=new byte[buff.limit() + 14];
  array[0]='G';
  array[1]='A';
  array[2]='R';
  array[3]='B';
  array[4]='A';
  array[5]='G';
  array[6]='E';
  System.arraycopy(buff.array(),0,array,7,buff.limit());
  array[7 + buff.limit()]='G';
  array[7 + buff.limit() + 1]='A';
  array[7 + buff.limit() + 2]='R';
  array[7 + buff.limit() + 3]='B';
  array[7 + buff.limit() + 4]='A';
  array[7 + buff.limit() + 5]='G';
  array[7 + buff.limit() + 6]='E';
  util.deserialize(array,7,buff.limit(),copy);
  assertEquals(msg,copy);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.UnsynchronizedBufferTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testByteBufferConstructor(){
  byte[] test="0123456789".getBytes(UTF_8);
  ByteBuffer bb1=ByteBuffer.wrap(test);
  UnsynchronizedBuffer.Reader ub=new UnsynchronizedBuffer.Reader(bb1);
  byte[] buf=new byte[10];
  ub.readBytes(buf);
  Assert.assertEquals("0123456789",new String(buf,UTF_8));
  ByteBuffer bb2=ByteBuffer.wrap(test,3,5);
  ub=new UnsynchronizedBuffer.Reader(bb2);
  buf=new byte[5];
  ub.readBytes(buf);
  Assert.assertEquals("34567",new String(buf,UTF_8));
  buf=new byte[6];
  thrown.expect(ArrayIndexOutOfBoundsException.class);
  ub.readBytes(buf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.ValidatorTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInvalidMessage(){
  assertEquals("Invalid argument incorrect",v.invalidMessage("incorrect"));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testValidate_Success(){
  assertEquals("correct",v.validate("correct"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.format.DateFormatSupplierTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateSimpleFormatSupplier() throws Exception {
  final String format=DateFormatSupplier.HUMAN_READABLE_FORMAT;
  DateFormatSupplier supplierA=DateFormatSupplier.createSimpleFormatSupplier(format);
  DateFormatSupplier supplierB=DateFormatSupplier.createSimpleFormatSupplier(format);
  assertSuppliersIndependent(supplierA,supplierB);
  supplierA.setTimeZone(TimeZone.getTimeZone("UTC"));
  final DateFormat dfA=supplierA.get();
  supplierB.setTimeZone(TimeZone.getTimeZone("EST"));
  final DateFormat dfB=supplierB.get();
  final String resultA=dfA.format(new Date(0));
  assertEquals("1970/01/01 00:00:00.000",resultA);
  final String resultB=dfB.format(new Date(0));
  assertEquals("1969/12/31 19:00:00.000",resultB);
  assertTrue(!resultA.equals(resultB));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.format.DateStringFormatterTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoTimestamps(){
  data.put(new Key("","","",1),new Value());
  assertEquals(2,data.size());
  formatter.initialize(data.entrySet(),new FormatterConfig());
  assertEquals(formatter.next(),formatter.next());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.format.DefaultFormatterTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAppendBytes(){
  StringBuilder sb=new StringBuilder();
  byte[] data=new byte[]{0,'\\','x',-0x01};
  DefaultFormatter.appendValue(sb,new Value());
  assertEquals("",sb.toString());
  DefaultFormatter.appendText(sb,new Text(data));
  assertEquals("\\x00\\\\x\\xFF",sb.toString());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFormatEntry(){
  final long timestamp=0;
  Map<Key,Value> map=new TreeMap<Key,Value>();
  map.put(new Key("a","ab","abc",timestamp),new Value("abcd".getBytes()));
  FormatterConfig config;
  String answer;
  config=new FormatterConfig();
  df=new DefaultFormatter();
  df.initialize(map.entrySet(),config);
  answer=df.next();
  assertEquals("a ab:abc []\tabcd",answer);
  config.setPrintTimestamps(true);
  df=new DefaultFormatter();
  df.initialize(map.entrySet(),config);
  answer=df.next();
  assertEquals("a ab:abc [] " + timestamp + "\tabcd",answer);
  config.setPrintTimestamps(true).setShownLength(1);
  df=new DefaultFormatter();
  df.initialize(map.entrySet(),config);
  answer=df.next();
  assertEquals("a a:a [] " + timestamp + "\ta",answer);
  config.setPrintTimestamps(true).doNotLimitShowLength().setDateFormatSupplier(DateFormatSupplier.createSimpleFormatSupplier("YYYY"));
  df=new DefaultFormatter();
  df.initialize(map.entrySet(),config);
  answer=df.next();
  assertEquals("a ab:abc [] 1970\tabcd",answer);
  config.setPrintTimestamps(true).doNotLimitShowLength().setDateFormatSupplier(DateFormatSupplier.createSimpleFormatSupplier("HH",UTC));
  df=new DefaultFormatter();
  df.initialize(map.entrySet(),config);
  answer=df.next();
  assertEquals("a ab:abc [] 00\tabcd",answer);
  config.setPrintTimestamps(true).doNotLimitShowLength().setDateFormatSupplier(DateFormatSupplier.createSimpleFormatSupplier("HH",EST));
  df=new DefaultFormatter();
  df.initialize(map.entrySet(),config);
  answer=df.next();
  assertEquals("a ab:abc [] 19\tabcd",answer);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.format.FormatterConfigTest </h4><pre class="type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetShownLength() throws Exception {
  FormatterConfig config=new FormatterConfig();
  try {
    config.setShownLength(-1);
    fail("Should throw on negative length.");
  }
 catch (  IllegalArgumentException e) {
  }
  config.setShownLength(0);
  assertEquals(0,config.getShownLength());
  assertEquals(true,config.willLimitShowLength());
  config.setShownLength(1);
  assertEquals(1,config.getShownLength());
  assertEquals(true,config.willLimitShowLength());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDoNotLimitShowLength(){
  FormatterConfig config=new FormatterConfig();
  assertEquals(false,config.willLimitShowLength());
  config.setShownLength(1);
  assertEquals(true,config.willLimitShowLength());
  config.doNotLimitShowLength();
  assertEquals(false,config.willLimitShowLength());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstructor(){
  FormatterConfig config=new FormatterConfig();
  assertEquals(false,config.willLimitShowLength());
  assertEquals(false,config.willPrintTimestamps());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.format.FormatterFactoryTest </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetDefaultFormatter(){
  final FormatterConfig timestampConfig=new FormatterConfig().setPrintTimestamps(true);
  Formatter defaultFormatter=FormatterFactory.getDefaultFormatter(scanner,timestampConfig);
  Formatter bogusFormatter=FormatterFactory.getFormatter(Formatter.class,scanner,timestampConfig);
  assertEquals(defaultFormatter.getClass(),bogusFormatter.getClass());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.format.HexFormatterTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitialize(){
  data.put(new Key(),new Value());
  formatter.initialize(data.entrySet(),new FormatterConfig());
  assertTrue(formatter.hasNext());
  assertEquals("  " + "  " + " ["+ "] ",formatter.next());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRoundTripRows(){
  Text bytes=new Text(new byte[]{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15});
  data.put(new Key(bytes),new Value());
  formatter.initialize(data.entrySet(),new FormatterConfig());
  String row=formatter.next().split(" ")[0];
  assertEquals("0001-0203-0405-0607-0809-0a0b-0c0d-0e0f",row);
  assertEquals(bytes,formatter.interpretRow(new Text(row)));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimestamps(){
  long now=System.currentTimeMillis();
  data.put(new Key("","","",now),new Value());
  formatter.initialize(data.entrySet(),new FormatterConfig().setPrintTimestamps(true));
  String entry=formatter.next().split("\\s+")[2];
  assertEquals(now,Long.parseLong(entry));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInterpretRow(){
  assertEquals(new Text(),formatter.interpretRow(new Text()));
  assertEquals(new Text("\0"),formatter.interpretRow(new Text("0")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.format.StatisticsDisplayFormatterTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAggregate(){
  data.put(new Key("","","",1),new Value());
  data.put(new Key("","","",2),new Value());
  formatter.initialize(data.entrySet(),new FormatterConfig());
  String[] output=formatter.next().split("\n");
  assertTrue(output[2].endsWith(": 1"));
  assertTrue(output[5].endsWith(": 1"));
  assertTrue(output[8].endsWith(": 1"));
  assertEquals("2 entries matched.",output[9]);
  assertFalse(formatter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.volume.NonConfiguredVolumeTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSameFileSystem() throws IOException {
  Assert.assertEquals(FileSystem.getLocal(new Configuration()),volume.getFileSystem());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquality() throws IOException {
  Volume newVolume=new NonConfiguredVolume(FileSystem.getLocal(new Configuration()));
  Assert.assertEquals(volume,newVolume);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHashCode() throws IOException {
  Volume newVolume=new NonConfiguredVolume(FileSystem.getLocal(new Configuration()));
  Assert.assertEquals(volume.hashCode(),newVolume.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.examples.simple.constraints.AlphaNumKeyConstraintTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetViolationDescription(){
  assertEquals(AlphaNumKeyConstraint.ROW_VIOLATION_MESSAGE,ankc.getViolationDescription(AlphaNumKeyConstraint.NON_ALPHA_NUM_ROW));
  assertEquals(AlphaNumKeyConstraint.COLF_VIOLATION_MESSAGE,ankc.getViolationDescription(AlphaNumKeyConstraint.NON_ALPHA_NUM_COLF));
  assertEquals(AlphaNumKeyConstraint.COLQ_VIOLATION_MESSAGE,ankc.getViolationDescription(AlphaNumKeyConstraint.NON_ALPHA_NUM_COLQ));
  assertNull(ankc.getViolationDescription((short)4));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test(){
  Mutation goodMutation=new Mutation(new Text("Row1"));
  goodMutation.put(new Text("Colf2"),new Text("ColQ3"),new Value("value".getBytes()));
  assertNull(ankc.check(null,goodMutation));
  Mutation badMutation=new Mutation(new Text("Row#1"));
  badMutation.put(new Text("Colf$2"),new Text("Colq%3"),new Value("value".getBytes()));
  assertEquals(ImmutableList.of(AlphaNumKeyConstraint.NON_ALPHA_NUM_ROW,AlphaNumKeyConstraint.NON_ALPHA_NUM_COLF,AlphaNumKeyConstraint.NON_ALPHA_NUM_COLQ),ankc.check(null,badMutation));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.examples.simple.constraints.NumericValueConstraintTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetViolationDescription(){
  assertEquals(NumericValueConstraint.VIOLATION_MESSAGE,nvc.getViolationDescription(NumericValueConstraint.NON_NUMERIC_VALUE));
  assertNull(nvc.getViolationDescription((short)2));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheck(){
  Mutation goodMutation=new Mutation(new Text("r"));
  goodMutation.put(new Text("cf"),new Text("cq"),new Value("1234".getBytes()));
  assertNull(nvc.check(null,goodMutation));
  Mutation badMutation=new Mutation(new Text("r"));
  badMutation.put(new Text("cf"),new Text("cq"),new Value("foo1234".getBytes()));
  badMutation.put(new Text("cf2"),new Text("cq2"),new Value("foo1234".getBytes()));
  assertEquals(NumericValueConstraint.NON_NUMERIC_VALUE,Iterables.getOnlyElement(nvc.check(null,badMutation)).shortValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.examples.simple.filedata.ChunkInputStreamTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadIntoBufferLargerThanChunks() throws IOException {
  ChunkInputStream cis=new ChunkInputStream();
  byte[] b=new byte[20];
  int read;
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(data.iterator());
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  cis.setSource(pi);
  assertEquals(read=cis.read(b),10);
  assertEquals(new String(b,0,read),"qwertyuiop");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[A&B, B&C, D]");
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),16);
  assertEquals(new String(b,0,read),"asdfjkl;asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[A&B]");
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),-1);
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  cis.close();
  assertFalse(pi.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadData() throws IOException {
  ChunkInputStream cis=new ChunkInputStream();
  byte[] b=new byte[20];
  int read;
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(baddata.iterator());
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assumeExceptionOnClose(cis);
  assertEquals(cis.getVisibilities().toString(),"[A]");
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assumeExceptionOnClose(cis);
  assertEquals(cis.getVisibilities().toString(),"[B, C]");
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assumeExceptionOnClose(cis);
  assertEquals(cis.getVisibilities().toString(),"[D, E]");
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[F, G]");
  cis.close();
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  cis.close();
  assertEquals(cis.getVisibilities().toString(),"[I, J]");
  try {
    cis.setSource(pi);
    fail();
  }
 catch (  IOException e) {
  }
  assumeExceptionOnClose(cis);
  assertEquals(cis.getVisibilities().toString(),"[K]");
  cis.setSource(pi);
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[L]");
  cis.close();
  assertFalse(pi.hasNext());
  pi=new PeekingIterator<Entry<Key,Value>>(baddata.iterator());
  cis.setSource(pi);
  assumeExceptionOnClose(cis);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadIntoBufferSmallerThanChunks() throws IOException {
  ChunkInputStream cis=new ChunkInputStream();
  byte[] b=new byte[5];
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(data.iterator());
  cis.setSource(pi);
  int read;
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"asdfj");
  assertEquals(read=cis.read(b),3);
  assertEquals(new String(b,0,read),"kl;");
  assertEquals(read=cis.read(b),-1);
  cis.setSource(pi);
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"qwert");
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"yuiop");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[A&B, B&C, D]");
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"asdfj");
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"kl;as");
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"dfjkl");
  assertEquals(read=cis.read(b),1);
  assertEquals(new String(b,0,read),";");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[A&B]");
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),-1);
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"asdfj");
  assertEquals(read=cis.read(b),3);
  assertEquals(new String(b,0,read),"kl;");
  assertEquals(read=cis.read(b),-1);
  cis.close();
  assertFalse(pi.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleChunkSizes() throws IOException {
  ChunkInputStream cis=new ChunkInputStream();
  byte[] b=new byte[20];
  int read;
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(multidata.iterator());
  b=new byte[20];
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(read=cis.read(b),-1);
  cis.close();
  assertEquals(cis.getVisibilities().toString(),"[A&B]");
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assertEquals(cis.getVisibilities().toString(),"[A&B]");
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  cis.close();
  assertEquals(cis.getVisibilities().toString(),"[A&B, B&C]");
  assertFalse(pi.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadDataWithoutClosing() throws IOException {
  ChunkInputStream cis=new ChunkInputStream();
  byte[] b=new byte[20];
  int read;
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(baddata.iterator());
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assertEquals(cis.getVisibilities().toString(),"[A]");
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assertEquals(cis.getVisibilities().toString(),"[B, C]");
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assertEquals(cis.getVisibilities().toString(),"[D, E]");
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[F, G]");
  cis.close();
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assertEquals(cis.getVisibilities().toString(),"[I, J]");
  try {
    cis.setSource(pi);
    fail();
  }
 catch (  IOException e) {
  }
  assertEquals(cis.getVisibilities().toString(),"[K]");
  cis.setSource(pi);
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[L]");
  cis.close();
  assertFalse(pi.hasNext());
  pi=new PeekingIterator<Entry<Key,Value>>(baddata.iterator());
  cis.setSource(pi);
  assumeExceptionOnClose(cis);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingleByteRead() throws IOException {
  ChunkInputStream cis=new ChunkInputStream();
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(data.iterator());
  cis.setSource(pi);
  assertEquals((byte)'a',(byte)cis.read());
  assertEquals((byte)'s',(byte)cis.read());
  assertEquals((byte)'d',(byte)cis.read());
  assertEquals((byte)'f',(byte)cis.read());
  assertEquals((byte)'j',(byte)cis.read());
  assertEquals((byte)'k',(byte)cis.read());
  assertEquals((byte)'l',(byte)cis.read());
  assertEquals((byte)';',(byte)cis.read());
  assertEquals(cis.read(),-1);
  cis.close();
  assertEquals(cis.getVisibilities().toString(),"[A&B]");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.AgeOffStoreTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNonEmpty(){
  TestTimeSource tts=new TestTimeSource();
  SimpleStore<String> sstore=new SimpleStore<String>();
  Long txid1=sstore.create();
  sstore.reserve(txid1);
  sstore.setStatus(txid1,TStatus.IN_PROGRESS);
  sstore.unreserve(txid1,0);
  Long txid2=sstore.create();
  sstore.reserve(txid2);
  sstore.setStatus(txid2,TStatus.IN_PROGRESS);
  sstore.setStatus(txid2,TStatus.FAILED);
  sstore.unreserve(txid2,0);
  Long txid3=sstore.create();
  sstore.reserve(txid3);
  sstore.setStatus(txid3,TStatus.IN_PROGRESS);
  sstore.setStatus(txid3,TStatus.SUCCESSFUL);
  sstore.unreserve(txid3,0);
  Long txid4=sstore.create();
  AgeOffStore<String> aoStore=new AgeOffStore<String>(sstore,10,tts);
  Assert.assertEquals(new HashSet<Long>(Arrays.asList(txid1,txid2,txid3,txid4)),new HashSet<Long>(aoStore.list()));
  Assert.assertEquals(4,new HashSet<Long>(aoStore.list()).size());
  aoStore.ageOff();
  Assert.assertEquals(new HashSet<Long>(Arrays.asList(txid1,txid2,txid3,txid4)),new HashSet<Long>(aoStore.list()));
  Assert.assertEquals(4,new HashSet<Long>(aoStore.list()).size());
  tts.time=15;
  aoStore.ageOff();
  Assert.assertEquals(new HashSet<Long>(Arrays.asList(txid1)),new HashSet<Long>(aoStore.list()));
  Assert.assertEquals(1,new HashSet<Long>(aoStore.list()).size());
  aoStore.reserve(txid1);
  aoStore.setStatus(txid1,TStatus.FAILED_IN_PROGRESS);
  aoStore.unreserve(txid1,0);
  tts.time=30;
  aoStore.ageOff();
  Assert.assertEquals(new HashSet<Long>(Arrays.asList(txid1)),new HashSet<Long>(aoStore.list()));
  Assert.assertEquals(1,new HashSet<Long>(aoStore.list()).size());
  aoStore.reserve(txid1);
  aoStore.setStatus(txid1,TStatus.FAILED);
  aoStore.unreserve(txid1,0);
  aoStore.ageOff();
  Assert.assertEquals(new HashSet<Long>(Arrays.asList(txid1)),new HashSet<Long>(aoStore.list()));
  Assert.assertEquals(1,new HashSet<Long>(aoStore.list()).size());
  tts.time=42;
  aoStore.ageOff();
  Assert.assertEquals(0,new HashSet<Long>(aoStore.list()).size());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBasic(){
  TestTimeSource tts=new TestTimeSource();
  SimpleStore<String> sstore=new SimpleStore<String>();
  AgeOffStore<String> aoStore=new AgeOffStore<String>(sstore,10,tts);
  aoStore.ageOff();
  Long txid1=aoStore.create();
  aoStore.reserve(txid1);
  aoStore.setStatus(txid1,TStatus.IN_PROGRESS);
  aoStore.unreserve(txid1,0);
  aoStore.ageOff();
  Long txid2=aoStore.create();
  aoStore.reserve(txid2);
  aoStore.setStatus(txid2,TStatus.IN_PROGRESS);
  aoStore.setStatus(txid2,TStatus.FAILED);
  aoStore.unreserve(txid2,0);
  tts.time=6;
  Long txid3=aoStore.create();
  aoStore.reserve(txid3);
  aoStore.setStatus(txid3,TStatus.IN_PROGRESS);
  aoStore.setStatus(txid3,TStatus.SUCCESSFUL);
  aoStore.unreserve(txid3,0);
  Long txid4=aoStore.create();
  aoStore.ageOff();
  Assert.assertEquals(new HashSet<Long>(Arrays.asList(txid1,txid2,txid3,txid4)),new HashSet<Long>(aoStore.list()));
  Assert.assertEquals(4,new HashSet<Long>(aoStore.list()).size());
  tts.time=15;
  aoStore.ageOff();
  Assert.assertEquals(new HashSet<Long>(Arrays.asList(txid1,txid3,txid4)),new HashSet<Long>(aoStore.list()));
  Assert.assertEquals(3,new HashSet<Long>(aoStore.list()).size());
  tts.time=30;
  aoStore.ageOff();
  Assert.assertEquals(new HashSet<Long>(Arrays.asList(txid1)),new HashSet<Long>(aoStore.list()));
  Assert.assertEquals(1,new HashSet<Long>(aoStore.list()).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.ReadOnlyStoreTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void everythingPassesThrough() throws Exception {
  @SuppressWarnings("unchecked") Repo<String> repo=EasyMock.createMock(Repo.class);
  EasyMock.expect(repo.getDescription()).andReturn("description");
  EasyMock.expect(repo.isReady(0xdeadbeefl,null)).andReturn(0x0l);
  @SuppressWarnings("unchecked") TStore<String> mock=EasyMock.createNiceMock(TStore.class);
  EasyMock.expect(mock.reserve()).andReturn(0xdeadbeefl);
  mock.reserve(0xdeadbeefl);
  EasyMock.expect(mock.top(0xdeadbeefl)).andReturn(repo);
  EasyMock.expect(mock.getStatus(0xdeadbeefl)).andReturn(TStatus.UNKNOWN);
  mock.unreserve(0xdeadbeefl,30);
  EasyMock.expect(mock.waitForStatusChange(0xdeadbeefl,EnumSet.allOf(TStatus.class))).andReturn(TStatus.UNKNOWN);
  EasyMock.expect(mock.getProperty(0xdeadbeefl,"com.example.anyproperty")).andReturn("property");
  EasyMock.expect(mock.list()).andReturn(Collections.<Long>emptyList());
  EasyMock.replay(repo);
  EasyMock.replay(mock);
  ReadOnlyTStore<String> store=new ReadOnlyStore<String>(mock);
  Assert.assertEquals(0xdeadbeefl,store.reserve());
  store.reserve(0xdeadbeefl);
  ReadOnlyRepo<String> top=store.top(0xdeadbeefl);
  Assert.assertFalse(top instanceof Repo);
  Assert.assertEquals("description",top.getDescription());
  Assert.assertEquals(0x0l,top.isReady(0xdeadbeefl,null));
  Assert.assertEquals(TStatus.UNKNOWN,store.getStatus(0xdeadbeefl));
  store.unreserve(0xdeadbeefl,30);
  Assert.assertEquals(TStatus.UNKNOWN,store.waitForStatusChange(0xdeadbeefl,EnumSet.allOf(TStatus.class)));
  Assert.assertEquals("property",store.getProperty(0xdeadbeefl,"com.example.anyproperty"));
  Assert.assertEquals(Collections.<Long>emptyList(),store.list());
  EasyMock.verify(repo);
  EasyMock.verify(mock);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.zookeeper.RetryFactoryTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void properArgumentsInRetry(){
  long maxRetries=10, startWait=50l, maxWait=5000l, waitIncrement=500l;
  RetryFactory factory=new RetryFactory(maxRetries,startWait,waitIncrement,maxWait);
  Retry retry=factory.create();
  Assert.assertEquals(maxRetries,retry.getMaxRetries());
  Assert.assertEquals(startWait,retry.getCurrentWait());
  Assert.assertEquals(maxWait,retry.getMaxWait());
  Assert.assertEquals(waitIncrement,retry.getWaitIncrement());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.zookeeper.RetryTest </h4><pre class="type-13 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void retriesAreCompleted(){
  for (int i=0; i < maxRetries; i++) {
    Assert.assertEquals(i,retry.retriesCompleted());
    retry.canRetry();
    Assert.assertEquals(i,retry.retriesCompleted());
    retry.useRetry();
    Assert.assertEquals(i + 1,retry.retriesCompleted());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.zookeeper.ZooCacheTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetChildren() throws Exception {
  expect(zk.getChildren(eq(ZPATH),anyObject(Watcher.class))).andReturn(CHILDREN);
  replay(zk);
  assertFalse(zc.childrenCached(ZPATH));
  assertEquals(CHILDREN,zc.getChildren(ZPATH));
  verify(zk);
  assertTrue(zc.childrenCached(ZPATH));
  assertEquals(CHILDREN,zc.getChildren(ZPATH));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetChildren_Retry() throws Exception {
  expect(zk.getChildren(eq(ZPATH),anyObject(Watcher.class))).andThrow(new KeeperException.BadVersionException(ZPATH));
  expect(zk.getChildren(eq(ZPATH),anyObject(Watcher.class))).andReturn(CHILDREN);
  replay(zk);
  assertEquals(CHILDREN,zc.getChildren(ZPATH));
  verify(zk);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.zookeeper.ZooKeeperConnectionInfoTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEquality(){
  Assert.assertEquals(new ZooKeeperConnectionInfo("localhost:2181",60000,null,null),new ZooKeeperConnectionInfo("localhost:2181",60000,null,null));
  Assert.assertEquals(new ZooKeeperConnectionInfo("localhost:2181",60000,null,null).hashCode(),new ZooKeeperConnectionInfo("localhost:2181",60000,null,null).hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.zookeeper.ZooReaderWriterTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMutateWithBadVersion() throws Exception {
  final String path="/foo";
  final byte[] value=new byte[]{0};
  final List<ACL> acls=Collections.<ACL>emptyList();
  final byte[] mutatedBytes=new byte[]{1};
  Mutator mutator=new Mutator(){
    @Override public byte[] mutate(    byte[] currentValue) throws Exception {
      return mutatedBytes;
    }
  }
;
  Method getDataMethod=ZooReaderWriter.class.getMethod("getData",String.class,boolean.class,Stat.class);
  zrw=EasyMock.createMockBuilder(ZooReaderWriter.class).addMockedMethods("getRetryFactory","getZooKeeper").addMockedMethod(getDataMethod).createMock();
  EasyMock.expect(zrw.getRetryFactory()).andReturn(retryFactory).anyTimes();
  EasyMock.expect(zrw.getZooKeeper()).andReturn(zk).anyTimes();
  Stat stat=new Stat();
  zk.create(path,value,acls,CreateMode.PERSISTENT);
  EasyMock.expectLastCall().andThrow(new NodeExistsException()).once();
  EasyMock.expect(zrw.getData(path,false,stat)).andReturn(new byte[]{3}).times(2);
  EasyMock.expect(zk.setData(path,mutatedBytes,0)).andThrow(new BadVersionException());
  EasyMock.expect(zk.setData(path,mutatedBytes,0)).andReturn(null);
  EasyMock.replay(zk,zrw,retryFactory,retry);
  Assert.assertArrayEquals(new byte[]{1},zrw.mutate(path,value,acls,mutator));
  EasyMock.verify(zk,zrw,retryFactory,retry);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMutateWithRetryOnSetData() throws Exception {
  final String path="/foo";
  final byte[] value=new byte[]{0};
  final List<ACL> acls=Collections.<ACL>emptyList();
  final byte[] mutatedBytes=new byte[]{1};
  Mutator mutator=new Mutator(){
    @Override public byte[] mutate(    byte[] currentValue) throws Exception {
      return mutatedBytes;
    }
  }
;
  Method getDataMethod=ZooReaderWriter.class.getMethod("getData",String.class,boolean.class,Stat.class);
  zrw=EasyMock.createMockBuilder(ZooReaderWriter.class).addMockedMethods("getRetryFactory","getZooKeeper").addMockedMethod(getDataMethod).createMock();
  EasyMock.expect(zrw.getRetryFactory()).andReturn(retryFactory).anyTimes();
  EasyMock.expect(zrw.getZooKeeper()).andReturn(zk).anyTimes();
  Stat stat=new Stat();
  zk.create(path,value,acls,CreateMode.PERSISTENT);
  EasyMock.expectLastCall().andThrow(new NodeExistsException()).once();
  EasyMock.expect(zrw.getData(path,false,stat)).andReturn(new byte[]{3}).times(2);
  EasyMock.expect(zk.setData(path,mutatedBytes,0)).andThrow(new ConnectionLossException());
  EasyMock.expect(retry.canRetry()).andReturn(true);
  retry.useRetry();
  EasyMock.expectLastCall();
  retry.waitForNextAttempt();
  EasyMock.expectLastCall();
  EasyMock.expect(zk.setData(path,mutatedBytes,0)).andReturn(null);
  EasyMock.replay(zk,zrw,retryFactory,retry);
  Assert.assertArrayEquals(new byte[]{1},zrw.mutate(path,value,acls,mutator));
  EasyMock.verify(zk,zrw,retryFactory,retry);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.gc.GarbageCollectionTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void newReplicationRecordsPreventDeletion() throws Exception {
  GarbageCollectionAlgorithm gca=new GarbageCollectionAlgorithm();
  TestGCE gce=new TestGCE();
  gce.candidates.add("hdfs://foo.com:6000/accumulo/tables/1/t-00001/A000001.rf");
  gce.candidates.add("hdfs://foo.com:6000/accumulo/tables/2/t-00002/A000002.rf");
  Status status=StatusUtil.fileCreated(System.currentTimeMillis());
  gce.filesToReplicate.put("hdfs://foo.com:6000/accumulo/tables/1/t-00001/A000001.rf",status);
  gca.collect(gce);
  Assert.assertEquals(1,gce.deletes.size());
  Assert.assertEquals("hdfs://foo.com:6000/accumulo/tables/2/t-00002/A000002.rf",gce.deletes.get(0));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void openReplicationRecordsPreventDeletion() throws Exception {
  GarbageCollectionAlgorithm gca=new GarbageCollectionAlgorithm();
  TestGCE gce=new TestGCE();
  gce.candidates.add("hdfs://foo.com:6000/accumulo/tables/1/t-00001/A000001.rf");
  gce.candidates.add("hdfs://foo.com:6000/accumulo/tables/2/t-00002/A000002.rf");
  Status status=Status.newBuilder().setClosed(false).setEnd(1000).setBegin(100).build();
  gce.filesToReplicate.put("hdfs://foo.com:6000/accumulo/tables/1/t-00001/A000001.rf",status);
  gca.collect(gce);
  Assert.assertEquals(1,gce.deletes.size());
  Assert.assertEquals("hdfs://foo.com:6000/accumulo/tables/2/t-00002/A000002.rf",gce.deletes.get(0));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void bulkImportReplicationRecordsPreventDeletion() throws Exception {
  GarbageCollectionAlgorithm gca=new GarbageCollectionAlgorithm();
  TestGCE gce=new TestGCE();
  gce.candidates.add("hdfs://foo.com:6000/accumulo/tables/1/t-00001/A000001.rf");
  gce.candidates.add("hdfs://foo.com:6000/accumulo/tables/2/t-00002/A000002.rf");
  Status status=Status.newBuilder().setInfiniteEnd(true).setBegin(0).setClosed(true).build();
  gce.filesToReplicate.put("hdfs://foo.com:6000/accumulo/tables/1/t-00001/A000001.rf",status);
  gca.collect(gce);
  Assert.assertEquals(1,gce.deletes.size());
  Assert.assertEquals("hdfs://foo.com:6000/accumulo/tables/2/t-00002/A000002.rf",gce.deletes.get(0));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void finishedReplicationRecordsDontPreventDeletion() throws Exception {
  GarbageCollectionAlgorithm gca=new GarbageCollectionAlgorithm();
  TestGCE gce=new TestGCE();
  gce.candidates.add("hdfs://foo.com:6000/accumulo/tables/1/t-00001/A000001.rf");
  gce.candidates.add("hdfs://foo.com:6000/accumulo/tables/2/t-00002/A000002.rf");
  Status status=Status.newBuilder().setClosed(true).setEnd(100).setBegin(100).build();
  gce.filesToReplicate.put("hdfs://foo.com:6000/accumulo/tables/1/t-00001/A000001.rf",status);
  gca.collect(gce);
  Assert.assertEquals(2,gce.deletes.size());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteTableDir() throws Exception {
  GarbageCollectionAlgorithm gca=new GarbageCollectionAlgorithm();
  TestGCE gce=new TestGCE();
  gce.tableIds.add("4");
  gce.candidates.add("/4/t-0");
  gce.candidates.add("/4/t-0/F002.rf");
  gce.candidates.add("hdfs://foo.com:6000/accumulo/tables/5/t-0");
  gce.candidates.add("/6/t-0");
  gce.candidates.add("hdfs://foo:6000/accumulo/tables/7/t-0/");
  gce.addDirReference("7",null,"hdfs://foo.com:6000/accumulo/tables/7/t-0");
  gca.collect(gce);
  HashSet<String> tids=new HashSet<String>();
  tids.add("5");
  tids.add("6");
  Assert.assertEquals(tids.size(),gce.tablesDirsToDelete.size());
  Assert.assertTrue(tids.containsAll(gce.tablesDirsToDelete));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.gc.SimpleGarbageCollectorTest </h4><pre class="type-5 type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInit() throws Exception {
  assertSame(volMgr,gc.getVolumeManager());
  assertSame(instance,gc.getInstance());
  assertEquals(credentials,gc.getCredentials());
  assertTrue(gc.isUsingTrash());
  assertEquals(1000L,gc.getStartDelay());
  assertEquals(2,gc.getNumDeleteThreads());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.iteratortest.junit4.BaseJUnit4IteratorTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterator(){
  List<IteratorTestReport> reports=runner.runTests();
  assertEquals(1,reports.size());
  IteratorTestReport report=reports.get(0);
  assertNotNull(report);
  assertTrue(report.getSummary(),report.didTestSucceed());
  log.trace("Expected: {}, Actual: {}",report.getExpectedOutput(),report.getActualOutput());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.master.DefaultMapTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultMap(){
  DefaultMap<String,String> map=new DefaultMap<String,String>("");
  map.put("key","value");
  String empty=map.get("otherKey");
  assertEquals(map.get("key"),"value");
  assertEquals(empty,"");
  assertTrue(empty == map.get("otherKey"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.master.replication.DistributedWorkQueueWorkAssignerHelperTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void queueKeySerialization(){
  Path p=new Path("/accumulo/wals/tserver+port/" + UUID.randomUUID().toString());
  ReplicationTarget target=new ReplicationTarget("cluster1","table1","1");
  String key=DistributedWorkQueueWorkAssignerHelper.getQueueKey(p.toString(),target);
  Entry<String,ReplicationTarget> result=DistributedWorkQueueWorkAssignerHelper.fromQueueKey(key);
  Assert.assertEquals(p.toString(),result.getKey());
  Assert.assertEquals(target,result.getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.master.replication.MasterReplicationCoordinatorTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void randomServerFromMany(){
  Master master=EasyMock.createMock(Master.class);
  ZooReader reader=EasyMock.createMock(ZooReader.class);
  Instance inst=EasyMock.createMock(Instance.class);
  EasyMock.expect(master.getInstance()).andReturn(inst).anyTimes();
  EasyMock.expect(inst.getInstanceID()).andReturn("1234").anyTimes();
  EasyMock.replay(master,reader,inst);
  MasterReplicationCoordinator coordinator=new MasterReplicationCoordinator(master,reader);
  EasyMock.verify(master,reader,inst);
  TreeSet<TServerInstance> instances=new TreeSet<>();
  TServerInstance inst1=new TServerInstance(HostAndPort.fromParts("host1",1234),"session");
  instances.add(inst1);
  TServerInstance inst2=new TServerInstance(HostAndPort.fromParts("host2",1234),"session");
  instances.add(inst2);
  Assert.assertEquals(inst1,coordinator.getRandomTServer(instances,0));
  Assert.assertEquals(inst2,coordinator.getRandomTServer(instances,1));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void randomServer(){
  Master master=EasyMock.createMock(Master.class);
  ZooReader reader=EasyMock.createMock(ZooReader.class);
  Instance inst=EasyMock.createMock(Instance.class);
  EasyMock.expect(master.getInstance()).andReturn(inst);
  EasyMock.expect(inst.getInstanceID()).andReturn("1234");
  EasyMock.replay(master,reader,inst);
  MasterReplicationCoordinator coordinator=new MasterReplicationCoordinator(master,reader);
  TServerInstance inst1=new TServerInstance(HostAndPort.fromParts("host1",1234),"session");
  Assert.assertEquals(inst1,coordinator.getRandomTServer(Collections.singleton(inst1),0));
}

</code></pre>

<br>
<pre class="type-3 type-2 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalArgumentException.class) public void invalidOffset(){
  Master master=EasyMock.createMock(Master.class);
  ZooReader reader=EasyMock.createMock(ZooReader.class);
  Instance inst=EasyMock.createMock(Instance.class);
  EasyMock.expect(master.getInstance()).andReturn(inst);
  EasyMock.expect(inst.getInstanceID()).andReturn("1234");
  EasyMock.replay(master,reader,inst);
  MasterReplicationCoordinator coordinator=new MasterReplicationCoordinator(master,reader);
  TServerInstance inst1=new TServerInstance(HostAndPort.fromParts("host1",1234),"session");
  Assert.assertEquals(inst1,coordinator.getRandomTServer(Collections.singleton(inst1),1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.master.replication.SequentialWorkAssignerTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void basicZooKeeperCleanup() throws Exception {
  DistributedWorkQueue workQueue=createMock(DistributedWorkQueue.class);
  ZooCache zooCache=createMock(ZooCache.class);
  Instance inst=createMock(Instance.class);
  Map<String,Map<String,String>> queuedWork=new TreeMap<>();
  Map<String,String> cluster1Work=new TreeMap<>();
  cluster1Work.put("1",DistributedWorkQueueWorkAssignerHelper.getQueueKey("file1",new ReplicationTarget("cluster1","1","1")));
  cluster1Work.put("2",DistributedWorkQueueWorkAssignerHelper.getQueueKey("file2",new ReplicationTarget("cluster1","2","2")));
  queuedWork.put("cluster1",cluster1Work);
  assigner.setConnector(conn);
  assigner.setZooCache(zooCache);
  assigner.setWorkQueue(workQueue);
  assigner.setQueuedWork(queuedWork);
  expect(conn.getInstance()).andReturn(inst);
  expect(inst.getInstanceID()).andReturn("instance");
  expect(zooCache.get(ZooUtil.getRoot("instance") + ReplicationConstants.ZOO_WORK_QUEUE + "/"+ DistributedWorkQueueWorkAssignerHelper.getQueueKey("file1",new ReplicationTarget("cluster1","1","1")))).andReturn(null);
  expect(zooCache.get(ZooUtil.getRoot("instance") + ReplicationConstants.ZOO_WORK_QUEUE + "/"+ DistributedWorkQueueWorkAssignerHelper.getQueueKey("file2",new ReplicationTarget("cluster1","2","2")))).andReturn(new byte[0]);
  replay(workQueue,zooCache,conn,inst);
  assigner.cleanupFinishedWork();
  verify(workQueue,zooCache,conn,inst);
  Assert.assertEquals(1,cluster1Work.size());
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey("file2",new ReplicationTarget("cluster1","2","2")),cluster1Work.get("2"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.master.replication.UnorderedWorkAssignerTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void existingWorkIsReQueued() throws Exception {
  DistributedWorkQueue workQueue=createMock(DistributedWorkQueue.class);
  List<String> existingWork=Arrays.asList("/accumulo/wal/tserver+port/wal1","/accumulo/wal/tserver+port/wal2");
  expect(workQueue.getWorkQueued()).andReturn(existingWork);
  replay(workQueue);
  assigner.setWorkQueue(workQueue);
  assigner.initializeQueuedWork();
  verify(workQueue);
  Set<String> queuedWork=assigner.getQueuedWork();
  Assert.assertEquals("Expected existing work and queued work to be the same size",existingWork.size(),queuedWork.size());
  Assert.assertTrue("Expected all existing work to be queued",queuedWork.containsAll(existingWork));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void workQueuedUsingFileName() throws Exception {
  ReplicationTarget target=new ReplicationTarget("cluster1","table1","1");
  DistributedWorkQueue workQueue=createMock(DistributedWorkQueue.class);
  Set<String> queuedWork=new HashSet<>();
  assigner.setQueuedWork(queuedWork);
  assigner.setWorkQueue(workQueue);
  Path p=new Path("/accumulo/wal/tserver+port/" + UUID.randomUUID());
  String expectedQueueKey=p.getName() + DistributedWorkQueueWorkAssignerHelper.KEY_SEPARATOR + target.getPeerName()+ DistributedWorkQueueWorkAssignerHelper.KEY_SEPARATOR+ target.getRemoteIdentifier()+ DistributedWorkQueueWorkAssignerHelper.KEY_SEPARATOR+ target.getSourceTableId();
  workQueue.addWork(expectedQueueKey,p.toString());
  expectLastCall().once();
  replay(workQueue);
  assigner.queueWork(p,target);
  Assert.assertEquals(1,queuedWork.size());
  Assert.assertEquals(expectedQueueKey,queuedWork.iterator().next());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.master.state.RootTabletStateStoreTest </h4><pre class="type-8 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRootTabletStateStore() throws DistributedStoreException {
  ZooTabletStateStore tstore=new ZooTabletStateStore(new FakeZooStore());
  KeyExtent root=RootTable.EXTENT;
  String sessionId="this is my unique session data";
  TServerInstance server=new TServerInstance(HostAndPort.fromParts("127.0.0.1",10000),sessionId);
  List<Assignment> assignments=Collections.singletonList(new Assignment(root,server));
  tstore.setFutureLocations(assignments);
  int count=0;
  for (  TabletLocationState location : tstore) {
    assertEquals(location.extent,root);
    assertEquals(location.future,server);
    assertNull(location.current);
    count++;
  }
  assertEquals(count,1);
  tstore.setLocations(assignments);
  count=0;
  for (  TabletLocationState location : tstore) {
    assertEquals(location.extent,root);
    assertNull(location.future);
    assertEquals(location.current,server);
    count++;
  }
  assertEquals(count,1);
  TabletLocationState assigned=null;
  try {
    assigned=new TabletLocationState(root,server,null,null,null,false);
  }
 catch (  BadLocationStateException e) {
    fail("Unexpected error " + e);
  }
  tstore.unassign(Collections.singletonList(assigned),null);
  count=0;
  for (  TabletLocationState location : tstore) {
    assertEquals(location.extent,root);
    assertNull(location.future);
    assertNull(location.current);
    count++;
  }
  assertEquals(count,1);
  KeyExtent notRoot=new KeyExtent(new Text("0"),null,null);
  try {
    tstore.setLocations(Collections.singletonList(new Assignment(notRoot,server)));
    Assert.fail("should not get here");
  }
 catch (  IllegalArgumentException ex) {
  }
  try {
    tstore.setFutureLocations(Collections.singletonList(new Assignment(notRoot,server)));
    Assert.fail("should not get here");
  }
 catch (  IllegalArgumentException ex) {
  }
  TabletLocationState broken=null;
  try {
    broken=new TabletLocationState(notRoot,server,null,null,null,false);
  }
 catch (  BadLocationStateException e) {
    fail("Unexpected error " + e);
  }
  try {
    tstore.unassign(Collections.singletonList(broken),null);
    Assert.fail("should not get here");
  }
 catch (  IllegalArgumentException ex) {
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFakeZoo() throws DistributedStoreException {
  DistributedStore store=new FakeZooStore();
  store.put("/a/b/c","abc".getBytes());
  byte[] abc=store.get("/a/b/c");
  assertArrayEquals(abc,"abc".getBytes());
  byte[] empty=store.get("/a/b");
  assertArrayEquals(empty,"".getBytes());
  store.put("/a/b","ab".getBytes());
  assertArrayEquals(store.get("/a/b"),"ab".getBytes());
  store.put("/a/b/b","abb".getBytes());
  List<String> children=store.getChildren("/a/b");
  assertEquals(new HashSet<String>(children),new HashSet<String>(Arrays.asList("b","c")));
  store.remove("/a/b/c");
  children=store.getChildren("/a/b");
  assertEquals(new HashSet<String>(children),new HashSet<String>(Arrays.asList("b")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.master.tableOps.ImportTableTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTabletDir(){
  Master master=EasyMock.createMock(Master.class);
  VolumeManager volumeManager=EasyMock.createMock(VolumeManager.class);
  ImportedTableInfo iti=new ImportedTableInfo();
  iti.tableId="5";
  String[] tableDirs=new String[]{"hdfs://nn1:8020/apps/accumulo1/tables","hdfs://nn2:8020/applications/accumulo/tables"};
  String tabletDir="/c-00000001";
  EasyMock.expect(master.getFileSystem()).andReturn(volumeManager);
  EasyMock.expect(volumeManager.choose(Optional.of(iti.tableId),tableDirs)).andReturn(tableDirs[1]);
  EasyMock.replay(master,volumeManager);
  PopulateMetadataTable pmt=new PopulateMetadataTable(iti);
  Assert.assertEquals(tableDirs[1] + "/" + iti.tableId+ "/"+ tabletDir,pmt.getClonedTabletDir(master,tableDirs,tabletDir));
  EasyMock.verify(master,volumeManager);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.minicluster.MiniAccumuloClusterExistingZooKeepersTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void canConnectViaExistingZooKeeper() throws Exception {
  Connector conn=accumulo.getConnector("root",SECRET);
  Instance instance=conn.getInstance();
  assertEquals(zooKeeper.getConnectString(),instance.getZooKeepers());
  String tableName="foo";
  conn.tableOperations().create(tableName);
  Map<String,String> tableIds=conn.tableOperations().tableIdMap();
  assertTrue(tableIds.containsKey(tableName));
  String zkTablePath=String.format("/accumulo/%s/tables/%s/name",instance.getInstanceID(),tableIds.get(tableName));
  try (CuratorFramework client=CuratorFrameworkFactory.newClient(zooKeeper.getConnectString(),new RetryOneTime(1))){
    client.start();
    assertNotNull(client.checkExists().forPath(zkTablePath));
    assertEquals(tableName,new String(client.getData().forPath(zkTablePath)));
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.minicluster.MiniAccumuloClusterTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testDebugPorts(){
  Set<Pair<ServerType,Integer>> debugPorts=accumulo.getDebugPorts();
  Assert.assertEquals(5,debugPorts.size());
  for (  Pair<ServerType,Integer> debugPort : debugPorts) {
    Assert.assertTrue(debugPort.getSecond() > 0);
  }
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkDFSConstants(){
  assertEquals("dfs.namenode.name.dir",DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY);
  assertEquals("dfs.datanode.data.dir",DFSConfigKeys.DFS_DATANODE_DATA_DIR_KEY);
  assertEquals("dfs.replication",DFSConfigKeys.DFS_REPLICATION_KEY);
}

</code></pre>

<br>
<pre class="type-11 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void test() throws Exception {
  Connector conn=accumulo.getConnector("root","superSecret");
  conn.tableOperations().create("table1",new NewTableConfiguration());
  conn.securityOperations().createLocalUser("user1",new PasswordToken("pass1"));
  conn.securityOperations().changeUserAuthorizations("user1",new Authorizations("A","B"));
  conn.securityOperations().grantTablePermission("user1","table1",TablePermission.WRITE);
  conn.securityOperations().grantTablePermission("user1","table1",TablePermission.READ);
  IteratorSetting is=new IteratorSetting(10,SummingCombiner.class);
  SummingCombiner.setEncodingType(is,LongCombiner.Type.STRING);
  SummingCombiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("META","COUNT")));
  conn.tableOperations().attachIterator("table1",is);
  Connector uconn=accumulo.getConnector("user1","pass1");
  BatchWriter bw=uconn.createBatchWriter("table1",new BatchWriterConfig());
  UUID uuid=UUID.randomUUID();
  Mutation m=new Mutation(uuid.toString());
  m.put("META","SIZE",new ColumnVisibility("A|B"),"8");
  m.put("META","CRC",new ColumnVisibility("A|B"),"456");
  m.put("META","COUNT",new ColumnVisibility("A|B"),"1");
  m.put("DATA","IMG",new ColumnVisibility("A&B"),"ABCDEFGH");
  bw.addMutation(m);
  bw.flush();
  m=new Mutation(uuid.toString());
  m.put("META","COUNT",new ColumnVisibility("A|B"),"1");
  m.put("META","CRC",new ColumnVisibility("A|B"),"123");
  bw.addMutation(m);
  bw.close();
  int count=0;
  Scanner scanner=uconn.createScanner("table1",new Authorizations("A"));
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnQualifierData().toString().equals("COUNT")) {
      Assert.assertEquals("2",entry.getValue().toString());
    }
 else     if (entry.getKey().getColumnQualifierData().toString().equals("SIZE")) {
      Assert.assertEquals("8",entry.getValue().toString());
    }
 else     if (entry.getKey().getColumnQualifierData().toString().equals("CRC")) {
      Assert.assertEquals("123",entry.getValue().toString());
    }
 else {
      Assert.assertTrue(false);
    }
    count++;
  }
  Assert.assertEquals(3,count);
  count=0;
  scanner=uconn.createScanner("table1",new Authorizations("A","B"));
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnQualifierData().toString().equals("IMG")) {
      Assert.assertEquals("ABCDEFGH",entry.getValue().toString());
    }
    count++;
  }
  Assert.assertEquals(4,count);
  conn.tableOperations().delete("table1");
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testPerTableClasspath() throws Exception {
  Connector conn=accumulo.getConnector("root","superSecret");
  conn.tableOperations().create("table2");
  File jarFile=folder.newFile("iterator.jar");
  FileUtils.copyURLToFile(this.getClass().getResource("/FooFilter.jar"),jarFile);
  conn.instanceOperations().setProperty(Property.VFS_CONTEXT_CLASSPATH_PROPERTY.getKey() + "cx1",jarFile.toURI().toString());
  conn.tableOperations().setProperty("table2",Property.TABLE_CLASSPATH.getKey(),"cx1");
  conn.tableOperations().attachIterator("table2",new IteratorSetting(100,"foocensor","org.apache.accumulo.test.FooFilter"));
  BatchWriter bw=conn.createBatchWriter("table2",new BatchWriterConfig());
  Mutation m1=new Mutation("foo");
  m1.put("cf1","cq1","v2");
  m1.put("cf1","cq2","v3");
  bw.addMutation(m1);
  Mutation m2=new Mutation("bar");
  m2.put("cf1","cq1","v6");
  m2.put("cf1","cq2","v7");
  bw.addMutation(m2);
  bw.close();
  Scanner scanner=conn.createScanner("table2",new Authorizations());
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    Assert.assertFalse(entry.getKey().getRowData().toString().toLowerCase().contains("foo"));
    count++;
  }
  Assert.assertEquals(2,count);
  conn.instanceOperations().removeProperty(Property.VFS_CONTEXT_CLASSPATH_PROPERTY.getKey() + "cx1");
  conn.tableOperations().delete("table2");
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomPorts() throws Exception {
  File confDir=new File(testDir,"conf");
  File accumuloSite=new File(confDir,"accumulo-site.xml");
  Configuration conf=new Configuration(false);
  conf.addResource(accumuloSite.toURI().toURL());
  for (  Property randomPortProp : new Property[]{Property.TSERV_CLIENTPORT,Property.MONITOR_PORT,Property.MONITOR_LOG4J_PORT,Property.MASTER_CLIENTPORT,Property.TRACE_PORT,Property.GC_PORT}) {
    String value=conf.get(randomPortProp.getKey());
    Assert.assertNotNull("Found no value for " + randomPortProp,value);
    Assert.assertEquals("0",value);
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConfig(){
  Assert.assertEquals(0,accumulo.getConfig().getZooKeeperPort());
  HashMap<String,String> site=new HashMap<String,String>();
  site.put(Property.TSERV_WORKQ_THREADS.getKey(),"2");
  Assert.assertEquals(site,accumulo.getConfig().getSiteConfig());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.minicluster.impl.MiniAccumuloClusterImplTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void saneMonitorInfo() throws Exception {
  MasterMonitorInfo stats;
  while (true) {
    stats=accumulo.getMasterMonitorInfo();
    if (null != stats.tServerInfo && stats.tServerInfo.size() == NUM_TSERVERS) {
      break;
    }
  }
  List<MasterState> validStates=Arrays.asList(MasterState.values());
  List<MasterGoalState> validGoals=Arrays.asList(MasterGoalState.values());
  Assert.assertTrue("master state should be valid.",validStates.contains(stats.state));
  Assert.assertTrue("master goal state should be in " + validGoals + ". is "+ stats.goalState,validGoals.contains(stats.goalState));
  Assert.assertNotNull("should have a table map.",stats.tableMap);
  Assert.assertTrue("root table should exist in " + stats.tableMap.keySet(),stats.tableMap.keySet().contains(RootTable.ID));
  Assert.assertTrue("meta table should exist in " + stats.tableMap.keySet(),stats.tableMap.keySet().contains(MetadataTable.ID));
  Assert.assertTrue("our test table should exist in " + stats.tableMap.keySet(),stats.tableMap.keySet().contains(testTableID));
  Assert.assertNotNull("there should be tservers.",stats.tServerInfo);
  Assert.assertEquals(NUM_TSERVERS,stats.tServerInfo.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.minicluster.impl.MiniAccumuloConfigImplTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMemoryConfig(){
  MiniAccumuloConfigImpl config=new MiniAccumuloConfigImpl(tempFolder.getRoot(),"password").initialize();
  config.setDefaultMemory(96,MemoryUnit.MEGABYTE);
  assertEquals(96 * 1024 * 1024l,config.getMemory(ServerType.MASTER));
  assertEquals(96 * 1024 * 1024l,config.getMemory(ServerType.TABLET_SERVER));
  assertEquals(96 * 1024 * 1024l,config.getDefaultMemory());
  config.setMemory(ServerType.MASTER,256,MemoryUnit.MEGABYTE);
  assertEquals(256 * 1024 * 1024l,config.getMemory(ServerType.MASTER));
  assertEquals(96 * 1024 * 1024l,config.getDefaultMemory());
  assertEquals(96 * 1024 * 1024l,config.getMemory(ServerType.TABLET_SERVER));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings("deprecation") @Test public void testSiteConfig(){
  Map<String,String> siteConfig=new HashMap<String,String>();
  siteConfig.put(Property.INSTANCE_DFS_URI.getKey(),"hdfs://");
  MiniAccumuloConfigImpl config=new MiniAccumuloConfigImpl(tempFolder.getRoot(),"password").setSiteConfig(siteConfig).initialize();
  assertEquals("hdfs://",config.getSiteConfig().get(Property.INSTANCE_DFS_URI.getKey()));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZookeeperPort(){
  MiniAccumuloConfigImpl config=new MiniAccumuloConfigImpl(tempFolder.getRoot(),"password").setZooKeeperPort(5000).initialize();
  assertEquals(5000,config.getZooKeeperPort());
  config=new MiniAccumuloConfigImpl(tempFolder.getRoot(),"password").initialize();
  assertTrue(config.getZooKeeperPort() > 0);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testZooKeeperStartupTime(){
  MiniAccumuloConfigImpl config=new MiniAccumuloConfigImpl(tempFolder.getRoot(),"password").setZooKeeperStartupTime(5000).initialize();
  assertEquals(5000,config.getZooKeeperStartupTime());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.monitor.ShowTraceLinkTypeTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTraceSortingForMonitor(){
  ArrayList<RemoteSpan> spans=new ArrayList<RemoteSpan>(10), expectedOrdering=new ArrayList<RemoteSpan>(10);
  spans.add(rs(55l,75l,"desc5"));
  spans.add(rs(25l,30l,"desc2"));
  spans.add(rs(85l,90l,"desc8"));
  spans.add(rs(45l,60l,"desc4"));
  spans.add(rs(35l,55l,"desc3"));
  spans.add(rs(95l,110l,"desc9"));
  spans.add(rs(65l,80l,"desc6"));
  spans.add(rs(100l,120l,"desc10"));
  spans.add(rs(15l,25l,"desc1"));
  spans.add(rs(75l,100l,"desc7"));
  expectedOrdering.add(rs(15l,25l,"desc1"));
  expectedOrdering.add(rs(25l,30l,"desc2"));
  expectedOrdering.add(rs(35l,55l,"desc3"));
  expectedOrdering.add(rs(45l,60l,"desc4"));
  expectedOrdering.add(rs(55l,75l,"desc5"));
  expectedOrdering.add(rs(65l,80l,"desc6"));
  expectedOrdering.add(rs(75l,100l,"desc7"));
  expectedOrdering.add(rs(85l,90l,"desc8"));
  expectedOrdering.add(rs(95l,110l,"desc9"));
  expectedOrdering.add(rs(100l,120l,"desc10"));
  Collections.sort(spans);
  Assert.assertEquals(expectedOrdering,spans);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.monitor.ZooKeeperStatusTest </h4><pre class="type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void zkHostSortingTest(){
  List<String> expectedHosts=Arrays.asList("rack1node1","rack2node1","rack4node1","rack4node4");
  TreeSet<ZooKeeperState> states=new TreeSet<ZooKeeperState>();
  states.add(new ZooKeeperState("rack4node4","leader",10));
  states.add(new ZooKeeperState("rack4node1","follower",10));
  states.add(new ZooKeeperState("rack1node1","follower",10));
  states.add(new ZooKeeperState("rack2node1","follower",10));
  List<String> actualHosts=new ArrayList<String>(4);
  for (  ZooKeeperState state : states) {
    actualHosts.add(state.keeper);
  }
  Assert.assertEquals(expectedHosts.size(),actualHosts.size());
  for (int i=0; i < expectedHosts.size(); i++) {
    Assert.assertEquals(expectedHosts.get(i),actualHosts.get(i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.monitor.util.celltypes.PreciseNumberTypeTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test(){
  PreciseNumberType p=new PreciseNumberType(500,5000,100,6000);
  assertEquals("1,000",p.format(1000));
  assertEquals("<span class='error'>1</span>",p.format(1));
  assertEquals("<span class='warning'>5,005</span>",p.format(5005));
  assertEquals("<span class='error'>10,000</span>",p.format(10000));
  assertEquals("-",p.format(null));
  assertEquals("3,000",p.format(Long.valueOf(3000L)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.plugin.PluginIT </h4><pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkIterator() throws IOException, AccumuloException, AccumuloSecurityException, TableExistsException, TableNotFoundException {
  String tableName="checkIterator";
  connector.tableOperations().create(tableName);
  BatchWriter bw=connector.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("ROW1");
  m.put("allowed","CQ1","V1");
  m.put("denied","CQ2","V2");
  m.put("allowed","CQ3","V3");
  bw.addMutation(m);
  m=new Mutation("ROW2");
  m.put("allowed","CQ1","V1");
  m.put("denied","CQ2","V2");
  m.put("allowed","CQ3","V3");
  bw.addMutation(m);
  bw.close();
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  IteratorSetting is=new IteratorSetting(5,CustomFilter.class);
  scanner.addScanIterator(is);
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    count++;
    assertEquals("allowed",entry.getKey().getColumnFamily().toString());
  }
  assertEquals(4,count);
  scanner.clearScanIterators();
  CustomFilter.setNegate(is,true);
  scanner.addScanIterator(is);
  count=0;
  for (  Entry<Key,Value> entry : scanner) {
    count++;
    assertEquals("denied",entry.getKey().getColumnFamily().toString());
  }
  assertEquals(2,count);
  assertTrue(new File("target/accumulo-maven-plugin/" + instance.getInstanceName() + "/testCheckIteratorPassed").createNewFile());
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void writeToTable() throws AccumuloException, AccumuloSecurityException, TableExistsException, TableNotFoundException, IOException {
  String tableName="writeToTable";
  connector.tableOperations().create(tableName);
  BatchWriter bw=connector.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("ROW");
  m.put("CF","CQ","V");
  bw.addMutation(m);
  bw.close();
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    count++;
    assertEquals("ROW",entry.getKey().getRow().toString());
    assertEquals("CF",entry.getKey().getColumnFamily().toString());
    assertEquals("CQ",entry.getKey().getColumnQualifier().toString());
    assertEquals("V",entry.getValue().toString());
  }
  assertEquals(1,count);
  assertTrue(new File("target/accumulo-maven-plugin/" + instance.getInstanceName() + "/testWriteToTablePassed").createNewFile());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.AccumuloServerContextTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSasl() throws Exception {
  testUser.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Instance instance=EasyMock.createMock(Instance.class);
      ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      clientConf.setProperty(ClientProperty.INSTANCE_RPC_SASL_ENABLED,"true");
      clientConf.setProperty(ClientProperty.KERBEROS_SERVER_PRIMARY,"accumulo");
      final AccumuloConfiguration conf=ClientContext.convertClientConfig(clientConf);
      SiteConfiguration siteConfig=EasyMock.createMock(SiteConfiguration.class);
      EasyMock.expect(siteConfig.getBoolean(Property.INSTANCE_RPC_SASL_ENABLED)).andReturn(true);
      PasswordToken pw=new PasswordToken("fake");
      ByteArrayOutputStream baos=new ByteArrayOutputStream();
      pw.write(new DataOutputStream(baos));
      SystemToken token=new SystemToken();
      token.readFields(new DataInputStream(new ByteArrayInputStream(baos.toByteArray())));
      ServerConfigurationFactory factory=EasyMock.createMock(ServerConfigurationFactory.class);
      EasyMock.expect(factory.getConfiguration()).andReturn(conf).anyTimes();
      EasyMock.expect(factory.getSiteConfiguration()).andReturn(siteConfig).anyTimes();
      EasyMock.expect(factory.getInstance()).andReturn(instance).anyTimes();
      AccumuloServerContext context=EasyMock.createMockBuilder(AccumuloServerContext.class).addMockedMethod("enforceKerberosLogin").addMockedMethod("getConfiguration").addMockedMethod("getServerConfigurationFactory").addMockedMethod("getCredentials").createMock();
      context.enforceKerberosLogin();
      EasyMock.expectLastCall().anyTimes();
      EasyMock.expect(context.getConfiguration()).andReturn(conf).anyTimes();
      EasyMock.expect(context.getServerConfigurationFactory()).andReturn(factory).anyTimes();
      EasyMock.expect(context.getCredentials()).andReturn(new Credentials("accumulo/hostname@FAKE.COM",token)).once();
      EasyMock.expect(siteConfig.get(EasyMock.anyObject(Property.class))).andAnswer(new IAnswer<String>(){
        @Override public String answer(){
          Object[] args=EasyMock.getCurrentArguments();
          return conf.get((Property)args[0]);
        }
      }
).anyTimes();
      EasyMock.expect(siteConfig.iterator()).andAnswer(new IAnswer<Iterator<Entry<String,String>>>(){
        @Override public Iterator<Entry<String,String>> answer(){
          return conf.iterator();
        }
      }
).anyTimes();
      EasyMock.replay(factory,context,siteConfig);
      Assert.assertEquals(ThriftServerType.SASL,context.getThriftServerType());
      SaslServerConnectionParams saslParams=context.getSaslParams();
      Assert.assertEquals(new SaslServerConnectionParams(conf,token),saslParams);
      Assert.assertEquals(username,saslParams.getPrincipal());
      EasyMock.verify(factory,context,siteConfig);
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.AccumuloTest </h4><pre class="type-3 type-2 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=RuntimeException.class) public void testGetAccumuloPersistentVersion_Fail() throws Exception {
  expect(fs.listStatus(path)).andThrow(new FileNotFoundException());
  replay(fs);
  assertEquals(-1,Accumulo.getAccumuloPersistentVersion(fs,path));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAccumuloPersistentVersion_Empty() throws Exception {
  expect(fs.listStatus(path)).andReturn(new FileStatus[0]);
  replay(fs);
  assertEquals(-1,Accumulo.getAccumuloPersistentVersion(fs,path));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAccumuloPersistentVersion() throws Exception {
  FileStatus[] files=mockPersistentVersion("42");
  expect(fs.listStatus(path)).andReturn(files);
  replay(fs);
  assertEquals(42,Accumulo.getAccumuloPersistentVersion(fs,path));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLocateLogConfig() throws Exception {
  File confDir=new File(FileUtils.getTempDirectory(),"AccumuloTest" + System.currentTimeMillis());
  String confDirName=confDir.getAbsolutePath();
  assertTrue("Failed to make test configuration directory",confDir.mkdir());
  try {
    File appProps=new File(confDir,"flogger_logger.properties");
    String appPropsName=String.format("%s/flogger_logger.properties",confDirName);
    FileUtils.touch(appProps);
    File genericXml=new File(confDir,"generic_logger.xml");
    String genericXmlName=String.format("%s/generic_logger.xml",confDirName);
    FileUtils.touch(genericXml);
    assertEquals(appPropsName,Accumulo.locateLogConfig(confDirName,"flogger"));
    assertEquals(genericXmlName,Accumulo.locateLogConfig(confDirName,"flagger"));
    assertTrue("Failed to delete log configuration file",appProps.delete());
    assertEquals(genericXmlName,Accumulo.locateLogConfig(confDirName,"flogger"));
  }
  finally {
    FileUtils.deleteDirectory(confDir);
  }
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLocateLogConfig_Explicit() throws Exception {
  File confDir=new File(FileUtils.getTempDirectory(),"AccumuloTest" + System.currentTimeMillis());
  String confDirName=confDir.getAbsolutePath();
  System.setProperty("log4j.configuration","myconfig.xml");
  try {
    assertEquals("myconfig.xml",Accumulo.locateLogConfig(confDirName,"flogger"));
  }
  finally {
    FileUtils.deleteDirectory(confDir);
    System.clearProperty("log4j.configuration");
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAccumuloPersistentVersion_Null() throws Exception {
  expect(fs.listStatus(path)).andReturn(null);
  replay(fs);
  assertEquals(-1,Accumulo.getAccumuloPersistentVersion(fs,path));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLocateLogConfig_Default() throws Exception {
  File confDir=new File(FileUtils.getTempDirectory(),"AccumuloTest" + System.currentTimeMillis());
  String confDirName=confDir.getAbsolutePath();
  assertTrue("Failed to make test configuration directory",confDir.mkdir());
  try {
    String genericXmlName=String.format("%s/generic_logger.xml",confDirName);
    assertEquals(genericXmlName,Accumulo.locateLogConfig(confDirName,"flogger"));
  }
  finally {
    FileUtils.deleteDirectory(confDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.ServerOptsTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAddress(){
  opts.parseArgs(ServerOptsTest.class.getName(),new String[]{"-a","1.2.3.4"});
  assertEquals("1.2.3.4",opts.getAddress());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAddress_NOne(){
  opts.parseArgs(ServerOptsTest.class.getName(),new String[]{});
  assertEquals("0.0.0.0",opts.getAddress());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.client.BulkImporterTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFindOverlappingTablets() throws Exception {
  MockTabletLocator locator=new MockTabletLocator();
  FileSystem fs=FileSystem.getLocal(CachedConfiguration.getInstance());
  ClientContext context=EasyMock.createMock(ClientContext.class);
  EasyMock.expect(context.getConfiguration()).andReturn(DefaultConfiguration.getInstance()).anyTimes();
  EasyMock.replay(context);
  String file="target/testFile.rf";
  fs.delete(new Path(file),true);
  FileSKVWriter writer=FileOperations.getInstance().openWriter(file,fs,fs.getConf(),context.getConfiguration());
  writer.startDefaultLocalityGroup();
  Value empty=new Value(new byte[]{});
  writer.append(new Key("a","cf","cq"),empty);
  writer.append(new Key("a","cf","cq1"),empty);
  writer.append(new Key("a","cf","cq2"),empty);
  writer.append(new Key("a","cf","cq3"),empty);
  writer.append(new Key("a","cf","cq4"),empty);
  writer.append(new Key("a","cf","cq5"),empty);
  writer.append(new Key("d","cf","cq"),empty);
  writer.append(new Key("d","cf","cq1"),empty);
  writer.append(new Key("d","cf","cq2"),empty);
  writer.append(new Key("d","cf","cq3"),empty);
  writer.append(new Key("d","cf","cq4"),empty);
  writer.append(new Key("d","cf","cq5"),empty);
  writer.append(new Key("dd","cf","cq1"),empty);
  writer.append(new Key("ichabod","cf","cq"),empty);
  writer.append(new Key("icky","cf","cq1"),empty);
  writer.append(new Key("iffy","cf","cq2"),empty);
  writer.append(new Key("internal","cf","cq3"),empty);
  writer.append(new Key("is","cf","cq4"),empty);
  writer.append(new Key("iterator","cf","cq5"),empty);
  writer.append(new Key("xyzzy","cf","cq"),empty);
  writer.close();
  VolumeManager vm=VolumeManagerImpl.get(context.getConfiguration());
  List<TabletLocation> overlaps=BulkImporter.findOverlappingTablets(context,vm,locator,new Path(file));
  Assert.assertEquals(5,overlaps.size());
  Collections.sort(overlaps);
  Assert.assertEquals(new KeyExtent(tableId,new Text("a"),null),overlaps.get(0).tablet_extent);
  Assert.assertEquals(new KeyExtent(tableId,new Text("d"),new Text("cm")),overlaps.get(1).tablet_extent);
  Assert.assertEquals(new KeyExtent(tableId,new Text("dm"),new Text("d")),overlaps.get(2).tablet_extent);
  Assert.assertEquals(new KeyExtent(tableId,new Text("j"),new Text("i")),overlaps.get(3).tablet_extent);
  Assert.assertEquals(new KeyExtent(tableId,null,new Text("l")),overlaps.get(4).tablet_extent);
  List<TabletLocation> overlaps2=BulkImporter.findOverlappingTablets(context,vm,locator,new Path(file),new KeyExtent(tableId,new Text("h"),new Text("b")));
  Assert.assertEquals(3,overlaps2.size());
  Assert.assertEquals(new KeyExtent(tableId,new Text("d"),new Text("cm")),overlaps2.get(0).tablet_extent);
  Assert.assertEquals(new KeyExtent(tableId,new Text("dm"),new Text("d")),overlaps2.get(1).tablet_extent);
  Assert.assertEquals(new KeyExtent(tableId,new Text("j"),new Text("i")),overlaps2.get(2).tablet_extent);
  Assert.assertEquals(locator.invalidated,1);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSequentialTablets() throws Exception {
  KeyExtent extent=new KeyExtent(new Text("1"),new Text("2"),new Text("1"));
  Assert.assertEquals(new Text("1\0"),BulkImporter.getStartRowForExtent(extent));
  extent=new KeyExtent(new Text("1"),new Text("2"),null);
  Assert.assertEquals(null,BulkImporter.getStartRowForExtent(extent));
  extent=new KeyExtent(new Text("1"),null,null);
  Assert.assertEquals(null,BulkImporter.getStartRowForExtent(extent));
  extent=new KeyExtent(new Text("1"),new Text("8"),new Text("7777777"));
  Assert.assertEquals(new Text("7777777\0"),BulkImporter.getStartRowForExtent(extent));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.conf.NamespaceConfigurationTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetters(){
  assertEquals(NSID,c.getNamespaceId());
  assertEquals(parent,c.getParentConfiguration());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testObserver(){
  ConfigurationObserver o=createMock(ConfigurationObserver.class);
  c.addObserver(o);
  Collection<ConfigurationObserver> os=c.getObservers();
  assertEquals(1,os.size());
  assertTrue(os.contains(o));
  c.removeObserver(o);
  os=c.getObservers();
  assertEquals(0,os.size());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetProperties(){
  Predicate<String> all=Predicates.alwaysTrue();
  Map<String,String> props=new java.util.HashMap<String,String>();
  parent.getProperties(props,all);
  replay(parent);
  List<String> children=new java.util.ArrayList<String>();
  children.add("foo");
  children.add("ding");
  expect(zc.getChildren(ZooUtil.getRoot(iid) + Constants.ZNAMESPACES + "/"+ NSID+ Constants.ZNAMESPACE_CONF)).andReturn(children);
  expect(zc.get(ZooUtil.getRoot(iid) + Constants.ZNAMESPACES + "/"+ NSID+ Constants.ZNAMESPACE_CONF+ "/"+ "foo")).andReturn("bar".getBytes(UTF_8));
  expect(zc.get(ZooUtil.getRoot(iid) + Constants.ZNAMESPACES + "/"+ NSID+ Constants.ZNAMESPACE_CONF+ "/"+ "ding")).andReturn("dong".getBytes(UTF_8));
  replay(zc);
  c.getProperties(props,all);
  assertEquals(2,props.size());
  assertEquals("bar",props.get("foo"));
  assertEquals("dong",props.get("ding"));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGet_InZK(){
  Property p=Property.INSTANCE_SECRET;
  expect(zc.get(ZooUtil.getRoot(iid) + Constants.ZNAMESPACES + "/"+ NSID+ Constants.ZNAMESPACE_CONF+ "/"+ p.getKey())).andReturn("sekrit".getBytes(UTF_8));
  replay(zc);
  assertEquals("sekrit",c.get(Property.INSTANCE_SECRET));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGet_InParent(){
  Property p=Property.INSTANCE_SECRET;
  expect(zc.get(ZooUtil.getRoot(iid) + Constants.ZNAMESPACES + "/"+ NSID+ Constants.ZNAMESPACE_CONF+ "/"+ p.getKey())).andReturn(null);
  replay(zc);
  expect(parent.get(p)).andReturn("sekrit");
  replay(parent);
  assertEquals("sekrit",c.get(Property.INSTANCE_SECRET));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.conf.ServerConfigurationFactoryTest </h4><pre class="type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetNamespaceConfiguration(){
  mockInstanceForConfig();
  ready();
  NamespaceConfiguration c=scf.getNamespaceConfiguration(NSID);
  assertEquals(NSID,c.getNamespaceId());
  assertSame(c,scf.getNamespaceConfiguration(NSID));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.conf.TableConfigurationTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetters(){
  assertEquals(TID,c.getTableId());
  assertEquals(parent,c.getParentConfiguration());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGet_InZK(){
  Property p=Property.INSTANCE_SECRET;
  expect(zc.get(ZooUtil.getRoot(iid) + Constants.ZTABLES + "/"+ TID+ Constants.ZTABLE_CONF+ "/"+ p.getKey())).andReturn("sekrit".getBytes(UTF_8));
  replay(zc);
  assertEquals("sekrit",c.get(Property.INSTANCE_SECRET));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetProperties(){
  Predicate<String> all=Predicates.alwaysTrue();
  Map<String,String> props=new java.util.HashMap<String,String>();
  parent.getProperties(props,all);
  replay(parent);
  List<String> children=new java.util.ArrayList<String>();
  children.add("foo");
  children.add("ding");
  expect(zc.getChildren(ZooUtil.getRoot(iid) + Constants.ZTABLES + "/"+ TID+ Constants.ZTABLE_CONF)).andReturn(children);
  expect(zc.get(ZooUtil.getRoot(iid) + Constants.ZTABLES + "/"+ TID+ Constants.ZTABLE_CONF+ "/"+ "foo")).andReturn("bar".getBytes(UTF_8));
  expect(zc.get(ZooUtil.getRoot(iid) + Constants.ZTABLES + "/"+ TID+ Constants.ZTABLE_CONF+ "/"+ "ding")).andReturn("dong".getBytes(UTF_8));
  replay(zc);
  c.getProperties(props,all);
  assertEquals(2,props.size());
  assertEquals("bar",props.get("foo"));
  assertEquals("dong",props.get("ding"));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGet_InParent(){
  Property p=Property.INSTANCE_SECRET;
  expect(zc.get(ZooUtil.getRoot(iid) + Constants.ZTABLES + "/"+ TID+ Constants.ZTABLE_CONF+ "/"+ p.getKey())).andReturn(null);
  replay(zc);
  expect(parent.get(p)).andReturn("sekrit");
  replay(parent);
  assertEquals("sekrit",c.get(Property.INSTANCE_SECRET));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testObserver(){
  ConfigurationObserver o=createMock(ConfigurationObserver.class);
  c.addObserver(o);
  Collection<ConfigurationObserver> os=c.getObservers();
  assertEquals(1,os.size());
  assertTrue(os.contains(o));
  c.removeObserver(o);
  os=c.getObservers();
  assertEquals(0,os.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.conf.ZooCachePropertyAccessorTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetProperties(){
  Map<String,String> props=new java.util.HashMap<String,String>();
  AccumuloConfiguration parent=createMock(AccumuloConfiguration.class);
  @SuppressWarnings("unchecked") Predicate<String> filter=createMock(Predicate.class);
  parent.getProperties(props,filter);
  replay(parent);
  String child1="child1";
  String child2="child2";
  List<String> children=new java.util.ArrayList<String>();
  children.add(child1);
  children.add(child2);
  expect(zc.getChildren(PATH)).andReturn(children);
  expect(zc.get(PATH + "/" + child1)).andReturn(VALUE_BYTES);
  expect(zc.get(PATH + "/" + child2)).andReturn(null);
  replay(zc);
  expect(filter.apply(child1)).andReturn(true);
  expect(filter.apply(child2)).andReturn(true);
  replay(filter);
  a.getProperties(props,PATH,filter,parent,null);
  assertEquals(1,props.size());
  assertEquals(VALUE,props.get(child1));
  verify(parent);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetProperties_Filter(){
  Map<String,String> props=new java.util.HashMap<String,String>();
  AccumuloConfiguration parent=createMock(AccumuloConfiguration.class);
  @SuppressWarnings("unchecked") Predicate<String> filter=createMock(Predicate.class);
  parent.getProperties(props,filter);
  replay(parent);
  String child1="child1";
  List<String> children=new java.util.ArrayList<String>();
  children.add(child1);
  expect(zc.getChildren(PATH)).andReturn(children);
  replay(zc);
  expect(filter.apply(child1)).andReturn(false);
  replay(filter);
  a.getProperties(props,PATH,filter,parent,null);
  assertEquals(0,props.size());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGet_Valid(){
  expect(zc.get(FULL_PATH)).andReturn(VALUE_BYTES);
  replay(zc);
  assertEquals(VALUE,a.get(PROP,PATH,null));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGet_InvalidFormat(){
  Property badProp=Property.MASTER_CLIENTPORT;
  expect(zc.get(PATH + "/" + badProp.getKey())).andReturn(VALUE_BYTES);
  replay(zc);
  AccumuloConfiguration parent=createMock(AccumuloConfiguration.class);
  expect(parent.get(badProp)).andReturn("12345");
  replay(parent);
  assertEquals("12345",a.get(badProp,PATH,parent));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGet_Parent(){
  AccumuloConfiguration parent=createMock(AccumuloConfiguration.class);
  expect(parent.get(PROP)).andReturn(VALUE);
  replay(parent);
  expect(zc.get(FULL_PATH)).andReturn(null);
  replay(zc);
  assertEquals(VALUE,a.get(PROP,PATH,parent));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetProperties_NoChildren(){
  Map<String,String> props=new java.util.HashMap<String,String>();
  AccumuloConfiguration parent=createMock(AccumuloConfiguration.class);
  @SuppressWarnings("unchecked") Predicate<String> filter=createMock(Predicate.class);
  parent.getProperties(props,filter);
  replay(parent);
  expect(zc.getChildren(PATH)).andReturn(null);
  replay(zc);
  a.getProperties(props,PATH,filter,parent,null);
  assertEquals(0,props.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.constraints.MetadataConstraintsTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBulkFileCheck(){
  MetadataConstraints mc=new TestMetadataConstraints();
  Mutation m;
  List<Short> violations;
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("12345".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile"),new DataFileValue(1,1).encodeAsValue());
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)8),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("9".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile"),new DataFileValue(1,1).encodeAsValue());
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)8),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile"),new DataFileValue(1,1).encodeAsValue());
  violations=mc.check(null,m);
  assertNull(violations);
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)8),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile"),new DataFileValue(1,1).encodeAsValue());
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile2"),new Value("7".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile2"),new DataFileValue(1,1).encodeAsValue());
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)8),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile"),new DataFileValue(1,1).encodeAsValue());
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile2"),new Value("5".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile2"),new DataFileValue(1,1).encodeAsValue());
  violations=mc.check(null,m);
  assertNull(violations);
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile"),new DataFileValue(1,1).encodeAsValue());
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile2"),new Value("5".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)8),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.put(m,new Value("/t1".getBytes()));
  violations=mc.check(null,m);
  assertNull(violations);
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("12345".getBytes()));
  TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.put(m,new Value("/t1".getBytes()));
  violations=mc.check(null,m);
  assertNull(violations);
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  m.put(TabletsSection.CurrentLocationColumnFamily.NAME,new Text("789"),new Value("127.0.0.1:9997".getBytes()));
  violations=mc.check(null,m);
  assertNull(violations);
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("12345".getBytes()));
  m.put(TabletsSection.CurrentLocationColumnFamily.NAME,new Text("789"),new Value("127.0.0.1:9997".getBytes()));
  violations=mc.check(null,m);
  assertNull(violations);
  m=new Mutation(new Text("0;foo"));
  m.putDelete(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"));
  violations=mc.check(null,m);
  assertNull(violations);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheck(){
  Logger.getLogger(AccumuloConfiguration.class).setLevel(Level.ERROR);
  Mutation m=new Mutation(new Text("0;foo"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("1foo".getBytes()));
  MetadataConstraints mc=new MetadataConstraints();
  List<Short> violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)3),violations.get(0));
  m=new Mutation(new Text("0:foo"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("1poo".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)4),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  m.put(new Text("bad_column_name"),new Text(""),new Value("e".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)2),violations.get(0));
  m=new Mutation(new Text("!!<"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("1poo".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(2,violations.size());
  assertEquals(Short.valueOf((short)4),violations.get(0));
  assertEquals(Short.valueOf((short)5),violations.get(1));
  m=new Mutation(new Text("0;foo"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)6),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("bar".getBytes()));
  violations=mc.check(null,m);
  assertEquals(null,violations);
  m=new Mutation(new Text("!0<"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("bar".getBytes()));
  violations=mc.check(null,m);
  assertEquals(null,violations);
  m=new Mutation(new Text("!1<"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("bar".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)4),violations.get(0));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.data.ServerMutationTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  ServerMutation m=new ServerMutation(new Text("r1"));
  m.put(new Text("cf1"),new Text("cq1"),new Value("v1".getBytes()));
  m.put(new Text("cf2"),new Text("cq2"),56,new Value("v2".getBytes()));
  m.setSystemTimestamp(42);
  List<ColumnUpdate> updates=m.getUpdates();
  assertEquals(2,updates.size());
  assertEquals("r1",new String(m.getRow()));
  ColumnUpdate cu=updates.get(0);
  assertEquals("cf1",new String(cu.getColumnFamily()));
  assertEquals("cq1",new String(cu.getColumnQualifier()));
  assertEquals("",new String(cu.getColumnVisibility()));
  assertFalse(cu.hasTimestamp());
  assertEquals(42l,cu.getTimestamp());
  ServerMutation m2=new ServerMutation();
  ReflectionUtils.copy(CachedConfiguration.getInstance(),m,m2);
  updates=m2.getUpdates();
  assertEquals(2,updates.size());
  assertEquals("r1",new String(m2.getRow()));
  cu=updates.get(0);
  assertEquals("cf1",new String(cu.getColumnFamily()));
  assertEquals("cq1",new String(cu.getColumnQualifier()));
  assertFalse(cu.hasTimestamp());
  assertEquals(42l,cu.getTimestamp());
  cu=updates.get(1);
  assertEquals("r1",new String(m2.getRow()));
  assertEquals("cf2",new String(cu.getColumnFamily()));
  assertEquals("cq2",new String(cu.getColumnQualifier()));
  assertTrue(cu.hasTimestamp());
  assertEquals(56,cu.getTimestamp());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.fs.FileRefTest </h4><pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEqualsAndHash(){
  Assert.assertEquals(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf"),new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf"));
  Assert.assertEquals(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf"),new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf"));
  Assert.assertNotEquals(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0005.rf"),new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf"));
  Assert.assertNotEquals(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0005.rf"),new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf"));
  HashMap<FileRef,String> refMap=new HashMap<FileRef,String>();
  refMap.put(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf"),"7");
  refMap.put(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0005.rf"),"8");
  Assert.assertNull(refMap.get("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0006.rf"));
  Assert.assertEquals(refMap.get(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf")),"7");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf")),"7");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://1.2.3.4//accumulo/tables/2a//t-0003//C0004.rf")),"7");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://nn1/accumulo/tables/2a//t-0003//C0004.rf")),"7");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0005.rf")),"8");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0005.rf")),"8");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a//t-0003/C0005.rf")),"8");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://nn1/accumulo/tables//2a/t-0003/C0005.rf")),"8");
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSuffixes(){
  Assert.assertEquals(new Path("2a/t-0003/C0004.rf"),FileRef.extractSuffix(new Path("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf")));
  Assert.assertEquals(new Path("2a/t-0003/C0004.rf"),FileRef.extractSuffix(new Path("hdfs://nn1/accumulo/tables/2a/t-0003//C0004.rf")));
  Assert.assertEquals(new Path("2a/t-0003"),FileRef.extractSuffix(new Path("hdfs://nn1/accumulo/tables/2a/t-0003")));
  Assert.assertEquals(new Path("2a/t-0003"),FileRef.extractSuffix(new Path("hdfs://nn1/accumulo/tables/2a/t-0003/")));
  testBadTableSuffix("t-0003/C0004.rf");
  testBadTableSuffix("../t-0003/C0004.rf");
  testBadTableSuffix("2a/t-0003");
  testBadTableSuffix("2a/t-0003/C0004.rf");
  testBadTableSuffix("2a/t-0003/C0004.rf");
  testBadTableSuffix("hdfs://nn3/accumulo/2a/t-0003/C0004.rf");
  testBadTableSuffix("hdfs://nn3/accumulo/2a/t-0003");
  testBadTableSuffix("hdfs://nn3/tables/accumulo/2a/t-0003/C0004.rf");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.fs.FileTypeTest </h4><pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVolumeExtraction(){
  Assert.assertEquals(new Path("file:/a/accumulo"),FileType.TABLE.getVolume(new Path("file:/a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:///a/accumulo"),FileType.TABLE.getVolume(new Path("file:/a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:///a/accumulo"),FileType.TABLE.getVolume(new Path("file:///a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/a/accumulo"),FileType.TABLE.getVolume(new Path("file:///a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/a"),FileType.TABLE.getVolume(new Path("file:/a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:///a"),FileType.TABLE.getVolume(new Path("file:/a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:///a"),FileType.TABLE.getVolume(new Path("file:///a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/a"),FileType.TABLE.getVolume(new Path("file:///a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("file:/a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("file:///a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("file:/a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("file:///a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/accumulo"),FileType.TABLE.getVolume(new Path("file:/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/accumulo"),FileType.TABLE.getVolume(new Path("file:///accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/"),FileType.TABLE.getVolume(new Path("file:/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/"),FileType.TABLE.getVolume(new Path("file:///tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/a"),FileType.WAL.getVolume(new Path("file:/a/wal/1.2.3.4/aaa-bbb-ccc-ddd")));
  Assert.assertNull(FileType.WAL.getVolume(new Path("1.2.3.4/aaa-bbb-ccc-ddd")));
  Assert.assertNull(FileType.TABLE.getVolume(new Path("../2b/t-001/C00.rf")));
  Assert.assertNull(FileType.TABLE.getVolume(new Path("/t-001/C00.rf")));
  Assert.assertEquals(new Path("hdfs://nn1/accumulo"),FileType.TABLE.getVolume(new Path("hdfs://nn1/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("hdfs://nn1/a/accumulo"),FileType.TABLE.getVolume(new Path("hdfs://nn1/a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("hdfs://nn1/"),FileType.TABLE.getVolume(new Path("hdfs://nn1/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("hdfs://nn1/a"),FileType.TABLE.getVolume(new Path("hdfs://nn1/a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("hdfs://nn1/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("hdfs://nn1/a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("hdfs://nn1/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("hdfs://nn1/a/tables/2b/t-001/C00.rf")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.fs.ViewFSUtilsTest </h4><pre class="type-9 type-11 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOverlappingMountPoints() throws IllegalArgumentException, IOException {
  if (ViewFSUtils.isViewFSSupported()) {
    Configuration conf=new Configuration(false);
    conf.set("fs.viewfs.mounttable.default.link./","file:///tmp/0");
    conf.set("fs.viewfs.mounttable.default.link./ns1","file:///tmp/1");
    conf.set("fs.viewfs.mounttable.default.link./ns1/A","file:///tmp/2");
    conf.set("fs.viewfs.mounttable.default.link./ns1/AA","file:///tmp/3");
    conf.set("fs.viewfs.mounttable.default.link./ns1/C","file:///tmp/3");
    conf.set("fs.viewfs.mounttable.default.link./ns2","file:///tmp/3");
    String[] tablesDirs1=shuffle("viewfs:///ns1/accumulo/tables","viewfs:///ns1/A/accumulo/tables","viewfs:///ns1/AA/accumulo/tables","viewfs:///ns1/C/accumulo/tables","viewfs:///ns2/accumulo/tables","viewfs:///accumulo/tables");
    String[] tablesDirs2=shuffle("viewfs:/ns1/accumulo/tables","viewfs:/ns1/A/accumulo/tables","viewfs:/ns1/AA/accumulo/tables","viewfs:/ns1/C/accumulo/tables","viewfs:/ns2/accumulo/tables","viewfs:/accumulo/tables");
    for (    String ns : Arrays.asList("","/ns1","/ns1/A","/ns1/AA","/ns1/C","/ns2")) {
      Path match=ViewFSUtils.matchingFileSystem(new Path("viewfs:" + ns + "/bulk_import_01"),tablesDirs2,conf);
      Assert.assertEquals(new Path("viewfs:" + ns + "/accumulo/tables"),match);
      match=ViewFSUtils.matchingFileSystem(new Path("viewfs://" + ns + "/bulk_import_01"),tablesDirs1,conf);
      Assert.assertEquals(new Path("viewfs:" + ns + "/accumulo/tables"),match);
      match=ViewFSUtils.matchingFileSystem(new Path("viewfs:" + ns + "/bulk_import_01"),tablesDirs2,conf);
      Assert.assertEquals(new Path("viewfs:" + ns + "/accumulo/tables"),match);
      match=ViewFSUtils.matchingFileSystem(new Path("viewfs://" + ns + "/bulk_import_01"),tablesDirs1,conf);
      Assert.assertEquals(new Path("viewfs:" + ns + "/accumulo/tables"),match);
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-11 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDisjointMountPoints() throws IllegalArgumentException, IOException {
  if (ViewFSUtils.isViewFSSupported()) {
    Configuration conf=new Configuration(false);
    conf.set("fs.viewfs.mounttable.default.link./ns","file:///tmp/ns");
    conf.set("fs.viewfs.mounttable.default.link./ns1","file:///tmp/ns1");
    conf.set("fs.viewfs.mounttable.default.link./ns2","file:///tmp/ns2");
    conf.set("fs.viewfs.mounttable.default.link./ns22","file:///tmp/ns22");
    String[] tablesDirs1=shuffle("viewfs:///ns1/accumulo/tables","viewfs:///ns2/accumulo/tables","viewfs:///ns22/accumulo/tables","viewfs:///ns/accumulo/tables");
    String[] tablesDirs2=shuffle("viewfs:/ns1/accumulo/tables","viewfs:/ns2/accumulo/tables","viewfs:/ns22/accumulo/tables","viewfs:/ns/accumulo/tables");
    for (    String ns : Arrays.asList("ns1","ns2","ns22","ns")) {
      Path match=ViewFSUtils.matchingFileSystem(new Path("viewfs:/" + ns + "/bulk_import_01"),tablesDirs2,conf);
      Assert.assertEquals(new Path("viewfs:/" + ns + "/accumulo/tables"),match);
      match=ViewFSUtils.matchingFileSystem(new Path("viewfs:///" + ns + "/bulk_import_01"),tablesDirs1,conf);
      Assert.assertEquals(new Path("viewfs:/" + ns + "/accumulo/tables"),match);
      match=ViewFSUtils.matchingFileSystem(new Path("viewfs:/" + ns + "/bulk_import_01"),tablesDirs2,conf);
      Assert.assertEquals(new Path("viewfs:/" + ns + "/accumulo/tables"),match);
      match=ViewFSUtils.matchingFileSystem(new Path("viewfs:///" + ns + "/bulk_import_01"),tablesDirs1,conf);
      Assert.assertEquals(new Path("viewfs:/" + ns + "/accumulo/tables"),match);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.fs.VolumeManagerImplTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void tabletDirWithTableId() throws Exception {
  String basePath=fs.getDefaultVolume().getBasePath();
  String scheme=fs.getDefaultVolume().getFileSystem().getUri().toURL().getProtocol();
  System.out.println(basePath);
  Path expectedBase=new Path(scheme + ":" + basePath,FileType.TABLE.getDirectory());
  List<String> pathsToTest=Arrays.asList("1/default_tablet","1/default_tablet/","1/t-0000001");
  for (  String pathToTest : pathsToTest) {
    Path fullPath=fs.getFullPath(FileType.TABLE,pathToTest);
    Assert.assertEquals(new Path(expectedBase,pathToTest),fullPath);
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void tabletFileWithTableId() throws Exception {
  String basePath=fs.getDefaultVolume().getBasePath();
  String scheme=fs.getDefaultVolume().getFileSystem().getUri().toURL().getProtocol();
  System.out.println(basePath);
  Path expectedBase=new Path(scheme + ":" + basePath,FileType.TABLE.getDirectory());
  List<String> pathsToTest=Arrays.asList("1/default_tablet/C0000001.rf","1/t-0000001/C0000001.rf");
  for (  String pathToTest : pathsToTest) {
    Path fullPath=fs.getFullPath(FileType.TABLE,pathToTest);
    Assert.assertEquals(new Path(expectedBase,pathToTest),fullPath);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.fs.VolumeUtilTest </h4><pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSwitchVolumesDifferentTargetDepths(){
  List<Pair<Path,Path>> replacements=new ArrayList<Pair<Path,Path>>();
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1/accumulo"),new Path("viewfs:/path1/path2")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1:9000/accumulo"),new Path("viewfs:/path1/path2")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn2/accumulo"),new Path("viewfs:/path3")));
  Assert.assertEquals("viewfs:/path1/path2/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/path1/path2/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1:9000/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/path3/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn2/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("viewfs:/path1/path2/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("file:/nn1/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  replacements.clear();
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1/d1/accumulo"),new Path("viewfs:/path1/path2")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1:9000/d1/accumulo"),new Path("viewfs:/path1/path2")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn2/d2/accumulo"),new Path("viewfs:/path3")));
  Assert.assertEquals("viewfs:/path1/path2/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1/d1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/path1/path2/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1:9000/d1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/path3/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn2/d2/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("viewfs:/path1/path2/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("file:/nn1/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("hdfs://nn1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
}

</code></pre>

<br>
<pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSwitchVolumesDifferentSourceDepths(){
  List<Pair<Path,Path>> replacements=new ArrayList<Pair<Path,Path>>();
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1/accumulo"),new Path("viewfs:/a")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1:9000/accumulo"),new Path("viewfs:/a")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn2/accumulo"),new Path("viewfs:/b")));
  Assert.assertEquals("viewfs:/a/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/a/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1:9000/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/b/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn2/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("viewfs:/a/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("file:/nn1/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  replacements.clear();
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1/d1/accumulo"),new Path("viewfs:/a")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1:9000/d1/accumulo"),new Path("viewfs:/a")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn2/d2/accumulo"),new Path("viewfs:/b")));
  Assert.assertEquals("viewfs:/a/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1/d1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/a/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1:9000/d1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/b/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn2/d2/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("viewfs:/a/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("file:/nn1/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("hdfs://nn1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRootTableReplacement() throws IOException {
  List<Pair<Path,Path>> replacements=new ArrayList<Pair<Path,Path>>();
  replacements.add(new Pair<Path,Path>(new Path("file:/foo/v1"),new Path("file:/foo/v8")));
  replacements.add(new Pair<Path,Path>(new Path("file:/foo/v2"),new Path("file:/foo/v9")));
  FileType ft=FileType.TABLE;
  Assert.assertEquals("file:/foo/v8/tables/+r/root_tablet",VolumeUtil.switchVolume("file:/foo/v1/tables/+r/root_tablet",ft,replacements));
}

</code></pre>

<br>
<pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSwitchVolume(){
  List<Pair<Path,Path>> replacements=new ArrayList<Pair<Path,Path>>();
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1/accumulo"),new Path("viewfs:/a/accumulo")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1:9000/accumulo"),new Path("viewfs:/a/accumulo")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn2/accumulo"),new Path("viewfs:/b/accumulo")));
  Assert.assertEquals("viewfs:/a/accumulo/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/a/accumulo/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1:9000/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/b/accumulo/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn2/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("viewfs:/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("file:/nn1/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  replacements.clear();
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1/d1/accumulo"),new Path("viewfs:/a/accumulo")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1:9000/d1/accumulo"),new Path("viewfs:/a/accumulo")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn2/d2/accumulo"),new Path("viewfs:/b/accumulo")));
  Assert.assertEquals("viewfs:/a/accumulo/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1/d1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/a/accumulo/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1:9000/d1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/b/accumulo/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn2/d2/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("viewfs:/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("file:/nn1/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("hdfs://nn1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.iterators.MetadataBulkLoadFilterTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBasic() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  TreeMap<Key,Value> expected=new TreeMap<Key,Value>();
  put(tm1,"2;m",TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN,"/t1");
  put(tm1,"2;m",DataFileColumnFamily.NAME,"/t1/file1",new DataFileValue(1,1).encodeAsString());
  put(tm1,"2;m",TabletsSection.BulkFileColumnFamily.NAME,"/t1/file1","5");
  put(tm1,"2;m",TabletsSection.BulkFileColumnFamily.NAME,"/t1/file3","7");
  put(tm1,"2;m",TabletsSection.BulkFileColumnFamily.NAME,"/t1/file4","9");
  put(tm1,"2<",TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN,"/t2");
  put(tm1,"2<",DataFileColumnFamily.NAME,"/t2/file2",new DataFileValue(1,1).encodeAsString());
  put(tm1,"2<",TabletsSection.BulkFileColumnFamily.NAME,"/t2/file6","5");
  put(tm1,"2<",TabletsSection.BulkFileColumnFamily.NAME,"/t2/file7","7");
  put(tm1,"2<",TabletsSection.BulkFileColumnFamily.NAME,"/t2/file8","9");
  put(tm1,"2<",TabletsSection.BulkFileColumnFamily.NAME,"/t2/fileC",null);
  expected.putAll(tm1);
  put(tm1,"2;m",TabletsSection.BulkFileColumnFamily.NAME,"/t1/file5","8");
  put(tm1,"2<",TabletsSection.BulkFileColumnFamily.NAME,"/t2/file9","8");
  put(tm1,"2<",TabletsSection.BulkFileColumnFamily.NAME,"/t2/fileA","2");
  TestMetadataBulkLoadFilter iter=new TestMetadataBulkLoadFilter();
  iter.init(new SortedMapIterator(tm1),new HashMap<String,String>(),new BaseIteratorEnvironment(){
    @Override public boolean isFullMajorCompaction(){
      return false;
    }
    @Override public IteratorScope getIteratorScope(){
      return IteratorScope.majc;
    }
  }
);
  iter.seek(new Range(),new ArrayList<ByteSequence>(),false);
  TreeMap<Key,Value> actual=new TreeMap<Key,Value>();
  while (iter.hasTop()) {
    actual.put(iter.getTopKey(),iter.getTopValue());
    iter.next();
  }
  Assert.assertEquals(expected,actual);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.master.LiveTServerSetTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSessionIds(){
  Map<String,TServerInfo> servers=new HashMap<>();
  TServerConnection mockConn=EasyMock.createMock(TServerConnection.class);
  TServerInfo server1=new TServerInfo(new TServerInstance(HostAndPort.fromParts("localhost",1234),"5555"),mockConn);
  servers.put("server1",server1);
  LiveTServerSet tservers=new LiveTServerSet(EasyMock.createMock(ClientContext.class),EasyMock.createMock(Listener.class));
  assertEquals(server1.instance,tservers.find(servers,"localhost:1234"));
  assertNull(tservers.find(servers,"localhost:4321"));
  assertEquals(server1.instance,tservers.find(servers,"localhost:1234[5555]"));
  assertNull(tservers.find(servers,"localhost:1234[55755]"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.master.balancer.ChaoticLoadBalancerTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignMigrations(){
  servers.clear();
  servers.put(new TServerInstance(HostAndPort.fromParts("127.0.0.1",1234),"a"),new FakeTServer());
  servers.put(new TServerInstance(HostAndPort.fromParts("127.0.0.1",1235),"b"),new FakeTServer());
  servers.put(new TServerInstance(HostAndPort.fromParts("127.0.0.1",1236),"c"),new FakeTServer());
  Map<KeyExtent,TServerInstance> metadataTable=new TreeMap<KeyExtent,TServerInstance>();
  String table="t1";
  metadataTable.put(makeExtent(table,null,null),null);
  table="t2";
  metadataTable.put(makeExtent(table,"a",null),null);
  metadataTable.put(makeExtent(table,null,"a"),null);
  table="t3";
  metadataTable.put(makeExtent(table,"a",null),null);
  metadataTable.put(makeExtent(table,"b","a"),null);
  metadataTable.put(makeExtent(table,"c","b"),null);
  metadataTable.put(makeExtent(table,"d","c"),null);
  metadataTable.put(makeExtent(table,"e","d"),null);
  metadataTable.put(makeExtent(table,null,"e"),null);
  TestChaoticLoadBalancer balancer=new TestChaoticLoadBalancer();
  SortedMap<TServerInstance,TabletServerStatus> current=new TreeMap<TServerInstance,TabletServerStatus>();
  for (  Entry<TServerInstance,FakeTServer> entry : servers.entrySet()) {
    current.put(entry.getKey(),entry.getValue().getStatus(entry.getKey()));
  }
  Map<KeyExtent,TServerInstance> assignments=new HashMap<KeyExtent,TServerInstance>();
  balancer.getAssignments(getAssignments(servers),metadataTable,assignments);
  assertEquals(assignments.size(),metadataTable.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.master.balancer.DefaultLoadBalancerTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnevenAssignment(){
  for (  char c : "abcdefghijklmnopqrstuvwxyz".toCharArray()) {
    String cString=Character.toString(c);
    HostAndPort fakeAddress=HostAndPort.fromParts("127.0.0.1",(int)c);
    String fakeInstance=cString;
    TServerInstance tsi=new TServerInstance(fakeAddress,fakeInstance);
    FakeTServer fakeTServer=new FakeTServer();
    servers.put(tsi,fakeTServer);
    fakeTServer.extents.add(makeExtent(cString,null,null));
  }
  Entry<TServerInstance,FakeTServer> first=servers.entrySet().iterator().next();
  first.getValue().extents.add(makeExtent("newTable","a",null));
  first.getValue().extents.add(makeExtent("newTable","b","a"));
  first.getValue().extents.add(makeExtent("newTable","c","b"));
  first.getValue().extents.add(makeExtent("newTable","d","c"));
  first.getValue().extents.add(makeExtent("newTable","e","d"));
  first.getValue().extents.add(makeExtent("newTable","f","e"));
  first.getValue().extents.add(makeExtent("newTable","g","f"));
  first.getValue().extents.add(makeExtent("newTable","h","g"));
  first.getValue().extents.add(makeExtent("newTable","i",null));
  TestDefaultLoadBalancer balancer=new TestDefaultLoadBalancer();
  Set<KeyExtent> migrations=Collections.emptySet();
  int moved=0;
  while (true) {
    List<TabletMigration> migrationsOut=new ArrayList<TabletMigration>();
    balancer.balance(getAssignments(servers),migrations,migrationsOut);
    if (migrationsOut.size() == 0)     break;
    for (    TabletMigration migration : migrationsOut) {
      if (servers.get(migration.oldServer).extents.remove(migration.tablet))       moved++;
      servers.get(migration.newServer).extents.add(migration.tablet);
    }
  }
  assertEquals(8,moved);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAssignMigrations(){
  servers.put(new TServerInstance(HostAndPort.fromParts("127.0.0.1",1234),"a"),new FakeTServer());
  servers.put(new TServerInstance(HostAndPort.fromParts("127.0.0.2",1234),"b"),new FakeTServer());
  servers.put(new TServerInstance(HostAndPort.fromParts("127.0.0.3",1234),"c"),new FakeTServer());
  List<KeyExtent> metadataTable=new ArrayList<KeyExtent>();
  String table="t1";
  metadataTable.add(makeExtent(table,null,null));
  table="t2";
  metadataTable.add(makeExtent(table,"a",null));
  metadataTable.add(makeExtent(table,null,"a"));
  table="t3";
  metadataTable.add(makeExtent(table,"a",null));
  metadataTable.add(makeExtent(table,"b","a"));
  metadataTable.add(makeExtent(table,"c","b"));
  metadataTable.add(makeExtent(table,"d","c"));
  metadataTable.add(makeExtent(table,"e","d"));
  metadataTable.add(makeExtent(table,null,"e"));
  Collections.sort(metadataTable);
  TestDefaultLoadBalancer balancer=new TestDefaultLoadBalancer();
  SortedMap<TServerInstance,TabletServerStatus> current=new TreeMap<TServerInstance,TabletServerStatus>();
  for (  Entry<TServerInstance,FakeTServer> entry : servers.entrySet()) {
    current.put(entry.getKey(),entry.getValue().getStatus(entry.getKey()));
  }
  assignTablets(metadataTable,servers,current,balancer);
  Map<String,Integer> expectedCounts=new HashMap<String,Integer>();
  expectedCounts.put("t1",1);
  expectedCounts.put("t2",1);
  expectedCounts.put("t3",2);
  checkBalance(metadataTable,servers,expectedCounts);
  for (  Entry<TServerInstance,FakeTServer> entry : servers.entrySet()) {
    current.put(entry.getKey(),entry.getValue().getStatus(entry.getKey()));
  }
  ArrayList<TabletMigration> out=new ArrayList<TabletMigration>();
  balancer.getMigrations(current,out);
  assertEquals(out.size(),0);
  TServerInstance first=current.keySet().iterator().next();
  current.remove(first);
  FakeTServer remove=servers.remove(first);
  assignTablets(remove.extents,servers,current,balancer);
  checkBalance(metadataTable,servers,null);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnevenAssignment2(){
  for (  char c : "abcdefghijklmnopqrstuvwxyz".toCharArray()) {
    String cString=Character.toString(c);
    HostAndPort fakeAddress=HostAndPort.fromParts("127.0.0.1",(int)c);
    String fakeInstance=cString;
    TServerInstance tsi=new TServerInstance(fakeAddress,fakeInstance);
    FakeTServer fakeTServer=new FakeTServer();
    servers.put(tsi,fakeTServer);
  }
  List<Entry<TServerInstance,FakeTServer>> shortList=new ArrayList<Entry<TServerInstance,FakeTServer>>(servers.entrySet());
  Entry<TServerInstance,FakeTServer> shortServer=shortList.remove(0);
  int c=0;
  for (int i=0; i < 60; i++) {
    for (    Entry<TServerInstance,FakeTServer> entry : shortList) {
      entry.getValue().extents.add(makeExtent("t" + c,null,null));
    }
  }
  for (int i=0; i < 10; i++) {
    shortServer.getValue().extents.add(makeExtent("s" + i,null,null));
  }
  TestDefaultLoadBalancer balancer=new TestDefaultLoadBalancer();
  Set<KeyExtent> migrations=Collections.emptySet();
  int moved=0;
  while (true) {
    List<TabletMigration> migrationsOut=new ArrayList<TabletMigration>();
    balancer.balance(getAssignments(servers),migrations,migrationsOut);
    if (migrationsOut.size() == 0)     break;
    for (    TabletMigration migration : migrationsOut) {
      if (servers.get(migration.oldServer).extents.remove(migration.tablet))       moved++;
      last.remove(migration.tablet);
      servers.get(migration.newServer).extents.add(migration.tablet);
      last.put(migration.tablet,migration.newServer);
    }
  }
  assertEquals(48,moved);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.master.balancer.TableLoadBalancerTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  final Instance inst=EasyMock.createMock(Instance.class);
  EasyMock.expect(inst.getInstanceID()).andReturn(UUID.nameUUIDFromBytes(new byte[]{1,2,3,4,5,6,7,8,9,0}).toString()).anyTimes();
  EasyMock.replay(inst);
  ServerConfigurationFactory confFactory=new ServerConfigurationFactory(inst){
    @Override public TableConfiguration getTableConfiguration(    String tableId){
      return new TableConfiguration(inst,tableId,null){
        @Override public String get(        Property property){
          return DefaultConfiguration.getInstance().get(property);
        }
      }
;
    }
  }
;
  String t1Id=TABLE_ID_MAP.get("t1"), t2Id=TABLE_ID_MAP.get("t2"), t3Id=TABLE_ID_MAP.get("t3");
  state=new TreeMap<TServerInstance,TabletServerStatus>();
  TServerInstance svr=mkts("10.0.0.1","0x01020304");
  state.put(svr,status(t1Id,10,t2Id,10,t3Id,10));
  Set<KeyExtent> migrations=Collections.emptySet();
  List<TabletMigration> migrationsOut=new ArrayList<TabletMigration>();
  TableLoadBalancer tls=new TableLoadBalancer();
  tls.init(confFactory);
  tls.balance(state,migrations,migrationsOut);
  Assert.assertEquals(0,migrationsOut.size());
  state.put(mkts("10.0.0.2","0x02030405"),status());
  tls=new TableLoadBalancer();
  tls.init(confFactory);
  tls.balance(state,migrations,migrationsOut);
  int count=0;
  Map<String,Integer> movedByTable=new HashMap<String,Integer>();
  movedByTable.put(t1Id,Integer.valueOf(0));
  movedByTable.put(t2Id,Integer.valueOf(0));
  movedByTable.put(t3Id,Integer.valueOf(0));
  for (  TabletMigration migration : migrationsOut) {
    if (migration.oldServer.equals(svr))     count++;
    String key=migration.tablet.getTableId().toString();
    movedByTable.put(key,movedByTable.get(key) + 1);
  }
  Assert.assertEquals(15,count);
  for (  Integer moved : movedByTable.values()) {
    Assert.assertEquals(5,moved.intValue());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.master.state.MergeInfoTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstruction_NoArgs(){
  mi=new MergeInfo();
  assertEquals(MergeState.NONE,mi.getState());
  assertNull(mi.getExtent());
  assertEquals(MergeInfo.Operation.MERGE,mi.getOperation());
  assertFalse(mi.isDelete());
}

</code></pre>

<br>
<pre class="type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSerialization() throws Exception {
  Text table=new Text("table");
  Text endRow=new Text("end");
  Text prevEndRow=new Text("begin");
  keyExtent=new KeyExtent(table,endRow,prevEndRow);
  mi=new MergeInfo(keyExtent,MergeInfo.Operation.DELETE);
  mi.setState(MergeState.STARTED);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  mi.write(dos);
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream dis=new DataInputStream(bais);
  mi=new MergeInfo();
  mi.readFields(dis);
  assertSame(MergeState.STARTED,mi.getState());
  assertEquals(keyExtent,mi.getExtent());
  assertSame(MergeInfo.Operation.DELETE,mi.getOperation());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstruction_2Args(){
  mi=new MergeInfo(keyExtent,MergeInfo.Operation.DELETE);
  assertEquals(MergeState.NONE,mi.getState());
  assertSame(keyExtent,mi.getExtent());
  assertEquals(MergeInfo.Operation.DELETE,mi.getOperation());
  assertTrue(mi.isDelete());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.master.state.TabletLocationStateTest </h4><pre class="type-2 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=TabletLocationState.BadLocationStateException.class) public void testConstruction_FutureAndCurrent() throws Exception {
  expect(keyExtent.getMetadataEntry()).andReturn(new Text("entry"));
  replay(keyExtent);
  try {
    new TabletLocationState(keyExtent,future,current,last,walogs,true);
  }
 catch (  TabletLocationState.BadLocationStateException e) {
    assertEquals(new Text("entry"),e.getEncodedEndRow());
    throw (e);
  }
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetState_Unassigned1() throws Exception {
  tls=new TabletLocationState(keyExtent,null,null,null,walogs,true);
  assertEquals(TabletState.UNASSIGNED,tls.getState(null));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetState_Unassigned2() throws Exception {
  tls=new TabletLocationState(keyExtent,null,null,last,walogs,true);
  assertEquals(TabletState.UNASSIGNED,tls.getState(null));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetState_Dead1() throws Exception {
  Set<TServerInstance> liveServers=new java.util.HashSet<TServerInstance>();
  liveServers.add(current);
  tls=new TabletLocationState(keyExtent,future,null,last,walogs,true);
  assertEquals(TabletState.ASSIGNED_TO_DEAD_SERVER,tls.getState(liveServers));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetState_Assigned() throws Exception {
  Set<TServerInstance> liveServers=new java.util.HashSet<TServerInstance>();
  liveServers.add(future);
  tls=new TabletLocationState(keyExtent,future,null,last,walogs,true);
  assertEquals(TabletState.ASSIGNED,tls.getState(liveServers));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetState_Hosted() throws Exception {
  Set<TServerInstance> liveServers=new java.util.HashSet<TServerInstance>();
  liveServers.add(current);
  tls=new TabletLocationState(keyExtent,null,current,last,walogs,true);
  assertEquals(TabletState.HOSTED,tls.getState(liveServers));
}

</code></pre>

<br>
<pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstruction_NoFuture_NoWalogs() throws Exception {
  tls=new TabletLocationState(keyExtent,null,current,last,null,true);
  assertNotNull(tls.walogs);
  assertEquals(0,tls.walogs.size());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetState_Dead2() throws Exception {
  Set<TServerInstance> liveServers=new java.util.HashSet<TServerInstance>();
  liveServers.add(future);
  tls=new TabletLocationState(keyExtent,null,current,last,walogs,true);
  assertEquals(TabletState.ASSIGNED_TO_DEAD_SERVER,tls.getState(liveServers));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.problems.ProblemReportTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHashCode(){
  r=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE,SERVER,null);
  ProblemReport r2=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE,SERVER,null);
  assertEquals(r.hashCode(),r2.hashCode());
  ProblemReport re1=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE,SERVER + "x",null);
  assertEquals(r.hashCode(),re1.hashCode());
  ProblemReport re2=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE,SERVER,new IllegalArgumentException("yikes"));
  assertEquals(r.hashCode(),re2.hashCode());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWithException(){
  Exception e=new IllegalArgumentException("Oh noes");
  r=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE,SERVER,e);
  assertEquals("Oh noes",r.getException());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecodeZooKeeperEntry() throws Exception {
  byte[] zpathFileName=makeZPathFileName(TABLE,ProblemType.FILE_READ,RESOURCE);
  String node=Encoding.encodeAsBase64FileName(new Text(zpathFileName));
  long now=System.currentTimeMillis();
  byte[] encoded=encodeReportData(now,SERVER,"excmsg");
  expect(zoorw.getData(ZooUtil.getRoot("instance") + Constants.ZPROBLEMS + "/"+ node,null)).andReturn(encoded);
  replay(zoorw);
  r=ProblemReport.decodeZooKeeperEntry(node,zoorw,instance);
  assertEquals(TABLE,r.getTableName());
  assertSame(ProblemType.FILE_READ,r.getProblemType());
  assertEquals(RESOURCE,r.getResource());
  assertEquals(SERVER,r.getServer());
  assertEquals(now,r.getTime());
  assertEquals("excmsg",r.getException());
}

</code></pre>

<br>
<pre class="type-3 type-15 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetters(){
  long now=System.currentTimeMillis();
  r=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE,SERVER,null,now);
  assertEquals(TABLE,r.getTableName());
  assertSame(ProblemType.FILE_READ,r.getProblemType());
  assertEquals(RESOURCE,r.getResource());
  assertEquals(SERVER,r.getServer());
  assertEquals(now,r.getTime());
  assertNull(r.getException());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.problems.ProblemReportingIteratorTest </h4><pre class="type-5 type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicGetters(){
  Key key=EasyMock.createMock(Key.class);
  expect(ii.getTopKey()).andReturn(key);
  Value value=EasyMock.createMock(Value.class);
  expect(ii.getTopValue()).andReturn(value);
  expect(ii.hasTop()).andReturn(true);
  replay(ii);
  assertSame(key,pri.getTopKey());
  assertSame(value,pri.getTopValue());
  assertTrue(pri.hasTop());
  assertFalse(pri.sawError());
  assertEquals(RESOURCE,pri.getResource());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.replication.ReplicationUtilTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserNameKeytab(){
  final String peerName="peer";
  final String systemImpl="my.replica.system.impl";
  final String config="accumulo_peer,remote_host:2181";
  final String peerDefinition=systemImpl + "," + config;
  confEntries.put(Property.REPLICATION_PEER_USER.getKey() + peerName,"user");
  confEntries.put(Property.REPLICATION_PEER_KEYTAB.getKey() + peerName,"/path/to/keytab");
  confEntries.put(Property.REPLICATION_PEERS.getKey() + peerName,peerDefinition);
  ReplicaSystem system=EasyMock.createMock(ReplicaSystem.class);
  EasyMock.expect(conf.getAllPropertiesWithPrefix(Property.REPLICATION_PEERS)).andReturn(confEntries);
  EasyMock.replay(context,conf,system);
  Map<String,String> peers=util.getPeers();
  EasyMock.verify(context,conf,system);
  assertEquals(1,peers.size());
  Entry<String,String> peer=peers.entrySet().iterator().next();
  assertEquals(peerName,peer.getKey());
  assertEquals(systemImpl,peer.getValue());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserNamePassword(){
  final String peerName="peer";
  final String systemImpl="my.replica.system.impl";
  final String config="accumulo_peer,remote_host:2181";
  final String peerDefinition=systemImpl + "," + config;
  confEntries.put(Property.REPLICATION_PEER_USER.getKey() + peerName,"user");
  confEntries.put(Property.REPLICATION_PEER_PASSWORD.getKey() + peerName,"password");
  confEntries.put(Property.REPLICATION_PEERS.getKey() + peerName,peerDefinition);
  ReplicaSystem system=EasyMock.createMock(ReplicaSystem.class);
  EasyMock.expect(conf.getAllPropertiesWithPrefix(Property.REPLICATION_PEERS)).andReturn(confEntries);
  EasyMock.replay(context,conf,system);
  Map<String,String> peers=util.getPeers();
  EasyMock.verify(context,conf,system);
  assertEquals(1,peers.size());
  Entry<String,String> peer=peers.entrySet().iterator().next();
  assertEquals(peerName,peer.getKey());
  assertEquals(systemImpl,peer.getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.replication.StatusCombinerTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void commutativeWithMultipleUpdatesSingleBuilder(){
  Status newFile=StatusUtil.fileCreated(100), update1=StatusUtil.ingestedUntil(builder,100), update2=StatusUtil.ingestedUntil(builder,200), repl1=StatusUtil.replicated(builder,50), repl2=StatusUtil.replicated(builder,150);
  Status order1=combiner.typedReduce(key,Arrays.asList(newFile,update1,repl1,update2,repl2).iterator());
  Status permutation=combiner.typedReduce(key,Arrays.asList(newFile,repl1,update1,repl2,update2).iterator());
  Assert.assertEquals(order1,permutation);
  permutation=combiner.typedReduce(key,Arrays.asList(newFile,repl1,repl2,update1,update2).iterator());
  Assert.assertEquals(order1,permutation);
  permutation=combiner.typedReduce(key,Arrays.asList(newFile,update1,update2,repl1,repl2).iterator());
  Assert.assertEquals(order1,permutation);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void newStatusWithNewIngestSingleBuilder(){
  Status orig=StatusUtil.fileCreated(100);
  Status status=StatusUtil.replicatedAndIngested(builder,10,20);
  Status ret=combiner.typedReduce(key,Arrays.asList(orig,status).iterator());
  Assert.assertEquals(10l,ret.getBegin());
  Assert.assertEquals(20l,ret.getEnd());
  Assert.assertEquals(100l,ret.getCreatedTime());
  Assert.assertEquals(false,ret.getClosed());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void commutativeWithCloseSingleBuilder(){
  Status newFile=StatusUtil.fileCreated(100), closed=StatusUtil.fileClosed(), secondSync=StatusUtil.ingestedUntil(builder,200);
  Status order1=combiner.typedReduce(key,Arrays.asList(newFile,closed,secondSync).iterator()), order2=combiner.typedReduce(key,Arrays.asList(newFile,secondSync,closed).iterator());
  Assert.assertEquals(order1,order2);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void commutativeNewFileSingleBuilder(){
  Status newFile=StatusUtil.fileCreated(100), firstSync=StatusUtil.ingestedUntil(builder,100), secondSync=StatusUtil.ingestedUntil(builder,200);
  Status order1=combiner.typedReduce(key,Arrays.asList(newFile,firstSync,secondSync).iterator()), order2=combiner.typedReduce(key,Arrays.asList(secondSync,firstSync,newFile).iterator());
  Assert.assertEquals(order1,order2);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void commutativeNewUpdatesSingleBuilder(){
  Status newFile=StatusUtil.fileCreated(100), firstSync=StatusUtil.ingestedUntil(builder,100), secondSync=StatusUtil.ingestedUntil(builder,200);
  Status order1=combiner.typedReduce(key,Arrays.asList(newFile,firstSync,secondSync).iterator()), order2=combiner.typedReduce(key,Arrays.asList(newFile,secondSync,firstSync).iterator());
  Assert.assertEquals(order1,order2);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void commutativeNewUpdates(){
  Status newFile=StatusUtil.fileCreated(100), firstSync=StatusUtil.ingestedUntil(100), secondSync=StatusUtil.ingestedUntil(200);
  Status order1=combiner.typedReduce(key,Arrays.asList(newFile,firstSync,secondSync).iterator()), order2=combiner.typedReduce(key,Arrays.asList(newFile,secondSync,firstSync).iterator());
  Assert.assertEquals(order1,order2);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void commutativeWithClose(){
  Status newFile=StatusUtil.fileCreated(100), closed=StatusUtil.fileClosed(), secondSync=StatusUtil.ingestedUntil(200);
  Status order1=combiner.typedReduce(key,Arrays.asList(newFile,closed,secondSync).iterator()), order2=combiner.typedReduce(key,Arrays.asList(newFile,secondSync,closed).iterator());
  Assert.assertEquals(order1,order2);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void commutativeNewFile(){
  Status newFile=StatusUtil.fileCreated(100), firstSync=StatusUtil.ingestedUntil(100), secondSync=StatusUtil.ingestedUntil(200);
  Status order1=combiner.typedReduce(key,Arrays.asList(newFile,firstSync,secondSync).iterator()), order2=combiner.typedReduce(key,Arrays.asList(secondSync,firstSync,newFile).iterator());
  Assert.assertEquals(order1,order2);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCombination(){
  List<Status> status=new ArrayList<>();
  long time=System.currentTimeMillis();
  status.add(StatusUtil.fileCreated(time));
  status.add(StatusUtil.openWithUnknownLength());
  status.add(StatusUtil.fileClosed());
  Status combined=combiner.typedReduce(new Key("row"),status.iterator());
  Assert.assertEquals(time,combined.getCreatedTime());
  Assert.assertTrue(combined.getInfiniteEnd());
  Assert.assertTrue(combined.getClosed());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fileClosedTimeChoosesEarliestIgnoringDefault(){
  Status stat1=Status.newBuilder().setBegin(10).setEnd(20).setClosed(true).setInfiniteEnd(false).setCreatedTime(50).build();
  Status stat2=Status.newBuilder().setBegin(10).setEnd(20).setClosed(true).setInfiniteEnd(false).setCreatedTime(100).build();
  Status combined=combiner.typedReduce(key,Arrays.asList(stat1,stat2).iterator());
  Assert.assertEquals(stat1,combined);
  Status stat3=Status.newBuilder().setBegin(10).setEnd(20).setClosed(true).setInfiniteEnd(false).setCreatedTime(100).build();
  Status combined2=combiner.typedReduce(key,Arrays.asList(combined,stat3).iterator());
  Assert.assertEquals(combined,combined2);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void returnsSameObject(){
  Status status=StatusUtil.ingestedUntil(10);
  Status ret=combiner.typedReduce(key,Collections.singleton(status).iterator());
  Assert.assertEquals(status,ret);
  Assert.assertTrue(status == ret);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void commutativeWithMultipleUpdates(){
  Status newFile=StatusUtil.fileCreated(100), update1=StatusUtil.ingestedUntil(100), update2=StatusUtil.ingestedUntil(200), repl1=StatusUtil.replicated(50), repl2=StatusUtil.replicated(150);
  Status order1=combiner.typedReduce(key,Arrays.asList(newFile,update1,repl1,update2,repl2).iterator());
  Status permutation=combiner.typedReduce(key,Arrays.asList(newFile,repl1,update1,repl2,update2).iterator());
  Assert.assertEquals(order1,permutation);
  permutation=combiner.typedReduce(key,Arrays.asList(newFile,repl1,repl2,update1,update2).iterator());
  Assert.assertEquals(order1,permutation);
  permutation=combiner.typedReduce(key,Arrays.asList(newFile,update1,update2,repl1,repl2,update1,update2).iterator());
  Assert.assertEquals(order1,permutation);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void duplicateStatuses(){
  Status newFile=StatusUtil.fileCreated(100), update1=StatusUtil.ingestedUntil(builder,100), update2=StatusUtil.ingestedUntil(builder,200), repl1=StatusUtil.replicated(builder,50), repl2=StatusUtil.replicated(builder,150);
  Status order1=combiner.typedReduce(key,Arrays.asList(newFile,update1,repl1,update2,repl2).iterator());
  Status permutation=combiner.typedReduce(key,Arrays.asList(newFile,repl1,update1,update1,repl2,update2,update2).iterator());
  Assert.assertEquals(order1,permutation);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void fileClosedTimePropagated(){
  Status stat1=Status.newBuilder().setBegin(10).setEnd(20).setClosed(true).setInfiniteEnd(false).setCreatedTime(50).build();
  Status stat2=Status.newBuilder().setBegin(10).setEnd(20).setClosed(true).setInfiniteEnd(false).build();
  Status combined=combiner.typedReduce(key,Arrays.asList(stat1,stat2).iterator());
  Assert.assertEquals(stat1,combined);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void newStatusWithNewIngest(){
  Status orig=StatusUtil.fileCreated(100);
  Status status=StatusUtil.replicatedAndIngested(10,20);
  Status ret=combiner.typedReduce(key,Arrays.asList(orig,status).iterator());
  Assert.assertEquals(10l,ret.getBegin());
  Assert.assertEquals(20l,ret.getEnd());
  Assert.assertEquals(100l,ret.getCreatedTime());
  Assert.assertEquals(false,ret.getClosed());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.rpc.RpcWrapperTest </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoOnewayMethods(){
  Map<String,ProcessFunction<FakeService,?>> procs=new HashMap<String,ProcessFunction<FakeService,?>>();
  procs.put("foo",createProcessFunction("foo",false));
  procs.put("foobar",createProcessFunction("foobar",false));
  procs.put("bar",createProcessFunction("bar",false));
  procs.put("barfoo",createProcessFunction("barfoo",false));
  Set<String> onewayMethods=RpcWrapper.getOnewayMethods(procs);
  Assert.assertEquals(Collections.<String>emptySet(),onewayMethods);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAllOnewayMethods(){
  Map<String,ProcessFunction<FakeService,?>> procs=new HashMap<String,ProcessFunction<FakeService,?>>();
  procs.put("foo",createProcessFunction("foo",true));
  procs.put("foobar",createProcessFunction("foobar",true));
  procs.put("bar",createProcessFunction("bar",true));
  procs.put("barfoo",createProcessFunction("barfoo",true));
  Set<String> onewayMethods=RpcWrapper.getOnewayMethods(procs);
  Assert.assertEquals(Sets.newHashSet("foo","foobar","bar","barfoo"),onewayMethods);
}

</code></pre>

<br>
<pre class="type-8 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExceptionWrappingForNonOneway() throws Throwable {
  final Object[] args=new Object[0];
  final FakeService impl=new FakeServiceImpl();
  RpcServerInvocationHandler<FakeService> handler=RpcWrapper.getInvocationHandler(impl,Sets.newHashSet("foobar","barfoo"));
  try {
    handler.invoke(impl,FakeServiceImpl.class.getMethod("foo"),args);
    Assert.fail("Expected an exception");
  }
 catch (  TException e) {
    Assert.assertEquals(RTE_MESSAGE,e.getMessage());
  }
  handler.invoke(impl,FakeServiceImpl.class.getMethod("foobar"),args);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSomeOnewayMethods(){
  Map<String,ProcessFunction<FakeService,?>> procs=new HashMap<String,ProcessFunction<FakeService,?>>();
  procs.put("foo",createProcessFunction("foo",true));
  procs.put("foobar",createProcessFunction("foobar",false));
  procs.put("bar",createProcessFunction("bar",true));
  procs.put("barfoo",createProcessFunction("barfoo",false));
  Set<String> onewayMethods=RpcWrapper.getOnewayMethods(procs);
  Assert.assertEquals(Sets.newHashSet("foo","bar"),onewayMethods);
}

</code></pre>

<br>
<pre class="type-8 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoExceptionWrappingForOneway() throws Throwable {
  final Object[] args=new Object[0];
  final FakeService impl=new FakeServiceImpl();
  RpcServerInvocationHandler<FakeService> handler=RpcWrapper.getInvocationHandler(impl,Sets.newHashSet("foo","bar"));
  try {
    handler.invoke(impl,FakeServiceImpl.class.getMethod("foo"),args);
    Assert.fail("Expected an exception");
  }
 catch (  RuntimeException e) {
    Assert.assertEquals(RTE_MESSAGE,e.getMessage());
  }
  handler.invoke(impl,FakeServiceImpl.class.getMethod("foobar"),args);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.rpc.SaslDigestCallbackHandlerTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIdentifierSerialization() throws IOException {
  AuthenticationTokenIdentifier identifier=new AuthenticationTokenIdentifier("user",1,100l,1000l,"instanceid");
  byte[] serialized=identifier.getBytes();
  String name=handler.encodeIdentifier(serialized);
  byte[] reserialized=handler.decodeIdentifier(name);
  assertArrayEquals(serialized,reserialized);
  AuthenticationTokenIdentifier copy=new AuthenticationTokenIdentifier();
  copy.readFields(new DataInputStream(new ByteArrayInputStream(reserialized)));
  assertEquals(identifier,copy);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTokenAndIdentifierSerialization() throws Exception {
  Instance instance=createMock(Instance.class);
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,1000l);
  expect(instance.getInstanceID()).andReturn("instanceid");
  replay(instance);
  secretManager.addKey(new AuthenticationKey(1,0l,1000 * 100l,keyGen.generateKey()));
  Entry<Token<AuthenticationTokenIdentifier>,AuthenticationTokenIdentifier> entry=secretManager.generateToken("user",cfg);
  byte[] password=entry.getKey().getPassword();
  char[] encodedPassword=handler.encodePassword(password);
  String name=handler.encodeIdentifier(entry.getValue().getBytes());
  byte[] decodedIdentifier=handler.decodeIdentifier(name);
  AuthenticationTokenIdentifier identifier=new AuthenticationTokenIdentifier();
  identifier.readFields(new DataInputStream(new ByteArrayInputStream(decodedIdentifier)));
  char[] computedPassword=handler.getPassword(secretManager,identifier);
  verify(instance);
  assertArrayEquals(computedPassword,encodedPassword);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTokenSerialization() throws Exception {
  Instance instance=createMock(Instance.class);
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,1000l);
  expect(instance.getInstanceID()).andReturn("instanceid");
  replay(instance);
  secretManager.addKey(new AuthenticationKey(1,0l,100l,keyGen.generateKey()));
  Entry<Token<AuthenticationTokenIdentifier>,AuthenticationTokenIdentifier> entry=secretManager.generateToken("user",cfg);
  byte[] password=entry.getKey().getPassword();
  char[] encodedPassword=handler.encodePassword(password);
  char[] computedPassword=handler.getPassword(secretManager,entry.getValue());
  verify(instance);
  assertArrayEquals(computedPassword,encodedPassword);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.rpc.SaslServerConnectionParamsTest </h4><pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultParamsAsServer() throws Exception {
  testUser.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      final String primary="accumulo";
      clientConf.withSasl(true,primary);
      final AccumuloConfiguration rpcConf=ClientContext.convertClientConfig(clientConf);
      assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
      PasswordToken pw=new PasswordToken("fake");
      ByteArrayOutputStream baos=new ByteArrayOutputStream();
      pw.write(new DataOutputStream(baos));
      SystemToken token=new SystemToken();
      token.readFields(new DataInputStream(new ByteArrayInputStream(baos.toByteArray())));
      final SaslConnectionParams saslParams=new SaslServerConnectionParams(rpcConf,token);
      assertEquals(primary,saslParams.getKerberosServerPrimary());
      assertEquals(SaslMechanism.GSSAPI,saslParams.getMechanism());
      assertNull(saslParams.getCallbackHandler());
      final QualityOfProtection defaultQop=QualityOfProtection.get(Property.RPC_SASL_QOP.getDefaultValue());
      assertEquals(defaultQop,saslParams.getQualityOfProtection());
      Map<String,String> properties=saslParams.getSaslProperties();
      assertEquals(1,properties.size());
      assertEquals(defaultQop.getQuality(),properties.get(Sasl.QOP));
      assertEquals(username,saslParams.getPrincipal());
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.rpc.TCredentialsUpdatingInvocationHandlerTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCachedTokenClass() throws Exception {
  final String principal="root";
  ConcurrentHashMap<String,Class<? extends AuthenticationToken>> cache=proxy.getTokenCache();
  cache.clear();
  TCredentials tcreds=new TCredentials(principal,KerberosToken.CLASS_NAME,ByteBuffer.allocate(0),UUID.randomUUID().toString());
  UGIAssumingProcessor.rpcPrincipal.set(principal);
  proxy.updateArgs(new Object[]{new Object(),tcreds});
  Assert.assertEquals(1,cache.size());
  Assert.assertEquals(KerberosToken.class,cache.get(KerberosToken.CLASS_NAME));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.rpc.ThriftServerTypeTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultServer(){
  assertEquals(ThriftServerType.CUSTOM_HS_HA,ThriftServerType.get(Property.GENERAL_RPC_SERVER_TYPE.getDefaultValue()));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSpecialServer(){
  assertEquals(ThriftServerType.THREADPOOL,ThriftServerType.get("threadpool"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.SystemCredentialsTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * This is a test to ensure the string literal in {@link ConnectorImpl#ConnectorImpl(org.apache.accumulo.core.client.impl.ClientContext)} is kept up-to-date
 * if we move the {@link SystemToken}<br>
 * This check will not be needed after ACCUMULO-1578
 */
@Test public void testSystemToken(){
  assertEquals("org.apache.accumulo.server.security.SystemCredentials$SystemToken",SystemToken.class.getName());
  assertEquals(SystemCredentials.get(inst).getToken().getClass(),SystemToken.class);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.UserImpersonationTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoHostByDefault(){
  String server="server";
  setValidUsers(server,"*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertTrue(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleUserAndHost(){
  String server="server", host="single_host.domain.com", client="single_client";
  setValidHosts(server,host);
  setValidUsers(server,client);
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getUsers().contains(client));
  assertTrue(uwh.getHosts().contains(host));
  assertFalse(uwh.getUsers().contains("some_other_user"));
  assertFalse(uwh.getHosts().contains("other_host.domain.com"));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnyUserAndHosts(){
  String server="server";
  setValidHosts(server,"*");
  setValidUsers(server,"*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertTrue(uwh.acceptsAllHosts());
  assertTrue(uwh.acceptsAllUsers());
  assertEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleExplicitHosts(){
  String server="server", host1="host1", host2="host2", host3="host3";
  setValidHosts(server,Joiner.on(',').join(host1,host2,host3));
  setValidUsers(server,"*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertTrue(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getHosts().contains(host1));
  assertTrue(uwh.getHosts().contains(host2));
  assertTrue(uwh.getHosts().contains(host3));
  assertFalse(uwh.getHosts().contains("other_host"));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleExplicitUsers(){
  String server="server", client1="client1", client2="client2", client3="client3";
  setValidHosts(server,"*");
  setValidUsers(server,Joiner.on(',').join(client1,client2,client3));
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertTrue(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getUsers().contains(client1));
  assertTrue(uwh.getUsers().contains(client2));
  assertTrue(uwh.getUsers().contains(client3));
  assertFalse(uwh.getUsers().contains("other_client"));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoUsersByDefault(){
  String server="server";
  setValidHosts(server,"*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertTrue(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleAllowedImpersonators(){
  String server1="server1", server2="server2", host1="host1", host2="host2", host3="host3", client1="client1", client2="client2", client3="client3";
  setValidHosts(server1,Joiner.on(',').join(host1,host2));
  setValidUsers(server1,Joiner.on(',').join(client1,client2));
  setValidHosts(server2,host3);
  setValidUsers(server2,client3);
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server1);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getUsers().contains(client1));
  assertTrue(uwh.getUsers().contains(client2));
  assertFalse(uwh.getUsers().contains(client3));
  assertFalse(uwh.getUsers().contains("other_client"));
  assertTrue(uwh.getHosts().contains(host1));
  assertTrue(uwh.getHosts().contains(host2));
  assertFalse(uwh.getHosts().contains(host3));
  assertFalse(uwh.getHosts().contains("other_host"));
  uwh=impersonation.get(server2);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertFalse(uwh.getUsers().contains(client1));
  assertFalse(uwh.getUsers().contains(client2));
  assertTrue(uwh.getUsers().contains(client3));
  assertFalse(uwh.getUsers().contains("other_client"));
  assertFalse(uwh.getHosts().contains(host1));
  assertFalse(uwh.getHosts().contains(host2));
  assertTrue(uwh.getHosts().contains(host3));
  assertFalse(uwh.getHosts().contains("other_host"));
  assertNull(impersonation.get(client3));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleExplicitUsersHosts(){
  String server="server", host1="host1", host2="host2", host3="host3", client1="client1", client2="client2", client3="client3";
  setValidHosts(server,Joiner.on(',').join(host1,host2,host3));
  setValidUsers(server,Joiner.on(',').join(client1,client2,client3));
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getUsers().contains(client1));
  assertTrue(uwh.getUsers().contains(client2));
  assertTrue(uwh.getUsers().contains(client3));
  assertFalse(uwh.getUsers().contains("other_client"));
  assertTrue(uwh.getHosts().contains(host1));
  assertTrue(uwh.getHosts().contains(host2));
  assertTrue(uwh.getHosts().contains(host3));
  assertFalse(uwh.getHosts().contains("other_host"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.delegation.AuthenticationKeyTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAuthKey(){
  SecretKey secretKey=keyGen.generateKey();
  int keyId=20;
  long creationDate=38383838l, expirationDate=83838383l;
  AuthenticationKey authKey=new AuthenticationKey(keyId,creationDate,expirationDate,secretKey);
  assertEquals(secretKey,authKey.getKey());
  assertEquals(keyId,authKey.getKeyId());
  assertEquals(expirationDate,authKey.getExpirationDate());
  AuthenticationKey badCopy=new AuthenticationKey();
  assertNotEquals(badCopy,authKey);
  assertNotEquals(badCopy.hashCode(),authKey.hashCode());
  AuthenticationKey goodCopy=new AuthenticationKey(keyId,creationDate,expirationDate,secretKey);
  assertEquals(authKey,goodCopy);
  assertEquals(authKey.hashCode(),goodCopy.hashCode());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWritable() throws IOException {
  SecretKey secretKey=keyGen.generateKey();
  int keyId=20;
  long creationDate=38383838l, expirationDate=83838383l;
  AuthenticationKey authKey=new AuthenticationKey(keyId,creationDate,expirationDate,secretKey);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(baos);
  authKey.write(out);
  byte[] serialized=baos.toByteArray();
  DataInputStream in=new DataInputStream(new ByteArrayInputStream(serialized));
  AuthenticationKey copy=new AuthenticationKey();
  copy.readFields(in);
  assertEquals(authKey,copy);
  assertEquals(authKey.hashCode(),copy.hashCode());
  assertEquals(secretKey,copy.getKey());
  assertEquals(keyId,copy.getKeyId());
  assertEquals(expirationDate,copy.getExpirationDate());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.delegation.AuthenticationTokenKeyManagerTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIntervalHasPassed() throws Exception {
  long updateInterval=0 * 1000l;
  long tokenLifetime=100 * 1000l;
  long runTime=10l;
  SecretKey secretKey=keyGen.generateKey();
  AuthenticationKey authKey=new AuthenticationKey(1,runTime,runTime + tokenLifetime,secretKey);
  AuthenticationTokenKeyManager keyManager=new AuthenticationTokenKeyManager(secretManager,zooDistributor,updateInterval,tokenLifetime);
  assertEquals(0l,keyManager.getLastKeyUpdate());
  expect(secretManager.removeExpiredKeys(zooDistributor)).andReturn(0);
  expect(secretManager.generateSecret()).andReturn(secretKey);
  secretManager.addKey(authKey);
  expectLastCall().once();
  zooDistributor.advertise(authKey);
  expectLastCall().once();
  replay(secretManager,zooDistributor);
  keyManager._run(runTime);
  verify(secretManager,zooDistributor);
  assertEquals(runTime,keyManager.getLastKeyUpdate());
  assertEquals(authKey.getKeyId(),keyManager.getIdSeq());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIntervalNotPassed(){
  long updateInterval=5 * 1000l;
  long tokenLifetime=100 * 1000l;
  AuthenticationTokenKeyManager keyManager=new AuthenticationTokenKeyManager(secretManager,zooDistributor,updateInterval,tokenLifetime);
  assertEquals(0l,keyManager.getLastKeyUpdate());
  expect(secretManager.removeExpiredKeys(zooDistributor)).andReturn(0);
  replay(secretManager,zooDistributor);
  keyManager._run(0);
  verify(secretManager,zooDistributor);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExistingKeysAreAddedAtStartup() throws Exception {
  long updateInterval=0 * 1000l;
  long tokenLifetime=100 * 1000l;
  SecretKey secretKey1=keyGen.generateKey(), secretKey2=keyGen.generateKey();
  AuthenticationKey authKey1=new AuthenticationKey(1,0,tokenLifetime,secretKey1), authKey2=new AuthenticationKey(2,tokenLifetime,tokenLifetime * 2,secretKey2);
  AuthenticationTokenKeyManager keyManager=new AuthenticationTokenKeyManager(secretManager,zooDistributor,updateInterval,tokenLifetime);
  assertEquals(0l,keyManager.getLastKeyUpdate());
  expect(zooDistributor.getCurrentKeys()).andReturn(Arrays.asList(authKey1,authKey2));
  secretManager.addKey(authKey1);
  expectLastCall().once();
  secretManager.addKey(authKey2);
  expectLastCall().once();
  expect(secretManager.getCurrentKey()).andReturn(authKey2).once();
  replay(secretManager,zooDistributor);
  keyManager.updateStateFromCurrentKeys();
  verify(secretManager,zooDistributor);
  assertEquals(authKey2.getKeyId(),keyManager.getIdSeq());
  assertEquals(authKey2.getCreationDate(),keyManager.getLastKeyUpdate());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.delegation.AuthenticationTokenSecretManagerTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=20 * 1000) public void testMasterKeyExpiration() throws Exception {
  ZooAuthenticationKeyDistributor keyDistributor=createMock(ZooAuthenticationKeyDistributor.class);
  long then=System.currentTimeMillis();
  long tokenLifetime=10 * 1000l;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  AuthenticationKey authKey1=new AuthenticationKey(1,then,then + tokenLifetime,keyGen.generateKey()), authKey2=new AuthenticationKey(2,then + tokenLifetime,then + tokenLifetime * 2,keyGen.generateKey());
  secretManager.addKey(authKey1);
  keyDistributor.remove(authKey1);
  expectLastCall().once();
  replay(keyDistributor);
  assertEquals(0,secretManager.removeExpiredKeys(keyDistributor));
  assertEquals(1,secretManager.getKeys().size());
  secretManager.addKey(authKey2);
  assertEquals(0,secretManager.removeExpiredKeys(keyDistributor));
  assertEquals(2,secretManager.getKeys().size());
  assertEquals(authKey2,secretManager.getCurrentKey());
  long now=System.currentTimeMillis();
  while (now - (then + tokenLifetime) < 0) {
    Thread.sleep(500);
    now=System.currentTimeMillis();
  }
  assertEquals(1,secretManager.removeExpiredKeys(keyDistributor));
  assertEquals(1,secretManager.getKeys().size());
  assertEquals(authKey2,Iterables.getOnlyElement(secretManager.getKeys().values()));
  assertEquals(authKey2,secretManager.getCurrentKey());
  verify(keyDistributor);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveKey(){
  long tokenLifetime=60 * 1000;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  AuthenticationKey authKey=new AuthenticationKey(1,0,tokenLifetime,keyGen.generateKey());
  secretManager.addKey(authKey);
  Map<Integer,AuthenticationKey> keys=secretManager.getKeys();
  assertNotNull(keys);
  assertEquals(1,keys.size());
  assertEquals(authKey,Iterables.getOnlyElement(keys.values()));
  assertTrue(secretManager.removeKey(authKey.getKeyId()));
  assertEquals(0,secretManager.getKeys().size());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVerifyPassword() throws Exception {
  long then=System.currentTimeMillis();
  long tokenLifetime=60 * 1000;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  secretManager.addKey(new AuthenticationKey(1,then,then + tokenLifetime,keyGen.generateKey()));
  String principal="user@EXAMPLE.COM";
  Entry<Token<AuthenticationTokenIdentifier>,AuthenticationTokenIdentifier> pair=secretManager.generateToken(principal,cfg);
  Token<AuthenticationTokenIdentifier> token=pair.getKey();
  AuthenticationTokenIdentifier id=new AuthenticationTokenIdentifier();
  id.readFields(new DataInputStream(new ByteArrayInputStream(token.getIdentifier())));
  byte[] password=secretManager.retrievePassword(id);
  assertArrayEquals(password,secretManager.retrievePassword(id));
  Entry<Token<AuthenticationTokenIdentifier>,AuthenticationTokenIdentifier> pair2=secretManager.generateToken(principal,cfg);
  Token<AuthenticationTokenIdentifier> token2=pair2.getKey();
  AuthenticationTokenIdentifier id2=new AuthenticationTokenIdentifier();
  id2.readFields(new DataInputStream(new ByteArrayInputStream(token2.getIdentifier())));
  byte[] password2=secretManager.retrievePassword(id2);
  assertFalse("Different tokens for the same user shouldn't have the same password",Arrays.equals(password,password2));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGenerateToken() throws Exception {
  long then=System.currentTimeMillis();
  long tokenLifetime=60 * 1000;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  secretManager.addKey(new AuthenticationKey(1,then,then + tokenLifetime,keyGen.generateKey()));
  String principal="user@EXAMPLE.COM";
  Entry<Token<AuthenticationTokenIdentifier>,AuthenticationTokenIdentifier> pair=secretManager.generateToken(principal,cfg);
  assertNotNull(pair);
  Token<AuthenticationTokenIdentifier> token=pair.getKey();
  assertNotNull(token);
  assertEquals(AuthenticationTokenIdentifier.TOKEN_KIND,token.getKind());
  AuthenticationTokenIdentifier id=new AuthenticationTokenIdentifier();
  id.readFields(new DataInputStream(new ByteArrayInputStream(token.getIdentifier())));
  long now=System.currentTimeMillis();
  assertTrue("Issue date did not fall within the expected upper bound. Expected less than " + now + ", but was "+ id.getIssueDate(),id.getIssueDate() <= now);
  assertTrue("Issue date did not fall within the expected lower bound. Expected greater than " + then + ", but was "+ id.getIssueDate(),id.getIssueDate() >= then);
  assertEquals(id.getIssueDate() + tokenLifetime,id.getExpirationDate());
  assertEquals(instanceId,id.getInstanceId());
  assertEquals(pair.getValue(),id);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddKey(){
  long tokenLifetime=60 * 1000;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  AuthenticationKey authKey=new AuthenticationKey(1,0,tokenLifetime,keyGen.generateKey());
  secretManager.addKey(authKey);
  Map<Integer,AuthenticationKey> keys=secretManager.getKeys();
  assertNotNull(keys);
  assertEquals(1,keys.size());
  assertEquals(authKey,Iterables.getOnlyElement(keys.values()));
  secretManager.addKey(authKey);
  keys=secretManager.getKeys();
  assertNotNull(keys);
  assertEquals(1,keys.size());
  assertEquals(authKey,Iterables.getOnlyElement(keys.values()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.delegation.ZooAuthenticationKeyDistributorTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetCurrentKeys() throws Exception {
  ZooAuthenticationKeyDistributor distributor=new ZooAuthenticationKeyDistributor(zrw,baseNode);
  List<AuthenticationKey> keys=new ArrayList<>(5);
  List<byte[]> serializedKeys=new ArrayList<>(5);
  List<String> children=new ArrayList<>(5);
  for (int i=1; i < 6; i++) {
    children.add(Integer.toString(i));
    AuthenticationKey key=new AuthenticationKey(i,0l,10l,keyGen.generateKey());
    keys.add(key);
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    key.write(new DataOutputStream(baos));
    serializedKeys.add(baos.toByteArray());
  }
  expect(zrw.exists(baseNode)).andReturn(true);
  expect(zrw.getACL(eq(baseNode),anyObject(Stat.class))).andReturn(Collections.singletonList(new ACL(ZooUtil.PRIVATE.get(0).getPerms(),new Id("digest","accumulo:DEFAULT"))));
  expect(zrw.getChildren(baseNode)).andReturn(children);
  for (int i=1; i < 6; i++) {
    expect(zrw.getData(baseNode + "/" + i,null)).andReturn(serializedKeys.get(i - 1));
  }
  replay(zrw);
  distributor.initialize();
  assertEquals(keys,distributor.getCurrentKeys());
  verify(zrw);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.delegation.ZooAuthenticationKeyWatcherTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBaseNodeChildrenChanged() throws Exception {
  WatchedEvent event=new WatchedEvent(EventType.NodeChildrenChanged,null,baseNode);
  AuthenticationKey key1=new AuthenticationKey(1,0l,10000l,keyGen.generateKey()), key2=new AuthenticationKey(2,key1.getExpirationDate(),20000l,keyGen.generateKey());
  byte[] serializedKey1=serialize(key1), serializedKey2=serialize(key2);
  List<String> children=Arrays.asList("1","2");
  expect(zk.getChildren(baseNode,keyWatcher)).andReturn(children);
  expect(zk.getData(baseNode + "/1",keyWatcher,null)).andReturn(serializedKey1);
  expect(zk.getData(baseNode + "/2",keyWatcher,null)).andReturn(serializedKey2);
  replay(instance,zk);
  keyWatcher.process(event);
  verify(instance,zk);
  assertEquals(2,secretManager.getKeys().size());
  assertEquals(key1,secretManager.getKeys().get(key1.getKeyId()));
  assertEquals(key2,secretManager.getKeys().get(key2.getKeyId()));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBaseNodeDataChanged() throws Exception {
  WatchedEvent event=new WatchedEvent(EventType.NodeDataChanged,null,baseNode);
  replay(instance,zk);
  keyWatcher.process(event);
  verify(instance,zk);
  assertEquals(0,secretManager.getKeys().size());
  assertFalse(secretManager.isCurrentKeySet());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChildChildrenChanged() throws Exception {
  WatchedEvent event=new WatchedEvent(EventType.NodeChildrenChanged,null,baseNode + "/2");
  AuthenticationKey key1=new AuthenticationKey(1,0l,10000l,keyGen.generateKey()), key2=new AuthenticationKey(2,key1.getExpirationDate(),20000l,keyGen.generateKey());
  secretManager.addKey(key1);
  secretManager.addKey(key2);
  assertEquals(2,secretManager.getKeys().size());
  replay(instance,zk);
  keyWatcher.process(event);
  verify(instance,zk);
  assertEquals(2,secretManager.getKeys().size());
  assertEquals(key1,secretManager.getKeys().get(key1.getKeyId()));
  assertEquals(key2,secretManager.getKeys().get(key2.getKeyId()));
  assertEquals(key2,secretManager.getCurrentKey());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void missingKeyAfterGetChildren() throws Exception {
  List<String> children=Arrays.asList("1");
  AuthenticationKey key1=new AuthenticationKey(1,0l,10000l,keyGen.generateKey());
  expect(zk.exists(baseNode,keyWatcher)).andReturn(true);
  expect(zk.getChildren(baseNode,keyWatcher)).andReturn(children);
  expect(zk.getData(baseNode + "/" + key1.getKeyId(),keyWatcher,null)).andThrow(new NoNodeException());
  replay(zk,instance);
  keyWatcher.updateAuthKeys();
  verify(zk,instance);
  assertEquals("Secret manager should be empty after a disconnect",0,secretManager.getKeys().size());
  assertNull("Current key should be null",secretManager.getCurrentKey());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBaseNodeCreatedWithChildren() throws Exception {
  WatchedEvent event=new WatchedEvent(EventType.NodeCreated,null,baseNode);
  AuthenticationKey key1=new AuthenticationKey(1,0l,10000l,keyGen.generateKey()), key2=new AuthenticationKey(2,key1.getExpirationDate(),20000l,keyGen.generateKey());
  byte[] serializedKey1=serialize(key1), serializedKey2=serialize(key2);
  List<String> children=Arrays.asList("1","2");
  expect(zk.getChildren(baseNode,keyWatcher)).andReturn(children);
  expect(zk.getData(baseNode + "/1",keyWatcher,null)).andReturn(serializedKey1);
  expect(zk.getData(baseNode + "/2",keyWatcher,null)).andReturn(serializedKey2);
  replay(instance,zk);
  keyWatcher.process(event);
  verify(instance,zk);
  assertEquals(2,secretManager.getKeys().size());
  assertEquals(key1,secretManager.getKeys().get(key1.getKeyId()));
  assertEquals(key2,secretManager.getKeys().get(key2.getKeyId()));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChildDeleted() throws Exception {
  WatchedEvent event=new WatchedEvent(EventType.NodeDeleted,null,baseNode + "/1");
  AuthenticationKey key1=new AuthenticationKey(1,0l,10000l,keyGen.generateKey()), key2=new AuthenticationKey(2,key1.getExpirationDate(),20000l,keyGen.generateKey());
  secretManager.addKey(key1);
  secretManager.addKey(key2);
  assertEquals(2,secretManager.getKeys().size());
  replay(instance,zk);
  keyWatcher.process(event);
  verify(instance,zk);
  assertEquals(1,secretManager.getKeys().size());
  assertEquals(key2,secretManager.getKeys().get(key2.getKeyId()));
  assertEquals(key2,secretManager.getCurrentKey());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInitialUpdateWithKeys() throws Exception {
  List<String> children=Arrays.asList("1","5");
  AuthenticationKey key1=new AuthenticationKey(1,0l,10000l,keyGen.generateKey()), key2=new AuthenticationKey(5,key1.getExpirationDate(),20000l,keyGen.generateKey());
  expect(zk.exists(baseNode,keyWatcher)).andReturn(true);
  expect(zk.getChildren(baseNode,keyWatcher)).andReturn(children);
  expect(zk.getData(baseNode + "/" + key1.getKeyId(),keyWatcher,null)).andReturn(serialize(key1));
  expect(zk.getData(baseNode + "/" + key2.getKeyId(),keyWatcher,null)).andReturn(serialize(key2));
  replay(zk,instance);
  keyWatcher.updateAuthKeys();
  verify(zk,instance);
  assertEquals(2,secretManager.getKeys().size());
  assertEquals(key1,secretManager.getKeys().get(key1.getKeyId()));
  assertEquals(key2,secretManager.getKeys().get(key2.getKeyId()));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChildChanged() throws Exception {
  WatchedEvent event=new WatchedEvent(EventType.NodeCreated,null,baseNode + "/2");
  AuthenticationKey key1=new AuthenticationKey(1,0l,10000l,keyGen.generateKey()), key2=new AuthenticationKey(2,key1.getExpirationDate(),20000l,keyGen.generateKey());
  secretManager.addKey(key1);
  assertEquals(1,secretManager.getKeys().size());
  byte[] serializedKey2=serialize(key2);
  expect(zk.getData(event.getPath(),keyWatcher,null)).andReturn(serializedKey2);
  replay(instance,zk);
  keyWatcher.process(event);
  verify(instance,zk);
  assertEquals(2,secretManager.getKeys().size());
  assertEquals(key1,secretManager.getKeys().get(key1.getKeyId()));
  assertEquals(key2,secretManager.getKeys().get(key2.getKeyId()));
  assertEquals(key2,secretManager.getCurrentKey());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitialUpdateNoNode() throws Exception {
  expect(zk.exists(baseNode,keyWatcher)).andReturn(false);
  replay(zk,instance);
  keyWatcher.updateAuthKeys();
  verify(zk,instance);
  assertEquals(0,secretManager.getKeys().size());
  assertNull(secretManager.getCurrentKey());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBaseNodeDeleted() throws Exception {
  WatchedEvent event=new WatchedEvent(EventType.NodeDeleted,null,baseNode);
  AuthenticationKey key1=new AuthenticationKey(1,0l,10000l,keyGen.generateKey()), key2=new AuthenticationKey(2,key1.getExpirationDate(),20000l,keyGen.generateKey());
  secretManager.addKey(key1);
  secretManager.addKey(key2);
  assertEquals(2,secretManager.getKeys().size());
  replay(instance,zk);
  keyWatcher.process(event);
  verify(instance,zk);
  assertEquals(0,secretManager.getKeys().size());
  assertFalse(secretManager.isCurrentKeySet());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.tablets.LogicalTimeTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetAndUpdateTime(){
  long currTime=ltime.getAndUpdateTime();
  assertEquals(TIME + 1L,currTime);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUseMaxTimeFromWALog_Update(){
  ltime.useMaxTimeFromWALog(5678L);
  assertEquals("L5678",ltime.getMetadataValue());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetUpdateTimes(){
  List<Mutation> ms=new java.util.ArrayList<Mutation>();
  ServerMutation m=createMock(ServerMutation.class);
  ServerMutation m2=createMock(ServerMutation.class);
  m.setSystemTimestamp(1235L);
  replay(m);
  m2.setSystemTimestamp(1236L);
  replay(m2);
  ms.add(m);
  ms.add(m2);
  long currTime=ltime.setUpdateTimes(ms);
  assertEquals(TIME + 2L,currTime);
  verify(m);
  verify(m2);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetMetadataValue(){
  assertEquals("L1234",ltime.getMetadataValue());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetTime(){
  assertEquals(TIME,ltime.getTime());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetUpdateTimes_NoMutations(){
  List<Mutation> ms=new java.util.ArrayList<Mutation>();
  assertEquals(TIME,ltime.setUpdateTimes(ms));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUseMaxTimeFromWALog_NoUpdate(){
  ltime.useMaxTimeFromWALog(0L);
  assertEquals("L1234",ltime.getMetadataValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.tablets.MillisTimeTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSetUpdateTimes_NoMutations(){
  List<Mutation> ms=new java.util.ArrayList<Mutation>();
  assertEquals(TIME,mtime.setUpdateTimes(ms));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetTime(){
  assertEquals(TIME,mtime.getTime());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAndUpdateTime(){
  long currTime=mtime.getAndUpdateTime();
  assertTrue(currTime > TIME);
  assertEquals(currTime,mtime.getTime());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUseMaxTimeFromWALog_No(){
  mtime.useMaxTimeFromWALog(0L);
  assertEquals("M1234",mtime.getMetadataValue());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUseMaxTimeFromWALog_Yes(){
  mtime.useMaxTimeFromWALog(5678L);
  assertEquals("M5678",mtime.getMetadataValue());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetMetadataValue(){
  assertEquals("M1234",mtime.getMetadataValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.tablets.TabletTimeTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMaxMetadataTime_Null2(){
  assertEquals("L5678",TabletTime.maxMetadataTime("L5678",null));
  assertEquals("M5678",TabletTime.maxMetadataTime("M5678",null));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMaxMetadataTime_Logical(){
  assertEquals("L5678",TabletTime.maxMetadataTime("L1234","L5678"));
  assertEquals("L5678",TabletTime.maxMetadataTime("L5678","L1234"));
  assertEquals("L5678",TabletTime.maxMetadataTime("L5678","L5678"));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetTimeID(){
  assertEquals('L',TabletTime.getTimeID(TimeType.LOGICAL));
  assertEquals('M',TabletTime.getTimeID(TimeType.MILLIS));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetInstance_Millis(){
  TabletTime t=TabletTime.getInstance("M1234");
  assertEquals(MillisTime.class,t.getClass());
  assertEquals("M1234",t.getMetadataValue());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMaxMetadataTime_Millis(){
  assertEquals("M5678",TabletTime.maxMetadataTime("M1234","M5678"));
  assertEquals("M5678",TabletTime.maxMetadataTime("M5678","M1234"));
  assertEquals("M5678",TabletTime.maxMetadataTime("M5678","M5678"));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMaxMetadataTime_Null1(){
  assertEquals("L5678",TabletTime.maxMetadataTime(null,"L5678"));
  assertEquals("M5678",TabletTime.maxMetadataTime(null,"M5678"));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetInstance_Logical(){
  TabletTime t=TabletTime.getInstance("L1234");
  assertEquals(LogicalTime.class,t.getClass());
  assertEquals("L1234",t.getMetadataValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.AdminCommandsTest </h4><pre class="type-5 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDumpConfigCommand(){
  Admin.DumpConfigCommand cmd=new Admin.DumpConfigCommand();
  assertEquals(0,cmd.tables.size());
  assertFalse(cmd.allConfiguration);
  assertFalse(cmd.systemConfiguration);
  assertFalse(cmd.namespaceConfiguration);
  assertFalse(cmd.users);
  assertNull(cmd.directory);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPingCommand(){
  Admin.PingCommand cmd=new Admin.PingCommand();
  assertEquals(0,cmd.args.size());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStopCommand(){
  Admin.StopCommand cmd=new Admin.StopCommand();
  assertEquals(0,cmd.args.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.AdminTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testZooKeeperTserverPath(){
  Instance instance=EasyMock.createMock(Instance.class);
  String instanceId=UUID.randomUUID().toString();
  EasyMock.expect(instance.getInstanceID()).andReturn(instanceId);
  EasyMock.replay(instance);
  assertEquals(Constants.ZROOT + "/" + instanceId+ Constants.ZTSERVERS,Admin.getTServersZkPath(instance));
  EasyMock.verify(instance);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testQualifySessionId(){
  ZooCache zc=EasyMock.createMock(ZooCache.class);
  String root="/accumulo/id/tservers";
  String server="localhost:12345";
  final long session=123456789l;
  String serverPath=root + "/" + server;
  EasyMock.expect(zc.getChildren(serverPath)).andReturn(Collections.singletonList("child"));
  EasyMock.expect(zc.get(EasyMock.eq(serverPath + "/child"),EasyMock.anyObject(Stat.class))).andAnswer(new IAnswer<byte[]>(){
    @Override public byte[] answer() throws Throwable {
      Stat stat=(Stat)EasyMock.getCurrentArguments()[1];
      stat.setEphemeralOwner(session);
      return new byte[0];
    }
  }
);
  EasyMock.replay(zc);
  assertEquals(server + "[" + Long.toHexString(session)+ "]",Admin.qualifyWithZooKeeperSessionId(root,zc,server));
  EasyMock.verify(zc);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCannotQualifySessionId(){
  ZooCache zc=EasyMock.createMock(ZooCache.class);
  String root="/accumulo/id/tservers";
  String server="localhost:12345";
  String serverPath=root + "/" + server;
  EasyMock.expect(zc.getChildren(serverPath)).andReturn(Collections.<String>emptyList());
  EasyMock.replay(zc);
  assertEquals(server,Admin.qualifyWithZooKeeperSessionId(root,zc,server));
  EasyMock.verify(zc);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.DefaultMapTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultMap(){
  Integer value=new DefaultMap<String,Integer>(0).get("test");
  assertNotNull(value);
  assertEquals(Integer.valueOf(0),value);
  value=new DefaultMap<String,Integer>(1).get("test");
  assertNotNull(value);
  assertEquals(Integer.valueOf(1),value);
  AtomicInteger canConstruct=new DefaultMap<String,AtomicInteger>(new AtomicInteger(1)).get("test");
  assertNotNull(canConstruct);
  assertEquals(new AtomicInteger(0).get(),canConstruct.get());
  DefaultMap<String,String> map=new DefaultMap<String,String>("");
  assertEquals(map.get("foo"),"");
  map.put("foo","bar");
  assertEquals(map.get("foo"),"bar");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.FileInfoTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetters(){
  assertEquals("row1",info.getFirstRow().toString());
  assertEquals("row2",info.getLastRow().toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.FileSystemMonitorTest </h4><pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilteredMountEntries() throws Exception {
  String[] mountEntries=new String[]{"rootfs / rootfs rw 0 0","proc /proc proc rw,nosuid,nodev,noexec,relatime 0 0","sysfs /sys sysfs rw,seclabel,nosuid,nodev,noexec,relatime 0 0","devtmpfs /dev devtmpfs rw,seclabel,nosuid,size=8119336k,nr_inodes=2029834,mode=755 0 0","securityfs /sys/kernel/security securityfs rw,nosuid,nodev,noexec,relatime 0 0","tmpfs /dev/shm tmpfs rw,seclabel,nosuid,nodev 0 0","devpts /dev/pts devpts rw,seclabel,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000 0 0","tmpfs /run tmpfs rw,seclabel,nosuid,nodev,mode=755 0 0","tmpfs /sys/fs/cgroup tmpfs ro,seclabel,nosuid,nodev,noexec,mode=755 0 0","cgroup /sys/fs/cgroup/systemd cgroup rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd 0 0","pstore /sys/fs/pstore pstore rw,nosuid,nodev,noexec,relatime 0 0","cgroup /sys/fs/cgroup/cpuset cgroup rw,nosuid,nodev,noexec,relatime,cpuset 0 0","cgroup /sys/fs/cgroup/cpu,cpuacct cgroup rw,nosuid,nodev,noexec,relatime,cpuacct,cpu 0 0","cgroup /sys/fs/cgroup/memory cgroup rw,nosuid,nodev,noexec,relatime,memory 0 0","cgroup /sys/fs/cgroup/devices cgroup rw,nosuid,nodev,noexec,relatime,devices 0 0","cgroup /sys/fs/cgroup/freezer cgroup rw,nosuid,nodev,noexec,relatime,freezer 0 0","cgroup /sys/fs/cgroup/net_cls cgroup rw,nosuid,nodev,noexec,relatime,net_cls 0 0","cgroup /sys/fs/cgroup/blkio cgroup rw,nosuid,nodev,noexec,relatime,blkio 0 0","cgroup /sys/fs/cgroup/perf_event cgroup rw,nosuid,nodev,noexec,relatime,perf_event 0 0","cgroup /sys/fs/cgroup/hugetlb cgroup rw,nosuid,nodev,noexec,relatime,hugetlb 0 0","configfs /sys/kernel/config configfs rw,relatime 0 0","/dev/vda1 / xfs rw,seclabel,relatime,attr2,inode64,noquota 0 0","/dev/vda2 /ignoreme reiserfs rw 0 0","rpc_pipefs /var/lib/nfs/rpc_pipefs rpc_pipefs rw,relatime 0 0","selinuxfs /sys/fs/selinux selinuxfs rw,relatime 0 0","systemd-1 /proc/sys/fs/binfmt_misc autofs rw,relatime,fd=32,pgrp=1,timeout=300,minproto=5,maxproto=5,direct 0 0","debugfs /sys/kernel/debug debugfs rw,relatime 0 0","mqueue /dev/mqueue mqueue rw,seclabel,relatime 0 0","hugetlbfs /dev/hugepages hugetlbfs rw,seclabel,relatime 0 0","sunrpc /proc/fs/nfsd nfsd rw,relatime 0 0","/dev/vdb /grid/0 ext4 rw,seclabel,relatime,data=ordered 0 0"};
  StringBuilder sb=new StringBuilder(256);
  for (  String mountEntry : mountEntries) {
    if (sb.length() > 0) {
      sb.append("\n");
    }
    sb.append(mountEntry);
  }
  ByteArrayInputStream is=new ByteArrayInputStream(sb.toString().getBytes(UTF_8));
  BufferedReader reader=new BufferedReader(new InputStreamReader(is));
  List<Mount> mounts=FileSystemMonitor.getMountsFromFile(reader);
  log.info("Filtered mount points: " + mounts);
  assertEquals(2,mounts.size());
  Set<String> expectedCheckedMountPoints=new HashSet<String>();
  expectedCheckedMountPoints.add("/");
  expectedCheckedMountPoints.add("/grid/0");
  for (  Mount mount : mounts) {
    assertTrue("Did not expect to find " + mount,expectedCheckedMountPoints.remove(mount.mountPoint));
  }
  assertEquals("Should not have any extra mount points: " + expectedCheckedMountPoints,0,expectedCheckedMountPoints.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.FileUtilTest </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testToPathStrings(){
  Collection<FileRef> c=new java.util.ArrayList<FileRef>();
  FileRef r1=createMock(FileRef.class);
  expect(r1.path()).andReturn(new Path("/foo"));
  replay(r1);
  c.add(r1);
  FileRef r2=createMock(FileRef.class);
  expect(r2.path()).andReturn(new Path("/bar"));
  replay(r2);
  c.add(r2);
  Collection<String> cs=FileUtil.toPathStrings(c);
  Assert.assertEquals(2,cs.size());
  Iterator<String> iter=cs.iterator();
  Assert.assertEquals("/foo",iter.next());
  Assert.assertEquals("/bar",iter.next());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.ReplicationTableUtilTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void properPathInRow() throws Exception {
  Writer writer=EasyMock.createNiceMock(Writer.class);
  writer.update(EasyMock.anyObject(Mutation.class));
  final List<Mutation> mutations=new ArrayList<Mutation>();
  EasyMock.expectLastCall().andAnswer(new IAnswer(){
    @Override public Object answer(){
      mutations.add(((Mutation)EasyMock.getCurrentArguments()[0]));
      return null;
    }
  }
);
  EasyMock.replay(writer);
  Credentials creds=new Credentials("root",new PasswordToken(""));
  ClientContext context=EasyMock.createMock(ClientContext.class);
  EasyMock.expect(context.getCredentials()).andReturn(creds).anyTimes();
  EasyMock.replay(context);
  ReplicationTableUtil.addWriter(creds,writer);
  UUID uuid=UUID.randomUUID();
  String myFile="file:////home/user/accumulo/wal/server+port/" + uuid;
  long createdTime=System.currentTimeMillis();
  ReplicationTableUtil.updateFiles(context,new KeyExtent(new Text("1"),null,null),myFile,StatusUtil.fileCreated(createdTime));
  verify(writer);
  Assert.assertEquals(1,mutations.size());
  Mutation m=mutations.get(0);
  Assert.assertEquals(MetadataSchema.ReplicationSection.getRowPrefix() + "file:/home/user/accumulo/wal/server+port/" + uuid,new Text(m.getRow()).toString());
  List<ColumnUpdate> updates=m.getUpdates();
  Assert.assertEquals(1,updates.size());
  ColumnUpdate update=updates.get(0);
  Assert.assertEquals(MetadataSchema.ReplicationSection.COLF,new Text(update.getColumnFamily()));
  Assert.assertEquals("1",new Text(update.getColumnQualifier()).toString());
  Assert.assertEquals(StatusUtil.fileCreatedValue(createdTime),new Value(update.getValue()));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void replEntryMutation(){
  Status stat=Status.newBuilder().setBegin(0).setEnd(0).setInfiniteEnd(true).setCreatedTime(System.currentTimeMillis()).build();
  String file="file:///accumulo/wal/127.0.0.1+9997" + UUID.randomUUID();
  Path filePath=new Path(file);
  Text row=new Text(filePath.toString());
  KeyExtent extent=new KeyExtent(new Text("1"),new Text("b"),new Text("a"));
  Mutation m=ReplicationTableUtil.createUpdateMutation(filePath,ProtobufUtil.toValue(stat),extent);
  Assert.assertEquals(new Text(MetadataSchema.ReplicationSection.getRowPrefix() + row),new Text(m.getRow()));
  Assert.assertEquals(1,m.getUpdates().size());
  ColumnUpdate col=m.getUpdates().get(0);
  Assert.assertEquals(MetadataSchema.ReplicationSection.COLF,new Text(col.getColumnFamily()));
  Assert.assertEquals(extent.getTableId(),new Text(col.getColumnQualifier()));
  Assert.assertEquals(0,col.getColumnVisibility().length);
  Assert.assertArrayEquals(stat.toByteArray(),col.getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.time.BaseRelativeTimeTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFutureTime(){
  BogusTime advice=new BogusTime();
  BogusTime local=new BogusTime();
  local.value=advice.value=System.currentTimeMillis();
  advice.value+=10000;
  BaseRelativeTime brt=new BaseRelativeTime(local);
  assertEquals(brt.currentTime(),local.value);
  brt.updateTime(advice.value);
  long once=brt.currentTime();
  assertTrue(once < advice.value);
  assertTrue(once > local.value);
  for (int i=0; i < 100; i++) {
    brt.updateTime(advice.value);
  }
  long many=brt.currentTime();
  assertTrue(many > once);
  assertTrue("after much advice, relative time is still closer to local time",(advice.value - many) < (once - local.value));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMatchesTime(){
  BogusTime bt=new BogusTime();
  BogusTime now=new BogusTime();
  now.value=bt.value=System.currentTimeMillis();
  BaseRelativeTime brt=new BaseRelativeTime(now);
  assertEquals(brt.currentTime(),now.value);
  brt.updateTime(now.value);
  assertEquals(brt.currentTime(),now.value);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.time.SimpleTimerTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFixedDelaySchedule() throws InterruptedException {
  AtomicInteger i=new AtomicInteger();
  Incrementer r=new Incrementer(i);
  t.schedule(r,DELAY,PERIOD);
  Thread.sleep(DELAY + (2 * PERIOD) + PAD);
  assertEquals(3,i.get());
  r.cancel();
}

</code></pre>

<br>
<pre class="type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleton(){
  assertEquals(1,SimpleTimer.getInstanceThreadPoolSize());
  SimpleTimer t2=SimpleTimer.getInstance(2);
  assertSame(t,t2);
  assertEquals(1,SimpleTimer.getInstanceThreadPoolSize());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneTimeSchedule() throws InterruptedException {
  AtomicInteger i=new AtomicInteger();
  Incrementer r=new Incrementer(i);
  t.schedule(r,DELAY);
  Thread.sleep(DELAY + PAD);
  assertEquals(1,i.get());
  r.cancel();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.watcher.MonitorLog4jWatcherTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetters(){
  assertFalse(w.isUsingProperties());
  assertEquals(ZooUtil.getRoot(INSTANCE) + Constants.ZMONITOR_LOG4J_ADDR,w.getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.PasswordConverterTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStdin(){
  argv[1]="stdin";
  new JCommander(password,argv);
  assertEquals("stdin",password.password);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFile() throws FileNotFoundException {
  argv[1]="file:pom.xml";
  Scanner scan=new Scanner(new File("pom.xml"));
  String expected=scan.nextLine();
  scan.close();
  new JCommander(password,argv);
  assertEquals(expected,password.password);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPass(){
  String expected=String.valueOf(Math.random());
  argv[1]="pass:" + expected;
  new JCommander(password,argv);
  assertEquals(expected,password.password);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEnv(){
  String name=System.getenv().keySet().iterator().next();
  argv[1]="env:" + name;
  new JCommander(password,argv);
  assertEquals(System.getenv(name),password.password);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.ShellConfigTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testZooKeeperHostFallBackToSite() throws Exception {
  ClientConfiguration clientConfig=new ClientConfiguration();
  Map<String,String> data=new HashMap<>();
  data.put(Property.INSTANCE_ZK_HOST.getKey(),"site_hostname");
  AccumuloConfiguration conf=new ConfigurationCopy(data);
  assertEquals("site_hostname",Shell.getZooKeepers(null,clientConfig,conf));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testZooKeeperHostFromClientConfig() throws Exception {
  ClientConfiguration clientConfig=new ClientConfiguration();
  clientConfig.withZkHosts("cc_hostname");
  Map<String,String> data=new HashMap<>();
  data.put(Property.INSTANCE_ZK_HOST.getKey(),"site_hostname");
  AccumuloConfiguration conf=new ConfigurationCopy(data);
  assertEquals("cc_hostname",Shell.getZooKeepers(null,clientConfig,conf));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testZooKeeperHostFromOption() throws Exception {
  ClientConfiguration clientConfig=new ClientConfiguration();
  clientConfig.withZkHosts("cc_hostname");
  Map<String,String> data=new HashMap<>();
  data.put(Property.INSTANCE_ZK_HOST.getKey(),"site_hostname");
  AccumuloConfiguration conf=new ConfigurationCopy(data);
  assertEquals("opt_hostname",Shell.getZooKeepers("opt_hostname",clientConfig,conf));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.ShellOptionsJCTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSasl() throws Exception {
  JCommander jc=new JCommander();
  jc.setProgramName("accumulo shell");
  jc.addObject(options);
  jc.parse(new String[]{"--sasl"});
  ClientConfiguration clientConf=options.getClientConfiguration();
  assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTraceHosts() throws Exception {
  final String zk="localhost:45454";
  JCommander jc=new JCommander();
  jc.setProgramName("accumulo shell");
  jc.addObject(options);
  jc.parse(new String[]{"-zh",zk});
  ClientConfiguration clientConf=options.getClientConfiguration();
  assertEquals(zk,clientConf.get(ClientProperty.INSTANCE_ZK_HOST));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.ShellTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void execFileTest() throws IOException {
  Shell.log.debug("Starting exec file test --------------------------");
  shell.config("--config-file",config.toString(),"--fake","-u","test","-p","secret","-f","src/test/resources/shelltest.txt");
  assertEquals(0,shell.start());
  assertGoodExit("Unknown command",false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.ShellUtilTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWithoutDecode() throws IOException {
  File testFile=new File(folder.getRoot(),"testFileNoDecode.txt");
  FileUtils.writeStringToFile(testFile,FILEDATA);
  List<Text> output=ShellUtil.scanFile(testFile.getAbsolutePath(),false);
  assertEquals(ImmutableList.of(new Text("line1"),new Text("line2")),output);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWithDecode() throws IOException {
  File testFile=new File(folder.getRoot(),"testFileWithDecode.txt");
  FileUtils.writeStringToFile(testFile,FILEDATA);
  List<Text> output=ShellUtil.scanFile(testFile.getAbsolutePath(),true);
  assertEquals(ImmutableList.of(new Text(Base64.decodeBase64("line1".getBytes(UTF_8))),new Text(Base64.decodeBase64("line2".getBytes(UTF_8)))),output);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.commands.DeleteTableCommandTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void removeAccumuloNamespaceTables(){
  Set<String> tables=new HashSet<String>(Arrays.asList(MetadataTable.NAME,RootTable.NAME,"a1","a2"));
  DeleteTableCommand cmd=new DeleteTableCommand();
  cmd.pruneTables("a.*",tables);
  Assert.assertEquals(new HashSet<String>(Arrays.asList("a1","a2")),tables);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.commands.GetAuthsCommandTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeAccumuloNamespaceTables(){
  Authorizations auths=new Authorizations("AAA","aaa","bbb","BBB");
  GetAuthsCommand cmd=new GetAuthsCommand();
  List<String> sorted=cmd.sortAuthorizations(auths);
  assertNotNull(sorted);
  assertEquals(sorted.size(),4);
  assertEquals(sorted.get(0),"AAA");
  assertEquals(sorted.get(1),"aaa");
  assertEquals(sorted.get(2),"BBB");
  assertEquals(sorted.get(3),"bbb");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.start.MainTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLoadClassFromJar_ExplicitMainClass() throws Exception {
  String[] args={"the.jar","main.class","arg1","arg2"};
  EasyMock.<Class<?>>expect(cl.loadClass("main.class")).andReturn(MAIN_CLASS);
  replay(cl);
  assertEquals(MAIN_CLASS,Main.loadClassFromJar(args,f,cl));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLoadClassFromJar_ManifestMainClass() throws Exception {
  String[] args={"the.jar","arg1","arg2"};
  expect(cl.loadClass("arg1")).andThrow(new ClassNotFoundException());
  EasyMock.<Class<?>>expect(cl.loadClass(MAIN_CLASS_NAME)).andReturn(MAIN_CLASS);
  replay(cl);
  mockManifestMainClass(f,MAIN_CLASS.getName());
  replay(f);
  assertEquals(MAIN_CLASS,Main.loadClassFromJar(args,f,cl));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.start.classloader.vfs.AccumuloReloadingVFSClassLoaderTest </h4><pre class="type-9 type-5 type-3 type-2 type-18 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Is not executed with the test suite
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @Ignore public void testFastDeleteAndReAdd() throws Exception {
  FileObject testDir=vfs.resolveFile(folder1.getRoot().toURI().toString());
  FileObject[] dirContents=testDir.getChildren();
  AccumuloReloadingVFSClassLoader arvcl=new AccumuloReloadingVFSClassLoader(folderPath,vfs,new ReloadingClassLoader(){
    @Override public ClassLoader getClassLoader(){
      return ClassLoader.getSystemClassLoader();
    }
  }
,1000,true);
  FileObject[] files=((VFSClassLoader)arvcl.getClassLoader()).getFileObjects();
  Assert.assertArrayEquals(createFileSystems(dirContents),files);
  Class<?> clazz1=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Object o1=clazz1.newInstance();
  Assert.assertEquals("Hello World!",o1.toString());
  Class<?> clazz1_5=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Assert.assertEquals(clazz1,clazz1_5);
  assertTrue(new File(folder1.getRoot(),"HelloWorld.jar").delete());
  FileUtils.copyURLToFile(this.getClass().getResource("/HelloWorld.jar"),folder1.newFile("HelloWorld.jar"));
  Thread.sleep(7000);
  Class<?> clazz2=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Object o2=clazz2.newInstance();
  Assert.assertEquals("Hello World!",o2.toString());
  Assert.assertFalse(clazz1.equals(clazz2));
  Assert.assertFalse(o1.equals(o2));
  arvcl.close();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifiedClass() throws Exception {
  FileObject testDir=vfs.resolveFile(folder1.getRoot().toURI().toString());
  FileObject[] dirContents=testDir.getChildren();
  AccumuloReloadingVFSClassLoader arvcl=new AccumuloReloadingVFSClassLoader(folderPath,vfs,new ReloadingClassLoader(){
    @Override public ClassLoader getClassLoader(){
      return ClassLoader.getSystemClassLoader();
    }
  }
,1000,true);
  FileObject[] files=((VFSClassLoader)arvcl.getClassLoader()).getFileObjects();
  Assert.assertArrayEquals(createFileSystems(dirContents),files);
  ClassLoader loader1=arvcl.getClassLoader();
  Class<?> clazz1=loader1.loadClass("test.HelloWorld");
  Object o1=clazz1.newInstance();
  Assert.assertEquals("Hello World!",o1.toString());
  Class<?> clazz1_5=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Assert.assertEquals(clazz1,clazz1_5);
  Thread.sleep(1000);
  assertTrue(new File(folder1.getRoot(),"HelloWorld.jar").delete());
  FileUtils.copyURLToFile(this.getClass().getResource("/HelloWorld2.jar"),folder1.newFile("HelloWorld.jar"));
  Thread.sleep(7000);
  Class<?> clazz2=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Object o2=clazz2.newInstance();
  Assert.assertEquals("Hallo Welt",o2.toString());
  Assert.assertFalse(clazz1.equals(clazz2));
  Assert.assertFalse(o1.equals(o2));
  Class<?> clazz3=loader1.loadClass("test.HelloWorld");
  Object o3=clazz3.newInstance();
  Assert.assertEquals("Hello World!",o3.toString());
  arvcl.close();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReloading() throws Exception {
  FileObject testDir=vfs.resolveFile(folder1.getRoot().toURI().toString());
  FileObject[] dirContents=testDir.getChildren();
  AccumuloReloadingVFSClassLoader arvcl=new AccumuloReloadingVFSClassLoader(folderPath,vfs,new ReloadingClassLoader(){
    @Override public ClassLoader getClassLoader(){
      return ClassLoader.getSystemClassLoader();
    }
  }
,1000,true);
  FileObject[] files=((VFSClassLoader)arvcl.getClassLoader()).getFileObjects();
  Assert.assertArrayEquals(createFileSystems(dirContents),files);
  Class<?> clazz1=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Object o1=clazz1.newInstance();
  Assert.assertEquals("Hello World!",o1.toString());
  Class<?> clazz1_5=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Assert.assertEquals(clazz1,clazz1_5);
  assertTrue(new File(folder1.getRoot(),"HelloWorld.jar").delete());
  Thread.sleep(7000);
  FileUtils.copyURLToFile(this.getClass().getResource("/HelloWorld.jar"),folder1.newFile("HelloWorld2.jar"));
  Thread.sleep(7000);
  Class<?> clazz2=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Object o2=clazz2.newInstance();
  Assert.assertEquals("Hello World!",o2.toString());
  Assert.assertFalse(clazz1.equals(clazz2));
  Assert.assertFalse(o1.equals(o2));
  arvcl.close();
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstructor() throws Exception {
  FileObject testDir=vfs.resolveFile(folder1.getRoot().toURI().toString());
  FileObject[] dirContents=testDir.getChildren();
  AccumuloReloadingVFSClassLoader arvcl=new AccumuloReloadingVFSClassLoader(folderPath,vfs,new ReloadingClassLoader(){
    @Override public ClassLoader getClassLoader(){
      return ClassLoader.getSystemClassLoader();
    }
  }
,true);
  VFSClassLoader cl=(VFSClassLoader)arvcl.getClassLoader();
  FileObject[] files=cl.getFileObjects();
  Assert.assertArrayEquals(createFileSystems(dirContents),files);
  arvcl.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.start.classloader.vfs.AccumuloVFSClassLoaderTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultContextConfigured() throws Exception {
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"loader",(AccumuloReloadingVFSClassLoader)null);
  FileUtils.copyURLToFile(this.getClass().getResource("/HelloWorld.jar"),folder1.newFile("HelloWorld.jar"));
  File conf=folder1.newFile("accumulo-site.xml");
  FileWriter out=new FileWriter(conf);
  out.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n");
  out.append("<configuration>\n");
  out.append("<property>\n");
  out.append("<name>general.classpaths</name>\n");
  out.append("<value></value>\n");
  out.append("</property>\n");
  out.append("<property>\n");
  out.append("<name>general.vfs.classpaths</name>\n");
  out.append("<value>" + new File(folder1.getRoot(),"HelloWorld.jar").toURI() + "</value>\n");
  out.append("</property>\n");
  out.append("</configuration>\n");
  out.close();
  Whitebox.setInternalState(AccumuloClassLoader.class,"SITE_CONF",conf.toURI().toURL().toString());
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"lock",new Object());
  ClassLoader acl=AccumuloVFSClassLoader.getClassLoader();
  Assert.assertTrue((acl instanceof VFSClassLoader));
  Assert.assertTrue((acl.getParent() instanceof VFSClassLoader));
  VFSClassLoader arvcl=(VFSClassLoader)acl.getParent();
  Assert.assertEquals(1,arvcl.getFileObjects().length);
  Assert.assertTrue(arvcl.getFileObjects()[0].getURL().toString().contains("HelloWorld.jar"));
  Class<?> clazz1=arvcl.loadClass("test.HelloWorld");
  Object o1=clazz1.newInstance();
  Assert.assertEquals("Hello World!",o1.toString());
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"loader",(AccumuloReloadingVFSClassLoader)null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.start.classloader.vfs.ContextManagerTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void differentContexts() throws Exception {
  ContextManager cm=new ContextManager(vfs,new ReloadingClassLoader(){
    @Override public ClassLoader getClassLoader(){
      return ClassLoader.getSystemClassLoader();
    }
  }
);
  cm.setContextConfig(new ContextsConfig(){
    @Override public ContextConfig getContextConfig(    String context){
      if (context.equals("CX1")) {
        return new ContextConfig(uri1,true);
      }
 else       if (context.equals("CX2")) {
        return new ContextConfig(uri2,true);
      }
      return null;
    }
  }
);
  FileObject testDir=vfs.resolveFile(folder1.getRoot().toURI().toString());
  FileObject[] dirContents=testDir.getChildren();
  ClassLoader cl1=cm.getClassLoader("CX1");
  FileObject[] files=((VFSClassLoader)cl1).getFileObjects();
  Assert.assertArrayEquals(createFileSystems(dirContents),files);
  FileObject testDir2=vfs.resolveFile(folder2.getRoot().toURI().toString());
  FileObject[] dirContents2=testDir2.getChildren();
  ClassLoader cl2=cm.getClassLoader("CX2");
  FileObject[] files2=((VFSClassLoader)cl2).getFileObjects();
  Assert.assertArrayEquals(createFileSystems(dirContents2),files2);
  Class<?> defaultContextClass=cl1.loadClass("test.HelloWorld");
  Object o1=defaultContextClass.newInstance();
  Assert.assertEquals("Hello World!",o1.toString());
  Class<?> myContextClass=cl2.loadClass("test.HelloWorld");
  Object o2=myContextClass.newInstance();
  Assert.assertEquals("Hello World!",o2.toString());
  Assert.assertFalse(defaultContextClass.equals(myContextClass));
  cm.removeUnusedContexts(new HashSet<String>());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.start.classloader.vfs.providers.ReadOnlyHdfsFileProviderTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEquals() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  FileObject file2=manager.resolveFile(TEST_FILE1);
  Assert.assertEquals(file,file2);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetContentSize() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Assert.assertEquals(0,file.getContent().getSize());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.start.classloader.vfs.providers.VfsClassLoaderTest </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetClass() throws Exception {
  Class<?> helloWorldClass=this.cl.loadClass("test.HelloWorld");
  Object o=helloWorldClass.newInstance();
  Assert.assertEquals("Hello World!",o.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ArbitraryTablePropertiesIT </h4><pre class="type-8 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userSetGetTablePropertyWithoutPermission() throws Exception {
  log.debug("Starting userSetGetTablePropertyWithoutPermission test ------------------------");
  ClusterUser user=getUser(1);
  String testUser=user.getPrincipal();
  AuthenticationToken testToken=user.getToken();
  final String tableName=getUniqueNames(1)[0];
  final Connector c=getConnector();
  c.securityOperations().createLocalUser(testUser,(testToken instanceof PasswordToken ? (PasswordToken)testToken : null));
  c.tableOperations().create(tableName);
  String propertyName="table.custom.description";
  String description1="Description";
  Assert.assertTrue(Property.isValidPropertyKey(propertyName));
  Connector testConn=c.getInstance().getConnector(testUser,user.getToken());
  try {
    testConn.tableOperations().setProperty(tableName,propertyName,description1);
    Assert.fail("Was able to set property without permissions");
  }
 catch (  AccumuloSecurityException e) {
  }
  int count=0;
  for (  Entry<String,String> property : testConn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName))     count++;
  }
  Assert.assertEquals(count,0);
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setGetRemoveTablePropertyRoot() throws Exception {
  log.debug("Starting setGetRemoveTablePropertyRoot test ------------------------");
  final String tableName=getUniqueNames(1)[0];
  final Connector conn=getConnector();
  conn.tableOperations().create(tableName);
  String propertyName="table.custom.description";
  String description1="Description";
  Assert.assertTrue(Property.isValidPropertyKey(propertyName));
  conn.tableOperations().setProperty(tableName,propertyName,description1);
  int count=0;
  for (  Entry<String,String> property : conn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName) && property.getValue().equals(description1))     count++;
  }
  Assert.assertEquals(count,1);
  String description2="set second";
  conn.tableOperations().setProperty(tableName,propertyName,description2);
  count=0;
  for (  Entry<String,String> property : conn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName) && property.getValue().equals(description2))     count++;
  }
  Assert.assertEquals(count,1);
  conn.tableOperations().removeProperty(tableName,propertyName);
  count=0;
  for (  Entry<String,String> property : conn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName))     count++;
  }
  Assert.assertEquals(count,0);
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userSetGetRemoveTablePropertyWithPermission() throws Exception {
  log.debug("Starting userSetGetRemoveTablePropertyWithPermission test ------------------------");
  ClusterUser user=getUser(0);
  String testUser=user.getPrincipal();
  AuthenticationToken testToken=user.getToken();
  final String tableName=getUniqueNames(1)[0];
  final Connector c=getConnector();
  c.securityOperations().createLocalUser(testUser,(testToken instanceof PasswordToken ? (PasswordToken)testToken : null));
  c.tableOperations().create(tableName);
  c.securityOperations().grantTablePermission(testUser,tableName,TablePermission.ALTER_TABLE);
  String propertyName="table.custom.description";
  String description1="Description";
  Assert.assertTrue(Property.isValidPropertyKey(propertyName));
  Connector testConn=c.getInstance().getConnector(testUser,user.getToken());
  testConn.tableOperations().setProperty(tableName,propertyName,description1);
  int count=0;
  for (  Entry<String,String> property : testConn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName) && property.getValue().equals(description1))     count++;
  }
  Assert.assertEquals(count,1);
  String description2="set second";
  testConn.tableOperations().setProperty(tableName,propertyName,description2);
  count=0;
  for (  Entry<String,String> property : testConn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName) && property.getValue().equals(description2))     count++;
  }
  Assert.assertEquals(count,1);
  testConn.tableOperations().removeProperty(tableName,propertyName);
  count=0;
  for (  Entry<String,String> property : testConn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName))     count++;
  }
  Assert.assertEquals(count,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.AuditMessageIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFailedAudits() throws AccumuloSecurityException, AccumuloException, TableExistsException, TableNotFoundException, IOException, InterruptedException {
  try {
    conn.securityOperations().dropLocalUser(AUDIT_USER_2);
  }
 catch (  AccumuloSecurityException ex) {
  }
  try {
    conn.securityOperations().revokeSystemPermission(AUDIT_USER_2,SystemPermission.ALTER_TABLE);
  }
 catch (  AccumuloSecurityException ex) {
  }
  try {
    conn.securityOperations().createLocalUser("root",new PasswordToken("super secret"));
  }
 catch (  AccumuloSecurityException ex) {
  }
  ArrayList<String> auditMessages=getAuditMessages("testFailedAudits");
  assertEquals(2,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.DROP_USER_AUDIT_TEMPLATE,AUDIT_USER_2)).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.REVOKE_SYSTEM_PERMISSION_AUDIT_TEMPLATE,SystemPermission.ALTER_TABLE,AUDIT_USER_2)).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CREATE_USER_AUDIT_TEMPLATE,"root","")).size());
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportExportOperationsAudits() throws AccumuloSecurityException, AccumuloException, TableExistsException, TableNotFoundException, IOException, InterruptedException {
  conn.securityOperations().createLocalUser(AUDIT_USER_1,new PasswordToken(PASSWORD));
  conn.securityOperations().grantSystemPermission(AUDIT_USER_1,SystemPermission.SYSTEM);
  conn.securityOperations().changeUserAuthorizations(AUDIT_USER_1,auths);
  grantEverySystemPriv(conn,AUDIT_USER_1);
  auditConnector=getCluster().getConnector(AUDIT_USER_1,new PasswordToken(PASSWORD));
  auditConnector.tableOperations().create(OLD_TEST_TABLE_NAME);
  BatchWriter bw=auditConnector.createBatchWriter(OLD_TEST_TABLE_NAME,new BatchWriterConfig());
  Mutation m=new Mutation("myRow");
  m.put("cf1","cq1","v1");
  m.put("cf1","cq2","v3");
  bw.addMutation(m);
  bw.close();
  File exportDir=new File(getCluster().getConfig().getDir().toString() + "/export");
  auditConnector.tableOperations().offline(OLD_TEST_TABLE_NAME);
  auditConnector.tableOperations().exportTable(OLD_TEST_TABLE_NAME,exportDir.toString());
  File distCpTxt=new File(exportDir.toString() + "/distcp.txt");
  File importFile=null;
  LineIterator it=FileUtils.lineIterator(distCpTxt,UTF_8.name());
  String filePrefix="file:";
  try {
    while (it.hasNext() && importFile == null) {
      String line=it.nextLine();
      if (line.matches(".*\\.rf")) {
        importFile=new File(line.replaceFirst(filePrefix,""));
      }
    }
  }
  finally {
    LineIterator.closeQuietly(it);
  }
  FileUtils.copyFileToDirectory(importFile,exportDir);
  auditConnector.tableOperations().importTable(NEW_TEST_TABLE_NAME,exportDir.toString());
  auditConnector.tableOperations().create(THIRD_TEST_TABLE_NAME);
  File failDir=new File(exportDir + "/tmp");
  assertTrue(failDir.mkdirs() || failDir.isDirectory());
  auditConnector.tableOperations().importDirectory(THIRD_TEST_TABLE_NAME,exportDir.toString(),failDir.toString(),false);
  auditConnector.tableOperations().online(OLD_TEST_TABLE_NAME);
  ArrayList<String> auditMessages=getAuditMessages("testImportExportOperationsAudits");
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_CREATE_TABLE_AUDIT_TEMPLATE,OLD_TEST_TABLE_NAME)).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_ONLINE_OFFLINE_TABLE_AUDIT_TEMPLATE,"offlineTable",OLD_TEST_TABLE_NAME)).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_EXPORT_AUDIT_TEMPLATE,OLD_TEST_TABLE_NAME,exportDir.toString())).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_IMPORT_AUDIT_TEMPLATE,NEW_TEST_TABLE_NAME,filePrefix + exportDir.toString())).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_CREATE_TABLE_AUDIT_TEMPLATE,THIRD_TEST_TABLE_NAME)).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_BULK_IMPORT_AUDIT_TEMPLATE,THIRD_TEST_TABLE_NAME,filePrefix + exportDir.toString(),filePrefix + failDir.toString())).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_ONLINE_OFFLINE_TABLE_AUDIT_TEMPLATE,"onlineTable",OLD_TEST_TABLE_NAME)).size());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTableOperationsAudits() throws AccumuloException, AccumuloSecurityException, TableExistsException, TableNotFoundException, IOException, InterruptedException {
  conn.securityOperations().createLocalUser(AUDIT_USER_1,new PasswordToken(PASSWORD));
  conn.securityOperations().grantSystemPermission(AUDIT_USER_1,SystemPermission.SYSTEM);
  conn.securityOperations().grantSystemPermission(AUDIT_USER_1,SystemPermission.CREATE_TABLE);
  auditConnector=getCluster().getConnector(AUDIT_USER_1,new PasswordToken(PASSWORD));
  auditConnector.tableOperations().create(OLD_TEST_TABLE_NAME);
  auditConnector.tableOperations().rename(OLD_TEST_TABLE_NAME,NEW_TEST_TABLE_NAME);
  Map<String,String> emptyMap=Collections.emptyMap();
  Set<String> emptySet=Collections.emptySet();
  auditConnector.tableOperations().clone(NEW_TEST_TABLE_NAME,OLD_TEST_TABLE_NAME,true,emptyMap,emptySet);
  auditConnector.tableOperations().delete(OLD_TEST_TABLE_NAME);
  auditConnector.tableOperations().offline(NEW_TEST_TABLE_NAME);
  auditConnector.tableOperations().delete(NEW_TEST_TABLE_NAME);
  ArrayList<String> auditMessages=getAuditMessages("testTableOperationsAudits");
  assertEquals(1,findAuditMessage(auditMessages,"action: createTable; targetTable: " + OLD_TEST_TABLE_NAME).size());
  assertEquals(1,findAuditMessage(auditMessages,"action: renameTable; targetTable: " + OLD_TEST_TABLE_NAME).size());
  assertEquals(1,findAuditMessage(auditMessages,"action: cloneTable; targetTable: " + NEW_TEST_TABLE_NAME).size());
  assertEquals(1,findAuditMessage(auditMessages,"action: deleteTable; targetTable: " + OLD_TEST_TABLE_NAME).size());
  assertEquals(1,findAuditMessage(auditMessages,"action: offlineTable; targetTable: " + NEW_TEST_TABLE_NAME).size());
  assertEquals(1,findAuditMessage(auditMessages,"action: deleteTable; targetTable: " + NEW_TEST_TABLE_NAME).size());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserOperationsAudits() throws AccumuloSecurityException, AccumuloException, TableExistsException, InterruptedException, IOException {
  conn.securityOperations().createLocalUser(AUDIT_USER_1,new PasswordToken(PASSWORD));
  conn.securityOperations().grantSystemPermission(AUDIT_USER_1,SystemPermission.SYSTEM);
  conn.securityOperations().grantSystemPermission(AUDIT_USER_1,SystemPermission.CREATE_USER);
  grantEverySystemPriv(conn,AUDIT_USER_1);
  auditConnector=getCluster().getConnector(AUDIT_USER_1,new PasswordToken(PASSWORD));
  auditConnector.securityOperations().createLocalUser(AUDIT_USER_2,new PasswordToken(PASSWORD));
  conn.securityOperations().grantSystemPermission(AUDIT_USER_2,SystemPermission.ALTER_TABLE);
  conn.securityOperations().revokeSystemPermission(AUDIT_USER_2,SystemPermission.ALTER_TABLE);
  auditConnector.tableOperations().create(NEW_TEST_TABLE_NAME);
  conn.securityOperations().grantTablePermission(AUDIT_USER_2,NEW_TEST_TABLE_NAME,TablePermission.READ);
  conn.securityOperations().revokeTablePermission(AUDIT_USER_2,NEW_TEST_TABLE_NAME,TablePermission.READ);
  auditConnector.securityOperations().changeLocalUserPassword(AUDIT_USER_2,new PasswordToken("anything"));
  auditConnector.securityOperations().changeUserAuthorizations(AUDIT_USER_2,auths);
  auditConnector.securityOperations().dropLocalUser(AUDIT_USER_2);
  ArrayList<String> auditMessages=getAuditMessages("testUserOperationsAudits");
  assertEquals(2,findAuditMessage(auditMessages,"action: createUser; targetUser: " + AUDIT_USER_2).size());
  assertEquals(1,findAuditMessage(auditMessages,"action: grantSystemPermission; permission: " + SystemPermission.ALTER_TABLE.toString() + "; targetUser: "+ AUDIT_USER_2).size());
  assertEquals(1,findAuditMessage(auditMessages,"action: revokeSystemPermission; permission: " + SystemPermission.ALTER_TABLE.toString() + "; targetUser: "+ AUDIT_USER_2).size());
  assertEquals(1,findAuditMessage(auditMessages,"action: grantTablePermission; permission: " + TablePermission.READ.toString() + "; targetTable: "+ NEW_TEST_TABLE_NAME).size());
  assertEquals(1,findAuditMessage(auditMessages,"action: revokeTablePermission; permission: " + TablePermission.READ.toString() + "; targetTable: "+ NEW_TEST_TABLE_NAME).size());
  assertEquals(2,findAuditMessage(auditMessages,"action: changePassword; targetUser: " + AUDIT_USER_2 + "").size());
  assertEquals(1,findAuditMessage(auditMessages,"action: changeAuthorizations; targetUser: " + AUDIT_USER_2 + "; authorizations: "+ auths.toString()).size());
  assertEquals(2,findAuditMessage(auditMessages,"action: dropUser; targetUser: " + AUDIT_USER_2).size());
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDataOperationsAudits() throws AccumuloSecurityException, AccumuloException, TableExistsException, TableNotFoundException, IOException, InterruptedException {
  conn.securityOperations().createLocalUser(AUDIT_USER_1,new PasswordToken(PASSWORD));
  conn.securityOperations().grantSystemPermission(AUDIT_USER_1,SystemPermission.SYSTEM);
  conn.securityOperations().changeUserAuthorizations(AUDIT_USER_1,auths);
  grantEverySystemPriv(conn,AUDIT_USER_1);
  auditConnector=getCluster().getConnector(AUDIT_USER_1,new PasswordToken(PASSWORD));
  auditConnector.tableOperations().create(OLD_TEST_TABLE_NAME);
  BatchWriter bw=auditConnector.createBatchWriter(OLD_TEST_TABLE_NAME,new BatchWriterConfig());
  Mutation m=new Mutation("myRow");
  m.put("cf1","cq1","v1");
  m.put("cf1","cq2","v3");
  bw.addMutation(m);
  bw.close();
  Scanner scanner=auditConnector.createScanner(OLD_TEST_TABLE_NAME,auths);
  for (  Map.Entry<Key,Value> entry : scanner) {
    System.out.println("Scanner row: " + entry.getKey() + " "+ entry.getValue());
  }
  scanner.close();
  BatchScanner bs=auditConnector.createBatchScanner(OLD_TEST_TABLE_NAME,auths,1);
  bs.fetchColumn(new Text("cf1"),new Text("cq1"));
  bs.setRanges(Arrays.asList(new Range("myRow","myRow~")));
  for (  Map.Entry<Key,Value> entry : bs) {
    System.out.println("BatchScanner row: " + entry.getKey() + " "+ entry.getValue());
  }
  bs.close();
  auditConnector.tableOperations().deleteRows(OLD_TEST_TABLE_NAME,new Text("myRow"),new Text("myRow~"));
  ArrayList<String> auditMessages=getAuditMessages("testDataOperationsAudits");
  assertTrue(1 <= findAuditMessage(auditMessages,"action: scan; targetTable: " + OLD_TEST_TABLE_NAME).size());
  assertTrue(1 <= findAuditMessage(auditMessages,"action: scan; targetTable: " + OLD_TEST_TABLE_NAME).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_DELETE_RANGE_AUDIT_TEMPLATE,OLD_TEST_TABLE_NAME,"myRow","myRow~")).size());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeniedAudits() throws AccumuloSecurityException, AccumuloException, TableExistsException, TableNotFoundException, IOException, InterruptedException {
  conn.securityOperations().createLocalUser(AUDIT_USER_1,new PasswordToken(PASSWORD));
  conn.tableOperations().create(OLD_TEST_TABLE_NAME);
  auditConnector=getCluster().getConnector(AUDIT_USER_1,new PasswordToken(PASSWORD));
  try {
    auditConnector.tableOperations().create(NEW_TEST_TABLE_NAME);
  }
 catch (  AccumuloSecurityException ex) {
  }
  try {
    auditConnector.tableOperations().rename(OLD_TEST_TABLE_NAME,NEW_TEST_TABLE_NAME);
  }
 catch (  AccumuloSecurityException ex) {
  }
  try {
    auditConnector.tableOperations().clone(OLD_TEST_TABLE_NAME,NEW_TEST_TABLE_NAME,true,Collections.<String,String>emptyMap(),Collections.<String>emptySet());
  }
 catch (  AccumuloSecurityException ex) {
  }
  try {
    auditConnector.tableOperations().delete(OLD_TEST_TABLE_NAME);
  }
 catch (  AccumuloSecurityException ex) {
  }
  try {
    auditConnector.tableOperations().offline(OLD_TEST_TABLE_NAME);
  }
 catch (  AccumuloSecurityException ex) {
  }
  try {
    Scanner scanner=auditConnector.createScanner(OLD_TEST_TABLE_NAME,auths);
    scanner.iterator().next().getKey();
  }
 catch (  RuntimeException ex) {
  }
  try {
    auditConnector.tableOperations().deleteRows(OLD_TEST_TABLE_NAME,new Text("myRow"),new Text("myRow~"));
  }
 catch (  AccumuloSecurityException ex) {
  }
  ArrayList<String> auditMessages=getAuditMessages("testDeniedAudits");
  assertEquals(1,findAuditMessage(auditMessages,"operation: denied;.*" + String.format(AuditedSecurityOperation.CAN_CREATE_TABLE_AUDIT_TEMPLATE,NEW_TEST_TABLE_NAME)).size());
  assertEquals(1,findAuditMessage(auditMessages,"operation: denied;.*" + String.format(AuditedSecurityOperation.CAN_RENAME_TABLE_AUDIT_TEMPLATE,OLD_TEST_TABLE_NAME,NEW_TEST_TABLE_NAME)).size());
  assertEquals(1,findAuditMessage(auditMessages,"operation: denied;.*" + String.format(AuditedSecurityOperation.CAN_CLONE_TABLE_AUDIT_TEMPLATE,OLD_TEST_TABLE_NAME,NEW_TEST_TABLE_NAME)).size());
  assertEquals(1,findAuditMessage(auditMessages,"operation: denied;.*" + String.format(AuditedSecurityOperation.CAN_DELETE_TABLE_AUDIT_TEMPLATE,OLD_TEST_TABLE_NAME)).size());
  assertEquals(1,findAuditMessage(auditMessages,"operation: denied;.*" + String.format(AuditedSecurityOperation.CAN_ONLINE_OFFLINE_TABLE_AUDIT_TEMPLATE,"offlineTable",OLD_TEST_TABLE_NAME)).size());
  assertEquals(1,findAuditMessage(auditMessages,"operation: denied;.*" + "action: scan; targetTable: " + OLD_TEST_TABLE_NAME).size());
  assertEquals(1,findAuditMessage(auditMessages,"operation: denied;.*" + String.format(AuditedSecurityOperation.CAN_DELETE_RANGE_AUDIT_TEMPLATE,OLD_TEST_TABLE_NAME,"myRow","myRow~")).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.BulkImportMonitoringIT </h4><pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  getCluster().getClusterControl().start(ServerType.MONITOR);
  final Connector c=getConnector();
  final String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_MAJC_RATIO.getKey(),"1");
  SortedSet<Text> splits=new TreeSet<>();
  for (int i=1; i < 0xf; i++) {
    splits.add(new Text(Integer.toHexString(i)));
  }
  c.tableOperations().addSplits(tableName,splits);
  MasterMonitorInfo stats=getCluster().getMasterMonitorInfo();
  assertEquals(1,stats.tServerInfo.size());
  assertEquals(0,stats.bulkImports.size());
  assertEquals(0,stats.tServerInfo.get(0).bulkImports.size());
  log.info("Creating lots of bulk import files");
  final FileSystem fs=getCluster().getFileSystem();
  final Path basePath=getCluster().getTemporaryPath();
  CachedConfiguration.setInstance(fs.getConf());
  final Path base=new Path(basePath,"testBulkLoad" + tableName);
  fs.delete(base,true);
  fs.mkdirs(base);
  ExecutorService es=Executors.newFixedThreadPool(5);
  List<Future<Pair<String,String>>> futures=new ArrayList<>();
  for (int i=0; i < 10; i++) {
    final int which=i;
    futures.add(es.submit(new Callable<Pair<String,String>>(){
      @Override public Pair<String,String> call() throws Exception {
        Path bulkFailures=new Path(base,"failures" + which);
        Path files=new Path(base,"files" + which);
        fs.mkdirs(bulkFailures);
        fs.mkdirs(files);
        for (int i=0; i < 10; i++) {
          FileSKVWriter writer=FileOperations.getInstance().openWriter(files.toString() + "/bulk_" + i+ "."+ RFile.EXTENSION,fs,fs.getConf(),AccumuloConfiguration.getDefaultConfiguration());
          writer.startDefaultLocalityGroup();
          for (int j=0x100; j < 0xfff; j+=3) {
            writer.append(new Key(Integer.toHexString(j)),new Value(new byte[0]));
          }
          writer.close();
        }
        return new Pair<String,String>(files.toString(),bulkFailures.toString());
      }
    }
));
  }
  List<Pair<String,String>> dirs=new ArrayList<>();
  for (  Future<Pair<String,String>> f : futures) {
    dirs.add(f.get());
  }
  log.info("Importing");
  long now=System.currentTimeMillis();
  List<Future> errs=new ArrayList<>();
  for (  Pair<String,String> entry : dirs) {
    final String dir=entry.getFirst();
    final String err=entry.getSecond();
    errs.add(es.submit(new Callable(){
      @Override public Object call() throws Exception {
        c.tableOperations().importDirectory(tableName,dir,err,false);
        return null;
      }
    }
));
  }
  es.shutdown();
  while (!es.isTerminated() && stats.bulkImports.size() + stats.tServerInfo.get(0).bulkImports.size() == 0) {
    es.awaitTermination(10,TimeUnit.MILLISECONDS);
    stats=getCluster().getMasterMonitorInfo();
  }
  log.info(stats.bulkImports.toString());
  assertTrue(stats.bulkImports.size() > 0);
  for (  Future err : errs) {
    err.get();
  }
  es.awaitTermination(2,TimeUnit.MINUTES);
  assertTrue(es.isTerminated());
  log.info(String.format("Completed in %.2f seconds",(System.currentTimeMillis() - now) / 1000.));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.BulkImportSequentialRowsIT </h4><pre class="type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBulkImportFailure() throws Exception {
  String tableName=getUniqueNames(1)[0];
  TableOperations to=getConnector().tableOperations();
  to.create(tableName);
  FileSystem fs=getFileSystem();
  Path rootPath=new Path(fs.makeQualified(getUsableDir()),getClass().getSimpleName());
  log.info("Writing to {}",rootPath);
  if (fs.exists(rootPath)) {
    assertTrue(fs.delete(rootPath,true));
  }
  assertTrue(fs.mkdirs(rootPath));
  Path bulk=new Path(rootPath,"bulk");
  log.info("bulk: {}",bulk);
  assertTrue(fs.mkdirs(bulk));
  Path err=new Path(rootPath,"err");
  log.info("err: {}",err);
  assertTrue(fs.mkdirs(bulk));
  assertTrue(fs.mkdirs(err));
  Path rfile=new Path(bulk,"file.rf");
  log.info("Generating RFile {}",rfile.toUri().toString());
  GenerateSequentialRFile.main(new String[]{"-f",rfile.toUri().toString(),"-nr",Long.toString(NR),"-nv",Long.toString(NV)});
  assertTrue("Expected that " + rfile + " exists, but it does not",fs.exists(rfile));
  FsShell fsShell=new FsShell(fs.getConf());
  assertEquals("Failed to chmod " + rootPath,0,fsShell.run(new String[]{"-chmod","-R","777",rootPath.toString()}));
  to.addSplits(tableName,getSplits());
  to.importDirectory(tableName,bulk.toString(),err.toString(),false);
  assertEquals(NR * NV,Iterables.size(getConnector().createScanner(tableName,Authorizations.EMPTY)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.BulkImportVolumeIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBulkImportFailure() throws Exception {
  String tableName=getUniqueNames(1)[0];
  TableOperations to=getConnector().tableOperations();
  to.create(tableName);
  FileSystem fs=getFileSystem();
  Path rootPath=new Path(cluster.getTemporaryPath(),getClass().getName());
  Path bulk=new Path(rootPath,"bulk");
  log.info("bulk: {}",bulk);
  if (fs.exists(bulk)) {
    fs.delete(bulk,true);
  }
  assertTrue(fs.mkdirs(bulk));
  Path err=new Path(rootPath,"err");
  log.info("err: {}",err);
  if (fs.exists(err)) {
    fs.delete(err,true);
  }
  assertTrue(fs.mkdirs(err));
  Path bogus=new Path(bulk,"bogus.rf");
  fs.create(bogus).close();
  log.info("bogus: {}",bogus);
  assertTrue(fs.exists(bogus));
  log.info("Importing {} into {} with failures directory {}",bulk,tableName,err);
  to.importDirectory(tableName,bulk.toString(),err.toString(),false);
  assertEquals(1,fs.listStatus(err).length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.CleanWalIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("row");
  m.put("cf","cq","value");
  bw.addMutation(m);
  bw.close();
  getCluster().getClusterControl().stopAllServers(ServerType.TABLET_SERVER);
  getCluster().getClusterControl().startAllServers(ServerType.TABLET_SERVER);
  for (  String table : new String[]{MetadataTable.NAME,RootTable.NAME})   conn.tableOperations().flush(table,null,null,true);
  log.debug("Checking entries for " + tableName);
  assertEquals(1,count(tableName,conn));
  for (  String table : new String[]{MetadataTable.NAME,RootTable.NAME}) {
    log.debug("Checking logs for " + table);
    assertEquals("Found logs for " + table,0,countLogs(table,conn));
  }
  bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  m=new Mutation("row");
  m.putDelete("cf","cq");
  bw.addMutation(m);
  bw.close();
  assertEquals(0,count(tableName,conn));
  conn.tableOperations().flush(tableName,null,null,true);
  conn.tableOperations().flush(MetadataTable.NAME,null,null,true);
  conn.tableOperations().flush(RootTable.NAME,null,null,true);
  try {
    getCluster().getClusterControl().stopAllServers(ServerType.TABLET_SERVER);
    sleepUninterruptibly(3,TimeUnit.SECONDS);
  }
  finally {
    getCluster().getClusterControl().startAllServers(ServerType.TABLET_SERVER);
  }
  assertEquals(0,count(tableName,conn));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.CloneIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplit3() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw1=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw1.addMutation(createTablet("0","m",null,"/d1","/d1/file1"));
  bw1.addMutation(createTablet("0",null,"m","/d2","/d2/file2"));
  bw1.flush();
  BatchWriter bw2=conn.createBatchWriter(tableName,new BatchWriterConfig());
  MetadataTableUtil.initializeClone(tableName,"0","1",conn,bw2);
  bw1.addMutation(createTablet("0","f",null,"/d1","/d1/file3"));
  bw1.addMutation(createTablet("0","m","f","/d3","/d1/file1"));
  bw1.addMutation(createTablet("0","s","m","/d2","/d2/file2"));
  bw1.addMutation(createTablet("0",null,"s","/d4","/d2/file2"));
  bw1.flush();
  int rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(0,rc);
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  scanner.setRange(new KeyExtent(new Text("1"),null,null).toMetadataRange());
  HashSet<String> files=new HashSet<String>();
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnFamily().equals(DataFileColumnFamily.NAME)) {
      files.add(entry.getKey().getColumnQualifier().toString());
      count++;
    }
  }
  assertEquals(2,count);
  assertEquals(2,files.size());
  assertTrue(files.contains("../0/d1/file1"));
  assertTrue(files.contains("../0/d2/file2"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilesChange() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  KeyExtent ke=new KeyExtent(new Text("0"),null,null);
  Mutation mut=ke.getPrevRowUpdateMutation();
  TabletsSection.ServerColumnFamily.TIME_COLUMN.put(mut,new Value("M0".getBytes()));
  TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.put(mut,new Value("/default_tablet".getBytes()));
  mut.put(DataFileColumnFamily.NAME.toString(),"/default_tablet/0_0.rf",new DataFileValue(1,200).encodeAsString());
  BatchWriter bw1=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw1.addMutation(mut);
  bw1.flush();
  BatchWriter bw2=conn.createBatchWriter(tableName,new BatchWriterConfig());
  MetadataTableUtil.initializeClone(tableName,"0","1",conn,bw2);
  Mutation mut2=new Mutation(ke.getMetadataEntry());
  mut2.putDelete(DataFileColumnFamily.NAME.toString(),"/default_tablet/0_0.rf");
  mut2.put(DataFileColumnFamily.NAME.toString(),"/default_tablet/1_0.rf",new DataFileValue(2,300).encodeAsString());
  bw1.addMutation(mut2);
  bw1.flush();
  int rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(1,rc);
  rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(0,rc);
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  scanner.setRange(new KeyExtent(new Text("1"),null,null).toMetadataRange());
  HashSet<String> files=new HashSet<String>();
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnFamily().equals(DataFileColumnFamily.NAME))     files.add(entry.getKey().getColumnQualifier().toString());
  }
  assertEquals(1,files.size());
  assertTrue(files.contains("../0/default_tablet/1_0.rf"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClonedMarker() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw1=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw1.addMutation(createTablet("0","m",null,"/d1","/d1/file1"));
  bw1.addMutation(createTablet("0",null,"m","/d2","/d2/file2"));
  bw1.flush();
  BatchWriter bw2=conn.createBatchWriter(tableName,new BatchWriterConfig());
  MetadataTableUtil.initializeClone(tableName,"0","1",conn,bw2);
  bw1.addMutation(deleteTablet("0","m",null,"/d1","/d1/file1"));
  bw1.addMutation(deleteTablet("0",null,"m","/d2","/d2/file2"));
  bw1.flush();
  bw1.addMutation(createTablet("0","f",null,"/d1","/d1/file3"));
  bw1.addMutation(createTablet("0","m","f","/d3","/d1/file1"));
  bw1.addMutation(createTablet("0","s","m","/d2","/d2/file3"));
  bw1.addMutation(createTablet("0",null,"s","/d4","/d4/file3"));
  bw1.flush();
  int rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(1,rc);
  bw1.addMutation(deleteTablet("0","m","f","/d3","/d1/file1"));
  bw1.flush();
  bw1.addMutation(createTablet("0","m","f","/d3","/d1/file3"));
  bw1.flush();
  rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(0,rc);
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  scanner.setRange(new KeyExtent(new Text("1"),null,null).toMetadataRange());
  HashSet<String> files=new HashSet<String>();
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnFamily().equals(DataFileColumnFamily.NAME)) {
      files.add(entry.getKey().getColumnQualifier().toString());
      count++;
    }
  }
  assertEquals(3,count);
  assertEquals(3,files.size());
  assertTrue(files.contains("../0/d1/file1"));
  assertTrue(files.contains("../0/d2/file3"));
  assertTrue(files.contains("../0/d4/file3"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplit2() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw1=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw1.addMutation(createTablet("0",null,null,"/default_tablet","/default_tablet/0_0.rf"));
  bw1.flush();
  BatchWriter bw2=conn.createBatchWriter(tableName,new BatchWriterConfig());
  MetadataTableUtil.initializeClone(tableName,"0","1",conn,bw2);
  bw1.addMutation(createTablet("0","m",null,"/default_tablet","/default_tablet/1_0.rf"));
  Mutation mut3=createTablet("0",null,"m","/t-1","/default_tablet/1_0.rf");
  mut3.putDelete(DataFileColumnFamily.NAME.toString(),"/default_tablet/0_0.rf");
  bw1.addMutation(mut3);
  bw1.flush();
  int rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(1,rc);
  rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(0,rc);
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  scanner.setRange(new KeyExtent(new Text("1"),null,null).toMetadataRange());
  HashSet<String> files=new HashSet<String>();
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnFamily().equals(DataFileColumnFamily.NAME)) {
      files.add(entry.getKey().getColumnQualifier().toString());
      count++;
    }
  }
  assertEquals(1,files.size());
  assertEquals(2,count);
  assertTrue(files.contains("../0/default_tablet/1_0.rf"));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoFiles() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  KeyExtent ke=new KeyExtent(new Text("0"),null,null);
  Mutation mut=ke.getPrevRowUpdateMutation();
  TabletsSection.ServerColumnFamily.TIME_COLUMN.put(mut,new Value("M0".getBytes()));
  TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.put(mut,new Value("/default_tablet".getBytes()));
  BatchWriter bw1=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw1.addMutation(mut);
  bw1.close();
  BatchWriter bw2=conn.createBatchWriter(tableName,new BatchWriterConfig());
  MetadataTableUtil.initializeClone(tableName,"0","1",conn,bw2);
  int rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(0,rc);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplit1() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw1=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw1.addMutation(createTablet("0",null,null,"/default_tablet","/default_tablet/0_0.rf"));
  bw1.flush();
  BatchWriter bw2=conn.createBatchWriter(tableName,new BatchWriterConfig());
  MetadataTableUtil.initializeClone(tableName,"0","1",conn,bw2);
  bw1.addMutation(createTablet("0","m",null,"/default_tablet","/default_tablet/0_0.rf"));
  bw1.addMutation(createTablet("0",null,"m","/t-1","/default_tablet/0_0.rf"));
  bw1.flush();
  int rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(0,rc);
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  scanner.setRange(new KeyExtent(new Text("1"),null,null).toMetadataRange());
  HashSet<String> files=new HashSet<String>();
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnFamily().equals(DataFileColumnFamily.NAME)) {
      files.add(entry.getKey().getColumnQualifier().toString());
      count++;
    }
  }
  assertEquals(1,count);
  assertEquals(1,files.size());
  assertTrue(files.contains("../0/default_tablet/0_0.rf"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ConditionalWriterIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThreads() throws Exception {
  String table=getUniqueNames(1)[0];
  Connector conn=getConnector();
  conn.tableOperations().create(table);
  Random rand=new Random();
switch (rand.nextInt(3)) {
case 1:
    conn.tableOperations().addSplits(table,nss("4"));
  break;
case 2:
conn.tableOperations().addSplits(table,nss("3","5"));
break;
}
ConditionalWriter cw=conn.createConditionalWriter(table,new ConditionalWriterConfig());
ArrayList<ByteSequence> rows=new ArrayList<ByteSequence>();
for (int i=0; i < 1000; i++) {
rows.add(new ArrayByteSequence(FastFormat.toZeroPaddedString(abs(rand.nextLong()),16,16,new byte[0])));
}
ArrayList<ConditionalMutation> mutations=new ArrayList<ConditionalMutation>();
for (ByteSequence row : rows) mutations.add(new Stats(row).toMutation());
ArrayList<ByteSequence> rows2=new ArrayList<ByteSequence>();
Iterator<Result> results=cw.write(mutations.iterator());
while (results.hasNext()) {
Result result=results.next();
Assert.assertEquals(Status.ACCEPTED,result.getStatus());
rows2.add(new ArrayByteSequence(result.getMutation().getRow()));
}
Collections.sort(rows);
Collections.sort(rows2);
Assert.assertEquals(rows,rows2);
AtomicBoolean failed=new AtomicBoolean(false);
ExecutorService tp=Executors.newFixedThreadPool(5);
for (int i=0; i < 5; i++) {
tp.submit(new MutatorTask(table,conn,rows,cw,failed));
}
tp.shutdown();
while (!tp.isTerminated()) {
tp.awaitTermination(1,TimeUnit.MINUTES);
}
Assert.assertFalse("A MutatorTask failed with an exception",failed.get());
Scanner scanner=conn.createScanner(table,Authorizations.EMPTY);
RowIterator rowIter=new RowIterator(scanner);
while (rowIter.hasNext()) {
Iterator<Entry<Key,Value>> row=rowIter.next();
new Stats(row);
}
}

</code></pre>

<br>
<pre class="type-9 type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSecurity() throws Exception {
  Connector conn=getConnector();
  String user=null;
  ClientConfiguration clientConf=cluster.getClientConfig();
  final boolean saslEnabled=clientConf.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false);
  ClusterUser user1=getUser(0);
  user=user1.getPrincipal();
  if (saslEnabled) {
    conn.securityOperations().createLocalUser(user,null);
  }
 else {
    conn.securityOperations().createLocalUser(user,new PasswordToken(user1.getPassword()));
  }
  String[] tables=getUniqueNames(3);
  String table1=tables[0], table2=tables[1], table3=tables[2];
  conn.tableOperations().create(table1);
  conn.tableOperations().create(table2);
  conn.tableOperations().create(table3);
  conn.securityOperations().grantTablePermission(user,table1,TablePermission.READ);
  conn.securityOperations().grantTablePermission(user,table2,TablePermission.WRITE);
  conn.securityOperations().grantTablePermission(user,table3,TablePermission.READ);
  conn.securityOperations().grantTablePermission(user,table3,TablePermission.WRITE);
  Connector conn2=conn.getInstance().getConnector(user,user1.getToken());
  ConditionalMutation cm1=new ConditionalMutation("r1",new Condition("tx","seq"));
  cm1.put("tx","seq","1");
  cm1.put("data","x","a");
  ConditionalWriter cw1=conn2.createConditionalWriter(table1,new ConditionalWriterConfig());
  ConditionalWriter cw2=conn2.createConditionalWriter(table2,new ConditionalWriterConfig());
  ConditionalWriter cw3=conn2.createConditionalWriter(table3,new ConditionalWriterConfig());
  Assert.assertEquals(Status.ACCEPTED,cw3.write(cm1).getStatus());
  try {
    Status status=cw1.write(cm1).getStatus();
    Assert.fail("Expected exception writing conditional mutation to table the user doesn't have write access to, Got status: " + status);
  }
 catch (  AccumuloSecurityException ase) {
  }
  try {
    Status status=cw2.write(cm1).getStatus();
    Assert.fail("Expected exception writing conditional mutation to table the user doesn't have read access to. Got status: " + status);
  }
 catch (  AccumuloSecurityException ase) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadColVis() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  Authorizations auths=new Authorizations("A","B");
  conn.securityOperations().changeUserAuthorizations(getAdminPrincipal(),auths);
  Authorizations filteredAuths=new Authorizations("A");
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig().setAuthorizations(filteredAuths));
  ColumnVisibility cva=new ColumnVisibility("A");
  ColumnVisibility cvb=new ColumnVisibility("B");
  ColumnVisibility cvc=new ColumnVisibility("C");
  ConditionalMutation cm0=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvb));
  cm0.put("name","last",cva,"doe");
  cm0.put("name","first",cva,"john");
  cm0.put("tx","seq",cva,"1");
  Assert.assertEquals(Status.INVISIBLE_VISIBILITY,cw.write(cm0).getStatus());
  ConditionalMutation cm1=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvb).setValue("1"));
  cm1.put("name","last",cva,"doe");
  cm1.put("name","first",cva,"john");
  cm1.put("tx","seq",cva,"1");
  Assert.assertEquals(Status.INVISIBLE_VISIBILITY,cw.write(cm1).getStatus());
  ConditionalMutation cm2=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvc));
  cm2.put("name","last",cva,"doe");
  cm2.put("name","first",cva,"john");
  cm2.put("tx","seq",cva,"1");
  Assert.assertEquals(Status.INVISIBLE_VISIBILITY,cw.write(cm2).getStatus());
  ConditionalMutation cm3=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvc).setValue("1"));
  cm3.put("name","last",cva,"doe");
  cm3.put("name","first",cva,"john");
  cm3.put("tx","seq",cva,"1");
  Assert.assertEquals(Status.INVISIBLE_VISIBILITY,cw.write(cm3).getStatus());
  ConditionalMutation cm4=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvb),new Condition("tx","seq").setVisibility(cva));
  cm4.put("name","last",cva,"doe");
  cm4.put("name","first",cva,"john");
  cm4.put("tx","seq",cva,"1");
  Assert.assertEquals(Status.INVISIBLE_VISIBILITY,cw.write(cm4).getStatus());
  ConditionalMutation cm5=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvb).setValue("1"),new Condition("tx","seq").setVisibility(cva).setValue("1"));
  cm5.put("name","last",cva,"doe");
  cm5.put("name","first",cva,"john");
  cm5.put("tx","seq",cva,"1");
  Assert.assertEquals(Status.INVISIBLE_VISIBILITY,cw.write(cm5).getStatus());
  ConditionalMutation cm6=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvb).setValue("1"),new Condition("tx","seq").setVisibility(cva));
  cm6.put("name","last",cva,"doe");
  cm6.put("name","first",cva,"john");
  cm6.put("tx","seq",cva,"1");
  Assert.assertEquals(Status.INVISIBLE_VISIBILITY,cw.write(cm6).getStatus());
  ConditionalMutation cm7=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvb),new Condition("tx","seq").setVisibility(cva).setValue("1"));
  cm7.put("name","last",cva,"doe");
  cm7.put("name","first",cva,"john");
  cm7.put("tx","seq",cva,"1");
  Assert.assertEquals(Status.INVISIBLE_VISIBILITY,cw.write(cm7).getStatus());
  cw.close();
  Authorizations exceedingAuths=new Authorizations("A","B","D");
  ConditionalWriter cw2=conn.createConditionalWriter(tableName,new ConditionalWriterConfig().setAuthorizations(exceedingAuths));
  ConditionalMutation cm8=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvb),new Condition("tx","seq").setVisibility(cva).setValue("1"));
  cm8.put("name","last",cva,"doe");
  cm8.put("name","first",cva,"john");
  cm8.put("tx","seq",cva,"1");
  try {
    Status status=cw2.write(cm8).getStatus();
    Assert.fail("Writing mutation with Authorizations the user doesn't have should fail. Got status: " + status);
  }
 catch (  AccumuloSecurityException ase) {
  }
 finally {
    cw2.close();
  }
}

</code></pre>

<br>
<pre class="type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOffline() throws Exception {
  String table=getUniqueNames(1)[0];
  Connector conn=getConnector();
  conn.tableOperations().create(table);
  ConditionalWriter cw=conn.createConditionalWriter(table,new ConditionalWriterConfig());
  conn.tableOperations().offline(table,true);
  ConditionalMutation cm1=new ConditionalMutation("r1",new Condition("tx","seq"));
  cm1.put("tx","seq","1");
  cm1.put("data","x","a");
  Result result=cw.write(cm1);
  try {
    Status status=result.getStatus();
    Assert.fail("Expected exception writing conditional mutation to offline table. Got status: " + status);
  }
 catch (  AccumuloException ae) {
    Assert.assertEquals(TableOfflineException.class,ae.getCause().getClass());
  }
  cw.close();
  try {
    conn.createConditionalWriter(table,new ConditionalWriterConfig());
    Assert.fail("Expected exception creating conditional writer to offline table");
  }
 catch (  TableOfflineException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstraints() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  conn.tableOperations().addConstraint(tableName,AlphaNumKeyConstraint.class.getName());
  conn.tableOperations().clone(tableName,tableName + "_clone",true,new HashMap<String,String>(),new HashSet<String>());
  Scanner scanner=conn.createScanner(tableName + "_clone",new Authorizations());
  ConditionalWriter cw=conn.createConditionalWriter(tableName + "_clone",new ConditionalWriterConfig());
  ConditionalMutation cm0=new ConditionalMutation("99006+",new Condition("tx","seq"));
  cm0.put("tx","seq","1");
  Assert.assertEquals(Status.VIOLATED,cw.write(cm0).getStatus());
  Assert.assertFalse("Should find no results in the table is mutation result was violated",scanner.iterator().hasNext());
  ConditionalMutation cm1=new ConditionalMutation("99006",new Condition("tx","seq"));
  cm1.put("tx","seq","1");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm1).getStatus());
  Assert.assertTrue("Accepted result should be returned when reading table",scanner.iterator().hasNext());
  cw.close();
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFields() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  String user=null;
  ClientConfiguration clientConf=cluster.getClientConfig();
  final boolean saslEnabled=clientConf.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false);
  ClusterUser user1=getUser(0);
  user=user1.getPrincipal();
  if (saslEnabled) {
    conn.securityOperations().createLocalUser(user,null);
  }
 else {
    conn.securityOperations().createLocalUser(user,new PasswordToken(user1.getPassword()));
  }
  Authorizations auths=new Authorizations("A","B");
  conn.securityOperations().changeUserAuthorizations(user,auths);
  conn.securityOperations().grantSystemPermission(user,SystemPermission.CREATE_TABLE);
  conn=conn.getInstance().getConnector(user,user1.getToken());
  conn.tableOperations().create(tableName);
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig().setAuthorizations(auths));
  ColumnVisibility cva=new ColumnVisibility("A");
  ColumnVisibility cvb=new ColumnVisibility("B");
  ConditionalMutation cm0=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cva));
  cm0.put("name","last",cva,"doe");
  cm0.put("name","first",cva,"john");
  cm0.put("tx","seq",cva,"1");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm0).getStatus());
  Scanner scanner=conn.createScanner(tableName,auths);
  scanner.setRange(new Range("99006"));
  scanner.fetchColumn(new Text("tx"),new Text("seq"));
  Entry<Key,Value> entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("1",entry.getValue().toString());
  long ts=entry.getKey().getTimestamp();
  ConditionalMutation cm1=new ConditionalMutation("99006",new Condition("txA","seq").setVisibility(cva).setValue("1"));
  cm1.put("name","last",cva,"Doe");
  cm1.put("name","first",cva,"John");
  cm1.put("tx","seq",cva,"2");
  Assert.assertEquals(Status.REJECTED,cw.write(cm1).getStatus());
  ConditionalMutation cm2=new ConditionalMutation("99006",new Condition("tx","seqA").setVisibility(cva).setValue("1"));
  cm2.put("name","last",cva,"Doe");
  cm2.put("name","first",cva,"John");
  cm2.put("tx","seq",cva,"2");
  Assert.assertEquals(Status.REJECTED,cw.write(cm2).getStatus());
  ConditionalMutation cm3=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvb).setValue("1"));
  cm3.put("name","last",cva,"Doe");
  cm3.put("name","first",cva,"John");
  cm3.put("tx","seq",cva,"2");
  Assert.assertEquals(Status.REJECTED,cw.write(cm3).getStatus());
  ConditionalMutation cm4=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cva).setTimestamp(ts + 1).setValue("1"));
  cm4.put("name","last",cva,"Doe");
  cm4.put("name","first",cva,"John");
  cm4.put("tx","seq",cva,"2");
  Assert.assertEquals(Status.REJECTED,cw.write(cm4).getStatus());
  ConditionalMutation cm5=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cva).setTimestamp(ts - 1).setValue("1"));
  cm5.put("name","last",cva,"Doe");
  cm5.put("name","first",cva,"John");
  cm5.put("tx","seq",cva,"2");
  Assert.assertEquals(Status.REJECTED,cw.write(cm5).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("1",entry.getValue().toString());
  ConditionalMutation cm6=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cva).setTimestamp(ts).setValue("1"));
  cm6.put("name","last",cva,"Doe");
  cm6.put("name","first",cva,"John");
  cm6.put("tx","seq",cva,"2");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm6).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("2",entry.getValue().toString());
}

</code></pre>

<br>
<pre class="type-9 type-13 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBigBatch() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  conn.tableOperations().addSplits(tableName,nss("2","4","6"));
  sleepUninterruptibly(2,TimeUnit.SECONDS);
  int num=100;
  ArrayList<byte[]> rows=new ArrayList<byte[]>(num);
  ArrayList<ConditionalMutation> cml=new ArrayList<ConditionalMutation>(num);
  Random r=new Random();
  byte[] e=new byte[0];
  for (int i=0; i < num; i++) {
    rows.add(FastFormat.toZeroPaddedString(abs(r.nextLong()),16,16,e));
  }
  for (int i=0; i < num; i++) {
    ConditionalMutation cm=new ConditionalMutation(rows.get(i),new Condition("meta","seq"));
    cm.put("meta","seq","1");
    cm.put("meta","tx",UUID.randomUUID().toString());
    cml.add(cm);
  }
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig());
  Iterator<Result> results=cw.write(cml.iterator());
  int count=0;
  while (results.hasNext()) {
    Result result=results.next();
    Assert.assertEquals(Status.ACCEPTED,result.getStatus());
    count++;
  }
  Assert.assertEquals("Did not receive the expected number of results",num,count);
  ArrayList<ConditionalMutation> cml2=new ArrayList<ConditionalMutation>(num);
  for (int i=0; i < num; i++) {
    ConditionalMutation cm=new ConditionalMutation(rows.get(i),new Condition("meta","seq").setValue("1"));
    cm.put("meta","seq","2");
    cm.put("meta","tx",UUID.randomUUID().toString());
    cml2.add(cm);
  }
  count=0;
  results=cw.write(cml2.iterator());
  while (results.hasNext()) {
    Result result=results.next();
    Assert.assertEquals(Status.ACCEPTED,result.getStatus());
    count++;
  }
  Assert.assertEquals("Did not receive the expected number of results",num,count);
  cw.close();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTableAndConditionIterators() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  IteratorSetting aiConfig1=new IteratorSetting(30,"AI1",AddingIterator.class);
  aiConfig1.addOption("amount","2");
  IteratorSetting aiConfig2=new IteratorSetting(35,"MI1",MultiplyingIterator.class);
  aiConfig2.addOption("amount","3");
  IteratorSetting aiConfig3=new IteratorSetting(40,"AI2",AddingIterator.class);
  aiConfig3.addOption("amount","5");
  conn.tableOperations().create(tableName);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("ACCUMULO-1000");
  m.put("count","comments","6");
  bw.addMutation(m);
  m=new Mutation("ACCUMULO-1001");
  m.put("count","comments","7");
  bw.addMutation(m);
  m=new Mutation("ACCUMULO-1002");
  m.put("count","comments","8");
  bw.addMutation(m);
  bw.close();
  conn.tableOperations().attachIterator(tableName,aiConfig1,EnumSet.of(IteratorScope.scan));
  conn.tableOperations().offline(tableName,true);
  conn.tableOperations().online(tableName,true);
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig());
  ConditionalMutation cm6=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setValue("8"));
  cm6.put("count","comments","7");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm6).getStatus());
  Scanner scanner=conn.createScanner(tableName,new Authorizations());
  scanner.setRange(new Range("ACCUMULO-1000"));
  scanner.fetchColumn(new Text("count"),new Text("comments"));
  Entry<Key,Value> entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("9",entry.getValue().toString());
  ConditionalMutation cm7=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setIterators(aiConfig2).setValue("27"));
  cm7.put("count","comments","8");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm7).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("10",entry.getValue().toString());
  ConditionalMutation cm8=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setIterators(aiConfig2,aiConfig3).setValue("35"));
  cm8.put("count","comments","9");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm8).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("11",entry.getValue().toString());
  ConditionalMutation cm3=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setIterators(aiConfig2).setValue("33"));
  cm3.put("count","comments","3");
  ConditionalMutation cm4=new ConditionalMutation("ACCUMULO-1001",new Condition("count","comments").setIterators(aiConfig3).setValue("14"));
  cm4.put("count","comments","3");
  ConditionalMutation cm5=new ConditionalMutation("ACCUMULO-1002",new Condition("count","comments").setIterators(aiConfig3).setValue("10"));
  cm5.put("count","comments","3");
  Iterator<Result> results=cw.write(Arrays.asList(cm3,cm4,cm5).iterator());
  Map<String,Status> actual=new HashMap<String,Status>();
  while (results.hasNext()) {
    Result result=results.next();
    String k=new String(result.getMutation().getRow());
    Assert.assertFalse("Did not expect to see multiple resultus for the row: " + k,actual.containsKey(k));
    actual.put(k,result.getStatus());
  }
  cw.close();
  Map<String,Status> expected=new HashMap<String,Status>();
  expected.put("ACCUMULO-1000",Status.ACCEPTED);
  expected.put("ACCUMULO-1001",Status.ACCEPTED);
  expected.put("ACCUMULO-1002",Status.REJECTED);
  Assert.assertEquals(expected,actual);
  cw.close();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-5 type-3 type-21 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTrace() throws Exception {
  Assume.assumeTrue(getClusterType() == ClusterType.MINI);
  Process tracer=null;
  Connector conn=getConnector();
  AccumuloCluster cluster=getCluster();
  MiniAccumuloClusterImpl mac=(MiniAccumuloClusterImpl)cluster;
  if (!conn.tableOperations().exists("trace")) {
    tracer=mac.exec(TraceServer.class);
    while (!conn.tableOperations().exists("trace")) {
      sleepUninterruptibly(1,TimeUnit.SECONDS);
    }
  }
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  DistributedTrace.enable("localhost","testTrace",mac.getClientConfig());
  sleepUninterruptibly(1,TimeUnit.SECONDS);
  Span root=Trace.on("traceTest");
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig());
  ConditionalMutation cm0=new ConditionalMutation("99006",new Condition("tx","seq"));
  cm0.put("name","last","doe");
  cm0.put("name","first","john");
  cm0.put("tx","seq","1");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm0).getStatus());
  root.stop();
  final Scanner scanner=conn.createScanner("trace",Authorizations.EMPTY);
  scanner.setRange(new Range(new Text(Long.toHexString(root.traceId()))));
  loop:   while (true) {
    final StringBuilder finalBuffer=new StringBuilder();
    int traceCount=TraceDump.printTrace(scanner,new Printer(){
      @Override public void print(      final String line){
        try {
          finalBuffer.append(line).append("\n");
        }
 catch (        Exception ex) {
          throw new RuntimeException(ex);
        }
      }
    }
);
    String traceOutput=finalBuffer.toString();
    log.info("Trace output:" + traceOutput);
    if (traceCount > 0) {
      int lastPos=0;
      for (      String part : "traceTest, startScan,startConditionalUpdate,conditionalUpdate,Check conditions,apply conditional mutations".split(",")) {
        log.info("Looking in trace output for '" + part + "'");
        int pos=traceOutput.indexOf(part);
        if (-1 == pos) {
          log.info("Trace output doesn't contain '" + part + "'");
          Thread.sleep(1000);
          break loop;
        }
        assertTrue("Did not find '" + part + "' in output",pos > 0);
        assertTrue("'" + part + "' occurred earlier than the previous element unexpectedly",pos > lastPos);
        lastPos=pos;
      }
      break;
    }
 else {
      log.info("Ignoring trace output as traceCount not greater than zero: " + traceCount);
      Thread.sleep(1000);
    }
  }
  if (tracer != null) {
    tracer.destroy();
  }
}

</code></pre>

<br>
<pre class="type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteTable() throws Exception {
  String table=getUniqueNames(1)[0];
  Connector conn=getConnector();
  try {
    conn.createConditionalWriter(table,new ConditionalWriterConfig());
    Assert.fail("Creating conditional writer for table that doesn't exist should fail");
  }
 catch (  TableNotFoundException e) {
  }
  conn.tableOperations().create(table);
  ConditionalWriter cw=conn.createConditionalWriter(table,new ConditionalWriterConfig());
  conn.tableOperations().delete(table);
  ConditionalMutation cm1=new ConditionalMutation("r1",new Condition("tx","seq"));
  cm1.put("tx","seq","1");
  cm1.put("data","x","a");
  Result result=cw.write(cm1);
  try {
    Status status=result.getStatus();
    Assert.fail("Expected exception writing conditional mutation to deleted table. Got status: " + status);
  }
 catch (  AccumuloException ae) {
    Assert.assertEquals(TableDeletedException.class,ae.getCause().getClass());
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBatchErrors() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  conn.tableOperations().addConstraint(tableName,AlphaNumKeyConstraint.class.getName());
  conn.tableOperations().clone(tableName,tableName + "_clone",true,new HashMap<String,String>(),new HashSet<String>());
  conn.securityOperations().changeUserAuthorizations(getAdminPrincipal(),new Authorizations("A","B"));
  ColumnVisibility cvaob=new ColumnVisibility("A|B");
  ColumnVisibility cvaab=new ColumnVisibility("A&B");
switch ((new Random()).nextInt(3)) {
case 1:
    conn.tableOperations().addSplits(tableName,nss("6"));
  break;
case 2:
conn.tableOperations().addSplits(tableName,nss("2","95"));
break;
}
ArrayList<ConditionalMutation> mutations=new ArrayList<ConditionalMutation>();
ConditionalMutation cm0=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvaob));
cm0.put("name+","last",cvaob,"doe");
cm0.put("name","first",cvaob,"john");
cm0.put("tx","seq",cvaob,"1");
mutations.add(cm0);
ConditionalMutation cm1=new ConditionalMutation("59056",new Condition("tx","seq").setVisibility(cvaab));
cm1.put("name","last",cvaab,"doe");
cm1.put("name","first",cvaab,"jane");
cm1.put("tx","seq",cvaab,"1");
mutations.add(cm1);
ConditionalMutation cm2=new ConditionalMutation("19059",new Condition("tx","seq").setVisibility(cvaob));
cm2.put("name","last",cvaob,"doe");
cm2.put("name","first",cvaob,"jack");
cm2.put("tx","seq",cvaob,"1");
mutations.add(cm2);
ConditionalMutation cm3=new ConditionalMutation("90909",new Condition("tx","seq").setVisibility(cvaob).setValue("1"));
cm3.put("name","last",cvaob,"doe");
cm3.put("name","first",cvaob,"john");
cm3.put("tx","seq",cvaob,"2");
mutations.add(cm3);
ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig().setAuthorizations(new Authorizations("A")));
Iterator<Result> results=cw.write(mutations.iterator());
HashSet<String> rows=new HashSet<String>();
while (results.hasNext()) {
Result result=results.next();
String row=new String(result.getMutation().getRow());
if (row.equals("19059")) {
Assert.assertEquals(Status.ACCEPTED,result.getStatus());
}
 else if (row.equals("59056")) {
Assert.assertEquals(Status.INVISIBLE_VISIBILITY,result.getStatus());
}
 else if (row.equals("99006")) {
Assert.assertEquals(Status.VIOLATED,result.getStatus());
}
 else if (row.equals("90909")) {
Assert.assertEquals(Status.REJECTED,result.getStatus());
}
rows.add(row);
}
Assert.assertEquals(4,rows.size());
Scanner scanner=conn.createScanner(tableName,new Authorizations("A"));
scanner.fetchColumn(new Text("tx"),new Text("seq"));
Entry<Key,Value> entry=Iterables.getOnlyElement(scanner);
Assert.assertEquals("1",entry.getValue().toString());
cw.close();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBatch() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  conn.securityOperations().changeUserAuthorizations(getAdminPrincipal(),new Authorizations("A","B"));
  ColumnVisibility cvab=new ColumnVisibility("A|B");
  ArrayList<ConditionalMutation> mutations=new ArrayList<ConditionalMutation>();
  ConditionalMutation cm0=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvab));
  cm0.put("name","last",cvab,"doe");
  cm0.put("name","first",cvab,"john");
  cm0.put("tx","seq",cvab,"1");
  mutations.add(cm0);
  ConditionalMutation cm1=new ConditionalMutation("59056",new Condition("tx","seq").setVisibility(cvab));
  cm1.put("name","last",cvab,"doe");
  cm1.put("name","first",cvab,"jane");
  cm1.put("tx","seq",cvab,"1");
  mutations.add(cm1);
  ConditionalMutation cm2=new ConditionalMutation("19059",new Condition("tx","seq").setVisibility(cvab));
  cm2.put("name","last",cvab,"doe");
  cm2.put("name","first",cvab,"jack");
  cm2.put("tx","seq",cvab,"1");
  mutations.add(cm2);
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig().setAuthorizations(new Authorizations("A")));
  Iterator<Result> results=cw.write(mutations.iterator());
  int count=0;
  while (results.hasNext()) {
    Result result=results.next();
    Assert.assertEquals(Status.ACCEPTED,result.getStatus());
    count++;
  }
  Assert.assertEquals(3,count);
  Scanner scanner=conn.createScanner(tableName,new Authorizations("A"));
  scanner.fetchColumn(new Text("tx"),new Text("seq"));
  for (  String row : new String[]{"99006","59056","19059"}) {
    scanner.setRange(new Range(row));
    Entry<Key,Value> entry=Iterables.getOnlyElement(scanner);
    Assert.assertEquals("1",entry.getValue().toString());
  }
  TreeSet<Text> splits=new TreeSet<Text>();
  splits.add(new Text("7"));
  splits.add(new Text("3"));
  conn.tableOperations().addSplits(tableName,splits);
  mutations.clear();
  ConditionalMutation cm3=new ConditionalMutation("99006",new Condition("tx","seq").setVisibility(cvab).setValue("1"));
  cm3.put("name","last",cvab,"Doe");
  cm3.put("tx","seq",cvab,"2");
  mutations.add(cm3);
  ConditionalMutation cm4=new ConditionalMutation("59056",new Condition("tx","seq").setVisibility(cvab));
  cm4.put("name","last",cvab,"Doe");
  cm4.put("tx","seq",cvab,"1");
  mutations.add(cm4);
  ConditionalMutation cm5=new ConditionalMutation("19059",new Condition("tx","seq").setVisibility(cvab).setValue("2"));
  cm5.put("name","last",cvab,"Doe");
  cm5.put("tx","seq",cvab,"3");
  mutations.add(cm5);
  results=cw.write(mutations.iterator());
  int accepted=0;
  int rejected=0;
  while (results.hasNext()) {
    Result result=results.next();
    if (new String(result.getMutation().getRow()).equals("99006")) {
      Assert.assertEquals(Status.ACCEPTED,result.getStatus());
      accepted++;
    }
 else {
      Assert.assertEquals(Status.REJECTED,result.getStatus());
      rejected++;
    }
  }
  Assert.assertEquals("Expected only one accepted conditional mutation",1,accepted);
  Assert.assertEquals("Expected two rejected conditional mutations",2,rejected);
  for (  String row : new String[]{"59056","19059"}) {
    scanner.setRange(new Range(row));
    Entry<Key,Value> entry=Iterables.getOnlyElement(scanner);
    Assert.assertEquals("1",entry.getValue().toString());
  }
  scanner.setRange(new Range("99006"));
  Entry<Key,Value> entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("2",entry.getValue().toString());
  scanner.clearColumns();
  scanner.fetchColumn(new Text("name"),new Text("last"));
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("Doe",entry.getValue().toString());
  cw.close();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasic() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig());
  ConditionalMutation cm0=new ConditionalMutation("99006",new Condition("tx","seq"));
  cm0.put("name","last","doe");
  cm0.put("name","first","john");
  cm0.put("tx","seq","1");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm0).getStatus());
  Assert.assertEquals(Status.REJECTED,cw.write(cm0).getStatus());
  ConditionalMutation cm1=new ConditionalMutation("99006",new Condition("tx","seq").setValue("1"));
  cm1.put("name","last","Doe");
  cm1.put("tx","seq","2");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm1).getStatus());
  ConditionalMutation cm2=new ConditionalMutation("99006",new Condition("tx","seq").setValue("1"));
  cm2.put("name","last","DOE");
  cm2.put("tx","seq","2");
  Assert.assertEquals(Status.REJECTED,cw.write(cm2).getStatus());
  ConditionalMutation cm3=new ConditionalMutation("99006",new Condition("txtypo","seq").setValue("1"));
  cm3.put("name","last","deo");
  cm3.put("tx","seq","2");
  Assert.assertEquals(Status.REJECTED,cw.write(cm3).getStatus());
  ConditionalMutation cm4=new ConditionalMutation("99006",new Condition("tx","seq").setValue("2"),new Condition("name","last").setValue("doe"));
  cm4.put("name","last","deo");
  cm4.put("tx","seq","3");
  Assert.assertEquals(Status.REJECTED,cw.write(cm4).getStatus());
  ConditionalMutation cm5=new ConditionalMutation("99006",new Condition("tx","seq").setValue("1"),new Condition("name","last").setValue("Doe"));
  cm5.put("name","last","deo");
  cm5.put("tx","seq","3");
  Assert.assertEquals(Status.REJECTED,cw.write(cm5).getStatus());
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  scanner.fetchColumn(new Text("name"),new Text("last"));
  scanner.setRange(new Range("99006"));
  Entry<Key,Value> entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("Doe",entry.getValue().toString());
  ConditionalMutation cm6=new ConditionalMutation("99006",new Condition("tx","seq").setValue("2"),new Condition("name","last").setValue("Doe"));
  cm6.put("name","last","DOE");
  cm6.put("tx","seq","3");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm6).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("DOE",entry.getValue().toString());
  ConditionalMutation cm7=new ConditionalMutation("99006",new Condition("tx","seq").setValue("3"));
  cm7.putDelete("name","last");
  cm7.putDelete("name","first");
  cm7.putDelete("tx","seq");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm7).getStatus());
  Assert.assertFalse("Did not expect to find any results",scanner.iterator().hasNext());
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm0).getStatus());
  Assert.assertEquals(Status.REJECTED,cw.write(cm0).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("doe",entry.getValue().toString());
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterators() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName,new NewTableConfiguration().withoutDefaultIterators());
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("ACCUMULO-1000");
  m.put("count","comments","1");
  bw.addMutation(m);
  bw.addMutation(m);
  bw.addMutation(m);
  m=new Mutation("ACCUMULO-1001");
  m.put("count2","comments","1");
  bw.addMutation(m);
  bw.addMutation(m);
  m=new Mutation("ACCUMULO-1002");
  m.put("count2","comments","1");
  bw.addMutation(m);
  bw.addMutation(m);
  bw.close();
  IteratorSetting iterConfig=new IteratorSetting(10,SummingCombiner.class);
  SummingCombiner.setEncodingType(iterConfig,Type.STRING);
  SummingCombiner.setColumns(iterConfig,Collections.singletonList(new IteratorSetting.Column("count")));
  IteratorSetting iterConfig2=new IteratorSetting(10,SummingCombiner.class);
  SummingCombiner.setEncodingType(iterConfig2,Type.STRING);
  SummingCombiner.setColumns(iterConfig2,Collections.singletonList(new IteratorSetting.Column("count2","comments")));
  IteratorSetting iterConfig3=new IteratorSetting(5,VersioningIterator.class);
  VersioningIterator.setMaxVersions(iterConfig3,1);
  Scanner scanner=conn.createScanner(tableName,new Authorizations());
  scanner.addScanIterator(iterConfig);
  scanner.setRange(new Range("ACCUMULO-1000"));
  scanner.fetchColumn(new Text("count"),new Text("comments"));
  Entry<Key,Value> entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("3",entry.getValue().toString());
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig());
  ConditionalMutation cm0=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setValue("3"));
  cm0.put("count","comments","1");
  Assert.assertEquals(Status.REJECTED,cw.write(cm0).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("3",entry.getValue().toString());
  ConditionalMutation cm1=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setIterators(iterConfig).setValue("3"));
  cm1.put("count","comments","1");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm1).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("4",entry.getValue().toString());
  ConditionalMutation cm2=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setValue("4"));
  cm2.put("count","comments","1");
  Assert.assertEquals(Status.REJECTED,cw.write(cm1).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("4",entry.getValue().toString());
  ConditionalMutation cm3=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setIterators(iterConfig).setValue("4"));
  cm3.put("count","comments","1");
  ConditionalMutation cm4=new ConditionalMutation("ACCUMULO-1001",new Condition("count2","comments").setIterators(iterConfig2).setValue("2"));
  cm4.put("count2","comments","1");
  ConditionalMutation cm5=new ConditionalMutation("ACCUMULO-1002",new Condition("count2","comments").setIterators(iterConfig2,iterConfig3).setValue("2"));
  cm5.put("count2","comments","1");
  Iterator<Result> results=cw.write(Arrays.asList(cm3,cm4,cm5).iterator());
  Map<String,Status> actual=new HashMap<String,Status>();
  while (results.hasNext()) {
    Result result=results.next();
    String k=new String(result.getMutation().getRow());
    Assert.assertFalse("Did not expect to see multiple resultus for the row: " + k,actual.containsKey(k));
    actual.put(k,result.getStatus());
  }
  Map<String,Status> expected=new HashMap<String,Status>();
  expected.put("ACCUMULO-1000",Status.ACCEPTED);
  expected.put("ACCUMULO-1001",Status.ACCEPTED);
  expected.put("ACCUMULO-1002",Status.REJECTED);
  Assert.assertEquals(expected,actual);
  cw.close();
}

</code></pre>

<br>
<pre class="type-9 type-11 type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimeout() throws Exception {
  Connector conn=getConnector();
  String table=getUniqueNames(1)[0];
  conn.tableOperations().create(table);
  ConditionalWriter cw=conn.createConditionalWriter(table,new ConditionalWriterConfig().setTimeout(3,TimeUnit.SECONDS));
  ConditionalMutation cm1=new ConditionalMutation("r1",new Condition("tx","seq"));
  cm1.put("tx","seq","1");
  cm1.put("data","x","a");
  Assert.assertEquals(cw.write(cm1).getStatus(),Status.ACCEPTED);
  IteratorSetting is=new IteratorSetting(5,SlowIterator.class);
  SlowIterator.setSeekSleepTime(is,5000);
  ConditionalMutation cm2=new ConditionalMutation("r1",new Condition("tx","seq").setValue("1").setIterators(is));
  cm2.put("tx","seq","2");
  cm2.put("data","x","b");
  Assert.assertEquals(cw.write(cm2).getStatus(),Status.UNKNOWN);
  Scanner scanner=conn.createScanner(table,Authorizations.EMPTY);
  for (  Entry<Key,Value> entry : scanner) {
    String cf=entry.getKey().getColumnFamilyData().toString();
    String cq=entry.getKey().getColumnQualifierData().toString();
    String val=entry.getValue().toString();
    if (cf.equals("tx") && cq.equals("seq"))     Assert.assertEquals("Unexpected value in tx:seq","1",val);
 else     if (cf.equals("data") && cq.equals("x"))     Assert.assertEquals("Unexpected value in data:x","a",val);
 else     Assert.fail("Saw unexpected column family and qualifier: " + entry);
  }
  ConditionalMutation cm3=new ConditionalMutation("r1",new Condition("tx","seq").setValue("1"));
  cm3.put("tx","seq","2");
  cm3.put("data","x","b");
  Assert.assertEquals(cw.write(cm3).getStatus(),Status.ACCEPTED);
  cw.close();
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSameRow() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig());
  ConditionalMutation cm1=new ConditionalMutation("r1",new Condition("tx","seq"));
  cm1.put("tx","seq","1");
  cm1.put("data","x","a");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm1).getStatus());
  ConditionalMutation cm2=new ConditionalMutation("r1",new Condition("tx","seq").setValue("1"));
  cm2.put("tx","seq","2");
  cm2.put("data","x","b");
  ConditionalMutation cm3=new ConditionalMutation("r1",new Condition("tx","seq").setValue("1"));
  cm3.put("tx","seq","2");
  cm3.put("data","x","c");
  ConditionalMutation cm4=new ConditionalMutation("r1",new Condition("tx","seq").setValue("1"));
  cm4.put("tx","seq","2");
  cm4.put("data","x","d");
  Iterator<Result> results=cw.write(Arrays.asList(cm2,cm3,cm4).iterator());
  int accepted=0;
  int rejected=0;
  int total=0;
  while (results.hasNext()) {
    Status status=results.next().getStatus();
    if (status == Status.ACCEPTED)     accepted++;
    if (status == Status.REJECTED)     rejected++;
    total++;
  }
  Assert.assertEquals("Expected one accepted result",1,accepted);
  Assert.assertEquals("Expected two rejected results",2,rejected);
  Assert.assertEquals("Expected three total results",3,total);
  cw.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ConfigurableMajorCompactionIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  conn.tableOperations().setProperty(tableName,Property.TABLE_COMPACTION_STRATEGY.getKey(),TestCompactionStrategy.class.getName());
  writeFile(conn,tableName);
  writeFile(conn,tableName);
  writeFile(conn,tableName);
  writeFile(conn,tableName);
  UtilWaitThread.sleep(2 * 1000);
  assertEquals(4,countFiles(conn));
  writeFile(conn,tableName);
  int count=countFiles(conn);
  assertTrue(count == 1 || count == 5);
  while (count != 1) {
    UtilWaitThread.sleep(250);
    count=countFiles(conn);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.CreateTableWithNewTableConfigIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void tableNameLimitVersionAndTimeType() throws Exception {
  log.info("Starting tableNameLimitVersionAndTimeType");
  Connector connector=getConnector();
  String tableName=getUniqueNames(2)[0];
  boolean limitVersion=false;
  TimeType tt=TimeType.LOGICAL;
  connector.tableOperations().create(tableName,new NewTableConfiguration().withoutDefaultIterators().setTimeType(tt));
  String tableNameOrig="originalWithLimitVersionAndTimeType";
  connector.tableOperations().create(tableNameOrig,limitVersion,tt);
  int countNew=numProperties(connector,tableName);
  int countOrig=compareProperties(connector,tableNameOrig,tableName,null);
  Assert.assertEquals("Extra properties using the new create method",countOrig,countNew);
  Assert.assertTrue("Wrong TimeType",checkTimeType(connector,tableName,tt));
}

</code></pre>

<br>
<pre class="type-9 type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void addCustomPropAndChangeExisting() throws Exception {
  log.info("Starting addCustomPropAndChangeExisting");
  Map<String,String> properties=new HashMap<String,String>();
  String propertyName=Property.TABLE_SPLIT_THRESHOLD.getKey();
  String volume="10K";
  properties.put(propertyName,volume);
  String propertyName2="table.custom.testProp";
  String volume2="Test property";
  properties.put(propertyName2,volume2);
  Connector connector=getConnector();
  String tableName=getUniqueNames(2)[0];
  connector.tableOperations().create(tableName,new NewTableConfiguration().setProperties(properties));
  String tableNameOrig="originalWithTableName";
  connector.tableOperations().create(tableNameOrig,true);
  int countNew=numProperties(connector,tableName);
  int countOrig=compareProperties(connector,tableNameOrig,tableName,propertyName);
  for (  Entry<String,String> entry : connector.tableOperations().getProperties(tableName)) {
    if (entry.getKey().equals(Property.TABLE_SPLIT_THRESHOLD.getKey()))     Assert.assertTrue("TABLE_SPLIT_THRESHOLD has been changed",entry.getValue().equals("10K"));
    if (entry.getKey().equals("table.custom.testProp"))     Assert.assertTrue("table.custom.testProp has been changed",entry.getValue().equals("Test property"));
  }
  Assert.assertEquals("Extra properties using the new create method",countOrig + 1,countNew);
  Assert.assertTrue("Wrong TimeType",checkTimeType(connector,tableName,TimeType.MILLIS));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void tableNameAndLimitVersion() throws Exception {
  log.info("Starting tableNameAndLimitVersion");
  Connector connector=getConnector();
  String tableName=getUniqueNames(2)[0];
  boolean limitVersion=false;
  connector.tableOperations().create(tableName,new NewTableConfiguration().withoutDefaultIterators());
  String tableNameOrig="originalWithLimitVersion";
  connector.tableOperations().create(tableNameOrig,limitVersion);
  int countNew=numProperties(connector,tableName);
  int countOrig=compareProperties(connector,tableNameOrig,tableName,null);
  Assert.assertEquals("Extra properties using the new create method",countOrig,countNew);
  Assert.assertTrue("Wrong TimeType",checkTimeType(connector,tableName,TimeType.MILLIS));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void tableNameOnly() throws Exception {
  log.info("Starting tableNameOnly");
  Connector connector=getConnector();
  String tableName=getUniqueNames(2)[0];
  connector.tableOperations().create(tableName,new NewTableConfiguration());
  String tableNameOrig="original";
  connector.tableOperations().create(tableNameOrig,true);
  int countNew=numProperties(connector,tableName);
  int countOrig=compareProperties(connector,tableNameOrig,tableName,null);
  Assert.assertEquals("Extra properties using the new create method",countOrig,countNew);
  Assert.assertTrue("Wrong TimeType",checkTimeType(connector,tableName,TimeType.MILLIS));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.DetectDeadTabletServersIT </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  log.info("verifying that everything is up");
  Iterators.size(c.createScanner(MetadataTable.NAME,Authorizations.EMPTY).iterator());
  MasterMonitorInfo stats=getStats(c);
  assertEquals(2,stats.tServerInfo.size());
  assertEquals(0,stats.badTServers.size());
  assertEquals(0,stats.deadTabletServers.size());
  log.info("Killing a tablet server");
  getCluster().killProcess(TABLET_SERVER,getCluster().getProcesses().get(TABLET_SERVER).iterator().next());
  while (true) {
    stats=getStats(c);
    if (2 != stats.tServerInfo.size()) {
      break;
    }
    UtilWaitThread.sleep(500);
  }
  assertEquals(1,stats.tServerInfo.size());
  assertEquals(1,stats.badTServers.size() + stats.deadTabletServers.size());
  while (true) {
    stats=getStats(c);
    if (0 != stats.deadTabletServers.size()) {
      break;
    }
    UtilWaitThread.sleep(500);
  }
  assertEquals(1,stats.tServerInfo.size());
  assertEquals(0,stats.badTServers.size());
  assertEquals(1,stats.deadTabletServers.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.DumpConfigIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  File target=new File(System.getProperty("user.dir"),"target");
  assertTrue(target.exists() || target.mkdirs());
  TemporaryFolder folder=new TemporaryFolder(target);
  folder.create();
  File siteFileBackup=new File(folder.getRoot(),"accumulo-site.xml.bak");
  assertFalse(siteFileBackup.exists());
  assertEquals(0,exec(Admin.class,new String[]{"dumpConfig","-a","-d",folder.getRoot().getPath()}).waitFor());
  assertTrue(siteFileBackup.exists());
  String site=FunctionalTestUtils.readAll(new FileInputStream(siteFileBackup));
  assertTrue(site.contains(Property.TABLE_FILE_BLOCK_SIZE.getKey()));
  assertTrue(site.contains("1234567"));
  String meta=FunctionalTestUtils.readAll(new FileInputStream(new File(folder.getRoot(),MetadataTable.NAME + ".cfg")));
  assertTrue(meta.contains(Property.TABLE_FILE_REPLICATION.getKey()));
  String systemPerm=FunctionalTestUtils.readAll(new FileInputStream(new File(folder.getRoot(),"root_user.cfg")));
  assertTrue(systemPerm.contains("grant System.ALTER_USER -s -u root"));
  assertTrue(systemPerm.contains("grant Table.READ -t " + MetadataTable.NAME + " -u root"));
  assertFalse(systemPerm.contains("grant Table.DROP -t " + MetadataTable.NAME + " -u root"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ExistingMacIT </h4><pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExistingInstance() throws Exception {
  Connector conn=getCluster().getConnector("root",new PasswordToken(ROOT_PASSWORD));
  conn.tableOperations().create("table1");
  BatchWriter bw=conn.createBatchWriter("table1",new BatchWriterConfig());
  Mutation m1=new Mutation("00081");
  m1.put("math","sqroot","9");
  m1.put("math","sq","6560");
  bw.addMutation(m1);
  bw.close();
  conn.tableOperations().flush("table1",null,null,true);
  conn.tableOperations().flush(MetadataTable.NAME,null,null,true);
  conn.tableOperations().flush(RootTable.NAME,null,null,true);
  Set<Entry<ServerType,Collection<ProcessReference>>> procs=getCluster().getProcesses().entrySet();
  for (  Entry<ServerType,Collection<ProcessReference>> entry : procs) {
    if (entry.getKey() == ServerType.ZOOKEEPER)     continue;
    for (    ProcessReference pr : entry.getValue())     getCluster().killProcess(entry.getKey(),pr);
  }
  sleepUninterruptibly(10,TimeUnit.SECONDS);
  File hadoopConfDir=createTestDir(ExistingMacIT.class.getSimpleName() + "_hadoop_conf");
  FileUtils.deleteQuietly(hadoopConfDir);
  assertTrue(hadoopConfDir.mkdirs());
  createEmptyConfig(new File(hadoopConfDir,"core-site.xml"));
  createEmptyConfig(new File(hadoopConfDir,"hdfs-site.xml"));
  File testDir2=createTestDir(ExistingMacIT.class.getSimpleName() + "_2");
  FileUtils.deleteQuietly(testDir2);
  MiniAccumuloConfigImpl macConfig2=new MiniAccumuloConfigImpl(testDir2,"notused");
  macConfig2.useExistingInstance(new File(getCluster().getConfig().getConfDir(),"accumulo-site.xml"),hadoopConfDir);
  MiniAccumuloClusterImpl accumulo2=new MiniAccumuloClusterImpl(macConfig2);
  accumulo2.start();
  conn=accumulo2.getConnector("root",new PasswordToken(ROOT_PASSWORD));
  Scanner scanner=conn.createScanner("table1",Authorizations.EMPTY);
  int sum=0;
  for (  Entry<Key,Value> entry : scanner) {
    sum+=Integer.parseInt(entry.getValue().toString());
  }
  Assert.assertEquals(6569,sum);
  accumulo2.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.FindMaxIT </h4><pre class="type-9 type-13 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw.addMutation(nm(new byte[]{0}));
  bw.addMutation(nm(new byte[]{0,0}));
  bw.addMutation(nm(new byte[]{0,1}));
  bw.addMutation(nm(new byte[]{0,1,0}));
  bw.addMutation(nm(new byte[]{1,0}));
  bw.addMutation(nm(new byte[]{'a','b','c'}));
  bw.addMutation(nm(new byte[]{(byte)0xff}));
  bw.addMutation(nm(new byte[]{(byte)0xff,(byte)0xff,(byte)0xff,(byte)0xff,(byte)0xff,(byte)0xff}));
  for (int i=0; i < 1000; i+=5) {
    bw.addMutation(nm(String.format("r%05d",i)));
  }
  bw.close();
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  ArrayList<Text> rows=new ArrayList<Text>();
  for (  Entry<Key,Value> entry : scanner) {
    rows.add(entry.getKey().getRow());
  }
  for (int i=rows.size() - 1; i > 0; i--) {
    Text max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,null,true,rows.get(i),false);
    assertEquals(rows.get(i - 1),max);
    max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,rows.get(i - 1),true,rows.get(i),false);
    assertEquals(rows.get(i - 1),max);
    max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,rows.get(i - 1),false,rows.get(i),false);
    assertNull(max);
    max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,null,true,rows.get(i),true);
    assertEquals(rows.get(i),max);
    max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,rows.get(i),true,rows.get(i),true);
    assertEquals(rows.get(i),max);
    max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,rows.get(i - 1),false,rows.get(i),true);
    assertEquals(rows.get(i),max);
  }
  Text max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,null,true,null,true);
  assertEquals(rows.get(rows.size() - 1),max);
  max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,null,true,new Text(new byte[]{0}),false);
  assertNull(max);
  max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,null,true,new Text(new byte[]{0}),true);
  assertEquals(rows.get(0),max);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.GarbageCollectWALIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=2 * 60 * 1000) public void test() throws Exception {
  String tableName=getUniqueNames(1)[0];
  cluster.getClusterControl().stop(ServerType.GARBAGE_COLLECTOR);
  Connector c=getConnector();
  c.tableOperations().create(tableName);
  assertEquals(2,countWALsInFS(cluster));
  cluster.getClusterControl().stop(ServerType.TABLET_SERVER);
  cluster.getClusterControl().start(ServerType.GARBAGE_COLLECTOR);
  cluster.getClusterControl().start(ServerType.TABLET_SERVER);
  Iterators.size(c.createScanner(MetadataTable.NAME,Authorizations.EMPTY).iterator());
  UtilWaitThread.sleep(3 * 5 * 1000);
  assertEquals(2,countWALsInFS(cluster));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.GetFileInfoBulkIT </h4><pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  final Connector c=getConnector();
  getCluster().getClusterControl().kill(ServerType.GARBAGE_COLLECTOR,"localhost");
  final String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_MAJC_RATIO.getKey(),"2000");
  c.tableOperations().setProperty(tableName,Property.TABLE_FILE_MAX.getKey(),"2000");
  SortedSet<Text> splits=new TreeSet<>();
  for (int i=1; i < 0xf; i++) {
    splits.add(new Text(Integer.toHexString(i)));
  }
  c.tableOperations().addSplits(tableName,splits);
  MasterMonitorInfo stats=getCluster().getMasterMonitorInfo();
  assertEquals(1,stats.tServerInfo.size());
  log.info("Creating lots of bulk import files");
  final FileSystem fs=getCluster().getFileSystem();
  final Path basePath=getCluster().getTemporaryPath();
  CachedConfiguration.setInstance(fs.getConf());
  final Path base=new Path(basePath,"testBulkLoad" + tableName);
  fs.delete(base,true);
  fs.mkdirs(base);
  ExecutorService es=Executors.newFixedThreadPool(5);
  List<Future<Pair<String,String>>> futures=new ArrayList<>();
  for (int i=0; i < 10; i++) {
    final int which=i;
    futures.add(es.submit(new Callable<Pair<String,String>>(){
      @Override public Pair<String,String> call() throws Exception {
        Path bulkFailures=new Path(base,"failures" + which);
        Path files=new Path(base,"files" + which);
        fs.mkdirs(bulkFailures);
        fs.mkdirs(files);
        for (int i=0; i < 100; i++) {
          FileSKVWriter writer=FileOperations.getInstance().openWriter(files.toString() + "/bulk_" + i+ "."+ RFile.EXTENSION,fs,fs.getConf(),AccumuloConfiguration.getDefaultConfiguration());
          writer.startDefaultLocalityGroup();
          for (int j=0x100; j < 0xfff; j+=3) {
            writer.append(new Key(Integer.toHexString(j)),new Value(new byte[0]));
          }
          writer.close();
        }
        return new Pair<String,String>(files.toString(),bulkFailures.toString());
      }
    }
));
  }
  List<Pair<String,String>> dirs=new ArrayList<>();
  for (  Future<Pair<String,String>> f : futures) {
    dirs.add(f.get());
  }
  log.info("Importing");
  long startOps=getOpts();
  long now=System.currentTimeMillis();
  List<Future> errs=new ArrayList<>();
  for (  Pair<String,String> entry : dirs) {
    final String dir=entry.getFirst();
    final String err=entry.getSecond();
    errs.add(es.submit(new Callable(){
      @Override public Object call() throws Exception {
        c.tableOperations().importDirectory(tableName,dir,err,false);
        return null;
      }
    }
));
  }
  for (  Future err : errs) {
    err.get();
  }
  es.shutdown();
  es.awaitTermination(2,TimeUnit.MINUTES);
  log.info(String.format("Completed in %.2f seconds",(System.currentTimeMillis() - now) / 1000.));
  Uninterruptibles.sleepUninterruptibly(30,TimeUnit.SECONDS);
  long getFileInfoOpts=getOpts() - startOps;
  log.info("# opts: {}",getFileInfoOpts);
  assertTrue("unexpected number of getFileOps",getFileInfoOpts < 2100 && getFileInfoOpts > 1000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.IsolationAndDeepCopyIT </h4><pre class="type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBugFix() throws Exception {
  String table=super.getUniqueNames(1)[0];
  Connector conn=getConnector();
  conn.tableOperations().create(table);
  BatchWriter bw=conn.createBatchWriter(table,new BatchWriterConfig());
  addDocument(bw,"000A","dog","cat","hamster","iguana","the");
  addDocument(bw,"000B","java","perl","C++","pascal","the");
  addDocument(bw,"000C","chrome","firefox","safari","opera","the");
  addDocument(bw,"000D","logarithmic","quadratic","linear","exponential","the");
  bw.close();
  conn.tableOperations().flush(table,null,null,true);
  IteratorSetting iterCfg=new IteratorSetting(30,"ayeaye",IntersectingIterator.class.getName());
  IntersectingIterator.setColumnFamilies(iterCfg,new Text[]{new Text("the"),new Text("hamster")});
  Scanner scanner=conn.createScanner(table,Authorizations.EMPTY);
  scanner.enableIsolation();
  scanner.addScanIterator(iterCfg);
  for (int i=0; i < 100; i++) {
    Iterator<Entry<Key,Value>> iter=scanner.iterator();
    Assert.assertTrue(iter.hasNext());
    Assert.assertEquals("000A",iter.next().getKey().getColumnQualifierData().toString());
    Assert.assertFalse(iter.hasNext());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.KeyValueEqualityIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEquality() throws Exception {
  Connector conn=this.getConnector();
  final BatchWriterConfig config=new BatchWriterConfig();
  final String[] tables=getUniqueNames(2);
  final String table1=tables[0], table2=tables[1];
  final TableOperations tops=conn.tableOperations();
  tops.create(table1);
  tops.create(table2);
  final BatchWriter bw1=conn.createBatchWriter(table1,config), bw2=conn.createBatchWriter(table2,config);
  for (int row=0; row < 100; row++) {
    Mutation m=new Mutation(Integer.toString(row));
    for (int col=0; col < 10; col++) {
      m.put(Integer.toString(col),"",System.currentTimeMillis(),Integer.toString(col * 2));
    }
    bw1.addMutation(m);
    bw2.addMutation(m);
  }
  bw1.close();
  bw2.close();
  Iterator<Entry<Key,Value>> t1=conn.createScanner(table1,Authorizations.EMPTY).iterator(), t2=conn.createScanner(table2,Authorizations.EMPTY).iterator();
  while (t1.hasNext() && t2.hasNext()) {
    Entry<Key,Value> e1=t1.next(), e2=t2.next();
    Assert.assertEquals(e1,e2);
    Assert.assertEquals(e1.hashCode(),e2.hashCode());
  }
  Assert.assertFalse("table1 had more data to read",t1.hasNext());
  Assert.assertFalse("table2 had more data to read",t2.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.LargeSplitRowIT </h4><pre class="type-9 type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60 * 1000) public void userAddedSplit() throws Exception {
  log.info("User added split");
  final String tableName=getUniqueNames(1)[0];
  final Connector conn=getConnector();
  conn.tableOperations().create(tableName);
  conn.tableOperations().setProperty(tableName,Property.TABLE_MAX_END_ROW_SIZE.getKey(),"1000");
  BatchWriter batchWriter=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("Row");
  m.put("cf","cq","value");
  batchWriter.addMutation(m);
  batchWriter.close();
  SortedSet<Text> partitionKeys=new TreeSet<Text>();
  byte data[]=new byte[(int)(TableConfiguration.getMemoryInBytes(Property.TABLE_MAX_END_ROW_SIZE.getDefaultValue()) + 2)];
  for (int i=0; i < data.length; i++) {
    data[i]='m';
  }
  partitionKeys.add(new Text(data));
  try {
    conn.tableOperations().addSplits(tableName,partitionKeys);
    Assert.fail();
  }
 catch (  AccumuloServerException e) {
  }
  int counter=0;
  final Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  for (  Entry<Key,Value> entry : scanner) {
    counter++;
    Key k=entry.getKey();
    Assert.assertEquals("Row",k.getRow().toString());
    Assert.assertEquals("cf",k.getColumnFamily().toString());
    Assert.assertEquals("cq",k.getColumnQualifier().toString());
    Assert.assertEquals("value",entry.getValue().toString());
  }
  Assert.assertEquals(1,counter);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=60 * 1000) public void automaticSplitWith250Same() throws Exception {
  log.info("Automatic with 250 with same prefix");
  final String tableName=getUniqueNames(1)[0];
  final Connector conn=getConnector();
  conn.tableOperations().create(tableName);
  conn.tableOperations().setProperty(tableName,Property.TABLE_SPLIT_THRESHOLD.getKey(),"10K");
  conn.tableOperations().setProperty(tableName,Property.TABLE_FILE_COMPRESSION_TYPE.getKey(),"none");
  conn.tableOperations().setProperty(tableName,Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE.getKey(),"64");
  conn.tableOperations().setProperty(tableName,Property.TABLE_MAX_END_ROW_SIZE.getKey(),"1000");
  BatchWriter batchWriter=conn.createBatchWriter(tableName,new BatchWriterConfig());
  byte data[]=new byte[(int)(TableConfiguration.getMemoryInBytes(Property.TABLE_MAX_END_ROW_SIZE.getDefaultValue()) + 2)];
  for (int i=0; i < data.length - 1; i++) {
    data[i]=(byte)'m';
  }
  for (int i=0; i < 250; i++) {
    data[data.length - 1]=(byte)i;
    Mutation m=new Mutation(data);
    m.put("cf","cq","value");
    batchWriter.addMutation(m);
  }
  batchWriter.close();
  conn.tableOperations().flush(tableName,new Text(),new Text("z"),true);
  Thread.sleep(500);
  int count=0;
  final Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  for (  Entry<Key,Value> entry : scanner) {
    Key k=entry.getKey();
    data[data.length - 1]=(byte)count;
    String expected=new String(data,UTF_8);
    Assert.assertEquals(expected,k.getRow().toString());
    Assert.assertEquals("cf",k.getColumnFamily().toString());
    Assert.assertEquals("cq",k.getColumnQualifier().toString());
    Assert.assertEquals("value",entry.getValue().toString());
    count++;
  }
  Assert.assertEquals(250,count);
  Assert.assertEquals(0,conn.tableOperations().listSplits(tableName).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.MasterRepairsDualAssignmentIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  ClientContext context=new ClientContext(c.getInstance(),new Credentials("root",new PasswordToken(ROOT_PASSWORD)),getClientConfig());
  String table=this.getUniqueNames(1)[0];
  c.securityOperations().grantTablePermission("root",MetadataTable.NAME,TablePermission.WRITE);
  c.securityOperations().grantTablePermission("root",RootTable.NAME,TablePermission.WRITE);
  c.tableOperations().create(table);
  SortedSet<Text> partitions=new TreeSet<Text>();
  for (  String part : "a b c d e f g h i j k l m n o p q r s t u v w x y z".split(" ")) {
    partitions.add(new Text(part));
  }
  c.tableOperations().addSplits(table,partitions);
  Set<TServerInstance> states=new HashSet<TServerInstance>();
  Set<TabletLocationState> oldLocations=new HashSet<TabletLocationState>();
  MetaDataStateStore store=new MetaDataStateStore(context,null);
  while (states.size() < 2) {
    UtilWaitThread.sleep(250);
    oldLocations.clear();
    for (    TabletLocationState tls : store) {
      if (tls.current != null) {
        states.add(tls.current);
        oldLocations.add(tls);
      }
    }
  }
  assertEquals(2,states.size());
  cluster.killProcess(ServerType.TABLET_SERVER,cluster.getProcesses().get(ServerType.TABLET_SERVER).iterator().next());
  Set<TServerInstance> replStates=new HashSet<>();
  while (true) {
    UtilWaitThread.sleep(1000);
    states.clear();
    replStates.clear();
    boolean allAssigned=true;
    for (    TabletLocationState tls : store) {
      if (tls != null && tls.current != null) {
        states.add(tls.current);
      }
 else       if (tls != null && tls.extent.equals(new KeyExtent(new Text(ReplicationTable.ID),null,null))) {
        replStates.add(tls.current);
      }
 else {
        allAssigned=false;
      }
    }
    System.out.println(states + " size " + states.size()+ " allAssigned "+ allAssigned);
    if (states.size() != 2 && allAssigned == true)     break;
  }
  assertEquals(1,replStates.size());
  assertEquals(1,states.size());
  TabletLocationState moved=null;
  for (  TabletLocationState old : oldLocations) {
    if (!states.contains(old.current)) {
      moved=old;
    }
  }
  assertNotEquals(null,moved);
  BatchWriter bw=c.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  Mutation assignment=new Mutation(moved.extent.getMetadataEntry());
  moved.current.putLocation(assignment);
  bw.addMutation(assignment);
  bw.close();
  waitForCleanStore(store);
  bw=c.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  assignment=new Mutation(new KeyExtent(new Text(MetadataTable.ID),null,null).getMetadataEntry());
  moved.current.putLocation(assignment);
  bw.addMutation(assignment);
  bw.close();
  waitForCleanStore(new RootTabletStateStore(context,null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.MetaRecoveryIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=4 * 60 * 1000) public void test() throws Exception {
  String[] tables=getUniqueNames(10);
  Connector c=getConnector();
  int i=0;
  for (  String table : tables) {
    log.info("Creating table {}",i);
    c.tableOperations().create(table);
    BatchWriter bw=c.createBatchWriter(table,null);
    for (int j=0; j < 1000; j++) {
      Mutation m=new Mutation("" + j);
      m.put("cf","cq","value");
      bw.addMutation(m);
    }
    bw.close();
    log.info("Data written to table {}",i);
    i++;
  }
  c.tableOperations().flush(MetadataTable.NAME,null,null,true);
  c.tableOperations().flush(RootTable.NAME,null,null,true);
  SortedSet<Text> splits=new TreeSet<>();
  for (i=1; i < tables.length; i++) {
    splits.add(new Text("" + i));
  }
  c.tableOperations().addSplits(MetadataTable.NAME,splits);
  log.info("Added {} splits to {}",splits.size(),MetadataTable.NAME);
  c.instanceOperations().waitForBalance();
  log.info("Restarting");
  getCluster().getClusterControl().kill(ServerType.TABLET_SERVER,"localhost");
  getCluster().start();
  log.info("Verifying");
  for (  String table : tables) {
    BatchScanner scanner=c.createBatchScanner(table,Authorizations.EMPTY,5);
    scanner.setRanges(Collections.singletonList(new Range()));
    assertEquals(1000,Iterators.size(scanner.iterator()));
    scanner.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.MissingWalHeaderCompletesRecoveryIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPartialHeaderWalRecoveryCompletes() throws Exception {
  Connector conn=getConnector();
  MiniAccumuloClusterImpl cluster=getCluster();
  FileSystem fs=getCluster().getFileSystem();
  String fakeServer="127.0.0.1:12345";
  File walogs=new File(cluster.getConfig().getAccumuloDir(),ServerConstants.WAL_DIR);
  File walogServerDir=new File(walogs,fakeServer.replace(':','+'));
  File partialHeaderWalog=new File(walogServerDir,UUID.randomUUID().toString());
  log.info("Created WAL with malformed header at " + partialHeaderWalog.toURI());
  FSDataOutputStream wal=fs.create(new Path(partialHeaderWalog.toURI()));
  wal.write(DfsLogger.LOG_FILE_HEADER_V3.getBytes(UTF_8),0,DfsLogger.LOG_FILE_HEADER_V3.length() / 2);
  wal.close();
  Assert.assertTrue("root user did not have write permission to metadata table",conn.securityOperations().hasTablePermission("root",MetadataTable.NAME,TablePermission.WRITE));
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  String tableId=conn.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Table ID was null",tableId);
  LogEntry logEntry=new LogEntry(null,0,"127.0.0.1:12345",partialHeaderWalog.toURI().toString());
  log.info("Taking {} offline",tableName);
  conn.tableOperations().offline(tableName,true);
  log.info("{} is offline",tableName);
  Text row=MetadataSchema.TabletsSection.getRow(new Text(tableId),null);
  Mutation m=new Mutation(row);
  m.put(logEntry.getColumnFamily(),logEntry.getColumnQualifier(),logEntry.getValue());
  BatchWriter bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  bw.addMutation(m);
  bw.close();
  log.info("Bringing {} online",tableName);
  conn.tableOperations().online(tableName,true);
  log.info("{} is online",tableName);
  Scanner s=conn.createScanner(tableName,Authorizations.EMPTY);
  Assert.assertEquals(0,Iterables.size(s));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyWalRecoveryCompletes() throws Exception {
  Connector conn=getConnector();
  MiniAccumuloClusterImpl cluster=getCluster();
  FileSystem fs=cluster.getFileSystem();
  String fakeServer="127.0.0.1:12345";
  File walogs=new File(cluster.getConfig().getAccumuloDir(),ServerConstants.WAL_DIR);
  File walogServerDir=new File(walogs,fakeServer.replace(':','+'));
  File emptyWalog=new File(walogServerDir,UUID.randomUUID().toString());
  log.info("Created empty WAL at " + emptyWalog.toURI());
  fs.create(new Path(emptyWalog.toURI())).close();
  Assert.assertTrue("root user did not have write permission to metadata table",conn.securityOperations().hasTablePermission("root",MetadataTable.NAME,TablePermission.WRITE));
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  String tableId=conn.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Table ID was null",tableId);
  LogEntry logEntry=new LogEntry(new KeyExtent(new Text(tableId),null,null),0,"127.0.0.1:12345",emptyWalog.toURI().toString());
  log.info("Taking {} offline",tableName);
  conn.tableOperations().offline(tableName,true);
  log.info("{} is offline",tableName);
  Text row=MetadataSchema.TabletsSection.getRow(new Text(tableId),null);
  Mutation m=new Mutation(row);
  m.put(logEntry.getColumnFamily(),logEntry.getColumnQualifier(),logEntry.getValue());
  BatchWriter bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  bw.addMutation(m);
  bw.close();
  log.info("Bringing {} online",tableName);
  conn.tableOperations().online(tableName,true);
  log.info("{} is online",tableName);
  Scanner s=conn.createScanner(tableName,Authorizations.EMPTY);
  Assert.assertEquals(0,Iterables.size(s));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.MultiTableBatchWriterIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTableRenameDataValidation() throws Exception {
  try {
    final String[] names=getUniqueNames(2);
    final String table1=names[0], table2=names[1];
    TableOperations tops=connector.tableOperations();
    tops.create(table1);
    BatchWriter bw1=mtbw.getBatchWriter(table1);
    Mutation m1=new Mutation("foo");
    m1.put("col1","","val1");
    bw1.addMutation(m1);
    tops.rename(table1,table2);
    tops.create(table1);
    BatchWriter bw2=mtbw.getBatchWriter(table1);
    Mutation m2=new Mutation("bar");
    m2.put("col1","","val1");
    bw1.addMutation(m2);
    bw2.addMutation(m2);
    mtbw.close();
    Map<Entry<String,String>,String> table1Expectations=new HashMap<Entry<String,String>,String>();
    table1Expectations.put(Maps.immutableEntry("bar","col1"),"val1");
    Map<Entry<String,String>,String> table2Expectations=new HashMap<Entry<String,String>,String>();
    table2Expectations.put(Maps.immutableEntry("foo","col1"),"val1");
    table2Expectations.put(Maps.immutableEntry("bar","col1"),"val1");
    Scanner s=connector.createScanner(table1,new Authorizations());
    s.setRange(new Range());
    Map<Entry<String,String>,String> actual=new HashMap<Entry<String,String>,String>();
    for (    Entry<Key,Value> entry : s) {
      actual.put(Maps.immutableEntry(entry.getKey().getRow().toString(),entry.getKey().getColumnFamily().toString()),entry.getValue().toString());
    }
    Assert.assertEquals("Differing results for " + table1,table1Expectations,actual);
    s=connector.createScanner(table2,new Authorizations());
    s.setRange(new Range());
    actual=new HashMap<Entry<String,String>,String>();
    for (    Entry<Key,Value> entry : s) {
      actual.put(Maps.immutableEntry(entry.getKey().getRow().toString(),entry.getKey().getColumnFamily().toString()),entry.getValue().toString());
    }
    Assert.assertEquals("Differing results for " + table2,table2Expectations,actual);
  }
  finally {
    if (null != mtbw) {
      mtbw.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTableRenameSameWriters() throws Exception {
  try {
    final String[] names=getUniqueNames(4);
    final String table1=names[0], table2=names[1];
    final String newTable1=names[2], newTable2=names[3];
    TableOperations tops=connector.tableOperations();
    tops.create(table1);
    tops.create(table2);
    BatchWriter bw1=mtbw.getBatchWriter(table1), bw2=mtbw.getBatchWriter(table2);
    Mutation m1=new Mutation("foo");
    m1.put("col1","","val1");
    m1.put("col2","","val2");
    bw1.addMutation(m1);
    bw2.addMutation(m1);
    tops.rename(table1,newTable1);
    tops.rename(table2,newTable2);
    Mutation m2=new Mutation("bar");
    m2.put("col1","","val1");
    m2.put("col2","","val2");
    bw1.addMutation(m2);
    bw2.addMutation(m2);
    mtbw.close();
    Map<Entry<String,String>,String> expectations=new HashMap<Entry<String,String>,String>();
    expectations.put(Maps.immutableEntry("foo","col1"),"val1");
    expectations.put(Maps.immutableEntry("foo","col2"),"val2");
    expectations.put(Maps.immutableEntry("bar","col1"),"val1");
    expectations.put(Maps.immutableEntry("bar","col2"),"val2");
    for (    String table : Arrays.asList(newTable1,newTable2)) {
      Scanner s=connector.createScanner(table,new Authorizations());
      s.setRange(new Range());
      Map<Entry<String,String>,String> actual=new HashMap<Entry<String,String>,String>();
      for (      Entry<Key,Value> entry : s) {
        actual.put(Maps.immutableEntry(entry.getKey().getRow().toString(),entry.getKey().getColumnFamily().toString()),entry.getValue().toString());
      }
      Assert.assertEquals("Differing results for " + table,expectations,actual);
    }
  }
  finally {
    if (null != mtbw) {
      mtbw.close();
    }
  }
}

</code></pre>

<br>
<pre class="type-8 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTableRenameNewWriters() throws Exception {
  try {
    final String[] names=getUniqueNames(4);
    final String table1=names[0], table2=names[1];
    final String newTable1=names[2], newTable2=names[3];
    TableOperations tops=connector.tableOperations();
    tops.create(table1);
    tops.create(table2);
    BatchWriter bw1=mtbw.getBatchWriter(table1), bw2=mtbw.getBatchWriter(table2);
    Mutation m1=new Mutation("foo");
    m1.put("col1","","val1");
    m1.put("col2","","val2");
    bw1.addMutation(m1);
    bw2.addMutation(m1);
    tops.rename(table1,newTable1);
    try {
      bw1=mtbw.getBatchWriter(table1);
      Assert.fail("Should not be able to find this table");
    }
 catch (    TableNotFoundException e) {
    }
    tops.rename(table2,newTable2);
    try {
      bw2=mtbw.getBatchWriter(table2);
      Assert.fail("Should not be able to find this table");
    }
 catch (    TableNotFoundException e) {
    }
    bw1=mtbw.getBatchWriter(newTable1);
    bw2=mtbw.getBatchWriter(newTable2);
    Mutation m2=new Mutation("bar");
    m2.put("col1","","val1");
    m2.put("col2","","val2");
    bw1.addMutation(m2);
    bw2.addMutation(m2);
    mtbw.close();
    Map<Entry<String,String>,String> expectations=new HashMap<Entry<String,String>,String>();
    expectations.put(Maps.immutableEntry("foo","col1"),"val1");
    expectations.put(Maps.immutableEntry("foo","col2"),"val2");
    expectations.put(Maps.immutableEntry("bar","col1"),"val1");
    expectations.put(Maps.immutableEntry("bar","col2"),"val2");
    for (    String table : Arrays.asList(newTable1,newTable2)) {
      Scanner s=connector.createScanner(table,new Authorizations());
      s.setRange(new Range());
      Map<Entry<String,String>,String> actual=new HashMap<Entry<String,String>,String>();
      for (      Entry<Key,Value> entry : s) {
        actual.put(Maps.immutableEntry(entry.getKey().getRow().toString(),entry.getKey().getColumnFamily().toString()),entry.getValue().toString());
      }
      Assert.assertEquals("Differing results for " + table,expectations,actual);
    }
  }
  finally {
    if (null != mtbw) {
      mtbw.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.NamespacesIT </h4><pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void renameTable() throws Exception {
  String namespace2=namespace + "_renamed";
  String t1=namespace + ".1";
  String t2=namespace2 + ".2";
  String t3=namespace + ".3";
  String t4=namespace + ".4";
  String t5="5";
  c.namespaceOperations().create(namespace);
  c.namespaceOperations().create(namespace2);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertTrue(c.namespaceOperations().exists(namespace2));
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  assertFalse(c.tableOperations().exists(t3));
  assertFalse(c.tableOperations().exists(t4));
  assertFalse(c.tableOperations().exists(t5));
  c.tableOperations().create(t1);
  try {
    c.tableOperations().rename(t1,t2);
    fail();
  }
 catch (  AccumuloException e) {
    assertEquals(ThriftTableOperationException.class.getName(),e.getCause().getClass().getName());
    assertEquals(TableOperation.RENAME,((ThriftTableOperationException)e.getCause()).getOp());
    assertEquals(TableOperationExceptionType.INVALID_NAME,((ThriftTableOperationException)e.getCause()).getType());
  }
  try {
    c.tableOperations().rename(t1,t5);
    fail();
  }
 catch (  AccumuloException e) {
    assertEquals(ThriftTableOperationException.class.getName(),e.getCause().getClass().getName());
    assertEquals(TableOperation.RENAME,((ThriftTableOperationException)e.getCause()).getOp());
    assertEquals(TableOperationExceptionType.INVALID_NAME,((ThriftTableOperationException)e.getCause()).getType());
  }
  assertTrue(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  assertFalse(c.tableOperations().exists(t3));
  assertFalse(c.tableOperations().exists(t4));
  assertFalse(c.tableOperations().exists(t5));
  c.tableOperations().rename(t1,t3);
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  assertTrue(c.tableOperations().exists(t3));
  assertFalse(c.tableOperations().exists(t4));
  assertFalse(c.tableOperations().exists(t5));
}

</code></pre>

<br>
<pre class="type-9 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyIteratorInheritance() throws Exception {
  String t1=namespace + ".1";
  c.namespaceOperations().create(namespace);
  c.tableOperations().create(t1);
  String iterName=namespace + "_iter";
  BatchWriter bw=c.createBatchWriter(t1,new BatchWriterConfig());
  Mutation m=new Mutation("r");
  m.put("a","b",new Value("abcde".getBytes()));
  bw.addMutation(m);
  bw.flush();
  bw.close();
  IteratorSetting setting=new IteratorSetting(250,iterName,SimpleFilter.class.getName());
  Scanner s=c.createScanner(t1,Authorizations.EMPTY);
  assertTrue(s.iterator().hasNext());
  assertFalse(c.namespaceOperations().listIterators(namespace).containsKey(iterName));
  assertFalse(c.tableOperations().listIterators(t1).containsKey(iterName));
  c.namespaceOperations().checkIteratorConflicts(namespace,setting,EnumSet.allOf(IteratorScope.class));
  c.namespaceOperations().attachIterator(namespace,setting);
  sleepUninterruptibly(2,TimeUnit.SECONDS);
  try {
    c.namespaceOperations().checkIteratorConflicts(namespace,setting,EnumSet.allOf(IteratorScope.class));
    fail();
  }
 catch (  AccumuloException e) {
    assertEquals(IllegalArgumentException.class.getName(),e.getCause().getClass().getName());
  }
  IteratorSetting setting2=c.namespaceOperations().getIteratorSetting(namespace,setting.getName(),IteratorScope.scan);
  assertEquals(setting,setting2);
  assertTrue(c.namespaceOperations().listIterators(namespace).containsKey(iterName));
  assertTrue(c.tableOperations().listIterators(t1).containsKey(iterName));
  s=c.createScanner(t1,Authorizations.EMPTY);
  assertFalse(s.iterator().hasNext());
  c.namespaceOperations().removeIterator(namespace,setting.getName(),EnumSet.allOf(IteratorScope.class));
  sleepUninterruptibly(2,TimeUnit.SECONDS);
  assertFalse(c.namespaceOperations().listIterators(namespace).containsKey(iterName));
  assertFalse(c.tableOperations().listIterators(t1).containsKey(iterName));
  s=c.createScanner(t1,Authorizations.EMPTY);
  assertTrue(s.iterator().hasNext());
}

</code></pre>

<br>
<pre class="type-13 type-11 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyTableOperationsExceptions() throws Exception {
  String tableName=namespace + ".1";
  IteratorSetting setting=new IteratorSetting(200,VersioningIterator.class);
  Text a=new Text("a");
  Text z=new Text("z");
  TableOperations ops=c.tableOperations();
  assertFalse(ops.exists(tableName));
  int numRun=0;
  ACCUMULOEXCEPTIONS_NAMESPACENOTFOUND:   for (int i=0; ; ++i)   try {
switch (i) {
case 0:
      ops.create(tableName);
    fail();
  break;
case 1:
ops.create("a");
ops.clone("a",tableName,true,Collections.<String,String>emptyMap(),Collections.<String>emptySet());
fail();
break;
case 2:
ops.importTable(tableName,System.getProperty("user.dir") + "/target");
fail();
break;
default :
assertEquals(3,i);
assertEquals(3,numRun);
break ACCUMULOEXCEPTIONS_NAMESPACENOTFOUND;
}
}
 catch (Exception e) {
numRun++;
if (!(e instanceof AccumuloException) || !(e.getCause() instanceof NamespaceNotFoundException)) throw new Exception("Case " + i + " resulted in "+ e.getClass().getName(),e);
}
numRun=0;
ACCUMULOEXCEPTIONS_TABLENOTFOUND: for (int i=0; ; ++i) try {
switch (i) {
case 0:
ops.removeConstraint(tableName,0);
fail();
break;
case 1:
ops.removeProperty(tableName,"a");
fail();
break;
case 2:
ops.setProperty(tableName,"a","b");
fail();
break;
default :
assertEquals(3,i);
assertEquals(3,numRun);
break ACCUMULOEXCEPTIONS_TABLENOTFOUND;
}
}
 catch (Exception e) {
numRun++;
if (!(e instanceof AccumuloException) || !(e.getCause() instanceof TableNotFoundException) || !(e.getCause().getCause() instanceof NamespaceNotFoundException)) throw new Exception("Case " + i + " resulted in "+ e.getClass().getName(),e);
}
numRun=0;
TABLENOTFOUNDEXCEPTIONS: for (int i=0; ; ++i) try {
switch (i) {
case 0:
ops.addConstraint(tableName,NumericValueConstraint.class.getName());
fail();
break;
case 1:
ops.addSplits(tableName,new TreeSet<Text>());
fail();
break;
case 2:
ops.attachIterator(tableName,setting);
fail();
break;
case 3:
ops.cancelCompaction(tableName);
fail();
break;
case 4:
ops.checkIteratorConflicts(tableName,setting,EnumSet.allOf(IteratorScope.class));
fail();
break;
case 5:
ops.clearLocatorCache(tableName);
fail();
break;
case 6:
ops.clone(tableName,"2",true,Collections.<String,String>emptyMap(),Collections.<String>emptySet());
fail();
break;
case 7:
ops.compact(tableName,a,z,true,true);
fail();
break;
case 8:
ops.delete(tableName);
fail();
break;
case 9:
ops.deleteRows(tableName,a,z);
fail();
break;
case 10:
ops.splitRangeByTablets(tableName,new Range(),10);
fail();
break;
case 11:
ops.exportTable(tableName,namespace + "_dir");
fail();
break;
case 12:
ops.flush(tableName,a,z,true);
fail();
break;
case 13:
ops.getDiskUsage(Collections.singleton(tableName));
fail();
break;
case 14:
ops.getIteratorSetting(tableName,"a",IteratorScope.scan);
fail();
break;
case 15:
ops.getLocalityGroups(tableName);
fail();
break;
case 16:
ops.getMaxRow(tableName,Authorizations.EMPTY,a,true,z,true);
fail();
break;
case 17:
ops.getProperties(tableName);
fail();
break;
case 18:
ops.importDirectory(tableName,"","",false);
fail();
break;
case 19:
ops.testClassLoad(tableName,VersioningIterator.class.getName(),SortedKeyValueIterator.class.getName());
fail();
break;
case 20:
ops.listConstraints(tableName);
fail();
break;
case 21:
ops.listIterators(tableName);
fail();
break;
case 22:
ops.listSplits(tableName);
fail();
break;
case 23:
ops.merge(tableName,a,z);
fail();
break;
case 24:
ops.offline(tableName,true);
fail();
break;
case 25:
ops.online(tableName,true);
fail();
break;
case 26:
ops.removeIterator(tableName,"a",EnumSet.of(IteratorScope.scan));
fail();
break;
case 27:
ops.rename(tableName,tableName + "2");
fail();
break;
case 28:
ops.setLocalityGroups(tableName,Collections.<String,Set<Text>>emptyMap());
fail();
break;
default :
assertEquals(29,i);
assertEquals(29,numRun);
break TABLENOTFOUNDEXCEPTIONS;
}
}
 catch (Exception e) {
numRun++;
if (!(e instanceof TableNotFoundException) || !(e.getCause() instanceof NamespaceNotFoundException)) throw new Exception("Case " + i + " resulted in "+ e.getClass().getName(),e);
}
}

</code></pre>

<br>
<pre class="type-13 type-11 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyNamespaceOperationsExceptions() throws Exception {
  IteratorSetting setting=new IteratorSetting(200,VersioningIterator.class);
  NamespaceOperations ops=c.namespaceOperations();
  assertFalse(ops.exists(namespace));
  int numRun=0;
  NAMESPACENOTFOUND:   for (int i=0; ; ++i)   try {
switch (i) {
case 0:
      ops.addConstraint(namespace,NumericValueConstraint.class.getName());
    fail();
  break;
case 1:
ops.attachIterator(namespace,setting);
fail();
break;
case 2:
ops.checkIteratorConflicts(namespace,setting,EnumSet.of(IteratorScope.scan));
fail();
break;
case 3:
ops.delete(namespace);
fail();
break;
case 4:
ops.getIteratorSetting(namespace,"thing",IteratorScope.scan);
fail();
break;
case 5:
ops.getProperties(namespace);
fail();
break;
case 6:
ops.listConstraints(namespace);
fail();
break;
case 7:
ops.listIterators(namespace);
fail();
break;
case 8:
ops.removeConstraint(namespace,1);
fail();
break;
case 9:
ops.removeIterator(namespace,"thing",EnumSet.allOf(IteratorScope.class));
fail();
break;
case 10:
ops.removeProperty(namespace,"a");
fail();
break;
case 11:
ops.rename(namespace,namespace + "2");
fail();
break;
case 12:
ops.setProperty(namespace,"k","v");
fail();
break;
case 13:
ops.testClassLoad(namespace,VersioningIterator.class.getName(),SortedKeyValueIterator.class.getName());
fail();
break;
default :
assertEquals(14,i);
assertEquals(14,numRun);
break NAMESPACENOTFOUND;
}
}
 catch (Exception e) {
numRun++;
if (!(e instanceof NamespaceNotFoundException)) throw new Exception("Case " + i + " resulted in "+ e.getClass().getName(),e);
}
numRun=0;
NAMESPACEEXISTS: for (int i=0; ; ++i) try {
switch (i) {
case 0:
ops.create(namespace + "0");
ops.create(namespace + "0");
fail();
break;
case 1:
ops.create(namespace + i + "_1");
ops.create(namespace + i + "_2");
ops.rename(namespace + i + "_1",namespace + i + "_2");
fail();
break;
case 2:
ops.create(Namespaces.DEFAULT_NAMESPACE);
fail();
break;
case 3:
ops.create(Namespaces.ACCUMULO_NAMESPACE);
fail();
break;
case 4:
ops.create(namespace + i + "_1");
ops.rename(namespace + i + "_1",Namespaces.DEFAULT_NAMESPACE);
fail();
break;
case 5:
ops.create(namespace + i + "_1");
ops.rename(namespace + i + "_1",Namespaces.ACCUMULO_NAMESPACE);
fail();
break;
default :
assertEquals(6,i);
assertEquals(6,numRun);
break NAMESPACEEXISTS;
}
}
 catch (Exception e) {
numRun++;
if (!(e instanceof NamespaceExistsException)) throw new Exception("Case " + i + " resulted in "+ e.getClass().getName(),e);
}
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createTableInMissingNamespace() throws Exception {
  String t=namespace + ".1";
  assertFalse(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t));
  try {
    c.tableOperations().create(t);
    fail();
  }
 catch (  AccumuloException e) {
    assertEquals(NamespaceNotFoundException.class.getName(),e.getCause().getClass().getName());
    assertFalse(c.namespaceOperations().exists(namespace));
    assertFalse(c.tableOperations().exists(t));
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void checkReservedNamespaces() throws Exception {
  assertEquals(c.namespaceOperations().defaultNamespace(),Namespaces.DEFAULT_NAMESPACE);
  assertEquals(c.namespaceOperations().systemNamespace(),Namespaces.ACCUMULO_NAMESPACE);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void renameNamespaceWithTable() throws Exception {
  String namespace2=namespace + "_renamed";
  String t1=namespace + ".t";
  String t2=namespace2 + ".t";
  c.namespaceOperations().create(namespace);
  c.tableOperations().create(t1);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertTrue(c.tableOperations().exists(t1));
  assertFalse(c.namespaceOperations().exists(namespace2));
  assertFalse(c.tableOperations().exists(t2));
  String namespaceId=c.namespaceOperations().namespaceIdMap().get(namespace);
  String tableId=c.tableOperations().tableIdMap().get(t1);
  c.namespaceOperations().rename(namespace,namespace2);
  assertFalse(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertTrue(c.namespaceOperations().exists(namespace2));
  assertTrue(c.tableOperations().exists(t2));
  String namespaceId2=c.namespaceOperations().namespaceIdMap().get(namespace2);
  String tableId2=c.tableOperations().tableIdMap().get(t2);
  assertEquals(namespaceId,namespaceId2);
  assertEquals(tableId,tableId2);
}

</code></pre>

<br>
<pre class="type-9 type-11 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests new Namespace permissions as well as modifications to Table permissions because of namespaces. Checks each permission to first make sure the user
 * doesn't have permission to perform the action, then root grants them the permission and we check to make sure they could perform the action.
 */
@Test public void testPermissions() throws Exception {
  ClusterUser user1=getUser(0), user2=getUser(1), root=getAdminUser();
  String u1=user1.getPrincipal();
  String u2=user2.getPrincipal();
  PasswordToken pass=(null != user1.getPassword() ? new PasswordToken(user1.getPassword()) : null);
  String n1=namespace;
  String t1=n1 + ".1";
  String t2=n1 + ".2";
  String t3=n1 + ".3";
  String n2=namespace + "_2";
  loginAs(root);
  c.namespaceOperations().create(n1);
  c.tableOperations().create(t1);
  c.securityOperations().createLocalUser(u1,pass);
  loginAs(user1);
  Connector user1Con=c.getInstance().getConnector(u1,user1.getToken());
  try {
    user1Con.tableOperations().create(t2);
    fail();
  }
 catch (  AccumuloSecurityException e) {
    expectPermissionDenied(e);
  }
  loginAs(root);
  c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.CREATE_TABLE);
  loginAs(user1);
  user1Con.tableOperations().create(t2);
  loginAs(root);
  assertTrue(c.tableOperations().list().contains(t2));
  c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.CREATE_TABLE);
  loginAs(user1);
  try {
    user1Con.tableOperations().delete(t1);
    fail();
  }
 catch (  AccumuloSecurityException e) {
    expectPermissionDenied(e);
  }
  loginAs(root);
  c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.DROP_TABLE);
  loginAs(user1);
  user1Con.tableOperations().delete(t1);
  loginAs(root);
  assertTrue(!c.tableOperations().list().contains(t1));
  c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.DROP_TABLE);
  c.tableOperations().create(t3);
  BatchWriter bw=c.createBatchWriter(t3,null);
  Mutation m=new Mutation("row");
  m.put("cf","cq","value");
  bw.addMutation(m);
  bw.close();
  loginAs(user1);
  Iterator<Entry<Key,Value>> i=user1Con.createScanner(t3,new Authorizations()).iterator();
  try {
    i.next();
    fail();
  }
 catch (  RuntimeException e) {
    assertEquals(AccumuloSecurityException.class.getName(),e.getCause().getClass().getName());
    expectPermissionDenied((AccumuloSecurityException)e.getCause());
  }
  loginAs(user1);
  m=new Mutation(u1);
  m.put("cf","cq","turtles");
  bw=user1Con.createBatchWriter(t3,null);
  try {
    bw.addMutation(m);
    bw.close();
    fail();
  }
 catch (  MutationsRejectedException e) {
    assertEquals(1,e.getSecurityErrorCodes().size());
    assertEquals(1,e.getSecurityErrorCodes().entrySet().iterator().next().getValue().size());
switch (e.getSecurityErrorCodes().entrySet().iterator().next().getValue().iterator().next()) {
case PERMISSION_DENIED:
      break;
default :
    fail();
}
}
loginAs(root);
c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.READ);
loginAs(user1);
i=user1Con.createScanner(t3,new Authorizations()).iterator();
assertTrue(i.hasNext());
loginAs(root);
c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.READ);
c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.WRITE);
loginAs(user1);
m=new Mutation(u1);
m.put("cf","cq","turtles");
bw=user1Con.createBatchWriter(t3,null);
bw.addMutation(m);
bw.close();
loginAs(root);
c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.WRITE);
loginAs(user1);
try {
user1Con.tableOperations().setProperty(t3,Property.TABLE_FILE_MAX.getKey(),"42");
fail();
}
 catch (AccumuloSecurityException e) {
expectPermissionDenied(e);
}
loginAs(root);
c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.ALTER_TABLE);
loginAs(user1);
user1Con.tableOperations().setProperty(t3,Property.TABLE_FILE_MAX.getKey(),"42");
user1Con.tableOperations().removeProperty(t3,Property.TABLE_FILE_MAX.getKey());
loginAs(root);
c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.ALTER_TABLE);
loginAs(user1);
try {
user1Con.namespaceOperations().setProperty(n1,Property.TABLE_FILE_MAX.getKey(),"55");
fail();
}
 catch (AccumuloSecurityException e) {
expectPermissionDenied(e);
}
loginAs(root);
c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.ALTER_NAMESPACE);
loginAs(user1);
user1Con.namespaceOperations().setProperty(n1,Property.TABLE_FILE_MAX.getKey(),"42");
user1Con.namespaceOperations().removeProperty(n1,Property.TABLE_FILE_MAX.getKey());
loginAs(root);
c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.ALTER_NAMESPACE);
loginAs(root);
c.securityOperations().createLocalUser(u2,(root.getPassword() == null ? null : new PasswordToken(user2.getPassword())));
loginAs(user1);
try {
user1Con.securityOperations().grantNamespacePermission(u2,n1,NamespacePermission.ALTER_NAMESPACE);
fail();
}
 catch (AccumuloSecurityException e) {
expectPermissionDenied(e);
}
loginAs(root);
c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.GRANT);
loginAs(user1);
user1Con.securityOperations().grantNamespacePermission(u2,n1,NamespacePermission.ALTER_NAMESPACE);
user1Con.securityOperations().revokeNamespacePermission(u2,n1,NamespacePermission.ALTER_NAMESPACE);
loginAs(root);
c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.GRANT);
loginAs(user1);
try {
user1Con.namespaceOperations().create(n2);
fail();
}
 catch (AccumuloSecurityException e) {
expectPermissionDenied(e);
}
loginAs(root);
c.securityOperations().grantSystemPermission(u1,SystemPermission.CREATE_NAMESPACE);
loginAs(user1);
user1Con.namespaceOperations().create(n2);
loginAs(root);
c.securityOperations().revokeSystemPermission(u1,SystemPermission.CREATE_NAMESPACE);
c.securityOperations().revokeNamespacePermission(u1,n2,NamespacePermission.DROP_NAMESPACE);
loginAs(user1);
try {
user1Con.namespaceOperations().delete(n2);
fail();
}
 catch (AccumuloSecurityException e) {
expectPermissionDenied(e);
}
loginAs(root);
c.securityOperations().grantSystemPermission(u1,SystemPermission.DROP_NAMESPACE);
loginAs(user1);
user1Con.namespaceOperations().delete(n2);
loginAs(root);
c.securityOperations().revokeSystemPermission(u1,SystemPermission.DROP_NAMESPACE);
loginAs(user1);
try {
user1Con.namespaceOperations().setProperty(n1,Property.TABLE_FILE_MAX.getKey(),"33");
fail();
}
 catch (AccumuloSecurityException e) {
expectPermissionDenied(e);
}
loginAs(root);
c.securityOperations().grantSystemPermission(u1,SystemPermission.ALTER_NAMESPACE);
loginAs(user1);
user1Con.namespaceOperations().setProperty(n1,Property.TABLE_FILE_MAX.getKey(),"33");
user1Con.namespaceOperations().removeProperty(n1,Property.TABLE_FILE_MAX.getKey());
loginAs(root);
c.securityOperations().revokeSystemPermission(u1,SystemPermission.ALTER_NAMESPACE);
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cloneTable() throws Exception {
  String namespace2=namespace + "_clone";
  String t1=namespace + ".1";
  String t2=namespace + ".2";
  String t3=namespace2 + ".2";
  String k1=Property.TABLE_FILE_MAX.getKey();
  String k2=Property.TABLE_FILE_REPLICATION.getKey();
  String k1v1="55";
  String k1v2="66";
  String k2v1="5";
  String k2v2="6";
  c.namespaceOperations().create(namespace);
  c.tableOperations().create(t1);
  assertTrue(c.tableOperations().exists(t1));
  assertFalse(c.namespaceOperations().exists(namespace2));
  assertFalse(c.tableOperations().exists(t2));
  assertFalse(c.tableOperations().exists(t3));
  try {
    c.tableOperations().clone(t1,t3,false,null,null);
    fail();
  }
 catch (  AccumuloException e) {
    assertEquals(NamespaceNotFoundException.class.getName(),e.getCause().getClass().getName());
  }
  c.namespaceOperations().create(namespace2);
  c.tableOperations().create(t2);
  c.tableOperations().create(t3);
  for (  String t : Arrays.asList(t2,t3)) {
    try {
      c.tableOperations().clone(t1,t,false,null,null);
      fail();
    }
 catch (    TableExistsException e) {
      c.tableOperations().delete(t);
    }
  }
  assertTrue(c.tableOperations().exists(t1));
  assertTrue(c.namespaceOperations().exists(namespace2));
  assertFalse(c.tableOperations().exists(t2));
  assertFalse(c.tableOperations().exists(t3));
  assertFalse(checkNamespaceHasProp(namespace,k1,k1v1));
  assertFalse(checkNamespaceHasProp(namespace2,k1,k1v2));
  assertFalse(checkTableHasProp(t1,k1,k1v1));
  assertFalse(checkTableHasProp(t1,k1,k1v2));
  assertFalse(checkNamespaceHasProp(namespace,k2,k2v1));
  assertFalse(checkNamespaceHasProp(namespace2,k2,k2v1));
  assertFalse(checkTableHasProp(t1,k2,k2v1));
  assertFalse(checkTableHasProp(t1,k2,k2v2));
  c.namespaceOperations().setProperty(namespace,k1,k1v1);
  c.namespaceOperations().setProperty(namespace2,k1,k1v2);
  c.namespaceOperations().setProperty(namespace,k2,k2v1);
  c.namespaceOperations().setProperty(namespace2,k2,k2v1);
  c.tableOperations().setProperty(t1,k2,k2v2);
  assertTrue(checkNamespaceHasProp(namespace,k1,k1v1));
  assertTrue(checkNamespaceHasProp(namespace2,k1,k1v2));
  assertTrue(checkTableHasProp(t1,k1,k1v1));
  assertFalse(checkTableHasProp(t1,k1,k1v2));
  assertTrue(checkNamespaceHasProp(namespace,k2,k2v1));
  assertTrue(checkNamespaceHasProp(namespace2,k2,k2v1));
  assertFalse(checkTableHasProp(t1,k2,k2v1));
  assertTrue(checkTableHasProp(t1,k2,k2v2));
  for (  String t : Arrays.asList(t2,t3))   c.tableOperations().clone(t1,t,false,null,null);
  assertTrue(c.namespaceOperations().exists(namespace2));
  assertTrue(c.tableOperations().exists(t1));
  assertTrue(c.tableOperations().exists(t2));
  assertTrue(c.tableOperations().exists(t3));
  assertTrue(checkTableHasProp(t1,k1,k1v1));
  assertTrue(checkTableHasProp(t2,k1,k1v1));
  assertTrue(checkTableHasProp(t3,k1,k1v2));
  assertTrue(checkTableHasProp(t1,k2,k2v2));
  assertTrue(checkTableHasProp(t2,k2,k2v2));
  assertTrue(checkTableHasProp(t3,k2,k2v2));
}

</code></pre>

<br>
<pre class="type-17 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@After public void swingMjlnir() throws Exception {
  if (null == c) {
    return;
  }
  for (  String t : c.tableOperations().list())   if (!Tables.qualify(t).getFirst().equals(Namespaces.ACCUMULO_NAMESPACE))   c.tableOperations().delete(t);
  assertEquals(3,c.tableOperations().list().size());
  for (  String n : c.namespaceOperations().list())   if (!n.equals(Namespaces.ACCUMULO_NAMESPACE) && !n.equals(Namespaces.DEFAULT_NAMESPACE))   c.namespaceOperations().delete(n);
  assertEquals(2,c.namespaceOperations().list().size());
  for (  String u : c.securityOperations().listLocalUsers())   if (!getAdminPrincipal().equals(u))   c.securityOperations().dropLocalUser(u);
  assertEquals(1,c.securityOperations().listLocalUsers().size());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void listNamespaces() throws Exception {
  SortedSet<String> namespaces=c.namespaceOperations().list();
  Map<String,String> map=c.namespaceOperations().namespaceIdMap();
  assertEquals(2,namespaces.size());
  assertEquals(2,map.size());
  assertTrue(namespaces.contains(Namespaces.ACCUMULO_NAMESPACE));
  assertTrue(namespaces.contains(Namespaces.DEFAULT_NAMESPACE));
  assertFalse(namespaces.contains(namespace));
  assertEquals(Namespaces.ACCUMULO_NAMESPACE_ID,map.get(Namespaces.ACCUMULO_NAMESPACE));
  assertEquals(Namespaces.DEFAULT_NAMESPACE_ID,map.get(Namespaces.DEFAULT_NAMESPACE));
  assertNull(map.get(namespace));
  c.namespaceOperations().create(namespace);
  namespaces=c.namespaceOperations().list();
  map=c.namespaceOperations().namespaceIdMap();
  assertEquals(3,namespaces.size());
  assertEquals(3,map.size());
  assertTrue(namespaces.contains(Namespaces.ACCUMULO_NAMESPACE));
  assertTrue(namespaces.contains(Namespaces.DEFAULT_NAMESPACE));
  assertTrue(namespaces.contains(namespace));
  assertEquals(Namespaces.ACCUMULO_NAMESPACE_ID,map.get(Namespaces.ACCUMULO_NAMESPACE));
  assertEquals(Namespaces.DEFAULT_NAMESPACE_ID,map.get(Namespaces.DEFAULT_NAMESPACE));
  assertNotNull(map.get(namespace));
  c.namespaceOperations().delete(namespace);
  namespaces=c.namespaceOperations().list();
  map=c.namespaceOperations().namespaceIdMap();
  assertEquals(2,namespaces.size());
  assertEquals(2,map.size());
  assertTrue(namespaces.contains(Namespaces.ACCUMULO_NAMESPACE));
  assertTrue(namespaces.contains(Namespaces.DEFAULT_NAMESPACE));
  assertFalse(namespaces.contains(namespace));
  assertEquals(Namespaces.ACCUMULO_NAMESPACE_ID,map.get(Namespaces.ACCUMULO_NAMESPACE));
  assertEquals(Namespaces.DEFAULT_NAMESPACE_ID,map.get(Namespaces.DEFAULT_NAMESPACE));
  assertNull(map.get(namespace));
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyConstraintInheritance() throws Exception {
  String t1=namespace + ".1";
  c.namespaceOperations().create(namespace);
  c.tableOperations().create(t1,new NewTableConfiguration().withoutDefaultIterators());
  String constraintClassName=NumericValueConstraint.class.getName();
  assertFalse(c.namespaceOperations().listConstraints(namespace).containsKey(constraintClassName));
  assertFalse(c.tableOperations().listConstraints(t1).containsKey(constraintClassName));
  c.namespaceOperations().addConstraint(namespace,constraintClassName);
  boolean passed=false;
  for (int i=0; i < 5; i++) {
    if (!c.namespaceOperations().listConstraints(namespace).containsKey(constraintClassName)) {
      Thread.sleep(500);
      continue;
    }
    if (!c.tableOperations().listConstraints(t1).containsKey(constraintClassName)) {
      Thread.sleep(500);
      continue;
    }
    passed=true;
    break;
  }
  assertTrue("Failed to observe newly-added constraint",passed);
  passed=false;
  Integer namespaceNum=null;
  for (int i=0; i < 5; i++) {
    namespaceNum=c.namespaceOperations().listConstraints(namespace).get(constraintClassName);
    if (null == namespaceNum) {
      Thread.sleep(500);
      continue;
    }
    Integer tableNum=c.tableOperations().listConstraints(t1).get(constraintClassName);
    if (null == tableNum) {
      Thread.sleep(500);
      continue;
    }
    assertEquals(namespaceNum,tableNum);
    passed=true;
  }
  assertTrue("Failed to observe constraint in both table and namespace",passed);
  Mutation m1=new Mutation("r1");
  Mutation m2=new Mutation("r2");
  Mutation m3=new Mutation("r3");
  m1.put("a","b",new Value("abcde".getBytes(UTF_8)));
  m2.put("e","f",new Value("123".getBytes(UTF_8)));
  m3.put("c","d",new Value("zyxwv".getBytes(UTF_8)));
  passed=false;
  for (int i=0; i < 5; i++) {
    BatchWriter bw=c.createBatchWriter(t1,new BatchWriterConfig());
    bw.addMutations(Arrays.asList(m1,m2,m3));
    try {
      bw.close();
      Thread.sleep(500);
    }
 catch (    MutationsRejectedException e) {
      passed=true;
      assertEquals(1,e.getConstraintViolationSummaries().size());
      assertEquals(2,e.getConstraintViolationSummaries().get(0).getNumberOfViolatingMutations());
      break;
    }
  }
  assertTrue("Failed to see mutations rejected after constraint was added",passed);
  assertNotNull("Namespace constraint ID should not be null",namespaceNum);
  c.namespaceOperations().removeConstraint(namespace,namespaceNum);
  passed=false;
  for (int i=0; i < 5; i++) {
    if (c.namespaceOperations().listConstraints(namespace).containsKey(constraintClassName)) {
      Thread.sleep(500);
      continue;
    }
    if (c.tableOperations().listConstraints(t1).containsKey(constraintClassName)) {
      Thread.sleep(500);
      continue;
    }
    passed=true;
  }
  assertTrue("Failed to verify that constraint was removed from namespace and table",passed);
  passed=false;
  for (int i=0; i < 5; i++) {
    BatchWriter bw=c.createBatchWriter(t1,new BatchWriterConfig());
    try {
      bw.addMutations(Arrays.asList(m1,m2,m3));
      bw.close();
    }
 catch (    MutationsRejectedException e) {
      Thread.sleep(500);
      continue;
    }
    passed=true;
  }
  assertTrue("Failed to add mutations that should be allowed",passed);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createAndDeleteNamespace() throws Exception {
  String t1=namespace + ".1";
  String t2=namespace + ".2";
  assertFalse(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  try {
    c.namespaceOperations().delete(namespace);
  }
 catch (  NamespaceNotFoundException e) {
  }
  try {
    c.tableOperations().delete(t1);
  }
 catch (  TableNotFoundException e) {
    assertEquals(NamespaceNotFoundException.class.getName(),e.getCause().getClass().getName());
  }
  c.namespaceOperations().create(namespace);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  c.tableOperations().create(t1);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertTrue(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  c.tableOperations().create(t2);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertTrue(c.tableOperations().exists(t1));
  assertTrue(c.tableOperations().exists(t2));
  c.tableOperations().delete(t1);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertTrue(c.tableOperations().exists(t2));
  c.tableOperations().delete(t2);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  c.namespaceOperations().delete(namespace);
  assertFalse(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.RewriteTabletDirectoriesIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  c.securityOperations().grantTablePermission(c.whoami(),MetadataTable.NAME,TablePermission.WRITE);
  final String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  BatchWriter bw=c.createBatchWriter(tableName,null);
  final SortedSet<Text> splits=new TreeSet<Text>();
  for (  String split : "a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z".split(",")) {
    splits.add(new Text(split));
    Mutation m=new Mutation(new Text(split));
    m.put(new byte[]{},new byte[]{},new byte[]{});
    bw.addMutation(m);
  }
  bw.close();
  c.tableOperations().addSplits(tableName,splits);
  BatchScanner scanner=c.createBatchScanner(MetadataTable.NAME,Authorizations.EMPTY,1);
  DIRECTORY_COLUMN.fetch(scanner);
  String tableId=c.tableOperations().tableIdMap().get(tableName);
  assertNotNull("TableID for " + tableName + " was null",tableId);
  scanner.setRanges(Collections.singletonList(TabletsSection.getRange(tableId)));
  bw=c.createBatchWriter(MetadataTable.NAME,null);
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    assertTrue("Expected " + entry.getValue() + " to contain "+ v1,entry.getValue().toString().contains(v1.toString()));
    count++;
    if (count % 2 == 0) {
      String parts[]=entry.getValue().toString().split("/");
      Key key=entry.getKey();
      Mutation m=new Mutation(key.getRow());
      m.put(key.getColumnFamily(),key.getColumnQualifier(),new Value((Path.SEPARATOR + parts[parts.length - 1]).getBytes()));
      bw.addMutation(m);
    }
  }
  bw.close();
  assertEquals(splits.size() + 1,count);
  assertEquals(1,cluster.exec(RandomizeVolumes.class,"-z",cluster.getZooKeepers(),"-i",c.getInstance().getInstanceName(),"-t",tableName).waitFor());
  cluster.stop();
  Configuration conf=new Configuration(false);
  conf.addResource(new Path(cluster.getConfig().getConfDir().toURI().toString(),"accumulo-site.xml"));
  conf.set(Property.INSTANCE_VOLUMES.getKey(),v1.toString() + "," + v2.toString());
  BufferedOutputStream fos=new BufferedOutputStream(new FileOutputStream(new File(cluster.getConfig().getConfDir(),"accumulo-site.xml")));
  conf.writeXml(fos);
  fos.close();
  assertEquals(0,cluster.exec(Initialize.class,"--add-volumes").waitFor());
  cluster.start();
  c=getConnector();
  assertEquals(0,cluster.exec(Admin.class,"randomizeVolumes","-t",tableName).waitFor());
  int v1Count=0, v2Count=0;
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getValue().toString().contains(v1.toString())) {
      v1Count++;
    }
    if (entry.getValue().toString().contains(v2.toString())) {
      v2Count++;
    }
  }
  log.info("Count for volume1: " + v1Count);
  log.info("Count for volume2: " + v2Count);
  assertEquals(splits.size() + 1,v1Count + v2Count);
  assertTrue("Expected the number of files to differ between volumes by less than 10. " + v1Count + " "+ v2Count,Math.abs(v1Count - v2Count) < 2);
  count=0;
  for (  Entry<Key,Value> entry : c.createScanner(tableName,Authorizations.EMPTY)) {
    assertTrue("Found unexpected entry in table: " + entry,splits.contains(entry.getKey().getRow()));
    count++;
  }
  assertEquals(splits.size(),count);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.SampleIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBasic() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  String clone=tableName + "_clone";
  conn.tableOperations().create(tableName,new NewTableConfiguration().enableSampling(SC1));
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  TreeMap<Key,Value> expected=new TreeMap<Key,Value>();
  String someRow=writeData(bw,SC1,expected);
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  Scanner isoScanner=new IsolatedScanner(conn.createScanner(tableName,Authorizations.EMPTY));
  Scanner csiScanner=new ClientSideIteratorScanner(conn.createScanner(tableName,Authorizations.EMPTY));
  scanner.setSamplerConfiguration(SC1);
  csiScanner.setSamplerConfiguration(SC1);
  isoScanner.setSamplerConfiguration(SC1);
  isoScanner.setBatchSize(10);
  BatchScanner bScanner=conn.createBatchScanner(tableName,Authorizations.EMPTY,2);
  bScanner.setSamplerConfiguration(SC1);
  bScanner.setRanges(Arrays.asList(new Range()));
  check(expected,scanner,bScanner,isoScanner,csiScanner);
  conn.tableOperations().flush(tableName,null,null,true);
  Scanner oScanner=newOfflineScanner(conn,tableName,clone,SC1);
  check(expected,scanner,bScanner,isoScanner,csiScanner,oScanner);
  for (  ScannerBase sb : Arrays.asList(scanner,bScanner,isoScanner,csiScanner,oScanner)) {
    sb.clearSamplerConfiguration();
    Assert.assertEquals(20000,Iterables.size(sb));
    sb.setSamplerConfiguration(SC1);
  }
  Iterator<Key> it=expected.keySet().iterator();
  while (it.hasNext()) {
    Key k=it.next();
    if (k.getRow().toString().equals(someRow)) {
      it.remove();
    }
  }
  expected.put(new Key(someRow,"cf1","cq1",8),new Value("42".getBytes()));
  expected.put(new Key(someRow,"cf1","cq3",8),new Value("suprise".getBytes()));
  Mutation m=new Mutation(someRow);
  m.put("cf1","cq1",8,"42");
  m.putDelete("cf1","cq2",8);
  m.put("cf1","cq3",8,"suprise");
  bw.addMutation(m);
  bw.close();
  check(expected,scanner,bScanner,isoScanner,csiScanner);
  conn.tableOperations().flush(tableName,null,null,true);
  oScanner=newOfflineScanner(conn,tableName,clone,SC1);
  check(expected,scanner,bScanner,isoScanner,csiScanner,oScanner);
  scanner.setRange(new Range(someRow));
  isoScanner.setRange(new Range(someRow));
  csiScanner.setRange(new Range(someRow));
  oScanner.setRange(new Range(someRow));
  bScanner.setRanges(Arrays.asList(new Range(someRow)));
  expected.clear();
  expected.put(new Key(someRow,"cf1","cq1",8),new Value("42".getBytes()));
  expected.put(new Key(someRow,"cf1","cq3",8),new Value("suprise".getBytes()));
  check(expected,scanner,bScanner,isoScanner,csiScanner,oScanner);
  bScanner.close();
}

</code></pre>

<br>
<pre class="type-8 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterator() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  String clone=tableName + "_clone";
  conn.tableOperations().create(tableName,new NewTableConfiguration().enableSampling(SC1));
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  TreeMap<Key,Value> expected=new TreeMap<Key,Value>();
  writeData(bw,SC1,expected);
  ArrayList<Key> keys=new ArrayList<>(expected.keySet());
  Range range1=new Range(keys.get(6),true,keys.get(11),true);
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  Scanner isoScanner=new IsolatedScanner(conn.createScanner(tableName,Authorizations.EMPTY));
  ClientSideIteratorScanner csiScanner=new ClientSideIteratorScanner(conn.createScanner(tableName,Authorizations.EMPTY));
  BatchScanner bScanner=conn.createBatchScanner(tableName,Authorizations.EMPTY,2);
  csiScanner.setIteratorSamplerConfiguration(SC1);
  List<? extends ScannerBase> scanners=Arrays.asList(scanner,isoScanner,bScanner,csiScanner);
  for (  ScannerBase s : scanners) {
    s.addScanIterator(new IteratorSetting(100,IteratorThatUsesSample.class));
  }
  setRange(range1,scanners);
  for (  ScannerBase s : scanners) {
    Assert.assertEquals(2954,countEntries(s));
  }
  Range range2=new Range(keys.get(5),true,keys.get(18),true);
  setRange(range2,scanners);
  for (  ScannerBase s : scanners) {
    Assert.assertEquals(0,countEntries(s));
  }
  conn.tableOperations().flush(tableName,null,null,true);
  Scanner oScanner=newOfflineScanner(conn,tableName,clone,null);
  oScanner.addScanIterator(new IteratorSetting(100,IteratorThatUsesSample.class));
  scanners=Arrays.asList(scanner,isoScanner,bScanner,csiScanner,oScanner);
  setRange(range1,scanners);
  for (  ScannerBase s : scanners) {
    Assert.assertEquals(2954,countEntries(s));
  }
  setRange(range2,scanners);
  for (  ScannerBase s : scanners) {
    Assert.assertEquals(0,countEntries(s));
  }
  updateSamplingConfig(conn,tableName,SC2);
  csiScanner.setIteratorSamplerConfiguration(SC2);
  oScanner=newOfflineScanner(conn,tableName,clone,null);
  oScanner.addScanIterator(new IteratorSetting(100,IteratorThatUsesSample.class));
  scanners=Arrays.asList(scanner,isoScanner,bScanner,csiScanner,oScanner);
  for (  ScannerBase s : scanners) {
    try {
      countEntries(s);
      Assert.fail("Expected SampleNotPresentException, but it did not happen : " + s.getClass().getSimpleName());
    }
 catch (    SampleNotPresentException e) {
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ShellServerIT </h4><pre class="type-9 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void listcompactions() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table,true);
  ts.exec("config -t " + table + " -s table.iterator.minc.slow=30,org.apache.accumulo.test.functional.SlowIterator",true);
  ts.exec("config -t " + table + " -s table.iterator.minc.slow.opt.sleepTime=1000",true);
  ts.exec("insert a cf cq value",true);
  ts.exec("insert b cf cq value",true);
  ts.exec("insert c cf cq value",true);
  ts.exec("insert d cf cq value",true);
  ts.exec("flush -t " + table,true);
  ts.exec("sleep 0.2",true);
  ts.exec("listcompactions",true,"default_tablet");
  String[] lines=ts.output.get().split("\n");
  String last=lines[lines.length - 1];
  String[] parts=last.split("\\|");
  assertEquals(12,parts.length);
  ts.exec("deletetable -f " + table,true);
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void importDirectory() throws Exception {
  final String table=name.getMethodName();
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  File importDir=new File(rootPath,"import");
  assertTrue(importDir.mkdir());
  String even=new File(importDir,"even.rf").toString();
  String odd=new File(importDir,"odd.rf").toString();
  File errorsDir=new File(rootPath,"errors");
  assertTrue(errorsDir.mkdir());
  fs.mkdirs(new Path(errorsDir.toString()));
  AccumuloConfiguration aconf=AccumuloConfiguration.getDefaultConfiguration();
  FileSKVWriter evenWriter=FileOperations.getInstance().openWriter(even,fs,conf,aconf);
  evenWriter.startDefaultLocalityGroup();
  FileSKVWriter oddWriter=FileOperations.getInstance().openWriter(odd,fs,conf,aconf);
  oddWriter.startDefaultLocalityGroup();
  long timestamp=System.currentTimeMillis();
  Text cf=new Text("cf");
  Text cq=new Text("cq");
  Value value=new Value("value".getBytes());
  for (int i=0; i < 100; i+=2) {
    Key key=new Key(new Text(String.format("%8d",i)),cf,cq,timestamp);
    evenWriter.append(key,value);
    key=new Key(new Text(String.format("%8d",i + 1)),cf,cq,timestamp);
    oddWriter.append(key,value);
  }
  evenWriter.close();
  oddWriter.close();
  assertEquals(0,ts.shell.getExitCode());
  ts.exec("createtable " + table,true);
  ts.exec("importdirectory " + importDir + " "+ errorsDir+ " true",true);
  ts.exec("scan -r 00000000",true,"00000000",true);
  ts.exec("scan -r 00000099",true,"00000099",true);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void ping() throws Exception {
  for (int i=0; i < 10; i++) {
    ts.exec("ping",true,"OK",true);
    if (ts.output.get().split("\n").length == 3)     break;
    sleepUninterruptibly(1,TimeUnit.SECONDS);
  }
  assertEquals(3,ts.output.get().split("\n").length);
}

</code></pre>

<br>
<pre class="type-9 type-11 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleterows() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  final String tableId=getTableId(table);
  int base=countFiles(tableId);
  assertEquals(0,base);
  log.info("Adding 2 splits");
  ts.exec("addsplits row5 row7");
  log.info("Writing 10 records");
  make10();
  log.info("Flushing table");
  ts.exec("flush -w -t " + table);
  log.info("Table flush completed");
  List<String> files=getFiles(tableId);
  if (3 < files.size()) {
    log.info("More than 3 files were found, compacting before proceeding");
    ts.exec("compact -w -t " + table);
    files=getFiles(tableId);
    assertEquals("Expected to only find 3 files after compaction: " + files,3,files.size());
  }
  assertNotNull(files);
  assertEquals("Found the following files: " + files,3,files.size());
  ts.exec("deleterows -t " + table + " -b row5 -e row7");
  assertEquals(2,countFiles(tableId));
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void listscans() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table,true);
  for (int i=0; i < 6; i++) {
    ts.exec("insert " + i + " cf cq value",true);
  }
  Connector connector=getConnector();
  final Scanner s=connector.createScanner(table,Authorizations.EMPTY);
  IteratorSetting cfg=new IteratorSetting(30,SlowIterator.class);
  SlowIterator.setSleepTime(cfg,500);
  s.addScanIterator(cfg);
  Thread thread=new Thread(){
    @Override public void run(){
      try {
        Iterators.size(s.iterator());
      }
 catch (      Exception ex) {
        throw new RuntimeException(ex);
      }
    }
  }
;
  thread.start();
  List<String> scans=new ArrayList<String>();
  for (int i=0; i < 50 && scans.isEmpty(); i++) {
    String currentScans=ts.exec("listscans",true);
    log.info("Got output from listscans:\n" + currentScans);
    String[] lines=currentScans.split("\n");
    for (int scanOffset=2; scanOffset < lines.length; scanOffset++) {
      String currentScan=lines[scanOffset];
      if (currentScan.contains(table)) {
        log.info("Retaining scan: " + currentScan);
        scans.add(currentScan);
      }
 else {
        log.info("Ignoring scan because of wrong table: " + currentScan);
      }
    }
    sleepUninterruptibly(300,TimeUnit.MILLISECONDS);
  }
  thread.join();
  assertFalse("Could not find any active scans over table " + table,scans.isEmpty());
  for (  String scan : scans) {
    if (!scan.contains("RUNNING")) {
      log.info("Ignoring scan because it doesn't contain 'RUNNING': " + scan);
      continue;
    }
    String parts[]=scan.split("\\|");
    assertEquals("Expected 14 colums, but found " + parts.length + " instead for '"+ Arrays.toString(parts)+ "'",14,parts.length);
    String tserver=parts[0].trim();
    String hostPortPattern=".+:\\d+";
    assertTrue(tserver.matches(hostPortPattern));
    assertTrue(getConnector().instanceOperations().getTabletServers().contains(tserver));
    String client=parts[1].trim();
    assertTrue(client + " does not match " + hostPortPattern,client.matches(hostPortPattern));
    Long.parseLong(parts[11].trim());
  }
  ts.exec("deletetable -f " + table,true);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void deletemany() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  make10();
  assertEquals(10,countkeys(table));
  ts.exec("deletemany -f -b row8");
  assertEquals(8,countkeys(table));
  ts.exec("scan -t " + table + " -np",true,"row8",false);
  make10();
  ts.exec("deletemany -f -b row4 -e row5");
  assertEquals(8,countkeys(table));
  make10();
  ts.exec("deletemany -f -c cf:col4,cf:col5");
  assertEquals(8,countkeys(table));
  make10();
  ts.exec("deletemany -f -r row3");
  assertEquals(9,countkeys(table));
  make10();
  ts.exec("deletemany -f -r row3");
  assertEquals(9,countkeys(table));
  make10();
  ts.exec("deletemany -f -b row3 -be -e row5 -ee");
  assertEquals(9,countkeys(table));
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void systempermission() throws Exception {
  ts.exec("systempermissions");
  assertEquals(12,ts.output.get().split("\n").length - 1);
  ts.exec("tablepermissions",true);
  assertEquals(6,ts.output.get().split("\n").length - 1);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompactions() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  String tableId=getTableId(table);
  ts.exec("insert a b c d");
  ts.exec("flush -w");
  ts.exec("insert x y z v");
  ts.exec("flush -w");
  int oldCount=countFiles(tableId);
  ts.exec("compact -t " + table + " -w");
  assertTrue(countFiles(tableId) < oldCount);
  ts.exec("addsplits -t " + table + " f");
  ts.exec("insert m 1 2 3");
  ts.exec("flush -w");
  ts.exec("insert n 1 2 v901");
  ts.exec("flush -w");
  List<String> oldFiles=getFiles(tableId);
  assertEquals("Files that were found: " + oldFiles,4,oldFiles.size());
  ts.exec("compact -b g -e z -w");
  assertEquals(2,countFiles(tableId));
  ts.exec("compact -w");
  assertEquals(2,countFiles(tableId));
  ts.exec("merge --all -t " + table);
  ts.exec("compact -w");
  assertEquals(1,countFiles(tableId));
  ts.exec("insert z 1 2 v900");
  ts.exec("compact -w -s " + TestCompactionStrategy.class.getName() + " -sc inputPrefix=F,dropPrefix=A");
  assertEquals(1,countFiles(tableId));
  ts.exec("scan",true,"v900",true);
  ts.exec("scan",true,"v901",false);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompactionSelection() throws Exception {
  final String table=name.getMethodName();
  final String clone=table + "_clone";
  ts.exec("createtable " + table);
  ts.exec("insert a b c d");
  ts.exec("flush -w");
  ts.exec("insert x y z v");
  ts.exec("flush -w");
  ts.exec("clonetable -s " + Property.TABLE_MAJC_RATIO.getKey() + "=10 "+ table+ " "+ clone);
  ts.exec("table " + clone);
  ts.exec("insert m n l o");
  ts.exec("flush -w");
  String tableId=getTableId(table);
  String cloneId=getTableId(clone);
  assertEquals(3,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --sf-epath .*tables/"+ tableId+ ".*");
  assertEquals(2,countFiles(cloneId));
  ts.exec("insert r s t u");
  ts.exec("flush -w");
  assertEquals(3,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --sf-ename F.*");
  assertEquals(2,countFiles(cloneId));
  Random rand=new Random();
  StringBuilder sb=new StringBuilder("insert b v q ");
  for (int i=0; i < 10000; i++) {
    sb.append('a' + rand.nextInt(26));
  }
  ts.exec(sb.toString());
  ts.exec("flush -w");
  ts.exec(sb.toString());
  ts.exec("flush -w");
  assertEquals(4,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --sf-lt-esize 1000");
  assertEquals(3,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --sf-gt-esize 1K --min-files 3");
  assertEquals(3,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --sf-gt-esize 1K --min-files 2");
  assertEquals(2,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --min-files 3");
  assertEquals(2,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --min-files 2");
  assertEquals(1,countFiles(cloneId));
  ts.exec(sb.toString());
  ts.exec("flush -w");
  ts.exec("insert m n l o");
  ts.exec("flush -w");
  ts.exec("insert m n l o");
  ts.exec("flush -w");
  assertEquals(4,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --sf-ename F.* --sf-lt-esize 1K");
  assertEquals(3,countFiles(cloneId));
  String clone2=table + "_clone_2";
  ts.exec("clonetable -s table.sampler.opt.hasher=murmur3_32,table.sampler.opt.modulus=7,table.sampler=org.apache.accumulo.core.sample.RowSampler " + clone + " "+ clone2);
  String clone2Id=getTableId(clone2);
  assertEquals(3,countFiles(clone2Id));
  ts.exec("table " + clone2);
  ts.exec("insert v n l o");
  ts.exec("flush -w");
  ts.exec("insert x n l o");
  ts.exec("flush -w");
  assertEquals(5,countFiles(clone2Id));
  ts.exec("compact -t " + clone2 + " -w --sf-no-sample");
  assertEquals(3,countFiles(clone2Id));
}

</code></pre>

<br>
<pre class="type-9 type-8 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void scansWithClassLoaderContext() throws Exception {
  try {
    Class.forName("org.apache.accumulo.test.functional.ValueReversingIterator");
    fail("ValueReversingIterator already on the classpath");
  }
 catch (  Exception e) {
    assertTrue(true);
  }
  ts.exec("createtable t");
  make10();
  setupFakeContextPath();
  ts.exec("config -s " + Property.VFS_CONTEXT_CLASSPATH_PROPERTY + FAKE_CONTEXT+ "="+ FAKE_CONTEXT_CLASSPATH);
  ts.exec("config -t t -s table.classpath.context=" + FAKE_CONTEXT);
  ts.exec("setscaniter -n reverse -t t -p 21 -class org.apache.accumulo.test.functional.ValueReversingIterator");
  String result=ts.exec("scan -np -b row1 -e row1");
  assertEquals(2,result.split("\n").length);
  log.error(result);
  assertTrue(result.contains("value"));
  result=ts.exec("scan -np -b row3 -e row5");
  assertEquals(4,result.split("\n").length);
  assertTrue(result.contains("value"));
  result=ts.exec("scan -np -r row3");
  assertEquals(2,result.split("\n").length);
  assertTrue(result.contains("value"));
  result=ts.exec("scan -np -b row:");
  assertEquals(1,result.split("\n").length);
  result=ts.exec("scan -np -b row");
  assertEquals(11,result.split("\n").length);
  assertTrue(result.contains("value"));
  result=ts.exec("scan -np -e row:");
  assertEquals(11,result.split("\n").length);
  assertTrue(result.contains("value"));
  setupRealContextPath();
  ts.exec("config -s " + Property.VFS_CONTEXT_CLASSPATH_PROPERTY + REAL_CONTEXT+ "="+ REAL_CONTEXT_CLASSPATH);
  result=ts.exec("scan -np -b row1 -e row1 -cc " + REAL_CONTEXT);
  log.error(result);
  assertEquals(2,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  result=ts.exec("scan -np -b row3 -e row5 -cc " + REAL_CONTEXT);
  assertEquals(4,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  result=ts.exec("scan -np -r row3 -cc " + REAL_CONTEXT);
  assertEquals(2,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  result=ts.exec("scan -np -b row: -cc " + REAL_CONTEXT);
  assertEquals(1,result.split("\n").length);
  result=ts.exec("scan -np -b row -cc " + REAL_CONTEXT);
  assertEquals(11,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  result=ts.exec("scan -np -e row: -cc " + REAL_CONTEXT);
  assertEquals(11,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  ts.exec("deletetable -f t");
}

</code></pre>

<br>
<pre class="type-9 type-11 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void exporttableImporttable() throws Exception {
  final String table=name.getMethodName(), table2=table + "2";
  ts.exec("createtable " + table + " -evc",true);
  make10();
  ts.exec("addsplits row5",true);
  ts.exec("config -t " + table + " -s table.split.threshold=345M",true);
  ts.exec("offline " + table,true);
  File exportDir=new File(rootPath,"ShellServerIT.export");
  String exportUri="file://" + exportDir.toString();
  String localTmp="file://" + new File(rootPath,"ShellServerIT.tmp").toString();
  ts.exec("exporttable -t " + table + " "+ exportUri,true);
  DistCp cp=newDistCp(new Configuration(false));
  String import_="file://" + new File(rootPath,"ShellServerIT.import").toString();
  if (getCluster().getClientConfig().getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
    FileSystem fs=getCluster().getFileSystem();
    FileSystem localFs=FileSystem.getLocal(new Configuration(false));
    Path localTmpPath=new Path(localTmp);
    localFs.mkdirs(localTmpPath);
    Path importDir=new Path(import_);
    fs.mkdirs(importDir);
    try (BufferedReader reader=new BufferedReader(new FileReader(new File(exportDir,"distcp.txt")))){
      for (String line; (line=reader.readLine()) != null; ) {
        Path exportedFile=new Path(line);
        log.info("Copying " + line + " to "+ localTmpPath);
        fs.copyToLocalFile(exportedFile,localTmpPath);
        Path tmpFile=new Path(localTmpPath,exportedFile.getName());
        log.info("Moving " + tmpFile + " to the import directory "+ importDir);
        fs.moveFromLocalFile(tmpFile,importDir);
      }
    }
   }
 else {
    String[] distCpArgs=new String[]{"-f",exportUri + "/distcp.txt",import_};
    assertEquals("Failed to run distcp: " + Arrays.toString(distCpArgs),0,cp.run(distCpArgs));
  }
  ts.exec("importtable " + table2 + " "+ import_,true);
  ts.exec("config -t " + table2 + " -np",true,"345M",true);
  ts.exec("getsplits -t " + table2,true,"row5",true);
  ts.exec("constraint --list -t " + table2,true,"VisibilityConstraint=2",true);
  ts.exec("online " + table,true);
  ts.exec("deletetable -f " + table,true);
  ts.exec("deletetable -f " + table2,true);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void merge() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  ts.exec("addsplits a m z");
  ts.exec("getsplits",true,"z",true);
  ts.exec("merge --all",true);
  ts.exec("getsplits",true,"z",false);
  ts.exec("deletetable -f " + table);
  ts.exec("getsplits -t " + MetadataTable.NAME + "",true);
  assertEquals(2,ts.output.get().split("\n").length);
  ts.exec("getsplits -t accumulo.root",true);
  assertEquals(1,ts.output.get().split("\n").length);
  ts.exec("merge --all -t " + MetadataTable.NAME + "");
  ts.exec("getsplits -t " + MetadataTable.NAME + "",true);
  assertEquals(1,ts.output.get().split("\n").length);
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void scans() throws Exception {
  ts.exec("createtable t");
  make10();
  String result=ts.exec("scan -np -b row1 -e row1");
  assertEquals(2,result.split("\n").length);
  result=ts.exec("scan -np -b row3 -e row5");
  assertEquals(4,result.split("\n").length);
  result=ts.exec("scan -np -r row3");
  assertEquals(2,result.split("\n").length);
  result=ts.exec("scan -np -b row:");
  assertEquals(1,result.split("\n").length);
  result=ts.exec("scan -np -b row");
  assertEquals(11,result.split("\n").length);
  result=ts.exec("scan -np -e row:");
  assertEquals(11,result.split("\n").length);
  ts.exec("deletetable -f t");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.SplitRecoveryIT </h4><pre class="type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  String tableName=getUniqueNames(1)[0];
  for (int tn=0; tn < 2; tn++) {
    Connector connector=getConnector();
    connector.tableOperations().create(tableName);
    BatchWriter bw=connector.createBatchWriter(tableName,new BatchWriterConfig());
    bw.addMutation(m("a"));
    bw.addMutation(m("b"));
    bw.addMutation(m("c"));
    bw.close();
    connector.tableOperations().offline(tableName);
    while (!isOffline(tableName,connector))     sleepUninterruptibly(200,TimeUnit.MILLISECONDS);
    connector.securityOperations().grantTablePermission(getAdminPrincipal(),MetadataTable.NAME,TablePermission.WRITE);
    String tableId=connector.tableOperations().tableIdMap().get(tableName);
    KeyExtent extent=new KeyExtent(new Text(tableId),null,new Text("b"));
    Mutation m=extent.getPrevRowUpdateMutation();
    TabletsSection.TabletColumnFamily.SPLIT_RATIO_COLUMN.put(m,new Value(Double.toString(0.5).getBytes()));
    TabletsSection.TabletColumnFamily.OLD_PREV_ROW_COLUMN.put(m,KeyExtent.encodePrevEndRow(null));
    bw=connector.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
    bw.addMutation(m);
    if (tn == 1) {
      bw.flush();
      Scanner scanner=connector.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
      scanner.setRange(extent.toMetadataRange());
      scanner.fetchColumnFamily(DataFileColumnFamily.NAME);
      KeyExtent extent2=new KeyExtent(new Text(tableId),new Text("b"),null);
      m=extent2.getPrevRowUpdateMutation();
      TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.put(m,new Value("/t2".getBytes()));
      TabletsSection.ServerColumnFamily.TIME_COLUMN.put(m,new Value("M0".getBytes()));
      for (      Entry<Key,Value> entry : scanner) {
        m.put(DataFileColumnFamily.NAME,entry.getKey().getColumnQualifier(),entry.getValue());
      }
      bw.addMutation(m);
    }
    bw.close();
    connector.tableOperations().online(tableName);
    Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
    int i=0;
    String expected[]={"a","b","c"};
    for (    Entry<Key,Value> entry : scanner) {
      assertEquals(expected[i],entry.getKey().getRow().toString());
      i++;
    }
    assertEquals(3,i);
    connector.tableOperations().delete(tableName);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.TableOperationsIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompactEmptyTableWithGeneratorIterator_Splits_Partial() throws TableExistsException, AccumuloException, AccumuloSecurityException, TableNotFoundException {
  String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName);
  Text splitRow=new Text("f");
  SortedSet<Text> splitset=new TreeSet<>();
  splitset.add(splitRow);
  connector.tableOperations().addSplits(tableName,splitset);
  List<IteratorSetting> list=new ArrayList<>();
  list.add(new IteratorSetting(15,HardListIterator.class));
  connector.tableOperations().compact(tableName,splitRow,null,list,true,true);
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  Map<Key,Value> actual=new TreeMap<>(COMPARE_KEY_TO_COLQ);
  for (  Map.Entry<Key,Value> entry : scanner)   actual.put(entry.getKey(),entry.getValue());
  assertEquals(HardListIterator.allEntriesToInject.tailMap(new Key(splitRow)),actual);
  connector.tableOperations().delete(tableName);
}

</code></pre>

<br>
<pre class="type-9 type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getDiskUsageErrors() throws TableExistsException, AccumuloException, AccumuloSecurityException, TableNotFoundException, TException {
  String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName);
  List<DiskUsage> diskUsage=connector.tableOperations().getDiskUsage(Collections.singleton(tableName));
  assertEquals(1,diskUsage.size());
  assertEquals(0,(long)diskUsage.get(0).getUsage());
  assertEquals(tableName,diskUsage.get(0).getTables().iterator().next());
  connector.securityOperations().revokeTablePermission(getAdminPrincipal(),tableName,TablePermission.READ);
  try {
    connector.tableOperations().getDiskUsage(Collections.singleton(tableName));
    fail("Should throw securityexception");
  }
 catch (  AccumuloSecurityException e) {
  }
  connector.tableOperations().delete(tableName);
  try {
    connector.tableOperations().getDiskUsage(Collections.singleton(tableName));
    fail("Should throw tablenotfound");
  }
 catch (  TableNotFoundException e) {
  }
}

</code></pre>

<br>
<pre class="type-11 type-8 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompactEmptyTableWithGeneratorIterator_Splits_Cancel() throws TableExistsException, AccumuloException, AccumuloSecurityException, TableNotFoundException {
  String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName);
  SortedSet<Text> splitset=new TreeSet<>();
  splitset.add(new Text("f"));
  connector.tableOperations().addSplits(tableName,splitset);
  List<IteratorSetting> list=new ArrayList<>();
  list.add(new IteratorSetting(15,HardListIterator.class));
  connector.tableOperations().compact(tableName,null,null,list,true,false);
  connector.tableOperations().cancelCompaction(tableName);
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  Map<Key,Value> actual=new TreeMap<>(COMPARE_KEY_TO_COLQ);
  for (  Map.Entry<Key,Value> entry : scanner)   actual.put(entry.getKey(),entry.getValue());
switch (actual.size()) {
case 3:
    assertTrue(HardListIterator.allEntriesToInject.equals(actual));
  break;
case 2:
assertEquals(HardListIterator.allEntriesToInject.headMap(new Key("f")),actual);
break;
case 1:
assertEquals(HardListIterator.allEntriesToInject.tailMap(new Key("f")),actual);
break;
case 0:
break;
default :
Assert.fail("Unexpected number of entries");
break;
}
connector.tableOperations().delete(tableName);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompactEmptyTableWithGeneratorIterator() throws TableExistsException, AccumuloException, AccumuloSecurityException, TableNotFoundException {
  String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName);
  List<IteratorSetting> list=new ArrayList<>();
  list.add(new IteratorSetting(15,HardListIterator.class));
  connector.tableOperations().compact(tableName,null,null,list,true,true);
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  Map<Key,Value> actual=new TreeMap<>(COMPARE_KEY_TO_COLQ);
  for (  Map.Entry<Key,Value> entry : scanner)   actual.put(entry.getKey(),entry.getValue());
  assertEquals(HardListIterator.allEntriesToInject,actual);
  connector.tableOperations().delete(tableName);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createMergeClonedTable() throws Exception {
  String[] names=getUniqueNames(2);
  String originalTable=names[0];
  TableOperations tops=connector.tableOperations();
  TreeSet<Text> splits=Sets.newTreeSet(Arrays.asList(new Text("a"),new Text("b"),new Text("c"),new Text("d")));
  tops.create(originalTable);
  tops.addSplits(originalTable,splits);
  BatchWriter bw=connector.createBatchWriter(originalTable,new BatchWriterConfig());
  for (  Text row : splits) {
    Mutation m=new Mutation(row);
    for (int i=0; i < 10; i++) {
      for (int j=0; j < 10; j++) {
        m.put(Integer.toString(i),Integer.toString(j),Integer.toString(i + j));
      }
    }
    bw.addMutation(m);
  }
  bw.close();
  String clonedTable=names[1];
  tops.clone(originalTable,clonedTable,true,null,null);
  tops.merge(clonedTable,null,new Text("b"));
  Map<String,Integer> rowCounts=new HashMap<>();
  Scanner s=connector.createScanner(clonedTable,new Authorizations());
  for (  Entry<Key,Value> entry : s) {
    final Key key=entry.getKey();
    String row=key.getRow().toString();
    String cf=key.getColumnFamily().toString(), cq=key.getColumnQualifier().toString();
    String value=entry.getValue().toString();
    if (rowCounts.containsKey(row)) {
      rowCounts.put(row,rowCounts.get(row) + 1);
    }
 else {
      rowCounts.put(row,1);
    }
    Assert.assertEquals(Integer.parseInt(cf) + Integer.parseInt(cq),Integer.parseInt(value));
  }
  Collection<Text> clonedSplits=tops.listSplits(clonedTable);
  Set<Text> expectedSplits=Sets.newHashSet(new Text("b"),new Text("c"),new Text("d"));
  for (  Text clonedSplit : clonedSplits) {
    Assert.assertTrue("Encountered unexpected split on the cloned table: " + clonedSplit,expectedSplits.remove(clonedSplit));
  }
  Assert.assertTrue("Did not find all expected splits on the cloned table: " + expectedSplits,expectedSplits.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void createTable() throws TableExistsException, AccumuloException, AccumuloSecurityException, TableNotFoundException {
  String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName);
  Iterable<Map.Entry<String,String>> itrProps=connector.tableOperations().getProperties(tableName);
  Map<String,String> props=propsToMap(itrProps);
  assertEquals(DefaultKeySizeConstraint.class.getName(),props.get(Property.TABLE_CONSTRAINT_PREFIX.toString() + "1"));
  connector.tableOperations().delete(tableName);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getDiskUsage() throws TableExistsException, AccumuloException, AccumuloSecurityException, TableNotFoundException, TException {
  final String[] names=getUniqueNames(2);
  String tableName=names[0];
  connector.tableOperations().create(tableName);
  List<DiskUsage> diskUsages=connector.tableOperations().getDiskUsage(Collections.singleton(tableName));
  assertEquals(1,diskUsages.size());
  assertEquals(1,diskUsages.get(0).getTables().size());
  assertEquals(Long.valueOf(0),diskUsages.get(0).getUsage());
  assertEquals(tableName,diskUsages.get(0).getTables().first());
  BatchWriter bw=connector.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("a");
  m.put("b","c",new Value("abcde".getBytes()));
  bw.addMutation(m);
  bw.flush();
  bw.close();
  connector.tableOperations().compact(tableName,new Text("A"),new Text("z"),true,true);
  diskUsages=connector.tableOperations().getDiskUsage(Collections.singleton(tableName));
  assertEquals(1,diskUsages.size());
  assertEquals(1,diskUsages.get(0).getTables().size());
  assertTrue(diskUsages.get(0).getUsage() > 0);
  assertEquals(tableName,diskUsages.get(0).getTables().first());
  String newTable=names[1];
  connector.tableOperations().clone(tableName,newTable,false,null,null);
  Set<String> tables=new HashSet<String>();
  tables.add(tableName);
  tables.add(newTable);
  diskUsages=connector.tableOperations().getDiskUsage(tables);
  assertEquals(1,diskUsages.size());
  assertEquals(2,diskUsages.get(0).getTables().size());
  assertTrue(diskUsages.get(0).getUsage() > 0);
  connector.tableOperations().compact(tableName,new Text("A"),new Text("z"),true,true);
  connector.tableOperations().compact(newTable,new Text("A"),new Text("z"),true,true);
  diskUsages=connector.tableOperations().getDiskUsage(tables);
  assertEquals(2,diskUsages.size());
  assertEquals(1,diskUsages.get(0).getTables().size());
  assertEquals(1,diskUsages.get(1).getTables().size());
  assertTrue(diskUsages.get(0).getUsage() > 0);
  assertTrue(diskUsages.get(1).getUsage() > 0);
  connector.tableOperations().delete(tableName);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompactEmptyTableWithGeneratorIterator_Splits() throws TableExistsException, AccumuloException, AccumuloSecurityException, TableNotFoundException {
  String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName);
  SortedSet<Text> splitset=new TreeSet<>();
  splitset.add(new Text("f"));
  connector.tableOperations().addSplits(tableName,splitset);
  List<IteratorSetting> list=new ArrayList<>();
  list.add(new IteratorSetting(15,HardListIterator.class));
  connector.tableOperations().compact(tableName,null,null,list,true,true);
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  Map<Key,Value> actual=new TreeMap<>(COMPARE_KEY_TO_COLQ);
  for (  Map.Entry<Key,Value> entry : scanner)   actual.put(entry.getKey(),entry.getValue());
  assertEquals(HardListIterator.allEntriesToInject,actual);
  connector.tableOperations().delete(tableName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.TabletServerGivesUpIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=30 * 1000) public void test() throws Exception {
  final Connector conn=this.getConnector();
  assertEquals(1,conn.instanceOperations().getTabletServers().size());
  final String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  cluster.getMiniDfs().shutdown();
  final AtomicReference<Exception> ex=new AtomicReference<>();
  Thread splitter=new Thread(){
    @Override public void run(){
      try {
        TreeSet<Text> splits=new TreeSet<>();
        splits.add(new Text("X"));
        conn.tableOperations().addSplits(tableName,splits);
      }
 catch (      Exception e) {
        ex.set(e);
      }
    }
  }
;
  splitter.start();
  while (conn.instanceOperations().getTabletServers().size() == 1) {
    sleepUninterruptibly(1,TimeUnit.SECONDS);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.TabletServerHdfsRestartIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=2 * 60 * 1000) public void test() throws Exception {
  final Connector conn=this.getConnector();
  assertEquals(1,conn.instanceOperations().getTabletServers().size());
  final String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw=conn.createBatchWriter(tableName,null);
  for (int i=0; i < N; i++) {
    Mutation m=new Mutation("" + i);
    m.put("","","");
    bw.addMutation(m);
  }
  bw.close();
  conn.tableOperations().flush(tableName,null,null,true);
  cluster.getMiniDfs().restartNameNode(false);
  assertEquals(N,Iterators.size(conn.createScanner(tableName,Authorizations.EMPTY).iterator()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.UnusedWALIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=2 * 60 * 1000) public void test() throws Exception {
  getCluster().getClusterControl().stop(ServerType.GARBAGE_COLLECTOR);
  String[] tableNames=getUniqueNames(2);
  String bigTable=tableNames[0];
  String lilTable=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(bigTable);
  c.tableOperations().create(lilTable);
  Instance i=c.getInstance();
  zk=new ZooReaderWriter(i.getZooKeepers(),i.getZooKeepersSessionTimeOut(),"");
  writeSomeData(c,bigTable,0,10,0,10);
  scanSomeData(c,bigTable,0,10,0,10);
  writeSomeData(c,lilTable,0,1,0,1);
  scanSomeData(c,lilTable,0,1,0,1);
  assertEquals(2,getWALCount(i,zk));
  writeSomeData(c,bigTable,0,3000,0,1000);
  assertEquals(3,getWALCount(i,zk));
  writeSomeData(c,lilTable,1,10,0,10);
  scanSomeData(c,lilTable,1,10,0,10);
  getCluster().getClusterControl().stop(ServerType.TABLET_SERVER);
  getCluster().getClusterControl().start(ServerType.TABLET_SERVER);
  Iterators.size(c.createScanner(MetadataTable.NAME,Authorizations.EMPTY).iterator());
  scanSomeData(c,lilTable,0,1,0,1);
  scanSomeData(c,lilTable,1,10,0,10);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.UserCompactionStrategyIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testFileSize() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  writeRandomValue(c,tableName,1 << 16);
  writeRandomValue(c,tableName,1 << 16);
  writeRandomValue(c,tableName,1 << 9);
  writeRandomValue(c,tableName,1 << 7);
  writeRandomValue(c,tableName,1 << 6);
  Assert.assertEquals(5,FunctionalTestUtils.countRFiles(c,tableName));
  CompactionStrategyConfig csConfig=new CompactionStrategyConfig(SizeCompactionStrategy.class.getName());
  csConfig.setOptions(ImmutableMap.of("size","" + (1 << 15)));
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true).setCompactionStrategy(csConfig));
  Assert.assertEquals(3,FunctionalTestUtils.countRFiles(c,tableName));
  csConfig=new CompactionStrategyConfig(SizeCompactionStrategy.class.getName());
  csConfig.setOptions(ImmutableMap.of("size","" + (1 << 17)));
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true).setCompactionStrategy(csConfig));
  Assert.assertEquals(1,FunctionalTestUtils.countRFiles(c,tableName));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDropA() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  writeFlush(c,tableName,"a");
  writeFlush(c,tableName,"b");
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true));
  writeFlush(c,tableName,"c");
  writeFlush(c,tableName,"d");
  CompactionStrategyConfig csConfig=new CompactionStrategyConfig(TestCompactionStrategy.class.getName());
  csConfig.setOptions(ImmutableMap.of("dropPrefix","A","inputPrefix","F"));
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true).setCompactionStrategy(csConfig));
  Assert.assertEquals(ImmutableSet.of("c","d"),getRows(c,tableName));
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true));
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true));
  Assert.assertEquals(ImmutableSet.of("c","d"),getRows(c,tableName));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-21 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPerTableClasspath() throws Exception {
  Assume.assumeTrue(ClusterType.MINI == getClusterType());
  final Connector c=getConnector();
  final String tableName=getUniqueNames(1)[0];
  File target=new File(System.getProperty("user.dir"),"target");
  Assert.assertTrue(target.mkdirs() || target.isDirectory());
  File destFile=installJar(target,"/TestCompactionStrat.jar");
  c.tableOperations().create(tableName);
  c.instanceOperations().setProperty(Property.VFS_CONTEXT_CLASSPATH_PROPERTY.getKey() + "context1",destFile.toString());
  c.tableOperations().setProperty(tableName,Property.TABLE_CLASSPATH.getKey(),"context1");
  c.tableOperations().addSplits(tableName,new TreeSet<Text>(Arrays.asList(new Text("efg"))));
  writeFlush(c,tableName,"a");
  writeFlush(c,tableName,"b");
  writeFlush(c,tableName,"h");
  writeFlush(c,tableName,"i");
  Assert.assertEquals(4,FunctionalTestUtils.countRFiles(c,tableName));
  CompactionStrategyConfig csConfig=new CompactionStrategyConfig("org.apache.accumulo.test.EfgCompactionStrat");
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true).setCompactionStrategy(csConfig));
  Assert.assertEquals(3,FunctionalTestUtils.countRFiles(c,tableName));
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true));
  Assert.assertEquals(2,FunctionalTestUtils.countRFiles(c,tableName));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIterators() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  writeFlush(c,tableName,"a");
  writeFlush(c,tableName,"b");
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true));
  writeFlush(c,tableName,"c");
  writeFlush(c,tableName,"d");
  Assert.assertEquals(3,FunctionalTestUtils.countRFiles(c,tableName));
  CompactionStrategyConfig csConfig=new CompactionStrategyConfig(TestCompactionStrategy.class.getName());
  csConfig.setOptions(ImmutableMap.of("inputPrefix","F"));
  IteratorSetting iterConf=new IteratorSetting(21,"myregex",RegExFilter.class);
  RegExFilter.setRegexs(iterConf,"a|c",null,null,null,false);
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true).setCompactionStrategy(csConfig).setIterators(Arrays.asList(iterConf)));
  Assert.assertEquals(ImmutableSet.of("a","b","c"),getRows(c,tableName));
  Assert.assertEquals(2,FunctionalTestUtils.countRFiles(c,tableName));
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true));
  Assert.assertEquals(ImmutableSet.of("a","b","c"),getRows(c,tableName));
  Assert.assertEquals(1,FunctionalTestUtils.countRFiles(c,tableName));
}

</code></pre>

<br>
<pre class="type-11 type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConcurrent() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  writeRandomValue(c,tableName,1 << 16);
  writeRandomValue(c,tableName,1 << 16);
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(false));
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true));
  Assert.assertEquals(1,FunctionalTestUtils.countRFiles(c,tableName));
  writeRandomValue(c,tableName,1 << 16);
  IteratorSetting iterConfig=new IteratorSetting(30,SlowIterator.class);
  SlowIterator.setSleepTime(iterConfig,1000);
  long t1=System.currentTimeMillis();
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(false).setIterators(Arrays.asList(iterConfig)));
  try {
    c.tableOperations().compact(tableName,new CompactionConfig().setWait(true));
    if (System.currentTimeMillis() - t1 < 2000)     Assert.fail("Expected compaction to fail because another concurrent compaction set iterators");
  }
 catch (  AccumuloException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.VerifySerialRecoveryIT </h4><pre class="type-11 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=4 * 60 * 1000) public void testSerializedRecovery() throws Exception {
  String tableName=getUniqueNames(1)[0];
  Connector c=getConnector();
  c.tableOperations().create(tableName);
  SortedSet<Text> splits=new TreeSet<Text>();
  for (int i=0; i < 200; i++) {
    splits.add(new Text(AssignmentThreadsIT.randomHex(8)));
  }
  c.tableOperations().addSplits(tableName,splits);
  BatchWriter bw=c.createBatchWriter(tableName,null);
  for (int i=0; i < 50000; i++) {
    Mutation m=new Mutation(AssignmentThreadsIT.randomHex(8));
    m.put("","","");
    bw.addMutation(m);
  }
  bw.close();
  for (  ProcessReference ref : getCluster().getProcesses().get(ServerType.TABLET_SERVER))   getCluster().killProcess(ServerType.TABLET_SERVER,ref);
  final Process ts=cluster.exec(TabletServer.class);
  Iterators.size(c.createScanner(tableName,Authorizations.EMPTY).iterator());
  assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  ts.waitFor();
  String result=FunctionalTestUtils.readAll(cluster,TabletServer.class,ts);
  for (  String line : result.split("\n")) {
    System.out.println(line);
  }
  boolean started=false;
  int recoveries=0;
  for (  String line : result.split("\n")) {
    if (line.contains("!0") || line.contains("+r"))     continue;
    if (line.contains("Starting Write-Ahead Log")) {
      assertFalse(started);
      started=true;
      recoveries++;
    }
    if (line.contains("Write-Ahead Log recovery complete")) {
      assertTrue(started);
      started=false;
    }
  }
  assertFalse(started);
  assertTrue(recoveries > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.VolumeIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonConfiguredVolumes() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String uuid=new ZooKeeperInstance(cluster.getClientConfig()).getInstanceID();
  verifyVolumesUsed(tableNames[0],false,v1,v2);
  Assert.assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  cluster.stop();
  Configuration conf=new Configuration(false);
  conf.addResource(new Path(cluster.getConfig().getConfDir().toURI().toString(),"accumulo-site.xml"));
  File v3f=new File(volDirBase,"v3");
  assertTrue(v3f.mkdir() || v3f.isDirectory());
  Path v3=new Path("file://" + v3f.getAbsolutePath());
  conf.set(Property.INSTANCE_VOLUMES.getKey(),v2.toString() + "," + v3.toString());
  BufferedOutputStream fos=new BufferedOutputStream(new FileOutputStream(new File(cluster.getConfig().getConfDir(),"accumulo-site.xml")));
  conf.writeXml(fos);
  fos.close();
  Assert.assertEquals(0,cluster.exec(Initialize.class,"--add-volumes").waitFor());
  for (  Path volumePath : Arrays.asList(v1,v2,v3)) {
    FileSystem fs=volumePath.getFileSystem(CachedConfiguration.getInstance());
    Path vp=new Path(volumePath,ServerConstants.INSTANCE_ID_DIR);
    FileStatus[] iids=fs.listStatus(vp);
    Assert.assertEquals(1,iids.length);
    Assert.assertEquals(uuid,iids[0].getPath().getName());
  }
  cluster.start();
  List<String> expected=new ArrayList<String>();
  for (int i=0; i < 100; i++) {
    String row=String.format("%06d",i * 100 + 3);
    expected.add(row + ":cf1:cq1:1");
  }
  verifyData(expected,getConnector().createScanner(tableNames[0],Authorizations.EMPTY));
  verifyVolumesUsed(tableNames[1],false,v2,v3);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector connector=getConnector();
  String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName);
  SortedSet<Text> partitions=new TreeSet<Text>();
  for (  String s : "d,m,t".split(","))   partitions.add(new Text(s));
  connector.tableOperations().addSplits(tableName,partitions);
  BatchWriter bw=connector.createBatchWriter(tableName,new BatchWriterConfig());
  String[] rows="a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z".split(",");
  for (  String s : rows) {
    Mutation m=new Mutation(new Text(s));
    m.put(EMPTY,EMPTY,EMPTY_VALUE);
    bw.addMutation(m);
  }
  bw.close();
  connector.tableOperations().flush(tableName,null,null,true);
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  int i=0;
  for (  Entry<Key,Value> entry : scanner) {
    assertEquals(rows[i++],entry.getKey().getRow().toString());
  }
  scanner=connector.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  scanner.setRange(new Range("1","1<"));
  scanner.fetchColumnFamily(DataFileColumnFamily.NAME);
  int fileCount=0;
  for (  Entry<Key,Value> entry : scanner) {
    boolean inV1=entry.getKey().getColumnQualifier().toString().contains(v1.toString());
    boolean inV2=entry.getKey().getColumnQualifier().toString().contains(v2.toString());
    assertTrue(inV1 || inV2);
    fileCount++;
  }
  assertEquals(4,fileCount);
  List<DiskUsage> diskUsage=connector.tableOperations().getDiskUsage(Collections.singleton(tableName));
  assertEquals(1,diskUsage.size());
  long usage=diskUsage.get(0).getUsage().longValue();
  log.debug("usage {}",usage);
  assertTrue(usage > 700 && usage < 800);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddVolumes() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String uuid=new ZooKeeperInstance(cluster.getClientConfig()).getInstanceID();
  verifyVolumesUsed(tableNames[0],false,v1,v2);
  Assert.assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  cluster.stop();
  Configuration conf=new Configuration(false);
  conf.addResource(new Path(cluster.getConfig().getConfDir().toURI().toString(),"accumulo-site.xml"));
  File v3f=new File(volDirBase,"v3");
  assertTrue(v3f.mkdir() || v3f.isDirectory());
  Path v3=new Path("file://" + v3f.getAbsolutePath());
  conf.set(Property.INSTANCE_VOLUMES.getKey(),v1.toString() + "," + v2.toString()+ ","+ v3.toString());
  BufferedOutputStream fos=new BufferedOutputStream(new FileOutputStream(new File(cluster.getConfig().getConfDir(),"accumulo-site.xml")));
  conf.writeXml(fos);
  fos.close();
  Assert.assertEquals(0,cluster.exec(Initialize.class,"--add-volumes").waitFor());
  for (  Path volumePath : Arrays.asList(v1,v2,v3)) {
    FileSystem fs=volumePath.getFileSystem(CachedConfiguration.getInstance());
    Path vp=new Path(volumePath,ServerConstants.INSTANCE_ID_DIR);
    FileStatus[] iids=fs.listStatus(vp);
    Assert.assertEquals(1,iids.length);
    Assert.assertEquals(uuid,iids[0].getPath().getName());
  }
  cluster.start();
  verifyVolumesUsed(tableNames[1],false,v1,v2,v3);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveVolumes() throws Exception {
  String[] tableNames=getUniqueNames(2);
  verifyVolumesUsed(tableNames[0],false,v1,v2);
  Assert.assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  cluster.stop();
  Configuration conf=new Configuration(false);
  conf.addResource(new Path(cluster.getConfig().getConfDir().toURI().toString(),"accumulo-site.xml"));
  conf.set(Property.INSTANCE_VOLUMES.getKey(),v2.toString());
  BufferedOutputStream fos=new BufferedOutputStream(new FileOutputStream(new File(cluster.getConfig().getConfDir(),"accumulo-site.xml")));
  conf.writeXml(fos);
  fos.close();
  cluster.start();
  Connector conn=cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
  conn.tableOperations().compact(tableNames[0],null,null,true,true);
  verifyVolumesUsed(tableNames[0],true,v2);
  ZooReader zreader=new ZooReader(cluster.getZooKeepers(),30000);
  String zpath=ZooUtil.getRoot(new ZooKeeperInstance(cluster.getClientConfig())) + RootTable.ZROOT_TABLET_PATH;
  String rootTabletDir=new String(zreader.getData(zpath,false,null),UTF_8);
  Assert.assertTrue(rootTabletDir.startsWith(v2.toString()));
  conn.tableOperations().clone(tableNames[0],tableNames[1],true,new HashMap<String,String>(),new HashSet<String>());
  conn.tableOperations().flush(MetadataTable.NAME,null,null,true);
  conn.tableOperations().flush(RootTable.NAME,null,null,true);
  verifyVolumesUsed(tableNames[0],true,v2);
  verifyVolumesUsed(tableNames[1],true,v2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.examples.simple.dirlist.CountIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Scanner scanner=conn.createScanner(tableName,new Authorizations());
  scanner.fetchColumn(new Text("dir"),new Text("counts"));
  assertFalse(scanner.iterator().hasNext());
  Opts opts=new Opts();
  ScannerOpts scanOpts=new ScannerOpts();
  BatchWriterOpts bwOpts=new BatchWriterOpts();
  opts.instance=conn.getInstance().getInstanceName();
  opts.zookeepers=conn.getInstance().getZooKeepers();
  opts.setTableName(tableName);
  opts.setPrincipal(conn.whoami());
  opts.setPassword(new Opts.Password(ROOT_PASSWORD));
  FileCount fc=new FileCount(opts,scanOpts,bwOpts);
  fc.run();
  ArrayList<Pair<String,String>> expected=new ArrayList<Pair<String,String>>();
  expected.add(new Pair<String,String>(QueryUtil.getRow("").toString(),"1,0,3,3"));
  expected.add(new Pair<String,String>(QueryUtil.getRow("/local").toString(),"2,1,2,3"));
  expected.add(new Pair<String,String>(QueryUtil.getRow("/local/user1").toString(),"0,2,0,2"));
  expected.add(new Pair<String,String>(QueryUtil.getRow("/local/user2").toString(),"0,0,0,0"));
  int i=0;
  for (  Entry<Key,Value> e : scanner) {
    assertEquals(e.getKey().getRow().toString(),expected.get(i).getFirst());
    assertEquals(e.getValue().toString(),expected.get(i).getSecond());
    i++;
  }
  assertEquals(i,expected.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.examples.simple.filedata.ChunkInputFormatIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  conn.tableOperations().create(tableName);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  for (  Entry<Key,Value> e : data) {
    Key k=e.getKey();
    Mutation m=new Mutation(k.getRow());
    m.put(k.getColumnFamily(),k.getColumnQualifier(),new ColumnVisibility(k.getColumnVisibility()),k.getTimestamp(),e.getValue());
    bw.addMutation(m);
  }
  bw.close();
  assertEquals(0,CIFTester.main(tableName,CIFTester.TestMapper.class.getName()));
  assertEquals(1,assertionErrors.get(tableName).size());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testErrorOnNextWithoutClose() throws Exception {
  conn.tableOperations().create(tableName);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  for (  Entry<Key,Value> e : data) {
    Key k=e.getKey();
    Mutation m=new Mutation(k.getRow());
    m.put(k.getColumnFamily(),k.getColumnQualifier(),new ColumnVisibility(k.getColumnVisibility()),k.getTimestamp(),e.getValue());
    bw.addMutation(m);
  }
  bw.close();
  assertEquals(1,CIFTester.main(tableName,CIFTester.TestNoClose.class.getName()));
  assertEquals(1,assertionErrors.get(tableName).size());
  assertEquals(2,assertionErrors.get(tableName + "_map_ioexception").size());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInfoWithoutChunks() throws Exception {
  conn.tableOperations().create(tableName);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  for (  Entry<Key,Value> e : baddata) {
    Key k=e.getKey();
    Mutation m=new Mutation(k.getRow());
    m.put(k.getColumnFamily(),k.getColumnQualifier(),new ColumnVisibility(k.getColumnVisibility()),k.getTimestamp(),e.getValue());
    bw.addMutation(m);
  }
  bw.close();
  assertEquals(0,CIFTester.main(tableName,CIFTester.TestBadData.class.getName()));
  assertEquals(1,assertionErrors.get(tableName).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.examples.simple.filedata.ChunkInputStreamIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithAccumulo() throws AccumuloException, AccumuloSecurityException, TableExistsException, TableNotFoundException, IOException {
  conn.tableOperations().create(tableName);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  for (  Entry<Key,Value> e : data) {
    Key k=e.getKey();
    Mutation m=new Mutation(k.getRow());
    m.put(k.getColumnFamily(),k.getColumnQualifier(),new ColumnVisibility(k.getColumnVisibility()),e.getValue());
    bw.addMutation(m);
  }
  bw.close();
  Scanner scan=conn.createScanner(tableName,AUTHS);
  ChunkInputStream cis=new ChunkInputStream();
  byte[] b=new byte[20];
  int read;
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(scan.iterator());
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  cis.setSource(pi);
  assertEquals(read=cis.read(b),10);
  assertEquals(new String(b,0,read),"qwertyuiop");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[A&B, B&C, D]");
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),16);
  assertEquals(new String(b,0,read),"asdfjkl;asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[A&B]");
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),-1);
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  cis.close();
  assertFalse(pi.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.fate.zookeeper.ZooLockTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testDeleteWaiting() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ZooReaderWriter zk=ZooReaderWriter.getInstance(accumulo.getZooKeepers(),30000,"digest","secret".getBytes());
  zk.mkdirs(parent);
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertTrue(lw.locked);
  Assert.assertTrue(zl.isLocked());
  Assert.assertNull(lw.exception);
  Assert.assertNull(lw.reason);
  ZooLock zl2=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  TestALW lw2=new TestALW();
  zl2.lockAsync(lw2,"test2".getBytes());
  Assert.assertFalse(lw2.locked);
  Assert.assertFalse(zl2.isLocked());
  ZooLock zl3=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  TestALW lw3=new TestALW();
  zl3.lockAsync(lw3,"test3".getBytes());
  List<String> children=zk.getChildren(parent);
  Collections.sort(children);
  zk.delete(parent + "/" + children.get(1),-1);
  lw2.waitForChanges(1);
  Assert.assertFalse(lw2.locked);
  Assert.assertNotNull(lw2.exception);
  Assert.assertNull(lw2.reason);
  zk.delete(parent + "/" + children.get(0),-1);
  lw.waitForChanges(2);
  Assert.assertEquals(LockLossReason.LOCK_DELETED,lw.reason);
  Assert.assertNull(lw.exception);
  lw3.waitForChanges(1);
  Assert.assertTrue(lw3.locked);
  Assert.assertTrue(zl3.isLocked());
  Assert.assertNull(lw3.exception);
  Assert.assertNull(lw3.reason);
  zl3.unlock();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testUnexpectedEvent() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ConnectedWatcher watcher=new ConnectedWatcher();
  ZooKeeper zk=new ZooKeeper(accumulo.getZooKeepers(),30000,watcher);
  zk.addAuthInfo("digest","secret".getBytes());
  while (!watcher.isConnected()) {
    Thread.sleep(200);
  }
  zk.create(parent,new byte[0],ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  zk.setData(parent,"foo".getBytes(),-1);
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertTrue(lw.locked);
  Assert.assertTrue(zl.isLocked());
  Assert.assertNull(lw.exception);
  Assert.assertNull(lw.reason);
  zk.setData(zl.getLockPath(),"bar".getBytes(),-1);
  zk.delete(zl.getLockPath(),-1);
  lw.waitForChanges(2);
  Assert.assertEquals(LockLossReason.LOCK_DELETED,lw.reason);
  Assert.assertNull(lw.exception);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testDeleteLock() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ZooReaderWriter zk=ZooReaderWriter.getInstance(accumulo.getZooKeepers(),30000,"digest","secret".getBytes());
  zk.mkdirs(parent);
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertTrue(lw.locked);
  Assert.assertTrue(zl.isLocked());
  Assert.assertNull(lw.exception);
  Assert.assertNull(lw.reason);
  zk.delete(zl.getLockPath(),-1);
  lw.waitForChanges(2);
  Assert.assertEquals(LockLossReason.LOCK_DELETED,lw.reason);
  Assert.assertNull(lw.exception);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=10000) public void testChangeData() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ConnectedWatcher watcher=new ConnectedWatcher();
  ZooKeeper zk=new ZooKeeper(accumulo.getZooKeepers(),1000,watcher);
  zk.addAuthInfo("digest","secret".getBytes());
  while (!watcher.isConnected()) {
    Thread.sleep(200);
  }
  zk.create(parent,new byte[0],ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),1000,"digest","secret".getBytes(),parent);
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  Assert.assertEquals("test1",new String(zk.getData(zl.getLockPath(),null,null)));
  zl.replaceLockData("test2".getBytes());
  Assert.assertEquals("test2",new String(zk.getData(zl.getLockPath(),null,null)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.BadIteratorMincIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  IteratorSetting is=new IteratorSetting(30,BadIterator.class);
  c.tableOperations().attachIterator(tableName,is,EnumSet.of(IteratorScope.minc));
  BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation(new Text("r1"));
  m.put(new Text("acf"),new Text(tableName),new Value("1".getBytes(UTF_8)));
  bw.addMutation(m);
  bw.close();
  c.tableOperations().flush(tableName,null,null,false);
  sleepUninterruptibly(1,TimeUnit.SECONDS);
  FunctionalTestUtils.checkRFiles(c,tableName,1,1,0,0);
  Scanner scanner=c.createScanner(tableName,Authorizations.EMPTY);
  int count=Iterators.size(scanner.iterator());
  assertEquals("Did not see expected # entries " + count,1,count);
  c.tableOperations().removeIterator(tableName,BadIterator.class.getSimpleName(),EnumSet.of(IteratorScope.minc));
  sleepUninterruptibly(5,TimeUnit.SECONDS);
  FunctionalTestUtils.checkRFiles(c,tableName,1,1,1,1);
  count=Iterators.size(scanner.iterator());
  if (count != 1)   throw new Exception("Did not see expected # entries " + count);
  c.tableOperations().attachIterator(tableName,is,EnumSet.of(IteratorScope.minc));
  bw=c.createBatchWriter(tableName,new BatchWriterConfig());
  m=new Mutation(new Text("r2"));
  m.put(new Text("acf"),new Text(tableName),new Value("1".getBytes(UTF_8)));
  bw.addMutation(m);
  bw.close();
  sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
  c.tableOperations().flush(tableName,null,null,false);
  sleepUninterruptibly(1,TimeUnit.SECONDS);
  c.tableOperations().delete(tableName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.BalanceAfterCommsFailureIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  Connector c=this.getConnector();
  c.tableOperations().create("test");
  Collection<ProcessReference> tservers=getCluster().getProcesses().get(ServerType.TABLET_SERVER);
  ArrayList<Integer> tserverPids=new ArrayList<Integer>(tservers.size());
  for (  ProcessReference tserver : tservers) {
    Process p=tserver.getProcess();
    if (!p.getClass().getName().equals("java.lang.UNIXProcess")) {
      log.info("Found process that was not UNIXProcess, exiting test");
      return;
    }
    Field f=p.getClass().getDeclaredField("pid");
    f.setAccessible(true);
    tserverPids.add(f.getInt(p));
  }
  for (  int pid : tserverPids) {
    assertEquals(0,Runtime.getRuntime().exec(new String[]{"kill","-SIGSTOP",Integer.toString(pid)}).waitFor());
  }
  UtilWaitThread.sleep(20 * 1000);
  for (  int pid : tserverPids) {
    assertEquals(0,Runtime.getRuntime().exec(new String[]{"kill","-SIGCONT",Integer.toString(pid)}).waitFor());
  }
  SortedSet<Text> splits=new TreeSet<Text>();
  for (  String split : "a b c d e f g h i j k l m n o p q r s t u v w x y z".split(" ")) {
    splits.add(new Text(split));
  }
  c.tableOperations().addSplits("test",splits);
  assertEquals(0,Iterables.size(c.createScanner("test",Authorizations.EMPTY)));
  UtilWaitThread.sleep(30 * 1000);
  checkBalance(c);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.CleanTmpIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("row");
  m.put("cf","cq","value");
  bw.addMutation(m);
  bw.flush();
  c.tableOperations().compact(tableName,null,null,true,true);
  m=new Mutation("row2");
  m.put("cf","cq","value");
  bw.addMutation(m);
  bw.close();
  String id=c.tableOperations().tableIdMap().get(tableName);
  Scanner s=c.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(Range.prefix(id));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  Path file=new Path(entry.getKey().getColumnQualifier().toString());
  FileSystem fs=getCluster().getFileSystem();
  assertTrue("Could not find file: " + file,fs.exists(file));
  Path tabletDir=file.getParent();
  assertNotNull("Tablet dir should not be null",tabletDir);
  Path tmp=new Path(tabletDir,"junk.rf_tmp");
  fs.create(tmp).close();
  log.info("Created tmp file {}",tmp.toString());
  getCluster().stop();
  getCluster().start();
  Scanner scanner=c.createScanner(tableName,Authorizations.EMPTY);
  assertEquals(2,Iterators.size(scanner.iterator()));
  assertFalse("File still exists: " + tmp,fs.exists(tmp));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.CleanUpIT </h4><pre class="type-11 type-8 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void run() throws Exception {
  String tableName=getUniqueNames(1)[0];
  getConnector().tableOperations().create(tableName);
  BatchWriter bw=getConnector().createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m1=new Mutation("r1");
  m1.put("cf1","cq1",1,"5");
  bw.addMutation(m1);
  bw.flush();
  Scanner scanner=getConnector().createScanner(tableName,new Authorizations());
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    count++;
    if (!entry.getValue().toString().equals("5")) {
      Assert.fail("Unexpected value " + entry.getValue());
    }
  }
  Assert.assertEquals("Unexpected count",1,count);
  int threadCount=countThreads();
  if (threadCount < 2) {
    printThreadNames();
    Assert.fail("Not seeing expected threads. Saw " + threadCount);
  }
  CleanUp.shutdownNow();
  Mutation m2=new Mutation("r2");
  m2.put("cf1","cq1",1,"6");
  try {
    bw.addMutation(m1);
    bw.flush();
    Assert.fail("batch writer did not fail");
  }
 catch (  Exception e) {
  }
  try {
    bw.close();
    Assert.fail("batch writer close not fail");
  }
 catch (  Exception e) {
  }
  try {
    count=0;
    Iterator<Entry<Key,Value>> iter=scanner.iterator();
    while (iter.hasNext()) {
      iter.next();
      count++;
    }
    Assert.fail("scanner did not fail");
  }
 catch (  Exception e) {
  }
  threadCount=countThreads();
  if (threadCount > 0) {
    printThreadNames();
    Assert.fail("Threads did not go away. Saw " + threadCount);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.CloneTestIT </h4><pre class="type-9 type-11 type-5 type-3 type-21 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteClone() throws Exception {
  String[] tableNames=getUniqueNames(3);
  String table1=tableNames[0];
  String table2=tableNames[1];
  String table3=tableNames[2];
  Connector c=getConnector();
  AccumuloCluster cluster=getCluster();
  Assume.assumeTrue(cluster instanceof MiniAccumuloClusterImpl);
  MiniAccumuloClusterImpl mac=(MiniAccumuloClusterImpl)cluster;
  String rootPath=mac.getConfig().getDir().getAbsolutePath();
  c.tableOperations().create(table3);
  writeData(table3,c).close();
  c.tableOperations().flush(table3,null,null,true);
  FileSystem fs=getCluster().getFileSystem();
  String id=c.tableOperations().tableIdMap().get(table3);
  FileStatus[] status=fs.listStatus(new Path(rootPath + "/accumulo/tables/" + id));
  assertTrue(status.length > 0);
  List<DiskUsage> diskUsage=c.tableOperations().getDiskUsage(Collections.singleton(table3));
  assertEquals(1,diskUsage.size());
  assertTrue(diskUsage.get(0).getUsage() > 100);
  c.tableOperations().delete(table3);
  Path tablePath=new Path(rootPath + "/accumulo/tables/" + id);
  if (fs.exists(tablePath)) {
    status=fs.listStatus(tablePath);
    assertTrue(status == null || status.length == 0);
  }
  c.tableOperations().create(table1);
  BatchWriter bw=writeData(table1,c);
  Map<String,String> props=new HashMap<String,String>();
  props.put(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE.getKey(),"500K");
  Set<String> exclude=new HashSet<String>();
  exclude.add(Property.TABLE_FILE_MAX.getKey());
  c.tableOperations().clone(table1,table2,true,props,exclude);
  Mutation m3=new Mutation("009");
  m3.put("data","x","1");
  m3.put("data","y","2");
  bw.addMutation(m3);
  bw.close();
  c.tableOperations().delete(table1);
  checkData(table2,c);
  c.tableOperations().compact(table2,null,null,true,true);
  checkData(table2,c);
  c.tableOperations().delete(table2);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCloneWithSplits() throws Exception {
  Connector conn=getConnector();
  List<Mutation> mutations=new ArrayList<Mutation>();
  TreeSet<Text> splits=new TreeSet<Text>();
  for (int i=0; i < 10; i++) {
    splits.add(new Text(Integer.toString(i)));
    Mutation m=new Mutation(Integer.toString(i));
    m.put("","","");
    mutations.add(m);
  }
  String[] tables=getUniqueNames(2);
  conn.tableOperations().create(tables[0]);
  conn.tableOperations().addSplits(tables[0],splits);
  BatchWriter bw=conn.createBatchWriter(tables[0],new BatchWriterConfig());
  bw.addMutations(mutations);
  bw.close();
  conn.tableOperations().clone(tables[0],tables[1],true,null,null);
  conn.tableOperations().deleteRows(tables[1],new Text("4"),new Text("8"));
  List<String> rows=Arrays.asList("0","1","2","3","4","9");
  List<String> actualRows=new ArrayList<String>();
  for (  Entry<Key,Value> entry : conn.createScanner(tables[1],Authorizations.EMPTY)) {
    actualRows.add(entry.getKey().getRow().toString());
  }
  Assert.assertEquals(rows,actualRows);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProps() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String table1=tableNames[0];
  String table2=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(table1);
  c.tableOperations().setProperty(table1,Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE.getKey(),"1M");
  c.tableOperations().setProperty(table1,Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE_INDEX.getKey(),"2M");
  c.tableOperations().setProperty(table1,Property.TABLE_FILE_MAX.getKey(),"23");
  BatchWriter bw=writeData(table1,c);
  Map<String,String> props=new HashMap<String,String>();
  props.put(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE.getKey(),"500K");
  Set<String> exclude=new HashSet<String>();
  exclude.add(Property.TABLE_FILE_MAX.getKey());
  c.tableOperations().clone(table1,table2,true,props,exclude);
  Mutation m3=new Mutation("009");
  m3.put("data","x","1");
  m3.put("data","y","2");
  bw.addMutation(m3);
  bw.close();
  checkData(table2,c);
  checkMetadata(table2,c);
  HashMap<String,String> tableProps=new HashMap<String,String>();
  for (  Entry<String,String> prop : c.tableOperations().getProperties(table2)) {
    tableProps.put(prop.getKey(),prop.getValue());
  }
  Assert.assertEquals("500K",tableProps.get(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE.getKey()));
  Assert.assertEquals(Property.TABLE_FILE_MAX.getDefaultValue(),tableProps.get(Property.TABLE_FILE_MAX.getKey()));
  Assert.assertEquals("2M",tableProps.get(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE_INDEX.getKey()));
  c.tableOperations().delete(table1);
  c.tableOperations().delete(table2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.CreateAndUseIT </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void createTableAndBatchScan() throws Exception {
  ArrayList<Range> ranges=new ArrayList<Range>();
  for (int i=1; i < 257; i++) {
    ranges.add(new Range(new Text(String.format("%08x",(i << 8) - 16))));
  }
  String table3=getUniqueNames(1)[0];
  getConnector().tableOperations().create(table3);
  getConnector().tableOperations().addSplits(table3,splits);
  BatchScanner bs=getConnector().createBatchScanner(table3,Authorizations.EMPTY,3);
  bs.setRanges(ranges);
  Iterator<Entry<Key,Value>> iter=bs.iterator();
  int count=Iterators.size(iter);
  bs.close();
  Assert.assertEquals("Did not expect to find any entries",0,count);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void verifyDataIsPresent() throws Exception {
  Text cf=new Text("cf1");
  Text cq=new Text("cq1");
  String tableName=getUniqueNames(1)[0];
  getConnector().tableOperations().create(tableName);
  getConnector().tableOperations().addSplits(tableName,splits);
  BatchWriter bw=getConnector().createBatchWriter(tableName,new BatchWriterConfig());
  for (int i=1; i < 257; i++) {
    Mutation m=new Mutation(new Text(String.format("%08x",(i << 8) - 16)));
    m.put(cf,cq,new Value(Integer.toString(i).getBytes(UTF_8)));
    bw.addMutation(m);
  }
  bw.close();
  Scanner scanner1=getConnector().createScanner(tableName,Authorizations.EMPTY);
  int ei=1;
  for (  Entry<Key,Value> entry : scanner1) {
    Assert.assertEquals(String.format("%08x",(ei << 8) - 16),entry.getKey().getRow().toString());
    Assert.assertEquals(Integer.toString(ei),entry.getValue().toString());
    ei++;
  }
  Assert.assertEquals("Did not see expected number of rows",257,ei);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.DeleteEverythingIT </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void run() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  BatchWriter bw=getConnector().createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation(new Text("foo"));
  m.put(new Text("bar"),new Text("1910"),new Value("5".getBytes(UTF_8)));
  bw.addMutation(m);
  bw.flush();
  getConnector().tableOperations().flush(tableName,null,null,true);
  FunctionalTestUtils.checkRFiles(c,tableName,1,1,1,1);
  m=new Mutation(new Text("foo"));
  m.putDelete(new Text("bar"),new Text("1910"));
  bw.addMutation(m);
  bw.flush();
  Scanner scanner=getConnector().createScanner(tableName,Authorizations.EMPTY);
  scanner.setRange(new Range());
  int count=Iterators.size(scanner.iterator());
  assertEquals("count == " + count,0,count);
  getConnector().tableOperations().flush(tableName,null,null,true);
  getConnector().tableOperations().setProperty(tableName,Property.TABLE_MAJC_RATIO.getKey(),"1.0");
  sleepUninterruptibly(4,TimeUnit.SECONDS);
  FunctionalTestUtils.checkRFiles(c,tableName,1,1,0,0);
  bw.close();
  count=Iterables.size(scanner);
  if (count != 0)   throw new Exception("count == " + count);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.DeleteRowsIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=5 * 60 * 1000) public void testDeleteAllRows() throws Exception {
  Connector c=getConnector();
  String[] tableNames=this.getUniqueNames(20);
  for (  String tableName : tableNames) {
    c.tableOperations().create(tableName);
    c.tableOperations().deleteRows(tableName,null,null);
    Scanner scanner=c.createScanner(tableName,Authorizations.EMPTY);
    assertEquals(0,Iterators.size(scanner.iterator()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.DurabilityIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=4 * 60 * 1000) public void testSync() throws Exception {
  String tableNames[]=init();
  writeSome(tableNames[0],N);
  restartTServer();
  assertEquals(N,readSome(tableNames[0]));
  cleanup(tableNames);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=4 * 60 * 1000) public void testMetaDurability() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.instanceOperations().setProperty(Property.TABLE_DURABILITY.getKey(),"none");
  Map<String,String> props=map(c.tableOperations().getProperties(MetadataTable.NAME));
  assertEquals("sync",props.get(Property.TABLE_DURABILITY.getKey()));
  c.tableOperations().create(tableName);
  props=map(c.tableOperations().getProperties(tableName));
  assertEquals("none",props.get(Property.TABLE_DURABILITY.getKey()));
  restartTServer();
  assertTrue(c.tableOperations().exists(tableName));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=4 * 60 * 1000) public void testFlush() throws Exception {
  String tableNames[]=init();
  writeSome(tableNames[1],N);
  restartTServer();
  assertEquals(N,readSome(tableNames[1]));
  cleanup(tableNames);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ExamplesIT </h4><pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClasspath() throws Exception {
  Entry<Integer,String> entry=getCluster().getClusterControl().execWithStdout(Main.class,new String[]{"classpath"});
  assertEquals(0,entry.getKey().intValue());
  String result=entry.getValue();
  int level1=result.indexOf("Level 1");
  int level2=result.indexOf("Level 2");
  int level3=result.indexOf("Level 3");
  int level4=result.indexOf("Level 4");
  assertTrue("Level 1 classloader not present.",level1 >= 0);
  assertTrue("Level 2 classloader not present.",level2 > 0);
  assertTrue("Level 3 classloader not present.",level3 > 0);
  assertTrue("Level 4 classloader not present.",level4 > 0);
  assertTrue(level1 < level2);
  assertTrue(level2 < level3);
  assertTrue(level3 < level4);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAgeoffFilter() throws Exception {
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  is=new IteratorSetting(10,AgeOffFilter.class);
  AgeOffFilter.setTTL(is,1000L);
  c.tableOperations().attachIterator(tableName,is);
  sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
  bw=c.createBatchWriter(tableName,bwc);
  Mutation m=new Mutation("foo");
  m.put("a","b","c");
  bw.addMutation(m);
  bw.close();
  sleepUninterruptibly(1,TimeUnit.SECONDS);
  assertEquals(0,Iterators.size(c.createScanner(tableName,Authorizations.EMPTY).iterator()));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-21 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDirList() throws Exception {
  String[] names=getUniqueNames(3);
  String dirTable=names[0], indexTable=names[1], dataTable=names[2];
  String[] args;
  String dirListDirectory;
switch (getClusterType()) {
case MINI:
    dirListDirectory=((MiniAccumuloClusterImpl)getCluster()).getConfig().getDir().getAbsolutePath();
  break;
case STANDALONE:
dirListDirectory=((StandaloneAccumuloCluster)getCluster()).getAccumuloHome();
break;
default :
throw new RuntimeException("Unknown cluster type");
}
assumeTrue(new File(dirListDirectory).exists());
if (saslEnabled) {
args=new String[]{"-i",instance,"-z",keepers,"-u",user,"--keytab",keytab,"--dirTable",dirTable,"--indexTable",indexTable,"--dataTable",dataTable,"--vis",visibility,"--chunkSize",Integer.toString(10000),dirListDirectory};
}
 else {
args=new String[]{"-i",instance,"-z",keepers,"-u",user,"-p",passwd,"--dirTable",dirTable,"--indexTable",indexTable,"--dataTable",dataTable,"--vis",visibility,"--chunkSize",Integer.toString(10000),dirListDirectory};
}
Entry<Integer,String> entry=getClusterControl().execWithStdout(Ingest.class,args);
assertEquals("Got non-zero return code. Stdout=" + entry.getValue(),0,entry.getKey().intValue());
String expectedFile;
switch (getClusterType()) {
case MINI:
expectedFile="accumulo-site.xml";
break;
case STANDALONE:
expectedFile="LICENSE";
break;
default :
throw new RuntimeException("Unknown cluster type");
}
if (saslEnabled) {
args=new String[]{"-i",instance,"-z",keepers,"--keytab",keytab,"-u",user,"-t",indexTable,"--auths",auths,"--search","--path",expectedFile};
}
 else {
args=new String[]{"-i",instance,"-z",keepers,"-p",passwd,"-u",user,"-t",indexTable,"--auths",auths,"--search","--path",expectedFile};
}
entry=getClusterControl().execWithStdout(QueryUtil.class,args);
if (ClusterType.MINI == getClusterType()) {
MiniAccumuloClusterImpl impl=(MiniAccumuloClusterImpl)cluster;
for (LogWriter writer : impl.getLogWriters()) {
writer.flush();
}
}
log.info("result " + entry.getValue());
assertEquals(0,entry.getKey().intValue());
assertTrue(entry.getValue().contains(expectedFile));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMaxMutationConstraint() throws Exception {
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().addConstraint(tableName,MaxMutationSize.class.getName());
  TestIngest.Opts opts=new TestIngest.Opts();
  opts.rows=1;
  opts.cols=1000;
  opts.setTableName(tableName);
  if (saslEnabled) {
    opts.updateKerberosCredentials(cluster.getClientConfig());
  }
 else {
    opts.setPrincipal(getAdminPrincipal());
  }
  try {
    TestIngest.ingest(c,opts,bwOpts);
  }
 catch (  MutationsRejectedException ex) {
    assertEquals(1,ex.getConstraintViolationSummaries().size());
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBloomFilters() throws Exception {
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_BLOOM_ENABLED.getKey(),"true");
  String[] args;
  if (saslEnabled) {
    args=new String[]{"--seed","7","-i",instance,"-z",keepers,"-u",user,"--keytab",keytab,"--num","100000","--min","0","--max","1000000000","--size","50","--batchMemory","2M","--batchLatency","60s","--batchThreads","3","-t",tableName};
  }
 else {
    args=new String[]{"--seed","7","-i",instance,"-z",keepers,"-u",user,"-p",passwd,"--num","100000","--min","0","--max","1000000000","--size","50","--batchMemory","2M","--batchLatency","60s","--batchThreads","3","-t",tableName};
  }
  goodExec(RandomBatchWriter.class,args);
  c.tableOperations().flush(tableName,null,null,true);
  long diff=0, diff2=0;
  for (int i=0; i < 2; i++) {
    long now=System.currentTimeMillis();
    if (saslEnabled) {
      args=new String[]{"--seed","7","-i",instance,"-z",keepers,"-u",user,"--keytab",keytab,"--num","10000","--min","0","--max","1000000000","--size","50","--scanThreads","4","-t",tableName};
    }
 else {
      args=new String[]{"--seed","7","-i",instance,"-z",keepers,"-u",user,"-p",passwd,"--num","10000","--min","0","--max","1000000000","--size","50","--scanThreads","4","-t",tableName};
    }
    goodExec(RandomBatchScanner.class,args);
    diff=System.currentTimeMillis() - now;
    now=System.currentTimeMillis();
    if (saslEnabled) {
      args=new String[]{"--seed","8","-i",instance,"-z",keepers,"-u",user,"--keytab",keytab,"--num","10000","--min","0","--max","1000000000","--size","50","--scanThreads","4","-t",tableName};
    }
 else {
      args=new String[]{"--seed","8","-i",instance,"-z",keepers,"-u",user,"-p",passwd,"--num","10000","--min","0","--max","1000000000","--size","50","--scanThreads","4","-t",tableName};
    }
    int retCode=getClusterControl().exec(RandomBatchScanner.class,args);
    assertEquals(1,retCode);
    diff2=System.currentTimeMillis() - now;
    if (diff2 < diff)     break;
  }
  assertTrue(diff2 < diff);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTrace() throws Exception {
  Process trace=null;
  if (ClusterType.MINI == getClusterType()) {
    MiniAccumuloClusterImpl impl=(MiniAccumuloClusterImpl)cluster;
    trace=impl.exec(TraceServer.class);
    while (!c.tableOperations().exists("trace"))     sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
  }
  String[] args;
  if (saslEnabled) {
    args=new String[]{"-i",instance,"-z",keepers,"-u",user,"--keytab",keytab,"-C","-D","-c"};
  }
 else {
    args=new String[]{"-i",instance,"-z",keepers,"-u",user,"-p",passwd,"-C","-D","-c"};
  }
  Entry<Integer,String> pair=cluster.getClusterControl().execWithStdout(TracingExample.class,args);
  Assert.assertEquals("Expected return code of zero. STDOUT=" + pair.getValue(),0,pair.getKey().intValue());
  String result=pair.getValue();
  Pattern pattern=Pattern.compile("TraceID: ([0-9a-f]+)");
  Matcher matcher=pattern.matcher(result);
  int count=0;
  while (matcher.find()) {
    if (saslEnabled) {
      args=new String[]{"-i",instance,"-z",keepers,"-u",user,"--keytab",keytab,"--traceid",matcher.group(1)};
    }
 else {
      args=new String[]{"-i",instance,"-z",keepers,"-u",user,"-p",passwd,"--traceid",matcher.group(1)};
    }
    pair=cluster.getClusterControl().execWithStdout(TraceDumpExample.class,args);
    count++;
  }
  assertTrue(count > 0);
  assertTrue("Output did not contain myApp@myHost",pair.getValue().contains("myApp@myHost"));
  if (ClusterType.MINI == getClusterType() && null != trace) {
    trace.destroy();
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStatsCombiner() throws Exception {
  String table=getUniqueNames(1)[0];
  c.tableOperations().create(table);
  is=new IteratorSetting(10,StatsCombiner.class);
  StatsCombiner.setCombineAllColumns(is,true);
  c.tableOperations().attachIterator(table,is);
  bw=c.createBatchWriter(table,bwc);
  Mutation m=new Mutation("foo");
  m.put("a","b","1");
  bw.addMutation(m);
  m=new Mutation("foo");
  m.put("a","b","3");
  bw.addMutation(m);
  bw.flush();
  Iterator<Entry<Key,Value>> iter=c.createScanner(table,Authorizations.EMPTY).iterator();
  assertTrue("Iterator had no results",iter.hasNext());
  Entry<Key,Value> e=iter.next();
  assertEquals("Results ","1,3,4,2",e.getValue().toString());
  assertFalse("Iterator had additional results",iter.hasNext());
  m=new Mutation("foo");
  m.put("a","b","0,20,20,2");
  bw.addMutation(m);
  bw.close();
  iter=c.createScanner(table,Authorizations.EMPTY).iterator();
  assertTrue("Iterator had no results",iter.hasNext());
  e=iter.next();
  assertEquals("Results ","0,20,24,4",e.getValue().toString());
  assertFalse("Iterator had additional results",iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.GarbageCollectorIT </h4><pre class="type-9 type-13 type-11 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProperPortAdvertisement() throws Exception {
  Connector conn=getConnector();
  Instance instance=conn.getInstance();
  ZooReaderWriter zk=new ZooReaderWriter(cluster.getZooKeepers(),30000,OUR_SECRET);
  String path=ZooUtil.getRoot(instance) + Constants.ZGC_LOCK;
  for (int i=0; i < 5; i++) {
    List<String> locks;
    try {
      locks=zk.getChildren(path,null);
    }
 catch (    NoNodeException e) {
      Thread.sleep(5000);
      continue;
    }
    if (locks != null && locks.size() > 0) {
      Collections.sort(locks);
      String lockPath=path + "/" + locks.get(0);
      String gcLoc=new String(zk.getData(lockPath,null));
      Assert.assertTrue("Found unexpected data in zookeeper for GC location: " + gcLoc,gcLoc.startsWith(Service.GC_CLIENT.name()));
      int loc=gcLoc.indexOf(ServerServices.SEPARATOR_CHAR);
      Assert.assertNotEquals("Could not find split point of GC location for: " + gcLoc,-1,loc);
      String addr=gcLoc.substring(loc + 1);
      int addrSplit=addr.indexOf(':');
      Assert.assertNotEquals("Could not find split of GC host:port for: " + addr,-1,addrSplit);
      String host=addr.substring(0,addrSplit), port=addr.substring(addrSplit + 1);
      Assert.assertNotEquals("0.0.0.0",host);
      Assert.assertNotEquals(0,Integer.parseInt(port));
      return;
    }
    Thread.sleep(5000);
  }
  Assert.fail("Could not find advertised GC address");
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidDelete() throws Exception {
  killMacGc();
  String table=getUniqueNames(1)[0];
  getConnector().tableOperations().create(table);
  BatchWriter bw2=getConnector().createBatchWriter(table,new BatchWriterConfig());
  Mutation m1=new Mutation("r1");
  m1.put("cf1","cq1","v1");
  bw2.addMutation(m1);
  bw2.close();
  getConnector().tableOperations().flush(table,null,null,true);
  getConnector().securityOperations().grantTablePermission(getConnector().whoami(),MetadataTable.NAME,TablePermission.WRITE);
  BatchWriter bw3=getConnector().createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  bw3.addMutation(createDelMutation("","","",""));
  bw3.addMutation(createDelMutation("","testDel","test","valueTest"));
  bw3.addMutation(createDelMutation("/","","",""));
  bw3.close();
  Process gc=cluster.exec(SimpleGarbageCollector.class);
  try {
    String output="";
    while (!output.contains("Ignoring invalid deletion candidate")) {
      sleepUninterruptibly(250,TimeUnit.MILLISECONDS);
      try {
        output=FunctionalTestUtils.readAll(cluster,SimpleGarbageCollector.class,gc);
      }
 catch (      IOException ioe) {
        log.error("Could not read all from cluster.",ioe);
      }
    }
  }
  finally {
    gc.destroy();
  }
  Scanner scanner=getConnector().createScanner(table,Authorizations.EMPTY);
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  Assert.assertEquals("r1",entry.getKey().getRow().toString());
  Assert.assertEquals("cf1",entry.getKey().getColumnFamily().toString());
  Assert.assertEquals("cq1",entry.getKey().getColumnQualifier().toString());
  Assert.assertEquals("v1",entry.getValue().toString());
  Assert.assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.KerberosIT </h4><pre class="type-9 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelegationTokenAsDifferentUser() throws Exception {
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  log.info("Logged in as {}",rootUser.getPrincipal());
  final AuthenticationToken delegationToken;
  try {
    delegationToken=ugi.doAs(new PrivilegedExceptionAction<AuthenticationToken>(){
      @Override public AuthenticationToken run() throws Exception {
        Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
        log.info("Created connector as {}",rootUser.getPrincipal());
        assertEquals(rootUser.getPrincipal(),conn.whoami());
        return conn.securityOperations().getDelegationToken(new DelegationTokenConfig());
      }
    }
);
  }
 catch (  UndeclaredThrowableException ex) {
    throw ex;
  }
  UserGroupInformation userWithoutPrivs=UserGroupInformation.createUserForTesting("fake_user",new String[0]);
  try {
    userWithoutPrivs.doAs(new PrivilegedExceptionAction<Void>(){
      @Override public Void run() throws Exception {
        mac.getConnector("some_other_user",delegationToken);
        return null;
      }
    }
);
    fail("Using a delegation token as a different user should throw an exception");
  }
 catch (  UndeclaredThrowableException e) {
    Throwable cause=e.getCause();
    assertNotNull(cause);
    assertTrue("Expected cause to be AccumuloSecurityException, but was " + cause.getClass(),cause instanceof AccumuloSecurityException);
  }
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDelegationToken() throws Exception {
  final String tableName=getUniqueNames(1)[0];
  UserGroupInformation root=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  log.info("Logged in as {}",rootUser.getPrincipal());
  final int numRows=100, numColumns=10;
  final AuthenticationToken delegationToken=root.doAs(new PrivilegedExceptionAction<AuthenticationToken>(){
    @Override public AuthenticationToken run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      log.info("Created connector as {}",rootUser.getPrincipal());
      assertEquals(rootUser.getPrincipal(),conn.whoami());
      conn.tableOperations().create(tableName);
      BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
      for (int r=0; r < numRows; r++) {
        Mutation m=new Mutation(Integer.toString(r));
        for (int c=0; c < numColumns; c++) {
          String col=Integer.toString(c);
          m.put(col,col,col);
        }
        bw.addMutation(m);
      }
      bw.close();
      return conn.securityOperations().getDelegationToken(new DelegationTokenConfig());
    }
  }
);
  UserGroupInformation userWithoutPrivs=UserGroupInformation.createUserForTesting("fake_user",new String[0]);
  int recordsSeen=userWithoutPrivs.doAs(new PrivilegedExceptionAction<Integer>(){
    @Override public Integer run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),delegationToken);
      BatchScanner bs=conn.createBatchScanner(tableName,Authorizations.EMPTY,2);
      bs.setRanges(Collections.singleton(new Range()));
      int recordsSeen=Iterables.size(bs);
      bs.close();
      return recordsSeen;
    }
  }
);
  assertEquals(numRows * numColumns,recordsSeen);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=AccumuloException.class) public void testDelegationTokenWithInvalidLifetime() throws Throwable {
  UserGroupInformation root=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  log.info("Logged in as {}",rootUser.getPrincipal());
  try {
    root.doAs(new PrivilegedExceptionAction<AuthenticationToken>(){
      @Override public AuthenticationToken run() throws Exception {
        Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
        log.info("Created connector as {}",rootUser.getPrincipal());
        assertEquals(rootUser.getPrincipal(),conn.whoami());
        return conn.securityOperations().getDelegationToken(new DelegationTokenConfig().setTokenLifetime(Long.MAX_VALUE,TimeUnit.MILLISECONDS));
      }
    }
);
  }
 catch (  UndeclaredThrowableException e) {
    Throwable cause=e.getCause();
    if (null != cause) {
      throw cause;
    }
 else {
      throw e;
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserPrivilegesForTable() throws Exception {
  String user1=testName.getMethodName();
  final File user1Keytab=new File(kdc.getKeytabDir(),user1 + ".keytab");
  if (user1Keytab.exists() && !user1Keytab.delete()) {
    log.warn("Unable to delete {}",user1Keytab);
  }
  kdc.createPrincipal(user1Keytab,user1);
  final String qualifiedUser1=kdc.qualifyUser(user1);
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(qualifiedUser1,user1Keytab.getAbsolutePath());
  log.info("Logged in as {}",user1);
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(qualifiedUser1,new KerberosToken());
      log.info("Created connector as {}",qualifiedUser1);
      for (      SystemPermission perm : SystemPermission.values()) {
        assertFalse(conn.securityOperations().hasSystemPermission(qualifiedUser1,perm));
      }
      return null;
    }
  }
);
  final String table=testName.getMethodName() + "_user_table";
  final String viz="viz";
  ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      conn.tableOperations().create(table);
      conn.securityOperations().grantTablePermission(qualifiedUser1,table,TablePermission.READ);
      conn.securityOperations().grantTablePermission(qualifiedUser1,table,TablePermission.WRITE);
      conn.securityOperations().grantTablePermission(qualifiedUser1,table,TablePermission.ALTER_TABLE);
      conn.securityOperations().grantTablePermission(qualifiedUser1,table,TablePermission.DROP_TABLE);
      conn.securityOperations().changeUserAuthorizations(qualifiedUser1,new Authorizations(viz));
      return null;
    }
  }
);
  ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(qualifiedUser1,user1Keytab.getAbsolutePath());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(qualifiedUser1,new KerberosToken());
      final long ts=1000l;
      BatchWriter bw=conn.createBatchWriter(table,new BatchWriterConfig());
      Mutation m=new Mutation("a");
      m.put("b","c",new ColumnVisibility(viz.getBytes()),ts,"d");
      bw.addMutation(m);
      bw.close();
      conn.tableOperations().compact(table,new CompactionConfig().setWait(true).setFlush(true));
      conn.tableOperations().setProperty(table,Property.TABLE_BLOOM_ENABLED.getKey(),"true");
      Scanner s=conn.createScanner(table,new Authorizations(viz));
      Iterator<Entry<Key,Value>> iter=s.iterator();
      assertTrue("No results from iterator",iter.hasNext());
      Entry<Key,Value> entry=iter.next();
      assertEquals(new Key("a","b","c",viz,ts),entry.getKey());
      assertEquals(new Value("d".getBytes()),entry.getValue());
      assertFalse("Had more results from iterator",iter.hasNext());
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetDelegationTokenDenied() throws Exception {
  String newUser=testName.getMethodName();
  final File newUserKeytab=new File(kdc.getKeytabDir(),newUser + ".keytab");
  if (newUserKeytab.exists() && !newUserKeytab.delete()) {
    log.warn("Unable to delete {}",newUserKeytab);
  }
  kdc.createPrincipal(newUserKeytab,newUser);
  final String qualifiedNewUser=kdc.qualifyUser(newUser);
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(qualifiedNewUser,newUserKeytab.getAbsolutePath());
  try {
    ugi.doAs(new PrivilegedExceptionAction<Void>(){
      @Override public Void run() throws Exception {
        Connector conn=mac.getConnector(qualifiedNewUser,new KerberosToken());
        log.info("Created connector as {}",qualifiedNewUser);
        assertEquals(qualifiedNewUser,conn.whoami());
        conn.securityOperations().getDelegationToken(new DelegationTokenConfig());
        return null;
      }
    }
);
  }
 catch (  UndeclaredThrowableException ex) {
    assertTrue(ex.getCause() instanceof AccumuloSecurityException);
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelegationTokenWithReducedLifetime() throws Throwable {
  UserGroupInformation root=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  log.info("Logged in as {}",rootUser.getPrincipal());
  final AuthenticationToken dt=root.doAs(new PrivilegedExceptionAction<AuthenticationToken>(){
    @Override public AuthenticationToken run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      log.info("Created connector as {}",rootUser.getPrincipal());
      assertEquals(rootUser.getPrincipal(),conn.whoami());
      return conn.securityOperations().getDelegationToken(new DelegationTokenConfig().setTokenLifetime(5,TimeUnit.MINUTES));
    }
  }
);
  AuthenticationTokenIdentifier identifier=((DelegationTokenImpl)dt).getIdentifier();
  assertTrue("Expected identifier to expire in no more than 5 minutes: " + identifier,identifier.getExpirationDate() - identifier.getIssueDate() <= (5 * 60 * 1000));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestartedMasterReusesSecretKey() throws Exception {
  UserGroupInformation root=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  log.info("Logged in as {}",rootUser.getPrincipal());
  final AuthenticationToken delegationToken1=root.doAs(new PrivilegedExceptionAction<AuthenticationToken>(){
    @Override public AuthenticationToken run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      log.info("Created connector as {}",rootUser.getPrincipal());
      assertEquals(rootUser.getPrincipal(),conn.whoami());
      AuthenticationToken token=conn.securityOperations().getDelegationToken(new DelegationTokenConfig());
      assertTrue("Could not get tables with delegation token",mac.getConnector(rootUser.getPrincipal(),token).tableOperations().list().size() > 0);
      return token;
    }
  }
);
  log.info("Stopping master");
  mac.getClusterControl().stop(ServerType.MASTER);
  Thread.sleep(5000);
  log.info("Restarting master");
  mac.getClusterControl().start(ServerType.MASTER);
  root.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),delegationToken1);
      assertTrue("Could not get tables with delegation token",conn.tableOperations().list().size() > 0);
      return null;
    }
  }
);
  final AuthenticationToken delegationToken2=root.doAs(new PrivilegedExceptionAction<AuthenticationToken>(){
    @Override public AuthenticationToken run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      log.info("Created connector as {}",rootUser.getPrincipal());
      assertEquals(rootUser.getPrincipal(),conn.whoami());
      AuthenticationToken token=conn.securityOperations().getDelegationToken(new DelegationTokenConfig());
      assertTrue("Could not get tables with delegation token",mac.getConnector(rootUser.getPrincipal(),token).tableOperations().list().size() > 0);
      return token;
    }
  }
);
  DelegationTokenImpl dt1=(DelegationTokenImpl)delegationToken1;
  DelegationTokenImpl dt2=(DelegationTokenImpl)delegationToken2;
  assertEquals(dt1.getIdentifier().getKeyId(),dt2.getIdentifier().getKeyId());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNewUser() throws Exception {
  String newUser=testName.getMethodName();
  final File newUserKeytab=new File(kdc.getKeytabDir(),newUser + ".keytab");
  if (newUserKeytab.exists() && !newUserKeytab.delete()) {
    log.warn("Unable to delete {}",newUserKeytab);
  }
  kdc.createPrincipal(newUserKeytab,newUser);
  final String newQualifiedUser=kdc.qualifyUser(newUser);
  final HashSet<String> users=Sets.newHashSet(rootUser.getPrincipal());
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  log.info("Logged in as {}",rootUser.getPrincipal());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      log.info("Created connector as {}",rootUser.getPrincipal());
      assertEquals(rootUser.getPrincipal(),conn.whoami());
      createTableWithDataAndCompact(conn);
      assertEquals(users,conn.securityOperations().listLocalUsers());
      return null;
    }
  }
);
  ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(newQualifiedUser,newUserKeytab.getAbsolutePath());
  log.info("Logged in as {}",newQualifiedUser);
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(newQualifiedUser,new KerberosToken());
      log.info("Created connector as {}",newQualifiedUser);
      assertEquals(newQualifiedUser,conn.whoami());
      for (      SystemPermission perm : SystemPermission.values()) {
        assertFalse(conn.securityOperations().hasSystemPermission(newQualifiedUser,perm));
      }
      users.add(newQualifiedUser);
      assertEquals(users,conn.securityOperations().listLocalUsers());
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.KerberosProxyIT </h4><pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testProxyClient() throws Exception {
  ClusterUser rootUser=kdc.getRootUser();
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  TSocket socket=new TSocket(hostname,proxyPort);
  log.info("Connecting to proxy with server primary '" + proxyPrimary + "' running on "+ hostname);
  TSaslClientTransport transport=new TSaslClientTransport("GSSAPI",null,proxyPrimary,hostname,Collections.singletonMap("javax.security.sasl.qop","auth"),null,socket);
  final UGIAssumingTransport ugiTransport=new UGIAssumingTransport(transport,ugi);
  ugiTransport.open();
  AccumuloProxy.Client.Factory factory=new AccumuloProxy.Client.Factory();
  Client client=factory.getClient(new TCompactProtocol(ugiTransport),new TCompactProtocol(ugiTransport));
  ByteBuffer login=client.login(rootUser.getPrincipal(),Collections.<String,String>emptyMap());
  String table="table";
  if (!client.tableExists(login,table)) {
    client.createTable(login,table,true,TimeType.MILLIS);
  }
  String writer=client.createWriter(login,table,new WriterOptions());
  Map<ByteBuffer,List<ColumnUpdate>> updates=new HashMap<>();
  ColumnUpdate update=new ColumnUpdate(ByteBuffer.wrap("cf1".getBytes(UTF_8)),ByteBuffer.wrap("cq1".getBytes(UTF_8)));
  update.setValue(ByteBuffer.wrap("value1".getBytes(UTF_8)));
  updates.put(ByteBuffer.wrap("row1".getBytes(UTF_8)),Collections.<ColumnUpdate>singletonList(update));
  update=new ColumnUpdate(ByteBuffer.wrap("cf2".getBytes(UTF_8)),ByteBuffer.wrap("cq2".getBytes(UTF_8)));
  update.setValue(ByteBuffer.wrap("value2".getBytes(UTF_8)));
  updates.put(ByteBuffer.wrap("row2".getBytes(UTF_8)),Collections.<ColumnUpdate>singletonList(update));
  client.update(writer,updates);
  client.flush(writer);
  client.closeWriter(writer);
  String scanner=client.createScanner(login,table,new ScanOptions());
  ScanResult results=client.nextK(scanner,10);
  assertEquals(2,results.getResults().size());
  KeyValue kv=results.getResults().get(0);
  Key k=kv.key;
  ByteBuffer v=kv.value;
  assertEquals(ByteBuffer.wrap("row1".getBytes(UTF_8)),k.row);
  assertEquals(ByteBuffer.wrap("cf1".getBytes(UTF_8)),k.colFamily);
  assertEquals(ByteBuffer.wrap("cq1".getBytes(UTF_8)),k.colQualifier);
  assertEquals(ByteBuffer.wrap(new byte[0]),k.colVisibility);
  assertEquals(ByteBuffer.wrap("value1".getBytes(UTF_8)),v);
  kv=results.getResults().get(1);
  k=kv.key;
  v=kv.value;
  assertEquals(ByteBuffer.wrap("row2".getBytes(UTF_8)),k.row);
  assertEquals(ByteBuffer.wrap("cf2".getBytes(UTF_8)),k.colFamily);
  assertEquals(ByteBuffer.wrap("cq2".getBytes(UTF_8)),k.colQualifier);
  assertEquals(ByteBuffer.wrap(new byte[0]),k.colVisibility);
  assertEquals(ByteBuffer.wrap("value2".getBytes(UTF_8)),v);
  client.closeScanner(scanner);
  ugiTransport.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.KerberosRenewalIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=TEST_DURATION) public void testReadAndWriteThroughTicketLifetime() throws Exception {
  UserGroupInformation.loginUserFromKeytab(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  log.info("Logged in as {}",rootUser.getPrincipal());
  Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
  log.info("Created connector as {}",rootUser.getPrincipal());
  assertEquals(rootUser.getPrincipal(),conn.whoami());
  long duration=0;
  long last=System.currentTimeMillis();
  while (duration < TICKET_TEST_LIFETIME) {
    createReadWriteDrop(conn);
    Thread.sleep(5000);
    long now=System.currentTimeMillis();
    duration+=now - last;
    last=now;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.LateLastContactIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  Process zombie=cluster.exec(ZombieTServer.class);
  assertEquals(0,zombie.waitFor());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.MasterAssignmentIT </h4><pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  String tableName=super.getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  String tableId=c.tableOperations().tableIdMap().get(tableName);
  TabletLocationState newTablet;
  do {
    UtilWaitThread.sleep(250);
    newTablet=getTabletLocationState(c,tableId);
  }
 while (newTablet.current == null);
  assertNull(newTablet.last);
  assertNull(newTablet.future);
  BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("a");
  m.put("b","c","d");
  bw.addMutation(m);
  bw.close();
  c.tableOperations().flush(tableName,null,null,true);
  TabletLocationState flushed=getTabletLocationState(c,tableId);
  assertEquals(newTablet.current,flushed.current);
  assertEquals(flushed.current,flushed.last);
  assertNull(newTablet.future);
  c.tableOperations().offline(tableName,true);
  TabletLocationState offline=getTabletLocationState(c,tableId);
  assertNull(offline.future);
  assertNull(offline.current);
  assertEquals(flushed.current,offline.last);
  c.tableOperations().online(tableName,true);
  TabletLocationState online=getTabletLocationState(c,tableId);
  assertNull(online.future);
  assertNotNull(online.current);
  assertEquals(online.current,online.last);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.MergeIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void mergeSize() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().addSplits(tableName,splits("a b c d e f g h i j k l m n o p q r s t u v w x y z".split(" ")));
  BatchWriter bw=c.createBatchWriter(tableName,null);
  for (  String row : "c e f y".split(" ")) {
    Mutation m=new Mutation(row);
    m.put("cf","cq","mersydotesanddozeydotesanlittolamsiedives");
    bw.addMutation(m);
  }
  bw.close();
  c.tableOperations().flush(tableName,null,null,true);
  Merge merge=new Merge();
  merge.mergomatic(c,tableName,null,null,100,false);
  assertArrayEquals("b c d e f x y".split(" "),toStrings(c.tableOperations().listSplits(tableName)));
  merge.mergomatic(c,tableName,null,null,100,true);
  assertArrayEquals("c e f y".split(" "),toStrings(c.tableOperations().listSplits(tableName)));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void merge() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().addSplits(tableName,splits("a b c d e f g h i j k".split(" ")));
  BatchWriter bw=c.createBatchWriter(tableName,null);
  for (  String row : "a b c d e f g h i j k".split(" ")) {
    Mutation m=new Mutation(row);
    m.put("cf","cq","value");
    bw.addMutation(m);
  }
  bw.close();
  c.tableOperations().flush(tableName,null,null,true);
  c.tableOperations().merge(tableName,new Text("c1"),new Text("f1"));
  assertEquals(8,c.tableOperations().listSplits(tableName).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.MetadataIT </h4><pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFlushAndCompact() throws Exception {
  Connector c=getConnector();
  String tableNames[]=getUniqueNames(2);
  c.tableOperations().create(tableNames[0]);
  Scanner rootScanner=c.createScanner(RootTable.NAME,Authorizations.EMPTY);
  rootScanner.setRange(MetadataSchema.TabletsSection.getRange());
  rootScanner.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  Set<String> files1=new HashSet<String>();
  for (  Entry<Key,Value> entry : rootScanner)   files1.add(entry.getKey().getColumnQualifier().toString());
  c.tableOperations().create(tableNames[1]);
  c.tableOperations().flush(MetadataTable.NAME,null,null,true);
  Set<String> files2=new HashSet<String>();
  for (  Entry<Key,Value> entry : rootScanner)   files2.add(entry.getKey().getColumnQualifier().toString());
  Assert.assertTrue(files2.size() > 0);
  Assert.assertNotEquals(files1,files2);
  c.tableOperations().compact(MetadataTable.NAME,null,null,false,true);
  Set<String> files3=new HashSet<String>();
  for (  Entry<Key,Value> entry : rootScanner)   files3.add(entry.getKey().getColumnQualifier().toString());
  Assert.assertNotEquals(files2,files3);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void mergeMeta() throws Exception {
  Connector c=getConnector();
  String[] names=getUniqueNames(5);
  SortedSet<Text> splits=new TreeSet<Text>();
  for (  String id : "1 2 3 4 5".split(" ")) {
    splits.add(new Text(id));
  }
  c.tableOperations().addSplits(MetadataTable.NAME,splits);
  for (  String tableName : names) {
    c.tableOperations().create(tableName);
  }
  c.tableOperations().merge(MetadataTable.NAME,null,null);
  Scanner s=c.createScanner(RootTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.DeletesSection.getRange());
  while (Iterators.size(s.iterator()) == 0) {
    sleepUninterruptibly(100,TimeUnit.MILLISECONDS);
  }
  assertEquals(0,c.tableOperations().listSplits(MetadataTable.NAME).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.MetadataMaxFilesIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  SortedSet<Text> splits=new TreeSet<Text>();
  for (int i=0; i < 1000; i++) {
    splits.add(new Text(String.format("%03d",i)));
  }
  c.tableOperations().setProperty(MetadataTable.NAME,Property.TABLE_SPLIT_THRESHOLD.getKey(),"10000");
  sleepUninterruptibly(5,TimeUnit.SECONDS);
  for (int i=0; i < 5; i++) {
    String tableName="table" + i;
    log.info("Creating " + tableName);
    c.tableOperations().create(tableName);
    log.info("adding splits");
    c.tableOperations().addSplits(tableName,splits);
    log.info("flushing");
    c.tableOperations().flush(MetadataTable.NAME,null,null,true);
    c.tableOperations().flush(RootTable.NAME,null,null,true);
  }
  log.info("shutting down");
  assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  cluster.stop();
  log.info("starting up");
  cluster.start();
  Credentials creds=new Credentials("root",new PasswordToken(ROOT_PASSWORD));
  while (true) {
    MasterMonitorInfo stats=null;
    Client client=null;
    try {
      ClientContext context=new ClientContext(c.getInstance(),creds,getClientConfig());
      client=MasterClient.getConnectionWithRetry(context);
      log.info("Fetching stats");
      stats=client.getMasterStats(Tracer.traceInfo(),context.rpcCreds());
    }
  finally {
      if (client != null)       MasterClient.close(client);
    }
    int tablets=0;
    for (    TabletServerStatus tserver : stats.tServerInfo) {
      for (      Entry<String,TableInfo> entry : tserver.tableMap.entrySet()) {
        if (entry.getKey().startsWith("!") || entry.getKey().startsWith("+"))         continue;
        tablets+=entry.getValue().onlineTablets;
      }
    }
    log.info("Online tablets " + tablets);
    if (tablets == 5005)     break;
    sleepUninterruptibly(1,TimeUnit.SECONDS);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.MetadataSplitIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  assertEquals(1,c.tableOperations().listSplits(MetadataTable.NAME).size());
  c.tableOperations().setProperty(MetadataTable.NAME,Property.TABLE_SPLIT_THRESHOLD.getKey(),"500");
  for (int i=0; i < 10; i++) {
    c.tableOperations().create("table" + i);
    c.tableOperations().flush(MetadataTable.NAME,null,null,true);
  }
  sleepUninterruptibly(10,TimeUnit.SECONDS);
  assertTrue(c.tableOperations().listSplits(MetadataTable.NAME).size() > 2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.NativeMapIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBinary(){
  NativeMap nm=new NativeMap();
  byte emptyBytes[]=new byte[0];
  for (int i=0; i < 256; i++) {
    for (int j=0; j < 256; j++) {
      byte row[]=new byte[]{'r',(byte)(0xff & i),(byte)(0xff & j)};
      byte data[]=new byte[]{'v',(byte)(0xff & i),(byte)(0xff & j)};
      Key k=new Key(row,emptyBytes,emptyBytes,emptyBytes,1);
      Value v=new Value(data);
      nm.put(k,v);
    }
  }
  Iterator<Entry<Key,Value>> iter=nm.iterator();
  for (int i=0; i < 256; i++) {
    for (int j=0; j < 256; j++) {
      byte row[]=new byte[]{'r',(byte)(0xff & i),(byte)(0xff & j)};
      byte data[]=new byte[]{'v',(byte)(0xff & i),(byte)(0xff & j)};
      Key k=new Key(row,emptyBytes,emptyBytes,emptyBytes,1);
      Value v=new Value(data);
      assertTrue(iter.hasNext());
      Entry<Key,Value> entry=iter.next();
      assertEquals(k,entry.getKey());
      assertEquals(v,entry.getValue());
    }
  }
  assertFalse(iter.hasNext());
  for (int i=0; i < 256; i++) {
    for (int j=0; j < 256; j++) {
      byte row[]=new byte[]{'r',(byte)(0xff & i),(byte)(0xff & j)};
      byte data[]=new byte[]{'v',(byte)(0xff & i),(byte)(0xff & j)};
      Key k=new Key(row,emptyBytes,emptyBytes,emptyBytes,1);
      Value v=new Value(data);
      Value v2=nm.get(k);
      assertEquals(v,v2);
    }
  }
  nm.delete();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test8(){
  NativeMap nm=new NativeMap();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  tm.put(new Key(new Text("fo")),new Value(new byte[]{'0'}));
  tm.put(new Key(new Text("foo")),new Value(new byte[]{'1'}));
  tm.put(new Key(new Text("foo1")),new Value(new byte[]{'2'}));
  tm.put(new Key(new Text("foo2")),new Value(new byte[]{'3'}));
  for (  Entry<Key,Value> entry : tm.entrySet()) {
    nm.put(entry.getKey(),entry.getValue());
  }
  Iterator<Entry<Key,Value>> iter=nm.iterator();
  for (  Entry<Key,Value> entry : tm.entrySet()) {
    assertTrue(iter.hasNext());
    Entry<Key,Value> entry2=iter.next();
    assertEquals(entry.getKey(),entry2.getKey());
    assertEquals(entry.getValue(),entry2.getValue());
  }
  assertFalse(iter.hasNext());
  nm.delete();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConcurrentIter() throws IOException {
  NativeMap nm=new NativeMap();
  nm.put(nk(0),nv(0));
  nm.put(nk(1),nv(1));
  nm.put(nk(3),nv(3));
  SortedKeyValueIterator<Key,Value> iter=nm.skvIterator();
  nm.put(nk(2),nv(2));
  assertTrue(iter.hasTop());
  assertEquals(iter.getTopKey(),nk(0));
  iter.next();
  assertTrue(iter.hasTop());
  assertEquals(iter.getTopKey(),nk(1));
  iter.next();
  assertTrue(iter.hasTop());
  assertEquals(iter.getTopKey(),nk(2));
  iter.next();
  assertTrue(iter.hasTop());
  assertEquals(iter.getTopKey(),nk(3));
  iter.next();
  assertFalse(iter.hasTop());
  nm.delete();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ReadWriteIT </h4><pre class="type-9 type-11 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiTableTest() throws Exception {
  final String instance=cluster.getInstanceName();
  final String keepers=cluster.getZooKeepers();
  final ClusterControl control=cluster.getClusterControl();
  final String prefix=getClass().getSimpleName() + "_" + testName.getMethodName();
  ExecutorService svc=Executors.newFixedThreadPool(2);
  Future<Integer> p1=svc.submit(new Callable<Integer>(){
    @Override public Integer call(){
      try {
        ClientConfiguration clientConf=cluster.getClientConfig();
        if (clientConf.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
          String principal=getAdminPrincipal();
          AuthenticationToken token=getAdminToken();
          assertTrue("Expected KerberosToken, but was " + token.getClass(),token instanceof KerberosToken);
          KerberosToken kt=(KerberosToken)token;
          assertNotNull("Expected keytab in token",kt.getKeytab());
          return control.exec(TestMultiTableIngest.class,args("--count",Integer.toString(ROWS),"-i",instance,"-z",keepers,"--tablePrefix",prefix,"--keytab",kt.getKeytab().getAbsolutePath(),"-u",principal));
        }
        return control.exec(TestMultiTableIngest.class,args("--count",Integer.toString(ROWS),"-u",getAdminPrincipal(),"-i",instance,"-z",keepers,"-p",new String(((PasswordToken)getAdminToken()).getPassword(),UTF_8),"--tablePrefix",prefix));
      }
 catch (      IOException e) {
        log.error("Error running MultiTableIngest",e);
        return -1;
      }
    }
  }
);
  Future<Integer> p2=svc.submit(new Callable<Integer>(){
    @Override public Integer call(){
      try {
        ClientConfiguration clientConf=cluster.getClientConfig();
        if (clientConf.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
          String principal=getAdminPrincipal();
          AuthenticationToken token=getAdminToken();
          assertTrue("Expected KerberosToken, but was " + token.getClass(),token instanceof KerberosToken);
          KerberosToken kt=(KerberosToken)token;
          assertNotNull("Expected keytab in token",kt.getKeytab());
          return control.exec(TestMultiTableIngest.class,args("--count",Integer.toString(ROWS),"--readonly","-i",instance,"-z",keepers,"--tablePrefix",prefix,"--keytab",kt.getKeytab().getAbsolutePath(),"-u",principal));
        }
        return control.exec(TestMultiTableIngest.class,args("--count",Integer.toString(ROWS),"--readonly","-u",getAdminPrincipal(),"-i",instance,"-z",keepers,"-p",new String(((PasswordToken)getAdminToken()).getPassword(),UTF_8),"--tablePrefix",prefix));
      }
 catch (      IOException e) {
        log.error("Error running MultiTableIngest",e);
        return -1;
      }
    }
  }
);
  svc.shutdown();
  while (!svc.isTerminated()) {
    svc.awaitTermination(15,TimeUnit.SECONDS);
  }
  assertEquals(0,p1.get().intValue());
  assertEquals(0,p2.get().intValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.RecoveryWithEmptyRFileIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void replaceMissingRFile() throws Exception {
  log.info("Ingest some data, verify it was stored properly, replace an underlying rfile with an empty one and verify we can scan.");
  Connector connector=getConnector();
  String tableName=getUniqueNames(1)[0];
  ReadWriteIT.ingest(connector,cluster.getClientConfig(),"root",ROWS,COLS,50,0,tableName);
  ReadWriteIT.verify(connector,cluster.getClientConfig(),"root",ROWS,COLS,50,0,tableName);
  connector.tableOperations().flush(tableName,null,null,true);
  connector.tableOperations().offline(tableName,true);
  log.debug("Replacing rfile(s) with empty");
  Scanner meta=connector.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  String tableId=connector.tableOperations().tableIdMap().get(tableName);
  meta.setRange(new Range(new Text(tableId + ";"),new Text(tableId + "<")));
  meta.fetchColumnFamily(DataFileColumnFamily.NAME);
  boolean foundFile=false;
  for (  Entry<Key,Value> entry : meta) {
    foundFile=true;
    Path rfile=new Path(entry.getKey().getColumnQualifier().toString());
    log.debug("Removing rfile '" + rfile + "'");
    cluster.getFileSystem().delete(rfile,false);
    Process info=cluster.exec(CreateEmpty.class,rfile.toString());
    assertEquals(0,info.waitFor());
  }
  meta.close();
  assertTrue(foundFile);
  log.trace("invalidate cached file handles by issuing a compaction");
  connector.tableOperations().online(tableName,true);
  connector.tableOperations().compact(tableName,null,null,false,true);
  log.debug("make sure we can still scan");
  Scanner scan=connector.createScanner(tableName,Authorizations.EMPTY);
  scan.setRange(new Range());
  long cells=0l;
  for (  Entry<Key,Value> entry : scan) {
    if (entry != null)     cells++;
  }
  scan.close();
  assertEquals(0l,cells);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.RestartIT </h4><pre class="type-9 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void restartMasterSplit() throws Exception {
  Connector c=getConnector();
  final String tableName=getUniqueNames(1)[0];
  final AuthenticationToken token=getAdminToken();
  final ClusterControl control=getCluster().getClusterControl();
  VOPTS.setTableName(tableName);
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_SPLIT_THRESHOLD.getKey(),"5K");
  final String[] args;
  if (token instanceof PasswordToken) {
    byte[] password=((PasswordToken)token).getPassword();
    args=new String[]{"-u",getAdminPrincipal(),"-p",new String(password,UTF_8),"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"--rows",Integer.toString(VOPTS.rows),"--table",tableName};
    OPTS.setPrincipal(getAdminPrincipal());
    VOPTS.setPrincipal(getAdminPrincipal());
  }
 else   if (token instanceof KerberosToken) {
    ClusterUser rootUser=getAdminUser();
    args=new String[]{"-u",getAdminPrincipal(),"--keytab",rootUser.getKeytab().getAbsolutePath(),"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"--rows",Integer.toString(VOPTS.rows),"--table",tableName};
    ClientConfiguration clientConfig=cluster.getClientConfig();
    OPTS.updateKerberosCredentials(clientConfig);
    VOPTS.updateKerberosCredentials(clientConfig);
  }
 else {
    throw new RuntimeException("Unknown token");
  }
  Future<Integer> ret=svc.submit(new Callable<Integer>(){
    @Override public Integer call(){
      try {
        return control.exec(TestIngest.class,args);
      }
 catch (      Exception e) {
        log.error("Error running TestIngest",e);
        return -1;
      }
    }
  }
);
  control.stopAllServers(ServerType.MASTER);
  ZooReader zreader=new ZooReader(c.getInstance().getZooKeepers(),c.getInstance().getZooKeepersSessionTimeOut());
  ZooCache zcache=new ZooCache(zreader,null);
  byte[] masterLockData;
  do {
    masterLockData=ZooLock.getLockData(zcache,ZooUtil.getRoot(c.getInstance()) + Constants.ZMASTER_LOCK,null);
    if (null != masterLockData) {
      log.info("Master lock is still held");
      Thread.sleep(1000);
    }
  }
 while (null != masterLockData);
  cluster.start();
  assertEquals(0,ret.get().intValue());
  VerifyIngest.verifyIngest(c,VOPTS,SOPTS);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void restartMaster() throws Exception {
  Connector c=getConnector();
  final String tableName=getUniqueNames(1)[0];
  OPTS.setTableName(tableName);
  VOPTS.setTableName(tableName);
  c.tableOperations().create(tableName);
  final AuthenticationToken token=getAdminToken();
  final ClusterControl control=getCluster().getClusterControl();
  final String[] args;
  if (token instanceof PasswordToken) {
    byte[] password=((PasswordToken)token).getPassword();
    args=new String[]{"-u",getAdminPrincipal(),"-p",new String(password,UTF_8),"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"--rows","" + OPTS.rows,"--table",tableName};
    OPTS.setPrincipal(getAdminPrincipal());
    VOPTS.setPrincipal(getAdminPrincipal());
  }
 else   if (token instanceof KerberosToken) {
    ClusterUser rootUser=getAdminUser();
    args=new String[]{"-u",getAdminPrincipal(),"--keytab",rootUser.getKeytab().getAbsolutePath(),"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"--rows","" + OPTS.rows,"--table",tableName};
    ClientConfiguration clientConfig=cluster.getClientConfig();
    OPTS.updateKerberosCredentials(clientConfig);
    VOPTS.updateKerberosCredentials(clientConfig);
  }
 else {
    throw new RuntimeException("Unknown token");
  }
  Future<Integer> ret=svc.submit(new Callable<Integer>(){
    @Override public Integer call(){
      try {
        return control.exec(TestIngest.class,args);
      }
 catch (      IOException e) {
        log.error("Error running TestIngest",e);
        return -1;
      }
    }
  }
);
  control.stopAllServers(ServerType.MASTER);
  control.startAllServers(ServerType.MASTER);
  assertEquals(0,ret.get().intValue());
  VerifyIngest.verifyIngest(c,VOPTS,SOPTS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.RestartStressIT </h4><pre class="type-9 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void test() throws Exception {
  final Connector c=getConnector();
  final String tableName=getUniqueNames(1)[0];
  final AuthenticationToken token=getAdminToken();
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_SPLIT_THRESHOLD.getKey(),"500K");
  final ClusterControl control=getCluster().getClusterControl();
  final String[] args;
  if (token instanceof PasswordToken) {
    byte[] password=((PasswordToken)token).getPassword();
    args=new String[]{"-u",getAdminPrincipal(),"-p",new String(password,UTF_8),"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"--rows","" + VOPTS.rows,"--table",tableName};
  }
 else   if (token instanceof KerberosToken) {
    ClusterUser rootUser=getAdminUser();
    args=new String[]{"-u",getAdminPrincipal(),"--keytab",rootUser.getKeytab().getAbsolutePath(),"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"--rows","" + VOPTS.rows,"--table",tableName};
  }
 else {
    throw new RuntimeException("Unrecognized token");
  }
  Future<Integer> retCode=svc.submit(new Callable<Integer>(){
    @Override public Integer call(){
      try {
        return control.exec(TestIngest.class,args);
      }
 catch (      Exception e) {
        log.error("Error running TestIngest",e);
        return -1;
      }
    }
  }
);
  for (int i=0; i < 2; i++) {
    sleepUninterruptibly(10,TimeUnit.SECONDS);
    control.stopAllServers(ServerType.TABLET_SERVER);
    control.startAllServers(ServerType.TABLET_SERVER);
  }
  assertEquals(0,retCode.get().intValue());
  VOPTS.setTableName(tableName);
  if (token instanceof PasswordToken) {
    VOPTS.setPrincipal(getAdminPrincipal());
  }
 else   if (token instanceof KerberosToken) {
    VOPTS.updateKerberosCredentials(cluster.getClientConfig());
  }
 else {
    throw new RuntimeException("Unrecognized token");
  }
  VerifyIngest.verifyIngest(c,VOPTS,SOPTS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.RowDeleteIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void run() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  Map<String,Set<Text>> groups=new HashMap<String,Set<Text>>();
  groups.put("lg1",Collections.singleton(new Text("foo")));
  groups.put("dg",Collections.<Text>emptySet());
  c.tableOperations().setLocalityGroups(tableName,groups);
  IteratorSetting setting=new IteratorSetting(30,RowDeletingIterator.class);
  c.tableOperations().attachIterator(tableName,setting,EnumSet.of(IteratorScope.majc));
  c.tableOperations().setProperty(tableName,Property.TABLE_MAJC_RATIO.getKey(),"100");
  BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
  bw.addMutation(nm("r1","foo","cf1","v1"));
  bw.addMutation(nm("r1","bar","cf1","v2"));
  bw.flush();
  c.tableOperations().flush(tableName,null,null,true);
  checkRFiles(c,tableName,1,1,1,1);
  Scanner scanner=c.createScanner(tableName,Authorizations.EMPTY);
  int count=Iterators.size(scanner.iterator());
  assertEquals("count == " + count,2,count);
  bw.addMutation(nm("r1","","",RowDeletingIterator.DELETE_ROW_VALUE));
  bw.flush();
  c.tableOperations().flush(tableName,null,null,true);
  checkRFiles(c,tableName,1,1,2,2);
  scanner=c.createScanner(tableName,Authorizations.EMPTY);
  count=Iterators.size(scanner.iterator());
  assertEquals("count == " + count,3,count);
  c.tableOperations().compact(tableName,null,null,false,true);
  checkRFiles(c,tableName,1,1,0,0);
  scanner=c.createScanner(tableName,Authorizations.EMPTY);
  count=Iterators.size(scanner.iterator());
  assertEquals("count == " + count,0,count);
  bw.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ScannerContextIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClearContext() throws Exception {
  Path baseDir=new Path(System.getProperty("user.dir"));
  Path targetDir=new Path(baseDir,"target");
  Path jarPath=new Path(targetDir,"TestIterators-tests.jar");
  Path dstPath=new Path(CONTEXT_DIR + "/Test.jar");
  fs.copyFromLocalFile(jarPath,dstPath);
  UtilWaitThread.sleep(WAIT);
  try {
    Connector c=getConnector();
    c.instanceOperations().setProperty(CONTEXT_PROPERTY,CONTEXT_CLASSPATH);
    String tableName=getUniqueNames(1)[0];
    c.tableOperations().create(tableName);
    BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
    for (int i=0; i < ITERATIONS; i++) {
      Mutation m=new Mutation("row" + i);
      m.put("cf","col1","Test");
      bw.addMutation(m);
    }
    bw.close();
    Scanner one=c.createScanner(tableName,Authorizations.EMPTY);
    IteratorSetting cfg=new IteratorSetting(21,"reverse","org.apache.accumulo.test.functional.ValueReversingIterator");
    one.addScanIterator(cfg);
    one.setClassLoaderContext(CONTEXT);
    Iterator<Entry<Key,Value>> iterator=one.iterator();
    for (int i=0; i < ITERATIONS; i++) {
      assertTrue(iterator.hasNext());
      Entry<Key,Value> next=iterator.next();
      assertEquals("tseT",next.getValue().toString());
    }
    one.removeScanIterator("reverse");
    one.clearClassLoaderContext();
    iterator=one.iterator();
    for (int i=0; i < ITERATIONS; i++) {
      assertTrue(iterator.hasNext());
      Entry<Key,Value> next=iterator.next();
      assertEquals("Test",next.getValue().toString());
    }
  }
  finally {
    fs.delete(dstPath,true);
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneScannerDoesntInterfereWithAnother() throws Exception {
  Path baseDir=new Path(System.getProperty("user.dir"));
  Path targetDir=new Path(baseDir,"target");
  Path jarPath=new Path(targetDir,"TestIterators-tests.jar");
  Path dstPath=new Path(CONTEXT_DIR + "/Test.jar");
  fs.copyFromLocalFile(jarPath,dstPath);
  UtilWaitThread.sleep(WAIT);
  try {
    Connector c=getConnector();
    c.instanceOperations().setProperty(CONTEXT_PROPERTY,CONTEXT_CLASSPATH);
    String tableName=getUniqueNames(1)[0];
    c.tableOperations().create(tableName);
    BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
    for (int i=0; i < ITERATIONS; i++) {
      Mutation m=new Mutation("row" + i);
      m.put("cf","col1","Test");
      bw.addMutation(m);
    }
    bw.close();
    Scanner one=c.createScanner(tableName,Authorizations.EMPTY);
    Scanner two=c.createScanner(tableName,Authorizations.EMPTY);
    IteratorSetting cfg=new IteratorSetting(21,"reverse","org.apache.accumulo.test.functional.ValueReversingIterator");
    one.addScanIterator(cfg);
    one.setClassLoaderContext(CONTEXT);
    Iterator<Entry<Key,Value>> iterator=one.iterator();
    for (int i=0; i < ITERATIONS; i++) {
      assertTrue(iterator.hasNext());
      Entry<Key,Value> next=iterator.next();
      assertEquals("tseT",next.getValue().toString());
    }
    Iterator<Entry<Key,Value>> iterator2=two.iterator();
    for (int i=0; i < ITERATIONS; i++) {
      assertTrue(iterator2.hasNext());
      Entry<Key,Value> next=iterator2.next();
      assertEquals("Test",next.getValue().toString());
    }
  }
  finally {
    fs.delete(dstPath,true);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.SessionBlockVerifyIT </h4><pre class="type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void run() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
  for (int i=0; i < 1000; i++) {
    Mutation m=new Mutation(new Text(String.format("%08d",i)));
    for (int j=0; j < 3; j++)     m.put(new Text("cf1"),new Text("cq" + j),new Value((i + "_" + j).getBytes(UTF_8)));
    bw.addMutation(m);
  }
  bw.close();
  Scanner scanner=c.createScanner(tableName,new Authorizations());
  scanner.setReadaheadThreshold(20000);
  scanner.setRange(new Range(String.format("%08d",0),String.format("%08d",1000)));
  IteratorSetting setting=new IteratorSetting(21,SlowIterator.class);
  SlowIterator.setSeekSleepTime(setting,Long.MAX_VALUE);
  SlowIterator.setSleepTime(setting,Long.MAX_VALUE);
  scanner.addScanIterator(setting);
  final Iterator<Entry<Key,Value>> slow=scanner.iterator();
  final List<Future<Boolean>> callables=new ArrayList<Future<Boolean>>();
  final CountDownLatch latch=new CountDownLatch(10);
  for (int i=0; i < 10; i++) {
    Future<Boolean> callable=service.submit(new Callable<Boolean>(){
      public Boolean call(){
        latch.countDown();
        while (slow.hasNext()) {
          slow.next();
        }
        return slow.hasNext();
      }
    }
);
    callables.add(callable);
  }
  latch.await();
  log.info("Starting SessionBlockVerifyIT");
  for (int i=0; i < 2; i++) {
    Scanner scanner2=c.createScanner(tableName,new Authorizations());
    scanner2.setRange(new Range(String.format("%08d",0),String.format("%08d",1000)));
    scanner2.setBatchSize(1);
    Iterator<Entry<Key,Value>> iter=scanner2.iterator();
    verify(iter,0,1000);
  }
  int sessionsFound=0;
  String tserver=Iterables.getOnlyElement(c.instanceOperations().getTabletServers());
  final List<ActiveScan> scans=c.instanceOperations().getActiveScans(tserver);
  for (  ActiveScan scan : scans) {
    if (tableName.equals(scan.getTable()) && scan.getSsiList().size() > 0) {
      assertEquals("Not the expected iterator",1,scan.getSsiList().size());
      assertTrue("Not the expected iterator",scan.getSsiList().iterator().next().contains("SlowIterator"));
      sessionsFound++;
    }
  }
  assertEquals("Must have ten sessions. Failure indicates a synchronization block within the sweep mechanism",10,sessionsFound);
  for (  Future<Boolean> callable : callables) {
    callable.cancel(true);
  }
  service.shutdown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.SessionDurabilityIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=3 * 60 * 1000) public void testConditionDurability() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_DURABILITY.getKey(),"sync");
  ConditionalWriterConfig cfg=new ConditionalWriterConfig();
  cfg.setDurability(Durability.NONE);
  conditionWriteSome(tableName,10,cfg);
  assertEquals(10,count(tableName));
  restartTServer();
  assertEquals(0,count(tableName));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=3 * 60 * 1000) public void testConditionDurability2() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_DURABILITY.getKey(),"none");
  ConditionalWriterConfig cfg=new ConditionalWriterConfig();
  cfg.setDurability(Durability.SYNC);
  conditionWriteSome(tableName,10,cfg);
  assertEquals(10,count(tableName));
  restartTServer();
  assertEquals(10,count(tableName));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=3 * 60 * 1000) public void nondurableTableHasDurableWrites() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_DURABILITY.getKey(),"none");
  BatchWriterConfig cfg=new BatchWriterConfig();
  cfg.setDurability(Durability.SYNC);
  writeSome(tableName,10,cfg);
  assertEquals(10,count(tableName));
  restartTServer();
  assertEquals(10,count(tableName));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ShutdownIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shutdownDuringDelete() throws Exception {
  assertEquals(0,cluster.exec(TestIngest.class,"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"-u","root","-p",ROOT_PASSWORD,"--createTable").waitFor());
  Process deleter=cluster.exec(TestRandomDeletes.class,"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"-u","root","-p",ROOT_PASSWORD);
  sleepUninterruptibly(100,TimeUnit.MILLISECONDS);
  assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  deleter.destroy();
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shutdownDuringIngest() throws Exception {
  Process ingest=cluster.exec(TestIngest.class,"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"-u","root","-p",ROOT_PASSWORD,"--createTable");
  sleepUninterruptibly(100,TimeUnit.MILLISECONDS);
  assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  ingest.destroy();
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shutdownDuringDeleteTable() throws Exception {
  final Connector c=getConnector();
  for (int i=0; i < 10; i++) {
    c.tableOperations().create("table" + i);
  }
  final AtomicReference<Exception> ref=new AtomicReference<Exception>();
  Thread async=new Thread(){
    @Override public void run(){
      try {
        for (int i=0; i < 10; i++)         c.tableOperations().delete("table" + i);
      }
 catch (      Exception ex) {
        ref.set(ex);
      }
    }
  }
;
  async.start();
  sleepUninterruptibly(100,TimeUnit.MILLISECONDS);
  assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  if (ref.get() != null)   throw ref.get();
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shutdownDuringQuery() throws Exception {
  assertEquals(0,cluster.exec(TestIngest.class,"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"-u","root","-p",ROOT_PASSWORD,"--createTable").waitFor());
  Process verify=cluster.exec(VerifyIngest.class,"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"-u","root","-p",ROOT_PASSWORD);
  sleepUninterruptibly(100,TimeUnit.MILLISECONDS);
  assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  verify.destroy();
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void stopDuringStart() throws Exception {
  assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.SimpleBalancerFairnessIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simpleBalancerFairness() throws Exception {
  Connector c=getConnector();
  c.tableOperations().create("test_ingest");
  c.tableOperations().setProperty("test_ingest",Property.TABLE_SPLIT_THRESHOLD.getKey(),"10K");
  c.tableOperations().create("unused");
  TreeSet<Text> splits=TestIngest.getSplitPoints(0,10000000,500);
  log.info("Creating " + splits.size() + " splits");
  c.tableOperations().addSplits("unused",splits);
  List<String> tservers=c.instanceOperations().getTabletServers();
  TestIngest.Opts opts=new TestIngest.Opts();
  opts.rows=50000;
  opts.setPrincipal("root");
  TestIngest.ingest(c,opts,new BatchWriterOpts());
  c.tableOperations().flush("test_ingest",null,null,false);
  sleepUninterruptibly(45,TimeUnit.SECONDS);
  Credentials creds=new Credentials("root",new PasswordToken(ROOT_PASSWORD));
  ClientContext context=new ClientContext(c.getInstance(),creds,getClientConfig());
  MasterMonitorInfo stats=null;
  int unassignedTablets=1;
  for (int i=0; unassignedTablets > 0 && i < 10; i++) {
    MasterClientService.Iface client=null;
    try {
      client=MasterClient.getConnectionWithRetry(context);
      stats=client.getMasterStats(Tracer.traceInfo(),creds.toThrift(c.getInstance()));
    }
  finally {
      if (client != null)       MasterClient.close(client);
    }
    unassignedTablets=stats.getUnassignedTablets();
    if (unassignedTablets > 0) {
      log.info("Found " + unassignedTablets + " unassigned tablets, sleeping 3 seconds for tablet assignment");
      Thread.sleep(3000);
    }
  }
  assertEquals("Unassigned tablets were not assigned within 30 seconds",0,unassignedTablets);
  List<Integer> counts=new ArrayList<Integer>();
  for (  TabletServerStatus server : stats.tServerInfo) {
    int count=0;
    for (    TableInfo table : server.tableMap.values()) {
      count+=table.onlineTablets;
    }
    counts.add(count);
  }
  assertTrue("Expected to have at least two TabletServers",counts.size() > 1);
  for (int i=1; i < counts.size(); i++) {
    int diff=Math.abs(counts.get(0) - counts.get(i));
    assertTrue("Expected difference in tablets to be less than or equal to " + counts.size() + " but was "+ diff+ ". Counts "+ counts,diff <= tservers.size());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.SplitIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void tabletShouldSplit() throws Exception {
  Connector c=getConnector();
  String table=getUniqueNames(1)[0];
  c.tableOperations().create(table);
  c.tableOperations().setProperty(table,Property.TABLE_SPLIT_THRESHOLD.getKey(),"256K");
  c.tableOperations().setProperty(table,Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE.getKey(),"1K");
  TestIngest.Opts opts=new TestIngest.Opts();
  VerifyIngest.Opts vopts=new VerifyIngest.Opts();
  opts.rows=100000;
  opts.setTableName(table);
  ClientConfiguration clientConfig=cluster.getClientConfig();
  if (clientConfig.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
    opts.updateKerberosCredentials(clientConfig);
    vopts.updateKerberosCredentials(clientConfig);
  }
 else {
    opts.setPrincipal(getAdminPrincipal());
    vopts.setPrincipal(getAdminPrincipal());
  }
  TestIngest.ingest(c,opts,new BatchWriterOpts());
  vopts.rows=opts.rows;
  vopts.setTableName(table);
  VerifyIngest.verifyIngest(c,vopts,new ScannerOpts());
  while (c.tableOperations().listSplits(table).size() < 10) {
    sleepUninterruptibly(15,TimeUnit.SECONDS);
  }
  String id=c.tableOperations().tableIdMap().get(table);
  Scanner s=c.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  KeyExtent extent=new KeyExtent(new Text(id),null,null);
  s.setRange(extent.toMetadataRange());
  MetadataSchema.TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.fetch(s);
  int count=0;
  int shortened=0;
  for (  Entry<Key,Value> entry : s) {
    extent=new KeyExtent(entry.getKey().getRow(),entry.getValue());
    if (extent.getEndRow() != null && extent.getEndRow().toString().length() < 14)     shortened++;
    count++;
  }
  assertTrue("Shortened should be greater than zero: " + shortened,shortened > 0);
  assertTrue("Count should be cgreater than 10: " + count,count > 10);
  String[] args;
  if (clientConfig.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
    ClusterUser rootUser=getAdminUser();
    args=new String[]{"-i",cluster.getInstanceName(),"-u",rootUser.getPrincipal(),"--keytab",rootUser.getKeytab().getAbsolutePath(),"-z",cluster.getZooKeepers()};
  }
 else {
    PasswordToken token=(PasswordToken)getAdminToken();
    args=new String[]{"-i",cluster.getInstanceName(),"-u","root","-p",new String(token.getPassword(),UTF_8),"-z",cluster.getZooKeepers()};
  }
  assertEquals(0,getCluster().getClusterControl().exec(CheckForMetadataProblems.class,args));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.SplitRecoveryIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  assertEquals(0,exec(SplitRecoveryIT.class).waitFor());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.StartIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  ClusterControl control=getCluster().getClusterControl();
  assertNotEquals(0,control.exec(TestMain.class,new String[]{"exception"}));
  assertEquals(0,control.exec(TestMain.class,new String[]{"success"}));
  assertNotEquals(0,control.exec(TestMain.class,new String[0]));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.TableIT </h4><pre class="type-9 type-5 type-3 type-21 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Assume.assumeThat(getClusterType(),CoreMatchers.is(ClusterType.MINI));
  AccumuloCluster cluster=getCluster();
  MiniAccumuloClusterImpl mac=(MiniAccumuloClusterImpl)cluster;
  String rootPath=mac.getConfig().getDir().getAbsolutePath();
  Connector c=getConnector();
  TableOperations to=c.tableOperations();
  String tableName=getUniqueNames(1)[0];
  to.create(tableName);
  TestIngest.Opts opts=new TestIngest.Opts();
  VerifyIngest.Opts vopts=new VerifyIngest.Opts();
  ClientConfiguration clientConfig=getCluster().getClientConfig();
  if (clientConfig.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
    opts.updateKerberosCredentials(clientConfig);
    vopts.updateKerberosCredentials(clientConfig);
  }
 else {
    opts.setPrincipal(getAdminPrincipal());
    vopts.setPrincipal(getAdminPrincipal());
  }
  opts.setTableName(tableName);
  TestIngest.ingest(c,opts,new BatchWriterOpts());
  to.flush(tableName,null,null,true);
  vopts.setTableName(tableName);
  VerifyIngest.verifyIngest(c,vopts,new ScannerOpts());
  String id=to.tableIdMap().get(tableName);
  Scanner s=c.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(new KeyExtent(new Text(id),null,null).toMetadataRange());
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  assertTrue(Iterators.size(s.iterator()) > 0);
  FileSystem fs=getCluster().getFileSystem();
  assertTrue(fs.listStatus(new Path(rootPath + "/accumulo/tables/" + id)).length > 0);
  to.delete(tableName);
  assertEquals(0,Iterators.size(s.iterator()));
  try {
    assertEquals(0,fs.listStatus(new Path(rootPath + "/accumulo/tables/" + id)).length);
  }
 catch (  FileNotFoundException ex) {
  }
  assertNull(to.tableIdMap().get(tableName));
  to.create(tableName);
  TestIngest.ingest(c,opts,new BatchWriterOpts());
  VerifyIngest.verifyIngest(c,vopts,new ScannerOpts());
  to.delete(tableName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.TabletStateChangeIteratorIT </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws AccumuloException, AccumuloSecurityException, TableExistsException, TableNotFoundException {
  String[] tables=getUniqueNames(4);
  final String t1=tables[0];
  final String t2=tables[1];
  final String t3=tables[2];
  final String cloned=tables[3];
  createTable(t1,true);
  createTable(t2,false);
  createTable(t3,true);
  cloneMetadataTable(cloned);
  State state=new State();
  assertEquals("No tables should need attention",0,findTabletsNeedingAttention(cloned,state));
  removeLocation(cloned,t3);
  assertEquals("Should have two tablets without a loc",2,findTabletsNeedingAttention(cloned,state));
  getConnector().tableOperations().delete(cloned);
  cloneMetadataTable(cloned);
  reassignLocation(cloned,t3);
  assertEquals("Should have one tablet that needs to be unassigned",1,findTabletsNeedingAttention(cloned,state));
  state=new State(){
    @Override public Collection<MergeInfo> merges(){
      String tableIdToModify=getConnector().tableOperations().tableIdMap().get(t3);
      return Collections.singletonList(new MergeInfo(new KeyExtent(new Text(tableIdToModify),null,null),MergeInfo.Operation.MERGE));
    }
  }
;
  assertEquals("Should have 2 tablets that need to be chopped or unassigned",1,findTabletsNeedingAttention(cloned,state));
  state=new State();
  cloneMetadataTable(cloned);
  addDuplicateLocation(cloned,t3);
  assertEquals("Should have 1 tablet that needs a metadata repair",1,findTabletsNeedingAttention(cloned,state));
  dropTables(t1,t2,t3,cloned);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.WALSunnyDayIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  MiniAccumuloClusterImpl mac=getCluster();
  MiniAccumuloClusterControl control=mac.getClusterControl();
  control.stop(GARBAGE_COLLECTOR);
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  writeSomeData(c,tableName,1,1);
  Map<String,Boolean> wals=getWals(c);
  assertEquals(wals.toString(),2,wals.size());
  for (  Boolean b : wals.values()) {
    assertTrue("logs should be in use",b.booleanValue());
  }
  writeSomeData(c,tableName,1001,50);
  Map<String,Boolean> walsAfterRoll=getWals(c);
  assertEquals("should have 3 WALs after roll",3,walsAfterRoll.size());
  assertTrue("new WALs should be a superset of the old WALs",walsAfterRoll.keySet().containsAll(wals.keySet()));
  assertEquals("all WALs should be in use",3,countTrue(walsAfterRoll.values()));
  for (  String table : new String[]{tableName,MetadataTable.NAME,RootTable.NAME}) {
    c.tableOperations().flush(table,null,null,true);
  }
  sleepUninterruptibly(1,TimeUnit.SECONDS);
  Map<String,Boolean> walsAfterflush=getWals(c);
  assertEquals(walsAfterflush.toString(),3,walsAfterflush.size());
  assertEquals("inUse should be 2",2,countTrue(walsAfterflush.values()));
  control.start(GARBAGE_COLLECTOR);
  sleepUninterruptibly(5,TimeUnit.SECONDS);
  Map<String,Boolean> walsAfterGC=getWals(c);
  assertEquals(walsAfterGC.toString(),2,walsAfterGC.size());
  control.stop(GARBAGE_COLLECTOR);
  control.stop(TABLET_SERVER);
  assertEquals(0,cluster.exec(SetGoalState.class,"SAFE_MODE").waitFor());
  control.start(TABLET_SERVER);
  getRecoveryMarkers(c);
  sleepUninterruptibly(5,TimeUnit.SECONDS);
  Map<KeyExtent,List<String>> markers=getRecoveryMarkers(c);
  assertEquals("one tablet should have markers",1,markers.keySet().size());
  assertEquals("tableId of the keyExtent should be 1",markers.keySet().iterator().next().getTableId(),new Text("1"));
  assertEquals(0,cluster.exec(SetGoalState.class,"NORMAL").waitFor());
  verifySomeData(c,tableName,1001 * 50 + 1);
  writeSomeData(c,tableName,100,100);
  Map<String,Boolean> walsAfterRestart=getWals(c);
  assertEquals("used WALs after restart should be 4",4,countTrue(walsAfterRestart.values()));
  control.start(GARBAGE_COLLECTOR);
  sleepUninterruptibly(5,TimeUnit.SECONDS);
  Map<String,Boolean> walsAfterRestartAndGC=getWals(c);
  assertEquals("wals left should be 2",2,walsAfterRestartAndGC.size());
  assertEquals("logs in use should be 2",2,countTrue(walsAfterRestartAndGC.values()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ZooCacheIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  assertEquals(0,exec(CacheTestClean.class,pathName,testDir.getAbsolutePath()).waitFor());
  final AtomicReference<Exception> ref=new AtomicReference<Exception>();
  List<Thread> threads=new ArrayList<Thread>();
  for (int i=0; i < 3; i++) {
    Thread reader=new Thread(){
      @Override public void run(){
        try {
          CacheTestReader.main(new String[]{pathName,testDir.getAbsolutePath(),getConnector().getInstance().getZooKeepers()});
        }
 catch (        Exception ex) {
          ref.set(ex);
        }
      }
    }
;
    reader.start();
    threads.add(reader);
  }
  assertEquals(0,exec(CacheTestWriter.class,pathName,testDir.getAbsolutePath(),"3","50").waitFor());
  for (  Thread t : threads) {
    t.join();
    if (ref.get() != null)     throw ref.get();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ZookeeperRestartIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  c.tableOperations().create("test_ingest");
  BatchWriter bw=c.createBatchWriter("test_ingest",null);
  Mutation m=new Mutation("row");
  m.put("cf","cq","value");
  bw.addMutation(m);
  bw.close();
  for (  ProcessReference proc : cluster.getProcesses().get(ServerType.ZOOKEEPER))   cluster.killProcess(ServerType.ZOOKEEPER,proc);
  sleepUninterruptibly(1,TimeUnit.SECONDS);
  cluster.start();
  Scanner s=c.createScanner("test_ingest",Authorizations.EMPTY);
  Iterator<Entry<Key,Value>> i=s.iterator();
  assertTrue(i.hasNext());
  assertEquals("row",i.next().getKey().getRow().toString());
  assertFalse(i.hasNext());
  c.tableOperations().delete("test_ingest");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapred.AccumuloInputFormatIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCorrectRangeInputSplits() throws Exception {
  JobConf job=new JobConf();
  String table=getUniqueNames(1)[0];
  Authorizations auths=new Authorizations("foo");
  Collection<Pair<Text,Text>> fetchColumns=Collections.singleton(new Pair<Text,Text>(new Text("foo"),new Text("bar")));
  boolean isolated=true, localIters=true;
  Level level=Level.WARN;
  Connector connector=getConnector();
  connector.tableOperations().create(table);
  AccumuloInputFormat.setConnectorInfo(job,getAdminPrincipal(),getAdminToken());
  AccumuloInputFormat.setInputTableName(job,table);
  AccumuloInputFormat.setScanAuthorizations(job,auths);
  AccumuloInputFormat.setZooKeeperInstance(job,getCluster().getClientConfig());
  AccumuloInputFormat.setScanIsolation(job,isolated);
  AccumuloInputFormat.setLocalIterators(job,localIters);
  AccumuloInputFormat.fetchColumns(job,fetchColumns);
  AccumuloInputFormat.setLogLevel(job,level);
  AccumuloInputFormat aif=new AccumuloInputFormat();
  InputSplit[] splits=aif.getSplits(job,1);
  Assert.assertEquals(1,splits.length);
  InputSplit split=splits[0];
  Assert.assertEquals(RangeInputSplit.class,split.getClass());
  RangeInputSplit risplit=(RangeInputSplit)split;
  Assert.assertEquals(getAdminPrincipal(),risplit.getPrincipal());
  Assert.assertEquals(table,risplit.getTableName());
  Assert.assertEquals(getAdminToken(),risplit.getToken());
  Assert.assertEquals(auths,risplit.getAuths());
  Assert.assertEquals(getConnector().getInstance().getInstanceName(),risplit.getInstanceName());
  Assert.assertEquals(isolated,risplit.isIsolatedScan());
  Assert.assertEquals(localIters,risplit.usesLocalIterators());
  Assert.assertEquals(fetchColumns,risplit.getFetchedColumns());
  Assert.assertEquals(level,risplit.getLogLevel());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSample() throws Exception {
  final String TEST_TABLE_3=getUniqueNames(1)[0];
  Connector c=getConnector();
  c.tableOperations().create(TEST_TABLE_3,new NewTableConfiguration().enableSampling(SAMPLER_CONFIG));
  BatchWriter bw=c.createBatchWriter(TEST_TABLE_3,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  MRTester.main(TEST_TABLE_3,"False","True");
  Assert.assertEquals(38,e1Count);
  Assert.assertEquals(1,e2Count);
  e2Count=e1Count=0;
  MRTester.main(TEST_TABLE_3,"False","False");
  Assert.assertEquals(0,e1Count);
  Assert.assertEquals(0,e2Count);
  e2Count=e1Count=0;
  MRTester.main(TEST_TABLE_3,"True","True");
  Assert.assertEquals(38,e1Count);
  Assert.assertEquals(1,e2Count);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapred.AccumuloOutputFormatIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMR() throws Exception {
  Connector c=getConnector();
  String instanceName=getCluster().getInstanceName();
  String table1=instanceName + "_t1";
  String table2=instanceName + "_t2";
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  MRTester.main(new String[]{"root",ROOT_PASSWORD,table1,table2,instanceName,getCluster().getZooKeepers()});
  assertNull(e1);
  Scanner scanner=c.createScanner(table2,new Authorizations());
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  assertEquals(Integer.parseInt(new String(entry.getValue().get())),100);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapred.TokenFileIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMR() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String table1=tableNames[0];
  String table2=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  File tf=folder.newFile("root_test.pw");
  PrintStream out=new PrintStream(tf);
  String outString=new Credentials(getAdminPrincipal(),getAdminToken()).serialize();
  out.println(outString);
  out.close();
  MRTokenFileTester.main(new String[]{tf.getAbsolutePath(),table1,table2});
  assertNull(e1);
  Scanner scanner=c.createScanner(table2,new Authorizations());
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  assertEquals(Integer.parseInt(new String(entry.getValue().get())),100);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapreduce.AccumuloFileOutputFormatIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void writeBadVisibility() throws Exception {
  File f=folder.newFile(testName.getMethodName());
  assertTrue(f.delete());
  MRTester.main(new String[]{BAD_TABLE,f.getAbsolutePath()});
  assertTrue(f.exists());
  assertEquals(1,assertionErrors.get(BAD_TABLE + "_map").size());
  assertEquals(1,assertionErrors.get(BAD_TABLE + "_cleanup").size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapreduce.AccumuloInputFormatIT </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMap() throws Exception {
  final String TEST_TABLE_1=getUniqueNames(1)[0];
  Connector c=getConnector();
  c.tableOperations().create(TEST_TABLE_1);
  BatchWriter bw=c.createBatchWriter(TEST_TABLE_1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  Assert.assertEquals(0,MRTester.main(new String[]{TEST_TABLE_1,AccumuloInputFormat.class.getName()}));
  assertEquals(1,assertionErrors.get(TEST_TABLE_1 + "_map").size());
  assertEquals(1,assertionErrors.get(TEST_TABLE_1 + "_cleanup").size());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPartialInputSplitDelegationToConfiguration() throws Exception {
  String table=getUniqueNames(1)[0];
  Connector c=getConnector();
  c.tableOperations().create(table);
  BatchWriter bw=c.createBatchWriter(table,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  Assert.assertEquals(0,MRTester.main(new String[]{table,EmptySplitsAccumuloInputFormat.class.getName()}));
  assertEquals(1,assertionErrors.get(table + "_map").size());
  assertEquals(1,assertionErrors.get(table + "_cleanup").size());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSample() throws Exception {
  final String TEST_TABLE_3=getUniqueNames(1)[0];
  Connector c=getConnector();
  c.tableOperations().create(TEST_TABLE_3,new NewTableConfiguration().enableSampling(SAMPLER_CONFIG));
  BatchWriter bw=c.createBatchWriter(TEST_TABLE_3,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  Assert.assertEquals(0,MRTester.main(new String[]{TEST_TABLE_3,AccumuloInputFormat.class.getName(),"False","True"}));
  assertEquals(39,assertionErrors.get(TEST_TABLE_3 + "_map").size());
  assertEquals(2,assertionErrors.get(TEST_TABLE_3 + "_cleanup").size());
  assertionErrors.clear();
  Assert.assertEquals(0,MRTester.main(new String[]{TEST_TABLE_3,AccumuloInputFormat.class.getName(),"False","False"}));
  assertEquals(1,assertionErrors.get(TEST_TABLE_3 + "_map").size());
  assertEquals(1,assertionErrors.get(TEST_TABLE_3 + "_cleanup").size());
  assertionErrors.clear();
  Assert.assertEquals(0,MRTester.main(new String[]{TEST_TABLE_3,AccumuloInputFormat.class.getName(),"True","True"}));
  assertEquals(39,assertionErrors.get(TEST_TABLE_3 + "_map").size());
  assertEquals(2,assertionErrors.get(TEST_TABLE_3 + "_cleanup").size());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMapWithBatchScanner() throws Exception {
  final String TEST_TABLE_2=getUniqueNames(1)[0];
  Connector c=getConnector();
  c.tableOperations().create(TEST_TABLE_2);
  BatchWriter bw=c.createBatchWriter(TEST_TABLE_2,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  Assert.assertEquals(0,MRTester.main(new String[]{TEST_TABLE_2,AccumuloInputFormat.class.getName(),"True","False"}));
  assertEquals(1,assertionErrors.get(TEST_TABLE_2 + "_map").size());
  assertEquals(1,assertionErrors.get(TEST_TABLE_2 + "_cleanup").size());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCorrectRangeInputSplits() throws Exception {
  Job job=Job.getInstance();
  String table=getUniqueNames(1)[0];
  Authorizations auths=new Authorizations("foo");
  Collection<Pair<Text,Text>> fetchColumns=Collections.singleton(new Pair<Text,Text>(new Text("foo"),new Text("bar")));
  boolean isolated=true, localIters=true;
  Level level=Level.WARN;
  Connector connector=getConnector();
  connector.tableOperations().create(table);
  AccumuloInputFormat.setZooKeeperInstance(job,cluster.getClientConfig());
  AccumuloInputFormat.setConnectorInfo(job,getAdminPrincipal(),getAdminToken());
  AccumuloInputFormat.setInputTableName(job,table);
  AccumuloInputFormat.setScanAuthorizations(job,auths);
  AccumuloInputFormat.setScanIsolation(job,isolated);
  AccumuloInputFormat.setLocalIterators(job,localIters);
  AccumuloInputFormat.fetchColumns(job,fetchColumns);
  AccumuloInputFormat.setLogLevel(job,level);
  AccumuloInputFormat aif=new AccumuloInputFormat();
  List<InputSplit> splits=aif.getSplits(job);
  Assert.assertEquals(1,splits.size());
  InputSplit split=splits.get(0);
  Assert.assertEquals(RangeInputSplit.class,split.getClass());
  RangeInputSplit risplit=(RangeInputSplit)split;
  Assert.assertEquals(getAdminPrincipal(),risplit.getPrincipal());
  Assert.assertEquals(table,risplit.getTableName());
  Assert.assertEquals(getAdminToken(),risplit.getToken());
  Assert.assertEquals(auths,risplit.getAuths());
  Assert.assertEquals(getConnector().getInstance().getInstanceName(),risplit.getInstanceName());
  Assert.assertEquals(isolated,risplit.isIsolatedScan());
  Assert.assertEquals(localIters,risplit.usesLocalIterators());
  Assert.assertEquals(fetchColumns,risplit.getFetchedColumns());
  Assert.assertEquals(level,risplit.getLogLevel());
}

</code></pre>

<br>
<pre class="type-9 type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests several different paths through the getSplits() method by setting different properties and verifying the results.
 */
@Test public void testGetSplits() throws Exception {
  Connector conn=getConnector();
  String table=getUniqueNames(1)[0];
  conn.tableOperations().create(table);
  insertData(table,currentTimeMillis());
  ClientConfiguration clientConf=cluster.getClientConfig();
  AccumuloConfiguration clusterClientConf=new ConfigurationCopy(new DefaultConfiguration());
  boolean sslEnabled=Boolean.valueOf(clusterClientConf.get(Property.INSTANCE_RPC_SSL_ENABLED));
  if (sslEnabled) {
    ClientProperty[] sslProperties=new ClientProperty[]{ClientProperty.INSTANCE_RPC_SSL_ENABLED,ClientProperty.INSTANCE_RPC_SSL_CLIENT_AUTH,ClientProperty.RPC_SSL_KEYSTORE_PATH,ClientProperty.RPC_SSL_KEYSTORE_TYPE,ClientProperty.RPC_SSL_KEYSTORE_PASSWORD,ClientProperty.RPC_SSL_TRUSTSTORE_PATH,ClientProperty.RPC_SSL_TRUSTSTORE_TYPE,ClientProperty.RPC_SSL_TRUSTSTORE_PASSWORD,ClientProperty.RPC_USE_JSSE,ClientProperty.GENERAL_SECURITY_CREDENTIAL_PROVIDER_PATHS};
    for (    ClientProperty prop : sslProperties) {
      clientConf.setProperty(prop,clusterClientConf.get(prop.getKey()));
    }
  }
  Job job=Job.getInstance();
  AccumuloInputFormat.setInputTableName(job,table);
  AccumuloInputFormat.setZooKeeperInstance(job,clientConf);
  AccumuloInputFormat.setConnectorInfo(job,getAdminPrincipal(),getAdminToken());
  TreeSet<Text> splitsToAdd=new TreeSet<Text>();
  for (int i=0; i < 10000; i+=1000)   splitsToAdd.add(new Text(String.format("%09d",i)));
  conn.tableOperations().addSplits(table,splitsToAdd);
  sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
  Collection<Text> actualSplits=conn.tableOperations().listSplits(table);
  List<InputSplit> splits=inputFormat.getSplits(job);
  assertEquals(actualSplits.size() + 1,splits.size());
  List<Range> ranges=new ArrayList<Range>();
  for (  Text text : actualSplits)   ranges.add(new Range(text));
  AccumuloInputFormat.setRanges(job,ranges);
  splits=inputFormat.getSplits(job);
  assertEquals(actualSplits.size(),splits.size());
  AccumuloInputFormat.setOfflineTableScan(job,true);
  try {
    inputFormat.getSplits(job);
    fail("An exception should have been thrown");
  }
 catch (  IOException e) {
  }
  conn.tableOperations().offline(table,true);
  splits=inputFormat.getSplits(job);
  assertEquals(actualSplits.size(),splits.size());
  ranges=new ArrayList<Range>();
  for (int i=0; i < 5; i++)   ranges.add(new Range(String.format("%09d",i),String.format("%09d",i + 2)));
  AccumuloInputFormat.setRanges(job,ranges);
  splits=inputFormat.getSplits(job);
  assertEquals(2,splits.size());
  AccumuloInputFormat.setAutoAdjustRanges(job,false);
  splits=inputFormat.getSplits(job);
  assertEquals(ranges.size(),splits.size());
  AccumuloInputFormat.setBatchScan(job,true);
  AccumuloInputFormat.setAutoAdjustRanges(job,true);
  AccumuloInputFormat.setOfflineTableScan(job,true);
  try {
    inputFormat.getSplits(job);
    fail("An exception should have been thrown");
  }
 catch (  IllegalArgumentException e) {
  }
  conn.tableOperations().online(table,true);
  AccumuloInputFormat.setOfflineTableScan(job,false);
  splits=inputFormat.getSplits(job);
  assertEquals(2,splits.size());
  AccumuloInputFormat.setScanIsolation(job,true);
  try {
    inputFormat.getSplits(job);
    fail("An exception should have been thrown");
  }
 catch (  IllegalArgumentException e) {
  }
  AccumuloInputFormat.setScanIsolation(job,false);
  splits=inputFormat.getSplits(job);
  assertEquals(2,splits.size());
  AccumuloInputFormat.setLocalIterators(job,true);
  try {
    inputFormat.getSplits(job);
    fail("An exception should have been thrown");
  }
 catch (  IllegalArgumentException e) {
  }
  AccumuloInputFormat.setLocalIterators(job,false);
  conn.tableOperations().online(table);
  splits=inputFormat.getSplits(job);
  for (  InputSplit split : splits)   assert (split instanceof BatchInputSplit);
  assertEquals(2,splits.size());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPartialFailedInputSplitDelegationToConfiguration() throws Exception {
  String table=getUniqueNames(1)[0];
  Connector c=getConnector();
  c.tableOperations().create(table);
  BatchWriter bw=c.createBatchWriter(table,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  Assert.assertEquals(1,MRTester.main(new String[]{table,BadPasswordSplitsAccumuloInputFormat.class.getName()}));
  assertEquals(1,assertionErrors.get(table + "_map").size());
  assertEquals(2,assertionErrors.get(table + "_cleanup").size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapreduce.AccumuloOutputFormatIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMR() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String table1=tableNames[0];
  String table2=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  MRTester.main(new String[]{table1,table2});
  assertNull(e1);
  Scanner scanner=c.createScanner(table2,new Authorizations());
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  assertEquals(Integer.parseInt(new String(entry.getValue().get())),100);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapreduce.TokenFileIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMR() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String table1=tableNames[0];
  String table2=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  File tf=folder.newFile("root_test.pw");
  PrintStream out=new PrintStream(tf);
  String outString=new Credentials(getAdminPrincipal(),getAdminToken()).serialize();
  out.println(outString);
  out.close();
  MRTokenFileTester.main(new String[]{tf.getAbsolutePath(),table1,table2});
  assertNull(e1);
  Scanner scanner=c.createScanner(table2,new Authorizations());
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  assertEquals(Integer.parseInt(new String(entry.getValue().get())),100);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.master.MergeStateIT </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  AccumuloServerContext context=EasyMock.createMock(AccumuloServerContext.class);
  Connector connector=getConnector();
  EasyMock.expect(context.getConnector()).andReturn(connector).anyTimes();
  EasyMock.replay(context);
  connector.securityOperations().grantTablePermission(connector.whoami(),MetadataTable.NAME,TablePermission.WRITE);
  BatchWriter bw=connector.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  String splits[]={"a","e","j","o","t","z"};
  Text tableId=new Text("t");
  Text pr=null;
  for (  String s : splits) {
    Text split=new Text(s);
    Mutation prevRow=KeyExtent.getPrevRowUpdateMutation(new KeyExtent(tableId,split,pr));
    prevRow.put(TabletsSection.CurrentLocationColumnFamily.NAME,new Text("123456"),new Value("127.0.0.1:1234".getBytes()));
    ChoppedColumnFamily.CHOPPED_COLUMN.put(prevRow,new Value("junk".getBytes()));
    bw.addMutation(prevRow);
    pr=split;
  }
  Mutation defaultTablet=KeyExtent.getPrevRowUpdateMutation(new KeyExtent(tableId,null,pr));
  defaultTablet.put(TabletsSection.CurrentLocationColumnFamily.NAME,new Text("123456"),new Value("127.0.0.1:1234".getBytes()));
  bw.addMutation(defaultTablet);
  bw.close();
  MockCurrentState state=new MockCurrentState(new MergeInfo(new KeyExtent(tableId,new Text("p"),new Text("e")),MergeInfo.Operation.MERGE));
  MetaDataStateStore metaDataStateStore=new MetaDataStateStore(context,state);
  int count=0;
  for (  TabletLocationState tss : metaDataStateStore) {
    if (tss != null)     count++;
  }
  Assert.assertEquals(0,count);
  Mutation m=new KeyExtent(tableId,new Text("t"),new Text("p")).getPrevRowUpdateMutation();
  TabletsSection.TabletColumnFamily.SPLIT_RATIO_COLUMN.put(m,new Value("0.5".getBytes()));
  TabletsSection.TabletColumnFamily.OLD_PREV_ROW_COLUMN.put(m,KeyExtent.encodePrevEndRow(new Text("o")));
  update(connector,m);
  MergeStats stats=scan(state,metaDataStateStore);
  MergeState newState=stats.nextMergeState(connector,state);
  Assert.assertEquals(MergeState.WAITING_FOR_OFFLINE,newState);
  BatchDeleter deleter=connector.createBatchDeleter(MetadataTable.NAME,Authorizations.EMPTY,1000,new BatchWriterConfig());
  deleter.fetchColumnFamily(TabletsSection.CurrentLocationColumnFamily.NAME);
  deleter.setRanges(Collections.singletonList(new Range()));
  deleter.delete();
  stats=scan(state,metaDataStateStore);
  Assert.assertEquals(MergeState.WAITING_FOR_OFFLINE,stats.nextMergeState(connector,state));
  KeyExtent tablet=new KeyExtent(tableId,new Text("p"),new Text("o"));
  m=tablet.getPrevRowUpdateMutation();
  TabletsSection.TabletColumnFamily.SPLIT_RATIO_COLUMN.put(m,new Value("0.5".getBytes()));
  update(connector,m);
  metaDataStateStore.setLocations(Collections.singletonList(new Assignment(tablet,state.someTServer)));
  stats=scan(state,metaDataStateStore);
  Assert.assertEquals(MergeState.WAITING_FOR_CHOPPED,stats.nextMergeState(connector,state));
  m=tablet.getPrevRowUpdateMutation();
  ChoppedColumnFamily.CHOPPED_COLUMN.put(m,new Value("junk".getBytes()));
  update(connector,m);
  stats=scan(state,metaDataStateStore);
  Assert.assertEquals(MergeState.WAITING_FOR_OFFLINE,stats.nextMergeState(connector,state));
  m=tablet.getPrevRowUpdateMutation();
  Collection<Collection<String>> walogs=Collections.emptyList();
  metaDataStateStore.unassign(Collections.singletonList(new TabletLocationState(tablet,null,state.someTServer,null,walogs,false)),null);
  stats=scan(state,metaDataStateStore);
  Assert.assertEquals(MergeState.MERGING,stats.nextMergeState(connector,state));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.ProxyDurabilityIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDurability() throws Exception {
  Connector c=getConnector();
  Properties props=new Properties();
  File emptyFile=Files.createTempFile(null,null).toFile();
  emptyFile.deleteOnExit();
  props.put("instance",c.getInstance().getInstanceName());
  props.put("zookeepers",c.getInstance().getZooKeepers());
  props.put("tokenClass",PasswordToken.class.getName());
  props.put("clientConfigurationFile",emptyFile.toString());
  TJSONProtocol.Factory protocol=new TJSONProtocol.Factory();
  int proxyPort=PortUtils.getRandomFreePort();
  final TServer proxyServer=Proxy.createProxyServer(HostAndPort.fromParts("localhost",proxyPort),protocol,props).server;
  while (!proxyServer.isServing())   sleepUninterruptibly(100,TimeUnit.MILLISECONDS);
  Client client=new TestProxyClient("localhost",proxyPort,protocol).proxy();
  Map<String,String> properties=new TreeMap<String,String>();
  properties.put("password",ROOT_PASSWORD);
  ByteBuffer login=client.login("root",properties);
  String tableName=getUniqueNames(1)[0];
  client.createTable(login,tableName,true,TimeType.MILLIS);
  assertTrue(c.tableOperations().exists(tableName));
  WriterOptions options=new WriterOptions();
  options.setDurability(Durability.NONE);
  String writer=client.createWriter(login,tableName,options);
  Map<ByteBuffer,List<ColumnUpdate>> cells=new TreeMap<ByteBuffer,List<ColumnUpdate>>();
  ColumnUpdate column=new ColumnUpdate(bytes("cf"),bytes("cq"));
  column.setValue("value".getBytes());
  cells.put(bytes("row"),Collections.singletonList(column));
  client.update(writer,cells);
  client.closeWriter(writer);
  assertEquals(1,count(tableName));
  restartTServer();
  assertEquals(0,count(tableName));
  ConditionalWriterOptions cfg=new ConditionalWriterOptions();
  cfg.setDurability(Durability.SYNC);
  String cwriter=client.createConditionalWriter(login,tableName,cfg);
  ConditionalUpdates updates=new ConditionalUpdates();
  updates.addToConditions(new Condition(new Column(bytes("cf"),bytes("cq"),bytes(""))));
  updates.addToUpdates(column);
  Map<ByteBuffer,ConditionalStatus> status=client.updateRowsConditionally(cwriter,Collections.singletonMap(bytes("row"),updates));
  assertEquals(ConditionalStatus.ACCEPTED,status.get(bytes("row")));
  assertEquals(1,count(tableName));
  restartTServer();
  assertEquals(1,count(tableName));
  proxyServer.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.SimpleProxyBase </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void tableMergesAndSplits() throws Exception {
  client.addSplits(creds,table,new HashSet<ByteBuffer>(Arrays.asList(s2bb("a"),s2bb("m"),s2bb("z"))));
  List<ByteBuffer> splits=client.listSplits(creds,table,1);
  assertEquals(Arrays.asList(s2bb("m")),splits);
  client.mergeTablets(creds,table,null,s2bb("m"));
  splits=client.listSplits(creds,table,10);
  assertEquals(Arrays.asList(s2bb("m"),s2bb("z")),splits);
  client.mergeTablets(creds,table,null,null);
  splits=client.listSplits(creds,table,10);
  List<ByteBuffer> empty=Collections.emptyList();
  assertEquals(empty,splits);
}

</code></pre>

<br>
<pre class="type-9 type-13 type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConditionalWriter() throws Exception {
  log.debug("Adding constraint {} to {}",table,NumericValueConstraint.class.getName());
  client.addConstraint(creds,table,NumericValueConstraint.class.getName());
  sleepUninterruptibly(ZOOKEEPER_PROPAGATION_TIME,TimeUnit.MILLISECONDS);
  while (!client.listConstraints(creds,table).containsKey(NumericValueConstraint.class.getName())) {
    log.info("Failed to see constraint");
    Thread.sleep(1000);
  }
  String cwid=client.createConditionalWriter(creds,table,new ConditionalWriterOptions());
  Map<ByteBuffer,ConditionalUpdates> updates=new HashMap<ByteBuffer,ConditionalUpdates>();
  updates.put(s2bb("00345"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq")),Arrays.asList(newColUpdate("meta","seq",10,"1"),newColUpdate("data","img","73435435"))));
  Map<ByteBuffer,ConditionalStatus> results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00345")));
  assertScan(new String[][]{{"00345","data","img","73435435"},{"00345","meta","seq","1"}},table);
  updates.clear();
  updates.put(s2bb("00345"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq")),Arrays.asList(newColUpdate("meta","seq","2"))));
  updates.put(s2bb("00346"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq")),Arrays.asList(newColUpdate("meta","seq","1"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(2,results.size());
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00345")));
  assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00346")));
  assertScan(new String[][]{{"00345","data","img","73435435"},{"00345","meta","seq","1"},{"00346","meta","seq","1"}},table);
  updates.clear();
  updates.put(s2bb("00345"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq","1")),Arrays.asList(newColUpdate("meta","seq",20,"2"),newColUpdate("data","img","567890"))));
  updates.put(s2bb("00346"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq","2")),Arrays.asList(newColUpdate("meta","seq","3"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(2,results.size());
  assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00345")));
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00346")));
  assertScan(new String[][]{{"00345","data","img","567890"},{"00345","meta","seq","2"},{"00346","meta","seq","1"}},table);
  updates.clear();
  updates.put(s2bb("00345"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq",10,"2")),Arrays.asList(newColUpdate("meta","seq",30,"3"),newColUpdate("data","img","1234567890"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00345")));
  assertScan(new String[][]{{"00345","data","img","567890"},{"00345","meta","seq","2"},{"00346","meta","seq","1"}},table);
  updates.clear();
  updates.put(s2bb("00345"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq",20,"2")),Arrays.asList(newColUpdate("meta","seq",30,"3"),newColUpdate("data","img","1234567890"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00345")));
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"}},table);
  client.updateAndFlush(creds,table,Collections.singletonMap(s2bb("00347"),Arrays.asList(newColUpdate("data","count","1"))));
  client.updateAndFlush(creds,table,Collections.singletonMap(s2bb("00347"),Arrays.asList(newColUpdate("data","count","1"))));
  client.updateAndFlush(creds,table,Collections.singletonMap(s2bb("00347"),Arrays.asList(newColUpdate("data","count","1"))));
  updates.clear();
  updates.put(s2bb("00347"),new ConditionalUpdates(Arrays.asList(newCondition("data","count","3")),Arrays.asList(newColUpdate("data","img","1234567890"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00347")));
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","1"}},table);
  Condition iterCond=newCondition("data","count","3");
  Map<String,String> props=new HashMap<String,String>();
  props.put("type","STRING");
  props.put("columns","data:count");
  IteratorSetting is=new IteratorSetting(1,"sumc",SummingCombiner.class.getName(),props);
  iterCond.setIterators(Arrays.asList(is));
  updates.clear();
  updates.put(s2bb("00347"),new ConditionalUpdates(Arrays.asList(iterCond),Arrays.asList(newColUpdate("data","img","1234567890"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00347")));
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","1"},{"00347","data","img","1234567890"}},table);
  ConditionalStatus status=null;
  for (int i=0; i < 30; i++) {
    updates.clear();
    updates.put(s2bb("00347"),new ConditionalUpdates(Arrays.asList(newCondition("data","img","1234567890")),Arrays.asList(newColUpdate("data","count","A"))));
    results=client.updateRowsConditionally(cwid,updates);
    assertEquals(1,results.size());
    status=results.get(s2bb("00347"));
    if (ConditionalStatus.VIOLATED != status) {
      log.info("ConditionalUpdate was not rejected by server due to table constraint. Sleeping and retrying");
      Thread.sleep(5000);
      continue;
    }
    assertEquals(ConditionalStatus.VIOLATED,status);
    break;
  }
  assertEquals(ConditionalStatus.VIOLATED,status);
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","1"},{"00347","data","img","1234567890"}},table);
  updates.clear();
  updates.put(s2bb("00347"),new ConditionalUpdates(Arrays.asList(newCondition("data","img","565"),newCondition("data","count","2")),Arrays.asList(newColUpdate("data","count","3"),newColUpdate("data","img","0987654321"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00347")));
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","1"},{"00347","data","img","1234567890"}},table);
  updates.clear();
  updates.put(s2bb("00347"),new ConditionalUpdates(Arrays.asList(newCondition("data","img","1234567890"),newCondition("data","count","2")),Arrays.asList(newColUpdate("data","count","3"),newColUpdate("data","img","0987654321"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00347")));
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","1"},{"00347","data","img","1234567890"}},table);
  updates.clear();
  updates.put(s2bb("00347"),new ConditionalUpdates(Arrays.asList(newCondition("data","img","565"),newCondition("data","count","1")),Arrays.asList(newColUpdate("data","count","3"),newColUpdate("data","img","0987654321"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00347")));
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","1"},{"00347","data","img","1234567890"}},table);
  ConditionalStatus result=client.updateRowConditionally(creds,table,s2bb("00347"),new ConditionalUpdates(Arrays.asList(newCondition("data","img","1234567890"),newCondition("data","count","1")),Arrays.asList(newColUpdate("data","count","3"),newColUpdate("data","img","0987654321"))));
  assertEquals(ConditionalStatus.ACCEPTED,result);
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","3"},{"00347","data","img","0987654321"}},table);
  client.closeConditionalWriter(cwid);
  try {
    client.updateRowsConditionally(cwid,updates);
    fail("conditional writer not closed");
  }
 catch (  UnknownWriter uk) {
  }
  String principal;
  ClusterUser cwuser=null;
  if (isKerberosEnabled()) {
    cwuser=getKdc().getClientPrincipal(1);
    principal=cwuser.getPrincipal();
    client.createLocalUser(creds,principal,s2bb("unused"));
  }
 else {
    principal="cwuser";
    client.createLocalUser(creds,principal,s2bb("bestpasswordever"));
  }
  client.changeUserAuthorizations(creds,principal,Collections.singleton(s2bb("A")));
  client.grantTablePermission(creds,principal,table,TablePermission.WRITE);
  client.grantTablePermission(creds,principal,table,TablePermission.READ);
  TestProxyClient cwuserProxyClient=null;
  Client origClient=null;
  Map<String,String> cwProperties;
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(cwuser.getPrincipal(),cwuser.getKeytab().getAbsolutePath());
    final UserGroupInformation cwuserUgi=UserGroupInformation.getCurrentUser();
    cwuserProxyClient=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,cwuserUgi);
    origClient=client;
    client=cwuserProxyClient.proxy();
    cwProperties=Collections.emptyMap();
  }
 else {
    cwProperties=Collections.singletonMap("password","bestpasswordever");
  }
  try {
    ByteBuffer cwCreds=client.login(principal,cwProperties);
    cwid=client.createConditionalWriter(cwCreds,table,new ConditionalWriterOptions().setAuthorizations(Collections.singleton(s2bb("A"))));
    updates.clear();
    updates.put(s2bb("00348"),new ConditionalUpdates(Arrays.asList(new Condition(new Column(s2bb("data"),s2bb("c"),s2bb("A")))),Arrays.asList(newColUpdate("data","seq","1"),newColUpdate("data","c","1").setColVisibility(s2bb("A")))));
    updates.put(s2bb("00349"),new ConditionalUpdates(Arrays.asList(new Condition(new Column(s2bb("data"),s2bb("c"),s2bb("B")))),Arrays.asList(newColUpdate("data","seq","1"))));
    results=client.updateRowsConditionally(cwid,updates);
    assertEquals(2,results.size());
    assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00348")));
    assertEquals(ConditionalStatus.INVISIBLE_VISIBILITY,results.get(s2bb("00349")));
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
      client=origClient;
    }
    assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","3"},{"00347","data","img","0987654321"},{"00348","data","seq","1"}},table);
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(cwuser.getPrincipal(),cwuser.getKeytab().getAbsolutePath());
      client=cwuserProxyClient.proxy();
    }
    updates.clear();
    updates.clear();
    updates.put(s2bb("00348"),new ConditionalUpdates(Arrays.asList(new Condition(new Column(s2bb("data"),s2bb("c"),s2bb("A"))).setValue(s2bb("0"))),Arrays.asList(newColUpdate("data","seq","2"),newColUpdate("data","c","2").setColVisibility(s2bb("A")))));
    results=client.updateRowsConditionally(cwid,updates);
    assertEquals(1,results.size());
    assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00348")));
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
      client=origClient;
    }
    assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","3"},{"00347","data","img","0987654321"},{"00348","data","seq","1"}},table);
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(cwuser.getPrincipal(),cwuser.getKeytab().getAbsolutePath());
      client=cwuserProxyClient.proxy();
    }
    updates.clear();
    updates.put(s2bb("00348"),new ConditionalUpdates(Arrays.asList(new Condition(new Column(s2bb("data"),s2bb("c"),s2bb("A"))).setValue(s2bb("1"))),Arrays.asList(newColUpdate("data","seq","2"),newColUpdate("data","c","2").setColVisibility(s2bb("A")))));
    results=client.updateRowsConditionally(cwid,updates);
    assertEquals(1,results.size());
    assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00348")));
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
      client=origClient;
    }
    assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","3"},{"00347","data","img","0987654321"},{"00348","data","seq","2"}},table);
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(cwuser.getPrincipal(),cwuser.getKeytab().getAbsolutePath());
      client=cwuserProxyClient.proxy();
    }
    client.closeConditionalWriter(cwid);
    try {
      client.updateRowsConditionally(cwid,updates);
      fail("conditional writer not closed");
    }
 catch (    UnknownWriter uk) {
    }
  }
  finally {
    if (isKerberosEnabled()) {
      if (null != cwuserProxyClient) {
        cwuserProxyClient.close();
      }
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
      client=origClient;
    }
    client.dropLocalUser(creds,principal);
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelete() throws Exception {
  client.updateAndFlush(creds,table,mutation("row0","cf","cq","value"));
  assertScan(new String[][]{{"row0","cf","cq","value"}},table);
  ColumnUpdate upd=new ColumnUpdate(s2bb("cf"),s2bb("cq"));
  upd.setDeleteCell(false);
  Map<ByteBuffer,List<ColumnUpdate>> notDelete=Collections.singletonMap(s2bb("row0"),Collections.singletonList(upd));
  client.updateAndFlush(creds,table,notDelete);
  String scanner=client.createScanner(creds,table,null);
  ScanResult entries=client.nextK(scanner,10);
  client.closeScanner(scanner);
  assertFalse(entries.more);
  assertEquals("Results: " + entries.results,1,entries.results.size());
  upd=new ColumnUpdate(s2bb("cf"),s2bb("cq"));
  upd.setDeleteCell(true);
  Map<ByteBuffer,List<ColumnUpdate>> delete=Collections.singletonMap(s2bb("row0"),Collections.singletonList(upd));
  client.updateAndFlush(creds,table,delete);
  assertScan(new String[][]{},table);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTableConstraints() throws Exception {
  log.debug("Setting NumericValueConstraint on " + table);
  client.addConstraint(creds,table,NumericValueConstraint.class.getName());
  Thread.sleep(ZOOKEEPER_PROPAGATION_TIME);
  log.debug("Attempting to verify client-side that constraints are observed");
  Map<String,Integer> constraints=client.listConstraints(creds,table);
  while (!constraints.containsKey(NumericValueConstraint.class.getName())) {
    log.debug("Constraints don't contain NumericValueConstraint");
    Thread.sleep(2000);
    constraints=client.listConstraints(creds,table);
  }
  assertEquals(2,client.listConstraints(creds,table).size());
  log.debug("Verified client-side that constraints exist");
  client.updateAndFlush(creds,table,mutation("row1","cf","cq","123"));
  log.debug("Successfully wrote data that satisfies the constraint");
  log.debug("Trying to write data that the constraint should reject");
  while (true) {
    try {
      client.updateAndFlush(creds,table,mutation("row1","cf","cq","x"));
      log.debug("Expected mutation to be rejected, but was not. Waiting and retrying");
      Thread.sleep(5000);
    }
 catch (    MutationsRejectedException ex) {
      break;
    }
  }
  log.debug("Saw expected failure on data which fails the constraint");
  log.debug("Removing constraint from table");
  client.removeConstraint(creds,table,2);
  sleepUninterruptibly(ZOOKEEPER_PROPAGATION_TIME,TimeUnit.MILLISECONDS);
  constraints=client.listConstraints(creds,table);
  while (constraints.containsKey(NumericValueConstraint.class.getName())) {
    log.debug("Constraints contains NumericValueConstraint");
    Thread.sleep(2000);
    constraints=client.listConstraints(creds,table);
  }
  assertEquals(1,client.listConstraints(creds,table).size());
  log.debug("Verified client-side that the constraint was removed");
  log.debug("Attempting to write mutation that should succeed after constraints was removed");
  while (true) {
    try {
      client.updateAndFlush(creds,table,mutation("row1","cf","cq","x"));
      break;
    }
 catch (    MutationsRejectedException ex) {
      log.debug("Expected mutation accepted, but was not. Waiting and retrying");
      Thread.sleep(5000);
    }
  }
  log.debug("Verifying that record can be read from the table");
  assertScan(new String[][]{{"row1","cf","cq","x"}},table);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void bulkImport() throws Exception {
  MiniAccumuloClusterImpl cluster=SharedMiniClusterBase.getCluster();
  FileSystem fs=cluster.getFileSystem();
  Path base=cluster.getTemporaryPath();
  Path dir=new Path(base,"test");
  assertTrue(fs.mkdirs(dir));
  String filename=dir + "/bulk/import/rfile.rf";
  FileSKVWriter writer=FileOperations.getInstance().openWriter(filename,fs,fs.getConf(),DefaultConfiguration.getInstance());
  writer.startDefaultLocalityGroup();
  writer.append(new org.apache.accumulo.core.data.Key(new Text("a"),new Text("b"),new Text("c")),new Value("value".getBytes(UTF_8)));
  writer.close();
  fs.mkdirs(new Path(dir + "/bulk/fail"));
  client.importDirectory(creds,table,dir + "/bulk/import",dir + "/bulk/fail",true);
  String scanner=client.createScanner(creds,table,null);
  ScanResult more=client.nextK(scanner,100);
  client.closeScanner(scanner);
  assertEquals(1,more.results.size());
  ByteBuffer maxRow=client.getMaxRow(creds,table,null,null,false,null,false);
  assertEquals(s2bb("a"),maxRow);
}

</code></pre>

<br>
<pre class="type-9 type-11 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void attachIteratorWithCompactions() throws Exception {
  if (client.tableExists(creds,"slow")) {
    client.deleteTable(creds,"slow");
  }
  client.createTable(creds,"slow",true,TimeType.MILLIS);
  IteratorSetting setting=new IteratorSetting(100,"slow",SlowIterator.class.getName(),Collections.singletonMap("sleepTime","250"));
  client.attachIterator(creds,"slow",setting,EnumSet.allOf(IteratorScope.class));
  for (int i=0; i < 40; i++) {
    client.updateAndFlush(creds,"slow",mutation("row" + i,"cf","cq","value"));
  }
  Map<String,String> map=client.tableIdMap(creds);
  Thread t=new Thread(){
    @Override public void run(){
      TestProxyClient proxyClient2=null;
      try {
        if (isKerberosEnabled()) {
          UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,UserGroupInformation.getCurrentUser());
        }
 else {
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory);
        }
        Client client2=proxyClient2.proxy();
        client2.compactTable(creds,"slow",null,null,null,true,true,null);
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
 finally {
        if (null != proxyClient2) {
          proxyClient2.close();
        }
      }
    }
  }
;
  t.start();
  final String desiredTableId=map.get("slow");
  assertNotNull(desiredTableId);
  List<ActiveCompaction> compactions=new ArrayList<ActiveCompaction>();
  for (int i=0; i < 100 && compactions.isEmpty(); i++) {
    for (    String tserver : client.getTabletServers(creds)) {
      List<ActiveCompaction> compactionsOnServer=client.getActiveCompactions(creds,tserver);
      for (      ActiveCompaction compact : compactionsOnServer) {
        if (desiredTableId.equals(compact.getExtent().tableId)) {
          compactions.add(compact);
        }
      }
      if (!compactions.isEmpty())       break;
    }
    sleepUninterruptibly(10,TimeUnit.MILLISECONDS);
  }
  t.join();
  assertFalse(compactions.isEmpty());
  for (  ActiveCompaction c : compactions) {
    if (desiredTableId.equals(c.getExtent().tableId)) {
      assertTrue(c.inputFiles.isEmpty());
      assertEquals(CompactionType.MINOR,c.getType());
      assertEquals(CompactionReason.USER,c.getReason());
      assertEquals("",c.localityGroup);
      assertTrue(c.outputFile.contains("default_tablet"));
      return;
    }
  }
  fail("Expection to find running compaction for table 'slow' but did not find one");
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void compactTable() throws Exception {
  String expected[][]=new String[10][];
  for (int i=0; i < 10; i++) {
    client.updateAndFlush(creds,table,mutation("row" + i,"cf","cq","" + i));
    expected[i]=new String[]{"row" + i,"cf","cq","" + i};
    client.flushTable(creds,table,null,null,true);
  }
  assertScan(expected,table);
  client.compactTable(creds,table,null,null,null,true,true,null);
  assertEquals(1,countFiles(table));
  assertScan(expected,table);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void tableRenames() throws Exception {
  Map<String,String> tables=client.tableIdMap(creds);
  client.renameTable(creds,table,"bar");
  Map<String,String> tables2=client.tableIdMap(creds);
  assertEquals(tables.get(table),tables2.get("bar"));
  assertTrue(client.tableExists(creds,"bar"));
  assertFalse(client.tableExists(creds,table));
  client.renameTable(creds,"bar",table);
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompactionStrategy() throws Exception {
  File jarDir=new File(System.getProperty("user.dir"),"target");
  assertTrue(jarDir.mkdirs() || jarDir.isDirectory());
  File jarFile=new File(jarDir,"TestCompactionStrat.jar");
  FileUtils.copyInputStreamToFile(Class.class.getResourceAsStream("/TestCompactionStrat.jar"),jarFile);
  client.setProperty(creds,Property.VFS_CONTEXT_CLASSPATH_PROPERTY.getKey() + "context1",jarFile.toString());
  client.setTableProperty(creds,table,Property.TABLE_CLASSPATH.getKey(),"context1");
  client.addSplits(creds,table,Collections.singleton(s2bb("efg")));
  client.updateAndFlush(creds,table,mutation("a","cf","cq","v1"));
  client.flushTable(creds,table,null,null,true);
  client.updateAndFlush(creds,table,mutation("b","cf","cq","v2"));
  client.flushTable(creds,table,null,null,true);
  client.updateAndFlush(creds,table,mutation("y","cf","cq","v1"));
  client.flushTable(creds,table,null,null,true);
  client.updateAndFlush(creds,table,mutation("z","cf","cq","v2"));
  client.flushTable(creds,table,null,null,true);
  assertEquals(4,countFiles(table));
  CompactionStrategyConfig csc=new CompactionStrategyConfig();
  csc.setClassName("org.apache.accumulo.test.EfgCompactionStrat");
  client.compactTable(creds,table,null,null,null,true,true,csc);
  assertEquals(3,countFiles(table));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void diskUsage() throws Exception {
  String TABLE_TEST2=getUniqueNames(2)[1];
  String expected[][]=new String[10][];
  for (int i=0; i < 10; i++) {
    client.updateAndFlush(creds,table,mutation("row" + i,"cf","cq","" + i));
    expected[i]=new String[]{"row" + i,"cf","cq","" + i};
    client.flushTable(creds,table,null,null,true);
  }
  assertScan(expected,table);
  client.compactTable(creds,table,null,null,null,true,true,null);
  assertEquals(1,countFiles(table));
  assertScan(expected,table);
  client.cloneTable(creds,table,TABLE_TEST2,true,null,null);
  Set<String> tablesToScan=new HashSet<String>();
  tablesToScan.add(table);
  tablesToScan.add(TABLE_TEST2);
  tablesToScan.add("foo");
  client.createTable(creds,"foo",true,TimeType.MILLIS);
  List<DiskUsage> diskUsage=(client.getDiskUsage(creds,tablesToScan));
  assertEquals(2,diskUsage.size());
  assertEquals(2,diskUsage.get(0).getTables().size());
  assertEquals(1,diskUsage.get(1).getTables().size());
  client.compactTable(creds,TABLE_TEST2,null,null,null,true,true,null);
  diskUsage=(client.getDiskUsage(creds,tablesToScan));
  assertEquals(3,diskUsage.size());
  assertEquals(1,diskUsage.get(0).getTables().size());
  assertEquals(1,diskUsage.get(1).getTables().size());
  assertEquals(1,diskUsage.get(2).getTables().size());
  client.deleteTable(creds,"foo");
  client.deleteTable(creds,TABLE_TEST2);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void localityGroups() throws Exception {
  Map<String,Set<String>> groups=new HashMap<String,Set<String>>();
  groups.put("group1",Collections.singleton("cf1"));
  groups.put("group2",Collections.singleton("cf2"));
  client.setLocalityGroups(creds,table,groups);
  assertEquals(groups,client.getLocalityGroups(creds,table));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSystemProperties() throws Exception {
  Map<String,String> cfg=client.getSiteConfiguration(creds);
  client.setProperty(creds,"table.split.threshold","500M");
  for (int i=0; i < 5; i++) {
    cfg=client.getSystemConfiguration(creds);
    if ("500M".equals(cfg.get("table.split.threshold")))     break;
    sleepUninterruptibly(200,TimeUnit.MILLISECONDS);
  }
  assertEquals("500M",cfg.get("table.split.threshold"));
  client.removeProperty(creds,"table.split.threshold");
  for (int i=0; i < 5; i++) {
    cfg=client.getSystemConfiguration(creds);
    if (!"500M".equals(cfg.get("table.split.threshold")))     break;
    sleepUninterruptibly(200,TimeUnit.MILLISECONDS);
  }
  assertNotEquals("500M",cfg.get("table.split.threshold"));
}

</code></pre>

<br>
<pre class="type-9 type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userManagement() throws Exception {
  String user;
  ClusterUser otherClient=null;
  ByteBuffer password=s2bb("password");
  if (isKerberosEnabled()) {
    otherClient=getKdc().getClientPrincipal(1);
    user=otherClient.getPrincipal();
  }
 else {
    user=getUniqueNames(1)[0];
  }
  client.createLocalUser(creds,user,password);
  Set<String> users=client.listLocalUsers(creds);
  Set<String> expectedUsers=new HashSet<String>(Arrays.asList(clientPrincipal,user));
  assertTrue("Did not find all expected users: " + expectedUsers,users.containsAll(expectedUsers));
  HashSet<ByteBuffer> auths=new HashSet<ByteBuffer>(Arrays.asList(s2bb("A"),s2bb("B")));
  client.changeUserAuthorizations(creds,user,auths);
  List<ByteBuffer> update=client.getUserAuthorizations(creds,user);
  assertEquals(auths,new HashSet<ByteBuffer>(update));
  if (!isKerberosEnabled()) {
    password=s2bb("");
    client.changeLocalUserPassword(creds,user,password);
    assertTrue(client.authenticateUser(creds,user,s2pp(ByteBufferUtil.toString(password))));
  }
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
    final UserGroupInformation ugi=UserGroupInformation.getCurrentUser();
    TestProxyClient otherProxyClient=null;
    try {
      otherProxyClient=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,ugi);
      otherProxyClient.proxy().login(user,Collections.<String,String>emptyMap());
    }
  finally {
      if (null != otherProxyClient) {
        otherProxyClient.close();
      }
    }
  }
 else {
    client.login(user,s2pp(ByteBufferUtil.toString(password)));
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void attachIteratorsWithScans() throws Exception {
  if (client.tableExists(creds,"slow")) {
    client.deleteTable(creds,"slow");
  }
  client.createTable(creds,"slow",true,TimeType.MILLIS);
  IteratorSetting setting=new IteratorSetting(100,"slow",SlowIterator.class.getName(),Collections.singletonMap("sleepTime","250"));
  client.attachIterator(creds,"slow",setting,EnumSet.allOf(IteratorScope.class));
  for (int i=0; i < 40; i++) {
    client.updateAndFlush(creds,"slow",mutation("row" + i,"cf","cq","value"));
  }
  Thread t=new Thread(){
    @Override public void run(){
      String scanner;
      TestProxyClient proxyClient2=null;
      try {
        if (isKerberosEnabled()) {
          UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,UserGroupInformation.getCurrentUser());
        }
 else {
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory);
        }
        Client client2=proxyClient2.proxy();
        scanner=client2.createScanner(creds,"slow",null);
        client2.nextK(scanner,10);
        client2.closeScanner(scanner);
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
 finally {
        if (null != proxyClient2) {
          proxyClient2.close();
        }
      }
    }
  }
;
  t.start();
  List<ActiveScan> scans=new ArrayList<ActiveScan>();
  for (int i=0; i < 100 && scans.isEmpty(); i++) {
    for (    String tserver : client.getTabletServers(creds)) {
      List<ActiveScan> scansForServer=client.getActiveScans(creds,tserver);
      for (      ActiveScan scan : scansForServer) {
        if (clientPrincipal.equals(scan.getUser())) {
          scans.add(scan);
        }
      }
      if (!scans.isEmpty())       break;
      sleepUninterruptibly(100,TimeUnit.MILLISECONDS);
    }
  }
  t.join();
  assertFalse("Expected to find scans, but found none",scans.isEmpty());
  boolean found=false;
  Map<String,String> map=null;
  for (int i=0; i < scans.size() && !found; i++) {
    ActiveScan scan=scans.get(i);
    if (clientPrincipal.equals(scan.getUser())) {
      assertTrue(ScanState.RUNNING.equals(scan.getState()) || ScanState.QUEUED.equals(scan.getState()));
      assertEquals(ScanType.SINGLE,scan.getType());
      assertEquals("slow",scan.getTable());
      map=client.tableIdMap(creds);
      assertEquals(map.get("slow"),scan.getExtent().tableId);
      assertTrue(scan.getExtent().endRow == null);
      assertTrue(scan.getExtent().prevEndRow == null);
      found=true;
    }
  }
  assertTrue("Could not find a scan against the 'slow' table",found);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void tableProperties() throws Exception {
  Map<String,String> systemProps=client.getSystemConfiguration(creds);
  String systemTableSplitThreshold=systemProps.get("table.split.threshold");
  Map<String,String> orig=client.getTableProperties(creds,table);
  client.setTableProperty(creds,table,"table.split.threshold","500M");
  Map<String,String> update=client.getTableProperties(creds,table);
  assertEquals(update.get("table.split.threshold"),"500M");
  assertEquals(systemTableSplitThreshold,client.getSystemConfiguration(creds).get("table.split.threshold"));
  client.removeTableProperty(creds,table,"table.split.threshold");
  update=client.getTableProperties(creds,table);
  assertEquals(orig,update);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetRowRange() throws Exception {
  Range range=client.getRowRange(s2bb("xyzzy"));
  org.apache.accumulo.core.data.Range range2=new org.apache.accumulo.core.data.Range(new Text("xyzzy"));
  assertEquals(0,range.start.row.compareTo(t2bb(range2.getStartKey().getRow())));
  assertEquals(0,range.stop.row.compareTo(t2bb(range2.getEndKey().getRow())));
  assertEquals(range.startInclusive,range2.isStartKeyInclusive());
  assertEquals(range.stopInclusive,range2.isEndKeyInclusive());
  assertEquals(0,range.start.colFamily.compareTo(t2bb(range2.getStartKey().getColumnFamily())));
  assertEquals(0,range.start.colQualifier.compareTo(t2bb(range2.getStartKey().getColumnQualifier())));
  assertEquals(0,range.stop.colFamily.compareTo(t2bb(range2.getEndKey().getColumnFamily())));
  assertEquals(0,range.stop.colQualifier.compareTo(t2bb(range2.getEndKey().getColumnQualifier())));
  assertEquals(range.start.timestamp,range.start.timestamp);
  assertEquals(range.stop.timestamp,range.stop.timestamp);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.TestProxyInstanceOperations </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void properties() throws TException {
  tpc.proxy().setProperty(userpass,"test.systemprop","whistletips");
  assertEquals(tpc.proxy().getSystemConfiguration(userpass).get("test.systemprop"),"whistletips");
  tpc.proxy().removeProperty(userpass,"test.systemprop");
  assertNull(tpc.proxy().getSystemConfiguration(userpass).get("test.systemprop"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.TestProxyReadWrite </h4><pre class="type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testVisibility() throws Exception {
  Set<ByteBuffer> auths=new HashSet<ByteBuffer>();
  auths.add(ByteBuffer.wrap("even".getBytes()));
  tpc.proxy().changeUserAuthorizations(userpass,"root",auths);
  int maxInserts=10000;
  Map<ByteBuffer,List<ColumnUpdate>> mutations=new HashMap<ByteBuffer,List<ColumnUpdate>>();
  String format="%1$05d";
  String writer=tpc.proxy().createWriter(userpass,testtable,null);
  for (int i=0; i < maxInserts; i++) {
    if (i % 2 == 0)     addMutation(mutations,String.format(format,i),"cf" + i,"cq" + i,"even",Util.randString(10));
 else     addMutation(mutations,String.format(format,i),"cf" + i,"cq" + i,"odd",Util.randString(10));
    if (i % 1000 == 0 || i == maxInserts - 1) {
      tpc.proxy().update(writer,mutations);
      mutations.clear();
    }
  }
  tpc.proxy().flush(writer);
  tpc.proxy().closeWriter(writer);
  ScanOptions opts=new ScanOptions();
  opts.authorizations=auths;
  String cookie=tpc.proxy().createScanner(userpass,testtable,opts);
  int i=0;
  boolean hasNext=true;
  int k=1000;
  int numRead=0;
  while (hasNext) {
    ScanResult kvList=tpc.proxy().nextK(cookie,k);
    for (    KeyValue kv : kvList.getResults()) {
      assertEquals(Integer.parseInt(new String(kv.getKey().getRow())),i);
      i+=2;
      numRead++;
    }
    hasNext=kvList.isMore();
  }
  assertEquals(maxInserts / 2,numRead);
}

</code></pre>

<br>
<pre class="type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Insert 100000 cells which have as the row [0..99999] (padded with zeros). Filter the results so only the even numbers come back.
 */
@Test public void readWriteOneShotWithFilterIterator() throws Exception {
  int maxInserts=10000;
  Map<ByteBuffer,List<ColumnUpdate>> mutations=new HashMap<ByteBuffer,List<ColumnUpdate>>();
  String format="%1$05d";
  for (int i=0; i < maxInserts; i++) {
    addMutation(mutations,String.format(format,i),"cf" + i,"cq" + i,Util.randString(10));
    if (i % 1000 == 0 || i == maxInserts - 1) {
      tpc.proxy().updateAndFlush(userpass,testtable,mutations);
      mutations.clear();
    }
  }
  String regex=".*[02468]";
  org.apache.accumulo.core.client.IteratorSetting is=new org.apache.accumulo.core.client.IteratorSetting(50,regex,RegExFilter.class);
  RegExFilter.setRegexs(is,regex,null,null,null,false);
  IteratorSetting pis=Util.iteratorSetting2ProxyIteratorSetting(is);
  ScanOptions opts=new ScanOptions();
  opts.iterators=Collections.singletonList(pis);
  String cookie=tpc.proxy().createScanner(userpass,testtable,opts);
  int i=0;
  boolean hasNext=true;
  int k=1000;
  while (hasNext) {
    ScanResult kvList=tpc.proxy().nextK(cookie,k);
    for (    KeyValue kv : kvList.getResults()) {
      assertEquals(Integer.parseInt(new String(kv.getKey().getRow())),i);
      i+=2;
    }
    hasNext=kvList.isMore();
  }
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Insert 100000 cells which have as the row [0..99999] (padded with zeros). Set a columnFamily so only the entries with specified column family come back
 * (there should be 50,000)
 */
@Test public void readWriteBatchOneShotWithColumnFamilyOnly() throws Exception {
  int maxInserts=100000;
  Map<ByteBuffer,List<ColumnUpdate>> mutations=new HashMap<ByteBuffer,List<ColumnUpdate>>();
  String format="%1$05d";
  for (int i=0; i < maxInserts; i++) {
    addMutation(mutations,String.format(format,i),"cf" + (i % 2),"cq" + (i % 2),Util.randString(10));
    if (i % 1000 == 0 || i == maxInserts - 1) {
      tpc.proxy().updateAndFlush(userpass,testtable,mutations);
      mutations.clear();
    }
  }
  BatchScanOptions options=new BatchScanOptions();
  ScanColumn sc=new ScanColumn();
  sc.colFamily=ByteBuffer.wrap("cf0".getBytes());
  options.columns=Collections.singletonList(sc);
  String cookie=tpc.proxy().createBatchScanner(userpass,testtable,options);
  int i=0;
  boolean hasNext=true;
  int k=1000;
  while (hasNext) {
    ScanResult kvList=tpc.proxy().nextK(cookie,k);
    i+=kvList.getResultsSize();
    hasNext=kvList.isMore();
  }
  assertEquals(i,50000);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Insert 100000 cells which have as the row [0..99999] (padded with zeros). Set a columnFamily + columnQualififer so only the entries with specified column
 * come back (there should be 50,000)
 */
@Test public void readWriteBatchOneShotWithFullColumn() throws Exception {
  int maxInserts=100000;
  Map<ByteBuffer,List<ColumnUpdate>> mutations=new HashMap<ByteBuffer,List<ColumnUpdate>>();
  String format="%1$05d";
  for (int i=0; i < maxInserts; i++) {
    addMutation(mutations,String.format(format,i),"cf" + (i % 2),"cq" + (i % 2),Util.randString(10));
    if (i % 1000 == 0 || i == maxInserts - 1) {
      tpc.proxy().updateAndFlush(userpass,testtable,mutations);
      mutations.clear();
    }
  }
  BatchScanOptions options=new BatchScanOptions();
  ScanColumn sc=new ScanColumn();
  sc.colFamily=ByteBuffer.wrap("cf0".getBytes());
  sc.colQualifier=ByteBuffer.wrap("cq0".getBytes());
  options.columns=Collections.singletonList(sc);
  String cookie=tpc.proxy().createBatchScanner(userpass,testtable,options);
  int i=0;
  boolean hasNext=true;
  int k=1000;
  while (hasNext) {
    ScanResult kvList=tpc.proxy().nextK(cookie,k);
    i+=kvList.getResultsSize();
    hasNext=kvList.isMore();
  }
  assertEquals(i,50000);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void readWriteOneShotWithRange() throws Exception {
  int maxInserts=100000;
  Map<ByteBuffer,List<ColumnUpdate>> mutations=new HashMap<ByteBuffer,List<ColumnUpdate>>();
  String format="%1$05d";
  for (int i=0; i < maxInserts; i++) {
    addMutation(mutations,String.format(format,i),"cf" + i,"cq" + i,Util.randString(10));
    if (i % 1000 == 0 || i == maxInserts - 1) {
      tpc.proxy().updateAndFlush(userpass,testtable,mutations);
      mutations.clear();
    }
  }
  Key stop=new Key();
  stop.setRow("5".getBytes());
  ScanOptions opts=new ScanOptions();
  opts.range=new Range(null,false,stop,false);
  String cookie=tpc.proxy().createScanner(userpass,testtable,opts);
  int i=0;
  boolean hasNext=true;
  int k=1000;
  while (hasNext) {
    ScanResult kvList=tpc.proxy().nextK(cookie,k);
    i+=kvList.getResultsSize();
    hasNext=kvList.isMore();
  }
  assertEquals(i,50000);
}

</code></pre>

<br>
<pre class="type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void asynchReadWrite() throws Exception {
  int maxInserts=10000;
  Map<ByteBuffer,List<ColumnUpdate>> mutations=new HashMap<ByteBuffer,List<ColumnUpdate>>();
  String format="%1$05d";
  String writer=tpc.proxy().createWriter(userpass,testtable,null);
  for (int i=0; i < maxInserts; i++) {
    addMutation(mutations,String.format(format,i),"cf" + i,"cq" + i,Util.randString(10));
    if (i % 1000 == 0 || i == maxInserts - 1) {
      tpc.proxy().update(writer,mutations);
      mutations.clear();
    }
  }
  tpc.proxy().flush(writer);
  tpc.proxy().closeWriter(writer);
  String regex=".*[02468]";
  org.apache.accumulo.core.client.IteratorSetting is=new org.apache.accumulo.core.client.IteratorSetting(50,regex,RegExFilter.class);
  RegExFilter.setRegexs(is,regex,null,null,null,false);
  IteratorSetting pis=Util.iteratorSetting2ProxyIteratorSetting(is);
  ScanOptions opts=new ScanOptions();
  opts.iterators=Collections.singletonList(pis);
  String cookie=tpc.proxy().createScanner(userpass,testtable,opts);
  int i=0;
  boolean hasNext=true;
  int k=1000;
  int numRead=0;
  while (hasNext) {
    ScanResult kvList=tpc.proxy().nextK(cookie,k);
    for (    KeyValue kv : kvList.getResults()) {
      assertEquals(i,Integer.parseInt(new String(kv.getKey().getRow())));
      numRead++;
      i+=2;
    }
    hasNext=kvList.isMore();
  }
  assertEquals(maxInserts / 2,numRead);
}

</code></pre>

<br>
<pre class="type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Insert 100000 cells which have as the row [0..99999] (padded with zeros). Filter the results so only the even numbers come back.
 */
@Test public void readWriteBatchOneShotWithFilterIterator() throws Exception {
  int maxInserts=10000;
  Map<ByteBuffer,List<ColumnUpdate>> mutations=new HashMap<ByteBuffer,List<ColumnUpdate>>();
  String format="%1$05d";
  for (int i=0; i < maxInserts; i++) {
    addMutation(mutations,String.format(format,i),"cf" + i,"cq" + i,Util.randString(10));
    if (i % 1000 == 0 || i == maxInserts - 1) {
      tpc.proxy().updateAndFlush(userpass,testtable,mutations);
      mutations.clear();
    }
  }
  String regex=".*[02468]";
  org.apache.accumulo.core.client.IteratorSetting is=new org.apache.accumulo.core.client.IteratorSetting(50,regex,RegExFilter.class);
  RegExFilter.setRegexs(is,regex,null,null,null,false);
  IteratorSetting pis=Util.iteratorSetting2ProxyIteratorSetting(is);
  ScanOptions opts=new ScanOptions();
  opts.iterators=Collections.singletonList(pis);
  String cookie=tpc.proxy().createScanner(userpass,testtable,opts);
  int i=0;
  boolean hasNext=true;
  int k=1000;
  while (hasNext) {
    ScanResult kvList=tpc.proxy().nextK(cookie,k);
    for (    KeyValue kv : kvList.getResults()) {
      assertEquals(Integer.parseInt(new String(kv.getKey().getRow())),i);
      i+=2;
    }
    hasNext=kvList.isMore();
  }
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Insert 100000 cells which have as the row [0..99999] (padded with zeros). Set a range so only the entries between -Inf...5 come back (there should be
 * 50,000)
 */
@Test public void readWriteBatchOneShotWithRange() throws Exception {
  int maxInserts=100000;
  Map<ByteBuffer,List<ColumnUpdate>> mutations=new HashMap<ByteBuffer,List<ColumnUpdate>>();
  String format="%1$05d";
  for (int i=0; i < maxInserts; i++) {
    addMutation(mutations,String.format(format,i),"cf" + i,"cq" + i,Util.randString(10));
    if (i % 1000 == 0 || i == maxInserts - 1) {
      tpc.proxy().updateAndFlush(userpass,testtable,mutations);
      mutations.clear();
    }
  }
  Key stop=new Key();
  stop.setRow("5".getBytes());
  BatchScanOptions options=new BatchScanOptions();
  options.ranges=Collections.singletonList(new Range(null,false,stop,false));
  String cookie=tpc.proxy().createBatchScanner(userpass,testtable,options);
  int i=0;
  boolean hasNext=true;
  int k=1000;
  while (hasNext) {
    ScanResult kvList=tpc.proxy().nextK(cookie,k);
    i+=kvList.getResultsSize();
    hasNext=kvList.isMore();
  }
  assertEquals(i,50000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.TestProxySecurityOperations </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void auths() throws TException {
  HashSet<ByteBuffer> newauths=new HashSet<ByteBuffer>();
  newauths.add(ByteBuffer.wrap("BBR".getBytes()));
  newauths.add(ByteBuffer.wrap("Barney".getBytes()));
  tpc.proxy().changeUserAuthorizations(userpass,testuser,newauths);
  List<ByteBuffer> actualauths=tpc.proxy().getUserAuthorizations(userpass,testuser);
  assertEquals(actualauths.size(),newauths.size());
  for (  ByteBuffer auth : actualauths) {
    assertTrue(newauths.contains(auth));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.TestProxyTableOperations </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void tableOperationsRowMethods() throws TException {
  Map<ByteBuffer,List<ColumnUpdate>> mutations=new HashMap<ByteBuffer,List<ColumnUpdate>>();
  for (int i=0; i < 10; i++) {
    addMutation(mutations,"" + i,"cf","cq","");
  }
  tpc.proxy().updateAndFlush(userpass,testtable,mutations);
  assertEquals(tpc.proxy().getMaxRow(userpass,testtable,null,null,true,null,true),ByteBuffer.wrap("9".getBytes()));
  tpc.proxy().deleteRows(userpass,testtable,ByteBuffer.wrap("51".getBytes()),ByteBuffer.wrap("99".getBytes()));
  assertEquals(tpc.proxy().getMaxRow(userpass,testtable,null,null,true,null,true),ByteBuffer.wrap("5".getBytes()));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void constraints() throws TException {
  int cid=tpc.proxy().addConstraint(userpass,testtable,"org.apache.accumulo.TestConstraint");
  Map<String,Integer> constraints=tpc.proxy().listConstraints(userpass,testtable);
  assertEquals((int)constraints.get("org.apache.accumulo.TestConstraint"),cid);
  tpc.proxy().removeConstraint(userpass,testtable,cid);
  constraints=tpc.proxy().listConstraints(userpass,testtable);
  assertNull(constraints.get("org.apache.accumulo.TestConstraint"));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void tableProperties() throws TException {
  tpc.proxy().setTableProperty(userpass,testtable,"test.property1","wharrrgarbl");
  assertEquals(tpc.proxy().getTableProperties(userpass,testtable).get("test.property1"),"wharrrgarbl");
  tpc.proxy().removeTableProperty(userpass,testtable,"test.property1");
  assertNull(tpc.proxy().getTableProperties(userpass,testtable).get("test.property1"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void localityGroups() throws TException {
  Map<String,Set<String>> groups=new HashMap<String,Set<String>>();
  Set<String> group1=new HashSet<String>();
  group1.add("cf1");
  groups.put("group1",group1);
  Set<String> group2=new HashSet<String>();
  group2.add("cf2");
  group2.add("cf3");
  groups.put("group2",group2);
  tpc.proxy().setLocalityGroups(userpass,testtable,groups);
  Map<String,Set<String>> actualGroups=tpc.proxy().getLocalityGroups(userpass,testtable);
  assertEquals(groups.size(),actualGroups.size());
  for (  String groupName : groups.keySet()) {
    assertTrue(actualGroups.containsKey(groupName));
    assertEquals(groups.get(groupName).size(),actualGroups.get(groupName).size());
    for (    String cf : groups.get(groupName)) {
      assertTrue(actualGroups.get(groupName).contains(cf));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.CyclicReplicationIT </h4><pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataIsNotOverReplicated() throws Exception {
  File master1Dir=createTestDir("master1"), master2Dir=createTestDir("master2");
  String password="password";
  MiniAccumuloConfigImpl master1Cfg;
  MiniAccumuloClusterImpl master1Cluster;
  while (true) {
    master1Cfg=new MiniAccumuloConfigImpl(master1Dir,password);
    master1Cfg.setNumTservers(1);
    master1Cfg.setInstanceName("master1");
    ConfigurableMacBase.configureForEnvironment(master1Cfg,this.getClass(),ConfigurableMacBase.getSslDir(master1Dir));
    master1Cfg.setProperty(Property.REPLICATION_NAME,master1Cfg.getInstanceName());
    master1Cfg.setProperty(Property.TSERV_WALOG_MAX_SIZE,"5M");
    master1Cfg.setProperty(Property.REPLICATION_THREADCHECK,"5m");
    master1Cfg.setProperty(Property.REPLICATION_WORK_ASSIGNMENT_SLEEP,"1s");
    master1Cfg.setProperty(Property.MASTER_REPLICATION_SCAN_INTERVAL,"1s");
    master1Cluster=new MiniAccumuloClusterImpl(master1Cfg);
    setCoreSite(master1Cluster);
    try {
      master1Cluster.start();
      break;
    }
 catch (    ZooKeeperBindException e) {
      log.warn("Failed to start ZooKeeper on " + master1Cfg.getZooKeeperPort() + ", will retry");
    }
  }
  MiniAccumuloConfigImpl master2Cfg;
  MiniAccumuloClusterImpl master2Cluster;
  while (true) {
    master2Cfg=new MiniAccumuloConfigImpl(master2Dir,password);
    master2Cfg.setNumTservers(1);
    master2Cfg.setInstanceName("master2");
    this.updatePeerConfigFromPrimary(master1Cfg,master2Cfg);
    master2Cfg.setProperty(Property.REPLICATION_NAME,master2Cfg.getInstanceName());
    master2Cfg.setProperty(Property.TSERV_WALOG_MAX_SIZE,"5M");
    master2Cfg.setProperty(Property.REPLICATION_THREADCHECK,"5m");
    master2Cfg.setProperty(Property.REPLICATION_WORK_ASSIGNMENT_SLEEP,"1s");
    master2Cfg.setProperty(Property.MASTER_REPLICATION_SCAN_INTERVAL,"1s");
    master2Cluster=new MiniAccumuloClusterImpl(master2Cfg);
    setCoreSite(master2Cluster);
    try {
      master2Cluster.start();
      break;
    }
 catch (    ZooKeeperBindException e) {
      log.warn("Failed to start ZooKeeper on " + master2Cfg.getZooKeeperPort() + ", will retry");
    }
  }
  try {
    Connector connMaster1=master1Cluster.getConnector("root",new PasswordToken(password)), connMaster2=master2Cluster.getConnector("root",new PasswordToken(password));
    String master1UserName="master1", master1Password="foo";
    String master2UserName="master2", master2Password="bar";
    String master1Table=master1Cluster.getInstanceName(), master2Table=master2Cluster.getInstanceName();
    connMaster1.securityOperations().createLocalUser(master1UserName,new PasswordToken(master1Password));
    connMaster2.securityOperations().createLocalUser(master2UserName,new PasswordToken(master2Password));
    connMaster1.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + master2Cluster.getInstanceName(),master2UserName);
    connMaster1.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + master2Cluster.getInstanceName(),master2Password);
    connMaster2.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + master1Cluster.getInstanceName(),master1UserName);
    connMaster2.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + master1Cluster.getInstanceName(),master1Password);
    connMaster1.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + master2Cluster.getInstanceName(),ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(master2Cluster.getInstanceName(),master2Cluster.getZooKeepers())));
    connMaster2.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + master1Cluster.getInstanceName(),ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(master1Cluster.getInstanceName(),master1Cluster.getZooKeepers())));
    connMaster1.tableOperations().create(master1Table,new NewTableConfiguration().withoutDefaultIterators());
    String master1TableId=connMaster1.tableOperations().tableIdMap().get(master1Table);
    Assert.assertNotNull(master1TableId);
    connMaster2.tableOperations().create(master2Table,new NewTableConfiguration().withoutDefaultIterators());
    String master2TableId=connMaster2.tableOperations().tableIdMap().get(master2Table);
    Assert.assertNotNull(master2TableId);
    connMaster1.tableOperations().setProperty(master1Table,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster1.tableOperations().setProperty(master1Table,Property.TABLE_REPLICATION_TARGET.getKey() + master2Cluster.getInstanceName(),master2TableId);
    connMaster2.tableOperations().setProperty(master2Table,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster2.tableOperations().setProperty(master2Table,Property.TABLE_REPLICATION_TARGET.getKey() + master1Cluster.getInstanceName(),master1TableId);
    connMaster1.securityOperations().grantTablePermission(master1UserName,master1Table,TablePermission.WRITE);
    connMaster2.securityOperations().grantTablePermission(master2UserName,master2Table,TablePermission.WRITE);
    IteratorSetting summingCombiner=new IteratorSetting(50,SummingCombiner.class);
    SummingCombiner.setEncodingType(summingCombiner,Type.STRING);
    SummingCombiner.setCombineAllColumns(summingCombiner,true);
    connMaster1.tableOperations().attachIterator(master1Table,summingCombiner);
    connMaster2.tableOperations().attachIterator(master2Table,summingCombiner);
    BatchWriter bw=connMaster1.createBatchWriter(master1Table,new BatchWriterConfig());
    Mutation m=new Mutation("row");
    m.put("count","","1");
    bw.addMutation(m);
    bw.close();
    Set<String> files=connMaster1.replicationOperations().referencedFiles(master1Table);
    log.info("Found {} that need replication from master1",files);
    for (    ProcessReference proc : master1Cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      master1Cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    master1Cluster.exec(TabletServer.class);
    log.info("Restarted tserver on master1");
    Thread.sleep(1000);
    Scanner s=connMaster1.createScanner(master1Table,Authorizations.EMPTY);
    Entry<Key,Value> entry=Iterables.getOnlyElement(s);
    Assert.assertEquals("1",entry.getValue().toString());
    connMaster1.replicationOperations().drain(master1Table,files);
    Thread.sleep(5000);
    s=connMaster2.createScanner(master2Table,Authorizations.EMPTY);
    entry=Iterables.getOnlyElement(s);
    Assert.assertEquals("1",entry.getValue().toString());
    files=connMaster2.replicationOperations().referencedFiles(master2Table);
    for (    ProcessReference proc : master2Cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      master2Cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    master2Cluster.exec(TabletServer.class);
    Thread.sleep(1000);
    s=connMaster2.createScanner(master2Table,Authorizations.EMPTY);
    entry=Iterables.getOnlyElement(s);
    Assert.assertEquals("1",entry.getValue().toString());
    connMaster2.replicationOperations().drain(master2Table,files);
    Thread.sleep(5000);
    s=connMaster1.createScanner(master1Table,Authorizations.EMPTY);
    entry=Iterables.getOnlyElement(s);
    Assert.assertEquals("1",entry.getValue().toString());
  }
  finally {
    master1Cluster.stop();
    master2Cluster.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.FinishedWorkUpdaterIT </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void chooseMinimumBeginOffsetInfiniteEnd() throws Exception {
  conn.securityOperations().grantTablePermission(conn.whoami(),ReplicationTable.NAME,TablePermission.READ);
  conn.securityOperations().grantTablePermission(conn.whoami(),ReplicationTable.NAME,TablePermission.WRITE);
  ReplicationTable.setOnline(conn);
  String file="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  Status stat1=Status.newBuilder().setBegin(100).setEnd(1000).setClosed(true).setInfiniteEnd(true).build(), stat2=Status.newBuilder().setBegin(1).setEnd(1000).setClosed(true).setInfiniteEnd(true).build(), stat3=Status.newBuilder().setBegin(500).setEnd(1000).setClosed(true).setInfiniteEnd(true).build();
  ReplicationTarget target1=new ReplicationTarget("peer1","table1","1"), target2=new ReplicationTarget("peer2","table2","1"), target3=new ReplicationTarget("peer3","table3","1");
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  Mutation m=new Mutation(file);
  WorkSection.add(m,target1.toText(),ProtobufUtil.toValue(stat1));
  WorkSection.add(m,target2.toText(),ProtobufUtil.toValue(stat2));
  WorkSection.add(m,target3.toText(),ProtobufUtil.toValue(stat3));
  bw.addMutation(m);
  bw.close();
  updater.run();
  Scanner s=ReplicationTable.getScanner(conn);
  s.setRange(Range.exact(file));
  StatusSection.limit(s);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  Assert.assertEquals(entry.getKey().getColumnFamily(),StatusSection.NAME);
  Assert.assertEquals(entry.getKey().getColumnQualifier().toString(),target1.getSourceTableId());
  Status actual=Status.parseFrom(entry.getValue().get());
  Assert.assertEquals(1,actual.getBegin());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void chooseMinimumBeginOffset() throws Exception {
  conn.securityOperations().grantTablePermission(conn.whoami(),ReplicationTable.NAME,TablePermission.READ);
  conn.securityOperations().grantTablePermission(conn.whoami(),ReplicationTable.NAME,TablePermission.WRITE);
  ReplicationTable.setOnline(conn);
  String file="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  Status stat1=Status.newBuilder().setBegin(100).setEnd(1000).setClosed(true).setInfiniteEnd(false).build(), stat2=Status.newBuilder().setBegin(500).setEnd(1000).setClosed(true).setInfiniteEnd(false).build(), stat3=Status.newBuilder().setBegin(1).setEnd(1000).setClosed(true).setInfiniteEnd(false).build();
  ReplicationTarget target1=new ReplicationTarget("peer1","table1","1"), target2=new ReplicationTarget("peer2","table2","1"), target3=new ReplicationTarget("peer3","table3","1");
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  Mutation m=new Mutation(file);
  WorkSection.add(m,target1.toText(),ProtobufUtil.toValue(stat1));
  WorkSection.add(m,target2.toText(),ProtobufUtil.toValue(stat2));
  WorkSection.add(m,target3.toText(),ProtobufUtil.toValue(stat3));
  bw.addMutation(m);
  bw.close();
  updater.run();
  Scanner s=ReplicationTable.getScanner(conn);
  s.setRange(Range.exact(file));
  StatusSection.limit(s);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  Assert.assertEquals(entry.getKey().getColumnFamily(),StatusSection.NAME);
  Assert.assertEquals(entry.getKey().getColumnQualifier().toString(),target1.getSourceTableId());
  Status actual=Status.parseFrom(entry.getValue().get());
  Assert.assertEquals(1,actual.getBegin());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void recordsWithProgressUpdateBothTables() throws Exception {
  conn.securityOperations().grantTablePermission(conn.whoami(),ReplicationTable.NAME,TablePermission.READ);
  conn.securityOperations().grantTablePermission(conn.whoami(),ReplicationTable.NAME,TablePermission.WRITE);
  ReplicationTable.setOnline(conn);
  String file="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  Status stat=Status.newBuilder().setBegin(100).setEnd(200).setClosed(true).setInfiniteEnd(false).build();
  ReplicationTarget target=new ReplicationTarget("peer","table1","1");
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  Mutation m=new Mutation(file);
  WorkSection.add(m,target.toText(),ProtobufUtil.toValue(stat));
  bw.addMutation(m);
  bw.close();
  updater.run();
  Scanner s=ReplicationTable.getScanner(conn);
  s.setRange(Range.exact(file));
  StatusSection.limit(s);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  Assert.assertEquals(entry.getKey().getColumnFamily(),StatusSection.NAME);
  Assert.assertEquals(entry.getKey().getColumnQualifier().toString(),target.getSourceTableId());
  Status actual=Status.parseFrom(entry.getValue().get());
  Assert.assertEquals(stat.getBegin(),actual.getBegin());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.GarbageCollectorCommunicatesWithTServersIT </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testActiveWalPrecludesClosing() throws Exception {
  final String table=getUniqueNames(1)[0];
  final Connector conn=getConnector();
  ReplicationTable.setOnline(conn);
  log.info("Creating {}",table);
  conn.tableOperations().create(table);
  conn.tableOperations().setProperty(table,Property.TABLE_REPLICATION.getKey(),"true");
  log.info("Writing a few mutations to the table");
  BatchWriter bw=conn.createBatchWriter(table,null);
  byte[] empty=new byte[0];
  for (int i=0; i < 5; i++) {
    Mutation m=new Mutation(Integer.toString(i));
    m.put(empty,empty,empty);
    bw.addMutation(m);
  }
  log.info("Flushing mutations to the server");
  bw.flush();
  log.info("Checking that metadata only has two WALs recorded for this table (inUse, and opened)");
  Set<String> wals=getWalsForTable(table);
  Assert.assertEquals("Expected to only find two WALs for the table",2,wals.size());
  conn.tableOperations().flush(table,null,null,true);
  conn.tableOperations().flush(MetadataTable.NAME,null,null,true);
  log.info("Waiting for replication table to come online");
  log.info("Fetching replication statuses from metadata table");
  Map<String,Status> fileToStatus=getMetadataStatusForTable(table);
  Assert.assertEquals("Expected to only find one replication status message",1,fileToStatus.size());
  String walName=fileToStatus.keySet().iterator().next();
  wals.retainAll(fileToStatus.keySet());
  Assert.assertEquals(1,wals.size());
  Status status=fileToStatus.get(walName);
  Assert.assertEquals("Expected Status for file to not be closed",false,status.getClosed());
  Set<String> filesForTable=getFilesForTable(table);
  Assert.assertEquals("Expected to only find one rfile for table",1,filesForTable.size());
  log.info("Files for table before MajC: {}",filesForTable);
  conn.tableOperations().compact(table,null,null,false,true);
  Set<String> filesForTableAfterCompaction=getFilesForTable(table);
  log.info("Files for table after MajC: {}",filesForTableAfterCompaction);
  Assert.assertEquals("Expected to only find one rfile for table",1,filesForTableAfterCompaction.size());
  Assert.assertNotEquals("Expected the files before and after compaction to differ",filesForTableAfterCompaction,filesForTable);
  Path fileToBeDeleted=new Path(filesForTable.iterator().next());
  FileSystem fs=getCluster().getFileSystem();
  boolean fileExists=fs.exists(fileToBeDeleted);
  while (fileExists) {
    log.info("File which should get deleted still exists: {}",fileToBeDeleted);
    Thread.sleep(2000);
    fileExists=fs.exists(fileToBeDeleted);
  }
  Map<String,Status> fileToStatusAfterMinc=getMetadataStatusForTable(table);
  Assert.assertEquals("Expected to still find only one replication status message: " + fileToStatusAfterMinc,1,fileToStatusAfterMinc.size());
  Assert.assertEquals("Status before and after MinC should be identical",fileToStatus,fileToStatusAfterMinc);
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=2 * 60 * 1000) public void testUnreferencedWalInTserverIsClosed() throws Exception {
  final String[] names=getUniqueNames(2);
  final String table=names[0], otherTable=names[1];
  final Connector conn=getConnector();
  ReplicationTable.setOnline(conn);
  log.info("Creating {}",table);
  conn.tableOperations().create(table);
  conn.tableOperations().setProperty(table,Property.TABLE_REPLICATION.getKey(),"true");
  log.info("Writing a few mutations to the table");
  BatchWriter bw=conn.createBatchWriter(table,null);
  byte[] empty=new byte[0];
  for (int i=0; i < 5; i++) {
    Mutation m=new Mutation(Integer.toString(i));
    m.put(empty,empty,empty);
    bw.addMutation(m);
  }
  log.info("Flushing mutations to the server");
  bw.close();
  log.info("Checking that metadata only has one WAL recorded for this table");
  Set<String> wals=getWalsForTable(table);
  Assert.assertEquals("Expected to only find two WAL for the table",2,wals.size());
  log.info("Compacting the table which will remove all WALs from the tablets");
  conn.tableOperations().flush(table,null,null,true);
  conn.tableOperations().flush(MetadataTable.NAME,null,null,true);
  log.info("Fetching replication statuses from metadata table");
  Map<String,Status> fileToStatus=getMetadataStatusForTable(table);
  Assert.assertEquals("Expected to only find one replication status message",1,fileToStatus.size());
  String walName=fileToStatus.keySet().iterator().next();
  Assert.assertTrue("Expected log file name from tablet to equal replication entry",wals.contains(walName));
  Status status=fileToStatus.get(walName);
  Assert.assertEquals("Expected Status for file to not be closed",false,status.getClosed());
  Set<String> filesForTable=getFilesForTable(table);
  Assert.assertEquals("Expected to only find one rfile for table",1,filesForTable.size());
  log.info("Files for table before MajC: {}",filesForTable);
  conn.tableOperations().compact(table,null,null,false,true);
  Set<String> filesForTableAfterCompaction=getFilesForTable(table);
  log.info("Files for table after MajC: {}",filesForTableAfterCompaction);
  Assert.assertEquals("Expected to only find one rfile for table",1,filesForTableAfterCompaction.size());
  Assert.assertNotEquals("Expected the files before and after compaction to differ",filesForTableAfterCompaction,filesForTable);
  Path fileToBeDeleted=new Path(filesForTable.iterator().next());
  FileSystem fs=getCluster().getFileSystem();
  boolean fileExists=fs.exists(fileToBeDeleted);
  while (fileExists) {
    log.info("File which should get deleted still exists: {}",fileToBeDeleted);
    Thread.sleep(2000);
    fileExists=fs.exists(fileToBeDeleted);
  }
  Map<String,Status> fileToStatusAfterMinc=getMetadataStatusForTable(table);
  Assert.assertEquals("Expected to still find only one replication status message: " + fileToStatusAfterMinc,1,fileToStatusAfterMinc.size());
  conn.tableOperations().create(otherTable);
  bw=conn.createBatchWriter(otherTable,null);
  byte[] bigValue=new byte[1024 * 500];
  Arrays.fill(bigValue,(byte)1);
  for (int i=0; i < 50; i++) {
    Mutation m=new Mutation(Integer.toString(i));
    m.put(empty,empty,bigValue);
    bw.addMutation(m);
    if (i % 10 == 0) {
      bw.flush();
    }
  }
  bw.close();
  conn.tableOperations().flush(otherTable,null,null,true);
  final ClientContext context=new ClientContext(conn.getInstance(),new Credentials("root",new PasswordToken(ConfigurableMacBase.ROOT_PASSWORD)),getClientConfig());
  List<String> tservers=MasterClient.execute(context,new ClientExecReturn<List<String>,MasterClientService.Client>(){
    @Override public List<String> execute(    MasterClientService.Client client) throws Exception {
      return client.getActiveTservers(Tracer.traceInfo(),context.rpcCreds());
    }
  }
);
  Assert.assertEquals("Expected only one active tservers",1,tservers.size());
  HostAndPort tserver=HostAndPort.fromString(tservers.get(0));
  log.info("Fetching active WALs from {}",tserver);
  Client client=ThriftUtil.getTServerClient(tserver,context);
  List<String> activeWalsForTserver=client.getActiveLogs(Tracer.traceInfo(),context.rpcCreds());
  log.info("Active wals: {}",activeWalsForTserver);
  Assert.assertEquals("Expected to find only one active WAL",1,activeWalsForTserver.size());
  String activeWal=new Path(activeWalsForTserver.get(0)).toString();
  Assert.assertNotEquals("Current active WAL on tserver should not be the original WAL we saw",walName,activeWal);
  log.info("Ensuring that replication status does get closed after WAL is no longer in use by Tserver");
  do {
    Map<String,Status> replicationStatuses=getMetadataStatusForTable(table);
    log.info("Got replication status messages {}",replicationStatuses);
    Assert.assertEquals("Did not expect to find additional status records",1,replicationStatuses.size());
    status=replicationStatuses.values().iterator().next();
    log.info("Current status: {}",ProtobufUtil.toString(status));
    if (status.getClosed()) {
      return;
    }
    log.info("Status is not yet closed, waiting for garbage collector to close it");
    Thread.sleep(2000);
  }
 while (true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.KerberosReplicationIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTable() throws Exception {
  final UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().toURI().toString());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      log.info("testing {}",ugi);
      final KerberosToken token=new KerberosToken();
      final Connector primaryConn=primary.getConnector(rootUser.getPrincipal(),token);
      final Connector peerConn=peer.getConnector(rootUser.getPrincipal(),token);
      ClusterUser replicationUser=kdc.getClientPrincipal(0);
      peerConn.securityOperations().createLocalUser(replicationUser.getPrincipal(),null);
      primaryConn.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + PEER_NAME,replicationUser.getPrincipal());
      primaryConn.instanceOperations().setProperty(Property.REPLICATION_PEER_KEYTAB.getKey() + PEER_NAME,replicationUser.getKeytab().getAbsolutePath());
      primaryConn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + PEER_NAME,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerConn.getInstance().getInstanceName(),peerConn.getInstance().getZooKeepers())));
      String primaryTable1="primary", peerTable1="peer";
      primaryConn.tableOperations().create(primaryTable1);
      String masterTableId1=primaryConn.tableOperations().tableIdMap().get(primaryTable1);
      Assert.assertNotNull(masterTableId1);
      peerConn.tableOperations().create(peerTable1);
      String peerTableId1=peerConn.tableOperations().tableIdMap().get(peerTable1);
      Assert.assertNotNull(peerTableId1);
      peerConn.securityOperations().grantTablePermission(replicationUser.getPrincipal(),peerTable1,TablePermission.WRITE);
      primaryConn.tableOperations().setProperty(primaryTable1,Property.TABLE_REPLICATION.getKey(),"true");
      primaryConn.tableOperations().setProperty(primaryTable1,Property.TABLE_REPLICATION_TARGET.getKey() + PEER_NAME,peerTableId1);
      BatchWriter bw=primaryConn.createBatchWriter(primaryTable1,new BatchWriterConfig());
      long masterTable1Records=0l;
      for (int rows=0; rows < 2500; rows++) {
        Mutation m=new Mutation(primaryTable1 + rows);
        for (int cols=0; cols < 100; cols++) {
          String value=Integer.toString(cols);
          m.put(value,"",value);
          masterTable1Records++;
        }
        bw.addMutation(m);
      }
      bw.close();
      log.info("Wrote all data to primary cluster");
      Set<String> filesFor1=primaryConn.replicationOperations().referencedFiles(primaryTable1);
      for (      ProcessReference proc : primary.getProcesses().get(ServerType.TABLET_SERVER)) {
        primary.killProcess(ServerType.TABLET_SERVER,proc);
      }
      primary.exec(TabletServer.class);
      log.info("Restarted the tserver");
      Iterators.size(primaryConn.createScanner(primaryTable1,Authorizations.EMPTY).iterator());
      log.info("Waiting for {} for {}",filesFor1,primaryTable1);
      primaryConn.replicationOperations().drain(primaryTable1,filesFor1);
      long countTable=0l;
      for (      Entry<Key,Value> entry : peerConn.createScanner(peerTable1,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(primaryTable1));
      }
      log.info("Found {} records in {}",countTable,peerTable1);
      Assert.assertEquals(masterTable1Records,countTable);
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.MultiInstanceReplicationIT </h4><pre class="type-9 type-13 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10 * 60 * 1000) public void dataWasReplicatedToThePeer() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  MiniAccumuloClusterImpl peerCluster=new MiniAccumuloClusterImpl(peerCfg);
  peerCluster.start();
  try {
    final Connector connMaster=getConnector();
    final Connector connPeer=peerCluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    ReplicationTable.setOnline(connMaster);
    String peerUserName="peer", peerPassword="foo";
    String peerClusterName="peer";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerCluster.getInstanceName(),peerCluster.getZooKeepers())));
    final String masterTable="master", peerTable="peer";
    connMaster.tableOperations().create(masterTable);
    String masterTableId=connMaster.tableOperations().tableIdMap().get(masterTable);
    Assert.assertNotNull(masterTableId);
    connPeer.tableOperations().create(peerTable);
    String peerTableId=connPeer.tableOperations().tableIdMap().get(peerTable);
    Assert.assertNotNull(peerTableId);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId);
    BatchWriter bw=connMaster.createBatchWriter(masterTable,new BatchWriterConfig());
    for (int rows=0; rows < 5000; rows++) {
      Mutation m=new Mutation(Integer.toString(rows));
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    final Set<String> filesNeedingReplication=connMaster.replicationOperations().referencedFiles(masterTable);
    log.info("Files to replicate: " + filesNeedingReplication);
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    log.info("TabletServer restarted");
    Iterators.size(ReplicationTable.getScanner(connMaster).iterator());
    log.info("TabletServer is online");
    while (!ReplicationTable.isOnline(connMaster)) {
      log.info("Replication table still offline, waiting");
      Thread.sleep(5000);
    }
    log.info("");
    log.info("Fetching metadata records:");
    for (    Entry<Key,Value> kv : connMaster.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
      if (ReplicationSection.COLF.equals(kv.getKey().getColumnFamily())) {
        log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
      }
 else {
        log.info(kv.getKey().toStringNoTruncate() + " " + kv.getValue());
      }
    }
    log.info("");
    log.info("Fetching replication records:");
    for (    Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
      log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
    }
    Future<Boolean> future=executor.submit(new Callable<Boolean>(){
      @Override public Boolean call() throws Exception {
        long then=System.currentTimeMillis();
        connMaster.replicationOperations().drain(masterTable,filesNeedingReplication);
        long now=System.currentTimeMillis();
        log.info("Drain completed in " + (now - then) + "ms");
        return true;
      }
    }
);
    try {
      future.get(60,TimeUnit.SECONDS);
    }
 catch (    TimeoutException e) {
      future.cancel(true);
      Assert.fail("Drain did not finish within 60 seconds");
    }
 finally {
      executor.shutdownNow();
    }
    log.info("drain completed");
    log.info("");
    log.info("Fetching metadata records:");
    for (    Entry<Key,Value> kv : connMaster.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
      if (ReplicationSection.COLF.equals(kv.getKey().getColumnFamily())) {
        log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
      }
 else {
        log.info(kv.getKey().toStringNoTruncate() + " " + kv.getValue());
      }
    }
    log.info("");
    log.info("Fetching replication records:");
    for (    Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
      log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
    }
    Scanner master=connMaster.createScanner(masterTable,Authorizations.EMPTY), peer=connPeer.createScanner(peerTable,Authorizations.EMPTY);
    Iterator<Entry<Key,Value>> masterIter=master.iterator(), peerIter=peer.iterator();
    Entry<Key,Value> masterEntry=null, peerEntry=null;
    while (masterIter.hasNext() && peerIter.hasNext()) {
      masterEntry=masterIter.next();
      peerEntry=peerIter.next();
      Assert.assertEquals(masterEntry.getKey() + " was not equal to " + peerEntry.getKey(),0,masterEntry.getKey().compareTo(peerEntry.getKey(),PartialKey.ROW_COLFAM_COLQUAL_COLVIS));
      Assert.assertEquals(masterEntry.getValue(),peerEntry.getValue());
    }
    log.info("Last master entry: " + masterEntry);
    log.info("Last peer entry: " + peerEntry);
    Assert.assertFalse("Had more data to read from the master",masterIter.hasNext());
    Assert.assertFalse("Had more data to read from the peer",peerIter.hasNext());
  }
  finally {
    peerCluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataWasReplicatedToThePeerWithoutDrain() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  MiniAccumuloClusterImpl peerCluster=new MiniAccumuloClusterImpl(peerCfg);
  peerCluster.start();
  Connector connMaster=getConnector();
  Connector connPeer=peerCluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
  String peerUserName="repl";
  String peerPassword="passwd";
  connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
  String peerClusterName="peer";
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerCluster.getInstanceName(),peerCluster.getZooKeepers())));
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
  String masterTable="master", peerTable="peer";
  connMaster.tableOperations().create(masterTable);
  String masterTableId=connMaster.tableOperations().tableIdMap().get(masterTable);
  Assert.assertNotNull(masterTableId);
  connPeer.tableOperations().create(peerTable);
  String peerTableId=connPeer.tableOperations().tableIdMap().get(peerTable);
  Assert.assertNotNull(peerTableId);
  connPeer.securityOperations().grantTablePermission(peerUserName,peerTable,TablePermission.WRITE);
  connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION.getKey(),"true");
  connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId);
  BatchWriter bw=connMaster.createBatchWriter(masterTable,new BatchWriterConfig());
  for (int rows=0; rows < 5000; rows++) {
    Mutation m=new Mutation(Integer.toString(rows));
    for (int cols=0; cols < 100; cols++) {
      String value=Integer.toString(cols);
      m.put(value,"",value);
    }
    bw.addMutation(m);
  }
  bw.close();
  log.info("Wrote all data to master cluster");
  Set<String> files=connMaster.replicationOperations().referencedFiles(masterTable);
  log.info("Files to replicate:" + files);
  for (  ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
    cluster.killProcess(ServerType.TABLET_SERVER,proc);
  }
  cluster.exec(TabletServer.class);
  while (!ReplicationTable.isOnline(connMaster)) {
    log.info("Replication table still offline, waiting");
    Thread.sleep(5000);
  }
  Iterators.size(connMaster.createScanner(masterTable,Authorizations.EMPTY).iterator());
  for (  Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
    log.debug(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
  }
  connMaster.replicationOperations().drain(masterTable,files);
  Scanner master=connMaster.createScanner(masterTable,Authorizations.EMPTY), peer=connPeer.createScanner(peerTable,Authorizations.EMPTY);
  Iterator<Entry<Key,Value>> masterIter=master.iterator(), peerIter=peer.iterator();
  while (masterIter.hasNext() && peerIter.hasNext()) {
    Entry<Key,Value> masterEntry=masterIter.next(), peerEntry=peerIter.next();
    Assert.assertEquals(peerEntry.getKey() + " was not equal to " + peerEntry.getKey(),0,masterEntry.getKey().compareTo(peerEntry.getKey(),PartialKey.ROW_COLFAM_COLQUAL_COLVIS));
    Assert.assertEquals(masterEntry.getValue(),peerEntry.getValue());
  }
  Assert.assertFalse("Had more data to read from the master",masterIter.hasNext());
  Assert.assertFalse("Had more data to read from the peer",peerIter.hasNext());
  peerCluster.stop();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTableWithoutDrain() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  MiniAccumuloClusterImpl peer1Cluster=new MiniAccumuloClusterImpl(peerCfg);
  peer1Cluster.start();
  try {
    Connector connMaster=getConnector();
    Connector connPeer=peer1Cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    String peerClusterName="peer";
    String peerUserName="repl";
    String peerPassword="passwd";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peer1Cluster.getInstanceName(),peer1Cluster.getZooKeepers())));
    String masterTable1="master1", peerTable1="peer1", masterTable2="master2", peerTable2="peer2";
    connMaster.tableOperations().create(masterTable1);
    String masterTableId1=connMaster.tableOperations().tableIdMap().get(masterTable1);
    Assert.assertNotNull(masterTableId1);
    connMaster.tableOperations().create(masterTable2);
    String masterTableId2=connMaster.tableOperations().tableIdMap().get(masterTable2);
    Assert.assertNotNull(masterTableId2);
    connPeer.tableOperations().create(peerTable1);
    String peerTableId1=connPeer.tableOperations().tableIdMap().get(peerTable1);
    Assert.assertNotNull(peerTableId1);
    connPeer.tableOperations().create(peerTable2);
    String peerTableId2=connPeer.tableOperations().tableIdMap().get(peerTable2);
    Assert.assertNotNull(peerTableId2);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable1,TablePermission.WRITE);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable2,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId1);
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId2);
    BatchWriter bw=connMaster.createBatchWriter(masterTable1,new BatchWriterConfig());
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable1 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    bw=connMaster.createBatchWriter(masterTable2,new BatchWriterConfig());
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable2 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    while (!ReplicationTable.isOnline(connMaster)) {
      log.info("Replication table still offline, waiting");
      Thread.sleep(5000);
    }
    boolean fullyReplicated=false;
    for (int i=0; i < 10 && !fullyReplicated; i++) {
      sleepUninterruptibly(2,TimeUnit.SECONDS);
      Scanner s=ReplicationTable.getScanner(connMaster);
      WorkSection.limit(s);
      for (      Entry<Key,Value> entry : s) {
        Status status=Status.parseFrom(entry.getValue().get());
        if (StatusUtil.isFullyReplicated(status)) {
          fullyReplicated|=true;
        }
      }
    }
    Assert.assertNotEquals(0,fullyReplicated);
    long countTable=0l;
    for (int i=0; i < 10; i++) {
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable1,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable1));
      }
      log.info("Found {} records in {}",countTable,peerTable1);
      if (0l == countTable) {
        Thread.sleep(5000);
      }
 else {
        break;
      }
    }
    Assert.assertTrue("Found no records in " + peerTable1 + " in the peer cluster",countTable > 0);
    for (int i=0; i < 10; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable2,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable2));
      }
      log.info("Found {} records in {}",countTable,peerTable2);
      if (0l == countTable) {
        Thread.sleep(5000);
      }
 else {
        break;
      }
    }
    Assert.assertTrue("Found no records in " + peerTable2 + " in the peer cluster",countTable > 0);
  }
  finally {
    peer1Cluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTable() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  MiniAccumuloClusterImpl peer1Cluster=new MiniAccumuloClusterImpl(peerCfg);
  peer1Cluster.start();
  try {
    Connector connMaster=getConnector();
    Connector connPeer=peer1Cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    String peerClusterName="peer";
    String peerUserName="peer", peerPassword="foo";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peer1Cluster.getInstanceName(),peer1Cluster.getZooKeepers())));
    String masterTable1="master1", peerTable1="peer1", masterTable2="master2", peerTable2="peer2";
    connMaster.tableOperations().create(masterTable1);
    String masterTableId1=connMaster.tableOperations().tableIdMap().get(masterTable1);
    Assert.assertNotNull(masterTableId1);
    connMaster.tableOperations().create(masterTable2);
    String masterTableId2=connMaster.tableOperations().tableIdMap().get(masterTable2);
    Assert.assertNotNull(masterTableId2);
    connPeer.tableOperations().create(peerTable1);
    String peerTableId1=connPeer.tableOperations().tableIdMap().get(peerTable1);
    Assert.assertNotNull(peerTableId1);
    connPeer.tableOperations().create(peerTable2);
    String peerTableId2=connPeer.tableOperations().tableIdMap().get(peerTable2);
    Assert.assertNotNull(peerTableId2);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable1,TablePermission.WRITE);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable2,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId1);
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId2);
    BatchWriter bw=connMaster.createBatchWriter(masterTable1,new BatchWriterConfig());
    long masterTable1Records=0l;
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable1 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
        masterTable1Records++;
      }
      bw.addMutation(m);
    }
    bw.close();
    bw=connMaster.createBatchWriter(masterTable2,new BatchWriterConfig());
    long masterTable2Records=0l;
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable2 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
        masterTable2Records++;
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    Set<String> filesFor1=connMaster.replicationOperations().referencedFiles(masterTable1), filesFor2=connMaster.replicationOperations().referencedFiles(masterTable2);
    log.info("Files to replicate for table1: " + filesFor1);
    log.info("Files to replicate for table2: " + filesFor2);
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    log.info("Restarted the tserver");
    Iterators.size(connMaster.createScanner(masterTable1,Authorizations.EMPTY).iterator());
    while (!ReplicationTable.isOnline(connMaster)) {
      log.info("Replication table still offline, waiting");
      Thread.sleep(5000);
    }
    log.info("Waiting for {} for {}",filesFor1,masterTable1);
    connMaster.replicationOperations().drain(masterTable1,filesFor1);
    log.info("Waiting for {} for {}",filesFor2,masterTable2);
    connMaster.replicationOperations().drain(masterTable2,filesFor2);
    long countTable=0l;
    for (    Entry<Key,Value> entry : connPeer.createScanner(peerTable1,Authorizations.EMPTY)) {
      countTable++;
      Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable1));
    }
    log.info("Found {} records in {}",countTable,peerTable1);
    Assert.assertEquals(masterTable1Records,countTable);
    countTable=0l;
    for (    Entry<Key,Value> entry : connPeer.createScanner(peerTable2,Authorizations.EMPTY)) {
      countTable++;
      Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable2));
    }
    log.info("Found {} records in {}",countTable,peerTable2);
    Assert.assertEquals(masterTable2Records,countTable);
  }
  finally {
    peer1Cluster.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.MultiTserverReplicationIT </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void masterReplicationServicePortsAreAdvertised() throws Exception {
  Connector conn=getConnector();
  Instance inst=conn.getInstance();
  conn.tableOperations().create("foo");
  Scanner s=conn.createScanner("foo",Authorizations.EMPTY);
  Assert.assertEquals(0,Iterables.size(s));
  ZooReader zreader=new ZooReader(inst.getZooKeepers(),inst.getZooKeepersSessionTimeOut());
  Assert.assertEquals(1,inst.getMasterLocations().size());
  String masterAddr=Iterables.getOnlyElement(inst.getMasterLocations());
  String replCoordAddr=new String(zreader.getData(ZooUtil.getRoot(inst) + Constants.ZMASTER_REPLICATION_COORDINATOR_ADDR,null),UTF_8);
  Assert.assertNotEquals(masterAddr,replCoordAddr);
  Assert.assertNotEquals(0,HostAndPort.fromString(masterAddr).getPort());
  Assert.assertNotEquals(0,HostAndPort.fromString(replCoordAddr).getPort());
}

</code></pre>

<br>
<pre class="type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void tserverReplicationServicePortsAreAdvertised() throws Exception {
  Connector conn=getConnector();
  Instance inst=conn.getInstance();
  conn.tableOperations().create("foo");
  Scanner s=conn.createScanner("foo",Authorizations.EMPTY);
  Assert.assertEquals(0,Iterables.size(s));
  ZooReader zreader=new ZooReader(inst.getZooKeepers(),inst.getZooKeepersSessionTimeOut());
  Set<String> tserverHost=new HashSet<>();
  tserverHost.addAll(zreader.getChildren(ZooUtil.getRoot(inst) + Constants.ZTSERVERS));
  Set<HostAndPort> replicationServices=new HashSet<>();
  for (  String tserver : tserverHost) {
    try {
      byte[] portData=zreader.getData(ZooUtil.getRoot(inst) + ReplicationConstants.ZOO_TSERVERS + "/"+ tserver,null);
      HostAndPort replAddress=HostAndPort.fromString(new String(portData,UTF_8));
      replicationServices.add(replAddress);
    }
 catch (    Exception e) {
      log.error("Could not find port for {}",tserver,e);
      Assert.fail("Did not find replication port advertisement for " + tserver);
    }
  }
  Assert.assertEquals("Expected an equal number of replication servicers and tservers",tserverHost.size(),replicationServices.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.RemoveCompleteReplicationRecordsIT </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void partiallyReplicatedEntriesPrecludeRowDeletion() throws Exception {
  BatchWriter replBw=ReplicationTable.getBatchWriter(conn);
  int numRecords=3;
  Status.Builder builder=Status.newBuilder();
  builder.setClosed(false);
  builder.setEnd(10000);
  builder.setInfiniteEnd(false);
  for (int i=0; i < numRecords; i++) {
    String file="/accumulo/wal/tserver+port/" + UUID.randomUUID();
    Mutation m=new Mutation(file);
    StatusSection.add(m,new Text(Integer.toString(i)),ProtobufUtil.toValue(builder.setBegin(1000 * (i + 1)).build()));
    replBw.addMutation(m);
  }
  String fileToRemove="/accumulo/wal/tserver+port/" + UUID.randomUUID();
  Mutation m=new Mutation(fileToRemove);
  ReplicationTarget target=new ReplicationTarget("peer1","5","5");
  Value value=ProtobufUtil.toValue(builder.setBegin(10000).setEnd(10000).setClosed(true).build());
  StatusSection.add(m,new Text("5"),value);
  WorkSection.add(m,target.toText(),value);
  target=new ReplicationTarget("peer2","5","5");
  WorkSection.add(m,target.toText(),value);
  target=new ReplicationTarget("peer3","5","5");
  WorkSection.add(m,target.toText(),ProtobufUtil.toValue(builder.setClosed(false).build()));
  replBw.addMutation(m);
  numRecords+=4;
  replBw.flush();
  Assert.assertEquals(numRecords,Iterables.size(ReplicationTable.getScanner(conn)));
  BatchScanner bs=ReplicationTable.getBatchScanner(conn,1);
  bs.setRanges(Collections.singleton(new Range()));
  IteratorSetting cfg=new IteratorSetting(50,WholeRowIterator.class);
  bs.addScanIterator(cfg);
  try {
    Assert.assertEquals(0l,rcrr.removeCompleteRecords(conn,bs,replBw));
  }
  finally {
    bs.close();
    replBw.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void replicatedClosedWorkRecordsAreNotRemovedWithoutClosedStatusRecords() throws Exception {
  BatchWriter replBw=ReplicationTable.getBatchWriter(conn);
  int numRecords=3;
  Status.Builder builder=Status.newBuilder();
  builder.setClosed(false);
  builder.setEnd(10000);
  builder.setInfiniteEnd(false);
  for (int i=0; i < numRecords; i++) {
    String file="/accumulo/wal/tserver+port/" + UUID.randomUUID();
    Mutation m=new Mutation(file);
    StatusSection.add(m,new Text(Integer.toString(i)),ProtobufUtil.toValue(builder.setBegin(1000 * (i + 1)).build()));
    replBw.addMutation(m);
  }
  String fileToRemove="/accumulo/wal/tserver+port/" + UUID.randomUUID();
  Mutation m=new Mutation(fileToRemove);
  StatusSection.add(m,new Text("5"),ProtobufUtil.toValue(builder.setBegin(10000).setEnd(10000).setClosed(false).build()));
  replBw.addMutation(m);
  numRecords++;
  fileToRemove="/accumulo/wal/tserver+port/" + UUID.randomUUID();
  m=new Mutation(fileToRemove);
  StatusSection.add(m,new Text("6"),ProtobufUtil.toValue(builder.setBegin(10000).setEnd(10000).setClosed(false).build()));
  replBw.addMutation(m);
  numRecords++;
  replBw.flush();
  Assert.assertEquals(numRecords,Iterables.size(ReplicationTable.getScanner(conn)));
  BatchScanner bs=ReplicationTable.getBatchScanner(conn,1);
  bs.setRanges(Collections.singleton(new Range()));
  IteratorSetting cfg=new IteratorSetting(50,WholeRowIterator.class);
  bs.addScanIterator(cfg);
  try {
    Assert.assertEquals(0l,rcrr.removeCompleteRecords(conn,bs,replBw));
  }
  finally {
    bs.close();
    replBw.close();
  }
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void notYetReplicationRecordsIgnored() throws Exception {
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  int numRecords=3;
  for (int i=0; i < numRecords; i++) {
    String file="/accumulo/wal/tserver+port/" + UUID.randomUUID();
    Mutation m=new Mutation(file);
    StatusSection.add(m,new Text(Integer.toString(i)),StatusUtil.openWithUnknownLengthValue());
    bw.addMutation(m);
  }
  bw.close();
  Assert.assertEquals(numRecords,Iterables.size(ReplicationTable.getScanner(conn)));
  BatchScanner bs=ReplicationTable.getBatchScanner(conn,1);
  bs.setRanges(Collections.singleton(new Range()));
  IteratorSetting cfg=new IteratorSetting(50,WholeRowIterator.class);
  bs.addScanIterator(cfg);
  bw=EasyMock.createMock(BatchWriter.class);
  EasyMock.replay(bw);
  rcrr.removeCompleteRecords(conn,bs,bw);
  bs.close();
  Assert.assertEquals(numRecords,Iterables.size(ReplicationTable.getScanner(conn)));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void replicatedClosedRowsAreRemoved() throws Exception {
  BatchWriter replBw=ReplicationTable.getBatchWriter(conn);
  int numRecords=3;
  Status.Builder builder=Status.newBuilder();
  builder.setClosed(false);
  builder.setEnd(10000);
  builder.setInfiniteEnd(false);
  long time=System.currentTimeMillis();
  for (int i=0; i < numRecords; i++) {
    builder.setCreatedTime(time++);
    String file="/accumulo/wal/tserver+port/" + UUID.randomUUID();
    Mutation m=new Mutation(file);
    Value v=ProtobufUtil.toValue(builder.setBegin(1000 * (i + 1)).build());
    StatusSection.add(m,new Text(Integer.toString(i)),v);
    replBw.addMutation(m);
    m=OrderSection.createMutation(file,time);
    OrderSection.add(m,new Text(Integer.toString(i)),v);
    replBw.addMutation(m);
  }
  Set<String> filesToRemove=new HashSet<>();
  numRecords*=2;
  int finalNumRecords=numRecords;
  String fileToRemove="/accumulo/wal/tserver+port/" + UUID.randomUUID();
  filesToRemove.add(fileToRemove);
  Mutation m=new Mutation(fileToRemove);
  ReplicationTarget target=new ReplicationTarget("peer1","5","5");
  Value value=ProtobufUtil.toValue(builder.setBegin(10000).setEnd(10000).setClosed(true).setCreatedTime(time).build());
  StatusSection.add(m,new Text("5"),value);
  WorkSection.add(m,target.toText(),value);
  replBw.addMutation(m);
  m=OrderSection.createMutation(fileToRemove,time);
  OrderSection.add(m,new Text("5"),value);
  replBw.addMutation(m);
  time++;
  numRecords+=3;
  fileToRemove="/accumulo/wal/tserver+port/" + UUID.randomUUID();
  filesToRemove.add(fileToRemove);
  m=new Mutation(fileToRemove);
  value=ProtobufUtil.toValue(builder.setBegin(10000).setEnd(10000).setClosed(true).setCreatedTime(time).build());
  target=new ReplicationTarget("peer1","6","6");
  StatusSection.add(m,new Text("6"),value);
  WorkSection.add(m,target.toText(),value);
  replBw.addMutation(m);
  m=OrderSection.createMutation(fileToRemove,time);
  OrderSection.add(m,new Text("6"),value);
  replBw.addMutation(m);
  time++;
  numRecords+=3;
  replBw.flush();
  Assert.assertEquals(numRecords,Iterables.size(ReplicationTable.getScanner(conn)));
  BatchScanner bs=ReplicationTable.getBatchScanner(conn,1);
  bs.setRanges(Collections.singleton(new Range()));
  StatusSection.limit(bs);
  WorkSection.limit(bs);
  IteratorSetting cfg=new IteratorSetting(50,WholeRowIterator.class);
  bs.addScanIterator(cfg);
  try {
    Assert.assertEquals(4l,rcrr.removeCompleteRecords(conn,bs,replBw));
  }
  finally {
    bs.close();
    replBw.close();
  }
  int actualRecords=0;
  for (  Entry<Key,Value> entry : ReplicationTable.getScanner(conn)) {
    Assert.assertFalse(filesToRemove.contains(entry.getKey().getRow().toString()));
    actualRecords++;
  }
  Assert.assertEquals(finalNumRecords,actualRecords);
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void partiallyReplicatedRecordsIgnored() throws Exception {
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  int numRecords=3;
  Status.Builder builder=Status.newBuilder();
  builder.setClosed(false);
  builder.setEnd(10000);
  builder.setInfiniteEnd(false);
  for (int i=0; i < numRecords; i++) {
    String file="/accumulo/wal/tserver+port/" + UUID.randomUUID();
    Mutation m=new Mutation(file);
    StatusSection.add(m,new Text(Integer.toString(i)),ProtobufUtil.toValue(builder.setBegin(1000 * (i + 1)).build()));
    bw.addMutation(m);
  }
  bw.close();
  Assert.assertEquals(numRecords,Iterables.size(ReplicationTable.getScanner(conn)));
  BatchScanner bs=ReplicationTable.getBatchScanner(conn,1);
  bs.setRanges(Collections.singleton(new Range()));
  IteratorSetting cfg=new IteratorSetting(50,WholeRowIterator.class);
  bs.addScanIterator(cfg);
  bw=EasyMock.createMock(BatchWriter.class);
  EasyMock.replay(bw);
  rcrr.removeCompleteRecords(conn,bs,bw);
  bs.close();
  Assert.assertEquals(numRecords,Iterables.size(ReplicationTable.getScanner(conn)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.ReplicationIT </h4><pre class="type-9 type-13 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void correctRecordsCompleteFile() throws Exception {
  Connector conn=getConnector();
  String table="table1";
  conn.tableOperations().create(table);
  conn.tableOperations().setProperty(table,Property.TABLE_REPLICATION.getKey(),"true");
  BatchWriter bw=conn.createBatchWriter(table,new BatchWriterConfig());
  for (int i=0; i < 10; i++) {
    Mutation m=new Mutation(Integer.toString(i));
    m.put(new byte[0],new byte[0],new byte[0]);
    bw.addMutation(m);
  }
  bw.close();
  boolean online=ReplicationTable.isOnline(conn);
  int attempts=10;
  do {
    if (!online) {
      sleepUninterruptibly(2,TimeUnit.SECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table was not online",online);
  for (int i=0; i < 5; i++) {
    if (conn.securityOperations().hasTablePermission("root",ReplicationTable.NAME,TablePermission.READ)) {
      break;
    }
    log.info("Could not read replication table, waiting and will retry");
    Thread.sleep(2000);
  }
  Assert.assertTrue("'root' user could not read the replication table",conn.securityOperations().hasTablePermission("root",ReplicationTable.NAME,TablePermission.READ));
  Set<String> replRows=new HashSet<>();
  Scanner scanner;
  attempts=5;
  while (replRows.isEmpty() && attempts > 0) {
    scanner=ReplicationTable.getScanner(conn);
    StatusSection.limit(scanner);
    for (    Entry<Key,Value> entry : scanner) {
      Key k=entry.getKey();
      String fileUri=k.getRow().toString();
      try {
        new URI(fileUri);
      }
 catch (      URISyntaxException e) {
        Assert.fail("Expected a valid URI: " + fileUri);
      }
      replRows.add(fileUri);
    }
  }
  Set<String> wals=new HashSet<>();
  attempts=5;
  Instance i=conn.getInstance();
  ZooReaderWriter zk=new ZooReaderWriter(i.getZooKeepers(),i.getZooKeepersSessionTimeOut(),"");
  while (wals.isEmpty() && attempts > 0) {
    WalStateManager markers=new WalStateManager(i,zk);
    for (    Entry<Path,WalState> entry : markers.getAllState().entrySet()) {
      wals.add(entry.getKey().toString());
    }
    attempts--;
  }
  Assert.assertEquals("Rows found: " + replRows,1,replRows.size());
  replRows.removeAll(wals);
  Assert.assertEquals(2,wals.size());
  Assert.assertEquals(0,replRows.size());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void combinerWorksOnMetadata() throws Exception {
  Connector conn=getConnector();
  conn.securityOperations().grantTablePermission("root",MetadataTable.NAME,TablePermission.WRITE);
  ReplicationTableUtil.configureMetadataTable(conn,MetadataTable.NAME);
  Status stat1=StatusUtil.fileCreated(100);
  Status stat2=StatusUtil.fileClosed();
  BatchWriter bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  Mutation m=new Mutation(ReplicationSection.getRowPrefix() + "file:/accumulo/wals/tserver+port/uuid");
  m.put(ReplicationSection.COLF,new Text("1"),ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  bw.close();
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(ReplicationSection.getRange());
  Status actual=Status.parseFrom(Iterables.getOnlyElement(s).getValue().get());
  Assert.assertEquals(stat1,actual);
  bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  m=new Mutation(ReplicationSection.getRowPrefix() + "file:/accumulo/wals/tserver+port/uuid");
  m.put(ReplicationSection.COLF,new Text("1"),ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  bw.close();
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(ReplicationSection.getRange());
  actual=Status.parseFrom(Iterables.getOnlyElement(s).getValue().get());
  Status expected=Status.newBuilder().setBegin(0).setEnd(0).setClosed(true).setInfiniteEnd(true).setCreatedTime(100).build();
  Assert.assertEquals(expected,actual);
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void replicationTableCreated() throws AccumuloException, AccumuloSecurityException {
  Assert.assertTrue(getConnector().tableOperations().exists(ReplicationTable.NAME));
  Assert.assertEquals(ReplicationTable.ID,getConnector().tableOperations().tableIdMap().get(ReplicationTable.NAME));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyReplicationTableConfig() throws AccumuloException, TableNotFoundException, AccumuloSecurityException {
  TableOperations tops=getConnector().tableOperations();
  Map<String,EnumSet<IteratorScope>> iterators=tops.listIterators(ReplicationTable.NAME);
  Assert.assertEquals(1,iterators.size());
  Assert.assertTrue(iterators.containsKey(ReplicationTable.COMBINER_NAME));
  Assert.assertTrue(iterators.get(ReplicationTable.COMBINER_NAME).containsAll(EnumSet.allOf(IteratorScope.class)));
  for (  IteratorScope scope : EnumSet.allOf(IteratorScope.class)) {
    IteratorSetting is=tops.getIteratorSetting(ReplicationTable.NAME,ReplicationTable.COMBINER_NAME,scope);
    Assert.assertEquals(30,is.getPriority());
    Assert.assertEquals(StatusCombiner.class.getName(),is.getIteratorClass());
    Assert.assertEquals(1,is.getOptions().size());
    Assert.assertTrue(is.getOptions().containsKey("columns"));
    String cols=is.getOptions().get("columns");
    Column statusSectionCol=new Column(StatusSection.NAME);
    Column workSectionCol=new Column(WorkSection.NAME);
    Assert.assertEquals(ColumnSet.encodeColumns(statusSectionCol.getColumnFamily(),statusSectionCol.getColumnQualifier()) + "," + ColumnSet.encodeColumns(workSectionCol.getColumnFamily(),workSectionCol.getColumnQualifier()),cols);
  }
  boolean foundLocalityGroups=false;
  boolean foundLocalityGroupDef1=false;
  boolean foundLocalityGroupDef2=false;
  boolean foundFormatter=false;
  Joiner j=Joiner.on(",");
  Function<Text,String> textToString=new Function<Text,String>(){
    @Override public String apply(    Text text){
      return text.toString();
    }
  }
;
  for (  Entry<String,String> p : tops.getProperties(ReplicationTable.NAME)) {
    String key=p.getKey();
    String val=p.getValue();
    if (key.equals(Property.TABLE_FORMATTER_CLASS.getKey()) && val.equals(StatusFormatter.class.getName())) {
      foundFormatter=true;
    }
 else     if (key.equals(Property.TABLE_LOCALITY_GROUPS.getKey()) && val.equals(j.join(ReplicationTable.LOCALITY_GROUPS.keySet()))) {
      foundLocalityGroups=true;
    }
 else     if (key.startsWith(Property.TABLE_LOCALITY_GROUP_PREFIX.getKey())) {
      if (key.equals(Property.TABLE_LOCALITY_GROUP_PREFIX.getKey() + ReplicationTable.STATUS_LG_NAME) && val.equals(j.join(Iterables.transform(ReplicationTable.STATUS_LG_COLFAMS,textToString)))) {
        foundLocalityGroupDef1=true;
      }
 else       if (key.equals(Property.TABLE_LOCALITY_GROUP_PREFIX.getKey() + ReplicationTable.WORK_LG_NAME) && val.equals(j.join(Iterables.transform(ReplicationTable.WORK_LG_COLFAMS,textToString)))) {
        foundLocalityGroupDef2=true;
      }
    }
  }
  Assert.assertTrue(foundLocalityGroups);
  Assert.assertTrue(foundLocalityGroupDef1);
  Assert.assertTrue(foundLocalityGroupDef2);
  Assert.assertTrue(foundFormatter);
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void replicatedStatusEntriesAreDeleted() throws Exception {
  getCluster().getClusterControl().stop(ServerType.GARBAGE_COLLECTOR);
  final Connector conn=getConnector();
  log.info("Got connector to MAC");
  String table1="table1";
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  conn.tableOperations().create(table1);
  int attempts=5;
  while (attempts > 0) {
    try {
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","4");
      conn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + "cluster1",ReplicaSystemFactory.getPeerConfigurationValue(MockReplicaSystem.class,"1000"));
      attempts=0;
    }
 catch (    Exception e) {
      attempts--;
      if (attempts <= 0) {
        throw e;
      }
      sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
    }
  }
  String tableId=conn.tableOperations().tableIdMap().get(table1);
  Assert.assertNotNull("Could not determine table id for " + table1,tableId);
  writeSomeData(conn,table1,2000,50);
  conn.tableOperations().flush(table1,null,null,true);
  boolean online=ReplicationTable.isOnline(conn);
  attempts=10;
  do {
    if (!online) {
      sleepUninterruptibly(1,TimeUnit.SECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table did not exist",online);
  conn.securityOperations().grantTablePermission("root",ReplicationTable.NAME,TablePermission.WRITE);
  log.info("Checking for replication entries in replication");
  Scanner s;
  Set<String> entries=new HashSet<>();
  for (int i=0; i < 5; i++) {
    s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
    s.setRange(ReplicationSection.getRange());
    entries.clear();
    for (    Entry<Key,Value> entry : s) {
      entries.add(entry.getKey().getRow().toString());
      log.info("{}={}",entry.getKey().toStringNoTruncate(),entry.getValue());
    }
    if (!entries.isEmpty()) {
      log.info("Replication entries {}",entries);
      break;
    }
    Thread.sleep(1000);
  }
  Assert.assertFalse("Did not find any replication entries in the replication table",entries.isEmpty());
  boolean notFound=true;
  for (int i=0; i < 10 && notFound; i++) {
    try {
      s=ReplicationTable.getScanner(conn);
      WorkSection.limit(s);
      Entry<Key,Value> e=Iterables.getOnlyElement(s);
      log.info("Found entry: " + e.getKey().toStringNoTruncate());
      Text expectedColqual=new ReplicationTarget("cluster1","4",tableId).toText();
      Assert.assertEquals(expectedColqual,e.getKey().getColumnQualifier());
      notFound=false;
    }
 catch (    NoSuchElementException e) {
    }
catch (    IllegalArgumentException e) {
      s=ReplicationTable.getScanner(conn);
      for (      Entry<Key,Value> content : s) {
        log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
      }
      Assert.fail("Found more than one work section entry");
    }
catch (    RuntimeException e) {
      Throwable cause=e.getCause();
      if (cause instanceof AccumuloSecurityException) {
        AccumuloSecurityException sec=(AccumuloSecurityException)cause;
switch (sec.getSecurityErrorCode()) {
case PERMISSION_DENIED:
          log.warn("Sleeping because permission was denied");
        break;
default :
      throw e;
  }
}
 else {
  throw e;
}
}
Thread.sleep(2000);
}
if (notFound) {
s=ReplicationTable.getScanner(conn);
for (Entry<Key,Value> content : s) {
log.info(content.getKey().toStringNoTruncate() + " => " + ProtobufUtil.toString(Status.parseFrom(content.getValue().get())));
}
Assert.assertFalse("Did not find the work entry for the status entry",notFound);
}
log.info("Killing tserver");
cluster.getClusterControl().stop(ServerType.TABLET_SERVER);
log.info("Starting tserver");
cluster.getClusterControl().start(ServerType.TABLET_SERVER);
log.info("Waiting to read tables");
sleepUninterruptibly(2 * 3,TimeUnit.SECONDS);
for (String table : new String[]{MetadataTable.NAME,table1}) {
Iterators.size(conn.createScanner(table,Authorizations.EMPTY).iterator());
}
log.info("Recovered metadata:");
s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
for (Entry<Key,Value> entry : s) {
log.info("{}={}",entry.getKey().toStringNoTruncate(),entry.getValue());
}
cluster.getClusterControl().start(ServerType.GARBAGE_COLLECTOR);
waitForGCLock(conn);
Thread.sleep(1000);
log.info("After GC");
s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
for (Entry<Key,Value> entry : s) {
log.info("{}={}",entry.getKey().toStringNoTruncate(),entry.getValue());
}
log.info("Checking metadata table for replication entries");
Set<String> remaining=new HashSet<>();
for (int i=0; i < 10; i++) {
s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
s.setRange(ReplicationSection.getRange());
remaining.clear();
for (Entry<Key,Value> e : s) {
remaining.add(e.getKey().getRow().toString());
}
remaining.retainAll(entries);
if (remaining.isEmpty()) {
break;
}
log.info("remaining {}",remaining);
Thread.sleep(2000);
log.info("");
}
Assert.assertTrue("Replication status messages were not cleaned up from metadata table",remaining.isEmpty());
int recordsFound=0;
for (int i=0; i < 30; i++) {
s=ReplicationTable.getScanner(conn);
recordsFound=0;
for (Entry<Key,Value> entry : s) {
recordsFound++;
log.info("{} {}",entry.getKey().toStringNoTruncate(),ProtobufUtil.toString(Status.parseFrom(entry.getValue().get())));
}
if (recordsFound <= 2) {
break;
}
 else {
Thread.sleep(1000);
log.info("");
}
}
Assert.assertTrue("Found unexpected replication records in the replication table",recordsFound <= 2);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void twoEntriesForTwoTables() throws Exception {
  Connector conn=getConnector();
  String table1="table1", table2="table2";
  Assert.assertFalse("Replication table already online at the beginning of the test",ReplicationTable.isOnline(conn));
  conn.tableOperations().create(table1);
  conn.tableOperations().create(table2);
  conn.securityOperations().grantTablePermission("root",ReplicationTable.NAME,TablePermission.READ);
  Thread.sleep(5000);
  conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  writeSomeData(conn,table1,50,50);
  boolean online=ReplicationTable.isOnline(conn);
  int attempts=10;
  do {
    if (!online) {
      sleepUninterruptibly(5,TimeUnit.SECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table did not exist",online);
  Assert.assertTrue(ReplicationTable.isOnline(conn));
  Scanner s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  for (int i=0; i < 5; i++) {
    if (Iterators.size(s.iterator()) == 1) {
      break;
    }
    Thread.sleep(1000);
  }
  Entry<Key,Value> entry=Iterators.getOnlyElement(s.iterator());
  Assert.assertEquals("Expected to find replication entry for " + table1,conn.tableOperations().tableIdMap().get(table1),entry.getKey().getColumnQualifier().toString());
  s.close();
  conn.tableOperations().setProperty(table2,Property.TABLE_REPLICATION.getKey(),"true");
  writeSomeData(conn,table2,50,50);
  Set<String> tableIds=Sets.newHashSet(conn.tableOperations().tableIdMap().get(table1),conn.tableOperations().tableIdMap().get(table2));
  Set<String> tableIdsForMetadata=Sets.newHashSet(tableIds);
  List<Entry<Key,Value>> records=new ArrayList<>();
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.ReplicationSection.getRange());
  for (  Entry<Key,Value> metadata : s) {
    records.add(metadata);
    log.debug("Meta: {} => {}",metadata.getKey().toStringNoTruncate(),metadata.getValue().toString());
  }
  Assert.assertEquals("Expected to find 2 records, but actually found " + records,2,records.size());
  for (  Entry<Key,Value> metadata : records) {
    Assert.assertTrue("Expected record to be in metadata but wasn't " + metadata.getKey().toStringNoTruncate() + ", tableIds remaining "+ tableIdsForMetadata,tableIdsForMetadata.remove(metadata.getKey().getColumnQualifier().toString()));
  }
  Assert.assertTrue("Expected that we had removed all metadata entries " + tableIdsForMetadata,tableIdsForMetadata.isEmpty());
  Thread.sleep(5000);
  s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  Iterator<Entry<Key,Value>> iter=s.iterator();
  Assert.assertTrue("Found no records in replication table",iter.hasNext());
  entry=iter.next();
  Assert.assertTrue("Expected to find element in replication table",tableIds.remove(entry.getKey().getColumnQualifier().toString()));
  Assert.assertTrue("Expected to find two elements in replication table, only found one ",iter.hasNext());
  entry=iter.next();
  Assert.assertTrue("Expected to find element in replication table",tableIds.remove(entry.getKey().getColumnQualifier().toString()));
  Assert.assertFalse("Expected to only find two elements in replication table",iter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void correctClusterNameInWorkEntry() throws Exception {
  Connector conn=getConnector();
  String table1="table1";
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  conn.tableOperations().create(table1);
  int attempts=5;
  while (attempts > 0) {
    try {
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","4");
      attempts=0;
    }
 catch (    Exception e) {
      attempts--;
      if (attempts <= 0) {
        throw e;
      }
      sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
    }
  }
  writeSomeData(conn,table1,2000,50);
  conn.tableOperations().flush(table1,null,null,true);
  String tableId=conn.tableOperations().tableIdMap().get(table1);
  Assert.assertNotNull("Table ID was null",tableId);
  boolean online=ReplicationTable.isOnline(conn);
  attempts=5;
  do {
    if (!online) {
      sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table did not exist",online);
  for (int i=0; i < 5 && !conn.securityOperations().hasTablePermission("root",ReplicationTable.NAME,TablePermission.READ); i++) {
    Thread.sleep(1000);
  }
  Assert.assertTrue(conn.securityOperations().hasTablePermission("root",ReplicationTable.NAME,TablePermission.READ));
  boolean notFound=true;
  Scanner s;
  for (int i=0; i < 10 && notFound; i++) {
    s=ReplicationTable.getScanner(conn);
    WorkSection.limit(s);
    try {
      Entry<Key,Value> e=Iterables.getOnlyElement(s);
      Text expectedColqual=new ReplicationTarget("cluster1","4",tableId).toText();
      Assert.assertEquals(expectedColqual,e.getKey().getColumnQualifier());
      notFound=false;
    }
 catch (    NoSuchElementException e) {
    }
catch (    IllegalArgumentException e) {
      s=ReplicationTable.getScanner(conn);
      for (      Entry<Key,Value> content : s) {
        log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
      }
      Assert.fail("Found more than one work section entry");
    }
    Thread.sleep(500);
  }
  if (notFound) {
    s=ReplicationTable.getScanner(conn);
    for (    Entry<Key,Value> content : s) {
      log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
    }
    Assert.assertFalse("Did not find the work entry for the status entry",notFound);
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void singleTableWithSingleTarget() throws Exception {
  getCluster().getClusterControl().stop(ServerType.GARBAGE_COLLECTOR);
  Connector conn=getConnector();
  String table1="table1";
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  conn.tableOperations().create(table1);
  int attempts=10;
  while (attempts > 0) {
    try {
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","4");
      conn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + "cluster1",ReplicaSystemFactory.getPeerConfigurationValue(MockReplicaSystem.class,"100000"));
      break;
    }
 catch (    Exception e) {
      attempts--;
      if (attempts <= 0) {
        throw e;
      }
      sleepUninterruptibly(2,TimeUnit.SECONDS);
    }
  }
  writeSomeData(conn,table1,2000,50);
  boolean online=ReplicationTable.isOnline(conn);
  attempts=10;
  do {
    if (!online) {
      sleepUninterruptibly(2,TimeUnit.SECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table was never created",online);
  for (int i=0; i < 10 && !conn.tableOperations().listIterators(ReplicationTable.NAME).keySet().contains(ReplicationTable.COMBINER_NAME); i++) {
    sleepUninterruptibly(2,TimeUnit.SECONDS);
  }
  Assert.assertTrue("Combiner was never set on replication table",conn.tableOperations().listIterators(ReplicationTable.NAME).keySet().contains(ReplicationTable.COMBINER_NAME));
  conn.tableOperations().flush(table1,null,null,true);
  Scanner s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  Entry<Key,Value> entry=null;
  Status expectedStatus=StatusUtil.openWithUnknownLength();
  attempts=10;
  while (null == entry && attempts > 0) {
    try {
      entry=Iterables.getOnlyElement(s);
      Status actual=Status.parseFrom(entry.getValue().get());
      if (actual.getInfiniteEnd() != expectedStatus.getInfiniteEnd()) {
        entry=null;
        Thread.sleep(1000);
      }
    }
 catch (    NoSuchElementException e) {
      entry=null;
      Thread.sleep(500);
    }
catch (    IllegalArgumentException e) {
      s=ReplicationTable.getScanner(conn);
      StatusSection.limit(s);
      for (      Entry<Key,Value> content : s) {
        log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
      }
      throw e;
    }
 finally {
      attempts--;
    }
  }
  Assert.assertNotNull("Could not find expected entry in replication table",entry);
  Status actual=Status.parseFrom(entry.getValue().get());
  Assert.assertTrue("Expected to find a replication entry that is open with infinite length: " + ProtobufUtil.toString(actual),!actual.getClosed() && actual.getInfiniteEnd());
  boolean notFound=true;
  for (int i=0; i < 10 && notFound; i++) {
    s=ReplicationTable.getScanner(conn);
    WorkSection.limit(s);
    int elementsFound=Iterables.size(s);
    if (0 < elementsFound) {
      Assert.assertEquals(1,elementsFound);
      notFound=false;
    }
    Thread.sleep(500);
  }
  if (notFound) {
    s=ReplicationTable.getScanner(conn);
    for (    Entry<Key,Value> content : s) {
      log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
    }
    Assert.assertFalse("Did not find the work entry for the status entry",notFound);
  }
  writeSomeData(conn,table1,3000,50);
  log.info("Issued compaction for table");
  conn.tableOperations().compact(table1,null,null,true,true);
  log.info("Compaction completed");
  Thread.sleep(5000);
  s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  int numRecords=0;
  for (  Entry<Key,Value> e : s) {
    numRecords++;
    log.info("Found status record {}\t{}",e.getKey().toStringNoTruncate(),ProtobufUtil.toString(Status.parseFrom(e.getValue().get())));
  }
  Assert.assertEquals(2,numRecords);
  notFound=true;
  for (int i=0; i < 10 && notFound; i++) {
    s=ReplicationTable.getScanner(conn);
    WorkSection.limit(s);
    int elementsFound=Iterables.size(s);
    if (2 == elementsFound) {
      notFound=false;
    }
    Thread.sleep(500);
  }
  if (notFound) {
    s=ReplicationTable.getScanner(conn);
    for (    Entry<Key,Value> content : s) {
      log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
    }
    Assert.assertFalse("Did not find the work entries for the status entries",notFound);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.SequentialWorkAssignerIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void workAcrossPeersHappensConcurrently() throws Exception {
  ReplicationTarget target1=new ReplicationTarget("cluster1","table1","1");
  Text serializedTarget1=target1.toText();
  ReplicationTarget target2=new ReplicationTarget("cluster2","table1","1");
  Text serializedTarget2=target2.toText();
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  String filename1="z_file1", filename2="a_file1";
  String file1="/accumulo/wal/tserver+port/" + filename1, file2="/accumulo/wal/tserver+port/" + filename2;
  Status stat1=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(250).build();
  Status stat2=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(500).build();
  Mutation m=new Mutation(file1);
  WorkSection.add(m,serializedTarget1,ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=new Mutation(file2);
  WorkSection.add(m,serializedTarget2,ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  m=OrderSection.createMutation(file1,stat1.getCreatedTime());
  OrderSection.add(m,new Text(target1.getSourceTableId()),ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=OrderSection.createMutation(file2,stat2.getCreatedTime());
  OrderSection.add(m,new Text(target2.getSourceTableId()),ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  bw.close();
  DistributedWorkQueue workQueue=createMock(DistributedWorkQueue.class);
  Map<String,Map<String,String>> queuedWork=new HashMap<>();
  assigner.setQueuedWork(queuedWork);
  assigner.setWorkQueue(workQueue);
  assigner.setMaxQueueSize(Integer.MAX_VALUE);
  workQueue.addWork(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target1),file1);
  expectLastCall().once();
  workQueue.addWork(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename2,target2),file2);
  expectLastCall().once();
  replay(workQueue);
  assigner.createWork();
  verify(workQueue);
  Assert.assertEquals(2,queuedWork.size());
  Assert.assertTrue(queuedWork.containsKey("cluster1"));
  Map<String,String> cluster1Work=queuedWork.get("cluster1");
  Assert.assertEquals(1,cluster1Work.size());
  Assert.assertTrue(cluster1Work.containsKey(target1.getSourceTableId()));
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target1),cluster1Work.get(target1.getSourceTableId()));
  Map<String,String> cluster2Work=queuedWork.get("cluster2");
  Assert.assertEquals(1,cluster2Work.size());
  Assert.assertTrue(cluster2Work.containsKey(target2.getSourceTableId()));
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename2,target2),cluster2Work.get(target2.getSourceTableId()));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createWorkForFilesInCorrectOrder() throws Exception {
  ReplicationTarget target=new ReplicationTarget("cluster1","table1","1");
  Text serializedTarget=target.toText();
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  String filename1="z_file1", filename2="a_file1";
  String file1="/accumulo/wal/tserver+port/" + filename1, file2="/accumulo/wal/tserver+port/" + filename2;
  Status stat1=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(250).build();
  Status stat2=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(500).build();
  Mutation m=new Mutation(file1);
  WorkSection.add(m,serializedTarget,ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=new Mutation(file2);
  WorkSection.add(m,serializedTarget,ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  m=OrderSection.createMutation(file1,stat1.getCreatedTime());
  OrderSection.add(m,new Text(target.getSourceTableId()),ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=OrderSection.createMutation(file2,stat2.getCreatedTime());
  OrderSection.add(m,new Text(target.getSourceTableId()),ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  bw.close();
  DistributedWorkQueue workQueue=createMock(DistributedWorkQueue.class);
  Map<String,Map<String,String>> queuedWork=new HashMap<>();
  assigner.setQueuedWork(queuedWork);
  assigner.setWorkQueue(workQueue);
  assigner.setMaxQueueSize(Integer.MAX_VALUE);
  workQueue.addWork(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target),file1);
  expectLastCall().once();
  replay(workQueue);
  assigner.createWork();
  verify(workQueue);
  Assert.assertEquals(1,queuedWork.size());
  Assert.assertTrue(queuedWork.containsKey("cluster1"));
  Map<String,String> cluster1Work=queuedWork.get("cluster1");
  Assert.assertEquals(1,cluster1Work.size());
  Assert.assertTrue(cluster1Work.containsKey(target.getSourceTableId()));
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target),cluster1Work.get(target.getSourceTableId()));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void workAcrossTablesHappensConcurrently() throws Exception {
  ReplicationTarget target1=new ReplicationTarget("cluster1","table1","1");
  Text serializedTarget1=target1.toText();
  ReplicationTarget target2=new ReplicationTarget("cluster1","table2","2");
  Text serializedTarget2=target2.toText();
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  String filename1="z_file1", filename2="a_file1";
  String file1="/accumulo/wal/tserver+port/" + filename1, file2="/accumulo/wal/tserver+port/" + filename2;
  Status stat1=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(250).build();
  Status stat2=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(500).build();
  Mutation m=new Mutation(file1);
  WorkSection.add(m,serializedTarget1,ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=new Mutation(file2);
  WorkSection.add(m,serializedTarget2,ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  m=OrderSection.createMutation(file1,stat1.getCreatedTime());
  OrderSection.add(m,new Text(target1.getSourceTableId()),ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=OrderSection.createMutation(file2,stat2.getCreatedTime());
  OrderSection.add(m,new Text(target2.getSourceTableId()),ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  bw.close();
  DistributedWorkQueue workQueue=createMock(DistributedWorkQueue.class);
  Map<String,Map<String,String>> queuedWork=new HashMap<>();
  assigner.setQueuedWork(queuedWork);
  assigner.setWorkQueue(workQueue);
  assigner.setMaxQueueSize(Integer.MAX_VALUE);
  workQueue.addWork(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target1),file1);
  expectLastCall().once();
  workQueue.addWork(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename2,target2),file2);
  expectLastCall().once();
  replay(workQueue);
  assigner.createWork();
  verify(workQueue);
  Assert.assertEquals(1,queuedWork.size());
  Assert.assertTrue(queuedWork.containsKey("cluster1"));
  Map<String,String> cluster1Work=queuedWork.get("cluster1");
  Assert.assertEquals(2,cluster1Work.size());
  Assert.assertTrue(cluster1Work.containsKey(target1.getSourceTableId()));
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target1),cluster1Work.get(target1.getSourceTableId()));
  Assert.assertTrue(cluster1Work.containsKey(target2.getSourceTableId()));
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename2,target2),cluster1Work.get(target2.getSourceTableId()));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void reprocessingOfCompletedWorkRemovesWork() throws Exception {
  ReplicationTarget target=new ReplicationTarget("cluster1","table1","1");
  Text serializedTarget=target.toText();
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  String filename1="z_file1", filename2="a_file1";
  String file1="/accumulo/wal/tserver+port/" + filename1, file2="/accumulo/wal/tserver+port/" + filename2;
  Status stat1=Status.newBuilder().setBegin(100).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(250).build();
  Status stat2=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(500).build();
  Mutation m=new Mutation(file1);
  WorkSection.add(m,serializedTarget,ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=new Mutation(file2);
  WorkSection.add(m,serializedTarget,ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  m=OrderSection.createMutation(file1,stat1.getCreatedTime());
  OrderSection.add(m,new Text(target.getSourceTableId()),ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=OrderSection.createMutation(file2,stat2.getCreatedTime());
  OrderSection.add(m,new Text(target.getSourceTableId()),ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  bw.close();
  DistributedWorkQueue workQueue=createMock(DistributedWorkQueue.class);
  Map<String,Map<String,String>> queuedWork=new HashMap<>();
  Map<String,String> queuedWorkForCluster=new HashMap<>();
  queuedWorkForCluster.put(target.getSourceTableId(),DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target));
  queuedWork.put("cluster1",queuedWorkForCluster);
  assigner.setQueuedWork(queuedWork);
  assigner.setWorkQueue(workQueue);
  assigner.setMaxQueueSize(Integer.MAX_VALUE);
  workQueue.addWork(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename2,target),file2);
  expectLastCall().once();
  replay(workQueue);
  assigner.createWork();
  verify(workQueue);
  Assert.assertEquals(1,queuedWork.size());
  Assert.assertTrue(queuedWork.containsKey("cluster1"));
  Map<String,String> cluster1Work=queuedWork.get("cluster1");
  Assert.assertEquals(1,cluster1Work.size());
  Assert.assertTrue(cluster1Work.containsKey(target.getSourceTableId()));
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename2,target),cluster1Work.get(target.getSourceTableId()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.StatusCombinerMacIT </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  Connector conn=getConnector();
  ClusterUser user=getAdminUser();
  ReplicationTable.setOnline(conn);
  conn.securityOperations().grantTablePermission(user.getPrincipal(),ReplicationTable.NAME,TablePermission.WRITE);
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  long createTime=System.currentTimeMillis();
  try {
    Mutation m=new Mutation("file:/accumulo/wal/HW10447.local+56808/93cdc17e-7521-44fa-87b5-37f45bcb92d3");
    StatusSection.add(m,new Text("1"),StatusUtil.fileCreatedValue(createTime));
    bw.addMutation(m);
  }
  finally {
    bw.close();
  }
  Scanner s=ReplicationTable.getScanner(conn);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  Assert.assertEquals(StatusUtil.fileCreatedValue(createTime),entry.getValue());
  bw=ReplicationTable.getBatchWriter(conn);
  try {
    Mutation m=new Mutation("file:/accumulo/wal/HW10447.local+56808/93cdc17e-7521-44fa-87b5-37f45bcb92d3");
    StatusSection.add(m,new Text("1"),ProtobufUtil.toValue(StatusUtil.replicated(Long.MAX_VALUE)));
    bw.addMutation(m);
  }
  finally {
    bw.close();
  }
  s=ReplicationTable.getScanner(conn);
  entry=Iterables.getOnlyElement(s);
  Status stat=Status.parseFrom(entry.getValue().get());
  Assert.assertEquals(Long.MAX_VALUE,stat.getBegin());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCombinerSetOnMetadata() throws Exception {
  TableOperations tops=getConnector().tableOperations();
  Map<String,EnumSet<IteratorScope>> iterators=tops.listIterators(MetadataTable.NAME);
  Assert.assertTrue(iterators.containsKey(ReplicationTableUtil.COMBINER_NAME));
  EnumSet<IteratorScope> scopes=iterators.get(ReplicationTableUtil.COMBINER_NAME);
  Assert.assertEquals(3,scopes.size());
  Assert.assertTrue(scopes.contains(IteratorScope.scan));
  Assert.assertTrue(scopes.contains(IteratorScope.minc));
  Assert.assertTrue(scopes.contains(IteratorScope.majc));
  Iterable<Entry<String,String>> propIter=tops.getProperties(MetadataTable.NAME);
  HashMap<String,String> properties=new HashMap<String,String>();
  for (  Entry<String,String> entry : propIter) {
    properties.put(entry.getKey(),entry.getValue());
  }
  for (  IteratorScope scope : scopes) {
    String key=Property.TABLE_ITERATOR_PREFIX.getKey() + scope.name() + "."+ ReplicationTableUtil.COMBINER_NAME+ ".opt.columns";
    Assert.assertTrue("Properties did not contain key : " + key,properties.containsKey(key));
    Assert.assertEquals(MetadataSchema.ReplicationSection.COLF.toString(),properties.get(key));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.StatusMakerIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void closedMessagesCreateOrderRecords() throws Exception {
  String sourceTable=testName.getMethodName();
  conn.tableOperations().create(sourceTable);
  ReplicationTableUtil.configureMetadataTable(conn,sourceTable);
  BatchWriter bw=conn.createBatchWriter(sourceTable,new BatchWriterConfig());
  String walPrefix="hdfs://localhost:8020/accumulo/wals/tserver+port/";
  List<String> files=Arrays.asList(walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID());
  Map<String,Integer> fileToTableId=new HashMap<>();
  Status.Builder statBuilder=Status.newBuilder().setBegin(0).setEnd(0).setInfiniteEnd(true).setClosed(true);
  int index=1;
  long time=System.currentTimeMillis();
  for (  String file : files) {
    statBuilder.setCreatedTime(time++);
    Mutation m=new Mutation(ReplicationSection.getRowPrefix() + file);
    m.put(ReplicationSection.COLF,new Text(Integer.toString(index)),ProtobufUtil.toValue(statBuilder.build()));
    bw.addMutation(m);
    fileToTableId.put(file,index);
    index++;
  }
  bw.close();
  StatusMaker statusMaker=new StatusMaker(conn);
  statusMaker.setSourceTableName(sourceTable);
  statusMaker.run();
  Scanner s=conn.createScanner(sourceTable,Authorizations.EMPTY);
  s.setRange(ReplicationSection.getRange());
  s.fetchColumnFamily(ReplicationSection.COLF);
  Assert.assertEquals(0,Iterables.size(s));
  s=ReplicationTable.getScanner(conn);
  OrderSection.limit(s);
  Iterator<Entry<Key,Value>> iter=s.iterator();
  Assert.assertTrue("Found no order records in replication table",iter.hasNext());
  Iterator<String> expectedFiles=files.iterator();
  Text buff=new Text();
  while (expectedFiles.hasNext() && iter.hasNext()) {
    String file=expectedFiles.next();
    Entry<Key,Value> entry=iter.next();
    Assert.assertEquals(file,OrderSection.getFile(entry.getKey(),buff));
    OrderSection.getTableId(entry.getKey(),buff);
    Assert.assertEquals(fileToTableId.get(file).intValue(),Integer.parseInt(buff.toString()));
  }
  Assert.assertFalse("Found more files unexpectedly",expectedFiles.hasNext());
  Assert.assertFalse("Found more entries in replication table unexpectedly",iter.hasNext());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void openMessagesAreNotDeleted() throws Exception {
  String sourceTable=testName.getMethodName();
  conn.tableOperations().create(sourceTable);
  ReplicationTableUtil.configureMetadataTable(conn,sourceTable);
  BatchWriter bw=conn.createBatchWriter(sourceTable,new BatchWriterConfig());
  String walPrefix="hdfs://localhost:8020/accumulo/wals/tserver+port/";
  Set<String> files=Sets.newHashSet(walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID());
  Map<String,Integer> fileToTableId=new HashMap<>();
  int index=1;
  long timeCreated=0;
  for (  String file : files) {
    Mutation m=new Mutation(ReplicationSection.getRowPrefix() + file);
    m.put(ReplicationSection.COLF,new Text(Integer.toString(index)),StatusUtil.fileCreatedValue(timeCreated));
    bw.addMutation(m);
    fileToTableId.put(file,index);
    index++;
    timeCreated++;
  }
  bw.close();
  StatusMaker statusMaker=new StatusMaker(conn);
  statusMaker.setSourceTableName(sourceTable);
  statusMaker.run();
  Scanner s=conn.createScanner(sourceTable,Authorizations.EMPTY);
  s.setRange(ReplicationSection.getRange());
  s.fetchColumnFamily(ReplicationSection.COLF);
  Assert.assertEquals(files.size(),Iterables.size(s));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void closedMessagesAreDeleted() throws Exception {
  String sourceTable=testName.getMethodName();
  conn.tableOperations().create(sourceTable);
  ReplicationTableUtil.configureMetadataTable(conn,sourceTable);
  BatchWriter bw=conn.createBatchWriter(sourceTable,new BatchWriterConfig());
  String walPrefix="hdfs://localhost:8020/accumulo/wals/tserver+port/";
  Set<String> files=Sets.newHashSet(walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID());
  Map<String,Integer> fileToTableId=new HashMap<>();
  Status stat=Status.newBuilder().setBegin(0).setEnd(0).setInfiniteEnd(true).setClosed(true).setCreatedTime(System.currentTimeMillis()).build();
  int index=1;
  for (  String file : files) {
    Mutation m=new Mutation(ReplicationSection.getRowPrefix() + file);
    m.put(ReplicationSection.COLF,new Text(Integer.toString(index)),ProtobufUtil.toValue(stat));
    bw.addMutation(m);
    fileToTableId.put(file,index);
    index++;
  }
  bw.close();
  StatusMaker statusMaker=new StatusMaker(conn);
  statusMaker.setSourceTableName(sourceTable);
  statusMaker.run();
  Scanner s=conn.createScanner(sourceTable,Authorizations.EMPTY);
  s.setRange(ReplicationSection.getRange());
  s.fetchColumnFamily(ReplicationSection.COLF);
  for (  Entry<Key,Value> e : s) {
    System.out.println(e.getKey().toStringNoTruncate() + " " + e.getValue());
  }
  s=conn.createScanner(sourceTable,Authorizations.EMPTY);
  s.setRange(ReplicationSection.getRange());
  s.fetchColumnFamily(ReplicationSection.COLF);
  Assert.assertEquals(0,Iterables.size(s));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void statusRecordsCreated() throws Exception {
  String sourceTable=testName.getMethodName();
  conn.tableOperations().create(sourceTable);
  ReplicationTableUtil.configureMetadataTable(conn,sourceTable);
  BatchWriter bw=conn.createBatchWriter(sourceTable,new BatchWriterConfig());
  String walPrefix="hdfs://localhost:8020/accumulo/wals/tserver+port/";
  Set<String> files=Sets.newHashSet(walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID());
  Map<String,Integer> fileToTableId=new HashMap<>();
  int index=1;
  long timeCreated=0;
  Map<String,Long> fileToTimeCreated=new HashMap<>();
  for (  String file : files) {
    Mutation m=new Mutation(ReplicationSection.getRowPrefix() + file);
    m.put(ReplicationSection.COLF,new Text(Integer.toString(index)),StatusUtil.fileCreatedValue(timeCreated));
    fileToTimeCreated.put(file,timeCreated);
    bw.addMutation(m);
    fileToTableId.put(file,index);
    index++;
    timeCreated++;
  }
  bw.close();
  StatusMaker statusMaker=new StatusMaker(conn);
  statusMaker.setSourceTableName(sourceTable);
  statusMaker.run();
  Scanner s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  Text file=new Text(), tableId=new Text();
  for (  Entry<Key,Value> entry : s) {
    StatusSection.getFile(entry.getKey(),file);
    StatusSection.getTableId(entry.getKey(),tableId);
    Assert.assertTrue("Found unexpected file: " + file,files.contains(file.toString()));
    Assert.assertEquals(fileToTableId.get(file.toString()),new Integer(tableId.toString()));
    timeCreated=fileToTimeCreated.get(file.toString());
    Assert.assertNotNull(timeCreated);
    Assert.assertEquals(StatusUtil.fileCreated(timeCreated),Status.parseFrom(entry.getValue().get()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.UnorderedWorkAssignerReplicationIT </h4><pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTableWithoutDrain() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  MiniAccumuloClusterImpl peer1Cluster=new MiniAccumuloClusterImpl(peerCfg);
  peer1Cluster.start();
  try {
    Connector connMaster=getConnector();
    Connector connPeer=peer1Cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    String peerClusterName="peer";
    String peerUserName="repl";
    String peerPassword="passwd";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peer1Cluster.getInstanceName(),peer1Cluster.getZooKeepers())));
    String masterTable1="master1", peerTable1="peer1", masterTable2="master2", peerTable2="peer2";
    connMaster.tableOperations().create(masterTable1);
    String masterTableId1=connMaster.tableOperations().tableIdMap().get(masterTable1);
    Assert.assertNotNull(masterTableId1);
    connMaster.tableOperations().create(masterTable2);
    String masterTableId2=connMaster.tableOperations().tableIdMap().get(masterTable2);
    Assert.assertNotNull(masterTableId2);
    connPeer.tableOperations().create(peerTable1);
    String peerTableId1=connPeer.tableOperations().tableIdMap().get(peerTable1);
    Assert.assertNotNull(peerTableId1);
    connPeer.tableOperations().create(peerTable2);
    String peerTableId2=connPeer.tableOperations().tableIdMap().get(peerTable2);
    Assert.assertNotNull(peerTableId2);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable1,TablePermission.WRITE);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable2,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId1);
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId2);
    sleepUninterruptibly(3,TimeUnit.SECONDS);
    BatchWriter bw=connMaster.createBatchWriter(masterTable1,new BatchWriterConfig());
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable1 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    bw=connMaster.createBatchWriter(masterTable2,new BatchWriterConfig());
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable2 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    while (!ReplicationTable.isOnline(connMaster)) {
      Thread.sleep(500);
    }
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    boolean fullyReplicated=false;
    for (int i=0; i < 10 && !fullyReplicated; i++) {
      sleepUninterruptibly(timeoutFactor * 2,TimeUnit.SECONDS);
      Scanner s=ReplicationTable.getScanner(connMaster);
      WorkSection.limit(s);
      for (      Entry<Key,Value> entry : s) {
        Status status=Status.parseFrom(entry.getValue().get());
        if (StatusUtil.isFullyReplicated(status)) {
          fullyReplicated|=true;
        }
      }
    }
    Assert.assertNotEquals(0,fullyReplicated);
    long countTable=0l;
    for (int i=0; i < 10; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable1,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable1));
      }
      log.info("Found {} records in {}",countTable,peerTable1);
      if (0 < countTable) {
        break;
      }
      Thread.sleep(2000);
    }
    Assert.assertTrue("Did not find any records in " + peerTable1 + " on peer",countTable > 0);
    for (int i=0; i < 10; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable2,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable2));
      }
      log.info("Found {} records in {}",countTable,peerTable2);
      if (0 < countTable) {
        break;
      }
      Thread.sleep(2000);
    }
    Assert.assertTrue("Did not find any records in " + peerTable2 + " on peer",countTable > 0);
  }
  finally {
    peer1Cluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataWasReplicatedToThePeerWithoutDrain() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  MiniAccumuloClusterImpl peerCluster=new MiniAccumuloClusterImpl(peerCfg);
  peerCluster.start();
  Connector connMaster=getConnector();
  Connector connPeer=peerCluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
  String peerUserName="repl";
  String peerPassword="passwd";
  connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
  String peerClusterName="peer";
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerCluster.getInstanceName(),peerCluster.getZooKeepers())));
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
  String masterTable="master", peerTable="peer";
  connMaster.tableOperations().create(masterTable);
  String masterTableId=connMaster.tableOperations().tableIdMap().get(masterTable);
  Assert.assertNotNull(masterTableId);
  connPeer.tableOperations().create(peerTable);
  String peerTableId=connPeer.tableOperations().tableIdMap().get(peerTable);
  Assert.assertNotNull(peerTableId);
  connPeer.securityOperations().grantTablePermission(peerUserName,peerTable,TablePermission.WRITE);
  connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION.getKey(),"true");
  connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId);
  BatchWriter bw=connMaster.createBatchWriter(masterTable,new BatchWriterConfig());
  for (int rows=0; rows < 5000; rows++) {
    Mutation m=new Mutation(Integer.toString(rows));
    for (int cols=0; cols < 100; cols++) {
      String value=Integer.toString(cols);
      m.put(value,"",value);
    }
    bw.addMutation(m);
  }
  bw.close();
  log.info("Wrote all data to master cluster");
  Set<String> files=connMaster.replicationOperations().referencedFiles(masterTable);
  for (  String s : files) {
    log.info("Found referenced file for " + masterTable + ": "+ s);
  }
  for (  ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
    cluster.killProcess(ServerType.TABLET_SERVER,proc);
  }
  cluster.exec(TabletServer.class);
  Iterators.size(connMaster.createScanner(masterTable,Authorizations.EMPTY).iterator());
  for (  Entry<Key,Value> kv : connMaster.createScanner(ReplicationTable.NAME,Authorizations.EMPTY)) {
    log.debug(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
  }
  connMaster.replicationOperations().drain(masterTable,files);
  Scanner master=connMaster.createScanner(masterTable,Authorizations.EMPTY), peer=connPeer.createScanner(peerTable,Authorizations.EMPTY);
  Iterator<Entry<Key,Value>> masterIter=master.iterator(), peerIter=peer.iterator();
  Assert.assertTrue("No data in master table",masterIter.hasNext());
  Assert.assertTrue("No data in peer table",peerIter.hasNext());
  while (masterIter.hasNext() && peerIter.hasNext()) {
    Entry<Key,Value> masterEntry=masterIter.next(), peerEntry=peerIter.next();
    Assert.assertEquals(peerEntry.getKey() + " was not equal to " + peerEntry.getKey(),0,masterEntry.getKey().compareTo(peerEntry.getKey(),PartialKey.ROW_COLFAM_COLQUAL_COLVIS));
    Assert.assertEquals(masterEntry.getValue(),peerEntry.getValue());
  }
  Assert.assertFalse("Had more data to read from the master",masterIter.hasNext());
  Assert.assertFalse("Had more data to read from the peer",peerIter.hasNext());
  peerCluster.stop();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataWasReplicatedToThePeer() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  MiniAccumuloClusterImpl peerCluster=new MiniAccumuloClusterImpl(peerCfg);
  peerCluster.start();
  try {
    final Connector connMaster=getConnector();
    final Connector connPeer=peerCluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    ReplicationTable.setOnline(connMaster);
    String peerUserName="peer", peerPassword="foo";
    String peerClusterName="peer";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerCluster.getInstanceName(),peerCluster.getZooKeepers())));
    final String masterTable="master", peerTable="peer";
    connMaster.tableOperations().create(masterTable);
    String masterTableId=connMaster.tableOperations().tableIdMap().get(masterTable);
    Assert.assertNotNull(masterTableId);
    connPeer.tableOperations().create(peerTable);
    String peerTableId=connPeer.tableOperations().tableIdMap().get(peerTable);
    Assert.assertNotNull(peerTableId);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId);
    sleepUninterruptibly(3,TimeUnit.SECONDS);
    BatchWriter bw=connMaster.createBatchWriter(masterTable,new BatchWriterConfig());
    for (int rows=0; rows < 5000; rows++) {
      Mutation m=new Mutation(Integer.toString(rows));
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    final Set<String> filesNeedingReplication=connMaster.replicationOperations().referencedFiles(masterTable);
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    log.info("TabletServer restarted");
    Iterators.size(ReplicationTable.getScanner(connMaster).iterator());
    log.info("TabletServer is online");
    log.info("");
    log.info("Fetching metadata records:");
    for (    Entry<Key,Value> kv : connMaster.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
      if (ReplicationSection.COLF.equals(kv.getKey().getColumnFamily())) {
        log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
      }
 else {
        log.info(kv.getKey().toStringNoTruncate() + " " + kv.getValue());
      }
    }
    log.info("");
    log.info("Fetching replication records:");
    for (    Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
      log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
    }
    Future<Boolean> future=executor.submit(new Callable<Boolean>(){
      @Override public Boolean call() throws Exception {
        connMaster.replicationOperations().drain(masterTable,filesNeedingReplication);
        log.info("Drain completed");
        return true;
      }
    }
);
    long timeoutSeconds=timeoutFactor * 30;
    try {
      future.get(timeoutSeconds,TimeUnit.SECONDS);
    }
 catch (    TimeoutException e) {
      future.cancel(true);
      Assert.fail("Drain did not finish within " + timeoutSeconds + " seconds");
    }
    log.info("drain completed");
    log.info("");
    log.info("Fetching metadata records:");
    for (    Entry<Key,Value> kv : connMaster.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
      if (ReplicationSection.COLF.equals(kv.getKey().getColumnFamily())) {
        log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
      }
 else {
        log.info(kv.getKey().toStringNoTruncate() + " " + kv.getValue());
      }
    }
    log.info("");
    log.info("Fetching replication records:");
    for (    Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
      log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
    }
    Scanner master=connMaster.createScanner(masterTable,Authorizations.EMPTY), peer=connPeer.createScanner(peerTable,Authorizations.EMPTY);
    Iterator<Entry<Key,Value>> masterIter=master.iterator(), peerIter=peer.iterator();
    Entry<Key,Value> masterEntry=null, peerEntry=null;
    while (masterIter.hasNext() && peerIter.hasNext()) {
      masterEntry=masterIter.next();
      peerEntry=peerIter.next();
      Assert.assertEquals(masterEntry.getKey() + " was not equal to " + peerEntry.getKey(),0,masterEntry.getKey().compareTo(peerEntry.getKey(),PartialKey.ROW_COLFAM_COLQUAL_COLVIS));
      Assert.assertEquals(masterEntry.getValue(),peerEntry.getValue());
    }
    log.info("Last master entry: " + masterEntry);
    log.info("Last peer entry: " + peerEntry);
    Assert.assertFalse("Had more data to read from the master",masterIter.hasNext());
    Assert.assertFalse("Had more data to read from the peer",peerIter.hasNext());
  }
  finally {
    peerCluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTable() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  MiniAccumuloClusterImpl peer1Cluster=new MiniAccumuloClusterImpl(peerCfg);
  peer1Cluster.start();
  try {
    Connector connMaster=getConnector();
    Connector connPeer=peer1Cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    String peerClusterName="peer";
    String peerUserName="peer", peerPassword="foo";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peer1Cluster.getInstanceName(),peer1Cluster.getZooKeepers())));
    String masterTable1="master1", peerTable1="peer1", masterTable2="master2", peerTable2="peer2";
    connMaster.tableOperations().create(masterTable1);
    String masterTableId1=connMaster.tableOperations().tableIdMap().get(masterTable1);
    Assert.assertNotNull(masterTableId1);
    connMaster.tableOperations().create(masterTable2);
    String masterTableId2=connMaster.tableOperations().tableIdMap().get(masterTable2);
    Assert.assertNotNull(masterTableId2);
    connPeer.tableOperations().create(peerTable1);
    String peerTableId1=connPeer.tableOperations().tableIdMap().get(peerTable1);
    Assert.assertNotNull(peerTableId1);
    connPeer.tableOperations().create(peerTable2);
    String peerTableId2=connPeer.tableOperations().tableIdMap().get(peerTable2);
    Assert.assertNotNull(peerTableId2);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable1,TablePermission.WRITE);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable2,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId1);
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId2);
    sleepUninterruptibly(3,TimeUnit.SECONDS);
    BatchWriter bw=connMaster.createBatchWriter(masterTable1,new BatchWriterConfig());
    long masterTable1Records=0l;
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable1 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
        masterTable1Records++;
      }
      bw.addMutation(m);
    }
    bw.close();
    bw=connMaster.createBatchWriter(masterTable2,new BatchWriterConfig());
    long masterTable2Records=0l;
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable2 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
        masterTable2Records++;
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    Set<String> filesFor1=connMaster.replicationOperations().referencedFiles(masterTable1), filesFor2=connMaster.replicationOperations().referencedFiles(masterTable2);
    while (!ReplicationTable.isOnline(connMaster)) {
      Thread.sleep(500);
    }
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    log.info("Restarted the tserver");
    Iterators.size(connMaster.createScanner(masterTable1,Authorizations.EMPTY).iterator());
    log.info("Waiting for {} for {}",filesFor1,masterTable1);
    connMaster.replicationOperations().drain(masterTable1,filesFor1);
    log.info("Waiting for {} for {}",filesFor2,masterTable2);
    connMaster.replicationOperations().drain(masterTable2,filesFor2);
    long countTable=0l;
    for (int i=0; i < 5; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable1,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable1));
      }
      log.info("Found {} records in {}",countTable,peerTable1);
      if (masterTable1Records != countTable) {
        log.warn("Did not find {} expected records in {}, only found {}",masterTable1Records,peerTable1,countTable);
      }
    }
    Assert.assertEquals(masterTable1Records,countTable);
    for (int i=0; i < 5; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable2,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable2));
      }
      log.info("Found {} records in {}",countTable,peerTable2);
      if (masterTable2Records != countTable) {
        log.warn("Did not find {} expected records in {}, only found {}",masterTable2Records,peerTable2,countTable);
      }
    }
    Assert.assertEquals(masterTable2Records,countTable);
  }
  finally {
    peer1Cluster.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.UnusedWalDoesntCloseReplicationStatusIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  File accumuloDir=this.getCluster().getConfig().getAccumuloDir();
  final Connector conn=getConnector();
  final String tableName=getUniqueNames(1)[0];
  conn.securityOperations().grantTablePermission("root",MetadataTable.NAME,TablePermission.WRITE);
  conn.tableOperations().create(tableName);
  final String tableId=conn.tableOperations().tableIdMap().get(tableName);
  final int numericTableId=Integer.parseInt(tableId);
  final int fakeTableId=numericTableId + 1;
  Assert.assertNotNull("Did not find table ID",tableId);
  conn.tableOperations().setProperty(tableName,Property.TABLE_REPLICATION.getKey(),"true");
  conn.tableOperations().setProperty(tableName,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","1");
  conn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + "cluster1",ReplicaSystemFactory.getPeerConfigurationValue(MockReplicaSystem.class,"50000"));
  FileSystem fs=FileSystem.getLocal(new Configuration());
  File tserverWalDir=new File(accumuloDir,ServerConstants.WAL_DIR + Path.SEPARATOR + "faketserver+port");
  File tserverWal=new File(tserverWalDir,UUID.randomUUID().toString());
  fs.mkdirs(new Path(tserverWalDir.getAbsolutePath()));
  FSDataOutputStream out=fs.create(new Path(tserverWal.getAbsolutePath()));
  out.write(DfsLogger.LOG_FILE_HEADER_V3.getBytes(UTF_8));
  DataOutputStream dos=new DataOutputStream(out);
  dos.writeUTF("NullCryptoModule");
  LogFileKey key=new LogFileKey();
  LogFileValue value=new LogFileValue();
  key.event=OPEN;
  key.tserverSession=tserverWal.getAbsolutePath();
  key.filename=tserverWal.getAbsolutePath();
  key.write(out);
  value.write(out);
  key.event=LogEvents.DEFINE_TABLET;
  key.tablet=new KeyExtent(new Text(Integer.toString(fakeTableId)),null,null);
  key.seq=1l;
  key.tid=1;
  key.write(dos);
  value.write(dos);
  key.tablet=null;
  key.event=LogEvents.MUTATION;
  key.filename=tserverWal.getAbsolutePath();
  value.mutations=Arrays.<Mutation>asList(new ServerMutation(new Text("row")));
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.COMPACTION_START;
  key.filename=accumuloDir.getAbsolutePath() + "/tables/" + fakeTableId+ "/t-000001/A000001.rf";
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.COMPACTION_FINISH;
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  dos.close();
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("m");
  m.put("m","m","M");
  bw.addMutation(m);
  bw.close();
  log.info("State of metadata table after inserting a record");
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  for (  Entry<Key,Value> entry : s) {
    System.out.println(entry.getKey().toStringNoTruncate() + " " + entry.getValue());
  }
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.ReplicationSection.getRange());
  for (  Entry<Key,Value> entry : s) {
    System.out.println(entry.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(entry.getValue().get())));
  }
  log.info("Offline'ing table");
  conn.tableOperations().offline(tableName,true);
  String walUri=tserverWal.toURI().toString();
  KeyExtent extent=new KeyExtent(new Text(tableId),null,null);
  bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  m=new Mutation(extent.getMetadataEntry());
  m.put(MetadataSchema.TabletsSection.LogColumnFamily.NAME,new Text("localhost:12345/" + walUri),new Value((walUri + "|1").getBytes(UTF_8)));
  bw.addMutation(m);
  m=new Mutation(MetadataSchema.ReplicationSection.getRowPrefix() + new Path(walUri).toString());
  m.put(MetadataSchema.ReplicationSection.COLF,new Text(tableId),new Value(StatusUtil.fileCreated(System.currentTimeMillis()).toByteArray()));
  bw.addMutation(m);
  bw.close();
  log.info("State of metadata after injecting WAL manually");
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  for (  Entry<Key,Value> entry : s) {
    log.info(entry.getKey().toStringNoTruncate() + " " + entry.getValue());
  }
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.ReplicationSection.getRange());
  for (  Entry<Key,Value> entry : s) {
    log.info(entry.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(entry.getValue().get())));
  }
  log.info("Bringing table online");
  conn.tableOperations().online(tableName,true);
  Assert.assertEquals(1,Iterables.size(conn.createScanner(tableName,Authorizations.EMPTY)));
  log.info("Table has performed recovery, state of metadata:");
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  for (  Entry<Key,Value> entry : s) {
    log.info(entry.getKey().toStringNoTruncate() + " " + entry.getValue());
  }
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.ReplicationSection.getRange());
  for (  Entry<Key,Value> entry : s) {
    Status status=Status.parseFrom(entry.getValue().get());
    log.info(entry.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(status));
    Assert.assertFalse("Status record was closed and it should not be",status.getClosed());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.WorkMakerIT </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void dontCreateWorkForEntriesWithNothingToReplicate() throws Exception {
  String table=testName.getMethodName();
  conn.tableOperations().create(table);
  String tableId=conn.tableOperations().tableIdMap().get(table);
  String file="hdfs://localhost:8020/accumulo/wal/123456-1234-1234-12345678";
  Mutation m=new Mutation(new Path(file).toString());
  m.put(StatusSection.NAME,new Text(tableId),StatusUtil.fileCreatedValue(System.currentTimeMillis()));
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  bw.addMutation(m);
  bw.flush();
  Scanner s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  Assert.assertEquals(1,Iterables.size(s));
  MockWorkMaker workMaker=new MockWorkMaker(conn);
  conn.tableOperations().setProperty(ReplicationTable.NAME,Property.TABLE_REPLICATION_TARGET.getKey() + "remote_cluster_1","4");
  workMaker.setBatchWriter(bw);
  workMaker.run();
  s=ReplicationTable.getScanner(conn);
  WorkSection.limit(s);
  Assert.assertEquals(0,Iterables.size(s));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void singleUnitMultipleTargets() throws Exception {
  String table=testName.getMethodName();
  conn.tableOperations().create(table);
  String tableId=conn.tableOperations().tableIdMap().get(table);
  String file="hdfs://localhost:8020/accumulo/wal/123456-1234-1234-12345678";
  Mutation m=new Mutation(new Path(file).toString());
  m.put(StatusSection.NAME,new Text(tableId),StatusUtil.fileCreatedValue(System.currentTimeMillis()));
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  bw.addMutation(m);
  bw.flush();
  Scanner s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  Assert.assertEquals(1,Iterables.size(s));
  MockWorkMaker workMaker=new MockWorkMaker(conn);
  Map<String,String> targetClusters=ImmutableMap.of("remote_cluster_1","4","remote_cluster_2","6","remote_cluster_3","8");
  Set<ReplicationTarget> expectedTargets=new HashSet<>();
  for (  Entry<String,String> cluster : targetClusters.entrySet()) {
    expectedTargets.add(new ReplicationTarget(cluster.getKey(),cluster.getValue(),tableId));
  }
  workMaker.setBatchWriter(bw);
  workMaker.addWorkRecord(new Text(file),StatusUtil.fileCreatedValue(System.currentTimeMillis()),targetClusters,tableId);
  s=ReplicationTable.getScanner(conn);
  WorkSection.limit(s);
  Set<ReplicationTarget> actualTargets=new HashSet<>();
  for (  Entry<Key,Value> entry : s) {
    Assert.assertEquals(file,entry.getKey().getRow().toString());
    Assert.assertEquals(WorkSection.NAME,entry.getKey().getColumnFamily());
    ReplicationTarget target=ReplicationTarget.from(entry.getKey().getColumnQualifier());
    actualTargets.add(target);
  }
  for (  ReplicationTarget expected : expectedTargets) {
    Assert.assertTrue("Did not find expected target: " + expected,actualTargets.contains(expected));
    actualTargets.remove(expected);
  }
  Assert.assertTrue("Found extra replication work entries: " + actualTargets,actualTargets.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void singleUnitSingleTarget() throws Exception {
  String table=testName.getMethodName();
  conn.tableOperations().create(table);
  String tableId=conn.tableOperations().tableIdMap().get(table);
  String file="hdfs://localhost:8020/accumulo/wal/123456-1234-1234-12345678";
  long timeCreated=System.currentTimeMillis();
  Mutation m=new Mutation(new Path(file).toString());
  m.put(StatusSection.NAME,new Text(tableId),StatusUtil.fileCreatedValue(timeCreated));
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  bw.addMutation(m);
  bw.flush();
  Scanner s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  Assert.assertEquals(1,Iterables.size(s));
  MockWorkMaker workMaker=new MockWorkMaker(conn);
  ReplicationTarget expected=new ReplicationTarget("remote_cluster_1","4",tableId);
  workMaker.setBatchWriter(bw);
  workMaker.addWorkRecord(new Text(file),StatusUtil.fileCreatedValue(timeCreated),ImmutableMap.of("remote_cluster_1","4"),tableId);
  s=ReplicationTable.getScanner(conn);
  WorkSection.limit(s);
  Entry<Key,Value> workEntry=Iterables.getOnlyElement(s);
  Key workKey=workEntry.getKey();
  ReplicationTarget actual=ReplicationTarget.from(workKey.getColumnQualifier());
  Assert.assertEquals(file,workKey.getRow().toString());
  Assert.assertEquals(WorkSection.NAME,workKey.getColumnFamily());
  Assert.assertEquals(expected,actual);
  Assert.assertEquals(workEntry.getValue(),StatusUtil.fileCreatedValue(timeCreated));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.security.KerberosClientOptsTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testParseArgsPerformsLogin() throws Exception {
  String user=testName.getMethodName();
  File userKeytab=new File(kdc.getKeytabDir(),user + ".keytab");
  if (userKeytab.exists() && !userKeytab.delete()) {
    log.warn("Unable to delete {}",userKeytab);
  }
  kdc.createPrincipal(userKeytab,user);
  user=kdc.qualifyUser(user);
  ClientOpts opts=new ClientOpts();
  String[] args=new String[]{"--sasl","--keytab",userKeytab.getAbsolutePath(),"-u",user};
  opts.parseArgs(testName.getMethodName(),args);
  UserGroupInformation ugi=UserGroupInformation.getCurrentUser();
  assertEquals(user,ugi.getUserName());
  assertEquals(AuthenticationMethod.KERBEROS,ugi.getAuthenticationMethod());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.security.KerberosTokenTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  String user=testName.getMethodName();
  File userKeytab=new File(kdc.getKeytabDir(),user + ".keytab");
  if (userKeytab.exists() && !userKeytab.delete()) {
    log.warn("Unable to delete {}",userKeytab);
  }
  kdc.createPrincipal(userKeytab,user);
  user=kdc.qualifyUser(user);
  UserGroupInformation.loginUserFromKeytab(user,userKeytab.getAbsolutePath());
  KerberosToken token=new KerberosToken();
  assertEquals(user,token.getPrincipal());
  KerberosToken tokenWithPrinc=new KerberosToken(user);
  assertEquals(token,tokenWithPrinc);
  assertEquals(token.hashCode(),tokenWithPrinc.hashCode());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDestroy() throws Exception {
  String user=testName.getMethodName();
  File userKeytab=new File(kdc.getKeytabDir(),user + ".keytab");
  if (userKeytab.exists() && !userKeytab.delete()) {
    log.warn("Unable to delete {}",userKeytab);
  }
  kdc.createPrincipal(userKeytab,user);
  user=kdc.qualifyUser(user);
  UserGroupInformation.loginUserFromKeytab(user,userKeytab.getAbsolutePath());
  KerberosToken token=new KerberosToken();
  assertEquals(user,token.getPrincipal());
  token.destroy();
  assertTrue(token.isDestroyed());
  assertNull(token.getPrincipal());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.server.security.SystemCredentialsIT </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSystemCredentials() throws Exception {
  assertEquals(0,exec(SystemCredentialsIT.class,"good",getCluster().getZooKeepers()).waitFor());
  assertEquals(FAIL_CODE,exec(SystemCredentialsIT.class,"bad",getCluster().getZooKeepers()).waitFor());
  assertEquals(BAD_PASSWD_FAIL_CODE,exec(SystemCredentialsIT.class,"bad_password",getCluster().getZooKeepers()).waitFor());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.start.KeywordStartIT </h4><pre class="type-9 type-13 type-5 type-21 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExpectedClasses() throws IOException {
  assumeTrue(new File(System.getProperty("user.dir") + "/src").exists());
  TreeMap<String,Class<? extends KeywordExecutable>> expectSet=new TreeMap<>();
  expectSet.put("admin",Admin.class);
  expectSet.put("classpath",Classpath.class);
  expectSet.put("create-token",CreateToken.class);
  expectSet.put("gc",GCExecutable.class);
  expectSet.put("help",Help.class);
  expectSet.put("info",Info.class);
  expectSet.put("init",Initialize.class);
  expectSet.put("jar",Jar.class);
  expectSet.put("login-info",LoginProperties.class);
  expectSet.put("master",MasterExecutable.class);
  expectSet.put("minicluster",MiniClusterExecutable.class);
  expectSet.put("monitor",MonitorExecutable.class);
  expectSet.put("proxy",Proxy.class);
  expectSet.put("rfile-info",PrintInfo.class);
  expectSet.put("shell",Shell.class);
  expectSet.put("tracer",TracerExecutable.class);
  expectSet.put("tserver",TServerExecutable.class);
  expectSet.put("version",Version.class);
  expectSet.put("zookeeper",ZooKeeperMain.class);
  Iterator<Entry<String,Class<? extends KeywordExecutable>>> expectIter=expectSet.entrySet().iterator();
  TreeMap<String,KeywordExecutable> actualSet=new TreeMap<>(Main.getExecutables(getClass().getClassLoader()));
  Iterator<Entry<String,KeywordExecutable>> actualIter=actualSet.entrySet().iterator();
  Entry<String,Class<? extends KeywordExecutable>> expected;
  Entry<String,KeywordExecutable> actual;
  while (expectIter.hasNext() && actualIter.hasNext()) {
    expected=expectIter.next();
    actual=actualIter.next();
    assertEquals(expected.getKey(),actual.getKey());
    assertEquals(expected.getValue(),actual.getValue().getClass());
  }
  boolean moreExpected=expectIter.hasNext();
  if (moreExpected) {
    while (expectIter.hasNext()) {
      log.warn("Missing class for keyword '" + expectIter.next() + "'");
    }
  }
  assertFalse("Missing expected classes",moreExpected);
  boolean moreActual=actualIter.hasNext();
  if (moreActual) {
    while (actualIter.hasNext()) {
      log.warn("Extra class found with keyword '" + actualIter.next() + "'");
    }
  }
  assertFalse("Found additional unexpected classes",moreActual);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheckDuplicates(){
  NoOp one=new NoOp("one");
  NoOp anotherOne=new NoOp("another");
  NoOp two=new NoOp("two");
  NoOp three=new NoOp("three");
  List<NoOp> services=Arrays.asList(one,three,two,two,three,three,anotherOne);
  assertEquals(7,services.size());
  Map<String,KeywordExecutable> results=Main.checkDuplicates(services);
  assertTrue(results.containsKey(one.keyword()));
  assertTrue(results.containsKey(anotherOne.keyword()));
  assertFalse(results.containsKey(two.keyword()));
  assertFalse(results.containsKey(three.keyword()));
  assertEquals(2,results.size());
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testKeywordsMatch() throws IOException {
  for (  Entry<String,KeywordExecutable> entry : Main.getExecutables(getClass().getClassLoader()).entrySet()) {
    assertEquals(entry.getKey(),entry.getValue().keyword());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tracer.AsyncSpanReceiverTest </h4><pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExcludeMore() throws InterruptedException {
  try (TestReceiver receiver=new TestReceiver(HTraceConfiguration.fromMap(Collections.singletonMap(AsyncSpanReceiver.SPAN_MIN_MS,"10")))){
    receiver.receiveSpan(createSpan(0));
    while (receiver.getQueueSize() > 0) {
      Thread.sleep(500);
    }
    assertEquals(0,receiver.getQueueSize());
    assertEquals(0,receiver.getSpansSent());
    receiver.receiveSpan(createSpan(9));
    while (receiver.getQueueSize() > 0) {
      Thread.sleep(500);
    }
    assertEquals(0,receiver.getQueueSize());
    assertEquals(0,receiver.getSpansSent());
    receiver.receiveSpan(createSpan(10));
    while (receiver.getQueueSize() > 0) {
      Thread.sleep(500);
    }
    assertEquals(0,receiver.getQueueSize());
    assertEquals(1,receiver.getSpansSent());
  }
 }

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testKeepAll() throws InterruptedException {
  try (TestReceiver receiver=new TestReceiver(HTraceConfiguration.fromMap(Collections.singletonMap(AsyncSpanReceiver.SPAN_MIN_MS,"0")))){
    receiver.receiveSpan(createSpan(0));
    while (receiver.getQueueSize() > 0) {
      Thread.sleep(500);
    }
    assertEquals(0,receiver.getQueueSize());
    assertEquals(1,receiver.getSpansSent());
  }
 }

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws InterruptedException {
  try (TestReceiver receiver=new TestReceiver()){
    receiver.receiveSpan(createSpan(0));
    while (receiver.getQueueSize() > 0) {
      Thread.sleep(500);
    }
    assertEquals(0,receiver.getQueueSize());
    assertEquals(0,receiver.getSpansSent());
    receiver.receiveSpan(createSpan(1));
    while (receiver.getQueueSize() > 0) {
      Thread.sleep(500);
    }
    assertEquals(0,receiver.getQueueSize());
    assertEquals(1,receiver.getSpansSent());
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tracer.TracerTest </h4><pre class="type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThrift() throws Exception {
  TestReceiver tracer=new TestReceiver();
  org.apache.htrace.Trace.addReceiver(tracer);
  ServerSocket socket=new ServerSocket(0);
  TServerSocket transport=new TServerSocket(socket);
  transport.listen();
  TThreadPoolServer.Args args=new TThreadPoolServer.Args(transport);
  args.processor(new Processor<Iface>(TraceWrap.service(new Service())));
  final TServer tserver=new TThreadPoolServer(args);
  Thread t=new Thread(){
    @Override public void run(){
      tserver.serve();
    }
  }
;
  t.start();
  TTransport clientTransport=new TSocket(new Socket("localhost",socket.getLocalPort()));
  TestService.Iface client=new TestService.Client(new TBinaryProtocol(clientTransport),new TBinaryProtocol(clientTransport));
  client=TraceWrap.client(client);
  assertFalse(client.checkTrace(null,"test"));
  Span start=Trace.on("start");
  assertTrue(client.checkTrace(null,"my test"));
  start.stop();
  assertNotNull(tracer.traces.get(start.traceId()));
  String traces[]={"my test","checkTrace","client:checkTrace","start"};
  assertTrue(tracer.traces.get(start.traceId()).size() == traces.length);
  for (int i=0; i < traces.length; i++)   assertEquals(traces[i],tracer.traces.get(start.traceId()).get(i).description);
  tserver.stop();
  t.join(100);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void testTrace() throws Exception {
  TestReceiver tracer=new TestReceiver();
  org.apache.htrace.Trace.addReceiver(tracer);
  assertFalse(Trace.isTracing());
  Trace.start("nop").stop();
  assertTrue(tracer.traces.size() == 0);
  assertFalse(Trace.isTracing());
  Trace.on("nop").stop();
  assertTrue(tracer.traces.size() == 1);
  assertFalse(Trace.isTracing());
  Span start=Trace.on("testing");
  assertEquals(Trace.currentTrace().getSpan(),start.getScope().getSpan());
  assertTrue(Trace.isTracing());
  Span span=Trace.start("shortest trace ever");
  span.stop();
  long traceId=Trace.currentTraceId();
  assertNotNull(tracer.traces.get(traceId));
  assertTrue(tracer.traces.get(traceId).size() == 1);
  assertEquals("shortest trace ever",tracer.traces.get(traceId).get(0).description);
  Span pause=Trace.start("pause");
  Thread.sleep(100);
  pause.stop();
  assertTrue(tracer.traces.get(traceId).size() == 2);
  assertTrue(tracer.traces.get(traceId).get(1).millis() >= 100);
  Thread t=new Thread(Trace.wrap(new Runnable(){
    @Override public void run(){
      assertTrue(Trace.isTracing());
    }
  }
),"My Task");
  t.start();
  t.join();
  assertTrue(tracer.traces.get(traceId).size() == 3);
  assertEquals("My Task",tracer.traces.get(traceId).get(2).description);
  Trace.off();
  assertFalse(Trace.isTracing());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.CountingIteratorTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeepCopyCount() throws IOException {
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  tm.put(new Key("r1","cf1","cq1"),new Value("data1".getBytes()));
  tm.put(new Key("r2","cf1","cq1"),new Value("data2".getBytes()));
  SortedMapIterator smi=new SortedMapIterator(tm);
  CountingIterator ci=new CountingIterator(smi,new AtomicLong(0));
  CountingIterator dc1=ci.deepCopy(null);
  CountingIterator dc2=ci.deepCopy(null);
  readAll(ci);
  readAll(dc1);
  readAll(dc2);
  Assert.assertEquals(6,ci.getCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.InMemoryMapTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSample() throws Exception {
  SamplerConfigurationImpl sampleConfig=new SamplerConfigurationImpl(RowSampler.class.getName(),ImmutableMap.of("hasher","murmur3_32","modulus","7"));
  Sampler sampler=SamplerFactory.newSampler(sampleConfig,DefaultConfiguration.getInstance());
  ConfigurationCopy config1=newConfig(tempFolder.newFolder().getAbsolutePath());
  for (  Entry<String,String> entry : sampleConfig.toTablePropertiesMap().entrySet()) {
    config1.set(entry.getKey(),entry.getValue());
  }
  ConfigurationCopy config2=newConfig(tempFolder.newFolder().getAbsolutePath());
  config2.set(Property.TABLE_LOCALITY_GROUP_PREFIX + "lg1",LocalityGroupUtil.encodeColumnFamilies(toTextSet("cf2")));
  config2.set(Property.TABLE_LOCALITY_GROUPS.getKey(),"lg1");
  for (  Entry<String,String> entry : sampleConfig.toTablePropertiesMap().entrySet()) {
    config2.set(entry.getKey(),entry.getValue());
  }
  for (  ConfigurationCopy config : Arrays.asList(config1,config2)) {
    InMemoryMap imm=new InMemoryMap(config);
    TreeMap<Key,Value> expectedSample=new TreeMap<>();
    TreeMap<Key,Value> expectedAll=new TreeMap<>();
    TreeMap<Key,Value> expectedNone=new TreeMap<>();
    MemoryIterator iter0=imm.skvIterator(sampleConfig);
    for (int r=0; r < 100; r++) {
      String row=String.format("r%06d",r);
      mutate(imm,row,"cf1:cq1",5,"v" + (2 * r),sampler,expectedSample,expectedAll);
      mutate(imm,row,"cf2:cq2",5,"v" + ((2 * r) + 1),sampler,expectedSample,expectedAll);
    }
    assertTrue(expectedSample.size() > 0);
    MemoryIterator iter1=imm.skvIterator(sampleConfig);
    MemoryIterator iter2=imm.skvIterator(null);
    SortedKeyValueIterator<Key,Value> iter0dc1=iter0.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter0dc2=iter0.deepCopy(new SampleIE(sampleConfig));
    SortedKeyValueIterator<Key,Value> iter1dc1=iter1.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter1dc2=iter1.deepCopy(new SampleIE(sampleConfig));
    SortedKeyValueIterator<Key,Value> iter2dc1=iter2.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter2dc2=iter2.deepCopy(new SampleIE(sampleConfig));
    assertEquals(expectedNone,readAll(iter0));
    assertEquals(expectedNone,readAll(iter0dc1));
    assertEquals(expectedNone,readAll(iter0dc2));
    assertEquals(expectedSample,readAll(iter1));
    assertEquals(expectedAll,readAll(iter2));
    assertEquals(expectedAll,readAll(iter1dc1));
    assertEquals(expectedAll,readAll(iter2dc1));
    assertEquals(expectedSample,readAll(iter1dc2));
    assertEquals(expectedSample,readAll(iter2dc2));
    imm.delete(0);
    assertEquals(expectedNone,readAll(iter0));
    assertEquals(expectedNone,readAll(iter0dc1));
    assertEquals(expectedNone,readAll(iter0dc2));
    assertEquals(expectedSample,readAll(iter1));
    assertEquals(expectedAll,readAll(iter2));
    assertEquals(expectedAll,readAll(iter1dc1));
    assertEquals(expectedAll,readAll(iter2dc1));
    assertEquals(expectedSample,readAll(iter1dc2));
    assertEquals(expectedSample,readAll(iter2dc2));
    SortedKeyValueIterator<Key,Value> iter0dc3=iter0.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter0dc4=iter0.deepCopy(new SampleIE(sampleConfig));
    SortedKeyValueIterator<Key,Value> iter1dc3=iter1.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter1dc4=iter1.deepCopy(new SampleIE(sampleConfig));
    SortedKeyValueIterator<Key,Value> iter2dc3=iter2.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter2dc4=iter2.deepCopy(new SampleIE(sampleConfig));
    assertEquals(expectedNone,readAll(iter0dc3));
    assertEquals(expectedNone,readAll(iter0dc4));
    assertEquals(expectedAll,readAll(iter1dc3));
    assertEquals(expectedAll,readAll(iter2dc3));
    assertEquals(expectedSample,readAll(iter1dc4));
    assertEquals(expectedSample,readAll(iter2dc4));
    iter1.close();
    iter2.close();
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeferredSamplerCreation() throws Exception {
  SamplerConfigurationImpl sampleConfig1=new SamplerConfigurationImpl(RowSampler.class.getName(),ImmutableMap.of("hasher","murmur3_32","modulus","9"));
  ConfigurationCopy config1=newConfig(tempFolder.newFolder().getAbsolutePath());
  for (  Entry<String,String> entry : sampleConfig1.toTablePropertiesMap().entrySet()) {
    config1.set(entry.getKey(),entry.getValue());
  }
  InMemoryMap imm=new InMemoryMap(config1);
  SamplerConfigurationImpl sampleConfig2=new SamplerConfigurationImpl(RowSampler.class.getName(),ImmutableMap.of("hasher","murmur3_32","modulus","7"));
  for (  Entry<String,String> entry : sampleConfig2.toTablePropertiesMap().entrySet()) {
    config1.set(entry.getKey(),entry.getValue());
  }
  TreeMap<Key,Value> expectedSample=new TreeMap<>();
  TreeMap<Key,Value> expectedAll=new TreeMap<>();
  Sampler sampler=SamplerFactory.newSampler(sampleConfig2,config1);
  for (int i=0; i < 100; i++) {
    mutate(imm,"r" + i,"cf:cq",5,"v" + i,sampler,expectedSample,expectedAll);
  }
  MemoryIterator iter=imm.skvIterator(sampleConfig2);
  iter.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  Assert.assertEquals(expectedSample,readAll(iter));
  SortedKeyValueIterator<Key,Value> dc=iter.deepCopy(new SampleIE(sampleConfig2));
  dc.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  Assert.assertEquals(expectedSample,readAll(dc));
  iter=imm.skvIterator(null);
  iter.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  Assert.assertEquals(expectedAll,readAll(iter));
  iter=imm.skvIterator(sampleConfig1);
  thrown.expect(SampleNotPresentException.class);
  iter.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.LargestFirstMemoryManagerTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  LargestFirstMemoryManagerUnderTest mgr=new LargestFirstMemoryManagerUnderTest();
  ServerConfiguration config=new ServerConfiguration(){
    ServerConfigurationFactory delegate=new ServerConfigurationFactory(inst);
    @Override public AccumuloConfiguration getConfiguration(){
      return DefaultConfiguration.getInstance();
    }
    @Override public TableConfiguration getTableConfiguration(    String tableId){
      return delegate.getTableConfiguration(tableId);
    }
    @Override public TableConfiguration getTableConfiguration(    KeyExtent extent){
      return delegate.getTableConfiguration(extent);
    }
    @Override public NamespaceConfiguration getNamespaceConfiguration(    String namespaceId){
      return delegate.getNamespaceConfiguration(namespaceId);
    }
    @Override public Instance getInstance(){
      return delegate.getInstance();
    }
  }
;
  mgr.init(config);
  MemoryManagementActions result;
  result=mgr.getMemoryManagementActions(tablets(t(k("x"),ZERO,1000,0),t(k("y"),ZERO,2000,0)));
  assertEquals(0,result.tabletsToMinorCompact.size());
  result=mgr.getMemoryManagementActions(tablets(t(k("x"),ZERO,ONE_GIG,0),t(k("y"),ZERO,2000,0)));
  assertEquals(1,result.tabletsToMinorCompact.size());
  assertEquals(k("x"),result.tabletsToMinorCompact.get(0));
  mgr.currentTime=LATER;
  result=mgr.getMemoryManagementActions(tablets(t(k("x"),ZERO,1001,0),t(k("y"),LATER,2000,0)));
  assertEquals(1,result.tabletsToMinorCompact.size());
  assertEquals(k("x"),result.tabletsToMinorCompact.get(0));
  result=mgr.getMemoryManagementActions(tablets(t(k("x"),ZERO,1001,0),t(k("y"),LATER,ONE_GIG,0)));
  assertEquals(1,result.tabletsToMinorCompact.size());
  assertEquals(k("y"),result.tabletsToMinorCompact.get(0));
  mgr=new LargestFirstMemoryManagerUnderTest();
  mgr.init(config);
  result=mgr.getMemoryManagementActions(tablets(t(k("a"),ZERO,HALF_GIG,0),t(k("b"),ZERO,HALF_GIG + 1,0),t(k("c"),ZERO,HALF_GIG + 2,0),t(k("d"),ZERO,HALF_GIG + 3,0),t(k("e"),ZERO,HALF_GIG + 4,0),t(k("f"),ZERO,HALF_GIG + 5,0),t(k("g"),ZERO,HALF_GIG + 6,0),t(k("h"),ZERO,HALF_GIG + 7,0),t(k("i"),ZERO,HALF_GIG + 8,0)));
  assertEquals(2,result.tabletsToMinorCompact.size());
  assertEquals(k("i"),result.tabletsToMinorCompact.get(0));
  assertEquals(k("h"),result.tabletsToMinorCompact.get(1));
  mgr=new LargestFirstMemoryManagerUnderTest();
  mgr.init(config);
  result=mgr.getMemoryManagementActions(tablets(t(k("a"),ZERO,HALF_GIG,0),t(k("b"),ZERO,HALF_GIG + 1,0),t(k("c"),ZERO,HALF_GIG + 2,0),t(k("d"),ZERO,HALF_GIG + 3,0),t(k("e"),ZERO,HALF_GIG + 4,0),t(k("f"),ZERO,HALF_GIG + 5,0),t(k("g"),ZERO,ONE_GIG,0),t(k("h"),ZERO,0,HALF_GIG + 7),t(k("i"),ZERO,0,0)));
  assertEquals(1,result.tabletsToMinorCompact.size());
  assertEquals(k("g"),result.tabletsToMinorCompact.get(0));
  result=mgr.getMemoryManagementActions(tablets(t(k("a"),ZERO,HALF_GIG,0),t(k("b"),ZERO,ONE_GIG + 1,0),t(k("c"),ZERO,ONE_GIG + 2,0),t(k("d"),ZERO,ONE_GIG + 3,0),t(k("e"),ZERO,ONE_GIG + 4,0),t(k("f"),ZERO,ONE_GIG + 5,0),t(k("g"),ZERO,ONE_GIG + 6,0),t(k("h"),ZERO,0,0),t(k("i"),ZERO,0,0)));
  assertEquals(2,result.tabletsToMinorCompact.size());
  assertEquals(k("g"),result.tabletsToMinorCompact.get(0));
  assertEquals(k("f"),result.tabletsToMinorCompact.get(1));
  result=mgr.getMemoryManagementActions(tablets(t(k("a"),ZERO,HALF_GIG,0),t(k("b"),ZERO,ONE_GIG + 1,0),t(k("c"),ZERO,ONE_GIG + 2,0),t(k("d"),ZERO,ONE_GIG + 3,0),t(k("e"),ZERO,ONE_GIG + 4,0),t(k("f"),ZERO,ONE_GIG,ONE_GIG + 5),t(k("g"),ZERO,ONE_GIG,ONE_GIG + 6),t(k("h"),ZERO,0,0),t(k("i"),ZERO,0,0)));
  assertEquals(0,result.tabletsToMinorCompact.size());
  result=mgr.getMemoryManagementActions(tablets(t(k("a"),ZERO,HALF_GIG,0),t(k("b"),ZERO,ONE_GIG + 1,0),t(k("c"),ZERO,ONE_GIG + 2,0),t(k("d"),ZERO,ONE_GIG + 3,0),t(k("e"),ZERO,ONE_GIG + 4,0),t(k("f"),ZERO,ONE_GIG,ONE_GIG + 5),t(k("g"),ZERO,ONE_GIG,0),t(k("h"),ZERO,0,0),t(k("i"),ZERO,0,0)));
  assertEquals(1,result.tabletsToMinorCompact.size());
  assertEquals(k("e"),result.tabletsToMinorCompact.get(0));
  mgr=new LargestFirstMemoryManagerUnderTest();
  mgr.init(config);
  result=mgr.getMemoryManagementActions(tablets(t(k("a"),ZERO,HALF_GIG,0),t(k("b"),ZERO,HALF_GIG + 1,0),t(k("c"),ZERO,HALF_GIG + 2,0),t(k("d"),ZERO,0,HALF_GIG),t(k("e"),ZERO,0,HALF_GIG),t(k("f"),ZERO,0,HALF_GIG),t(k("g"),ZERO,0,HALF_GIG),t(k("i"),ZERO,0,HALF_GIG),t(k("j"),ZERO,0,HALF_GIG),t(k("k"),ZERO,0,HALF_GIG),t(k("l"),ZERO,0,HALF_GIG),t(k("m"),ZERO,0,HALF_GIG)));
  assertEquals(0,result.tabletsToMinorCompact.size());
  mgr=new LargestFirstMemoryManagerUnderTest();
  mgr.init(config);
  result=mgr.getMemoryManagementActions(tablets(t(k("a"),ZERO,QGIG,0),t(k("b"),ZERO,QGIG + 1,0),t(k("c"),ZERO,QGIG + 2,0)));
  assertEquals(1,result.tabletsToMinorCompact.size());
  assertEquals(k("c"),result.tabletsToMinorCompact.get(0));
  result=mgr.getMemoryManagementActions(tablets(t(k("a"),ZERO,QGIG,0),t(k("b"),ZERO,QGIG + 1,0),t(k("c"),ZERO,0,QGIG + 2)));
  assertEquals(0,result.tabletsToMinorCompact.size());
  mgr.currentTime+=ONE_MINUTE;
  result=mgr.getMemoryManagementActions(tablets(t(k("a"),ZERO,QGIG,0),t(k("b"),ZERO,QGIG + 1,0),t(k("c"),ZERO,0,QGIG + 2)));
  assertEquals(0,result.tabletsToMinorCompact.size());
  mgr.currentTime+=ONE_MINUTE;
  result=mgr.getMemoryManagementActions(tablets(t(k("a"),ZERO,QGIG,0),t(k("b"),ZERO,0,0),t(k("c"),ZERO,0,0)));
  assertEquals(0,result.tabletsToMinorCompact.size());
  mgr.currentTime+=ONE_MINUTE;
  result=mgr.getMemoryManagementActions(tablets(t(k("a"),ZERO,QGIG,0),t(k("b"),ZERO,QGIG + 1,0),t(k("c"),ZERO,0,0)));
  assertEquals(1,result.tabletsToMinorCompact.size());
  assertEquals(k("b"),result.tabletsToMinorCompact.get(0));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeletedTable() throws Exception {
  final String deletedTableId="1";
  Function<String,Boolean> existenceCheck=new Function<String,Boolean>(){
    @Override public Boolean apply(    String tableId){
      return !deletedTableId.equals(tableId);
    }
  }
;
  LargestFirstMemoryManagerWithExistenceCheck mgr=new LargestFirstMemoryManagerWithExistenceCheck(existenceCheck);
  ServerConfiguration config=new ServerConfiguration(){
    ServerConfigurationFactory delegate=new ServerConfigurationFactory(inst);
    @Override public AccumuloConfiguration getConfiguration(){
      return DefaultConfiguration.getInstance();
    }
    @Override public TableConfiguration getTableConfiguration(    String tableId){
      return delegate.getTableConfiguration(tableId);
    }
    @Override public TableConfiguration getTableConfiguration(    KeyExtent extent){
      return delegate.getTableConfiguration(extent);
    }
    @Override public NamespaceConfiguration getNamespaceConfiguration(    String namespaceId){
      return delegate.getNamespaceConfiguration(namespaceId);
    }
    @Override public Instance getInstance(){
      return delegate.getInstance();
    }
  }
;
  mgr.init(config);
  MemoryManagementActions result;
  KeyExtent extent=new KeyExtent(new Text("2"),new Text("j"),null);
  result=mgr.getMemoryManagementActions(tablets(t(extent,ZERO,ONE_GIG,0),t(k("j"),ZERO,ONE_GIG,0)));
  assertEquals(1,result.tabletsToMinorCompact.size());
  assertEquals(extent,result.tabletsToMinorCompact.get(0));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.TabletResourceManagerTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConstruction(){
  assertEquals(extent,trm.getExtent());
  assertEquals(conf,trm.getTableConfiguration());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.compaction.DefaultCompactionStrategyTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCompactionPlan() throws Exception {
  DefaultCompactionStrategy s=new DefaultCompactionStrategy();
  MajorCompactionRequest request=createRequest(MajorCompactionReason.IDLE,"file1",10,"file2",10);
  s.gatherInformation(request);
  CompactionPlan plan=s.getCompactionPlan(request);
  assertTrue(plan.inputFiles.isEmpty());
  request=createRequest(MajorCompactionReason.IDLE,"file1",10,"file2",10,"file3",10);
  s.gatherInformation(request);
  plan=s.getCompactionPlan(request);
  assertEquals(3,plan.inputFiles.size());
  request=createRequest(MajorCompactionReason.USER,"file1",10,"file2",10);
  s.gatherInformation(request);
  plan=s.getCompactionPlan(request);
  assertEquals(2,plan.inputFiles.size());
  request=createRequest(MajorCompactionReason.NORMAL,"file0",100,"file1",10,"file2",10,"file3",10);
  s.gatherInformation(request);
  plan=s.getCompactionPlan(request);
  assertEquals(3,plan.inputFiles.size());
  assertEquals(asStringSet(plan.inputFiles),asSet("file1,file2,file3".split(",")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.compaction.SizeLimitCompactionStrategyTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLimits() throws IOException {
  SizeLimitCompactionStrategy slcs=new SizeLimitCompactionStrategy();
  HashMap<String,String> opts=new HashMap<String,String>();
  opts.put(SizeLimitCompactionStrategy.SIZE_LIMIT_OPT,"1G");
  slcs.init(opts);
  KeyExtent ke=new KeyExtent(new Text("0"),null,null);
  MajorCompactionRequest mcr=new MajorCompactionRequest(ke,MajorCompactionReason.NORMAL,null,AccumuloConfiguration.getDefaultConfiguration());
  mcr.setFiles(nfl("f1","2G","f2","2G","f3","2G","f4","2G"));
  Assert.assertFalse(slcs.shouldCompact(mcr));
  Assert.assertEquals(0,slcs.getCompactionPlan(mcr).inputFiles.size());
  Assert.assertEquals(4,mcr.getFiles().size());
  mcr.setFiles(nfl("f1","2G","f2","2G","f3","2G","f4","2G","f5","500M","f6","500M","f7","500M","f8","500M"));
  Assert.assertTrue(slcs.shouldCompact(mcr));
  Assert.assertEquals(nfl("f5","500M","f6","500M","f7","500M","f8","500M").keySet(),new HashSet<FileRef>(slcs.getCompactionPlan(mcr).inputFiles));
  Assert.assertEquals(8,mcr.getFiles().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.compaction.strategies.ConfigurableCompactionStrategyTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOutputOptions() throws Exception {
  MajorCompactionRequest mcr=new MajorCompactionRequest(new KeyExtent(new Text("1"),null,null),MajorCompactionReason.USER,null,null);
  Map<FileRef,DataFileValue> files=new HashMap<>();
  files.put(new FileRef("hdfs://nn1/accumulo/tables/1/t-009/F00001.rf"),new DataFileValue(50000,400));
  mcr.setFiles(files);
  ConfigurableCompactionStrategy ccs=new ConfigurableCompactionStrategy();
  Map<String,String> opts=new HashMap<>();
  ccs.init(opts);
  CompactionPlan plan=ccs.getCompactionPlan(mcr);
  Assert.assertEquals(0,plan.writeParameters.getBlockSize());
  Assert.assertEquals(0,plan.writeParameters.getHdfsBlockSize());
  Assert.assertEquals(0,plan.writeParameters.getIndexBlockSize());
  Assert.assertEquals(0,plan.writeParameters.getReplication());
  Assert.assertEquals(null,plan.writeParameters.getCompressType());
  ccs=new ConfigurableCompactionStrategy();
  CompactionSettings.OUTPUT_BLOCK_SIZE_OPT.put(opts,"64K");
  CompactionSettings.OUTPUT_COMPRESSION_OPT.put(opts,"snappy");
  CompactionSettings.OUTPUT_HDFS_BLOCK_SIZE_OPT.put(opts,"256M");
  CompactionSettings.OUTPUT_INDEX_BLOCK_SIZE_OPT.put(opts,"32K");
  CompactionSettings.OUTPUT_REPLICATION_OPT.put(opts,"5");
  ccs.init(opts);
  plan=ccs.getCompactionPlan(mcr);
  Assert.assertEquals(AccumuloConfiguration.getMemoryInBytes("64K"),plan.writeParameters.getBlockSize());
  Assert.assertEquals(AccumuloConfiguration.getMemoryInBytes("256M"),plan.writeParameters.getHdfsBlockSize());
  Assert.assertEquals(AccumuloConfiguration.getMemoryInBytes("32K"),plan.writeParameters.getIndexBlockSize());
  Assert.assertEquals(5,plan.writeParameters.getReplication());
  Assert.assertEquals("snappy",plan.writeParameters.getCompressType());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.constraints.ConstraintCheckerTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCheckFailure(){
  expect(extent.contains(anyObject(BinaryComparable.class))).andReturn(true);
  replayAll();
  constraints.add(makeFailureConstraint());
  List<ConstraintViolationSummary> cvsList=cc.check(env,m).asList();
  assertEquals(2,cvsList.size());
  Set<String> violationDescs=new HashSet<>();
  for (  ConstraintViolationSummary cvs : cvsList) {
    violationDescs.add(cvs.getViolationDescription());
  }
  assertEquals(ImmutableSet.of("ViolationCode1","ViolationCode2"),violationDescs);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCheckException(){
  expect(extent.contains(anyObject(BinaryComparable.class))).andReturn(true);
  replayAll();
  constraints.add(makeExceptionConstraint());
  ConstraintViolationSummary cvs=Iterables.getOnlyElement(cc.check(env,m).asList());
  assertEquals("CONSTRAINT FAILED : threw some Exception",cvs.getViolationDescription());
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCheckMutationOutsideKeyExtent(){
  expect(extent.contains(anyObject(BinaryComparable.class))).andReturn(false);
  replayAll();
  ConstraintViolationSummary cvs=Iterables.getOnlyElement(cc.check(env,m).asList());
  assertEquals(SystemConstraint.class.getName(),cvs.getConstrainClass());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.log.DfsLoggerTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDurabilityForGroupCommit(){
  List<TabletMutations> lst=new ArrayList<TabletMutations>();
  assertEquals(Durability.NONE,DfsLogger.chooseDurabilityForGroupCommit(lst));
  TabletMutations m1=new TabletMutations(0,1,Collections.<Mutation>emptyList(),Durability.NONE);
  lst.add(m1);
  assertEquals(Durability.NONE,DfsLogger.chooseDurabilityForGroupCommit(lst));
  TabletMutations m2=new TabletMutations(0,1,Collections.<Mutation>emptyList(),Durability.LOG);
  lst.add(m2);
  assertEquals(Durability.LOG,DfsLogger.chooseDurabilityForGroupCommit(lst));
  TabletMutations m3=new TabletMutations(0,1,Collections.<Mutation>emptyList(),Durability.NONE);
  lst.add(m3);
  assertEquals(Durability.LOG,DfsLogger.chooseDurabilityForGroupCommit(lst));
  TabletMutations m4=new TabletMutations(0,1,Collections.<Mutation>emptyList(),Durability.FLUSH);
  lst.add(m4);
  assertEquals(Durability.FLUSH,DfsLogger.chooseDurabilityForGroupCommit(lst));
  TabletMutations m5=new TabletMutations(0,1,Collections.<Mutation>emptyList(),Durability.LOG);
  lst.add(m5);
  assertEquals(Durability.FLUSH,DfsLogger.chooseDurabilityForGroupCommit(lst));
  TabletMutations m6=new TabletMutations(0,1,Collections.<Mutation>emptyList(),Durability.SYNC);
  lst.add(m6);
  assertEquals(Durability.SYNC,DfsLogger.chooseDurabilityForGroupCommit(lst));
  TabletMutations m7=new TabletMutations(0,1,Collections.<Mutation>emptyList(),Durability.FLUSH);
  lst.add(m7);
  assertEquals(Durability.SYNC,DfsLogger.chooseDurabilityForGroupCommit(lst));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.log.LocalWALRecoveryTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRecoverLocalWriteAheadLogs() throws IOException {
  Path targetPath=new Path(walTarget.toURI());
  FileSystem fs=FileSystem.get(targetPath.toUri(),new Configuration());
  recovery.recoverLocalWriteAheadLogs(fs);
  FileStatus[] recovered=fs.listStatus(targetPath);
  assertEquals("Wrong number of WAL files recovered.",1,recovered.length);
  final Path path=recovered[0].getPath();
  final VolumeManager volumeManager=VolumeManagerImpl.getLocal(folder.getRoot().getAbsolutePath());
  final DFSLoggerInputStreams streams=DfsLogger.readHeaderAndReturnStream(volumeManager,path,configuration);
  final DataInputStream input=streams.getDecryptingInputStream();
  final LogFileKey key=new LogFileKey();
  final LogFileValue value=new LogFileValue();
  int read=0;
  while (true) {
    try {
      key.readFields(input);
      value.readFields(input);
      read++;
    }
 catch (    EOFException ex) {
      break;
    }
  }
  assertEquals(104,read);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.log.LogEntryTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
  KeyExtent extent=new KeyExtent(new Text("1"),null,new Text(""));
  long ts=12345678L;
  String server="localhost:1234";
  String filename="default/foo";
  LogEntry entry=new LogEntry(extent,ts,server,filename);
  assertEquals(extent,entry.extent);
  assertEquals(server,entry.server);
  assertEquals(filename,entry.filename);
  assertEquals(ts,entry.timestamp);
  assertEquals("1<; default/foo",entry.toString());
  assertEquals(new Text("log"),entry.getColumnFamily());
  assertEquals(new Text("localhost:1234/default/foo"),entry.getColumnQualifier());
  LogEntry copy=LogEntry.fromBytes(entry.toBytes());
  assertEquals(entry.toString(),copy.toString());
  Key key=new Key(new Text("1<"),new Text("log"),new Text("localhost:1234/default/foo"));
  key.setTimestamp(ts);
  LogEntry copy2=LogEntry.fromKeyValue(key,entry.getValue());
  assertEquals(entry.toString(),copy2.toString());
  assertEquals(entry.timestamp,copy2.timestamp);
  assertEquals("foo",entry.getUniqueID());
  assertEquals("localhost:1234/default/foo",entry.getName());
  assertEquals(new Value("default/foo".getBytes()),entry.getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.log.MultiReaderTest </h4><pre class="type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiReader() throws IOException {
  Path manyMaps=new Path("file://" + root.getRoot().getAbsolutePath() + "/manyMaps");
  MultiReader reader=new MultiReader(fs,manyMaps);
  IntWritable key=new IntWritable();
  BytesWritable value=new BytesWritable();
  for (int i=0; i < 1000; i++) {
    if (i == 10)     continue;
    assertTrue(reader.next(key,value));
    assertEquals(i,key.get());
  }
  assertEquals(value.compareTo(new BytesWritable("someValue".getBytes())),0);
  assertFalse(reader.next(key,value));
  key.set(500);
  assertTrue(reader.seek(key));
  scan(reader,500);
  key.set(10);
  assertFalse(reader.seek(key));
  scan(reader,10);
  key.set(1000);
  assertFalse(reader.seek(key));
  assertFalse(reader.next(key,value));
  key.set(-1);
  assertFalse(reader.seek(key));
  key.set(0);
  assertTrue(reader.next(key,value));
  assertEquals(0,key.get());
  reader.close();
  fs.deleteRecursively(new Path(manyMaps,"even"));
  reader=new MultiReader(fs,manyMaps);
  key.set(501);
  assertTrue(reader.seek(key));
  scanOdd(reader,501);
  key.set(1000);
  assertFalse(reader.seek(key));
  assertFalse(reader.next(key,value));
  key.set(-1);
  assertFalse(reader.seek(key));
  key.set(1);
  assertTrue(reader.next(key,value));
  assertEquals(1,key.get());
  reader.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.log.SortedLogRecoveryTest </h4><pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetMutationsAfterCompactionStart() throws IOException {
  Mutation ignored=new ServerMutation(new Text("ignored"));
  ignored.put(cf,cq,value);
  Mutation m=new ServerMutation(new Text("row1"));
  m.put(cf,cq,value);
  Mutation m2=new ServerMutation(new Text("row2"));
  m2.put(cf,cq,new Value("123".getBytes()));
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,3,1,"/t1/f1"),createKeyValue(MUTATION,2,1,ignored),createKeyValue(MUTATION,4,1,m)};
  KeyValue entries2[]=new KeyValue[]{createKeyValue(OPEN,5,-1,"1"),createKeyValue(DEFINE_TABLET,6,1,extent),createKeyValue(COMPACTION_FINISH,7,1,null),createKeyValue(MUTATION,8,1,m2)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  logs.put("entries2",entries2);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(2,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
  Assert.assertEquals(m2,mutations.get(1));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompactionCrossesLogs6() throws IOException {
  Mutation ignored=new ServerMutation(new Text("ignored"));
  ignored.put(cf,cq,value);
  Mutation m=new ServerMutation(new Text("row1"));
  m.put(cf,cq,value);
  Mutation m2=new ServerMutation(new Text("row2"));
  m2.put(cf,cq,value);
  Mutation m3=new ServerMutation(new Text("row3"));
  m3.put(cf,cq,value);
  Mutation m4=new ServerMutation(new Text("row4"));
  m4.put(cf,cq,value);
  Mutation m5=new ServerMutation(new Text("row5"));
  m5.put(cf,cq,value);
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,1,"2"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(MUTATION,1,1,ignored),createKeyValue(MUTATION,3,1,m)};
  KeyValue entries2[]=new KeyValue[]{createKeyValue(OPEN,0,1,"2"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,2,1,"/t1/f1"),createKeyValue(COMPACTION_FINISH,3,1,"/t1/f1"),createKeyValue(MUTATION,3,1,m2)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  logs.put("entries2",entries2);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(2,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
  Assert.assertEquals(m2,mutations.get(1));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompactionCrossesLogs2() throws IOException {
  Mutation ignored=new ServerMutation(new Text("ignored"));
  ignored.put(cf,cq,value);
  Mutation m=new ServerMutation(new Text("row1"));
  m.put(cf,cq,value);
  Mutation m2=new ServerMutation(new Text("row2"));
  m2.put(cf,cq,value);
  Mutation m3=new ServerMutation(new Text("row3"));
  m3.put(cf,cq,value);
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,3,1,"/t1/f1"),createKeyValue(MUTATION,2,1,ignored),createKeyValue(MUTATION,4,1,m)};
  KeyValue entries2[]=new KeyValue[]{createKeyValue(OPEN,5,-1,"1"),createKeyValue(DEFINE_TABLET,6,1,extent),createKeyValue(MUTATION,7,1,m2)};
  KeyValue entries3[]=new KeyValue[]{createKeyValue(OPEN,8,-1,"1"),createKeyValue(DEFINE_TABLET,9,1,extent),createKeyValue(COMPACTION_FINISH,10,1,null),createKeyValue(MUTATION,11,1,m3)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  logs.put("entries2",entries2);
  logs.put("entries3",entries3);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(3,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
  Assert.assertEquals(m2,mutations.get(1));
  Assert.assertEquals(m3,mutations.get(2));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSkipSuccessfulCompactionAcrossFiles() throws IOException {
  Mutation ignored=new ServerMutation(new Text("ignored"));
  ignored.put(cf,cq,value);
  Mutation m=new ServerMutation(new Text("row1"));
  m.put(cf,cq,value);
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,3,1,"/t1/f1"),createKeyValue(MUTATION,2,1,ignored)};
  KeyValue entries2[]=new KeyValue[]{createKeyValue(OPEN,4,-1,"1"),createKeyValue(DEFINE_TABLET,5,1,extent),createKeyValue(COMPACTION_FINISH,6,1,null),createKeyValue(MUTATION,7,1,m)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  logs.put("entries2",entries2);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(1,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompactionCrossesLogs5() throws IOException {
  Mutation ignored=new ServerMutation(new Text("ignored"));
  ignored.put(cf,cq,value);
  Mutation m=new ServerMutation(new Text("row1"));
  m.put(cf,cq,value);
  Mutation m2=new ServerMutation(new Text("row2"));
  m2.put(cf,cq,value);
  Mutation m3=new ServerMutation(new Text("row3"));
  m3.put(cf,cq,value);
  Mutation m4=new ServerMutation(new Text("row4"));
  m4.put(cf,cq,value);
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,3,1,"/t1/f1"),createKeyValue(MUTATION,2,1,ignored),createKeyValue(MUTATION,4,1,ignored)};
  KeyValue entries2[]=new KeyValue[]{createKeyValue(OPEN,5,-1,"2"),createKeyValue(DEFINE_TABLET,6,1,extent),createKeyValue(MUTATION,7,1,ignored)};
  KeyValue entries3[]=new KeyValue[]{createKeyValue(OPEN,8,-1,"3"),createKeyValue(DEFINE_TABLET,9,1,extent),createKeyValue(COMPACTION_FINISH,10,1,"/t1/f1"),createKeyValue(COMPACTION_START,12,1,"/t1/f2"),createKeyValue(COMPACTION_FINISH,13,1,"/t1/f2"),createKeyValue(MUTATION,11,1,ignored),createKeyValue(MUTATION,15,1,m),createKeyValue(MUTATION,16,1,m2)};
  KeyValue entries4[]=new KeyValue[]{createKeyValue(OPEN,17,-1,"4"),createKeyValue(DEFINE_TABLET,18,1,extent),createKeyValue(COMPACTION_START,20,1,"/t1/f3"),createKeyValue(MUTATION,19,1,m3),createKeyValue(MUTATION,21,1,m4)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  logs.put("entries2",entries2);
  logs.put("entries3",entries3);
  logs.put("entries4",entries4);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(4,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
  Assert.assertEquals(m2,mutations.get(1));
  Assert.assertEquals(m3,mutations.get(2));
  Assert.assertEquals(m4,mutations.get(3));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSkipSuccessfulCompaction() throws IOException {
  Mutation ignored=new ServerMutation(new Text("ignored"));
  ignored.put(cf,cq,value);
  Mutation m=new ServerMutation(new Text("row1"));
  m.put(cf,cq,value);
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,3,1,"/t1/f1"),createKeyValue(COMPACTION_FINISH,4,1,null),createKeyValue(MUTATION,2,1,ignored),createKeyValue(MUTATION,5,1,m)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("testlog",entries);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(1,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLookingForBug3() throws IOException {
  Mutation ignored=new ServerMutation(new Text("ignored"));
  ignored.put(cf,cq,value);
  Mutation m=new ServerMutation(new Text("row1"));
  m.put(cf,cq,value);
  Mutation m2=new ServerMutation(new Text("row2"));
  m2.put(cf,cq,value);
  Mutation m3=new ServerMutation(new Text("row3"));
  m3.put(cf,cq,value);
  Mutation m4=new ServerMutation(new Text("row4"));
  m4.put(cf,cq,value);
  Mutation m5=new ServerMutation(new Text("row5"));
  m5.put(cf,cq,value);
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,2,1,"/t1/f1"),createKeyValue(COMPACTION_FINISH,3,1,null),createKeyValue(MUTATION,1,1,ignored),createKeyValue(MUTATION,3,1,m),createKeyValue(MUTATION,3,1,m2),createKeyValue(MUTATION,3,1,m3)};
  KeyValue entries2[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"2"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,2,1,"/t1/f12"),createKeyValue(MUTATION,3,1,m4),createKeyValue(MUTATION,3,1,m5)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  logs.put("entries2",entries2);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(5,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
  Assert.assertEquals(m2,mutations.get(1));
  Assert.assertEquals(m3,mutations.get(2));
  Assert.assertEquals(m4,mutations.get(3));
  Assert.assertEquals(m5,mutations.get(4));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBug2() throws IOException {
  Mutation ignored=new ServerMutation(new Text("ignored"));
  ignored.put(cf,cq,value);
  Mutation m=new ServerMutation(new Text("row1"));
  m.put(cf,cq,value);
  Mutation m2=new ServerMutation(new Text("row2"));
  m2.put(cf,cq,value);
  Mutation m3=new ServerMutation(new Text("row3"));
  m3.put(cf,cq,value);
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,2,1,"/t1/f1"),createKeyValue(COMPACTION_FINISH,4,1,null),createKeyValue(MUTATION,3,1,m)};
  KeyValue entries2[]=new KeyValue[]{createKeyValue(OPEN,5,-1,"1"),createKeyValue(DEFINE_TABLET,6,1,extent),createKeyValue(COMPACTION_START,8,1,"/t1/f1"),createKeyValue(MUTATION,7,1,m2),createKeyValue(MUTATION,9,1,m3)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  logs.put("entries2",entries2);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(3,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
  Assert.assertEquals(m2,mutations.get(1));
  Assert.assertEquals(m3,mutations.get(2));
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoFinish0() throws Exception {
  Mutation ignored=new ServerMutation(new Text("row1"));
  ignored.put("foo","bar","v1");
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,2,extent),createKeyValue(MUTATION,2,2,ignored),createKeyValue(COMPACTION_START,3,2,"/t/f1")};
  Arrays.sort(entries);
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  List<Mutation> mutations=recover(logs,Collections.singleton("/t/f1"),extent);
  Assert.assertEquals(0,mutations.size());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompactionCrossesLogs() throws IOException {
  Mutation ignored=new ServerMutation(new Text("ignored"));
  ignored.put(cf,cq,value);
  Mutation m=new ServerMutation(new Text("row1"));
  m.put(cf,cq,value);
  Mutation m2=new ServerMutation(new Text("row2"));
  m2.put(cf,cq,value);
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,1,"2"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,3,1,"/t1/f1"),createKeyValue(MUTATION,2,1,ignored),createKeyValue(MUTATION,4,1,ignored)};
  KeyValue entries2[]=new KeyValue[]{createKeyValue(OPEN,0,1,"2"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,4,1,"/t1/f1"),createKeyValue(MUTATION,7,1,m)};
  KeyValue entries3[]=new KeyValue[]{createKeyValue(OPEN,0,2,"23"),createKeyValue(DEFINE_TABLET,1,2,extent),createKeyValue(COMPACTION_START,5,2,"/t1/f2"),createKeyValue(COMPACTION_FINISH,6,2,null),createKeyValue(MUTATION,3,2,ignored),createKeyValue(MUTATION,4,2,ignored)};
  KeyValue entries4[]=new KeyValue[]{createKeyValue(OPEN,0,3,"69"),createKeyValue(DEFINE_TABLET,1,3,extent),createKeyValue(MUTATION,2,3,ignored),createKeyValue(MUTATION,3,3,ignored),createKeyValue(MUTATION,4,3,ignored)};
  KeyValue entries5[]=new KeyValue[]{createKeyValue(OPEN,0,4,"70"),createKeyValue(DEFINE_TABLET,1,4,extent),createKeyValue(COMPACTION_START,3,4,"/t1/f3"),createKeyValue(MUTATION,2,4,ignored),createKeyValue(MUTATION,6,4,m2)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  logs.put("entries2",entries2);
  logs.put("entries3",entries3);
  logs.put("entries4",entries4);
  logs.put("entries5",entries5);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(2,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
  Assert.assertEquals(m2,mutations.get(1));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDoubleFinish() throws IOException {
  Mutation ignored=new ServerMutation(new Text("ignored"));
  ignored.put(cf,cq,value);
  Mutation m=new ServerMutation(new Text("row1"));
  m.put(cf,cq,value);
  Mutation m2=new ServerMutation(new Text("row2"));
  m2.put(cf,cq,new Value("123".getBytes()));
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_FINISH,2,1,null),createKeyValue(COMPACTION_START,4,1,"/t1/f1"),createKeyValue(COMPACTION_FINISH,6,1,null),createKeyValue(MUTATION,3,1,ignored),createKeyValue(MUTATION,5,1,m),createKeyValue(MUTATION,7,1,m2)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(2,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
  Assert.assertEquals(m2,mutations.get(1));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompactionCrossesLogs4() throws IOException {
  Mutation ignored=new ServerMutation(new Text("ignored"));
  ignored.put(cf,cq,value);
  Mutation m=new ServerMutation(new Text("row1"));
  m.put(cf,cq,value);
  Mutation m2=new ServerMutation(new Text("row2"));
  m2.put(cf,cq,value);
  Mutation m3=new ServerMutation(new Text("row3"));
  m3.put(cf,cq,value);
  Mutation m4=new ServerMutation(new Text("row4"));
  m4.put(cf,cq,value);
  Mutation m5=new ServerMutation(new Text("row5"));
  m5.put(cf,cq,value);
  Mutation m6=new ServerMutation(new Text("row6"));
  m6.put(cf,cq,value);
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,4,1,"/t1/f1"),createKeyValue(MUTATION,2,1,m),createKeyValue(MUTATION,3,1,m2)};
  KeyValue entries2[]=new KeyValue[]{createKeyValue(OPEN,5,-1,"2"),createKeyValue(DEFINE_TABLET,6,1,extent),createKeyValue(MUTATION,7,1,m3),createKeyValue(MUTATION,8,1,m4)};
  KeyValue entries3[]=new KeyValue[]{createKeyValue(OPEN,9,-1,"3"),createKeyValue(DEFINE_TABLET,10,1,extent),createKeyValue(COMPACTION_START,12,1,"/t1/f1"),createKeyValue(MUTATION,8,1,m5),createKeyValue(MUTATION,20,1,m6)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  logs.put("entries2",entries2);
  logs.put("entries3",entries3);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(6,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
  Assert.assertEquals(m2,mutations.get(1));
  Assert.assertEquals(m3,mutations.get(2));
  Assert.assertEquals(m4,mutations.get(3));
  Assert.assertEquals(m5,mutations.get(4));
  Assert.assertEquals(m6,mutations.get(5));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMultipleTabletDefinition() throws Exception {
  Mutation ignored=new ServerMutation(new Text("row1"));
  ignored.put("foo","bar","v1");
  Mutation m=new ServerMutation(new Text("row1"));
  m.put("foo","bar","v1");
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(DEFINE_TABLET,1,2,extent),createKeyValue(MUTATION,2,2,ignored),createKeyValue(COMPACTION_START,3,2,"/t1/f1"),createKeyValue(MUTATION,4,2,m),createKeyValue(COMPACTION_FINISH,6,2,null)};
  Arrays.sort(entries);
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(1,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBug1() throws IOException {
  Mutation m1=new ServerMutation(new Text("row1"));
  m1.put(cf,cq,value);
  Mutation m2=new ServerMutation(new Text("row2"));
  m2.put(cf,cq,value);
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(COMPACTION_START,30,1,"/t1/f1"),createKeyValue(COMPACTION_FINISH,32,1,"/t1/f1"),createKeyValue(MUTATION,29,1,m1),createKeyValue(MUTATION,30,1,m2)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("testlog",entries);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(0,mutations.size());
}

</code></pre>

<br>
<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEmpty() throws IOException {
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("testlog",entries);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(0,mutations.size());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimple() throws IOException {
  Mutation m=new ServerMutation(new Text("row1"));
  m.put(cf,cq,value);
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,1,extent),createKeyValue(MUTATION,2,1,m)};
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("testlog",entries);
  List<Mutation> mutations=recover(logs,extent);
  Assert.assertEquals(1,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testNoFinish1() throws Exception {
  Mutation ignored=new ServerMutation(new Text("row1"));
  ignored.put("foo","bar","v1");
  Mutation m=new ServerMutation(new Text("row1"));
  m.put("foo","bar","v2");
  KeyValue entries[]=new KeyValue[]{createKeyValue(OPEN,0,-1,"1"),createKeyValue(DEFINE_TABLET,1,2,extent),createKeyValue(MUTATION,2,2,ignored),createKeyValue(COMPACTION_START,3,2,"/t/f1"),createKeyValue(MUTATION,4,2,m)};
  Arrays.sort(entries);
  Map<String,KeyValue[]> logs=new TreeMap<String,KeyValue[]>();
  logs.put("entries",entries);
  List<Mutation> mutations=recover(logs,Collections.singleton("/t/f1"),extent);
  Assert.assertEquals(1,mutations.size());
  Assert.assertEquals(m,mutations.get(0));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.logger.LogFileTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadFields() throws IOException {
  LogFileKey key=new LogFileKey();
  LogFileValue value=new LogFileValue();
  key.tserverSession="";
  readWrite(OPEN,-1,-1,null,null,null,key,value);
  assertEquals(key.event,OPEN);
  readWrite(COMPACTION_FINISH,1,2,null,null,null,key,value);
  assertEquals(key.event,COMPACTION_FINISH);
  assertEquals(key.seq,1);
  assertEquals(key.tid,2);
  readWrite(COMPACTION_START,3,4,"some file",null,null,key,value);
  assertEquals(key.event,COMPACTION_START);
  assertEquals(key.seq,3);
  assertEquals(key.tid,4);
  assertEquals(key.filename,"some file");
  KeyExtent tablet=new KeyExtent(new Text("table"),new Text("bbbb"),new Text("aaaa"));
  readWrite(DEFINE_TABLET,5,6,null,tablet,null,key,value);
  assertEquals(key.event,DEFINE_TABLET);
  assertEquals(key.seq,5);
  assertEquals(key.tid,6);
  assertEquals(key.tablet,tablet);
  Mutation m=new ServerMutation(new Text("row"));
  m.put(new Text("cf"),new Text("cq"),new Value("value".getBytes()));
  readWrite(MUTATION,7,8,null,null,new Mutation[]{m},key,value);
  assertEquals(key.event,MUTATION);
  assertEquals(key.seq,7);
  assertEquals(key.tid,8);
  assertEquals(value.mutations,Arrays.asList(m));
  m=new ServerMutation(new Text("row"));
  m.put(new Text("cf"),new Text("cq"),new ColumnVisibility("vis"),12345,new Value("value".getBytes()));
  m.put(new Text("cf"),new Text("cq"),new ColumnVisibility("vis2"),new Value("value".getBytes()));
  m.putDelete(new Text("cf"),new Text("cq"),new ColumnVisibility("vis2"));
  readWrite(MUTATION,8,9,null,null,new Mutation[]{m},key,value);
  assertEquals(key.event,MUTATION);
  assertEquals(key.seq,8);
  assertEquals(key.tid,9);
  assertEquals(value.mutations,Arrays.asList(m));
  readWrite(MANY_MUTATIONS,9,10,null,null,new Mutation[]{m,m},key,value);
  assertEquals(key.event,MANY_MUTATIONS);
  assertEquals(key.seq,9);
  assertEquals(key.tid,10);
  assertEquals(value.mutations,Arrays.asList(m,m));
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEventType(){
  assertEquals(LogFileKey.eventType(MUTATION),LogFileKey.eventType(MANY_MUTATIONS));
  assertEquals(LogFileKey.eventType(COMPACTION_START),LogFileKey.eventType(COMPACTION_FINISH));
  assertTrue(LogFileKey.eventType(DEFINE_TABLET) < LogFileKey.eventType(COMPACTION_FINISH));
  assertTrue(LogFileKey.eventType(COMPACTION_FINISH) < LogFileKey.eventType(MUTATION));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.replication.AccumuloReplicaSystemTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void endOfFileExceptionOnOpenWalImpliesMoreReplication() throws Exception {
  Map<String,String> confMap=new HashMap<>();
  confMap.put(Property.REPLICATION_NAME.getKey(),"source");
  AccumuloConfiguration conf=new ConfigurationCopy(confMap);
  AccumuloReplicaSystem ars=new AccumuloReplicaSystem();
  ars.setConf(conf);
  Status status=Status.newBuilder().setBegin(100).setEnd(0).setInfiniteEnd(true).setClosed(false).build();
  DataInputStream dis=new DataInputStream(new ByteArrayInputStream(new byte[0]));
  WalReplication repl=ars.getWalEdits(new ReplicationTarget("peer","1","1"),dis,new Path("/accumulo/wals/tserver+port/wal"),status,Long.MAX_VALUE,new HashSet<Integer>());
  Assert.assertEquals(0,repl.entriesConsumed);
  Assert.assertEquals(0,repl.walEdits.getEditsSize());
  Assert.assertEquals(0,repl.sizeInRecords);
  Assert.assertEquals(0,repl.sizeInBytes);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserKeytab() throws Exception {
  AccumuloReplicaSystem ars=new AccumuloReplicaSystem();
  ReplicationTarget target=new ReplicationTarget("peer","peer_table","1");
  String user="user", keytab="/etc/security/keytabs/replication.keytab";
  Map<String,String> confMap=new HashMap<>();
  confMap.put(Property.REPLICATION_PEER_USER.getKey() + target.getPeerName(),user);
  confMap.put(Property.REPLICATION_PEER_KEYTAB.getKey() + target.getPeerName(),keytab);
  AccumuloConfiguration conf=new ConfigurationCopy(confMap);
  assertEquals(user,ars.getPrincipal(conf,target));
  assertEquals(keytab,ars.getKeytab(conf,target));
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUserPassword() throws Exception {
  AccumuloReplicaSystem ars=new AccumuloReplicaSystem();
  ReplicationTarget target=new ReplicationTarget("peer","peer_table","1");
  String user="user", password="password";
  Map<String,String> confMap=new HashMap<>();
  confMap.put(Property.REPLICATION_PEER_USER.getKey() + target.getPeerName(),user);
  confMap.put(Property.REPLICATION_PEER_PASSWORD.getKey() + target.getPeerName(),password);
  AccumuloConfiguration conf=new ConfigurationCopy(confMap);
  assertEquals(user,ars.getPrincipal(conf,target));
  assertEquals(password,ars.getPassword(conf,target));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void restartInFileKnowsAboutPreviousTableDefines() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  LogFileKey key=new LogFileKey();
  LogFileValue value=new LogFileValue();
  key.seq=1l;
  key.event=LogEvents.DEFINE_TABLET;
  key.tablet=new KeyExtent(new Text("1"),null,null);
  key.tid=1;
  key.write(dos);
  value.write(dos);
  key.tablet=null;
  key.event=LogEvents.MUTATION;
  key.filename="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  value.mutations=Arrays.<Mutation>asList(new ServerMutation(new Text("row")));
  key.write(dos);
  value.write(dos);
  key.tablet=null;
  key.event=LogEvents.MUTATION;
  key.tid=1;
  key.filename="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  value.mutations=Arrays.<Mutation>asList(new ServerMutation(new Text("row")));
  key.write(dos);
  value.write(dos);
  dos.close();
  Map<String,String> confMap=new HashMap<>();
  confMap.put(Property.REPLICATION_NAME.getKey(),"source");
  AccumuloConfiguration conf=new ConfigurationCopy(confMap);
  AccumuloReplicaSystem ars=new AccumuloReplicaSystem();
  ars.setConf(conf);
  Status status=Status.newBuilder().setBegin(0).setEnd(0).setInfiniteEnd(true).setClosed(false).build();
  DataInputStream dis=new DataInputStream(new ByteArrayInputStream(baos.toByteArray()));
  HashSet<Integer> tids=new HashSet<>();
  WalReplication repl=ars.getWalEdits(new ReplicationTarget("peer","1","1"),dis,new Path("/accumulo/wals/tserver+port/wal"),status,1l,tids);
  Assert.assertEquals(2,repl.entriesConsumed);
  Assert.assertEquals(1,repl.walEdits.getEditsSize());
  Assert.assertEquals(1,repl.sizeInRecords);
  Assert.assertNotEquals(0,repl.sizeInBytes);
  status=Status.newBuilder(status).setBegin(2).build();
  repl=ars.getWalEdits(new ReplicationTarget("peer","1","1"),dis,new Path("/accumulo/wals/tserver+port/wal"),status,1l,tids);
  Assert.assertEquals(1,repl.entriesConsumed);
  Assert.assertEquals(1,repl.walEdits.getEditsSize());
  Assert.assertEquals(1,repl.sizeInRecords);
  Assert.assertNotEquals(0,repl.sizeInBytes);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void dontSendEmptyDataToPeer() throws Exception {
  Client replClient=createMock(Client.class);
  AccumuloReplicaSystem ars=createMock(AccumuloReplicaSystem.class);
  WalEdits edits=new WalEdits(Collections.<ByteBuffer>emptyList());
  WalReplication walReplication=new WalReplication(edits,0,0,0);
  ReplicationTarget target=new ReplicationTarget("peer","2","1");
  DataInputStream input=null;
  Path p=new Path("/accumulo/wals/tserver+port/" + UUID.randomUUID().toString());
  Status status=null;
  long sizeLimit=Long.MAX_VALUE;
  String remoteTableId=target.getRemoteIdentifier();
  TCredentials tcreds=null;
  Set<Integer> tids=new HashSet<>();
  WalClientExecReturn walClientExec=ars.new WalClientExecReturn(target,input,p,status,sizeLimit,remoteTableId,tcreds,tids);
  expect(ars.getWalEdits(target,input,p,status,sizeLimit,tids)).andReturn(walReplication);
  replay(replClient,ars);
  ReplicationStats stats=walClientExec.execute(replClient);
  verify(replClient,ars);
  Assert.assertEquals(new ReplicationStats(0l,0l,0l),stats);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void consumedButNotSentDataShouldBeRecorded() throws Exception {
  Client replClient=createMock(Client.class);
  AccumuloReplicaSystem ars=createMock(AccumuloReplicaSystem.class);
  WalEdits edits=new WalEdits(Collections.<ByteBuffer>emptyList());
  WalReplication walReplication=new WalReplication(edits,0,5,0);
  ReplicationTarget target=new ReplicationTarget("peer","2","1");
  DataInputStream input=null;
  Path p=new Path("/accumulo/wals/tserver+port/" + UUID.randomUUID().toString());
  Status status=null;
  long sizeLimit=Long.MAX_VALUE;
  String remoteTableId=target.getRemoteIdentifier();
  TCredentials tcreds=null;
  Set<Integer> tids=new HashSet<>();
  WalClientExecReturn walClientExec=ars.new WalClientExecReturn(target,input,p,status,sizeLimit,remoteTableId,tcreds,tids);
  expect(ars.getWalEdits(target,input,p,status,sizeLimit,tids)).andReturn(walReplication);
  replay(replClient,ars);
  ReplicationStats stats=walClientExec.execute(replClient);
  verify(replClient,ars);
  Assert.assertEquals(new ReplicationStats(0l,0l,5l),stats);
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void endOfFileExceptionOnClosedWalImpliesFullyReplicated() throws Exception {
  Map<String,String> confMap=new HashMap<>();
  confMap.put(Property.REPLICATION_NAME.getKey(),"source");
  AccumuloConfiguration conf=new ConfigurationCopy(confMap);
  AccumuloReplicaSystem ars=new AccumuloReplicaSystem();
  ars.setConf(conf);
  Status status=Status.newBuilder().setBegin(100).setEnd(0).setInfiniteEnd(true).setClosed(true).build();
  DataInputStream dis=new DataInputStream(new ByteArrayInputStream(new byte[0]));
  WalReplication repl=ars.getWalEdits(new ReplicationTarget("peer","1","1"),dis,new Path("/accumulo/wals/tserver+port/wal"),status,Long.MAX_VALUE,new HashSet<Integer>());
  Assert.assertEquals(Long.MAX_VALUE,repl.entriesConsumed);
  Assert.assertEquals(0,repl.walEdits.getEditsSize());
  Assert.assertEquals(0,repl.sizeInRecords);
  Assert.assertEquals(0,repl.sizeInBytes);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mutationsNotReReplicatedToPeers() throws Exception {
  AccumuloReplicaSystem ars=new AccumuloReplicaSystem();
  Map<String,String> confMap=new HashMap<>();
  confMap.put(Property.REPLICATION_NAME.getKey(),"source");
  AccumuloConfiguration conf=new ConfigurationCopy(confMap);
  ars.setConf(conf);
  LogFileValue value=new LogFileValue();
  value.mutations=new ArrayList<>();
  Mutation m=new Mutation("row");
  m.put("","",new Value(new byte[0]));
  value.mutations.add(m);
  m=new Mutation("row2");
  m.put("","",new Value(new byte[0]));
  m.addReplicationSource("peer");
  value.mutations.add(m);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(baos);
  ars.writeValueAvoidingReplicationCycles(out,value,new ReplicationTarget("peer","1","1"));
  out.close();
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream in=new DataInputStream(bais);
  int numMutations=in.readInt();
  Assert.assertEquals(1,numMutations);
  m=new Mutation();
  m.readFields(in);
  Assert.assertEquals("row",new String(m.getRow()));
  Assert.assertEquals(1,m.getReplicationSources().size());
  Assert.assertTrue("Expected source cluster to be listed in mutation replication source",m.getReplicationSources().contains("source"));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void onlyChooseMutationsForDesiredTableWithClosedStatus() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  LogFileKey key=new LogFileKey();
  LogFileValue value=new LogFileValue();
  key.seq=1l;
  key.event=LogEvents.DEFINE_TABLET;
  key.tablet=new KeyExtent(new Text("1"),null,null);
  key.tid=1;
  key.write(dos);
  value.write(dos);
  key.tablet=null;
  key.event=LogEvents.MUTATION;
  key.filename="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  value.mutations=Arrays.<Mutation>asList(new ServerMutation(new Text("row")));
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.DEFINE_TABLET;
  key.tablet=new KeyExtent(new Text("2"),null,null);
  key.tid=2;
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.OPEN;
  key.tid=LogFileKey.VERSION;
  key.tserverSession="foobar";
  key.write(dos);
  value.write(dos);
  key.tablet=null;
  key.event=LogEvents.MUTATION;
  key.filename="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  value.mutations=Arrays.<Mutation>asList(new ServerMutation(new Text("badrow")));
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.COMPACTION_START;
  key.tid=2;
  key.filename="/accumulo/tables/1/t-000001/A000001.rf";
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.DEFINE_TABLET;
  key.tablet=new KeyExtent(new Text("1"),null,null);
  key.tid=3;
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.COMPACTION_FINISH;
  key.tid=6;
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  key.tablet=null;
  key.event=LogEvents.MUTATION;
  key.tid=3;
  key.filename="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  value.mutations=Arrays.<Mutation>asList(new ServerMutation(new Text("row")));
  key.write(dos);
  value.write(dos);
  dos.close();
  Map<String,String> confMap=new HashMap<>();
  confMap.put(Property.REPLICATION_NAME.getKey(),"source");
  AccumuloConfiguration conf=new ConfigurationCopy(confMap);
  AccumuloReplicaSystem ars=new AccumuloReplicaSystem();
  ars.setConf(conf);
  Status status=Status.newBuilder().setBegin(0).setEnd(0).setInfiniteEnd(true).setClosed(true).build();
  DataInputStream dis=new DataInputStream(new ByteArrayInputStream(baos.toByteArray()));
  WalReplication repl=ars.getWalEdits(new ReplicationTarget("peer","1","1"),dis,new Path("/accumulo/wals/tserver+port/wal"),status,Long.MAX_VALUE,new HashSet<Integer>());
  Assert.assertEquals(Long.MAX_VALUE,repl.entriesConsumed);
  Assert.assertEquals(2,repl.walEdits.getEditsSize());
  Assert.assertEquals(2,repl.sizeInRecords);
  Assert.assertNotEquals(0,repl.sizeInBytes);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void onlyChooseMutationsForDesiredTableWithOpenStatus() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  LogFileKey key=new LogFileKey();
  LogFileValue value=new LogFileValue();
  key.seq=1l;
  key.event=LogEvents.DEFINE_TABLET;
  key.tablet=new KeyExtent(new Text("1"),null,null);
  key.tid=1;
  key.write(dos);
  value.write(dos);
  key.tablet=null;
  key.event=LogEvents.MUTATION;
  key.filename="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  value.mutations=Arrays.<Mutation>asList(new ServerMutation(new Text("row")));
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.DEFINE_TABLET;
  key.tablet=new KeyExtent(new Text("2"),null,null);
  key.tid=2;
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.OPEN;
  key.tid=LogFileKey.VERSION;
  key.tserverSession="foobar";
  key.write(dos);
  value.write(dos);
  key.tablet=null;
  key.event=LogEvents.MUTATION;
  key.filename="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  value.mutations=Arrays.<Mutation>asList(new ServerMutation(new Text("badrow")));
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.COMPACTION_START;
  key.tid=2;
  key.filename="/accumulo/tables/1/t-000001/A000001.rf";
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.DEFINE_TABLET;
  key.tablet=new KeyExtent(new Text("1"),null,null);
  key.tid=3;
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.COMPACTION_FINISH;
  key.tid=6;
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  key.tablet=null;
  key.event=LogEvents.MUTATION;
  key.tid=3;
  key.filename="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  value.mutations=Arrays.<Mutation>asList(new ServerMutation(new Text("row")));
  key.write(dos);
  value.write(dos);
  dos.close();
  Map<String,String> confMap=new HashMap<>();
  confMap.put(Property.REPLICATION_NAME.getKey(),"source");
  AccumuloConfiguration conf=new ConfigurationCopy(confMap);
  AccumuloReplicaSystem ars=new AccumuloReplicaSystem();
  ars.setConf(conf);
  Status status=Status.newBuilder().setBegin(0).setEnd(0).setInfiniteEnd(true).setClosed(false).build();
  DataInputStream dis=new DataInputStream(new ByteArrayInputStream(baos.toByteArray()));
  WalReplication repl=ars.getWalEdits(new ReplicationTarget("peer","1","1"),dis,new Path("/accumulo/wals/tserver+port/wal"),status,Long.MAX_VALUE,new HashSet<Integer>());
  Assert.assertEquals(9,repl.entriesConsumed);
  Assert.assertEquals(2,repl.walEdits.getEditsSize());
  Assert.assertEquals(2,repl.sizeInRecords);
  Assert.assertNotEquals(0,repl.sizeInBytes);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.replication.ReplicationProcessorTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void peerTypeExtractionFromConfiguration(){
  Instance inst=EasyMock.createMock(Instance.class);
  VolumeManager fs=EasyMock.createMock(VolumeManager.class);
  Credentials creds=new Credentials("foo",new PasswordToken("bar"));
  ClientContext context=new ClientContext(inst,creds,new ClientConfiguration());
  Map<String,String> data=new HashMap<>();
  String peerName="peer";
  String configuration="java.lang.String,foo";
  data.put(Property.REPLICATION_PEERS + peerName,configuration);
  ConfigurationCopy conf=new ConfigurationCopy(data);
  ReplicationProcessor proc=new ReplicationProcessor(context,conf,fs);
  Assert.assertEquals(configuration,proc.getPeerType(peerName));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.tablet.TabletTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void correctValuesSetForProperties(){
  TableConfiguration tableConf=EasyMock.createMock(TableConfiguration.class);
  CompactionPlan plan=EasyMock.createMock(CompactionPlan.class);
  WriteParameters writeParams=EasyMock.createMock(WriteParameters.class);
  plan.writeParameters=writeParams;
  DatafileManager dfm=EasyMock.createMock(DatafileManager.class);
  TabletTime time=EasyMock.createMock(TabletTime.class);
  TabletServer tserver=EasyMock.createMock(TabletServer.class);
  TabletResourceManager tserverResourceManager=EasyMock.createMock(TabletResourceManager.class);
  TabletMemory tabletMemory=EasyMock.createMock(TabletMemory.class);
  KeyExtent extent=EasyMock.createMock(KeyExtent.class);
  ConfigurationObserver obs=EasyMock.createMock(ConfigurationObserver.class);
  Tablet tablet=new Tablet(time,"",0,new Path("/foo"),dfm,tserver,tserverResourceManager,tabletMemory,tableConf,extent,obs);
  long hdfsBlockSize=10000l, blockSize=5000l, indexBlockSize=500l;
  int replication=5;
  String compressType="snappy";
  EasyMock.expect(tableConf.iterator()).andReturn(Iterators.<Entry<String,String>>emptyIterator());
  EasyMock.expect(writeParams.getHdfsBlockSize()).andReturn(hdfsBlockSize).times(2);
  EasyMock.expect(writeParams.getBlockSize()).andReturn(blockSize).times(2);
  EasyMock.expect(writeParams.getIndexBlockSize()).andReturn(indexBlockSize).times(2);
  EasyMock.expect(writeParams.getCompressType()).andReturn(compressType).times(2);
  EasyMock.expect(writeParams.getReplication()).andReturn(replication).times(2);
  EasyMock.replay(tableConf,plan,writeParams);
  AccumuloConfiguration aConf=tablet.createTableConfiguration(tableConf,plan);
  EasyMock.verify(tableConf,plan,writeParams);
  Assert.assertEquals(hdfsBlockSize,Long.parseLong(aConf.get(Property.TABLE_FILE_BLOCK_SIZE)));
  Assert.assertEquals(blockSize,Long.parseLong(aConf.get(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE)));
  Assert.assertEquals(indexBlockSize,Long.parseLong(aConf.get(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE_INDEX)));
  Assert.assertEquals(compressType,aConf.get(Property.TABLE_FILE_COMPRESSION_TYPE));
  Assert.assertEquals(replication,Integer.parseInt(aConf.get(Property.TABLE_FILE_REPLICATION)));
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
