<h3><span class=" glyphicon glyphicon-tag"/>&nbspPublicFieldVerifier</h3><kbd>Verifies values related to public fields.</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.accumulo.core.client.mock.MockTableOperationsTest </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-14 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImport() throws Throwable {
  ImportTestFilesAndData dataAndFiles=prepareTestFiles();
  TableOperations tableOperations=conn.tableOperations();
  tableOperations.create("a_table");
  tableOperations.importDirectory("a_table",dataAndFiles.importPath.toString(),dataAndFiles.failurePath.toString(),false);
  Scanner scanner=conn.createScanner("a_table",new Authorizations());
  Iterator<Entry<Key,Value>> iterator=scanner.iterator();
  for (int i=0; i < 5; i++) {
    Assert.assertTrue(iterator.hasNext());
    Entry<Key,Value> kv=iterator.next();
    Pair<Key,Value> expected=dataAndFiles.keyVals.get(i);
    Assert.assertEquals(expected.getFirst(),kv.getKey());
    Assert.assertEquals(expected.getSecond(),kv.getValue());
  }
  Assert.assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.file.rfile.RFileMetricsTest </h4><pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void oneEntryDefaultLocGroup() throws IOException {
  trf.openWriter();
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get(null);
  AtomicLongMap<String> blocks=vmg.blocks.get(null);
  assertEquals(1,metrics.get("L1"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,vmg.numEntries.get(vmg.localityGroups.indexOf(null)).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf(null)).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void nonDefaultAndDefaultLocGroup() throws IOException {
  trf.openWriter(false);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq2","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq2","L2",55),RFileTest.nv("foo"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","A",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","B",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(2,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(3,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  metrics=vmg.metric.get(null);
  blocks=vmg.blocks.get(null);
  assertEquals(1,metrics.get("A"));
  assertEquals(1,metrics.get("B"));
  assertEquals(1,blocks.get("A"));
  assertEquals(1,blocks.get("B"));
  assertEquals(2,vmg.numEntries.get(vmg.localityGroups.indexOf(null)).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf(null)).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void multiBlockNonDefaultLocGroup() throws IOException {
  trf.openWriter(false,20);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  lg1.add(new ArrayByteSequence("cf3"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq2","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq2","L2",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(3,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(3,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(4,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(4,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void multiBlockMultiCFNonDefaultAndDefaultLocGroup() throws IOException {
  trf.openWriter(false,20);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  lg1.add(new ArrayByteSequence("cf3"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq2","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq2","L2",55),RFileTest.nv("foo"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","A",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","B",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf4","cq1","A",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf4","cq1","B",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(3,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(3,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(4,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(4,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  metrics=vmg.metric.get(null);
  blocks=vmg.blocks.get(null);
  assertEquals(2,metrics.get("A"));
  assertEquals(2,metrics.get("B"));
  assertEquals(2,blocks.get("A"));
  assertEquals(2,blocks.get("B"));
  assertEquals(4,vmg.numEntries.get(vmg.localityGroups.indexOf(null)).longValue());
  assertEquals(4,vmg.numBlocks.get(vmg.localityGroups.indexOf(null)).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void oneEntryNonDefaultLocGroup() throws IOException {
  trf.openWriter(false);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(1,metrics.get("L1"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void twoEntryNonDefaultLocGroup() throws IOException {
  trf.openWriter(false);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L2",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(1,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(2,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void multiCFNonDefaultAndDefaultLocGroup() throws IOException {
  trf.openWriter(false);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  lg1.add(new ArrayByteSequence("cf3"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq2","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq2","L2",55),RFileTest.nv("foo"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","A",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","B",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf4","cq1","A",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf4","cq1","B",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(3,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(4,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  metrics=vmg.metric.get(null);
  blocks=vmg.blocks.get(null);
  assertEquals(2,metrics.get("A"));
  assertEquals(2,metrics.get("B"));
  assertEquals(1,blocks.get("A"));
  assertEquals(1,blocks.get("B"));
  assertEquals(4,vmg.numEntries.get(vmg.localityGroups.indexOf(null)).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf(null)).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void multiBlockDefaultLocGroup() throws IOException {
  trf.openWriter(20);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq2","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf3","cq2","L2",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get(null);
  AtomicLongMap<String> blocks=vmg.blocks.get(null);
  assertEquals(3,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(3,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(4,vmg.numEntries.get(vmg.localityGroups.indexOf(null)).longValue());
  assertEquals(4,vmg.numBlocks.get(vmg.localityGroups.indexOf(null)).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void twoNonDefaultLocGroups() throws IOException {
  trf.openWriter(false);
  Set<ByteSequence> lg1=new HashSet<>();
  lg1.add(new ArrayByteSequence("cf1"));
  trf.writer.startNewLocalityGroup("lg1",lg1);
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L2",55),RFileTest.nv("foo"));
  Set<ByteSequence> lg2=new HashSet<>();
  lg2.add(new ArrayByteSequence("cf2"));
  trf.writer.startNewLocalityGroup("lg2",lg2);
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf2","cq1","L2",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get("lg1");
  AtomicLongMap<String> blocks=vmg.blocks.get("lg1");
  assertEquals(1,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(2,vmg.numEntries.get(vmg.localityGroups.indexOf("lg1")).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg1")).longValue());
  metrics=vmg.metric.get("lg2");
  blocks=vmg.blocks.get("lg2");
  assertEquals(1,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(2,vmg.numEntries.get(vmg.localityGroups.indexOf("lg2")).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf("lg2")).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void emptyFile() throws IOException {
  trf.openWriter();
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  Map<String,AtomicLongMap<String>> metrics=vmg.metric;
  Map<String,AtomicLongMap<String>> blocks=vmg.blocks;
  assertEquals(0,metrics.size());
  assertEquals(0,blocks.size());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void twoEntriesDefaultLocGroup() throws IOException {
  trf.openWriter();
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L1",55),RFileTest.nv("foo"));
  trf.writer.append(RFileTest.nk("r1","cf1","cq1","L2",55),RFileTest.nv("foo"));
  trf.closeWriter();
  trf.openReader(false);
  VisMetricsGatherer vmg=trf.gatherMetrics();
  AtomicLongMap<String> metrics=vmg.metric.get(null);
  AtomicLongMap<String> blocks=vmg.blocks.get(null);
  assertEquals(1,metrics.get("L1"));
  assertEquals(1,metrics.get("L2"));
  assertEquals(1,blocks.get("L1"));
  assertEquals(1,blocks.get("L2"));
  assertEquals(2,vmg.numEntries.get(vmg.localityGroups.indexOf(null)).longValue());
  assertEquals(1,vmg.numBlocks.get(vmg.localityGroups.indexOf(null)).longValue());
  trf.closeReader();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.file.rfile.RFileTest </h4><pre class="type-13 type-11 type-5 type-3 type-2 type-14 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test11() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("3mod10"));
  for (int i=3; i < 1024; i+=10) {
    trf.writer.append(nk(nf("i",i),"3mod10","","",i + 2),nv("" + i));
  }
  trf.writer.startNewLocalityGroup("lg2",ncfs("5mod10","7mod10"));
  for (int i=5; i < 1024; ) {
    trf.writer.append(nk(nf("i",i),"5mod10","","",i + 2),nv("" + i));
    i+=2;
    trf.writer.append(nk(nf("i",i),"7mod10","","",i + 2),nv("" + i));
    i+=8;
  }
  trf.writer.startDefaultLocalityGroup();
  for (int i=0; i < 1024; i++) {
    int m10=i % 10;
    if (m10 == 3 || m10 == 5 || m10 == 7)     continue;
    trf.writer.append(nk(nf("i",i),m10 + "mod10","","",i + 2),nv("" + i));
  }
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertEquals(3,trf.reader.getNumLocalityGroupsSeeked());
  for (int i=0; i < 1024; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("i",i),(i % 10) + "mod10","","",i + 2),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  assertFalse(trf.iter.hasTop());
  for (int m=0; m < 10; m++) {
    trf.iter.seek(new Range(new Key(),true,null,true),ncfs(m + "mod10"),true);
    assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
    for (int i=m; i < 1024; i+=10) {
      assertTrue(trf.iter.hasTop());
      assertEquals(nk(nf("i",i),(i % 10) + "mod10","","",i + 2),trf.iter.getTopKey());
      assertEquals(nv("" + i),trf.iter.getTopValue());
      trf.iter.next();
    }
    assertFalse(trf.iter.hasTop());
    trf.iter.seek(new Range(new Key(),true,null,true),ncfs(m + "mod10"),false);
    if (m == 3)     assertEquals(2,trf.reader.getNumLocalityGroupsSeeked());
 else     assertEquals(3,trf.reader.getNumLocalityGroupsSeeked());
    for (int i=0; i < 1024; i++) {
      if (i % 10 == m)       continue;
      assertTrue(trf.iter.hasTop());
      assertEquals(nk(nf("i",i),(i % 10) + "mod10","","",i + 2),trf.iter.getTopKey());
      assertEquals(nv("" + i),trf.iter.getTopValue());
      trf.iter.next();
    }
    assertFalse(trf.iter.hasTop());
  }
  SortedKeyValueIterator<Key,Value> reader2=trf.iter.deepCopy(null);
  for (int m=0; m < 9; m++) {
    trf.iter.seek(new Range(new Key(),true,null,true),ncfs(m + "mod10"),true);
    assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
    reader2.seek(new Range(new Key(),true,null,true),ncfs((m + 1) + "mod10"),true);
    for (int i=m; i < 1024; i+=10) {
      assertTrue(trf.iter.hasTop());
      assertEquals(nk(nf("i",i),(i % 10) + "mod10","","",i + 2),trf.iter.getTopKey());
      assertEquals(nv("" + i),trf.iter.getTopValue());
      trf.iter.next();
      if (i + 1 < 1024) {
        assertTrue(reader2.hasTop());
        assertEquals(nk(nf("i",(i + 1)),((i + 1) % 10) + "mod10","","",i + 3),reader2.getTopKey());
        assertEquals(nv("" + (i + 1)),reader2.getTopValue());
        reader2.next();
      }
    }
    assertFalse(trf.iter.hasTop());
    assertFalse(reader2.hasTop());
  }
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testSample() throws IOException {
  int num=10000;
  for (  int sampleBufferSize : new int[]{1 << 10,1 << 20}) {
    RFile.setSampleBufferSize(sampleBufferSize);
    for (    int modulus : new int[]{19,103,1019}) {
      Hasher dataHasher=Hashing.md5().newHasher();
      List<Entry<Key,Value>> sampleData=new ArrayList<Entry<Key,Value>>();
      ConfigurationCopy sampleConf=new ConfigurationCopy(conf == null ? AccumuloConfiguration.getDefaultConfiguration() : conf);
      sampleConf.set(Property.TABLE_SAMPLER,RowSampler.class.getName());
      sampleConf.set(Property.TABLE_SAMPLER_OPTS + "hasher","murmur3_32");
      sampleConf.set(Property.TABLE_SAMPLER_OPTS + "modulus",modulus + "");
      Sampler sampler=SamplerFactory.newSampler(SamplerConfigurationImpl.newSamplerConfig(sampleConf),sampleConf);
      TestRFile trf=new TestRFile(sampleConf);
      trf.openWriter();
      for (int i=0; i < num; i++) {
        add(trf,nk(i,0),nv(i,0),dataHasher,sampleData,sampler);
        add(trf,nk(i,1),nv(i,1),dataHasher,sampleData,sampler);
      }
      HashCode expectedDataHash=dataHasher.hash();
      trf.closeWriter();
      trf.openReader();
      FileSKVIterator sample=trf.reader.getSample(SamplerConfigurationImpl.newSamplerConfig(sampleConf));
      checkSample(sample,sampleData);
      Assert.assertEquals(expectedDataHash,hash(trf.reader));
      SampleIE ie=new SampleIE(SamplerConfigurationImpl.newSamplerConfig(sampleConf).toSamplerConfiguration());
      for (int i=0; i < 3; i++) {
        trf.reader.closeDeepCopies();
        sample=trf.reader.getSample(SamplerConfigurationImpl.newSamplerConfig(sampleConf));
        SortedKeyValueIterator<Key,Value> sampleDC1=sample.deepCopy(ie);
        SortedKeyValueIterator<Key,Value> sampleDC2=sample.deepCopy(ie);
        SortedKeyValueIterator<Key,Value> sampleDC3=trf.reader.deepCopy(ie);
        SortedKeyValueIterator<Key,Value> allDC1=sampleDC1.deepCopy(new SampleIE(null));
        SortedKeyValueIterator<Key,Value> allDC2=sample.deepCopy(new SampleIE(null));
        Assert.assertEquals(expectedDataHash,hash(allDC1));
        Assert.assertEquals(expectedDataHash,hash(allDC2));
        checkSample(sample,sampleData);
        checkSample(sampleDC1,sampleData);
        checkSample(sampleDC2,sampleData);
        checkSample(sampleDC3,sampleData);
      }
      trf.reader.closeDeepCopies();
      trf.closeReader();
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testCryptoDoesntLeakSensitive() throws IOException {
  conf=setAndGetAccumuloConfig(CryptoTest.CRYPTO_ON_CONF);
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  trf.closeWriter();
  byte[] rfBytes=trf.baos.toByteArray();
  for (  Property prop : Property.values()) {
    if (prop.isSensitive()) {
      byte[] toCheck=prop.getKey().getBytes();
      assertEquals(-1,Bytes.indexOf(rfBytes,toCheck));
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-14 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test19() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.append(nk("0000","cf1","doe,john","",4),nv("1123 West Left st"));
  trf.writer.append(nk("0002","cf2","doe,jane","",5),nv("1124 East Right st"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  DataOutputStream dos=trf.writer.createMetaStore("count");
  dos.writeInt(2);
  dos.writeUTF("data1");
  dos.writeInt(1);
  dos.writeUTF("data2");
  dos.writeInt(1);
  dos.close();
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  DataInputStream in=trf.reader.getMetaStore("count");
  assertEquals(2,in.readInt());
  assertEquals("data1",in.readUTF());
  assertEquals(1,in.readInt());
  assertEquals("data2",in.readUTF());
  assertEquals(1,in.readInt());
  in.close();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ShellServerIT </h4><pre class="type-9 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void listcompactions() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table,true);
  ts.exec("config -t " + table + " -s table.iterator.minc.slow=30,org.apache.accumulo.test.functional.SlowIterator",true);
  ts.exec("config -t " + table + " -s table.iterator.minc.slow.opt.sleepTime=1000",true);
  ts.exec("insert a cf cq value",true);
  ts.exec("insert b cf cq value",true);
  ts.exec("insert c cf cq value",true);
  ts.exec("insert d cf cq value",true);
  ts.exec("flush -t " + table,true);
  ts.exec("sleep 0.2",true);
  ts.exec("listcompactions",true,"default_tablet");
  String[] lines=ts.output.get().split("\n");
  String last=lines[lines.length - 1];
  String[] parts=last.split("\\|");
  assertEquals(12,parts.length);
  ts.exec("deletetable -f " + table,true);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies values related to public fields.
"></span><br>
@Test public void du() throws Exception {
  final String table=name.getMethodName();
  ts.exec("notable",true);
  ts.output.clear();
  ts.exec("du",true,"",true);
  ts.output.clear();
  ts.exec("createtable " + table);
  make10();
  ts.exec("flush -t " + table + " -w");
  ts.exec("du " + table,true," [" + table + "]",true);
  ts.output.clear();
  ts.shell.execCommand("du -h",false,false);
  String o=ts.output.get();
  assertTrue("Output did not match regex: '" + o + "'",o.matches(".*[1-9][0-9][0-9]\\s\\[" + table + "\\]\\n"));
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.KerberosProxyIT </h4><pre class="type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testProxyClient() throws Exception {
  ClusterUser rootUser=kdc.getRootUser();
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  TSocket socket=new TSocket(hostname,proxyPort);
  log.info("Connecting to proxy with server primary '" + proxyPrimary + "' running on "+ hostname);
  TSaslClientTransport transport=new TSaslClientTransport("GSSAPI",null,proxyPrimary,hostname,Collections.singletonMap("javax.security.sasl.qop","auth"),null,socket);
  final UGIAssumingTransport ugiTransport=new UGIAssumingTransport(transport,ugi);
  ugiTransport.open();
  AccumuloProxy.Client.Factory factory=new AccumuloProxy.Client.Factory();
  Client client=factory.getClient(new TCompactProtocol(ugiTransport),new TCompactProtocol(ugiTransport));
  ByteBuffer login=client.login(rootUser.getPrincipal(),Collections.<String,String>emptyMap());
  String table="table";
  if (!client.tableExists(login,table)) {
    client.createTable(login,table,true,TimeType.MILLIS);
  }
  String writer=client.createWriter(login,table,new WriterOptions());
  Map<ByteBuffer,List<ColumnUpdate>> updates=new HashMap<>();
  ColumnUpdate update=new ColumnUpdate(ByteBuffer.wrap("cf1".getBytes(UTF_8)),ByteBuffer.wrap("cq1".getBytes(UTF_8)));
  update.setValue(ByteBuffer.wrap("value1".getBytes(UTF_8)));
  updates.put(ByteBuffer.wrap("row1".getBytes(UTF_8)),Collections.<ColumnUpdate>singletonList(update));
  update=new ColumnUpdate(ByteBuffer.wrap("cf2".getBytes(UTF_8)),ByteBuffer.wrap("cq2".getBytes(UTF_8)));
  update.setValue(ByteBuffer.wrap("value2".getBytes(UTF_8)));
  updates.put(ByteBuffer.wrap("row2".getBytes(UTF_8)),Collections.<ColumnUpdate>singletonList(update));
  client.update(writer,updates);
  client.flush(writer);
  client.closeWriter(writer);
  String scanner=client.createScanner(login,table,new ScanOptions());
  ScanResult results=client.nextK(scanner,10);
  assertEquals(2,results.getResults().size());
  KeyValue kv=results.getResults().get(0);
  Key k=kv.key;
  ByteBuffer v=kv.value;
  assertEquals(ByteBuffer.wrap("row1".getBytes(UTF_8)),k.row);
  assertEquals(ByteBuffer.wrap("cf1".getBytes(UTF_8)),k.colFamily);
  assertEquals(ByteBuffer.wrap("cq1".getBytes(UTF_8)),k.colQualifier);
  assertEquals(ByteBuffer.wrap(new byte[0]),k.colVisibility);
  assertEquals(ByteBuffer.wrap("value1".getBytes(UTF_8)),v);
  kv=results.getResults().get(1);
  k=kv.key;
  v=kv.value;
  assertEquals(ByteBuffer.wrap("row2".getBytes(UTF_8)),k.row);
  assertEquals(ByteBuffer.wrap("cf2".getBytes(UTF_8)),k.colFamily);
  assertEquals(ByteBuffer.wrap("cq2".getBytes(UTF_8)),k.colQualifier);
  assertEquals(ByteBuffer.wrap(new byte[0]),k.colVisibility);
  assertEquals(ByteBuffer.wrap("value2".getBytes(UTF_8)),v);
  client.closeScanner(scanner);
  ugiTransport.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.RestartIT </h4><pre class="type-9 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void restartMasterSplit() throws Exception {
  Connector c=getConnector();
  final String tableName=getUniqueNames(1)[0];
  final AuthenticationToken token=getAdminToken();
  final ClusterControl control=getCluster().getClusterControl();
  VOPTS.setTableName(tableName);
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_SPLIT_THRESHOLD.getKey(),"5K");
  final String[] args;
  if (token instanceof PasswordToken) {
    byte[] password=((PasswordToken)token).getPassword();
    args=new String[]{"-u",getAdminPrincipal(),"-p",new String(password,UTF_8),"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"--rows",Integer.toString(VOPTS.rows),"--table",tableName};
    OPTS.setPrincipal(getAdminPrincipal());
    VOPTS.setPrincipal(getAdminPrincipal());
  }
 else   if (token instanceof KerberosToken) {
    ClusterUser rootUser=getAdminUser();
    args=new String[]{"-u",getAdminPrincipal(),"--keytab",rootUser.getKeytab().getAbsolutePath(),"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"--rows",Integer.toString(VOPTS.rows),"--table",tableName};
    ClientConfiguration clientConfig=cluster.getClientConfig();
    OPTS.updateKerberosCredentials(clientConfig);
    VOPTS.updateKerberosCredentials(clientConfig);
  }
 else {
    throw new RuntimeException("Unknown token");
  }
  Future<Integer> ret=svc.submit(new Callable<Integer>(){
    @Override public Integer call(){
      try {
        return control.exec(TestIngest.class,args);
      }
 catch (      Exception e) {
        log.error("Error running TestIngest",e);
        return -1;
      }
    }
  }
);
  control.stopAllServers(ServerType.MASTER);
  ZooReader zreader=new ZooReader(c.getInstance().getZooKeepers(),c.getInstance().getZooKeepersSessionTimeOut());
  ZooCache zcache=new ZooCache(zreader,null);
  byte[] masterLockData;
  do {
    masterLockData=ZooLock.getLockData(zcache,ZooUtil.getRoot(c.getInstance()) + Constants.ZMASTER_LOCK,null);
    if (null != masterLockData) {
      log.info("Master lock is still held");
      Thread.sleep(1000);
    }
  }
 while (null != masterLockData);
  cluster.start();
  assertEquals(0,ret.get().intValue());
  VerifyIngest.verifyIngest(c,VOPTS,SOPTS);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void restartMaster() throws Exception {
  Connector c=getConnector();
  final String tableName=getUniqueNames(1)[0];
  OPTS.setTableName(tableName);
  VOPTS.setTableName(tableName);
  c.tableOperations().create(tableName);
  final AuthenticationToken token=getAdminToken();
  final ClusterControl control=getCluster().getClusterControl();
  final String[] args;
  if (token instanceof PasswordToken) {
    byte[] password=((PasswordToken)token).getPassword();
    args=new String[]{"-u",getAdminPrincipal(),"-p",new String(password,UTF_8),"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"--rows","" + OPTS.rows,"--table",tableName};
    OPTS.setPrincipal(getAdminPrincipal());
    VOPTS.setPrincipal(getAdminPrincipal());
  }
 else   if (token instanceof KerberosToken) {
    ClusterUser rootUser=getAdminUser();
    args=new String[]{"-u",getAdminPrincipal(),"--keytab",rootUser.getKeytab().getAbsolutePath(),"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"--rows","" + OPTS.rows,"--table",tableName};
    ClientConfiguration clientConfig=cluster.getClientConfig();
    OPTS.updateKerberosCredentials(clientConfig);
    VOPTS.updateKerberosCredentials(clientConfig);
  }
 else {
    throw new RuntimeException("Unknown token");
  }
  Future<Integer> ret=svc.submit(new Callable<Integer>(){
    @Override public Integer call(){
      try {
        return control.exec(TestIngest.class,args);
      }
 catch (      IOException e) {
        log.error("Error running TestIngest",e);
        return -1;
      }
    }
  }
);
  control.stopAllServers(ServerType.MASTER);
  control.startAllServers(ServerType.MASTER);
  assertEquals(0,ret.get().intValue());
  VerifyIngest.verifyIngest(c,VOPTS,SOPTS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.RestartStressIT </h4><pre class="type-9 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void test() throws Exception {
  final Connector c=getConnector();
  final String tableName=getUniqueNames(1)[0];
  final AuthenticationToken token=getAdminToken();
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_SPLIT_THRESHOLD.getKey(),"500K");
  final ClusterControl control=getCluster().getClusterControl();
  final String[] args;
  if (token instanceof PasswordToken) {
    byte[] password=((PasswordToken)token).getPassword();
    args=new String[]{"-u",getAdminPrincipal(),"-p",new String(password,UTF_8),"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"--rows","" + VOPTS.rows,"--table",tableName};
  }
 else   if (token instanceof KerberosToken) {
    ClusterUser rootUser=getAdminUser();
    args=new String[]{"-u",getAdminPrincipal(),"--keytab",rootUser.getKeytab().getAbsolutePath(),"-i",cluster.getInstanceName(),"-z",cluster.getZooKeepers(),"--rows","" + VOPTS.rows,"--table",tableName};
  }
 else {
    throw new RuntimeException("Unrecognized token");
  }
  Future<Integer> retCode=svc.submit(new Callable<Integer>(){
    @Override public Integer call(){
      try {
        return control.exec(TestIngest.class,args);
      }
 catch (      Exception e) {
        log.error("Error running TestIngest",e);
        return -1;
      }
    }
  }
);
  for (int i=0; i < 2; i++) {
    sleepUninterruptibly(10,TimeUnit.SECONDS);
    control.stopAllServers(ServerType.TABLET_SERVER);
    control.startAllServers(ServerType.TABLET_SERVER);
  }
  assertEquals(0,retCode.get().intValue());
  VOPTS.setTableName(tableName);
  if (token instanceof PasswordToken) {
    VOPTS.setPrincipal(getAdminPrincipal());
  }
 else   if (token instanceof KerberosToken) {
    VOPTS.updateKerberosCredentials(cluster.getClientConfig());
  }
 else {
    throw new RuntimeException("Unrecognized token");
  }
  VerifyIngest.verifyIngest(c,VOPTS,SOPTS);
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
