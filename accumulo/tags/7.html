<h3><span class=" glyphicon glyphicon-tag"/>&nbspNullVerifier</h3><kbd>Verifies whether objects are null</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.accumulo.core.cli.TestClientOpts </h4><pre class="type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  BatchWriterConfig cfg=new BatchWriterConfig();
  ClientOpts args=new ClientOpts();
  BatchWriterOpts bwOpts=new BatchWriterOpts();
  BatchScannerOpts bsOpts=new BatchScannerOpts();
  try {
    assertNull(args.getPrincipal());
    fail("Expected to receive exception fetching non-existent principal");
  }
 catch (  AccumuloSecurityException e) {
  }
  assertNull(args.getSecurePassword());
  assertNull(args.getToken());
  assertEquals(Long.valueOf(cfg.getMaxLatency(TimeUnit.MILLISECONDS)),bwOpts.batchLatency);
  assertEquals(Long.valueOf(cfg.getTimeout(TimeUnit.MILLISECONDS)),bwOpts.batchTimeout);
  assertEquals(Long.valueOf(cfg.getMaxMemory()),bwOpts.batchMemory);
  assertFalse(args.debug);
  assertFalse(args.trace);
  assertEquals(10,bsOpts.scanThreads.intValue());
  assertEquals(null,args.instance);
  assertEquals(Authorizations.EMPTY,args.auths);
  assertEquals("localhost:2181",args.zookeepers);
  assertFalse(args.help);
  JCommander jc=new JCommander();
  jc.addObject(args);
  jc.addObject(bwOpts);
  jc.addObject(bsOpts);
  jc.parse("-u","bar","-p","foo","--batchLatency","3s","--batchTimeout","2s","--batchMemory","1M","--debug","--trace","--scanThreads","7","-i","instance","--auths","G1,G2,G3","-z","zoohost1,zoohost2","--help");
  assertEquals("bar",args.getPrincipal());
  assertNull(args.getSecurePassword());
  assertEquals(new PasswordToken("foo"),args.getToken());
  assertEquals(Long.valueOf(3000),bwOpts.batchLatency);
  assertEquals(Long.valueOf(2000),bwOpts.batchTimeout);
  assertEquals(Long.valueOf(1024 * 1024),bwOpts.batchMemory);
  assertTrue(args.debug);
  assertTrue(args.trace);
  assertEquals(7,bsOpts.scanThreads.intValue());
  assertEquals("instance",args.instance);
  assertEquals(new Authorizations("G1","G2","G3"),args.auths);
  assertEquals("zoohost1,zoohost2",args.zookeepers);
  assertTrue(args.help);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.ClientConfigurationTest </h4><pre class="type-11 type-5 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfPath() throws IOException {
  File target=new File(System.getProperty("user.dir"),"target");
  assertTrue("'target' build directory does not exist",target.exists());
  File testDir=new File(target,getClass().getName());
  if (!testDir.exists()) {
    assertTrue("Failed to create test dir " + testDir,testDir.mkdirs());
  }
  File clientConf=new File(testDir,"client.conf");
  if (!clientConf.exists()) {
    assertTrue("Failed to create file " + clientConf,clientConf.createNewFile());
  }
  assertEquals(clientConf.toString(),ClientConfiguration.getClientConfPath(testDir.toString()));
  assertEquals(clientConf.toString(),ClientConfiguration.getClientConfPath(clientConf.toString()));
  final File missing=new File("foobarbaz12332112");
  assertEquals(missing.toString(),ClientConfiguration.getClientConfPath(missing.toString()));
  assertNull(ClientConfiguration.getClientConfPath(null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.TabletLocatorImplTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testBug2() throws Exception {
  KeyExtent mte1=new KeyExtent(new Text(MetadataTable.ID),new Text("~"),RTE.getEndRow());
  KeyExtent mte2=new KeyExtent(new Text(MetadataTable.ID),null,new Text("~"));
  TServers tservers=new TServers();
  TestTabletLocationObtainer ttlo=new TestTabletLocationObtainer(tservers);
  RootTabletLocator rtl=new TestRootTabletLocator();
  TabletLocatorImpl rootTabletCache=new TabletLocatorImpl(new Text(MetadataTable.ID),rtl,ttlo,new YesLockChecker());
  TabletLocatorImpl tab0TabletCache=new TabletLocatorImpl(new Text("0"),rootTabletCache,ttlo,new YesLockChecker());
  setLocation(tservers,"tserver1",RTE,mte1,"tserver2");
  setLocation(tservers,"tserver1",RTE,mte2,"tserver3");
  Map<KeyExtent,SortedMap<Key,Value>> ts3=new HashMap<KeyExtent,SortedMap<Key,Value>>();
  ts3.put(mte2,new TreeMap<Key,Value>());
  tservers.tservers.put("tserver3",ts3);
  assertNull(tab0TabletCache.locateTablet(context,new Text("row_0000000000"),false,false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.CredentialProviderFactoryShimTest </h4><pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonExistentClassesDoesntFail() throws IOException {
  Configuration conf=new Configuration();
  conf.set(CredentialProviderFactoryShim.CREDENTIAL_PROVIDER_PATH,"jceks://file/foo/bar.jceks");
  List<String> keys=CredentialProviderFactoryShim.getKeys(conf);
  Assert.assertNotNull(keys);
  Assert.assertEquals(Collections.emptyList(),keys);
  Assert.assertNull(CredentialProviderFactoryShim.getValueFromCredentialProvider(conf,"key1"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfigurationCreation() throws IOException {
  final String path="jceks://file/tmp/foo.jks";
  final Configuration actualConf=CredentialProviderFactoryShim.getConfiguration(path);
  Assert.assertNotNull(actualConf);
  Assert.assertEquals(path,actualConf.get(CredentialProviderFactoryShim.CREDENTIAL_PROVIDER_PATH));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.PropertyTest </h4><pre class="type-11 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void validatePropertyKeys(){
  for (  Property prop : Property.values()) {
    if (prop.getType().equals(PropertyType.PREFIX)) {
      assertTrue(prop.getKey().endsWith("."));
      assertNull(prop.getDefaultValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProperties(){
  HashSet<String> validPrefixes=new HashSet<String>();
  for (  Property prop : Property.values())   if (prop.getType().equals(PropertyType.PREFIX))   validPrefixes.add(prop.getKey());
  HashSet<String> propertyNames=new HashSet<String>();
  for (  Property prop : Property.values()) {
    if (prop.getType() == PropertyType.PREFIX) {
      assertNull("PREFIX property " + prop.name() + " has unexpected non-null default value.",prop.getDefaultValue());
    }
 else {
      assertTrue("Property " + prop + " has invalid default value "+ prop.getDefaultValue()+ " for type "+ prop.getType(),prop.getType().isValidFormat(prop.getDefaultValue()));
    }
    assertFalse("Description not set for " + prop,prop.getDescription() == null || prop.getDescription().isEmpty());
    boolean containsValidPrefix=false;
    for (    String pre : validPrefixes)     if (prop.getKey().startsWith(pre)) {
      containsValidPrefix=true;
      break;
    }
    assertTrue("Invalid prefix on prop " + prop,containsValidPrefix);
    assertFalse("Duplicate property name " + prop.getKey(),propertyNames.contains(prop.getKey()));
    propertyNames.add(prop.getKey());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.SiteConfigurationTest </h4><pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnlySensitivePropertiesExtractedFromCredetialProvider() throws SecurityException, NoSuchMethodException {
  if (!isCredentialProviderAvailable) {
    return;
  }
  SiteConfiguration siteCfg=EasyMock.createMockBuilder(SiteConfiguration.class).addMockedMethod("getHadoopConfiguration").withConstructor(AccumuloConfiguration.class).withArgs(DefaultConfiguration.getInstance()).createMock();
  siteCfg.set(Property.INSTANCE_SECRET,"ignored");
  URL keystore=SiteConfigurationTest.class.getResource("/site-cfg.jceks");
  Assert.assertNotNull(keystore);
  String keystorePath=new File(keystore.getFile()).getAbsolutePath();
  Configuration hadoopConf=new Configuration();
  hadoopConf.set(CredentialProviderFactoryShim.CREDENTIAL_PROVIDER_PATH,"jceks://file" + keystorePath);
  EasyMock.expect(siteCfg.getHadoopConfiguration()).andReturn(hadoopConf).once();
  EasyMock.replay(siteCfg);
  Map<String,String> props=new HashMap<String,String>();
  Predicate<String> all=Predicates.alwaysTrue();
  siteCfg.getProperties(props,all);
  Assert.assertEquals("mysecret",props.get(Property.INSTANCE_SECRET.getKey()));
  Assert.assertEquals(null,props.get("ignored.property"));
  Assert.assertEquals(Property.GENERAL_RPC_TIMEOUT.getDefaultValue(),props.get(Property.GENERAL_RPC_TIMEOUT.getKey()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.KeyExtentTest </h4><pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecodeEncode(){
  assertNull(KeyExtent.decodePrevEndRow(KeyExtent.encodePrevEndRow(null)));
  Text x=new Text();
  assertEquals(x,KeyExtent.decodePrevEndRow(KeyExtent.encodePrevEndRow(x)));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDecodingMetadataRow(){
  Text flattenedExtent=new Text("foo;bar");
  ke=new KeyExtent(flattenedExtent,(Text)null);
  assertEquals(new Text("bar"),ke.getEndRow());
  assertEquals(new Text("foo"),ke.getTableId());
  assertNull(ke.getPrevEndRow());
  flattenedExtent=new Text("foo<");
  ke=new KeyExtent(flattenedExtent,(Text)null);
  assertNull(ke.getEndRow());
  assertEquals(new Text("foo"),ke.getTableId());
  assertNull(ke.getPrevEndRow());
  flattenedExtent=new Text("foo;bar;");
  ke=new KeyExtent(flattenedExtent,(Text)null);
  assertEquals(new Text("bar;"),ke.getEndRow());
  assertEquals(new Text("foo"),ke.getTableId());
  assertNull(ke.getPrevEndRow());
}

</code></pre>

<br>
<pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindContainingExtents(){
  assertNull(KeyExtent.findContainingExtent(nke("t",null,null),set0));
  assertNull(KeyExtent.findContainingExtent(nke("t","1","0"),set0));
  assertNull(KeyExtent.findContainingExtent(nke("t","1",null),set0));
  assertNull(KeyExtent.findContainingExtent(nke("t",null,"0"),set0));
  TreeSet<KeyExtent> set1=new TreeSet<KeyExtent>();
  set1.add(nke("t",null,null));
  assertEquals(nke("t",null,null),KeyExtent.findContainingExtent(nke("t",null,null),set1));
  assertEquals(nke("t",null,null),KeyExtent.findContainingExtent(nke("t","1","0"),set1));
  assertEquals(nke("t",null,null),KeyExtent.findContainingExtent(nke("t","1",null),set1));
  assertEquals(nke("t",null,null),KeyExtent.findContainingExtent(nke("t",null,"0"),set1));
  TreeSet<KeyExtent> set2=new TreeSet<KeyExtent>();
  set2.add(nke("t","g",null));
  set2.add(nke("t",null,"g"));
  assertNull(KeyExtent.findContainingExtent(nke("t",null,null),set2));
  assertEquals(nke("t","g",null),KeyExtent.findContainingExtent(nke("t","c","a"),set2));
  assertEquals(nke("t","g",null),KeyExtent.findContainingExtent(nke("t","c",null),set2));
  assertEquals(nke("t","g",null),KeyExtent.findContainingExtent(nke("t","g","a"),set2));
  assertEquals(nke("t","g",null),KeyExtent.findContainingExtent(nke("t","g",null),set2));
  assertNull(KeyExtent.findContainingExtent(nke("t","h","a"),set2));
  assertNull(KeyExtent.findContainingExtent(nke("t","h",null),set2));
  assertNull(KeyExtent.findContainingExtent(nke("t","z","f"),set2));
  assertNull(KeyExtent.findContainingExtent(nke("t",null,"f"),set2));
  assertEquals(nke("t",null,"g"),KeyExtent.findContainingExtent(nke("t","z","g"),set2));
  assertEquals(nke("t",null,"g"),KeyExtent.findContainingExtent(nke("t",null,"g"),set2));
  assertEquals(nke("t",null,"g"),KeyExtent.findContainingExtent(nke("t","z","h"),set2));
  assertEquals(nke("t",null,"g"),KeyExtent.findContainingExtent(nke("t",null,"h"),set2));
  TreeSet<KeyExtent> set3=new TreeSet<KeyExtent>();
  set3.add(nke("t","g",null));
  set3.add(nke("t","s","g"));
  set3.add(nke("t",null,"s"));
  assertNull(KeyExtent.findContainingExtent(nke("t",null,null),set3));
  assertEquals(nke("t","g",null),KeyExtent.findContainingExtent(nke("t","g",null),set3));
  assertEquals(nke("t","s","g"),KeyExtent.findContainingExtent(nke("t","s","g"),set3));
  assertEquals(nke("t",null,"s"),KeyExtent.findContainingExtent(nke("t",null,"s"),set3));
  assertNull(KeyExtent.findContainingExtent(nke("t","t","g"),set3));
  assertNull(KeyExtent.findContainingExtent(nke("t","t","f"),set3));
  assertNull(KeyExtent.findContainingExtent(nke("t","s","f"),set3));
  assertEquals(nke("t","s","g"),KeyExtent.findContainingExtent(nke("t","r","h"),set3));
  assertEquals(nke("t","s","g"),KeyExtent.findContainingExtent(nke("t","s","h"),set3));
  assertEquals(nke("t","s","g"),KeyExtent.findContainingExtent(nke("t","r","g"),set3));
  assertEquals(nke("t",null,"s"),KeyExtent.findContainingExtent(nke("t",null,"t"),set3));
  assertNull(KeyExtent.findContainingExtent(nke("t",null,"r"),set3));
  assertEquals(nke("t","g",null),KeyExtent.findContainingExtent(nke("t","f",null),set3));
  assertNull(KeyExtent.findContainingExtent(nke("t","h",null),set3));
  TreeSet<KeyExtent> set4=new TreeSet<KeyExtent>();
  set4.add(nke("t1","d",null));
  set4.add(nke("t1","q","d"));
  set4.add(nke("t1",null,"q"));
  set4.add(nke("t2","g",null));
  set4.add(nke("t2","s","g"));
  set4.add(nke("t2",null,"s"));
  assertNull(KeyExtent.findContainingExtent(nke("t",null,null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("z",null,null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("t11",null,null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("t1",null,null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("t2",null,null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("t","g",null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("z","g",null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("t11","g",null),set4));
  assertNull(KeyExtent.findContainingExtent(nke("t1","g",null),set4));
  assertEquals(nke("t2","g",null),KeyExtent.findContainingExtent(nke("t2","g",null),set4));
  assertEquals(nke("t2","s","g"),KeyExtent.findContainingExtent(nke("t2","s","g"),set4));
  assertEquals(nke("t2",null,"s"),KeyExtent.findContainingExtent(nke("t2",null,"s"),set4));
  assertEquals(nke("t1","d",null),KeyExtent.findContainingExtent(nke("t1","d",null),set4));
  assertEquals(nke("t1","q","d"),KeyExtent.findContainingExtent(nke("t1","q","d"),set4));
  assertEquals(nke("t1",null,"q"),KeyExtent.findContainingExtent(nke("t1",null,"q"),set4));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.rpc.SaslConnectionParamsTest </h4><pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelegationTokenImpl() throws Exception {
  final DelegationTokenImpl token=new DelegationTokenImpl(new byte[0],new AuthenticationTokenIdentifier("user",1,10l,20l,"instanceid"));
  testUser.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      final String primary="accumulo";
      clientConf.withSasl(true,primary);
      final AccumuloConfiguration rpcConf=ClientContext.convertClientConfig(clientConf);
      assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
      final SaslConnectionParams saslParams=new SaslConnectionParams(rpcConf,token);
      assertEquals(primary,saslParams.getKerberosServerPrimary());
      final QualityOfProtection defaultQop=QualityOfProtection.get(Property.RPC_SASL_QOP.getDefaultValue());
      assertEquals(defaultQop,saslParams.getQualityOfProtection());
      assertEquals(SaslMechanism.DIGEST_MD5,saslParams.getMechanism());
      assertNotNull(saslParams.getCallbackHandler());
      assertEquals(SaslClientDigestCallbackHandler.class,saslParams.getCallbackHandler().getClass());
      Map<String,String> properties=saslParams.getSaslProperties();
      assertEquals(1,properties.size());
      assertEquals(defaultQop.getQuality(),properties.get(Sasl.QOP));
      assertEquals(username,saslParams.getPrincipal());
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.VisibilityConstraintTest </h4><pre class="type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGoodVisibilityAuth(){
  mutation.put(D,D,good,D);
  assertNull("authorized",vc.check(env,mutation));
}

</code></pre>

<br>
<pre class="type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testCachedVisibilities(){
  mutation.put(D,D,good,"v");
  mutation.put(D,D,good,"v2");
  assertNull("authorized",vc.check(env,mutation));
}

</code></pre>

<br>
<pre class="type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testNoVisibility(){
  mutation.put(D,D,D);
  assertNull("authorized",vc.check(env,mutation));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.crypto.CryptoTest </h4><pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCryptoModuleParamsParsing(){
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertNotNull(params);
  assertEquals("AES",params.getAlgorithmName());
  assertEquals("CFB",params.getEncryptionMode());
  assertEquals("NoPadding",params.getPadding());
  assertEquals(128,params.getKeyLength());
  assertEquals("SHA1PRNG",params.getRandomNumberGenerator());
  assertEquals("SUN",params.getRandomNumberGeneratorProvider());
  assertEquals("org.apache.accumulo.core.security.crypto.CachingHDFSSecretKeyEncryptionStrategy",params.getKeyEncryptionStrategyClass());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCryptoModuleBasicReadWrite() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_KEK_OFF_CONF);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  byte[] resultingBytes=setUpSampleEncryptedBytes(cryptoModule,params);
  ByteArrayInputStream in=new ByteArrayInputStream(resultingBytes);
  params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  params.setEncryptedInputStream(in);
  params=cryptoModule.getDecryptingInputStream(params);
  InputStream plaintextIn=params.getPlaintextInputStream();
  assertNotNull(plaintextIn);
  assertTrue(plaintextIn != in);
  DataInputStream dataIn=new DataInputStream(plaintextIn);
  String markerString=dataIn.readUTF();
  int markerInt=dataIn.readInt();
  assertEquals(MARKER_STRING,markerString);
  assertEquals(MARKER_INT,markerInt);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoCryptoStream() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_OFF_CONF);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertNotNull(params);
  assertEquals("NullCipher",params.getAlgorithmName());
  assertNull(params.getEncryptionMode());
  assertNull(params.getPadding());
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  assertNotNull(cryptoModule);
  assertTrue(cryptoModule instanceof CryptoModuleFactory.NullCryptoModule);
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  params.setPlaintextOutputStream(out);
  params=cryptoModule.getEncryptingOutputStream(params);
  assertNotNull(params.getEncryptedOutputStream());
  assertEquals(out,params.getEncryptedOutputStream());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKeyEncryptionNormalPath() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  assertNotNull(params.getKeyEncryptionStrategyClass());
  assertEquals("org.apache.accumulo.core.security.crypto.CachingHDFSSecretKeyEncryptionStrategy",params.getKeyEncryptionStrategyClass());
  byte[] resultingBytes=setUpSampleEncryptedBytes(cryptoModule,params);
  params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  params.setOverrideStreamsSecretKeyEncryptionStrategy(true);
  ByteArrayInputStream in=new ByteArrayInputStream(resultingBytes);
  params.setEncryptedInputStream(in);
  params=cryptoModule.getDecryptingInputStream(params);
  assertNotNull(params.getPlaintextInputStream());
  DataInputStream dataIn=new DataInputStream(params.getPlaintextInputStream());
  String markerString=dataIn.readUTF();
  int markerInt=dataIn.readInt();
  assertEquals(MARKER_STRING,markerString);
  assertEquals(MARKER_INT,markerInt);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKeyEncryptionAndCheckThatFileCannotBeReadWithoutKEK() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  assertNotNull(params.getKeyEncryptionStrategyClass());
  assertEquals("org.apache.accumulo.core.security.crypto.CachingHDFSSecretKeyEncryptionStrategy",params.getKeyEncryptionStrategyClass());
  byte[] resultingBytes=setUpSampleEncryptedBytes(cryptoModule,params);
  conf=setAndGetAccumuloConfig(CRYPTO_ON_KEK_OFF_CONF);
  params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  params.setOverrideStreamsSecretKeyEncryptionStrategy(true);
  ByteArrayInputStream in=new ByteArrayInputStream(resultingBytes);
  params.setEncryptedInputStream(in);
  params=cryptoModule.getDecryptingInputStream(params);
  assertNotNull(params.getPlaintextInputStream());
  DataInputStream dataIn=new DataInputStream(params.getPlaintextInputStream());
  exception.expect(IOException.class);
  @SuppressWarnings("unused") String markerString=dataIn.readUTF();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangingCryptoParamsAndCanStillDecryptPreviouslyEncryptedFiles() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  assertNotNull(params.getKeyEncryptionStrategyClass());
  assertEquals("org.apache.accumulo.core.security.crypto.CachingHDFSSecretKeyEncryptionStrategy",params.getKeyEncryptionStrategyClass());
  byte[] resultingBytes=setUpSampleEncryptedBytes(cryptoModule,params);
  params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  params.setAlgorithmName("DESede");
  params.setKeyLength(24 * 8);
  ByteArrayInputStream in=new ByteArrayInputStream(resultingBytes);
  params.setEncryptedInputStream(in);
  params=cryptoModule.getDecryptingInputStream(params);
  assertNotNull(params.getPlaintextInputStream());
  DataInputStream dataIn=new DataInputStream(params.getPlaintextInputStream());
  String markerString=dataIn.readUTF();
  int markerInt=dataIn.readInt();
  assertEquals(MARKER_STRING,markerString);
  assertEquals(MARKER_INT,markerInt);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.LocalityGroupUtilTest </h4><pre class="type-9 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testColumnFamilySet(){
  ConfigurationCopy conf=new ConfigurationCopy();
  conf.set("table.group.lg1","cf1,cf2");
  conf.set("table.groups.enabled","lg1");
  try {
    Map<String,Set<ByteSequence>> groups=LocalityGroupUtil.getLocalityGroups(conf);
    assertEquals(1,groups.size());
    assertNotNull(groups.get("lg1"));
    assertEquals(2,groups.get("lg1").size());
    assertTrue(groups.get("lg1").contains(new ArrayByteSequence("cf1")));
  }
 catch (  LocalityGroupConfigurationError err) {
    fail();
  }
  try {
    conf.set("table.group.lg2","cf1");
    conf.set("table.groups.enabled","lg1,lg2");
    LocalityGroupUtil.getLocalityGroups(conf);
    fail();
  }
 catch (  LocalityGroupConfigurationError err) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.PreAllocatedArrayTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.accumulo.core.util.PreAllocatedArray#set(int,java.lang.Object)}.<br>
 * Test method for {@link org.apache.accumulo.core.util.PreAllocatedArray#get(int)}.<br>
 * Test method for {@link org.apache.accumulo.core.util.PreAllocatedArray#iterator()}.
 */
@Test public void testSet(){
  int capacity=5;
  PreAllocatedArray<String> strings=new PreAllocatedArray<>(capacity);
  assertEquals(capacity,strings.length);
  strings.set(1,"a");
  strings.set(4,"b");
  assertEquals(capacity,strings.length);
  String b=strings.set(4,"c");
  assertEquals("b",b);
  assertEquals(capacity,strings.length);
  Iterator<String> iter=strings.iterator();
  assertNull(iter.next());
  assertEquals("a",iter.next());
  assertNull(iter.next());
  assertNull(iter.next());
  assertEquals("c",iter.next());
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.examples.simple.constraints.AlphaNumKeyConstraintTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetViolationDescription(){
  assertEquals(AlphaNumKeyConstraint.ROW_VIOLATION_MESSAGE,ankc.getViolationDescription(AlphaNumKeyConstraint.NON_ALPHA_NUM_ROW));
  assertEquals(AlphaNumKeyConstraint.COLF_VIOLATION_MESSAGE,ankc.getViolationDescription(AlphaNumKeyConstraint.NON_ALPHA_NUM_COLF));
  assertEquals(AlphaNumKeyConstraint.COLQ_VIOLATION_MESSAGE,ankc.getViolationDescription(AlphaNumKeyConstraint.NON_ALPHA_NUM_COLQ));
  assertNull(ankc.getViolationDescription((short)4));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test(){
  Mutation goodMutation=new Mutation(new Text("Row1"));
  goodMutation.put(new Text("Colf2"),new Text("ColQ3"),new Value("value".getBytes()));
  assertNull(ankc.check(null,goodMutation));
  Mutation badMutation=new Mutation(new Text("Row#1"));
  badMutation.put(new Text("Colf$2"),new Text("Colq%3"),new Value("value".getBytes()));
  assertEquals(ImmutableList.of(AlphaNumKeyConstraint.NON_ALPHA_NUM_ROW,AlphaNumKeyConstraint.NON_ALPHA_NUM_COLF,AlphaNumKeyConstraint.NON_ALPHA_NUM_COLQ),ankc.check(null,badMutation));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.examples.simple.constraints.NumericValueConstraintTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetViolationDescription(){
  assertEquals(NumericValueConstraint.VIOLATION_MESSAGE,nvc.getViolationDescription(NumericValueConstraint.NON_NUMERIC_VALUE));
  assertNull(nvc.getViolationDescription((short)2));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheck(){
  Mutation goodMutation=new Mutation(new Text("r"));
  goodMutation.put(new Text("cf"),new Text("cq"),new Value("1234".getBytes()));
  assertNull(nvc.check(null,goodMutation));
  Mutation badMutation=new Mutation(new Text("r"));
  badMutation.put(new Text("cf"),new Text("cq"),new Value("foo1234".getBytes()));
  badMutation.put(new Text("cf2"),new Text("cq2"),new Value("foo1234".getBytes()));
  assertEquals(NumericValueConstraint.NON_NUMERIC_VALUE,Iterables.getOnlyElement(nvc.check(null,badMutation)).shortValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.zookeeper.ZooCacheFactoryTest </h4><pre class="type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetZooCacheWatcher(){
  String zks1="zk1";
  int timeout1=1000;
  Watcher watcher=createMock(Watcher.class);
  ZooCache zc1=zcf.getZooCache(zks1,timeout1,watcher);
  assertNotNull(zc1);
}

</code></pre>

<br>
<pre class="type-3 type-15 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetZooCacheWatcher_Null(){
  String zks1="zk1";
  int timeout1=1000;
  ZooCache zc1=zcf.getZooCache(zks1,timeout1,null);
  assertNotNull(zc1);
  ZooCache zc1a=zcf.getZooCache(zks1,timeout1);
  assertSame(zc1,zc1a);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.zookeeper.ZooCacheTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testGetChildren_EatNoNode() throws Exception {
  expect(zk.getChildren(eq(ZPATH),anyObject(Watcher.class))).andThrow(new KeeperException.NoNodeException(ZPATH));
  replay(zk);
  assertNull(zc.getChildren(ZPATH));
  verify(zk);
}

</code></pre>

<br>
<pre class="type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetChildren_NoKids() throws Exception {
  expect(zk.getChildren(eq(ZPATH),anyObject(Watcher.class))).andReturn(null);
  replay(zk);
  assertNull(zc.getChildren(ZPATH));
  verify(zk);
  assertNull(zc.getChildren(ZPATH));
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testGet_NonExistent() throws Exception {
  expect(zk.exists(eq(ZPATH),anyObject(Watcher.class))).andReturn(null);
  replay(zk);
  assertNull(zc.get(ZPATH));
  verify(zk);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.gc.SimpleGarbageCollectorTest </h4><pre class="type-3 type-15 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstruction(){
  assertSame(opts,gc.getOpts());
  assertNotNull(gc.getStatus(createMock(TInfo.class),createMock(TCredentials.class)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.iteratortest.junit4.BaseJUnit4IteratorTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterator(){
  List<IteratorTestReport> reports=runner.runTests();
  assertEquals(1,reports.size());
  IteratorTestReport report=reports.get(0);
  assertNotNull(report);
  assertTrue(report.getSummary(),report.didTestSucceed());
  log.trace("Expected: {}, Actual: {}",report.getExpectedOutput(),report.getActualOutput());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.master.state.RootTabletStateStoreTest </h4><pre class="type-8 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRootTabletStateStore() throws DistributedStoreException {
  ZooTabletStateStore tstore=new ZooTabletStateStore(new FakeZooStore());
  KeyExtent root=RootTable.EXTENT;
  String sessionId="this is my unique session data";
  TServerInstance server=new TServerInstance(HostAndPort.fromParts("127.0.0.1",10000),sessionId);
  List<Assignment> assignments=Collections.singletonList(new Assignment(root,server));
  tstore.setFutureLocations(assignments);
  int count=0;
  for (  TabletLocationState location : tstore) {
    assertEquals(location.extent,root);
    assertEquals(location.future,server);
    assertNull(location.current);
    count++;
  }
  assertEquals(count,1);
  tstore.setLocations(assignments);
  count=0;
  for (  TabletLocationState location : tstore) {
    assertEquals(location.extent,root);
    assertNull(location.future);
    assertEquals(location.current,server);
    count++;
  }
  assertEquals(count,1);
  TabletLocationState assigned=null;
  try {
    assigned=new TabletLocationState(root,server,null,null,null,false);
  }
 catch (  BadLocationStateException e) {
    fail("Unexpected error " + e);
  }
  tstore.unassign(Collections.singletonList(assigned),null);
  count=0;
  for (  TabletLocationState location : tstore) {
    assertEquals(location.extent,root);
    assertNull(location.future);
    assertNull(location.current);
    count++;
  }
  assertEquals(count,1);
  KeyExtent notRoot=new KeyExtent(new Text("0"),null,null);
  try {
    tstore.setLocations(Collections.singletonList(new Assignment(notRoot,server)));
    Assert.fail("should not get here");
  }
 catch (  IllegalArgumentException ex) {
  }
  try {
    tstore.setFutureLocations(Collections.singletonList(new Assignment(notRoot,server)));
    Assert.fail("should not get here");
  }
 catch (  IllegalArgumentException ex) {
  }
  TabletLocationState broken=null;
  try {
    broken=new TabletLocationState(notRoot,server,null,null,null,false);
  }
 catch (  BadLocationStateException e) {
    fail("Unexpected error " + e);
  }
  try {
    tstore.unassign(Collections.singletonList(broken),null);
    Assert.fail("should not get here");
  }
 catch (  IllegalArgumentException ex) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.minicluster.MiniAccumuloClusterExistingZooKeepersTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void canConnectViaExistingZooKeeper() throws Exception {
  Connector conn=accumulo.getConnector("root",SECRET);
  Instance instance=conn.getInstance();
  assertEquals(zooKeeper.getConnectString(),instance.getZooKeepers());
  String tableName="foo";
  conn.tableOperations().create(tableName);
  Map<String,String> tableIds=conn.tableOperations().tableIdMap();
  assertTrue(tableIds.containsKey(tableName));
  String zkTablePath=String.format("/accumulo/%s/tables/%s/name",instance.getInstanceID(),tableIds.get(tableName));
  try (CuratorFramework client=CuratorFrameworkFactory.newClient(zooKeeper.getConnectString(),new RetryOneTime(1))){
    client.start();
    assertNotNull(client.checkExists().forPath(zkTablePath));
    assertEquals(tableName,new String(client.getData().forPath(zkTablePath)));
  }
 }

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.minicluster.MiniAccumuloClusterTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomPorts() throws Exception {
  File confDir=new File(testDir,"conf");
  File accumuloSite=new File(confDir,"accumulo-site.xml");
  Configuration conf=new Configuration(false);
  conf.addResource(accumuloSite.toURI().toURL());
  for (  Property randomPortProp : new Property[]{Property.TSERV_CLIENTPORT,Property.MONITOR_PORT,Property.MONITOR_LOG4J_PORT,Property.MASTER_CLIENTPORT,Property.TRACE_PORT,Property.GC_PORT}) {
    String value=conf.get(randomPortProp.getKey());
    Assert.assertNotNull("Found no value for " + randomPortProp,value);
    Assert.assertEquals("0",value);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.minicluster.impl.MiniAccumuloClusterImplTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void saneMonitorInfo() throws Exception {
  MasterMonitorInfo stats;
  while (true) {
    stats=accumulo.getMasterMonitorInfo();
    if (null != stats.tServerInfo && stats.tServerInfo.size() == NUM_TSERVERS) {
      break;
    }
  }
  List<MasterState> validStates=Arrays.asList(MasterState.values());
  List<MasterGoalState> validGoals=Arrays.asList(MasterGoalState.values());
  Assert.assertTrue("master state should be valid.",validStates.contains(stats.state));
  Assert.assertTrue("master goal state should be in " + validGoals + ". is "+ stats.goalState,validGoals.contains(stats.goalState));
  Assert.assertNotNull("should have a table map.",stats.tableMap);
  Assert.assertTrue("root table should exist in " + stats.tableMap.keySet(),stats.tableMap.keySet().contains(RootTable.ID));
  Assert.assertTrue("meta table should exist in " + stats.tableMap.keySet(),stats.tableMap.keySet().contains(MetadataTable.ID));
  Assert.assertTrue("our test table should exist in " + stats.tableMap.keySet(),stats.tableMap.keySet().contains(testTableID));
  Assert.assertNotNull("there should be tservers.",stats.tServerInfo);
  Assert.assertEquals(NUM_TSERVERS,stats.tServerInfo.size());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testAccurateProcessListReturned() throws Exception {
  Map<ServerType,Collection<ProcessReference>> procs=accumulo.getProcesses();
  Assert.assertTrue(procs.containsKey(ServerType.GARBAGE_COLLECTOR));
  for (  ServerType t : new ServerType[]{ServerType.MASTER,ServerType.TABLET_SERVER,ServerType.ZOOKEEPER}) {
    Assert.assertTrue(procs.containsKey(t));
    Collection<ProcessReference> procRefs=procs.get(t);
    Assert.assertTrue(1 <= procRefs.size());
    for (    ProcessReference procRef : procRefs) {
      Assert.assertNotNull(procRef);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.conf.NamespaceConfigurationTest </h4><pre class="type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGet_SkipParentIfAccumuloNS(){
  c=new NamespaceConfiguration(Namespaces.ACCUMULO_NAMESPACE_ID,instance,parent);
  c.setZooCacheFactory(zcf);
  Property p=Property.INSTANCE_SECRET;
  expect(zc.get(ZooUtil.getRoot(iid) + Constants.ZNAMESPACES + "/"+ Namespaces.ACCUMULO_NAMESPACE_ID+ Constants.ZNAMESPACE_CONF+ "/"+ p.getKey())).andReturn(null);
  replay(zc);
  assertNull(c.get(Property.INSTANCE_SECRET));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.conf.ServerConfigurationFactoryTest </h4><pre class="type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetSiteConfiguration(){
  ready();
  SiteConfiguration c=scf.getSiteConfiguration();
  assertNotNull(c);
}

</code></pre>

<br>
<pre class="type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetDefaultConfiguration(){
  ready();
  DefaultConfiguration c=scf.getDefaultConfiguration();
  assertNotNull(c);
}

</code></pre>

<br>
<pre class="type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetConfiguration(){
  mockInstanceForConfig();
  ready();
  AccumuloConfiguration c=scf.getConfiguration();
  assertNotNull(c);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.conf.ZooCachePropertyAccessorTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testGet_Null_NoParent(){
  expect(zc.get(FULL_PATH)).andReturn(null);
  replay(zc);
  assertNull(a.get(PROP,PATH,null));
}

</code></pre>

<br>
<pre class="type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGet_Parent_Null(){
  AccumuloConfiguration parent=createMock(AccumuloConfiguration.class);
  expect(parent.get(PROP)).andReturn(null);
  replay(parent);
  expect(zc.get(FULL_PATH)).andReturn(null);
  replay(zc);
  assertNull(a.get(PROP,PATH,parent));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.conf.ZooConfigurationFactoryTest </h4><pre class="type-3 type-15 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetInstance(){
  expect(instance.getInstanceID()).andReturn("iid");
  expectLastCall().anyTimes();
  expect(instance.getZooKeepers()).andReturn("localhost");
  expect(instance.getZooKeepersSessionTimeOut()).andReturn(120000);
  replay(instance);
  expect(zcf.getZooCache("localhost",120000)).andReturn(zc);
  replay(zcf);
  ZooConfiguration c=zconff.getInstance(instance,zcf,parent);
  assertNotNull(c);
  assertSame(c,zconff.getInstance(instance,zcf,parent));
  verify(instance);
  verify(zcf);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.constraints.MetadataConstraintsTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBulkFileCheck(){
  MetadataConstraints mc=new TestMetadataConstraints();
  Mutation m;
  List<Short> violations;
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("12345".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile"),new DataFileValue(1,1).encodeAsValue());
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)8),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("9".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile"),new DataFileValue(1,1).encodeAsValue());
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)8),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile"),new DataFileValue(1,1).encodeAsValue());
  violations=mc.check(null,m);
  assertNull(violations);
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)8),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile"),new DataFileValue(1,1).encodeAsValue());
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile2"),new Value("7".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile2"),new DataFileValue(1,1).encodeAsValue());
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)8),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile"),new DataFileValue(1,1).encodeAsValue());
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile2"),new Value("5".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile2"),new DataFileValue(1,1).encodeAsValue());
  violations=mc.check(null,m);
  assertNull(violations);
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  m.put(DataFileColumnFamily.NAME,new Text("/someFile"),new DataFileValue(1,1).encodeAsValue());
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile2"),new Value("5".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)8),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.put(m,new Value("/t1".getBytes()));
  violations=mc.check(null,m);
  assertNull(violations);
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("12345".getBytes()));
  TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.put(m,new Value("/t1".getBytes()));
  violations=mc.check(null,m);
  assertNull(violations);
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("5".getBytes()));
  m.put(TabletsSection.CurrentLocationColumnFamily.NAME,new Text("789"),new Value("127.0.0.1:9997".getBytes()));
  violations=mc.check(null,m);
  assertNull(violations);
  m=new Mutation(new Text("0;foo"));
  m.put(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"),new Value("12345".getBytes()));
  m.put(TabletsSection.CurrentLocationColumnFamily.NAME,new Text("789"),new Value("127.0.0.1:9997".getBytes()));
  violations=mc.check(null,m);
  assertNull(violations);
  m=new Mutation(new Text("0;foo"));
  m.putDelete(TabletsSection.BulkFileColumnFamily.NAME,new Text("/someFile"));
  violations=mc.check(null,m);
  assertNull(violations);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheck(){
  Logger.getLogger(AccumuloConfiguration.class).setLevel(Level.ERROR);
  Mutation m=new Mutation(new Text("0;foo"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("1foo".getBytes()));
  MetadataConstraints mc=new MetadataConstraints();
  List<Short> violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)3),violations.get(0));
  m=new Mutation(new Text("0:foo"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("1poo".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)4),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  m.put(new Text("bad_column_name"),new Text(""),new Value("e".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)2),violations.get(0));
  m=new Mutation(new Text("!!<"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("1poo".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(2,violations.size());
  assertEquals(Short.valueOf((short)4),violations.get(0));
  assertEquals(Short.valueOf((short)5),violations.get(1));
  m=new Mutation(new Text("0;foo"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)6),violations.get(0));
  m=new Mutation(new Text("0;foo"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("bar".getBytes()));
  violations=mc.check(null,m);
  assertEquals(null,violations);
  m=new Mutation(new Text("!0<"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("bar".getBytes()));
  violations=mc.check(null,m);
  assertEquals(null,violations);
  m=new Mutation(new Text("!1<"));
  TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.put(m,new Value("bar".getBytes()));
  violations=mc.check(null,m);
  assertNotNull(violations);
  assertEquals(1,violations.size());
  assertEquals(Short.valueOf((short)4),violations.get(0));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.fs.FileRefTest </h4><pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEqualsAndHash(){
  Assert.assertEquals(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf"),new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf"));
  Assert.assertEquals(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf"),new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf"));
  Assert.assertNotEquals(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0005.rf"),new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf"));
  Assert.assertNotEquals(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0005.rf"),new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf"));
  HashMap<FileRef,String> refMap=new HashMap<FileRef,String>();
  refMap.put(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf"),"7");
  refMap.put(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0005.rf"),"8");
  Assert.assertNull(refMap.get("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0006.rf"));
  Assert.assertEquals(refMap.get(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf")),"7");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf")),"7");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://1.2.3.4//accumulo/tables/2a//t-0003//C0004.rf")),"7");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://nn1/accumulo/tables/2a//t-0003//C0004.rf")),"7");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0005.rf")),"8");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0005.rf")),"8");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a//t-0003/C0005.rf")),"8");
  Assert.assertEquals(refMap.get(new FileRef("hdfs://nn1/accumulo/tables//2a/t-0003/C0005.rf")),"8");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.fs.FileTypeTest </h4><pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVolumeExtraction(){
  Assert.assertEquals(new Path("file:/a/accumulo"),FileType.TABLE.getVolume(new Path("file:/a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:///a/accumulo"),FileType.TABLE.getVolume(new Path("file:/a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:///a/accumulo"),FileType.TABLE.getVolume(new Path("file:///a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/a/accumulo"),FileType.TABLE.getVolume(new Path("file:///a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/a"),FileType.TABLE.getVolume(new Path("file:/a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:///a"),FileType.TABLE.getVolume(new Path("file:/a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:///a"),FileType.TABLE.getVolume(new Path("file:///a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/a"),FileType.TABLE.getVolume(new Path("file:///a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("file:/a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("file:///a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("file:/a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("file:///a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/accumulo"),FileType.TABLE.getVolume(new Path("file:/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/accumulo"),FileType.TABLE.getVolume(new Path("file:///accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/"),FileType.TABLE.getVolume(new Path("file:/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/"),FileType.TABLE.getVolume(new Path("file:///tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("file:/a"),FileType.WAL.getVolume(new Path("file:/a/wal/1.2.3.4/aaa-bbb-ccc-ddd")));
  Assert.assertNull(FileType.WAL.getVolume(new Path("1.2.3.4/aaa-bbb-ccc-ddd")));
  Assert.assertNull(FileType.TABLE.getVolume(new Path("../2b/t-001/C00.rf")));
  Assert.assertNull(FileType.TABLE.getVolume(new Path("/t-001/C00.rf")));
  Assert.assertEquals(new Path("hdfs://nn1/accumulo"),FileType.TABLE.getVolume(new Path("hdfs://nn1/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("hdfs://nn1/a/accumulo"),FileType.TABLE.getVolume(new Path("hdfs://nn1/a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("hdfs://nn1/"),FileType.TABLE.getVolume(new Path("hdfs://nn1/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("hdfs://nn1/a"),FileType.TABLE.getVolume(new Path("hdfs://nn1/a/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("hdfs://nn1/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("hdfs://nn1/a/accumulo/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("hdfs://nn1/tables/2b/t-001/C00.rf")));
  Assert.assertEquals(new Path("tables/2b/t-001/C00.rf"),FileType.TABLE.removeVolume(new Path("hdfs://nn1/a/tables/2b/t-001/C00.rf")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.fs.VolumeUtilTest </h4><pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSwitchVolumesDifferentTargetDepths(){
  List<Pair<Path,Path>> replacements=new ArrayList<Pair<Path,Path>>();
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1/accumulo"),new Path("viewfs:/path1/path2")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1:9000/accumulo"),new Path("viewfs:/path1/path2")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn2/accumulo"),new Path("viewfs:/path3")));
  Assert.assertEquals("viewfs:/path1/path2/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/path1/path2/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1:9000/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/path3/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn2/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("viewfs:/path1/path2/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("file:/nn1/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  replacements.clear();
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1/d1/accumulo"),new Path("viewfs:/path1/path2")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1:9000/d1/accumulo"),new Path("viewfs:/path1/path2")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn2/d2/accumulo"),new Path("viewfs:/path3")));
  Assert.assertEquals("viewfs:/path1/path2/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1/d1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/path1/path2/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1:9000/d1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/path3/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn2/d2/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("viewfs:/path1/path2/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("file:/nn1/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("hdfs://nn1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
}

</code></pre>

<br>
<pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSwitchVolumesDifferentSourceDepths(){
  List<Pair<Path,Path>> replacements=new ArrayList<Pair<Path,Path>>();
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1/accumulo"),new Path("viewfs:/a")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1:9000/accumulo"),new Path("viewfs:/a")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn2/accumulo"),new Path("viewfs:/b")));
  Assert.assertEquals("viewfs:/a/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/a/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1:9000/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/b/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn2/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("viewfs:/a/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("file:/nn1/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  replacements.clear();
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1/d1/accumulo"),new Path("viewfs:/a")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1:9000/d1/accumulo"),new Path("viewfs:/a")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn2/d2/accumulo"),new Path("viewfs:/b")));
  Assert.assertEquals("viewfs:/a/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1/d1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/a/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1:9000/d1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/b/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn2/d2/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("viewfs:/a/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("file:/nn1/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("hdfs://nn1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
}

</code></pre>

<br>
<pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSwitchVolume(){
  List<Pair<Path,Path>> replacements=new ArrayList<Pair<Path,Path>>();
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1/accumulo"),new Path("viewfs:/a/accumulo")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1:9000/accumulo"),new Path("viewfs:/a/accumulo")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn2/accumulo"),new Path("viewfs:/b/accumulo")));
  Assert.assertEquals("viewfs:/a/accumulo/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/a/accumulo/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1:9000/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/b/accumulo/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn2/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("viewfs:/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("file:/nn1/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  replacements.clear();
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1/d1/accumulo"),new Path("viewfs:/a/accumulo")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn1:9000/d1/accumulo"),new Path("viewfs:/a/accumulo")));
  replacements.add(new Pair<Path,Path>(new Path("hdfs://nn2/d2/accumulo"),new Path("viewfs:/b/accumulo")));
  Assert.assertEquals("viewfs:/a/accumulo/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1/d1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/a/accumulo/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn1:9000/d1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertEquals("viewfs:/b/accumulo/tables/t-00000/C000.rf",VolumeUtil.switchVolume("hdfs://nn2/d2/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("viewfs:/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("file:/nn1/a/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
  Assert.assertNull(VolumeUtil.switchVolume("hdfs://nn1/accumulo/tables/t-00000/C000.rf",FileType.TABLE,replacements));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.master.LiveTServerSetTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSessionIds(){
  Map<String,TServerInfo> servers=new HashMap<>();
  TServerConnection mockConn=EasyMock.createMock(TServerConnection.class);
  TServerInfo server1=new TServerInfo(new TServerInstance(HostAndPort.fromParts("localhost",1234),"5555"),mockConn);
  servers.put("server1",server1);
  LiveTServerSet tservers=new LiveTServerSet(EasyMock.createMock(ClientContext.class),EasyMock.createMock(Listener.class));
  assertEquals(server1.instance,tservers.find(servers,"localhost:1234"));
  assertNull(tservers.find(servers,"localhost:4321"));
  assertEquals(server1.instance,tservers.find(servers,"localhost:1234[5555]"));
  assertNull(tservers.find(servers,"localhost:1234[55755]"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.master.state.MergeInfoTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstruction_NoArgs(){
  mi=new MergeInfo();
  assertEquals(MergeState.NONE,mi.getState());
  assertNull(mi.getExtent());
  assertEquals(MergeInfo.Operation.MERGE,mi.getOperation());
  assertFalse(mi.isDelete());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.master.state.TabletLocationStateTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testGetServer_None() throws Exception {
  tls=new TabletLocationState(keyExtent,null,null,null,walogs,true);
  assertNull(tls.getServer());
}

</code></pre>

<br>
<pre class="type-5 type-15 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstruction_NoCurrent() throws Exception {
  tls=new TabletLocationState(keyExtent,future,null,last,walogs,true);
  assertSame(keyExtent,tls.extent);
  assertSame(future,tls.future);
  assertNull(tls.current);
  assertSame(last,tls.last);
  assertSame(walogs,tls.walogs);
  assertTrue(tls.chopped);
}

</code></pre>

<br>
<pre class="type-5 type-15 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstruction_NoFuture() throws Exception {
  tls=new TabletLocationState(keyExtent,null,current,last,walogs,true);
  assertSame(keyExtent,tls.extent);
  assertNull(tls.future);
  assertSame(current,tls.current);
  assertSame(last,tls.last);
  assertSame(walogs,tls.walogs);
  assertTrue(tls.chopped);
}

</code></pre>

<br>
<pre class="type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstruction_NoFuture_NoWalogs() throws Exception {
  tls=new TabletLocationState(keyExtent,null,current,last,null,true);
  assertNotNull(tls.walogs);
  assertEquals(0,tls.walogs.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.problems.ProblemReportTest </h4><pre class="type-3 type-15 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetters(){
  long now=System.currentTimeMillis();
  r=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE,SERVER,null,now);
  assertEquals(TABLE,r.getTableName());
  assertSame(ProblemType.FILE_READ,r.getProblemType());
  assertEquals(RESOURCE,r.getResource());
  assertEquals(SERVER,r.getServer());
  assertEquals(now,r.getTime());
  assertNull(r.getException());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.rpc.SaslServerConnectionParamsTest </h4><pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultParamsAsServer() throws Exception {
  testUser.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      final ClientConfiguration clientConf=ClientConfiguration.loadDefault();
      final String primary="accumulo";
      clientConf.withSasl(true,primary);
      final AccumuloConfiguration rpcConf=ClientContext.convertClientConfig(clientConf);
      assertEquals("true",clientConf.get(ClientProperty.INSTANCE_RPC_SASL_ENABLED));
      PasswordToken pw=new PasswordToken("fake");
      ByteArrayOutputStream baos=new ByteArrayOutputStream();
      pw.write(new DataOutputStream(baos));
      SystemToken token=new SystemToken();
      token.readFields(new DataInputStream(new ByteArrayInputStream(baos.toByteArray())));
      final SaslConnectionParams saslParams=new SaslServerConnectionParams(rpcConf,token);
      assertEquals(primary,saslParams.getKerberosServerPrimary());
      assertEquals(SaslMechanism.GSSAPI,saslParams.getMechanism());
      assertNull(saslParams.getCallbackHandler());
      final QualityOfProtection defaultQop=QualityOfProtection.get(Property.RPC_SASL_QOP.getDefaultValue());
      assertEquals(defaultQop,saslParams.getQualityOfProtection());
      Map<String,String> properties=saslParams.getSaslProperties();
      assertEquals(1,properties.size());
      assertEquals(defaultQop.getQuality(),properties.get(Sasl.QOP));
      assertEquals(username,saslParams.getPrincipal());
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.UserImpersonationTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoHostByDefault(){
  String server="server";
  setValidUsers(server,"*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertTrue(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleUserAndHost(){
  String server="server", host="single_host.domain.com", client="single_client";
  setValidHosts(server,host);
  setValidUsers(server,client);
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getUsers().contains(client));
  assertTrue(uwh.getHosts().contains(host));
  assertFalse(uwh.getUsers().contains("some_other_user"));
  assertFalse(uwh.getHosts().contains("other_host.domain.com"));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnyUserAndHosts(){
  String server="server";
  setValidHosts(server,"*");
  setValidUsers(server,"*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertTrue(uwh.acceptsAllHosts());
  assertTrue(uwh.acceptsAllUsers());
  assertEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleExplicitHosts(){
  String server="server", host1="host1", host2="host2", host3="host3";
  setValidHosts(server,Joiner.on(',').join(host1,host2,host3));
  setValidUsers(server,"*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertTrue(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getHosts().contains(host1));
  assertTrue(uwh.getHosts().contains(host2));
  assertTrue(uwh.getHosts().contains(host3));
  assertFalse(uwh.getHosts().contains("other_host"));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleExplicitUsers(){
  String server="server", client1="client1", client2="client2", client3="client3";
  setValidHosts(server,"*");
  setValidUsers(server,Joiner.on(',').join(client1,client2,client3));
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertTrue(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getUsers().contains(client1));
  assertTrue(uwh.getUsers().contains(client2));
  assertTrue(uwh.getUsers().contains(client3));
  assertFalse(uwh.getUsers().contains("other_client"));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleUser() throws Exception {
  final String server="server/hostname@EXAMPLE.COM", client="client@EXAMPLE.COM";
  conf.set(Property.INSTANCE_RPC_SASL_PROXYUSERS.getKey() + server + ".users",client);
  conf.set(Property.INSTANCE_RPC_SASL_PROXYUSERS.getKey() + server + ".hosts","*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertTrue(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertTrue(uwh.getUsers().contains(client));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoUsersByDefault(){
  String server="server";
  setValidHosts(server,"*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertTrue(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleAllowedImpersonators(){
  String server1="server1", server2="server2", host1="host1", host2="host2", host3="host3", client1="client1", client2="client2", client3="client3";
  setValidHosts(server1,Joiner.on(',').join(host1,host2));
  setValidUsers(server1,Joiner.on(',').join(client1,client2));
  setValidHosts(server2,host3);
  setValidUsers(server2,client3);
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server1);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getUsers().contains(client1));
  assertTrue(uwh.getUsers().contains(client2));
  assertFalse(uwh.getUsers().contains(client3));
  assertFalse(uwh.getUsers().contains("other_client"));
  assertTrue(uwh.getHosts().contains(host1));
  assertTrue(uwh.getHosts().contains(host2));
  assertFalse(uwh.getHosts().contains(host3));
  assertFalse(uwh.getHosts().contains("other_host"));
  uwh=impersonation.get(server2);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertFalse(uwh.getUsers().contains(client1));
  assertFalse(uwh.getUsers().contains(client2));
  assertTrue(uwh.getUsers().contains(client3));
  assertFalse(uwh.getUsers().contains("other_client"));
  assertFalse(uwh.getHosts().contains(host1));
  assertFalse(uwh.getHosts().contains(host2));
  assertTrue(uwh.getHosts().contains(host3));
  assertFalse(uwh.getHosts().contains("other_host"));
  assertNull(impersonation.get(client3));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleExplicitUsersHosts(){
  String server="server", host1="host1", host2="host2", host3="host3", client1="client1", client2="client2", client3="client3";
  setValidHosts(server,Joiner.on(',').join(host1,host2,host3));
  setValidUsers(server,Joiner.on(',').join(client1,client2,client3));
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getUsers().contains(client1));
  assertTrue(uwh.getUsers().contains(client2));
  assertTrue(uwh.getUsers().contains(client3));
  assertFalse(uwh.getUsers().contains("other_client"));
  assertTrue(uwh.getHosts().contains(host1));
  assertTrue(uwh.getHosts().contains(host2));
  assertTrue(uwh.getHosts().contains(host3));
  assertFalse(uwh.getHosts().contains("other_host"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.delegation.AuthenticationTokenSecretManagerTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveKey(){
  long tokenLifetime=60 * 1000;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  AuthenticationKey authKey=new AuthenticationKey(1,0,tokenLifetime,keyGen.generateKey());
  secretManager.addKey(authKey);
  Map<Integer,AuthenticationKey> keys=secretManager.getKeys();
  assertNotNull(keys);
  assertEquals(1,keys.size());
  assertEquals(authKey,Iterables.getOnlyElement(keys.values()));
  assertTrue(secretManager.removeKey(authKey.getKeyId()));
  assertEquals(0,secretManager.getKeys().size());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestrictExpirationDate() throws Exception {
  long then=System.currentTimeMillis();
  long tokenLifetime=60 * 60 * 1000;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  secretManager.addKey(new AuthenticationKey(1,then,then + tokenLifetime,keyGen.generateKey()));
  cfg.setTokenLifetime(1,TimeUnit.MINUTES);
  String principal="user@EXAMPLE.COM";
  Entry<Token<AuthenticationTokenIdentifier>,AuthenticationTokenIdentifier> pair=secretManager.generateToken(principal,cfg);
  assertNotNull(pair);
  long now=System.currentTimeMillis();
  long actualExpiration=pair.getValue().getExpirationDate();
  long approximateLifetime=actualExpiration - now;
  log.info("actualExpiration={}, approximateLifetime={}",actualExpiration,approximateLifetime);
  assertTrue("Expected lifetime to be on thet order of the token lifetime, but was " + approximateLifetime,approximateLifetime <= cfg.getTokenLifetime(TimeUnit.MILLISECONDS));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGenerateToken() throws Exception {
  long then=System.currentTimeMillis();
  long tokenLifetime=60 * 1000;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  secretManager.addKey(new AuthenticationKey(1,then,then + tokenLifetime,keyGen.generateKey()));
  String principal="user@EXAMPLE.COM";
  Entry<Token<AuthenticationTokenIdentifier>,AuthenticationTokenIdentifier> pair=secretManager.generateToken(principal,cfg);
  assertNotNull(pair);
  Token<AuthenticationTokenIdentifier> token=pair.getKey();
  assertNotNull(token);
  assertEquals(AuthenticationTokenIdentifier.TOKEN_KIND,token.getKind());
  AuthenticationTokenIdentifier id=new AuthenticationTokenIdentifier();
  id.readFields(new DataInputStream(new ByteArrayInputStream(token.getIdentifier())));
  long now=System.currentTimeMillis();
  assertTrue("Issue date did not fall within the expected upper bound. Expected less than " + now + ", but was "+ id.getIssueDate(),id.getIssueDate() <= now);
  assertTrue("Issue date did not fall within the expected lower bound. Expected greater than " + then + ", but was "+ id.getIssueDate(),id.getIssueDate() >= then);
  assertEquals(id.getIssueDate() + tokenLifetime,id.getExpirationDate());
  assertEquals(instanceId,id.getInstanceId());
  assertEquals(pair.getValue(),id);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddKey(){
  long tokenLifetime=60 * 1000;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  AuthenticationKey authKey=new AuthenticationKey(1,0,tokenLifetime,keyGen.generateKey());
  secretManager.addKey(authKey);
  Map<Integer,AuthenticationKey> keys=secretManager.getKeys();
  assertNotNull(keys);
  assertEquals(1,keys.size());
  assertEquals(authKey,Iterables.getOnlyElement(keys.values()));
  secretManager.addKey(authKey);
  keys=secretManager.getKeys();
  assertNotNull(keys);
  assertEquals(1,keys.size());
  assertEquals(authKey,Iterables.getOnlyElement(keys.values()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.delegation.ZooAuthenticationKeyWatcherTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void missingKeyAfterGetChildren() throws Exception {
  List<String> children=Arrays.asList("1");
  AuthenticationKey key1=new AuthenticationKey(1,0l,10000l,keyGen.generateKey());
  expect(zk.exists(baseNode,keyWatcher)).andReturn(true);
  expect(zk.getChildren(baseNode,keyWatcher)).andReturn(children);
  expect(zk.getData(baseNode + "/" + key1.getKeyId(),keyWatcher,null)).andThrow(new NoNodeException());
  replay(zk,instance);
  keyWatcher.updateAuthKeys();
  verify(zk,instance);
  assertEquals("Secret manager should be empty after a disconnect",0,secretManager.getKeys().size());
  assertNull("Current key should be null",secretManager.getCurrentKey());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitialUpdateNoNode() throws Exception {
  expect(zk.exists(baseNode,keyWatcher)).andReturn(false);
  replay(zk,instance);
  keyWatcher.updateAuthKeys();
  verify(zk,instance);
  assertEquals(0,secretManager.getKeys().size());
  assertNull(secretManager.getCurrentKey());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.tablets.TabletTimeTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test @org.junit.Ignore public void testMaxMetadataTime_Null3(){
  assertNull(TabletTime.maxMetadataTime(null,null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.AdminCommandsTest </h4><pre class="type-5 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDumpConfigCommand(){
  Admin.DumpConfigCommand cmd=new Admin.DumpConfigCommand();
  assertEquals(0,cmd.tables.size());
  assertFalse(cmd.allConfiguration);
  assertFalse(cmd.systemConfiguration);
  assertFalse(cmd.namespaceConfiguration);
  assertFalse(cmd.users);
  assertNull(cmd.directory);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheckTabletsCommand(){
  Admin.CheckTabletsCommand cmd=new Admin.CheckTabletsCommand();
  assertFalse(cmd.fixFiles);
  assertNull(cmd.table);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.DefaultMapTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultMap(){
  Integer value=new DefaultMap<String,Integer>(0).get("test");
  assertNotNull(value);
  assertEquals(Integer.valueOf(0),value);
  value=new DefaultMap<String,Integer>(1).get("test");
  assertNotNull(value);
  assertEquals(Integer.valueOf(1),value);
  AtomicInteger canConstruct=new DefaultMap<String,AtomicInteger>(new AtomicInteger(1)).get("test");
  assertNotNull(canConstruct);
  assertEquals(new AtomicInteger(0).get(),canConstruct.get());
  DefaultMap<String,String> map=new DefaultMap<String,String>("");
  assertEquals(map.get("foo"),"");
  map.put("foo","bar");
  assertEquals(map.get("foo"),"bar");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.commands.GetAuthsCommandTest </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void removeAccumuloNamespaceTables(){
  Authorizations auths=new Authorizations("AAA","aaa","bbb","BBB");
  GetAuthsCommand cmd=new GetAuthsCommand();
  List<String> sorted=cmd.sortAuthorizations(auths);
  assertNotNull(sorted);
  assertEquals(sorted.size(),4);
  assertEquals(sorted.get(0),"AAA");
  assertEquals(sorted.get(1),"aaa");
  assertEquals(sorted.get(2),"BBB");
  assertEquals(sorted.get(3),"bbb");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.format.DeleterFormatterTest </h4><pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testYes() throws IOException {
  input.set("y\nyes\n");
  data.put(new Key("z"),new Value("v2".getBytes(UTF_8)));
  formatter=new DeleterFormatter(writer,data.entrySet(),new FormatterConfig().setPrintTimestamps(true),shellState,false);
  assertTrue(formatter.hasNext());
  assertNull(formatter.next());
  verify("[DELETED]"," r ","cf","cq","value");
  assertTrue(formatter.hasNext());
  assertNull(formatter.next());
  verify("[DELETED]"," z ","v2");
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNo() throws IOException {
  input.set("no\n");
  data.put(new Key("z"),new Value("v2".getBytes(UTF_8)));
  formatter=new DeleterFormatter(writer,data.entrySet(),new FormatterConfig().setPrintTimestamps(true),shellState,false);
  assertTrue(formatter.hasNext());
  assertNull(formatter.next());
  verify("[SKIPPED]"," r ","cf","cq","value");
  assertTrue(formatter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoConfirmation() throws IOException {
  input.set("");
  data.put(new Key("z"),new Value("v2".getBytes(UTF_8)));
  formatter=new DeleterFormatter(writer,data.entrySet(),new FormatterConfig().setPrintTimestamps(true),shellState,false);
  assertTrue(formatter.hasNext());
  assertNull(formatter.next());
  verify("[SKIPPED]"," r ","cf","cq","value");
  assertFalse(formatter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMutationException(){
  formatter=new DeleterFormatter(exceptionWriter,data.entrySet(),new FormatterConfig().setPrintTimestamps(true),shellState,true);
  assertTrue(formatter.hasNext());
  assertNull(formatter.next());
  assertFalse(formatter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingle() throws IOException {
  formatter=new DeleterFormatter(writer,data.entrySet(),new FormatterConfig().setPrintTimestamps(true),shellState,true);
  assertTrue(formatter.hasNext());
  assertNull(formatter.next());
  verify("[DELETED]"," r ","cf","cq","value");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.start.classloader.vfs.providers.ReadOnlyHdfsFileProviderTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEquals() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  FileObject file2=manager.resolveFile(TEST_FILE1);
  Assert.assertEquals(file,file2);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsReadable() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Assert.assertTrue(file.isReadable());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAttributes() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Map<String,Object> attributes=file.getContent().getAttributes();
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.BLOCK_SIZE.toString()));
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.GROUP.toString()));
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.LAST_ACCESS_TIME.toString()));
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.LENGTH.toString()));
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.MODIFICATION_TIME.toString()));
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.OWNER.toString()));
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.PERMISSIONS.toString()));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetContentSize() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Assert.assertEquals(0,file.getContent().getSize());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetInputStream() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  file.getContent().getInputStream().close();
}

</code></pre>

<br>
<pre class="type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testInit() throws Exception {
  FileObject fo=manager.resolveFile(TEST_FILE1);
  Assert.assertNotNull(fo);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomAccessContent2() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  file.getContent().getRandomAccessContent(RandomAccessMode.READ).close();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsWritable() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Assert.assertFalse(file.isWriteable());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsHidden() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Assert.assertFalse(file.isHidden());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExistsSucceeds() throws Exception {
  FileObject fo=manager.resolveFile(TEST_FILE1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  @SuppressWarnings("unused") FileObject f=createTestFile(hdfs);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExistsFails() throws Exception {
  FileObject fo=manager.resolveFile(TEST_FILE1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=FileSystemException.class) public void testRandomAccessContent() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  file.getContent().getRandomAccessContent(RandomAccessMode.READWRITE).close();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLastModificationTime() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Assert.assertFalse(-1 == file.getContent().getLastModifiedTime());
}

</code></pre>

<br>
<pre class="type-7 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=UnsupportedOperationException.class) public void testCanRenameTo() throws Exception {
  FileObject fo=createTestFile(this.hdfs);
  Assert.assertNotNull(fo);
  fo.canRenameTo(fo);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoListChildren() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  FileObject dir=file.getParent();
  FileObject[] children=dir.getChildren();
  Assert.assertTrue(children.length == 1);
  Assert.assertTrue(children[0].getName().equals(file.getName()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.BadDeleteMarkersCreatedIT </h4><pre class="type-9 type-8 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  String tableName=getUniqueNames(1)[0];
  Connector c=getConnector();
  log.info("Creating table to be deleted");
  c.tableOperations().create(tableName);
  final String tableId=c.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Expected to find a tableId",tableId);
  SortedSet<Text> splits=new TreeSet<Text>();
  for (int i=0; i < 10; i++) {
    splits.add(new Text("" + i));
  }
  c.tableOperations().addSplits(tableName,splits);
  c.tableOperations().deleteRows(tableName,null,null);
  c.tableOperations().delete(tableName);
  log.info("Sleeping to let garbage collector run");
  sleepUninterruptibly(timeoutFactor * 15,TimeUnit.SECONDS);
  log.info("Verifying that delete markers were deleted");
  Scanner scanner=c.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  scanner.setRange(MetadataSchema.DeletesSection.getRange());
  for (  Entry<Key,Value> entry : scanner) {
    String row=entry.getKey().getRow().toString();
    if (!row.contains("/" + tableId + "/")) {
      log.info("Ignoring delete entry for a table other than the one we deleted");
      continue;
    }
    Assert.fail("Delete entry should have been deleted by the garbage collector: " + entry.getKey().getRow().toString());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.FileArchiveIT </h4><pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnusuedFilesAreArchived() throws Exception {
  final Connector conn=getConnector();
  final String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  final String tableId=conn.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Could not get table ID",tableId);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("row");
  m.put("","","value");
  bw.addMutation(m);
  bw.close();
  conn.tableOperations().compact(tableName,null,null,true,true);
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  final String file=entry.getKey().getColumnQualifier().toString();
  final Path p=new Path(file);
  conn.tableOperations().compact(tableName,null,null,true,true);
  log.info("File for table: " + file);
  FileSystem fs=getCluster().getFileSystem();
  int i=0;
  while (fs.exists(p)) {
    i++;
    Thread.sleep(1000);
    if (0 == i % 10) {
      log.info("Waited " + i + " iterations, file still exists");
    }
  }
  log.info("File was removed");
  String filePath=p.toUri().getPath().substring(getCluster().getConfig().getAccumuloDir().toString().length());
  log.info("File relative to accumulo dir: " + filePath);
  Path fileArchiveDir=new Path(getCluster().getConfig().getAccumuloDir().toString(),ServerConstants.FILE_ARCHIVE_DIR);
  Assert.assertTrue("File archive directory didn't exist",fs.exists(fileArchiveDir));
  Path archivedFile=new Path(fileArchiveDir,filePath.substring(1));
  Assert.assertTrue("File doesn't exists in archive directory: " + archivedFile,fs.exists(archivedFile));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnusuedFilesAndDeletedTable() throws Exception {
  final Connector conn=getConnector();
  final String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  final String tableId=conn.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Could not get table ID",tableId);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("row");
  m.put("","","value");
  bw.addMutation(m);
  bw.close();
  conn.tableOperations().compact(tableName,null,null,true,true);
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  final String file=entry.getKey().getColumnQualifier().toString();
  final Path p=new Path(file);
  conn.tableOperations().compact(tableName,null,null,true,true);
  log.info("File for table: " + file);
  FileSystem fs=getCluster().getFileSystem();
  int i=0;
  while (fs.exists(p)) {
    i++;
    Thread.sleep(1000);
    if (0 == i % 10) {
      log.info("Waited " + i + " iterations, file still exists");
    }
  }
  log.info("File was removed");
  String filePath=p.toUri().getPath().substring(getCluster().getConfig().getAccumuloDir().toString().length());
  log.info("File relative to accumulo dir: " + filePath);
  Path fileArchiveDir=new Path(getCluster().getConfig().getAccumuloDir().toString(),ServerConstants.FILE_ARCHIVE_DIR);
  Assert.assertTrue("File archive directory didn't exist",fs.exists(fileArchiveDir));
  Path archivedFile=new Path(fileArchiveDir,filePath.substring(1));
  Assert.assertTrue("File doesn't exists in archive directory: " + archivedFile,fs.exists(archivedFile));
  conn.tableOperations().offline(tableName,true);
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  entry=Iterables.getOnlyElement(s);
  final String finalFile=entry.getKey().getColumnQualifier().toString();
  final Path finalPath=new Path(finalFile);
  conn.tableOperations().delete(tableName);
  log.info("File for table: " + finalPath);
  i=0;
  while (fs.exists(finalPath)) {
    i++;
    Thread.sleep(1000);
    if (0 == i % 10) {
      log.info("Waited " + i + " iterations, file still exists");
    }
  }
  log.info("File was removed");
  String finalFilePath=finalPath.toUri().getPath().substring(getCluster().getConfig().getAccumuloDir().toString().length());
  log.info("File relative to accumulo dir: " + finalFilePath);
  Assert.assertTrue("File archive directory didn't exist",fs.exists(fileArchiveDir));
  Path finalArchivedFile=new Path(fileArchiveDir,finalFilePath.substring(1));
  Assert.assertTrue("File doesn't exists in archive directory: " + finalArchivedFile,fs.exists(finalArchivedFile));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeletedTableIsArchived() throws Exception {
  final Connector conn=getConnector();
  final String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  final String tableId=conn.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Could not get table ID",tableId);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("row");
  m.put("","","value");
  bw.addMutation(m);
  bw.close();
  conn.tableOperations().compact(tableName,null,null,true,true);
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  final String file=entry.getKey().getColumnQualifier().toString();
  final Path p=new Path(file);
  conn.tableOperations().delete(tableName);
  log.info("File for table: " + file);
  FileSystem fs=getCluster().getFileSystem();
  int i=0;
  while (fs.exists(p)) {
    i++;
    Thread.sleep(1000);
    if (0 == i % 10) {
      log.info("Waited " + i + " iterations, file still exists");
    }
  }
  log.info("File was removed");
  String filePath=p.toUri().getPath().substring(getCluster().getConfig().getAccumuloDir().toString().length());
  log.info("File relative to accumulo dir: " + filePath);
  Path fileArchiveDir=new Path(getCluster().getConfig().getAccumuloDir().toString(),ServerConstants.FILE_ARCHIVE_DIR);
  Assert.assertTrue("File archive directory didn't exist",fs.exists(fileArchiveDir));
  Path archivedFile=new Path(fileArchiveDir,filePath.substring(1));
  Assert.assertTrue("File doesn't exists in archive directory: " + archivedFile,fs.exists(archivedFile));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.FindMaxIT </h4><pre class="type-9 type-13 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw.addMutation(nm(new byte[]{0}));
  bw.addMutation(nm(new byte[]{0,0}));
  bw.addMutation(nm(new byte[]{0,1}));
  bw.addMutation(nm(new byte[]{0,1,0}));
  bw.addMutation(nm(new byte[]{1,0}));
  bw.addMutation(nm(new byte[]{'a','b','c'}));
  bw.addMutation(nm(new byte[]{(byte)0xff}));
  bw.addMutation(nm(new byte[]{(byte)0xff,(byte)0xff,(byte)0xff,(byte)0xff,(byte)0xff,(byte)0xff}));
  for (int i=0; i < 1000; i+=5) {
    bw.addMutation(nm(String.format("r%05d",i)));
  }
  bw.close();
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  ArrayList<Text> rows=new ArrayList<Text>();
  for (  Entry<Key,Value> entry : scanner) {
    rows.add(entry.getKey().getRow());
  }
  for (int i=rows.size() - 1; i > 0; i--) {
    Text max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,null,true,rows.get(i),false);
    assertEquals(rows.get(i - 1),max);
    max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,rows.get(i - 1),true,rows.get(i),false);
    assertEquals(rows.get(i - 1),max);
    max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,rows.get(i - 1),false,rows.get(i),false);
    assertNull(max);
    max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,null,true,rows.get(i),true);
    assertEquals(rows.get(i),max);
    max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,rows.get(i),true,rows.get(i),true);
    assertEquals(rows.get(i),max);
    max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,rows.get(i - 1),false,rows.get(i),true);
    assertEquals(rows.get(i),max);
  }
  Text max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,null,true,null,true);
  assertEquals(rows.get(rows.size() - 1),max);
  max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,null,true,new Text(new byte[]{0}),false);
  assertNull(max);
  max=conn.tableOperations().getMaxRow(tableName,Authorizations.EMPTY,null,true,new Text(new byte[]{0}),true);
  assertEquals(rows.get(0),max);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ImportExportIT </h4><pre class="type-9 type-13 type-11 type-8 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExportImportThenScan() throws Exception {
  Connector conn=getConnector();
  String[] tableNames=getUniqueNames(2);
  String srcTable=tableNames[0], destTable=tableNames[1];
  conn.tableOperations().create(srcTable);
  BatchWriter bw=conn.createBatchWriter(srcTable,new BatchWriterConfig());
  for (int row=0; row < 1000; row++) {
    Mutation m=new Mutation(Integer.toString(row));
    for (int col=0; col < 100; col++) {
      m.put(Integer.toString(col),"",Integer.toString(col * 2));
    }
    bw.addMutation(m);
  }
  bw.close();
  conn.tableOperations().compact(srcTable,null,null,true,true);
  FileSystem fs=cluster.getFileSystem();
  Path tmp=cluster.getTemporaryPath();
  log.info("Using FileSystem: " + fs);
  Path baseDir=new Path(tmp,getClass().getName());
  if (fs.exists(baseDir)) {
    log.info("{} exists on filesystem, deleting",baseDir);
    assertTrue("Failed to deleted " + baseDir,fs.delete(baseDir,true));
  }
  log.info("Creating {}",baseDir);
  assertTrue("Failed to create " + baseDir,fs.mkdirs(baseDir));
  Path exportDir=new Path(baseDir,"export");
  Path importDir=new Path(baseDir,"import");
  for (  Path p : new Path[]{exportDir,importDir}) {
    assertTrue("Failed to create " + baseDir,fs.mkdirs(p));
  }
  log.info("Exporting table to {}",exportDir);
  log.info("Importing table from {}",importDir);
  conn.tableOperations().offline(srcTable,true);
  conn.tableOperations().exportTable(srcTable,exportDir.toString());
  Path distcp=new Path(exportDir,"distcp.txt");
  Assert.assertTrue("Distcp file doesn't exist",fs.exists(distcp));
  FSDataInputStream is=fs.open(distcp);
  BufferedReader reader=new BufferedReader(new InputStreamReader(is));
  String line;
  while (null != (line=reader.readLine())) {
    Path p=new Path(line.substring(5));
    Assert.assertTrue("File doesn't exist: " + p,fs.exists(p));
    Path dest=new Path(importDir,p.getName());
    Assert.assertFalse("Did not expect " + dest + " to exist",fs.exists(dest));
    FileUtil.copy(fs,p,fs,dest,false,fs.getConf());
  }
  reader.close();
  log.info("Import dir: {}",Arrays.toString(fs.listStatus(importDir)));
  conn.tableOperations().importTable(destTable,importDir.toString());
  final String tableId=conn.tableOperations().tableIdMap().get(destTable);
  Assert.assertNotNull(tableId);
  log.info("Imported into table with ID: {}",tableId);
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  MetadataSchema.TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.fetch(s);
  for (  Entry<Key,Value> fileEntry : s) {
    Key k=fileEntry.getKey();
    String value=fileEntry.getValue().toString();
    if (k.getColumnFamily().equals(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME)) {
      String fileUri=k.getColumnQualifier().toString();
      Assert.assertFalse("Imported files should have absolute URIs, not relative: " + fileUri,looksLikeRelativePath(fileUri));
    }
 else     if (k.getColumnFamily().equals(MetadataSchema.TabletsSection.ServerColumnFamily.NAME)) {
      Assert.assertFalse("Server directory should have absolute URI, not relative: " + value,looksLikeRelativePath(value));
    }
 else {
      Assert.fail("Got expected pair: " + k + "="+ fileEntry.getValue());
    }
  }
  conn.tableOperations().online(srcTable,true);
  verifyTableEquality(conn,srcTable,destTable);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.MissingWalHeaderCompletesRecoveryIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPartialHeaderWalRecoveryCompletes() throws Exception {
  Connector conn=getConnector();
  MiniAccumuloClusterImpl cluster=getCluster();
  FileSystem fs=getCluster().getFileSystem();
  String fakeServer="127.0.0.1:12345";
  File walogs=new File(cluster.getConfig().getAccumuloDir(),ServerConstants.WAL_DIR);
  File walogServerDir=new File(walogs,fakeServer.replace(':','+'));
  File partialHeaderWalog=new File(walogServerDir,UUID.randomUUID().toString());
  log.info("Created WAL with malformed header at " + partialHeaderWalog.toURI());
  FSDataOutputStream wal=fs.create(new Path(partialHeaderWalog.toURI()));
  wal.write(DfsLogger.LOG_FILE_HEADER_V3.getBytes(UTF_8),0,DfsLogger.LOG_FILE_HEADER_V3.length() / 2);
  wal.close();
  Assert.assertTrue("root user did not have write permission to metadata table",conn.securityOperations().hasTablePermission("root",MetadataTable.NAME,TablePermission.WRITE));
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  String tableId=conn.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Table ID was null",tableId);
  LogEntry logEntry=new LogEntry(null,0,"127.0.0.1:12345",partialHeaderWalog.toURI().toString());
  log.info("Taking {} offline",tableName);
  conn.tableOperations().offline(tableName,true);
  log.info("{} is offline",tableName);
  Text row=MetadataSchema.TabletsSection.getRow(new Text(tableId),null);
  Mutation m=new Mutation(row);
  m.put(logEntry.getColumnFamily(),logEntry.getColumnQualifier(),logEntry.getValue());
  BatchWriter bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  bw.addMutation(m);
  bw.close();
  log.info("Bringing {} online",tableName);
  conn.tableOperations().online(tableName,true);
  log.info("{} is online",tableName);
  Scanner s=conn.createScanner(tableName,Authorizations.EMPTY);
  Assert.assertEquals(0,Iterables.size(s));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyWalRecoveryCompletes() throws Exception {
  Connector conn=getConnector();
  MiniAccumuloClusterImpl cluster=getCluster();
  FileSystem fs=cluster.getFileSystem();
  String fakeServer="127.0.0.1:12345";
  File walogs=new File(cluster.getConfig().getAccumuloDir(),ServerConstants.WAL_DIR);
  File walogServerDir=new File(walogs,fakeServer.replace(':','+'));
  File emptyWalog=new File(walogServerDir,UUID.randomUUID().toString());
  log.info("Created empty WAL at " + emptyWalog.toURI());
  fs.create(new Path(emptyWalog.toURI())).close();
  Assert.assertTrue("root user did not have write permission to metadata table",conn.securityOperations().hasTablePermission("root",MetadataTable.NAME,TablePermission.WRITE));
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  String tableId=conn.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Table ID was null",tableId);
  LogEntry logEntry=new LogEntry(new KeyExtent(new Text(tableId),null,null),0,"127.0.0.1:12345",emptyWalog.toURI().toString());
  log.info("Taking {} offline",tableName);
  conn.tableOperations().offline(tableName,true);
  log.info("{} is offline",tableName);
  Text row=MetadataSchema.TabletsSection.getRow(new Text(tableId),null);
  Mutation m=new Mutation(row);
  m.put(logEntry.getColumnFamily(),logEntry.getColumnQualifier(),logEntry.getValue());
  BatchWriter bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  bw.addMutation(m);
  bw.close();
  log.info("Bringing {} online",tableName);
  conn.tableOperations().online(tableName,true);
  log.info("{} is online",tableName);
  Scanner s=conn.createScanner(tableName,Authorizations.EMPTY);
  Assert.assertEquals(0,Iterables.size(s));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.NamespacesIT </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void listNamespaces() throws Exception {
  SortedSet<String> namespaces=c.namespaceOperations().list();
  Map<String,String> map=c.namespaceOperations().namespaceIdMap();
  assertEquals(2,namespaces.size());
  assertEquals(2,map.size());
  assertTrue(namespaces.contains(Namespaces.ACCUMULO_NAMESPACE));
  assertTrue(namespaces.contains(Namespaces.DEFAULT_NAMESPACE));
  assertFalse(namespaces.contains(namespace));
  assertEquals(Namespaces.ACCUMULO_NAMESPACE_ID,map.get(Namespaces.ACCUMULO_NAMESPACE));
  assertEquals(Namespaces.DEFAULT_NAMESPACE_ID,map.get(Namespaces.DEFAULT_NAMESPACE));
  assertNull(map.get(namespace));
  c.namespaceOperations().create(namespace);
  namespaces=c.namespaceOperations().list();
  map=c.namespaceOperations().namespaceIdMap();
  assertEquals(3,namespaces.size());
  assertEquals(3,map.size());
  assertTrue(namespaces.contains(Namespaces.ACCUMULO_NAMESPACE));
  assertTrue(namespaces.contains(Namespaces.DEFAULT_NAMESPACE));
  assertTrue(namespaces.contains(namespace));
  assertEquals(Namespaces.ACCUMULO_NAMESPACE_ID,map.get(Namespaces.ACCUMULO_NAMESPACE));
  assertEquals(Namespaces.DEFAULT_NAMESPACE_ID,map.get(Namespaces.DEFAULT_NAMESPACE));
  assertNotNull(map.get(namespace));
  c.namespaceOperations().delete(namespace);
  namespaces=c.namespaceOperations().list();
  map=c.namespaceOperations().namespaceIdMap();
  assertEquals(2,namespaces.size());
  assertEquals(2,map.size());
  assertTrue(namespaces.contains(Namespaces.ACCUMULO_NAMESPACE));
  assertTrue(namespaces.contains(Namespaces.DEFAULT_NAMESPACE));
  assertFalse(namespaces.contains(namespace));
  assertEquals(Namespaces.ACCUMULO_NAMESPACE_ID,map.get(Namespaces.ACCUMULO_NAMESPACE));
  assertEquals(Namespaces.DEFAULT_NAMESPACE_ID,map.get(Namespaces.DEFAULT_NAMESPACE));
  assertNull(map.get(namespace));
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyConstraintInheritance() throws Exception {
  String t1=namespace + ".1";
  c.namespaceOperations().create(namespace);
  c.tableOperations().create(t1,new NewTableConfiguration().withoutDefaultIterators());
  String constraintClassName=NumericValueConstraint.class.getName();
  assertFalse(c.namespaceOperations().listConstraints(namespace).containsKey(constraintClassName));
  assertFalse(c.tableOperations().listConstraints(t1).containsKey(constraintClassName));
  c.namespaceOperations().addConstraint(namespace,constraintClassName);
  boolean passed=false;
  for (int i=0; i < 5; i++) {
    if (!c.namespaceOperations().listConstraints(namespace).containsKey(constraintClassName)) {
      Thread.sleep(500);
      continue;
    }
    if (!c.tableOperations().listConstraints(t1).containsKey(constraintClassName)) {
      Thread.sleep(500);
      continue;
    }
    passed=true;
    break;
  }
  assertTrue("Failed to observe newly-added constraint",passed);
  passed=false;
  Integer namespaceNum=null;
  for (int i=0; i < 5; i++) {
    namespaceNum=c.namespaceOperations().listConstraints(namespace).get(constraintClassName);
    if (null == namespaceNum) {
      Thread.sleep(500);
      continue;
    }
    Integer tableNum=c.tableOperations().listConstraints(t1).get(constraintClassName);
    if (null == tableNum) {
      Thread.sleep(500);
      continue;
    }
    assertEquals(namespaceNum,tableNum);
    passed=true;
  }
  assertTrue("Failed to observe constraint in both table and namespace",passed);
  Mutation m1=new Mutation("r1");
  Mutation m2=new Mutation("r2");
  Mutation m3=new Mutation("r3");
  m1.put("a","b",new Value("abcde".getBytes(UTF_8)));
  m2.put("e","f",new Value("123".getBytes(UTF_8)));
  m3.put("c","d",new Value("zyxwv".getBytes(UTF_8)));
  passed=false;
  for (int i=0; i < 5; i++) {
    BatchWriter bw=c.createBatchWriter(t1,new BatchWriterConfig());
    bw.addMutations(Arrays.asList(m1,m2,m3));
    try {
      bw.close();
      Thread.sleep(500);
    }
 catch (    MutationsRejectedException e) {
      passed=true;
      assertEquals(1,e.getConstraintViolationSummaries().size());
      assertEquals(2,e.getConstraintViolationSummaries().get(0).getNumberOfViolatingMutations());
      break;
    }
  }
  assertTrue("Failed to see mutations rejected after constraint was added",passed);
  assertNotNull("Namespace constraint ID should not be null",namespaceNum);
  c.namespaceOperations().removeConstraint(namespace,namespaceNum);
  passed=false;
  for (int i=0; i < 5; i++) {
    if (c.namespaceOperations().listConstraints(namespace).containsKey(constraintClassName)) {
      Thread.sleep(500);
      continue;
    }
    if (c.tableOperations().listConstraints(t1).containsKey(constraintClassName)) {
      Thread.sleep(500);
      continue;
    }
    passed=true;
  }
  assertTrue("Failed to verify that constraint was removed from namespace and table",passed);
  passed=false;
  for (int i=0; i < 5; i++) {
    BatchWriter bw=c.createBatchWriter(t1,new BatchWriterConfig());
    try {
      bw.addMutations(Arrays.asList(m1,m2,m3));
      bw.close();
    }
 catch (    MutationsRejectedException e) {
      Thread.sleep(500);
      continue;
    }
    passed=true;
  }
  assertTrue("Failed to add mutations that should be allowed",passed);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.RewriteTabletDirectoriesIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  c.securityOperations().grantTablePermission(c.whoami(),MetadataTable.NAME,TablePermission.WRITE);
  final String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  BatchWriter bw=c.createBatchWriter(tableName,null);
  final SortedSet<Text> splits=new TreeSet<Text>();
  for (  String split : "a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z".split(",")) {
    splits.add(new Text(split));
    Mutation m=new Mutation(new Text(split));
    m.put(new byte[]{},new byte[]{},new byte[]{});
    bw.addMutation(m);
  }
  bw.close();
  c.tableOperations().addSplits(tableName,splits);
  BatchScanner scanner=c.createBatchScanner(MetadataTable.NAME,Authorizations.EMPTY,1);
  DIRECTORY_COLUMN.fetch(scanner);
  String tableId=c.tableOperations().tableIdMap().get(tableName);
  assertNotNull("TableID for " + tableName + " was null",tableId);
  scanner.setRanges(Collections.singletonList(TabletsSection.getRange(tableId)));
  bw=c.createBatchWriter(MetadataTable.NAME,null);
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    assertTrue("Expected " + entry.getValue() + " to contain "+ v1,entry.getValue().toString().contains(v1.toString()));
    count++;
    if (count % 2 == 0) {
      String parts[]=entry.getValue().toString().split("/");
      Key key=entry.getKey();
      Mutation m=new Mutation(key.getRow());
      m.put(key.getColumnFamily(),key.getColumnQualifier(),new Value((Path.SEPARATOR + parts[parts.length - 1]).getBytes()));
      bw.addMutation(m);
    }
  }
  bw.close();
  assertEquals(splits.size() + 1,count);
  assertEquals(1,cluster.exec(RandomizeVolumes.class,"-z",cluster.getZooKeepers(),"-i",c.getInstance().getInstanceName(),"-t",tableName).waitFor());
  cluster.stop();
  Configuration conf=new Configuration(false);
  conf.addResource(new Path(cluster.getConfig().getConfDir().toURI().toString(),"accumulo-site.xml"));
  conf.set(Property.INSTANCE_VOLUMES.getKey(),v1.toString() + "," + v2.toString());
  BufferedOutputStream fos=new BufferedOutputStream(new FileOutputStream(new File(cluster.getConfig().getConfDir(),"accumulo-site.xml")));
  conf.writeXml(fos);
  fos.close();
  assertEquals(0,cluster.exec(Initialize.class,"--add-volumes").waitFor());
  cluster.start();
  c=getConnector();
  assertEquals(0,cluster.exec(Admin.class,"randomizeVolumes","-t",tableName).waitFor());
  int v1Count=0, v2Count=0;
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getValue().toString().contains(v1.toString())) {
      v1Count++;
    }
    if (entry.getValue().toString().contains(v2.toString())) {
      v2Count++;
    }
  }
  log.info("Count for volume1: " + v1Count);
  log.info("Count for volume2: " + v2Count);
  assertEquals(splits.size() + 1,v1Count + v2Count);
  assertTrue("Expected the number of files to differ between volumes by less than 10. " + v1Count + " "+ v2Count,Math.abs(v1Count - v2Count) < 2);
  count=0;
  for (  Entry<Key,Value> entry : c.createScanner(tableName,Authorizations.EMPTY)) {
    assertTrue("Found unexpected entry in table: " + entry,splits.contains(entry.getKey().getRow()));
    count++;
  }
  assertEquals(splits.size(),count);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ShellConfigIT </h4><pre class="type-11 type-8 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void experimentalPropTest() throws Exception {
  AuthenticationToken token=getAdminToken();
  File clientConfFile=null;
switch (getClusterType()) {
case MINI:
    MiniAccumuloClusterImpl mac=(MiniAccumuloClusterImpl)getCluster();
  clientConfFile=mac.getConfig().getClientConfFile();
break;
case STANDALONE:
StandaloneAccumuloClusterConfiguration standaloneConf=(StandaloneAccumuloClusterConfiguration)getClusterConfiguration();
clientConfFile=standaloneConf.getClientConfFile();
break;
default :
Assert.fail("Unknown cluster type");
}
Assert.assertNotNull(clientConfFile);
TestShell ts=null;
if (token instanceof PasswordToken) {
String passwd=new String(((PasswordToken)token).getPassword(),UTF_8);
ts=new TestShell(getAdminPrincipal(),passwd,getCluster().getInstanceName(),getCluster().getZooKeepers(),clientConfFile);
}
 else if (token instanceof KerberosToken) {
ts=new TestShell(getAdminPrincipal(),null,getCluster().getInstanceName(),getCluster().getZooKeepers(),clientConfFile);
}
 else {
Assert.fail("Unknown token type");
}
assertTrue(Property.TABLE_VOLUME_CHOOSER.isExperimental());
assertTrue(Property.CRYPTO_CIPHER_ALGORITHM_NAME.isExperimental());
String configOutput=ts.exec("config");
assertTrue(configOutput.contains(Property.TABLE_VOLUME_CHOOSER.getKey()));
assertFalse(configOutput.contains(Property.CRYPTO_CIPHER_ALGORITHM_NAME.getKey()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ShellServerIT </h4><pre class="type-9 type-11 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleterows() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  final String tableId=getTableId(table);
  int base=countFiles(tableId);
  assertEquals(0,base);
  log.info("Adding 2 splits");
  ts.exec("addsplits row5 row7");
  log.info("Writing 10 records");
  make10();
  log.info("Flushing table");
  ts.exec("flush -w -t " + table);
  log.info("Table flush completed");
  List<String> files=getFiles(tableId);
  if (3 < files.size()) {
    log.info("More than 3 files were found, compacting before proceeding");
    ts.exec("compact -w -t " + table);
    files=getFiles(tableId);
    assertEquals("Expected to only find 3 files after compaction: " + files,3,files.size());
  }
  assertNotNull(files);
  assertEquals("Found the following files: " + files,3,files.size());
  ts.exec("deleterows -t " + table + " -b row5 -e row7");
  assertEquals(2,countFiles(tableId));
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.TransportCachingIT </h4><pre class="type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCachedTransport(){
  Connector conn=getConnector();
  Instance instance=conn.getInstance();
  ClientConfiguration clientConf=cluster.getClientConfig();
  ClientContext context=new ClientContext(instance,new Credentials(getAdminPrincipal(),getAdminToken()),clientConf);
  long rpcTimeout=DefaultConfiguration.getTimeInMillis(Property.GENERAL_RPC_TIMEOUT.getDefaultValue());
  ArrayList<ThriftTransportKey> servers=new ArrayList<ThriftTransportKey>();
  ZooCache zc=new ZooCacheFactory().getZooCache(instance.getZooKeepers(),instance.getZooKeepersSessionTimeOut());
  for (  String tserver : zc.getChildren(ZooUtil.getRoot(instance) + Constants.ZTSERVERS)) {
    String path=ZooUtil.getRoot(instance) + Constants.ZTSERVERS + "/"+ tserver;
    byte[] data=ZooUtil.getLockData(zc,path);
    if (data != null) {
      String strData=new String(data,UTF_8);
      if (!strData.equals("master"))       servers.add(new ThriftTransportKey(new ServerServices(strData).getAddress(Service.TSERV_CLIENT),rpcTimeout,context));
    }
  }
  ThriftTransportPool pool=ThriftTransportPool.getInstance();
  TTransport first=null;
  while (null == first) {
    try {
      first=pool.getAnyTransport(servers,true).getSecond();
    }
 catch (    TTransportException e) {
      log.warn("Failed to obtain transport to " + servers);
    }
  }
  assertNotNull(first);
  pool.returnTransport(first);
  TTransport second=null;
  while (null == second) {
    try {
      second=pool.getAnyTransport(servers,true).getSecond();
    }
 catch (    TTransportException e) {
      log.warn("Failed obtain 2nd transport to " + servers);
    }
  }
  assertTrue("Expected the first and second to be the same instance",first == second);
  pool.returnTransport(second);
  TTransport third=null;
  while (null == third) {
    try {
      third=pool.getAnyTransport(servers,false).getSecond();
    }
 catch (    TTransportException e) {
      log.warn("Failed obtain 2nd transport to " + servers);
    }
  }
  assertFalse("Expected second and third transport to be different instances",second == third);
  pool.returnTransport(third);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.fate.zookeeper.ZooLockTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testDeleteWaiting() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ZooReaderWriter zk=ZooReaderWriter.getInstance(accumulo.getZooKeepers(),30000,"digest","secret".getBytes());
  zk.mkdirs(parent);
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertTrue(lw.locked);
  Assert.assertTrue(zl.isLocked());
  Assert.assertNull(lw.exception);
  Assert.assertNull(lw.reason);
  ZooLock zl2=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  TestALW lw2=new TestALW();
  zl2.lockAsync(lw2,"test2".getBytes());
  Assert.assertFalse(lw2.locked);
  Assert.assertFalse(zl2.isLocked());
  ZooLock zl3=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  TestALW lw3=new TestALW();
  zl3.lockAsync(lw3,"test3".getBytes());
  List<String> children=zk.getChildren(parent);
  Collections.sort(children);
  zk.delete(parent + "/" + children.get(1),-1);
  lw2.waitForChanges(1);
  Assert.assertFalse(lw2.locked);
  Assert.assertNotNull(lw2.exception);
  Assert.assertNull(lw2.reason);
  zk.delete(parent + "/" + children.get(0),-1);
  lw.waitForChanges(2);
  Assert.assertEquals(LockLossReason.LOCK_DELETED,lw.reason);
  Assert.assertNull(lw.exception);
  lw3.waitForChanges(1);
  Assert.assertTrue(lw3.locked);
  Assert.assertTrue(zl3.isLocked());
  Assert.assertNull(lw3.exception);
  Assert.assertNull(lw3.reason);
  zl3.unlock();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testNoParent() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertFalse(lw.locked);
  Assert.assertFalse(zl.isLocked());
  Assert.assertNotNull(lw.exception);
  Assert.assertNull(lw.reason);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testUnexpectedEvent() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ConnectedWatcher watcher=new ConnectedWatcher();
  ZooKeeper zk=new ZooKeeper(accumulo.getZooKeepers(),30000,watcher);
  zk.addAuthInfo("digest","secret".getBytes());
  while (!watcher.isConnected()) {
    Thread.sleep(200);
  }
  zk.create(parent,new byte[0],ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  zk.setData(parent,"foo".getBytes(),-1);
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertTrue(lw.locked);
  Assert.assertTrue(zl.isLocked());
  Assert.assertNull(lw.exception);
  Assert.assertNull(lw.reason);
  zk.setData(zl.getLockPath(),"bar".getBytes(),-1);
  zk.delete(zl.getLockPath(),-1);
  lw.waitForChanges(2);
  Assert.assertEquals(LockLossReason.LOCK_DELETED,lw.reason);
  Assert.assertNull(lw.exception);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testDeleteParent() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  ZooReaderWriter zk=ZooReaderWriter.getInstance(accumulo.getZooKeepers(),30000,"digest","secret".getBytes());
  zk.mkdirs(parent);
  zk.delete(parent,-1);
  zk.mkdirs(parent);
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertTrue(lw.locked);
  Assert.assertTrue(zl.isLocked());
  Assert.assertNull(lw.exception);
  Assert.assertNull(lw.reason);
  zl.unlock();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testDeleteLock() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ZooReaderWriter zk=ZooReaderWriter.getInstance(accumulo.getZooKeepers(),30000,"digest","secret".getBytes());
  zk.mkdirs(parent);
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertTrue(lw.locked);
  Assert.assertTrue(zl.isLocked());
  Assert.assertNull(lw.exception);
  Assert.assertNull(lw.reason);
  zk.delete(zl.getLockPath(),-1);
  lw.waitForChanges(2);
  Assert.assertEquals(LockLossReason.LOCK_DELETED,lw.reason);
  Assert.assertNull(lw.exception);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.CleanTmpIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("row");
  m.put("cf","cq","value");
  bw.addMutation(m);
  bw.flush();
  c.tableOperations().compact(tableName,null,null,true,true);
  m=new Mutation("row2");
  m.put("cf","cq","value");
  bw.addMutation(m);
  bw.close();
  String id=c.tableOperations().tableIdMap().get(tableName);
  Scanner s=c.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(Range.prefix(id));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  Path file=new Path(entry.getKey().getColumnQualifier().toString());
  FileSystem fs=getCluster().getFileSystem();
  assertTrue("Could not find file: " + file,fs.exists(file));
  Path tabletDir=file.getParent();
  assertNotNull("Tablet dir should not be null",tabletDir);
  Path tmp=new Path(tabletDir,"junk.rf_tmp");
  fs.create(tmp).close();
  log.info("Created tmp file {}",tmp.toString());
  getCluster().stop();
  getCluster().start();
  Scanner scanner=c.createScanner(tableName,Authorizations.EMPTY);
  assertEquals(2,Iterators.size(scanner.iterator()));
  assertFalse("File still exists: " + tmp,fs.exists(tmp));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.KerberosIT </h4><pre class="type-9 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelegationTokenAsDifferentUser() throws Exception {
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  log.info("Logged in as {}",rootUser.getPrincipal());
  final AuthenticationToken delegationToken;
  try {
    delegationToken=ugi.doAs(new PrivilegedExceptionAction<AuthenticationToken>(){
      @Override public AuthenticationToken run() throws Exception {
        Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
        log.info("Created connector as {}",rootUser.getPrincipal());
        assertEquals(rootUser.getPrincipal(),conn.whoami());
        return conn.securityOperations().getDelegationToken(new DelegationTokenConfig());
      }
    }
);
  }
 catch (  UndeclaredThrowableException ex) {
    throw ex;
  }
  UserGroupInformation userWithoutPrivs=UserGroupInformation.createUserForTesting("fake_user",new String[0]);
  try {
    userWithoutPrivs.doAs(new PrivilegedExceptionAction<Void>(){
      @Override public Void run() throws Exception {
        mac.getConnector("some_other_user",delegationToken);
        return null;
      }
    }
);
    fail("Using a delegation token as a different user should throw an exception");
  }
 catch (  UndeclaredThrowableException e) {
    Throwable cause=e.getCause();
    assertNotNull(cause);
    assertTrue("Expected cause to be AccumuloSecurityException, but was " + cause.getClass(),cause instanceof AccumuloSecurityException);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.MasterAssignmentIT </h4><pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  String tableName=super.getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  String tableId=c.tableOperations().tableIdMap().get(tableName);
  TabletLocationState newTablet;
  do {
    UtilWaitThread.sleep(250);
    newTablet=getTabletLocationState(c,tableId);
  }
 while (newTablet.current == null);
  assertNull(newTablet.last);
  assertNull(newTablet.future);
  BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("a");
  m.put("b","c","d");
  bw.addMutation(m);
  bw.close();
  c.tableOperations().flush(tableName,null,null,true);
  TabletLocationState flushed=getTabletLocationState(c,tableId);
  assertEquals(newTablet.current,flushed.current);
  assertEquals(flushed.current,flushed.last);
  assertNull(newTablet.future);
  c.tableOperations().offline(tableName,true);
  TabletLocationState offline=getTabletLocationState(c,tableId);
  assertNull(offline.future);
  assertNull(offline.current);
  assertEquals(flushed.current,offline.last);
  c.tableOperations().online(tableName,true);
  TabletLocationState online=getTabletLocationState(c,tableId);
  assertNull(online.future);
  assertNotNull(online.current);
  assertEquals(online.current,online.last);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.MonitorLoggingIT </h4><pre class="type-9 type-5 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void logToMonitor() throws Exception {
  log.debug("Starting Monitor");
  Process monitor=cluster.exec(Monitor.class);
  String monitorLocation=null;
  for (int i=0; i < NUM_LOCATION_PASSES; i++) {
    Thread.sleep(LOCATION_DELAY_SECS * 1000);
    try {
      monitorLocation=getMonitor();
      break;
    }
 catch (    KeeperException e) {
      log.debug("Monitor not up yet, trying again in " + LOCATION_DELAY_SECS + " secs");
    }
  }
  assertNotNull("Monitor failed to start within " + (LOCATION_DELAY_SECS * NUM_LOCATION_PASSES) + " secs",monitorLocation);
  log.debug("Monitor running at " + monitorLocation);
  Thread.sleep(10000);
  try {
    Connector c=getConnector();
    Scanner s=c.createScanner("accumulo.root",new Authorizations());
    IteratorSetting cfg=new IteratorSetting(100,"incorrect","java.lang.String");
    s.addScanIterator(cfg);
    s.iterator().next();
  }
 catch (  RuntimeException e) {
  }
  String result="";
  while (true) {
    Thread.sleep(LOCATION_DELAY_SECS * 1000);
    URL url=new URL("http://" + monitorLocation + "/log");
    log.debug("Fetching web page " + url);
    result=FunctionalTestUtils.readAll(url.openStream());
    if (result.contains("<pre class='logevent'>")) {
      break;
    }
    log.debug("No messages found, waiting a little longer...");
  }
  assertTrue("No log messages found",result.contains("<pre class='logevent'>"));
  log.debug("Stopping mini accumulo cluster");
  Process shutdown=cluster.exec(Admin.class,"stopAll");
  shutdown.waitFor();
  assertTrue(shutdown.exitValue() == 0);
  log.debug("success!");
  monitor.destroy();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ReadWriteIT </h4><pre class="type-9 type-11 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiTableTest() throws Exception {
  final String instance=cluster.getInstanceName();
  final String keepers=cluster.getZooKeepers();
  final ClusterControl control=cluster.getClusterControl();
  final String prefix=getClass().getSimpleName() + "_" + testName.getMethodName();
  ExecutorService svc=Executors.newFixedThreadPool(2);
  Future<Integer> p1=svc.submit(new Callable<Integer>(){
    @Override public Integer call(){
      try {
        ClientConfiguration clientConf=cluster.getClientConfig();
        if (clientConf.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
          String principal=getAdminPrincipal();
          AuthenticationToken token=getAdminToken();
          assertTrue("Expected KerberosToken, but was " + token.getClass(),token instanceof KerberosToken);
          KerberosToken kt=(KerberosToken)token;
          assertNotNull("Expected keytab in token",kt.getKeytab());
          return control.exec(TestMultiTableIngest.class,args("--count",Integer.toString(ROWS),"-i",instance,"-z",keepers,"--tablePrefix",prefix,"--keytab",kt.getKeytab().getAbsolutePath(),"-u",principal));
        }
        return control.exec(TestMultiTableIngest.class,args("--count",Integer.toString(ROWS),"-u",getAdminPrincipal(),"-i",instance,"-z",keepers,"-p",new String(((PasswordToken)getAdminToken()).getPassword(),UTF_8),"--tablePrefix",prefix));
      }
 catch (      IOException e) {
        log.error("Error running MultiTableIngest",e);
        return -1;
      }
    }
  }
);
  Future<Integer> p2=svc.submit(new Callable<Integer>(){
    @Override public Integer call(){
      try {
        ClientConfiguration clientConf=cluster.getClientConfig();
        if (clientConf.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
          String principal=getAdminPrincipal();
          AuthenticationToken token=getAdminToken();
          assertTrue("Expected KerberosToken, but was " + token.getClass(),token instanceof KerberosToken);
          KerberosToken kt=(KerberosToken)token;
          assertNotNull("Expected keytab in token",kt.getKeytab());
          return control.exec(TestMultiTableIngest.class,args("--count",Integer.toString(ROWS),"--readonly","-i",instance,"-z",keepers,"--tablePrefix",prefix,"--keytab",kt.getKeytab().getAbsolutePath(),"-u",principal));
        }
        return control.exec(TestMultiTableIngest.class,args("--count",Integer.toString(ROWS),"--readonly","-u",getAdminPrincipal(),"-i",instance,"-z",keepers,"-p",new String(((PasswordToken)getAdminToken()).getPassword(),UTF_8),"--tablePrefix",prefix));
      }
 catch (      IOException e) {
        log.error("Error running MultiTableIngest",e);
        return -1;
      }
    }
  }
);
  svc.shutdown();
  while (!svc.isTerminated()) {
    svc.awaitTermination(15,TimeUnit.SECONDS);
  }
  assertEquals(0,p1.get().intValue());
  assertEquals(0,p2.get().intValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.RestartIT </h4><pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void shutdownDuringCompactingSplitting() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  VOPTS.setTableName(tableName);
  ClientConfiguration clientConfig=cluster.getClientConfig();
  if (clientConfig.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
    OPTS.updateKerberosCredentials(clientConfig);
    VOPTS.updateKerberosCredentials(clientConfig);
  }
 else {
    OPTS.setPrincipal(getAdminPrincipal());
    VOPTS.setPrincipal(getAdminPrincipal());
  }
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_SPLIT_THRESHOLD.getKey(),"10K");
  String splitThreshold=null;
  for (  Entry<String,String> entry : c.tableOperations().getProperties(tableName)) {
    if (entry.getKey().equals(Property.TABLE_SPLIT_THRESHOLD.getKey())) {
      splitThreshold=entry.getValue();
      break;
    }
  }
  Assert.assertNotNull(splitThreshold);
  try {
    c.tableOperations().setProperty(MetadataTable.NAME,Property.TABLE_SPLIT_THRESHOLD.getKey(),"20K");
    TestIngest.Opts opts=new TestIngest.Opts();
    opts.setTableName(tableName);
    if (clientConfig.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
      opts.updateKerberosCredentials(clientConfig);
    }
 else {
      opts.setPrincipal(getAdminPrincipal());
    }
    TestIngest.ingest(c,opts,BWOPTS);
    c.tableOperations().flush(tableName,null,null,false);
    VerifyIngest.verifyIngest(c,VOPTS,SOPTS);
    getCluster().stop();
  }
  finally {
    if (getClusterType() == ClusterType.STANDALONE) {
      getCluster().start();
      c.tableOperations().setProperty(MetadataTable.NAME,Property.TABLE_SPLIT_THRESHOLD.getKey(),splitThreshold);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ScanIdIT </h4><pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @throws Exceptionany exception is a test failure.
 */
@Test public void testScanId() throws Exception {
  final String tableName=getUniqueNames(1)[0];
  Connector conn=getConnector();
  conn.tableOperations().create(tableName);
  addSplits(conn,tableName);
  log.info("Splits added");
  generateSampleData(conn,tableName);
  log.info("Generated data for {}",tableName);
  attachSlowIterator(conn,tableName);
  CountDownLatch latch=new CountDownLatch(NUM_SCANNERS);
  for (int scannerIndex=0; scannerIndex < NUM_SCANNERS; scannerIndex++) {
    ScannerThread st=new ScannerThread(conn,scannerIndex,tableName,latch);
    pool.submit(st);
  }
  while (testInProgress.get()) {
    if (resultsByWorker.size() < NUM_SCANNERS) {
      log.trace("Results reported {}",resultsByWorker.size());
      sleepUninterruptibly(750,TimeUnit.MILLISECONDS);
    }
 else {
      testInProgress.set(false);
      log.debug("Final result count {}",resultsByWorker.size());
      sleepUninterruptibly(1,TimeUnit.SECONDS);
    }
  }
  Set<Long> scanIds=new HashSet<Long>();
  List<String> tservers=conn.instanceOperations().getTabletServers();
  log.debug("tablet servers {}",tservers.toString());
  for (  String tserver : tservers) {
    List<ActiveScan> activeScans=null;
    for (int i=0; i < 10; i++) {
      try {
        activeScans=conn.instanceOperations().getActiveScans(tserver);
        break;
      }
 catch (      AccumuloException e) {
        if (e.getCause() instanceof TableNotFoundException) {
          log.debug("Got TableNotFoundException, will retry");
          Thread.sleep(200);
          continue;
        }
        throw e;
      }
    }
    assertNotNull("Repeatedly got exception trying to active scans",activeScans);
    log.debug("TServer {} has {} active scans",tserver,activeScans.size());
    for (    ActiveScan scan : activeScans) {
      log.debug("Tserver {} scan id {}",tserver,scan.getScanid());
      scanIds.add(scan.getScanid());
    }
  }
  assertTrue("Expected at least " + NUM_SCANNERS + " scanIds, but saw "+ scanIds.size(),NUM_SCANNERS <= scanIds.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.TableIT </h4><pre class="type-9 type-5 type-3 type-21 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Assume.assumeThat(getClusterType(),CoreMatchers.is(ClusterType.MINI));
  AccumuloCluster cluster=getCluster();
  MiniAccumuloClusterImpl mac=(MiniAccumuloClusterImpl)cluster;
  String rootPath=mac.getConfig().getDir().getAbsolutePath();
  Connector c=getConnector();
  TableOperations to=c.tableOperations();
  String tableName=getUniqueNames(1)[0];
  to.create(tableName);
  TestIngest.Opts opts=new TestIngest.Opts();
  VerifyIngest.Opts vopts=new VerifyIngest.Opts();
  ClientConfiguration clientConfig=getCluster().getClientConfig();
  if (clientConfig.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
    opts.updateKerberosCredentials(clientConfig);
    vopts.updateKerberosCredentials(clientConfig);
  }
 else {
    opts.setPrincipal(getAdminPrincipal());
    vopts.setPrincipal(getAdminPrincipal());
  }
  opts.setTableName(tableName);
  TestIngest.ingest(c,opts,new BatchWriterOpts());
  to.flush(tableName,null,null,true);
  vopts.setTableName(tableName);
  VerifyIngest.verifyIngest(c,vopts,new ScannerOpts());
  String id=to.tableIdMap().get(tableName);
  Scanner s=c.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(new KeyExtent(new Text(id),null,null).toMetadataRange());
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  assertTrue(Iterators.size(s.iterator()) > 0);
  FileSystem fs=getCluster().getFileSystem();
  assertTrue(fs.listStatus(new Path(rootPath + "/accumulo/tables/" + id)).length > 0);
  to.delete(tableName);
  assertEquals(0,Iterators.size(s.iterator()));
  try {
    assertEquals(0,fs.listStatus(new Path(rootPath + "/accumulo/tables/" + id)).length);
  }
 catch (  FileNotFoundException ex) {
  }
  assertNull(to.tableIdMap().get(tableName));
  to.create(tableName);
  TestIngest.ingest(c,opts,new BatchWriterOpts());
  VerifyIngest.verifyIngest(c,vopts,new ScannerOpts());
  to.delete(tableName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapred.AccumuloFileOutputFormatIT </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void writeBadVisibility() throws Exception {
  Connector c=getConnector();
  c.tableOperations().create(BAD_TABLE);
  BatchWriter bw=c.createBatchWriter(BAD_TABLE,new BatchWriterConfig());
  Mutation m=new Mutation("r1");
  m.put("cf1","cq1","A&B");
  m.put("cf1","cq1","A&B");
  m.put("cf1","cq2","A&");
  bw.addMutation(m);
  bw.close();
  File f=folder.newFile(testName.getMethodName());
  if (f.delete()) {
    log.debug("Deleted {}",f);
  }
  MRTester.main(new String[]{BAD_TABLE,f.getAbsolutePath()});
  assertNull(e1);
  assertNull(e2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapred.AccumuloInputFormatIT </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testMap() throws Exception {
  String table=getUniqueNames(1)[0];
  Connector c=getConnector();
  c.tableOperations().create(table);
  BatchWriter bw=c.createBatchWriter(table,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  e1=null;
  e2=null;
  MRTester.main(table);
  assertNull(e1);
  assertNull(e2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapred.AccumuloMultiTableInputFormatIT </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testMap() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String table1=tableNames[0];
  String table2=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  BatchWriter bw2=c.createBatchWriter(table2,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation t1m=new Mutation(new Text(String.format("%s_%09x",table1,i + 1)));
    t1m.put(new Text(),new Text(),new Value(String.format("%s_%09x",table1,i).getBytes()));
    bw.addMutation(t1m);
    Mutation t2m=new Mutation(new Text(String.format("%s_%09x",table2,i + 1)));
    t2m.put(new Text(),new Text(),new Value(String.format("%s_%09x",table2,i).getBytes()));
    bw2.addMutation(t2m);
  }
  bw.close();
  bw2.close();
  MRTester.main(new String[]{table1,table2});
  assertNull(e1);
  assertNull(e2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapred.AccumuloOutputFormatIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMR() throws Exception {
  Connector c=getConnector();
  String instanceName=getCluster().getInstanceName();
  String table1=instanceName + "_t1";
  String table2=instanceName + "_t2";
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  MRTester.main(new String[]{"root",ROOT_PASSWORD,table1,table2,instanceName,getCluster().getZooKeepers()});
  assertNull(e1);
  Scanner scanner=c.createScanner(table2,new Authorizations());
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  assertEquals(Integer.parseInt(new String(entry.getValue().get())),100);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapred.AccumuloRowInputFormatIT </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void test() throws Exception {
  final Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter writer=null;
  try {
    writer=conn.createBatchWriter(tableName,new BatchWriterConfig());
    insertList(writer,row1);
    insertList(writer,row2);
    insertList(writer,row3);
  }
  finally {
    if (writer != null) {
      writer.close();
    }
  }
  MRTester.main(new String[]{tableName});
  assertNull(e1);
  assertNull(e2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapred.TokenFileIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMR() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String table1=tableNames[0];
  String table2=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  File tf=folder.newFile("root_test.pw");
  PrintStream out=new PrintStream(tf);
  String outString=new Credentials(getAdminPrincipal(),getAdminToken()).serialize();
  out.println(outString);
  out.close();
  MRTokenFileTester.main(new String[]{tf.getAbsolutePath(),table1,table2});
  assertNull(e1);
  Scanner scanner=c.createScanner(table2,new Authorizations());
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  assertEquals(Integer.parseInt(new String(entry.getValue().get())),100);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapreduce.AccumuloMultiTableInputFormatIT </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
/** 
 * Generate incrementing counts and attach table name to the key/value so that order and multi-table data can be verified.
 */
@Test public void testMap() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String table1=tableNames[0];
  String table2=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  BatchWriter bw2=c.createBatchWriter(table2,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation t1m=new Mutation(new Text(String.format("%s_%09x",table1,i + 1)));
    t1m.put(new Text(),new Text(),new Value(String.format("%s_%09x",table1,i).getBytes()));
    bw.addMutation(t1m);
    Mutation t2m=new Mutation(new Text(String.format("%s_%09x",table2,i + 1)));
    t2m.put(new Text(),new Text(),new Value(String.format("%s_%09x",table2,i).getBytes()));
    bw2.addMutation(t2m);
  }
  bw.close();
  bw2.close();
  MRTester.main(new String[]{table1,table2});
  assertNull(e1);
  assertNull(e2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapreduce.AccumuloOutputFormatIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMR() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String table1=tableNames[0];
  String table2=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  MRTester.main(new String[]{table1,table2});
  assertNull(e1);
  Scanner scanner=c.createScanner(table2,new Authorizations());
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  assertEquals(Integer.parseInt(new String(entry.getValue().get())),100);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapreduce.AccumuloRowInputFormatIT </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void test() throws Exception {
  final Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter writer=null;
  try {
    writer=conn.createBatchWriter(tableName,new BatchWriterConfig());
    insertList(writer,row1);
    insertList(writer,row2);
    insertList(writer,row3);
  }
  finally {
    if (writer != null) {
      writer.close();
    }
  }
  MRTester.main(new String[]{tableName});
  assertNull(e1);
  assertNull(e2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapreduce.TokenFileIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMR() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String table1=tableNames[0];
  String table2=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  File tf=folder.newFile("root_test.pw");
  PrintStream out=new PrintStream(tf);
  String outString=new Credentials(getAdminPrincipal(),getAdminToken()).serialize();
  out.println(outString);
  out.close();
  MRTokenFileTester.main(new String[]{tf.getAbsolutePath(),table1,table2});
  assertNull(e1);
  Scanner scanner=c.createScanner(table2,new Authorizations());
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  assertEquals(Integer.parseInt(new String(entry.getValue().get())),100);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.SimpleProxyBase </h4><pre class="type-9 type-11 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void attachIteratorWithCompactions() throws Exception {
  if (client.tableExists(creds,"slow")) {
    client.deleteTable(creds,"slow");
  }
  client.createTable(creds,"slow",true,TimeType.MILLIS);
  IteratorSetting setting=new IteratorSetting(100,"slow",SlowIterator.class.getName(),Collections.singletonMap("sleepTime","250"));
  client.attachIterator(creds,"slow",setting,EnumSet.allOf(IteratorScope.class));
  for (int i=0; i < 40; i++) {
    client.updateAndFlush(creds,"slow",mutation("row" + i,"cf","cq","value"));
  }
  Map<String,String> map=client.tableIdMap(creds);
  Thread t=new Thread(){
    @Override public void run(){
      TestProxyClient proxyClient2=null;
      try {
        if (isKerberosEnabled()) {
          UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,UserGroupInformation.getCurrentUser());
        }
 else {
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory);
        }
        Client client2=proxyClient2.proxy();
        client2.compactTable(creds,"slow",null,null,null,true,true,null);
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
 finally {
        if (null != proxyClient2) {
          proxyClient2.close();
        }
      }
    }
  }
;
  t.start();
  final String desiredTableId=map.get("slow");
  assertNotNull(desiredTableId);
  List<ActiveCompaction> compactions=new ArrayList<ActiveCompaction>();
  for (int i=0; i < 100 && compactions.isEmpty(); i++) {
    for (    String tserver : client.getTabletServers(creds)) {
      List<ActiveCompaction> compactionsOnServer=client.getActiveCompactions(creds,tserver);
      for (      ActiveCompaction compact : compactionsOnServer) {
        if (desiredTableId.equals(compact.getExtent().tableId)) {
          compactions.add(compact);
        }
      }
      if (!compactions.isEmpty())       break;
    }
    sleepUninterruptibly(10,TimeUnit.MILLISECONDS);
  }
  t.join();
  assertFalse(compactions.isEmpty());
  for (  ActiveCompaction c : compactions) {
    if (desiredTableId.equals(c.getExtent().tableId)) {
      assertTrue(c.inputFiles.isEmpty());
      assertEquals(CompactionType.MINOR,c.getType());
      assertEquals(CompactionReason.USER,c.getReason());
      assertEquals("",c.localityGroup);
      assertTrue(c.outputFile.contains("default_tablet"));
      return;
    }
  }
  fail("Expection to find running compaction for table 'slow' but did not find one");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.TestProxyInstanceOperations </h4><pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void properties() throws TException {
  tpc.proxy().setProperty(userpass,"test.systemprop","whistletips");
  assertEquals(tpc.proxy().getSystemConfiguration(userpass).get("test.systemprop"),"whistletips");
  tpc.proxy().removeProperty(userpass,"test.systemprop");
  assertNull(tpc.proxy().getSystemConfiguration(userpass).get("test.systemprop"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.TestProxyTableOperations </h4><pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void constraints() throws TException {
  int cid=tpc.proxy().addConstraint(userpass,testtable,"org.apache.accumulo.TestConstraint");
  Map<String,Integer> constraints=tpc.proxy().listConstraints(userpass,testtable);
  assertEquals((int)constraints.get("org.apache.accumulo.TestConstraint"),cid);
  tpc.proxy().removeConstraint(userpass,testtable,cid);
  constraints=tpc.proxy().listConstraints(userpass,testtable);
  assertNull(constraints.get("org.apache.accumulo.TestConstraint"));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void tableProperties() throws TException {
  tpc.proxy().setTableProperty(userpass,testtable,"test.property1","wharrrgarbl");
  assertEquals(tpc.proxy().getTableProperties(userpass,testtable).get("test.property1"),"wharrrgarbl");
  tpc.proxy().removeTableProperty(userpass,testtable,"test.property1");
  assertNull(tpc.proxy().getTableProperties(userpass,testtable).get("test.property1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.CyclicReplicationIT </h4><pre class="type-9 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataIsNotOverReplicated() throws Exception {
  File master1Dir=createTestDir("master1"), master2Dir=createTestDir("master2");
  String password="password";
  MiniAccumuloConfigImpl master1Cfg;
  MiniAccumuloClusterImpl master1Cluster;
  while (true) {
    master1Cfg=new MiniAccumuloConfigImpl(master1Dir,password);
    master1Cfg.setNumTservers(1);
    master1Cfg.setInstanceName("master1");
    ConfigurableMacBase.configureForEnvironment(master1Cfg,this.getClass(),ConfigurableMacBase.getSslDir(master1Dir));
    master1Cfg.setProperty(Property.REPLICATION_NAME,master1Cfg.getInstanceName());
    master1Cfg.setProperty(Property.TSERV_WALOG_MAX_SIZE,"5M");
    master1Cfg.setProperty(Property.REPLICATION_THREADCHECK,"5m");
    master1Cfg.setProperty(Property.REPLICATION_WORK_ASSIGNMENT_SLEEP,"1s");
    master1Cfg.setProperty(Property.MASTER_REPLICATION_SCAN_INTERVAL,"1s");
    master1Cluster=new MiniAccumuloClusterImpl(master1Cfg);
    setCoreSite(master1Cluster);
    try {
      master1Cluster.start();
      break;
    }
 catch (    ZooKeeperBindException e) {
      log.warn("Failed to start ZooKeeper on " + master1Cfg.getZooKeeperPort() + ", will retry");
    }
  }
  MiniAccumuloConfigImpl master2Cfg;
  MiniAccumuloClusterImpl master2Cluster;
  while (true) {
    master2Cfg=new MiniAccumuloConfigImpl(master2Dir,password);
    master2Cfg.setNumTservers(1);
    master2Cfg.setInstanceName("master2");
    this.updatePeerConfigFromPrimary(master1Cfg,master2Cfg);
    master2Cfg.setProperty(Property.REPLICATION_NAME,master2Cfg.getInstanceName());
    master2Cfg.setProperty(Property.TSERV_WALOG_MAX_SIZE,"5M");
    master2Cfg.setProperty(Property.REPLICATION_THREADCHECK,"5m");
    master2Cfg.setProperty(Property.REPLICATION_WORK_ASSIGNMENT_SLEEP,"1s");
    master2Cfg.setProperty(Property.MASTER_REPLICATION_SCAN_INTERVAL,"1s");
    master2Cluster=new MiniAccumuloClusterImpl(master2Cfg);
    setCoreSite(master2Cluster);
    try {
      master2Cluster.start();
      break;
    }
 catch (    ZooKeeperBindException e) {
      log.warn("Failed to start ZooKeeper on " + master2Cfg.getZooKeeperPort() + ", will retry");
    }
  }
  try {
    Connector connMaster1=master1Cluster.getConnector("root",new PasswordToken(password)), connMaster2=master2Cluster.getConnector("root",new PasswordToken(password));
    String master1UserName="master1", master1Password="foo";
    String master2UserName="master2", master2Password="bar";
    String master1Table=master1Cluster.getInstanceName(), master2Table=master2Cluster.getInstanceName();
    connMaster1.securityOperations().createLocalUser(master1UserName,new PasswordToken(master1Password));
    connMaster2.securityOperations().createLocalUser(master2UserName,new PasswordToken(master2Password));
    connMaster1.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + master2Cluster.getInstanceName(),master2UserName);
    connMaster1.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + master2Cluster.getInstanceName(),master2Password);
    connMaster2.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + master1Cluster.getInstanceName(),master1UserName);
    connMaster2.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + master1Cluster.getInstanceName(),master1Password);
    connMaster1.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + master2Cluster.getInstanceName(),ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(master2Cluster.getInstanceName(),master2Cluster.getZooKeepers())));
    connMaster2.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + master1Cluster.getInstanceName(),ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(master1Cluster.getInstanceName(),master1Cluster.getZooKeepers())));
    connMaster1.tableOperations().create(master1Table,new NewTableConfiguration().withoutDefaultIterators());
    String master1TableId=connMaster1.tableOperations().tableIdMap().get(master1Table);
    Assert.assertNotNull(master1TableId);
    connMaster2.tableOperations().create(master2Table,new NewTableConfiguration().withoutDefaultIterators());
    String master2TableId=connMaster2.tableOperations().tableIdMap().get(master2Table);
    Assert.assertNotNull(master2TableId);
    connMaster1.tableOperations().setProperty(master1Table,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster1.tableOperations().setProperty(master1Table,Property.TABLE_REPLICATION_TARGET.getKey() + master2Cluster.getInstanceName(),master2TableId);
    connMaster2.tableOperations().setProperty(master2Table,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster2.tableOperations().setProperty(master2Table,Property.TABLE_REPLICATION_TARGET.getKey() + master1Cluster.getInstanceName(),master1TableId);
    connMaster1.securityOperations().grantTablePermission(master1UserName,master1Table,TablePermission.WRITE);
    connMaster2.securityOperations().grantTablePermission(master2UserName,master2Table,TablePermission.WRITE);
    IteratorSetting summingCombiner=new IteratorSetting(50,SummingCombiner.class);
    SummingCombiner.setEncodingType(summingCombiner,Type.STRING);
    SummingCombiner.setCombineAllColumns(summingCombiner,true);
    connMaster1.tableOperations().attachIterator(master1Table,summingCombiner);
    connMaster2.tableOperations().attachIterator(master2Table,summingCombiner);
    BatchWriter bw=connMaster1.createBatchWriter(master1Table,new BatchWriterConfig());
    Mutation m=new Mutation("row");
    m.put("count","","1");
    bw.addMutation(m);
    bw.close();
    Set<String> files=connMaster1.replicationOperations().referencedFiles(master1Table);
    log.info("Found {} that need replication from master1",files);
    for (    ProcessReference proc : master1Cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      master1Cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    master1Cluster.exec(TabletServer.class);
    log.info("Restarted tserver on master1");
    Thread.sleep(1000);
    Scanner s=connMaster1.createScanner(master1Table,Authorizations.EMPTY);
    Entry<Key,Value> entry=Iterables.getOnlyElement(s);
    Assert.assertEquals("1",entry.getValue().toString());
    connMaster1.replicationOperations().drain(master1Table,files);
    Thread.sleep(5000);
    s=connMaster2.createScanner(master2Table,Authorizations.EMPTY);
    entry=Iterables.getOnlyElement(s);
    Assert.assertEquals("1",entry.getValue().toString());
    files=connMaster2.replicationOperations().referencedFiles(master2Table);
    for (    ProcessReference proc : master2Cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      master2Cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    master2Cluster.exec(TabletServer.class);
    Thread.sleep(1000);
    s=connMaster2.createScanner(master2Table,Authorizations.EMPTY);
    entry=Iterables.getOnlyElement(s);
    Assert.assertEquals("1",entry.getValue().toString());
    connMaster2.replicationOperations().drain(master2Table,files);
    Thread.sleep(5000);
    s=connMaster1.createScanner(master1Table,Authorizations.EMPTY);
    entry=Iterables.getOnlyElement(s);
    Assert.assertEquals("1",entry.getValue().toString());
  }
  finally {
    master1Cluster.stop();
    master2Cluster.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.KerberosReplicationIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTable() throws Exception {
  final UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().toURI().toString());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      log.info("testing {}",ugi);
      final KerberosToken token=new KerberosToken();
      final Connector primaryConn=primary.getConnector(rootUser.getPrincipal(),token);
      final Connector peerConn=peer.getConnector(rootUser.getPrincipal(),token);
      ClusterUser replicationUser=kdc.getClientPrincipal(0);
      peerConn.securityOperations().createLocalUser(replicationUser.getPrincipal(),null);
      primaryConn.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + PEER_NAME,replicationUser.getPrincipal());
      primaryConn.instanceOperations().setProperty(Property.REPLICATION_PEER_KEYTAB.getKey() + PEER_NAME,replicationUser.getKeytab().getAbsolutePath());
      primaryConn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + PEER_NAME,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerConn.getInstance().getInstanceName(),peerConn.getInstance().getZooKeepers())));
      String primaryTable1="primary", peerTable1="peer";
      primaryConn.tableOperations().create(primaryTable1);
      String masterTableId1=primaryConn.tableOperations().tableIdMap().get(primaryTable1);
      Assert.assertNotNull(masterTableId1);
      peerConn.tableOperations().create(peerTable1);
      String peerTableId1=peerConn.tableOperations().tableIdMap().get(peerTable1);
      Assert.assertNotNull(peerTableId1);
      peerConn.securityOperations().grantTablePermission(replicationUser.getPrincipal(),peerTable1,TablePermission.WRITE);
      primaryConn.tableOperations().setProperty(primaryTable1,Property.TABLE_REPLICATION.getKey(),"true");
      primaryConn.tableOperations().setProperty(primaryTable1,Property.TABLE_REPLICATION_TARGET.getKey() + PEER_NAME,peerTableId1);
      BatchWriter bw=primaryConn.createBatchWriter(primaryTable1,new BatchWriterConfig());
      long masterTable1Records=0l;
      for (int rows=0; rows < 2500; rows++) {
        Mutation m=new Mutation(primaryTable1 + rows);
        for (int cols=0; cols < 100; cols++) {
          String value=Integer.toString(cols);
          m.put(value,"",value);
          masterTable1Records++;
        }
        bw.addMutation(m);
      }
      bw.close();
      log.info("Wrote all data to primary cluster");
      Set<String> filesFor1=primaryConn.replicationOperations().referencedFiles(primaryTable1);
      for (      ProcessReference proc : primary.getProcesses().get(ServerType.TABLET_SERVER)) {
        primary.killProcess(ServerType.TABLET_SERVER,proc);
      }
      primary.exec(TabletServer.class);
      log.info("Restarted the tserver");
      Iterators.size(primaryConn.createScanner(primaryTable1,Authorizations.EMPTY).iterator());
      log.info("Waiting for {} for {}",filesFor1,primaryTable1);
      primaryConn.replicationOperations().drain(primaryTable1,filesFor1);
      long countTable=0l;
      for (      Entry<Key,Value> entry : peerConn.createScanner(peerTable1,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(primaryTable1));
      }
      log.info("Found {} records in {}",countTable,peerTable1);
      Assert.assertEquals(masterTable1Records,countTable);
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.MultiInstanceReplicationIT </h4><pre class="type-9 type-13 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10 * 60 * 1000) public void dataWasReplicatedToThePeer() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  MiniAccumuloClusterImpl peerCluster=new MiniAccumuloClusterImpl(peerCfg);
  peerCluster.start();
  try {
    final Connector connMaster=getConnector();
    final Connector connPeer=peerCluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    ReplicationTable.setOnline(connMaster);
    String peerUserName="peer", peerPassword="foo";
    String peerClusterName="peer";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerCluster.getInstanceName(),peerCluster.getZooKeepers())));
    final String masterTable="master", peerTable="peer";
    connMaster.tableOperations().create(masterTable);
    String masterTableId=connMaster.tableOperations().tableIdMap().get(masterTable);
    Assert.assertNotNull(masterTableId);
    connPeer.tableOperations().create(peerTable);
    String peerTableId=connPeer.tableOperations().tableIdMap().get(peerTable);
    Assert.assertNotNull(peerTableId);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId);
    BatchWriter bw=connMaster.createBatchWriter(masterTable,new BatchWriterConfig());
    for (int rows=0; rows < 5000; rows++) {
      Mutation m=new Mutation(Integer.toString(rows));
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    final Set<String> filesNeedingReplication=connMaster.replicationOperations().referencedFiles(masterTable);
    log.info("Files to replicate: " + filesNeedingReplication);
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    log.info("TabletServer restarted");
    Iterators.size(ReplicationTable.getScanner(connMaster).iterator());
    log.info("TabletServer is online");
    while (!ReplicationTable.isOnline(connMaster)) {
      log.info("Replication table still offline, waiting");
      Thread.sleep(5000);
    }
    log.info("");
    log.info("Fetching metadata records:");
    for (    Entry<Key,Value> kv : connMaster.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
      if (ReplicationSection.COLF.equals(kv.getKey().getColumnFamily())) {
        log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
      }
 else {
        log.info(kv.getKey().toStringNoTruncate() + " " + kv.getValue());
      }
    }
    log.info("");
    log.info("Fetching replication records:");
    for (    Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
      log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
    }
    Future<Boolean> future=executor.submit(new Callable<Boolean>(){
      @Override public Boolean call() throws Exception {
        long then=System.currentTimeMillis();
        connMaster.replicationOperations().drain(masterTable,filesNeedingReplication);
        long now=System.currentTimeMillis();
        log.info("Drain completed in " + (now - then) + "ms");
        return true;
      }
    }
);
    try {
      future.get(60,TimeUnit.SECONDS);
    }
 catch (    TimeoutException e) {
      future.cancel(true);
      Assert.fail("Drain did not finish within 60 seconds");
    }
 finally {
      executor.shutdownNow();
    }
    log.info("drain completed");
    log.info("");
    log.info("Fetching metadata records:");
    for (    Entry<Key,Value> kv : connMaster.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
      if (ReplicationSection.COLF.equals(kv.getKey().getColumnFamily())) {
        log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
      }
 else {
        log.info(kv.getKey().toStringNoTruncate() + " " + kv.getValue());
      }
    }
    log.info("");
    log.info("Fetching replication records:");
    for (    Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
      log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
    }
    Scanner master=connMaster.createScanner(masterTable,Authorizations.EMPTY), peer=connPeer.createScanner(peerTable,Authorizations.EMPTY);
    Iterator<Entry<Key,Value>> masterIter=master.iterator(), peerIter=peer.iterator();
    Entry<Key,Value> masterEntry=null, peerEntry=null;
    while (masterIter.hasNext() && peerIter.hasNext()) {
      masterEntry=masterIter.next();
      peerEntry=peerIter.next();
      Assert.assertEquals(masterEntry.getKey() + " was not equal to " + peerEntry.getKey(),0,masterEntry.getKey().compareTo(peerEntry.getKey(),PartialKey.ROW_COLFAM_COLQUAL_COLVIS));
      Assert.assertEquals(masterEntry.getValue(),peerEntry.getValue());
    }
    log.info("Last master entry: " + masterEntry);
    log.info("Last peer entry: " + peerEntry);
    Assert.assertFalse("Had more data to read from the master",masterIter.hasNext());
    Assert.assertFalse("Had more data to read from the peer",peerIter.hasNext());
  }
  finally {
    peerCluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataWasReplicatedToThePeerWithoutDrain() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  MiniAccumuloClusterImpl peerCluster=new MiniAccumuloClusterImpl(peerCfg);
  peerCluster.start();
  Connector connMaster=getConnector();
  Connector connPeer=peerCluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
  String peerUserName="repl";
  String peerPassword="passwd";
  connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
  String peerClusterName="peer";
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerCluster.getInstanceName(),peerCluster.getZooKeepers())));
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
  String masterTable="master", peerTable="peer";
  connMaster.tableOperations().create(masterTable);
  String masterTableId=connMaster.tableOperations().tableIdMap().get(masterTable);
  Assert.assertNotNull(masterTableId);
  connPeer.tableOperations().create(peerTable);
  String peerTableId=connPeer.tableOperations().tableIdMap().get(peerTable);
  Assert.assertNotNull(peerTableId);
  connPeer.securityOperations().grantTablePermission(peerUserName,peerTable,TablePermission.WRITE);
  connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION.getKey(),"true");
  connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId);
  BatchWriter bw=connMaster.createBatchWriter(masterTable,new BatchWriterConfig());
  for (int rows=0; rows < 5000; rows++) {
    Mutation m=new Mutation(Integer.toString(rows));
    for (int cols=0; cols < 100; cols++) {
      String value=Integer.toString(cols);
      m.put(value,"",value);
    }
    bw.addMutation(m);
  }
  bw.close();
  log.info("Wrote all data to master cluster");
  Set<String> files=connMaster.replicationOperations().referencedFiles(masterTable);
  log.info("Files to replicate:" + files);
  for (  ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
    cluster.killProcess(ServerType.TABLET_SERVER,proc);
  }
  cluster.exec(TabletServer.class);
  while (!ReplicationTable.isOnline(connMaster)) {
    log.info("Replication table still offline, waiting");
    Thread.sleep(5000);
  }
  Iterators.size(connMaster.createScanner(masterTable,Authorizations.EMPTY).iterator());
  for (  Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
    log.debug(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
  }
  connMaster.replicationOperations().drain(masterTable,files);
  Scanner master=connMaster.createScanner(masterTable,Authorizations.EMPTY), peer=connPeer.createScanner(peerTable,Authorizations.EMPTY);
  Iterator<Entry<Key,Value>> masterIter=master.iterator(), peerIter=peer.iterator();
  while (masterIter.hasNext() && peerIter.hasNext()) {
    Entry<Key,Value> masterEntry=masterIter.next(), peerEntry=peerIter.next();
    Assert.assertEquals(peerEntry.getKey() + " was not equal to " + peerEntry.getKey(),0,masterEntry.getKey().compareTo(peerEntry.getKey(),PartialKey.ROW_COLFAM_COLQUAL_COLVIS));
    Assert.assertEquals(masterEntry.getValue(),peerEntry.getValue());
  }
  Assert.assertFalse("Had more data to read from the master",masterIter.hasNext());
  Assert.assertFalse("Had more data to read from the peer",peerIter.hasNext());
  peerCluster.stop();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTableWithoutDrain() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  MiniAccumuloClusterImpl peer1Cluster=new MiniAccumuloClusterImpl(peerCfg);
  peer1Cluster.start();
  try {
    Connector connMaster=getConnector();
    Connector connPeer=peer1Cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    String peerClusterName="peer";
    String peerUserName="repl";
    String peerPassword="passwd";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peer1Cluster.getInstanceName(),peer1Cluster.getZooKeepers())));
    String masterTable1="master1", peerTable1="peer1", masterTable2="master2", peerTable2="peer2";
    connMaster.tableOperations().create(masterTable1);
    String masterTableId1=connMaster.tableOperations().tableIdMap().get(masterTable1);
    Assert.assertNotNull(masterTableId1);
    connMaster.tableOperations().create(masterTable2);
    String masterTableId2=connMaster.tableOperations().tableIdMap().get(masterTable2);
    Assert.assertNotNull(masterTableId2);
    connPeer.tableOperations().create(peerTable1);
    String peerTableId1=connPeer.tableOperations().tableIdMap().get(peerTable1);
    Assert.assertNotNull(peerTableId1);
    connPeer.tableOperations().create(peerTable2);
    String peerTableId2=connPeer.tableOperations().tableIdMap().get(peerTable2);
    Assert.assertNotNull(peerTableId2);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable1,TablePermission.WRITE);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable2,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId1);
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId2);
    BatchWriter bw=connMaster.createBatchWriter(masterTable1,new BatchWriterConfig());
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable1 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    bw=connMaster.createBatchWriter(masterTable2,new BatchWriterConfig());
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable2 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    while (!ReplicationTable.isOnline(connMaster)) {
      log.info("Replication table still offline, waiting");
      Thread.sleep(5000);
    }
    boolean fullyReplicated=false;
    for (int i=0; i < 10 && !fullyReplicated; i++) {
      sleepUninterruptibly(2,TimeUnit.SECONDS);
      Scanner s=ReplicationTable.getScanner(connMaster);
      WorkSection.limit(s);
      for (      Entry<Key,Value> entry : s) {
        Status status=Status.parseFrom(entry.getValue().get());
        if (StatusUtil.isFullyReplicated(status)) {
          fullyReplicated|=true;
        }
      }
    }
    Assert.assertNotEquals(0,fullyReplicated);
    long countTable=0l;
    for (int i=0; i < 10; i++) {
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable1,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable1));
      }
      log.info("Found {} records in {}",countTable,peerTable1);
      if (0l == countTable) {
        Thread.sleep(5000);
      }
 else {
        break;
      }
    }
    Assert.assertTrue("Found no records in " + peerTable1 + " in the peer cluster",countTable > 0);
    for (int i=0; i < 10; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable2,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable2));
      }
      log.info("Found {} records in {}",countTable,peerTable2);
      if (0l == countTable) {
        Thread.sleep(5000);
      }
 else {
        break;
      }
    }
    Assert.assertTrue("Found no records in " + peerTable2 + " in the peer cluster",countTable > 0);
  }
  finally {
    peer1Cluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTable() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  MiniAccumuloClusterImpl peer1Cluster=new MiniAccumuloClusterImpl(peerCfg);
  peer1Cluster.start();
  try {
    Connector connMaster=getConnector();
    Connector connPeer=peer1Cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    String peerClusterName="peer";
    String peerUserName="peer", peerPassword="foo";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peer1Cluster.getInstanceName(),peer1Cluster.getZooKeepers())));
    String masterTable1="master1", peerTable1="peer1", masterTable2="master2", peerTable2="peer2";
    connMaster.tableOperations().create(masterTable1);
    String masterTableId1=connMaster.tableOperations().tableIdMap().get(masterTable1);
    Assert.assertNotNull(masterTableId1);
    connMaster.tableOperations().create(masterTable2);
    String masterTableId2=connMaster.tableOperations().tableIdMap().get(masterTable2);
    Assert.assertNotNull(masterTableId2);
    connPeer.tableOperations().create(peerTable1);
    String peerTableId1=connPeer.tableOperations().tableIdMap().get(peerTable1);
    Assert.assertNotNull(peerTableId1);
    connPeer.tableOperations().create(peerTable2);
    String peerTableId2=connPeer.tableOperations().tableIdMap().get(peerTable2);
    Assert.assertNotNull(peerTableId2);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable1,TablePermission.WRITE);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable2,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId1);
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId2);
    BatchWriter bw=connMaster.createBatchWriter(masterTable1,new BatchWriterConfig());
    long masterTable1Records=0l;
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable1 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
        masterTable1Records++;
      }
      bw.addMutation(m);
    }
    bw.close();
    bw=connMaster.createBatchWriter(masterTable2,new BatchWriterConfig());
    long masterTable2Records=0l;
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable2 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
        masterTable2Records++;
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    Set<String> filesFor1=connMaster.replicationOperations().referencedFiles(masterTable1), filesFor2=connMaster.replicationOperations().referencedFiles(masterTable2);
    log.info("Files to replicate for table1: " + filesFor1);
    log.info("Files to replicate for table2: " + filesFor2);
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    log.info("Restarted the tserver");
    Iterators.size(connMaster.createScanner(masterTable1,Authorizations.EMPTY).iterator());
    while (!ReplicationTable.isOnline(connMaster)) {
      log.info("Replication table still offline, waiting");
      Thread.sleep(5000);
    }
    log.info("Waiting for {} for {}",filesFor1,masterTable1);
    connMaster.replicationOperations().drain(masterTable1,filesFor1);
    log.info("Waiting for {} for {}",filesFor2,masterTable2);
    connMaster.replicationOperations().drain(masterTable2,filesFor2);
    long countTable=0l;
    for (    Entry<Key,Value> entry : connPeer.createScanner(peerTable1,Authorizations.EMPTY)) {
      countTable++;
      Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable1));
    }
    log.info("Found {} records in {}",countTable,peerTable1);
    Assert.assertEquals(masterTable1Records,countTable);
    countTable=0l;
    for (    Entry<Key,Value> entry : connPeer.createScanner(peerTable2,Authorizations.EMPTY)) {
      countTable++;
      Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable2));
    }
    log.info("Found {} records in {}",countTable,peerTable2);
    Assert.assertEquals(masterTable2Records,countTable);
  }
  finally {
    peer1Cluster.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.ReplicationIT </h4><pre class="type-9 type-8 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void filesClosedAfterUnused() throws Exception {
  Connector conn=getConnector();
  String table="table";
  conn.tableOperations().create(table);
  String tableId=conn.tableOperations().tableIdMap().get(table);
  Assert.assertNotNull(tableId);
  conn.tableOperations().setProperty(table,Property.TABLE_REPLICATION.getKey(),"true");
  conn.tableOperations().setProperty(table,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","1");
  conn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + "cluster1",ReplicaSystemFactory.getPeerConfigurationValue(MockReplicaSystem.class,"50000"));
  BatchWriter bw=conn.createBatchWriter(table,new BatchWriterConfig());
  Mutation m=new Mutation("one");
  m.put("","","");
  bw.addMutation(m);
  bw.close();
  bw=conn.createBatchWriter(table,new BatchWriterConfig());
  m=new Mutation("three");
  m.put("","","");
  bw.addMutation(m);
  bw.close();
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.fetchColumnFamily(TabletsSection.LogColumnFamily.NAME);
  s.setRange(TabletsSection.getRange(tableId));
  Set<String> wals=new HashSet<>();
  for (  Entry<Key,Value> entry : s) {
    LogEntry logEntry=LogEntry.fromKeyValue(entry.getKey(),entry.getValue());
    wals.add(new Path(logEntry.filename).toString());
  }
  log.warn("Found wals {}",wals);
  bw=conn.createBatchWriter(table,new BatchWriterConfig());
  m=new Mutation("three");
  byte[] bytes=new byte[1024 * 1024];
  m.put("1".getBytes(),new byte[0],bytes);
  m.put("2".getBytes(),new byte[0],bytes);
  m.put("3".getBytes(),new byte[0],bytes);
  m.put("4".getBytes(),new byte[0],bytes);
  m.put("5".getBytes(),new byte[0],bytes);
  bw.addMutation(m);
  bw.close();
  conn.tableOperations().flush(table,null,null,true);
  while (!ReplicationTable.isOnline(conn)) {
    sleepUninterruptibly(2,TimeUnit.SECONDS);
  }
  for (int i=0; i < 10; i++) {
    s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
    s.fetchColumnFamily(LogColumnFamily.NAME);
    s.setRange(TabletsSection.getRange(tableId));
    for (    Entry<Key,Value> entry : s) {
      log.info(entry.getKey().toStringNoTruncate() + "=" + entry.getValue());
    }
    try {
      s=ReplicationTable.getScanner(conn);
      StatusSection.limit(s);
      Text buff=new Text();
      boolean allReferencedLogsClosed=true;
      int recordsFound=0;
      for (      Entry<Key,Value> e : s) {
        recordsFound++;
        allReferencedLogsClosed=true;
        StatusSection.getFile(e.getKey(),buff);
        String file=buff.toString();
        if (wals.contains(file)) {
          Status stat=Status.parseFrom(e.getValue().get());
          if (!stat.getClosed()) {
            log.info("{} wasn't closed",file);
            allReferencedLogsClosed=false;
          }
        }
      }
      if (recordsFound > 0 && allReferencedLogsClosed) {
        return;
      }
      Thread.sleep(2000);
    }
 catch (    RuntimeException e) {
      Throwable cause=e.getCause();
      if (cause instanceof AccumuloSecurityException) {
        AccumuloSecurityException ase=(AccumuloSecurityException)cause;
switch (ase.getSecurityErrorCode()) {
case PERMISSION_DENIED:
          Thread.sleep(2000);
        break;
default :
      throw e;
  }
}
}
}
Assert.fail("We had a file that was referenced but didn't get closed");
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void replicatedStatusEntriesAreDeleted() throws Exception {
  getCluster().getClusterControl().stop(ServerType.GARBAGE_COLLECTOR);
  final Connector conn=getConnector();
  log.info("Got connector to MAC");
  String table1="table1";
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  conn.tableOperations().create(table1);
  int attempts=5;
  while (attempts > 0) {
    try {
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","4");
      conn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + "cluster1",ReplicaSystemFactory.getPeerConfigurationValue(MockReplicaSystem.class,"1000"));
      attempts=0;
    }
 catch (    Exception e) {
      attempts--;
      if (attempts <= 0) {
        throw e;
      }
      sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
    }
  }
  String tableId=conn.tableOperations().tableIdMap().get(table1);
  Assert.assertNotNull("Could not determine table id for " + table1,tableId);
  writeSomeData(conn,table1,2000,50);
  conn.tableOperations().flush(table1,null,null,true);
  boolean online=ReplicationTable.isOnline(conn);
  attempts=10;
  do {
    if (!online) {
      sleepUninterruptibly(1,TimeUnit.SECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table did not exist",online);
  conn.securityOperations().grantTablePermission("root",ReplicationTable.NAME,TablePermission.WRITE);
  log.info("Checking for replication entries in replication");
  Scanner s;
  Set<String> entries=new HashSet<>();
  for (int i=0; i < 5; i++) {
    s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
    s.setRange(ReplicationSection.getRange());
    entries.clear();
    for (    Entry<Key,Value> entry : s) {
      entries.add(entry.getKey().getRow().toString());
      log.info("{}={}",entry.getKey().toStringNoTruncate(),entry.getValue());
    }
    if (!entries.isEmpty()) {
      log.info("Replication entries {}",entries);
      break;
    }
    Thread.sleep(1000);
  }
  Assert.assertFalse("Did not find any replication entries in the replication table",entries.isEmpty());
  boolean notFound=true;
  for (int i=0; i < 10 && notFound; i++) {
    try {
      s=ReplicationTable.getScanner(conn);
      WorkSection.limit(s);
      Entry<Key,Value> e=Iterables.getOnlyElement(s);
      log.info("Found entry: " + e.getKey().toStringNoTruncate());
      Text expectedColqual=new ReplicationTarget("cluster1","4",tableId).toText();
      Assert.assertEquals(expectedColqual,e.getKey().getColumnQualifier());
      notFound=false;
    }
 catch (    NoSuchElementException e) {
    }
catch (    IllegalArgumentException e) {
      s=ReplicationTable.getScanner(conn);
      for (      Entry<Key,Value> content : s) {
        log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
      }
      Assert.fail("Found more than one work section entry");
    }
catch (    RuntimeException e) {
      Throwable cause=e.getCause();
      if (cause instanceof AccumuloSecurityException) {
        AccumuloSecurityException sec=(AccumuloSecurityException)cause;
switch (sec.getSecurityErrorCode()) {
case PERMISSION_DENIED:
          log.warn("Sleeping because permission was denied");
        break;
default :
      throw e;
  }
}
 else {
  throw e;
}
}
Thread.sleep(2000);
}
if (notFound) {
s=ReplicationTable.getScanner(conn);
for (Entry<Key,Value> content : s) {
log.info(content.getKey().toStringNoTruncate() + " => " + ProtobufUtil.toString(Status.parseFrom(content.getValue().get())));
}
Assert.assertFalse("Did not find the work entry for the status entry",notFound);
}
log.info("Killing tserver");
cluster.getClusterControl().stop(ServerType.TABLET_SERVER);
log.info("Starting tserver");
cluster.getClusterControl().start(ServerType.TABLET_SERVER);
log.info("Waiting to read tables");
sleepUninterruptibly(2 * 3,TimeUnit.SECONDS);
for (String table : new String[]{MetadataTable.NAME,table1}) {
Iterators.size(conn.createScanner(table,Authorizations.EMPTY).iterator());
}
log.info("Recovered metadata:");
s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
for (Entry<Key,Value> entry : s) {
log.info("{}={}",entry.getKey().toStringNoTruncate(),entry.getValue());
}
cluster.getClusterControl().start(ServerType.GARBAGE_COLLECTOR);
waitForGCLock(conn);
Thread.sleep(1000);
log.info("After GC");
s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
for (Entry<Key,Value> entry : s) {
log.info("{}={}",entry.getKey().toStringNoTruncate(),entry.getValue());
}
log.info("Checking metadata table for replication entries");
Set<String> remaining=new HashSet<>();
for (int i=0; i < 10; i++) {
s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
s.setRange(ReplicationSection.getRange());
remaining.clear();
for (Entry<Key,Value> e : s) {
remaining.add(e.getKey().getRow().toString());
}
remaining.retainAll(entries);
if (remaining.isEmpty()) {
break;
}
log.info("remaining {}",remaining);
Thread.sleep(2000);
log.info("");
}
Assert.assertTrue("Replication status messages were not cleaned up from metadata table",remaining.isEmpty());
int recordsFound=0;
for (int i=0; i < 30; i++) {
s=ReplicationTable.getScanner(conn);
recordsFound=0;
for (Entry<Key,Value> entry : s) {
recordsFound++;
log.info("{} {}",entry.getKey().toStringNoTruncate(),ProtobufUtil.toString(Status.parseFrom(entry.getValue().get())));
}
if (recordsFound <= 2) {
break;
}
 else {
Thread.sleep(1000);
log.info("");
}
}
Assert.assertTrue("Found unexpected replication records in the replication table",recordsFound <= 2);
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void correctClusterNameInWorkEntry() throws Exception {
  Connector conn=getConnector();
  String table1="table1";
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  conn.tableOperations().create(table1);
  int attempts=5;
  while (attempts > 0) {
    try {
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","4");
      attempts=0;
    }
 catch (    Exception e) {
      attempts--;
      if (attempts <= 0) {
        throw e;
      }
      sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
    }
  }
  writeSomeData(conn,table1,2000,50);
  conn.tableOperations().flush(table1,null,null,true);
  String tableId=conn.tableOperations().tableIdMap().get(table1);
  Assert.assertNotNull("Table ID was null",tableId);
  boolean online=ReplicationTable.isOnline(conn);
  attempts=5;
  do {
    if (!online) {
      sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table did not exist",online);
  for (int i=0; i < 5 && !conn.securityOperations().hasTablePermission("root",ReplicationTable.NAME,TablePermission.READ); i++) {
    Thread.sleep(1000);
  }
  Assert.assertTrue(conn.securityOperations().hasTablePermission("root",ReplicationTable.NAME,TablePermission.READ));
  boolean notFound=true;
  Scanner s;
  for (int i=0; i < 10 && notFound; i++) {
    s=ReplicationTable.getScanner(conn);
    WorkSection.limit(s);
    try {
      Entry<Key,Value> e=Iterables.getOnlyElement(s);
      Text expectedColqual=new ReplicationTarget("cluster1","4",tableId).toText();
      Assert.assertEquals(expectedColqual,e.getKey().getColumnQualifier());
      notFound=false;
    }
 catch (    NoSuchElementException e) {
    }
catch (    IllegalArgumentException e) {
      s=ReplicationTable.getScanner(conn);
      for (      Entry<Key,Value> content : s) {
        log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
      }
      Assert.fail("Found more than one work section entry");
    }
    Thread.sleep(500);
  }
  if (notFound) {
    s=ReplicationTable.getScanner(conn);
    for (    Entry<Key,Value> content : s) {
      log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
    }
    Assert.assertFalse("Did not find the work entry for the status entry",notFound);
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void singleTableWithSingleTarget() throws Exception {
  getCluster().getClusterControl().stop(ServerType.GARBAGE_COLLECTOR);
  Connector conn=getConnector();
  String table1="table1";
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  conn.tableOperations().create(table1);
  int attempts=10;
  while (attempts > 0) {
    try {
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","4");
      conn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + "cluster1",ReplicaSystemFactory.getPeerConfigurationValue(MockReplicaSystem.class,"100000"));
      break;
    }
 catch (    Exception e) {
      attempts--;
      if (attempts <= 0) {
        throw e;
      }
      sleepUninterruptibly(2,TimeUnit.SECONDS);
    }
  }
  writeSomeData(conn,table1,2000,50);
  boolean online=ReplicationTable.isOnline(conn);
  attempts=10;
  do {
    if (!online) {
      sleepUninterruptibly(2,TimeUnit.SECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table was never created",online);
  for (int i=0; i < 10 && !conn.tableOperations().listIterators(ReplicationTable.NAME).keySet().contains(ReplicationTable.COMBINER_NAME); i++) {
    sleepUninterruptibly(2,TimeUnit.SECONDS);
  }
  Assert.assertTrue("Combiner was never set on replication table",conn.tableOperations().listIterators(ReplicationTable.NAME).keySet().contains(ReplicationTable.COMBINER_NAME));
  conn.tableOperations().flush(table1,null,null,true);
  Scanner s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  Entry<Key,Value> entry=null;
  Status expectedStatus=StatusUtil.openWithUnknownLength();
  attempts=10;
  while (null == entry && attempts > 0) {
    try {
      entry=Iterables.getOnlyElement(s);
      Status actual=Status.parseFrom(entry.getValue().get());
      if (actual.getInfiniteEnd() != expectedStatus.getInfiniteEnd()) {
        entry=null;
        Thread.sleep(1000);
      }
    }
 catch (    NoSuchElementException e) {
      entry=null;
      Thread.sleep(500);
    }
catch (    IllegalArgumentException e) {
      s=ReplicationTable.getScanner(conn);
      StatusSection.limit(s);
      for (      Entry<Key,Value> content : s) {
        log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
      }
      throw e;
    }
 finally {
      attempts--;
    }
  }
  Assert.assertNotNull("Could not find expected entry in replication table",entry);
  Status actual=Status.parseFrom(entry.getValue().get());
  Assert.assertTrue("Expected to find a replication entry that is open with infinite length: " + ProtobufUtil.toString(actual),!actual.getClosed() && actual.getInfiniteEnd());
  boolean notFound=true;
  for (int i=0; i < 10 && notFound; i++) {
    s=ReplicationTable.getScanner(conn);
    WorkSection.limit(s);
    int elementsFound=Iterables.size(s);
    if (0 < elementsFound) {
      Assert.assertEquals(1,elementsFound);
      notFound=false;
    }
    Thread.sleep(500);
  }
  if (notFound) {
    s=ReplicationTable.getScanner(conn);
    for (    Entry<Key,Value> content : s) {
      log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
    }
    Assert.assertFalse("Did not find the work entry for the status entry",notFound);
  }
  writeSomeData(conn,table1,3000,50);
  log.info("Issued compaction for table");
  conn.tableOperations().compact(table1,null,null,true,true);
  log.info("Compaction completed");
  Thread.sleep(5000);
  s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  int numRecords=0;
  for (  Entry<Key,Value> e : s) {
    numRecords++;
    log.info("Found status record {}\t{}",e.getKey().toStringNoTruncate(),ProtobufUtil.toString(Status.parseFrom(e.getValue().get())));
  }
  Assert.assertEquals(2,numRecords);
  notFound=true;
  for (int i=0; i < 10 && notFound; i++) {
    s=ReplicationTable.getScanner(conn);
    WorkSection.limit(s);
    int elementsFound=Iterables.size(s);
    if (2 == elementsFound) {
      notFound=false;
    }
    Thread.sleep(500);
  }
  if (notFound) {
    s=ReplicationTable.getScanner(conn);
    for (    Entry<Key,Value> content : s) {
      log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
    }
    Assert.assertFalse("Did not find the work entries for the status entries",notFound);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.StatusMakerIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void statusRecordsCreated() throws Exception {
  String sourceTable=testName.getMethodName();
  conn.tableOperations().create(sourceTable);
  ReplicationTableUtil.configureMetadataTable(conn,sourceTable);
  BatchWriter bw=conn.createBatchWriter(sourceTable,new BatchWriterConfig());
  String walPrefix="hdfs://localhost:8020/accumulo/wals/tserver+port/";
  Set<String> files=Sets.newHashSet(walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID());
  Map<String,Integer> fileToTableId=new HashMap<>();
  int index=1;
  long timeCreated=0;
  Map<String,Long> fileToTimeCreated=new HashMap<>();
  for (  String file : files) {
    Mutation m=new Mutation(ReplicationSection.getRowPrefix() + file);
    m.put(ReplicationSection.COLF,new Text(Integer.toString(index)),StatusUtil.fileCreatedValue(timeCreated));
    fileToTimeCreated.put(file,timeCreated);
    bw.addMutation(m);
    fileToTableId.put(file,index);
    index++;
    timeCreated++;
  }
  bw.close();
  StatusMaker statusMaker=new StatusMaker(conn);
  statusMaker.setSourceTableName(sourceTable);
  statusMaker.run();
  Scanner s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  Text file=new Text(), tableId=new Text();
  for (  Entry<Key,Value> entry : s) {
    StatusSection.getFile(entry.getKey(),file);
    StatusSection.getTableId(entry.getKey(),tableId);
    Assert.assertTrue("Found unexpected file: " + file,files.contains(file.toString()));
    Assert.assertEquals(fileToTableId.get(file.toString()),new Integer(tableId.toString()));
    timeCreated=fileToTimeCreated.get(file.toString());
    Assert.assertNotNull(timeCreated);
    Assert.assertEquals(StatusUtil.fileCreated(timeCreated),Status.parseFrom(entry.getValue().get()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.UnorderedWorkAssignerReplicationIT </h4><pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTableWithoutDrain() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  MiniAccumuloClusterImpl peer1Cluster=new MiniAccumuloClusterImpl(peerCfg);
  peer1Cluster.start();
  try {
    Connector connMaster=getConnector();
    Connector connPeer=peer1Cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    String peerClusterName="peer";
    String peerUserName="repl";
    String peerPassword="passwd";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peer1Cluster.getInstanceName(),peer1Cluster.getZooKeepers())));
    String masterTable1="master1", peerTable1="peer1", masterTable2="master2", peerTable2="peer2";
    connMaster.tableOperations().create(masterTable1);
    String masterTableId1=connMaster.tableOperations().tableIdMap().get(masterTable1);
    Assert.assertNotNull(masterTableId1);
    connMaster.tableOperations().create(masterTable2);
    String masterTableId2=connMaster.tableOperations().tableIdMap().get(masterTable2);
    Assert.assertNotNull(masterTableId2);
    connPeer.tableOperations().create(peerTable1);
    String peerTableId1=connPeer.tableOperations().tableIdMap().get(peerTable1);
    Assert.assertNotNull(peerTableId1);
    connPeer.tableOperations().create(peerTable2);
    String peerTableId2=connPeer.tableOperations().tableIdMap().get(peerTable2);
    Assert.assertNotNull(peerTableId2);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable1,TablePermission.WRITE);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable2,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId1);
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId2);
    sleepUninterruptibly(3,TimeUnit.SECONDS);
    BatchWriter bw=connMaster.createBatchWriter(masterTable1,new BatchWriterConfig());
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable1 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    bw=connMaster.createBatchWriter(masterTable2,new BatchWriterConfig());
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable2 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    while (!ReplicationTable.isOnline(connMaster)) {
      Thread.sleep(500);
    }
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    boolean fullyReplicated=false;
    for (int i=0; i < 10 && !fullyReplicated; i++) {
      sleepUninterruptibly(timeoutFactor * 2,TimeUnit.SECONDS);
      Scanner s=ReplicationTable.getScanner(connMaster);
      WorkSection.limit(s);
      for (      Entry<Key,Value> entry : s) {
        Status status=Status.parseFrom(entry.getValue().get());
        if (StatusUtil.isFullyReplicated(status)) {
          fullyReplicated|=true;
        }
      }
    }
    Assert.assertNotEquals(0,fullyReplicated);
    long countTable=0l;
    for (int i=0; i < 10; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable1,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable1));
      }
      log.info("Found {} records in {}",countTable,peerTable1);
      if (0 < countTable) {
        break;
      }
      Thread.sleep(2000);
    }
    Assert.assertTrue("Did not find any records in " + peerTable1 + " on peer",countTable > 0);
    for (int i=0; i < 10; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable2,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable2));
      }
      log.info("Found {} records in {}",countTable,peerTable2);
      if (0 < countTable) {
        break;
      }
      Thread.sleep(2000);
    }
    Assert.assertTrue("Did not find any records in " + peerTable2 + " on peer",countTable > 0);
  }
  finally {
    peer1Cluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataWasReplicatedToThePeerWithoutDrain() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  MiniAccumuloClusterImpl peerCluster=new MiniAccumuloClusterImpl(peerCfg);
  peerCluster.start();
  Connector connMaster=getConnector();
  Connector connPeer=peerCluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
  String peerUserName="repl";
  String peerPassword="passwd";
  connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
  String peerClusterName="peer";
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerCluster.getInstanceName(),peerCluster.getZooKeepers())));
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
  String masterTable="master", peerTable="peer";
  connMaster.tableOperations().create(masterTable);
  String masterTableId=connMaster.tableOperations().tableIdMap().get(masterTable);
  Assert.assertNotNull(masterTableId);
  connPeer.tableOperations().create(peerTable);
  String peerTableId=connPeer.tableOperations().tableIdMap().get(peerTable);
  Assert.assertNotNull(peerTableId);
  connPeer.securityOperations().grantTablePermission(peerUserName,peerTable,TablePermission.WRITE);
  connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION.getKey(),"true");
  connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId);
  BatchWriter bw=connMaster.createBatchWriter(masterTable,new BatchWriterConfig());
  for (int rows=0; rows < 5000; rows++) {
    Mutation m=new Mutation(Integer.toString(rows));
    for (int cols=0; cols < 100; cols++) {
      String value=Integer.toString(cols);
      m.put(value,"",value);
    }
    bw.addMutation(m);
  }
  bw.close();
  log.info("Wrote all data to master cluster");
  Set<String> files=connMaster.replicationOperations().referencedFiles(masterTable);
  for (  String s : files) {
    log.info("Found referenced file for " + masterTable + ": "+ s);
  }
  for (  ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
    cluster.killProcess(ServerType.TABLET_SERVER,proc);
  }
  cluster.exec(TabletServer.class);
  Iterators.size(connMaster.createScanner(masterTable,Authorizations.EMPTY).iterator());
  for (  Entry<Key,Value> kv : connMaster.createScanner(ReplicationTable.NAME,Authorizations.EMPTY)) {
    log.debug(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
  }
  connMaster.replicationOperations().drain(masterTable,files);
  Scanner master=connMaster.createScanner(masterTable,Authorizations.EMPTY), peer=connPeer.createScanner(peerTable,Authorizations.EMPTY);
  Iterator<Entry<Key,Value>> masterIter=master.iterator(), peerIter=peer.iterator();
  Assert.assertTrue("No data in master table",masterIter.hasNext());
  Assert.assertTrue("No data in peer table",peerIter.hasNext());
  while (masterIter.hasNext() && peerIter.hasNext()) {
    Entry<Key,Value> masterEntry=masterIter.next(), peerEntry=peerIter.next();
    Assert.assertEquals(peerEntry.getKey() + " was not equal to " + peerEntry.getKey(),0,masterEntry.getKey().compareTo(peerEntry.getKey(),PartialKey.ROW_COLFAM_COLQUAL_COLVIS));
    Assert.assertEquals(masterEntry.getValue(),peerEntry.getValue());
  }
  Assert.assertFalse("Had more data to read from the master",masterIter.hasNext());
  Assert.assertFalse("Had more data to read from the peer",peerIter.hasNext());
  peerCluster.stop();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataWasReplicatedToThePeer() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  MiniAccumuloClusterImpl peerCluster=new MiniAccumuloClusterImpl(peerCfg);
  peerCluster.start();
  try {
    final Connector connMaster=getConnector();
    final Connector connPeer=peerCluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    ReplicationTable.setOnline(connMaster);
    String peerUserName="peer", peerPassword="foo";
    String peerClusterName="peer";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerCluster.getInstanceName(),peerCluster.getZooKeepers())));
    final String masterTable="master", peerTable="peer";
    connMaster.tableOperations().create(masterTable);
    String masterTableId=connMaster.tableOperations().tableIdMap().get(masterTable);
    Assert.assertNotNull(masterTableId);
    connPeer.tableOperations().create(peerTable);
    String peerTableId=connPeer.tableOperations().tableIdMap().get(peerTable);
    Assert.assertNotNull(peerTableId);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId);
    sleepUninterruptibly(3,TimeUnit.SECONDS);
    BatchWriter bw=connMaster.createBatchWriter(masterTable,new BatchWriterConfig());
    for (int rows=0; rows < 5000; rows++) {
      Mutation m=new Mutation(Integer.toString(rows));
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    final Set<String> filesNeedingReplication=connMaster.replicationOperations().referencedFiles(masterTable);
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    log.info("TabletServer restarted");
    Iterators.size(ReplicationTable.getScanner(connMaster).iterator());
    log.info("TabletServer is online");
    log.info("");
    log.info("Fetching metadata records:");
    for (    Entry<Key,Value> kv : connMaster.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
      if (ReplicationSection.COLF.equals(kv.getKey().getColumnFamily())) {
        log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
      }
 else {
        log.info(kv.getKey().toStringNoTruncate() + " " + kv.getValue());
      }
    }
    log.info("");
    log.info("Fetching replication records:");
    for (    Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
      log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
    }
    Future<Boolean> future=executor.submit(new Callable<Boolean>(){
      @Override public Boolean call() throws Exception {
        connMaster.replicationOperations().drain(masterTable,filesNeedingReplication);
        log.info("Drain completed");
        return true;
      }
    }
);
    long timeoutSeconds=timeoutFactor * 30;
    try {
      future.get(timeoutSeconds,TimeUnit.SECONDS);
    }
 catch (    TimeoutException e) {
      future.cancel(true);
      Assert.fail("Drain did not finish within " + timeoutSeconds + " seconds");
    }
    log.info("drain completed");
    log.info("");
    log.info("Fetching metadata records:");
    for (    Entry<Key,Value> kv : connMaster.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
      if (ReplicationSection.COLF.equals(kv.getKey().getColumnFamily())) {
        log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
      }
 else {
        log.info(kv.getKey().toStringNoTruncate() + " " + kv.getValue());
      }
    }
    log.info("");
    log.info("Fetching replication records:");
    for (    Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
      log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
    }
    Scanner master=connMaster.createScanner(masterTable,Authorizations.EMPTY), peer=connPeer.createScanner(peerTable,Authorizations.EMPTY);
    Iterator<Entry<Key,Value>> masterIter=master.iterator(), peerIter=peer.iterator();
    Entry<Key,Value> masterEntry=null, peerEntry=null;
    while (masterIter.hasNext() && peerIter.hasNext()) {
      masterEntry=masterIter.next();
      peerEntry=peerIter.next();
      Assert.assertEquals(masterEntry.getKey() + " was not equal to " + peerEntry.getKey(),0,masterEntry.getKey().compareTo(peerEntry.getKey(),PartialKey.ROW_COLFAM_COLQUAL_COLVIS));
      Assert.assertEquals(masterEntry.getValue(),peerEntry.getValue());
    }
    log.info("Last master entry: " + masterEntry);
    log.info("Last peer entry: " + peerEntry);
    Assert.assertFalse("Had more data to read from the master",masterIter.hasNext());
    Assert.assertFalse("Had more data to read from the peer",peerIter.hasNext());
  }
  finally {
    peerCluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTable() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  MiniAccumuloClusterImpl peer1Cluster=new MiniAccumuloClusterImpl(peerCfg);
  peer1Cluster.start();
  try {
    Connector connMaster=getConnector();
    Connector connPeer=peer1Cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    String peerClusterName="peer";
    String peerUserName="peer", peerPassword="foo";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peer1Cluster.getInstanceName(),peer1Cluster.getZooKeepers())));
    String masterTable1="master1", peerTable1="peer1", masterTable2="master2", peerTable2="peer2";
    connMaster.tableOperations().create(masterTable1);
    String masterTableId1=connMaster.tableOperations().tableIdMap().get(masterTable1);
    Assert.assertNotNull(masterTableId1);
    connMaster.tableOperations().create(masterTable2);
    String masterTableId2=connMaster.tableOperations().tableIdMap().get(masterTable2);
    Assert.assertNotNull(masterTableId2);
    connPeer.tableOperations().create(peerTable1);
    String peerTableId1=connPeer.tableOperations().tableIdMap().get(peerTable1);
    Assert.assertNotNull(peerTableId1);
    connPeer.tableOperations().create(peerTable2);
    String peerTableId2=connPeer.tableOperations().tableIdMap().get(peerTable2);
    Assert.assertNotNull(peerTableId2);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable1,TablePermission.WRITE);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable2,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId1);
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId2);
    sleepUninterruptibly(3,TimeUnit.SECONDS);
    BatchWriter bw=connMaster.createBatchWriter(masterTable1,new BatchWriterConfig());
    long masterTable1Records=0l;
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable1 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
        masterTable1Records++;
      }
      bw.addMutation(m);
    }
    bw.close();
    bw=connMaster.createBatchWriter(masterTable2,new BatchWriterConfig());
    long masterTable2Records=0l;
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable2 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
        masterTable2Records++;
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    Set<String> filesFor1=connMaster.replicationOperations().referencedFiles(masterTable1), filesFor2=connMaster.replicationOperations().referencedFiles(masterTable2);
    while (!ReplicationTable.isOnline(connMaster)) {
      Thread.sleep(500);
    }
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    log.info("Restarted the tserver");
    Iterators.size(connMaster.createScanner(masterTable1,Authorizations.EMPTY).iterator());
    log.info("Waiting for {} for {}",filesFor1,masterTable1);
    connMaster.replicationOperations().drain(masterTable1,filesFor1);
    log.info("Waiting for {} for {}",filesFor2,masterTable2);
    connMaster.replicationOperations().drain(masterTable2,filesFor2);
    long countTable=0l;
    for (int i=0; i < 5; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable1,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable1));
      }
      log.info("Found {} records in {}",countTable,peerTable1);
      if (masterTable1Records != countTable) {
        log.warn("Did not find {} expected records in {}, only found {}",masterTable1Records,peerTable1,countTable);
      }
    }
    Assert.assertEquals(masterTable1Records,countTable);
    for (int i=0; i < 5; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable2,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable2));
      }
      log.info("Found {} records in {}",countTable,peerTable2);
      if (masterTable2Records != countTable) {
        log.warn("Did not find {} expected records in {}, only found {}",masterTable2Records,peerTable2,countTable);
      }
    }
    Assert.assertEquals(masterTable2Records,countTable);
  }
  finally {
    peer1Cluster.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.UnusedWalDoesntCloseReplicationStatusIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  File accumuloDir=this.getCluster().getConfig().getAccumuloDir();
  final Connector conn=getConnector();
  final String tableName=getUniqueNames(1)[0];
  conn.securityOperations().grantTablePermission("root",MetadataTable.NAME,TablePermission.WRITE);
  conn.tableOperations().create(tableName);
  final String tableId=conn.tableOperations().tableIdMap().get(tableName);
  final int numericTableId=Integer.parseInt(tableId);
  final int fakeTableId=numericTableId + 1;
  Assert.assertNotNull("Did not find table ID",tableId);
  conn.tableOperations().setProperty(tableName,Property.TABLE_REPLICATION.getKey(),"true");
  conn.tableOperations().setProperty(tableName,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","1");
  conn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + "cluster1",ReplicaSystemFactory.getPeerConfigurationValue(MockReplicaSystem.class,"50000"));
  FileSystem fs=FileSystem.getLocal(new Configuration());
  File tserverWalDir=new File(accumuloDir,ServerConstants.WAL_DIR + Path.SEPARATOR + "faketserver+port");
  File tserverWal=new File(tserverWalDir,UUID.randomUUID().toString());
  fs.mkdirs(new Path(tserverWalDir.getAbsolutePath()));
  FSDataOutputStream out=fs.create(new Path(tserverWal.getAbsolutePath()));
  out.write(DfsLogger.LOG_FILE_HEADER_V3.getBytes(UTF_8));
  DataOutputStream dos=new DataOutputStream(out);
  dos.writeUTF("NullCryptoModule");
  LogFileKey key=new LogFileKey();
  LogFileValue value=new LogFileValue();
  key.event=OPEN;
  key.tserverSession=tserverWal.getAbsolutePath();
  key.filename=tserverWal.getAbsolutePath();
  key.write(out);
  value.write(out);
  key.event=LogEvents.DEFINE_TABLET;
  key.tablet=new KeyExtent(new Text(Integer.toString(fakeTableId)),null,null);
  key.seq=1l;
  key.tid=1;
  key.write(dos);
  value.write(dos);
  key.tablet=null;
  key.event=LogEvents.MUTATION;
  key.filename=tserverWal.getAbsolutePath();
  value.mutations=Arrays.<Mutation>asList(new ServerMutation(new Text("row")));
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.COMPACTION_START;
  key.filename=accumuloDir.getAbsolutePath() + "/tables/" + fakeTableId+ "/t-000001/A000001.rf";
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.COMPACTION_FINISH;
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  dos.close();
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("m");
  m.put("m","m","M");
  bw.addMutation(m);
  bw.close();
  log.info("State of metadata table after inserting a record");
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  for (  Entry<Key,Value> entry : s) {
    System.out.println(entry.getKey().toStringNoTruncate() + " " + entry.getValue());
  }
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.ReplicationSection.getRange());
  for (  Entry<Key,Value> entry : s) {
    System.out.println(entry.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(entry.getValue().get())));
  }
  log.info("Offline'ing table");
  conn.tableOperations().offline(tableName,true);
  String walUri=tserverWal.toURI().toString();
  KeyExtent extent=new KeyExtent(new Text(tableId),null,null);
  bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  m=new Mutation(extent.getMetadataEntry());
  m.put(MetadataSchema.TabletsSection.LogColumnFamily.NAME,new Text("localhost:12345/" + walUri),new Value((walUri + "|1").getBytes(UTF_8)));
  bw.addMutation(m);
  m=new Mutation(MetadataSchema.ReplicationSection.getRowPrefix() + new Path(walUri).toString());
  m.put(MetadataSchema.ReplicationSection.COLF,new Text(tableId),new Value(StatusUtil.fileCreated(System.currentTimeMillis()).toByteArray()));
  bw.addMutation(m);
  bw.close();
  log.info("State of metadata after injecting WAL manually");
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  for (  Entry<Key,Value> entry : s) {
    log.info(entry.getKey().toStringNoTruncate() + " " + entry.getValue());
  }
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.ReplicationSection.getRange());
  for (  Entry<Key,Value> entry : s) {
    log.info(entry.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(entry.getValue().get())));
  }
  log.info("Bringing table online");
  conn.tableOperations().online(tableName,true);
  Assert.assertEquals(1,Iterables.size(conn.createScanner(tableName,Authorizations.EMPTY)));
  log.info("Table has performed recovery, state of metadata:");
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  for (  Entry<Key,Value> entry : s) {
    log.info(entry.getKey().toStringNoTruncate() + " " + entry.getValue());
  }
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.ReplicationSection.getRange());
  for (  Entry<Key,Value> entry : s) {
    Status status=Status.parseFrom(entry.getValue().get());
    log.info(entry.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(status));
    Assert.assertFalse("Status record was closed and it should not be",status.getClosed());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.security.KerberosTokenTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDestroy() throws Exception {
  String user=testName.getMethodName();
  File userKeytab=new File(kdc.getKeytabDir(),user + ".keytab");
  if (userKeytab.exists() && !userKeytab.delete()) {
    log.warn("Unable to delete {}",userKeytab);
  }
  kdc.createPrincipal(userKeytab,user);
  user=kdc.qualifyUser(user);
  UserGroupInformation.loginUserFromKeytab(user,userKeytab.getAbsolutePath());
  KerberosToken token=new KerberosToken();
  assertEquals(user,token.getPrincipal());
  token.destroy();
  assertTrue(token.isDestroyed());
  assertNull(token.getPrincipal());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tracer.TracerTest </h4><pre class="type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThrift() throws Exception {
  TestReceiver tracer=new TestReceiver();
  org.apache.htrace.Trace.addReceiver(tracer);
  ServerSocket socket=new ServerSocket(0);
  TServerSocket transport=new TServerSocket(socket);
  transport.listen();
  TThreadPoolServer.Args args=new TThreadPoolServer.Args(transport);
  args.processor(new Processor<Iface>(TraceWrap.service(new Service())));
  final TServer tserver=new TThreadPoolServer(args);
  Thread t=new Thread(){
    @Override public void run(){
      tserver.serve();
    }
  }
;
  t.start();
  TTransport clientTransport=new TSocket(new Socket("localhost",socket.getLocalPort()));
  TestService.Iface client=new TestService.Client(new TBinaryProtocol(clientTransport),new TBinaryProtocol(clientTransport));
  client=TraceWrap.client(client);
  assertFalse(client.checkTrace(null,"test"));
  Span start=Trace.on("start");
  assertTrue(client.checkTrace(null,"my test"));
  start.stop();
  assertNotNull(tracer.traces.get(start.traceId()));
  String traces[]={"my test","checkTrace","client:checkTrace","start"};
  assertTrue(tracer.traces.get(start.traceId()).size() == traces.length);
  for (int i=0; i < traces.length; i++)   assertEquals(traces[i],tracer.traces.get(start.traceId()).get(i).description);
  tserver.stop();
  t.join(100);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void testTrace() throws Exception {
  TestReceiver tracer=new TestReceiver();
  org.apache.htrace.Trace.addReceiver(tracer);
  assertFalse(Trace.isTracing());
  Trace.start("nop").stop();
  assertTrue(tracer.traces.size() == 0);
  assertFalse(Trace.isTracing());
  Trace.on("nop").stop();
  assertTrue(tracer.traces.size() == 1);
  assertFalse(Trace.isTracing());
  Span start=Trace.on("testing");
  assertEquals(Trace.currentTrace().getSpan(),start.getScope().getSpan());
  assertTrue(Trace.isTracing());
  Span span=Trace.start("shortest trace ever");
  span.stop();
  long traceId=Trace.currentTraceId();
  assertNotNull(tracer.traces.get(traceId));
  assertTrue(tracer.traces.get(traceId).size() == 1);
  assertEquals("shortest trace ever",tracer.traces.get(traceId).get(0).description);
  Span pause=Trace.start("pause");
  Thread.sleep(100);
  pause.stop();
  assertTrue(tracer.traces.get(traceId).size() == 2);
  assertTrue(tracer.traces.get(traceId).get(1).millis() >= 100);
  Thread t=new Thread(Trace.wrap(new Runnable(){
    @Override public void run(){
      assertTrue(Trace.isTracing());
    }
  }
),"My Task");
  t.start();
  t.join();
  assertTrue(tracer.traces.get(traceId).size() == 3);
  assertEquals("My Task",tracer.traces.get(traceId).get(2).description);
  Trace.off();
  assertFalse(Trace.isTracing());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.CheckTabletMetadataTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testBadTabletMetadata() throws Exception {
  KeyExtent ke=new KeyExtent(new Text("1"),null,null);
  TreeMap<Key,Value> tabletMeta=new TreeMap<Key,Value>();
  put(tabletMeta,"1<",TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN,KeyExtent.encodePrevEndRow(null).get());
  put(tabletMeta,"1<",TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN,"/t1".getBytes());
  put(tabletMeta,"1<",TabletsSection.ServerColumnFamily.TIME_COLUMN,"M0".getBytes());
  put(tabletMeta,"1<",TabletsSection.FutureLocationColumnFamily.NAME,"4","127.0.0.1:9997");
  TServerInstance tsi=new TServerInstance("127.0.0.1:9997",4);
  Assert.assertNotNull(TabletServer.checkTabletMetadata(ke,tsi,tabletMeta,ke.getMetadataEntry()));
  assertFail(tabletMeta,ke,new TServerInstance("127.0.0.1:9998",4));
  assertFail(tabletMeta,ke,new TServerInstance("127.0.0.1:9998",5));
  assertFail(tabletMeta,ke,new TServerInstance("127.0.0.1:9997",5));
  assertFail(tabletMeta,ke,new TServerInstance("127.0.0.2:9997",4));
  assertFail(tabletMeta,ke,new TServerInstance("127.0.0.2:9997",5));
  assertFail(tabletMeta,new KeyExtent(new Text("1"),null,new Text("m")),tsi);
  assertFail(tabletMeta,new KeyExtent(new Text("1"),new Text("r"),new Text("m")),tsi);
  assertFail(tabletMeta,ke,tsi,nk("1<",TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN));
  assertFail(tabletMeta,ke,tsi,nk("1<",TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN));
  assertFail(tabletMeta,ke,tsi,nk("1<",TabletsSection.ServerColumnFamily.TIME_COLUMN));
  assertFail(tabletMeta,ke,tsi,nk("1<",TabletsSection.FutureLocationColumnFamily.NAME,"4"));
  TreeMap<Key,Value> copy=new TreeMap<Key,Value>(tabletMeta);
  put(copy,"1<",TabletsSection.CurrentLocationColumnFamily.NAME,"4","127.0.0.1:9997");
  assertFail(copy,ke,tsi);
  assertFail(copy,ke,tsi,nk("1<",TabletsSection.FutureLocationColumnFamily.NAME,"4"));
  copy=new TreeMap<Key,Value>(tabletMeta);
  put(copy,"1<",TabletsSection.CurrentLocationColumnFamily.NAME,"5","127.0.0.1:9998");
  assertFail(copy,ke,tsi);
  put(copy,"1<",TabletsSection.CurrentLocationColumnFamily.NAME,"6","127.0.0.1:9999");
  assertFail(copy,ke,tsi);
  copy=new TreeMap<Key,Value>(tabletMeta);
  put(copy,"1<",TabletsSection.FutureLocationColumnFamily.NAME,"5","127.0.0.1:9998");
  assertFail(copy,ke,tsi);
  assertFail(new TreeMap<Key,Value>(),ke,tsi);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.constraints.ConstraintCheckerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
"></span><br>
@Test public void testCheckAllOK(){
  expect(extent.contains(anyObject(BinaryComparable.class))).andReturn(true);
  replayAll();
  constraints.add(makeSuccessConstraint());
  assertNull(cc.check(env,m));
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
