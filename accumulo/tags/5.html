<h3><span class=" glyphicon glyphicon-tag"/>&nbspBooleanVerifier</h3><kbd>Verifies boolean conditions</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.accumulo.core.cli.TestClientOpts </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testVolumes() throws IOException {
  File instanceId=tmpDir.newFolder("instance_id");
  File uuid=new File(instanceId,UUID.randomUUID().toString());
  assertTrue(uuid.createNewFile());
  ClientOpts args=new ClientOpts();
  File siteXml=tmpDir.newFile(this.getClass().getSimpleName() + "-" + testName.getMethodName()+ "-site.xml");
  FileWriter fileWriter=new FileWriter(siteXml);
  fileWriter.append("<configuration>\n");
  fileWriter.append("<property><name>" + Property.INSTANCE_VOLUMES.getKey() + "</name><value>"+ tmpDir.getRoot().toURI().toString()+ "</value></property>\n");
  fileWriter.append("<property><name>" + ClientProperty.INSTANCE_NAME + "</name><value>foo</value></property>\n");
  fileWriter.append("</configuration>\n");
  fileWriter.close();
  JCommander jc=new JCommander();
  jc.addObject(args);
  jc.parse("--site-file",siteXml.getAbsolutePath());
  args.getInstance();
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@SuppressWarnings("deprecation") @Test public void testInstanceDir() throws IOException {
  File instanceId=tmpDir.newFolder("instance_id");
  assertTrue(instanceId.mkdir() || instanceId.isDirectory());
  File uuid=new File(instanceId,UUID.randomUUID().toString());
  assertTrue(uuid.createNewFile());
  ClientOpts args=new ClientOpts();
  File siteXml=tmpDir.newFile(this.getClass().getSimpleName() + "-" + testName.getMethodName()+ "-site.xml");
  FileWriter fileWriter=new FileWriter(siteXml);
  fileWriter.append("<configuration>\n");
  fileWriter.append("<property><name>" + Property.INSTANCE_DFS_DIR.getKey() + "</name><value>"+ tmpDir.getRoot().getAbsolutePath()+ "</value></property>\n");
  fileWriter.append("<property><name>" + Property.INSTANCE_DFS_URI.getKey() + "</name><value>file://</value></property>\n");
  fileWriter.append("<property><name>" + ClientProperty.INSTANCE_NAME + "</name><value>foo</value></property>\n");
  fileWriter.append("</configuration>\n");
  fileWriter.close();
  JCommander jc=new JCommander();
  jc.addObject(args);
  jc.parse("--site-file",siteXml.getAbsolutePath());
  args.getInstance();
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  BatchWriterConfig cfg=new BatchWriterConfig();
  ClientOpts args=new ClientOpts();
  BatchWriterOpts bwOpts=new BatchWriterOpts();
  BatchScannerOpts bsOpts=new BatchScannerOpts();
  try {
    assertNull(args.getPrincipal());
    fail("Expected to receive exception fetching non-existent principal");
  }
 catch (  AccumuloSecurityException e) {
  }
  assertNull(args.getSecurePassword());
  assertNull(args.getToken());
  assertEquals(Long.valueOf(cfg.getMaxLatency(TimeUnit.MILLISECONDS)),bwOpts.batchLatency);
  assertEquals(Long.valueOf(cfg.getTimeout(TimeUnit.MILLISECONDS)),bwOpts.batchTimeout);
  assertEquals(Long.valueOf(cfg.getMaxMemory()),bwOpts.batchMemory);
  assertFalse(args.debug);
  assertFalse(args.trace);
  assertEquals(10,bsOpts.scanThreads.intValue());
  assertEquals(null,args.instance);
  assertEquals(Authorizations.EMPTY,args.auths);
  assertEquals("localhost:2181",args.zookeepers);
  assertFalse(args.help);
  JCommander jc=new JCommander();
  jc.addObject(args);
  jc.addObject(bwOpts);
  jc.addObject(bsOpts);
  jc.parse("-u","bar","-p","foo","--batchLatency","3s","--batchTimeout","2s","--batchMemory","1M","--debug","--trace","--scanThreads","7","-i","instance","--auths","G1,G2,G3","-z","zoohost1,zoohost2","--help");
  assertEquals("bar",args.getPrincipal());
  assertNull(args.getSecurePassword());
  assertEquals(new PasswordToken("foo"),args.getToken());
  assertEquals(Long.valueOf(3000),bwOpts.batchLatency);
  assertEquals(Long.valueOf(2000),bwOpts.batchTimeout);
  assertEquals(Long.valueOf(1024 * 1024),bwOpts.batchMemory);
  assertTrue(args.debug);
  assertTrue(args.trace);
  assertEquals(7,bsOpts.scanThreads.intValue());
  assertEquals("instance",args.instance);
  assertEquals(new Authorizations("G1","G2","G3"),args.auths);
  assertEquals("zoohost1,zoohost2",args.zookeepers);
  assertTrue(args.help);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.ClientConfigurationTest </h4><pre class="type-11 type-5 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfPath() throws IOException {
  File target=new File(System.getProperty("user.dir"),"target");
  assertTrue("'target' build directory does not exist",target.exists());
  File testDir=new File(target,getClass().getName());
  if (!testDir.exists()) {
    assertTrue("Failed to create test dir " + testDir,testDir.mkdirs());
  }
  File clientConf=new File(testDir,"client.conf");
  if (!clientConf.exists()) {
    assertTrue("Failed to create file " + clientConf,clientConf.createNewFile());
  }
  assertEquals(clientConf.toString(),ClientConfiguration.getClientConfPath(testDir.toString()));
  assertEquals(clientConf.toString(),ClientConfiguration.getClientConfPath(clientConf.toString()));
  final File missing=new File("foobarbaz12332112");
  assertEquals(missing.toString(),ClientConfiguration.getClientConfPath(missing.toString()));
  assertNull(ClientConfiguration.getClientConfPath(null));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.RowIteratorTest </h4><pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnreadRow(){
  final RowIterator i=new RowIterator(makeIterator("a b c d","a 1 2 3","b 1 2 3"));
  assertTrue(i.hasNext());
  Iterator<Entry<Key,Value>> firstRow=i.next();
  assertEquals(0,i.getKVCount());
  assertTrue(i.hasNext());
  assertEquals(2,i.getKVCount());
  Iterator<Entry<Key,Value>> nextRow=i.next();
  assertEquals(2,i.getKVCount());
  assertFalse(i.hasNext());
  assertEquals(3,i.getKVCount());
  try {
    firstRow.hasNext();
    fail();
  }
 catch (  IllegalStateException e) {
  }
  try {
    nextRow.next();
    fail();
  }
 catch (  IllegalStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRowIterator(){
  List<List<Entry<Key,Value>>> rows=getRows(makeIterator());
  assertEquals(0,rows.size());
  rows=getRows(makeIterator("a b c d"));
  assertEquals(1,rows.size());
  assertEquals(1,rows.get(0).size());
  rows=getRows(makeIterator("a cf cq1 v","a cf cq2 v","a cf cq3 v","b cf cq1 x"));
  assertEquals(2,rows.size());
  assertEquals(3,rows.get(0).size());
  assertEquals(1,rows.get(1).size());
  RowIterator i=new RowIterator(makeIterator());
  try {
    i.next();
    fail();
  }
 catch (  NoSuchElementException ex) {
  }
  i=new RowIterator(makeIterator("a b c d","a 1 2 3"));
  assertTrue(i.hasNext());
  Iterator<Entry<Key,Value>> row=i.next();
  assertTrue(row.hasNext());
  row.next();
  assertTrue(row.hasNext());
  row.next();
  assertFalse(row.hasNext());
  try {
    row.next();
    fail();
  }
 catch (  NoSuchElementException ex) {
  }
  assertEquals(0,i.getKVCount());
  assertFalse(i.hasNext());
  assertEquals(2,i.getKVCount());
  try {
    i.next();
    fail();
  }
 catch (  NoSuchElementException ex) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.TestThrift1474 </h4><pre class="type-8 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws IOException, TException, InterruptedException {
  TServerSocket serverTransport=new TServerSocket(0);
  serverTransport.listen();
  int port=serverTransport.getServerSocket().getLocalPort();
  TestServer handler=new TestServer();
  ThriftTest.Processor<ThriftTest.Iface> processor=new ThriftTest.Processor<ThriftTest.Iface>(handler);
  TThreadPoolServer.Args args=new TThreadPoolServer.Args(serverTransport);
  args.stopTimeoutVal=10;
  args.stopTimeoutUnit=TimeUnit.MILLISECONDS;
  final TServer server=new TThreadPoolServer(args.processor(processor));
  Thread thread=new Thread(){
    @Override public void run(){
      server.serve();
    }
  }
;
  thread.start();
  while (!server.isServing()) {
    sleepUninterruptibly(10,TimeUnit.MILLISECONDS);
  }
  TTransport transport=new TSocket("localhost",port);
  transport.open();
  TProtocol protocol=new TBinaryProtocol(transport);
  ThriftTest.Client client=new ThriftTest.Client(protocol);
  assertTrue(client.success());
  assertFalse(client.fails());
  try {
    client.throwsError();
    fail("no exception thrown");
  }
 catch (  ThriftSecurityException ex) {
  }
  server.stop();
  thread.join();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.ClientContextTest </h4><pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sensitivePropertiesIncludedInProperties(){
  if (!isCredentialProviderAvailable) {
    return;
  }
  String absPath=getKeyStoreUrl(keystore);
  ClientConfiguration clientConf=new ClientConfiguration();
  clientConf.addProperty(Property.GENERAL_SECURITY_CREDENTIAL_PROVIDER_PATHS.getKey(),absPath);
  AccumuloConfiguration accClientConf=ClientContext.convertClientConfig(clientConf);
  Map<String,String> props=new HashMap<String,String>();
  Predicate<String> all=Predicates.alwaysTrue();
  accClientConf.getProperties(props,all);
  Assert.assertEquals(Property.GENERAL_RPC_TIMEOUT.getDefaultValue(),props.get(Property.GENERAL_RPC_TIMEOUT.getKey()));
  Assert.assertFalse(props.containsKey("ignored.property"));
  Assert.assertEquals("mysecret",props.get(Property.INSTANCE_SECRET.getKey()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.ConditionalComparatorTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testComparator(){
  Condition c1=new Condition("a","b");
  Condition c2=new Condition("a","c");
  Condition c3=new Condition("b","c");
  Condition c4=new Condition("a","b").setTimestamp(5);
  Condition c5=new Condition("a","b").setTimestamp(6);
  Condition c6=new Condition("a","b").setVisibility(new ColumnVisibility("A&B"));
  Condition c7=new Condition("a","b").setVisibility(new ColumnVisibility("A&C"));
  ConditionComparator comparator=new ConditionComparator();
  Assert.assertTrue(comparator.compare(c1,c1) == 0);
  Assert.assertTrue(comparator.compare(c1,c2) < 0);
  Assert.assertTrue(comparator.compare(c2,c1) > 0);
  Assert.assertTrue(comparator.compare(c1,c3) < 0);
  Assert.assertTrue(comparator.compare(c3,c1) > 0);
  Assert.assertTrue(comparator.compare(c1,c4) < 0);
  Assert.assertTrue(comparator.compare(c4,c1) > 0);
  Assert.assertTrue(comparator.compare(c5,c4) < 0);
  Assert.assertTrue(comparator.compare(c4,c5) > 0);
  Assert.assertTrue(comparator.compare(c1,c7) < 0);
  Assert.assertTrue(comparator.compare(c7,c1) > 0);
  Assert.assertTrue(comparator.compare(c6,c7) < 0);
  Assert.assertTrue(comparator.compare(c7,c6) > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.TableOperationsHelperTest </h4><pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAttachIterator() throws Exception {
  TableOperationsHelper t=getHelper();
  Map<String,String> empty=Collections.emptyMap();
  t.attachIterator("table",new IteratorSetting(10,"someName","foo.bar",empty),EnumSet.of(IteratorScope.scan));
  check(t,"table",new String[]{"table.iterator.scan.someName=10,foo.bar"});
  t.removeIterator("table","someName",EnumSet.of(IteratorScope.scan));
  check(t,"table",new String[]{});
  IteratorSetting setting=new IteratorSetting(10,"someName","foo.bar");
  setting.addOptions(Collections.singletonMap("key","value"));
  t.attachIterator("table",setting,EnumSet.of(IteratorScope.majc));
  setting=new IteratorSetting(10,"someName","foo.bar");
  t.attachIterator("table",setting,EnumSet.of(IteratorScope.scan));
  check(t,"table",new String[]{"table.iterator.majc.someName=10,foo.bar","table.iterator.majc.someName.opt.key=value","table.iterator.scan.someName=10,foo.bar"});
  t.removeIterator("table","someName",EnumSet.of(IteratorScope.scan));
  setting=new IteratorSetting(20,"otherName","some.classname");
  setting.addOptions(Collections.singletonMap("key","value"));
  t.attachIterator("table",setting,EnumSet.of(IteratorScope.majc));
  setting=new IteratorSetting(20,"otherName","some.classname");
  t.attachIterator("table",setting,EnumSet.of(IteratorScope.scan));
  Map<String,EnumSet<IteratorScope>> two=t.listIterators("table");
  Assert.assertEquals(2,two.size());
  Assert.assertTrue(two.containsKey("otherName"));
  Assert.assertTrue(two.get("otherName").size() == 2);
  Assert.assertTrue(two.get("otherName").contains(IteratorScope.majc));
  Assert.assertTrue(two.get("otherName").contains(IteratorScope.scan));
  Assert.assertTrue(two.containsKey("someName"));
  Assert.assertTrue(two.get("someName").size() == 1);
  Assert.assertTrue(two.get("someName").contains(IteratorScope.majc));
  t.removeIterator("table","someName",EnumSet.allOf(IteratorScope.class));
  check(t,"table",new String[]{"table.iterator.majc.otherName=20,some.classname","table.iterator.majc.otherName.opt.key=value","table.iterator.scan.otherName=20,some.classname"});
  setting=t.getIteratorSetting("table","otherName",IteratorScope.scan);
  Assert.assertEquals(20,setting.getPriority());
  Assert.assertEquals("some.classname",setting.getIteratorClass());
  Assert.assertTrue(setting.getOptions().isEmpty());
  setting=t.getIteratorSetting("table","otherName",IteratorScope.majc);
  Assert.assertEquals(20,setting.getPriority());
  Assert.assertEquals("some.classname",setting.getIteratorClass());
  Assert.assertFalse(setting.getOptions().isEmpty());
  Assert.assertEquals(Collections.singletonMap("key","value"),setting.getOptions());
  t.attachIterator("table",setting,EnumSet.of(IteratorScope.minc));
  check(t,"table",new String[]{"table.iterator.majc.otherName=20,some.classname","table.iterator.majc.otherName.opt.key=value","table.iterator.minc.otherName=20,some.classname","table.iterator.minc.otherName.opt.key=value","table.iterator.scan.otherName=20,some.classname"});
  try {
    t.attachIterator("table",setting);
    Assert.fail();
  }
 catch (  AccumuloException e) {
  }
  setting.setName("thirdName");
  try {
    t.attachIterator("table",setting);
    Assert.fail();
  }
 catch (  AccumuloException e) {
  }
  setting.setPriority(10);
  t.setProperty("table","table.iterator.minc.thirdName.opt.key","value");
  try {
    t.attachIterator("table",setting);
    Assert.fail();
  }
 catch (  AccumuloException e) {
  }
  t.removeProperty("table","table.iterator.minc.thirdName.opt.key");
  t.attachIterator("table",setting);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.TabletLocatorImplTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAccumulo1248() throws Exception {
  TServers tservers=new TServers();
  TabletLocatorImpl metaCache=createLocators(tservers,"tserver1","tserver2","foo");
  KeyExtent ke1=nke("foo",null,null);
  setLocation(tservers,"tserver2",MTE,ke1,"L1","I1");
  setLocation(tservers,"tserver2",MTE,ke1,"L2","I2");
  try {
    metaCache.locateTablet(context,new Text("a"),false,false);
    assertTrue(false);
  }
 catch (  Exception e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.impl.ThriftTransportKeyTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSimpleEquivalence(){
  ClientContext clientCtx=createMock(ClientContext.class);
  expect(clientCtx.getClientSslParams()).andReturn(null).anyTimes();
  expect(clientCtx.getSaslParams()).andReturn(null).anyTimes();
  replay(clientCtx);
  ThriftTransportKey ttk=new ThriftTransportKey(HostAndPort.fromParts("localhost",9999),120 * 1000,clientCtx);
  assertTrue("Normal ThriftTransportKey doesn't equal itself",ttk.equals(ttk));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapred.AccumuloInputFormatTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddIterator() throws IOException {
  AccumuloInputFormat.addIterator(job,new IteratorSetting(1,"WholeRow",WholeRowIterator.class));
  AccumuloInputFormat.addIterator(job,new IteratorSetting(2,"Versions","org.apache.accumulo.core.iterators.VersioningIterator"));
  IteratorSetting iter=new IteratorSetting(3,"Count","org.apache.accumulo.core.iterators.CountingIterator");
  iter.addOption("v1","1");
  iter.addOption("junk","\0omg:!\\xyzzy");
  AccumuloInputFormat.addIterator(job,iter);
  List<IteratorSetting> list=AccumuloInputFormat.getIterators(job);
  assertTrue(list.size() == 3);
  IteratorSetting setting=list.get(0);
  assertEquals(1,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.user.WholeRowIterator",setting.getIteratorClass());
  assertEquals("WholeRow",setting.getName());
  assertEquals(0,setting.getOptions().size());
  setting=list.get(1);
  assertEquals(2,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.VersioningIterator",setting.getIteratorClass());
  assertEquals("Versions",setting.getName());
  assertEquals(0,setting.getOptions().size());
  setting=list.get(2);
  assertEquals(3,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.CountingIterator",setting.getIteratorClass());
  assertEquals("Count",setting.getName());
  assertEquals(2,setting.getOptions().size());
  assertEquals("1",setting.getOptions().get("v1"));
  assertEquals("\0omg:!\\xyzzy",setting.getOptions().get("junk"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSetRegex() throws IOException {
  String regex=">\"*%<>\'\\";
  IteratorSetting is=new IteratorSetting(50,regex,RegExFilter.class);
  RegExFilter.setRegexs(is,regex,null,null,null,false);
  AccumuloInputFormat.addIterator(job,is);
  assertTrue(regex.equals(AccumuloInputFormat.getIterators(job).get(0).getName()));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test getting iterator settings for multiple iterators set
 */
@Test public void testGetIteratorSettings() throws IOException {
  AccumuloInputFormat.addIterator(job,new IteratorSetting(1,"WholeRow","org.apache.accumulo.core.iterators.WholeRowIterator"));
  AccumuloInputFormat.addIterator(job,new IteratorSetting(2,"Versions","org.apache.accumulo.core.iterators.VersioningIterator"));
  AccumuloInputFormat.addIterator(job,new IteratorSetting(3,"Count","org.apache.accumulo.core.iterators.CountingIterator"));
  List<IteratorSetting> list=AccumuloInputFormat.getIterators(job);
  assertTrue(list.size() == 3);
  IteratorSetting setting=list.get(0);
  assertEquals(1,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.WholeRowIterator",setting.getIteratorClass());
  assertEquals("WholeRow",setting.getName());
  setting=list.get(1);
  assertEquals(2,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.VersioningIterator",setting.getIteratorClass());
  assertEquals("Versions",setting.getName());
  setting=list.get(2);
  assertEquals(3,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.CountingIterator",setting.getIteratorClass());
  assertEquals("Count",setting.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapred.RangeInputSplitTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleWritable() throws IOException {
  RangeInputSplit split=new RangeInputSplit("table","1",new Range(new Key("a"),new Key("b")),new String[]{"localhost"});
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  split.write(dos);
  RangeInputSplit newSplit=new RangeInputSplit();
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream dis=new DataInputStream(bais);
  newSplit.readFields(dis);
  Assert.assertEquals(split.getRange(),newSplit.getRange());
  Assert.assertTrue(Arrays.equals(split.getLocations(),newSplit.getLocations()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapreduce.AccumuloInputFormatTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddIterator() throws IOException {
  Job job=Job.getInstance();
  AccumuloInputFormat.addIterator(job,new IteratorSetting(1,"WholeRow",WholeRowIterator.class));
  AccumuloInputFormat.addIterator(job,new IteratorSetting(2,"Versions","org.apache.accumulo.core.iterators.VersioningIterator"));
  IteratorSetting iter=new IteratorSetting(3,"Count","org.apache.accumulo.core.iterators.CountingIterator");
  iter.addOption("v1","1");
  iter.addOption("junk","\0omg:!\\xyzzy");
  AccumuloInputFormat.addIterator(job,iter);
  List<IteratorSetting> list=AccumuloInputFormat.getIterators(job);
  assertTrue(list.size() == 3);
  IteratorSetting setting=list.get(0);
  assertEquals(1,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.user.WholeRowIterator",setting.getIteratorClass());
  assertEquals("WholeRow",setting.getName());
  assertEquals(0,setting.getOptions().size());
  setting=list.get(1);
  assertEquals(2,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.VersioningIterator",setting.getIteratorClass());
  assertEquals("Versions",setting.getName());
  assertEquals(0,setting.getOptions().size());
  setting=list.get(2);
  assertEquals(3,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.CountingIterator",setting.getIteratorClass());
  assertEquals("Count",setting.getName());
  assertEquals(2,setting.getOptions().size());
  assertEquals("1",setting.getOptions().get("v1"));
  assertEquals("\0omg:!\\xyzzy",setting.getOptions().get("junk"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test getting iterator settings for multiple iterators set
 */
@Test public void testGetIteratorSettings() throws IOException {
  Job job=Job.getInstance();
  AccumuloInputFormat.addIterator(job,new IteratorSetting(1,"WholeRow","org.apache.accumulo.core.iterators.WholeRowIterator"));
  AccumuloInputFormat.addIterator(job,new IteratorSetting(2,"Versions","org.apache.accumulo.core.iterators.VersioningIterator"));
  AccumuloInputFormat.addIterator(job,new IteratorSetting(3,"Count","org.apache.accumulo.core.iterators.CountingIterator"));
  List<IteratorSetting> list=AccumuloInputFormat.getIterators(job);
  assertTrue(list.size() == 3);
  IteratorSetting setting=list.get(0);
  assertEquals(1,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.WholeRowIterator",setting.getIteratorClass());
  assertEquals("WholeRow",setting.getName());
  setting=list.get(1);
  assertEquals(2,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.VersioningIterator",setting.getIteratorClass());
  assertEquals("Versions",setting.getName());
  setting=list.get(2);
  assertEquals(3,setting.getPriority());
  assertEquals("org.apache.accumulo.core.iterators.CountingIterator",setting.getIteratorClass());
  assertEquals("Count",setting.getName());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSetRegex() throws IOException {
  Job job=Job.getInstance();
  String regex=">\"*%<>\'\\";
  IteratorSetting is=new IteratorSetting(50,regex,RegExFilter.class);
  RegExFilter.setRegexs(is,regex,null,null,null,false);
  AccumuloInputFormat.addIterator(job,is);
  assertTrue(regex.equals(AccumuloInputFormat.getIterators(job).get(0).getName()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapreduce.RangeInputSplitTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleWritable() throws IOException {
  RangeInputSplit split=new RangeInputSplit("table","1",new Range(new Key("a"),new Key("b")),new String[]{"localhost"});
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  split.write(dos);
  RangeInputSplit newSplit=new RangeInputSplit();
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream dis=new DataInputStream(bais);
  newSplit.readFields(dis);
  Assert.assertEquals(split.getTableName(),newSplit.getTableName());
  Assert.assertEquals(split.getTableId(),newSplit.getTableId());
  Assert.assertEquals(split.getRange(),newSplit.getRange());
  Assert.assertTrue(Arrays.equals(split.getLocations(),newSplit.getLocations()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapreduce.impl.BatchInputSplitTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleWritable() throws IOException {
  Range[] ranges=new Range[]{new Range(new Key("a"),new Key("b"))};
  BatchInputSplit split=new BatchInputSplit("table","1",Arrays.asList(ranges),new String[]{"localhost"});
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(baos);
  split.write(dos);
  BatchInputSplit newSplit=new BatchInputSplit();
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream dis=new DataInputStream(bais);
  newSplit.readFields(dis);
  Assert.assertEquals(split.getTableName(),newSplit.getTableName());
  Assert.assertEquals(split.getTableId(),newSplit.getTableId());
  Assert.assertEquals(split.getRanges(),newSplit.getRanges());
  Assert.assertTrue(Arrays.equals(split.getLocations(),newSplit.getLocations()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mapreduce.lib.impl.ConfiguratorBaseTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetConnectorInfoClassOfQConfigurationStringAuthenticationToken() throws AccumuloSecurityException {
  Configuration conf=new Configuration();
  assertFalse(ConfiguratorBase.isConnectorInfoSet(this.getClass(),conf));
  ConfiguratorBase.setConnectorInfo(this.getClass(),conf,"testUser",new PasswordToken("testPassword"));
  assertTrue(ConfiguratorBase.isConnectorInfoSet(this.getClass(),conf));
  assertEquals("testUser",ConfiguratorBase.getPrincipal(this.getClass(),conf));
  AuthenticationToken token=ConfiguratorBase.getAuthenticationToken(this.getClass(),conf);
  assertEquals(PasswordToken.class,token.getClass());
  assertEquals(new PasswordToken("testPassword"),token);
  assertEquals("inline:" + PasswordToken.class.getName() + ":"+ Base64.encodeBase64String(AuthenticationTokenSerializer.serialize(new PasswordToken("testPassword"))),conf.get(ConfiguratorBase.enumToConfKey(this.getClass(),ConfiguratorBase.ConnectorInfo.TOKEN)));
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetConnectorInfoClassOfQConfigurationStringString() throws AccumuloSecurityException {
  Configuration conf=new Configuration();
  assertFalse(ConfiguratorBase.isConnectorInfoSet(this.getClass(),conf));
  ConfiguratorBase.setConnectorInfo(this.getClass(),conf,"testUser","testFile");
  assertTrue(ConfiguratorBase.isConnectorInfoSet(this.getClass(),conf));
  assertEquals("testUser",ConfiguratorBase.getPrincipal(this.getClass(),conf));
  assertEquals("file:testFile",conf.get(ConfiguratorBase.enumToConfKey(this.getClass(),ConfiguratorBase.ConnectorInfo.TOKEN)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mock.MockConnectorTest </h4><pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCMod() throws Exception {
  Connector c=new MockConnector("root",new MockInstance());
  c.tableOperations().create("test");
  BatchWriter bw=c.createBatchWriter("test",new BatchWriterConfig());
  for (int i=0; i < 10; i++) {
    Mutation m1=new Mutation("r" + i);
    m1.put("cf1","cq1",1,"v" + i);
    bw.addMutation(m1);
  }
  bw.flush();
  int count=10;
  Scanner scanner=c.createScanner("test",Authorizations.EMPTY);
  for (  Entry<Key,Value> entry : scanner) {
    Key key=entry.getKey();
    Mutation m=new Mutation(key.getRow());
    m.put(key.getColumnFamily().toString(),key.getColumnQualifier().toString(),key.getTimestamp() + 1,"v" + (count));
    count++;
    bw.addMutation(m);
  }
  bw.flush();
  count=10;
  for (  Entry<Key,Value> entry : scanner) {
    assertEquals(entry.getValue().toString(),"v" + (count++));
  }
  assertEquals(count,20);
  try {
    c.tableOperations().create("test_this_$tableName");
    assertTrue(false);
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testChangeAuths() throws Exception {
  Connector c=new MockConnector("root",new MockInstance());
  c.securityOperations().createLocalUser("greg",new PasswordToken(new byte[0]));
  assertTrue(c.securityOperations().getUserAuthorizations("greg").isEmpty());
  c.securityOperations().changeUserAuthorizations("greg",new Authorizations("A".getBytes()));
  assertTrue(c.securityOperations().getUserAuthorizations("greg").contains("A".getBytes()));
  c.securityOperations().changeUserAuthorizations("greg",new Authorizations("X","Y","Z"));
  assertTrue(c.securityOperations().getUserAuthorizations("greg").contains("X".getBytes()));
  assertFalse(c.securityOperations().getUserAuthorizations("greg").contains("A".getBytes()));
}

</code></pre>

<br>
<pre class="type-11 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSunnyDay() throws Exception {
  Connector c=new MockConnector("root",new MockInstance());
  c.tableOperations().create("test");
  BatchWriter bw=c.createBatchWriter("test",new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    int r=random.nextInt();
    Mutation m=new Mutation(asText(r));
    m.put(asText(random.nextInt()),asText(random.nextInt()),new Value(Integer.toHexString(r).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  BatchScanner s=c.createBatchScanner("test",Authorizations.EMPTY,2);
  s.setRanges(Collections.singletonList(new Range()));
  Key key=null;
  int count=0;
  for (  Entry<Key,Value> entry : s) {
    if (key != null)     assertTrue(key.compareTo(entry.getKey()) < 0);
    assertEquals(entry.getKey().getRow(),new Text(entry.getValue().get()));
    key=entry.getKey();
    count++;
  }
  assertEquals(100,count);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelete() throws Exception {
  Connector c=new MockConnector("root",new MockInstance());
  c.tableOperations().create("test");
  BatchWriter bw=c.createBatchWriter("test",new BatchWriterConfig());
  Mutation m1=new Mutation("r1");
  m1.put("cf1","cq1",1,"v1");
  bw.addMutation(m1);
  bw.flush();
  Mutation m2=new Mutation("r1");
  m2.putDelete("cf1","cq1",2);
  bw.addMutation(m2);
  bw.flush();
  Scanner scanner=c.createScanner("test",Authorizations.EMPTY);
  int count=Iterators.size(scanner.iterator());
  assertEquals(0,count);
  try {
    c.tableOperations().create("test_this_$tableName");
    assertTrue(false);
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAggregation() throws Exception {
  MockInstance mockInstance=new MockInstance();
  Connector c=mockInstance.getConnector("root",new PasswordToken(""));
  String table="perDayCounts";
  c.tableOperations().create(table);
  IteratorSetting is=new IteratorSetting(10,"String Summation",SummingCombiner.class);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("day")));
  SummingCombiner.setEncodingType(is,SummingCombiner.Type.STRING);
  c.tableOperations().attachIterator(table,is);
  String keys[][]={{"foo","day","20080101"},{"foo","day","20080101"},{"foo","day","20080103"},{"bar","day","20080101"},{"bar","day","20080101"}};
  BatchWriter bw=c.createBatchWriter("perDayCounts",new BatchWriterConfig());
  for (  String elt[] : keys) {
    Mutation m=new Mutation(new Text(elt[0]));
    m.put(new Text(elt[1]),new Text(elt[2]),new Value("1".getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  Scanner s=c.createScanner("perDayCounts",Authorizations.EMPTY);
  Iterator<Entry<Key,Value>> iterator=s.iterator();
  assertTrue(iterator.hasNext());
  checkEntry(iterator.next(),"bar","day","20080101","2");
  assertTrue(iterator.hasNext());
  checkEntry(iterator.next(),"foo","day","20080101","2");
  assertTrue(iterator.hasNext());
  checkEntry(iterator.next(),"foo","day","20080103","1");
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mock.MockNamespacesTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * This test renames and clones two separate table into different namespaces. different namespace.
 */
@Test public void testRenameAndCloneTableToNewNamespace() throws Exception {
  String namespace1="renamed";
  String namespace2="cloned";
  String tableName="table";
  String tableName1="renamed.table1";
  conn.tableOperations().create(tableName);
  conn.namespaceOperations().create(namespace1);
  conn.namespaceOperations().create(namespace2);
  conn.tableOperations().rename(tableName,tableName1);
  assertTrue(conn.tableOperations().exists(tableName1));
  assertTrue(!conn.tableOperations().exists(tableName));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * This test renames a namespace and ensures that its tables are still correct
 */
@Test public void testNamespaceRename() throws Exception {
  String namespace1="n1";
  String namespace2="n2";
  String table="t";
  conn.namespaceOperations().create(namespace1);
  conn.tableOperations().create(namespace1 + "." + table);
  conn.namespaceOperations().rename(namespace1,namespace2);
  assertTrue(!conn.namespaceOperations().exists(namespace1));
  assertTrue(conn.namespaceOperations().exists(namespace2));
  assertTrue(!conn.tableOperations().exists(namespace1 + "." + table));
  assertTrue(conn.tableOperations().exists(namespace2 + "." + table));
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test creates a new namespace "testing" and a table "testing.table1" which puts "table1" into the "testing" namespace. Then we create "testing.table2"
 * which creates "table2" and puts it into "testing" as well. Then we make sure that you can't delete a namespace with tables in it, and then we delete the
 * tables and delete the namespace.
 */
@Test public void testCreateAndDeleteNamespace() throws Exception {
  String namespace="testing";
  String tableName1=namespace + ".table1";
  String tableName2=namespace + ".table2";
  conn.namespaceOperations().create(namespace);
  assertTrue(conn.namespaceOperations().exists(namespace));
  conn.tableOperations().create(tableName1);
  assertTrue(conn.tableOperations().exists(tableName1));
  conn.tableOperations().create(tableName2);
  assertTrue(conn.tableOperations().exists(tableName2));
  try {
    conn.namespaceOperations().delete(namespace);
    fail();
  }
 catch (  NamespaceNotEmptyException e) {
  }
  assertTrue(conn.namespaceOperations().exists(namespace));
  assertTrue(conn.tableOperations().exists(tableName1));
  assertTrue(conn.tableOperations().exists(tableName2));
  conn.tableOperations().delete(tableName2);
  assertTrue(!conn.tableOperations().exists(tableName2));
  assertTrue(conn.namespaceOperations().exists(namespace));
  conn.tableOperations().delete(tableName1);
  assertTrue(!conn.tableOperations().exists(tableName1));
  conn.namespaceOperations().delete(namespace);
  assertTrue(!conn.namespaceOperations().exists(namespace));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * This tests adding iterators to a namespace, listing them, and removing them
 */
@Test public void testNamespaceIterators() throws Exception {
  String namespace="iterator";
  String tableName=namespace + ".table";
  String iter="thing";
  conn.namespaceOperations().create(namespace);
  conn.tableOperations().create(tableName);
  IteratorSetting setting=new IteratorSetting(250,iter,SimpleFilter.class.getName());
  HashSet<IteratorScope> scope=new HashSet<IteratorScope>();
  scope.add(IteratorScope.scan);
  conn.namespaceOperations().attachIterator(namespace,setting,EnumSet.copyOf(scope));
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("r");
  m.put("a","b",new Value("abcde".getBytes(UTF_8)));
  bw.addMutation(m);
  bw.flush();
  Scanner s=conn.createScanner(tableName,Authorizations.EMPTY);
  System.out.println(s.iterator().next());
  assertTrue(conn.namespaceOperations().listIterators(namespace).containsKey(iter));
  conn.namespaceOperations().removeIterator(namespace,iter,EnumSet.copyOf(scope));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * This test creates a namespace, modifies it's properties, and checks to make sure that those properties are applied to its tables. To do something on a
 * namespace-wide level, use {@link NamespaceOperations}.
 * Checks to make sure namespace-level properties are overridden by table-level properties.
 * Checks to see if the default namespace's properties work as well.
 */
@Test public void testNamespaceProperties() throws Exception {
  String namespace="propchange";
  String tableName1=namespace + ".table1";
  String tableName2=namespace + ".table2";
  String propKey=Property.TABLE_SCAN_MAXMEM.getKey();
  String propVal="42K";
  conn.namespaceOperations().create(namespace);
  conn.tableOperations().create(tableName1);
  conn.namespaceOperations().setProperty(namespace,propKey,propVal);
  assertTrue(checkNamespaceHasProp(conn,namespace,propKey,propVal));
  assertTrue(checkTableHasProp(conn,tableName1,propKey,propVal));
  conn.tableOperations().create(tableName2);
  assertTrue(checkTableHasProp(conn,tableName2,propKey,propVal));
  String propKey2=Property.TABLE_FILE_MAX.getKey();
  String propVal2="42";
  String tablePropVal="13";
  conn.tableOperations().setProperty(tableName2,propKey2,tablePropVal);
  conn.namespaceOperations().setProperty("propchange",propKey2,propVal2);
  assertTrue(checkTableHasProp(conn,tableName2,propKey2,tablePropVal));
  propVal="13K";
  String tableName="some_table";
  conn.tableOperations().create(tableName);
  conn.namespaceOperations().setProperty(Namespaces.DEFAULT_NAMESPACE,propKey,propVal);
  assertTrue(checkTableHasProp(conn,tableName,propKey,propVal));
  String tableName3=namespace + ".table3";
  conn.tableOperations().create(tableName3);
  IteratorSetting setting=new IteratorSetting(250,"thing",SimpleFilter.class.getName());
  conn.namespaceOperations().attachIterator(namespace,setting);
  BatchWriter bw=conn.createBatchWriter(tableName3,new BatchWriterConfig());
  Mutation m=new Mutation("r");
  m.put("a","b",new Value("abcde".getBytes()));
  bw.addMutation(m);
  bw.flush();
  bw.close();
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * This test creates a table without specifying a namespace. In this case, it puts the table into the default namespace.
 */
@Test public void testDefaultNamespace() throws Exception {
  String tableName="test";
  assertTrue(conn.namespaceOperations().exists(Namespaces.DEFAULT_NAMESPACE));
  conn.tableOperations().create(tableName);
  assertTrue(conn.tableOperations().exists(tableName));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.client.mock.MockTableOperationsTest </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-14 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImport() throws Throwable {
  ImportTestFilesAndData dataAndFiles=prepareTestFiles();
  TableOperations tableOperations=conn.tableOperations();
  tableOperations.create("a_table");
  tableOperations.importDirectory("a_table",dataAndFiles.importPath.toString(),dataAndFiles.failurePath.toString(),false);
  Scanner scanner=conn.createScanner("a_table",new Authorizations());
  Iterator<Entry<Key,Value>> iterator=scanner.iterator();
  for (int i=0; i < 5; i++) {
    Assert.assertTrue(iterator.hasNext());
    Entry<Key,Value> kv=iterator.next();
    Pair<Key,Value> expected=dataAndFiles.keyVals.get(i);
    Assert.assertEquals(expected.getFirst(),kv.getKey());
    Assert.assertEquals(expected.getSecond(),kv.getValue());
  }
  Assert.assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteRows() throws Exception {
  TableOperations to=conn.tableOperations();
  to.create("test");
  BatchWriter bw=conn.createBatchWriter("test",new BatchWriterConfig());
  for (int r=0; r < 20; r++) {
    Mutation m=new Mutation("" + r);
    for (int c=0; c < 5; c++) {
      m.put(new Text("cf"),new Text("" + c),new Value(("" + c).getBytes()));
    }
    bw.addMutation(m);
  }
  bw.flush();
  to.deleteRows("test",new Text("1"),new Text("2"));
  Scanner s=conn.createScanner("test",Authorizations.EMPTY);
  int oneCnt=0;
  for (  Entry<Key,Value> entry : s) {
    char rowStart=entry.getKey().getRow().toString().charAt(0);
    Assert.assertTrue(rowStart != '2');
    oneCnt+=rowStart == '1' ? 1 : 0;
  }
  Assert.assertEquals(5,oneCnt);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteRowsWithNullKeys() throws Exception {
  TableOperations to=conn.tableOperations();
  to.create("test2");
  BatchWriter bw=conn.createBatchWriter("test2",new BatchWriterConfig());
  for (int r=0; r < 30; r++) {
    Mutation m=new Mutation(Integer.toString(r));
    for (int c=0; c < 5; c++) {
      m.put(new Text("cf"),new Text(Integer.toString(c)),new Value(Integer.toString(c).getBytes()));
    }
    bw.addMutation(m);
  }
  bw.flush();
  to.deleteRows("test2",new Text("30"),null);
  Scanner s=conn.createScanner("test2",Authorizations.EMPTY);
  int rowCnt=0;
  for (  Entry<Key,Value> entry : s) {
    String rowId=entry.getKey().getRow().toString();
    Assert.assertFalse(rowId.startsWith("30"));
    rowCnt++;
  }
  s.close();
  Assert.assertEquals(120,rowCnt);
  to.deleteRows("test2",null,new Text("2"));
  s=conn.createScanner("test2",Authorizations.EMPTY);
  rowCnt=0;
  for (  Entry<Key,Value> entry : s) {
    char rowStart=entry.getKey().getRow().toString().charAt(0);
    Assert.assertTrue(rowStart >= '2');
    rowCnt++;
  }
  s.close();
  Assert.assertEquals(55,rowCnt);
  to.deleteRows("test2",null,null);
  s=conn.createScanner("test2",Authorizations.EMPTY);
  rowCnt=Iterators.size(s.iterator());
  s.close();
  to.delete("test2");
  Assert.assertEquals(0,rowCnt);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.AccumuloConfigurationTest </h4><pre class="type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPropertyByString(){
  AccumuloConfiguration c=AccumuloConfiguration.getDefaultConfiguration();
  boolean found=false;
  for (  Property p : Property.values()) {
    if (p.getType() != PropertyType.PREFIX) {
      found=true;
      assertEquals(c.get(p),c.get(p.getKey()));
      assertEquals(p.getDefaultValue(),c.get(p.getKey()));
    }
  }
  assertTrue("test was a dud, and did nothing",found);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.ObservableConfigurationTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddAndRemove(){
  ConfigurationObserver co2=createMock(ConfigurationObserver.class);
  c.addObserver(co1);
  c.addObserver(co2);
  Collection<ConfigurationObserver> cos=c.getObservers();
  assertEquals(2,cos.size());
  assertTrue(cos.contains(co1));
  assertTrue(cos.contains(co2));
  c.removeObserver(co1);
  cos=c.getObservers();
  assertEquals(1,cos.size());
  assertTrue(cos.contains(co2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.PropertyTest </h4><pre class="type-11 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void validatePropertyKeys(){
  for (  Property prop : Property.values()) {
    if (prop.getType().equals(PropertyType.PREFIX)) {
      assertTrue(prop.getKey().endsWith("."));
      assertNull(prop.getDefaultValue());
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPorts(){
  HashSet<Integer> usedPorts=new HashSet<Integer>();
  for (  Property prop : Property.values())   if (prop.getType().equals(PropertyType.PORT)) {
    int port=Integer.parseInt(prop.getDefaultValue());
    assertFalse("Port already in use: " + port,usedPorts.contains(port));
    usedPorts.add(port);
    assertTrue("Port out of range of valid ports: " + port,port > 1023 && port < 65536);
  }
}

</code></pre>

<br>
<pre class="type-11 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProperties(){
  HashSet<String> validPrefixes=new HashSet<String>();
  for (  Property prop : Property.values())   if (prop.getType().equals(PropertyType.PREFIX))   validPrefixes.add(prop.getKey());
  HashSet<String> propertyNames=new HashSet<String>();
  for (  Property prop : Property.values()) {
    if (prop.getType() == PropertyType.PREFIX) {
      assertNull("PREFIX property " + prop.name() + " has unexpected non-null default value.",prop.getDefaultValue());
    }
 else {
      assertTrue("Property " + prop + " has invalid default value "+ prop.getDefaultValue()+ " for type "+ prop.getType(),prop.getType().isValidFormat(prop.getDefaultValue()));
    }
    assertFalse("Description not set for " + prop,prop.getDescription() == null || prop.getDescription().isEmpty());
    boolean containsValidPrefix=false;
    for (    String pre : validPrefixes)     if (prop.getKey().startsWith(pre)) {
      containsValidPrefix=true;
      break;
    }
    assertTrue("Invalid prefix on prop " + prop,containsValidPrefix);
    assertFalse("Duplicate property name " + prop.getKey(),propertyNames.contains(prop.getKey()));
    propertyNames.add(prop.getKey());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.conf.PropertyTypeTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFullCoverage(){
  Iterable<String> types=Iterables.transform(Arrays.asList(PropertyType.values()),new Function<PropertyType,String>(){
    @Override public String apply(    final PropertyType input){
      return input.name();
    }
  }
);
  Iterable<String> typesTested=Iterables.transform(Iterables.filter(Iterables.transform(Arrays.asList(this.getClass().getMethods()),new Function<Method,String>(){
    @Override public String apply(    final Method input){
      return input.getName();
    }
  }
),new Predicate<String>(){
    @Override public boolean apply(    final String input){
      return input.startsWith("testType");
    }
  }
),new Function<String,String>(){
    @Override public String apply(    final String input){
      return input.substring(8);
    }
  }
);
  for (  String t : types) {
    assertTrue(PropertyType.class.getSimpleName() + "." + t+ " does not have a test.",Iterables.contains(typesTested,t));
  }
  assertEquals(Iterables.size(types),Iterables.size(typesTested));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.ColumnTest </h4><pre class="type-13 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testEquals(){
  for (int i=0; i < col.length; i++) {
    for (int j=0; j < col.length; j++) {
      if (i == j || (i == 0 && j == 1) || (i == 1 && j == 0))       assertTrue(col[i].equals(col[j]));
 else       assertFalse(col[i].equals(col[j]));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.ConditionTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEquals(){
  ColumnVisibility cvis=new ColumnVisibility(VISIBILITY);
  c.setVisibility(cvis);
  c.setValue(VALUE);
  c.setTimestamp(1234L);
  c.setIterators(ITERATORS);
  assertTrue(c.equals(c));
  assertFalse(c.equals(null));
  Condition c2=new Condition(FAMILY,QUALIFIER);
  c2.setVisibility(cvis);
  c2.setValue(VALUE);
  c2.setTimestamp(1234L);
  c2.setIterators(ITERATORS);
  assertTrue(c.equals(c2));
  assertTrue(c2.equals(c));
  Condition c3=new Condition("nope",QUALIFIER);
  c3.setVisibility(cvis);
  c3.setValue(VALUE);
  c3.setTimestamp(1234L);
  c3.setIterators(ITERATORS);
  assertFalse(c.equals(c3));
  assertFalse(c3.equals(c));
  c3=new Condition(FAMILY,"nope");
  c3.setVisibility(cvis);
  c3.setValue(VALUE);
  c3.setTimestamp(1234L);
  c3.setIterators(ITERATORS);
  assertFalse(c.equals(c3));
  assertFalse(c3.equals(c));
  c2.setVisibility(new ColumnVisibility("sekrit"));
  assertFalse(c.equals(c2));
  assertFalse(c2.equals(c));
  c2.setVisibility(cvis);
  c2.setValue(EMPTY);
  assertFalse(c.equals(c2));
  assertFalse(c2.equals(c));
  c2.setValue(VALUE);
  c2.setTimestamp(2345L);
  assertFalse(c.equals(c2));
  assertFalse(c2.equals(c));
  c2.setTimestamp(1234L);
  c2.setIterators(new IteratorSetting[0]);
  assertFalse(c.equals(c2));
  assertFalse(c2.equals(c));
  c2.setIterators(ITERATORS);
  assertTrue(c.equals(c2));
  assertTrue(c2.equals(c));
  Condition c4=new Condition(FAMILY,QUALIFIER);
  c4.setValue(VALUE);
  c4.setTimestamp(1234L);
  c4.setIterators(ITERATORS);
  assertFalse(c.equals(c4));
  assertFalse(c4.equals(c));
  Condition c5=new Condition(FAMILY,QUALIFIER);
  c5.setVisibility(cvis);
  c5.setValue(VALUE);
  c5.setIterators(ITERATORS);
  assertFalse(c.equals(c5));
  assertFalse(c5.equals(c));
  Condition c6=new Condition(FAMILY,QUALIFIER);
  c6.setVisibility(cvis);
  c6.setTimestamp(1234L);
  c6.setIterators(ITERATORS);
  assertFalse(c.equals(c6));
  assertFalse(c6.equals(c));
  Condition c7=new Condition(FAMILY,QUALIFIER);
  Condition c8=new Condition(FAMILY,QUALIFIER);
  assertTrue(c7.equals(c8));
  assertTrue(c8.equals(c7));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHashCode(){
  ColumnVisibility cvis=new ColumnVisibility(VISIBILITY);
  c.setVisibility(cvis);
  c.setValue(VALUE);
  c.setTimestamp(1234L);
  c.setIterators(ITERATORS);
  int hc1=c.hashCode();
  Condition c2=new Condition(FAMILY,QUALIFIER);
  c2.setVisibility(cvis);
  c2.setValue(VALUE);
  c2.setTimestamp(1234L);
  c2.setIterators(ITERATORS);
  assertTrue(c.equals(c2));
  assertEquals(hc1,c2.hashCode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.ConditionalMutationTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHashcode(){
  ConditionalMutation cm2=new ConditionalMutation(ROW,c1,c2);
  assertTrue(cm.equals(cm2));
  assertEquals(cm2.hashCode(),cm.hashCode());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws Exception {
  c1=new Condition(FAMILY,QUALIFIER);
  c2=new Condition(FAMILY,QUALIFIER2);
  assertFalse(c1.equals(c2));
  cm=new ConditionalMutation(ROW,c1,c2);
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEquals_Mutation(){
  Mutation m=new Mutation(ROW);
  assertFalse(m.equals(cm));
  assertFalse(cm.equals(m));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEquals(){
  assertTrue(cm.equals(cm));
  assertFalse(cm.equals((Object)null));
  ConditionalMutation cm2=new ConditionalMutation(ROW,c1,c2);
  assertTrue(cm.equals(cm2));
  assertTrue(cm2.equals(cm));
  ConditionalMutation cm3=new ConditionalMutation("row2".getBytes(UTF_8),c1,c2);
  assertFalse(cm.equals(cm3));
  cm3=new ConditionalMutation(ROW,c2,c1);
  assertFalse(cm.getConditions().equals(cm3.getConditions()));
  assertFalse(cm.equals(cm3));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.KeyExtentTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testOverlaps(){
  SortedMap<KeyExtent,Object> set0=new TreeMap<KeyExtent,Object>();
  set0.put(nke("a",null,null),null);
  assertFalse(overlaps(nke("t",null,null),null));
  assertFalse(overlaps(nke("t",null,null),set0));
  SortedMap<KeyExtent,Object> set1=new TreeMap<KeyExtent,Object>();
  set1.put(nke("t",null,null),null);
  assertTrue(overlaps(nke("t",null,null),set1));
  assertTrue(overlaps(nke("t","b","a"),set1));
  assertTrue(overlaps(nke("t",null,"a"),set1));
  set1.put(nke("t","b","a"),null);
  assertTrue(overlaps(nke("t",null,null),set1));
  assertTrue(overlaps(nke("t","b","a"),set1));
  assertTrue(overlaps(nke("t",null,"a"),set1));
  SortedMap<KeyExtent,Object> set2=new TreeMap<KeyExtent,Object>();
  set2.put(nke("a",null,null),null);
  set2.put(nke("t","m","j"),null);
  set2.put(nke("z",null,null),null);
  assertTrue(overlaps(nke("t",null,null),set2));
  assertTrue(overlaps(nke("t","m","j"),set2));
  assertTrue(overlaps(nke("t","z","a"),set2));
  assertFalse(overlaps(nke("t","j","a"),set2));
  assertFalse(overlaps(nke("t","z","m"),set2));
  assertFalse(overlaps(nke("t","b","a"),set2));
  assertFalse(overlaps(nke("t","z","y"),set2));
  assertFalse(overlaps(nke("t","b",null),set2));
  assertFalse(overlaps(nke("t",null,"y"),set2));
  assertFalse(overlaps(nke("t","j",null),set2));
  assertFalse(overlaps(nke("t",null,"m"),set2));
  SortedMap<KeyExtent,Object> set3=new TreeMap<KeyExtent,Object>();
  set3.put(nke("t","j",null),null);
  set3.put(nke("t",null,"m"),null);
  assertTrue(overlaps(nke("t","k","a"),set3));
  assertTrue(overlaps(nke("t","k",null),set3));
  assertTrue(overlaps(nke("t","z","k"),set3));
  assertTrue(overlaps(nke("t",null,"k"),set3));
  assertTrue(overlaps(nke("t",null,null),set3));
  assertFalse(overlaps(nke("t","l","k"),set3));
  SortedMap<KeyExtent,Object> set4=new TreeMap<KeyExtent,Object>();
  set4.put(nke("t",null,null),null);
  assertTrue(overlaps(nke("t","k","a"),set4));
  assertTrue(overlaps(nke("t","k",null),set4));
  assertTrue(overlaps(nke("t","z","k"),set4));
  assertTrue(overlaps(nke("t",null,"k"),set4));
  assertTrue(overlaps(nke("t",null,null),set4));
  assertTrue(overlaps(nke("t",null,null),set4));
  for (  String er : new String[]{"z","y","r",null}) {
    for (    String per : new String[]{"a","b","d",null}) {
      assertTrue(nke("t","y","b").overlaps(nke("t",er,per)));
      assertTrue(nke("t","y",null).overlaps(nke("t",er,per)));
      assertTrue(nke("t",null,"b").overlaps(nke("t",er,per)));
      assertTrue(nke("t",null,null).overlaps(nke("t",er,per)));
    }
  }
  assertFalse(nke("t","y","b").overlaps(nke("t","z","y")));
  assertFalse(nke("t","y","b").overlaps(nke("t",null,"y")));
  assertFalse(nke("t","y",null).overlaps(nke("t","z","y")));
  assertFalse(nke("t","y",null).overlaps(nke("t",null,"y")));
  assertFalse(nke("t","y","b").overlaps(nke("t","b","a")));
  assertFalse(nke("t","y","b").overlaps(nke("t","b",null)));
  assertFalse(nke("t",null,"b").overlaps(nke("t","b","a")));
  assertFalse(nke("t",null,"b").overlaps(nke("t","b",null)));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void testKeyExtentsForSimpleRange(){
  Collection<KeyExtent> results;
  results=KeyExtent.getKeyExtentsForRange(null,null,null);
  assertTrue("Non-empty set returned from no extents",results.isEmpty());
  results=KeyExtent.getKeyExtentsForRange(null,null,Collections.<KeyExtent>emptySet());
  assertTrue("Non-empty set returned from no extents",results.isEmpty());
  KeyExtent t=nke("t",null,null);
  results=KeyExtent.getKeyExtentsForRange(null,null,Collections.<KeyExtent>singleton(t));
  assertEquals("Single tablet should always be returned",1,results.size());
  assertEquals(t,results.iterator().next());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.KeyTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeletedCompare(){
  Key k1=new Key("r1".getBytes(),"cf".getBytes(),"cq".getBytes(),new byte[0],0,false);
  Key k2=new Key("r1".getBytes(),"cf".getBytes(),"cq".getBytes(),new byte[0],0,false);
  Key k3=new Key("r1".getBytes(),"cf".getBytes(),"cq".getBytes(),new byte[0],0,true);
  Key k4=new Key("r1".getBytes(),"cf".getBytes(),"cq".getBytes(),new byte[0],0,true);
  assertTrue(k1.equals(k2));
  assertTrue(k3.equals(k4));
  assertTrue(k1.compareTo(k3) > 0);
  assertTrue(k3.compareTo(k1) < 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.MutationTest </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test3() throws IOException {
  Mutation m=new Mutation(new Text("r1"));
  for (int i=0; i < 5; i++) {
    int len=Mutation.VALUE_SIZE_COPY_CUTOFF - 2 + i;
    byte val[]=new byte[len];
    for (int j=0; j < len; j++)     val[j]=(byte)i;
    m.put(new Text("cf" + i),new Text("cq" + i),new Value(val));
  }
  for (int r=0; r < 3; r++) {
    assertEquals("r1",new String(m.getRow()));
    List<ColumnUpdate> updates=m.getUpdates();
    assertEquals(5,updates.size());
    for (int i=0; i < 5; i++) {
      ColumnUpdate cu=updates.get(i);
      assertEquals("cf" + i,new String(cu.getColumnFamily()));
      assertEquals("cq" + i,new String(cu.getColumnQualifier()));
      assertEquals("",new String(cu.getColumnVisibility()));
      assertFalse(cu.hasTimestamp());
      byte[] val=cu.getValue();
      int len=Mutation.VALUE_SIZE_COPY_CUTOFF - 2 + i;
      assertEquals(len,val.length);
      for (int j=0; j < len; j++)       assertEquals(i,val[j]);
    }
    m=cloneMutation(m);
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNewSerialization() throws Exception {
  OldMutation m2=new OldMutation("r1");
  m2.put("cf1","cq1","v1");
  m2.put("cf2","cq2",new ColumnVisibility("cv2"),"v2");
  m2.putDelete("cf3","cq3");
  ByteArrayOutputStream bos=new ByteArrayOutputStream();
  DataOutputStream dos=new DataOutputStream(bos);
  m2.write(dos);
  dos.close();
  long oldSize=dos.size();
  ByteArrayInputStream bis=new ByteArrayInputStream(bos.toByteArray());
  DataInputStream dis=new DataInputStream(bis);
  m2.readFields(dis);
  dis.close();
  assertEquals("r1",new String(m2.getRow()));
  assertEquals(3,m2.getUpdates().size());
  assertEquals(3,m2.size());
  verifyColumnUpdate(m2.getUpdates().get(0),"cf1","cq1","",0l,false,false,"v1");
  verifyColumnUpdate(m2.getUpdates().get(1),"cf2","cq2","cv2",0l,false,false,"v2");
  verifyColumnUpdate(m2.getUpdates().get(2),"cf3","cq3","",0l,false,true,"");
  Mutation m1=convert(m2);
  assertEquals("r1",new String(m1.getRow()));
  assertEquals(3,m1.getUpdates().size());
  assertEquals(3,m1.size());
  verifyColumnUpdate(m1.getUpdates().get(0),"cf1","cq1","",0l,false,false,"v1");
  verifyColumnUpdate(m1.getUpdates().get(1),"cf2","cq2","cv2",0l,false,false,"v2");
  verifyColumnUpdate(m1.getUpdates().get(2),"cf3","cq3","",0l,false,true,"");
  Text exampleRow=new Text(" 123456789 123456789 123456789 123456789 123456789");
  int exampleLen=exampleRow.getLength();
  m1=new Mutation(exampleRow);
  m1.put("","","");
  bos=new ByteArrayOutputStream();
  dos=new DataOutputStream(bos);
  m1.write(dos);
  dos.close();
  long newSize=dos.size();
  assertTrue(newSize < oldSize);
  assertEquals(10,newSize - exampleLen);
  assertEquals(68,oldSize - exampleLen);
  assertEquals(14705,(int)(((newSize - exampleLen) * 100. / (oldSize - exampleLen)) * 1000));
  StringBuilder sb=new StringBuilder();
  byte[] ba=bos.toByteArray();
  for (int i=0; i < bos.size(); i+=4) {
    for (int j=i; j < bos.size() && j < i + 4; j++) {
      sb.append(String.format("%02x",ba[j]));
    }
    sb.append(" ");
  }
  assertEquals("80322031 32333435 36373839 20313233 34353637 38392031 32333435 36373839 20313233 34353637 38392031 32333435 36373839 06000000 00000001 ",sb.toString());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1(){
  Mutation m=new Mutation(new Text("r1"));
  m.put(new Text("cf1"),new Text("cq1"),new Value("v1".getBytes()));
  List<ColumnUpdate> updates=m.getUpdates();
  assertEquals(1,updates.size());
  ColumnUpdate cu=updates.get(0);
  assertEquals("cf1",new String(cu.getColumnFamily()));
  assertEquals("cq1",new String(cu.getColumnQualifier()));
  assertEquals("",new String(cu.getColumnVisibility()));
  assertFalse(cu.hasTimestamp());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2() throws IOException {
  Mutation m=new Mutation(new Text("r1"));
  m.put(new Text("cf1"),new Text("cq1"),new Value("v1".getBytes()));
  m.put(new Text("cf2"),new Text("cq2"),56,new Value("v2".getBytes()));
  List<ColumnUpdate> updates=m.getUpdates();
  assertEquals(2,updates.size());
  assertEquals("r1",new String(m.getRow()));
  ColumnUpdate cu=updates.get(0);
  assertEquals("cf1",new String(cu.getColumnFamily()));
  assertEquals("cq1",new String(cu.getColumnQualifier()));
  assertEquals("",new String(cu.getColumnVisibility()));
  assertFalse(cu.hasTimestamp());
  cu=updates.get(1);
  assertEquals("cf2",new String(cu.getColumnFamily()));
  assertEquals("cq2",new String(cu.getColumnQualifier()));
  assertEquals("",new String(cu.getColumnVisibility()));
  assertTrue(cu.hasTimestamp());
  assertEquals(56,cu.getTimestamp());
  m=cloneMutation(m);
  assertEquals("r1",new String(m.getRow()));
  updates=m.getUpdates();
  assertEquals(2,updates.size());
  cu=updates.get(0);
  assertEquals("cf1",new String(cu.getColumnFamily()));
  assertEquals("cq1",new String(cu.getColumnQualifier()));
  assertEquals("",new String(cu.getColumnVisibility()));
  assertFalse(cu.hasTimestamp());
  cu=updates.get(1);
  assertEquals("cf2",new String(cu.getColumnFamily()));
  assertEquals("cq2",new String(cu.getColumnQualifier()));
  assertEquals("",new String(cu.getColumnVisibility()));
  assertTrue(cu.hasTimestamp());
  assertEquals(56,cu.getTimestamp());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEquals(){
  Mutation m1=new Mutation("r1");
  m1.put("cf1","cq1","v1");
  m1.put("cf1","cq1",new ColumnVisibility("A&B"),"v2");
  m1.put("cf1","cq1",3,"v3");
  m1.put("cf1","cq1",new ColumnVisibility("A&B&C"),4,"v4");
  m1.putDelete("cf2","cf3");
  m1.putDelete("cf2","cf4",3);
  m1.putDelete("cf2","cf4",new ColumnVisibility("A&B&C"),3);
  Mutation m2=new Mutation("r1");
  m2.put("cf1","cq1","v1");
  m2.put("cf1","cq1",new ColumnVisibility("A&B"),"v2");
  m2.put("cf1","cq1",3,"v3");
  m2.put("cf1","cq1",new ColumnVisibility("A&B&C"),4,"v4");
  m2.putDelete("cf2","cf3");
  m2.putDelete("cf2","cf4",3);
  m2.putDelete("cf2","cf4",new ColumnVisibility("A&B&C"),3);
  Mutation m3=new Mutation("r2");
  m3.put("cf1","cq1","v1");
  m3.put("cf1","cq1",new ColumnVisibility("A&B"),"v2");
  m3.put("cf1","cq1",3,"v3");
  m3.put("cf1","cq1",new ColumnVisibility("A&B&C"),4,"v4");
  m3.putDelete("cf2","cf3");
  m3.putDelete("cf2","cf4",3);
  m3.putDelete("cf2","cf4",new ColumnVisibility("A&B&C"),3);
  Mutation m4=new Mutation("r1");
  m4.put("cf2","cq1","v1");
  m4.put("cf1","cq1",new ColumnVisibility("A&B"),"v2");
  m4.put("cf1","cq1",3,"v3");
  m4.put("cf1","cq1",new ColumnVisibility("A&B&C"),4,"v4");
  m4.putDelete("cf2","cf3");
  m4.putDelete("cf2","cf4",3);
  m4.putDelete("cf2","cf4",new ColumnVisibility("A&B&C"),3);
  Mutation m5=new Mutation("r1");
  m5.put("cf1","cq1","v1");
  m5.put("cf1","cq1",new ColumnVisibility("A&B"),"v2");
  m5.put("cf1","cq1",3,"v4");
  m5.put("cf1","cq1",new ColumnVisibility("A&B&C"),4,"v4");
  m5.putDelete("cf2","cf3");
  m5.putDelete("cf2","cf4",3);
  m5.putDelete("cf2","cf4",new ColumnVisibility("A&B&C"),3);
  assertEquals(m1,m1);
  assertEquals(m1,m2);
  assertEquals(m2,m1);
  assertEquals(m2.hashCode(),m1.hashCode());
  assertFalse(0 == m1.hashCode());
  assertFalse(m1.equals(m3));
  assertFalse(m3.equals(m1));
  assertFalse(m1.equals(m4));
  assertFalse(m4.equals(m1));
  assertFalse(m3.equals(m4));
  assertFalse(m1.equals(m5));
  assertFalse(m5.equals(m1));
  assertFalse(m3.equals(m5));
  assertFalse(m4.equals(m5));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.data.ValueTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEquals(){
  Value v1=new Value(DATA);
  assertTrue(v1.equals(v1));
  Value v2=new Value(DATA);
  assertTrue(v1.equals(v2));
  assertTrue(v2.equals(v1));
  Value v3=new Value(toBytes("datb"));
  assertFalse(v1.equals(v3));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCompareTo(){
  Value v1=new Value(DATA);
  Value v2=new Value(toBytes("datb"));
  assertTrue(v1.compareTo(v2) < 0);
  assertTrue(v2.compareTo(v1) > 0);
  Value v1a=new Value(DATA);
  assertTrue(v1.compareTo(v1a) == 0);
  Value v3=new Value(toBytes("datc"));
  assertTrue(v2.compareTo(v3) < 0);
  assertTrue(v1.compareTo(v3) < 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.file.BloomFilterLayerLookupTest </h4><pre class="type-9 type-13 type-11 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test() throws IOException {
  HashSet<Integer> valsSet=new HashSet<Integer>();
  for (int i=0; i < 100000; i++) {
    valsSet.add(random.nextInt(Integer.MAX_VALUE));
  }
  ArrayList<Integer> vals=new ArrayList<Integer>(valsSet);
  Collections.sort(vals);
  ConfigurationCopy acuconf=new ConfigurationCopy(AccumuloConfiguration.getDefaultConfiguration());
  acuconf.set(Property.TABLE_BLOOM_ENABLED,"true");
  acuconf.set(Property.TABLE_BLOOM_KEY_FUNCTOR,ColumnFamilyFunctor.class.getName());
  acuconf.set(Property.TABLE_FILE_TYPE,RFile.EXTENSION);
  acuconf.set(Property.TABLE_BLOOM_LOAD_THRESHOLD,"1");
  acuconf.set(Property.TSERV_BLOOM_LOAD_MAXCONCURRENT,"1");
  Configuration conf=CachedConfiguration.getInstance();
  FileSystem fs=FileSystem.get(conf);
  String suffix=FileOperations.getNewFileExtension(acuconf);
  String fname=new File(tempDir.getRoot(),testName + "." + suffix).getAbsolutePath();
  FileSKVWriter bmfw=FileOperations.getInstance().openWriter(fname,fs,conf,acuconf);
  long t1=System.currentTimeMillis();
  bmfw.startDefaultLocalityGroup();
  for (  Integer i : vals) {
    String fi=String.format("%010d",i);
    bmfw.append(new Key(new Text("r" + fi),new Text("cf1")),new Value(("v" + fi).getBytes()));
    bmfw.append(new Key(new Text("r" + fi),new Text("cf2")),new Value(("v" + fi).getBytes()));
  }
  long t2=System.currentTimeMillis();
  LOG.debug(String.format("write rate %6.2f%n",vals.size() / ((t2 - t1) / 1000.0)));
  bmfw.close();
  t1=System.currentTimeMillis();
  FileSKVIterator bmfr=FileOperations.getInstance().openReader(fname,false,fs,conf,acuconf);
  t2=System.currentTimeMillis();
  LOG.debug("Opened " + fname + " in "+ (t2 - t1));
  int hits=0;
  t1=System.currentTimeMillis();
  for (int i=0; i < 5000; i++) {
    int row=random.nextInt(Integer.MAX_VALUE);
    seek(bmfr,row);
    if (valsSet.contains(row)) {
      hits++;
      assertTrue(bmfr.hasTop());
    }
  }
  t2=System.currentTimeMillis();
  double rate1=5000 / ((t2 - t1) / 1000.0);
  LOG.debug(String.format("random lookup rate : %6.2f%n",rate1));
  LOG.debug("hits = " + hits);
  int count=0;
  t1=System.currentTimeMillis();
  for (  Integer row : valsSet) {
    seek(bmfr,row);
    assertTrue(bmfr.hasTop());
    count++;
    if (count >= 500) {
      break;
    }
  }
  t2=System.currentTimeMillis();
  double rate2=500 / ((t2 - t1) / 1000.0);
  LOG.debug(String.format("existant lookup rate %6.2f%n",rate2));
  LOG.debug("expected hits 500.  Receive hits: " + count);
  bmfr.close();
  assertTrue(rate1 > rate2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.file.FileOperationsTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * Test for filenames with +1 dot
 */
@Test public void handlesFilenamesWithMoreThanOneDot() throws IOException {
  Boolean caughtException=false;
  FileSKVWriter writer=null;
  String filename="target/test.file." + RFile.EXTENSION;
  File testFile=new File(filename);
  if (testFile.exists()) {
    FileUtils.forceDelete(testFile);
  }
  try {
    FileOperations fileOperations=FileOperations.getInstance();
    Configuration conf=new Configuration();
    FileSystem fs=FileSystem.getLocal(conf);
    AccumuloConfiguration acuconf=AccumuloConfiguration.getDefaultConfiguration();
    writer=fileOperations.openWriter(filename,fs,conf,acuconf);
    writer.close();
  }
 catch (  Exception ex) {
    caughtException=true;
  }
 finally {
    if (writer != null) {
      writer.close();
    }
    FileUtils.forceDelete(testFile);
  }
  assertFalse("Should not throw with more than 1 dot in filename.",caughtException);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.file.rfile.BlockIndexTest </h4><pre class="type-9 type-13 type-5 type-3 type-15 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSame() throws IOException {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(baos);
  Key prevKey=null;
  int num=1000;
  for (int i=0; i < num; i++) {
    Key key=new Key(RFileTest.nf("",1),"cf1","cq1");
    new RelativeKey(prevKey,key).write(out);
    new Value(new byte[0]).write(out);
    prevKey=key;
  }
  for (int i=0; i < num; i++) {
    Key key=new Key(RFileTest.nf("",3),"cf1","cq1");
    new RelativeKey(prevKey,key).write(out);
    new Value(new byte[0]).write(out);
    prevKey=key;
  }
  for (int i=0; i < num; i++) {
    Key key=new Key(RFileTest.nf("",5),"cf1","cq1");
    new RelativeKey(prevKey,key).write(out);
    new Value(new byte[0]).write(out);
    prevKey=key;
  }
  out.close();
  final byte[] data=baos.toByteArray();
  CacheEntry ce=new MyCacheEntry(data);
  ABlockReader cacheBlock=new CachableBlockFile.CachedBlockRead(ce,data);
  BlockIndex blockIndex=null;
  for (int i=0; i < 257; i++)   blockIndex=BlockIndex.getIndex(cacheBlock,new IndexEntry(prevKey,num,0,0,0));
  Assert.assertSame(null,blockIndex.seekBlock(new Key(RFileTest.nf("",0),"cf1","cq1"),cacheBlock));
  Assert.assertSame(null,blockIndex.seekBlock(new Key(RFileTest.nf("",1),"cf1","cq1"),cacheBlock));
  for (int i=2; i < 6; i++) {
    Key seekKey=new Key(RFileTest.nf("",i),"cf1","cq1");
    BlockIndexEntry bie=blockIndex.seekBlock(seekKey,cacheBlock);
    Assert.assertTrue(bie.getPrevKey().compareTo(seekKey) < 0);
    RelativeKey rk=new RelativeKey();
    rk.setPrevKey(bie.getPrevKey());
    rk.readFields(cacheBlock);
    Assert.assertTrue(rk.getKey().compareTo(seekKey) <= 0);
  }
  cacheBlock.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.file.rfile.RFileTest </h4><pre class="type-13 type-11 type-5 type-3 type-2 type-14 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test11() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("3mod10"));
  for (int i=3; i < 1024; i+=10) {
    trf.writer.append(nk(nf("i",i),"3mod10","","",i + 2),nv("" + i));
  }
  trf.writer.startNewLocalityGroup("lg2",ncfs("5mod10","7mod10"));
  for (int i=5; i < 1024; ) {
    trf.writer.append(nk(nf("i",i),"5mod10","","",i + 2),nv("" + i));
    i+=2;
    trf.writer.append(nk(nf("i",i),"7mod10","","",i + 2),nv("" + i));
    i+=8;
  }
  trf.writer.startDefaultLocalityGroup();
  for (int i=0; i < 1024; i++) {
    int m10=i % 10;
    if (m10 == 3 || m10 == 5 || m10 == 7)     continue;
    trf.writer.append(nk(nf("i",i),m10 + "mod10","","",i + 2),nv("" + i));
  }
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertEquals(3,trf.reader.getNumLocalityGroupsSeeked());
  for (int i=0; i < 1024; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("i",i),(i % 10) + "mod10","","",i + 2),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  assertFalse(trf.iter.hasTop());
  for (int m=0; m < 10; m++) {
    trf.iter.seek(new Range(new Key(),true,null,true),ncfs(m + "mod10"),true);
    assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
    for (int i=m; i < 1024; i+=10) {
      assertTrue(trf.iter.hasTop());
      assertEquals(nk(nf("i",i),(i % 10) + "mod10","","",i + 2),trf.iter.getTopKey());
      assertEquals(nv("" + i),trf.iter.getTopValue());
      trf.iter.next();
    }
    assertFalse(trf.iter.hasTop());
    trf.iter.seek(new Range(new Key(),true,null,true),ncfs(m + "mod10"),false);
    if (m == 3)     assertEquals(2,trf.reader.getNumLocalityGroupsSeeked());
 else     assertEquals(3,trf.reader.getNumLocalityGroupsSeeked());
    for (int i=0; i < 1024; i++) {
      if (i % 10 == m)       continue;
      assertTrue(trf.iter.hasTop());
      assertEquals(nk(nf("i",i),(i % 10) + "mod10","","",i + 2),trf.iter.getTopKey());
      assertEquals(nv("" + i),trf.iter.getTopValue());
      trf.iter.next();
    }
    assertFalse(trf.iter.hasTop());
  }
  SortedKeyValueIterator<Key,Value> reader2=trf.iter.deepCopy(null);
  for (int m=0; m < 9; m++) {
    trf.iter.seek(new Range(new Key(),true,null,true),ncfs(m + "mod10"),true);
    assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
    reader2.seek(new Range(new Key(),true,null,true),ncfs((m + 1) + "mod10"),true);
    for (int i=m; i < 1024; i+=10) {
      assertTrue(trf.iter.hasTop());
      assertEquals(nk(nf("i",i),(i % 10) + "mod10","","",i + 2),trf.iter.getTopKey());
      assertEquals(nv("" + i),trf.iter.getTopValue());
      trf.iter.next();
      if (i + 1 < 1024) {
        assertTrue(reader2.hasTop());
        assertEquals(nk(nf("i",(i + 1)),((i + 1) % 10) + "mod10","","",i + 3),reader2.getTopKey());
        assertEquals(nv("" + (i + 1)),reader2.getTopValue());
        reader2.next();
      }
    }
    assertFalse(trf.iter.hasTop());
    assertFalse(reader2.hasTop());
  }
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test7() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  for (int i=2; i < 50; i++) {
    trf.writer.append(nk(nf("r_",i),"cf1","cq1","L1",55),nv("foo" + i));
  }
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range(nk(nf("r_",3),"cf1","cq1","L1",55),true,nk(nf("r_",4),"cf1","cq1","L1",55),false),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk(nf("r_",3),"cf1","cq1","L1",55)));
  assertEquals(nv("foo" + 3),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk(nf("r_",4) + "a","cf1","cq1","L1",55),true,nk(nf("r_",4) + "b","cf1","cq1","L1",55),true),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk(nf("r_",4) + "c","cf1","cq1","L1",55),true,nk(nf("r_",4) + "d","cf1","cq1","L1",55),true),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk(nf("r_",4) + "e","cf1","cq1","L1",55),true,nk(nf("r_",4) + "f","cf1","cq1","L1",55),true),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk(nf("r_",5),"cf1","cq1","L1",55),true,nk(nf("r_",6),"cf1","cq1","L1",55),false),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk(nf("r_",5),"cf1","cq1","L1",55)));
  assertEquals(nv("foo" + 5),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk(nf("r_",0),"cf1","cq1","L1",55),true,nk(nf("r_",2),"cf1","cq1","L1",55),false),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  assertEquals(nk(nf("r_",49),"cf1","cq1","L1",55),trf.reader.getLastKey());
  trf.reader.close();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test3() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  int val=0;
  ArrayList<Key> expectedKeys=new ArrayList<Key>(10000);
  ArrayList<Value> expectedValues=new ArrayList<Value>(10000);
  for (int row=0; row < 4; row++) {
    String rowS=nf("r_",row);
    for (int cf=0; cf < 4; cf++) {
      String cfS=nf("cf_",cf);
      for (int cq=0; cq < 4; cq++) {
        String cqS=nf("cq_",cq);
        for (int cv='A'; cv < 'A' + 4; cv++) {
          String cvS="" + (char)cv;
          for (int ts=4; ts > 0; ts--) {
            Key k=nk(rowS,cfS,cqS,cvS,ts);
            k.setDeleted(true);
            Value v=nv("" + val);
            trf.writer.append(k,v);
            expectedKeys.add(k);
            expectedValues.add(v);
            k=nk(rowS,cfS,cqS,cvS,ts);
            v=nv("" + val);
            trf.writer.append(k,v);
            expectedKeys.add(k);
            expectedValues.add(v);
            val++;
          }
        }
      }
    }
  }
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range((Key)null,null),EMPTY_COL_FAMS,false);
  verify(trf,expectedKeys.iterator(),expectedValues.iterator());
  int index=expectedKeys.size() / 2;
  trf.seek(expectedKeys.get(index));
  verify(trf,expectedKeys.subList(index,expectedKeys.size()).iterator(),expectedValues.subList(index,expectedKeys.size()).iterator());
  index=0;
  trf.seek(expectedKeys.get(index));
  verify(trf,expectedKeys.subList(index,expectedKeys.size()).iterator(),expectedValues.subList(index,expectedKeys.size()).iterator());
  index=expectedKeys.size() - 1;
  trf.seek(expectedKeys.get(index));
  verify(trf,expectedKeys.subList(index,expectedKeys.size()).iterator(),expectedValues.subList(index,expectedKeys.size()).iterator());
  index=expectedKeys.size();
  trf.seek(new Key(new Text("z")));
  verify(trf,expectedKeys.subList(index,expectedKeys.size()).iterator(),expectedValues.subList(index,expectedKeys.size()).iterator());
  index=expectedKeys.size() / 2;
  trf.seek(expectedKeys.get(index));
  assertTrue(trf.iter.hasTop());
  assertEquals(expectedKeys.get(index),trf.iter.getTopKey());
  assertEquals(expectedValues.get(index),trf.iter.getTopValue());
  trf.iter.next();
  index++;
  assertTrue(trf.iter.hasTop());
  assertEquals(expectedKeys.get(index),trf.iter.getTopKey());
  assertEquals(expectedValues.get(index),trf.iter.getTopValue());
  trf.seek(expectedKeys.get(index));
  assertTrue(trf.iter.hasTop());
  assertEquals(expectedKeys.get(index),trf.iter.getTopKey());
  assertEquals(expectedValues.get(index),trf.iter.getTopValue());
  index=0;
  for (  Key key : expectedKeys) {
    trf.seek(key);
    assertTrue(trf.iter.hasTop());
    assertEquals(key,trf.iter.getTopKey());
    assertEquals(expectedValues.get(index),trf.iter.getTopValue());
    if (index > 0) {
      expectedKeys.get(index - 1);
    }
    index++;
  }
  for (int i=expectedKeys.size() - 1; i >= 0; i--) {
    Key key=expectedKeys.get(i);
    trf.seek(key);
    assertTrue(trf.iter.hasTop());
    assertEquals(key,trf.iter.getTopKey());
    assertEquals(expectedValues.get(i),trf.iter.getTopValue());
    if (i - 1 > 0) {
      expectedKeys.get(i - 1);
    }
  }
  assertEquals(expectedKeys.get(expectedKeys.size() - 1),trf.reader.getLastKey());
  Random rand=new Random();
  for (int i=0; i < 12; i++) {
    index=rand.nextInt(expectedKeys.size());
    trf.seek(expectedKeys.get(index));
    for (; index < expectedKeys.size(); index++) {
      assertTrue(trf.iter.hasTop());
      assertEquals(expectedKeys.get(index),trf.iter.getTopKey());
      assertEquals(expectedValues.get(index),trf.iter.getTopValue());
      trf.iter.next();
    }
  }
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void test16() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("a","b"));
  trf.writer.append(nk("0007","a","cq1","",4),nv("1"));
  try {
    trf.writer.startNewLocalityGroup("lg1",ncfs("b","c"));
    assertFalse(true);
  }
 catch (  IllegalArgumentException ioe) {
  }
  trf.closeWriter();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test12() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("a","b"));
  trf.writer.append(nk("0007","a","cq1","",4),nv("1"));
  try {
    trf.writer.append(nk("0009","c","cq1","",4),nv("1"));
    assertFalse(true);
  }
 catch (  IllegalArgumentException ioe) {
  }
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertEquals(nk("0007","a","cq1","",4),trf.iter.getTopKey());
  assertEquals(nv("1"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
}

</code></pre>

<br>
<pre class="type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test6() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  for (int i=0; i < 500; i++) {
    trf.writer.append(nk(nf("r_",i),"cf1","cq1","L1",55),nv("foo1"));
  }
  trf.closeWriter();
  trf.openReader();
  for (int i=0; i < 10; i++) {
    trf.seek(nk(nf("q_",i),"cf1","cq1","L1",55));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),"cf1","cq1","L1",55),trf.iter.getTopKey());
    assertEquals(nv("foo1"),trf.iter.getTopValue());
  }
  for (int i=0; i < 10; i++) {
    trf.seek(nk(nf("s_",i),"cf1","cq1","L1",55));
    assertFalse(trf.iter.hasTop());
  }
  assertEquals(nk(nf("r_",499),"cf1","cq1","L1",55),trf.reader.getLastKey());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  trf.writer.append(nk("r1","cf1","cq1","L1",55),nv("foo"));
  trf.closeWriter();
  trf.openReader();
  trf.seek(null);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("r1","cf1","cq1","L1",55)));
  assertTrue(trf.iter.getTopValue().equals(nv("foo")));
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.seek(nk("r2","cf1","cq1","L1",55));
  assertFalse(trf.iter.hasTop());
  trf.seek(nk("r1","cf1","cq1","L1",55));
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("r1","cf1","cq1","L1",55)));
  assertTrue(trf.iter.getTopValue().equals(nv("foo")));
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  assertEquals(nk("r1","cf1","cq1","L1",55),trf.reader.getLastKey());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test17() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startDefaultLocalityGroup();
  for (int i=0; i < 2048; i++) {
    trf.writer.append(nk("r0000","cf1","cq1","",1),nv("" + i));
  }
  for (int i=2048; i < 4096; i++) {
    trf.writer.append(nk("r0001","cf1","cq1","",1),nv("" + i));
  }
  trf.writer.close();
  trf.openReader();
  FileSKVIterator indexIter=trf.reader.getIndex();
  int count=0;
  while (indexIter.hasTop()) {
    count++;
    indexIter.next();
  }
  assertTrue(count > 4);
  trf.iter.seek(new Range(nk("r0000","cf1","cq1","",1),true,nk("r0001","cf1","cq1","",1),false),EMPTY_COL_FAMS,false);
  for (int i=0; i < 2048; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk("r0000","cf1","cq1","",1),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk("r0000","cf1","cq1","",1),false,nk("r0001","cf1","cq1","",1),true),EMPTY_COL_FAMS,false);
  for (int i=2048; i < 4096; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk("r0001","cf1","cq1","",1),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk("r0001","cf1","cq1","",1),true,nk("r0001","cf1","cq1","",1),true),EMPTY_COL_FAMS,false);
  for (int i=2048; i < 4096; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk("r0001","cf1","cq1","",1),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range(nk("r0002","cf1","cq1","",1),true,nk("r0002","cf1","cq1","",1),true),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  trf.iter.seek(new Range((Key)null,null),EMPTY_COL_FAMS,false);
  for (int i=0; i < 2048; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk("r0000","cf1","cq1","",1),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  for (int i=2048; i < 4096; i++) {
    assertTrue(trf.iter.hasTop());
    assertEquals(nk("r0001","cf1","cq1","",1),trf.iter.getTopKey());
    assertEquals(nv("" + i),trf.iter.getTopValue());
    trf.iter.next();
  }
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test13() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("a","b"));
  trf.writer.append(nk("0007","a","cq1","",4),nv("1"));
  trf.writer.startDefaultLocalityGroup();
  try {
    trf.writer.append(nk("0008","a","cq1","",4),nv("1"));
    assertFalse(true);
  }
 catch (  IllegalArgumentException ioe) {
  }
  try {
    trf.writer.append(nk("0009","b","cq1","",4),nv("1"));
    assertFalse(true);
  }
 catch (  IllegalArgumentException ioe) {
  }
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertEquals(nk("0007","a","cq1","",4),trf.iter.getTopKey());
  assertEquals(nv("1"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test9() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.append(nk("0000","cf1","doe,john","",4),nv("1123 West Left st"));
  trf.writer.append(nk("0002","cf2","doe,jane","",5),nv("1124 East Right st"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  trf.writer.append(nk("0001","cf3","buck,john","",4),nv("90 Slum st"));
  trf.writer.append(nk("0003","cf4","buck,jane","",5),nv("09 Slum st"));
  trf.writer.close();
  trf.openReader();
  Range r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf1","cf2"),true);
  assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf3","cf4"),true);
  assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0001","cf3","buck,john","",4)));
  assertEquals(nv("90 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0003","cf4","buck,jane","",5)));
  assertEquals(nv("09 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,EMPTY_COL_FAMS,false);
  assertEquals(2,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0001","cf3","buck,john","",4)));
  assertEquals(nv("90 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0003","cf4","buck,jane","",5)));
  assertEquals(nv("09 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("saint","dogooder"),true);
  assertEquals(0,trf.reader.getNumLocalityGroupsSeeked());
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf4"),true);
  assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0003","cf4","buck,jane","",5)));
  assertEquals(nv("09 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf3"),true);
  assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0001","cf3","buck,john","",4)));
  assertEquals(nv("90 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf1"),true);
  assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf2"),true);
  assertEquals(1,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  r=new Range(nk("0000","cf1","doe,john","",4),true,nk("0003","cf4","buck,jane","",5),true);
  trf.iter.seek(r,ncfs("cf1","cf4"),true);
  assertEquals(2,trf.reader.getNumLocalityGroupsSeeked());
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0003","cf4","buck,jane","",5)));
  assertEquals(nv("09 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRootTabletEncryption() throws Exception {
  conf=setAndGetAccumuloConfig(CryptoTest.CRYPTO_ON_CONF);
  TestRFile testRfile=new TestRFile(conf);
  testRfile.openWriter();
  RFile.Writer mfw=testRfile.writer;
  Text tableExtent=new Text(KeyExtent.getMetadataEntry(new Text(MetadataTable.ID),MetadataSchema.TabletsSection.getRange().getEndKey().getRow()));
  Key tableDirKey=new Key(tableExtent,TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.getColumnFamily(),TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.getColumnQualifier(),0);
  mfw.append(tableDirKey,new Value("/table_info".getBytes()));
  Key tableTimeKey=new Key(tableExtent,TabletsSection.ServerColumnFamily.TIME_COLUMN.getColumnFamily(),TabletsSection.ServerColumnFamily.TIME_COLUMN.getColumnQualifier(),0);
  mfw.append(tableTimeKey,new Value(('L' + "0").getBytes()));
  Key tablePrevRowKey=new Key(tableExtent,TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.getColumnFamily(),TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.getColumnQualifier(),0);
  mfw.append(tablePrevRowKey,KeyExtent.encodePrevEndRow(null));
  Text defaultExtent=new Text(KeyExtent.getMetadataEntry(new Text(MetadataTable.ID),null));
  Key defaultDirKey=new Key(defaultExtent,TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.getColumnFamily(),TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.getColumnQualifier(),0);
  mfw.append(defaultDirKey,new Value(Constants.DEFAULT_TABLET_LOCATION.getBytes()));
  Key defaultTimeKey=new Key(defaultExtent,TabletsSection.ServerColumnFamily.TIME_COLUMN.getColumnFamily(),TabletsSection.ServerColumnFamily.TIME_COLUMN.getColumnQualifier(),0);
  mfw.append(defaultTimeKey,new Value(('L' + "0").getBytes()));
  Key defaultPrevRowKey=new Key(defaultExtent,TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.getColumnFamily(),TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.getColumnQualifier(),0);
  mfw.append(defaultPrevRowKey,KeyExtent.encodePrevEndRow(MetadataSchema.TabletsSection.getRange().getEndKey().getRow()));
  testRfile.closeWriter();
  if (true) {
    FileOutputStream fileOutputStream=new FileOutputStream(tempFolder.newFile("testEncryptedRootFile.rf"));
    fileOutputStream.write(testRfile.baos.toByteArray());
    fileOutputStream.flush();
    fileOutputStream.close();
  }
  testRfile.openReader();
  testRfile.iter.seek(new Range((Key)null,null),EMPTY_COL_FAMS,false);
  assertTrue(testRfile.iter.hasTop());
  assertTrue(testRfile.reader.getLastKey() != null);
  testRfile.closeReader();
  conf=null;
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test5() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  trf.writer.append(nk("r1","cf1","cq1","L1",55),nv("foo1"));
  trf.writer.append(nk("r1","cf1","cq4","L1",56),nv("foo2"));
  trf.closeWriter();
  trf.openReader();
  trf.seek(nk("r1","cf1","cq3","L1",55));
  assertTrue(trf.iter.hasTop());
  assertEquals(nk("r1","cf1","cq4","L1",56),trf.iter.getTopKey());
  assertEquals(nv("foo2"),trf.iter.getTopValue());
  trf.seek(nk("r1","cf1","cq0","L1",55));
  assertTrue(trf.iter.hasTop());
  assertEquals(nk("r1","cf1","cq1","L1",55),trf.iter.getTopKey());
  assertEquals(nv("foo1"),trf.iter.getTopValue());
  assertEquals(nk("r1","cf1","cq4","L1",56),trf.reader.getLastKey());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range((Key)null,null),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  assertEquals(null,trf.reader.getLastKey());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSampleLG() throws IOException {
  int num=5000;
  for (  int sampleBufferSize : new int[]{1 << 10,1 << 20}) {
    RFile.setSampleBufferSize(sampleBufferSize);
    for (    int modulus : new int[]{19,103,1019}) {
      List<Entry<Key,Value>> sampleDataLG1=new ArrayList<Entry<Key,Value>>();
      List<Entry<Key,Value>> sampleDataLG2=new ArrayList<Entry<Key,Value>>();
      ConfigurationCopy sampleConf=new ConfigurationCopy(conf == null ? AccumuloConfiguration.getDefaultConfiguration() : conf);
      sampleConf.set(Property.TABLE_SAMPLER,RowSampler.class.getName());
      sampleConf.set(Property.TABLE_SAMPLER_OPTS + "hasher","murmur3_32");
      sampleConf.set(Property.TABLE_SAMPLER_OPTS + "modulus",modulus + "");
      Sampler sampler=SamplerFactory.newSampler(SamplerConfigurationImpl.newSamplerConfig(sampleConf),sampleConf);
      TestRFile trf=new TestRFile(sampleConf);
      trf.openWriter(false,1000);
      trf.writer.startNewLocalityGroup("meta-lg",ncfs("metaA","metaB"));
      for (int r=0; r < num; r++) {
        String row=String.format("r%06d",r);
        Key k1=new Key(row,"metaA","q9",7);
        Key k2=new Key(row,"metaB","q8",7);
        Key k3=new Key(row,"metaB","qA",7);
        Value v1=new Value(("" + r).getBytes());
        Value v2=new Value(("" + r * 93).getBytes());
        Value v3=new Value(("" + r * 113).getBytes());
        if (sampler.accept(k1)) {
          sampleDataLG1.add(new AbstractMap.SimpleImmutableEntry<Key,Value>(k1,v1));
          sampleDataLG1.add(new AbstractMap.SimpleImmutableEntry<Key,Value>(k2,v2));
          sampleDataLG1.add(new AbstractMap.SimpleImmutableEntry<Key,Value>(k3,v3));
        }
        trf.writer.append(k1,v1);
        trf.writer.append(k2,v2);
        trf.writer.append(k3,v3);
      }
      trf.writer.startDefaultLocalityGroup();
      for (int r=0; r < num; r++) {
        String row=String.format("r%06d",r);
        Key k1=new Key(row,"dataA","q9",7);
        Value v1=new Value(("" + r).getBytes());
        if (sampler.accept(k1)) {
          sampleDataLG2.add(new AbstractMap.SimpleImmutableEntry<Key,Value>(k1,v1));
        }
        trf.writer.append(k1,v1);
      }
      trf.closeWriter();
      Assert.assertTrue(sampleDataLG1.size() > 0);
      Assert.assertTrue(sampleDataLG2.size() > 0);
      trf.openReader(false);
      FileSKVIterator sample=trf.reader.getSample(SamplerConfigurationImpl.newSamplerConfig(sampleConf));
      checkSample(sample,sampleDataLG1,ncfs("metaA","metaB"),true);
      checkSample(sample,sampleDataLG1,ncfs("metaA"),true);
      checkSample(sample,sampleDataLG1,ncfs("metaB"),true);
      checkSample(sample,sampleDataLG1,ncfs("dataA"),false);
      checkSample(sample,sampleDataLG2,ncfs("metaA","metaB"),false);
      checkSample(sample,sampleDataLG2,ncfs("dataA"),true);
      ArrayList<Entry<Key,Value>> allSampleData=new ArrayList<Entry<Key,Value>>();
      allSampleData.addAll(sampleDataLG1);
      allSampleData.addAll(sampleDataLG2);
      Collections.sort(allSampleData,new Comparator<Entry<Key,Value>>(){
        @Override public int compare(        Entry<Key,Value> o1,        Entry<Key,Value> o2){
          return o1.getKey().compareTo(o2.getKey());
        }
      }
);
      checkSample(sample,allSampleData,ncfs("dataA","metaA"),true);
      checkSample(sample,allSampleData,EMPTY_COL_FAMS,false);
      trf.closeReader();
    }
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReseekUnconsumed() throws Exception {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  for (int i=0; i < 2500; i++) {
    trf.writer.append(nk(nf("r_",i),"cf1","cq1","L1",42),nv("foo" + i));
  }
  trf.closeWriter();
  trf.openReader();
  Set<ByteSequence> cfs=Collections.emptySet();
  Random rand=new Random();
  for (int count=0; count < 100; count++) {
    int start=rand.nextInt(2300);
    Range range=new Range(nk(nf("r_",start),"cf1","cq1","L1",42),nk(nf("r_",start + 100),"cf1","cq1","L1",42));
    trf.reader.seek(range,cfs,false);
    int numToScan=rand.nextInt(100);
    for (int j=0; j < numToScan; j++) {
      assertTrue(trf.reader.hasTop());
      assertEquals(nk(nf("r_",start + j),"cf1","cq1","L1",42),trf.reader.getTopKey());
      trf.reader.next();
    }
    assertTrue(trf.reader.hasTop());
    assertEquals(nk(nf("r_",start + numToScan),"cf1","cq1","L1",42),trf.reader.getTopKey());
    int start2=start + numToScan + rand.nextInt(3);
    int end2=start2 + rand.nextInt(3);
    range=new Range(nk(nf("r_",start2),"cf1","cq1","L1",42),nk(nf("r_",end2),"cf1","cq1","L1",42));
    trf.reader.seek(range,cfs,false);
    for (int j=start2; j <= end2; j++) {
      assertTrue(trf.reader.hasTop());
      assertEquals(nk(nf("r_",j),"cf1","cq1","L1",42),trf.reader.getTopKey());
      trf.reader.next();
    }
    assertFalse(trf.reader.hasTop());
  }
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void test14() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startDefaultLocalityGroup();
  try {
    trf.writer.startNewLocalityGroup("lg1",ncfs("a","b"));
    assertFalse(true);
  }
 catch (  IllegalStateException ioe) {
  }
  try {
    trf.writer.startDefaultLocalityGroup();
    assertFalse(true);
  }
 catch (  IllegalStateException ioe) {
  }
  trf.writer.close();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test10() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
  trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.append(nk("0000","cf1","doe,john","",4),nv("1123 West Left st"));
  trf.writer.append(nk("0002","cf2","doe,jane","",5),nv("1124 East Right st"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
  trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  trf.writer.append(nk("0001","cf3","buck,john","",4),nv("90 Slum st"));
  trf.writer.append(nk("0003","cf4","buck,jane","",5),nv("09 Slum st"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0001","cf3","buck,john","",4)));
  assertEquals(nv("90 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0003","cf4","buck,jane","",5)));
  assertEquals(nv("09 Slum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
  trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.append(nk("0007","good citizen","q,john","",4),nv("70 Apple st"));
  trf.writer.append(nk("0008","model citizen","q,jane","",5),nv("81 Plum st"));
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0007","good citizen","q,john","",4)));
  assertEquals(nv("70 Apple st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0008","model citizen","q,jane","",5)));
  assertEquals(nv("81 Plum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
  trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.append(nk("0000","cf1","doe,john","",4),nv("1123 West Left st"));
  trf.writer.append(nk("0002","cf2","doe,jane","",5),nv("1124 East Right st"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  trf.writer.startDefaultLocalityGroup();
  trf.writer.append(nk("0007","good citizen","q,john","",4),nv("70 Apple st"));
  trf.writer.append(nk("0008","model citizen","q,jane","",5),nv("81 Plum st"));
  trf.writer.close();
  trf.openReader();
  trf.iter.seek(new Range(new Text(""),null),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0007","good citizen","q,john","",4)));
  assertEquals(nv("70 Apple st"),trf.iter.getTopValue());
  trf.iter.next();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0008","model citizen","q,jane","",5)));
  assertEquals(nv("81 Plum st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test8() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  for (int i=0; i < 2500; i++) {
    trf.writer.append(nk(nf("r_",i),"cf1","cq1","L1",42),nv("foo" + i));
  }
  trf.closeWriter();
  trf.openReader();
  for (int i=0; i < 2499; i++) {
    trf.seek(nk(nf("r_",i),"cf1","cq1","L1",42).followingKey(PartialKey.ROW));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",i + 1),"cf1","cq1","L1",42),trf.iter.getTopKey());
  }
  for (int i=0; i < 2499; i+=2) {
    trf.seek(nk(nf("r_",i),"cf1","cq1","L1",42).followingKey(PartialKey.ROW));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",i + 1),"cf1","cq1","L1",42),trf.iter.getTopKey());
  }
  for (int i=2498; i >= 0; i--) {
    trf.seek(nk(nf("r_",i),"cf1","cq1","L1",42).followingKey(PartialKey.ROW));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",i + 1),"cf1","cq1","L1",42),trf.iter.getTopKey());
  }
  trf.closeReader();
  trf=new TestRFile(conf);
  trf.openWriter();
  for (int i=0; i < 2500; i++) {
    trf.writer.append(nk(nf("r_",0),nf("cf_",i),"cq1","L1",42),nv("foo" + i));
  }
  trf.closeWriter();
  trf.openReader();
  for (int i=0; i < 2499; i++) {
    trf.seek(nk(nf("r_",0),nf("cf_",i),"cq1","L1",42).followingKey(PartialKey.ROW_COLFAM));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),nf("cf_",i + 1),"cq1","L1",42),trf.iter.getTopKey());
  }
  for (int i=0; i < 2499; i+=2) {
    trf.seek(nk(nf("r_",0),nf("cf_",i),"cq1","L1",42).followingKey(PartialKey.ROW_COLFAM));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),nf("cf_",i + 1),"cq1","L1",42),trf.iter.getTopKey());
  }
  for (int i=2498; i >= 0; i--) {
    trf.seek(nk(nf("r_",0),nf("cf_",i),"cq1","L1",42).followingKey(PartialKey.ROW_COLFAM));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),nf("cf_",i + 1),"cq1","L1",42),trf.iter.getTopKey());
  }
  trf.closeReader();
  trf=new TestRFile(conf);
  trf.openWriter();
  for (int i=0; i < 2500; i++) {
    trf.writer.append(nk(nf("r_",0),nf("cf_",0),nf("cq_",i),"L1",42),nv("foo" + i));
  }
  trf.closeWriter();
  trf.openReader();
  for (int i=0; i < 2499; i++) {
    trf.seek(nk(nf("r_",0),nf("cf_",0),nf("cq_",i),"L1",42).followingKey(PartialKey.ROW_COLFAM_COLQUAL));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),nf("cf_",0),nf("cq_",i + 1),"L1",42),trf.iter.getTopKey());
  }
  for (int i=0; i < 2499; i+=2) {
    trf.seek(nk(nf("r_",0),nf("cf_",0),nf("cq_",i),"L1",42).followingKey(PartialKey.ROW_COLFAM_COLQUAL));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),nf("cf_",0),nf("cq_",i + 1),"L1",42),trf.iter.getTopKey());
  }
  for (int i=2498; i >= 0; i--) {
    trf.seek(nk(nf("r_",0),nf("cf_",0),nf("cq_",i),"L1",42).followingKey(PartialKey.ROW_COLFAM_COLQUAL));
    assertTrue(trf.iter.hasTop());
    assertEquals(nk(nf("r_",0),nf("cf_",0),nf("cq_",i + 1),"L1",42),trf.iter.getTopKey());
  }
  trf.closeReader();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void test4() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter();
  trf.writer.append(nk("r1","cf1","cq1","L1",55),nv("foo1"));
  try {
    trf.writer.append(nk("r0","cf1","cq1","L1",55),nv("foo1"));
    assertFalse(true);
  }
 catch (  IllegalStateException ioe) {
  }
  try {
    trf.writer.append(nk("r1","cf0","cq1","L1",55),nv("foo1"));
    assertFalse(true);
  }
 catch (  IllegalStateException ioe) {
  }
  try {
    trf.writer.append(nk("r1","cf1","cq0","L1",55),nv("foo1"));
    assertFalse(true);
  }
 catch (  IllegalStateException ioe) {
  }
  try {
    trf.writer.append(nk("r1","cf1","cq1","L0",55),nv("foo1"));
    assertFalse(true);
  }
 catch (  IllegalStateException ioe) {
  }
  try {
    trf.writer.append(nk("r1","cf1","cq1","L1",56),nv("foo1"));
    assertFalse(true);
  }
 catch (  IllegalStateException ioe) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-14 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test19() throws IOException {
  TestRFile trf=new TestRFile(conf);
  trf.openWriter(false);
  trf.openWriter(false);
  trf.writer.startNewLocalityGroup("lg1",ncfs("cf1","cf2"));
  trf.writer.append(nk("0000","cf1","doe,john","",4),nv("1123 West Left st"));
  trf.writer.append(nk("0002","cf2","doe,jane","",5),nv("1124 East Right st"));
  trf.writer.startNewLocalityGroup("lg2",ncfs("cf3","cf4"));
  DataOutputStream dos=trf.writer.createMetaStore("count");
  dos.writeInt(2);
  dos.writeUTF("data1");
  dos.writeInt(1);
  dos.writeUTF("data2");
  dos.writeInt(1);
  dos.close();
  trf.closeWriter();
  trf.openReader();
  trf.iter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0000","cf1","doe,john","",4)));
  assertEquals(nv("1123 West Left st"),trf.iter.getTopValue());
  trf.iter.next();
  DataInputStream in=trf.reader.getMetaStore("count");
  assertEquals(2,in.readInt());
  assertEquals("data1",in.readUTF());
  assertEquals(1,in.readInt());
  assertEquals("data2",in.readUTF());
  assertEquals(1,in.readInt());
  in.close();
  assertTrue(trf.iter.hasTop());
  assertTrue(trf.iter.getTopKey().equals(nk("0002","cf2","doe,jane","",5)));
  assertEquals(nv("1124 East Right st"),trf.iter.getTopValue());
  trf.iter.next();
  assertFalse(trf.iter.hasTop());
  trf.closeReader();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.AggregatingIteratorTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test2() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,"2");
  nkv(tm1,1,1,1,2,false,"3");
  nkv(tm1,1,1,1,3,false,"4");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> opts=new HashMap<String,String>();
  opts.put("cf001",SummationAggregator.class.getName());
  ai.init(new SortedMapIterator(tm1),opts,null);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,3),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,1),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,4),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test7() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,2,true,"");
  nkv(tm1,1,1,1,3,false,"4");
  nkv(tm1,1,1,1,4,false,"3");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> opts=new HashMap<String,String>();
  opts.put("cf001",SummationAggregator.class.getName());
  ai.init(new SortedMapIterator(tm1),opts,new DefaultIteratorEnvironment());
  ai.seek(nr(1,1,1,4,true),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,4),ai.getTopKey());
  assertEquals("7",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2,true),ai.getTopKey());
  assertEquals("",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,2,true,"");
  ai=new AggregatingIterator();
  ai.init(new SortedMapIterator(tm1),opts,new DefaultIteratorEnvironment());
  ai.seek(nr(1,1,1,4,true),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2,true),ai.getTopKey());
  assertEquals("",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test3() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,"2");
  nkv(tm1,1,1,1,2,false,"3");
  nkv(tm1,1,1,1,3,false,"4");
  nkv(tm1,2,2,1,1,false,"2");
  nkv(tm1,2,2,1,2,false,"3");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> opts=new HashMap<String,String>();
  opts.put("cf001",SummationAggregator.class.getName());
  ai.init(new SortedMapIterator(tm1),opts,null);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,1),ai.getTopKey());
  assertEquals("2",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
  ai.seek(nr(1,1,1,4),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test4() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,0,0,1,1,false,"7");
  nkv(tm1,1,1,1,1,false,"2");
  nkv(tm1,1,1,1,2,false,"3");
  nkv(tm1,1,1,1,3,false,"4");
  nkv(tm1,2,2,1,1,false,"2");
  nkv(tm1,2,2,1,2,false,"3");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> opts=new HashMap<String,String>();
  opts.put("cf001",SummationAggregator.class.getName());
  ai.init(new SortedMapIterator(tm1),opts,null);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(0,0,1,1),ai.getTopKey());
  assertEquals("7",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,1),ai.getTopKey());
  assertEquals("2",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(0,0,1,0),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test5() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,"2");
  TreeMap<Key,Value> tm2=new TreeMap<Key,Value>();
  nkv(tm2,1,1,1,1,false,"3");
  TreeMap<Key,Value> tm3=new TreeMap<Key,Value>();
  nkv(tm3,1,1,1,1,false,"4");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> opts=new HashMap<String,String>();
  opts.put("cf001",SummationAggregator.class.getName());
  List<SortedKeyValueIterator<Key,Value>> sources=new ArrayList<SortedKeyValueIterator<Key,Value>>(3);
  sources.add(new SortedMapIterator(tm1));
  sources.add(new SortedMapIterator(tm2));
  sources.add(new SortedMapIterator(tm3));
  MultiIterator mi=new MultiIterator(sources,true);
  ai.init(mi,opts,null);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,1),ai.getTopKey());
  assertEquals("9",ai.getTopValue().toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test1() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,"2");
  nkv(tm1,1,1,1,2,false,"3");
  nkv(tm1,1,1,1,3,false,"4");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> emptyMap=Collections.emptyMap();
  ai.init(new SortedMapIterator(tm1),emptyMap,null);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("4",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,1),ai.getTopKey());
  assertEquals("2",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2),ai.getTopKey());
  assertEquals("3",ai.getTopValue().toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,1),ai.getTopKey());
  assertEquals("2",ai.getTopValue().toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,0),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@SuppressWarnings("deprecation") @Test public void test6() throws IOException {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,"2");
  nkv(tm1,1,1,1,2,false,"3");
  nkv(tm1,1,1,1,3,false,"4");
  AggregatingIterator ai=new AggregatingIterator();
  Map<String,String> opts=new HashMap<String,String>();
  opts.put("cf001",SummationAggregator.class.getName());
  ai.init(new SortedMapIterator(tm1),opts,new DefaultIteratorEnvironment());
  ai.seek(nr(1,1,1,3,false),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.FirstEntryInRowTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test1() throws Exception {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  put(tm1,"r1","cf1","cq1",5,"v1");
  put(tm1,"r1","cf1","cq3",5,"v2");
  put(tm1,"r2","cf1","cq1",5,"v3");
  put(tm1,"r2","cf2","cq4",5,"v4");
  put(tm1,"r2","cf2","cq5",5,"v5");
  put(tm1,"r3","cf3","cq6",5,"v6");
  FirstEntryInRowIterator fei=new FirstEntryInRowIterator();
  fei.init(new SortedMapIterator(tm1),EMPTY_MAP,null);
  fei.seek(new Range(),EMPTY_SET,false);
  aten(fei,"r1","cf1","cq1",5,"v1");
  aten(fei,"r2","cf1","cq1",5,"v3");
  aten(fei,"r3","cf3","cq6",5,"v6");
  assertFalse(fei.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test2() throws Exception {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  for (int r=0; r < 5; r++) {
    for (int cf=r; cf < 100; cf++) {
      for (int cq=3; cq < 6; cq++) {
        put(tm1,r,cf,cq,6,r * cf * cq);
      }
    }
  }
  FirstEntryInRowIterator fei=new FirstEntryInRowIterator();
  fei.init(new SortedMapIterator(tm1),EMPTY_MAP,null);
  fei.seek(new Range(nk(0,10,0,0),null),EMPTY_SET,false);
  aten(fei,1,1,3,6,1 * 1 * 3);
  aten(fei,2,2,3,6,2 * 2 * 3);
  aten(fei,3,3,3,6,3 * 3 * 3);
  aten(fei,4,4,3,6,4 * 4 * 3);
  assertFalse(fei.hasTop());
  fei.seek(new Range(nk(1,1,3,6),nk(3,3,3,6)),EMPTY_SET,false);
  aten(fei,1,1,3,6,1 * 1 * 3);
  aten(fei,2,2,3,6,2 * 2 * 3);
  aten(fei,3,3,3,6,3 * 3 * 3);
  assertFalse(fei.hasTop());
  fei.seek(new Range(nk(1,1,3,6),false,nk(3,3,3,6),false),EMPTY_SET,false);
  aten(fei,2,2,3,6,2 * 2 * 3);
  assertFalse(fei.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.IteratorUtilTest </h4><pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test4() throws IOException {
  AccumuloConfiguration conf=new ConfigurationCopy();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  MultiIteratorTest.nkv(tm,1,0,false,"1");
  MultiIteratorTest.nkv(tm,2,0,false,"2");
  SortedMapIterator source=new SortedMapIterator(tm);
  SortedKeyValueIterator<Key,Value> iter=IteratorUtil.loadIterators(IteratorScope.majc,source,new KeyExtent(new Text("tab"),null,null),conf,new DefaultIteratorEnvironment(conf));
  iter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(iter.hasTop());
  assertTrue(iter.getTopKey().equals(MultiIteratorTest.nk(1,0)));
  assertTrue(iter.getTopValue().toString().equals("1"));
  iter.next();
  assertTrue(iter.hasTop());
  assertTrue(iter.getTopKey().equals(MultiIteratorTest.nk(2,0)));
  assertTrue(iter.getTopValue().toString().equals("2"));
  iter.next();
  assertFalse(iter.hasTop());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test5() throws IOException {
  ConfigurationCopy conf=new ConfigurationCopy();
  conf.set(Property.TABLE_ITERATOR_PREFIX + IteratorScope.minc.name() + ".filter","1," + AgeOffFilter.class.getName());
  conf.set(Property.TABLE_ITERATOR_PREFIX + IteratorScope.minc.name() + ".filter.opt.ttl","100");
  conf.set(Property.TABLE_ITERATOR_PREFIX + IteratorScope.minc.name() + ".filter.opt.currentTime","1000");
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  MultiIteratorTest.nkv(tm,1,850,false,"1");
  MultiIteratorTest.nkv(tm,2,950,false,"2");
  SortedMapIterator source=new SortedMapIterator(tm);
  SortedKeyValueIterator<Key,Value> iter=IteratorUtil.loadIterators(IteratorScope.minc,source,new KeyExtent(new Text("tab"),null,null),conf,new DefaultIteratorEnvironment(conf));
  iter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(iter.hasTop());
  assertTrue(iter.getTopKey().equals(MultiIteratorTest.nk(2,950)));
  iter.next();
  assertFalse(iter.hasTop());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test1() throws IOException {
  ConfigurationCopy conf=new ConfigurationCopy();
  conf.set(Property.TABLE_ITERATOR_PREFIX + IteratorScope.minc.name() + ".addIter","1," + AddingIter.class.getName());
  conf.set(Property.TABLE_ITERATOR_PREFIX + IteratorScope.minc.name() + ".sqIter","2," + SquaringIter.class.getName());
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  MultiIteratorTest.nkv(tm,1,0,false,"1");
  MultiIteratorTest.nkv(tm,2,0,false,"2");
  SortedMapIterator source=new SortedMapIterator(tm);
  SortedKeyValueIterator<Key,Value> iter=IteratorUtil.loadIterators(IteratorScope.minc,source,new KeyExtent(new Text("tab"),null,null),conf,new DefaultIteratorEnvironment(conf));
  iter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(iter.hasTop());
  assertTrue(iter.getTopKey().equals(MultiIteratorTest.nk(1,0)));
  assertTrue(iter.getTopValue().toString().equals("4"));
  iter.next();
  assertTrue(iter.hasTop());
  assertTrue(iter.getTopKey().equals(MultiIteratorTest.nk(2,0)));
  assertTrue(iter.getTopValue().toString().equals("9"));
  iter.next();
  assertFalse(iter.hasTop());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test2() throws IOException {
  ConfigurationCopy conf=new ConfigurationCopy();
  conf.set(Property.TABLE_ITERATOR_PREFIX + IteratorScope.minc.name() + ".addIter","1," + AddingIter.class.getName());
  conf.set(Property.TABLE_ITERATOR_PREFIX + IteratorScope.minc.name() + ".addIter.opt.amount","7");
  conf.set(Property.TABLE_ITERATOR_PREFIX + IteratorScope.minc.name() + ".sqIter","2," + SquaringIter.class.getName());
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  MultiIteratorTest.nkv(tm,1,0,false,"1");
  MultiIteratorTest.nkv(tm,2,0,false,"2");
  SortedMapIterator source=new SortedMapIterator(tm);
  SortedKeyValueIterator<Key,Value> iter=IteratorUtil.loadIterators(IteratorScope.minc,source,new KeyExtent(new Text("tab"),null,null),conf,new DefaultIteratorEnvironment(conf));
  iter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(iter.hasTop());
  assertTrue(iter.getTopKey().equals(MultiIteratorTest.nk(1,0)));
  assertTrue(iter.getTopValue().toString().equals("64"));
  iter.next();
  assertTrue(iter.hasTop());
  assertTrue(iter.getTopKey().equals(MultiIteratorTest.nk(2,0)));
  assertTrue(iter.getTopValue().toString().equals("81"));
  iter.next();
  assertFalse(iter.hasTop());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test3() throws IOException {
  ConfigurationCopy conf=new ConfigurationCopy();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  MultiIteratorTest.nkv(tm,1,0,false,"1");
  MultiIteratorTest.nkv(tm,2,0,false,"2");
  SortedMapIterator source=new SortedMapIterator(tm);
  conf.set(Property.TABLE_ITERATOR_PREFIX + IteratorScope.minc.name() + ".addIter","2," + AddingIter.class.getName());
  conf.set(Property.TABLE_ITERATOR_PREFIX + IteratorScope.minc.name() + ".sqIter","1," + SquaringIter.class.getName());
  SortedKeyValueIterator<Key,Value> iter=IteratorUtil.loadIterators(IteratorScope.minc,source,new KeyExtent(new Text("tab"),null,null),conf,new DefaultIteratorEnvironment(conf));
  iter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(iter.hasTop());
  assertTrue(iter.getTopKey().equals(MultiIteratorTest.nk(1,0)));
  assertTrue(iter.getTopValue().toString().equals("2"));
  iter.next();
  assertTrue(iter.hasTop());
  assertTrue(iter.getTopKey().equals(MultiIteratorTest.nk(2,0)));
  assertTrue(iter.getTopValue().toString().equals("5"));
  iter.next();
  assertFalse(iter.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.aggregation.NumSummationTest </h4><pre class="type-13 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test2(){
  try {
    NumArraySummation nas=new NumArraySummation();
    long[] la={1l,2l,3l};
    nas.collect(new Value(NumArraySummation.longArrayToBytes(la)));
    long[] la2={3l,2l,1l,0l};
    nas.collect(new Value(NumArraySummation.longArrayToBytes(la2)));
    la=NumArraySummation.bytesToLongArray(nas.aggregate().get());
    assertTrue(la.length == 4);
    for (int i=0; i < la.length - 1; i++) {
      assertTrue(la[i] == 4);
    }
    assertTrue(la[la.length - 1] == 0);
    nas.reset();
    la=NumArraySummation.bytesToLongArray(nas.aggregate().get());
    assertTrue(la.length == 0);
  }
 catch (  Exception e) {
    log.error("{}",e.getMessage(),e);
    assertTrue(false);
  }
}

</code></pre>

<br>
<pre class="type-13 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test3(){
  try {
    NumArraySummation nas=new NumArraySummation();
    long[] la={Long.MAX_VALUE,Long.MIN_VALUE,3l,-5l,5l,5l};
    nas.collect(new Value(NumArraySummation.longArrayToBytes(la)));
    long[] la2={1l,-3l,2l,10l};
    nas.collect(new Value(NumArraySummation.longArrayToBytes(la2)));
    la=NumArraySummation.bytesToLongArray(nas.aggregate().get());
    assertTrue(la.length == 6);
    for (int i=2; i < la.length; i++) {
      assertTrue(la[i] == 5);
    }
    assertTrue("max long plus one was " + la[0],la[0] == Long.MAX_VALUE);
    assertTrue("min long minus 3 was " + la[1],la[1] == Long.MIN_VALUE);
  }
 catch (  Exception e) {
    assertTrue(false);
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void test4(){
  try {
    long l=5l;
    byte[] b=NumSummation.longToBytes(l);
    long l2=NumSummation.bytesToLong(b);
    assertTrue(l == l2);
  }
 catch (  Exception e) {
    assertTrue(false);
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void test1(){
  try {
    long[] la={1l,2l,3l};
    byte[] b=NumArraySummation.longArrayToBytes(la);
    long[] la2=NumArraySummation.bytesToLongArray(b);
    assertTrue(la.length == la2.length);
    for (int i=0; i < la.length; i++) {
      assertTrue(i + ": " + la[i]+ " does not equal "+ la2[i],la[i] == la2[i]);
    }
  }
 catch (  Exception e) {
    assertTrue(false);
  }
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test5(){
  try {
    NumSummation ns=new NumSummation();
    for (long l=-5l; l < 8l; l++) {
      ns.collect(new Value(NumSummation.longToBytes(l)));
    }
    long l=NumSummation.bytesToLong(ns.aggregate().get());
    assertTrue("l was " + l,l == 13);
    ns.collect(new Value(NumSummation.longToBytes(Long.MAX_VALUE)));
    l=NumSummation.bytesToLong(ns.aggregate().get());
    assertTrue("l was " + l,l == Long.MAX_VALUE);
    ns.collect(new Value(NumSummation.longToBytes(Long.MIN_VALUE)));
    l=NumSummation.bytesToLong(ns.aggregate().get());
    assertTrue("l was " + l,l == -1);
    ns.collect(new Value(NumSummation.longToBytes(Long.MIN_VALUE)));
    l=NumSummation.bytesToLong(ns.aggregate().get());
    assertTrue("l was " + l,l == Long.MIN_VALUE);
    ns.collect(new Value(NumSummation.longToBytes(Long.MIN_VALUE)));
    l=NumSummation.bytesToLong(ns.aggregate().get());
    assertTrue("l was " + l,l == Long.MIN_VALUE);
    ns.reset();
    l=NumSummation.bytesToLong(ns.aggregate().get());
    assertTrue("l was " + l,l == 0);
  }
 catch (  IOException|RuntimeException e) {
    fail();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.system.TimeSettingIteratorTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAvoidKeyCopy() throws Exception {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  final Key k=new Key("r0","cf1","cq1",9l);
  tm1.put(k,new Value("v0".getBytes()));
  TimeSettingIterator tsi=new TimeSettingIterator(new SortedMapIterator(tm1),50);
  tsi.seek(new Range(),new HashSet<ByteSequence>(),false);
  assertTrue(tsi.hasTop());
  final Key topKey=tsi.getTopKey();
  assertTrue("Expected the topKey to be the same object",k == topKey);
  assertEquals(new Key("r0","cf1","cq1",50l),topKey);
  assertEquals("v0",tsi.getTopValue().toString());
  tsi.next();
  assertFalse(tsi.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1() throws Exception {
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  tm1.put(new Key("r0","cf1","cq1",9l),new Value("v0".getBytes()));
  tm1.put(new Key("r1","cf1","cq1",Long.MAX_VALUE),new Value("v1".getBytes()));
  tm1.put(new Key("r1","cf1","cq1",90l),new Value("v2".getBytes()));
  tm1.put(new Key("r1","cf1","cq1",0l),new Value("v3".getBytes()));
  tm1.put(new Key("r2","cf1","cq1",6l),new Value("v4".getBytes()));
  TimeSettingIterator tsi=new TimeSettingIterator(new SortedMapIterator(tm1),50);
  tsi.seek(new Range(new Key("r1","cf1","cq1",50l),true,new Key("r1","cf1","cq1",50l),true),new HashSet<ByteSequence>(),false);
  assertTrue(tsi.hasTop());
  assertEquals(new Key("r1","cf1","cq1",50l),tsi.getTopKey());
  assertEquals("v1",tsi.getTopValue().toString());
  tsi.next();
  assertTrue(tsi.hasTop());
  assertEquals(new Key("r1","cf1","cq1",50l),tsi.getTopKey());
  assertEquals("v2",tsi.getTopValue().toString());
  tsi.next();
  assertTrue(tsi.hasTop());
  assertEquals(new Key("r1","cf1","cq1",50l),tsi.getTopKey());
  assertEquals("v3",tsi.getTopValue().toString());
  tsi.next();
  assertFalse(tsi.hasTop());
  tsi.seek(new Range(new Key("r1","cf1","cq1",50l),false,null,true),new HashSet<ByteSequence>(),false);
  assertTrue(tsi.hasTop());
  assertEquals(new Key("r2","cf1","cq1",50l),tsi.getTopKey());
  assertEquals("v4",tsi.getTopValue().toString());
  tsi.next();
  assertFalse(tsi.hasTop());
  tsi.seek(new Range(null,true,new Key("r1","cf1","cq1",50l),false),new HashSet<ByteSequence>(),false);
  assertTrue(tsi.hasTop());
  assertEquals(new Key("r0","cf1","cq1",50l),tsi.getTopKey());
  assertEquals("v0",tsi.getTopValue().toString());
  tsi.next();
  assertFalse(tsi.hasTop());
  tsi.seek(new Range(new Key("r1","cf1","cq1",51l),true,new Key("r1","cf1","cq1",50l),false),new HashSet<ByteSequence>(),false);
  assertFalse(tsi.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.BigDecimalCombinerTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMin() throws IOException {
  ai=new BigDecimalCombiner.BigDecimalMinCombiner();
  IteratorSetting is=new IteratorSetting(1,BigDecimalCombiner.BigDecimalMinCombiner.class);
  Combiner.setColumns(is,columns);
  ai.init(new SortedMapIterator(tm1),is.getOptions(),CombinerTest.SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(CombinerTest.nk(1,1,1,3),ai.getTopKey());
  assertEquals(-14.0,encoder.decode(ai.getTopValue().get()).doubleValue(),delta);
  verify();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSums() throws IOException {
  ai=new BigDecimalCombiner.BigDecimalSummingCombiner();
  IteratorSetting is=new IteratorSetting(1,BigDecimalCombiner.BigDecimalSummingCombiner.class);
  Combiner.setColumns(is,columns);
  ai.init(new SortedMapIterator(tm1),is.getOptions(),CombinerTest.SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(CombinerTest.nk(1,1,1,3),ai.getTopKey());
  assertEquals(-9.7,encoder.decode(ai.getTopValue().get()).doubleValue(),delta);
  verify();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMax() throws IOException {
  ai=new BigDecimalCombiner.BigDecimalMaxCombiner();
  IteratorSetting is=new IteratorSetting(1,BigDecimalCombiner.BigDecimalMaxCombiner.class);
  Combiner.setColumns(is,columns);
  ai.init(new SortedMapIterator(tm1),is.getOptions(),CombinerTest.SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(CombinerTest.nk(1,1,1,3),ai.getTopKey());
  assertEquals(2.3,encoder.decode(ai.getTopValue().get()).doubleValue(),delta);
  verify();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.ColumnSliceFilterTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBothExclusive() throws IOException {
  ColumnSliceFilter.setSlice(is,"20080202",false,"20080204",false);
  columnSliceFilter.validateOptions(is.getOptions());
  columnSliceFilter.init(new SortedMapIterator(TEST_DATA),is.getOptions(),iteratorEnvironment);
  columnSliceFilter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_3));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_6));
  columnSliceFilter.next();
  assertFalse(columnSliceFilter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testStartExclusiveEndInclusive() throws IOException {
  ColumnSliceFilter.setSlice(is,"20080202",false,"20080204",true);
  columnSliceFilter.validateOptions(is.getOptions());
  columnSliceFilter.init(new SortedMapIterator(TEST_DATA),is.getOptions(),iteratorEnvironment);
  columnSliceFilter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_3));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_6));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_4));
  columnSliceFilter.next();
  assertFalse(columnSliceFilter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testStartEqualToEndBothInclusive() throws IOException {
  ColumnSliceFilter.setSlice(is,"20080202",true,"20080202",true);
  columnSliceFilter.validateOptions(is.getOptions());
  columnSliceFilter.init(new SortedMapIterator(TEST_DATA),is.getOptions(),iteratorEnvironment);
  columnSliceFilter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_2));
  columnSliceFilter.next();
  assertFalse(columnSliceFilter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBothNull() throws IOException {
  ColumnSliceFilter.setSlice(is,null,null);
  columnSliceFilter.validateOptions(is.getOptions());
  columnSliceFilter.init(new SortedMapIterator(TEST_DATA),is.getOptions(),iteratorEnvironment);
  columnSliceFilter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_2));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_1));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_3));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_6));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_4));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_5));
  columnSliceFilter.next();
  assertFalse(columnSliceFilter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBasic() throws IOException {
  ColumnSliceFilter.setSlice(is,"20080202","20080204");
  assertTrue(columnSliceFilter.validateOptions(is.getOptions()));
  columnSliceFilter.init(new SortedMapIterator(TEST_DATA),is.getOptions(),iteratorEnvironment);
  columnSliceFilter.seek(new Range(),EMPTY_COL_FAMS,true);
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_2));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_3));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_6));
  columnSliceFilter.next();
  assertFalse(columnSliceFilter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBothInclusive() throws IOException {
  ColumnSliceFilter.setSlice(is,"20080202",true,"20080204",true);
  columnSliceFilter.validateOptions(is.getOptions());
  columnSliceFilter.init(new SortedMapIterator(TEST_DATA),is.getOptions(),iteratorEnvironment);
  columnSliceFilter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_2));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_3));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_6));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_4));
  columnSliceFilter.next();
  assertFalse(columnSliceFilter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNullEnd() throws IOException {
  ColumnSliceFilter.setSlice(is,"20080202",null);
  columnSliceFilter.validateOptions(is.getOptions());
  columnSliceFilter.init(new SortedMapIterator(TEST_DATA),is.getOptions(),iteratorEnvironment);
  columnSliceFilter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_2));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_3));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_6));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_4));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_5));
  columnSliceFilter.next();
  assertFalse(columnSliceFilter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNullStart() throws IOException {
  ColumnSliceFilter.setSlice(is,null,"20080204");
  columnSliceFilter.validateOptions(is.getOptions());
  columnSliceFilter.init(new SortedMapIterator(TEST_DATA),is.getOptions(),iteratorEnvironment);
  columnSliceFilter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_2));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_1));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_3));
  columnSliceFilter.next();
  assertTrue(columnSliceFilter.hasTop());
  assertTrue(columnSliceFilter.getTopKey().equals(KEY_6));
  columnSliceFilter.next();
  assertFalse(columnSliceFilter.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.CombinerTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void sumAllColumns() throws IOException {
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  tm.put(new Key("r","count","a",1),new Value("1".getBytes()));
  tm.put(new Key("r","count","a",2),new Value("1".getBytes()));
  tm.put(new Key("r","count","b",3),new Value("1".getBytes()));
  tm.put(new Key("r","count","b",4),new Value("1".getBytes()));
  tm.put(new Key("r","count","b",5),new Value("1".getBytes()));
  tm.put(new Key("r","count","c",6),new Value("1".getBytes()));
  SortedMapIterator smi=new SortedMapIterator(tm);
  Combiner iter=new SummingCombiner();
  IteratorSetting s=new IteratorSetting(10,"s",SummingCombiner.class);
  SummingCombiner.setColumns(s,Collections.singletonList(new IteratorSetting.Column("count")));
  SummingCombiner.setEncodingType(s,LongCombiner.StringEncoder.class);
  iter.init(smi,s.getOptions(),SCAN_IE);
  Combiner iter2=new SummingCombiner();
  IteratorSetting s2=new IteratorSetting(10,"s2",SummingCombiner.class);
  SummingCombiner.setColumns(s2,Collections.singletonList(new IteratorSetting.Column("count","a")));
  SummingCombiner.setEncodingType(s2,LongCombiner.StringEncoder.class);
  iter2.init(iter,s.getOptions(),SCAN_IE);
  iter2.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(iter2.hasTop());
  assertEquals("2",iter2.getTopValue().toString());
  iter2.next();
  assertTrue(iter2.hasTop());
  assertEquals("3",iter2.getTopValue().toString());
  iter2.next();
  assertTrue(iter2.hasTop());
  assertEquals("1",iter2.getTopValue().toString());
  iter2.next();
  assertFalse(iter2.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test7() throws IOException {
  Encoder<Long> encoder=LongCombiner.FIXED_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,2,true,0l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  nkv(tm1,1,1,1,4,false,3l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,SummingCombiner.Type.FIXEDLEN);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(nr(1,1,1,4,true),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,4),ai.getTopKey());
  assertEquals("7",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2,true),ai.getTopKey());
  assertEquals("0",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,2,true,0l,encoder);
  ai=new SummingCombiner();
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(nr(1,1,1,4,true),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2,true),ai.getTopKey());
  assertEquals("0",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test3() throws IOException {
  Encoder<Long> encoder=LongCombiner.FIXED_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,2l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  nkv(tm1,2,2,1,1,false,2l,encoder);
  nkv(tm1,2,2,1,2,false,3l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,FixedLenEncoder.class.getName());
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,1),ai.getTopKey());
  assertEquals("2",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.seek(nr(1,1,1,4),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test4() throws IOException {
  Encoder<Long> encoder=LongCombiner.STRING_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,0,0,1,1,false,7l,encoder);
  nkv(tm1,1,1,1,1,false,2l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  nkv(tm1,2,2,1,1,false,2l,encoder);
  nkv(tm1,2,2,1,2,false,3l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,SummingCombiner.Type.STRING);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(0,0,1,1),ai.getTopKey());
  assertEquals("7",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,1),ai.getTopKey());
  assertEquals("2",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(0,0,1,0),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,SummingCombiner.Type.STRING);
  Combiner.setCombineAllColumns(is,true);
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(0,0,1,1),ai.getTopKey());
  assertEquals("7",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("5",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1() throws IOException {
  Encoder<Long> encoder=LongCombiner.VAR_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,2l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,SummingCombiner.Type.VARLEN);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("2")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("4",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,1),ai.getTopKey());
  assertEquals("2",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,1),ai.getTopKey());
  assertEquals("2",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,0),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeepCopy() throws IOException {
  Encoder<Long> encoder=LongCombiner.FIXED_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,2l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  nkv(tm1,2,2,1,1,false,2l,encoder);
  nkv(tm1,2,2,1,2,false,3l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,FixedLenEncoder.class.getName());
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  SortedKeyValueIterator<Key,Value> ai2=ai.deepCopy(null);
  SortedKeyValueIterator<Key,Value> ai3=ai.deepCopy(null);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,2),ai.getTopKey());
  assertEquals("3",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertTrue(ai.hasTop());
  assertEquals(nk(2,2,1,1),ai.getTopKey());
  assertEquals("2",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai2.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertTrue(ai2.hasTop());
  assertEquals(nk(2,2,1,2),ai2.getTopKey());
  assertEquals("3",encoder.decode(ai2.getTopValue().get()).toString());
  ai3.seek(nr(1,1,1,4),EMPTY_COL_FAMS,false);
  assertTrue(ai3.hasTop());
  assertEquals(nk(1,1,1,3),ai3.getTopKey());
  assertEquals("9",encoder.decode(ai3.getTopValue().get()).toString());
  ai3.next();
  assertTrue(ai3.hasTop());
  assertEquals(nk(2,2,1,2),ai3.getTopKey());
  assertEquals("3",encoder.decode(ai3.getTopValue().get()).toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test5() throws IOException {
  Encoder<Long> encoder=LongCombiner.STRING_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,2l,encoder);
  TreeMap<Key,Value> tm2=new TreeMap<Key,Value>();
  nkv(tm2,1,1,1,1,false,3l,encoder);
  TreeMap<Key,Value> tm3=new TreeMap<Key,Value>();
  nkv(tm3,1,1,1,1,false,4l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,StringEncoder.class);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  List<SortedKeyValueIterator<Key,Value>> sources=new ArrayList<SortedKeyValueIterator<Key,Value>>(3);
  sources.add(new SortedMapIterator(tm1));
  sources.add(new SortedMapIterator(tm2));
  sources.add(new SortedMapIterator(tm3));
  MultiIterator mi=new MultiIterator(sources,true);
  ai.init(mi,is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,1),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void maxMinTest() throws IOException {
  Encoder<Long> encoder=LongCombiner.VAR_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,4l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,2l,encoder);
  Combiner ai=new MaxCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,SummingCombiner.Type.VARLEN);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("4",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai=new MinCombiner();
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("2",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void valueIteratorTest() throws IOException {
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  tm.put(new Key("r","f","q",1),new Value("1".getBytes()));
  tm.put(new Key("r","f","q",2),new Value("2".getBytes()));
  SortedMapIterator smi=new SortedMapIterator(tm);
  smi.seek(new Range(),EMPTY_COL_FAMS,false);
  ValueIterator iter=new ValueIterator(smi);
  assertEquals(iter.next().toString(),"2");
  assertEquals(iter.next().toString(),"1");
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test6() throws IOException {
  Encoder<Long> encoder=LongCombiner.VAR_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,2l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,VarLenEncoder.class.getName());
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(nr(1,1,1,3,false),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2() throws IOException {
  Encoder<Long> encoder=LongCombiner.VAR_LEN_ENCODER;
  TreeMap<Key,Value> tm1=new TreeMap<Key,Value>();
  nkv(tm1,1,1,1,1,false,2l,encoder);
  nkv(tm1,1,1,1,2,false,3l,encoder);
  nkv(tm1,1,1,1,3,false,4l,encoder);
  Combiner ai=new SummingCombiner();
  IteratorSetting is=new IteratorSetting(1,SummingCombiner.class);
  LongCombiner.setEncodingType(is,VarLenEncoder.class);
  Combiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("cf001")));
  ai.init(new SortedMapIterator(tm1),is.getOptions(),SCAN_IE);
  ai.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,3),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,2),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,1),EMPTY_COL_FAMS,false);
  assertFalse(ai.hasTop());
  ai.seek(nr(1,1,1,4),EMPTY_COL_FAMS,false);
  assertTrue(ai.hasTop());
  assertEquals(nk(1,1,1,3),ai.getTopKey());
  assertEquals("9",encoder.decode(ai.getTopValue().get()).toString());
  ai.next();
  assertFalse(ai.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.FilterTest </h4><pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test4() throws IOException {
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  ColumnVisibility le1=new ColumnVisibility("L1");
  ColumnVisibility le2=new ColumnVisibility("L0&OFFICIAL");
  ColumnVisibility le3=new ColumnVisibility("L1&L2");
  ColumnVisibility le4=new ColumnVisibility("L1&L2&G1");
  ColumnVisibility[] lea={le1,le2,le3,le4};
  Authorizations auths=new Authorizations("L1","L2","L0","OFFICIAL");
  for (int i=0; i < 1000; i++) {
    Key k=new Key(new Text(String.format("%03d",i)),new Text("a"),new Text("b"),new Text(lea[i % 4].getExpression()));
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 1000);
  VisibilityFilter a=new VisibilityFilter(new SortedMapIterator(tm),auths,le2.getExpression());
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  int size=size(a);
  assertTrue("size was " + size,size == 750);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNoVisFilter() throws IOException {
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  Value v=new Value();
  for (int i=0; i < 1000; i++) {
    Key k=new Key(String.format("%03d",i),"a","b",i % 10 == 0 ? "vis" : "");
    tm.put(k,v);
  }
  assertTrue(tm.size() == 1000);
  Filter filter=new ReqVisFilter();
  filter.init(new SortedMapIterator(tm),EMPTY_OPTS,null);
  filter.seek(new Range(),EMPTY_COL_FAMS,false);
  int size=size(filter);
  assertTrue("size = " + size,size == 100);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test3() throws IOException {
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  HashSet<Column> hsc=new HashSet<Column>();
  hsc.add(new Column("c".getBytes(),null,null));
  Text colf1=new Text("a");
  Text colq1=new Text("b");
  Text colf2=new Text("c");
  Text colq2=new Text("d");
  Text colf;
  Text colq;
  for (int i=0; i < 1000; i++) {
    if (Math.abs(Math.ceil(i / 2.0) - i / 2.0) < .001) {
      colf=colf1;
      colq=colq1;
    }
 else {
      colf=colf2;
      colq=colq2;
    }
    Key k=new Key(new Text(String.format("%03d",i)),colf,colq);
    k.setTimestamp(157l);
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 1000);
  ColumnQualifierFilter a=new ColumnQualifierFilter(new SortedMapIterator(tm),hsc);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),1000);
  hsc=new HashSet<Column>();
  hsc.add(new Column("a".getBytes(),"b".getBytes(),null));
  a=new ColumnQualifierFilter(new SortedMapIterator(tm),hsc);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  int size=size(a);
  assertTrue("size was " + size,size == 500);
  hsc=new HashSet<Column>();
  a=new ColumnQualifierFilter(new SortedMapIterator(tm),hsc);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  size=size(a);
  assertTrue("size was " + size,size == 1000);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test1() throws IOException {
  Text colf=new Text("a");
  Text colq=new Text("b");
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  for (int i=0; i < 1000; i++) {
    Key k=new Key(new Text(String.format("%03d",i)),colf,colq);
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 1000);
  Filter filter1=new SimpleFilter();
  filter1.init(new SortedMapIterator(tm),EMPTY_OPTS,null);
  filter1.seek(new Range(),EMPTY_COL_FAMS,false);
  int size=size(filter1);
  assertTrue("size = " + size,size == 100);
  Filter fi=new SimpleFilter();
  fi.init(new SortedMapIterator(tm),EMPTY_OPTS,null);
  Key k=new Key(new Text("500"));
  fi.seek(new Range(k,null),EMPTY_COL_FAMS,false);
  size=size(fi);
  assertTrue("size = " + size,size == 50);
  filter1=new SimpleFilter();
  filter1.init(new SortedMapIterator(tm),EMPTY_OPTS,null);
  Filter filter2=new SimpleFilter2();
  filter2.init(filter1,EMPTY_OPTS,null);
  filter2.seek(new Range(),EMPTY_COL_FAMS,false);
  size=size(filter2);
  assertTrue("size = " + size,size == 0);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeepCopy() throws IOException {
  Text colf=new Text("a");
  Text colq=new Text("b");
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  for (int i=0; i < 1000; i++) {
    Key k=new Key(new Text(String.format("%03d",i)),colf,colq);
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 1000);
  SimpleFilter filter=new SimpleFilter();
  IteratorSetting is=new IteratorSetting(1,SimpleFilter.class);
  Filter.setNegate(is,true);
  filter.init(new SortedMapIterator(tm),is.getOptions(),null);
  SortedKeyValueIterator<Key,Value> copy=filter.deepCopy(null);
  filter.seek(new Range(),EMPTY_COL_FAMS,false);
  int size=size(filter);
  assertTrue("size = " + size,size == 900);
  copy.seek(new Range(),EMPTY_COL_FAMS,false);
  size=size(copy);
  assertTrue("size = " + size,size == 900);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimestampFilter() throws IOException, ParseException {
  Text colf=new Text("a");
  Text colq=new Text("b");
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  for (int i=0; i < 100; i++) {
    Key k=new Key(new Text(String.format("%02d",i)),colf,colq);
    k.setTimestamp(i);
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 100);
  SimpleDateFormat dateParser=new SimpleDateFormat("yyyyMMddHHmmssz");
  long baseTime=dateParser.parse("19990101000000GMT").getTime();
  tm.clear();
  for (int i=0; i < 100; i++) {
    Key k=new Key(new Text(String.format("%02d",i)),colf,colq);
    k.setTimestamp(baseTime + (i * 1000));
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 100);
  TimestampFilter a=new TimestampFilter();
  IteratorSetting is=new IteratorSetting(1,TimestampFilter.class);
  TimestampFilter.setRange(is,"19990101010011GMT+01:00","19990101010031GMT+01:00");
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a=(TimestampFilter)a.deepCopy(null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),21);
  TimestampFilter.setRange(is,baseTime + 11000,baseTime + 31000);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),21);
  TimestampFilter.setEnd(is,"19990101000031GMT",false);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),20);
  TimestampFilter.setStart(is,"19990101000011GMT",false);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),19);
  TimestampFilter.setEnd(is,"19990101000031GMT",true);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),20);
  is.clearOptions();
  TimestampFilter.setStart(is,"19990101000011GMT",true);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),89);
  TimestampFilter.setStart(is,"19990101000011GMT",false);
  assertTrue(a.validateOptions(is.getOptions()));
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),88);
  is.clearOptions();
  TimestampFilter.setEnd(is,"19990101000031GMT",true);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),32);
  TimestampFilter.setEnd(is,"19990101000031GMT",false);
  assertTrue(a.validateOptions(is.getOptions()));
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),31);
  TimestampFilter.setEnd(is,253402300800001l,true);
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  is.clearOptions();
  is.addOption(TimestampFilter.START,"19990101000011GMT");
  assertTrue(a.validateOptions(is.getOptions()));
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),89);
  is.clearOptions();
  is.addOption(TimestampFilter.END,"19990101000031GMT");
  assertTrue(a.validateOptions(is.getOptions()));
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),32);
  try {
    a.validateOptions(EMPTY_OPTS);
    assertTrue(false);
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2a() throws IOException {
  Text colf=new Text("a");
  Text colq=new Text("b");
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  IteratorSetting is=new IteratorSetting(1,ColumnAgeOffFilter.class);
  ColumnAgeOffFilter.addTTL(is,new IteratorSetting.Column("a"),901l);
  long ts=System.currentTimeMillis();
  for (long i=0; i < 1000; i++) {
    Key k=new Key(new Text(String.format("%03d",i)),colf,colq,ts - i);
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 1000);
  ColumnAgeOffFilter a=new ColumnAgeOffFilter();
  assertTrue(a.validateOptions(is.getOptions()));
  a.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  a.overrideCurrentTime(ts);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),902);
  ColumnAgeOffFilter.addTTL(is,new IteratorSetting.Column("a","b"),101l);
  a.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  a.overrideCurrentTime(ts);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),102);
  ColumnAgeOffFilter.removeTTL(is,new IteratorSetting.Column("a","b"));
  a.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  a=(ColumnAgeOffFilter)a.deepCopy(null);
  a.overrideCurrentTime(ts);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),902);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2() throws IOException {
  Text colf=new Text("a");
  Text colq=new Text("b");
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  for (int i=0; i < 1000; i++) {
    Key k=new Key(new Text(String.format("%03d",i)),colf,colq);
    k.setTimestamp(i);
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 1000);
  SortedKeyValueIterator<Key,Value> a=new AgeOffFilter();
  IteratorSetting is=new IteratorSetting(1,AgeOffFilter.class);
  AgeOffFilter.setTTL(is,101l);
  AgeOffFilter.setCurrentTime(is,1001l);
  AgeOffFilter.setNegate(is,true);
  assertTrue(((AgeOffFilter)a).validateOptions(is.getOptions()));
  try {
    ((AgeOffFilter)a).validateOptions(EMPTY_OPTS);
    assertTrue(false);
  }
 catch (  IllegalArgumentException e) {
  }
  a.init(new SortedMapIterator(tm),is.getOptions(),null);
  a=a.deepCopy(null);
  SortedKeyValueIterator<Key,Value> copy=a.deepCopy(null);
  a.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(a),900);
  copy.seek(new Range(),EMPTY_COL_FAMS,false);
  assertEquals(size(copy),900);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test1neg() throws IOException {
  Text colf=new Text("a");
  Text colq=new Text("b");
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  for (int i=0; i < 1000; i++) {
    Key k=new Key(new Text(String.format("%03d",i)),colf,colq);
    tm.put(k,dv);
  }
  assertTrue(tm.size() == 1000);
  Filter filter=new SimpleFilter();
  IteratorSetting is=new IteratorSetting(1,SimpleFilter.class);
  Filter.setNegate(is,true);
  filter.init(new SortedMapIterator(tm),is.getOptions(),null);
  filter.seek(new Range(),EMPTY_COL_FAMS,false);
  int size=size(filter);
  assertTrue("size = " + size,size == 900);
  filter.init(new SortedMapIterator(tm),is.getOptions(),null);
  Key k=new Key(new Text("500"));
  filter.seek(new Range(k,null),EMPTY_COL_FAMS,false);
  size=size(filter);
  assertTrue("size = " + size,size == 450);
  filter.init(new SortedMapIterator(tm),EMPTY_OPTS,null);
  Filter filter2=new SimpleFilter2();
  filter2.init(filter,is.getOptions(),null);
  filter2.seek(new Range(),EMPTY_COL_FAMS,false);
  size=size(filter2);
  assertTrue("size = " + size,size == 100);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDeletes() throws IOException {
  Text colf=new Text("a");
  Text colq=new Text("b");
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  Key k=new Key(new Text("0"),colf,colq);
  tm.put(k,dv);
  k=new Key(new Text("1"),colf,colq,10);
  k.setDeleted(true);
  tm.put(k,dv);
  k=new Key(new Text("1"),colf,colq,5);
  tm.put(k,dv);
  k=new Key(new Text("10"),colf,colq);
  tm.put(k,dv);
  assertTrue(tm.size() == 4);
  Filter filter=new SimpleFilter();
  filter.init(new SortedMapIterator(tm),EMPTY_OPTS,null);
  filter.seek(new Range(),EMPTY_COL_FAMS,false);
  int size=size(filter);
  assertTrue("size = " + size,size == 3);
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void test5() throws IOException {
  Value dv=new Value();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  tm.put(new Key(new Text(String.format("%03d",1)),new Text("a"),new Text("x")),dv);
  tm.put(new Key(new Text(String.format("%03d",2)),new Text("a"),new Text("y")),dv);
  tm.put(new Key(new Text(String.format("%03d",3)),new Text("a"),new Text("z")),dv);
  tm.put(new Key(new Text(String.format("%03d",4)),new Text("b"),new Text("x")),dv);
  tm.put(new Key(new Text(String.format("%03d",5)),new Text("b"),new Text("y")),dv);
  assertTrue(tm.size() == 5);
  int size=size(ncqf(tm,new Column("c".getBytes(),null,null)));
  assertTrue(size == 5);
  size=size(ncqf(tm,new Column("a".getBytes(),null,null)));
  assertTrue(size == 5);
  size=size(ncqf(tm,new Column("a".getBytes(),"x".getBytes(),null)));
  assertTrue(size == 1);
  size=size(ncqf(tm,new Column("a".getBytes(),"x".getBytes(),null),new Column("b".getBytes(),"x".getBytes(),null)));
  assertTrue(size == 2);
  size=size(ncqf(tm,new Column("a".getBytes(),"x".getBytes(),null),new Column("b".getBytes(),"y".getBytes(),null)));
  assertTrue(size == 2);
  size=size(ncqf(tm,new Column("a".getBytes(),"x".getBytes(),null),new Column("b".getBytes(),null,null)));
  assertTrue(size == 3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.IntersectingIteratorTest </h4><pre class="type-13 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test2() throws IOException {
  columnFamilies=new Text[3];
  columnFamilies[0]=new Text("A");
  columnFamilies[1]=new Text("E");
  columnFamilies[2]=new Text("G");
  otherColumnFamilies=new Text[4];
  otherColumnFamilies[0]=new Text("B");
  otherColumnFamilies[1]=new Text("C");
  otherColumnFamilies[2]=new Text("D");
  otherColumnFamilies[3]=new Text("F");
  float hitRatio=0.5f;
  SortedKeyValueIterator<Key,Value> source=createIteratorStack(hitRatio,NUM_ROWS,NUM_DOCIDS,columnFamilies,otherColumnFamilies,docs);
  IteratorSetting is=new IteratorSetting(1,IntersectingIterator.class);
  IntersectingIterator.setColumnFamilies(is,columnFamilies);
  IntersectingIterator iter=new IntersectingIterator();
  iter.init(source,is.getOptions(),env);
  iter.seek(new Range(),EMPTY_COL_FAMS,false);
  int hitCount=0;
  while (iter.hasTop()) {
    hitCount++;
    Key k=iter.getTopKey();
    assertTrue(docs.contains(k.getColumnQualifier()));
    iter.next();
  }
  assertTrue(hitCount == docs.size());
  cleanup();
}

</code></pre>

<br>
<pre class="type-13 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test6() throws IOException {
  columnFamilies=new Text[1];
  columnFamilies[0]=new Text("C");
  otherColumnFamilies=new Text[4];
  otherColumnFamilies[0]=new Text("A");
  otherColumnFamilies[1]=new Text("B");
  otherColumnFamilies[2]=new Text("D");
  otherColumnFamilies[3]=new Text("F");
  float hitRatio=0.5f;
  SortedKeyValueIterator<Key,Value> source=createIteratorStack(hitRatio,NUM_ROWS,NUM_DOCIDS,columnFamilies,otherColumnFamilies,docs);
  IteratorSetting is=new IteratorSetting(1,IntersectingIterator.class);
  IntersectingIterator.setColumnFamilies(is,columnFamilies);
  IntersectingIterator iter=new IntersectingIterator();
  iter.init(source,is.getOptions(),env);
  iter.seek(new Range(),EMPTY_COL_FAMS,false);
  int hitCount=0;
  while (iter.hasTop()) {
    hitCount++;
    Key k=iter.getTopKey();
    assertTrue(docs.contains(k.getColumnQualifier()));
    iter.next();
  }
  assertTrue(hitCount == docs.size());
  cleanup();
}

</code></pre>

<br>
<pre class="type-13 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test3() throws IOException {
  columnFamilies=new Text[6];
  columnFamilies[0]=new Text("C");
  columnFamilies[1]=new Text("E");
  columnFamilies[2]=new Text("G");
  columnFamilies[3]=new Text("H");
  columnFamilies[4]=new Text("I");
  columnFamilies[5]=new Text("J");
  otherColumnFamilies=new Text[4];
  otherColumnFamilies[0]=new Text("A");
  otherColumnFamilies[1]=new Text("B");
  otherColumnFamilies[2]=new Text("D");
  otherColumnFamilies[3]=new Text("F");
  float hitRatio=0.5f;
  SortedKeyValueIterator<Key,Value> source=createIteratorStack(hitRatio,NUM_ROWS,NUM_DOCIDS,columnFamilies,otherColumnFamilies,docs);
  SortedKeyValueIterator<Key,Value> source2=createIteratorStack(hitRatio,NUM_ROWS,NUM_DOCIDS,columnFamilies,otherColumnFamilies,docs);
  ArrayList<SortedKeyValueIterator<Key,Value>> sourceIters=new ArrayList<SortedKeyValueIterator<Key,Value>>();
  sourceIters.add(source);
  sourceIters.add(source2);
  MultiIterator mi=new MultiIterator(sourceIters,false);
  IteratorSetting is=new IteratorSetting(1,IntersectingIterator.class);
  IntersectingIterator.setColumnFamilies(is,columnFamilies);
  IntersectingIterator iter=new IntersectingIterator();
  iter.init(mi,is.getOptions(),env);
  iter.seek(new Range(),EMPTY_COL_FAMS,false);
  int hitCount=0;
  while (iter.hasTop()) {
    hitCount++;
    Key k=iter.getTopKey();
    assertTrue(docs.contains(k.getColumnQualifier()));
    iter.next();
  }
  assertTrue(hitCount == docs.size());
  cleanup();
}

</code></pre>

<br>
<pre class="type-13 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test4() throws IOException {
  columnFamilies=new Text[3];
  notFlags=new boolean[3];
  columnFamilies[0]=new Text("A");
  notFlags[0]=true;
  columnFamilies[1]=new Text("E");
  notFlags[1]=false;
  columnFamilies[2]=new Text("G");
  notFlags[2]=true;
  negatedColumns=new Text[2];
  negatedColumns[0]=new Text("A");
  negatedColumns[1]=new Text("G");
  otherColumnFamilies=new Text[4];
  otherColumnFamilies[0]=new Text("B");
  otherColumnFamilies[1]=new Text("C");
  otherColumnFamilies[2]=new Text("D");
  otherColumnFamilies[3]=new Text("F");
  float hitRatio=0.5f;
  SortedKeyValueIterator<Key,Value> source=createIteratorStack(hitRatio,NUM_ROWS,NUM_DOCIDS,columnFamilies,otherColumnFamilies,docs,negatedColumns);
  IteratorSetting is=new IteratorSetting(1,IntersectingIterator.class);
  IntersectingIterator.setColumnFamilies(is,columnFamilies,notFlags);
  IntersectingIterator iter=new IntersectingIterator();
  iter.init(source,is.getOptions(),env);
  iter.seek(new Range(),EMPTY_COL_FAMS,false);
  int hitCount=0;
  while (iter.hasTop()) {
    hitCount++;
    Key k=iter.getTopKey();
    assertTrue(docs.contains(k.getColumnQualifier()));
    iter.next();
  }
  assertTrue(hitCount == docs.size());
  cleanup();
}

</code></pre>

<br>
<pre class="type-13 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test1() throws IOException {
  columnFamilies=new Text[2];
  columnFamilies[0]=new Text("C");
  columnFamilies[1]=new Text("E");
  otherColumnFamilies=new Text[4];
  otherColumnFamilies[0]=new Text("A");
  otherColumnFamilies[1]=new Text("B");
  otherColumnFamilies[2]=new Text("D");
  otherColumnFamilies[3]=new Text("F");
  float hitRatio=0.5f;
  SortedKeyValueIterator<Key,Value> source=createIteratorStack(hitRatio,NUM_ROWS,NUM_DOCIDS,columnFamilies,otherColumnFamilies,docs);
  IteratorSetting is=new IteratorSetting(1,IntersectingIterator.class);
  IntersectingIterator.setColumnFamilies(is,columnFamilies);
  IntersectingIterator iter=new IntersectingIterator();
  iter.init(source,is.getOptions(),env);
  iter.seek(new Range(),EMPTY_COL_FAMS,false);
  int hitCount=0;
  while (iter.hasTop()) {
    hitCount++;
    Key k=iter.getTopKey();
    assertTrue(docs.contains(k.getColumnQualifier()));
    iter.next();
  }
  assertTrue(hitCount == docs.size());
  cleanup();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.RegExFilterTest </h4><pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test1() throws IOException {
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  Key k1=nkv(tm,"boo1","yup","20080201","dog");
  Key k2=nkv(tm,"boo1","yap","20080202","cat");
  Key k3=nkv(tm,"boo2","yip","20080203","hamster");
  RegExFilter rei=new RegExFilter();
  rei.describeOptions();
  IteratorSetting is=new IteratorSetting(1,RegExFilter.class);
  RegExFilter.setRegexs(is,".*2",null,null,null,false);
  assertTrue(rei.validateOptions(is.getOptions()));
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k3));
  rei.next();
  assertFalse(rei.hasTop());
  is.clearOptions();
  RegExFilter.setRegexs(is,null,null,null,"amst",false,true);
  rei.validateOptions(is.getOptions());
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k3));
  rei.next();
  assertFalse(rei.hasTop());
  is.clearOptions();
  RegExFilter.setRegexs(is,null,"ya.*",null,null,false);
  assertTrue(rei.validateOptions(is.getOptions()));
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k2));
  rei.next();
  assertFalse(rei.hasTop());
  is.clearOptions();
  RegExFilter.setRegexs(is,null,null,".*01",null,false);
  assertTrue(rei.validateOptions(is.getOptions()));
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k1));
  rei.next();
  assertFalse(rei.hasTop());
  is.clearOptions();
  RegExFilter.setRegexs(is,null,null,null,".*at",false);
  assertTrue(rei.validateOptions(is.getOptions()));
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k2));
  rei.next();
  assertFalse(rei.hasTop());
  is.clearOptions();
  RegExFilter.setRegexs(is,null,null,null,".*ap",false);
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertFalse(rei.hasTop());
  is.clearOptions();
  RegExFilter.setRegexs(is,null,"ya.*",null,".*at",false);
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k2));
  rei.next();
  assertFalse(rei.hasTop());
  is.clearOptions();
  RegExFilter.setRegexs(is,null,"ya.*",null,".*ap",false);
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertFalse(rei.hasTop());
  is.clearOptions();
  RegExFilter.setRegexs(is,"boo1",null,null,null,false);
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k2));
  rei.next();
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k1));
  rei.next();
  assertFalse(rei.hasTop());
  is.clearOptions();
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k2));
  rei.next();
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k1));
  rei.next();
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k3));
  rei.next();
  assertFalse(rei.hasTop());
  is.clearOptions();
  RegExFilter.setRegexs(is,"hamster",null,"hamster","hamster",true);
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k3));
  rei.next();
  assertFalse(rei.hasTop());
  is.clearOptions();
  RegExFilter.setRegexs(is,null,"ya.*","hamster",null,true);
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(rei.hasTop());
  assertTrue(rei.getTopKey().equals(k2));
  rei.next();
  assertFalse(rei.hasTop());
  is.clearOptions();
  RegExFilter.setRegexs(is,null,"ya.*","hamster",null,true);
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  rei.deepCopy(new DefaultIteratorEnvironment());
  String multiByteText=new String("\u6d67" + "\u6F68" + "\u7067");
  String multiByteRegex=new String(".*" + "\u6F68" + ".*");
  Key k4=new Key("boo4".getBytes(),"hoo".getBytes(),"20080203".getBytes(),"".getBytes(),1l);
  Value inVal=new Value(multiByteText.getBytes(UTF_8));
  tm.put(k4,inVal);
  is.clearOptions();
  RegExFilter.setRegexs(is,null,null,null,multiByteRegex,true);
  rei.init(new SortedMapIterator(tm),is.getOptions(),new DefaultIteratorEnvironment());
  rei.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue(rei.hasTop());
  Value outValue=rei.getTopValue();
  String outVal=new String(outValue.get(),UTF_8);
  assertTrue(outVal.equals(multiByteText));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNullByteInKey() throws IOException {
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  String s1="first", s2="second";
  byte[] b1=s1.getBytes(), b2=s2.getBytes(), ball;
  ball=new byte[b1.length + b2.length + 1];
  System.arraycopy(b1,0,ball,0,b1.length);
  ball[b1.length]=(byte)0;
  System.arraycopy(b2,0,ball,b1.length + 1,b2.length);
  Key key=new Key(ball,new byte[0],new byte[0],new byte[0],90,false);
  Value val=new Value(new byte[0]);
  tm.put(key,val);
  IteratorSetting is=new IteratorSetting(5,RegExFilter.class);
  RegExFilter.setRegexs(is,s2,null,null,null,true,true);
  RegExFilter filter=new RegExFilter();
  filter.init(new SortedMapIterator(tm),is.getOptions(),null);
  filter.seek(new Range(),EMPTY_COL_FAMS,false);
  assertTrue("iterator couldn't find a match when it should have",filter.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.RowEncodingIteratorTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEncodeAll() throws IOException {
  byte[] kbVal=new byte[1024];
  SortedMap<Key,Value> map1=new TreeMap<Key,Value>();
  pkv(map1,"row1","cf1","cq1","cv1",5,kbVal);
  pkv(map1,"row1","cf1","cq2","cv1",6,kbVal);
  SortedMap<Key,Value> map2=new TreeMap<Key,Value>();
  pkv(map2,"row2","cf1","cq1","cv1",5,kbVal);
  pkv(map2,"row2","cf1","cq2","cv1",6,kbVal);
  SortedMap<Key,Value> map3=new TreeMap<Key,Value>();
  pkv(map3,"row3","cf1","cq1","cv1",5,kbVal);
  pkv(map3,"row3","cf1","cq2","cv1",6,kbVal);
  SortedMap<Key,Value> map=new TreeMap<Key,Value>();
  map.putAll(map1);
  map.putAll(map2);
  map.putAll(map3);
  SortedMapIterator src=new SortedMapIterator(map);
  Range range=new Range(new Text("row1"),true,new Text("row2"),true);
  RowEncodingIteratorImpl iter=new RowEncodingIteratorImpl();
  Map<String,String> bigBufferOpts=new HashMap<String,String>();
  bigBufferOpts.put(RowEncodingIterator.MAX_BUFFER_SIZE_OPT,"3K");
  iter.init(src,bigBufferOpts,new DummyIteratorEnv());
  iter.seek(range,new ArrayList<ByteSequence>(),false);
  assertTrue(iter.hasTop());
  assertEquals(map1,RowEncodingIteratorImpl.decodeRow(iter.getTopKey(),iter.getTopValue()));
  range=new Range(iter.getTopKey(),false,range.getEndKey(),range.isEndKeyInclusive());
  iter.seek(range,new ArrayList<ByteSequence>(),false);
  assertTrue(iter.hasTop());
  assertEquals(map2,RowEncodingIteratorImpl.decodeRow(iter.getTopKey(),iter.getTopValue()));
  iter.next();
  assertFalse(iter.hasTop());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.RowFilterTest </h4><pre class="type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deepCopyCopiesTheSource() throws Exception {
  SortedMapIterator source=new SortedMapIterator(createKeyValues());
  RowFilter filter=new RowZeroOrOneFilter();
  filter.init(source,Collections.<String,String>emptyMap(),new DefaultIteratorEnvironment());
  filter.seek(new Range(),Collections.<ByteSequence>emptySet(),false);
  Key firstKey=filter.getTopKey();
  Value firstValue=filter.getTopValue();
  assertEquals("0",firstKey.getRow().toString());
  Key lastKeyRead=null;
  for (int i=0; i < 5; i++) {
    filter.next();
    lastKeyRead=filter.getTopKey();
    assertEquals("0",lastKeyRead.getRow().toString());
  }
  RowFilter copy=(RowFilter)filter.deepCopy(new DefaultIteratorEnvironment());
  copy.seek(new Range(),Collections.<ByteSequence>emptySet(),false);
  assertTrue("deepCopy'ed RowFilter did not have a top key",copy.hasTop());
  Key firstKeyFromCopy=copy.getTopKey();
  Value firstValueFromCopy=copy.getTopValue();
  assertEquals(firstKey,firstKeyFromCopy);
  assertEquals(firstValue,firstValueFromCopy);
  filter.next();
  Key finalKeyRead=filter.getTopKey();
  assertTrue("Expected next key read to be greater than the previous after deepCopy",lastKeyRead.compareTo(finalKeyRead) < 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.TestCfCqSlice </h4><pre class="type-13 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testAllCfsCqSlice() throws Exception {
  boolean[][][] foundKvs=new boolean[LR_DIM][LR_DIM][LR_DIM];
  long sliceMinCq=10;
  long sliceMaxCq=30;
  Map<String,String> opts=new HashMap<String,String>();
  opts.put(CfCqSliceOpts.OPT_MIN_CQ,new String(LONG_LEX.encode(sliceMinCq),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CQ,new String(LONG_LEX.encode(sliceMaxCq),UTF_8));
  loadKvs(foundKvs,opts,INFINITY);
  for (int i=0; i < LR_DIM; i++) {
    for (int j=0; j < LR_DIM; j++) {
      for (int k=0; k < LR_DIM; k++) {
        if (k >= sliceMinCq && k <= sliceMaxCq) {
          assertTrue("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must be found in scan",foundKvs[i][j][k]);
        }
 else {
          assertFalse("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must not be found in scan",foundKvs[i][j][k]);
        }
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testSingleRowFullSlice() throws Exception {
  boolean[][][] foundKvs=new boolean[LR_DIM][LR_DIM][LR_DIM];
  int rowId=LR_DIM / 2;
  loadKvs(foundKvs,EMPTY_OPTS,Range.exact(new Text(LONG_LEX.encode((long)rowId))));
  for (int i=0; i < LR_DIM; i++) {
    for (int j=0; j < LR_DIM; j++) {
      for (int k=0; k < LR_DIM; k++) {
        if (rowId == i) {
          assertTrue("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must be found in scan",foundKvs[i][j][k]);
        }
 else {
          assertFalse("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must not be found in scan",foundKvs[i][j][k]);
        }
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testSeekMinExclusive() throws Exception {
  boolean[][][] foundKvs=new boolean[LR_DIM][LR_DIM][LR_DIM];
  long sliceMinCf=20;
  long sliceMinCq=30;
  long sliceMaxCf=25;
  long sliceMaxCq=35;
  assertTrue("slice param must be less than LR_DIM",sliceMinCf < LR_DIM);
  assertTrue("slice param must be less than LR_DIM",sliceMinCq < LR_DIM);
  assertTrue("slice param must be less than LR_DIM",sliceMaxCf < LR_DIM);
  assertTrue("slice param must be less than LR_DIM",sliceMaxCq < LR_DIM);
  Map<String,String> opts=new HashMap<>();
  opts.put(CfCqSliceOpts.OPT_MIN_CF,new String(LONG_LEX.encode(sliceMinCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MIN_INCLUSIVE,"false");
  opts.put(CfCqSliceOpts.OPT_MIN_CQ,new String(LONG_LEX.encode(sliceMinCq),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CF,new String(LONG_LEX.encode(sliceMaxCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CQ,new String(LONG_LEX.encode(sliceMaxCq),UTF_8));
  Range startsAtMinCf=new Range(new Key(LONG_LEX.encode(0l),LONG_LEX.encode(sliceMinCf),LONG_LEX.encode(sliceMinCq),new byte[]{},Long.MAX_VALUE),null);
  loadKvs(foundKvs,opts,startsAtMinCf);
  for (int i=0; i < LR_DIM; i++) {
    for (int j=0; j < LR_DIM; j++) {
      for (int k=0; k < LR_DIM; k++) {
        if (j > sliceMinCf && j <= sliceMaxCf && k > sliceMinCq && k <= sliceMaxCq) {
          assertTrue("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must be found in scan",foundKvs[i][j][k]);
        }
 else {
          assertFalse("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must not be found in scan",foundKvs[i][j][k]);
        }
      }
    }
  }
  foundKvs=new boolean[LR_DIM][LR_DIM][LR_DIM];
  sliceMinCq=0;
  sliceMaxCq=10;
  opts.put(CfCqSliceOpts.OPT_MIN_CF,new String(LONG_LEX.encode(sliceMinCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MIN_INCLUSIVE,"false");
  opts.put(CfCqSliceOpts.OPT_MIN_CQ,new String(LONG_LEX.encode(sliceMinCq),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CF,new String(LONG_LEX.encode(sliceMaxCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CQ,new String(LONG_LEX.encode(sliceMaxCq),UTF_8));
  loadKvs(foundKvs,opts,INFINITY);
  for (int i=0; i < LR_DIM; i++) {
    for (int j=0; j < LR_DIM; j++) {
      for (int k=0; k < LR_DIM; k++) {
        if (j > sliceMinCf && j <= sliceMaxCf && k > sliceMinCq && k <= sliceMaxCq) {
          assertTrue("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must be found in scan",foundKvs[i][j][k]);
        }
 else {
          assertFalse("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must not be found in scan",foundKvs[i][j][k]);
        }
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testStackedFilters() throws Exception {
  Map<String,String> firstOpts=new HashMap<>();
  Map<String,String> secondOpts=new HashMap<>();
  boolean[][][] foundKvs=new boolean[LR_DIM][LR_DIM][LR_DIM];
  long sliceMinCf=20;
  long sliceMaxCf=25;
  long sliceMinCq=30;
  long sliceMaxCq=35;
  assertTrue("slice param must be less than LR_DIM",sliceMinCf < LR_DIM);
  assertTrue("slice param must be less than LR_DIM",sliceMinCq < LR_DIM);
  assertTrue("slice param must be less than LR_DIM",sliceMaxCf < LR_DIM);
  assertTrue("slice param must be less than LR_DIM",sliceMaxCq < LR_DIM);
  firstOpts.put(CfCqSliceOpts.OPT_MIN_CF,new String(LONG_LEX.encode(sliceMinCf),UTF_8));
  firstOpts.put(CfCqSliceOpts.OPT_MAX_CF,new String(LONG_LEX.encode(sliceMaxCf),UTF_8));
  secondOpts.put(CfCqSliceOpts.OPT_MIN_CQ,new String(LONG_LEX.encode(sliceMinCq),UTF_8));
  secondOpts.put(CfCqSliceOpts.OPT_MAX_CQ,new String(LONG_LEX.encode(sliceMaxCq),UTF_8));
  SortedKeyValueIterator<Key,Value> skvi=getFilterClass().newInstance();
  skvi.init(new SortedMapIterator(data),firstOpts,null);
  loadKvs(skvi.deepCopy(null),foundKvs,secondOpts,INFINITY);
  for (int i=0; i < LR_DIM; i++) {
    for (int j=0; j < LR_DIM; j++) {
      for (int k=0; k < LR_DIM; k++) {
        if (j >= sliceMinCf && j <= sliceMaxCf && k >= sliceMinCq && k <= sliceMaxCq) {
          assertTrue("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must be found in scan",foundKvs[i][j][k]);
        }
 else {
          assertFalse("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must not be found in scan",foundKvs[i][j][k]);
        }
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testSliceCfsAllCqs() throws Exception {
  boolean[][][] foundKvs=new boolean[LR_DIM][LR_DIM][LR_DIM];
  long sliceMinCf=10;
  long sliceMaxCf=30;
  Map<String,String> opts=new HashMap<String,String>();
  opts.put(CfCqSliceOpts.OPT_MIN_CF,new String(LONG_LEX.encode(sliceMinCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CF,new String(LONG_LEX.encode(sliceMaxCf),UTF_8));
  loadKvs(foundKvs,opts,INFINITY);
  for (int i=0; i < LR_DIM; i++) {
    for (int j=0; j < LR_DIM; j++) {
      for (int k=0; k < LR_DIM; k++) {
        if (j >= sliceMinCf && j <= sliceMaxCf) {
          assertTrue("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must be found in scan",foundKvs[i][j][k]);
        }
 else {
          assertFalse("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must not be found in scan",foundKvs[i][j][k]);
        }
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void testEmptySlice() throws Exception {
  boolean[][][] foundKvs=new boolean[LR_DIM][LR_DIM][LR_DIM];
  long sliceMinCf=LR_DIM + 1;
  long sliceMinCq=LR_DIM + 1;
  long sliceMaxCf=LR_DIM + 1;
  long sliceMaxCq=LR_DIM + 1;
  Map<String,String> opts=new HashMap<String,String>();
  opts.put(CfCqSliceOpts.OPT_MIN_CF,new String(LONG_LEX.encode(sliceMinCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MIN_CQ,new String(LONG_LEX.encode(sliceMinCq),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CF,new String(LONG_LEX.encode(sliceMaxCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CQ,new String(LONG_LEX.encode(sliceMaxCq),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_INCLUSIVE,"false");
  opts.put(CfCqSliceOpts.OPT_MIN_INCLUSIVE,"false");
  loadKvs(foundKvs,opts,INFINITY);
  for (int i=0; i < LR_DIM; i++) {
    for (int j=0; j < LR_DIM; j++) {
      for (int k=0; k < LR_DIM; k++) {
        assertFalse("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must not be found in scan",foundKvs[i][j][k]);
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testAllRowsSlice() throws Exception {
  boolean[][][] foundKvs=new boolean[LR_DIM][LR_DIM][LR_DIM];
  long sliceMinCf=20;
  long sliceMinCq=30;
  long sliceMaxCf=25;
  long sliceMaxCq=35;
  assertTrue("slice param must be less than LR_DIM",sliceMinCf < LR_DIM);
  assertTrue("slice param must be less than LR_DIM",sliceMinCq < LR_DIM);
  assertTrue("slice param must be less than LR_DIM",sliceMaxCf < LR_DIM);
  assertTrue("slice param must be less than LR_DIM",sliceMaxCq < LR_DIM);
  Map<String,String> opts=new HashMap<String,String>();
  opts.put(CfCqSliceOpts.OPT_MIN_CF,new String(LONG_LEX.encode(sliceMinCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MIN_CQ,new String(LONG_LEX.encode(sliceMinCq),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CF,new String(LONG_LEX.encode(sliceMaxCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CQ,new String(LONG_LEX.encode(sliceMaxCq),UTF_8));
  loadKvs(foundKvs,opts,INFINITY);
  for (int i=0; i < LR_DIM; i++) {
    for (int j=0; j < LR_DIM; j++) {
      for (int k=0; k < LR_DIM; k++) {
        if (j >= sliceMinCf && j <= sliceMaxCf && k >= sliceMinCq && k <= sliceMaxCq) {
          assertTrue("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must be found in scan",foundKvs[i][j][k]);
        }
 else {
          assertFalse("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must not be found in scan",foundKvs[i][j][k]);
        }
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testSingleColumnSliceByExclude() throws Exception {
  boolean[][][] foundKvs=new boolean[LR_DIM][LR_DIM][LR_DIM];
  long sliceMinCf=20;
  long sliceMinCq=20;
  long sliceMaxCf=22;
  long sliceMaxCq=22;
  Map<String,String> opts=new HashMap<String,String>();
  opts.put(CfCqSliceOpts.OPT_MIN_CF,new String(LONG_LEX.encode(sliceMinCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MIN_CQ,new String(LONG_LEX.encode(sliceMinCq),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CF,new String(LONG_LEX.encode(sliceMaxCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CQ,new String(LONG_LEX.encode(sliceMaxCq),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_INCLUSIVE,"false");
  opts.put(CfCqSliceOpts.OPT_MIN_INCLUSIVE,"false");
  loadKvs(foundKvs,opts,INFINITY);
  for (int i=0; i < LR_DIM; i++) {
    for (int j=0; j < LR_DIM; j++) {
      for (int k=0; k < LR_DIM; k++) {
        if (j == 21 && k == 21) {
          assertTrue("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must be found in scan",foundKvs[i][j][k]);
        }
 else {
          assertFalse("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must not be found in scan",foundKvs[i][j][k]);
        }
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void testAllRowsFullSlice() throws Exception {
  boolean[][][] foundKvs=new boolean[LR_DIM][LR_DIM][LR_DIM];
  loadKvs(foundKvs,EMPTY_OPTS,INFINITY);
  for (int i=0; i < LR_DIM; i++) {
    for (int j=0; j < LR_DIM; j++) {
      for (int k=0; k < LR_DIM; k++) {
        assertTrue("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must be found in scan",foundKvs[i][j][k]);
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testSingleColumnSlice() throws Exception {
  boolean[][][] foundKvs=new boolean[LR_DIM][LR_DIM][LR_DIM];
  long sliceMinCf=20;
  long sliceMinCq=20;
  long sliceMaxCf=20;
  long sliceMaxCq=20;
  Map<String,String> opts=new HashMap<String,String>();
  opts.put(CfCqSliceOpts.OPT_MIN_CF,new String(LONG_LEX.encode(sliceMinCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MIN_CQ,new String(LONG_LEX.encode(sliceMinCq),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CF,new String(LONG_LEX.encode(sliceMaxCf),UTF_8));
  opts.put(CfCqSliceOpts.OPT_MAX_CQ,new String(LONG_LEX.encode(sliceMaxCq),UTF_8));
  loadKvs(foundKvs,opts,INFINITY);
  for (int i=0; i < LR_DIM; i++) {
    for (int j=0; j < LR_DIM; j++) {
      for (int k=0; k < LR_DIM; k++) {
        if (j == sliceMinCf && k == sliceMinCq) {
          assertTrue("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must be found in scan",foundKvs[i][j][k]);
        }
 else {
          assertFalse("(r, cf, cq) == (" + i + ", "+ j+ ", "+ k+ ") must not be found in scan",foundKvs[i][j][k]);
        }
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.TransformingIteratorTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCompactionAndIllegalVisibility() throws Exception {
  setUpTransformIterator(IllegalVisCompactionKeyTransformingIterator.class);
  try {
    checkExpected(new TreeMap<Key,Value>());
    assertTrue(false);
  }
 catch (  Exception e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeepCopy() throws Exception {
  ColumnVisibility vis1=new ColumnVisibility("vis1");
  ColumnVisibility vis3=new ColumnVisibility("vis3");
  data.clear();
  Value ev=new Value("".getBytes());
  data.put(new Key("shard001","foo","doc02",vis1,78),ev);
  data.put(new Key("shard001","dog","doc02",vis3,78),ev);
  data.put(new Key("shard001","cat","doc02",vis3,78),ev);
  data.put(new Key("shard001","bar","doc03",vis1,78),ev);
  data.put(new Key("shard001","dog","doc03",vis3,78),ev);
  data.put(new Key("shard001","cat","doc03",vis3,78),ev);
  setUpTransformIterator(ColVisReversingKeyTransformingIterator.class);
  IntersectingIterator iiIter=new IntersectingIterator();
  IteratorSetting iicfg=new IteratorSetting(22,IntersectingIterator.class);
  IntersectingIterator.setColumnFamilies(iicfg,new Text[]{new Text("foo"),new Text("dog"),new Text("cat")});
  iiIter.init(titer,iicfg.getOptions(),null);
  iiIter.seek(new Range(),new HashSet<ByteSequence>(),false);
  assertTrue(iiIter.hasTop());
  Key docKey=iiIter.getTopKey();
  assertEquals("shard001",docKey.getRowData().toString());
  assertEquals("doc02",docKey.getColumnQualifierData().toString());
  iiIter.next();
  assertFalse(iiIter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testValidateOptions(){
  TransformingIterator ti=new ColFamReversingKeyTransformingIterator();
  IteratorSetting is=new IteratorSetting(100,"cfrkt",ColFamReversingKeyTransformingIterator.class);
  TransformingIterator.setAuthorizations(is,new Authorizations("A","B"));
  TransformingIterator.setMaxBufferSize(is,10000000);
  Assert.assertTrue(ti.validateOptions(is.getOptions()));
  Map<String,String> opts=new HashMap<String,String>();
  opts.put(TransformingIterator.MAX_BUFFER_SIZE_OPT,"10M");
  Assert.assertTrue(ti.validateOptions(is.getOptions()));
  opts.clear();
  opts.put(TransformingIterator.MAX_BUFFER_SIZE_OPT,"A,B");
  try {
    ti.validateOptions(opts);
    Assert.assertFalse(true);
  }
 catch (  IllegalArgumentException e) {
  }
  opts.clear();
  opts.put(TransformingIterator.AUTH_OPT,Authorizations.HEADER + "~~~~");
  try {
    ti.validateOptions(opts);
    Assert.assertFalse(true);
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.VersioningIteratorTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test6() throws IOException {
  Text colf=new Text("a");
  Text colq=new Text("b");
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  createTestData(tm,colf,colq);
  VersioningIterator it=new VersioningIterator();
  IteratorSetting is=new IteratorSetting(1,VersioningIterator.class);
  VersioningIterator.setMaxVersions(is,3);
  it.init(new SortedMapIterator(tm),is.getOptions(),null);
  VersioningIterator it2=it.deepCopy(null);
  Key seekKey=new Key(new Text(String.format("%03d",1)),colf,colq,19);
  it.seek(new Range(seekKey,false,null,true),EMPTY_COL_FAMS,false);
  it2.seek(new Range(seekKey,false,null,true),EMPTY_COL_FAMS,false);
  assertTrue(it.hasTop());
  assertTrue(it.getTopKey().getTimestamp() == 18);
  assertTrue(it2.hasTop());
  assertTrue(it2.getTopKey().getTimestamp() == 18);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test1(){
  Text colf=new Text("a");
  Text colq=new Text("b");
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  createTestData(tm,colf,colq);
  try {
    VersioningIterator it=new VersioningIterator();
    IteratorSetting is=new IteratorSetting(1,VersioningIterator.class);
    VersioningIterator.setMaxVersions(is,3);
    it.init(new SortedMapIterator(tm),is.getOptions(),null);
    it.seek(new Range(),EMPTY_COL_FAMS,false);
    TreeMap<Key,Value> tmOut=iteratorOverTestData(it);
    for (    Entry<Key,Value> e : tmOut.entrySet()) {
      assertTrue(e.getValue().get().length == 8);
      assertTrue(16 < encoder.decode(e.getValue().get()));
    }
    assertTrue("size after keeping 3 versions was " + tmOut.size(),tmOut.size() == 6);
  }
 catch (  IOException e) {
    assertFalse(true);
  }
catch (  Exception e) {
    log.error("{}",e.getMessage(),e);
    assertFalse(true);
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test5() throws IOException {
  Text colf=new Text("a");
  Text colq=new Text("b");
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  createTestData(tm,colf,colq);
  VersioningIterator it=new VersioningIterator();
  IteratorSetting is=new IteratorSetting(1,VersioningIterator.class);
  VersioningIterator.setMaxVersions(is,3);
  it.init(new SortedMapIterator(tm),is.getOptions(),null);
  Key seekKey=new Key(new Text(String.format("%03d",1)),colf,colq,19);
  it.seek(new Range(seekKey,false,null,true),EMPTY_COL_FAMS,false);
  assertTrue(it.hasTop());
  assertTrue(it.getTopKey().getTimestamp() == 18);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test2(){
  Text colf=new Text("a");
  Text colq=new Text("b");
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  createTestData(tm,colf,colq);
  try {
    VersioningIterator it=new VersioningIterator();
    IteratorSetting is=new IteratorSetting(1,VersioningIterator.class);
    VersioningIterator.setMaxVersions(is,3);
    it.init(new SortedMapIterator(tm),is.getOptions(),null);
    Key seekKey=new Key(new Text(String.format("%03d",1)),colf,colq,18);
    it.seek(new Range(seekKey,null),EMPTY_COL_FAMS,false);
    TreeMap<Key,Value> tmOut=iteratorOverTestData(it);
    for (    Entry<Key,Value> e : tmOut.entrySet()) {
      assertTrue(e.getValue().get().length == 8);
      assertTrue(16 < encoder.decode(e.getValue().get()));
    }
    assertTrue("size after keeping 2 versions was " + tmOut.size(),tmOut.size() == 2);
  }
 catch (  IOException e) {
    assertFalse(true);
  }
catch (  Exception e) {
    log.error("{}",e.getMessage(),e);
    assertFalse(true);
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test3(){
  Text colf=new Text("a");
  Text colq=new Text("b");
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  createTestData(tm,colf,colq);
  try {
    VersioningIterator it=new VersioningIterator();
    IteratorSetting is=new IteratorSetting(1,VersioningIterator.class);
    VersioningIterator.setMaxVersions(is,3);
    it.init(new SortedMapIterator(tm),is.getOptions(),null);
    Key seekKey=new Key(new Text(String.format("%03d",1)),colf,colq,15);
    it.seek(new Range(seekKey,null),EMPTY_COL_FAMS,false);
    TreeMap<Key,Value> tmOut=iteratorOverTestData(it);
    for (    Entry<Key,Value> e : tmOut.entrySet()) {
      assertTrue(e.getValue().get().length == 8);
      assertTrue(16 < encoder.decode(e.getValue().get()));
    }
    assertTrue("size after seeking past versions was " + tmOut.size(),tmOut.size() == 0);
    seekKey=new Key(new Text(String.format("%03d",0)),colf,colq,15);
    it.seek(new Range(seekKey,null),EMPTY_COL_FAMS,false);
    tmOut=iteratorOverTestData(it);
    for (    Entry<Key,Value> e : tmOut.entrySet()) {
      assertTrue(e.getValue().get().length == 8);
      assertTrue(16 < encoder.decode(e.getValue().get()));
    }
    assertTrue("size after seeking past versions was " + tmOut.size(),tmOut.size() == 3);
  }
 catch (  IOException e) {
    assertFalse(true);
  }
catch (  Exception e) {
    log.error("{}",e.getMessage(),e);
    assertFalse(true);
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test4(){
  Text colf=new Text("a");
  Text colq=new Text("b");
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  createTestData(tm,colf,colq);
  for (int i=1; i <= 30; i++) {
    try {
      VersioningIterator it=new VersioningIterator();
      IteratorSetting is=new IteratorSetting(1,VersioningIterator.class);
      VersioningIterator.setMaxVersions(is,i);
      it.init(new SortedMapIterator(tm),is.getOptions(),null);
      it.seek(new Range(),EMPTY_COL_FAMS,false);
      TreeMap<Key,Value> tmOut=iteratorOverTestData(it);
      assertTrue("size after keeping " + i + " versions was "+ tmOut.size(),tmOut.size() == Math.min(40,2 * i));
    }
 catch (    IOException e) {
      assertFalse(true);
    }
catch (    Exception e) {
      log.error("{}",e.getMessage(),e);
      assertFalse(true);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.iterators.user.WholeRowIteratorTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testContinue() throws Exception {
  SortedMap<Key,Value> map1=new TreeMap<Key,Value>();
  pkv(map1,"row1","cf1","cq1","cv1",5,"foo");
  pkv(map1,"row1","cf1","cq2","cv1",6,"bar");
  SortedMap<Key,Value> map2=new TreeMap<Key,Value>();
  pkv(map2,"row2","cf1","cq1","cv1",5,"foo");
  pkv(map2,"row2","cf1","cq2","cv1",6,"bar");
  SortedMap<Key,Value> map3=new TreeMap<Key,Value>();
  pkv(map3,"row3","cf1","cq1","cv1",5,"foo");
  pkv(map3,"row3","cf1","cq2","cv1",6,"bar");
  SortedMap<Key,Value> map=new TreeMap<Key,Value>();
  map.putAll(map1);
  map.putAll(map2);
  map.putAll(map3);
  SortedMapIterator source=new SortedMapIterator(map);
  WholeRowIterator iter=new WholeRowIterator(source);
  Range range=new Range(new Text("row1"),true,new Text("row2"),true);
  iter.seek(range,new ArrayList<ByteSequence>(),false);
  assertTrue(iter.hasTop());
  assertEquals(map1,WholeRowIterator.decodeRow(iter.getTopKey(),iter.getTopValue()));
  range=new Range(iter.getTopKey(),false,range.getEndKey(),range.isEndKeyInclusive());
  iter.seek(range,new ArrayList<ByteSequence>(),false);
  assertTrue(iter.hasTop());
  assertEquals(map2,WholeRowIterator.decodeRow(iter.getTopKey(),iter.getTopValue()));
  iter.next();
  assertFalse(iter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBug1() throws Exception {
  SortedMap<Key,Value> map1=new TreeMap<Key,Value>();
  pkv(map1,"row1","cf1","cq1","cv1",5,"foo");
  pkv(map1,"row1","cf1","cq2","cv1",6,"bar");
  SortedMap<Key,Value> map2=new TreeMap<Key,Value>();
  pkv(map2,"row2","cf1","cq1","cv1",5,"foo");
  SortedMap<Key,Value> map=new TreeMap<Key,Value>();
  map.putAll(map1);
  map.putAll(map2);
  MultiIterator source=new MultiIterator(Collections.singletonList((SortedKeyValueIterator<Key,Value>)new SortedMapIterator(map)),new Range(null,true,new Text("row1"),true));
  WholeRowIterator iter=new WholeRowIterator(source);
  Range range=new Range(new Text("row1"),true,new Text("row2"),true);
  iter.seek(range,new ArrayList<ByteSequence>(),false);
  assertTrue(iter.hasTop());
  assertEquals(map1,WholeRowIterator.decodeRow(iter.getTopKey(),iter.getTopValue()));
  range=new Range(iter.getTopKey(),false,range.getEndKey(),range.isEndKeyInclusive());
  iter.seek(range,new ArrayList<ByteSequence>(),false);
  assertFalse(iter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyStuff() throws IOException {
  SortedMap<Key,Value> map=new TreeMap<Key,Value>();
  SortedMap<Key,Value> map2=new TreeMap<Key,Value>();
  final Map<Text,Boolean> toInclude=new HashMap<Text,Boolean>();
  map.put(new Key(new Text("r1"),new Text("cf1"),new Text("cq1"),new Text("cv1"),1l),new Value("val1".getBytes()));
  map.put(new Key(new Text("r1"),new Text("cf1"),new Text("cq2"),new Text("cv1"),2l),new Value("val2".getBytes()));
  map.put(new Key(new Text("r2"),new Text("cf1"),new Text("cq1"),new Text("cv1"),3l),new Value("val3".getBytes()));
  map.put(new Key(new Text("r2"),new Text("cf2"),new Text("cq1"),new Text("cv1"),4l),new Value("val4".getBytes()));
  map.put(new Key(new Text("r3"),new Text("cf1"),new Text("cq1"),new Text("cv1"),5l),new Value("val4".getBytes()));
  map.put(new Key(new Text("r3"),new Text("cf1"),new Text("cq1"),new Text("cv2"),6l),new Value("val4".getBytes()));
  map.put(new Key(new Text("r4"),new Text("cf1"),new Text("cq1"),new Text("cv1"),7l),new Value("".getBytes()));
  map.put(new Key(new Text("r4"),new Text("cf1"),new Text("cq1"),new Text(""),8l),new Value("val1".getBytes()));
  map.put(new Key(new Text("r4"),new Text("cf1"),new Text(""),new Text("cv1"),9l),new Value("val1".getBytes()));
  map.put(new Key(new Text("r4"),new Text(""),new Text("cq1"),new Text("cv1"),10l),new Value("val1".getBytes()));
  map.put(new Key(new Text(""),new Text("cf1"),new Text("cq1"),new Text("cv1"),11l),new Value("val1".getBytes()));
  boolean b=true;
  int trueCount=0;
  for (  Key k : map.keySet()) {
    if (toInclude.containsKey(k.getRow())) {
      if (toInclude.get(k.getRow())) {
        map2.put(k,map.get(k));
      }
      continue;
    }
    b=!b;
    toInclude.put(k.getRow(),b);
    if (b) {
      trueCount++;
      map2.put(k,map.get(k));
    }
  }
  SortedMapIterator source=new SortedMapIterator(map);
  WholeRowIterator iter=new WholeRowIterator(source);
  SortedMap<Key,Value> resultMap=new TreeMap<Key,Value>();
  iter.seek(new Range(),new ArrayList<ByteSequence>(),false);
  int numRows=0;
  while (iter.hasTop()) {
    numRows++;
    Key rowKey=iter.getTopKey();
    Value rowValue=iter.getTopValue();
    resultMap.putAll(WholeRowIterator.decodeRow(rowKey,rowValue));
    iter.next();
  }
  assertTrue(numRows == 5);
  assertEquals(resultMap,map);
  WholeRowIterator iter2=new WholeRowIterator(source){
    @Override public boolean filter(    Text row,    List<Key> keys,    List<Value> values){
      return toInclude.get(row);
    }
  }
;
  resultMap.clear();
  iter2.seek(new Range(),new ArrayList<ByteSequence>(),false);
  numRows=0;
  while (iter2.hasTop()) {
    numRows++;
    Key rowKey=iter2.getTopKey();
    Value rowValue=iter2.getTopValue();
    resultMap.putAll(WholeRowIterator.decodeRow(rowKey,rowValue));
    iter2.next();
  }
  assertTrue(numRows == trueCount);
  assertEquals(resultMap,map2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.metadata.MetadataServicerTest </h4><pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCorrectServicer() throws AccumuloException, AccumuloSecurityException, TableExistsException, TableNotFoundException {
  MetadataServicer ms=MetadataServicer.forTableId(context,RootTable.ID);
  assertTrue(ms instanceof ServicerForRootTable);
  assertFalse(ms instanceof TableMetadataServicer);
  assertEquals(RootTable.ID,ms.getServicedTableId());
  ms=MetadataServicer.forTableId(context,MetadataTable.ID);
  assertTrue(ms instanceof ServicerForMetadataTable);
  assertTrue(ms instanceof TableMetadataServicer);
  assertEquals(RootTable.NAME,((TableMetadataServicer)ms).getServicingTableName());
  assertEquals(MetadataTable.ID,ms.getServicedTableId());
  ms=MetadataServicer.forTableId(context,ReplicationTable.ID);
  assertTrue(ms instanceof ServicerForUserTables);
  assertTrue(ms instanceof TableMetadataServicer);
  assertEquals(MetadataTable.NAME,((TableMetadataServicer)ms).getServicingTableName());
  assertEquals(ReplicationTable.ID,ms.getServicedTableId());
  ms=MetadataServicer.forTableId(context,userTableId);
  assertTrue(ms instanceof ServicerForUserTables);
  assertTrue(ms instanceof TableMetadataServicer);
  assertEquals(MetadataTable.NAME,((TableMetadataServicer)ms).getServicingTableName());
  assertEquals(userTableId,ms.getServicedTableId());
  ms=MetadataServicer.forTableName(context,RootTable.NAME);
  assertTrue(ms instanceof ServicerForRootTable);
  assertFalse(ms instanceof TableMetadataServicer);
  assertEquals(RootTable.ID,ms.getServicedTableId());
  ms=MetadataServicer.forTableName(context,MetadataTable.NAME);
  assertTrue(ms instanceof ServicerForMetadataTable);
  assertTrue(ms instanceof TableMetadataServicer);
  assertEquals(RootTable.NAME,((TableMetadataServicer)ms).getServicingTableName());
  assertEquals(MetadataTable.ID,ms.getServicedTableId());
  ms=MetadataServicer.forTableName(context,ReplicationTable.NAME);
  assertTrue(ms instanceof ServicerForUserTables);
  assertTrue(ms instanceof TableMetadataServicer);
  assertEquals(MetadataTable.NAME,((TableMetadataServicer)ms).getServicingTableName());
  assertEquals(ReplicationTable.ID,ms.getServicedTableId());
  ms=MetadataServicer.forTableName(context,userTableName);
  assertTrue(ms instanceof ServicerForUserTables);
  assertTrue(ms instanceof TableMetadataServicer);
  assertEquals(MetadataTable.NAME,((TableMetadataServicer)ms).getServicingTableName());
  assertEquals(userTableId,ms.getServicedTableId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.replication.ReplicationConfigurationUtilTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void regularNonEnabledTable(){
  KeyExtent extent=new KeyExtent(new Text("1"),new Text("b"),new Text("a"));
  Assert.assertFalse("Table should not be replicated",ReplicationConfigurationUtil.isEnabled(extent,new ConfigurationCopy(new HashMap<String,String>())));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void rootTableExtentEmptyConf(){
  KeyExtent extent=new KeyExtent(new Text(RootTable.ID),null,null);
  Assert.assertFalse("The root table should never be replicated",ReplicationConfigurationUtil.isEnabled(extent,new ConfigurationCopy(new HashMap<String,String>())));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void rootTableExtent(){
  KeyExtent extent=new KeyExtent(new Text(RootTable.ID),null,null);
  Assert.assertFalse("The root table should never be replicated",ReplicationConfigurationUtil.isEnabled(extent,conf));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void regularTable(){
  KeyExtent extent=new KeyExtent(new Text("1"),new Text("b"),new Text("a"));
  Assert.assertTrue("Table should be replicated",ReplicationConfigurationUtil.isEnabled(extent,conf));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void metadataTableExtent(){
  KeyExtent extent=new KeyExtent(new Text(MetadataTable.ID),null,null);
  Assert.assertFalse("The metadata table should never be replicated",ReplicationConfigurationUtil.isEnabled(extent,conf));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void metadataTableExtentEmptyConf(){
  KeyExtent extent=new KeyExtent(new Text(MetadataTable.ID),null,null);
  Assert.assertFalse("The metadata table should never be replicated",ReplicationConfigurationUtil.isEnabled(extent,new ConfigurationCopy(new HashMap<String,String>())));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.AuthenticationTokenIdentifierTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testToString(){
  String principal="my_special_principal";
  AuthenticationTokenIdentifier token=new AuthenticationTokenIdentifier(principal);
  assertTrue(token.toString().contains(principal));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.AuthenticationTokenTest </h4><pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSerializeDeserializeToken() throws AccumuloSecurityException, IOException {
  Random random=new Random();
  byte[] randomBytes=new byte[12];
  random.nextBytes(randomBytes);
  boolean allZero=true;
  for (  byte b : randomBytes)   allZero=allZero && b == 0;
  assertFalse(allZero);
  byte[] serialized=AuthenticationTokenSerializer.serialize(new PasswordToken(randomBytes));
  PasswordToken passwordToken=AuthenticationTokenSerializer.deserialize(PasswordToken.class,serialized);
  assertArrayEquals(randomBytes,passwordToken.getPassword());
  serialized=AuthenticationTokenSerializer.serialize(new NullToken());
  AuthenticationToken nullToken=AuthenticationTokenSerializer.deserialize(NullToken.class,serialized);
  assertEquals(new NullToken(),nullToken);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.AuthorizationsTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testSetOfByteArrays(){
  assertTrue(ByteArraySet.fromStrings("a","b","c").contains("a".getBytes()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.ColumnVisibilityTest </h4><pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testParseTreesOrdering(){
  byte[] expression="(b&c&d)|((a|m)&y&z)|(e&f)".getBytes(UTF_8);
  byte[] flattened=new ColumnVisibility(expression).flatten();
  String flat=new String(flattened,UTF_8);
  assertTrue("shortest expressions sort first",flat.indexOf('e') < flat.indexOf('|'));
  assertTrue("shortest children sort first",flat.indexOf('b') < flat.indexOf('a'));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.CredentialsTest </h4><pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMockConnector() throws AccumuloException, DestroyFailedException, AccumuloSecurityException {
  Instance inst=DeprecationUtil.makeMockInstance(test.getMethodName());
  Connector rootConnector=inst.getConnector("root",new PasswordToken());
  PasswordToken testToken=new PasswordToken("testPass");
  rootConnector.securityOperations().createLocalUser("testUser",testToken);
  assertFalse(testToken.isDestroyed());
  testToken.destroy();
  assertTrue(testToken.isDestroyed());
  try {
    inst.getConnector("testUser",testToken);
    fail();
  }
 catch (  AccumuloSecurityException e) {
    assertTrue(e.getSecurityErrorCode().equals(SecurityErrorCode.TOKEN_EXPIRED));
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEqualsAndHashCode(){
  Credentials nullNullCreds=new Credentials(null,null);
  Credentials abcNullCreds=new Credentials("abc",new NullToken());
  Credentials cbaNullCreds=new Credentials("cba",new NullToken());
  Credentials abcBlahCreds=new Credentials("abc",new PasswordToken("blah"));
  assertEquals(0,nullNullCreds.hashCode());
  assertEquals("abc".hashCode(),abcNullCreds.hashCode());
  assertEquals(abcNullCreds.hashCode(),abcBlahCreds.hashCode());
  assertFalse(abcNullCreds.hashCode() == cbaNullCreds.hashCode());
  assertEquals(abcNullCreds,abcNullCreds);
  assertEquals(new Credentials("abc",new NullToken()),abcNullCreds);
  assertEquals(new Credentials("abc",new PasswordToken("abc".getBytes(UTF_8))),new Credentials("abc",new PasswordToken("abc")));
  assertFalse(nullNullCreds.equals(abcBlahCreds));
  assertFalse(nullNullCreds.equals(abcNullCreds));
  assertFalse(abcNullCreds.equals(abcBlahCreds));
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testToThrift() throws DestroyFailedException {
  Credentials creds=new Credentials("test",new PasswordToken("testing"));
  TCredentials tCreds=creds.toThrift(inst);
  assertEquals("test",tCreds.getPrincipal());
  assertEquals(PasswordToken.class.getName(),tCreds.getTokenClassName());
  assertArrayEquals(AuthenticationTokenSerializer.serialize(new PasswordToken("testing")),tCreds.getToken());
  creds.getToken().destroy();
  try {
    creds.toThrift(inst);
    fail();
  }
 catch (  Exception e) {
    assertTrue(e instanceof RuntimeException);
    assertTrue(e.getCause() instanceof AccumuloSecurityException);
    assertTrue(AccumuloSecurityException.class.cast(e.getCause()).getSecurityErrorCode().equals(SecurityErrorCode.TOKEN_EXPIRED));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.NamespacePermissionsTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testEnsureEquivalencies(){
  EnumSet<NamespacePermission> set=EnumSet.allOf(NamespacePermission.class);
  for (  TablePermission permission : TablePermission.values()) {
    set.remove(NamespacePermission.getEquivalent(permission));
  }
  for (  SystemPermission permission : SystemPermission.values()) {
    set.remove(NamespacePermission.getEquivalent(permission));
  }
  assertTrue("All namespace permissions should have equivalent table or system permissions.",set.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.VisibilityEvaluatorTest </h4><pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVisibilityEvaluator() throws VisibilityParseException {
  VisibilityEvaluator ct=new VisibilityEvaluator(new Authorizations(ByteArraySet.fromStrings("one","two","three","four")));
  assertTrue(ct.evaluate(new ColumnVisibility(new byte[0])));
  assertTrue("'and' test",ct.evaluate(new ColumnVisibility("one&two")));
  assertTrue("'or' test",ct.evaluate(new ColumnVisibility("foor|four")));
  assertTrue("'and' and 'or' test",ct.evaluate(new ColumnVisibility("(one&two)|(foo&bar)")));
  for (  String marking : new String[]{"one","one|five","five|one","(one)","(one&two)|(foo&bar)","(one|foo)&three","one|foo|bar","(one|foo)|bar","((one|foo)|bar)&two"}) {
    assertTrue(marking,ct.evaluate(new ColumnVisibility(marking)));
  }
  for (  String marking : new String[]{"five","one&five","five&one","((one|foo)|bar)&goober"}) {
    assertFalse(marking,ct.evaluate(new ColumnVisibility(marking)));
  }
  for (  String marking : new String[]{"one(five)","(five)one","(one)(two)","a|(b(c))"}) {
    try {
      ct.evaluate(new ColumnVisibility(marking));
      fail(marking + " failed to throw");
    }
 catch (    BadArgumentException e) {
    }
  }
  for (  String marking : new String[]{"&(five)","|(five)","(five)&","five|","a|(b)&","(&five)","(five|)"}) {
    try {
      ct.evaluate(new ColumnVisibility(marking));
      fail(marking + " failed to throw");
    }
 catch (    BadArgumentException e) {
    }
  }
  for (  String marking : new String[]{"(",")","(a&b","b|a)"}) {
    try {
      ct.evaluate(new ColumnVisibility(marking));
      fail(marking + " failed to throw");
    }
 catch (    BadArgumentException e) {
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNonAscii() throws VisibilityParseException {
  VisibilityEvaluator ct=new VisibilityEvaluator(new Authorizations("五","六","八","九","五十"));
  assertTrue(ct.evaluate(new ColumnVisibility(quote("五") + "|" + quote("四"))));
  assertFalse(ct.evaluate(new ColumnVisibility(quote("五") + "&" + quote("四"))));
  assertTrue(ct.evaluate(new ColumnVisibility(quote("五") + "&(" + quote("四")+ "|"+ quote("九")+ ")")));
  assertTrue(ct.evaluate(new ColumnVisibility("\"五\"&(\"四\"|\"五十\")")));
  assertFalse(ct.evaluate(new ColumnVisibility(quote("五") + "&(" + quote("四")+ "|"+ quote("三")+ ")")));
  assertFalse(ct.evaluate(new ColumnVisibility("\"五\"&(\"四\"|\"三\")")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.security.crypto.CryptoTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCryptoModuleBasicReadWrite() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_KEK_OFF_CONF);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  byte[] resultingBytes=setUpSampleEncryptedBytes(cryptoModule,params);
  ByteArrayInputStream in=new ByteArrayInputStream(resultingBytes);
  params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  params.setEncryptedInputStream(in);
  params=cryptoModule.getDecryptingInputStream(params);
  InputStream plaintextIn=params.getPlaintextInputStream();
  assertNotNull(plaintextIn);
  assertTrue(plaintextIn != in);
  DataInputStream dataIn=new DataInputStream(plaintextIn);
  String markerString=dataIn.readUTF();
  int markerInt=dataIn.readInt();
  assertEquals(MARKER_STRING,markerString);
  assertEquals(MARKER_INT,markerInt);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoCryptoStream() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_OFF_CONF);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertNotNull(params);
  assertEquals("NullCipher",params.getAlgorithmName());
  assertNull(params.getEncryptionMode());
  assertNull(params.getPadding());
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  assertNotNull(cryptoModule);
  assertTrue(cryptoModule instanceof CryptoModuleFactory.NullCryptoModule);
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  params.setPlaintextOutputStream(out);
  params=cryptoModule.getEncryptingOutputStream(params);
  assertNotNull(params.getEncryptedOutputStream());
  assertEquals(out,params.getEncryptedOutputStream());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKeyEncryptionNormalPath() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  assertNotNull(params.getKeyEncryptionStrategyClass());
  assertEquals("org.apache.accumulo.core.security.crypto.CachingHDFSSecretKeyEncryptionStrategy",params.getKeyEncryptionStrategyClass());
  byte[] resultingBytes=setUpSampleEncryptedBytes(cryptoModule,params);
  params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  params.setOverrideStreamsSecretKeyEncryptionStrategy(true);
  ByteArrayInputStream in=new ByteArrayInputStream(resultingBytes);
  params.setEncryptedInputStream(in);
  params=cryptoModule.getDecryptingInputStream(params);
  assertNotNull(params.getPlaintextInputStream());
  DataInputStream dataIn=new DataInputStream(params.getPlaintextInputStream());
  String markerString=dataIn.readUTF();
  int markerInt=dataIn.readInt();
  assertEquals(MARKER_STRING,markerString);
  assertEquals(MARKER_INT,markerInt);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testKeyEncryptionAndCheckThatFileCannotBeReadWithoutKEK() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  assertNotNull(params.getKeyEncryptionStrategyClass());
  assertEquals("org.apache.accumulo.core.security.crypto.CachingHDFSSecretKeyEncryptionStrategy",params.getKeyEncryptionStrategyClass());
  byte[] resultingBytes=setUpSampleEncryptedBytes(cryptoModule,params);
  conf=setAndGetAccumuloConfig(CRYPTO_ON_KEK_OFF_CONF);
  params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  params.setOverrideStreamsSecretKeyEncryptionStrategy(true);
  ByteArrayInputStream in=new ByteArrayInputStream(resultingBytes);
  params.setEncryptedInputStream(in);
  params=cryptoModule.getDecryptingInputStream(params);
  assertNotNull(params.getPlaintextInputStream());
  DataInputStream dataIn=new DataInputStream(params.getPlaintextInputStream());
  exception.expect(IOException.class);
  @SuppressWarnings("unused") String markerString=dataIn.readUTF();
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testCryptoModuleParamsValidation1() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  exception.expect(RuntimeException.class);
  cryptoModule.getEncryptingOutputStream(params);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChangingCryptoParamsAndCanStillDecryptPreviouslyEncryptedFiles() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  assertNotNull(params.getKeyEncryptionStrategyClass());
  assertEquals("org.apache.accumulo.core.security.crypto.CachingHDFSSecretKeyEncryptionStrategy",params.getKeyEncryptionStrategyClass());
  byte[] resultingBytes=setUpSampleEncryptedBytes(cryptoModule,params);
  params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  params.setAlgorithmName("DESede");
  params.setKeyLength(24 * 8);
  ByteArrayInputStream in=new ByteArrayInputStream(resultingBytes);
  params.setEncryptedInputStream(in);
  params=cryptoModule.getDecryptingInputStream(params);
  assertNotNull(params.getPlaintextInputStream());
  DataInputStream dataIn=new DataInputStream(params.getPlaintextInputStream());
  String markerString=dataIn.readUTF();
  int markerInt=dataIn.readInt();
  assertEquals(MARKER_STRING,markerString);
  assertEquals(MARKER_INT,markerInt);
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testCryptoModuleParamsValidation2() throws IOException {
  AccumuloConfiguration conf=setAndGetAccumuloConfig(CRYPTO_ON_CONF);
  CryptoModuleParameters params=CryptoModuleFactory.createParamsObjectFromAccumuloConfiguration(conf);
  CryptoModule cryptoModule=CryptoModuleFactory.getCryptoModule(conf);
  assertTrue(cryptoModule instanceof DefaultCryptoModule);
  exception.expect(RuntimeException.class);
  cryptoModule.getDecryptingInputStream(params);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.AsyncSocketAppenderTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAppend(){
  asa=new AsyncSocketAppender(sa);
  assertFalse(asa.isAttached(sa));
  LoggingEvent event1=new LoggingEvent("java.lang.String",Logger.getRootLogger(),Level.INFO,"event1",null);
  LoggingEvent event2=new LoggingEvent("java.lang.Integer",Logger.getRootLogger(),Level.WARN,"event2",null);
  sa.activateOptions();
  sa.doAppend(event1);
  sa.doAppend(event2);
  sa.close();
  replay(sa);
  asa.doAppend(event1);
  asa.doAppend(event2);
  asa.close();
  assertTrue(asa.isAttached(sa));
  verify(sa);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.LocalityGroupUtilTest </h4><pre class="type-9 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testColumnFamilySet(){
  ConfigurationCopy conf=new ConfigurationCopy();
  conf.set("table.group.lg1","cf1,cf2");
  conf.set("table.groups.enabled","lg1");
  try {
    Map<String,Set<ByteSequence>> groups=LocalityGroupUtil.getLocalityGroups(conf);
    assertEquals(1,groups.size());
    assertNotNull(groups.get("lg1"));
    assertEquals(2,groups.get("lg1").size());
    assertTrue(groups.get("lg1").contains(new ArrayByteSequence("cf1")));
  }
 catch (  LocalityGroupConfigurationError err) {
    fail();
  }
  try {
    conf.set("table.group.lg2","cf1");
    conf.set("table.groups.enabled","lg1,lg2");
    LocalityGroupUtil.getLocalityGroups(conf);
    fail();
  }
 catch (  LocalityGroupConfigurationError err) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.OpTimerTest </h4><pre class="type-5 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify that IllegalStateException is thrown when calling start on running timer.
 */
@Test(expected=IllegalStateException.class) public void verifyExceptionCallingStartWhenRunning(){
  OpTimer timer=new OpTimer().start();
  try {
    Thread.sleep(50);
  }
 catch (  InterruptedException ex) {
    log.info("sleep sleep interrupted");
    Thread.currentThread().interrupt();
  }
  assertTrue(timer.isRunning());
  timer.start();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Validate reset functionality
 */
@Test public void verifyReset(){
  OpTimer timer=new OpTimer().start();
  try {
    Thread.sleep(50);
  }
 catch (  InterruptedException ex) {
    log.info("sleep sleep interrupted");
    Thread.currentThread().interrupt();
  }
  timer.stop();
  long tValue=timer.now();
  log.debug("Time value before reset {}",String.format("%.3f ms",timer.scale(TimeUnit.MILLISECONDS)));
  timer.reset().start();
  try {
    Thread.sleep(1);
  }
 catch (  InterruptedException ex) {
    log.info("sleep sleep interrupted");
    Thread.currentThread().interrupt();
  }
  timer.stop();
  assertTrue(timer.now() > 0);
  assertTrue(tValue > timer.now());
  timer.reset();
  log.debug("Time value after reset {}",String.format("%.3f ms",timer.scale(TimeUnit.MILLISECONDS)));
  assertEquals(0,timer.now());
}

</code></pre>

<br>
<pre class="type-5 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify that IllegalStateException is thrown when calling stop when timer has not been started.
 */
@Test(expected=IllegalStateException.class) public void verifyExceptionCallingStopWhenNotStarted(){
  OpTimer timer=new OpTimer();
  assertFalse(timer.isRunning());
  timer.stop();
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Validate that start / stop accumulates time.
 */
@Test public void verifyElapsed(){
  OpTimer timer=new OpTimer().start();
  try {
    Thread.sleep(50);
  }
 catch (  InterruptedException ex) {
    log.info("sleep sleep interrupted");
    Thread.currentThread().interrupt();
  }
  timer.stop();
  long tValue=timer.now();
  log.debug("Time value after first stop {}",String.format("%.3f ms",timer.scale(TimeUnit.MILLISECONDS)));
  timer.start();
  try {
    Thread.sleep(10);
  }
 catch (  InterruptedException ex) {
    log.info("sleep sleep interrupted");
    Thread.currentThread().interrupt();
  }
  timer.stop();
  log.debug("Time value after second stop {}",String.format("%.3f ms",timer.scale(TimeUnit.MILLISECONDS)));
  assertTrue(tValue < timer.now());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verify that IllegalStateException is thrown when calling stop when not running.
 */
@Test(expected=IllegalStateException.class) public void verifyExceptionCallingStopWhenNotRunning(){
  OpTimer timer=new OpTimer().start();
  try {
    Thread.sleep(50);
  }
 catch (  InterruptedException ex) {
    log.info("sleep sleep interrupted");
    Thread.currentThread().interrupt();
  }
  assertTrue(timer.isRunning());
  timer.stop();
  assertFalse(timer.isRunning());
  timer.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.PreAllocatedArrayTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.accumulo.core.util.PreAllocatedArray#set(int,java.lang.Object)}.<br>
 * Test method for {@link org.apache.accumulo.core.util.PreAllocatedArray#get(int)}.<br>
 * Test method for {@link org.apache.accumulo.core.util.PreAllocatedArray#iterator()}.
 */
@Test public void testSet(){
  int capacity=5;
  PreAllocatedArray<String> strings=new PreAllocatedArray<>(capacity);
  assertEquals(capacity,strings.length);
  strings.set(1,"a");
  strings.set(4,"b");
  assertEquals(capacity,strings.length);
  String b=strings.set(4,"c");
  assertEquals("b",b);
  assertEquals(capacity,strings.length);
  Iterator<String> iter=strings.iterator();
  assertNull(iter.next());
  assertEquals("a",iter.next());
  assertNull(iter.next());
  assertNull(iter.next());
  assertEquals("c",iter.next());
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.ValidatorTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testOr(){
  Validator<String> vor=v.or(v2);
  assertTrue(vor.apply("correct"));
  assertTrue(vor.apply("righto"));
  assertFalse(vor.apply("coriander"));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAnd(){
  Validator<String> vand=v3.and(v);
  assertTrue(vand.apply("correct"));
  assertFalse(vand.apply("righto"));
  assertFalse(vand.apply("coriander"));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNot(){
  Validator<String> vnot=v3.not();
  assertFalse(vnot.apply("correct"));
  assertFalse(vnot.apply("coriander"));
  assertTrue(vnot.apply("righto"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.format.DateFormatSupplierTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateSimpleFormatSupplier() throws Exception {
  final String format=DateFormatSupplier.HUMAN_READABLE_FORMAT;
  DateFormatSupplier supplierA=DateFormatSupplier.createSimpleFormatSupplier(format);
  DateFormatSupplier supplierB=DateFormatSupplier.createSimpleFormatSupplier(format);
  assertSuppliersIndependent(supplierA,supplierB);
  supplierA.setTimeZone(TimeZone.getTimeZone("UTC"));
  final DateFormat dfA=supplierA.get();
  supplierB.setTimeZone(TimeZone.getTimeZone("EST"));
  final DateFormat dfB=supplierB.get();
  final String resultA=dfA.format(new Date(0));
  assertEquals("1970/01/01 00:00:00.000",resultA);
  final String resultB=dfB.format(new Date(0));
  assertEquals("1969/12/31 19:00:00.000",resultB);
  assertTrue(!resultA.equals(resultB));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.format.HexFormatterTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInitialize(){
  data.put(new Key(),new Value());
  formatter.initialize(data.entrySet(),new FormatterConfig());
  assertTrue(formatter.hasNext());
  assertEquals("  " + "  " + " ["+ "] ",formatter.next());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.format.ShardedTableDistributionFormatterTest </h4><pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAggregate(){
  data.put(new Key("t","~tab","loc"),new Value("srv1".getBytes(UTF_8)));
  data.put(new Key("t;19700101","~tab","loc",0),new Value("srv1".getBytes(UTF_8)));
  data.put(new Key("t;19700101","~tab","loc",1),new Value("srv2".getBytes(UTF_8)));
  formatter.initialize(data.entrySet(),new FormatterConfig());
  String[] resultLines=formatter.next().split("\n");
  List<String> results=Arrays.asList(resultLines).subList(2,4);
  assertTrue(CollectionUtils.exists(results,new AggregateReportChecker("NULL",1)));
  assertTrue(CollectionUtils.exists(results,new AggregateReportChecker("19700101",2)));
  assertFalse(formatter.hasNext());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInitialize(){
  data.put(new Key(),new Value());
  data.put(new Key("r","~tab"),new Value());
  formatter.initialize(data.entrySet(),new FormatterConfig());
  assertTrue(formatter.hasNext());
  formatter.next();
  assertFalse(formatter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.util.format.StatisticsDisplayFormatterTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testInitialize(){
  data.put(new Key(),new Value());
  formatter.initialize(data.entrySet(),new FormatterConfig());
  assertTrue(formatter.hasNext());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAggregate(){
  data.put(new Key("","","",1),new Value());
  data.put(new Key("","","",2),new Value());
  formatter.initialize(data.entrySet(),new FormatterConfig());
  String[] output=formatter.next().split("\n");
  assertTrue(output[2].endsWith(": 1"));
  assertTrue(output[5].endsWith(": 1"));
  assertTrue(output[8].endsWith(": 1"));
  assertEquals("2 entries matched.",output[9]);
  assertFalse(formatter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.core.volume.VolumeImplTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testBasePathInequivalence(){
  FileSystem fs=createMock(FileSystem.class);
  VolumeImpl volume=new VolumeImpl(fs,"/accumulo");
  assertFalse(volume.equivalentPaths(new Path("/something/accumulo")));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFileSystemInequivalence(){
  FileSystem fs=createMock(FileSystem.class), other=createMock(FileSystem.class);
  String basePath="/accumulo";
  VolumeImpl volume=new VolumeImpl(fs,basePath);
  expect(fs.getUri()).andReturn(URI.create("hdfs://localhost:8020")).anyTimes();
  expect(other.getUri()).andReturn(URI.create("hdfs://otherhost:8020")).anyTimes();
  replay(fs,other);
  assertFalse(volume.equivalentFileSystems(other));
  verify(fs,other);
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFileSystemEquivalence(){
  FileSystem fs=createMock(FileSystem.class), other=createMock(FileSystem.class);
  String basePath="/accumulo";
  VolumeImpl volume=new VolumeImpl(fs,basePath);
  expect(fs.getUri()).andReturn(URI.create("hdfs://myhost:8020")).anyTimes();
  expect(other.getUri()).andReturn(URI.create("hdfs://myhost:8020")).anyTimes();
  replay(fs,other);
  assertTrue(volume.equivalentFileSystems(other));
  verify(fs,other);
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBasePathEquivalence(){
  FileSystem fs=createMock(FileSystem.class);
  final String basePath="/accumulo";
  VolumeImpl volume=new VolumeImpl(fs,basePath);
  assertTrue(volume.equivalentPaths(new Path(basePath)));
  assertTrue(volume.equivalentPaths(new Path(basePath + "/tables/1/F000001.rf")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.examples.simple.filedata.ChunkInputStreamTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadIntoBufferLargerThanChunks() throws IOException {
  ChunkInputStream cis=new ChunkInputStream();
  byte[] b=new byte[20];
  int read;
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(data.iterator());
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  cis.setSource(pi);
  assertEquals(read=cis.read(b),10);
  assertEquals(new String(b,0,read),"qwertyuiop");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[A&B, B&C, D]");
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),16);
  assertEquals(new String(b,0,read),"asdfjkl;asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[A&B]");
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),-1);
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  cis.close();
  assertFalse(pi.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadData() throws IOException {
  ChunkInputStream cis=new ChunkInputStream();
  byte[] b=new byte[20];
  int read;
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(baddata.iterator());
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assumeExceptionOnClose(cis);
  assertEquals(cis.getVisibilities().toString(),"[A]");
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assumeExceptionOnClose(cis);
  assertEquals(cis.getVisibilities().toString(),"[B, C]");
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assumeExceptionOnClose(cis);
  assertEquals(cis.getVisibilities().toString(),"[D, E]");
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[F, G]");
  cis.close();
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  cis.close();
  assertEquals(cis.getVisibilities().toString(),"[I, J]");
  try {
    cis.setSource(pi);
    fail();
  }
 catch (  IOException e) {
  }
  assumeExceptionOnClose(cis);
  assertEquals(cis.getVisibilities().toString(),"[K]");
  cis.setSource(pi);
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[L]");
  cis.close();
  assertFalse(pi.hasNext());
  pi=new PeekingIterator<Entry<Key,Value>>(baddata.iterator());
  cis.setSource(pi);
  assumeExceptionOnClose(cis);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReadIntoBufferSmallerThanChunks() throws IOException {
  ChunkInputStream cis=new ChunkInputStream();
  byte[] b=new byte[5];
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(data.iterator());
  cis.setSource(pi);
  int read;
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"asdfj");
  assertEquals(read=cis.read(b),3);
  assertEquals(new String(b,0,read),"kl;");
  assertEquals(read=cis.read(b),-1);
  cis.setSource(pi);
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"qwert");
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"yuiop");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[A&B, B&C, D]");
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"asdfj");
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"kl;as");
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"dfjkl");
  assertEquals(read=cis.read(b),1);
  assertEquals(new String(b,0,read),";");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[A&B]");
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),-1);
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),5);
  assertEquals(new String(b,0,read),"asdfj");
  assertEquals(read=cis.read(b),3);
  assertEquals(new String(b,0,read),"kl;");
  assertEquals(read=cis.read(b),-1);
  cis.close();
  assertFalse(pi.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleChunkSizes() throws IOException {
  ChunkInputStream cis=new ChunkInputStream();
  byte[] b=new byte[20];
  int read;
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(multidata.iterator());
  b=new byte[20];
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(read=cis.read(b),-1);
  cis.close();
  assertEquals(cis.getVisibilities().toString(),"[A&B]");
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assertEquals(cis.getVisibilities().toString(),"[A&B]");
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  cis.close();
  assertEquals(cis.getVisibilities().toString(),"[A&B, B&C]");
  assertFalse(pi.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadDataWithoutClosing() throws IOException {
  ChunkInputStream cis=new ChunkInputStream();
  byte[] b=new byte[20];
  int read;
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(baddata.iterator());
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assertEquals(cis.getVisibilities().toString(),"[A]");
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assertEquals(cis.getVisibilities().toString(),"[B, C]");
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assertEquals(cis.getVisibilities().toString(),"[D, E]");
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[F, G]");
  cis.close();
  cis.setSource(pi);
  assumeExceptionOnRead(cis,b);
  assertEquals(cis.getVisibilities().toString(),"[I, J]");
  try {
    cis.setSource(pi);
    fail();
  }
 catch (  IOException e) {
  }
  assertEquals(cis.getVisibilities().toString(),"[K]");
  cis.setSource(pi);
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[L]");
  cis.close();
  assertFalse(pi.hasNext());
  pi=new PeekingIterator<Entry<Key,Value>>(baddata.iterator());
  cis.setSource(pi);
  assumeExceptionOnClose(cis);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.ReadOnlyStoreTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void everythingPassesThrough() throws Exception {
  @SuppressWarnings("unchecked") Repo<String> repo=EasyMock.createMock(Repo.class);
  EasyMock.expect(repo.getDescription()).andReturn("description");
  EasyMock.expect(repo.isReady(0xdeadbeefl,null)).andReturn(0x0l);
  @SuppressWarnings("unchecked") TStore<String> mock=EasyMock.createNiceMock(TStore.class);
  EasyMock.expect(mock.reserve()).andReturn(0xdeadbeefl);
  mock.reserve(0xdeadbeefl);
  EasyMock.expect(mock.top(0xdeadbeefl)).andReturn(repo);
  EasyMock.expect(mock.getStatus(0xdeadbeefl)).andReturn(TStatus.UNKNOWN);
  mock.unreserve(0xdeadbeefl,30);
  EasyMock.expect(mock.waitForStatusChange(0xdeadbeefl,EnumSet.allOf(TStatus.class))).andReturn(TStatus.UNKNOWN);
  EasyMock.expect(mock.getProperty(0xdeadbeefl,"com.example.anyproperty")).andReturn("property");
  EasyMock.expect(mock.list()).andReturn(Collections.<Long>emptyList());
  EasyMock.replay(repo);
  EasyMock.replay(mock);
  ReadOnlyTStore<String> store=new ReadOnlyStore<String>(mock);
  Assert.assertEquals(0xdeadbeefl,store.reserve());
  store.reserve(0xdeadbeefl);
  ReadOnlyRepo<String> top=store.top(0xdeadbeefl);
  Assert.assertFalse(top instanceof Repo);
  Assert.assertEquals("description",top.getDescription());
  Assert.assertEquals(0x0l,top.isReady(0xdeadbeefl,null));
  Assert.assertEquals(TStatus.UNKNOWN,store.getStatus(0xdeadbeefl));
  store.unreserve(0xdeadbeefl,30);
  Assert.assertEquals(TStatus.UNKNOWN,store.waitForStatusChange(0xdeadbeefl,EnumSet.allOf(TStatus.class)));
  Assert.assertEquals("property",store.getProperty(0xdeadbeefl,"com.example.anyproperty"));
  Assert.assertEquals(Collections.<Long>emptyList(),store.list());
  EasyMock.verify(repo);
  EasyMock.verify(mock);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.zookeeper.RetryTest </h4><pre class="type-13 type-5 type-3 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalStateException.class) public void usingNonExistentRetryFails(){
  for (int i=0; i < maxRetries; i++) {
    Assert.assertTrue(retry.canRetry());
    retry.useRetry();
  }
  Assert.assertFalse(retry.canRetry());
  retry.useRetry();
}

</code></pre>

<br>
<pre class="type-13 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void canRetryDoesntAlterState(){
  for (int i=0; i < maxRetries + 1; i++) {
    Assert.assertTrue(retry.canRetry());
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void hasRetriedAfterUse(){
  Assert.assertFalse(retry.hasRetried());
  retry.useRetry();
  Assert.assertTrue(retry.hasRetried());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.zookeeper.TransactionWatcherTest </h4><pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransactionWatcher() throws Exception {
  final String txType="someName";
  final long txid=7;
  final SimpleArbitrator sa=new SimpleArbitrator();
  final TransactionWatcher txw=new TransactionWatcher(sa);
  sa.start(txType,txid);
  try {
    sa.start(txType,txid);
    Assert.fail("simple arbitrator did not throw an exception");
  }
 catch (  Exception ex) {
  }
  txw.isActive(txid);
  Assert.assertFalse(txw.isActive(txid));
  txw.run(txType,txid,new Callable(){
    @Override public Object call() throws Exception {
      Assert.assertTrue(txw.isActive(txid));
      return null;
    }
  }
);
  Assert.assertFalse(txw.isActive(txid));
  Assert.assertFalse(sa.transactionComplete(txType,txid));
  sa.stop(txType,txid);
  Assert.assertFalse(sa.transactionAlive(txType,txid));
  Assert.assertFalse(sa.transactionComplete(txType,txid));
  sa.cleanup(txType,txid);
  Assert.assertTrue(sa.transactionComplete(txType,txid));
  try {
    txw.run(txType,txid,new Callable(){
      @Override public Object call() throws Exception {
        Assert.fail("Should not be able to start a new work on a discontinued transaction");
        return null;
      }
    }
);
    Assert.fail("work against stopped transaction should fail");
  }
 catch (  Exception ex) {
    ;
  }
  final long txid2=9;
  sa.start(txType,txid2);
  txw.run(txType,txid2,new Callable(){
    @Override public Object call() throws Exception {
      Assert.assertTrue(txw.isActive(txid2));
      sa.stop(txType,txid2);
      try {
        txw.run(txType,txid2,new Callable(){
          @Override public Object call() throws Exception {
            Assert.fail("Should not be able to start a new work on a discontinued transaction");
            return null;
          }
        }
);
        Assert.fail("work against a stopped transaction should fail");
      }
 catch (      Exception ex) {
      }
      Assert.assertTrue(txw.isActive(txid2));
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.fate.zookeeper.ZooCacheTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetChildren() throws Exception {
  expect(zk.getChildren(eq(ZPATH),anyObject(Watcher.class))).andReturn(CHILDREN);
  replay(zk);
  assertFalse(zc.childrenCached(ZPATH));
  assertEquals(CHILDREN,zc.getChildren(ZPATH));
  verify(zk);
  assertTrue(zc.childrenCached(ZPATH));
  assertEquals(CHILDREN,zc.getChildren(ZPATH));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.gc.GarbageCollectionTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteTableDir() throws Exception {
  GarbageCollectionAlgorithm gca=new GarbageCollectionAlgorithm();
  TestGCE gce=new TestGCE();
  gce.tableIds.add("4");
  gce.candidates.add("/4/t-0");
  gce.candidates.add("/4/t-0/F002.rf");
  gce.candidates.add("hdfs://foo.com:6000/accumulo/tables/5/t-0");
  gce.candidates.add("/6/t-0");
  gce.candidates.add("hdfs://foo:6000/accumulo/tables/7/t-0/");
  gce.addDirReference("7",null,"hdfs://foo.com:6000/accumulo/tables/7/t-0");
  gca.collect(gce);
  HashSet<String> tids=new HashSet<String>();
  tids.add("5");
  tids.add("6");
  Assert.assertEquals(tids.size(),gce.tablesDirsToDelete.size());
  Assert.assertTrue(tids.containsAll(gce.tablesDirsToDelete));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.gc.SimpleGarbageCollectorOptsTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIt(){
  assertFalse(opts.verbose);
  assertFalse(opts.safeMode);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.gc.SimpleGarbageCollectorTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMoveToTrash_NotUsingTrash() throws Exception {
  systemConfig.set(Property.GC_TRASH_IGNORE.getKey(),"true");
  Path path=createMock(Path.class);
  assertFalse(gc.archiveOrMoveToTrash(path));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMoveToTrash_UsingTrash() throws Exception {
  Path path=createMock(Path.class);
  expect(volMgr.moveToTrash(path)).andReturn(true);
  replay(volMgr);
  assertTrue(gc.archiveOrMoveToTrash(path));
  verify(volMgr);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testIsDir(){
  assertTrue(SimpleGarbageCollector.isDir("/dir1"));
  assertFalse(SimpleGarbageCollector.isDir("file1"));
  assertFalse(SimpleGarbageCollector.isDir("/dir1/file1"));
  assertFalse(SimpleGarbageCollector.isDir(""));
  assertFalse(SimpleGarbageCollector.isDir(null));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMoveToTrash_UsingTrash_VolMgrFailure() throws Exception {
  Path path=createMock(Path.class);
  expect(volMgr.moveToTrash(path)).andThrow(new FileNotFoundException());
  replay(volMgr);
  assertFalse(gc.archiveOrMoveToTrash(path));
  verify(volMgr);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInit() throws Exception {
  assertSame(volMgr,gc.getVolumeManager());
  assertSame(instance,gc.getInstance());
  assertEquals(credentials,gc.getCredentials());
  assertTrue(gc.isUsingTrash());
  assertEquals(1000L,gc.getStartDelay());
  assertEquals(2,gc.getNumDeleteThreads());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.iteratortest.junit4.BaseJUnit4IteratorTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterator(){
  List<IteratorTestReport> reports=runner.runTests();
  assertEquals(1,reports.size());
  IteratorTestReport report=reports.get(0);
  assertNotNull(report);
  assertTrue(report.getSummary(),report.didTestSucceed());
  log.trace("Expected: {}, Actual: {}",report.getExpectedOutput(),report.getActualOutput());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.master.DefaultMapTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultMap(){
  DefaultMap<String,String> map=new DefaultMap<String,String>("");
  map.put("key","value");
  String empty=map.get("otherKey");
  assertEquals(map.get("key"),"value");
  assertEquals(empty,"");
  assertTrue(empty == map.get("otherKey"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.master.replication.UnorderedWorkAssignerTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void workNotInZooKeeperIsCleanedUp(){
  Set<String> queuedWork=new LinkedHashSet<>(Arrays.asList("wal1","wal2"));
  assigner.setQueuedWork(queuedWork);
  Instance inst=createMock(Instance.class);
  ZooCache cache=createMock(ZooCache.class);
  assigner.setZooCache(cache);
  expect(conn.getInstance()).andReturn(inst);
  expect(inst.getInstanceID()).andReturn("id");
  expect(cache.get(Constants.ZROOT + "/id" + ReplicationConstants.ZOO_WORK_QUEUE+ "/wal1")).andReturn(null);
  expect(cache.get(Constants.ZROOT + "/id" + ReplicationConstants.ZOO_WORK_QUEUE+ "/wal2")).andReturn(null);
  replay(cache,inst,conn);
  assigner.cleanupFinishedWork();
  verify(cache,inst,conn);
  Assert.assertTrue("Queued work was not emptied",queuedWork.isEmpty());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void existingWorkIsReQueued() throws Exception {
  DistributedWorkQueue workQueue=createMock(DistributedWorkQueue.class);
  List<String> existingWork=Arrays.asList("/accumulo/wal/tserver+port/wal1","/accumulo/wal/tserver+port/wal2");
  expect(workQueue.getWorkQueued()).andReturn(existingWork);
  replay(workQueue);
  assigner.setWorkQueue(workQueue);
  assigner.initializeQueuedWork();
  verify(workQueue);
  Set<String> queuedWork=assigner.getQueuedWork();
  Assert.assertEquals("Expected existing work and queued work to be the same size",existingWork.size(),queuedWork.size());
  Assert.assertTrue("Expected all existing work to be queued",queuedWork.containsAll(existingWork));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.master.replication.WorkMakerTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void closedStatusRecordsStillMakeWork() throws Exception {
  WorkMaker workMaker=new WorkMaker(null,null);
  Assert.assertFalse(workMaker.shouldCreateWork(StatusUtil.fileCreated(System.currentTimeMillis())));
  Assert.assertTrue(workMaker.shouldCreateWork(StatusUtil.ingestedUntil(1000)));
  Assert.assertFalse(workMaker.shouldCreateWork(Status.newBuilder().setBegin(Long.MAX_VALUE).setEnd(0).setInfiniteEnd(true).setClosed(true).build()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.master.tableOps.ShutdownTServerTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSingleShutdown() throws Exception {
  final TServerInstance tserver=EasyMock.createMock(TServerInstance.class);
  final boolean force=false;
  final ShutdownTServer op=new ShutdownTServer(tserver,force);
  final Master master=EasyMock.createMock(Master.class);
  final long tid=1l;
  final TServerConnection tserverCnxn=EasyMock.createMock(TServerConnection.class);
  final TabletServerStatus status=new TabletServerStatus();
  status.tableMap=new HashMap<>();
  status.tableMap.put("a_table",new TableInfo());
  master.shutdownTServer(tserver);
  EasyMock.expectLastCall().once();
  EasyMock.expect(master.onlineTabletServers()).andReturn(Collections.singleton(tserver));
  EasyMock.expect(master.getConnection(tserver)).andReturn(tserverCnxn);
  EasyMock.expect(tserverCnxn.getTableMap(false)).andReturn(status);
  EasyMock.replay(tserver,tserverCnxn,master);
  long wait=op.isReady(tid,master);
  assertTrue("Expected wait to be greater than 0",wait > 0);
  EasyMock.verify(tserver,tserverCnxn,master);
  EasyMock.reset(tserver,tserverCnxn,master);
  EasyMock.expect(master.onlineTabletServers()).andReturn(Collections.singleton(tserver));
  EasyMock.expect(master.getConnection(tserver)).andReturn(tserverCnxn);
  EasyMock.expect(tserverCnxn.getTableMap(false)).andReturn(status);
  EasyMock.replay(tserver,tserverCnxn,master);
  wait=op.isReady(tid,master);
  assertTrue("Expected wait to be greater than 0",wait > 0);
  EasyMock.verify(tserver,tserverCnxn,master);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.minicluster.MiniAccumuloClusterExistingZooKeepersTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void canConnectViaExistingZooKeeper() throws Exception {
  Connector conn=accumulo.getConnector("root",SECRET);
  Instance instance=conn.getInstance();
  assertEquals(zooKeeper.getConnectString(),instance.getZooKeepers());
  String tableName="foo";
  conn.tableOperations().create(tableName);
  Map<String,String> tableIds=conn.tableOperations().tableIdMap();
  assertTrue(tableIds.containsKey(tableName));
  String zkTablePath=String.format("/accumulo/%s/tables/%s/name",instance.getInstanceID(),tableIds.get(tableName));
  try (CuratorFramework client=CuratorFrameworkFactory.newClient(zooKeeper.getConnectString(),new RetryOneTime(1))){
    client.start();
    assertNotNull(client.checkExists().forPath(zkTablePath));
    assertEquals(tableName,new String(client.getData().forPath(zkTablePath)));
  }
 }

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setupTestCluster() throws Exception {
  assertTrue(BASE_DIR.mkdirs() || BASE_DIR.isDirectory());
  File testDir=new File(BASE_DIR,testName.getMethodName());
  FileUtils.deleteQuietly(testDir);
  assertTrue(testDir.mkdir());
  zooKeeper=new TestingServer();
  MiniAccumuloConfig config=new MiniAccumuloConfig(testDir,SECRET);
  config.getImpl().setExistingZooKeepers(zooKeeper.getConnectString());
  accumulo=new MiniAccumuloCluster(config);
  accumulo.start();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.minicluster.MiniAccumuloClusterStartStopTest </h4><pre class="type-4 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setupTestCluster() throws IOException {
  assertTrue(baseDir.mkdirs() || baseDir.isDirectory());
  File testDir=new File(baseDir,testName.getMethodName());
  FileUtils.deleteQuietly(testDir);
  assertTrue(testDir.mkdir());
  accumulo=new MiniAccumuloCluster(testDir,"superSecret");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.minicluster.MiniAccumuloClusterTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testDebugPorts(){
  Set<Pair<ServerType,Integer>> debugPorts=accumulo.getDebugPorts();
  Assert.assertEquals(5,debugPorts.size());
  for (  Pair<ServerType,Integer> debugPort : debugPorts) {
    Assert.assertTrue(debugPort.getSecond() > 0);
  }
}

</code></pre>

<br>
<pre class="type-11 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=30000) public void test() throws Exception {
  Connector conn=accumulo.getConnector("root","superSecret");
  conn.tableOperations().create("table1",new NewTableConfiguration());
  conn.securityOperations().createLocalUser("user1",new PasswordToken("pass1"));
  conn.securityOperations().changeUserAuthorizations("user1",new Authorizations("A","B"));
  conn.securityOperations().grantTablePermission("user1","table1",TablePermission.WRITE);
  conn.securityOperations().grantTablePermission("user1","table1",TablePermission.READ);
  IteratorSetting is=new IteratorSetting(10,SummingCombiner.class);
  SummingCombiner.setEncodingType(is,LongCombiner.Type.STRING);
  SummingCombiner.setColumns(is,Collections.singletonList(new IteratorSetting.Column("META","COUNT")));
  conn.tableOperations().attachIterator("table1",is);
  Connector uconn=accumulo.getConnector("user1","pass1");
  BatchWriter bw=uconn.createBatchWriter("table1",new BatchWriterConfig());
  UUID uuid=UUID.randomUUID();
  Mutation m=new Mutation(uuid.toString());
  m.put("META","SIZE",new ColumnVisibility("A|B"),"8");
  m.put("META","CRC",new ColumnVisibility("A|B"),"456");
  m.put("META","COUNT",new ColumnVisibility("A|B"),"1");
  m.put("DATA","IMG",new ColumnVisibility("A&B"),"ABCDEFGH");
  bw.addMutation(m);
  bw.flush();
  m=new Mutation(uuid.toString());
  m.put("META","COUNT",new ColumnVisibility("A|B"),"1");
  m.put("META","CRC",new ColumnVisibility("A|B"),"123");
  bw.addMutation(m);
  bw.close();
  int count=0;
  Scanner scanner=uconn.createScanner("table1",new Authorizations("A"));
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnQualifierData().toString().equals("COUNT")) {
      Assert.assertEquals("2",entry.getValue().toString());
    }
 else     if (entry.getKey().getColumnQualifierData().toString().equals("SIZE")) {
      Assert.assertEquals("8",entry.getValue().toString());
    }
 else     if (entry.getKey().getColumnQualifierData().toString().equals("CRC")) {
      Assert.assertEquals("123",entry.getValue().toString());
    }
 else {
      Assert.assertTrue(false);
    }
    count++;
  }
  Assert.assertEquals(3,count);
  count=0;
  scanner=uconn.createScanner("table1",new Authorizations("A","B"));
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnQualifierData().toString().equals("IMG")) {
      Assert.assertEquals("ABCDEFGH",entry.getValue().toString());
    }
    count++;
  }
  Assert.assertEquals(4,count);
  conn.tableOperations().delete("table1");
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void testPerTableClasspath() throws Exception {
  Connector conn=accumulo.getConnector("root","superSecret");
  conn.tableOperations().create("table2");
  File jarFile=folder.newFile("iterator.jar");
  FileUtils.copyURLToFile(this.getClass().getResource("/FooFilter.jar"),jarFile);
  conn.instanceOperations().setProperty(Property.VFS_CONTEXT_CLASSPATH_PROPERTY.getKey() + "cx1",jarFile.toURI().toString());
  conn.tableOperations().setProperty("table2",Property.TABLE_CLASSPATH.getKey(),"cx1");
  conn.tableOperations().attachIterator("table2",new IteratorSetting(100,"foocensor","org.apache.accumulo.test.FooFilter"));
  BatchWriter bw=conn.createBatchWriter("table2",new BatchWriterConfig());
  Mutation m1=new Mutation("foo");
  m1.put("cf1","cq1","v2");
  m1.put("cf1","cq2","v3");
  bw.addMutation(m1);
  Mutation m2=new Mutation("bar");
  m2.put("cf1","cq1","v6");
  m2.put("cf1","cq2","v7");
  bw.addMutation(m2);
  bw.close();
  Scanner scanner=conn.createScanner("table2",new Authorizations());
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    Assert.assertFalse(entry.getKey().getRowData().toString().toLowerCase().contains("foo"));
    count++;
  }
  Assert.assertEquals(2,count);
  conn.instanceOperations().removeProperty(Property.VFS_CONTEXT_CLASSPATH_PROPERTY.getKey() + "cx1");
  conn.tableOperations().delete("table2");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.minicluster.impl.MiniAccumuloClusterImplTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=60000) public void saneMonitorInfo() throws Exception {
  MasterMonitorInfo stats;
  while (true) {
    stats=accumulo.getMasterMonitorInfo();
    if (null != stats.tServerInfo && stats.tServerInfo.size() == NUM_TSERVERS) {
      break;
    }
  }
  List<MasterState> validStates=Arrays.asList(MasterState.values());
  List<MasterGoalState> validGoals=Arrays.asList(MasterGoalState.values());
  Assert.assertTrue("master state should be valid.",validStates.contains(stats.state));
  Assert.assertTrue("master goal state should be in " + validGoals + ". is "+ stats.goalState,validGoals.contains(stats.goalState));
  Assert.assertNotNull("should have a table map.",stats.tableMap);
  Assert.assertTrue("root table should exist in " + stats.tableMap.keySet(),stats.tableMap.keySet().contains(RootTable.ID));
  Assert.assertTrue("meta table should exist in " + stats.tableMap.keySet(),stats.tableMap.keySet().contains(MetadataTable.ID));
  Assert.assertTrue("our test table should exist in " + stats.tableMap.keySet(),stats.tableMap.keySet().contains(testTableID));
  Assert.assertNotNull("there should be tservers.",stats.tServerInfo);
  Assert.assertEquals(NUM_TSERVERS,stats.tServerInfo.size());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testAccurateProcessListReturned() throws Exception {
  Map<ServerType,Collection<ProcessReference>> procs=accumulo.getProcesses();
  Assert.assertTrue(procs.containsKey(ServerType.GARBAGE_COLLECTOR));
  for (  ServerType t : new ServerType[]{ServerType.MASTER,ServerType.TABLET_SERVER,ServerType.ZOOKEEPER}) {
    Assert.assertTrue(procs.containsKey(t));
    Collection<ProcessReference> procRefs=procs.get(t);
    Assert.assertTrue(1 <= procRefs.size());
    for (    ProcessReference procRef : procRefs) {
      Assert.assertNotNull(procRef);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.minicluster.impl.MiniAccumuloConfigImplTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZookeeperPort(){
  MiniAccumuloConfigImpl config=new MiniAccumuloConfigImpl(tempFolder.getRoot(),"password").setZooKeeperPort(5000).initialize();
  assertEquals(5000,config.getZooKeeperPort());
  config=new MiniAccumuloConfigImpl(tempFolder.getRoot(),"password").initialize();
  assertTrue(config.getZooKeeperPort() > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.plugin.PluginIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testInstanceConnection(){
  assertTrue(instance != null);
  assertTrue(instance instanceof MiniAccumuloInstance);
  assertTrue(connector != null);
  assertTrue(connector instanceof Connector);
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkIterator() throws IOException, AccumuloException, AccumuloSecurityException, TableExistsException, TableNotFoundException {
  String tableName="checkIterator";
  connector.tableOperations().create(tableName);
  BatchWriter bw=connector.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("ROW1");
  m.put("allowed","CQ1","V1");
  m.put("denied","CQ2","V2");
  m.put("allowed","CQ3","V3");
  bw.addMutation(m);
  m=new Mutation("ROW2");
  m.put("allowed","CQ1","V1");
  m.put("denied","CQ2","V2");
  m.put("allowed","CQ3","V3");
  bw.addMutation(m);
  bw.close();
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  IteratorSetting is=new IteratorSetting(5,CustomFilter.class);
  scanner.addScanIterator(is);
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    count++;
    assertEquals("allowed",entry.getKey().getColumnFamily().toString());
  }
  assertEquals(4,count);
  scanner.clearScanIterators();
  CustomFilter.setNegate(is,true);
  scanner.addScanIterator(is);
  count=0;
  for (  Entry<Key,Value> entry : scanner) {
    count++;
    assertEquals("denied",entry.getKey().getColumnFamily().toString());
  }
  assertEquals(2,count);
  assertTrue(new File("target/accumulo-maven-plugin/" + instance.getInstanceName() + "/testCheckIteratorPassed").createNewFile());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testCreateTable() throws AccumuloException, AccumuloSecurityException, TableExistsException, IOException {
  String tableName="testCreateTable";
  connector.tableOperations().create(tableName);
  assertTrue(connector.tableOperations().exists(tableName));
  assertTrue(new File("target/accumulo-maven-plugin/" + instance.getInstanceName() + "/testCreateTablePassed").createNewFile());
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void writeToTable() throws AccumuloException, AccumuloSecurityException, TableExistsException, TableNotFoundException, IOException {
  String tableName="writeToTable";
  connector.tableOperations().create(tableName);
  BatchWriter bw=connector.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("ROW");
  m.put("CF","CQ","V");
  bw.addMutation(m);
  bw.close();
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    count++;
    assertEquals("ROW",entry.getKey().getRow().toString());
    assertEquals("CF",entry.getKey().getColumnFamily().toString());
    assertEquals("CQ",entry.getKey().getColumnQualifier().toString());
    assertEquals("V",entry.getValue().toString());
  }
  assertEquals(1,count);
  assertTrue(new File("target/accumulo-maven-plugin/" + instance.getInstanceName() + "/testWriteToTablePassed").createNewFile());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.AccumuloTest </h4><pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLocateLogConfig() throws Exception {
  File confDir=new File(FileUtils.getTempDirectory(),"AccumuloTest" + System.currentTimeMillis());
  String confDirName=confDir.getAbsolutePath();
  assertTrue("Failed to make test configuration directory",confDir.mkdir());
  try {
    File appProps=new File(confDir,"flogger_logger.properties");
    String appPropsName=String.format("%s/flogger_logger.properties",confDirName);
    FileUtils.touch(appProps);
    File genericXml=new File(confDir,"generic_logger.xml");
    String genericXmlName=String.format("%s/generic_logger.xml",confDirName);
    FileUtils.touch(genericXml);
    assertEquals(appPropsName,Accumulo.locateLogConfig(confDirName,"flogger"));
    assertEquals(genericXmlName,Accumulo.locateLogConfig(confDirName,"flagger"));
    assertTrue("Failed to delete log configuration file",appProps.delete());
    assertEquals(genericXmlName,Accumulo.locateLogConfig(confDirName,"flogger"));
  }
  finally {
    FileUtils.deleteDirectory(confDir);
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLocateLogConfig_Default() throws Exception {
  File confDir=new File(FileUtils.getTempDirectory(),"AccumuloTest" + System.currentTimeMillis());
  String confDirName=confDir.getAbsolutePath();
  assertTrue("Failed to make test configuration directory",confDir.mkdir());
  try {
    String genericXmlName=String.format("%s/generic_logger.xml",confDirName);
    assertEquals(genericXmlName,Accumulo.locateLogConfig(confDirName,"flogger"));
  }
  finally {
    FileUtils.deleteDirectory(confDir);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.conf.NamespaceConfigurationTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testObserver(){
  ConfigurationObserver o=createMock(ConfigurationObserver.class);
  c.addObserver(o);
  Collection<ConfigurationObserver> os=c.getObservers();
  assertEquals(1,os.size());
  assertTrue(os.contains(o));
  c.removeObserver(o);
  os=c.getObservers();
  assertEquals(0,os.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.conf.TableConfigurationTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testObserver(){
  ConfigurationObserver o=createMock(ConfigurationObserver.class);
  c.addObserver(o);
  Collection<ConfigurationObserver> os=c.getObservers();
  assertEquals(1,os.size());
  assertTrue(os.contains(o));
  c.removeObserver(o);
  os=c.getObservers();
  assertEquals(0,os.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.data.ServerMutationTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  ServerMutation m=new ServerMutation(new Text("r1"));
  m.put(new Text("cf1"),new Text("cq1"),new Value("v1".getBytes()));
  m.put(new Text("cf2"),new Text("cq2"),56,new Value("v2".getBytes()));
  m.setSystemTimestamp(42);
  List<ColumnUpdate> updates=m.getUpdates();
  assertEquals(2,updates.size());
  assertEquals("r1",new String(m.getRow()));
  ColumnUpdate cu=updates.get(0);
  assertEquals("cf1",new String(cu.getColumnFamily()));
  assertEquals("cq1",new String(cu.getColumnQualifier()));
  assertEquals("",new String(cu.getColumnVisibility()));
  assertFalse(cu.hasTimestamp());
  assertEquals(42l,cu.getTimestamp());
  ServerMutation m2=new ServerMutation();
  ReflectionUtils.copy(CachedConfiguration.getInstance(),m,m2);
  updates=m2.getUpdates();
  assertEquals(2,updates.size());
  assertEquals("r1",new String(m2.getRow()));
  cu=updates.get(0);
  assertEquals("cf1",new String(cu.getColumnFamily()));
  assertEquals("cq1",new String(cu.getColumnQualifier()));
  assertFalse(cu.hasTimestamp());
  assertEquals(42l,cu.getTimestamp());
  cu=updates.get(1);
  assertEquals("r1",new String(m2.getRow()));
  assertEquals("cf2",new String(cu.getColumnFamily()));
  assertEquals("cq2",new String(cu.getColumnQualifier()));
  assertTrue(cu.hasTimestamp());
  assertEquals(56,cu.getTimestamp());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.fs.FileRefTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCompareTo(){
  Assert.assertTrue(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf").compareTo(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf")) == 0);
  Assert.assertTrue(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf").compareTo(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0004.rf")) == 0);
  Assert.assertTrue(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf").compareTo(new FileRef("hdfs://nn1/accumulo/tables//2a/t-0003//C0004.rf")) == 0);
  Assert.assertTrue(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf").compareTo(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0005.rf")) < 0);
  Assert.assertTrue(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf").compareTo(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0005.rf")) < 0);
  Assert.assertTrue(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0004.rf").compareTo(new FileRef("hdfs://nn1/accumulo/tables//2a/t-0003//C0005.rf")) < 0);
  Assert.assertTrue(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0006.rf").compareTo(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0005.rf")) > 0);
  Assert.assertTrue(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0006.rf").compareTo(new FileRef("hdfs://nn1/accumulo/tables/2a/t-0003/C0005.rf")) > 0);
  Assert.assertTrue(new FileRef("hdfs://1.2.3.4/accumulo/tables/2a/t-0003/C0006.rf").compareTo(new FileRef("hdfs://nn1/accumulo/tables//2a/t-0003//C0005.rf")) > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.fs.VolumeManagerImplTest </h4><pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void chooseFromOptions() throws Exception {
  List<String> volumes=Arrays.asList("file://one/","file://two/","file://three/");
  ConfigurationCopy conf=new ConfigurationCopy();
  conf.set(INSTANCE_DFS_URI,volumes.get(0));
  conf.set(Property.INSTANCE_VOLUMES,StringUtils.join(volumes,","));
  conf.set(Property.GENERAL_VOLUME_CHOOSER,WrongVolumeChooser.class.getName());
  VolumeManager vm=VolumeManagerImpl.get(conf);
  String choice=vm.choose(Optional.of("sometable"),volumes.toArray(new String[0]));
  Assert.assertTrue("shouldn't see invalid options from misbehaving chooser.",volumes.contains(choice));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.fs.VolumeUtilTest </h4><pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSame() throws Exception {
  FileSystem fs=FileSystem.getLocal(new Configuration());
  Path subdir1=new Path(tempFolder.newFolder().toURI());
  Path subdir2=new Path(tempFolder.newFolder().toURI());
  Path subdir3=new Path(tempFolder.newFolder().toURI());
  Assert.assertFalse(VolumeUtil.same(fs,subdir1,fs,new Path(tempFolder.getRoot().toURI().toString(),"8854339269459287524098238497")));
  Assert.assertFalse(VolumeUtil.same(fs,new Path(tempFolder.getRoot().toURI().toString(),"8854339269459287524098238497"),fs,subdir1));
  Assert.assertTrue(VolumeUtil.same(fs,subdir1,fs,subdir1));
  writeFile(fs,subdir1,"abc","foo");
  writeFile(fs,subdir2,"abc","bar");
  writeFile(fs,subdir3,"abc","foo");
  Assert.assertTrue(VolumeUtil.same(fs,subdir1,fs,subdir1));
  Assert.assertFalse(VolumeUtil.same(fs,subdir1,fs,subdir2));
  Assert.assertFalse(VolumeUtil.same(fs,subdir2,fs,subdir1));
  Assert.assertTrue(VolumeUtil.same(fs,subdir1,fs,subdir3));
  Assert.assertTrue(VolumeUtil.same(fs,subdir3,fs,subdir1));
  writeFile(fs,subdir1,"def","123456");
  writeFile(fs,subdir2,"def","123456");
  writeFile(fs,subdir3,"def","123456");
  Assert.assertTrue(VolumeUtil.same(fs,subdir1,fs,subdir1));
  Assert.assertFalse(VolumeUtil.same(fs,subdir1,fs,subdir2));
  Assert.assertFalse(VolumeUtil.same(fs,subdir2,fs,subdir1));
  Assert.assertTrue(VolumeUtil.same(fs,subdir1,fs,subdir3));
  Assert.assertTrue(VolumeUtil.same(fs,subdir3,fs,subdir1));
  writeFile(fs,subdir3,"ghi","09876");
  Assert.assertFalse(VolumeUtil.same(fs,subdir1,fs,subdir3));
  Assert.assertFalse(VolumeUtil.same(fs,subdir3,fs,subdir1));
  fs.mkdirs(new Path(subdir2,"dir1"));
  try {
    VolumeUtil.same(fs,subdir1,fs,subdir2);
    Assert.fail();
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    VolumeUtil.same(fs,subdir2,fs,subdir1);
    Assert.fail();
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    VolumeUtil.same(fs,subdir1,fs,new Path(subdir2,"def"));
    Assert.fail();
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    VolumeUtil.same(fs,new Path(subdir2,"def"),fs,subdir3);
    Assert.fail();
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.init.InitializeTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@SuppressWarnings("deprecation") @Test public void testCheckInit_NoZK() throws Exception {
  expect(sconf.get(Property.INSTANCE_DFS_URI)).andReturn("hdfs://foo");
  expectLastCall().anyTimes();
  expect(sconf.get(Property.INSTANCE_ZK_HOST)).andReturn("zk1");
  replay(sconf);
  expect(zoo.exists("/")).andReturn(false);
  replay(zoo);
  assertFalse(Initialize.checkInit(conf,fs,sconf));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@SuppressWarnings("deprecation") @Test public void testCheckInit_AlreadyInit() throws Exception {
  expect(sconf.get(Property.INSTANCE_DFS_URI)).andReturn("hdfs://foo");
  expectLastCall().anyTimes();
  expect(sconf.get(Property.INSTANCE_DFS_DIR)).andReturn("/bar");
  expect(sconf.get(Property.INSTANCE_VOLUMES)).andReturn("");
  expect(sconf.get(Property.INSTANCE_ZK_HOST)).andReturn("zk1");
  expect(sconf.get(Property.INSTANCE_SECRET)).andReturn(Property.INSTANCE_SECRET.getDefaultValue());
  replay(sconf);
  expect(zoo.exists("/")).andReturn(true);
  replay(zoo);
  expect(fs.exists(anyObject(Path.class))).andReturn(true);
  replay(fs);
  assertFalse(Initialize.checkInit(conf,fs,sconf));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@SuppressWarnings("deprecation") @Test public void testCheckInit_OK() throws Exception {
  expect(sconf.get(Property.INSTANCE_DFS_URI)).andReturn("hdfs://foo");
  expectLastCall().anyTimes();
  expect(sconf.get(Property.INSTANCE_ZK_HOST)).andReturn("zk1");
  expect(sconf.get(Property.INSTANCE_SECRET)).andReturn(Property.INSTANCE_SECRET.getDefaultValue());
  replay(sconf);
  expect(zoo.exists("/")).andReturn(true);
  replay(zoo);
  expect(fs.exists(anyObject(Path.class))).andReturn(false);
  expect(fs.exists(anyObject(Path.class))).andReturn(false);
  replay(fs);
  assertTrue(Initialize.checkInit(conf,fs,sconf));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-18 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Is not executed with the test suite
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Ignore @Test public void testCheckInit_AlreadyInit_DefaultUri() throws Exception {
  expect(sconf.get(Property.INSTANCE_DFS_URI)).andReturn("");
  expectLastCall().anyTimes();
  expect(sconf.get(Property.INSTANCE_DFS_DIR)).andReturn("/bar");
  expect(sconf.get(Property.INSTANCE_ZK_HOST)).andReturn("zk1");
  expect(sconf.get(Property.INSTANCE_SECRET)).andReturn(Property.INSTANCE_SECRET.getDefaultValue());
  replay(sconf);
  expect(zoo.exists("/")).andReturn(true);
  replay(zoo);
  expect(fs.exists(anyObject(Path.class))).andReturn(true);
  replay(fs);
  assertFalse(Initialize.checkInit(conf,fs,sconf));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsInitialized_HasInstanceId() throws Exception {
  expect(fs.exists(anyObject(Path.class))).andReturn(true);
  replay(fs);
  assertTrue(Initialize.isInitialized(fs));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIsInitialized_HasDataVersion() throws Exception {
  expect(fs.exists(anyObject(Path.class))).andReturn(false);
  expect(fs.exists(anyObject(Path.class))).andReturn(true);
  replay(fs);
  assertTrue(Initialize.isInitialized(fs));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.master.state.MergeInfoTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstruction_NoArgs(){
  mi=new MergeInfo();
  assertEquals(MergeState.NONE,mi.getState());
  assertNull(mi.getExtent());
  assertEquals(MergeInfo.Operation.MERGE,mi.getOperation());
  assertFalse(mi.isDelete());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testWritable() throws Exception {
  MergeInfo info;
  info=readWrite(new MergeInfo(ke("a",null,"b"),MergeInfo.Operation.MERGE));
  info=readWrite(new MergeInfo(ke("a","b",null),MergeInfo.Operation.MERGE));
  info=readWrite(new MergeInfo(ke("x","b","a"),MergeInfo.Operation.MERGE));
  info=readWrite(new MergeInfo(ke("x","b","a"),MergeInfo.Operation.DELETE));
  assertTrue(info.isDelete());
  info.setState(MergeState.COMPLETE);
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNeedsToBeChopped_NotDelete(){
  expect(keyExtent.getTableId()).andReturn(new Text("table1"));
  KeyExtent keyExtent2=createMock(KeyExtent.class);
  expect(keyExtent2.getTableId()).andReturn(new Text("table1"));
  replay(keyExtent2);
  expect(keyExtent.overlaps(keyExtent2)).andReturn(true);
  replay(keyExtent);
  mi=new MergeInfo(keyExtent,MergeInfo.Operation.MERGE);
  assertTrue(mi.needsToBeChopped(keyExtent2));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNeedsToBeChopped() throws Exception {
  MergeInfo info=new MergeInfo(ke("x","b","a"),MergeInfo.Operation.DELETE);
  assertTrue(info.needsToBeChopped(ke("x","c","b")));
  assertTrue(info.overlaps(ke("x","c","b")));
  assertFalse(info.needsToBeChopped(ke("y","c","b")));
  assertFalse(info.needsToBeChopped(ke("x","c","bb")));
  assertFalse(info.needsToBeChopped(ke("x","b","a")));
  info=new MergeInfo(ke("x","b","a"),MergeInfo.Operation.MERGE);
  assertTrue(info.needsToBeChopped(ke("x","c","a")));
  assertTrue(info.needsToBeChopped(ke("x","aa","a")));
  assertTrue(info.needsToBeChopped(ke("x",null,null)));
  assertFalse(info.needsToBeChopped(ke("x","c","b")));
  assertFalse(info.needsToBeChopped(ke("y","c","b")));
  assertFalse(info.needsToBeChopped(ke("x","c","bb")));
  assertTrue(info.needsToBeChopped(ke("x","b","a")));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testOverlaps_NeedsChopping(){
  KeyExtent keyExtent2=createMock(KeyExtent.class);
  expect(keyExtent.overlaps(keyExtent2)).andReturn(false);
  expect(keyExtent.getTableId()).andReturn(new Text("table1"));
  expect(keyExtent.getEndRow()).andReturn(new Text("prev"));
  replay(keyExtent);
  expect(keyExtent2.getTableId()).andReturn(new Text("table1"));
  expect(keyExtent2.getPrevEndRow()).andReturn(new Text("prev"));
  expectLastCall().anyTimes();
  replay(keyExtent2);
  mi=new MergeInfo(keyExtent,MergeInfo.Operation.DELETE);
  assertTrue(mi.overlaps(keyExtent2));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testOverlaps_ExtentsOverlap(){
  KeyExtent keyExtent2=createMock(KeyExtent.class);
  expect(keyExtent.overlaps(keyExtent2)).andReturn(true);
  replay(keyExtent);
  mi=new MergeInfo(keyExtent,MergeInfo.Operation.MERGE);
  assertTrue(mi.overlaps(keyExtent2));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testOverlaps_DoesNotNeedChopping(){
  KeyExtent keyExtent2=createMock(KeyExtent.class);
  expect(keyExtent.overlaps(keyExtent2)).andReturn(false);
  expect(keyExtent.getTableId()).andReturn(new Text("table1"));
  replay(keyExtent);
  expect(keyExtent2.getTableId()).andReturn(new Text("table2"));
  replay(keyExtent2);
  mi=new MergeInfo(keyExtent,MergeInfo.Operation.MERGE);
  assertFalse(mi.overlaps(keyExtent2));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNeedsToBeChopped_DifferentTables(){
  expect(keyExtent.getTableId()).andReturn(new Text("table1"));
  replay(keyExtent);
  KeyExtent keyExtent2=createMock(KeyExtent.class);
  expect(keyExtent2.getTableId()).andReturn(new Text("table2"));
  replay(keyExtent2);
  mi=new MergeInfo(keyExtent,MergeInfo.Operation.MERGE);
  assertFalse(mi.needsToBeChopped(keyExtent2));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstruction_2Args(){
  mi=new MergeInfo(keyExtent,MergeInfo.Operation.DELETE);
  assertEquals(MergeState.NONE,mi.getState());
  assertSame(keyExtent,mi.getExtent());
  assertEquals(MergeInfo.Operation.DELETE,mi.getOperation());
  assertTrue(mi.isDelete());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.master.state.TabletLocationStateTest </h4><pre class="type-5 type-15 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstruction_NoCurrent() throws Exception {
  tls=new TabletLocationState(keyExtent,future,null,last,walogs,true);
  assertSame(keyExtent,tls.extent);
  assertSame(future,tls.future);
  assertNull(tls.current);
  assertSame(last,tls.last);
  assertSame(walogs,tls.walogs);
  assertTrue(tls.chopped);
}

</code></pre>

<br>
<pre class="type-5 type-15 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstruction_NoFuture() throws Exception {
  tls=new TabletLocationState(keyExtent,null,current,last,walogs,true);
  assertSame(keyExtent,tls.extent);
  assertNull(tls.future);
  assertSame(current,tls.current);
  assertSame(last,tls.last);
  assertSame(walogs,tls.walogs);
  assertTrue(tls.chopped);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.problems.ProblemReportTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testEqualsNull(){
  r=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE,SERVER,null);
  assertFalse(r.equals(null));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEquals(){
  r=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE,SERVER,null);
  assertTrue(r.equals(r));
  ProblemReport r2=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE,SERVER,null);
  assertTrue(r.equals(r2));
  assertTrue(r2.equals(r));
  ProblemReport rx1=new ProblemReport(TABLE + "x",ProblemType.FILE_READ,RESOURCE,SERVER,null);
  assertFalse(r.equals(rx1));
  ProblemReport rx2=new ProblemReport(TABLE,ProblemType.FILE_WRITE,RESOURCE,SERVER,null);
  assertFalse(r.equals(rx2));
  ProblemReport rx3=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE + "x",SERVER,null);
  assertFalse(r.equals(rx3));
  ProblemReport re1=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE,SERVER + "x",null);
  assertTrue(r.equals(re1));
  ProblemReport re2=new ProblemReport(TABLE,ProblemType.FILE_READ,RESOURCE,SERVER,new IllegalArgumentException("yikes"));
  assertTrue(r.equals(re2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.problems.ProblemReportingIteratorTest </h4><pre class="type-5 type-3 type-15 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicGetters(){
  Key key=EasyMock.createMock(Key.class);
  expect(ii.getTopKey()).andReturn(key);
  Value value=EasyMock.createMock(Value.class);
  expect(ii.getTopValue()).andReturn(value);
  expect(ii.hasTop()).andReturn(true);
  replay(ii);
  assertSame(key,pri.getTopKey());
  assertSame(value,pri.getTopValue());
  assertTrue(pri.hasTop());
  assertFalse(pri.sawError());
  assertEquals(RESOURCE,pri.getResource());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNext() throws Exception {
  ii.next();
  replay(ii);
  pri.next();
  verify(ii);
  assertFalse(pri.sawError());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSeek() throws Exception {
  Range r=EasyMock.createMock(Range.class);
  Collection<ByteSequence> f=new java.util.HashSet<ByteSequence>();
  ii.seek(r,f,true);
  replay(ii);
  pri.seek(r,f,true);
  verify(ii);
  assertFalse(pri.sawError());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.replication.StatusCombinerTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCombination(){
  List<Status> status=new ArrayList<>();
  long time=System.currentTimeMillis();
  status.add(StatusUtil.fileCreated(time));
  status.add(StatusUtil.openWithUnknownLength());
  status.add(StatusUtil.fileClosed());
  Status combined=combiner.typedReduce(new Key("row"),status.iterator());
  Assert.assertEquals(time,combined.getCreatedTime());
  Assert.assertTrue(combined.getInfiniteEnd());
  Assert.assertTrue(combined.getClosed());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void returnsSameObject(){
  Status status=StatusUtil.ingestedUntil(10);
  Status ret=combiner.typedReduce(key,Collections.singleton(status).iterator());
  Assert.assertEquals(status,ret);
  Assert.assertTrue(status == ret);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.replication.StatusUtilTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void closedFileWithInfEndAndNonMaxBeginIsNotCompletelyReplicated(){
  Assert.assertFalse(StatusUtil.isSafeForRemoval(Status.newBuilder().setClosed(true).setInfiniteEnd(true).setBegin(10000).build()));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void closedFileWithInfEndAndMaxBeginIsCompletelyReplicated(){
  Assert.assertTrue(StatusUtil.isSafeForRemoval(Status.newBuilder().setClosed(true).setInfiniteEnd(true).setBegin(Long.MAX_VALUE).build()));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void openFileIsNotCompletelyReplicated(){
  Assert.assertFalse(StatusUtil.isSafeForRemoval(Status.newBuilder().setClosed(false).setBegin(0).setEnd(1000).setInfiniteEnd(false).build()));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void closedFileWithDifferentBeginEndIsNotCompletelyReplicated(){
  Assert.assertFalse(StatusUtil.isSafeForRemoval(Status.newBuilder().setClosed(true).setBegin(0).setEnd(1000).setInfiniteEnd(false).build()));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void closeFileWithEqualBeginEndIsCompletelyReplicated(){
  Assert.assertTrue(StatusUtil.isSafeForRemoval(Status.newBuilder().setClosed(true).setEnd(100000).setBegin(100000).build()));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void newFileIsNotCompletelyReplicated(){
  Assert.assertFalse(StatusUtil.isSafeForRemoval(StatusUtil.fileCreated(0l)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.replication.proto.StatusTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void equality(){
  Status replicated=Status.newBuilder().setBegin(Long.MAX_VALUE).setEnd(0).setInfiniteEnd(true).setClosed(false).build();
  Status unreplicated=Status.newBuilder().setBegin(0).setEnd(0).setInfiniteEnd(true).setClosed(false).build();
  Assert.assertFalse(replicated.equals(unreplicated));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.SystemCredentialsTest </h4><pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testSystemCredentials(){
  Credentials a=SystemCredentials.get(inst);
  Credentials b=SystemCredentials.get(inst);
  assertTrue(a.equals(b));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.UserImpersonationTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoHostByDefault(){
  String server="server";
  setValidUsers(server,"*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertTrue(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleUserAndHost(){
  String server="server", host="single_host.domain.com", client="single_client";
  setValidHosts(server,host);
  setValidUsers(server,client);
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getUsers().contains(client));
  assertTrue(uwh.getHosts().contains(host));
  assertFalse(uwh.getUsers().contains("some_other_user"));
  assertFalse(uwh.getHosts().contains("other_host.domain.com"));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnyUserAndHosts(){
  String server="server";
  setValidHosts(server,"*");
  setValidUsers(server,"*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertTrue(uwh.acceptsAllHosts());
  assertTrue(uwh.acceptsAllUsers());
  assertEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleExplicitHosts(){
  String server="server", host1="host1", host2="host2", host3="host3";
  setValidHosts(server,Joiner.on(',').join(host1,host2,host3));
  setValidUsers(server,"*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertTrue(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getHosts().contains(host1));
  assertTrue(uwh.getHosts().contains(host2));
  assertTrue(uwh.getHosts().contains(host3));
  assertFalse(uwh.getHosts().contains("other_host"));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleExplicitUsers(){
  String server="server", client1="client1", client2="client2", client3="client3";
  setValidHosts(server,"*");
  setValidUsers(server,Joiner.on(',').join(client1,client2,client3));
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertTrue(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getUsers().contains(client1));
  assertTrue(uwh.getUsers().contains(client2));
  assertTrue(uwh.getUsers().contains(client3));
  assertFalse(uwh.getUsers().contains("other_client"));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleUser() throws Exception {
  final String server="server/hostname@EXAMPLE.COM", client="client@EXAMPLE.COM";
  conf.set(Property.INSTANCE_RPC_SASL_PROXYUSERS.getKey() + server + ".users",client);
  conf.set(Property.INSTANCE_RPC_SASL_PROXYUSERS.getKey() + server + ".hosts","*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertTrue(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertTrue(uwh.getUsers().contains(client));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoUsersByDefault(){
  String server="server";
  setValidHosts(server,"*");
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertTrue(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleAllowedImpersonators(){
  String server1="server1", server2="server2", host1="host1", host2="host2", host3="host3", client1="client1", client2="client2", client3="client3";
  setValidHosts(server1,Joiner.on(',').join(host1,host2));
  setValidUsers(server1,Joiner.on(',').join(client1,client2));
  setValidHosts(server2,host3);
  setValidUsers(server2,client3);
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server1);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getUsers().contains(client1));
  assertTrue(uwh.getUsers().contains(client2));
  assertFalse(uwh.getUsers().contains(client3));
  assertFalse(uwh.getUsers().contains("other_client"));
  assertTrue(uwh.getHosts().contains(host1));
  assertTrue(uwh.getHosts().contains(host2));
  assertFalse(uwh.getHosts().contains(host3));
  assertFalse(uwh.getHosts().contains("other_host"));
  uwh=impersonation.get(server2);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertFalse(uwh.getUsers().contains(client1));
  assertFalse(uwh.getUsers().contains(client2));
  assertTrue(uwh.getUsers().contains(client3));
  assertFalse(uwh.getUsers().contains("other_client"));
  assertFalse(uwh.getHosts().contains(host1));
  assertFalse(uwh.getHosts().contains(host2));
  assertTrue(uwh.getHosts().contains(host3));
  assertFalse(uwh.getHosts().contains("other_host"));
  assertNull(impersonation.get(client3));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleExplicitUsersHosts(){
  String server="server", host1="host1", host2="host2", host3="host3", client1="client1", client2="client2", client3="client3";
  setValidHosts(server,Joiner.on(',').join(host1,host2,host3));
  setValidUsers(server,Joiner.on(',').join(client1,client2,client3));
  UserImpersonation impersonation=new UserImpersonation(conf);
  UsersWithHosts uwh=impersonation.get(server);
  assertNotNull(uwh);
  assertFalse(uwh.acceptsAllHosts());
  assertFalse(uwh.acceptsAllUsers());
  assertNotEquals(AlwaysTrueSet.class,uwh.getHosts().getClass());
  assertNotEquals(AlwaysTrueSet.class,uwh.getUsers().getClass());
  assertTrue(uwh.getUsers().contains(client1));
  assertTrue(uwh.getUsers().contains(client2));
  assertTrue(uwh.getUsers().contains(client3));
  assertFalse(uwh.getUsers().contains("other_client"));
  assertTrue(uwh.getHosts().contains(host1));
  assertTrue(uwh.getHosts().contains(host2));
  assertTrue(uwh.getHosts().contains(host3));
  assertFalse(uwh.getHosts().contains("other_host"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.delegation.AuthenticationTokenSecretManagerTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveKey(){
  long tokenLifetime=60 * 1000;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  AuthenticationKey authKey=new AuthenticationKey(1,0,tokenLifetime,keyGen.generateKey());
  secretManager.addKey(authKey);
  Map<Integer,AuthenticationKey> keys=secretManager.getKeys();
  assertNotNull(keys);
  assertEquals(1,keys.size());
  assertEquals(authKey,Iterables.getOnlyElement(keys.values()));
  assertTrue(secretManager.removeKey(authKey.getKeyId()));
  assertEquals(0,secretManager.getKeys().size());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVerifyPassword() throws Exception {
  long then=System.currentTimeMillis();
  long tokenLifetime=60 * 1000;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  secretManager.addKey(new AuthenticationKey(1,then,then + tokenLifetime,keyGen.generateKey()));
  String principal="user@EXAMPLE.COM";
  Entry<Token<AuthenticationTokenIdentifier>,AuthenticationTokenIdentifier> pair=secretManager.generateToken(principal,cfg);
  Token<AuthenticationTokenIdentifier> token=pair.getKey();
  AuthenticationTokenIdentifier id=new AuthenticationTokenIdentifier();
  id.readFields(new DataInputStream(new ByteArrayInputStream(token.getIdentifier())));
  byte[] password=secretManager.retrievePassword(id);
  assertArrayEquals(password,secretManager.retrievePassword(id));
  Entry<Token<AuthenticationTokenIdentifier>,AuthenticationTokenIdentifier> pair2=secretManager.generateToken(principal,cfg);
  Token<AuthenticationTokenIdentifier> token2=pair2.getKey();
  AuthenticationTokenIdentifier id2=new AuthenticationTokenIdentifier();
  id2.readFields(new DataInputStream(new ByteArrayInputStream(token2.getIdentifier())));
  byte[] password2=secretManager.retrievePassword(id2);
  assertFalse("Different tokens for the same user shouldn't have the same password",Arrays.equals(password,password2));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestrictExpirationDate() throws Exception {
  long then=System.currentTimeMillis();
  long tokenLifetime=60 * 60 * 1000;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  secretManager.addKey(new AuthenticationKey(1,then,then + tokenLifetime,keyGen.generateKey()));
  cfg.setTokenLifetime(1,TimeUnit.MINUTES);
  String principal="user@EXAMPLE.COM";
  Entry<Token<AuthenticationTokenIdentifier>,AuthenticationTokenIdentifier> pair=secretManager.generateToken(principal,cfg);
  assertNotNull(pair);
  long now=System.currentTimeMillis();
  long actualExpiration=pair.getValue().getExpirationDate();
  long approximateLifetime=actualExpiration - now;
  log.info("actualExpiration={}, approximateLifetime={}",actualExpiration,approximateLifetime);
  assertTrue("Expected lifetime to be on thet order of the token lifetime, but was " + approximateLifetime,approximateLifetime <= cfg.getTokenLifetime(TimeUnit.MILLISECONDS));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGenerateToken() throws Exception {
  long then=System.currentTimeMillis();
  long tokenLifetime=60 * 1000;
  AuthenticationTokenSecretManager secretManager=new AuthenticationTokenSecretManager(instance,tokenLifetime);
  secretManager.addKey(new AuthenticationKey(1,then,then + tokenLifetime,keyGen.generateKey()));
  String principal="user@EXAMPLE.COM";
  Entry<Token<AuthenticationTokenIdentifier>,AuthenticationTokenIdentifier> pair=secretManager.generateToken(principal,cfg);
  assertNotNull(pair);
  Token<AuthenticationTokenIdentifier> token=pair.getKey();
  assertNotNull(token);
  assertEquals(AuthenticationTokenIdentifier.TOKEN_KIND,token.getKind());
  AuthenticationTokenIdentifier id=new AuthenticationTokenIdentifier();
  id.readFields(new DataInputStream(new ByteArrayInputStream(token.getIdentifier())));
  long now=System.currentTimeMillis();
  assertTrue("Issue date did not fall within the expected upper bound. Expected less than " + now + ", but was "+ id.getIssueDate(),id.getIssueDate() <= now);
  assertTrue("Issue date did not fall within the expected lower bound. Expected greater than " + then + ", but was "+ id.getIssueDate(),id.getIssueDate() >= then);
  assertEquals(id.getIssueDate() + tokenLifetime,id.getExpirationDate());
  assertEquals(instanceId,id.getInstanceId());
  assertEquals(pair.getValue(),id);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.security.delegation.ZooAuthenticationKeyWatcherTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBaseNodeDataChanged() throws Exception {
  WatchedEvent event=new WatchedEvent(EventType.NodeDataChanged,null,baseNode);
  replay(instance,zk);
  keyWatcher.process(event);
  verify(instance,zk);
  assertEquals(0,secretManager.getKeys().size());
  assertFalse(secretManager.isCurrentKeySet());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBaseNodeDeleted() throws Exception {
  WatchedEvent event=new WatchedEvent(EventType.NodeDeleted,null,baseNode);
  AuthenticationKey key1=new AuthenticationKey(1,0l,10000l,keyGen.generateKey()), key2=new AuthenticationKey(2,key1.getExpirationDate(),20000l,keyGen.generateKey());
  secretManager.addKey(key1);
  secretManager.addKey(key2);
  assertEquals(2,secretManager.getKeys().size());
  replay(instance,zk);
  keyWatcher.process(event);
  verify(instance,zk);
  assertEquals(0,secretManager.getKeys().size());
  assertFalse(secretManager.isCurrentKeySet());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testBaseNodeCreated() throws Exception {
  WatchedEvent event=new WatchedEvent(EventType.NodeCreated,null,baseNode);
  expect(zk.getChildren(baseNode,keyWatcher)).andReturn(Collections.<String>emptyList());
  replay(instance,zk);
  keyWatcher.process(event);
  verify(instance,zk);
  assertTrue(secretManager.getKeys().isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.tablets.MillisTimeTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAndUpdateTime(){
  long currTime=mtime.getAndUpdateTime();
  assertTrue(currTime > TIME);
  assertEquals(currTime,mtime.getTime());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSetUpdateTimes(){
  List<Mutation> ms=new java.util.ArrayList<Mutation>();
  ServerMutation m=createMock(ServerMutation.class);
  m.setSystemTimestamp(anyLong());
  replay(m);
  ms.add(m);
  long currTime=mtime.setUpdateTimes(ms);
  assertTrue(currTime > TIME);
  verify(m);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.AdminCommandsTest </h4><pre class="type-5 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDumpConfigCommand(){
  Admin.DumpConfigCommand cmd=new Admin.DumpConfigCommand();
  assertEquals(0,cmd.tables.size());
  assertFalse(cmd.allConfiguration);
  assertFalse(cmd.systemConfiguration);
  assertFalse(cmd.namespaceConfiguration);
  assertFalse(cmd.users);
  assertNull(cmd.directory);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testVolumesCommand(){
  Admin.VolumesCommand cmd=new Admin.VolumesCommand();
  assertFalse(cmd.printErrors);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheckTabletsCommand(){
  Admin.CheckTabletsCommand cmd=new Admin.CheckTabletsCommand();
  assertFalse(cmd.fixFiles);
  assertNull(cmd.table);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testAdminOpts(){
  Admin.AdminOpts opts=new Admin.AdminOpts();
  assertFalse(opts.force);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testListInstancesCommand(){
  Admin.ListInstancesCommand cmd=new Admin.ListInstancesCommand();
  assertFalse(cmd.printErrors);
  assertFalse(cmd.printAll);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.FileSystemMonitorTest </h4><pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilteredMountEntries() throws Exception {
  String[] mountEntries=new String[]{"rootfs / rootfs rw 0 0","proc /proc proc rw,nosuid,nodev,noexec,relatime 0 0","sysfs /sys sysfs rw,seclabel,nosuid,nodev,noexec,relatime 0 0","devtmpfs /dev devtmpfs rw,seclabel,nosuid,size=8119336k,nr_inodes=2029834,mode=755 0 0","securityfs /sys/kernel/security securityfs rw,nosuid,nodev,noexec,relatime 0 0","tmpfs /dev/shm tmpfs rw,seclabel,nosuid,nodev 0 0","devpts /dev/pts devpts rw,seclabel,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000 0 0","tmpfs /run tmpfs rw,seclabel,nosuid,nodev,mode=755 0 0","tmpfs /sys/fs/cgroup tmpfs ro,seclabel,nosuid,nodev,noexec,mode=755 0 0","cgroup /sys/fs/cgroup/systemd cgroup rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd 0 0","pstore /sys/fs/pstore pstore rw,nosuid,nodev,noexec,relatime 0 0","cgroup /sys/fs/cgroup/cpuset cgroup rw,nosuid,nodev,noexec,relatime,cpuset 0 0","cgroup /sys/fs/cgroup/cpu,cpuacct cgroup rw,nosuid,nodev,noexec,relatime,cpuacct,cpu 0 0","cgroup /sys/fs/cgroup/memory cgroup rw,nosuid,nodev,noexec,relatime,memory 0 0","cgroup /sys/fs/cgroup/devices cgroup rw,nosuid,nodev,noexec,relatime,devices 0 0","cgroup /sys/fs/cgroup/freezer cgroup rw,nosuid,nodev,noexec,relatime,freezer 0 0","cgroup /sys/fs/cgroup/net_cls cgroup rw,nosuid,nodev,noexec,relatime,net_cls 0 0","cgroup /sys/fs/cgroup/blkio cgroup rw,nosuid,nodev,noexec,relatime,blkio 0 0","cgroup /sys/fs/cgroup/perf_event cgroup rw,nosuid,nodev,noexec,relatime,perf_event 0 0","cgroup /sys/fs/cgroup/hugetlb cgroup rw,nosuid,nodev,noexec,relatime,hugetlb 0 0","configfs /sys/kernel/config configfs rw,relatime 0 0","/dev/vda1 / xfs rw,seclabel,relatime,attr2,inode64,noquota 0 0","/dev/vda2 /ignoreme reiserfs rw 0 0","rpc_pipefs /var/lib/nfs/rpc_pipefs rpc_pipefs rw,relatime 0 0","selinuxfs /sys/fs/selinux selinuxfs rw,relatime 0 0","systemd-1 /proc/sys/fs/binfmt_misc autofs rw,relatime,fd=32,pgrp=1,timeout=300,minproto=5,maxproto=5,direct 0 0","debugfs /sys/kernel/debug debugfs rw,relatime 0 0","mqueue /dev/mqueue mqueue rw,seclabel,relatime 0 0","hugetlbfs /dev/hugepages hugetlbfs rw,seclabel,relatime 0 0","sunrpc /proc/fs/nfsd nfsd rw,relatime 0 0","/dev/vdb /grid/0 ext4 rw,seclabel,relatime,data=ordered 0 0"};
  StringBuilder sb=new StringBuilder(256);
  for (  String mountEntry : mountEntries) {
    if (sb.length() > 0) {
      sb.append("\n");
    }
    sb.append(mountEntry);
  }
  ByteArrayInputStream is=new ByteArrayInputStream(sb.toString().getBytes(UTF_8));
  BufferedReader reader=new BufferedReader(new InputStreamReader(is));
  List<Mount> mounts=FileSystemMonitor.getMountsFromFile(reader);
  log.info("Filtered mount points: " + mounts);
  assertEquals(2,mounts.size());
  Set<String> expectedCheckedMountPoints=new HashSet<String>();
  expectedCheckedMountPoints.add("/");
  expectedCheckedMountPoints.add("/grid/0");
  for (  Mount mount : mounts) {
    assertTrue("Did not expect to find " + mount,expectedCheckedMountPoints.remove(mount.mountPoint));
  }
  assertEquals("Should not have any extra mount points: " + expectedCheckedMountPoints,0,expectedCheckedMountPoints.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.FileUtilTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCleanupIndexOpWithoutCommonParentVolumeWithDepth() throws IOException {
  File v1=new File(accumuloDir,"v1"), v2=new File(accumuloDir,"v2");
  assertTrue(v1.mkdirs() || v1.isDirectory());
  assertTrue(v2.mkdirs() || v2.isDirectory());
  File tmp1=new File(new File(v1,"tmp"),"tmp_1"), tmp2=new File(new File(v2,"tmp"),"tmp_1");
  assertTrue(tmp1.mkdirs() || tmp1.isDirectory());
  assertTrue(tmp2.mkdirs() || tmp2.isDirectory());
  Path tmpPath1=new Path(tmp1.toURI()), tmpPath2=new Path(tmp2.toURI());
  HashMap<Property,String> testProps=new HashMap<Property,String>();
  testProps.put(Property.INSTANCE_VOLUMES,v1.toURI().toString() + "," + v2.toURI().toString());
  AccumuloConfiguration testConf=new FileUtilTestConfiguration(testProps);
  VolumeManager fs=VolumeManagerImpl.getLocal(accumuloDir.getAbsolutePath());
  FileUtil.cleanupIndexOp(testConf,tmpPath1,fs,new ArrayList<FileSKVIterator>());
  Assert.assertFalse("Expected " + tmp1 + " to be cleaned up but it wasn't",tmp1.exists());
  FileUtil.cleanupIndexOp(testConf,tmpPath2,fs,new ArrayList<FileSKVIterator>());
  Assert.assertFalse("Expected " + tmp2 + " to be cleaned up but it wasn't",tmp2.exists());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@SuppressWarnings("deprecation") @Test public void testCleanupIndexOpWithDfsDir() throws IOException {
  File tmp1=new File(accumuloDir,"tmp");
  assertTrue(tmp1.mkdirs() || tmp1.isDirectory());
  Path tmpPath1=new Path(tmp1.toURI());
  HashMap<Property,String> testProps=new HashMap<Property,String>();
  testProps.put(Property.INSTANCE_DFS_DIR,accumuloDir.getAbsolutePath());
  AccumuloConfiguration testConf=new FileUtilTestConfiguration(testProps);
  VolumeManager fs=VolumeManagerImpl.getLocal(accumuloDir.getAbsolutePath());
  FileUtil.cleanupIndexOp(testConf,tmpPath1,fs,new ArrayList<FileSKVIterator>());
  Assert.assertFalse("Expected " + tmp1 + " to be cleaned up but it wasn't",tmp1.exists());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCleanupIndexOpWithoutCommonParentVolume() throws IOException {
  File v1=new File(accumuloDir,"v1"), v2=new File(accumuloDir,"v2");
  assertTrue(v1.mkdirs() || v1.isDirectory());
  assertTrue(v2.mkdirs() || v2.isDirectory());
  File tmp1=new File(v1,"tmp"), tmp2=new File(v2,"tmp");
  assertTrue(tmp1.mkdirs() || tmp1.isDirectory());
  assertTrue(tmp2.mkdirs() || tmp2.isDirectory());
  Path tmpPath1=new Path(tmp1.toURI()), tmpPath2=new Path(tmp2.toURI());
  HashMap<Property,String> testProps=new HashMap<Property,String>();
  testProps.put(Property.INSTANCE_VOLUMES,v1.toURI().toString() + "," + v2.toURI().toString());
  AccumuloConfiguration testConf=new FileUtilTestConfiguration(testProps);
  VolumeManager fs=VolumeManagerImpl.getLocal(accumuloDir.getAbsolutePath());
  FileUtil.cleanupIndexOp(testConf,tmpPath1,fs,new ArrayList<FileSKVIterator>());
  Assert.assertFalse("Expected " + tmp1 + " to be cleaned up but it wasn't",tmp1.exists());
  FileUtil.cleanupIndexOp(testConf,tmpPath2,fs,new ArrayList<FileSKVIterator>());
  Assert.assertFalse("Expected " + tmp2 + " to be cleaned up but it wasn't",tmp2.exists());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCleanupIndexOpWithCommonParentVolume() throws IOException {
  File volumeDir=new File(accumuloDir,"volumes");
  assertTrue(volumeDir.mkdirs() || volumeDir.isDirectory());
  File v1=new File(volumeDir,"v1"), v2=new File(volumeDir,"v2");
  assertTrue(v1.mkdirs() || v1.isDirectory());
  assertTrue(v2.mkdirs() || v2.isDirectory());
  File tmp1=new File(v1,"tmp"), tmp2=new File(v2,"tmp");
  assertTrue(tmp1.mkdirs() || tmp1.isDirectory());
  assertTrue(tmp2.mkdirs() || tmp2.isDirectory());
  Path tmpPath1=new Path(tmp1.toURI()), tmpPath2=new Path(tmp2.toURI());
  HashMap<Property,String> testProps=new HashMap<Property,String>();
  testProps.put(Property.INSTANCE_VOLUMES,v1.toURI().toString() + "," + v2.toURI().toString());
  AccumuloConfiguration testConf=new FileUtilTestConfiguration(testProps);
  VolumeManager fs=VolumeManagerImpl.getLocal(accumuloDir.getAbsolutePath());
  FileUtil.cleanupIndexOp(testConf,tmpPath1,fs,new ArrayList<FileSKVIterator>());
  Assert.assertFalse("Expected " + tmp1 + " to be cleaned up but it wasn't",tmp1.exists());
  FileUtil.cleanupIndexOp(testConf,tmpPath2,fs,new ArrayList<FileSKVIterator>());
  Assert.assertFalse("Expected " + tmp2 + " to be cleaned up but it wasn't",tmp2.exists());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCleanupIndexOpWithCommonParentVolumeWithDepth() throws IOException {
  File volumeDir=new File(accumuloDir,"volumes");
  assertTrue(volumeDir.mkdirs() || volumeDir.isDirectory());
  File v1=new File(volumeDir,"v1"), v2=new File(volumeDir,"v2");
  assertTrue(v1.mkdirs() || v1.isDirectory());
  assertTrue(v2.mkdirs() || v2.isDirectory());
  File tmp1=new File(new File(v1,"tmp"),"tmp_1"), tmp2=new File(new File(v2,"tmp"),"tmp_1");
  assertTrue(tmp1.mkdirs() || tmp1.isDirectory());
  assertTrue(tmp2.mkdirs() || tmp2.isDirectory());
  Path tmpPath1=new Path(tmp1.toURI()), tmpPath2=new Path(tmp2.toURI());
  HashMap<Property,String> testProps=new HashMap<Property,String>();
  testProps.put(Property.INSTANCE_VOLUMES,v1.toURI().toString() + "," + v2.toURI().toString());
  AccumuloConfiguration testConf=new FileUtilTestConfiguration(testProps);
  VolumeManager fs=VolumeManagerImpl.getLocal(accumuloDir.getAbsolutePath());
  FileUtil.cleanupIndexOp(testConf,tmpPath1,fs,new ArrayList<FileSKVIterator>());
  Assert.assertFalse("Expected " + tmp1 + " to be cleaned up but it wasn't",tmp1.exists());
  FileUtil.cleanupIndexOp(testConf,tmpPath2,fs,new ArrayList<FileSKVIterator>());
  Assert.assertFalse("Expected " + tmp2 + " to be cleaned up but it wasn't",tmp2.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.TServerUtilsTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testStopTServer_ES(){
  TServerSocket socket=createNiceMock(TServerSocket.class);
  TServerWithES s=new TServerWithES(socket);
  TServerUtils.stopTServer(s);
  assertTrue(s.stopCalled);
  verify(s.executorService_);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testStopTServer_NoES(){
  TServerSocket socket=createNiceMock(TServerSocket.class);
  TServerWithoutES s=new TServerWithoutES(socket);
  TServerUtils.stopTServer(s);
  assertTrue(s.stopCalled);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.time.BaseRelativeTimeTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFutureTime(){
  BogusTime advice=new BogusTime();
  BogusTime local=new BogusTime();
  local.value=advice.value=System.currentTimeMillis();
  advice.value+=10000;
  BaseRelativeTime brt=new BaseRelativeTime(local);
  assertEquals(brt.currentTime(),local.value);
  brt.updateTime(advice.value);
  long once=brt.currentTime();
  assertTrue(once < advice.value);
  assertTrue(once > local.value);
  for (int i=0; i < 100; i++) {
    brt.updateTime(advice.value);
  }
  long many=brt.currentTime();
  assertTrue(many > once);
  assertTrue("after much advice, relative time is still closer to local time",(advice.value - many) < (once - local.value));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPastTime(){
  BogusTime advice=new BogusTime();
  BogusTime local=new BogusTime();
  local.value=advice.value=System.currentTimeMillis();
  advice.value-=10000;
  BaseRelativeTime brt=new BaseRelativeTime(local);
  brt.updateTime(advice.value);
  long once=brt.currentTime();
  assertTrue(once < local.value);
  brt.updateTime(advice.value);
  long twice=brt.currentTime();
  assertTrue("Time cannot go backwards",once <= twice);
  brt.updateTime(advice.value - 10000);
  assertTrue("Time cannot go backwards",once <= twice);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.util.time.SimpleTimerTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testFailure() throws InterruptedException {
  Thrower r=new Thrower();
  t.schedule(r,DELAY);
  Thread.sleep(DELAY + PAD);
  assertTrue(r.wasRun);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.server.watcher.MonitorLog4jWatcherTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetters(){
  assertFalse(w.isUsingProperties());
  assertEquals(ZooUtil.getRoot(INSTANCE) + Constants.ZMONITOR_LOG4J_ADDR,w.getPath());
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testPropertyDetection(){
  w=new MonitorLog4jWatcher(INSTANCE,FILENAME + ".properties");
  assertTrue(w.isUsingProperties());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.ShellConfigTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testBadArg(){
  assertFalse(shell.config(args("--bogus")));
  assertTrue("Did not print usage",output.get().startsWith("Usage"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testTokenWithoutOptions(){
  assertFalse(shell.config(args("--fake","-tc",PasswordToken.class.getName())));
  assertFalse(output.get().contains(ParameterException.class.getName()));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testTokenAndOption(){
  assertTrue(shell.config(args("--fake","-tc",PasswordToken.class.getName(),"-u","foo","-l","password=foo")));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testTokenAndOptionAndPassword(){
  assertFalse(shell.config(args("--fake","-tc",PasswordToken.class.getName(),"-l","password=foo","-p","bar")));
  assertTrue(output.get().contains(ParameterException.class.getName()));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testHelp(){
  assertFalse(shell.config(args("--help")));
  assertTrue("Did not print usage",output.get().startsWith("Usage"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.ShellSetInstanceTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Deprecated @Test public void testSetInstance_Fake() throws Exception {
  ShellOptionsJC opts=createMock(ShellOptionsJC.class);
  expect(opts.isFake()).andReturn(true);
  replay(opts);
  shell.setInstance(opts);
  Assert.assertTrue(shell.getInstance() instanceof org.apache.accumulo.core.client.mock.MockInstance);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.commands.HistoryCommandTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testCorrectNumbering() throws IOException {
  command.execute("",cl,shell);
  reader.flush();
  assertTrue(baos.toString().contains("2: bar"));
}

</code></pre>

<br>
<pre class="type-5 type-21 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEventExpansion() throws IOException {
  Assume.assumeTrue(reader.getTerminal().isSupported());
  reader.readLine();
  assertTrue(baos.toString().trim().endsWith("foo"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.shell.format.DeleterFormatterTest </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testEmpty(){
  formatter=new DeleterFormatter(writer,Collections.<Key,Value>emptyMap().entrySet(),new FormatterConfig().setPrintTimestamps(true),shellState,true);
  assertFalse(formatter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testYes() throws IOException {
  input.set("y\nyes\n");
  data.put(new Key("z"),new Value("v2".getBytes(UTF_8)));
  formatter=new DeleterFormatter(writer,data.entrySet(),new FormatterConfig().setPrintTimestamps(true),shellState,false);
  assertTrue(formatter.hasNext());
  assertNull(formatter.next());
  verify("[DELETED]"," r ","cf","cq","value");
  assertTrue(formatter.hasNext());
  assertNull(formatter.next());
  verify("[DELETED]"," z ","v2");
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNo() throws IOException {
  input.set("no\n");
  data.put(new Key("z"),new Value("v2".getBytes(UTF_8)));
  formatter=new DeleterFormatter(writer,data.entrySet(),new FormatterConfig().setPrintTimestamps(true),shellState,false);
  assertTrue(formatter.hasNext());
  assertNull(formatter.next());
  verify("[SKIPPED]"," r ","cf","cq","value");
  assertTrue(formatter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoConfirmation() throws IOException {
  input.set("");
  data.put(new Key("z"),new Value("v2".getBytes(UTF_8)));
  formatter=new DeleterFormatter(writer,data.entrySet(),new FormatterConfig().setPrintTimestamps(true),shellState,false);
  assertTrue(formatter.hasNext());
  assertNull(formatter.next());
  verify("[SKIPPED]"," r ","cf","cq","value");
  assertFalse(formatter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMutationException(){
  formatter=new DeleterFormatter(exceptionWriter,data.entrySet(),new FormatterConfig().setPrintTimestamps(true),shellState,true);
  assertTrue(formatter.hasNext());
  assertNull(formatter.next());
  assertFalse(formatter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingle() throws IOException {
  formatter=new DeleterFormatter(writer,data.entrySet(),new FormatterConfig().setPrintTimestamps(true),shellState,true);
  assertTrue(formatter.hasNext());
  assertNull(formatter.next());
  verify("[DELETED]"," r ","cf","cq","value");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.start.classloader.vfs.AccumuloReloadingVFSClassLoaderTest </h4><pre class="type-9 type-5 type-3 type-2 type-18 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Is not executed with the test suite
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @Ignore public void testFastDeleteAndReAdd() throws Exception {
  FileObject testDir=vfs.resolveFile(folder1.getRoot().toURI().toString());
  FileObject[] dirContents=testDir.getChildren();
  AccumuloReloadingVFSClassLoader arvcl=new AccumuloReloadingVFSClassLoader(folderPath,vfs,new ReloadingClassLoader(){
    @Override public ClassLoader getClassLoader(){
      return ClassLoader.getSystemClassLoader();
    }
  }
,1000,true);
  FileObject[] files=((VFSClassLoader)arvcl.getClassLoader()).getFileObjects();
  Assert.assertArrayEquals(createFileSystems(dirContents),files);
  Class<?> clazz1=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Object o1=clazz1.newInstance();
  Assert.assertEquals("Hello World!",o1.toString());
  Class<?> clazz1_5=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Assert.assertEquals(clazz1,clazz1_5);
  assertTrue(new File(folder1.getRoot(),"HelloWorld.jar").delete());
  FileUtils.copyURLToFile(this.getClass().getResource("/HelloWorld.jar"),folder1.newFile("HelloWorld.jar"));
  Thread.sleep(7000);
  Class<?> clazz2=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Object o2=clazz2.newInstance();
  Assert.assertEquals("Hello World!",o2.toString());
  Assert.assertFalse(clazz1.equals(clazz2));
  Assert.assertFalse(o1.equals(o2));
  arvcl.close();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifiedClass() throws Exception {
  FileObject testDir=vfs.resolveFile(folder1.getRoot().toURI().toString());
  FileObject[] dirContents=testDir.getChildren();
  AccumuloReloadingVFSClassLoader arvcl=new AccumuloReloadingVFSClassLoader(folderPath,vfs,new ReloadingClassLoader(){
    @Override public ClassLoader getClassLoader(){
      return ClassLoader.getSystemClassLoader();
    }
  }
,1000,true);
  FileObject[] files=((VFSClassLoader)arvcl.getClassLoader()).getFileObjects();
  Assert.assertArrayEquals(createFileSystems(dirContents),files);
  ClassLoader loader1=arvcl.getClassLoader();
  Class<?> clazz1=loader1.loadClass("test.HelloWorld");
  Object o1=clazz1.newInstance();
  Assert.assertEquals("Hello World!",o1.toString());
  Class<?> clazz1_5=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Assert.assertEquals(clazz1,clazz1_5);
  Thread.sleep(1000);
  assertTrue(new File(folder1.getRoot(),"HelloWorld.jar").delete());
  FileUtils.copyURLToFile(this.getClass().getResource("/HelloWorld2.jar"),folder1.newFile("HelloWorld.jar"));
  Thread.sleep(7000);
  Class<?> clazz2=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Object o2=clazz2.newInstance();
  Assert.assertEquals("Hallo Welt",o2.toString());
  Assert.assertFalse(clazz1.equals(clazz2));
  Assert.assertFalse(o1.equals(o2));
  Class<?> clazz3=loader1.loadClass("test.HelloWorld");
  Object o3=clazz3.newInstance();
  Assert.assertEquals("Hello World!",o3.toString());
  arvcl.close();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReloading() throws Exception {
  FileObject testDir=vfs.resolveFile(folder1.getRoot().toURI().toString());
  FileObject[] dirContents=testDir.getChildren();
  AccumuloReloadingVFSClassLoader arvcl=new AccumuloReloadingVFSClassLoader(folderPath,vfs,new ReloadingClassLoader(){
    @Override public ClassLoader getClassLoader(){
      return ClassLoader.getSystemClassLoader();
    }
  }
,1000,true);
  FileObject[] files=((VFSClassLoader)arvcl.getClassLoader()).getFileObjects();
  Assert.assertArrayEquals(createFileSystems(dirContents),files);
  Class<?> clazz1=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Object o1=clazz1.newInstance();
  Assert.assertEquals("Hello World!",o1.toString());
  Class<?> clazz1_5=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Assert.assertEquals(clazz1,clazz1_5);
  assertTrue(new File(folder1.getRoot(),"HelloWorld.jar").delete());
  Thread.sleep(7000);
  FileUtils.copyURLToFile(this.getClass().getResource("/HelloWorld.jar"),folder1.newFile("HelloWorld2.jar"));
  Thread.sleep(7000);
  Class<?> clazz2=arvcl.getClassLoader().loadClass("test.HelloWorld");
  Object o2=clazz2.newInstance();
  Assert.assertEquals("Hello World!",o2.toString());
  Assert.assertFalse(clazz1.equals(clazz2));
  Assert.assertFalse(o1.equals(o2));
  arvcl.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.start.classloader.vfs.AccumuloVFSClassLoaderTest </h4><pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testCacheDirectoryConfigured() throws Exception {
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"loader",(AccumuloReloadingVFSClassLoader)null);
  String cacheDir="/some/random/cache/dir";
  File conf=folder1.newFile("accumulo-site.xml");
  FileWriter out=new FileWriter(conf);
  out.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n");
  out.append("<configuration>\n");
  out.append("<property>\n");
  out.append("<name>general.classpaths</name>\n");
  out.append("<value></value>\n");
  out.append("</property>\n");
  out.append("<property>\n");
  out.append("<name>" + AccumuloVFSClassLoader.VFS_CACHE_DIR + "</name>\n");
  out.append("<value>" + cacheDir + "</value>\n");
  out.append("</property>\n");
  out.append("</configuration>\n");
  out.close();
  Whitebox.setInternalState(AccumuloClassLoader.class,"SITE_CONF",conf.toURI().toURL().toString());
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"lock",new Object());
  AccumuloVFSClassLoader.getClassLoader();
  FileSystemManager manager=AccumuloVFSClassLoader.generateVfs();
  UniqueFileReplicator replicator=Whitebox.getInternalState(manager,"fileReplicator");
  File tempDir=Whitebox.getInternalState(replicator,"tempDir");
  String tempDirParent=tempDir.getParent();
  String tempDirName=tempDir.getName();
  Assert.assertTrue(cacheDir.equals(tempDirParent));
  Assert.assertTrue(tempDirName.startsWith("accumulo-vfs-cache-"));
  Assert.assertTrue(tempDirName.endsWith(System.getProperty("user.name","nouser")));
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"loader",(AccumuloReloadingVFSClassLoader)null);
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testDefaultCacheDirectory() throws Exception {
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"loader",(AccumuloReloadingVFSClassLoader)null);
  File conf=folder1.newFile("accumulo-site.xml");
  FileWriter out=new FileWriter(conf);
  out.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n");
  out.append("<configuration>\n");
  out.append("<property>\n");
  out.append("<name>general.classpaths</name>\n");
  out.append("<value></value>\n");
  out.append("</property>\n");
  out.append("<property>\n");
  out.append("<name>general.vfs.classpaths</name>\n");
  out.append("<value></value>\n");
  out.append("</property>\n");
  out.append("</configuration>\n");
  out.close();
  Whitebox.setInternalState(AccumuloClassLoader.class,"SITE_CONF",conf.toURI().toURL().toString());
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"lock",new Object());
  AccumuloVFSClassLoader.getClassLoader();
  FileSystemManager manager=AccumuloVFSClassLoader.generateVfs();
  UniqueFileReplicator replicator=Whitebox.getInternalState(manager,"fileReplicator");
  File tempDir=Whitebox.getInternalState(replicator,"tempDir");
  String tempDirParent=tempDir.getParent();
  String tempDirName=tempDir.getName();
  String javaIoTmpDir=System.getProperty("java.io.tmpdir");
  if (javaIoTmpDir.endsWith(File.separator)) {
    javaIoTmpDir=javaIoTmpDir.substring(0,javaIoTmpDir.length() - File.separator.length());
  }
  Assert.assertTrue(javaIoTmpDir.equals(tempDirParent));
  Assert.assertTrue(tempDirName.startsWith("accumulo-vfs-cache-"));
  Assert.assertTrue(tempDirName.endsWith(System.getProperty("user.name","nouser")));
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"loader",(AccumuloReloadingVFSClassLoader)null);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testDefaultConfig() throws Exception {
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"loader",(AccumuloReloadingVFSClassLoader)null);
  File conf=folder1.newFile("accumulo-site.xml");
  FileWriter out=new FileWriter(conf);
  out.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n");
  out.append("<configuration>\n");
  out.append("<property>\n");
  out.append("<name>general.classpaths</name>\n");
  out.append("<value></value>\n");
  out.append("</property>\n");
  out.append("<property>\n");
  out.append("<name>general.vfs.classpaths</name>\n");
  out.append("<value></value>\n");
  out.append("</property>\n");
  out.append("</configuration>\n");
  out.close();
  Whitebox.setInternalState(AccumuloClassLoader.class,"SITE_CONF",conf.toURI().toURL().toString());
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"lock",new Object());
  ClassLoader acl=AccumuloVFSClassLoader.getClassLoader();
  Assert.assertTrue((acl instanceof VFSClassLoader));
  Assert.assertTrue((acl.getParent() instanceof URLClassLoader));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultContextConfigured() throws Exception {
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"loader",(AccumuloReloadingVFSClassLoader)null);
  FileUtils.copyURLToFile(this.getClass().getResource("/HelloWorld.jar"),folder1.newFile("HelloWorld.jar"));
  File conf=folder1.newFile("accumulo-site.xml");
  FileWriter out=new FileWriter(conf);
  out.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n");
  out.append("<configuration>\n");
  out.append("<property>\n");
  out.append("<name>general.classpaths</name>\n");
  out.append("<value></value>\n");
  out.append("</property>\n");
  out.append("<property>\n");
  out.append("<name>general.vfs.classpaths</name>\n");
  out.append("<value>" + new File(folder1.getRoot(),"HelloWorld.jar").toURI() + "</value>\n");
  out.append("</property>\n");
  out.append("</configuration>\n");
  out.close();
  Whitebox.setInternalState(AccumuloClassLoader.class,"SITE_CONF",conf.toURI().toURL().toString());
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"lock",new Object());
  ClassLoader acl=AccumuloVFSClassLoader.getClassLoader();
  Assert.assertTrue((acl instanceof VFSClassLoader));
  Assert.assertTrue((acl.getParent() instanceof VFSClassLoader));
  VFSClassLoader arvcl=(VFSClassLoader)acl.getParent();
  Assert.assertEquals(1,arvcl.getFileObjects().length);
  Assert.assertTrue(arvcl.getFileObjects()[0].getURL().toString().contains("HelloWorld.jar"));
  Class<?> clazz1=arvcl.loadClass("test.HelloWorld");
  Object o1=clazz1.newInstance();
  Assert.assertEquals("Hello World!",o1.toString());
  Whitebox.setInternalState(AccumuloVFSClassLoader.class,"loader",(AccumuloReloadingVFSClassLoader)null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.start.classloader.vfs.ContextManagerTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPostDelegation() throws Exception {
  final VFSClassLoader parent=new VFSClassLoader(new FileObject[]{vfs.resolveFile(uri1)},vfs);
  Class<?> pclass=parent.loadClass("test.HelloWorld");
  ContextManager cm=new ContextManager(vfs,new ReloadingClassLoader(){
    @Override public ClassLoader getClassLoader(){
      return parent;
    }
  }
);
  cm.setContextConfig(new ContextsConfig(){
    @Override public ContextConfig getContextConfig(    String context){
      if (context.equals("CX1")) {
        return new ContextConfig(uri2.toString(),true);
      }
 else       if (context.equals("CX2")) {
        return new ContextConfig(uri2.toString(),false);
      }
      return null;
    }
  }
);
  Assert.assertTrue(cm.getClassLoader("CX1").loadClass("test.HelloWorld") == pclass);
  Assert.assertFalse(cm.getClassLoader("CX2").loadClass("test.HelloWorld") == pclass);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void differentContexts() throws Exception {
  ContextManager cm=new ContextManager(vfs,new ReloadingClassLoader(){
    @Override public ClassLoader getClassLoader(){
      return ClassLoader.getSystemClassLoader();
    }
  }
);
  cm.setContextConfig(new ContextsConfig(){
    @Override public ContextConfig getContextConfig(    String context){
      if (context.equals("CX1")) {
        return new ContextConfig(uri1,true);
      }
 else       if (context.equals("CX2")) {
        return new ContextConfig(uri2,true);
      }
      return null;
    }
  }
);
  FileObject testDir=vfs.resolveFile(folder1.getRoot().toURI().toString());
  FileObject[] dirContents=testDir.getChildren();
  ClassLoader cl1=cm.getClassLoader("CX1");
  FileObject[] files=((VFSClassLoader)cl1).getFileObjects();
  Assert.assertArrayEquals(createFileSystems(dirContents),files);
  FileObject testDir2=vfs.resolveFile(folder2.getRoot().toURI().toString());
  FileObject[] dirContents2=testDir2.getChildren();
  ClassLoader cl2=cm.getClassLoader("CX2");
  FileObject[] files2=((VFSClassLoader)cl2).getFileObjects();
  Assert.assertArrayEquals(createFileSystems(dirContents2),files2);
  Class<?> defaultContextClass=cl1.loadClass("test.HelloWorld");
  Object o1=defaultContextClass.newInstance();
  Assert.assertEquals("Hello World!",o1.toString());
  Class<?> myContextClass=cl2.loadClass("test.HelloWorld");
  Object o2=myContextClass.newInstance();
  Assert.assertEquals("Hello World!",o2.toString());
  Assert.assertFalse(defaultContextClass.equals(myContextClass));
  cm.removeUnusedContexts(new HashSet<String>());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.start.classloader.vfs.providers.ReadOnlyHdfsFileProviderTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEquals() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  FileObject file2=manager.resolveFile(TEST_FILE1);
  Assert.assertEquals(file,file2);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsReadable() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Assert.assertTrue(file.isReadable());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAttributes() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Map<String,Object> attributes=file.getContent().getAttributes();
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.BLOCK_SIZE.toString()));
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.GROUP.toString()));
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.LAST_ACCESS_TIME.toString()));
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.LENGTH.toString()));
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.MODIFICATION_TIME.toString()));
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.OWNER.toString()));
  Assert.assertTrue(attributes.containsKey(HdfsFileAttributes.PERMISSIONS.toString()));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetContentSize() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Assert.assertEquals(0,file.getContent().getSize());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetInputStream() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  file.getContent().getInputStream().close();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRandomAccessContent2() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  file.getContent().getRandomAccessContent(RandomAccessMode.READ).close();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsWritable() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Assert.assertFalse(file.isWriteable());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsHidden() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Assert.assertFalse(file.isHidden());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExistsSucceeds() throws Exception {
  FileObject fo=manager.resolveFile(TEST_FILE1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  @SuppressWarnings("unused") FileObject f=createTestFile(hdfs);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExistsFails() throws Exception {
  FileObject fo=manager.resolveFile(TEST_FILE1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=FileSystemException.class) public void testRandomAccessContent() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  file.getContent().getRandomAccessContent(RandomAccessMode.READWRITE).close();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLastModificationTime() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  Assert.assertFalse(-1 == file.getContent().getLastModifiedTime());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoListChildren() throws Exception {
  FileObject fo=manager.resolveFile(TEST_DIR1);
  Assert.assertNotNull(fo);
  Assert.assertFalse(fo.exists());
  FileObject file=createTestFile(hdfs);
  FileObject dir=file.getParent();
  FileObject[] children=dir.getChildren();
  Assert.assertTrue(children.length == 1);
  Assert.assertTrue(children[0].getName().equals(file.getName()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.start.classloader.vfs.providers.VfsClassLoaderTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFileMonitor() throws Exception {
  MyFileMonitor listener=new MyFileMonitor();
  DefaultFileMonitor monitor=new DefaultFileMonitor(listener);
  monitor.setRecursive(true);
  FileObject testDir=vfs.resolveFile(TEST_DIR.toUri().toString());
  monitor.addFile(testDir);
  monitor.start();
  URL jarPath=this.getClass().getResource("/HelloWorld.jar");
  Path src=new Path(jarPath.toURI().toString());
  Path dst=new Path(TEST_DIR,"HelloWorld2.jar");
  this.hdfs.copyFromLocalFile(src,dst);
  Thread.sleep(7000);
  Assert.assertTrue(listener.isFileCreated());
  jarPath=this.getClass().getResource("/HelloWorld.jar");
  src=new Path(jarPath.toURI().toString());
  dst=new Path(TEST_DIR,"HelloWorld2.jar");
  this.hdfs.copyFromLocalFile(src,dst);
  Thread.sleep(7000);
  Assert.assertTrue(listener.isFileChanged());
  this.hdfs.delete(dst,false);
  Thread.sleep(7000);
  Assert.assertTrue(listener.isFileDeleted());
  monitor.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ArbitraryTablePropertiesIT </h4><pre class="type-8 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userSetGetTablePropertyWithoutPermission() throws Exception {
  log.debug("Starting userSetGetTablePropertyWithoutPermission test ------------------------");
  ClusterUser user=getUser(1);
  String testUser=user.getPrincipal();
  AuthenticationToken testToken=user.getToken();
  final String tableName=getUniqueNames(1)[0];
  final Connector c=getConnector();
  c.securityOperations().createLocalUser(testUser,(testToken instanceof PasswordToken ? (PasswordToken)testToken : null));
  c.tableOperations().create(tableName);
  String propertyName="table.custom.description";
  String description1="Description";
  Assert.assertTrue(Property.isValidPropertyKey(propertyName));
  Connector testConn=c.getInstance().getConnector(testUser,user.getToken());
  try {
    testConn.tableOperations().setProperty(tableName,propertyName,description1);
    Assert.fail("Was able to set property without permissions");
  }
 catch (  AccumuloSecurityException e) {
  }
  int count=0;
  for (  Entry<String,String> property : testConn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName))     count++;
  }
  Assert.assertEquals(count,0);
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setGetRemoveTablePropertyRoot() throws Exception {
  log.debug("Starting setGetRemoveTablePropertyRoot test ------------------------");
  final String tableName=getUniqueNames(1)[0];
  final Connector conn=getConnector();
  conn.tableOperations().create(tableName);
  String propertyName="table.custom.description";
  String description1="Description";
  Assert.assertTrue(Property.isValidPropertyKey(propertyName));
  conn.tableOperations().setProperty(tableName,propertyName,description1);
  int count=0;
  for (  Entry<String,String> property : conn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName) && property.getValue().equals(description1))     count++;
  }
  Assert.assertEquals(count,1);
  String description2="set second";
  conn.tableOperations().setProperty(tableName,propertyName,description2);
  count=0;
  for (  Entry<String,String> property : conn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName) && property.getValue().equals(description2))     count++;
  }
  Assert.assertEquals(count,1);
  conn.tableOperations().removeProperty(tableName,propertyName);
  count=0;
  for (  Entry<String,String> property : conn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName))     count++;
  }
  Assert.assertEquals(count,0);
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userSetGetRemoveTablePropertyWithPermission() throws Exception {
  log.debug("Starting userSetGetRemoveTablePropertyWithPermission test ------------------------");
  ClusterUser user=getUser(0);
  String testUser=user.getPrincipal();
  AuthenticationToken testToken=user.getToken();
  final String tableName=getUniqueNames(1)[0];
  final Connector c=getConnector();
  c.securityOperations().createLocalUser(testUser,(testToken instanceof PasswordToken ? (PasswordToken)testToken : null));
  c.tableOperations().create(tableName);
  c.securityOperations().grantTablePermission(testUser,tableName,TablePermission.ALTER_TABLE);
  String propertyName="table.custom.description";
  String description1="Description";
  Assert.assertTrue(Property.isValidPropertyKey(propertyName));
  Connector testConn=c.getInstance().getConnector(testUser,user.getToken());
  testConn.tableOperations().setProperty(tableName,propertyName,description1);
  int count=0;
  for (  Entry<String,String> property : testConn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName) && property.getValue().equals(description1))     count++;
  }
  Assert.assertEquals(count,1);
  String description2="set second";
  testConn.tableOperations().setProperty(tableName,propertyName,description2);
  count=0;
  for (  Entry<String,String> property : testConn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName) && property.getValue().equals(description2))     count++;
  }
  Assert.assertEquals(count,1);
  testConn.tableOperations().removeProperty(tableName,propertyName);
  count=0;
  for (  Entry<String,String> property : testConn.tableOperations().getProperties(tableName)) {
    if (property.getKey().equals(propertyName))     count++;
  }
  Assert.assertEquals(count,0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.AssignmentThreadsIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test(timeout=5 * 60 * 1000) public void testConcurrentAssignmentPerformance() throws Exception {
  String tableName=getUniqueNames(1)[0];
  Connector c=getConnector();
  log.info("Creating table");
  c.tableOperations().create(tableName);
  SortedSet<Text> splits=new TreeSet<Text>();
  for (int i=0; i < 1000; i++) {
    splits.add(new Text(randomHex(8)));
  }
  log.info("Adding splits");
  c.tableOperations().addSplits(tableName,splits);
  log.info("Taking table offline");
  c.tableOperations().offline(tableName,true);
  log.info("Bringing the table online");
  long now=System.currentTimeMillis();
  c.tableOperations().online(tableName,true);
  long diff=System.currentTimeMillis() - now;
  log.info("Loaded " + splits.size() + " tablets in "+ diff+ " ms");
  c.instanceOperations().setProperty(Property.TSERV_ASSIGNMENT_MAXCONCURRENT.getKey(),"20");
  now=System.currentTimeMillis();
  log.info("Taking table offline, again");
  c.tableOperations().offline(tableName,true);
  sleepUninterruptibly(Math.max(0,now + 11 * 1000 - System.currentTimeMillis()),TimeUnit.MILLISECONDS);
  now=System.currentTimeMillis();
  log.info("Bringing table back online");
  c.tableOperations().online(tableName,true);
  long diff2=System.currentTimeMillis() - now;
  log.debug("Loaded " + splits.size() + " tablets in "+ diff2+ " ms");
  assertTrue(diff2 < diff);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.AuditMessageIT </h4><pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportExportOperationsAudits() throws AccumuloSecurityException, AccumuloException, TableExistsException, TableNotFoundException, IOException, InterruptedException {
  conn.securityOperations().createLocalUser(AUDIT_USER_1,new PasswordToken(PASSWORD));
  conn.securityOperations().grantSystemPermission(AUDIT_USER_1,SystemPermission.SYSTEM);
  conn.securityOperations().changeUserAuthorizations(AUDIT_USER_1,auths);
  grantEverySystemPriv(conn,AUDIT_USER_1);
  auditConnector=getCluster().getConnector(AUDIT_USER_1,new PasswordToken(PASSWORD));
  auditConnector.tableOperations().create(OLD_TEST_TABLE_NAME);
  BatchWriter bw=auditConnector.createBatchWriter(OLD_TEST_TABLE_NAME,new BatchWriterConfig());
  Mutation m=new Mutation("myRow");
  m.put("cf1","cq1","v1");
  m.put("cf1","cq2","v3");
  bw.addMutation(m);
  bw.close();
  File exportDir=new File(getCluster().getConfig().getDir().toString() + "/export");
  auditConnector.tableOperations().offline(OLD_TEST_TABLE_NAME);
  auditConnector.tableOperations().exportTable(OLD_TEST_TABLE_NAME,exportDir.toString());
  File distCpTxt=new File(exportDir.toString() + "/distcp.txt");
  File importFile=null;
  LineIterator it=FileUtils.lineIterator(distCpTxt,UTF_8.name());
  String filePrefix="file:";
  try {
    while (it.hasNext() && importFile == null) {
      String line=it.nextLine();
      if (line.matches(".*\\.rf")) {
        importFile=new File(line.replaceFirst(filePrefix,""));
      }
    }
  }
  finally {
    LineIterator.closeQuietly(it);
  }
  FileUtils.copyFileToDirectory(importFile,exportDir);
  auditConnector.tableOperations().importTable(NEW_TEST_TABLE_NAME,exportDir.toString());
  auditConnector.tableOperations().create(THIRD_TEST_TABLE_NAME);
  File failDir=new File(exportDir + "/tmp");
  assertTrue(failDir.mkdirs() || failDir.isDirectory());
  auditConnector.tableOperations().importDirectory(THIRD_TEST_TABLE_NAME,exportDir.toString(),failDir.toString(),false);
  auditConnector.tableOperations().online(OLD_TEST_TABLE_NAME);
  ArrayList<String> auditMessages=getAuditMessages("testImportExportOperationsAudits");
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_CREATE_TABLE_AUDIT_TEMPLATE,OLD_TEST_TABLE_NAME)).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_ONLINE_OFFLINE_TABLE_AUDIT_TEMPLATE,"offlineTable",OLD_TEST_TABLE_NAME)).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_EXPORT_AUDIT_TEMPLATE,OLD_TEST_TABLE_NAME,exportDir.toString())).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_IMPORT_AUDIT_TEMPLATE,NEW_TEST_TABLE_NAME,filePrefix + exportDir.toString())).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_CREATE_TABLE_AUDIT_TEMPLATE,THIRD_TEST_TABLE_NAME)).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_BULK_IMPORT_AUDIT_TEMPLATE,THIRD_TEST_TABLE_NAME,filePrefix + exportDir.toString(),filePrefix + failDir.toString())).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_ONLINE_OFFLINE_TABLE_AUDIT_TEMPLATE,"onlineTable",OLD_TEST_TABLE_NAME)).size());
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDataOperationsAudits() throws AccumuloSecurityException, AccumuloException, TableExistsException, TableNotFoundException, IOException, InterruptedException {
  conn.securityOperations().createLocalUser(AUDIT_USER_1,new PasswordToken(PASSWORD));
  conn.securityOperations().grantSystemPermission(AUDIT_USER_1,SystemPermission.SYSTEM);
  conn.securityOperations().changeUserAuthorizations(AUDIT_USER_1,auths);
  grantEverySystemPriv(conn,AUDIT_USER_1);
  auditConnector=getCluster().getConnector(AUDIT_USER_1,new PasswordToken(PASSWORD));
  auditConnector.tableOperations().create(OLD_TEST_TABLE_NAME);
  BatchWriter bw=auditConnector.createBatchWriter(OLD_TEST_TABLE_NAME,new BatchWriterConfig());
  Mutation m=new Mutation("myRow");
  m.put("cf1","cq1","v1");
  m.put("cf1","cq2","v3");
  bw.addMutation(m);
  bw.close();
  Scanner scanner=auditConnector.createScanner(OLD_TEST_TABLE_NAME,auths);
  for (  Map.Entry<Key,Value> entry : scanner) {
    System.out.println("Scanner row: " + entry.getKey() + " "+ entry.getValue());
  }
  scanner.close();
  BatchScanner bs=auditConnector.createBatchScanner(OLD_TEST_TABLE_NAME,auths,1);
  bs.fetchColumn(new Text("cf1"),new Text("cq1"));
  bs.setRanges(Arrays.asList(new Range("myRow","myRow~")));
  for (  Map.Entry<Key,Value> entry : bs) {
    System.out.println("BatchScanner row: " + entry.getKey() + " "+ entry.getValue());
  }
  bs.close();
  auditConnector.tableOperations().deleteRows(OLD_TEST_TABLE_NAME,new Text("myRow"),new Text("myRow~"));
  ArrayList<String> auditMessages=getAuditMessages("testDataOperationsAudits");
  assertTrue(1 <= findAuditMessage(auditMessages,"action: scan; targetTable: " + OLD_TEST_TABLE_NAME).size());
  assertTrue(1 <= findAuditMessage(auditMessages,"action: scan; targetTable: " + OLD_TEST_TABLE_NAME).size());
  assertEquals(1,findAuditMessage(auditMessages,String.format(AuditedSecurityOperation.CAN_DELETE_RANGE_AUDIT_TEMPLATE,OLD_TEST_TABLE_NAME,"myRow","myRow~")).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.BadDeleteMarkersCreatedIT </h4><pre class="type-4 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void getTimeoutFactor(){
  try {
    timeoutFactor=Integer.parseInt(System.getProperty("timeout.factor"));
  }
 catch (  NumberFormatException e) {
    log.warn("Could not parse integer from timeout.factor");
  }
  Assert.assertTrue("timeout.factor must be greater than or equal to 1",timeoutFactor >= 1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.BalanceFasterIT </h4><pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test(timeout=90 * 1000) public void test() throws Exception {
  String tableName=getUniqueNames(1)[0];
  Connector conn=getConnector();
  conn.tableOperations().create(tableName);
  SortedSet<Text> splits=new TreeSet<Text>();
  for (int i=0; i < 1000; i++) {
    splits.add(new Text("" + i));
  }
  conn.tableOperations().addSplits(tableName,splits);
  sleepUninterruptibly(10,TimeUnit.SECONDS);
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.fetchColumnFamily(MetadataSchema.TabletsSection.CurrentLocationColumnFamily.NAME);
  s.setRange(MetadataSchema.TabletsSection.getRange());
  Map<String,Integer> counts=new HashMap<String,Integer>();
  while (true) {
    int total=0;
    counts.clear();
    for (    Entry<Key,Value> kv : s) {
      String host=kv.getValue().toString();
      if (!counts.containsKey(host))       counts.put(host,0);
      counts.put(host,counts.get(host) + 1);
      total++;
    }
    if (total > 1000)     break;
  }
  assertTrue(counts.size() == 3);
  Iterator<Integer> i=counts.values().iterator();
  int a=i.next();
  int b=i.next();
  int c=i.next();
  assertTrue(Math.abs(a - b) < 3);
  assertTrue(Math.abs(a - c) < 3);
  assertTrue(a > 330);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.BulkImportMonitoringIT </h4><pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  getCluster().getClusterControl().start(ServerType.MONITOR);
  final Connector c=getConnector();
  final String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_MAJC_RATIO.getKey(),"1");
  SortedSet<Text> splits=new TreeSet<>();
  for (int i=1; i < 0xf; i++) {
    splits.add(new Text(Integer.toHexString(i)));
  }
  c.tableOperations().addSplits(tableName,splits);
  MasterMonitorInfo stats=getCluster().getMasterMonitorInfo();
  assertEquals(1,stats.tServerInfo.size());
  assertEquals(0,stats.bulkImports.size());
  assertEquals(0,stats.tServerInfo.get(0).bulkImports.size());
  log.info("Creating lots of bulk import files");
  final FileSystem fs=getCluster().getFileSystem();
  final Path basePath=getCluster().getTemporaryPath();
  CachedConfiguration.setInstance(fs.getConf());
  final Path base=new Path(basePath,"testBulkLoad" + tableName);
  fs.delete(base,true);
  fs.mkdirs(base);
  ExecutorService es=Executors.newFixedThreadPool(5);
  List<Future<Pair<String,String>>> futures=new ArrayList<>();
  for (int i=0; i < 10; i++) {
    final int which=i;
    futures.add(es.submit(new Callable<Pair<String,String>>(){
      @Override public Pair<String,String> call() throws Exception {
        Path bulkFailures=new Path(base,"failures" + which);
        Path files=new Path(base,"files" + which);
        fs.mkdirs(bulkFailures);
        fs.mkdirs(files);
        for (int i=0; i < 10; i++) {
          FileSKVWriter writer=FileOperations.getInstance().openWriter(files.toString() + "/bulk_" + i+ "."+ RFile.EXTENSION,fs,fs.getConf(),AccumuloConfiguration.getDefaultConfiguration());
          writer.startDefaultLocalityGroup();
          for (int j=0x100; j < 0xfff; j+=3) {
            writer.append(new Key(Integer.toHexString(j)),new Value(new byte[0]));
          }
          writer.close();
        }
        return new Pair<String,String>(files.toString(),bulkFailures.toString());
      }
    }
));
  }
  List<Pair<String,String>> dirs=new ArrayList<>();
  for (  Future<Pair<String,String>> f : futures) {
    dirs.add(f.get());
  }
  log.info("Importing");
  long now=System.currentTimeMillis();
  List<Future> errs=new ArrayList<>();
  for (  Pair<String,String> entry : dirs) {
    final String dir=entry.getFirst();
    final String err=entry.getSecond();
    errs.add(es.submit(new Callable(){
      @Override public Object call() throws Exception {
        c.tableOperations().importDirectory(tableName,dir,err,false);
        return null;
      }
    }
));
  }
  es.shutdown();
  while (!es.isTerminated() && stats.bulkImports.size() + stats.tServerInfo.get(0).bulkImports.size() == 0) {
    es.awaitTermination(10,TimeUnit.MILLISECONDS);
    stats=getCluster().getMasterMonitorInfo();
  }
  log.info(stats.bulkImports.toString());
  assertTrue(stats.bulkImports.size() > 0);
  for (  Future err : errs) {
    err.get();
  }
  es.awaitTermination(2,TimeUnit.MINUTES);
  assertTrue(es.isTerminated());
  log.info(String.format("Completed in %.2f seconds",(System.currentTimeMillis() - now) / 1000.));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.BulkImportSequentialRowsIT </h4><pre class="type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBulkImportFailure() throws Exception {
  String tableName=getUniqueNames(1)[0];
  TableOperations to=getConnector().tableOperations();
  to.create(tableName);
  FileSystem fs=getFileSystem();
  Path rootPath=new Path(fs.makeQualified(getUsableDir()),getClass().getSimpleName());
  log.info("Writing to {}",rootPath);
  if (fs.exists(rootPath)) {
    assertTrue(fs.delete(rootPath,true));
  }
  assertTrue(fs.mkdirs(rootPath));
  Path bulk=new Path(rootPath,"bulk");
  log.info("bulk: {}",bulk);
  assertTrue(fs.mkdirs(bulk));
  Path err=new Path(rootPath,"err");
  log.info("err: {}",err);
  assertTrue(fs.mkdirs(bulk));
  assertTrue(fs.mkdirs(err));
  Path rfile=new Path(bulk,"file.rf");
  log.info("Generating RFile {}",rfile.toUri().toString());
  GenerateSequentialRFile.main(new String[]{"-f",rfile.toUri().toString(),"-nr",Long.toString(NR),"-nv",Long.toString(NV)});
  assertTrue("Expected that " + rfile + " exists, but it does not",fs.exists(rfile));
  FsShell fsShell=new FsShell(fs.getConf());
  assertEquals("Failed to chmod " + rootPath,0,fsShell.run(new String[]{"-chmod","-R","777",rootPath.toString()}));
  to.addSplits(tableName,getSplits());
  to.importDirectory(tableName,bulk.toString(),err.toString(),false);
  assertEquals(NR * NV,Iterables.size(getConnector().createScanner(tableName,Authorizations.EMPTY)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.BulkImportVolumeIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBulkImportFailure() throws Exception {
  String tableName=getUniqueNames(1)[0];
  TableOperations to=getConnector().tableOperations();
  to.create(tableName);
  FileSystem fs=getFileSystem();
  Path rootPath=new Path(cluster.getTemporaryPath(),getClass().getName());
  Path bulk=new Path(rootPath,"bulk");
  log.info("bulk: {}",bulk);
  if (fs.exists(bulk)) {
    fs.delete(bulk,true);
  }
  assertTrue(fs.mkdirs(bulk));
  Path err=new Path(rootPath,"err");
  log.info("err: {}",err);
  if (fs.exists(err)) {
    fs.delete(err,true);
  }
  assertTrue(fs.mkdirs(err));
  Path bogus=new Path(bulk,"bogus.rf");
  fs.create(bogus).close();
  log.info("bogus: {}",bogus);
  assertTrue(fs.exists(bogus));
  log.info("Importing {} into {} with failures directory {}",bulk,tableName,err);
  to.importDirectory(tableName,bulk.toString(),err.toString(),false);
  assertEquals(1,fs.listStatus(err).length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ClientSideIteratorIT </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testVersioning() throws Exception {
  conn.tableOperations().create(tableName);
  conn.tableOperations().removeProperty(tableName,"table.iterator.scan.vers");
  conn.tableOperations().removeProperty(tableName,"table.iterator.majc.vers");
  conn.tableOperations().removeProperty(tableName,"table.iterator.minc.vers");
  final BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("row1");
  m.put("colf","colq",1l,"value");
  m.put("colf","colq",2l,"value");
  bw.addMutation(m);
  bw.flush();
  m=new Mutation("row1");
  m.put("colf","colq",3l,"value");
  m.put("colf","colq",4l,"value");
  bw.addMutation(m);
  bw.flush();
  final Scanner scanner=conn.createScanner(tableName,new Authorizations());
  final ClientSideIteratorScanner csis=new ClientSideIteratorScanner(scanner);
  final IteratorSetting si=new IteratorSetting(10,"localvers",VersioningIterator.class);
  si.addOption("maxVersions","2");
  csis.addScanIterator(si);
  checkResults(csis,resultSet1,PartialKey.ROW_COLFAM_COLQUAL_COLVIS_TIME);
  checkResults(scanner,resultSet2,PartialKey.ROW_COLFAM_COLQUAL_COLVIS_TIME);
  csis.fetchColumnFamily(new Text("colf"));
  checkResults(csis,resultSet1,PartialKey.ROW_COLFAM_COLQUAL_COLVIS_TIME);
  csis.clearColumns();
  csis.fetchColumnFamily(new Text("none"));
  assertFalse(csis.iterator().hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.CloneIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testMerge() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw1=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw1.addMutation(createTablet("0","m",null,"/d1","/d1/file1"));
  bw1.addMutation(createTablet("0",null,"m","/d2","/d2/file2"));
  bw1.flush();
  BatchWriter bw2=conn.createBatchWriter(tableName,new BatchWriterConfig());
  MetadataTableUtil.initializeClone(tableName,"0","1",conn,bw2);
  bw1.addMutation(deleteTablet("0","m",null,"/d1","/d1/file1"));
  Mutation mut=createTablet("0",null,null,"/d2","/d2/file2");
  mut.put(DataFileColumnFamily.NAME.toString(),"/d1/file1",new DataFileValue(10,200).encodeAsString());
  bw1.addMutation(mut);
  bw1.flush();
  try {
    MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
    assertTrue(false);
  }
 catch (  TabletIterator.TabletDeletedException tde) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplit3() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw1=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw1.addMutation(createTablet("0","m",null,"/d1","/d1/file1"));
  bw1.addMutation(createTablet("0",null,"m","/d2","/d2/file2"));
  bw1.flush();
  BatchWriter bw2=conn.createBatchWriter(tableName,new BatchWriterConfig());
  MetadataTableUtil.initializeClone(tableName,"0","1",conn,bw2);
  bw1.addMutation(createTablet("0","f",null,"/d1","/d1/file3"));
  bw1.addMutation(createTablet("0","m","f","/d3","/d1/file1"));
  bw1.addMutation(createTablet("0","s","m","/d2","/d2/file2"));
  bw1.addMutation(createTablet("0",null,"s","/d4","/d2/file2"));
  bw1.flush();
  int rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(0,rc);
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  scanner.setRange(new KeyExtent(new Text("1"),null,null).toMetadataRange());
  HashSet<String> files=new HashSet<String>();
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnFamily().equals(DataFileColumnFamily.NAME)) {
      files.add(entry.getKey().getColumnQualifier().toString());
      count++;
    }
  }
  assertEquals(2,count);
  assertEquals(2,files.size());
  assertTrue(files.contains("../0/d1/file1"));
  assertTrue(files.contains("../0/d2/file2"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilesChange() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  KeyExtent ke=new KeyExtent(new Text("0"),null,null);
  Mutation mut=ke.getPrevRowUpdateMutation();
  TabletsSection.ServerColumnFamily.TIME_COLUMN.put(mut,new Value("M0".getBytes()));
  TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.put(mut,new Value("/default_tablet".getBytes()));
  mut.put(DataFileColumnFamily.NAME.toString(),"/default_tablet/0_0.rf",new DataFileValue(1,200).encodeAsString());
  BatchWriter bw1=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw1.addMutation(mut);
  bw1.flush();
  BatchWriter bw2=conn.createBatchWriter(tableName,new BatchWriterConfig());
  MetadataTableUtil.initializeClone(tableName,"0","1",conn,bw2);
  Mutation mut2=new Mutation(ke.getMetadataEntry());
  mut2.putDelete(DataFileColumnFamily.NAME.toString(),"/default_tablet/0_0.rf");
  mut2.put(DataFileColumnFamily.NAME.toString(),"/default_tablet/1_0.rf",new DataFileValue(2,300).encodeAsString());
  bw1.addMutation(mut2);
  bw1.flush();
  int rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(1,rc);
  rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(0,rc);
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  scanner.setRange(new KeyExtent(new Text("1"),null,null).toMetadataRange());
  HashSet<String> files=new HashSet<String>();
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnFamily().equals(DataFileColumnFamily.NAME))     files.add(entry.getKey().getColumnQualifier().toString());
  }
  assertEquals(1,files.size());
  assertTrue(files.contains("../0/default_tablet/1_0.rf"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClonedMarker() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw1=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw1.addMutation(createTablet("0","m",null,"/d1","/d1/file1"));
  bw1.addMutation(createTablet("0",null,"m","/d2","/d2/file2"));
  bw1.flush();
  BatchWriter bw2=conn.createBatchWriter(tableName,new BatchWriterConfig());
  MetadataTableUtil.initializeClone(tableName,"0","1",conn,bw2);
  bw1.addMutation(deleteTablet("0","m",null,"/d1","/d1/file1"));
  bw1.addMutation(deleteTablet("0",null,"m","/d2","/d2/file2"));
  bw1.flush();
  bw1.addMutation(createTablet("0","f",null,"/d1","/d1/file3"));
  bw1.addMutation(createTablet("0","m","f","/d3","/d1/file1"));
  bw1.addMutation(createTablet("0","s","m","/d2","/d2/file3"));
  bw1.addMutation(createTablet("0",null,"s","/d4","/d4/file3"));
  bw1.flush();
  int rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(1,rc);
  bw1.addMutation(deleteTablet("0","m","f","/d3","/d1/file1"));
  bw1.flush();
  bw1.addMutation(createTablet("0","m","f","/d3","/d1/file3"));
  bw1.flush();
  rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(0,rc);
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  scanner.setRange(new KeyExtent(new Text("1"),null,null).toMetadataRange());
  HashSet<String> files=new HashSet<String>();
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnFamily().equals(DataFileColumnFamily.NAME)) {
      files.add(entry.getKey().getColumnQualifier().toString());
      count++;
    }
  }
  assertEquals(3,count);
  assertEquals(3,files.size());
  assertTrue(files.contains("../0/d1/file1"));
  assertTrue(files.contains("../0/d2/file3"));
  assertTrue(files.contains("../0/d4/file3"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplit2() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw1=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw1.addMutation(createTablet("0",null,null,"/default_tablet","/default_tablet/0_0.rf"));
  bw1.flush();
  BatchWriter bw2=conn.createBatchWriter(tableName,new BatchWriterConfig());
  MetadataTableUtil.initializeClone(tableName,"0","1",conn,bw2);
  bw1.addMutation(createTablet("0","m",null,"/default_tablet","/default_tablet/1_0.rf"));
  Mutation mut3=createTablet("0",null,"m","/t-1","/default_tablet/1_0.rf");
  mut3.putDelete(DataFileColumnFamily.NAME.toString(),"/default_tablet/0_0.rf");
  bw1.addMutation(mut3);
  bw1.flush();
  int rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(1,rc);
  rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(0,rc);
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  scanner.setRange(new KeyExtent(new Text("1"),null,null).toMetadataRange());
  HashSet<String> files=new HashSet<String>();
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnFamily().equals(DataFileColumnFamily.NAME)) {
      files.add(entry.getKey().getColumnQualifier().toString());
      count++;
    }
  }
  assertEquals(1,files.size());
  assertEquals(2,count);
  assertTrue(files.contains("../0/default_tablet/1_0.rf"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplit1() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  BatchWriter bw1=conn.createBatchWriter(tableName,new BatchWriterConfig());
  bw1.addMutation(createTablet("0",null,null,"/default_tablet","/default_tablet/0_0.rf"));
  bw1.flush();
  BatchWriter bw2=conn.createBatchWriter(tableName,new BatchWriterConfig());
  MetadataTableUtil.initializeClone(tableName,"0","1",conn,bw2);
  bw1.addMutation(createTablet("0","m",null,"/default_tablet","/default_tablet/0_0.rf"));
  bw1.addMutation(createTablet("0",null,"m","/t-1","/default_tablet/0_0.rf"));
  bw1.flush();
  int rc=MetadataTableUtil.checkClone(tableName,"0","1",conn,bw2);
  assertEquals(0,rc);
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  scanner.setRange(new KeyExtent(new Text("1"),null,null).toMetadataRange());
  HashSet<String> files=new HashSet<String>();
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getKey().getColumnFamily().equals(DataFileColumnFamily.NAME)) {
      files.add(entry.getKey().getColumnQualifier().toString());
      count++;
    }
  }
  assertEquals(1,count);
  assertEquals(1,files.size());
  assertTrue(files.contains("../0/default_tablet/0_0.rf"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ConditionalWriterIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThreads() throws Exception {
  String table=getUniqueNames(1)[0];
  Connector conn=getConnector();
  conn.tableOperations().create(table);
  Random rand=new Random();
switch (rand.nextInt(3)) {
case 1:
    conn.tableOperations().addSplits(table,nss("4"));
  break;
case 2:
conn.tableOperations().addSplits(table,nss("3","5"));
break;
}
ConditionalWriter cw=conn.createConditionalWriter(table,new ConditionalWriterConfig());
ArrayList<ByteSequence> rows=new ArrayList<ByteSequence>();
for (int i=0; i < 1000; i++) {
rows.add(new ArrayByteSequence(FastFormat.toZeroPaddedString(abs(rand.nextLong()),16,16,new byte[0])));
}
ArrayList<ConditionalMutation> mutations=new ArrayList<ConditionalMutation>();
for (ByteSequence row : rows) mutations.add(new Stats(row).toMutation());
ArrayList<ByteSequence> rows2=new ArrayList<ByteSequence>();
Iterator<Result> results=cw.write(mutations.iterator());
while (results.hasNext()) {
Result result=results.next();
Assert.assertEquals(Status.ACCEPTED,result.getStatus());
rows2.add(new ArrayByteSequence(result.getMutation().getRow()));
}
Collections.sort(rows);
Collections.sort(rows2);
Assert.assertEquals(rows,rows2);
AtomicBoolean failed=new AtomicBoolean(false);
ExecutorService tp=Executors.newFixedThreadPool(5);
for (int i=0; i < 5; i++) {
tp.submit(new MutatorTask(table,conn,rows,cw,failed));
}
tp.shutdown();
while (!tp.isTerminated()) {
tp.awaitTermination(1,TimeUnit.MINUTES);
}
Assert.assertFalse("A MutatorTask failed with an exception",failed.get());
Scanner scanner=conn.createScanner(table,Authorizations.EMPTY);
RowIterator rowIter=new RowIterator(scanner);
while (rowIter.hasNext()) {
Iterator<Entry<Key,Value>> row=rowIter.next();
new Stats(row);
}
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstraints() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  conn.tableOperations().addConstraint(tableName,AlphaNumKeyConstraint.class.getName());
  conn.tableOperations().clone(tableName,tableName + "_clone",true,new HashMap<String,String>(),new HashSet<String>());
  Scanner scanner=conn.createScanner(tableName + "_clone",new Authorizations());
  ConditionalWriter cw=conn.createConditionalWriter(tableName + "_clone",new ConditionalWriterConfig());
  ConditionalMutation cm0=new ConditionalMutation("99006+",new Condition("tx","seq"));
  cm0.put("tx","seq","1");
  Assert.assertEquals(Status.VIOLATED,cw.write(cm0).getStatus());
  Assert.assertFalse("Should find no results in the table is mutation result was violated",scanner.iterator().hasNext());
  ConditionalMutation cm1=new ConditionalMutation("99006",new Condition("tx","seq"));
  cm1.put("tx","seq","1");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm1).getStatus());
  Assert.assertTrue("Accepted result should be returned when reading table",scanner.iterator().hasNext());
  cw.close();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTableAndConditionIterators() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  IteratorSetting aiConfig1=new IteratorSetting(30,"AI1",AddingIterator.class);
  aiConfig1.addOption("amount","2");
  IteratorSetting aiConfig2=new IteratorSetting(35,"MI1",MultiplyingIterator.class);
  aiConfig2.addOption("amount","3");
  IteratorSetting aiConfig3=new IteratorSetting(40,"AI2",AddingIterator.class);
  aiConfig3.addOption("amount","5");
  conn.tableOperations().create(tableName);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("ACCUMULO-1000");
  m.put("count","comments","6");
  bw.addMutation(m);
  m=new Mutation("ACCUMULO-1001");
  m.put("count","comments","7");
  bw.addMutation(m);
  m=new Mutation("ACCUMULO-1002");
  m.put("count","comments","8");
  bw.addMutation(m);
  bw.close();
  conn.tableOperations().attachIterator(tableName,aiConfig1,EnumSet.of(IteratorScope.scan));
  conn.tableOperations().offline(tableName,true);
  conn.tableOperations().online(tableName,true);
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig());
  ConditionalMutation cm6=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setValue("8"));
  cm6.put("count","comments","7");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm6).getStatus());
  Scanner scanner=conn.createScanner(tableName,new Authorizations());
  scanner.setRange(new Range("ACCUMULO-1000"));
  scanner.fetchColumn(new Text("count"),new Text("comments"));
  Entry<Key,Value> entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("9",entry.getValue().toString());
  ConditionalMutation cm7=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setIterators(aiConfig2).setValue("27"));
  cm7.put("count","comments","8");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm7).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("10",entry.getValue().toString());
  ConditionalMutation cm8=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setIterators(aiConfig2,aiConfig3).setValue("35"));
  cm8.put("count","comments","9");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm8).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("11",entry.getValue().toString());
  ConditionalMutation cm3=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setIterators(aiConfig2).setValue("33"));
  cm3.put("count","comments","3");
  ConditionalMutation cm4=new ConditionalMutation("ACCUMULO-1001",new Condition("count","comments").setIterators(aiConfig3).setValue("14"));
  cm4.put("count","comments","3");
  ConditionalMutation cm5=new ConditionalMutation("ACCUMULO-1002",new Condition("count","comments").setIterators(aiConfig3).setValue("10"));
  cm5.put("count","comments","3");
  Iterator<Result> results=cw.write(Arrays.asList(cm3,cm4,cm5).iterator());
  Map<String,Status> actual=new HashMap<String,Status>();
  while (results.hasNext()) {
    Result result=results.next();
    String k=new String(result.getMutation().getRow());
    Assert.assertFalse("Did not expect to see multiple resultus for the row: " + k,actual.containsKey(k));
    actual.put(k,result.getStatus());
  }
  cw.close();
  Map<String,Status> expected=new HashMap<String,Status>();
  expected.put("ACCUMULO-1000",Status.ACCEPTED);
  expected.put("ACCUMULO-1001",Status.ACCEPTED);
  expected.put("ACCUMULO-1002",Status.REJECTED);
  Assert.assertEquals(expected,actual);
  cw.close();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-5 type-3 type-21 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTrace() throws Exception {
  Assume.assumeTrue(getClusterType() == ClusterType.MINI);
  Process tracer=null;
  Connector conn=getConnector();
  AccumuloCluster cluster=getCluster();
  MiniAccumuloClusterImpl mac=(MiniAccumuloClusterImpl)cluster;
  if (!conn.tableOperations().exists("trace")) {
    tracer=mac.exec(TraceServer.class);
    while (!conn.tableOperations().exists("trace")) {
      sleepUninterruptibly(1,TimeUnit.SECONDS);
    }
  }
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  DistributedTrace.enable("localhost","testTrace",mac.getClientConfig());
  sleepUninterruptibly(1,TimeUnit.SECONDS);
  Span root=Trace.on("traceTest");
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig());
  ConditionalMutation cm0=new ConditionalMutation("99006",new Condition("tx","seq"));
  cm0.put("name","last","doe");
  cm0.put("name","first","john");
  cm0.put("tx","seq","1");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm0).getStatus());
  root.stop();
  final Scanner scanner=conn.createScanner("trace",Authorizations.EMPTY);
  scanner.setRange(new Range(new Text(Long.toHexString(root.traceId()))));
  loop:   while (true) {
    final StringBuilder finalBuffer=new StringBuilder();
    int traceCount=TraceDump.printTrace(scanner,new Printer(){
      @Override public void print(      final String line){
        try {
          finalBuffer.append(line).append("\n");
        }
 catch (        Exception ex) {
          throw new RuntimeException(ex);
        }
      }
    }
);
    String traceOutput=finalBuffer.toString();
    log.info("Trace output:" + traceOutput);
    if (traceCount > 0) {
      int lastPos=0;
      for (      String part : "traceTest, startScan,startConditionalUpdate,conditionalUpdate,Check conditions,apply conditional mutations".split(",")) {
        log.info("Looking in trace output for '" + part + "'");
        int pos=traceOutput.indexOf(part);
        if (-1 == pos) {
          log.info("Trace output doesn't contain '" + part + "'");
          Thread.sleep(1000);
          break loop;
        }
        assertTrue("Did not find '" + part + "' in output",pos > 0);
        assertTrue("'" + part + "' occurred earlier than the previous element unexpectedly",pos > lastPos);
        lastPos=pos;
      }
      break;
    }
 else {
      log.info("Ignoring trace output as traceCount not greater than zero: " + traceCount);
      Thread.sleep(1000);
    }
  }
  if (tracer != null) {
    tracer.destroy();
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasic() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig());
  ConditionalMutation cm0=new ConditionalMutation("99006",new Condition("tx","seq"));
  cm0.put("name","last","doe");
  cm0.put("name","first","john");
  cm0.put("tx","seq","1");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm0).getStatus());
  Assert.assertEquals(Status.REJECTED,cw.write(cm0).getStatus());
  ConditionalMutation cm1=new ConditionalMutation("99006",new Condition("tx","seq").setValue("1"));
  cm1.put("name","last","Doe");
  cm1.put("tx","seq","2");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm1).getStatus());
  ConditionalMutation cm2=new ConditionalMutation("99006",new Condition("tx","seq").setValue("1"));
  cm2.put("name","last","DOE");
  cm2.put("tx","seq","2");
  Assert.assertEquals(Status.REJECTED,cw.write(cm2).getStatus());
  ConditionalMutation cm3=new ConditionalMutation("99006",new Condition("txtypo","seq").setValue("1"));
  cm3.put("name","last","deo");
  cm3.put("tx","seq","2");
  Assert.assertEquals(Status.REJECTED,cw.write(cm3).getStatus());
  ConditionalMutation cm4=new ConditionalMutation("99006",new Condition("tx","seq").setValue("2"),new Condition("name","last").setValue("doe"));
  cm4.put("name","last","deo");
  cm4.put("tx","seq","3");
  Assert.assertEquals(Status.REJECTED,cw.write(cm4).getStatus());
  ConditionalMutation cm5=new ConditionalMutation("99006",new Condition("tx","seq").setValue("1"),new Condition("name","last").setValue("Doe"));
  cm5.put("name","last","deo");
  cm5.put("tx","seq","3");
  Assert.assertEquals(Status.REJECTED,cw.write(cm5).getStatus());
  Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
  scanner.fetchColumn(new Text("name"),new Text("last"));
  scanner.setRange(new Range("99006"));
  Entry<Key,Value> entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("Doe",entry.getValue().toString());
  ConditionalMutation cm6=new ConditionalMutation("99006",new Condition("tx","seq").setValue("2"),new Condition("name","last").setValue("Doe"));
  cm6.put("name","last","DOE");
  cm6.put("tx","seq","3");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm6).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("DOE",entry.getValue().toString());
  ConditionalMutation cm7=new ConditionalMutation("99006",new Condition("tx","seq").setValue("3"));
  cm7.putDelete("name","last");
  cm7.putDelete("name","first");
  cm7.putDelete("tx","seq");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm7).getStatus());
  Assert.assertFalse("Did not expect to find any results",scanner.iterator().hasNext());
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm0).getStatus());
  Assert.assertEquals(Status.REJECTED,cw.write(cm0).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("doe",entry.getValue().toString());
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterators() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName,new NewTableConfiguration().withoutDefaultIterators());
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("ACCUMULO-1000");
  m.put("count","comments","1");
  bw.addMutation(m);
  bw.addMutation(m);
  bw.addMutation(m);
  m=new Mutation("ACCUMULO-1001");
  m.put("count2","comments","1");
  bw.addMutation(m);
  bw.addMutation(m);
  m=new Mutation("ACCUMULO-1002");
  m.put("count2","comments","1");
  bw.addMutation(m);
  bw.addMutation(m);
  bw.close();
  IteratorSetting iterConfig=new IteratorSetting(10,SummingCombiner.class);
  SummingCombiner.setEncodingType(iterConfig,Type.STRING);
  SummingCombiner.setColumns(iterConfig,Collections.singletonList(new IteratorSetting.Column("count")));
  IteratorSetting iterConfig2=new IteratorSetting(10,SummingCombiner.class);
  SummingCombiner.setEncodingType(iterConfig2,Type.STRING);
  SummingCombiner.setColumns(iterConfig2,Collections.singletonList(new IteratorSetting.Column("count2","comments")));
  IteratorSetting iterConfig3=new IteratorSetting(5,VersioningIterator.class);
  VersioningIterator.setMaxVersions(iterConfig3,1);
  Scanner scanner=conn.createScanner(tableName,new Authorizations());
  scanner.addScanIterator(iterConfig);
  scanner.setRange(new Range("ACCUMULO-1000"));
  scanner.fetchColumn(new Text("count"),new Text("comments"));
  Entry<Key,Value> entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("3",entry.getValue().toString());
  ConditionalWriter cw=conn.createConditionalWriter(tableName,new ConditionalWriterConfig());
  ConditionalMutation cm0=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setValue("3"));
  cm0.put("count","comments","1");
  Assert.assertEquals(Status.REJECTED,cw.write(cm0).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("3",entry.getValue().toString());
  ConditionalMutation cm1=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setIterators(iterConfig).setValue("3"));
  cm1.put("count","comments","1");
  Assert.assertEquals(Status.ACCEPTED,cw.write(cm1).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("4",entry.getValue().toString());
  ConditionalMutation cm2=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setValue("4"));
  cm2.put("count","comments","1");
  Assert.assertEquals(Status.REJECTED,cw.write(cm1).getStatus());
  entry=Iterables.getOnlyElement(scanner);
  Assert.assertEquals("4",entry.getValue().toString());
  ConditionalMutation cm3=new ConditionalMutation("ACCUMULO-1000",new Condition("count","comments").setIterators(iterConfig).setValue("4"));
  cm3.put("count","comments","1");
  ConditionalMutation cm4=new ConditionalMutation("ACCUMULO-1001",new Condition("count2","comments").setIterators(iterConfig2).setValue("2"));
  cm4.put("count2","comments","1");
  ConditionalMutation cm5=new ConditionalMutation("ACCUMULO-1002",new Condition("count2","comments").setIterators(iterConfig2,iterConfig3).setValue("2"));
  cm5.put("count2","comments","1");
  Iterator<Result> results=cw.write(Arrays.asList(cm3,cm4,cm5).iterator());
  Map<String,Status> actual=new HashMap<String,Status>();
  while (results.hasNext()) {
    Result result=results.next();
    String k=new String(result.getMutation().getRow());
    Assert.assertFalse("Did not expect to see multiple resultus for the row: " + k,actual.containsKey(k));
    actual.put(k,result.getStatus());
  }
  Map<String,Status> expected=new HashMap<String,Status>();
  expected.put("ACCUMULO-1000",Status.ACCEPTED);
  expected.put("ACCUMULO-1001",Status.ACCEPTED);
  expected.put("ACCUMULO-1002",Status.REJECTED);
  Assert.assertEquals(expected,actual);
  cw.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ConfigurableMajorCompactionIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector conn=getConnector();
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  conn.tableOperations().setProperty(tableName,Property.TABLE_COMPACTION_STRATEGY.getKey(),TestCompactionStrategy.class.getName());
  writeFile(conn,tableName);
  writeFile(conn,tableName);
  writeFile(conn,tableName);
  writeFile(conn,tableName);
  UtilWaitThread.sleep(2 * 1000);
  assertEquals(4,countFiles(conn));
  writeFile(conn,tableName);
  int count=countFiles(conn);
  assertTrue(count == 1 || count == 5);
  while (count != 1) {
    UtilWaitThread.sleep(250);
    count=countFiles(conn);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.CreateTableWithNewTableConfigIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void tableNameLimitVersionAndTimeType() throws Exception {
  log.info("Starting tableNameLimitVersionAndTimeType");
  Connector connector=getConnector();
  String tableName=getUniqueNames(2)[0];
  boolean limitVersion=false;
  TimeType tt=TimeType.LOGICAL;
  connector.tableOperations().create(tableName,new NewTableConfiguration().withoutDefaultIterators().setTimeType(tt));
  String tableNameOrig="originalWithLimitVersionAndTimeType";
  connector.tableOperations().create(tableNameOrig,limitVersion,tt);
  int countNew=numProperties(connector,tableName);
  int countOrig=compareProperties(connector,tableNameOrig,tableName,null);
  Assert.assertEquals("Extra properties using the new create method",countOrig,countNew);
  Assert.assertTrue("Wrong TimeType",checkTimeType(connector,tableName,tt));
}

</code></pre>

<br>
<pre class="type-9 type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void addCustomPropAndChangeExisting() throws Exception {
  log.info("Starting addCustomPropAndChangeExisting");
  Map<String,String> properties=new HashMap<String,String>();
  String propertyName=Property.TABLE_SPLIT_THRESHOLD.getKey();
  String volume="10K";
  properties.put(propertyName,volume);
  String propertyName2="table.custom.testProp";
  String volume2="Test property";
  properties.put(propertyName2,volume2);
  Connector connector=getConnector();
  String tableName=getUniqueNames(2)[0];
  connector.tableOperations().create(tableName,new NewTableConfiguration().setProperties(properties));
  String tableNameOrig="originalWithTableName";
  connector.tableOperations().create(tableNameOrig,true);
  int countNew=numProperties(connector,tableName);
  int countOrig=compareProperties(connector,tableNameOrig,tableName,propertyName);
  for (  Entry<String,String> entry : connector.tableOperations().getProperties(tableName)) {
    if (entry.getKey().equals(Property.TABLE_SPLIT_THRESHOLD.getKey()))     Assert.assertTrue("TABLE_SPLIT_THRESHOLD has been changed",entry.getValue().equals("10K"));
    if (entry.getKey().equals("table.custom.testProp"))     Assert.assertTrue("table.custom.testProp has been changed",entry.getValue().equals("Test property"));
  }
  Assert.assertEquals("Extra properties using the new create method",countOrig + 1,countNew);
  Assert.assertTrue("Wrong TimeType",checkTimeType(connector,tableName,TimeType.MILLIS));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void tableNameAndLimitVersion() throws Exception {
  log.info("Starting tableNameAndLimitVersion");
  Connector connector=getConnector();
  String tableName=getUniqueNames(2)[0];
  boolean limitVersion=false;
  connector.tableOperations().create(tableName,new NewTableConfiguration().withoutDefaultIterators());
  String tableNameOrig="originalWithLimitVersion";
  connector.tableOperations().create(tableNameOrig,limitVersion);
  int countNew=numProperties(connector,tableName);
  int countOrig=compareProperties(connector,tableNameOrig,tableName,null);
  Assert.assertEquals("Extra properties using the new create method",countOrig,countNew);
  Assert.assertTrue("Wrong TimeType",checkTimeType(connector,tableName,TimeType.MILLIS));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void tableNameOnly() throws Exception {
  log.info("Starting tableNameOnly");
  Connector connector=getConnector();
  String tableName=getUniqueNames(2)[0];
  connector.tableOperations().create(tableName,new NewTableConfiguration());
  String tableNameOrig="original";
  connector.tableOperations().create(tableNameOrig,true);
  int countNew=numProperties(connector,tableName);
  int countOrig=compareProperties(connector,tableNameOrig,tableName,null);
  Assert.assertEquals("Extra properties using the new create method",countOrig,countNew);
  Assert.assertTrue("Wrong TimeType",checkTimeType(connector,tableName,TimeType.MILLIS));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.DumpConfigIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  File target=new File(System.getProperty("user.dir"),"target");
  assertTrue(target.exists() || target.mkdirs());
  TemporaryFolder folder=new TemporaryFolder(target);
  folder.create();
  File siteFileBackup=new File(folder.getRoot(),"accumulo-site.xml.bak");
  assertFalse(siteFileBackup.exists());
  assertEquals(0,exec(Admin.class,new String[]{"dumpConfig","-a","-d",folder.getRoot().getPath()}).waitFor());
  assertTrue(siteFileBackup.exists());
  String site=FunctionalTestUtils.readAll(new FileInputStream(siteFileBackup));
  assertTrue(site.contains(Property.TABLE_FILE_BLOCK_SIZE.getKey()));
  assertTrue(site.contains("1234567"));
  String meta=FunctionalTestUtils.readAll(new FileInputStream(new File(folder.getRoot(),MetadataTable.NAME + ".cfg")));
  assertTrue(meta.contains(Property.TABLE_FILE_REPLICATION.getKey()));
  String systemPerm=FunctionalTestUtils.readAll(new FileInputStream(new File(folder.getRoot(),"root_user.cfg")));
  assertTrue(systemPerm.contains("grant System.ALTER_USER -s -u root"));
  assertTrue(systemPerm.contains("grant Table.READ -t " + MetadataTable.NAME + " -u root"));
  assertFalse(systemPerm.contains("grant Table.DROP -t " + MetadataTable.NAME + " -u root"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ExistingMacIT </h4><pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExistingInstance() throws Exception {
  Connector conn=getCluster().getConnector("root",new PasswordToken(ROOT_PASSWORD));
  conn.tableOperations().create("table1");
  BatchWriter bw=conn.createBatchWriter("table1",new BatchWriterConfig());
  Mutation m1=new Mutation("00081");
  m1.put("math","sqroot","9");
  m1.put("math","sq","6560");
  bw.addMutation(m1);
  bw.close();
  conn.tableOperations().flush("table1",null,null,true);
  conn.tableOperations().flush(MetadataTable.NAME,null,null,true);
  conn.tableOperations().flush(RootTable.NAME,null,null,true);
  Set<Entry<ServerType,Collection<ProcessReference>>> procs=getCluster().getProcesses().entrySet();
  for (  Entry<ServerType,Collection<ProcessReference>> entry : procs) {
    if (entry.getKey() == ServerType.ZOOKEEPER)     continue;
    for (    ProcessReference pr : entry.getValue())     getCluster().killProcess(entry.getKey(),pr);
  }
  sleepUninterruptibly(10,TimeUnit.SECONDS);
  File hadoopConfDir=createTestDir(ExistingMacIT.class.getSimpleName() + "_hadoop_conf");
  FileUtils.deleteQuietly(hadoopConfDir);
  assertTrue(hadoopConfDir.mkdirs());
  createEmptyConfig(new File(hadoopConfDir,"core-site.xml"));
  createEmptyConfig(new File(hadoopConfDir,"hdfs-site.xml"));
  File testDir2=createTestDir(ExistingMacIT.class.getSimpleName() + "_2");
  FileUtils.deleteQuietly(testDir2);
  MiniAccumuloConfigImpl macConfig2=new MiniAccumuloConfigImpl(testDir2,"notused");
  macConfig2.useExistingInstance(new File(getCluster().getConfig().getConfDir(),"accumulo-site.xml"),hadoopConfDir);
  MiniAccumuloClusterImpl accumulo2=new MiniAccumuloClusterImpl(macConfig2);
  accumulo2.start();
  conn=accumulo2.getConnector("root",new PasswordToken(ROOT_PASSWORD));
  Scanner scanner=conn.createScanner("table1",Authorizations.EMPTY);
  int sum=0;
  for (  Entry<Key,Value> entry : scanner) {
    sum+=Integer.parseInt(entry.getValue().toString());
  }
  Assert.assertEquals(6569,sum);
  accumulo2.stop();
}

</code></pre>

<br>
<pre class="type-8 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExistingRunningInstance() throws Exception {
  final String table=getUniqueNames(1)[0];
  Connector conn=getConnector();
  conn.tableOperations().create(table);
  BatchWriter bw=conn.createBatchWriter(table,new BatchWriterConfig());
  Mutation m=new Mutation("foo");
  m.put("cf","cq","value");
  bw.addMutation(m);
  bw.close();
  File hadoopConfDir=createTestDir(ExistingMacIT.class.getSimpleName() + "_hadoop_conf_2");
  FileUtils.deleteQuietly(hadoopConfDir);
  assertTrue(hadoopConfDir.mkdirs());
  createEmptyConfig(new File(hadoopConfDir,"core-site.xml"));
  createEmptyConfig(new File(hadoopConfDir,"hdfs-site.xml"));
  File testDir2=createTestDir(ExistingMacIT.class.getSimpleName() + "_3");
  FileUtils.deleteQuietly(testDir2);
  MiniAccumuloConfigImpl macConfig2=new MiniAccumuloConfigImpl(testDir2,"notused");
  macConfig2.useExistingInstance(new File(getCluster().getConfig().getConfDir(),"accumulo-site.xml"),hadoopConfDir);
  System.out.println("conf " + new File(getCluster().getConfig().getConfDir(),"accumulo-site.xml"));
  MiniAccumuloClusterImpl accumulo2=new MiniAccumuloClusterImpl(macConfig2);
  try {
    accumulo2.start();
    Assert.fail("A 2nd MAC instance should not be able to start over an existing MAC instance");
  }
 catch (  RuntimeException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.FileArchiveIT </h4><pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnusuedFilesAreArchived() throws Exception {
  final Connector conn=getConnector();
  final String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  final String tableId=conn.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Could not get table ID",tableId);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("row");
  m.put("","","value");
  bw.addMutation(m);
  bw.close();
  conn.tableOperations().compact(tableName,null,null,true,true);
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  final String file=entry.getKey().getColumnQualifier().toString();
  final Path p=new Path(file);
  conn.tableOperations().compact(tableName,null,null,true,true);
  log.info("File for table: " + file);
  FileSystem fs=getCluster().getFileSystem();
  int i=0;
  while (fs.exists(p)) {
    i++;
    Thread.sleep(1000);
    if (0 == i % 10) {
      log.info("Waited " + i + " iterations, file still exists");
    }
  }
  log.info("File was removed");
  String filePath=p.toUri().getPath().substring(getCluster().getConfig().getAccumuloDir().toString().length());
  log.info("File relative to accumulo dir: " + filePath);
  Path fileArchiveDir=new Path(getCluster().getConfig().getAccumuloDir().toString(),ServerConstants.FILE_ARCHIVE_DIR);
  Assert.assertTrue("File archive directory didn't exist",fs.exists(fileArchiveDir));
  Path archivedFile=new Path(fileArchiveDir,filePath.substring(1));
  Assert.assertTrue("File doesn't exists in archive directory: " + archivedFile,fs.exists(archivedFile));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnusuedFilesAndDeletedTable() throws Exception {
  final Connector conn=getConnector();
  final String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  final String tableId=conn.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Could not get table ID",tableId);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("row");
  m.put("","","value");
  bw.addMutation(m);
  bw.close();
  conn.tableOperations().compact(tableName,null,null,true,true);
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  final String file=entry.getKey().getColumnQualifier().toString();
  final Path p=new Path(file);
  conn.tableOperations().compact(tableName,null,null,true,true);
  log.info("File for table: " + file);
  FileSystem fs=getCluster().getFileSystem();
  int i=0;
  while (fs.exists(p)) {
    i++;
    Thread.sleep(1000);
    if (0 == i % 10) {
      log.info("Waited " + i + " iterations, file still exists");
    }
  }
  log.info("File was removed");
  String filePath=p.toUri().getPath().substring(getCluster().getConfig().getAccumuloDir().toString().length());
  log.info("File relative to accumulo dir: " + filePath);
  Path fileArchiveDir=new Path(getCluster().getConfig().getAccumuloDir().toString(),ServerConstants.FILE_ARCHIVE_DIR);
  Assert.assertTrue("File archive directory didn't exist",fs.exists(fileArchiveDir));
  Path archivedFile=new Path(fileArchiveDir,filePath.substring(1));
  Assert.assertTrue("File doesn't exists in archive directory: " + archivedFile,fs.exists(archivedFile));
  conn.tableOperations().offline(tableName,true);
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  entry=Iterables.getOnlyElement(s);
  final String finalFile=entry.getKey().getColumnQualifier().toString();
  final Path finalPath=new Path(finalFile);
  conn.tableOperations().delete(tableName);
  log.info("File for table: " + finalPath);
  i=0;
  while (fs.exists(finalPath)) {
    i++;
    Thread.sleep(1000);
    if (0 == i % 10) {
      log.info("Waited " + i + " iterations, file still exists");
    }
  }
  log.info("File was removed");
  String finalFilePath=finalPath.toUri().getPath().substring(getCluster().getConfig().getAccumuloDir().toString().length());
  log.info("File relative to accumulo dir: " + finalFilePath);
  Assert.assertTrue("File archive directory didn't exist",fs.exists(fileArchiveDir));
  Path finalArchivedFile=new Path(fileArchiveDir,finalFilePath.substring(1));
  Assert.assertTrue("File doesn't exists in archive directory: " + finalArchivedFile,fs.exists(finalArchivedFile));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeletedTableIsArchived() throws Exception {
  final Connector conn=getConnector();
  final String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  final String tableId=conn.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Could not get table ID",tableId);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("row");
  m.put("","","value");
  bw.addMutation(m);
  bw.close();
  conn.tableOperations().compact(tableName,null,null,true,true);
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  final String file=entry.getKey().getColumnQualifier().toString();
  final Path p=new Path(file);
  conn.tableOperations().delete(tableName);
  log.info("File for table: " + file);
  FileSystem fs=getCluster().getFileSystem();
  int i=0;
  while (fs.exists(p)) {
    i++;
    Thread.sleep(1000);
    if (0 == i % 10) {
      log.info("Waited " + i + " iterations, file still exists");
    }
  }
  log.info("File was removed");
  String filePath=p.toUri().getPath().substring(getCluster().getConfig().getAccumuloDir().toString().length());
  log.info("File relative to accumulo dir: " + filePath);
  Path fileArchiveDir=new Path(getCluster().getConfig().getAccumuloDir().toString(),ServerConstants.FILE_ARCHIVE_DIR);
  Assert.assertTrue("File archive directory didn't exist",fs.exists(fileArchiveDir));
  Path archivedFile=new Path(fileArchiveDir,filePath.substring(1));
  Assert.assertTrue("File doesn't exists in archive directory: " + archivedFile,fs.exists(archivedFile));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.GetFileInfoBulkIT </h4><pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  final Connector c=getConnector();
  getCluster().getClusterControl().kill(ServerType.GARBAGE_COLLECTOR,"localhost");
  final String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_MAJC_RATIO.getKey(),"2000");
  c.tableOperations().setProperty(tableName,Property.TABLE_FILE_MAX.getKey(),"2000");
  SortedSet<Text> splits=new TreeSet<>();
  for (int i=1; i < 0xf; i++) {
    splits.add(new Text(Integer.toHexString(i)));
  }
  c.tableOperations().addSplits(tableName,splits);
  MasterMonitorInfo stats=getCluster().getMasterMonitorInfo();
  assertEquals(1,stats.tServerInfo.size());
  log.info("Creating lots of bulk import files");
  final FileSystem fs=getCluster().getFileSystem();
  final Path basePath=getCluster().getTemporaryPath();
  CachedConfiguration.setInstance(fs.getConf());
  final Path base=new Path(basePath,"testBulkLoad" + tableName);
  fs.delete(base,true);
  fs.mkdirs(base);
  ExecutorService es=Executors.newFixedThreadPool(5);
  List<Future<Pair<String,String>>> futures=new ArrayList<>();
  for (int i=0; i < 10; i++) {
    final int which=i;
    futures.add(es.submit(new Callable<Pair<String,String>>(){
      @Override public Pair<String,String> call() throws Exception {
        Path bulkFailures=new Path(base,"failures" + which);
        Path files=new Path(base,"files" + which);
        fs.mkdirs(bulkFailures);
        fs.mkdirs(files);
        for (int i=0; i < 100; i++) {
          FileSKVWriter writer=FileOperations.getInstance().openWriter(files.toString() + "/bulk_" + i+ "."+ RFile.EXTENSION,fs,fs.getConf(),AccumuloConfiguration.getDefaultConfiguration());
          writer.startDefaultLocalityGroup();
          for (int j=0x100; j < 0xfff; j+=3) {
            writer.append(new Key(Integer.toHexString(j)),new Value(new byte[0]));
          }
          writer.close();
        }
        return new Pair<String,String>(files.toString(),bulkFailures.toString());
      }
    }
));
  }
  List<Pair<String,String>> dirs=new ArrayList<>();
  for (  Future<Pair<String,String>> f : futures) {
    dirs.add(f.get());
  }
  log.info("Importing");
  long startOps=getOpts();
  long now=System.currentTimeMillis();
  List<Future> errs=new ArrayList<>();
  for (  Pair<String,String> entry : dirs) {
    final String dir=entry.getFirst();
    final String err=entry.getSecond();
    errs.add(es.submit(new Callable(){
      @Override public Object call() throws Exception {
        c.tableOperations().importDirectory(tableName,dir,err,false);
        return null;
      }
    }
));
  }
  for (  Future err : errs) {
    err.get();
  }
  es.shutdown();
  es.awaitTermination(2,TimeUnit.MINUTES);
  log.info(String.format("Completed in %.2f seconds",(System.currentTimeMillis() - now) / 1000.));
  Uninterruptibles.sleepUninterruptibly(30,TimeUnit.SECONDS);
  long getFileInfoOpts=getOpts() - startOps;
  log.info("# opts: {}",getFileInfoOpts);
  assertTrue("unexpected number of getFileOps",getFileInfoOpts < 2100 && getFileInfoOpts > 1000);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ImportExportIT </h4><pre class="type-9 type-13 type-11 type-8 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExportImportThenScan() throws Exception {
  Connector conn=getConnector();
  String[] tableNames=getUniqueNames(2);
  String srcTable=tableNames[0], destTable=tableNames[1];
  conn.tableOperations().create(srcTable);
  BatchWriter bw=conn.createBatchWriter(srcTable,new BatchWriterConfig());
  for (int row=0; row < 1000; row++) {
    Mutation m=new Mutation(Integer.toString(row));
    for (int col=0; col < 100; col++) {
      m.put(Integer.toString(col),"",Integer.toString(col * 2));
    }
    bw.addMutation(m);
  }
  bw.close();
  conn.tableOperations().compact(srcTable,null,null,true,true);
  FileSystem fs=cluster.getFileSystem();
  Path tmp=cluster.getTemporaryPath();
  log.info("Using FileSystem: " + fs);
  Path baseDir=new Path(tmp,getClass().getName());
  if (fs.exists(baseDir)) {
    log.info("{} exists on filesystem, deleting",baseDir);
    assertTrue("Failed to deleted " + baseDir,fs.delete(baseDir,true));
  }
  log.info("Creating {}",baseDir);
  assertTrue("Failed to create " + baseDir,fs.mkdirs(baseDir));
  Path exportDir=new Path(baseDir,"export");
  Path importDir=new Path(baseDir,"import");
  for (  Path p : new Path[]{exportDir,importDir}) {
    assertTrue("Failed to create " + baseDir,fs.mkdirs(p));
  }
  log.info("Exporting table to {}",exportDir);
  log.info("Importing table from {}",importDir);
  conn.tableOperations().offline(srcTable,true);
  conn.tableOperations().exportTable(srcTable,exportDir.toString());
  Path distcp=new Path(exportDir,"distcp.txt");
  Assert.assertTrue("Distcp file doesn't exist",fs.exists(distcp));
  FSDataInputStream is=fs.open(distcp);
  BufferedReader reader=new BufferedReader(new InputStreamReader(is));
  String line;
  while (null != (line=reader.readLine())) {
    Path p=new Path(line.substring(5));
    Assert.assertTrue("File doesn't exist: " + p,fs.exists(p));
    Path dest=new Path(importDir,p.getName());
    Assert.assertFalse("Did not expect " + dest + " to exist",fs.exists(dest));
    FileUtil.copy(fs,p,fs,dest,false,fs.getConf());
  }
  reader.close();
  log.info("Import dir: {}",Arrays.toString(fs.listStatus(importDir)));
  conn.tableOperations().importTable(destTable,importDir.toString());
  final String tableId=conn.tableOperations().tableIdMap().get(destTable);
  Assert.assertNotNull(tableId);
  log.info("Imported into table with ID: {}",tableId);
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  MetadataSchema.TabletsSection.ServerColumnFamily.DIRECTORY_COLUMN.fetch(s);
  for (  Entry<Key,Value> fileEntry : s) {
    Key k=fileEntry.getKey();
    String value=fileEntry.getValue().toString();
    if (k.getColumnFamily().equals(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME)) {
      String fileUri=k.getColumnQualifier().toString();
      Assert.assertFalse("Imported files should have absolute URIs, not relative: " + fileUri,looksLikeRelativePath(fileUri));
    }
 else     if (k.getColumnFamily().equals(MetadataSchema.TabletsSection.ServerColumnFamily.NAME)) {
      Assert.assertFalse("Server directory should have absolute URI, not relative: " + value,looksLikeRelativePath(value));
    }
 else {
      Assert.fail("Got expected pair: " + k + "="+ fileEntry.getValue());
    }
  }
  conn.tableOperations().online(srcTable,true);
  verifyTableEquality(conn,srcTable,destTable);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.IsolationAndDeepCopyIT </h4><pre class="type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBugFix() throws Exception {
  String table=super.getUniqueNames(1)[0];
  Connector conn=getConnector();
  conn.tableOperations().create(table);
  BatchWriter bw=conn.createBatchWriter(table,new BatchWriterConfig());
  addDocument(bw,"000A","dog","cat","hamster","iguana","the");
  addDocument(bw,"000B","java","perl","C++","pascal","the");
  addDocument(bw,"000C","chrome","firefox","safari","opera","the");
  addDocument(bw,"000D","logarithmic","quadratic","linear","exponential","the");
  bw.close();
  conn.tableOperations().flush(table,null,null,true);
  IteratorSetting iterCfg=new IteratorSetting(30,"ayeaye",IntersectingIterator.class.getName());
  IntersectingIterator.setColumnFamilies(iterCfg,new Text[]{new Text("the"),new Text("hamster")});
  Scanner scanner=conn.createScanner(table,Authorizations.EMPTY);
  scanner.enableIsolation();
  scanner.addScanIterator(iterCfg);
  for (int i=0; i < 100; i++) {
    Iterator<Entry<Key,Value>> iter=scanner.iterator();
    Assert.assertTrue(iter.hasNext());
    Assert.assertEquals("000A",iter.next().getKey().getColumnQualifierData().toString());
    Assert.assertFalse(iter.hasNext());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.KeyValueEqualityIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEquality() throws Exception {
  Connector conn=this.getConnector();
  final BatchWriterConfig config=new BatchWriterConfig();
  final String[] tables=getUniqueNames(2);
  final String table1=tables[0], table2=tables[1];
  final TableOperations tops=conn.tableOperations();
  tops.create(table1);
  tops.create(table2);
  final BatchWriter bw1=conn.createBatchWriter(table1,config), bw2=conn.createBatchWriter(table2,config);
  for (int row=0; row < 100; row++) {
    Mutation m=new Mutation(Integer.toString(row));
    for (int col=0; col < 10; col++) {
      m.put(Integer.toString(col),"",System.currentTimeMillis(),Integer.toString(col * 2));
    }
    bw1.addMutation(m);
    bw2.addMutation(m);
  }
  bw1.close();
  bw2.close();
  Iterator<Entry<Key,Value>> t1=conn.createScanner(table1,Authorizations.EMPTY).iterator(), t2=conn.createScanner(table2,Authorizations.EMPTY).iterator();
  while (t1.hasNext() && t2.hasNext()) {
    Entry<Key,Value> e1=t1.next(), e2=t2.next();
    Assert.assertEquals(e1,e2);
    Assert.assertEquals(e1.hashCode(),e2.hashCode());
  }
  Assert.assertFalse("table1 had more data to read",t1.hasNext());
  Assert.assertFalse("table2 had more data to read",t2.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.LargeSplitRowIT </h4><pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test(timeout=60 * 1000) public void automaticSplitLater() throws Exception {
  log.info("Split later");
  automaticSplit(15,1);
  final Connector conn=getConnector();
  String tableName=new String();
  java.util.Iterator<String> iterator=conn.tableOperations().list().iterator();
  while (iterator.hasNext()) {
    String curr=iterator.next();
    if (!curr.startsWith(Namespaces.ACCUMULO_NAMESPACE + ".")) {
      tableName=curr;
    }
  }
  BatchWriter batchWriter=conn.createBatchWriter(tableName,new BatchWriterConfig());
  byte data[]=new byte[10];
  for (int j=15; j < 150; j+=1) {
    for (int i=0; i < data.length - 1; i++) {
      data[i]=(byte)j;
    }
    for (int i=0; i < 25; i++) {
      data[data.length - 1]=(byte)i;
      Mutation m=new Mutation(data);
      m.put("cf","cq","value");
      batchWriter.addMutation(m);
    }
  }
  batchWriter.close();
  conn.tableOperations().flush(tableName,new Text(),new Text("z"),true);
  while (conn.tableOperations().listSplits(tableName).size() == 0) {
    Thread.sleep(250);
  }
  Assert.assertTrue(0 < conn.tableOperations().listSplits(tableName).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ManySplitIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test(timeout=4 * 60 * 1000) public void test() throws Exception {
  assumeFalse(IntegrationTestMapReduce.isMapReduce());
  final String tableName=getUniqueNames(1)[0];
  log.info("Creating table");
  final TableOperations tableOperations=getConnector().tableOperations();
  log.info("splitting metadata table");
  tableOperations.create(tableName);
  SortedSet<Text> splits=new TreeSet<Text>();
  for (  byte b : "123456789abcde".getBytes(UTF_8)) {
    splits.add(new Text(new byte[]{'1',';',b}));
  }
  tableOperations.addSplits(MetadataTable.NAME,splits);
  splits.clear();
  for (int i=0; i < SPLITS; i++) {
    splits.add(new Text(Integer.toHexString(i)));
  }
  log.info("Adding splits");
  final AtomicBoolean stop=new AtomicBoolean(false);
  Thread t=new Thread(){
    @Override public void run(){
      while (!stop.get()) {
        UtilWaitThread.sleep(1000);
        try {
          log.info("splits: " + tableOperations.listSplits(tableName).size());
        }
 catch (        TableNotFoundException|AccumuloException|AccumuloSecurityException e) {
          e.printStackTrace();
        }
      }
    }
  }
;
  t.start();
  long now=System.currentTimeMillis();
  tableOperations.addSplits(tableName,splits);
  long diff=System.currentTimeMillis() - now;
  double splitsPerSec=SPLITS / (diff / 1000.);
  log.info("Done: {} splits per second",splitsPerSec);
  assertTrue("splits created too slowly",splitsPerSec > 100);
  stop.set(true);
  t.join();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.MetaGetsReadersIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test(timeout=2 * 60 * 1000) public void test() throws Exception {
  final String tableName=getUniqueNames(1)[0];
  final Connector c=getConnector();
  c.tableOperations().create(tableName);
  Random random=new Random();
  BatchWriter bw=c.createBatchWriter(tableName,null);
  for (int i=0; i < 50000; i++) {
    byte[] row=new byte[100];
    random.nextBytes(row);
    Mutation m=new Mutation(row);
    m.put("","","");
    bw.addMutation(m);
  }
  bw.close();
  c.tableOperations().flush(tableName,null,null,true);
  final AtomicBoolean stop=new AtomicBoolean(false);
  Thread t1=slowScan(c,tableName,stop);
  t1.start();
  Thread t2=slowScan(c,tableName,stop);
  t2.start();
  sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
  long now=System.currentTimeMillis();
  Scanner m=c.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  Iterators.size(m.iterator());
  long delay=System.currentTimeMillis() - now;
  System.out.println("Delay = " + delay);
  assertTrue("metadata table scan was slow",delay < 1000);
  assertFalse(stop.get());
  stop.set(true);
  t1.interrupt();
  t2.interrupt();
  t1.join();
  t2.join();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.MissingWalHeaderCompletesRecoveryIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPartialHeaderWalRecoveryCompletes() throws Exception {
  Connector conn=getConnector();
  MiniAccumuloClusterImpl cluster=getCluster();
  FileSystem fs=getCluster().getFileSystem();
  String fakeServer="127.0.0.1:12345";
  File walogs=new File(cluster.getConfig().getAccumuloDir(),ServerConstants.WAL_DIR);
  File walogServerDir=new File(walogs,fakeServer.replace(':','+'));
  File partialHeaderWalog=new File(walogServerDir,UUID.randomUUID().toString());
  log.info("Created WAL with malformed header at " + partialHeaderWalog.toURI());
  FSDataOutputStream wal=fs.create(new Path(partialHeaderWalog.toURI()));
  wal.write(DfsLogger.LOG_FILE_HEADER_V3.getBytes(UTF_8),0,DfsLogger.LOG_FILE_HEADER_V3.length() / 2);
  wal.close();
  Assert.assertTrue("root user did not have write permission to metadata table",conn.securityOperations().hasTablePermission("root",MetadataTable.NAME,TablePermission.WRITE));
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  String tableId=conn.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Table ID was null",tableId);
  LogEntry logEntry=new LogEntry(null,0,"127.0.0.1:12345",partialHeaderWalog.toURI().toString());
  log.info("Taking {} offline",tableName);
  conn.tableOperations().offline(tableName,true);
  log.info("{} is offline",tableName);
  Text row=MetadataSchema.TabletsSection.getRow(new Text(tableId),null);
  Mutation m=new Mutation(row);
  m.put(logEntry.getColumnFamily(),logEntry.getColumnQualifier(),logEntry.getValue());
  BatchWriter bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  bw.addMutation(m);
  bw.close();
  log.info("Bringing {} online",tableName);
  conn.tableOperations().online(tableName,true);
  log.info("{} is online",tableName);
  Scanner s=conn.createScanner(tableName,Authorizations.EMPTY);
  Assert.assertEquals(0,Iterables.size(s));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyWalRecoveryCompletes() throws Exception {
  Connector conn=getConnector();
  MiniAccumuloClusterImpl cluster=getCluster();
  FileSystem fs=cluster.getFileSystem();
  String fakeServer="127.0.0.1:12345";
  File walogs=new File(cluster.getConfig().getAccumuloDir(),ServerConstants.WAL_DIR);
  File walogServerDir=new File(walogs,fakeServer.replace(':','+'));
  File emptyWalog=new File(walogServerDir,UUID.randomUUID().toString());
  log.info("Created empty WAL at " + emptyWalog.toURI());
  fs.create(new Path(emptyWalog.toURI())).close();
  Assert.assertTrue("root user did not have write permission to metadata table",conn.securityOperations().hasTablePermission("root",MetadataTable.NAME,TablePermission.WRITE));
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  String tableId=conn.tableOperations().tableIdMap().get(tableName);
  Assert.assertNotNull("Table ID was null",tableId);
  LogEntry logEntry=new LogEntry(new KeyExtent(new Text(tableId),null,null),0,"127.0.0.1:12345",emptyWalog.toURI().toString());
  log.info("Taking {} offline",tableName);
  conn.tableOperations().offline(tableName,true);
  log.info("{} is offline",tableName);
  Text row=MetadataSchema.TabletsSection.getRow(new Text(tableId),null);
  Mutation m=new Mutation(row);
  m.put(logEntry.getColumnFamily(),logEntry.getColumnQualifier(),logEntry.getValue());
  BatchWriter bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  bw.addMutation(m);
  bw.close();
  log.info("Bringing {} online",tableName);
  conn.tableOperations().online(tableName,true);
  log.info("{} is online",tableName);
  Scanner s=conn.createScanner(tableName,Authorizations.EMPTY);
  Assert.assertEquals(0,Iterables.size(s));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.MultiTableBatchWriterIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testOfflineTableWithCache() throws Exception {
  boolean mutationsRejected=false;
  try {
    final String[] names=getUniqueNames(2);
    final String table1=names[0], table2=names[1];
    TableOperations tops=connector.tableOperations();
    tops.create(table1);
    tops.create(table2);
    BatchWriter bw1=mtbw.getBatchWriter(table1), bw2=mtbw.getBatchWriter(table2);
    Mutation m1=new Mutation("foo");
    m1.put("col1","","val1");
    m1.put("col2","","val2");
    bw1.addMutation(m1);
    bw2.addMutation(m1);
    tops.offline(table1);
    try {
      bw1=mtbw.getBatchWriter(table1);
    }
 catch (    TableOfflineException e) {
      mutationsRejected=true;
    }
    tops.offline(table2);
    try {
      bw2=mtbw.getBatchWriter(table2);
    }
 catch (    TableOfflineException e) {
      mutationsRejected=true;
    }
  }
  finally {
    if (null != mtbw) {
      try {
        mtbw.close();
      }
 catch (      MutationsRejectedException e) {
        mutationsRejected=true;
      }
    }
  }
  Assert.assertTrue("Expected mutations to be rejected.",mutationsRejected);
}

</code></pre>

<br>
<pre class="type-8 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOfflineTableWithoutCache() throws Exception {
  mtbw=getMultiTableBatchWriter(0);
  boolean mutationsRejected=false;
  try {
    final String[] names=getUniqueNames(2);
    final String table1=names[0], table2=names[1];
    TableOperations tops=connector.tableOperations();
    tops.create(table1);
    tops.create(table2);
    BatchWriter bw1=mtbw.getBatchWriter(table1), bw2=mtbw.getBatchWriter(table2);
    Mutation m1=new Mutation("foo");
    m1.put("col1","","val1");
    m1.put("col2","","val2");
    bw1.addMutation(m1);
    bw2.addMutation(m1);
    tops.offline(table1);
    tops.offline(table2);
    try {
      bw1=mtbw.getBatchWriter(table1);
      Assert.fail(table1 + " should be offline");
    }
 catch (    TableOfflineException e) {
      mutationsRejected=true;
    }
    try {
      bw2=mtbw.getBatchWriter(table2);
      Assert.fail(table1 + " should be offline");
    }
 catch (    TableOfflineException e) {
      mutationsRejected=true;
    }
  }
  finally {
    if (null != mtbw) {
      try {
        mtbw.close();
      }
 catch (      MutationsRejectedException e) {
        mutationsRejected=true;
      }
    }
  }
  Assert.assertTrue("Expected mutations to be rejected.",mutationsRejected);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testTableDelete() throws Exception {
  boolean mutationsRejected=false;
  try {
    final String[] names=getUniqueNames(2);
    final String table1=names[0], table2=names[1];
    TableOperations tops=connector.tableOperations();
    tops.create(table1);
    tops.create(table2);
    BatchWriter bw1=mtbw.getBatchWriter(table1), bw2=mtbw.getBatchWriter(table2);
    Mutation m1=new Mutation("foo");
    m1.put("col1","","val1");
    m1.put("col2","","val2");
    bw1.addMutation(m1);
    bw2.addMutation(m1);
    tops.delete(table1);
    tops.delete(table2);
    Mutation m2=new Mutation("bar");
    m2.put("col1","","val1");
    m2.put("col2","","val2");
    try {
      bw1.addMutation(m2);
      bw2.addMutation(m2);
    }
 catch (    MutationsRejectedException e) {
      mutationsRejected=true;
    }
  }
  finally {
    if (null != mtbw) {
      try {
        mtbw.close();
      }
 catch (      MutationsRejectedException e) {
        mutationsRejected=true;
      }
    }
  }
  Assert.assertTrue("Expected mutations to be rejected.",mutationsRejected);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testOfflineTable() throws Exception {
  boolean mutationsRejected=false;
  try {
    final String[] names=getUniqueNames(2);
    final String table1=names[0], table2=names[1];
    TableOperations tops=connector.tableOperations();
    tops.create(table1);
    tops.create(table2);
    BatchWriter bw1=mtbw.getBatchWriter(table1), bw2=mtbw.getBatchWriter(table2);
    Mutation m1=new Mutation("foo");
    m1.put("col1","","val1");
    m1.put("col2","","val2");
    bw1.addMutation(m1);
    bw2.addMutation(m1);
    tops.offline(table1,true);
    tops.offline(table2,true);
    Mutation m2=new Mutation("bar");
    m2.put("col1","","val1");
    m2.put("col2","","val2");
    try {
      bw1.addMutation(m2);
      bw2.addMutation(m2);
    }
 catch (    MutationsRejectedException e) {
      mutationsRejected=true;
    }
  }
  finally {
    if (null != mtbw) {
      try {
        mtbw.close();
      }
 catch (      MutationsRejectedException e) {
        mutationsRejected=true;
      }
    }
  }
  Assert.assertTrue("Expected mutations to be rejected.",mutationsRejected);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.NamespacesIT </h4><pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void renameTable() throws Exception {
  String namespace2=namespace + "_renamed";
  String t1=namespace + ".1";
  String t2=namespace2 + ".2";
  String t3=namespace + ".3";
  String t4=namespace + ".4";
  String t5="5";
  c.namespaceOperations().create(namespace);
  c.namespaceOperations().create(namespace2);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertTrue(c.namespaceOperations().exists(namespace2));
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  assertFalse(c.tableOperations().exists(t3));
  assertFalse(c.tableOperations().exists(t4));
  assertFalse(c.tableOperations().exists(t5));
  c.tableOperations().create(t1);
  try {
    c.tableOperations().rename(t1,t2);
    fail();
  }
 catch (  AccumuloException e) {
    assertEquals(ThriftTableOperationException.class.getName(),e.getCause().getClass().getName());
    assertEquals(TableOperation.RENAME,((ThriftTableOperationException)e.getCause()).getOp());
    assertEquals(TableOperationExceptionType.INVALID_NAME,((ThriftTableOperationException)e.getCause()).getType());
  }
  try {
    c.tableOperations().rename(t1,t5);
    fail();
  }
 catch (  AccumuloException e) {
    assertEquals(ThriftTableOperationException.class.getName(),e.getCause().getClass().getName());
    assertEquals(TableOperation.RENAME,((ThriftTableOperationException)e.getCause()).getOp());
    assertEquals(TableOperationExceptionType.INVALID_NAME,((ThriftTableOperationException)e.getCause()).getType());
  }
  assertTrue(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  assertFalse(c.tableOperations().exists(t3));
  assertFalse(c.tableOperations().exists(t4));
  assertFalse(c.tableOperations().exists(t5));
  c.tableOperations().rename(t1,t3);
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  assertTrue(c.tableOperations().exists(t3));
  assertFalse(c.tableOperations().exists(t4));
  assertFalse(c.tableOperations().exists(t5));
}

</code></pre>

<br>
<pre class="type-9 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyIteratorInheritance() throws Exception {
  String t1=namespace + ".1";
  c.namespaceOperations().create(namespace);
  c.tableOperations().create(t1);
  String iterName=namespace + "_iter";
  BatchWriter bw=c.createBatchWriter(t1,new BatchWriterConfig());
  Mutation m=new Mutation("r");
  m.put("a","b",new Value("abcde".getBytes()));
  bw.addMutation(m);
  bw.flush();
  bw.close();
  IteratorSetting setting=new IteratorSetting(250,iterName,SimpleFilter.class.getName());
  Scanner s=c.createScanner(t1,Authorizations.EMPTY);
  assertTrue(s.iterator().hasNext());
  assertFalse(c.namespaceOperations().listIterators(namespace).containsKey(iterName));
  assertFalse(c.tableOperations().listIterators(t1).containsKey(iterName));
  c.namespaceOperations().checkIteratorConflicts(namespace,setting,EnumSet.allOf(IteratorScope.class));
  c.namespaceOperations().attachIterator(namespace,setting);
  sleepUninterruptibly(2,TimeUnit.SECONDS);
  try {
    c.namespaceOperations().checkIteratorConflicts(namespace,setting,EnumSet.allOf(IteratorScope.class));
    fail();
  }
 catch (  AccumuloException e) {
    assertEquals(IllegalArgumentException.class.getName(),e.getCause().getClass().getName());
  }
  IteratorSetting setting2=c.namespaceOperations().getIteratorSetting(namespace,setting.getName(),IteratorScope.scan);
  assertEquals(setting,setting2);
  assertTrue(c.namespaceOperations().listIterators(namespace).containsKey(iterName));
  assertTrue(c.tableOperations().listIterators(t1).containsKey(iterName));
  s=c.createScanner(t1,Authorizations.EMPTY);
  assertFalse(s.iterator().hasNext());
  c.namespaceOperations().removeIterator(namespace,setting.getName(),EnumSet.allOf(IteratorScope.class));
  sleepUninterruptibly(2,TimeUnit.SECONDS);
  assertFalse(c.namespaceOperations().listIterators(namespace).containsKey(iterName));
  assertFalse(c.tableOperations().listIterators(t1).containsKey(iterName));
  s=c.createScanner(t1,Authorizations.EMPTY);
  assertTrue(s.iterator().hasNext());
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifyingPermissions() throws Exception {
  String tableName=namespace + ".modify";
  c.namespaceOperations().create(namespace);
  c.tableOperations().create(tableName);
  assertTrue(c.securityOperations().hasTablePermission(c.whoami(),tableName,TablePermission.READ));
  c.securityOperations().revokeTablePermission(c.whoami(),tableName,TablePermission.READ);
  assertFalse(c.securityOperations().hasTablePermission(c.whoami(),tableName,TablePermission.READ));
  c.securityOperations().grantTablePermission(c.whoami(),tableName,TablePermission.READ);
  assertTrue(c.securityOperations().hasTablePermission(c.whoami(),tableName,TablePermission.READ));
  c.tableOperations().delete(tableName);
  try {
    c.securityOperations().hasTablePermission(c.whoami(),tableName,TablePermission.READ);
    fail();
  }
 catch (  Exception e) {
    if (!(e instanceof AccumuloSecurityException) || !((AccumuloSecurityException)e).getSecurityErrorCode().equals(SecurityErrorCode.TABLE_DOESNT_EXIST))     throw new Exception("Has permission resulted in " + e.getClass().getName(),e);
  }
  try {
    c.securityOperations().grantTablePermission(c.whoami(),tableName,TablePermission.READ);
    fail();
  }
 catch (  Exception e) {
    if (!(e instanceof AccumuloSecurityException) || !((AccumuloSecurityException)e).getSecurityErrorCode().equals(SecurityErrorCode.TABLE_DOESNT_EXIST))     throw new Exception("Has permission resulted in " + e.getClass().getName(),e);
  }
  try {
    c.securityOperations().revokeTablePermission(c.whoami(),tableName,TablePermission.READ);
    fail();
  }
 catch (  Exception e) {
    if (!(e instanceof AccumuloSecurityException) || !((AccumuloSecurityException)e).getSecurityErrorCode().equals(SecurityErrorCode.TABLE_DOESNT_EXIST))     throw new Exception("Has permission resulted in " + e.getClass().getName(),e);
  }
  assertTrue(c.securityOperations().hasNamespacePermission(c.whoami(),namespace,NamespacePermission.READ));
  c.securityOperations().revokeNamespacePermission(c.whoami(),namespace,NamespacePermission.READ);
  assertFalse(c.securityOperations().hasNamespacePermission(c.whoami(),namespace,NamespacePermission.READ));
  c.securityOperations().grantNamespacePermission(c.whoami(),namespace,NamespacePermission.READ);
  assertTrue(c.securityOperations().hasNamespacePermission(c.whoami(),namespace,NamespacePermission.READ));
  c.namespaceOperations().delete(namespace);
  try {
    c.securityOperations().hasTablePermission(c.whoami(),tableName,TablePermission.READ);
    fail();
  }
 catch (  Exception e) {
    if (!(e instanceof AccumuloSecurityException) || !((AccumuloSecurityException)e).getSecurityErrorCode().equals(SecurityErrorCode.TABLE_DOESNT_EXIST))     throw new Exception("Has permission resulted in " + e.getClass().getName(),e);
  }
  try {
    c.securityOperations().grantTablePermission(c.whoami(),tableName,TablePermission.READ);
    fail();
  }
 catch (  Exception e) {
    if (!(e instanceof AccumuloSecurityException) || !((AccumuloSecurityException)e).getSecurityErrorCode().equals(SecurityErrorCode.TABLE_DOESNT_EXIST))     throw new Exception("Has permission resulted in " + e.getClass().getName(),e);
  }
  try {
    c.securityOperations().revokeTablePermission(c.whoami(),tableName,TablePermission.READ);
    fail();
  }
 catch (  Exception e) {
    if (!(e instanceof AccumuloSecurityException) || !((AccumuloSecurityException)e).getSecurityErrorCode().equals(SecurityErrorCode.TABLE_DOESNT_EXIST))     throw new Exception("Has permission resulted in " + e.getClass().getName(),e);
  }
  try {
    c.securityOperations().hasNamespacePermission(c.whoami(),namespace,NamespacePermission.READ);
    fail();
  }
 catch (  Exception e) {
    if (!(e instanceof AccumuloSecurityException) || !((AccumuloSecurityException)e).getSecurityErrorCode().equals(SecurityErrorCode.NAMESPACE_DOESNT_EXIST))     throw new Exception("Has permission resulted in " + e.getClass().getName(),e);
  }
  try {
    c.securityOperations().grantNamespacePermission(c.whoami(),namespace,NamespacePermission.READ);
    fail();
  }
 catch (  Exception e) {
    if (!(e instanceof AccumuloSecurityException) || !((AccumuloSecurityException)e).getSecurityErrorCode().equals(SecurityErrorCode.NAMESPACE_DOESNT_EXIST))     throw new Exception("Has permission resulted in " + e.getClass().getName(),e);
  }
  try {
    c.securityOperations().revokeNamespacePermission(c.whoami(),namespace,NamespacePermission.READ);
    fail();
  }
 catch (  Exception e) {
    if (!(e instanceof AccumuloSecurityException) || !((AccumuloSecurityException)e).getSecurityErrorCode().equals(SecurityErrorCode.NAMESPACE_DOESNT_EXIST))     throw new Exception("Has permission resulted in " + e.getClass().getName(),e);
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void verifyPropertyInheritance() throws Exception {
  String t0="0";
  String t1=namespace + ".1";
  String t2=namespace + ".2";
  String k=Property.TABLE_SCAN_MAXMEM.getKey();
  String v="42K";
  assertFalse(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  c.namespaceOperations().create(namespace);
  c.tableOperations().create(t1);
  c.tableOperations().create(t0);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertTrue(c.tableOperations().exists(t1));
  assertTrue(c.tableOperations().exists(t0));
  assertFalse(checkNamespaceHasProp(namespace,k,v));
  assertFalse(checkTableHasProp(t1,k,v));
  assertFalse(checkNamespaceHasProp(Namespaces.DEFAULT_NAMESPACE,k,v));
  assertFalse(checkTableHasProp(t0,k,v));
  c.namespaceOperations().setProperty(namespace,k,v);
  assertTrue(checkNamespaceHasProp(namespace,k,v));
  assertTrue(checkTableHasProp(t1,k,v));
  assertFalse(checkNamespaceHasProp(Namespaces.DEFAULT_NAMESPACE,k,v));
  assertFalse(checkTableHasProp(t0,k,v));
  assertFalse(c.tableOperations().exists(t2));
  c.tableOperations().create(t2);
  assertTrue(c.tableOperations().exists(t2));
  assertTrue(checkNamespaceHasProp(namespace,k,v));
  assertTrue(checkTableHasProp(t1,k,v));
  assertTrue(checkTableHasProp(t2,k,v));
  assertFalse(checkNamespaceHasProp(Namespaces.DEFAULT_NAMESPACE,k,v));
  assertFalse(checkTableHasProp(t0,k,v));
  c.namespaceOperations().removeProperty(namespace,k);
  assertFalse(checkNamespaceHasProp(namespace,k,v));
  assertFalse(checkTableHasProp(t1,k,v));
  assertFalse(checkTableHasProp(t2,k,v));
  assertFalse(checkNamespaceHasProp(Namespaces.DEFAULT_NAMESPACE,k,v));
  assertFalse(checkTableHasProp(t0,k,v));
  c.namespaceOperations().setProperty(Namespaces.DEFAULT_NAMESPACE,k,v);
  assertFalse(checkNamespaceHasProp(namespace,k,v));
  assertFalse(checkTableHasProp(t1,k,v));
  assertFalse(checkTableHasProp(t2,k,v));
  assertTrue(checkNamespaceHasProp(Namespaces.DEFAULT_NAMESPACE,k,v));
  assertTrue(checkTableHasProp(t0,k,v));
  String k2=Property.TABLE_FILE_MAX.getKey();
  String v2="42";
  String table_v2="13";
  c.namespaceOperations().setProperty(namespace,k2,v2);
  c.tableOperations().setProperty(t2,k2,table_v2);
  assertTrue(checkNamespaceHasProp(namespace,k2,v2));
  assertTrue(checkTableHasProp(t1,k2,v2));
  assertTrue(checkTableHasProp(t2,k2,table_v2));
  c.tableOperations().delete(t1);
  c.tableOperations().delete(t2);
  c.tableOperations().delete(t0);
  c.namespaceOperations().delete(namespace);
}

</code></pre>

<br>
<pre class="type-13 type-11 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyTableOperationsExceptions() throws Exception {
  String tableName=namespace + ".1";
  IteratorSetting setting=new IteratorSetting(200,VersioningIterator.class);
  Text a=new Text("a");
  Text z=new Text("z");
  TableOperations ops=c.tableOperations();
  assertFalse(ops.exists(tableName));
  int numRun=0;
  ACCUMULOEXCEPTIONS_NAMESPACENOTFOUND:   for (int i=0; ; ++i)   try {
switch (i) {
case 0:
      ops.create(tableName);
    fail();
  break;
case 1:
ops.create("a");
ops.clone("a",tableName,true,Collections.<String,String>emptyMap(),Collections.<String>emptySet());
fail();
break;
case 2:
ops.importTable(tableName,System.getProperty("user.dir") + "/target");
fail();
break;
default :
assertEquals(3,i);
assertEquals(3,numRun);
break ACCUMULOEXCEPTIONS_NAMESPACENOTFOUND;
}
}
 catch (Exception e) {
numRun++;
if (!(e instanceof AccumuloException) || !(e.getCause() instanceof NamespaceNotFoundException)) throw new Exception("Case " + i + " resulted in "+ e.getClass().getName(),e);
}
numRun=0;
ACCUMULOEXCEPTIONS_TABLENOTFOUND: for (int i=0; ; ++i) try {
switch (i) {
case 0:
ops.removeConstraint(tableName,0);
fail();
break;
case 1:
ops.removeProperty(tableName,"a");
fail();
break;
case 2:
ops.setProperty(tableName,"a","b");
fail();
break;
default :
assertEquals(3,i);
assertEquals(3,numRun);
break ACCUMULOEXCEPTIONS_TABLENOTFOUND;
}
}
 catch (Exception e) {
numRun++;
if (!(e instanceof AccumuloException) || !(e.getCause() instanceof TableNotFoundException) || !(e.getCause().getCause() instanceof NamespaceNotFoundException)) throw new Exception("Case " + i + " resulted in "+ e.getClass().getName(),e);
}
numRun=0;
TABLENOTFOUNDEXCEPTIONS: for (int i=0; ; ++i) try {
switch (i) {
case 0:
ops.addConstraint(tableName,NumericValueConstraint.class.getName());
fail();
break;
case 1:
ops.addSplits(tableName,new TreeSet<Text>());
fail();
break;
case 2:
ops.attachIterator(tableName,setting);
fail();
break;
case 3:
ops.cancelCompaction(tableName);
fail();
break;
case 4:
ops.checkIteratorConflicts(tableName,setting,EnumSet.allOf(IteratorScope.class));
fail();
break;
case 5:
ops.clearLocatorCache(tableName);
fail();
break;
case 6:
ops.clone(tableName,"2",true,Collections.<String,String>emptyMap(),Collections.<String>emptySet());
fail();
break;
case 7:
ops.compact(tableName,a,z,true,true);
fail();
break;
case 8:
ops.delete(tableName);
fail();
break;
case 9:
ops.deleteRows(tableName,a,z);
fail();
break;
case 10:
ops.splitRangeByTablets(tableName,new Range(),10);
fail();
break;
case 11:
ops.exportTable(tableName,namespace + "_dir");
fail();
break;
case 12:
ops.flush(tableName,a,z,true);
fail();
break;
case 13:
ops.getDiskUsage(Collections.singleton(tableName));
fail();
break;
case 14:
ops.getIteratorSetting(tableName,"a",IteratorScope.scan);
fail();
break;
case 15:
ops.getLocalityGroups(tableName);
fail();
break;
case 16:
ops.getMaxRow(tableName,Authorizations.EMPTY,a,true,z,true);
fail();
break;
case 17:
ops.getProperties(tableName);
fail();
break;
case 18:
ops.importDirectory(tableName,"","",false);
fail();
break;
case 19:
ops.testClassLoad(tableName,VersioningIterator.class.getName(),SortedKeyValueIterator.class.getName());
fail();
break;
case 20:
ops.listConstraints(tableName);
fail();
break;
case 21:
ops.listIterators(tableName);
fail();
break;
case 22:
ops.listSplits(tableName);
fail();
break;
case 23:
ops.merge(tableName,a,z);
fail();
break;
case 24:
ops.offline(tableName,true);
fail();
break;
case 25:
ops.online(tableName,true);
fail();
break;
case 26:
ops.removeIterator(tableName,"a",EnumSet.of(IteratorScope.scan));
fail();
break;
case 27:
ops.rename(tableName,tableName + "2");
fail();
break;
case 28:
ops.setLocalityGroups(tableName,Collections.<String,Set<Text>>emptyMap());
fail();
break;
default :
assertEquals(29,i);
assertEquals(29,numRun);
break TABLENOTFOUNDEXCEPTIONS;
}
}
 catch (Exception e) {
numRun++;
if (!(e instanceof TableNotFoundException) || !(e.getCause() instanceof NamespaceNotFoundException)) throw new Exception("Case " + i + " resulted in "+ e.getClass().getName(),e);
}
}

</code></pre>

<br>
<pre class="type-13 type-11 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyNamespaceOperationsExceptions() throws Exception {
  IteratorSetting setting=new IteratorSetting(200,VersioningIterator.class);
  NamespaceOperations ops=c.namespaceOperations();
  assertFalse(ops.exists(namespace));
  int numRun=0;
  NAMESPACENOTFOUND:   for (int i=0; ; ++i)   try {
switch (i) {
case 0:
      ops.addConstraint(namespace,NumericValueConstraint.class.getName());
    fail();
  break;
case 1:
ops.attachIterator(namespace,setting);
fail();
break;
case 2:
ops.checkIteratorConflicts(namespace,setting,EnumSet.of(IteratorScope.scan));
fail();
break;
case 3:
ops.delete(namespace);
fail();
break;
case 4:
ops.getIteratorSetting(namespace,"thing",IteratorScope.scan);
fail();
break;
case 5:
ops.getProperties(namespace);
fail();
break;
case 6:
ops.listConstraints(namespace);
fail();
break;
case 7:
ops.listIterators(namespace);
fail();
break;
case 8:
ops.removeConstraint(namespace,1);
fail();
break;
case 9:
ops.removeIterator(namespace,"thing",EnumSet.allOf(IteratorScope.class));
fail();
break;
case 10:
ops.removeProperty(namespace,"a");
fail();
break;
case 11:
ops.rename(namespace,namespace + "2");
fail();
break;
case 12:
ops.setProperty(namespace,"k","v");
fail();
break;
case 13:
ops.testClassLoad(namespace,VersioningIterator.class.getName(),SortedKeyValueIterator.class.getName());
fail();
break;
default :
assertEquals(14,i);
assertEquals(14,numRun);
break NAMESPACENOTFOUND;
}
}
 catch (Exception e) {
numRun++;
if (!(e instanceof NamespaceNotFoundException)) throw new Exception("Case " + i + " resulted in "+ e.getClass().getName(),e);
}
numRun=0;
NAMESPACEEXISTS: for (int i=0; ; ++i) try {
switch (i) {
case 0:
ops.create(namespace + "0");
ops.create(namespace + "0");
fail();
break;
case 1:
ops.create(namespace + i + "_1");
ops.create(namespace + i + "_2");
ops.rename(namespace + i + "_1",namespace + i + "_2");
fail();
break;
case 2:
ops.create(Namespaces.DEFAULT_NAMESPACE);
fail();
break;
case 3:
ops.create(Namespaces.ACCUMULO_NAMESPACE);
fail();
break;
case 4:
ops.create(namespace + i + "_1");
ops.rename(namespace + i + "_1",Namespaces.DEFAULT_NAMESPACE);
fail();
break;
case 5:
ops.create(namespace + i + "_1");
ops.rename(namespace + i + "_1",Namespaces.ACCUMULO_NAMESPACE);
fail();
break;
default :
assertEquals(6,i);
assertEquals(6,numRun);
break NAMESPACEEXISTS;
}
}
 catch (Exception e) {
numRun++;
if (!(e instanceof NamespaceExistsException)) throw new Exception("Case " + i + " resulted in "+ e.getClass().getName(),e);
}
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void loadClass() throws Exception {
  assertTrue(c.namespaceOperations().testClassLoad(Namespaces.DEFAULT_NAMESPACE,VersioningIterator.class.getName(),SortedKeyValueIterator.class.getName()));
  assertFalse(c.namespaceOperations().testClassLoad(Namespaces.DEFAULT_NAMESPACE,"dummy",SortedKeyValueIterator.class.getName()));
  try {
    c.namespaceOperations().testClassLoad(namespace,"dummy","dummy");
    fail();
  }
 catch (  NamespaceNotFoundException e) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createTableInMissingNamespace() throws Exception {
  String t=namespace + ".1";
  assertFalse(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t));
  try {
    c.tableOperations().create(t);
    fail();
  }
 catch (  AccumuloException e) {
    assertEquals(NamespaceNotFoundException.class.getName(),e.getCause().getClass().getName());
    assertFalse(c.namespaceOperations().exists(namespace));
    assertFalse(c.tableOperations().exists(t));
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void createTableInDefaultNamespace() throws Exception {
  String tableName="1";
  c.tableOperations().create(tableName);
  assertTrue(c.tableOperations().exists(tableName));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void checkBuiltInNamespaces() throws Exception {
  assertTrue(c.namespaceOperations().exists(Namespaces.DEFAULT_NAMESPACE));
  assertTrue(c.namespaceOperations().exists(Namespaces.ACCUMULO_NAMESPACE));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=NamespaceNotEmptyException.class) public void deleteNonEmptyNamespace() throws Exception {
  String tableName1=namespace + ".1";
  assertFalse(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(tableName1));
  c.namespaceOperations().create(namespace);
  c.tableOperations().create(tableName1);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertTrue(c.tableOperations().exists(tableName1));
  c.namespaceOperations().delete(namespace);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void renameNamespaceWithTable() throws Exception {
  String namespace2=namespace + "_renamed";
  String t1=namespace + ".t";
  String t2=namespace2 + ".t";
  c.namespaceOperations().create(namespace);
  c.tableOperations().create(t1);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertTrue(c.tableOperations().exists(t1));
  assertFalse(c.namespaceOperations().exists(namespace2));
  assertFalse(c.tableOperations().exists(t2));
  String namespaceId=c.namespaceOperations().namespaceIdMap().get(namespace);
  String tableId=c.tableOperations().tableIdMap().get(t1);
  c.namespaceOperations().rename(namespace,namespace2);
  assertFalse(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertTrue(c.namespaceOperations().exists(namespace2));
  assertTrue(c.tableOperations().exists(t2));
  String namespaceId2=c.namespaceOperations().namespaceIdMap().get(namespace2);
  String tableId2=c.tableOperations().tableIdMap().get(t2);
  assertEquals(namespaceId,namespaceId2);
  assertEquals(tableId,tableId2);
}

</code></pre>

<br>
<pre class="type-9 type-11 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests new Namespace permissions as well as modifications to Table permissions because of namespaces. Checks each permission to first make sure the user
 * doesn't have permission to perform the action, then root grants them the permission and we check to make sure they could perform the action.
 */
@Test public void testPermissions() throws Exception {
  ClusterUser user1=getUser(0), user2=getUser(1), root=getAdminUser();
  String u1=user1.getPrincipal();
  String u2=user2.getPrincipal();
  PasswordToken pass=(null != user1.getPassword() ? new PasswordToken(user1.getPassword()) : null);
  String n1=namespace;
  String t1=n1 + ".1";
  String t2=n1 + ".2";
  String t3=n1 + ".3";
  String n2=namespace + "_2";
  loginAs(root);
  c.namespaceOperations().create(n1);
  c.tableOperations().create(t1);
  c.securityOperations().createLocalUser(u1,pass);
  loginAs(user1);
  Connector user1Con=c.getInstance().getConnector(u1,user1.getToken());
  try {
    user1Con.tableOperations().create(t2);
    fail();
  }
 catch (  AccumuloSecurityException e) {
    expectPermissionDenied(e);
  }
  loginAs(root);
  c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.CREATE_TABLE);
  loginAs(user1);
  user1Con.tableOperations().create(t2);
  loginAs(root);
  assertTrue(c.tableOperations().list().contains(t2));
  c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.CREATE_TABLE);
  loginAs(user1);
  try {
    user1Con.tableOperations().delete(t1);
    fail();
  }
 catch (  AccumuloSecurityException e) {
    expectPermissionDenied(e);
  }
  loginAs(root);
  c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.DROP_TABLE);
  loginAs(user1);
  user1Con.tableOperations().delete(t1);
  loginAs(root);
  assertTrue(!c.tableOperations().list().contains(t1));
  c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.DROP_TABLE);
  c.tableOperations().create(t3);
  BatchWriter bw=c.createBatchWriter(t3,null);
  Mutation m=new Mutation("row");
  m.put("cf","cq","value");
  bw.addMutation(m);
  bw.close();
  loginAs(user1);
  Iterator<Entry<Key,Value>> i=user1Con.createScanner(t3,new Authorizations()).iterator();
  try {
    i.next();
    fail();
  }
 catch (  RuntimeException e) {
    assertEquals(AccumuloSecurityException.class.getName(),e.getCause().getClass().getName());
    expectPermissionDenied((AccumuloSecurityException)e.getCause());
  }
  loginAs(user1);
  m=new Mutation(u1);
  m.put("cf","cq","turtles");
  bw=user1Con.createBatchWriter(t3,null);
  try {
    bw.addMutation(m);
    bw.close();
    fail();
  }
 catch (  MutationsRejectedException e) {
    assertEquals(1,e.getSecurityErrorCodes().size());
    assertEquals(1,e.getSecurityErrorCodes().entrySet().iterator().next().getValue().size());
switch (e.getSecurityErrorCodes().entrySet().iterator().next().getValue().iterator().next()) {
case PERMISSION_DENIED:
      break;
default :
    fail();
}
}
loginAs(root);
c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.READ);
loginAs(user1);
i=user1Con.createScanner(t3,new Authorizations()).iterator();
assertTrue(i.hasNext());
loginAs(root);
c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.READ);
c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.WRITE);
loginAs(user1);
m=new Mutation(u1);
m.put("cf","cq","turtles");
bw=user1Con.createBatchWriter(t3,null);
bw.addMutation(m);
bw.close();
loginAs(root);
c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.WRITE);
loginAs(user1);
try {
user1Con.tableOperations().setProperty(t3,Property.TABLE_FILE_MAX.getKey(),"42");
fail();
}
 catch (AccumuloSecurityException e) {
expectPermissionDenied(e);
}
loginAs(root);
c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.ALTER_TABLE);
loginAs(user1);
user1Con.tableOperations().setProperty(t3,Property.TABLE_FILE_MAX.getKey(),"42");
user1Con.tableOperations().removeProperty(t3,Property.TABLE_FILE_MAX.getKey());
loginAs(root);
c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.ALTER_TABLE);
loginAs(user1);
try {
user1Con.namespaceOperations().setProperty(n1,Property.TABLE_FILE_MAX.getKey(),"55");
fail();
}
 catch (AccumuloSecurityException e) {
expectPermissionDenied(e);
}
loginAs(root);
c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.ALTER_NAMESPACE);
loginAs(user1);
user1Con.namespaceOperations().setProperty(n1,Property.TABLE_FILE_MAX.getKey(),"42");
user1Con.namespaceOperations().removeProperty(n1,Property.TABLE_FILE_MAX.getKey());
loginAs(root);
c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.ALTER_NAMESPACE);
loginAs(root);
c.securityOperations().createLocalUser(u2,(root.getPassword() == null ? null : new PasswordToken(user2.getPassword())));
loginAs(user1);
try {
user1Con.securityOperations().grantNamespacePermission(u2,n1,NamespacePermission.ALTER_NAMESPACE);
fail();
}
 catch (AccumuloSecurityException e) {
expectPermissionDenied(e);
}
loginAs(root);
c.securityOperations().grantNamespacePermission(u1,n1,NamespacePermission.GRANT);
loginAs(user1);
user1Con.securityOperations().grantNamespacePermission(u2,n1,NamespacePermission.ALTER_NAMESPACE);
user1Con.securityOperations().revokeNamespacePermission(u2,n1,NamespacePermission.ALTER_NAMESPACE);
loginAs(root);
c.securityOperations().revokeNamespacePermission(u1,n1,NamespacePermission.GRANT);
loginAs(user1);
try {
user1Con.namespaceOperations().create(n2);
fail();
}
 catch (AccumuloSecurityException e) {
expectPermissionDenied(e);
}
loginAs(root);
c.securityOperations().grantSystemPermission(u1,SystemPermission.CREATE_NAMESPACE);
loginAs(user1);
user1Con.namespaceOperations().create(n2);
loginAs(root);
c.securityOperations().revokeSystemPermission(u1,SystemPermission.CREATE_NAMESPACE);
c.securityOperations().revokeNamespacePermission(u1,n2,NamespacePermission.DROP_NAMESPACE);
loginAs(user1);
try {
user1Con.namespaceOperations().delete(n2);
fail();
}
 catch (AccumuloSecurityException e) {
expectPermissionDenied(e);
}
loginAs(root);
c.securityOperations().grantSystemPermission(u1,SystemPermission.DROP_NAMESPACE);
loginAs(user1);
user1Con.namespaceOperations().delete(n2);
loginAs(root);
c.securityOperations().revokeSystemPermission(u1,SystemPermission.DROP_NAMESPACE);
loginAs(user1);
try {
user1Con.namespaceOperations().setProperty(n1,Property.TABLE_FILE_MAX.getKey(),"33");
fail();
}
 catch (AccumuloSecurityException e) {
expectPermissionDenied(e);
}
loginAs(root);
c.securityOperations().grantSystemPermission(u1,SystemPermission.ALTER_NAMESPACE);
loginAs(user1);
user1Con.namespaceOperations().setProperty(n1,Property.TABLE_FILE_MAX.getKey(),"33");
user1Con.namespaceOperations().removeProperty(n1,Property.TABLE_FILE_MAX.getKey());
loginAs(root);
c.securityOperations().revokeSystemPermission(u1,SystemPermission.ALTER_NAMESPACE);
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cloneTable() throws Exception {
  String namespace2=namespace + "_clone";
  String t1=namespace + ".1";
  String t2=namespace + ".2";
  String t3=namespace2 + ".2";
  String k1=Property.TABLE_FILE_MAX.getKey();
  String k2=Property.TABLE_FILE_REPLICATION.getKey();
  String k1v1="55";
  String k1v2="66";
  String k2v1="5";
  String k2v2="6";
  c.namespaceOperations().create(namespace);
  c.tableOperations().create(t1);
  assertTrue(c.tableOperations().exists(t1));
  assertFalse(c.namespaceOperations().exists(namespace2));
  assertFalse(c.tableOperations().exists(t2));
  assertFalse(c.tableOperations().exists(t3));
  try {
    c.tableOperations().clone(t1,t3,false,null,null);
    fail();
  }
 catch (  AccumuloException e) {
    assertEquals(NamespaceNotFoundException.class.getName(),e.getCause().getClass().getName());
  }
  c.namespaceOperations().create(namespace2);
  c.tableOperations().create(t2);
  c.tableOperations().create(t3);
  for (  String t : Arrays.asList(t2,t3)) {
    try {
      c.tableOperations().clone(t1,t,false,null,null);
      fail();
    }
 catch (    TableExistsException e) {
      c.tableOperations().delete(t);
    }
  }
  assertTrue(c.tableOperations().exists(t1));
  assertTrue(c.namespaceOperations().exists(namespace2));
  assertFalse(c.tableOperations().exists(t2));
  assertFalse(c.tableOperations().exists(t3));
  assertFalse(checkNamespaceHasProp(namespace,k1,k1v1));
  assertFalse(checkNamespaceHasProp(namespace2,k1,k1v2));
  assertFalse(checkTableHasProp(t1,k1,k1v1));
  assertFalse(checkTableHasProp(t1,k1,k1v2));
  assertFalse(checkNamespaceHasProp(namespace,k2,k2v1));
  assertFalse(checkNamespaceHasProp(namespace2,k2,k2v1));
  assertFalse(checkTableHasProp(t1,k2,k2v1));
  assertFalse(checkTableHasProp(t1,k2,k2v2));
  c.namespaceOperations().setProperty(namespace,k1,k1v1);
  c.namespaceOperations().setProperty(namespace2,k1,k1v2);
  c.namespaceOperations().setProperty(namespace,k2,k2v1);
  c.namespaceOperations().setProperty(namespace2,k2,k2v1);
  c.tableOperations().setProperty(t1,k2,k2v2);
  assertTrue(checkNamespaceHasProp(namespace,k1,k1v1));
  assertTrue(checkNamespaceHasProp(namespace2,k1,k1v2));
  assertTrue(checkTableHasProp(t1,k1,k1v1));
  assertFalse(checkTableHasProp(t1,k1,k1v2));
  assertTrue(checkNamespaceHasProp(namespace,k2,k2v1));
  assertTrue(checkNamespaceHasProp(namespace2,k2,k2v1));
  assertFalse(checkTableHasProp(t1,k2,k2v1));
  assertTrue(checkTableHasProp(t1,k2,k2v2));
  for (  String t : Arrays.asList(t2,t3))   c.tableOperations().clone(t1,t,false,null,null);
  assertTrue(c.namespaceOperations().exists(namespace2));
  assertTrue(c.tableOperations().exists(t1));
  assertTrue(c.tableOperations().exists(t2));
  assertTrue(c.tableOperations().exists(t3));
  assertTrue(checkTableHasProp(t1,k1,k1v1));
  assertTrue(checkTableHasProp(t2,k1,k1v1));
  assertTrue(checkTableHasProp(t3,k1,k1v2));
  assertTrue(checkTableHasProp(t1,k2,k2v2));
  assertTrue(checkTableHasProp(t2,k2,k2v2));
  assertTrue(checkTableHasProp(t3,k2,k2v2));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void listNamespaces() throws Exception {
  SortedSet<String> namespaces=c.namespaceOperations().list();
  Map<String,String> map=c.namespaceOperations().namespaceIdMap();
  assertEquals(2,namespaces.size());
  assertEquals(2,map.size());
  assertTrue(namespaces.contains(Namespaces.ACCUMULO_NAMESPACE));
  assertTrue(namespaces.contains(Namespaces.DEFAULT_NAMESPACE));
  assertFalse(namespaces.contains(namespace));
  assertEquals(Namespaces.ACCUMULO_NAMESPACE_ID,map.get(Namespaces.ACCUMULO_NAMESPACE));
  assertEquals(Namespaces.DEFAULT_NAMESPACE_ID,map.get(Namespaces.DEFAULT_NAMESPACE));
  assertNull(map.get(namespace));
  c.namespaceOperations().create(namespace);
  namespaces=c.namespaceOperations().list();
  map=c.namespaceOperations().namespaceIdMap();
  assertEquals(3,namespaces.size());
  assertEquals(3,map.size());
  assertTrue(namespaces.contains(Namespaces.ACCUMULO_NAMESPACE));
  assertTrue(namespaces.contains(Namespaces.DEFAULT_NAMESPACE));
  assertTrue(namespaces.contains(namespace));
  assertEquals(Namespaces.ACCUMULO_NAMESPACE_ID,map.get(Namespaces.ACCUMULO_NAMESPACE));
  assertEquals(Namespaces.DEFAULT_NAMESPACE_ID,map.get(Namespaces.DEFAULT_NAMESPACE));
  assertNotNull(map.get(namespace));
  c.namespaceOperations().delete(namespace);
  namespaces=c.namespaceOperations().list();
  map=c.namespaceOperations().namespaceIdMap();
  assertEquals(2,namespaces.size());
  assertEquals(2,map.size());
  assertTrue(namespaces.contains(Namespaces.ACCUMULO_NAMESPACE));
  assertTrue(namespaces.contains(Namespaces.DEFAULT_NAMESPACE));
  assertFalse(namespaces.contains(namespace));
  assertEquals(Namespaces.ACCUMULO_NAMESPACE_ID,map.get(Namespaces.ACCUMULO_NAMESPACE));
  assertEquals(Namespaces.DEFAULT_NAMESPACE_ID,map.get(Namespaces.DEFAULT_NAMESPACE));
  assertNull(map.get(namespace));
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyConstraintInheritance() throws Exception {
  String t1=namespace + ".1";
  c.namespaceOperations().create(namespace);
  c.tableOperations().create(t1,new NewTableConfiguration().withoutDefaultIterators());
  String constraintClassName=NumericValueConstraint.class.getName();
  assertFalse(c.namespaceOperations().listConstraints(namespace).containsKey(constraintClassName));
  assertFalse(c.tableOperations().listConstraints(t1).containsKey(constraintClassName));
  c.namespaceOperations().addConstraint(namespace,constraintClassName);
  boolean passed=false;
  for (int i=0; i < 5; i++) {
    if (!c.namespaceOperations().listConstraints(namespace).containsKey(constraintClassName)) {
      Thread.sleep(500);
      continue;
    }
    if (!c.tableOperations().listConstraints(t1).containsKey(constraintClassName)) {
      Thread.sleep(500);
      continue;
    }
    passed=true;
    break;
  }
  assertTrue("Failed to observe newly-added constraint",passed);
  passed=false;
  Integer namespaceNum=null;
  for (int i=0; i < 5; i++) {
    namespaceNum=c.namespaceOperations().listConstraints(namespace).get(constraintClassName);
    if (null == namespaceNum) {
      Thread.sleep(500);
      continue;
    }
    Integer tableNum=c.tableOperations().listConstraints(t1).get(constraintClassName);
    if (null == tableNum) {
      Thread.sleep(500);
      continue;
    }
    assertEquals(namespaceNum,tableNum);
    passed=true;
  }
  assertTrue("Failed to observe constraint in both table and namespace",passed);
  Mutation m1=new Mutation("r1");
  Mutation m2=new Mutation("r2");
  Mutation m3=new Mutation("r3");
  m1.put("a","b",new Value("abcde".getBytes(UTF_8)));
  m2.put("e","f",new Value("123".getBytes(UTF_8)));
  m3.put("c","d",new Value("zyxwv".getBytes(UTF_8)));
  passed=false;
  for (int i=0; i < 5; i++) {
    BatchWriter bw=c.createBatchWriter(t1,new BatchWriterConfig());
    bw.addMutations(Arrays.asList(m1,m2,m3));
    try {
      bw.close();
      Thread.sleep(500);
    }
 catch (    MutationsRejectedException e) {
      passed=true;
      assertEquals(1,e.getConstraintViolationSummaries().size());
      assertEquals(2,e.getConstraintViolationSummaries().get(0).getNumberOfViolatingMutations());
      break;
    }
  }
  assertTrue("Failed to see mutations rejected after constraint was added",passed);
  assertNotNull("Namespace constraint ID should not be null",namespaceNum);
  c.namespaceOperations().removeConstraint(namespace,namespaceNum);
  passed=false;
  for (int i=0; i < 5; i++) {
    if (c.namespaceOperations().listConstraints(namespace).containsKey(constraintClassName)) {
      Thread.sleep(500);
      continue;
    }
    if (c.tableOperations().listConstraints(t1).containsKey(constraintClassName)) {
      Thread.sleep(500);
      continue;
    }
    passed=true;
  }
  assertTrue("Failed to verify that constraint was removed from namespace and table",passed);
  passed=false;
  for (int i=0; i < 5; i++) {
    BatchWriter bw=c.createBatchWriter(t1,new BatchWriterConfig());
    try {
      bw.addMutations(Arrays.asList(m1,m2,m3));
      bw.close();
    }
 catch (    MutationsRejectedException e) {
      Thread.sleep(500);
      continue;
    }
    passed=true;
  }
  assertTrue("Failed to add mutations that should be allowed",passed);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createAndDeleteNamespace() throws Exception {
  String t1=namespace + ".1";
  String t2=namespace + ".2";
  assertFalse(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  try {
    c.namespaceOperations().delete(namespace);
  }
 catch (  NamespaceNotFoundException e) {
  }
  try {
    c.tableOperations().delete(t1);
  }
 catch (  TableNotFoundException e) {
    assertEquals(NamespaceNotFoundException.class.getName(),e.getCause().getClass().getName());
  }
  c.namespaceOperations().create(namespace);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  c.tableOperations().create(t1);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertTrue(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  c.tableOperations().create(t2);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertTrue(c.tableOperations().exists(t1));
  assertTrue(c.tableOperations().exists(t2));
  c.tableOperations().delete(t1);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertTrue(c.tableOperations().exists(t2));
  c.tableOperations().delete(t2);
  assertTrue(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
  c.namespaceOperations().delete(namespace);
  assertFalse(c.namespaceOperations().exists(namespace));
  assertFalse(c.tableOperations().exists(t1));
  assertFalse(c.tableOperations().exists(t2));
}

</code></pre>

<br>
<pre class="type-5 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=AccumuloException.class) public void createTableInAccumuloNamespace() throws Exception {
  String tableName=Namespaces.ACCUMULO_NAMESPACE + ".1";
  assertFalse(c.tableOperations().exists(tableName));
  c.tableOperations().create(tableName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.RecoveryCompactionsAreFlushesIT </h4><pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void test() throws Exception {
  String tableName=getUniqueNames(1)[0];
  Connector c=getConnector();
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_MAJC_RATIO.getKey(),"100");
  c.tableOperations().setProperty(tableName,Property.TABLE_FILE_MAX.getKey(),"3");
  BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("a");
  m.put("b","c",new Value("v".getBytes()));
  for (int i=0; i < 3; i++) {
    bw.addMutation(m);
    bw.flush();
    c.tableOperations().flush(tableName,null,null,true);
  }
  bw.addMutation(m);
  bw.close();
  ClusterControl control=cluster.getClusterControl();
  control.stopAllServers(ServerType.TABLET_SERVER);
  control.startAllServers(ServerType.TABLET_SERVER);
  Iterators.size(c.createScanner(tableName,Authorizations.EMPTY).iterator());
  Scanner s=c.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  for (  Entry<Key,Value> entry : s) {
    String filename=entry.getKey().getColumnQualifier().toString();
    String parts[]=filename.split("/");
    Assert.assertFalse(parts[parts.length - 1].startsWith("M"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.RewriteTabletDirectoriesIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  c.securityOperations().grantTablePermission(c.whoami(),MetadataTable.NAME,TablePermission.WRITE);
  final String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  BatchWriter bw=c.createBatchWriter(tableName,null);
  final SortedSet<Text> splits=new TreeSet<Text>();
  for (  String split : "a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z".split(",")) {
    splits.add(new Text(split));
    Mutation m=new Mutation(new Text(split));
    m.put(new byte[]{},new byte[]{},new byte[]{});
    bw.addMutation(m);
  }
  bw.close();
  c.tableOperations().addSplits(tableName,splits);
  BatchScanner scanner=c.createBatchScanner(MetadataTable.NAME,Authorizations.EMPTY,1);
  DIRECTORY_COLUMN.fetch(scanner);
  String tableId=c.tableOperations().tableIdMap().get(tableName);
  assertNotNull("TableID for " + tableName + " was null",tableId);
  scanner.setRanges(Collections.singletonList(TabletsSection.getRange(tableId)));
  bw=c.createBatchWriter(MetadataTable.NAME,null);
  int count=0;
  for (  Entry<Key,Value> entry : scanner) {
    assertTrue("Expected " + entry.getValue() + " to contain "+ v1,entry.getValue().toString().contains(v1.toString()));
    count++;
    if (count % 2 == 0) {
      String parts[]=entry.getValue().toString().split("/");
      Key key=entry.getKey();
      Mutation m=new Mutation(key.getRow());
      m.put(key.getColumnFamily(),key.getColumnQualifier(),new Value((Path.SEPARATOR + parts[parts.length - 1]).getBytes()));
      bw.addMutation(m);
    }
  }
  bw.close();
  assertEquals(splits.size() + 1,count);
  assertEquals(1,cluster.exec(RandomizeVolumes.class,"-z",cluster.getZooKeepers(),"-i",c.getInstance().getInstanceName(),"-t",tableName).waitFor());
  cluster.stop();
  Configuration conf=new Configuration(false);
  conf.addResource(new Path(cluster.getConfig().getConfDir().toURI().toString(),"accumulo-site.xml"));
  conf.set(Property.INSTANCE_VOLUMES.getKey(),v1.toString() + "," + v2.toString());
  BufferedOutputStream fos=new BufferedOutputStream(new FileOutputStream(new File(cluster.getConfig().getConfDir(),"accumulo-site.xml")));
  conf.writeXml(fos);
  fos.close();
  assertEquals(0,cluster.exec(Initialize.class,"--add-volumes").waitFor());
  cluster.start();
  c=getConnector();
  assertEquals(0,cluster.exec(Admin.class,"randomizeVolumes","-t",tableName).waitFor());
  int v1Count=0, v2Count=0;
  for (  Entry<Key,Value> entry : scanner) {
    if (entry.getValue().toString().contains(v1.toString())) {
      v1Count++;
    }
    if (entry.getValue().toString().contains(v2.toString())) {
      v2Count++;
    }
  }
  log.info("Count for volume1: " + v1Count);
  log.info("Count for volume2: " + v2Count);
  assertEquals(splits.size() + 1,v1Count + v2Count);
  assertTrue("Expected the number of files to differ between volumes by less than 10. " + v1Count + " "+ v2Count,Math.abs(v1Count - v2Count) < 2);
  count=0;
  for (  Entry<Key,Value> entry : c.createScanner(tableName,Authorizations.EMPTY)) {
    assertTrue("Found unexpected entry in table: " + entry,splits.contains(entry.getKey().getRow()));
    count++;
  }
  assertEquals(splits.size(),count);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ShellConfigIT </h4><pre class="type-11 type-8 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void experimentalPropTest() throws Exception {
  AuthenticationToken token=getAdminToken();
  File clientConfFile=null;
switch (getClusterType()) {
case MINI:
    MiniAccumuloClusterImpl mac=(MiniAccumuloClusterImpl)getCluster();
  clientConfFile=mac.getConfig().getClientConfFile();
break;
case STANDALONE:
StandaloneAccumuloClusterConfiguration standaloneConf=(StandaloneAccumuloClusterConfiguration)getClusterConfiguration();
clientConfFile=standaloneConf.getClientConfFile();
break;
default :
Assert.fail("Unknown cluster type");
}
Assert.assertNotNull(clientConfFile);
TestShell ts=null;
if (token instanceof PasswordToken) {
String passwd=new String(((PasswordToken)token).getPassword(),UTF_8);
ts=new TestShell(getAdminPrincipal(),passwd,getCluster().getInstanceName(),getCluster().getZooKeepers(),clientConfFile);
}
 else if (token instanceof KerberosToken) {
ts=new TestShell(getAdminPrincipal(),null,getCluster().getInstanceName(),getCluster().getZooKeepers(),clientConfFile);
}
 else {
Assert.fail("Unknown token type");
}
assertTrue(Property.TABLE_VOLUME_CHOOSER.isExperimental());
assertTrue(Property.CRYPTO_CIPHER_ALGORITHM_NAME.isExperimental());
String configOutput=ts.exec("config");
assertTrue(configOutput.contains(Property.TABLE_VOLUME_CHOOSER.getKey()));
assertFalse(configOutput.contains(Property.CRYPTO_CIPHER_ALGORITHM_NAME.getKey()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.ShellServerIT </h4><pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void egrep() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  make10();
  String lines=ts.exec("egrep row[123]",true);
  assertTrue(lines.split("\n").length - 1 == 3);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void importDirectory() throws Exception {
  final String table=name.getMethodName();
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  File importDir=new File(rootPath,"import");
  assertTrue(importDir.mkdir());
  String even=new File(importDir,"even.rf").toString();
  String odd=new File(importDir,"odd.rf").toString();
  File errorsDir=new File(rootPath,"errors");
  assertTrue(errorsDir.mkdir());
  fs.mkdirs(new Path(errorsDir.toString()));
  AccumuloConfiguration aconf=AccumuloConfiguration.getDefaultConfiguration();
  FileSKVWriter evenWriter=FileOperations.getInstance().openWriter(even,fs,conf,aconf);
  evenWriter.startDefaultLocalityGroup();
  FileSKVWriter oddWriter=FileOperations.getInstance().openWriter(odd,fs,conf,aconf);
  oddWriter.startDefaultLocalityGroup();
  long timestamp=System.currentTimeMillis();
  Text cf=new Text("cf");
  Text cq=new Text("cq");
  Value value=new Value("value".getBytes());
  for (int i=0; i < 100; i+=2) {
    Key key=new Key(new Text(String.format("%8d",i)),cf,cq,timestamp);
    evenWriter.append(key,value);
    key=new Key(new Text(String.format("%8d",i + 1)),cf,cq,timestamp);
    oddWriter.append(key,value);
  }
  evenWriter.close();
  oddWriter.close();
  assertEquals(0,ts.shell.getExitCode());
  ts.exec("createtable " + table,true);
  ts.exec("importdirectory " + importDir + " "+ errorsDir+ " true",true);
  ts.exec("scan -r 00000000",true,"00000000",true);
  ts.exec("scan -r 00000099",true,"00000099",true);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void tables() throws Exception {
  final String table=name.getMethodName(), table1=table + "_z", table2=table + "_a";
  ts.exec("createtable " + table1);
  ts.exec("createtable " + table2);
  ts.exec("notable");
  String lst=ts.exec("tables -l");
  assertTrue(lst.indexOf(table2) < lst.indexOf(table1));
  lst=ts.exec("tables -l -s");
  assertTrue(lst.indexOf(table1) < lst.indexOf(table2));
}

</code></pre>

<br>
<pre class="type-9 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void whoami() throws Exception {
  AuthenticationToken token=getToken();
  assertTrue(ts.exec("whoami",true).contains(getPrincipal()));
  if (token instanceof PasswordToken) {
    ts.input.set("secret\nsecret\n");
  }
  ts.exec("createuser test_user");
  ts.exec("setauths -u test_user -s 12,3,4");
  String auths=ts.exec("getauths -u test_user");
  assertTrue(auths.contains("3") && auths.contains("12") && auths.contains("4"));
  if (token instanceof PasswordToken) {
    ts.input.set("secret\n");
    ts.exec("user test_user",true);
    assertTrue(ts.exec("whoami",true).contains("test_user"));
    ts.input.set(getRootPassword() + "\n");
    ts.exec("user root",true);
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void trace() throws Exception {
  final String table=name.getMethodName() + "Test";
  ts.exec("trace on",true);
  ts.exec("createtable " + table,true);
  ts.exec("insert a b c value",true);
  ts.exec("scan -np",true,"value",true);
  ts.exec("deletetable -f " + table);
  ts.exec("sleep 1");
  String trace=ts.exec("trace off");
  System.out.println(trace);
  assertTrue(trace.contains("sendMutations"));
  assertTrue(trace.contains("startScan"));
  assertTrue(trace.contains("DeleteTable"));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void sleep() throws Exception {
  long now=System.currentTimeMillis();
  ts.exec("sleep 0.2",true);
  long diff=System.currentTimeMillis() - now;
  assertTrue("Diff was actually " + diff,diff >= 200);
  assertTrue("Diff was actually " + diff,diff < 600);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void notable() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table,true);
  ts.exec("scan",true," " + table + ">",true);
  assertTrue(ts.output.get().contains(" " + table + ">"));
  ts.exec("notable",true);
  ts.exec("scan",false,"Not in a table context.",true);
  assertFalse(ts.output.get().contains(" " + table + ">"));
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void formatter() throws Exception {
  ts.exec("createtable formatter_test",true);
  ts.exec("table formatter_test",true);
  ts.exec("insert row cf cq 1234abcd",true);
  ts.exec("insert row cf1 cq1 9876fedc",true);
  ts.exec("insert row2 cf cq 13579bdf",true);
  ts.exec("insert row2 cf1 cq 2468ace",true);
  ArrayList<String> expectedDefault=new ArrayList<>(4);
  expectedDefault.add("row cf:cq []    1234abcd");
  expectedDefault.add("row cf1:cq1 []    9876fedc");
  expectedDefault.add("row2 cf:cq []    13579bdf");
  expectedDefault.add("row2 cf1:cq []    2468ace");
  ArrayList<String> actualDefault=new ArrayList<>(4);
  boolean isFirst=true;
  for (  String s : ts.exec("scan -np",true).split("[\n\r]+")) {
    if (isFirst) {
      isFirst=false;
    }
 else {
      actualDefault.add(s);
    }
  }
  ArrayList<String> expectedFormatted=new ArrayList<>(4);
  expectedFormatted.add("row cf:cq []    0x31 0x32 0x33 0x34 0x61 0x62 0x63 0x64");
  expectedFormatted.add("row cf1:cq1 []    0x39 0x38 0x37 0x36 0x66 0x65 0x64 0x63");
  expectedFormatted.add("row2 cf:cq []    0x31 0x33 0x35 0x37 0x39 0x62 0x64 0x66");
  expectedFormatted.add("row2 cf1:cq []    0x32 0x34 0x36 0x38 0x61 0x63 0x65");
  ts.exec("formatter -t formatter_test -f " + HexFormatter.class.getName(),true);
  ArrayList<String> actualFormatted=new ArrayList<>(4);
  isFirst=true;
  for (  String s : ts.exec("scan -np",true).split("[\n\r]+")) {
    if (isFirst) {
      isFirst=false;
    }
 else {
      actualFormatted.add(s);
    }
  }
  ts.exec("deletetable -f formatter_test",true);
  assertTrue(Iterables.elementsEqual(expectedDefault,new ArrayList<String>(actualDefault)));
  assertTrue(Iterables.elementsEqual(expectedFormatted,new ArrayList<String>(actualFormatted)));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void listscans() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table,true);
  for (int i=0; i < 6; i++) {
    ts.exec("insert " + i + " cf cq value",true);
  }
  Connector connector=getConnector();
  final Scanner s=connector.createScanner(table,Authorizations.EMPTY);
  IteratorSetting cfg=new IteratorSetting(30,SlowIterator.class);
  SlowIterator.setSleepTime(cfg,500);
  s.addScanIterator(cfg);
  Thread thread=new Thread(){
    @Override public void run(){
      try {
        Iterators.size(s.iterator());
      }
 catch (      Exception ex) {
        throw new RuntimeException(ex);
      }
    }
  }
;
  thread.start();
  List<String> scans=new ArrayList<String>();
  for (int i=0; i < 50 && scans.isEmpty(); i++) {
    String currentScans=ts.exec("listscans",true);
    log.info("Got output from listscans:\n" + currentScans);
    String[] lines=currentScans.split("\n");
    for (int scanOffset=2; scanOffset < lines.length; scanOffset++) {
      String currentScan=lines[scanOffset];
      if (currentScan.contains(table)) {
        log.info("Retaining scan: " + currentScan);
        scans.add(currentScan);
      }
 else {
        log.info("Ignoring scan because of wrong table: " + currentScan);
      }
    }
    sleepUninterruptibly(300,TimeUnit.MILLISECONDS);
  }
  thread.join();
  assertFalse("Could not find any active scans over table " + table,scans.isEmpty());
  for (  String scan : scans) {
    if (!scan.contains("RUNNING")) {
      log.info("Ignoring scan because it doesn't contain 'RUNNING': " + scan);
      continue;
    }
    String parts[]=scan.split("\\|");
    assertEquals("Expected 14 colums, but found " + parts.length + " instead for '"+ Arrays.toString(parts)+ "'",14,parts.length);
    String tserver=parts[0].trim();
    String hostPortPattern=".+:\\d+";
    assertTrue(tserver.matches(hostPortPattern));
    assertTrue(getConnector().instanceOperations().getTabletServers().contains(tserver));
    String client=parts[1].trim();
    assertTrue(client + " does not match " + hostPortPattern,client.matches(hostPortPattern));
    Long.parseLong(parts[11].trim());
  }
  ts.exec("deletetable -f " + table,true);
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void byeQuitExit() throws Exception {
  for (  String cmd : "bye quit exit".split(" ")) {
    assertFalse(ts.shell.getExit());
    ts.exec(cmd);
    assertTrue(ts.shell.getExit());
    ts.shell.setExit(false);
  }
}

</code></pre>

<br>
<pre class="type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void createTableWithProperties() throws Exception {
  final String table=name.getMethodName();
  String testProp="table.custom.description=description,table.custom.testProp=testProp," + Property.TABLE_SPLIT_THRESHOLD.getKey() + "=10K";
  ts.exec("createtable " + table + " -prop "+ testProp,true);
  ts.exec("insert a b c value",true);
  ts.exec("scan",true,"value",true);
  Connector connector=getConnector();
  for (  Entry<String,String> entry : connector.tableOperations().getProperties(table)) {
    if (entry.getKey().equals("table.custom.description"))     Assert.assertTrue("Initial property was not set correctly",entry.getValue().equals("description"));
    if (entry.getKey().equals("table.custom.testProp"))     Assert.assertTrue("Initial property was not set correctly",entry.getValue().equals("testProp"));
    if (entry.getKey().equals(Property.TABLE_SPLIT_THRESHOLD.getKey()))     Assert.assertTrue("Initial property was not set correctly",entry.getValue().equals("10K"));
  }
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addauths() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table + " -evc");
  boolean success=false;
  for (int i=0; i < 9 && !success; i++) {
    try {
      ts.exec("insert a b c d -l foo",false,"does not have authorization",true,new ErrorMessageCallback(){
        @Override public String getErrorMessage(){
          try {
            Connector c=getConnector();
            return "Current auths for root are: " + c.securityOperations().getUserAuthorizations("root").toString();
          }
 catch (          Exception e) {
            return "Could not check authorizations";
          }
        }
      }
);
    }
 catch (    AssertionError e) {
      Thread.sleep(200);
    }
  }
  if (!success) {
    ts.exec("insert a b c d -l foo",false,"does not have authorization",true,new ErrorMessageCallback(){
      @Override public String getErrorMessage(){
        try {
          Connector c=getConnector();
          return "Current auths for root are: " + c.securityOperations().getUserAuthorizations("root").toString();
        }
 catch (        Exception e) {
          return "Could not check authorizations";
        }
      }
    }
);
  }
  ts.exec("addauths -s foo,bar",true);
  boolean passed=false;
  for (int i=0; i < 50 && !passed; i++) {
    try {
      ts.exec("getauths",true,"foo",true);
      ts.exec("getauths",true,"bar",true);
      passed=true;
    }
 catch (    AssertionError|Exception e) {
      sleepUninterruptibly(300,TimeUnit.MILLISECONDS);
    }
  }
  assertTrue("Could not successfully see updated authoriations",passed);
  ts.exec("insert a b c d -l foo");
  ts.exec("scan",true,"[foo]");
  ts.exec("scan -s bar",true,"[foo]",false);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-21 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void badLogin() throws Exception {
  Assume.assumeTrue(getToken() instanceof PasswordToken);
  ts.input.set(getRootPassword() + "\n");
  String err=ts.exec("user NoSuchUser",false);
  assertTrue(err.contains("BAD_CREDENTIALS for user NoSuchUser"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompactions() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  String tableId=getTableId(table);
  ts.exec("insert a b c d");
  ts.exec("flush -w");
  ts.exec("insert x y z v");
  ts.exec("flush -w");
  int oldCount=countFiles(tableId);
  ts.exec("compact -t " + table + " -w");
  assertTrue(countFiles(tableId) < oldCount);
  ts.exec("addsplits -t " + table + " f");
  ts.exec("insert m 1 2 3");
  ts.exec("flush -w");
  ts.exec("insert n 1 2 v901");
  ts.exec("flush -w");
  List<String> oldFiles=getFiles(tableId);
  assertEquals("Files that were found: " + oldFiles,4,oldFiles.size());
  ts.exec("compact -b g -e z -w");
  assertEquals(2,countFiles(tableId));
  ts.exec("compact -w");
  assertEquals(2,countFiles(tableId));
  ts.exec("merge --all -t " + table);
  ts.exec("compact -w");
  assertEquals(1,countFiles(tableId));
  ts.exec("insert z 1 2 v900");
  ts.exec("compact -w -s " + TestCompactionStrategy.class.getName() + " -sc inputPrefix=F,dropPrefix=A");
  assertEquals(1,countFiles(tableId));
  ts.exec("scan",true,"v900",true);
  ts.exec("scan",true,"v901",false);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void namespaces() throws Exception {
  ts.exec("namespaces",true,"\"\"",true);
  ts.exec("namespaces",true,Namespaces.ACCUMULO_NAMESPACE,true);
  ts.exec("createnamespace thing1",true);
  String namespaces=ts.exec("namespaces");
  assertTrue(namespaces.contains("thing1"));
  ts.exec("renamenamespace thing1 thing2");
  namespaces=ts.exec("namespaces");
  assertTrue(namespaces.contains("thing2"));
  assertTrue(!namespaces.contains("thing1"));
  ts.exec("createtable thing2.thingy",true);
  ts.exec("deletenamespace thing2");
  ts.exec("y");
  ts.exec("namespaces",true,"thing2",true);
  ts.exec("du -ns thing2",true,"thing2.thingy",true);
  ts.exec("offline -ns thing2",true);
  ts.exec("online -ns thing2",true);
  ts.exec("flush -ns thing2",true);
  ts.exec("compact -ns thing2",true);
  ts.exec("createnamespace testers3",true);
  ts.exec("createtable testers3.1",true);
  ts.exec("createtable testers3.2",true);
  ts.exec("deletetable -ns testers3 -f",true);
  ts.exec("tables",true,"testers3.1",false);
  ts.exec("namespaces",true,"testers3",true);
  ts.exec("deletenamespace testers3 -f",true);
  ts.input.set("true\n\n\n\nSTRING\n");
  ts.exec("setiter -ns thing2 -scan -class org.apache.accumulo.core.iterators.user.SummingCombiner -p 10 -n name",true);
  ts.exec("listiter -ns thing2 -scan",true,"Summing",true);
  ts.exec("deleteiter -ns thing2 -n name -scan",true);
  ts.exec("createuser dude");
  ts.exec("pass");
  ts.exec("pass");
  ts.exec("grant Namespace.CREATE_TABLE -ns thing2 -u dude",true);
  ts.exec("revoke Namespace.CREATE_TABLE -ns thing2 -u dude",true);
  ts.exec("config -ns thing2 -s table.file.max=44444",true);
  ts.exec("config -ns thing2",true,"44444",true);
  ts.exec("config -t thing2.thingy",true,"44444",true);
  ts.exec("config -t thing2.thingy -s table.file.max=55555",true);
  ts.exec("config -t thing2.thingy",true,"55555",true);
  ts.exec("createnamespace thing3 -cc thing2",true);
  ts.exec("config -ns thing3",true,"44444",true);
  ts.exec("deletenamespace -f thing2",true);
  ts.exec("namespaces",true,"thing2",false);
  ts.exec("tables",true,"thing2.thingy",false);
  ts.exec("constraint -ns thing3 -a org.apache.accumulo.examples.simple.constraints.NumericValueConstraint",true);
  ts.exec("createtable thing3.constrained",true);
  ts.exec("table thing3.constrained",true);
  ts.exec("constraint -d 1");
  ts.exec("constraint -l",true,"NumericValueConstraint",true);
  ts.exec("insert r cf cq abc",false);
  ts.exec("constraint -ns thing3 -d 1");
  ts.exec("sleep 1");
  ts.exec("insert r cf cq abc",true);
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void user() throws Exception {
  final String table=name.getMethodName();
  final boolean kerberosEnabled=getToken() instanceof KerberosToken;
  if (!kerberosEnabled) {
    ts.input.set("secret\nsecret\n");
  }
  ts.exec("createuser xyzzy",true);
  ts.exec("users",true,"xyzzy",true);
  String perms=ts.exec("userpermissions -u xyzzy",true);
  assertTrue(perms.contains("Table permissions (" + MetadataTable.NAME + "): Table.READ"));
  ts.exec("grant -u xyzzy -s System.CREATE_TABLE",true);
  perms=ts.exec("userpermissions -u xyzzy",true);
  assertTrue(perms.contains(""));
  ts.exec("grant -u " + getPrincipal() + " -t "+ MetadataTable.NAME+ " Table.WRITE",true);
  ts.exec("grant -u " + getPrincipal() + " -t "+ MetadataTable.NAME+ " Table.GOOFY",false);
  ts.exec("grant -u " + getPrincipal() + " -s foo",false);
  ts.exec("grant -u xyzzy -t " + MetadataTable.NAME + " foo",false);
  if (!kerberosEnabled) {
    ts.input.set("secret\nsecret\n");
    ts.exec("user xyzzy",true);
    ts.exec("createtable " + table,true,"xyzzy@",true);
    ts.exec("insert row1 cf cq 1",true);
    ts.exec("scan",true,"row1",true);
    ts.exec("droptable -f " + table,true);
    ts.input.set(getRootPassword() + "\n" + getRootPassword()+ "\n");
    ts.exec("user root",true);
  }
  ts.exec("deleteuser " + getPrincipal(),false,"delete yourself",true);
  ts.exec("revoke -u xyzzy -s System.CREATE_TABLE",true);
  ts.exec("revoke -u xyzzy -s System.GOOFY",false);
  ts.exec("revoke -u xyzzy -s foo",false);
  ts.exec("revoke -u xyzzy -t " + MetadataTable.NAME + " Table.WRITE",true);
  ts.exec("revoke -u xyzzy -t " + MetadataTable.NAME + " Table.GOOFY",false);
  ts.exec("revoke -u xyzzy -t " + MetadataTable.NAME + " foo",false);
  ts.exec("deleteuser xyzzy",true,"deleteuser { xyzzy } (yes|no)?",true);
  ts.exec("deleteuser -f xyzzy",true);
  ts.exec("users",true,"xyzzy",false);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies values related to public fields.
"></span><br>
@Test public void du() throws Exception {
  final String table=name.getMethodName();
  ts.exec("notable",true);
  ts.output.clear();
  ts.exec("du",true,"",true);
  ts.output.clear();
  ts.exec("createtable " + table);
  make10();
  ts.exec("flush -t " + table + " -w");
  ts.exec("du " + table,true," [" + table + "]",true);
  ts.output.clear();
  ts.shell.execCommand("du -h",false,false);
  String o=ts.output.get();
  assertTrue("Output did not match regex: '" + o + "'",o.matches(".*[1-9][0-9][0-9]\\s\\[" + table + "\\]\\n"));
  ts.exec("deletetable -f " + table);
}

</code></pre>

<br>
<pre class="type-9 type-8 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void scansWithClassLoaderContext() throws Exception {
  try {
    Class.forName("org.apache.accumulo.test.functional.ValueReversingIterator");
    fail("ValueReversingIterator already on the classpath");
  }
 catch (  Exception e) {
    assertTrue(true);
  }
  ts.exec("createtable t");
  make10();
  setupFakeContextPath();
  ts.exec("config -s " + Property.VFS_CONTEXT_CLASSPATH_PROPERTY + FAKE_CONTEXT+ "="+ FAKE_CONTEXT_CLASSPATH);
  ts.exec("config -t t -s table.classpath.context=" + FAKE_CONTEXT);
  ts.exec("setscaniter -n reverse -t t -p 21 -class org.apache.accumulo.test.functional.ValueReversingIterator");
  String result=ts.exec("scan -np -b row1 -e row1");
  assertEquals(2,result.split("\n").length);
  log.error(result);
  assertTrue(result.contains("value"));
  result=ts.exec("scan -np -b row3 -e row5");
  assertEquals(4,result.split("\n").length);
  assertTrue(result.contains("value"));
  result=ts.exec("scan -np -r row3");
  assertEquals(2,result.split("\n").length);
  assertTrue(result.contains("value"));
  result=ts.exec("scan -np -b row:");
  assertEquals(1,result.split("\n").length);
  result=ts.exec("scan -np -b row");
  assertEquals(11,result.split("\n").length);
  assertTrue(result.contains("value"));
  result=ts.exec("scan -np -e row:");
  assertEquals(11,result.split("\n").length);
  assertTrue(result.contains("value"));
  setupRealContextPath();
  ts.exec("config -s " + Property.VFS_CONTEXT_CLASSPATH_PROPERTY + REAL_CONTEXT+ "="+ REAL_CONTEXT_CLASSPATH);
  result=ts.exec("scan -np -b row1 -e row1 -cc " + REAL_CONTEXT);
  log.error(result);
  assertEquals(2,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  result=ts.exec("scan -np -b row3 -e row5 -cc " + REAL_CONTEXT);
  assertEquals(4,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  result=ts.exec("scan -np -r row3 -cc " + REAL_CONTEXT);
  assertEquals(2,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  result=ts.exec("scan -np -b row: -cc " + REAL_CONTEXT);
  assertEquals(1,result.split("\n").length);
  result=ts.exec("scan -np -b row -cc " + REAL_CONTEXT);
  assertEquals(11,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  result=ts.exec("scan -np -e row: -cc " + REAL_CONTEXT);
  assertEquals(11,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  ts.exec("deletetable -f t");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.SplitCancelsMajCIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void test() throws Exception {
  final String tableName=getUniqueNames(1)[0];
  final Connector c=getConnector();
  c.tableOperations().create(tableName);
  IteratorSetting it=new IteratorSetting(100,SlowIterator.class);
  SlowIterator.setSleepTime(it,500);
  c.tableOperations().attachIterator(tableName,it,EnumSet.of(IteratorScope.majc));
  BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation("" + i);
    m.put("","",new Value());
    bw.addMutation(m);
  }
  bw.flush();
  final AtomicReference<Exception> ex=new AtomicReference<Exception>();
  Thread thread=new Thread(){
    @Override public void run(){
      try {
        c.tableOperations().compact(tableName,null,null,true,true);
      }
 catch (      Exception e) {
        ex.set(e);
      }
    }
  }
;
  thread.start();
  long now=System.currentTimeMillis();
  sleepUninterruptibly(10,TimeUnit.SECONDS);
  SortedSet<Text> partitionKeys=new TreeSet<Text>();
  partitionKeys.add(new Text("10"));
  c.tableOperations().addSplits(tableName,partitionKeys);
  thread.join();
  assertTrue(System.currentTimeMillis() - now > 59 * 1000);
  if (ex.get() != null)   throw ex.get();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.TableConfigurationUpdateIT </h4><pre class="type-9 type-11 type-8 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector conn=getConnector();
  Instance inst=conn.getInstance();
  String table=getUniqueNames(1)[0];
  conn.tableOperations().create(table);
  final NamespaceConfiguration defaultConf=new NamespaceConfiguration(Namespaces.DEFAULT_NAMESPACE_ID,inst,AccumuloConfiguration.getDefaultConfiguration());
  int randomMax=4;
  int numThreads=2;
  int iterations=100000;
  AccumuloConfiguration tableConf=new TableConfiguration(inst,table,defaultConf);
  long start=System.currentTimeMillis();
  ExecutorService svc=Executors.newFixedThreadPool(numThreads);
  CountDownLatch countDown=new CountDownLatch(numThreads);
  ArrayList<Future<Exception>> futures=new ArrayList<Future<Exception>>(numThreads);
  for (int i=0; i < numThreads; i++) {
    futures.add(svc.submit(new TableConfRunner(randomMax,iterations,tableConf,countDown)));
  }
  svc.shutdown();
  Assert.assertTrue(svc.awaitTermination(60,TimeUnit.MINUTES));
  for (  Future<Exception> fut : futures) {
    Exception e=fut.get();
    if (null != e) {
      Assert.fail("Thread failed with exception " + e);
    }
  }
  long end=System.currentTimeMillis();
  log.debug(tableConf + " with " + iterations+ " iterations and "+ numThreads+ " threads and cache invalidates "+ ((1. / randomMax) * 100.)+ "% took "+ (end - start) / 1000 + " second(s)");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.TableOperationsIT </h4><pre class="type-11 type-8 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompactEmptyTableWithGeneratorIterator_Splits_Cancel() throws TableExistsException, AccumuloException, AccumuloSecurityException, TableNotFoundException {
  String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName);
  SortedSet<Text> splitset=new TreeSet<>();
  splitset.add(new Text("f"));
  connector.tableOperations().addSplits(tableName,splitset);
  List<IteratorSetting> list=new ArrayList<>();
  list.add(new IteratorSetting(15,HardListIterator.class));
  connector.tableOperations().compact(tableName,null,null,list,true,false);
  connector.tableOperations().cancelCompaction(tableName);
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  Map<Key,Value> actual=new TreeMap<>(COMPARE_KEY_TO_COLQ);
  for (  Map.Entry<Key,Value> entry : scanner)   actual.put(entry.getKey(),entry.getValue());
switch (actual.size()) {
case 3:
    assertTrue(HardListIterator.allEntriesToInject.equals(actual));
  break;
case 2:
assertEquals(HardListIterator.allEntriesToInject.headMap(new Key("f")),actual);
break;
case 1:
assertEquals(HardListIterator.allEntriesToInject.tailMap(new Key("f")),actual);
break;
case 0:
break;
default :
Assert.fail("Unexpected number of entries");
break;
}
connector.tableOperations().delete(tableName);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * Test recovery from bad majc iterator via compaction cancel. 
 */
@Test public void testCompactEmptyTablesWithBadIterator_FailsAndCancel() throws TableExistsException, AccumuloException, AccumuloSecurityException, TableNotFoundException {
  String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName);
  List<IteratorSetting> list=new ArrayList<>();
  list.add(new IteratorSetting(15,BadIterator.class));
  connector.tableOperations().compact(tableName,null,null,list,true,false);
  sleepUninterruptibly(2,TimeUnit.SECONDS);
  connector.tableOperations().cancelCompaction(tableName);
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  Map<Key,Value> actual=new TreeMap<>();
  for (  Map.Entry<Key,Value> entry : scanner)   actual.put(entry.getKey(),entry.getValue());
  assertTrue("Should be empty. Actual is " + actual,actual.isEmpty());
  connector.tableOperations().delete(tableName);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createMergeClonedTable() throws Exception {
  String[] names=getUniqueNames(2);
  String originalTable=names[0];
  TableOperations tops=connector.tableOperations();
  TreeSet<Text> splits=Sets.newTreeSet(Arrays.asList(new Text("a"),new Text("b"),new Text("c"),new Text("d")));
  tops.create(originalTable);
  tops.addSplits(originalTable,splits);
  BatchWriter bw=connector.createBatchWriter(originalTable,new BatchWriterConfig());
  for (  Text row : splits) {
    Mutation m=new Mutation(row);
    for (int i=0; i < 10; i++) {
      for (int j=0; j < 10; j++) {
        m.put(Integer.toString(i),Integer.toString(j),Integer.toString(i + j));
      }
    }
    bw.addMutation(m);
  }
  bw.close();
  String clonedTable=names[1];
  tops.clone(originalTable,clonedTable,true,null,null);
  tops.merge(clonedTable,null,new Text("b"));
  Map<String,Integer> rowCounts=new HashMap<>();
  Scanner s=connector.createScanner(clonedTable,new Authorizations());
  for (  Entry<Key,Value> entry : s) {
    final Key key=entry.getKey();
    String row=key.getRow().toString();
    String cf=key.getColumnFamily().toString(), cq=key.getColumnQualifier().toString();
    String value=entry.getValue().toString();
    if (rowCounts.containsKey(row)) {
      rowCounts.put(row,rowCounts.get(row) + 1);
    }
 else {
      rowCounts.put(row,1);
    }
    Assert.assertEquals(Integer.parseInt(cf) + Integer.parseInt(cq),Integer.parseInt(value));
  }
  Collection<Text> clonedSplits=tops.listSplits(clonedTable);
  Set<Text> expectedSplits=Sets.newHashSet(new Text("b"),new Text("c"),new Text("d"));
  for (  Text clonedSplit : clonedSplits) {
    Assert.assertTrue("Encountered unexpected split on the cloned table: " + clonedSplit,expectedSplits.remove(clonedSplit));
  }
  Assert.assertTrue("Did not find all expected splits on the cloned table: " + expectedSplits,expectedSplits.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getDiskUsage() throws TableExistsException, AccumuloException, AccumuloSecurityException, TableNotFoundException, TException {
  final String[] names=getUniqueNames(2);
  String tableName=names[0];
  connector.tableOperations().create(tableName);
  List<DiskUsage> diskUsages=connector.tableOperations().getDiskUsage(Collections.singleton(tableName));
  assertEquals(1,diskUsages.size());
  assertEquals(1,diskUsages.get(0).getTables().size());
  assertEquals(Long.valueOf(0),diskUsages.get(0).getUsage());
  assertEquals(tableName,diskUsages.get(0).getTables().first());
  BatchWriter bw=connector.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("a");
  m.put("b","c",new Value("abcde".getBytes()));
  bw.addMutation(m);
  bw.flush();
  bw.close();
  connector.tableOperations().compact(tableName,new Text("A"),new Text("z"),true,true);
  diskUsages=connector.tableOperations().getDiskUsage(Collections.singleton(tableName));
  assertEquals(1,diskUsages.size());
  assertEquals(1,diskUsages.get(0).getTables().size());
  assertTrue(diskUsages.get(0).getUsage() > 0);
  assertEquals(tableName,diskUsages.get(0).getTables().first());
  String newTable=names[1];
  connector.tableOperations().clone(tableName,newTable,false,null,null);
  Set<String> tables=new HashSet<String>();
  tables.add(tableName);
  tables.add(newTable);
  diskUsages=connector.tableOperations().getDiskUsage(tables);
  assertEquals(1,diskUsages.size());
  assertEquals(2,diskUsages.get(0).getTables().size());
  assertTrue(diskUsages.get(0).getUsage() > 0);
  connector.tableOperations().compact(tableName,new Text("A"),new Text("z"),true,true);
  connector.tableOperations().compact(newTable,new Text("A"),new Text("z"),true,true);
  diskUsages=connector.tableOperations().getDiskUsage(tables);
  assertEquals(2,diskUsages.size());
  assertEquals(1,diskUsages.get(0).getTables().size());
  assertEquals(1,diskUsages.get(1).getTables().size());
  assertTrue(diskUsages.get(0).getUsage() > 0);
  assertTrue(diskUsages.get(1).getUsage() > 0);
  connector.tableOperations().delete(tableName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.TotalQueuedIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test(timeout=4 * 60 * 1000) public void test() throws Exception {
  Random random=new Random();
  Connector c=getConnector();
  c.instanceOperations().setProperty(Property.TSERV_TOTAL_MUTATION_QUEUE_MAX.getKey(),"" + SMALL_QUEUE_SIZE);
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_MAJC_RATIO.getKey(),"9999");
  c.tableOperations().setProperty(tableName,Property.TABLE_FILE_MAX.getKey(),"999");
  sleepUninterruptibly(1,TimeUnit.SECONDS);
  byte row[]=new byte[250];
  BatchWriterConfig cfg=new BatchWriterConfig();
  cfg.setMaxWriteThreads(10);
  cfg.setMaxLatency(1,TimeUnit.SECONDS);
  cfg.setMaxMemory(1024 * 1024);
  long realSyncs=getSyncs();
  BatchWriter bw=c.createBatchWriter(tableName,cfg);
  long now=System.currentTimeMillis();
  long bytesSent=0;
  for (int i=0; i < N; i++) {
    random.nextBytes(row);
    Mutation m=new Mutation(row);
    m.put("","","");
    bw.addMutation(m);
    bytesSent+=m.estimatedMemoryUsed();
  }
  bw.close();
  long diff=System.currentTimeMillis() - now;
  double secs=diff / 1000.;
  double syncs=bytesSent / SMALL_QUEUE_SIZE;
  double syncsPerSec=syncs / secs;
  System.out.println(String.format("Sent %d bytes in %f secs approximately %d syncs (%f syncs per sec)",bytesSent,secs,((long)syncs),syncsPerSec));
  long update=getSyncs();
  System.out.println("Syncs " + (update - realSyncs));
  realSyncs=update;
  c.instanceOperations().setProperty(Property.TSERV_TOTAL_MUTATION_QUEUE_MAX.getKey(),"" + LARGE_QUEUE_SIZE);
  c.tableOperations().flush(tableName,null,null,true);
  sleepUninterruptibly(1,TimeUnit.SECONDS);
  bw=c.createBatchWriter(tableName,cfg);
  now=System.currentTimeMillis();
  bytesSent=0;
  for (int i=0; i < N; i++) {
    random.nextBytes(row);
    Mutation m=new Mutation(row);
    m.put("","","");
    bw.addMutation(m);
    bytesSent+=m.estimatedMemoryUsed();
  }
  bw.close();
  diff=System.currentTimeMillis() - now;
  secs=diff / 1000.;
  syncs=bytesSent / LARGE_QUEUE_SIZE;
  syncsPerSec=syncs / secs;
  System.out.println(String.format("Sent %d bytes in %f secs approximately %d syncs (%f syncs per sec)",bytesSent,secs,((long)syncs),syncsPerSec));
  update=getSyncs();
  System.out.println("Syncs " + (update - realSyncs));
  assertTrue(update - realSyncs < realSyncs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.TracerRecoversAfterOfflineTableIT </h4><pre class="type-9 type-13 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void test() throws Exception {
  Process tracer=null;
  Connector conn=getConnector();
  if (!conn.tableOperations().exists("trace")) {
    MiniAccumuloClusterImpl mac=cluster;
    tracer=mac.exec(TraceServer.class);
    while (!conn.tableOperations().exists("trace")) {
      sleepUninterruptibly(1,TimeUnit.SECONDS);
    }
    sleepUninterruptibly(5,TimeUnit.SECONDS);
  }
  log.info("Taking table offline");
  conn.tableOperations().offline("trace",true);
  String tableName=getUniqueNames(1)[0];
  conn.tableOperations().create(tableName);
  log.info("Start a distributed trace span");
  DistributedTrace.enable("localhost","testTrace",getClientConfig());
  Span root=Trace.on("traceTest");
  BatchWriter bw=conn.createBatchWriter(tableName,null);
  Mutation m=new Mutation("m");
  m.put("a","b","c");
  bw.addMutation(m);
  bw.close();
  root.stop();
  log.info("Bringing trace table back online");
  conn.tableOperations().online("trace",true);
  log.info("Trace table is online, should be able to find trace");
  final Scanner scanner=conn.createScanner("trace",Authorizations.EMPTY);
  scanner.setRange(new Range(new Text(Long.toHexString(root.traceId()))));
  while (true) {
    final StringBuilder finalBuffer=new StringBuilder();
    int traceCount=TraceDump.printTrace(scanner,new Printer(){
      @Override public void print(      final String line){
        try {
          finalBuffer.append(line).append("\n");
        }
 catch (        Exception ex) {
          throw new RuntimeException(ex);
        }
      }
    }
);
    String traceOutput=finalBuffer.toString();
    log.info("Trace output:" + traceOutput);
    if (traceCount > 0) {
      int lastPos=0;
      for (      String part : "traceTest,close,binMutations".split(",")) {
        log.info("Looking in trace output for '" + part + "'");
        int pos=traceOutput.indexOf(part);
        assertTrue("Did not find '" + part + "' in output",pos > 0);
        assertTrue("'" + part + "' occurred earlier than the previous element unexpectedly",pos > lastPos);
        lastPos=pos;
      }
      break;
    }
 else {
      log.info("Ignoring trace output as traceCount not greater than zero: " + traceCount);
      Thread.sleep(1000);
    }
  }
  if (tracer != null) {
    tracer.destroy();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.TransportCachingIT </h4><pre class="type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCachedTransport(){
  Connector conn=getConnector();
  Instance instance=conn.getInstance();
  ClientConfiguration clientConf=cluster.getClientConfig();
  ClientContext context=new ClientContext(instance,new Credentials(getAdminPrincipal(),getAdminToken()),clientConf);
  long rpcTimeout=DefaultConfiguration.getTimeInMillis(Property.GENERAL_RPC_TIMEOUT.getDefaultValue());
  ArrayList<ThriftTransportKey> servers=new ArrayList<ThriftTransportKey>();
  ZooCache zc=new ZooCacheFactory().getZooCache(instance.getZooKeepers(),instance.getZooKeepersSessionTimeOut());
  for (  String tserver : zc.getChildren(ZooUtil.getRoot(instance) + Constants.ZTSERVERS)) {
    String path=ZooUtil.getRoot(instance) + Constants.ZTSERVERS + "/"+ tserver;
    byte[] data=ZooUtil.getLockData(zc,path);
    if (data != null) {
      String strData=new String(data,UTF_8);
      if (!strData.equals("master"))       servers.add(new ThriftTransportKey(new ServerServices(strData).getAddress(Service.TSERV_CLIENT),rpcTimeout,context));
    }
  }
  ThriftTransportPool pool=ThriftTransportPool.getInstance();
  TTransport first=null;
  while (null == first) {
    try {
      first=pool.getAnyTransport(servers,true).getSecond();
    }
 catch (    TTransportException e) {
      log.warn("Failed to obtain transport to " + servers);
    }
  }
  assertNotNull(first);
  pool.returnTransport(first);
  TTransport second=null;
  while (null == second) {
    try {
      second=pool.getAnyTransport(servers,true).getSecond();
    }
 catch (    TTransportException e) {
      log.warn("Failed obtain 2nd transport to " + servers);
    }
  }
  assertTrue("Expected the first and second to be the same instance",first == second);
  pool.returnTransport(second);
  TTransport third=null;
  while (null == third) {
    try {
      third=pool.getAnyTransport(servers,false).getSecond();
    }
 catch (    TTransportException e) {
      log.warn("Failed obtain 2nd transport to " + servers);
    }
  }
  assertFalse("Expected second and third transport to be different instances",second == third);
  pool.returnTransport(third);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.UserCompactionStrategyIT </h4><pre class="type-5 type-3 type-21 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPerTableClasspath() throws Exception {
  Assume.assumeTrue(ClusterType.MINI == getClusterType());
  final Connector c=getConnector();
  final String tableName=getUniqueNames(1)[0];
  File target=new File(System.getProperty("user.dir"),"target");
  Assert.assertTrue(target.mkdirs() || target.isDirectory());
  File destFile=installJar(target,"/TestCompactionStrat.jar");
  c.tableOperations().create(tableName);
  c.instanceOperations().setProperty(Property.VFS_CONTEXT_CLASSPATH_PROPERTY.getKey() + "context1",destFile.toString());
  c.tableOperations().setProperty(tableName,Property.TABLE_CLASSPATH.getKey(),"context1");
  c.tableOperations().addSplits(tableName,new TreeSet<Text>(Arrays.asList(new Text("efg"))));
  writeFlush(c,tableName,"a");
  writeFlush(c,tableName,"b");
  writeFlush(c,tableName,"h");
  writeFlush(c,tableName,"i");
  Assert.assertEquals(4,FunctionalTestUtils.countRFiles(c,tableName));
  CompactionStrategyConfig csConfig=new CompactionStrategyConfig("org.apache.accumulo.test.EfgCompactionStrat");
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true).setCompactionStrategy(csConfig));
  Assert.assertEquals(3,FunctionalTestUtils.countRFiles(c,tableName));
  c.tableOperations().compact(tableName,new CompactionConfig().setWait(true));
  Assert.assertEquals(2,FunctionalTestUtils.countRFiles(c,tableName));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.UsersIT </h4><pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateExistingUser() throws Exception {
  ClusterUser user0=getUser(0);
  Connector conn=getConnector();
  Set<String> currentUsers=conn.securityOperations().listLocalUsers();
  if (!currentUsers.contains(user0.getPrincipal())) {
    PasswordToken token=null;
    if (!getCluster().getClientConfig().getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
      token=new PasswordToken(user0.getPassword());
    }
    conn.securityOperations().createLocalUser(user0.getPrincipal(),token);
  }
  try {
    conn.securityOperations().createLocalUser(user0.getPrincipal(),new PasswordToken("better_fail"));
    fail("Creating a user that already exists should throw an exception");
  }
 catch (  AccumuloSecurityException e) {
    assertTrue("Expected USER_EXISTS error",SecurityErrorCode.USER_EXISTS == e.getSecurityErrorCode());
    String msg=e.getMessage();
    assertTrue("Error message didn't contain principal: '" + msg + "'",msg.contains(user0.getPrincipal()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.VerifySerialRecoveryIT </h4><pre class="type-11 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=4 * 60 * 1000) public void testSerializedRecovery() throws Exception {
  String tableName=getUniqueNames(1)[0];
  Connector c=getConnector();
  c.tableOperations().create(tableName);
  SortedSet<Text> splits=new TreeSet<Text>();
  for (int i=0; i < 200; i++) {
    splits.add(new Text(AssignmentThreadsIT.randomHex(8)));
  }
  c.tableOperations().addSplits(tableName,splits);
  BatchWriter bw=c.createBatchWriter(tableName,null);
  for (int i=0; i < 50000; i++) {
    Mutation m=new Mutation(AssignmentThreadsIT.randomHex(8));
    m.put("","","");
    bw.addMutation(m);
  }
  bw.close();
  for (  ProcessReference ref : getCluster().getProcesses().get(ServerType.TABLET_SERVER))   getCluster().killProcess(ServerType.TABLET_SERVER,ref);
  final Process ts=cluster.exec(TabletServer.class);
  Iterators.size(c.createScanner(tableName,Authorizations.EMPTY).iterator());
  assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  ts.waitFor();
  String result=FunctionalTestUtils.readAll(cluster,TabletServer.class,ts);
  for (  String line : result.split("\n")) {
    System.out.println(line);
  }
  boolean started=false;
  int recoveries=0;
  for (  String line : result.split("\n")) {
    if (line.contains("!0") || line.contains("+r"))     continue;
    if (line.contains("Starting Write-Ahead Log")) {
      assertFalse(started);
      started=true;
      recoveries++;
    }
    if (line.contains("Write-Ahead Log recovery complete")) {
      assertTrue(started);
      started=false;
    }
  }
  assertFalse(started);
  assertTrue(recoveries > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.VolumeIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonConfiguredVolumes() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String uuid=new ZooKeeperInstance(cluster.getClientConfig()).getInstanceID();
  verifyVolumesUsed(tableNames[0],false,v1,v2);
  Assert.assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  cluster.stop();
  Configuration conf=new Configuration(false);
  conf.addResource(new Path(cluster.getConfig().getConfDir().toURI().toString(),"accumulo-site.xml"));
  File v3f=new File(volDirBase,"v3");
  assertTrue(v3f.mkdir() || v3f.isDirectory());
  Path v3=new Path("file://" + v3f.getAbsolutePath());
  conf.set(Property.INSTANCE_VOLUMES.getKey(),v2.toString() + "," + v3.toString());
  BufferedOutputStream fos=new BufferedOutputStream(new FileOutputStream(new File(cluster.getConfig().getConfDir(),"accumulo-site.xml")));
  conf.writeXml(fos);
  fos.close();
  Assert.assertEquals(0,cluster.exec(Initialize.class,"--add-volumes").waitFor());
  for (  Path volumePath : Arrays.asList(v1,v2,v3)) {
    FileSystem fs=volumePath.getFileSystem(CachedConfiguration.getInstance());
    Path vp=new Path(volumePath,ServerConstants.INSTANCE_ID_DIR);
    FileStatus[] iids=fs.listStatus(vp);
    Assert.assertEquals(1,iids.length);
    Assert.assertEquals(uuid,iids[0].getPath().getName());
  }
  cluster.start();
  List<String> expected=new ArrayList<String>();
  for (int i=0; i < 100; i++) {
    String row=String.format("%06d",i * 100 + 3);
    expected.add(row + ":cf1:cq1:1");
  }
  verifyData(expected,getConnector().createScanner(tableNames[0],Authorizations.EMPTY));
  verifyVolumesUsed(tableNames[1],false,v2,v3);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector connector=getConnector();
  String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName);
  SortedSet<Text> partitions=new TreeSet<Text>();
  for (  String s : "d,m,t".split(","))   partitions.add(new Text(s));
  connector.tableOperations().addSplits(tableName,partitions);
  BatchWriter bw=connector.createBatchWriter(tableName,new BatchWriterConfig());
  String[] rows="a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z".split(",");
  for (  String s : rows) {
    Mutation m=new Mutation(new Text(s));
    m.put(EMPTY,EMPTY,EMPTY_VALUE);
    bw.addMutation(m);
  }
  bw.close();
  connector.tableOperations().flush(tableName,null,null,true);
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  int i=0;
  for (  Entry<Key,Value> entry : scanner) {
    assertEquals(rows[i++],entry.getKey().getRow().toString());
  }
  scanner=connector.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  scanner.setRange(new Range("1","1<"));
  scanner.fetchColumnFamily(DataFileColumnFamily.NAME);
  int fileCount=0;
  for (  Entry<Key,Value> entry : scanner) {
    boolean inV1=entry.getKey().getColumnQualifier().toString().contains(v1.toString());
    boolean inV2=entry.getKey().getColumnQualifier().toString().contains(v2.toString());
    assertTrue(inV1 || inV2);
    fileCount++;
  }
  assertEquals(4,fileCount);
  List<DiskUsage> diskUsage=connector.tableOperations().getDiskUsage(Collections.singleton(tableName));
  assertEquals(1,diskUsage.size());
  long usage=diskUsage.get(0).getUsage().longValue();
  log.debug("usage {}",usage);
  assertTrue(usage > 700 && usage < 800);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddVolumes() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String uuid=new ZooKeeperInstance(cluster.getClientConfig()).getInstanceID();
  verifyVolumesUsed(tableNames[0],false,v1,v2);
  Assert.assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  cluster.stop();
  Configuration conf=new Configuration(false);
  conf.addResource(new Path(cluster.getConfig().getConfDir().toURI().toString(),"accumulo-site.xml"));
  File v3f=new File(volDirBase,"v3");
  assertTrue(v3f.mkdir() || v3f.isDirectory());
  Path v3=new Path("file://" + v3f.getAbsolutePath());
  conf.set(Property.INSTANCE_VOLUMES.getKey(),v1.toString() + "," + v2.toString()+ ","+ v3.toString());
  BufferedOutputStream fos=new BufferedOutputStream(new FileOutputStream(new File(cluster.getConfig().getConfDir(),"accumulo-site.xml")));
  conf.writeXml(fos);
  fos.close();
  Assert.assertEquals(0,cluster.exec(Initialize.class,"--add-volumes").waitFor());
  for (  Path volumePath : Arrays.asList(v1,v2,v3)) {
    FileSystem fs=volumePath.getFileSystem(CachedConfiguration.getInstance());
    Path vp=new Path(volumePath,ServerConstants.INSTANCE_ID_DIR);
    FileStatus[] iids=fs.listStatus(vp);
    Assert.assertEquals(1,iids.length);
    Assert.assertEquals(uuid,iids[0].getPath().getName());
  }
  cluster.start();
  verifyVolumesUsed(tableNames[1],false,v1,v2,v3);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveVolumes() throws Exception {
  String[] tableNames=getUniqueNames(2);
  verifyVolumesUsed(tableNames[0],false,v1,v2);
  Assert.assertEquals(0,cluster.exec(Admin.class,"stopAll").waitFor());
  cluster.stop();
  Configuration conf=new Configuration(false);
  conf.addResource(new Path(cluster.getConfig().getConfDir().toURI().toString(),"accumulo-site.xml"));
  conf.set(Property.INSTANCE_VOLUMES.getKey(),v2.toString());
  BufferedOutputStream fos=new BufferedOutputStream(new FileOutputStream(new File(cluster.getConfig().getConfDir(),"accumulo-site.xml")));
  conf.writeXml(fos);
  fos.close();
  cluster.start();
  Connector conn=cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
  conn.tableOperations().compact(tableNames[0],null,null,true,true);
  verifyVolumesUsed(tableNames[0],true,v2);
  ZooReader zreader=new ZooReader(cluster.getZooKeepers(),30000);
  String zpath=ZooUtil.getRoot(new ZooKeeperInstance(cluster.getClientConfig())) + RootTable.ZROOT_TABLET_PATH;
  String rootTabletDir=new String(zreader.getData(zpath,false,null),UTF_8);
  Assert.assertTrue(rootTabletDir.startsWith(v2.toString()));
  conn.tableOperations().clone(tableNames[0],tableNames[1],true,new HashMap<String,String>(),new HashSet<String>());
  conn.tableOperations().flush(MetadataTable.NAME,null,null,true);
  conn.tableOperations().flush(RootTable.NAME,null,null,true);
  verifyVolumesUsed(tableNames[0],true,v2);
  verifyVolumesUsed(tableNames[1],true,v2);
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testRelativePaths() throws Exception {
  List<String> expected=new ArrayList<String>();
  Connector connector=getConnector();
  String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName,new NewTableConfiguration().withoutDefaultIterators());
  String tableId=connector.tableOperations().tableIdMap().get(tableName);
  SortedSet<Text> partitions=new TreeSet<Text>();
  for (  String s : "c,g,k,p,s,v".split(","))   partitions.add(new Text(s));
  connector.tableOperations().addSplits(tableName,partitions);
  BatchWriter bw=connector.createBatchWriter(tableName,new BatchWriterConfig());
  String[] rows="a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z".split(",");
  for (  String s : rows) {
    Mutation m=new Mutation(s);
    m.put("cf1","cq1","1");
    bw.addMutation(m);
    expected.add(s + ":cf1:cq1:1");
  }
  bw.flush();
  connector.tableOperations().flush(tableName,null,null,true);
  for (  String s : rows) {
    Mutation m=new Mutation(s);
    m.put("cf1","cq1","2");
    bw.addMutation(m);
    expected.add(s + ":cf1:cq1:2");
  }
  bw.close();
  connector.tableOperations().flush(tableName,null,null,true);
  verifyData(expected,connector.createScanner(tableName,Authorizations.EMPTY));
  connector.tableOperations().offline(tableName,true);
  connector.securityOperations().grantTablePermission("root",MetadataTable.NAME,TablePermission.WRITE);
  Scanner metaScanner=connector.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  metaScanner.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  metaScanner.setRange(new KeyExtent(new Text(tableId),null,null).toMetadataRange());
  BatchWriter mbw=connector.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  for (  Entry<Key,Value> entry : metaScanner) {
    String cq=entry.getKey().getColumnQualifier().toString();
    if (cq.startsWith(v1.toString())) {
      Path path=new Path(cq);
      String relPath="/" + path.getParent().getName() + "/"+ path.getName();
      Mutation fileMut=new Mutation(entry.getKey().getRow());
      fileMut.putDelete(entry.getKey().getColumnFamily(),entry.getKey().getColumnQualifier());
      fileMut.put(entry.getKey().getColumnFamily().toString(),relPath,entry.getValue().toString());
      mbw.addMutation(fileMut);
    }
  }
  mbw.close();
  connector.tableOperations().online(tableName,true);
  verifyData(expected,connector.createScanner(tableName,Authorizations.EMPTY));
  connector.tableOperations().compact(tableName,null,null,true,true);
  verifyData(expected,connector.createScanner(tableName,Authorizations.EMPTY));
  for (  Entry<Key,Value> entry : metaScanner) {
    String cq=entry.getKey().getColumnQualifier().toString();
    Path path=new Path(cq);
    Assert.assertTrue("relative path not deleted " + path.toString(),path.depth() > 2);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.WaitForBalanceIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void test() throws Exception {
  final Connector c=getConnector();
  Iterators.size(c.createScanner(MetadataTable.NAME,Authorizations.EMPTY).iterator());
  c.instanceOperations().waitForBalance();
  assertTrue(isBalanced());
  final String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.instanceOperations().waitForBalance();
  final SortedSet<Text> partitionKeys=new TreeSet<Text>();
  for (int i=0; i < 1000; i++) {
    partitionKeys.add(new Text("" + i));
  }
  c.tableOperations().addSplits(tableName,partitionKeys);
  assertFalse(isBalanced());
  c.instanceOperations().waitForBalance();
  assertTrue(isBalanced());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.examples.simple.dirlist.CountIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Scanner scanner=conn.createScanner(tableName,new Authorizations());
  scanner.fetchColumn(new Text("dir"),new Text("counts"));
  assertFalse(scanner.iterator().hasNext());
  Opts opts=new Opts();
  ScannerOpts scanOpts=new ScannerOpts();
  BatchWriterOpts bwOpts=new BatchWriterOpts();
  opts.instance=conn.getInstance().getInstanceName();
  opts.zookeepers=conn.getInstance().getZooKeepers();
  opts.setTableName(tableName);
  opts.setPrincipal(conn.whoami());
  opts.setPassword(new Opts.Password(ROOT_PASSWORD));
  FileCount fc=new FileCount(opts,scanOpts,bwOpts);
  fc.run();
  ArrayList<Pair<String,String>> expected=new ArrayList<Pair<String,String>>();
  expected.add(new Pair<String,String>(QueryUtil.getRow("").toString(),"1,0,3,3"));
  expected.add(new Pair<String,String>(QueryUtil.getRow("/local").toString(),"2,1,2,3"));
  expected.add(new Pair<String,String>(QueryUtil.getRow("/local/user1").toString(),"0,2,0,2"));
  expected.add(new Pair<String,String>(QueryUtil.getRow("/local/user2").toString(),"0,0,0,0"));
  int i=0;
  for (  Entry<Key,Value> e : scanner) {
    assertEquals(e.getKey().getRow().toString(),expected.get(i).getFirst());
    assertEquals(e.getValue().toString(),expected.get(i).getSecond());
    i++;
  }
  assertEquals(i,expected.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.examples.simple.filedata.ChunkInputStreamIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithAccumulo() throws AccumuloException, AccumuloSecurityException, TableExistsException, TableNotFoundException, IOException {
  conn.tableOperations().create(tableName);
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  for (  Entry<Key,Value> e : data) {
    Key k=e.getKey();
    Mutation m=new Mutation(k.getRow());
    m.put(k.getColumnFamily(),k.getColumnQualifier(),new ColumnVisibility(k.getColumnVisibility()),e.getValue());
    bw.addMutation(m);
  }
  bw.close();
  Scanner scan=conn.createScanner(tableName,AUTHS);
  ChunkInputStream cis=new ChunkInputStream();
  byte[] b=new byte[20];
  int read;
  PeekingIterator<Entry<Key,Value>> pi=new PeekingIterator<Entry<Key,Value>>(scan.iterator());
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  cis.setSource(pi);
  assertEquals(read=cis.read(b),10);
  assertEquals(new String(b,0,read),"qwertyuiop");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[A&B, B&C, D]");
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),16);
  assertEquals(new String(b,0,read),"asdfjkl;asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  assertEquals(cis.getVisibilities().toString(),"[A&B]");
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),-1);
  cis.close();
  cis.setSource(pi);
  assertEquals(read=cis.read(b),8);
  assertEquals(new String(b,0,read),"asdfjkl;");
  assertEquals(read=cis.read(b),-1);
  cis.close();
  assertFalse(pi.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.fate.zookeeper.ZooLockTest </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testDeleteWaiting() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ZooReaderWriter zk=ZooReaderWriter.getInstance(accumulo.getZooKeepers(),30000,"digest","secret".getBytes());
  zk.mkdirs(parent);
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertTrue(lw.locked);
  Assert.assertTrue(zl.isLocked());
  Assert.assertNull(lw.exception);
  Assert.assertNull(lw.reason);
  ZooLock zl2=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  TestALW lw2=new TestALW();
  zl2.lockAsync(lw2,"test2".getBytes());
  Assert.assertFalse(lw2.locked);
  Assert.assertFalse(zl2.isLocked());
  ZooLock zl3=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  TestALW lw3=new TestALW();
  zl3.lockAsync(lw3,"test3".getBytes());
  List<String> children=zk.getChildren(parent);
  Collections.sort(children);
  zk.delete(parent + "/" + children.get(1),-1);
  lw2.waitForChanges(1);
  Assert.assertFalse(lw2.locked);
  Assert.assertNotNull(lw2.exception);
  Assert.assertNull(lw2.reason);
  zk.delete(parent + "/" + children.get(0),-1);
  lw.waitForChanges(2);
  Assert.assertEquals(LockLossReason.LOCK_DELETED,lw.reason);
  Assert.assertNull(lw.exception);
  lw3.waitForChanges(1);
  Assert.assertTrue(lw3.locked);
  Assert.assertTrue(zl3.isLocked());
  Assert.assertNull(lw3.exception);
  Assert.assertNull(lw3.reason);
  zl3.unlock();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test(timeout=10000) public void testTryLock() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),1000,"digest","secret".getBytes(),parent);
  ConnectedWatcher watcher=new ConnectedWatcher();
  ZooKeeper zk=new ZooKeeper(accumulo.getZooKeepers(),1000,watcher);
  zk.addAuthInfo("digest","secret".getBytes());
  while (!watcher.isConnected()) {
    Thread.sleep(200);
  }
  for (int i=0; i < 10; i++) {
    zk.create(parent,new byte[0],ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
    zk.delete(parent,-1);
  }
  zk.create(parent,new byte[0],ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  TestALW lw=new TestALW();
  boolean ret=zl.tryLock(lw,"test1".getBytes());
  Assert.assertTrue(ret);
synchronized (zl) {
    Field field=zl.getClass().getDeclaredField("watchingParent");
    field.setAccessible(true);
    Assert.assertTrue((Boolean)field.get(zl));
  }
  zl.unlock();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testNoParent() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertFalse(lw.locked);
  Assert.assertFalse(zl.isLocked());
  Assert.assertNotNull(lw.exception);
  Assert.assertNull(lw.reason);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testUnexpectedEvent() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ConnectedWatcher watcher=new ConnectedWatcher();
  ZooKeeper zk=new ZooKeeper(accumulo.getZooKeepers(),30000,watcher);
  zk.addAuthInfo("digest","secret".getBytes());
  while (!watcher.isConnected()) {
    Thread.sleep(200);
  }
  zk.create(parent,new byte[0],ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  zk.setData(parent,"foo".getBytes(),-1);
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertTrue(lw.locked);
  Assert.assertTrue(zl.isLocked());
  Assert.assertNull(lw.exception);
  Assert.assertNull(lw.reason);
  zk.setData(zl.getLockPath(),"bar".getBytes(),-1);
  zk.delete(zl.getLockPath(),-1);
  lw.waitForChanges(2);
  Assert.assertEquals(LockLossReason.LOCK_DELETED,lw.reason);
  Assert.assertNull(lw.exception);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testDeleteParent() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  ZooReaderWriter zk=ZooReaderWriter.getInstance(accumulo.getZooKeepers(),30000,"digest","secret".getBytes());
  zk.mkdirs(parent);
  zk.delete(parent,-1);
  zk.mkdirs(parent);
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertTrue(lw.locked);
  Assert.assertTrue(zl.isLocked());
  Assert.assertNull(lw.exception);
  Assert.assertNull(lw.reason);
  zl.unlock();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10000) public void testDeleteLock() throws Exception {
  String parent="/zltest-" + this.hashCode() + "-l"+ pdCount.incrementAndGet();
  ZooReaderWriter zk=ZooReaderWriter.getInstance(accumulo.getZooKeepers(),30000,"digest","secret".getBytes());
  zk.mkdirs(parent);
  ZooLock zl=new ZooLock(accumulo.getZooKeepers(),30000,"digest","secret".getBytes(),parent);
  Assert.assertFalse(zl.isLocked());
  TestALW lw=new TestALW();
  zl.lockAsync(lw,"test1".getBytes());
  lw.waitForChanges(1);
  Assert.assertTrue(lw.locked);
  Assert.assertTrue(zl.isLocked());
  Assert.assertNull(lw.exception);
  Assert.assertNull(lw.reason);
  zk.delete(zl.getLockPath(),-1);
  lw.waitForChanges(2);
  Assert.assertEquals(LockLossReason.LOCK_DELETED,lw.reason);
  Assert.assertNull(lw.exception);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.BalanceInPresenceOfOfflineTableIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void test() throws Exception {
  log.info("Test that balancing is not stopped by an offline table with outstanding migrations.");
  log.debug("starting test ingestion");
  TestIngest.Opts opts=new TestIngest.Opts();
  VerifyIngest.Opts vopts=new VerifyIngest.Opts();
  ClientConfiguration conf=cluster.getClientConfig();
  if (conf.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
    opts.updateKerberosCredentials(cluster.getClientConfig());
    vopts.updateKerberosCredentials(cluster.getClientConfig());
  }
 else {
    opts.setPrincipal("root");
    vopts.setPrincipal("root");
  }
  vopts.rows=opts.rows=200000;
  opts.setTableName(TEST_TABLE);
  TestIngest.ingest(connector,opts,new BatchWriterOpts());
  connector.tableOperations().flush(TEST_TABLE,null,null,true);
  vopts.setTableName(TEST_TABLE);
  VerifyIngest.verifyIngest(connector,vopts,new ScannerOpts());
  log.debug("waiting for balancing, up to ~5 minutes to allow for migration cleanup.");
  final long startTime=System.currentTimeMillis();
  long currentWait=10 * 1000;
  boolean balancingWorked=false;
  Credentials creds=new Credentials(getAdminPrincipal(),getAdminToken());
  while (!balancingWorked && (System.currentTimeMillis() - startTime) < ((5 * 60 + 15) * 1000)) {
    Thread.sleep(currentWait);
    currentWait*=2;
    log.debug("fetch the list of tablets assigned to each tserver.");
    MasterClientService.Iface client=null;
    MasterMonitorInfo stats=null;
    try {
      Instance instance=new ZooKeeperInstance(cluster.getClientConfig());
      client=MasterClient.getConnectionWithRetry(new ClientContext(instance,creds,cluster.getClientConfig()));
      stats=client.getMasterStats(Tracer.traceInfo(),creds.toThrift(instance));
    }
 catch (    ThriftSecurityException exception) {
      throw new AccumuloSecurityException(exception);
    }
catch (    TException exception) {
      throw new AccumuloException(exception);
    }
 finally {
      if (client != null) {
        MasterClient.close(client);
      }
    }
    if (stats.getTServerInfoSize() < 2) {
      log.debug("we need >= 2 servers. sleeping for " + currentWait + "ms");
      continue;
    }
    if (stats.getUnassignedTablets() != 0) {
      log.debug("We shouldn't have unassigned tablets. sleeping for " + currentWait + "ms");
      continue;
    }
    long[] tabletsPerServer=new long[stats.getTServerInfoSize()];
    Arrays.fill(tabletsPerServer,0l);
    for (int i=0; i < stats.getTServerInfoSize(); i++) {
      for (      Map.Entry<String,TableInfo> entry : stats.getTServerInfo().get(i).getTableMap().entrySet()) {
        tabletsPerServer[i]+=entry.getValue().getTablets();
      }
    }
    if (tabletsPerServer[0] <= 10) {
      log.debug("We should have > 10 tablets. sleeping for " + currentWait + "ms");
      continue;
    }
    long min=NumberUtils.min(tabletsPerServer), max=NumberUtils.max(tabletsPerServer);
    log.debug("Min=" + min + ", Max="+ max);
    if ((min / ((double)max)) < 0.5) {
      log.debug("ratio of min to max tablets per server should be roughly even. sleeping for " + currentWait + "ms");
      continue;
    }
    balancingWorked=true;
  }
  Assert.assertTrue("did not properly balance",balancingWorked);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.BigRootTabletIT </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  c.tableOperations().addSplits(MetadataTable.NAME,FunctionalTestUtils.splits("0 1 2 3 4 5 6 7 8 9 a".split(" ")));
  String[] names=getUniqueNames(10);
  for (  String name : names) {
    c.tableOperations().create(name);
    c.tableOperations().flush(MetadataTable.NAME,null,null,true);
    c.tableOperations().flush(RootTable.NAME,null,null,true);
  }
  cluster.stop();
  cluster.start();
  assertTrue(Iterators.size(c.createScanner(RootTable.NAME,Authorizations.EMPTY).iterator()) > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.BinaryStressIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void binaryStressTest() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_SPLIT_THRESHOLD.getKey(),"10K");
  BinaryIT.runTest(c,tableName);
  String id=c.tableOperations().tableIdMap().get(tableName);
  Set<Text> tablets=new HashSet<>();
  Scanner s=c.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(Range.prefix(id));
  for (  Entry<Key,Value> entry : s) {
    tablets.add(entry.getKey().getRow());
  }
  assertTrue("Expected at least 8 tablets, saw " + tablets.size(),tablets.size() > 7);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.CleanTmpIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("row");
  m.put("cf","cq","value");
  bw.addMutation(m);
  bw.flush();
  c.tableOperations().compact(tableName,null,null,true,true);
  m=new Mutation("row2");
  m.put("cf","cq","value");
  bw.addMutation(m);
  bw.close();
  String id=c.tableOperations().tableIdMap().get(tableName);
  Scanner s=c.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(Range.prefix(id));
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  Path file=new Path(entry.getKey().getColumnQualifier().toString());
  FileSystem fs=getCluster().getFileSystem();
  assertTrue("Could not find file: " + file,fs.exists(file));
  Path tabletDir=file.getParent();
  assertNotNull("Tablet dir should not be null",tabletDir);
  Path tmp=new Path(tabletDir,"junk.rf_tmp");
  fs.create(tmp).close();
  log.info("Created tmp file {}",tmp.toString());
  getCluster().stop();
  getCluster().start();
  Scanner scanner=c.createScanner(tableName,Authorizations.EMPTY);
  assertEquals(2,Iterators.size(scanner.iterator()));
  assertFalse("File still exists: " + tmp,fs.exists(tmp));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.CloneTestIT </h4><pre class="type-9 type-11 type-5 type-3 type-21 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteClone() throws Exception {
  String[] tableNames=getUniqueNames(3);
  String table1=tableNames[0];
  String table2=tableNames[1];
  String table3=tableNames[2];
  Connector c=getConnector();
  AccumuloCluster cluster=getCluster();
  Assume.assumeTrue(cluster instanceof MiniAccumuloClusterImpl);
  MiniAccumuloClusterImpl mac=(MiniAccumuloClusterImpl)cluster;
  String rootPath=mac.getConfig().getDir().getAbsolutePath();
  c.tableOperations().create(table3);
  writeData(table3,c).close();
  c.tableOperations().flush(table3,null,null,true);
  FileSystem fs=getCluster().getFileSystem();
  String id=c.tableOperations().tableIdMap().get(table3);
  FileStatus[] status=fs.listStatus(new Path(rootPath + "/accumulo/tables/" + id));
  assertTrue(status.length > 0);
  List<DiskUsage> diskUsage=c.tableOperations().getDiskUsage(Collections.singleton(table3));
  assertEquals(1,diskUsage.size());
  assertTrue(diskUsage.get(0).getUsage() > 100);
  c.tableOperations().delete(table3);
  Path tablePath=new Path(rootPath + "/accumulo/tables/" + id);
  if (fs.exists(tablePath)) {
    status=fs.listStatus(tablePath);
    assertTrue(status == null || status.length == 0);
  }
  c.tableOperations().create(table1);
  BatchWriter bw=writeData(table1,c);
  Map<String,String> props=new HashMap<String,String>();
  props.put(Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE.getKey(),"500K");
  Set<String> exclude=new HashSet<String>();
  exclude.add(Property.TABLE_FILE_MAX.getKey());
  c.tableOperations().clone(table1,table2,true,props,exclude);
  Mutation m3=new Mutation("009");
  m3.put("data","x","1");
  m3.put("data","y","2");
  bw.addMutation(m3);
  bw.close();
  c.tableOperations().delete(table1);
  checkData(table2,c);
  c.tableOperations().compact(table2,null,null,true,true);
  checkData(table2,c);
  c.tableOperations().delete(table2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.CompactionIT </h4><pre class="type-9 type-13 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test() throws Exception {
  final Connector c=getConnector();
  final String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_MAJC_RATIO.getKey(),"1.0");
  FileSystem fs=getFileSystem();
  Path root=new Path(cluster.getTemporaryPath(),getClass().getName());
  Path testrf=new Path(root,"testrf");
  FunctionalTestUtils.createRFiles(c,fs,testrf.toString(),500000,59,4);
  FunctionalTestUtils.bulkImport(c,fs,tableName,testrf.toString());
  int beforeCount=countFiles(c);
  final AtomicBoolean fail=new AtomicBoolean(false);
  final ClientConfiguration clientConf=cluster.getClientConfig();
  final int THREADS=5;
  for (int count=0; count < THREADS; count++) {
    ExecutorService executor=Executors.newFixedThreadPool(THREADS);
    final int span=500000 / 59;
    for (int i=0; i < 500000; i+=500000 / 59) {
      final int finalI=i;
      Runnable r=new Runnable(){
        @Override public void run(){
          try {
            VerifyIngest.Opts opts=new VerifyIngest.Opts();
            opts.startRow=finalI;
            opts.rows=span;
            opts.random=56;
            opts.dataSize=50;
            opts.cols=1;
            opts.setTableName(tableName);
            if (clientConf.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
              opts.updateKerberosCredentials(clientConf);
            }
 else {
              opts.setPrincipal(getAdminPrincipal());
              PasswordToken passwordToken=(PasswordToken)getAdminToken();
              opts.setPassword(new Password(new String(passwordToken.getPassword(),UTF_8)));
            }
            VerifyIngest.verifyIngest(c,opts,new ScannerOpts());
          }
 catch (          Exception ex) {
            log.warn("Got exception verifying data",ex);
            fail.set(true);
          }
        }
      }
;
      executor.execute(r);
    }
    executor.shutdown();
    executor.awaitTermination(defaultTimeoutSeconds(),TimeUnit.SECONDS);
    assertFalse("Failed to successfully run all threads, Check the test output for error",fail.get());
  }
  int finalCount=countFiles(c);
  assertTrue(finalCount < beforeCount);
  try {
    getClusterControl().adminStopAll();
  }
  finally {
    getCluster().stop();
    if (ClusterType.STANDALONE == getClusterType()) {
      getCluster().start();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.CredentialsIT </h4><pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectorWithDestroyedToken() throws Exception {
  AuthenticationToken token=getUser(0).getToken();
  assertFalse(token.isDestroyed());
  token.destroy();
  assertTrue(token.isDestroyed());
  try {
    inst.getConnector("non_existent_user",token);
    fail();
  }
 catch (  AccumuloSecurityException e) {
    assertTrue(e.getSecurityErrorCode().equals(SecurityErrorCode.TOKEN_EXPIRED));
  }
}

</code></pre>

<br>
<pre class="type-13 type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDestroyTokenBeforeRPC() throws Exception {
  AuthenticationToken token=getUser(0).getToken();
  Connector userConnector=inst.getConnector(username,token);
  Scanner scanner=userConnector.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  assertFalse(token.isDestroyed());
  token.destroy();
  assertTrue(token.isDestroyed());
  try {
    Iterator<Entry<Key,Value>> iter=scanner.iterator();
    while (iter.hasNext())     fail();
    fail();
  }
 catch (  Exception e) {
    assertTrue(e instanceof RuntimeException);
    assertTrue(e.getCause() instanceof AccumuloSecurityException);
    assertTrue(AccumuloSecurityException.class.cast(e.getCause()).getSecurityErrorCode().equals(SecurityErrorCode.TOKEN_EXPIRED));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.DeleteRowsSplitIT </h4><pre class="type-9 type-13 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void run() throws Exception {
  final String tableName=getUniqueNames(1)[0];
  final Connector conn=getConnector();
  for (int test=0; test < 10; test++) {
    log.info("Test " + test);
    conn.tableOperations().create(tableName);
    fillTable(conn,tableName);
    final Text start=new Text();
    final Text end=new Text();
    generateRandomRange(start,end);
    final boolean fail[]={false};
    Thread t=new Thread(){
      @Override public void run(){
        try {
          final SortedSet<Text> afterEnd=SPLITS.tailSet(new Text(end.toString() + "\0"));
          conn.tableOperations().addSplits(tableName,afterEnd);
        }
 catch (        Exception ex) {
          log.error("Exception",ex);
synchronized (fail) {
            fail[0]=true;
          }
        }
      }
    }
;
    t.start();
    sleepUninterruptibly(test * 2,TimeUnit.MILLISECONDS);
    conn.tableOperations().deleteRows(tableName,start,end);
    t.join();
synchronized (fail) {
      assertTrue(!fail[0]);
    }
    Scanner scanner=conn.createScanner(tableName,Authorizations.EMPTY);
    for (    Entry<Key,Value> entry : scanner) {
      Text row=entry.getKey().getRow();
      assertTrue(row.compareTo(start) <= 0 || row.compareTo(end) > 0);
    }
    conn.tableOperations().delete(tableName);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.DeleteTableDuringSplitIT </h4><pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test() throws Exception {
  int batches=12, batchSize=8;
  String[] tableNames=getUniqueNames(batches * batchSize);
  for (  String tableName : tableNames) {
    getConnector().tableOperations().create(tableName);
  }
  final SortedSet<Text> splits=new TreeSet<Text>();
  for (byte i=0; i < 100; i++) {
    splits.add(new Text(new byte[]{0,0,i}));
  }
  List<Future<?>> results=new ArrayList<Future<?>>();
  List<Runnable> tasks=new ArrayList<Runnable>();
  SimpleThreadPool es=new SimpleThreadPool(batchSize * 2,"concurrent-api-requests");
  for (  String tableName : tableNames) {
    final String finalName=tableName;
    tasks.add(new Runnable(){
      @Override public void run(){
        try {
          getConnector().tableOperations().addSplits(finalName,splits);
        }
 catch (        TableNotFoundException ex) {
        }
catch (        Exception ex) {
          throw new RuntimeException(finalName,ex);
        }
      }
    }
);
    tasks.add(new Runnable(){
      @Override public void run(){
        try {
          UtilWaitThread.sleep(500);
          getConnector().tableOperations().delete(finalName);
        }
 catch (        Exception ex) {
          throw new RuntimeException(ex);
        }
      }
    }
);
  }
  Iterator<Runnable> itr=tasks.iterator();
  for (int batch=0; batch < batches; batch++) {
    for (int i=0; i < batchSize; i++) {
      Future<?> f=es.submit(itr.next());
      results.add(f);
      f=es.submit(itr.next());
      results.add(f);
    }
    for (    Future<?> f : results) {
      f.get();
    }
    results.clear();
  }
  List<Runnable> queued=es.shutdownNow();
  Assert.assertTrue("Had more tasks to run",queued.isEmpty());
  Assert.assertFalse("Had more tasks that needed to be submitted",itr.hasNext());
  for (  String tableName : tableNames) {
    assertFalse(getConnector().tableOperations().exists(tableName));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.DurabilityIT </h4><pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test(timeout=2 * 60 * 1000) public void testWriteSpeed() throws Exception {
  TableOperations tableOps=getConnector().tableOperations();
  String tableNames[]=init();
  long t0=writeSome(tableNames[0],N);
  tableOps.delete(tableNames[0]);
  long t1=writeSome(tableNames[1],N);
  tableOps.delete(tableNames[1]);
  long t2=writeSome(tableNames[2],N);
  tableOps.delete(tableNames[2]);
  long t3=writeSome(tableNames[3],N);
  tableOps.delete(tableNames[3]);
  System.out.println(String.format("sync %d flush %d log %d none %d",t0,t1,t2,t3));
  assertTrue("flush should be faster than sync",t0 > t1);
  assertTrue("log should be faster than flush",t1 > t2);
  assertTrue("no durability should be faster than log",t2 > t3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test(timeout=4 * 60 * 1000) public void testNone() throws Exception {
  String tableNames[]=init();
  writeSome(tableNames[3],N);
  restartTServer();
  long numResults=readSome(tableNames[3]);
  assertTrue("Expected " + N + " >= "+ numResults,N >= numResults);
  cleanup(tableNames);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=4 * 60 * 1000) public void testMetaDurability() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.instanceOperations().setProperty(Property.TABLE_DURABILITY.getKey(),"none");
  Map<String,String> props=map(c.tableOperations().getProperties(MetadataTable.NAME));
  assertEquals("sync",props.get(Property.TABLE_DURABILITY.getKey()));
  c.tableOperations().create(tableName);
  props=map(c.tableOperations().getProperties(tableName));
  assertEquals("none",props.get(Property.TABLE_DURABILITY.getKey()));
  restartTServer();
  assertTrue(c.tableOperations().exists(tableName));
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test(timeout=4 * 60 * 1000) public void testIncreaseDurability() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_DURABILITY.getKey(),"none");
  writeSome(tableName,N);
  restartTServer();
  long numResults=readSome(tableName);
  assertTrue("Expected " + N + " >= "+ numResults,N >= numResults);
  c.tableOperations().setProperty(tableName,Property.TABLE_DURABILITY.getKey(),"sync");
  writeSome(tableName,N);
  restartTServer();
  assertTrue(N == readSome(tableName));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test(timeout=4 * 60 * 1000) public void testLog() throws Exception {
  String tableNames[]=init();
  writeSome(tableNames[2],N);
  restartTServer();
  long numResults=readSome(tableNames[2]);
  assertTrue("Expected " + N + " >= "+ numResults,N >= numResults);
  cleanup(tableNames);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ExamplesIT </h4><pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClasspath() throws Exception {
  Entry<Integer,String> entry=getCluster().getClusterControl().execWithStdout(Main.class,new String[]{"classpath"});
  assertEquals(0,entry.getKey().intValue());
  String result=entry.getValue();
  int level1=result.indexOf("Level 1");
  int level2=result.indexOf("Level 2");
  int level3=result.indexOf("Level 3");
  int level4=result.indexOf("Level 4");
  assertTrue("Level 1 classloader not present.",level1 >= 0);
  assertTrue("Level 2 classloader not present.",level2 > 0);
  assertTrue("Level 3 classloader not present.",level3 > 0);
  assertTrue("Level 4 classloader not present.",level4 > 0);
  assertTrue(level1 < level2);
  assertTrue(level2 < level3);
  assertTrue(level3 < level4);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-21 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDirList() throws Exception {
  String[] names=getUniqueNames(3);
  String dirTable=names[0], indexTable=names[1], dataTable=names[2];
  String[] args;
  String dirListDirectory;
switch (getClusterType()) {
case MINI:
    dirListDirectory=((MiniAccumuloClusterImpl)getCluster()).getConfig().getDir().getAbsolutePath();
  break;
case STANDALONE:
dirListDirectory=((StandaloneAccumuloCluster)getCluster()).getAccumuloHome();
break;
default :
throw new RuntimeException("Unknown cluster type");
}
assumeTrue(new File(dirListDirectory).exists());
if (saslEnabled) {
args=new String[]{"-i",instance,"-z",keepers,"-u",user,"--keytab",keytab,"--dirTable",dirTable,"--indexTable",indexTable,"--dataTable",dataTable,"--vis",visibility,"--chunkSize",Integer.toString(10000),dirListDirectory};
}
 else {
args=new String[]{"-i",instance,"-z",keepers,"-u",user,"-p",passwd,"--dirTable",dirTable,"--indexTable",indexTable,"--dataTable",dataTable,"--vis",visibility,"--chunkSize",Integer.toString(10000),dirListDirectory};
}
Entry<Integer,String> entry=getClusterControl().execWithStdout(Ingest.class,args);
assertEquals("Got non-zero return code. Stdout=" + entry.getValue(),0,entry.getKey().intValue());
String expectedFile;
switch (getClusterType()) {
case MINI:
expectedFile="accumulo-site.xml";
break;
case STANDALONE:
expectedFile="LICENSE";
break;
default :
throw new RuntimeException("Unknown cluster type");
}
if (saslEnabled) {
args=new String[]{"-i",instance,"-z",keepers,"--keytab",keytab,"-u",user,"-t",indexTable,"--auths",auths,"--search","--path",expectedFile};
}
 else {
args=new String[]{"-i",instance,"-z",keepers,"-p",passwd,"-u",user,"-t",indexTable,"--auths",auths,"--search","--path",expectedFile};
}
entry=getClusterControl().execWithStdout(QueryUtil.class,args);
if (ClusterType.MINI == getClusterType()) {
MiniAccumuloClusterImpl impl=(MiniAccumuloClusterImpl)cluster;
for (LogWriter writer : impl.getLogWriters()) {
writer.flush();
}
}
log.info("result " + entry.getValue());
assertEquals(0,entry.getKey().intValue());
assertTrue(entry.getValue().contains(expectedFile));
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBloomFilters() throws Exception {
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_BLOOM_ENABLED.getKey(),"true");
  String[] args;
  if (saslEnabled) {
    args=new String[]{"--seed","7","-i",instance,"-z",keepers,"-u",user,"--keytab",keytab,"--num","100000","--min","0","--max","1000000000","--size","50","--batchMemory","2M","--batchLatency","60s","--batchThreads","3","-t",tableName};
  }
 else {
    args=new String[]{"--seed","7","-i",instance,"-z",keepers,"-u",user,"-p",passwd,"--num","100000","--min","0","--max","1000000000","--size","50","--batchMemory","2M","--batchLatency","60s","--batchThreads","3","-t",tableName};
  }
  goodExec(RandomBatchWriter.class,args);
  c.tableOperations().flush(tableName,null,null,true);
  long diff=0, diff2=0;
  for (int i=0; i < 2; i++) {
    long now=System.currentTimeMillis();
    if (saslEnabled) {
      args=new String[]{"--seed","7","-i",instance,"-z",keepers,"-u",user,"--keytab",keytab,"--num","10000","--min","0","--max","1000000000","--size","50","--scanThreads","4","-t",tableName};
    }
 else {
      args=new String[]{"--seed","7","-i",instance,"-z",keepers,"-u",user,"-p",passwd,"--num","10000","--min","0","--max","1000000000","--size","50","--scanThreads","4","-t",tableName};
    }
    goodExec(RandomBatchScanner.class,args);
    diff=System.currentTimeMillis() - now;
    now=System.currentTimeMillis();
    if (saslEnabled) {
      args=new String[]{"--seed","8","-i",instance,"-z",keepers,"-u",user,"--keytab",keytab,"--num","10000","--min","0","--max","1000000000","--size","50","--scanThreads","4","-t",tableName};
    }
 else {
      args=new String[]{"--seed","8","-i",instance,"-z",keepers,"-u",user,"-p",passwd,"--num","10000","--min","0","--max","1000000000","--size","50","--scanThreads","4","-t",tableName};
    }
    int retCode=getClusterControl().exec(RandomBatchScanner.class,args);
    assertEquals(1,retCode);
    diff2=System.currentTimeMillis() - now;
    if (diff2 < diff)     break;
  }
  assertTrue(diff2 < diff);
}

</code></pre>

<br>
<pre class="type-5 type-21 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testShardedIndex() throws Exception {
  File src=new File(System.getProperty("user.dir") + "/src");
  assumeTrue(src.exists());
  String[] names=getUniqueNames(3);
  final String shard=names[0], index=names[1];
  c.tableOperations().create(shard);
  c.tableOperations().create(index);
  bw=c.createBatchWriter(shard,bwc);
  Index.index(30,src,"\\W+",bw);
  bw.close();
  BatchScanner bs=c.createBatchScanner(shard,Authorizations.EMPTY,4);
  List<String> found=Query.query(bs,Arrays.asList("foo","bar"),null);
  bs.close();
  boolean thisFile=false;
  for (  String file : found) {
    if (file.endsWith("/ExamplesIT.java"))     thisFile=true;
  }
  assertTrue(thisFile);
  String[] args;
  if (saslEnabled) {
    args=new String[]{"-i",instance,"-z",keepers,"--shardTable",shard,"--doc2Term",index,"-u",user,"--keytab",keytab};
  }
 else {
    args=new String[]{"-i",instance,"-z",keepers,"--shardTable",shard,"--doc2Term",index,"-u",getAdminPrincipal(),"-p",passwd};
  }
  goodExec(Reverse.class,args);
  if (saslEnabled) {
    args=new String[]{"-i",instance,"-z",keepers,"--shardTable",shard,"--doc2Term",index,"-u",user,"--keytab",keytab,"--terms","5","--count","1000"};
  }
 else {
    args=new String[]{"-i",instance,"-z",keepers,"--shardTable",shard,"--doc2Term",index,"-u",user,"-p",passwd,"--terms","5","--count","1000"};
  }
  goodExec(ContinuousQuery.class,args);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTrace() throws Exception {
  Process trace=null;
  if (ClusterType.MINI == getClusterType()) {
    MiniAccumuloClusterImpl impl=(MiniAccumuloClusterImpl)cluster;
    trace=impl.exec(TraceServer.class);
    while (!c.tableOperations().exists("trace"))     sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
  }
  String[] args;
  if (saslEnabled) {
    args=new String[]{"-i",instance,"-z",keepers,"-u",user,"--keytab",keytab,"-C","-D","-c"};
  }
 else {
    args=new String[]{"-i",instance,"-z",keepers,"-u",user,"-p",passwd,"-C","-D","-c"};
  }
  Entry<Integer,String> pair=cluster.getClusterControl().execWithStdout(TracingExample.class,args);
  Assert.assertEquals("Expected return code of zero. STDOUT=" + pair.getValue(),0,pair.getKey().intValue());
  String result=pair.getValue();
  Pattern pattern=Pattern.compile("TraceID: ([0-9a-f]+)");
  Matcher matcher=pattern.matcher(result);
  int count=0;
  while (matcher.find()) {
    if (saslEnabled) {
      args=new String[]{"-i",instance,"-z",keepers,"-u",user,"--keytab",keytab,"--traceid",matcher.group(1)};
    }
 else {
      args=new String[]{"-i",instance,"-z",keepers,"-u",user,"-p",passwd,"--traceid",matcher.group(1)};
    }
    pair=cluster.getClusterControl().execWithStdout(TraceDumpExample.class,args);
    count++;
  }
  assertTrue(count > 0);
  assertTrue("Output did not contain myApp@myHost",pair.getValue().contains("myApp@myHost"));
  if (ClusterType.MINI == getClusterType() && null != trace) {
    trace.destroy();
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStatsCombiner() throws Exception {
  String table=getUniqueNames(1)[0];
  c.tableOperations().create(table);
  is=new IteratorSetting(10,StatsCombiner.class);
  StatsCombiner.setCombineAllColumns(is,true);
  c.tableOperations().attachIterator(table,is);
  bw=c.createBatchWriter(table,bwc);
  Mutation m=new Mutation("foo");
  m.put("a","b","1");
  bw.addMutation(m);
  m=new Mutation("foo");
  m.put("a","b","3");
  bw.addMutation(m);
  bw.flush();
  Iterator<Entry<Key,Value>> iter=c.createScanner(table,Authorizations.EMPTY).iterator();
  assertTrue("Iterator had no results",iter.hasNext());
  Entry<Key,Value> e=iter.next();
  assertEquals("Results ","1,3,4,2",e.getValue().toString());
  assertFalse("Iterator had additional results",iter.hasNext());
  m=new Mutation("foo");
  m.put("a","b","0,20,20,2");
  bw.addMutation(m);
  bw.close();
  iter=c.createScanner(table,Authorizations.EMPTY).iterator();
  assertTrue("Iterator had no results",iter.hasNext());
  e=iter.next();
  assertEquals("Results ","0,20,24,4",e.getValue().toString());
  assertFalse("Iterator had additional results",iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.GarbageCollectorIT </h4><pre class="type-9 type-13 type-11 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProperPortAdvertisement() throws Exception {
  Connector conn=getConnector();
  Instance instance=conn.getInstance();
  ZooReaderWriter zk=new ZooReaderWriter(cluster.getZooKeepers(),30000,OUR_SECRET);
  String path=ZooUtil.getRoot(instance) + Constants.ZGC_LOCK;
  for (int i=0; i < 5; i++) {
    List<String> locks;
    try {
      locks=zk.getChildren(path,null);
    }
 catch (    NoNodeException e) {
      Thread.sleep(5000);
      continue;
    }
    if (locks != null && locks.size() > 0) {
      Collections.sort(locks);
      String lockPath=path + "/" + locks.get(0);
      String gcLoc=new String(zk.getData(lockPath,null));
      Assert.assertTrue("Found unexpected data in zookeeper for GC location: " + gcLoc,gcLoc.startsWith(Service.GC_CLIENT.name()));
      int loc=gcLoc.indexOf(ServerServices.SEPARATOR_CHAR);
      Assert.assertNotEquals("Could not find split point of GC location for: " + gcLoc,-1,loc);
      String addr=gcLoc.substring(loc + 1);
      int addrSplit=addr.indexOf(':');
      Assert.assertNotEquals("Could not find split of GC host:port for: " + addr,-1,addrSplit);
      String host=addr.substring(0,addrSplit), port=addr.substring(addrSplit + 1);
      Assert.assertNotEquals("0.0.0.0",host);
      Assert.assertNotEquals(0,Integer.parseInt(port));
      return;
    }
    Thread.sleep(5000);
  }
  Assert.fail("Could not find advertised GC address");
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void gcTest() throws Exception {
  killMacGc();
  Connector c=getConnector();
  c.tableOperations().create("test_ingest");
  c.tableOperations().setProperty("test_ingest",Property.TABLE_SPLIT_THRESHOLD.getKey(),"5K");
  TestIngest.Opts opts=new TestIngest.Opts();
  VerifyIngest.Opts vopts=new VerifyIngest.Opts();
  vopts.rows=opts.rows=10000;
  vopts.cols=opts.cols=1;
  opts.setPrincipal("root");
  vopts.setPrincipal("root");
  TestIngest.ingest(c,cluster.getFileSystem(),opts,new BatchWriterOpts());
  c.tableOperations().compact("test_ingest",null,null,true,true);
  int before=countFiles();
  while (true) {
    sleepUninterruptibly(1,TimeUnit.SECONDS);
    int more=countFiles();
    if (more <= before)     break;
    before=more;
  }
  getCluster().start();
  sleepUninterruptibly(15,TimeUnit.SECONDS);
  int after=countFiles();
  VerifyIngest.verifyIngest(c,vopts,new ScannerOpts());
  assertTrue(after < before);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidDelete() throws Exception {
  killMacGc();
  String table=getUniqueNames(1)[0];
  getConnector().tableOperations().create(table);
  BatchWriter bw2=getConnector().createBatchWriter(table,new BatchWriterConfig());
  Mutation m1=new Mutation("r1");
  m1.put("cf1","cq1","v1");
  bw2.addMutation(m1);
  bw2.close();
  getConnector().tableOperations().flush(table,null,null,true);
  getConnector().securityOperations().grantTablePermission(getConnector().whoami(),MetadataTable.NAME,TablePermission.WRITE);
  BatchWriter bw3=getConnector().createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  bw3.addMutation(createDelMutation("","","",""));
  bw3.addMutation(createDelMutation("","testDel","test","valueTest"));
  bw3.addMutation(createDelMutation("/","","",""));
  bw3.close();
  Process gc=cluster.exec(SimpleGarbageCollector.class);
  try {
    String output="";
    while (!output.contains("Ignoring invalid deletion candidate")) {
      sleepUninterruptibly(250,TimeUnit.MILLISECONDS);
      try {
        output=FunctionalTestUtils.readAll(cluster,SimpleGarbageCollector.class,gc);
      }
 catch (      IOException ioe) {
        log.error("Could not read all from cluster.",ioe);
      }
    }
  }
  finally {
    gc.destroy();
  }
  Scanner scanner=getConnector().createScanner(table,Authorizations.EMPTY);
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  Assert.assertEquals("r1",entry.getKey().getRow().toString());
  Assert.assertEquals("cf1",entry.getKey().getColumnFamily().toString());
  Assert.assertEquals("cq1",entry.getKey().getColumnQualifier().toString());
  Assert.assertEquals("v1",entry.getValue().toString());
  Assert.assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void gcLotsOfCandidatesIT() throws Exception {
  killMacGc();
  log.info("Filling metadata table with bogus delete flags");
  Connector c=getConnector();
  addEntries(c,new BatchWriterOpts());
  cluster.getConfig().setDefaultMemory(10,MemoryUnit.MEGABYTE);
  Process gc=cluster.exec(SimpleGarbageCollector.class);
  sleepUninterruptibly(20,TimeUnit.SECONDS);
  String output="";
  while (!output.contains("delete candidates has exceeded")) {
    byte buffer[]=new byte[10 * 1024];
    try {
      int n=gc.getInputStream().read(buffer);
      output=new String(buffer,0,n,UTF_8);
    }
 catch (    IOException ex) {
      break;
    }
  }
  gc.destroy();
  assertTrue(output.contains("delete candidates has exceeded"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.KerberosIT </h4><pre class="type-9 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelegationTokenAsDifferentUser() throws Exception {
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  log.info("Logged in as {}",rootUser.getPrincipal());
  final AuthenticationToken delegationToken;
  try {
    delegationToken=ugi.doAs(new PrivilegedExceptionAction<AuthenticationToken>(){
      @Override public AuthenticationToken run() throws Exception {
        Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
        log.info("Created connector as {}",rootUser.getPrincipal());
        assertEquals(rootUser.getPrincipal(),conn.whoami());
        return conn.securityOperations().getDelegationToken(new DelegationTokenConfig());
      }
    }
);
  }
 catch (  UndeclaredThrowableException ex) {
    throw ex;
  }
  UserGroupInformation userWithoutPrivs=UserGroupInformation.createUserForTesting("fake_user",new String[0]);
  try {
    userWithoutPrivs.doAs(new PrivilegedExceptionAction<Void>(){
      @Override public Void run() throws Exception {
        mac.getConnector("some_other_user",delegationToken);
        return null;
      }
    }
);
    fail("Using a delegation token as a different user should throw an exception");
  }
 catch (  UndeclaredThrowableException e) {
    Throwable cause=e.getCause();
    assertNotNull(cause);
    assertTrue("Expected cause to be AccumuloSecurityException, but was " + cause.getClass(),cause instanceof AccumuloSecurityException);
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAdminUser() throws Exception {
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      final Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      for (      SystemPermission perm : SystemPermission.values()) {
        assertTrue("Expected user to have permission: " + perm,conn.securityOperations().hasSystemPermission(conn.whoami(),perm));
      }
      for (      String table : Arrays.asList(RootTable.NAME,MetadataTable.NAME)) {
        assertTrue(conn.securityOperations().hasTablePermission(conn.whoami(),table,TablePermission.ALTER_TABLE));
      }
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserPrivilegesForTable() throws Exception {
  String user1=testName.getMethodName();
  final File user1Keytab=new File(kdc.getKeytabDir(),user1 + ".keytab");
  if (user1Keytab.exists() && !user1Keytab.delete()) {
    log.warn("Unable to delete {}",user1Keytab);
  }
  kdc.createPrincipal(user1Keytab,user1);
  final String qualifiedUser1=kdc.qualifyUser(user1);
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(qualifiedUser1,user1Keytab.getAbsolutePath());
  log.info("Logged in as {}",user1);
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(qualifiedUser1,new KerberosToken());
      log.info("Created connector as {}",qualifiedUser1);
      for (      SystemPermission perm : SystemPermission.values()) {
        assertFalse(conn.securityOperations().hasSystemPermission(qualifiedUser1,perm));
      }
      return null;
    }
  }
);
  final String table=testName.getMethodName() + "_user_table";
  final String viz="viz";
  ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      conn.tableOperations().create(table);
      conn.securityOperations().grantTablePermission(qualifiedUser1,table,TablePermission.READ);
      conn.securityOperations().grantTablePermission(qualifiedUser1,table,TablePermission.WRITE);
      conn.securityOperations().grantTablePermission(qualifiedUser1,table,TablePermission.ALTER_TABLE);
      conn.securityOperations().grantTablePermission(qualifiedUser1,table,TablePermission.DROP_TABLE);
      conn.securityOperations().changeUserAuthorizations(qualifiedUser1,new Authorizations(viz));
      return null;
    }
  }
);
  ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(qualifiedUser1,user1Keytab.getAbsolutePath());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(qualifiedUser1,new KerberosToken());
      final long ts=1000l;
      BatchWriter bw=conn.createBatchWriter(table,new BatchWriterConfig());
      Mutation m=new Mutation("a");
      m.put("b","c",new ColumnVisibility(viz.getBytes()),ts,"d");
      bw.addMutation(m);
      bw.close();
      conn.tableOperations().compact(table,new CompactionConfig().setWait(true).setFlush(true));
      conn.tableOperations().setProperty(table,Property.TABLE_BLOOM_ENABLED.getKey(),"true");
      Scanner s=conn.createScanner(table,new Authorizations(viz));
      Iterator<Entry<Key,Value>> iter=s.iterator();
      assertTrue("No results from iterator",iter.hasNext());
      Entry<Key,Value> entry=iter.next();
      assertEquals(new Key("a","b","c",viz,ts),entry.getKey());
      assertEquals(new Value("d".getBytes()),entry.getValue());
      assertFalse("Had more results from iterator",iter.hasNext());
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetDelegationTokenDenied() throws Exception {
  String newUser=testName.getMethodName();
  final File newUserKeytab=new File(kdc.getKeytabDir(),newUser + ".keytab");
  if (newUserKeytab.exists() && !newUserKeytab.delete()) {
    log.warn("Unable to delete {}",newUserKeytab);
  }
  kdc.createPrincipal(newUserKeytab,newUser);
  final String qualifiedNewUser=kdc.qualifyUser(newUser);
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(qualifiedNewUser,newUserKeytab.getAbsolutePath());
  try {
    ugi.doAs(new PrivilegedExceptionAction<Void>(){
      @Override public Void run() throws Exception {
        Connector conn=mac.getConnector(qualifiedNewUser,new KerberosToken());
        log.info("Created connector as {}",qualifiedNewUser);
        assertEquals(qualifiedNewUser,conn.whoami());
        conn.securityOperations().getDelegationToken(new DelegationTokenConfig());
        return null;
      }
    }
);
  }
 catch (  UndeclaredThrowableException ex) {
    assertTrue(ex.getCause() instanceof AccumuloSecurityException);
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelegationTokenWithReducedLifetime() throws Throwable {
  UserGroupInformation root=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  log.info("Logged in as {}",rootUser.getPrincipal());
  final AuthenticationToken dt=root.doAs(new PrivilegedExceptionAction<AuthenticationToken>(){
    @Override public AuthenticationToken run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      log.info("Created connector as {}",rootUser.getPrincipal());
      assertEquals(rootUser.getPrincipal(),conn.whoami());
      return conn.securityOperations().getDelegationToken(new DelegationTokenConfig().setTokenLifetime(5,TimeUnit.MINUTES));
    }
  }
);
  AuthenticationTokenIdentifier identifier=((DelegationTokenImpl)dt).getIdentifier();
  assertTrue("Expected identifier to expire in no more than 5 minutes: " + identifier,identifier.getExpirationDate() - identifier.getIssueDate() <= (5 * 60 * 1000));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testUserPrivilegesThroughGrant() throws Exception {
  String user1=testName.getMethodName();
  final File user1Keytab=new File(kdc.getKeytabDir(),user1 + ".keytab");
  if (user1Keytab.exists() && !user1Keytab.delete()) {
    log.warn("Unable to delete {}",user1Keytab);
  }
  kdc.createPrincipal(user1Keytab,user1);
  final String qualifiedUser1=kdc.qualifyUser(user1);
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(user1,user1Keytab.getAbsolutePath());
  log.info("Logged in as {}",user1);
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(qualifiedUser1,new KerberosToken());
      log.info("Created connector as {}",qualifiedUser1);
      for (      SystemPermission perm : SystemPermission.values()) {
        assertFalse(conn.securityOperations().hasSystemPermission(qualifiedUser1,perm));
      }
      return null;
    }
  }
);
  ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      conn.securityOperations().grantSystemPermission(qualifiedUser1,SystemPermission.CREATE_TABLE);
      return null;
    }
  }
);
  ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(user1,user1Keytab.getAbsolutePath());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(qualifiedUser1,new KerberosToken());
      final String table=testName.getMethodName() + "_user_table";
      conn.tableOperations().create(table);
      BatchWriter bw=conn.createBatchWriter(table,new BatchWriterConfig());
      Mutation m=new Mutation("a");
      m.put("b","c","d");
      bw.addMutation(m);
      bw.close();
      conn.tableOperations().compact(table,new CompactionConfig().setWait(true).setFlush(true));
      return null;
    }
  }
);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestartedMasterReusesSecretKey() throws Exception {
  UserGroupInformation root=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  log.info("Logged in as {}",rootUser.getPrincipal());
  final AuthenticationToken delegationToken1=root.doAs(new PrivilegedExceptionAction<AuthenticationToken>(){
    @Override public AuthenticationToken run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      log.info("Created connector as {}",rootUser.getPrincipal());
      assertEquals(rootUser.getPrincipal(),conn.whoami());
      AuthenticationToken token=conn.securityOperations().getDelegationToken(new DelegationTokenConfig());
      assertTrue("Could not get tables with delegation token",mac.getConnector(rootUser.getPrincipal(),token).tableOperations().list().size() > 0);
      return token;
    }
  }
);
  log.info("Stopping master");
  mac.getClusterControl().stop(ServerType.MASTER);
  Thread.sleep(5000);
  log.info("Restarting master");
  mac.getClusterControl().start(ServerType.MASTER);
  root.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),delegationToken1);
      assertTrue("Could not get tables with delegation token",conn.tableOperations().list().size() > 0);
      return null;
    }
  }
);
  final AuthenticationToken delegationToken2=root.doAs(new PrivilegedExceptionAction<AuthenticationToken>(){
    @Override public AuthenticationToken run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      log.info("Created connector as {}",rootUser.getPrincipal());
      assertEquals(rootUser.getPrincipal(),conn.whoami());
      AuthenticationToken token=conn.securityOperations().getDelegationToken(new DelegationTokenConfig());
      assertTrue("Could not get tables with delegation token",mac.getConnector(rootUser.getPrincipal(),token).tableOperations().list().size() > 0);
      return token;
    }
  }
);
  DelegationTokenImpl dt1=(DelegationTokenImpl)delegationToken1;
  DelegationTokenImpl dt2=(DelegationTokenImpl)delegationToken2;
  assertEquals(dt1.getIdentifier().getKeyId(),dt2.getIdentifier().getKeyId());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNewUser() throws Exception {
  String newUser=testName.getMethodName();
  final File newUserKeytab=new File(kdc.getKeytabDir(),newUser + ".keytab");
  if (newUserKeytab.exists() && !newUserKeytab.delete()) {
    log.warn("Unable to delete {}",newUserKeytab);
  }
  kdc.createPrincipal(newUserKeytab,newUser);
  final String newQualifiedUser=kdc.qualifyUser(newUser);
  final HashSet<String> users=Sets.newHashSet(rootUser.getPrincipal());
  UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
  log.info("Logged in as {}",rootUser.getPrincipal());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(rootUser.getPrincipal(),new KerberosToken());
      log.info("Created connector as {}",rootUser.getPrincipal());
      assertEquals(rootUser.getPrincipal(),conn.whoami());
      createTableWithDataAndCompact(conn);
      assertEquals(users,conn.securityOperations().listLocalUsers());
      return null;
    }
  }
);
  ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(newQualifiedUser,newUserKeytab.getAbsolutePath());
  log.info("Logged in as {}",newQualifiedUser);
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      Connector conn=mac.getConnector(newQualifiedUser,new KerberosToken());
      log.info("Created connector as {}",newQualifiedUser);
      assertEquals(newQualifiedUser,conn.whoami());
      for (      SystemPermission perm : SystemPermission.values()) {
        assertFalse(conn.securityOperations().hasSystemPermission(newQualifiedUser,perm));
      }
      users.add(newQualifiedUser);
      assertEquals(users,conn.securityOperations().listLocalUsers());
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.KerberosProxyIT </h4><pre class="type-4 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void startMac() throws Exception {
  MiniClusterHarness harness=new MiniClusterHarness();
  mac=harness.create(getClass().getName(),testName.getMethodName(),new PasswordToken("unused"),new MiniClusterConfigurationCallback(){
    @Override public void configureMiniCluster(    MiniAccumuloConfigImpl cfg,    Configuration coreSite){
      cfg.setNumTservers(1);
      Map<String,String> siteCfg=cfg.getSiteConfig();
      siteCfg.put(Property.INSTANCE_RPC_SASL_PROXYUSERS.getKey() + proxyPrincipal + ".users",kdc.getRootUser().getPrincipal());
      siteCfg.put(Property.INSTANCE_RPC_SASL_PROXYUSERS.getKey() + proxyPrincipal + ".hosts","*");
      cfg.setSiteConfig(siteCfg);
    }
  }
,kdc);
  mac.start();
  MiniAccumuloConfigImpl cfg=mac.getConfig();
  proxyPort=PortUtils.getRandomFreePort();
  File proxyPropertiesFile=new File(cfg.getConfDir(),"proxy.properties");
  Properties proxyProperties=new Properties();
  proxyProperties.setProperty("useMockInstance","false");
  proxyProperties.setProperty("useMiniAccumulo","false");
  proxyProperties.setProperty("protocolFactory",TCompactProtocol.Factory.class.getName());
  proxyProperties.setProperty("tokenClass",KerberosToken.class.getName());
  proxyProperties.setProperty("port",Integer.toString(proxyPort));
  proxyProperties.setProperty("maxFrameSize","16M");
  proxyProperties.setProperty("instance",mac.getInstanceName());
  proxyProperties.setProperty("zookeepers",mac.getZooKeepers());
  proxyProperties.setProperty("thriftServerType","sasl");
  proxyProperties.setProperty("kerberosPrincipal",proxyPrincipal);
  proxyProperties.setProperty("kerberosKeytab",proxyKeytab.getCanonicalPath());
  FileWriter writer=new FileWriter(proxyPropertiesFile);
  proxyProperties.store(writer,"Configuration for Accumulo proxy");
  writer.close();
  proxyProcess=mac.exec(Proxy.class,"-p",proxyPropertiesFile.getCanonicalPath());
  Configuration conf=new Configuration(false);
  conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHENTICATION,"kerberos");
  UserGroupInformation.setConfiguration(conf);
  boolean success=false;
  ClusterUser rootUser=kdc.getRootUser();
  for (int i=0; i < 10 && !success; i++) {
    UserGroupInformation ugi;
    try {
      ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().getAbsolutePath());
    }
 catch (    IOException ex) {
      log.info("Login as root is failing",ex);
      Thread.sleep(3000);
      continue;
    }
    TSocket socket=new TSocket(hostname,proxyPort);
    log.info("Connecting to proxy with server primary '" + proxyPrimary + "' running on "+ hostname);
    TSaslClientTransport transport=new TSaslClientTransport("GSSAPI",null,proxyPrimary,hostname,Collections.singletonMap("javax.security.sasl.qop","auth"),null,socket);
    final UGIAssumingTransport ugiTransport=new UGIAssumingTransport(transport,ugi);
    try {
      ugiTransport.open();
      success=true;
    }
 catch (    TTransportException e) {
      Throwable cause=e.getCause();
      if (null != cause && cause instanceof ConnectException) {
        log.info("Proxy not yet up, waiting");
        Thread.sleep(3000);
        continue;
      }
    }
 finally {
      if (null != ugiTransport) {
        ugiTransport.close();
      }
    }
  }
  assertTrue("Failed to connect to the proxy repeatedly",success);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.LargeRowIT </h4><pre class="type-4 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void getTimeoutFactor() throws Exception {
  try {
    timeoutFactor=Integer.parseInt(System.getProperty("timeout.factor"));
  }
 catch (  NumberFormatException e) {
    log.warn("Could not parse property value for 'timeout.factor' as integer: " + System.getProperty("timeout.factor"));
  }
  Assert.assertTrue("Timeout factor must be greater than or equal to 1",timeoutFactor >= 1);
  String[] names=getUniqueNames(2);
  REG_TABLE_NAME=names[0];
  PRE_SPLIT_TABLE_NAME=names[1];
  Connector c=getConnector();
  tservMajcDelay=c.instanceOperations().getSystemConfiguration().get(Property.TSERV_MAJC_DELAY.getKey());
  c.instanceOperations().setProperty(Property.TSERV_MAJC_DELAY.getKey(),"10ms");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.MetadataIT </h4><pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFlushAndCompact() throws Exception {
  Connector c=getConnector();
  String tableNames[]=getUniqueNames(2);
  c.tableOperations().create(tableNames[0]);
  Scanner rootScanner=c.createScanner(RootTable.NAME,Authorizations.EMPTY);
  rootScanner.setRange(MetadataSchema.TabletsSection.getRange());
  rootScanner.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  Set<String> files1=new HashSet<String>();
  for (  Entry<Key,Value> entry : rootScanner)   files1.add(entry.getKey().getColumnQualifier().toString());
  c.tableOperations().create(tableNames[1]);
  c.tableOperations().flush(MetadataTable.NAME,null,null,true);
  Set<String> files2=new HashSet<String>();
  for (  Entry<Key,Value> entry : rootScanner)   files2.add(entry.getKey().getColumnQualifier().toString());
  Assert.assertTrue(files2.size() > 0);
  Assert.assertNotEquals(files1,files2);
  c.tableOperations().compact(MetadataTable.NAME,null,null,false,true);
  Set<String> files3=new HashSet<String>();
  for (  Entry<Key,Value> entry : rootScanner)   files3.add(entry.getKey().getColumnQualifier().toString());
  Assert.assertNotEquals(files2,files3);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void batchScanTest() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  BatchScanner s=c.createBatchScanner(MetadataTable.NAME,Authorizations.EMPTY,1);
  s.setRanges(Collections.singleton(new Range()));
  int count=0;
  for (  Entry<Key,Value> e : s) {
    if (e != null)     count++;
  }
  s.close();
  assertTrue(count > 0);
  s=c.createBatchScanner(RootTable.NAME,Authorizations.EMPTY,1);
  s.setRanges(Collections.singleton(new Range()));
  count=0;
  for (  Entry<Key,Value> e : s) {
    if (e != null)     count++;
  }
  s.close();
  assertTrue(count > 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.MetadataSplitIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  assertEquals(1,c.tableOperations().listSplits(MetadataTable.NAME).size());
  c.tableOperations().setProperty(MetadataTable.NAME,Property.TABLE_SPLIT_THRESHOLD.getKey(),"500");
  for (int i=0; i < 10; i++) {
    c.tableOperations().create("table" + i);
    c.tableOperations().flush(MetadataTable.NAME,null,null,true);
  }
  sleepUninterruptibly(10,TimeUnit.SECONDS);
  assertTrue(c.tableOperations().listSplits(MetadataTable.NAME).size() > 2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.MonitorLoggingIT </h4><pre class="type-9 type-5 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void logToMonitor() throws Exception {
  log.debug("Starting Monitor");
  Process monitor=cluster.exec(Monitor.class);
  String monitorLocation=null;
  for (int i=0; i < NUM_LOCATION_PASSES; i++) {
    Thread.sleep(LOCATION_DELAY_SECS * 1000);
    try {
      monitorLocation=getMonitor();
      break;
    }
 catch (    KeeperException e) {
      log.debug("Monitor not up yet, trying again in " + LOCATION_DELAY_SECS + " secs");
    }
  }
  assertNotNull("Monitor failed to start within " + (LOCATION_DELAY_SECS * NUM_LOCATION_PASSES) + " secs",monitorLocation);
  log.debug("Monitor running at " + monitorLocation);
  Thread.sleep(10000);
  try {
    Connector c=getConnector();
    Scanner s=c.createScanner("accumulo.root",new Authorizations());
    IteratorSetting cfg=new IteratorSetting(100,"incorrect","java.lang.String");
    s.addScanIterator(cfg);
    s.iterator().next();
  }
 catch (  RuntimeException e) {
  }
  String result="";
  while (true) {
    Thread.sleep(LOCATION_DELAY_SECS * 1000);
    URL url=new URL("http://" + monitorLocation + "/log");
    log.debug("Fetching web page " + url);
    result=FunctionalTestUtils.readAll(url.openStream());
    if (result.contains("<pre class='logevent'>")) {
      break;
    }
    log.debug("No messages found, waiting a little longer...");
  }
  assertTrue("No log messages found",result.contains("<pre class='logevent'>"));
  log.debug("Stopping mini accumulo cluster");
  Process shutdown=cluster.exec(Admin.class,"stopAll");
  shutdown.waitFor();
  assertTrue(shutdown.exitValue() == 0);
  log.debug("success!");
  monitor.destroy();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.MonitorSslIT </h4><pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void test() throws Exception {
  log.debug("Starting Monitor");
  cluster.getClusterControl().startAllServers(ServerType.MONITOR);
  String monitorLocation=null;
  while (null == monitorLocation) {
    try {
      monitorLocation=MonitorUtil.getLocation(getConnector().getInstance());
    }
 catch (    Exception e) {
    }
    if (null == monitorLocation) {
      log.debug("Could not fetch monitor HTTP address from zookeeper");
      Thread.sleep(2000);
    }
  }
  URL url=new URL("https://" + monitorLocation);
  log.debug("Fetching web page " + url);
  String result=FunctionalTestUtils.readAll(url.openStream());
  assertTrue(result.length() > 100);
  assertTrue(result.indexOf("Accumulo Overview") >= 0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.NativeMapIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBinary(){
  NativeMap nm=new NativeMap();
  byte emptyBytes[]=new byte[0];
  for (int i=0; i < 256; i++) {
    for (int j=0; j < 256; j++) {
      byte row[]=new byte[]{'r',(byte)(0xff & i),(byte)(0xff & j)};
      byte data[]=new byte[]{'v',(byte)(0xff & i),(byte)(0xff & j)};
      Key k=new Key(row,emptyBytes,emptyBytes,emptyBytes,1);
      Value v=new Value(data);
      nm.put(k,v);
    }
  }
  Iterator<Entry<Key,Value>> iter=nm.iterator();
  for (int i=0; i < 256; i++) {
    for (int j=0; j < 256; j++) {
      byte row[]=new byte[]{'r',(byte)(0xff & i),(byte)(0xff & j)};
      byte data[]=new byte[]{'v',(byte)(0xff & i),(byte)(0xff & j)};
      Key k=new Key(row,emptyBytes,emptyBytes,emptyBytes,1);
      Value v=new Value(data);
      assertTrue(iter.hasNext());
      Entry<Key,Value> entry=iter.next();
      assertEquals(k,entry.getKey());
      assertEquals(v,entry.getValue());
    }
  }
  assertFalse(iter.hasNext());
  for (int i=0; i < 256; i++) {
    for (int j=0; j < 256; j++) {
      byte row[]=new byte[]{'r',(byte)(0xff & i),(byte)(0xff & j)};
      byte data[]=new byte[]{'v',(byte)(0xff & i),(byte)(0xff & j)};
      Key k=new Key(row,emptyBytes,emptyBytes,emptyBytes,1);
      Value v=new Value(data);
      Value v2=nm.get(k);
      assertEquals(v,v2);
    }
  }
  nm.delete();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void test7(){
  NativeMap nm=new NativeMap();
  insertAndVerify(nm,1,10,0);
  nm.delete();
  try {
    nm.delete();
    assertTrue(false);
  }
 catch (  IllegalStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test8(){
  NativeMap nm=new NativeMap();
  TreeMap<Key,Value> tm=new TreeMap<Key,Value>();
  tm.put(new Key(new Text("fo")),new Value(new byte[]{'0'}));
  tm.put(new Key(new Text("foo")),new Value(new byte[]{'1'}));
  tm.put(new Key(new Text("foo1")),new Value(new byte[]{'2'}));
  tm.put(new Key(new Text("foo2")),new Value(new byte[]{'3'}));
  for (  Entry<Key,Value> entry : tm.entrySet()) {
    nm.put(entry.getKey(),entry.getValue());
  }
  Iterator<Entry<Key,Value>> iter=nm.iterator();
  for (  Entry<Key,Value> entry : tm.entrySet()) {
    assertTrue(iter.hasNext());
    Entry<Key,Value> entry2=iter.next();
    assertEquals(entry.getKey(),entry2.getKey());
    assertEquals(entry.getValue(),entry2.getValue());
  }
  assertFalse(iter.hasNext());
  nm.delete();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConcurrentIter() throws IOException {
  NativeMap nm=new NativeMap();
  nm.put(nk(0),nv(0));
  nm.put(nk(1),nv(1));
  nm.put(nk(3),nv(3));
  SortedKeyValueIterator<Key,Value> iter=nm.skvIterator();
  nm.put(nk(2),nv(2));
  assertTrue(iter.hasTop());
  assertEquals(iter.getTopKey(),nk(0));
  iter.next();
  assertTrue(iter.hasTop());
  assertEquals(iter.getTopKey(),nk(1));
  iter.next();
  assertTrue(iter.hasTop());
  assertEquals(iter.getTopKey(),nk(2));
  iter.next();
  assertTrue(iter.hasTop());
  assertEquals(iter.getTopKey(),nk(3));
  iter.next();
  assertFalse(iter.hasTop());
  nm.delete();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void test9(){
  NativeMap nm=new NativeMap();
  Iterator<Entry<Key,Value>> iter=nm.iterator();
  try {
    iter.next();
    assertTrue(false);
  }
 catch (  NoSuchElementException e) {
  }
  insertAndVerify(nm,1,1,0);
  iter=nm.iterator();
  iter.next();
  try {
    iter.next();
    assertTrue(false);
  }
 catch (  NoSuchElementException e) {
  }
  nm.delete();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void test5(){
  NativeMap nm=new NativeMap();
  insertAndVerify(nm,1,10,0);
  Iterator<Entry<Key,Value>> iter=nm.iterator();
  iter.next();
  nm.delete();
  try {
    nm.put(nk(1),nv(1));
    assertTrue(false);
  }
 catch (  IllegalStateException e) {
  }
  try {
    nm.get(nk(1));
    assertTrue(false);
  }
 catch (  IllegalStateException e) {
  }
  try {
    nm.iterator();
    assertTrue(false);
  }
 catch (  IllegalStateException e) {
  }
  try {
    nm.iterator(nk(1));
    assertTrue(false);
  }
 catch (  IllegalStateException e) {
  }
  try {
    nm.size();
    assertTrue(false);
  }
 catch (  IllegalStateException e) {
  }
  try {
    iter.next();
    assertTrue(false);
  }
 catch (  IllegalStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test1(){
  NativeMap nm=new NativeMap();
  Iterator<Entry<Key,Value>> iter=nm.iterator();
  assertFalse(iter.hasNext());
  nm.delete();
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEmpty(){
  NativeMap nm=new NativeMap();
  assertTrue(nm.size() == 0);
  assertTrue(nm.getMemoryUsed() == 0);
  nm.delete();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ReadWriteIT </h4><pre class="type-9 type-11 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiTableTest() throws Exception {
  final String instance=cluster.getInstanceName();
  final String keepers=cluster.getZooKeepers();
  final ClusterControl control=cluster.getClusterControl();
  final String prefix=getClass().getSimpleName() + "_" + testName.getMethodName();
  ExecutorService svc=Executors.newFixedThreadPool(2);
  Future<Integer> p1=svc.submit(new Callable<Integer>(){
    @Override public Integer call(){
      try {
        ClientConfiguration clientConf=cluster.getClientConfig();
        if (clientConf.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
          String principal=getAdminPrincipal();
          AuthenticationToken token=getAdminToken();
          assertTrue("Expected KerberosToken, but was " + token.getClass(),token instanceof KerberosToken);
          KerberosToken kt=(KerberosToken)token;
          assertNotNull("Expected keytab in token",kt.getKeytab());
          return control.exec(TestMultiTableIngest.class,args("--count",Integer.toString(ROWS),"-i",instance,"-z",keepers,"--tablePrefix",prefix,"--keytab",kt.getKeytab().getAbsolutePath(),"-u",principal));
        }
        return control.exec(TestMultiTableIngest.class,args("--count",Integer.toString(ROWS),"-u",getAdminPrincipal(),"-i",instance,"-z",keepers,"-p",new String(((PasswordToken)getAdminToken()).getPassword(),UTF_8),"--tablePrefix",prefix));
      }
 catch (      IOException e) {
        log.error("Error running MultiTableIngest",e);
        return -1;
      }
    }
  }
);
  Future<Integer> p2=svc.submit(new Callable<Integer>(){
    @Override public Integer call(){
      try {
        ClientConfiguration clientConf=cluster.getClientConfig();
        if (clientConf.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
          String principal=getAdminPrincipal();
          AuthenticationToken token=getAdminToken();
          assertTrue("Expected KerberosToken, but was " + token.getClass(),token instanceof KerberosToken);
          KerberosToken kt=(KerberosToken)token;
          assertNotNull("Expected keytab in token",kt.getKeytab());
          return control.exec(TestMultiTableIngest.class,args("--count",Integer.toString(ROWS),"--readonly","-i",instance,"-z",keepers,"--tablePrefix",prefix,"--keytab",kt.getKeytab().getAbsolutePath(),"-u",principal));
        }
        return control.exec(TestMultiTableIngest.class,args("--count",Integer.toString(ROWS),"--readonly","-u",getAdminPrincipal(),"-i",instance,"-z",keepers,"-p",new String(((PasswordToken)getAdminToken()).getPassword(),UTF_8),"--tablePrefix",prefix));
      }
 catch (      IOException e) {
        log.error("Error running MultiTableIngest",e);
        return -1;
      }
    }
  }
);
  svc.shutdown();
  while (!svc.isTerminated()) {
    svc.awaitTermination(15,TimeUnit.SECONDS);
  }
  assertEquals(0,p1.get().intValue());
  assertEquals(0,p2.get().intValue());
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void sunnyDay() throws Exception {
  log.debug("Starting Monitor");
  cluster.getClusterControl().startAllServers(ServerType.MONITOR);
  Connector connector=getConnector();
  String tableName=getUniqueNames(1)[0];
  ingest(connector,getCluster().getClientConfig(),getAdminPrincipal(),ROWS,COLS,50,0,tableName);
  verify(connector,getCluster().getClientConfig(),getAdminPrincipal(),ROWS,COLS,50,0,tableName);
  String monitorLocation=null;
  while (null == monitorLocation) {
    monitorLocation=MonitorUtil.getLocation(getConnector().getInstance());
    if (null == monitorLocation) {
      log.debug("Could not fetch monitor HTTP address from zookeeper");
      Thread.sleep(2000);
    }
  }
  String scheme="http://";
  if (getCluster() instanceof StandaloneAccumuloCluster) {
    StandaloneAccumuloCluster standaloneCluster=(StandaloneAccumuloCluster)getCluster();
    File accumuloSite=new File(standaloneCluster.getServerAccumuloConfDir(),"accumulo-site.xml");
    if (accumuloSite.isFile()) {
      Configuration conf=new Configuration(false);
      conf.addResource(new Path(accumuloSite.toURI()));
      String monitorSslKeystore=conf.get(Property.MONITOR_SSL_KEYSTORE.getKey());
      if (null != monitorSslKeystore) {
        log.info("Setting scheme to HTTPS since monitor ssl keystore configuration was observed in {}",accumuloSite);
        scheme="https://";
        SSLContext ctx=SSLContext.getInstance("SSL");
        TrustManager[] tm=new TrustManager[]{new TestTrustManager()};
        ctx.init(new KeyManager[0],tm,new SecureRandom());
        SSLContext.setDefault(ctx);
        HttpsURLConnection.setDefaultSSLSocketFactory(ctx.getSocketFactory());
        HttpsURLConnection.setDefaultHostnameVerifier(new TestHostnameVerifier());
      }
    }
 else {
      log.info("{} is not a normal file, not checking for monitor running with SSL",accumuloSite);
    }
  }
  URL url=new URL(scheme + monitorLocation);
  log.debug("Fetching web page " + url);
  String result=FunctionalTestUtils.readAll(url.openStream());
  assertTrue(result.length() > 100);
  log.debug("Stopping accumulo cluster");
  ClusterControl control=cluster.getClusterControl();
  control.adminStopAll();
  ZooReader zreader=new ZooReader(connector.getInstance().getZooKeepers(),connector.getInstance().getZooKeepersSessionTimeOut());
  ZooCache zcache=new ZooCache(zreader,null);
  byte[] masterLockData;
  do {
    masterLockData=ZooLock.getLockData(zcache,ZooUtil.getRoot(connector.getInstance()) + Constants.ZMASTER_LOCK,null);
    if (null != masterLockData) {
      log.info("Master lock is still held");
      Thread.sleep(1000);
    }
  }
 while (null != masterLockData);
  control.stopAllServers(ServerType.GARBAGE_COLLECTOR);
  control.stopAllServers(ServerType.MONITOR);
  control.stopAllServers(ServerType.TRACER);
  log.debug("success!");
  cluster.start();
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void localityGroupPerf() throws Exception {
  final Connector connector=getConnector();
  final String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName);
  connector.tableOperations().setProperty(tableName,"table.group.g1","colf");
  connector.tableOperations().setProperty(tableName,"table.groups.enabled","g1");
  ingest(connector,getCluster().getClientConfig(),getAdminPrincipal(),2000,1,50,0,tableName);
  connector.tableOperations().compact(tableName,null,null,true,true);
  BatchWriter bw=connector.createBatchWriter(tableName,new BatchWriterConfig());
  bw.addMutation(m("zzzzzzzzzzz","colf2","cq","value"));
  bw.close();
  long now=System.currentTimeMillis();
  Scanner scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  scanner.fetchColumnFamily(new Text("colf"));
  Iterators.size(scanner.iterator());
  long diff=System.currentTimeMillis() - now;
  now=System.currentTimeMillis();
  scanner=connector.createScanner(tableName,Authorizations.EMPTY);
  scanner.fetchColumnFamily(new Text("colf2"));
  Iterators.size(scanner.iterator());
  bw.close();
  long diff2=System.currentTimeMillis() - now;
  assertTrue(diff2 < diff);
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void sunnyLG() throws Exception {
  final Connector connector=getConnector();
  final String tableName=getUniqueNames(1)[0];
  connector.tableOperations().create(tableName);
  Map<String,Set<Text>> groups=new TreeMap<String,Set<Text>>();
  groups.put("g1",Collections.singleton(t("colf")));
  connector.tableOperations().setLocalityGroups(tableName,groups);
  ingest(connector,getCluster().getClientConfig(),getAdminPrincipal(),2000,1,50,0,tableName);
  verify(connector,getCluster().getClientConfig(),getAdminPrincipal(),2000,1,50,0,tableName);
  connector.tableOperations().flush(tableName,null,null,true);
  BatchScanner bscanner=connector.createBatchScanner(MetadataTable.NAME,Authorizations.EMPTY,1);
  String tableId=connector.tableOperations().tableIdMap().get(tableName);
  bscanner.setRanges(Collections.singletonList(new Range(new Text(tableId + ";"),new Text(tableId + "<"))));
  bscanner.fetchColumnFamily(DataFileColumnFamily.NAME);
  boolean foundFile=false;
  for (  Entry<Key,Value> entry : bscanner) {
    foundFile=true;
    ByteArrayOutputStream baos=new ByteArrayOutputStream();
    PrintStream newOut=new PrintStream(baos);
    PrintStream oldOut=System.out;
    try {
      System.setOut(newOut);
      List<String> args=new ArrayList<>();
      args.add(entry.getKey().getColumnQualifier().toString());
      if (ClusterType.STANDALONE == getClusterType() && cluster.getClientConfig().getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
        args.add("--config");
        StandaloneAccumuloCluster sac=(StandaloneAccumuloCluster)cluster;
        String hadoopConfDir=sac.getHadoopConfDir();
        args.add(new Path(hadoopConfDir,"core-site.xml").toString());
        args.add(new Path(hadoopConfDir,"hdfs-site.xml").toString());
      }
      log.info("Invoking PrintInfo with " + args);
      PrintInfo.main(args.toArray(new String[args.size()]));
      newOut.flush();
      String stdout=baos.toString();
      assertTrue(stdout.contains("Locality group           : g1"));
      assertTrue(stdout.contains("families        : [colf]"));
    }
  finally {
      newOut.close();
      System.setOut(oldOut);
    }
  }
  bscanner.close();
  assertTrue(foundFile);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.RecoveryWithEmptyRFileIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void replaceMissingRFile() throws Exception {
  log.info("Ingest some data, verify it was stored properly, replace an underlying rfile with an empty one and verify we can scan.");
  Connector connector=getConnector();
  String tableName=getUniqueNames(1)[0];
  ReadWriteIT.ingest(connector,cluster.getClientConfig(),"root",ROWS,COLS,50,0,tableName);
  ReadWriteIT.verify(connector,cluster.getClientConfig(),"root",ROWS,COLS,50,0,tableName);
  connector.tableOperations().flush(tableName,null,null,true);
  connector.tableOperations().offline(tableName,true);
  log.debug("Replacing rfile(s) with empty");
  Scanner meta=connector.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  String tableId=connector.tableOperations().tableIdMap().get(tableName);
  meta.setRange(new Range(new Text(tableId + ";"),new Text(tableId + "<")));
  meta.fetchColumnFamily(DataFileColumnFamily.NAME);
  boolean foundFile=false;
  for (  Entry<Key,Value> entry : meta) {
    foundFile=true;
    Path rfile=new Path(entry.getKey().getColumnQualifier().toString());
    log.debug("Removing rfile '" + rfile + "'");
    cluster.getFileSystem().delete(rfile,false);
    Process info=cluster.exec(CreateEmpty.class,rfile.toString());
    assertEquals(0,info.waitFor());
  }
  meta.close();
  assertTrue(foundFile);
  log.trace("invalidate cached file handles by issuing a compaction");
  connector.tableOperations().online(tableName,true);
  connector.tableOperations().compact(tableName,null,null,false,true);
  log.debug("make sure we can still scan");
  Scanner scan=connector.createScanner(tableName,Authorizations.EMPTY);
  scan.setRange(new Range());
  long cells=0l;
  for (  Entry<Key,Value> entry : scan) {
    if (entry != null)     cells++;
  }
  scan.close();
  assertEquals(0l,cells);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ScanIdIT </h4><pre class="type-9 type-5 type-3 type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * @throws Exceptionany exception is a test failure.
 */
@Test public void testScanId() throws Exception {
  final String tableName=getUniqueNames(1)[0];
  Connector conn=getConnector();
  conn.tableOperations().create(tableName);
  addSplits(conn,tableName);
  log.info("Splits added");
  generateSampleData(conn,tableName);
  log.info("Generated data for {}",tableName);
  attachSlowIterator(conn,tableName);
  CountDownLatch latch=new CountDownLatch(NUM_SCANNERS);
  for (int scannerIndex=0; scannerIndex < NUM_SCANNERS; scannerIndex++) {
    ScannerThread st=new ScannerThread(conn,scannerIndex,tableName,latch);
    pool.submit(st);
  }
  while (testInProgress.get()) {
    if (resultsByWorker.size() < NUM_SCANNERS) {
      log.trace("Results reported {}",resultsByWorker.size());
      sleepUninterruptibly(750,TimeUnit.MILLISECONDS);
    }
 else {
      testInProgress.set(false);
      log.debug("Final result count {}",resultsByWorker.size());
      sleepUninterruptibly(1,TimeUnit.SECONDS);
    }
  }
  Set<Long> scanIds=new HashSet<Long>();
  List<String> tservers=conn.instanceOperations().getTabletServers();
  log.debug("tablet servers {}",tservers.toString());
  for (  String tserver : tservers) {
    List<ActiveScan> activeScans=null;
    for (int i=0; i < 10; i++) {
      try {
        activeScans=conn.instanceOperations().getActiveScans(tserver);
        break;
      }
 catch (      AccumuloException e) {
        if (e.getCause() instanceof TableNotFoundException) {
          log.debug("Got TableNotFoundException, will retry");
          Thread.sleep(200);
          continue;
        }
        throw e;
      }
    }
    assertNotNull("Repeatedly got exception trying to active scans",activeScans);
    log.debug("TServer {} has {} active scans",tserver,activeScans.size());
    for (    ActiveScan scan : activeScans) {
      log.debug("Tserver {} scan id {}",tserver,scan.getScanid());
      scanIds.add(scan.getScanid());
    }
  }
  assertTrue("Expected at least " + NUM_SCANNERS + " scanIds, but saw "+ scanIds.size(),NUM_SCANNERS <= scanIds.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ScannerContextIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClearContext() throws Exception {
  Path baseDir=new Path(System.getProperty("user.dir"));
  Path targetDir=new Path(baseDir,"target");
  Path jarPath=new Path(targetDir,"TestIterators-tests.jar");
  Path dstPath=new Path(CONTEXT_DIR + "/Test.jar");
  fs.copyFromLocalFile(jarPath,dstPath);
  UtilWaitThread.sleep(WAIT);
  try {
    Connector c=getConnector();
    c.instanceOperations().setProperty(CONTEXT_PROPERTY,CONTEXT_CLASSPATH);
    String tableName=getUniqueNames(1)[0];
    c.tableOperations().create(tableName);
    BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
    for (int i=0; i < ITERATIONS; i++) {
      Mutation m=new Mutation("row" + i);
      m.put("cf","col1","Test");
      bw.addMutation(m);
    }
    bw.close();
    Scanner one=c.createScanner(tableName,Authorizations.EMPTY);
    IteratorSetting cfg=new IteratorSetting(21,"reverse","org.apache.accumulo.test.functional.ValueReversingIterator");
    one.addScanIterator(cfg);
    one.setClassLoaderContext(CONTEXT);
    Iterator<Entry<Key,Value>> iterator=one.iterator();
    for (int i=0; i < ITERATIONS; i++) {
      assertTrue(iterator.hasNext());
      Entry<Key,Value> next=iterator.next();
      assertEquals("tseT",next.getValue().toString());
    }
    one.removeScanIterator("reverse");
    one.clearClassLoaderContext();
    iterator=one.iterator();
    for (int i=0; i < ITERATIONS; i++) {
      assertTrue(iterator.hasNext());
      Entry<Key,Value> next=iterator.next();
      assertEquals("Test",next.getValue().toString());
    }
  }
  finally {
    fs.delete(dstPath,true);
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneScannerDoesntInterfereWithAnother() throws Exception {
  Path baseDir=new Path(System.getProperty("user.dir"));
  Path targetDir=new Path(baseDir,"target");
  Path jarPath=new Path(targetDir,"TestIterators-tests.jar");
  Path dstPath=new Path(CONTEXT_DIR + "/Test.jar");
  fs.copyFromLocalFile(jarPath,dstPath);
  UtilWaitThread.sleep(WAIT);
  try {
    Connector c=getConnector();
    c.instanceOperations().setProperty(CONTEXT_PROPERTY,CONTEXT_CLASSPATH);
    String tableName=getUniqueNames(1)[0];
    c.tableOperations().create(tableName);
    BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
    for (int i=0; i < ITERATIONS; i++) {
      Mutation m=new Mutation("row" + i);
      m.put("cf","col1","Test");
      bw.addMutation(m);
    }
    bw.close();
    Scanner one=c.createScanner(tableName,Authorizations.EMPTY);
    Scanner two=c.createScanner(tableName,Authorizations.EMPTY);
    IteratorSetting cfg=new IteratorSetting(21,"reverse","org.apache.accumulo.test.functional.ValueReversingIterator");
    one.addScanIterator(cfg);
    one.setClassLoaderContext(CONTEXT);
    Iterator<Entry<Key,Value>> iterator=one.iterator();
    for (int i=0; i < ITERATIONS; i++) {
      assertTrue(iterator.hasNext());
      Entry<Key,Value> next=iterator.next();
      assertEquals("tseT",next.getValue().toString());
    }
    Iterator<Entry<Key,Value>> iterator2=two.iterator();
    for (int i=0; i < ITERATIONS; i++) {
      assertTrue(iterator2.hasNext());
      Entry<Key,Value> next=iterator2.next();
      assertEquals("Test",next.getValue().toString());
    }
  }
  finally {
    fs.delete(dstPath,true);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ScannerIT </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testScannerReadaheadConfiguration() throws Exception {
  final String table=getUniqueNames(1)[0];
  Connector c=getConnector();
  c.tableOperations().create(table);
  BatchWriter bw=c.createBatchWriter(table,new BatchWriterConfig());
  Mutation m=new Mutation("a");
  for (int i=0; i < 10; i++) {
    m.put(Integer.toString(i),"","");
  }
  bw.addMutation(m);
  bw.close();
  Scanner s=c.createScanner(table,new Authorizations());
  IteratorSetting cfg=new IteratorSetting(100,SlowIterator.class);
  SlowIterator.setSeekSleepTime(cfg,100l);
  s.addScanIterator(cfg);
  s.setReadaheadThreshold(Long.MAX_VALUE);
  s.setBatchSize(1);
  s.setRange(new Range());
  Stopwatch sw=new Stopwatch();
  Iterator<Entry<Key,Value>> iterator=s.iterator();
  sw.start();
  while (iterator.hasNext()) {
    sw.stop();
    UtilWaitThread.sleep(100l);
    iterator.next();
    sw.start();
  }
  sw.stop();
  long millisWithWait=sw.elapsed(TimeUnit.MILLISECONDS);
  s=c.createScanner(table,new Authorizations());
  s.addScanIterator(cfg);
  s.setRange(new Range());
  s.setBatchSize(1);
  s.setReadaheadThreshold(0l);
  sw=new Stopwatch();
  iterator=s.iterator();
  sw.start();
  while (iterator.hasNext()) {
    sw.stop();
    UtilWaitThread.sleep(100l);
    iterator.next();
    sw.start();
  }
  sw.stop();
  long millisWithNoWait=sw.elapsed(TimeUnit.MILLISECONDS);
  Assert.assertTrue("Expected less time to be taken with immediate readahead (" + millisWithNoWait + ") than without immediate readahead ("+ millisWithWait+ ")",millisWithNoWait < millisWithWait);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.SessionBlockVerifyIT </h4><pre class="type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void run() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  BatchWriter bw=c.createBatchWriter(tableName,new BatchWriterConfig());
  for (int i=0; i < 1000; i++) {
    Mutation m=new Mutation(new Text(String.format("%08d",i)));
    for (int j=0; j < 3; j++)     m.put(new Text("cf1"),new Text("cq" + j),new Value((i + "_" + j).getBytes(UTF_8)));
    bw.addMutation(m);
  }
  bw.close();
  Scanner scanner=c.createScanner(tableName,new Authorizations());
  scanner.setReadaheadThreshold(20000);
  scanner.setRange(new Range(String.format("%08d",0),String.format("%08d",1000)));
  IteratorSetting setting=new IteratorSetting(21,SlowIterator.class);
  SlowIterator.setSeekSleepTime(setting,Long.MAX_VALUE);
  SlowIterator.setSleepTime(setting,Long.MAX_VALUE);
  scanner.addScanIterator(setting);
  final Iterator<Entry<Key,Value>> slow=scanner.iterator();
  final List<Future<Boolean>> callables=new ArrayList<Future<Boolean>>();
  final CountDownLatch latch=new CountDownLatch(10);
  for (int i=0; i < 10; i++) {
    Future<Boolean> callable=service.submit(new Callable<Boolean>(){
      public Boolean call(){
        latch.countDown();
        while (slow.hasNext()) {
          slow.next();
        }
        return slow.hasNext();
      }
    }
);
    callables.add(callable);
  }
  latch.await();
  log.info("Starting SessionBlockVerifyIT");
  for (int i=0; i < 2; i++) {
    Scanner scanner2=c.createScanner(tableName,new Authorizations());
    scanner2.setRange(new Range(String.format("%08d",0),String.format("%08d",1000)));
    scanner2.setBatchSize(1);
    Iterator<Entry<Key,Value>> iter=scanner2.iterator();
    verify(iter,0,1000);
  }
  int sessionsFound=0;
  String tserver=Iterables.getOnlyElement(c.instanceOperations().getTabletServers());
  final List<ActiveScan> scans=c.instanceOperations().getActiveScans(tserver);
  for (  ActiveScan scan : scans) {
    if (tableName.equals(scan.getTable()) && scan.getSsiList().size() > 0) {
      assertEquals("Not the expected iterator",1,scan.getSsiList().size());
      assertTrue("Not the expected iterator",scan.getSsiList().iterator().next().contains("SlowIterator"));
      sessionsFound++;
    }
  }
  assertEquals("Must have ten sessions. Failure indicates a synchronization block within the sweep mechanism",10,sessionsFound);
  for (  Future<Boolean> callable : callables) {
    callable.cancel(true);
  }
  service.shutdown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.SessionDurabilityIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test(timeout=3 * 60 * 1000) public void durableTableLosesNonDurableWrites() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_DURABILITY.getKey(),"sync");
  BatchWriterConfig cfg=new BatchWriterConfig();
  cfg.setDurability(Durability.NONE);
  writeSome(tableName,10,cfg);
  restartTServer();
  assertTrue(10 > count(tableName));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.SimpleBalancerFairnessIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simpleBalancerFairness() throws Exception {
  Connector c=getConnector();
  c.tableOperations().create("test_ingest");
  c.tableOperations().setProperty("test_ingest",Property.TABLE_SPLIT_THRESHOLD.getKey(),"10K");
  c.tableOperations().create("unused");
  TreeSet<Text> splits=TestIngest.getSplitPoints(0,10000000,500);
  log.info("Creating " + splits.size() + " splits");
  c.tableOperations().addSplits("unused",splits);
  List<String> tservers=c.instanceOperations().getTabletServers();
  TestIngest.Opts opts=new TestIngest.Opts();
  opts.rows=50000;
  opts.setPrincipal("root");
  TestIngest.ingest(c,opts,new BatchWriterOpts());
  c.tableOperations().flush("test_ingest",null,null,false);
  sleepUninterruptibly(45,TimeUnit.SECONDS);
  Credentials creds=new Credentials("root",new PasswordToken(ROOT_PASSWORD));
  ClientContext context=new ClientContext(c.getInstance(),creds,getClientConfig());
  MasterMonitorInfo stats=null;
  int unassignedTablets=1;
  for (int i=0; unassignedTablets > 0 && i < 10; i++) {
    MasterClientService.Iface client=null;
    try {
      client=MasterClient.getConnectionWithRetry(context);
      stats=client.getMasterStats(Tracer.traceInfo(),creds.toThrift(c.getInstance()));
    }
  finally {
      if (client != null)       MasterClient.close(client);
    }
    unassignedTablets=stats.getUnassignedTablets();
    if (unassignedTablets > 0) {
      log.info("Found " + unassignedTablets + " unassigned tablets, sleeping 3 seconds for tablet assignment");
      Thread.sleep(3000);
    }
  }
  assertEquals("Unassigned tablets were not assigned within 30 seconds",0,unassignedTablets);
  List<Integer> counts=new ArrayList<Integer>();
  for (  TabletServerStatus server : stats.tServerInfo) {
    int count=0;
    for (    TableInfo table : server.tableMap.values()) {
      count+=table.onlineTablets;
    }
    counts.add(count);
  }
  assertTrue("Expected to have at least two TabletServers",counts.size() > 1);
  for (int i=1; i < counts.size(); i++) {
    int diff=Math.abs(counts.get(0) - counts.get(i));
    assertTrue("Expected difference in tablets to be less than or equal to " + counts.size() + " but was "+ diff+ ". Counts "+ counts,diff <= tservers.size());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.SplitIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void tabletShouldSplit() throws Exception {
  Connector c=getConnector();
  String table=getUniqueNames(1)[0];
  c.tableOperations().create(table);
  c.tableOperations().setProperty(table,Property.TABLE_SPLIT_THRESHOLD.getKey(),"256K");
  c.tableOperations().setProperty(table,Property.TABLE_FILE_COMPRESSED_BLOCK_SIZE.getKey(),"1K");
  TestIngest.Opts opts=new TestIngest.Opts();
  VerifyIngest.Opts vopts=new VerifyIngest.Opts();
  opts.rows=100000;
  opts.setTableName(table);
  ClientConfiguration clientConfig=cluster.getClientConfig();
  if (clientConfig.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
    opts.updateKerberosCredentials(clientConfig);
    vopts.updateKerberosCredentials(clientConfig);
  }
 else {
    opts.setPrincipal(getAdminPrincipal());
    vopts.setPrincipal(getAdminPrincipal());
  }
  TestIngest.ingest(c,opts,new BatchWriterOpts());
  vopts.rows=opts.rows;
  vopts.setTableName(table);
  VerifyIngest.verifyIngest(c,vopts,new ScannerOpts());
  while (c.tableOperations().listSplits(table).size() < 10) {
    sleepUninterruptibly(15,TimeUnit.SECONDS);
  }
  String id=c.tableOperations().tableIdMap().get(table);
  Scanner s=c.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  KeyExtent extent=new KeyExtent(new Text(id),null,null);
  s.setRange(extent.toMetadataRange());
  MetadataSchema.TabletsSection.TabletColumnFamily.PREV_ROW_COLUMN.fetch(s);
  int count=0;
  int shortened=0;
  for (  Entry<Key,Value> entry : s) {
    extent=new KeyExtent(entry.getKey().getRow(),entry.getValue());
    if (extent.getEndRow() != null && extent.getEndRow().toString().length() < 14)     shortened++;
    count++;
  }
  assertTrue("Shortened should be greater than zero: " + shortened,shortened > 0);
  assertTrue("Count should be cgreater than 10: " + count,count > 10);
  String[] args;
  if (clientConfig.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
    ClusterUser rootUser=getAdminUser();
    args=new String[]{"-i",cluster.getInstanceName(),"-u",rootUser.getPrincipal(),"--keytab",rootUser.getKeytab().getAbsolutePath(),"-z",cluster.getZooKeepers()};
  }
 else {
    PasswordToken token=(PasswordToken)getAdminToken();
    args=new String[]{"-i",cluster.getInstanceName(),"-u","root","-p",new String(token.getPassword(),UTF_8),"-z",cluster.getZooKeepers()};
  }
  assertEquals(0,getCluster().getClusterControl().exec(CheckForMetadataProblems.class,args));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void deleteSplit() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_SPLIT_THRESHOLD.getKey(),"10K");
  ClientConfiguration clientConfig=getCluster().getClientConfig();
  String password=null, keytab=null;
  if (clientConfig.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
    keytab=getAdminUser().getKeytab().getAbsolutePath();
  }
 else {
    password=new String(((PasswordToken)getAdminToken()).getPassword(),UTF_8);
  }
  DeleteIT.deleteTest(c,getCluster(),getAdminPrincipal(),password,tableName,keytab);
  c.tableOperations().flush(tableName,null,null,true);
  for (int i=0; i < 5; i++) {
    sleepUninterruptibly(10,TimeUnit.SECONDS);
    if (c.tableOperations().listSplits(tableName).size() > 20)     break;
  }
  assertTrue(c.tableOperations().listSplits(tableName).size() > 20);
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void interleaveSplit() throws Exception {
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  c.tableOperations().setProperty(tableName,Property.TABLE_SPLIT_THRESHOLD.getKey(),"10K");
  c.tableOperations().setProperty(tableName,Property.TABLE_FILE_COMPRESSION_TYPE.getKey(),"none");
  sleepUninterruptibly(5,TimeUnit.SECONDS);
  ReadWriteIT.interleaveTest(c,tableName);
  sleepUninterruptibly(5,TimeUnit.SECONDS);
  int numSplits=c.tableOperations().listSplits(tableName).size();
  while (numSplits <= 20) {
    log.info("Waiting for splits to happen");
    Thread.sleep(2000);
    numSplits=c.tableOperations().listSplits(tableName).size();
  }
  assertTrue("Expected at least 20 splits, saw " + numSplits,numSplits > 20);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.TableIT </h4><pre class="type-9 type-5 type-3 type-21 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Sets implicit assumptions 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Assume.assumeThat(getClusterType(),CoreMatchers.is(ClusterType.MINI));
  AccumuloCluster cluster=getCluster();
  MiniAccumuloClusterImpl mac=(MiniAccumuloClusterImpl)cluster;
  String rootPath=mac.getConfig().getDir().getAbsolutePath();
  Connector c=getConnector();
  TableOperations to=c.tableOperations();
  String tableName=getUniqueNames(1)[0];
  to.create(tableName);
  TestIngest.Opts opts=new TestIngest.Opts();
  VerifyIngest.Opts vopts=new VerifyIngest.Opts();
  ClientConfiguration clientConfig=getCluster().getClientConfig();
  if (clientConfig.getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
    opts.updateKerberosCredentials(clientConfig);
    vopts.updateKerberosCredentials(clientConfig);
  }
 else {
    opts.setPrincipal(getAdminPrincipal());
    vopts.setPrincipal(getAdminPrincipal());
  }
  opts.setTableName(tableName);
  TestIngest.ingest(c,opts,new BatchWriterOpts());
  to.flush(tableName,null,null,true);
  vopts.setTableName(tableName);
  VerifyIngest.verifyIngest(c,vopts,new ScannerOpts());
  String id=to.tableIdMap().get(tableName);
  Scanner s=c.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(new KeyExtent(new Text(id),null,null).toMetadataRange());
  s.fetchColumnFamily(MetadataSchema.TabletsSection.DataFileColumnFamily.NAME);
  assertTrue(Iterators.size(s.iterator()) > 0);
  FileSystem fs=getCluster().getFileSystem();
  assertTrue(fs.listStatus(new Path(rootPath + "/accumulo/tables/" + id)).length > 0);
  to.delete(tableName);
  assertEquals(0,Iterators.size(s.iterator()));
  try {
    assertEquals(0,fs.listStatus(new Path(rootPath + "/accumulo/tables/" + id)).length);
  }
 catch (  FileNotFoundException ex) {
  }
  assertNull(to.tableIdMap().get(tableName));
  to.create(tableName);
  TestIngest.ingest(c,opts,new BatchWriterOpts());
  VerifyIngest.verifyIngest(c,vopts,new ScannerOpts());
  to.delete(tableName);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.WALSunnyDayIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  MiniAccumuloClusterImpl mac=getCluster();
  MiniAccumuloClusterControl control=mac.getClusterControl();
  control.stop(GARBAGE_COLLECTOR);
  Connector c=getConnector();
  String tableName=getUniqueNames(1)[0];
  c.tableOperations().create(tableName);
  writeSomeData(c,tableName,1,1);
  Map<String,Boolean> wals=getWals(c);
  assertEquals(wals.toString(),2,wals.size());
  for (  Boolean b : wals.values()) {
    assertTrue("logs should be in use",b.booleanValue());
  }
  writeSomeData(c,tableName,1001,50);
  Map<String,Boolean> walsAfterRoll=getWals(c);
  assertEquals("should have 3 WALs after roll",3,walsAfterRoll.size());
  assertTrue("new WALs should be a superset of the old WALs",walsAfterRoll.keySet().containsAll(wals.keySet()));
  assertEquals("all WALs should be in use",3,countTrue(walsAfterRoll.values()));
  for (  String table : new String[]{tableName,MetadataTable.NAME,RootTable.NAME}) {
    c.tableOperations().flush(table,null,null,true);
  }
  sleepUninterruptibly(1,TimeUnit.SECONDS);
  Map<String,Boolean> walsAfterflush=getWals(c);
  assertEquals(walsAfterflush.toString(),3,walsAfterflush.size());
  assertEquals("inUse should be 2",2,countTrue(walsAfterflush.values()));
  control.start(GARBAGE_COLLECTOR);
  sleepUninterruptibly(5,TimeUnit.SECONDS);
  Map<String,Boolean> walsAfterGC=getWals(c);
  assertEquals(walsAfterGC.toString(),2,walsAfterGC.size());
  control.stop(GARBAGE_COLLECTOR);
  control.stop(TABLET_SERVER);
  assertEquals(0,cluster.exec(SetGoalState.class,"SAFE_MODE").waitFor());
  control.start(TABLET_SERVER);
  getRecoveryMarkers(c);
  sleepUninterruptibly(5,TimeUnit.SECONDS);
  Map<KeyExtent,List<String>> markers=getRecoveryMarkers(c);
  assertEquals("one tablet should have markers",1,markers.keySet().size());
  assertEquals("tableId of the keyExtent should be 1",markers.keySet().iterator().next().getTableId(),new Text("1"));
  assertEquals(0,cluster.exec(SetGoalState.class,"NORMAL").waitFor());
  verifySomeData(c,tableName,1001 * 50 + 1);
  writeSomeData(c,tableName,100,100);
  Map<String,Boolean> walsAfterRestart=getWals(c);
  assertEquals("used WALs after restart should be 4",4,countTrue(walsAfterRestart.values()));
  control.start(GARBAGE_COLLECTOR);
  sleepUninterruptibly(5,TimeUnit.SECONDS);
  Map<String,Boolean> walsAfterRestartAndGC=getWals(c);
  assertEquals("wals left should be 2",2,walsAfterRestartAndGC.size());
  assertEquals("logs in use should be 2",2,countTrue(walsAfterRestartAndGC.values()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.WatchTheWatchCountIT </h4><pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  String[] tableNames=getUniqueNames(3);
  for (  String tableName : tableNames) {
    c.tableOperations().create(tableName);
  }
  c.tableOperations().list();
  String zooKeepers=c.getInstance().getZooKeepers();
  final long MIN=475L;
  final long MAX=700L;
  long total=0;
  final HostAndPort hostAndPort=HostAndPort.fromString(zooKeepers);
  for (int i=0; i < 5; i++) {
    Socket socket=new Socket(hostAndPort.getHostText(),hostAndPort.getPort());
    try {
      socket.getOutputStream().write("wchs\n".getBytes(),0,5);
      byte[] buffer=new byte[1024];
      int n=socket.getInputStream().read(buffer);
      String response=new String(buffer,0,n);
      total=Long.parseLong(response.split(":")[1].trim());
      log.info("Total: {}",total);
      if (total > MIN && total < MAX) {
        break;
      }
      log.debug("Expected number of watchers to be contained in ({}, {}), but actually was {}. Sleeping and retrying",MIN,MAX,total);
      Thread.sleep(5000);
    }
  finally {
      socket.close();
    }
  }
  assertTrue("Expected number of watchers to be contained in (" + MIN + ", "+ MAX+ "), but actually was "+ total,total > MIN && total < MAX);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.functional.ZookeeperRestartIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Connector c=getConnector();
  c.tableOperations().create("test_ingest");
  BatchWriter bw=c.createBatchWriter("test_ingest",null);
  Mutation m=new Mutation("row");
  m.put("cf","cq","value");
  bw.addMutation(m);
  bw.close();
  for (  ProcessReference proc : cluster.getProcesses().get(ServerType.ZOOKEEPER))   cluster.killProcess(ServerType.ZOOKEEPER,proc);
  sleepUninterruptibly(1,TimeUnit.SECONDS);
  cluster.start();
  Scanner s=c.createScanner("test_ingest",Authorizations.EMPTY);
  Iterator<Entry<Key,Value>> i=s.iterator();
  assertTrue(i.hasNext());
  assertEquals("row",i.next().getKey().getRow().toString());
  assertFalse(i.hasNext());
  c.tableOperations().delete("test_ingest");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.gc.replication.CloseWriteAheadLogReferencesIT </h4><pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void unclosedWalsLeaveStatusOpen() throws Exception {
  Set<String> wals=Collections.emptySet();
  BatchWriter bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  Mutation m=new Mutation(ReplicationSection.getRowPrefix() + "file:/accumulo/wal/tserver+port/12345");
  m.put(ReplicationSection.COLF,new Text("1"),StatusUtil.fileCreatedValue(System.currentTimeMillis()));
  bw.addMutation(m);
  bw.close();
  refs.updateReplicationEntries(conn,wals);
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.fetchColumnFamily(ReplicationSection.COLF);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  Status status=Status.parseFrom(entry.getValue().get());
  Assert.assertFalse(status.getClosed());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void closedWalsUpdateStatus() throws Exception {
  String file="file:/accumulo/wal/tserver+port/12345";
  Set<String> wals=Collections.singleton(file);
  BatchWriter bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  Mutation m=new Mutation(ReplicationSection.getRowPrefix() + file);
  m.put(ReplicationSection.COLF,new Text("1"),StatusUtil.fileCreatedValue(System.currentTimeMillis()));
  bw.addMutation(m);
  bw.close();
  refs.updateReplicationEntries(conn,wals);
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.fetchColumnFamily(ReplicationSection.COLF);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  Status status=Status.parseFrom(entry.getValue().get());
  Assert.assertTrue(status.getClosed());
}

</code></pre>

<br>
<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void partiallyReplicatedReferencedWalsAreNotClosed() throws Exception {
  String file="file:/accumulo/wal/tserver+port/12345";
  Set<String> wals=Collections.singleton(file);
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  Mutation m=new Mutation(file);
  StatusSection.add(m,new Text("1"),ProtobufUtil.toValue(StatusUtil.ingestedUntil(1000)));
  bw.addMutation(m);
  bw.close();
  refs.updateReplicationEntries(conn,wals);
  Scanner s=ReplicationTable.getScanner(conn);
  Entry<Key,Value> entry=Iterables.getOnlyElement(s);
  Status status=Status.parseFrom(entry.getValue().get());
  Assert.assertFalse(status.getClosed());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapred.AccumuloOutputFormatIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMR() throws Exception {
  Connector c=getConnector();
  String instanceName=getCluster().getInstanceName();
  String table1=instanceName + "_t1";
  String table2=instanceName + "_t2";
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  MRTester.main(new String[]{"root",ROOT_PASSWORD,table1,table2,instanceName,getCluster().getZooKeepers()});
  assertNull(e1);
  Scanner scanner=c.createScanner(table2,new Authorizations());
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  assertEquals(Integer.parseInt(new String(entry.getValue().get())),100);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-8 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMapred() throws Exception {
  Connector connector=getConnector();
  connector.tableOperations().create(testName.getMethodName());
  JobConf job=new JobConf();
  BatchWriterConfig batchConfig=new BatchWriterConfig();
  batchConfig.setMaxLatency(0,TimeUnit.MILLISECONDS);
  batchConfig.setMaxWriteThreads(1);
  batchConfig.setMaxMemory(Long.MAX_VALUE);
  AccumuloOutputFormat outputFormat=new AccumuloOutputFormat();
  AccumuloOutputFormat.setBatchWriterOptions(job,batchConfig);
  AccumuloOutputFormat.setZooKeeperInstance(job,cluster.getClientConfig());
  AccumuloOutputFormat.setConnectorInfo(job,"root",new PasswordToken(ROOT_PASSWORD));
  RecordWriter<Text,Mutation> writer=outputFormat.getRecordWriter(null,job,"Test",null);
  try {
    for (int i=0; i < 3; i++) {
      Mutation m=new Mutation(new Text(String.format("%08d",i)));
      for (int j=0; j < 3; j++) {
        m.put(new Text("cf1"),new Text("cq" + j),new Value((i + "_" + j).getBytes(UTF_8)));
      }
      writer.write(new Text(testName.getMethodName()),m);
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  connector.securityOperations().revokeTablePermission("root",testName.getMethodName(),TablePermission.WRITE);
  try {
    writer.close(null);
    fail("Did not throw exception");
  }
 catch (  IOException ex) {
    log.info(ex.getMessage(),ex);
    assertTrue(ex.getCause() instanceof MutationsRejectedException);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapred.TokenFileIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMR() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String table1=tableNames[0];
  String table2=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  File tf=folder.newFile("root_test.pw");
  PrintStream out=new PrintStream(tf);
  String outString=new Credentials(getAdminPrincipal(),getAdminToken()).serialize();
  out.println(outString);
  out.close();
  MRTokenFileTester.main(new String[]{tf.getAbsolutePath(),table1,table2});
  assertNull(e1);
  Scanner scanner=c.createScanner(table2,new Authorizations());
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  assertEquals(Integer.parseInt(new String(entry.getValue().get())),100);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapreduce.AccumuloFileOutputFormatIT </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void writeBadVisibility() throws Exception {
  File f=folder.newFile(testName.getMethodName());
  assertTrue(f.delete());
  MRTester.main(new String[]{BAD_TABLE,f.getAbsolutePath()});
  assertTrue(f.exists());
  assertEquals(1,assertionErrors.get(BAD_TABLE + "_map").size());
  assertEquals(1,assertionErrors.get(BAD_TABLE + "_cleanup").size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapreduce.AccumuloOutputFormatIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMR() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String table1=tableNames[0];
  String table2=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  MRTester.main(new String[]{table1,table2});
  assertNull(e1);
  Scanner scanner=c.createScanner(table2,new Authorizations());
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  assertEquals(Integer.parseInt(new String(entry.getValue().get())),100);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.mapreduce.TokenFileIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMR() throws Exception {
  String[] tableNames=getUniqueNames(2);
  String table1=tableNames[0];
  String table2=tableNames[1];
  Connector c=getConnector();
  c.tableOperations().create(table1);
  c.tableOperations().create(table2);
  BatchWriter bw=c.createBatchWriter(table1,new BatchWriterConfig());
  for (int i=0; i < 100; i++) {
    Mutation m=new Mutation(new Text(String.format("%09x",i + 1)));
    m.put(new Text(),new Text(),new Value(String.format("%09x",i).getBytes()));
    bw.addMutation(m);
  }
  bw.close();
  File tf=folder.newFile("root_test.pw");
  PrintStream out=new PrintStream(tf);
  String outString=new Credentials(getAdminPrincipal(),getAdminToken()).serialize();
  out.println(outString);
  out.close();
  MRTokenFileTester.main(new String[]{tf.getAbsolutePath(),table1,table2});
  assertNull(e1);
  Scanner scanner=c.createScanner(table2,new Authorizations());
  Iterator<Entry<Key,Value>> iter=scanner.iterator();
  assertTrue(iter.hasNext());
  Entry<Key,Value> entry=iter.next();
  assertEquals(Integer.parseInt(new String(entry.getValue().get())),100);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.performance.metadata.FastBulkImportIT </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void test() throws Exception {
  log.info("Creating table");
  final String tableName=getUniqueNames(1)[0];
  final Connector c=getConnector();
  c.tableOperations().create(tableName);
  log.info("Adding splits");
  SortedSet<Text> splits=new TreeSet<>();
  for (int i=1; i < 0xfff; i+=7) {
    splits.add(new Text(Integer.toHexString(i)));
  }
  c.tableOperations().addSplits(tableName,splits);
  log.info("Creating lots of bulk import files");
  FileSystem fs=getCluster().getFileSystem();
  Path basePath=getCluster().getTemporaryPath();
  CachedConfiguration.setInstance(fs.getConf());
  Path base=new Path(basePath,"testBulkFail_" + tableName);
  fs.delete(base,true);
  fs.mkdirs(base);
  Path bulkFailures=new Path(base,"failures");
  Path files=new Path(base,"files");
  fs.mkdirs(bulkFailures);
  fs.mkdirs(files);
  for (int i=0; i < 100; i++) {
    FileSKVWriter writer=FileOperations.getInstance().openWriter(files.toString() + "/bulk_" + i+ "."+ RFile.EXTENSION,fs,fs.getConf(),AccumuloConfiguration.getDefaultConfiguration());
    writer.startDefaultLocalityGroup();
    for (int j=0x100; j < 0xfff; j+=3) {
      writer.append(new Key(Integer.toHexString(j)),new Value(new byte[0]));
    }
    writer.close();
  }
  log.info("Waiting for balance");
  c.instanceOperations().waitForBalance();
  log.info("Bulk importing files");
  long now=System.currentTimeMillis();
  c.tableOperations().importDirectory(tableName,files.toString(),bulkFailures.toString(),true);
  double diffSeconds=(System.currentTimeMillis() - now) / 1000.;
  log.info(String.format("Import took %.2f seconds",diffSeconds));
  assertTrue(diffSeconds < 30);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.ProxyDurabilityIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDurability() throws Exception {
  Connector c=getConnector();
  Properties props=new Properties();
  File emptyFile=Files.createTempFile(null,null).toFile();
  emptyFile.deleteOnExit();
  props.put("instance",c.getInstance().getInstanceName());
  props.put("zookeepers",c.getInstance().getZooKeepers());
  props.put("tokenClass",PasswordToken.class.getName());
  props.put("clientConfigurationFile",emptyFile.toString());
  TJSONProtocol.Factory protocol=new TJSONProtocol.Factory();
  int proxyPort=PortUtils.getRandomFreePort();
  final TServer proxyServer=Proxy.createProxyServer(HostAndPort.fromParts("localhost",proxyPort),protocol,props).server;
  while (!proxyServer.isServing())   sleepUninterruptibly(100,TimeUnit.MILLISECONDS);
  Client client=new TestProxyClient("localhost",proxyPort,protocol).proxy();
  Map<String,String> properties=new TreeMap<String,String>();
  properties.put("password",ROOT_PASSWORD);
  ByteBuffer login=client.login("root",properties);
  String tableName=getUniqueNames(1)[0];
  client.createTable(login,tableName,true,TimeType.MILLIS);
  assertTrue(c.tableOperations().exists(tableName));
  WriterOptions options=new WriterOptions();
  options.setDurability(Durability.NONE);
  String writer=client.createWriter(login,tableName,options);
  Map<ByteBuffer,List<ColumnUpdate>> cells=new TreeMap<ByteBuffer,List<ColumnUpdate>>();
  ColumnUpdate column=new ColumnUpdate(bytes("cf"),bytes("cq"));
  column.setValue("value".getBytes());
  cells.put(bytes("row"),Collections.singletonList(column));
  client.update(writer,cells);
  client.closeWriter(writer);
  assertEquals(1,count(tableName));
  restartTServer();
  assertEquals(0,count(tableName));
  ConditionalWriterOptions cfg=new ConditionalWriterOptions();
  cfg.setDurability(Durability.SYNC);
  String cwriter=client.createConditionalWriter(login,tableName,cfg);
  ConditionalUpdates updates=new ConditionalUpdates();
  updates.addToConditions(new Condition(new Column(bytes("cf"),bytes("cq"),bytes(""))));
  updates.addToUpdates(column);
  Map<ByteBuffer,ConditionalStatus> status=client.updateRowsConditionally(cwriter,Collections.singletonMap(bytes("row"),updates));
  assertEquals(ConditionalStatus.ACCEPTED,status.get(bytes("row")));
  assertEquals(1,count(tableName));
  restartTServer();
  assertEquals(1,count(tableName));
  proxyServer.stop();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.SimpleProxyBase </h4><pre class="type-11 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void userAuthentication() throws Exception {
  if (isKerberosEnabled()) {
    assertTrue(client.authenticateUser(creds,clientPrincipal,Collections.<String,String>emptyMap()));
  }
 else {
    assertTrue(client.authenticateUser(creds,"root",s2pp(SharedMiniClusterBase.getRootPassword())));
    assertFalse(client.authenticateUser(creds,"root",s2pp("")));
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void importDirectoryLoginFailure() throws Exception {
  MiniAccumuloClusterImpl cluster=SharedMiniClusterBase.getCluster();
  Path base=cluster.getTemporaryPath();
  Path importDir=new Path(base,"importDir");
  Path failuresDir=new Path(base,"failuresDir");
  assertTrue(cluster.getFileSystem().mkdirs(importDir));
  assertTrue(cluster.getFileSystem().mkdirs(failuresDir));
  client.importDirectory(badLogin,table,importDir.toString(),failuresDir.toString(),true);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelete() throws Exception {
  client.updateAndFlush(creds,table,mutation("row0","cf","cq","value"));
  assertScan(new String[][]{{"row0","cf","cq","value"}},table);
  ColumnUpdate upd=new ColumnUpdate(s2bb("cf"),s2bb("cq"));
  upd.setDeleteCell(false);
  Map<ByteBuffer,List<ColumnUpdate>> notDelete=Collections.singletonMap(s2bb("row0"),Collections.singletonList(upd));
  client.updateAndFlush(creds,table,notDelete);
  String scanner=client.createScanner(creds,table,null);
  ScanResult entries=client.nextK(scanner,10);
  client.closeScanner(scanner);
  assertFalse(entries.more);
  assertEquals("Results: " + entries.results,1,entries.results.size());
  upd=new ColumnUpdate(s2bb("cf"),s2bb("cq"));
  upd.setDeleteCell(true);
  Map<ByteBuffer,List<ColumnUpdate>> delete=Collections.singletonMap(s2bb("row0"),Collections.singletonList(upd));
  client.updateAndFlush(creds,table,delete);
  assertScan(new String[][]{},table);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void bulkImport() throws Exception {
  MiniAccumuloClusterImpl cluster=SharedMiniClusterBase.getCluster();
  FileSystem fs=cluster.getFileSystem();
  Path base=cluster.getTemporaryPath();
  Path dir=new Path(base,"test");
  assertTrue(fs.mkdirs(dir));
  String filename=dir + "/bulk/import/rfile.rf";
  FileSKVWriter writer=FileOperations.getInstance().openWriter(filename,fs,fs.getConf(),DefaultConfiguration.getInstance());
  writer.startDefaultLocalityGroup();
  writer.append(new org.apache.accumulo.core.data.Key(new Text("a"),new Text("b"),new Text("c")),new Value("value".getBytes(UTF_8)));
  writer.close();
  fs.mkdirs(new Path(dir + "/bulk/fail"));
  client.importDirectory(creds,table,dir + "/bulk/import",dir + "/bulk/fail",true);
  String scanner=client.createScanner(creds,table,null);
  ScanResult more=client.nextK(scanner,100);
  client.closeScanner(scanner);
  assertEquals(1,more.results.size());
  ByteBuffer maxRow=client.getMaxRow(creds,table,null,null,false,null,false);
  assertEquals(s2bb("a"),maxRow);
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSiteConfiguration() throws Exception {
  MiniAccumuloClusterImpl cluster=SharedMiniClusterBase.getCluster();
  Map<String,String> cfg=client.getSiteConfiguration(creds);
  assertTrue(cfg.get("instance.dfs.dir").startsWith(cluster.getConfig().getAccumuloDir().getAbsolutePath()));
}

</code></pre>

<br>
<pre class="type-9 type-11 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void attachIteratorWithCompactions() throws Exception {
  if (client.tableExists(creds,"slow")) {
    client.deleteTable(creds,"slow");
  }
  client.createTable(creds,"slow",true,TimeType.MILLIS);
  IteratorSetting setting=new IteratorSetting(100,"slow",SlowIterator.class.getName(),Collections.singletonMap("sleepTime","250"));
  client.attachIterator(creds,"slow",setting,EnumSet.allOf(IteratorScope.class));
  for (int i=0; i < 40; i++) {
    client.updateAndFlush(creds,"slow",mutation("row" + i,"cf","cq","value"));
  }
  Map<String,String> map=client.tableIdMap(creds);
  Thread t=new Thread(){
    @Override public void run(){
      TestProxyClient proxyClient2=null;
      try {
        if (isKerberosEnabled()) {
          UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,UserGroupInformation.getCurrentUser());
        }
 else {
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory);
        }
        Client client2=proxyClient2.proxy();
        client2.compactTable(creds,"slow",null,null,null,true,true,null);
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
 finally {
        if (null != proxyClient2) {
          proxyClient2.close();
        }
      }
    }
  }
;
  t.start();
  final String desiredTableId=map.get("slow");
  assertNotNull(desiredTableId);
  List<ActiveCompaction> compactions=new ArrayList<ActiveCompaction>();
  for (int i=0; i < 100 && compactions.isEmpty(); i++) {
    for (    String tserver : client.getTabletServers(creds)) {
      List<ActiveCompaction> compactionsOnServer=client.getActiveCompactions(creds,tserver);
      for (      ActiveCompaction compact : compactionsOnServer) {
        if (desiredTableId.equals(compact.getExtent().tableId)) {
          compactions.add(compact);
        }
      }
      if (!compactions.isEmpty())       break;
    }
    sleepUninterruptibly(10,TimeUnit.MILLISECONDS);
  }
  t.join();
  assertFalse(compactions.isEmpty());
  for (  ActiveCompaction c : compactions) {
    if (desiredTableId.equals(c.getExtent().tableId)) {
      assertTrue(c.inputFiles.isEmpty());
      assertEquals(CompactionType.MINOR,c.getType());
      assertEquals(CompactionReason.USER,c.getReason());
      assertEquals("",c.localityGroup);
      assertTrue(c.outputFile.contains("default_tablet"));
      return;
    }
  }
  fail("Expection to find running compaction for table 'slow' but did not find one");
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void tableNotFound() throws Exception {
  final String doesNotExist="doesNotExists";
  try {
    client.addConstraint(creds,doesNotExist,NumericValueConstraint.class.getName());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.addSplits(creds,doesNotExist,Collections.<ByteBuffer>emptySet());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  final IteratorSetting setting=new IteratorSetting(100,"slow",SlowIterator.class.getName(),Collections.singletonMap("sleepTime","200"));
  try {
    client.attachIterator(creds,doesNotExist,setting,EnumSet.allOf(IteratorScope.class));
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.cancelCompaction(creds,doesNotExist);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.checkIteratorConflicts(creds,doesNotExist,setting,EnumSet.allOf(IteratorScope.class));
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.clearLocatorCache(creds,doesNotExist);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    final String TABLE_TEST=getUniqueNames(1)[0];
    client.cloneTable(creds,doesNotExist,TABLE_TEST,false,null,null);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.compactTable(creds,doesNotExist,null,null,null,true,false,null);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.createBatchScanner(creds,doesNotExist,new BatchScanOptions());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.createScanner(creds,doesNotExist,new ScanOptions());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.createWriter(creds,doesNotExist,new WriterOptions());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.deleteRows(creds,doesNotExist,null,null);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.deleteTable(creds,doesNotExist);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.exportTable(creds,doesNotExist,"/tmp");
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.flushTable(creds,doesNotExist,null,null,false);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.getIteratorSetting(creds,doesNotExist,"foo",IteratorScope.SCAN);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.getLocalityGroups(creds,doesNotExist);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.getMaxRow(creds,doesNotExist,Collections.<ByteBuffer>emptySet(),null,false,null,false);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.getTableProperties(creds,doesNotExist);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.grantTablePermission(creds,"root",doesNotExist,TablePermission.WRITE);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.hasTablePermission(creds,"root",doesNotExist,TablePermission.WRITE);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    MiniAccumuloClusterImpl cluster=SharedMiniClusterBase.getCluster();
    Path base=cluster.getTemporaryPath();
    Path importDir=new Path(base,"importDir");
    Path failuresDir=new Path(base,"failuresDir");
    assertTrue(cluster.getFileSystem().mkdirs(importDir));
    assertTrue(cluster.getFileSystem().mkdirs(failuresDir));
    client.importDirectory(creds,doesNotExist,importDir.toString(),failuresDir.toString(),true);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.listConstraints(creds,doesNotExist);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.listSplits(creds,doesNotExist,10000);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.mergeTablets(creds,doesNotExist,null,null);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.offlineTable(creds,doesNotExist,false);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.onlineTable(creds,doesNotExist,false);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.removeConstraint(creds,doesNotExist,0);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.removeIterator(creds,doesNotExist,"name",EnumSet.allOf(IteratorScope.class));
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.removeTableProperty(creds,doesNotExist,Property.TABLE_FILE_MAX.getKey());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.renameTable(creds,doesNotExist,"someTableName");
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.revokeTablePermission(creds,"root",doesNotExist,TablePermission.ALTER_TABLE);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.setTableProperty(creds,doesNotExist,Property.TABLE_FILE_MAX.getKey(),"0");
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.splitRangeByTablets(creds,doesNotExist,client.getRowRange(ByteBuffer.wrap("row".getBytes(UTF_8))),10);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.updateAndFlush(creds,doesNotExist,new HashMap<ByteBuffer,List<ColumnUpdate>>());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.getDiskUsage(creds,Collections.singleton(doesNotExist));
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.testTableClassLoad(creds,doesNotExist,VersioningIterator.class.getName(),SortedKeyValueIterator.class.getName());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.createConditionalWriter(creds,doesNotExist,new ConditionalWriterOptions());
  }
 catch (  TableNotFoundException ex) {
  }
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void importExportTable() throws Exception {
  String expected[][]=new String[10][];
  for (int i=0; i < 10; i++) {
    client.updateAndFlush(creds,table,mutation("row" + i,"cf","cq","" + i));
    expected[i]=new String[]{"row" + i,"cf","cq","" + i};
    client.flushTable(creds,table,null,null,true);
  }
  assertScan(expected,table);
  MiniAccumuloClusterImpl cluster=SharedMiniClusterBase.getCluster();
  FileSystem fs=cluster.getFileSystem();
  Path base=cluster.getTemporaryPath();
  Path dir=new Path(base,"test");
  assertTrue(fs.mkdirs(dir));
  Path destDir=new Path(base,"test_dest");
  assertTrue(fs.mkdirs(destDir));
  client.offlineTable(creds,table,false);
  client.exportTable(creds,table,dir.toString());
  FSDataInputStream is=fs.open(new Path(dir,"distcp.txt"));
  try (BufferedReader r=new BufferedReader(new InputStreamReader(is,UTF_8))){
    while (true) {
      String line=r.readLine();
      if (line == null)       break;
      Path srcPath=new Path(line);
      FileUtil.copy(fs,srcPath,fs,destDir,false,fs.getConf());
    }
  }
   client.deleteTable(creds,table);
  client.importTable(creds,"testify",destDir.toString());
  assertScan(expected,"testify");
  client.deleteTable(creds,"testify");
  try {
    client.importTable(creds,"testify2",destDir.toString());
    fail();
  }
 catch (  Exception e) {
  }
  assertFalse(client.listTables(creds).contains("testify2"));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testClassLoad() throws Exception {
  assertTrue(client.testClassLoad(creds,DevNull.class.getName(),SortedKeyValueIterator.class.getName()));
  assertFalse(client.testClassLoad(creds,"foo.bar",SortedKeyValueIterator.class.getName()));
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnknownScanner() throws Exception {
  String scanner=client.createScanner(creds,table,null);
  assertFalse(client.hasNext(scanner));
  client.closeScanner(scanner);
  try {
    client.hasNext(scanner);
    fail("exception not thrown");
  }
 catch (  UnknownScanner us) {
  }
  try {
    client.closeScanner(scanner);
    fail("exception not thrown");
  }
 catch (  UnknownScanner us) {
  }
  try {
    client.nextEntry("99999999");
    fail("exception not thrown");
  }
 catch (  UnknownScanner us) {
  }
  try {
    client.nextK("99999999",6);
    fail("exception not thrown");
  }
 catch (  UnknownScanner us) {
  }
  try {
    client.hasNext("99999999");
    fail("exception not thrown");
  }
 catch (  UnknownScanner us) {
  }
  try {
    client.hasNext(UUID.randomUUID().toString());
    fail("exception not thrown");
  }
 catch (  UnknownScanner us) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void tableRenames() throws Exception {
  Map<String,String> tables=client.tableIdMap(creds);
  client.renameTable(creds,table,"bar");
  Map<String,String> tables2=client.tableIdMap(creds);
  assertEquals(tables.get(table),tables2.get("bar"));
  assertTrue(client.tableExists(creds,"bar"));
  assertFalse(client.tableExists(creds,table));
  client.renameTable(creds,"bar",table);
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompactionStrategy() throws Exception {
  File jarDir=new File(System.getProperty("user.dir"),"target");
  assertTrue(jarDir.mkdirs() || jarDir.isDirectory());
  File jarFile=new File(jarDir,"TestCompactionStrat.jar");
  FileUtils.copyInputStreamToFile(Class.class.getResourceAsStream("/TestCompactionStrat.jar"),jarFile);
  client.setProperty(creds,Property.VFS_CONTEXT_CLASSPATH_PROPERTY.getKey() + "context1",jarFile.toString());
  client.setTableProperty(creds,table,Property.TABLE_CLASSPATH.getKey(),"context1");
  client.addSplits(creds,table,Collections.singleton(s2bb("efg")));
  client.updateAndFlush(creds,table,mutation("a","cf","cq","v1"));
  client.flushTable(creds,table,null,null,true);
  client.updateAndFlush(creds,table,mutation("b","cf","cq","v2"));
  client.flushTable(creds,table,null,null,true);
  client.updateAndFlush(creds,table,mutation("y","cf","cq","v1"));
  client.flushTable(creds,table,null,null,true);
  client.updateAndFlush(creds,table,mutation("z","cf","cq","v2"));
  client.flushTable(creds,table,null,null,true);
  assertEquals(4,countFiles(table));
  CompactionStrategyConfig csc=new CompactionStrategyConfig();
  csc.setClassName("org.apache.accumulo.test.EfgCompactionStrat");
  client.compactTable(creds,table,null,null,null,true,true,csc);
  assertEquals(3,countFiles(table));
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void pingTabletServers() throws Exception {
  int tservers=0;
  for (  String tserver : client.getTabletServers(creds)) {
    client.pingTabletServer(creds,tserver);
    tservers++;
  }
  assertTrue(tservers > 0);
}

</code></pre>

<br>
<pre class="type-9 type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userManagement() throws Exception {
  String user;
  ClusterUser otherClient=null;
  ByteBuffer password=s2bb("password");
  if (isKerberosEnabled()) {
    otherClient=getKdc().getClientPrincipal(1);
    user=otherClient.getPrincipal();
  }
 else {
    user=getUniqueNames(1)[0];
  }
  client.createLocalUser(creds,user,password);
  Set<String> users=client.listLocalUsers(creds);
  Set<String> expectedUsers=new HashSet<String>(Arrays.asList(clientPrincipal,user));
  assertTrue("Did not find all expected users: " + expectedUsers,users.containsAll(expectedUsers));
  HashSet<ByteBuffer> auths=new HashSet<ByteBuffer>(Arrays.asList(s2bb("A"),s2bb("B")));
  client.changeUserAuthorizations(creds,user,auths);
  List<ByteBuffer> update=client.getUserAuthorizations(creds,user);
  assertEquals(auths,new HashSet<ByteBuffer>(update));
  if (!isKerberosEnabled()) {
    password=s2bb("");
    client.changeLocalUserPassword(creds,user,password);
    assertTrue(client.authenticateUser(creds,user,s2pp(ByteBufferUtil.toString(password))));
  }
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
    final UserGroupInformation ugi=UserGroupInformation.getCurrentUser();
    TestProxyClient otherProxyClient=null;
    try {
      otherProxyClient=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,ugi);
      otherProxyClient.proxy().login(user,Collections.<String,String>emptyMap());
    }
  finally {
      if (null != otherProxyClient) {
        otherProxyClient.close();
      }
    }
  }
 else {
    client.login(user,s2pp(ByteBufferUtil.toString(password)));
  }
}

</code></pre>

<br>
<pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userPermissions() throws Exception {
  String userName=getUniqueNames(1)[0];
  ClusterUser otherClient=null;
  ByteBuffer password=s2bb("password");
  ByteBuffer user;
  TestProxyClient origProxyClient=null;
  Client origClient=null;
  TestProxyClient userProxyClient=null;
  Client userClient=null;
  if (isKerberosEnabled()) {
    otherClient=getKdc().getClientPrincipal(1);
    userName=otherClient.getPrincipal();
    UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
    final UserGroupInformation ugi=UserGroupInformation.getCurrentUser();
    userProxyClient=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,ugi);
    origProxyClient=proxyClient;
    origClient=client;
    userClient=client=userProxyClient.proxy();
    user=client.login(userName,Collections.<String,String>emptyMap());
  }
 else {
    userName=getUniqueNames(1)[0];
    client.createLocalUser(creds,userName,password);
    user=client.login(userName,s2pp(ByteBufferUtil.toString(password)));
  }
  try {
    client.createTable(user,"fail",true,TimeType.MILLIS);
    fail("should not create the table");
  }
 catch (  AccumuloSecurityException ex) {
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
      client=origClient;
    }
    assertFalse(client.listTables(creds).contains("fail"));
  }
  assertFalse(client.hasSystemPermission(creds,userName,SystemPermission.CREATE_TABLE));
  client.grantSystemPermission(creds,userName,SystemPermission.CREATE_TABLE);
  assertTrue(client.hasSystemPermission(creds,userName,SystemPermission.CREATE_TABLE));
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
    client=userClient;
  }
  client.createTable(user,"success",true,TimeType.MILLIS);
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
    client=origClient;
  }
  assertTrue(client.listTables(creds).contains("success"));
  client.revokeSystemPermission(creds,userName,SystemPermission.CREATE_TABLE);
  assertFalse(client.hasSystemPermission(creds,userName,SystemPermission.CREATE_TABLE));
  try {
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
      client=userClient;
    }
    client.createTable(user,"fail",true,TimeType.MILLIS);
    fail("should not create the table");
  }
 catch (  AccumuloSecurityException ex) {
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
      client=origClient;
    }
    assertFalse(client.listTables(creds).contains("fail"));
  }
  try {
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
      client=userClient;
    }
    String scanner=client.createScanner(user,table,null);
    client.nextK(scanner,100);
    fail("stooge should not read table test");
  }
 catch (  AccumuloSecurityException ex) {
  }
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
    client=origClient;
  }
  assertFalse(client.hasTablePermission(creds,userName,table,TablePermission.READ));
  client.grantTablePermission(creds,userName,table,TablePermission.READ);
  assertTrue(client.hasTablePermission(creds,userName,table,TablePermission.READ));
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
    client=userClient;
  }
  String scanner=client.createScanner(user,table,null);
  client.nextK(scanner,10);
  client.closeScanner(scanner);
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
    client=origClient;
  }
  client.revokeTablePermission(creds,userName,table,TablePermission.READ);
  assertFalse(client.hasTablePermission(creds,userName,table,TablePermission.READ));
  try {
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
      client=userClient;
    }
    scanner=client.createScanner(user,table,null);
    client.nextK(scanner,100);
    fail("stooge should not read table test");
  }
 catch (  AccumuloSecurityException ex) {
  }
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
    client=origClient;
  }
  client.dropLocalUser(creds,userName);
  Set<String> users=client.listLocalUsers(creds);
  assertFalse("Should not see user after they are deleted",users.contains(userName));
  if (isKerberosEnabled()) {
    userProxyClient.close();
    proxyClient=origProxyClient;
    client=origClient;
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void attachIteratorsWithScans() throws Exception {
  if (client.tableExists(creds,"slow")) {
    client.deleteTable(creds,"slow");
  }
  client.createTable(creds,"slow",true,TimeType.MILLIS);
  IteratorSetting setting=new IteratorSetting(100,"slow",SlowIterator.class.getName(),Collections.singletonMap("sleepTime","250"));
  client.attachIterator(creds,"slow",setting,EnumSet.allOf(IteratorScope.class));
  for (int i=0; i < 40; i++) {
    client.updateAndFlush(creds,"slow",mutation("row" + i,"cf","cq","value"));
  }
  Thread t=new Thread(){
    @Override public void run(){
      String scanner;
      TestProxyClient proxyClient2=null;
      try {
        if (isKerberosEnabled()) {
          UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,UserGroupInformation.getCurrentUser());
        }
 else {
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory);
        }
        Client client2=proxyClient2.proxy();
        scanner=client2.createScanner(creds,"slow",null);
        client2.nextK(scanner,10);
        client2.closeScanner(scanner);
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
 finally {
        if (null != proxyClient2) {
          proxyClient2.close();
        }
      }
    }
  }
;
  t.start();
  List<ActiveScan> scans=new ArrayList<ActiveScan>();
  for (int i=0; i < 100 && scans.isEmpty(); i++) {
    for (    String tserver : client.getTabletServers(creds)) {
      List<ActiveScan> scansForServer=client.getActiveScans(creds,tserver);
      for (      ActiveScan scan : scansForServer) {
        if (clientPrincipal.equals(scan.getUser())) {
          scans.add(scan);
        }
      }
      if (!scans.isEmpty())       break;
      sleepUninterruptibly(100,TimeUnit.MILLISECONDS);
    }
  }
  t.join();
  assertFalse("Expected to find scans, but found none",scans.isEmpty());
  boolean found=false;
  Map<String,String> map=null;
  for (int i=0; i < scans.size() && !found; i++) {
    ActiveScan scan=scans.get(i);
    if (clientPrincipal.equals(scan.getUser())) {
      assertTrue(ScanState.RUNNING.equals(scan.getState()) || ScanState.QUEUED.equals(scan.getState()));
      assertEquals(ScanType.SINGLE,scan.getType());
      assertEquals("slow",scan.getTable());
      map=client.tableIdMap(creds);
      assertEquals(map.get("slow"),scan.getExtent().tableId);
      assertTrue(scan.getExtent().endRow == null);
      assertTrue(scan.getExtent().prevEndRow == null);
      found=true;
    }
  }
  assertTrue("Could not find a scan against the 'slow' table",found);
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTableClassLoad() throws Exception {
  assertFalse(client.testTableClassLoad(creds,table,"abc123",SortedKeyValueIterator.class.getName()));
  assertTrue(client.testTableClassLoad(creds,table,VersioningIterator.class.getName(),SortedKeyValueIterator.class.getName()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.TestProxyInstanceOperations </h4><pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void testClassLoad() throws TException {
  assertTrue(tpc.proxy().testClassLoad(userpass,"org.apache.accumulo.core.iterators.user.RegExFilter","org.apache.accumulo.core.iterators.Filter"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.TestProxySecurityOperations </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void systemPermissions() throws TException {
  tpc.proxy().grantSystemPermission(userpass,testuser,SystemPermission.ALTER_USER);
  assertTrue(tpc.proxy().hasSystemPermission(userpass,testuser,SystemPermission.ALTER_USER));
  tpc.proxy().revokeSystemPermission(userpass,testuser,SystemPermission.ALTER_USER);
  assertFalse(tpc.proxy().hasSystemPermission(userpass,testuser,SystemPermission.ALTER_USER));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void auths() throws TException {
  HashSet<ByteBuffer> newauths=new HashSet<ByteBuffer>();
  newauths.add(ByteBuffer.wrap("BBR".getBytes()));
  newauths.add(ByteBuffer.wrap("Barney".getBytes()));
  tpc.proxy().changeUserAuthorizations(userpass,testuser,newauths);
  List<ByteBuffer> actualauths=tpc.proxy().getUserAuthorizations(userpass,testuser);
  assertEquals(actualauths.size(),newauths.size());
  for (  ByteBuffer auth : actualauths) {
    assertTrue(newauths.contains(auth));
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void authenticate() throws TException {
  assertTrue(tpc.proxy().authenticateUser(userpass,testuser,bb2pp(testpw)));
  assertFalse(tpc.proxy().authenticateUser(userpass,"EvilUser",bb2pp(testpw)));
  tpc.proxy().changeLocalUserPassword(userpass,testuser,ByteBuffer.wrap("newpass".getBytes()));
  assertFalse(tpc.proxy().authenticateUser(userpass,testuser,bb2pp(testpw)));
  assertTrue(tpc.proxy().authenticateUser(userpass,testuser,bb2pp(ByteBuffer.wrap("newpass".getBytes()))));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void create() throws TException {
  tpc.proxy().createLocalUser(userpass,testuser + "2",testpw);
  assertTrue(tpc.proxy().listLocalUsers(userpass).contains(testuser + "2"));
  tpc.proxy().dropLocalUser(userpass,testuser + "2");
  assertTrue(!tpc.proxy().listLocalUsers(userpass).contains(testuser + "2"));
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void tablePermissions() throws TException {
  tpc.proxy().grantTablePermission(userpass,testuser,testtable,TablePermission.ALTER_TABLE);
  assertTrue(tpc.proxy().hasTablePermission(userpass,testuser,testtable,TablePermission.ALTER_TABLE));
  tpc.proxy().revokeTablePermission(userpass,testuser,testtable,TablePermission.ALTER_TABLE);
  assertFalse(tpc.proxy().hasTablePermission(userpass,testuser,testtable,TablePermission.ALTER_TABLE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.proxy.TestProxyTableOperations </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void createExistsDelete() throws TException {
  assertFalse(tpc.proxy().tableExists(userpass,"testtable2"));
  tpc.proxy().createTable(userpass,"testtable2",true,TimeType.MILLIS);
  assertTrue(tpc.proxy().tableExists(userpass,"testtable2"));
  tpc.proxy().deleteTable(userpass,"testtable2");
  assertFalse(tpc.proxy().tableExists(userpass,"testtable2"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void splits() throws TException {
  Set<ByteBuffer> splits=new HashSet<ByteBuffer>();
  splits.add(ByteBuffer.wrap("a".getBytes()));
  splits.add(ByteBuffer.wrap("b".getBytes()));
  splits.add(ByteBuffer.wrap("z".getBytes()));
  tpc.proxy().addSplits(userpass,testtable,splits);
  List<ByteBuffer> tableSplits=tpc.proxy().listSplits(userpass,testtable,10);
  for (  ByteBuffer split : tableSplits)   assertTrue(splits.contains(split));
  assertTrue(tableSplits.size() == splits.size());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void merge() throws TException {
  Set<ByteBuffer> splits=new HashSet<ByteBuffer>();
  splits.add(ByteBuffer.wrap("a".getBytes()));
  splits.add(ByteBuffer.wrap("c".getBytes()));
  splits.add(ByteBuffer.wrap("z".getBytes()));
  tpc.proxy().addSplits(userpass,testtable,splits);
  tpc.proxy().mergeTablets(userpass,testtable,ByteBuffer.wrap("b".getBytes()),ByteBuffer.wrap("d".getBytes()));
  splits.remove(ByteBuffer.wrap("c".getBytes()));
  List<ByteBuffer> tableSplits=tpc.proxy().listSplits(userpass,testtable,10);
  for (  ByteBuffer split : tableSplits)   assertTrue(splits.contains(split));
  assertTrue(tableSplits.size() == splits.size());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void localityGroups() throws TException {
  Map<String,Set<String>> groups=new HashMap<String,Set<String>>();
  Set<String> group1=new HashSet<String>();
  group1.add("cf1");
  groups.put("group1",group1);
  Set<String> group2=new HashSet<String>();
  group2.add("cf2");
  group2.add("cf3");
  groups.put("group2",group2);
  tpc.proxy().setLocalityGroups(userpass,testtable,groups);
  Map<String,Set<String>> actualGroups=tpc.proxy().getLocalityGroups(userpass,testtable);
  assertEquals(groups.size(),actualGroups.size());
  for (  String groupName : groups.keySet()) {
    assertTrue(actualGroups.containsKey(groupName));
    assertEquals(groups.get(groupName).size(),actualGroups.get(groupName).size());
    for (    String cf : groups.get(groupName)) {
      assertTrue(actualGroups.get(groupName).contains(cf));
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void listRename() throws TException {
  assertFalse(tpc.proxy().tableExists(userpass,"testtable2"));
  tpc.proxy().renameTable(userpass,testtable,"testtable2");
  assertTrue(tpc.proxy().tableExists(userpass,"testtable2"));
  tpc.proxy().renameTable(userpass,"testtable2",testtable);
  assertTrue(tpc.proxy().listTables(userpass).contains("testtable"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.GarbageCollectorCommunicatesWithTServersIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=2 * 60 * 1000) public void testUnreferencedWalInTserverIsClosed() throws Exception {
  final String[] names=getUniqueNames(2);
  final String table=names[0], otherTable=names[1];
  final Connector conn=getConnector();
  ReplicationTable.setOnline(conn);
  log.info("Creating {}",table);
  conn.tableOperations().create(table);
  conn.tableOperations().setProperty(table,Property.TABLE_REPLICATION.getKey(),"true");
  log.info("Writing a few mutations to the table");
  BatchWriter bw=conn.createBatchWriter(table,null);
  byte[] empty=new byte[0];
  for (int i=0; i < 5; i++) {
    Mutation m=new Mutation(Integer.toString(i));
    m.put(empty,empty,empty);
    bw.addMutation(m);
  }
  log.info("Flushing mutations to the server");
  bw.close();
  log.info("Checking that metadata only has one WAL recorded for this table");
  Set<String> wals=getWalsForTable(table);
  Assert.assertEquals("Expected to only find two WAL for the table",2,wals.size());
  log.info("Compacting the table which will remove all WALs from the tablets");
  conn.tableOperations().flush(table,null,null,true);
  conn.tableOperations().flush(MetadataTable.NAME,null,null,true);
  log.info("Fetching replication statuses from metadata table");
  Map<String,Status> fileToStatus=getMetadataStatusForTable(table);
  Assert.assertEquals("Expected to only find one replication status message",1,fileToStatus.size());
  String walName=fileToStatus.keySet().iterator().next();
  Assert.assertTrue("Expected log file name from tablet to equal replication entry",wals.contains(walName));
  Status status=fileToStatus.get(walName);
  Assert.assertEquals("Expected Status for file to not be closed",false,status.getClosed());
  Set<String> filesForTable=getFilesForTable(table);
  Assert.assertEquals("Expected to only find one rfile for table",1,filesForTable.size());
  log.info("Files for table before MajC: {}",filesForTable);
  conn.tableOperations().compact(table,null,null,false,true);
  Set<String> filesForTableAfterCompaction=getFilesForTable(table);
  log.info("Files for table after MajC: {}",filesForTableAfterCompaction);
  Assert.assertEquals("Expected to only find one rfile for table",1,filesForTableAfterCompaction.size());
  Assert.assertNotEquals("Expected the files before and after compaction to differ",filesForTableAfterCompaction,filesForTable);
  Path fileToBeDeleted=new Path(filesForTable.iterator().next());
  FileSystem fs=getCluster().getFileSystem();
  boolean fileExists=fs.exists(fileToBeDeleted);
  while (fileExists) {
    log.info("File which should get deleted still exists: {}",fileToBeDeleted);
    Thread.sleep(2000);
    fileExists=fs.exists(fileToBeDeleted);
  }
  Map<String,Status> fileToStatusAfterMinc=getMetadataStatusForTable(table);
  Assert.assertEquals("Expected to still find only one replication status message: " + fileToStatusAfterMinc,1,fileToStatusAfterMinc.size());
  conn.tableOperations().create(otherTable);
  bw=conn.createBatchWriter(otherTable,null);
  byte[] bigValue=new byte[1024 * 500];
  Arrays.fill(bigValue,(byte)1);
  for (int i=0; i < 50; i++) {
    Mutation m=new Mutation(Integer.toString(i));
    m.put(empty,empty,bigValue);
    bw.addMutation(m);
    if (i % 10 == 0) {
      bw.flush();
    }
  }
  bw.close();
  conn.tableOperations().flush(otherTable,null,null,true);
  final ClientContext context=new ClientContext(conn.getInstance(),new Credentials("root",new PasswordToken(ConfigurableMacBase.ROOT_PASSWORD)),getClientConfig());
  List<String> tservers=MasterClient.execute(context,new ClientExecReturn<List<String>,MasterClientService.Client>(){
    @Override public List<String> execute(    MasterClientService.Client client) throws Exception {
      return client.getActiveTservers(Tracer.traceInfo(),context.rpcCreds());
    }
  }
);
  Assert.assertEquals("Expected only one active tservers",1,tservers.size());
  HostAndPort tserver=HostAndPort.fromString(tservers.get(0));
  log.info("Fetching active WALs from {}",tserver);
  Client client=ThriftUtil.getTServerClient(tserver,context);
  List<String> activeWalsForTserver=client.getActiveLogs(Tracer.traceInfo(),context.rpcCreds());
  log.info("Active wals: {}",activeWalsForTserver);
  Assert.assertEquals("Expected to find only one active WAL",1,activeWalsForTserver.size());
  String activeWal=new Path(activeWalsForTserver.get(0)).toString();
  Assert.assertNotEquals("Current active WAL on tserver should not be the original WAL we saw",walName,activeWal);
  log.info("Ensuring that replication status does get closed after WAL is no longer in use by Tserver");
  do {
    Map<String,Status> replicationStatuses=getMetadataStatusForTable(table);
    log.info("Got replication status messages {}",replicationStatuses);
    Assert.assertEquals("Did not expect to find additional status records",1,replicationStatuses.size());
    status=replicationStatuses.values().iterator().next();
    log.info("Current status: {}",ProtobufUtil.toString(status));
    if (status.getClosed()) {
      return;
    }
    log.info("Status is not yet closed, waiting for garbage collector to close it");
    Thread.sleep(2000);
  }
 while (true);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.KerberosReplicationIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTable() throws Exception {
  final UserGroupInformation ugi=UserGroupInformation.loginUserFromKeytabAndReturnUGI(rootUser.getPrincipal(),rootUser.getKeytab().toURI().toString());
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      log.info("testing {}",ugi);
      final KerberosToken token=new KerberosToken();
      final Connector primaryConn=primary.getConnector(rootUser.getPrincipal(),token);
      final Connector peerConn=peer.getConnector(rootUser.getPrincipal(),token);
      ClusterUser replicationUser=kdc.getClientPrincipal(0);
      peerConn.securityOperations().createLocalUser(replicationUser.getPrincipal(),null);
      primaryConn.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + PEER_NAME,replicationUser.getPrincipal());
      primaryConn.instanceOperations().setProperty(Property.REPLICATION_PEER_KEYTAB.getKey() + PEER_NAME,replicationUser.getKeytab().getAbsolutePath());
      primaryConn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + PEER_NAME,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerConn.getInstance().getInstanceName(),peerConn.getInstance().getZooKeepers())));
      String primaryTable1="primary", peerTable1="peer";
      primaryConn.tableOperations().create(primaryTable1);
      String masterTableId1=primaryConn.tableOperations().tableIdMap().get(primaryTable1);
      Assert.assertNotNull(masterTableId1);
      peerConn.tableOperations().create(peerTable1);
      String peerTableId1=peerConn.tableOperations().tableIdMap().get(peerTable1);
      Assert.assertNotNull(peerTableId1);
      peerConn.securityOperations().grantTablePermission(replicationUser.getPrincipal(),peerTable1,TablePermission.WRITE);
      primaryConn.tableOperations().setProperty(primaryTable1,Property.TABLE_REPLICATION.getKey(),"true");
      primaryConn.tableOperations().setProperty(primaryTable1,Property.TABLE_REPLICATION_TARGET.getKey() + PEER_NAME,peerTableId1);
      BatchWriter bw=primaryConn.createBatchWriter(primaryTable1,new BatchWriterConfig());
      long masterTable1Records=0l;
      for (int rows=0; rows < 2500; rows++) {
        Mutation m=new Mutation(primaryTable1 + rows);
        for (int cols=0; cols < 100; cols++) {
          String value=Integer.toString(cols);
          m.put(value,"",value);
          masterTable1Records++;
        }
        bw.addMutation(m);
      }
      bw.close();
      log.info("Wrote all data to primary cluster");
      Set<String> filesFor1=primaryConn.replicationOperations().referencedFiles(primaryTable1);
      for (      ProcessReference proc : primary.getProcesses().get(ServerType.TABLET_SERVER)) {
        primary.killProcess(ServerType.TABLET_SERVER,proc);
      }
      primary.exec(TabletServer.class);
      log.info("Restarted the tserver");
      Iterators.size(primaryConn.createScanner(primaryTable1,Authorizations.EMPTY).iterator());
      log.info("Waiting for {} for {}",filesFor1,primaryTable1);
      primaryConn.replicationOperations().drain(primaryTable1,filesFor1);
      long countTable=0l;
      for (      Entry<Key,Value> entry : peerConn.createScanner(peerTable1,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(primaryTable1));
      }
      log.info("Found {} records in {}",countTable,peerTable1);
      Assert.assertEquals(masterTable1Records,countTable);
      return null;
    }
  }
);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.MultiInstanceReplicationIT </h4><pre class="type-9 type-13 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=10 * 60 * 1000) public void dataWasReplicatedToThePeer() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  MiniAccumuloClusterImpl peerCluster=new MiniAccumuloClusterImpl(peerCfg);
  peerCluster.start();
  try {
    final Connector connMaster=getConnector();
    final Connector connPeer=peerCluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    ReplicationTable.setOnline(connMaster);
    String peerUserName="peer", peerPassword="foo";
    String peerClusterName="peer";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerCluster.getInstanceName(),peerCluster.getZooKeepers())));
    final String masterTable="master", peerTable="peer";
    connMaster.tableOperations().create(masterTable);
    String masterTableId=connMaster.tableOperations().tableIdMap().get(masterTable);
    Assert.assertNotNull(masterTableId);
    connPeer.tableOperations().create(peerTable);
    String peerTableId=connPeer.tableOperations().tableIdMap().get(peerTable);
    Assert.assertNotNull(peerTableId);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId);
    BatchWriter bw=connMaster.createBatchWriter(masterTable,new BatchWriterConfig());
    for (int rows=0; rows < 5000; rows++) {
      Mutation m=new Mutation(Integer.toString(rows));
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    final Set<String> filesNeedingReplication=connMaster.replicationOperations().referencedFiles(masterTable);
    log.info("Files to replicate: " + filesNeedingReplication);
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    log.info("TabletServer restarted");
    Iterators.size(ReplicationTable.getScanner(connMaster).iterator());
    log.info("TabletServer is online");
    while (!ReplicationTable.isOnline(connMaster)) {
      log.info("Replication table still offline, waiting");
      Thread.sleep(5000);
    }
    log.info("");
    log.info("Fetching metadata records:");
    for (    Entry<Key,Value> kv : connMaster.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
      if (ReplicationSection.COLF.equals(kv.getKey().getColumnFamily())) {
        log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
      }
 else {
        log.info(kv.getKey().toStringNoTruncate() + " " + kv.getValue());
      }
    }
    log.info("");
    log.info("Fetching replication records:");
    for (    Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
      log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
    }
    Future<Boolean> future=executor.submit(new Callable<Boolean>(){
      @Override public Boolean call() throws Exception {
        long then=System.currentTimeMillis();
        connMaster.replicationOperations().drain(masterTable,filesNeedingReplication);
        long now=System.currentTimeMillis();
        log.info("Drain completed in " + (now - then) + "ms");
        return true;
      }
    }
);
    try {
      future.get(60,TimeUnit.SECONDS);
    }
 catch (    TimeoutException e) {
      future.cancel(true);
      Assert.fail("Drain did not finish within 60 seconds");
    }
 finally {
      executor.shutdownNow();
    }
    log.info("drain completed");
    log.info("");
    log.info("Fetching metadata records:");
    for (    Entry<Key,Value> kv : connMaster.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
      if (ReplicationSection.COLF.equals(kv.getKey().getColumnFamily())) {
        log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
      }
 else {
        log.info(kv.getKey().toStringNoTruncate() + " " + kv.getValue());
      }
    }
    log.info("");
    log.info("Fetching replication records:");
    for (    Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
      log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
    }
    Scanner master=connMaster.createScanner(masterTable,Authorizations.EMPTY), peer=connPeer.createScanner(peerTable,Authorizations.EMPTY);
    Iterator<Entry<Key,Value>> masterIter=master.iterator(), peerIter=peer.iterator();
    Entry<Key,Value> masterEntry=null, peerEntry=null;
    while (masterIter.hasNext() && peerIter.hasNext()) {
      masterEntry=masterIter.next();
      peerEntry=peerIter.next();
      Assert.assertEquals(masterEntry.getKey() + " was not equal to " + peerEntry.getKey(),0,masterEntry.getKey().compareTo(peerEntry.getKey(),PartialKey.ROW_COLFAM_COLQUAL_COLVIS));
      Assert.assertEquals(masterEntry.getValue(),peerEntry.getValue());
    }
    log.info("Last master entry: " + masterEntry);
    log.info("Last peer entry: " + peerEntry);
    Assert.assertFalse("Had more data to read from the master",masterIter.hasNext());
    Assert.assertFalse("Had more data to read from the peer",peerIter.hasNext());
  }
  finally {
    peerCluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataWasReplicatedToThePeerWithoutDrain() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  MiniAccumuloClusterImpl peerCluster=new MiniAccumuloClusterImpl(peerCfg);
  peerCluster.start();
  Connector connMaster=getConnector();
  Connector connPeer=peerCluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
  String peerUserName="repl";
  String peerPassword="passwd";
  connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
  String peerClusterName="peer";
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerCluster.getInstanceName(),peerCluster.getZooKeepers())));
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
  String masterTable="master", peerTable="peer";
  connMaster.tableOperations().create(masterTable);
  String masterTableId=connMaster.tableOperations().tableIdMap().get(masterTable);
  Assert.assertNotNull(masterTableId);
  connPeer.tableOperations().create(peerTable);
  String peerTableId=connPeer.tableOperations().tableIdMap().get(peerTable);
  Assert.assertNotNull(peerTableId);
  connPeer.securityOperations().grantTablePermission(peerUserName,peerTable,TablePermission.WRITE);
  connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION.getKey(),"true");
  connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId);
  BatchWriter bw=connMaster.createBatchWriter(masterTable,new BatchWriterConfig());
  for (int rows=0; rows < 5000; rows++) {
    Mutation m=new Mutation(Integer.toString(rows));
    for (int cols=0; cols < 100; cols++) {
      String value=Integer.toString(cols);
      m.put(value,"",value);
    }
    bw.addMutation(m);
  }
  bw.close();
  log.info("Wrote all data to master cluster");
  Set<String> files=connMaster.replicationOperations().referencedFiles(masterTable);
  log.info("Files to replicate:" + files);
  for (  ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
    cluster.killProcess(ServerType.TABLET_SERVER,proc);
  }
  cluster.exec(TabletServer.class);
  while (!ReplicationTable.isOnline(connMaster)) {
    log.info("Replication table still offline, waiting");
    Thread.sleep(5000);
  }
  Iterators.size(connMaster.createScanner(masterTable,Authorizations.EMPTY).iterator());
  for (  Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
    log.debug(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
  }
  connMaster.replicationOperations().drain(masterTable,files);
  Scanner master=connMaster.createScanner(masterTable,Authorizations.EMPTY), peer=connPeer.createScanner(peerTable,Authorizations.EMPTY);
  Iterator<Entry<Key,Value>> masterIter=master.iterator(), peerIter=peer.iterator();
  while (masterIter.hasNext() && peerIter.hasNext()) {
    Entry<Key,Value> masterEntry=masterIter.next(), peerEntry=peerIter.next();
    Assert.assertEquals(peerEntry.getKey() + " was not equal to " + peerEntry.getKey(),0,masterEntry.getKey().compareTo(peerEntry.getKey(),PartialKey.ROW_COLFAM_COLQUAL_COLVIS));
    Assert.assertEquals(masterEntry.getValue(),peerEntry.getValue());
  }
  Assert.assertFalse("Had more data to read from the master",masterIter.hasNext());
  Assert.assertFalse("Had more data to read from the peer",peerIter.hasNext());
  peerCluster.stop();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTableWithoutDrain() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  MiniAccumuloClusterImpl peer1Cluster=new MiniAccumuloClusterImpl(peerCfg);
  peer1Cluster.start();
  try {
    Connector connMaster=getConnector();
    Connector connPeer=peer1Cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    String peerClusterName="peer";
    String peerUserName="repl";
    String peerPassword="passwd";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peer1Cluster.getInstanceName(),peer1Cluster.getZooKeepers())));
    String masterTable1="master1", peerTable1="peer1", masterTable2="master2", peerTable2="peer2";
    connMaster.tableOperations().create(masterTable1);
    String masterTableId1=connMaster.tableOperations().tableIdMap().get(masterTable1);
    Assert.assertNotNull(masterTableId1);
    connMaster.tableOperations().create(masterTable2);
    String masterTableId2=connMaster.tableOperations().tableIdMap().get(masterTable2);
    Assert.assertNotNull(masterTableId2);
    connPeer.tableOperations().create(peerTable1);
    String peerTableId1=connPeer.tableOperations().tableIdMap().get(peerTable1);
    Assert.assertNotNull(peerTableId1);
    connPeer.tableOperations().create(peerTable2);
    String peerTableId2=connPeer.tableOperations().tableIdMap().get(peerTable2);
    Assert.assertNotNull(peerTableId2);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable1,TablePermission.WRITE);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable2,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId1);
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId2);
    BatchWriter bw=connMaster.createBatchWriter(masterTable1,new BatchWriterConfig());
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable1 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    bw=connMaster.createBatchWriter(masterTable2,new BatchWriterConfig());
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable2 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    while (!ReplicationTable.isOnline(connMaster)) {
      log.info("Replication table still offline, waiting");
      Thread.sleep(5000);
    }
    boolean fullyReplicated=false;
    for (int i=0; i < 10 && !fullyReplicated; i++) {
      sleepUninterruptibly(2,TimeUnit.SECONDS);
      Scanner s=ReplicationTable.getScanner(connMaster);
      WorkSection.limit(s);
      for (      Entry<Key,Value> entry : s) {
        Status status=Status.parseFrom(entry.getValue().get());
        if (StatusUtil.isFullyReplicated(status)) {
          fullyReplicated|=true;
        }
      }
    }
    Assert.assertNotEquals(0,fullyReplicated);
    long countTable=0l;
    for (int i=0; i < 10; i++) {
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable1,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable1));
      }
      log.info("Found {} records in {}",countTable,peerTable1);
      if (0l == countTable) {
        Thread.sleep(5000);
      }
 else {
        break;
      }
    }
    Assert.assertTrue("Found no records in " + peerTable1 + " in the peer cluster",countTable > 0);
    for (int i=0; i < 10; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable2,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable2));
      }
      log.info("Found {} records in {}",countTable,peerTable2);
      if (0l == countTable) {
        Thread.sleep(5000);
      }
 else {
        break;
      }
    }
    Assert.assertTrue("Found no records in " + peerTable2 + " in the peer cluster",countTable > 0);
  }
  finally {
    peer1Cluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTable() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  MiniAccumuloClusterImpl peer1Cluster=new MiniAccumuloClusterImpl(peerCfg);
  peer1Cluster.start();
  try {
    Connector connMaster=getConnector();
    Connector connPeer=peer1Cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    String peerClusterName="peer";
    String peerUserName="peer", peerPassword="foo";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peer1Cluster.getInstanceName(),peer1Cluster.getZooKeepers())));
    String masterTable1="master1", peerTable1="peer1", masterTable2="master2", peerTable2="peer2";
    connMaster.tableOperations().create(masterTable1);
    String masterTableId1=connMaster.tableOperations().tableIdMap().get(masterTable1);
    Assert.assertNotNull(masterTableId1);
    connMaster.tableOperations().create(masterTable2);
    String masterTableId2=connMaster.tableOperations().tableIdMap().get(masterTable2);
    Assert.assertNotNull(masterTableId2);
    connPeer.tableOperations().create(peerTable1);
    String peerTableId1=connPeer.tableOperations().tableIdMap().get(peerTable1);
    Assert.assertNotNull(peerTableId1);
    connPeer.tableOperations().create(peerTable2);
    String peerTableId2=connPeer.tableOperations().tableIdMap().get(peerTable2);
    Assert.assertNotNull(peerTableId2);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable1,TablePermission.WRITE);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable2,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId1);
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId2);
    BatchWriter bw=connMaster.createBatchWriter(masterTable1,new BatchWriterConfig());
    long masterTable1Records=0l;
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable1 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
        masterTable1Records++;
      }
      bw.addMutation(m);
    }
    bw.close();
    bw=connMaster.createBatchWriter(masterTable2,new BatchWriterConfig());
    long masterTable2Records=0l;
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable2 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
        masterTable2Records++;
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    Set<String> filesFor1=connMaster.replicationOperations().referencedFiles(masterTable1), filesFor2=connMaster.replicationOperations().referencedFiles(masterTable2);
    log.info("Files to replicate for table1: " + filesFor1);
    log.info("Files to replicate for table2: " + filesFor2);
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    log.info("Restarted the tserver");
    Iterators.size(connMaster.createScanner(masterTable1,Authorizations.EMPTY).iterator());
    while (!ReplicationTable.isOnline(connMaster)) {
      log.info("Replication table still offline, waiting");
      Thread.sleep(5000);
    }
    log.info("Waiting for {} for {}",filesFor1,masterTable1);
    connMaster.replicationOperations().drain(masterTable1,filesFor1);
    log.info("Waiting for {} for {}",filesFor2,masterTable2);
    connMaster.replicationOperations().drain(masterTable2,filesFor2);
    long countTable=0l;
    for (    Entry<Key,Value> entry : connPeer.createScanner(peerTable1,Authorizations.EMPTY)) {
      countTable++;
      Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable1));
    }
    log.info("Found {} records in {}",countTable,peerTable1);
    Assert.assertEquals(masterTable1Records,countTable);
    countTable=0l;
    for (    Entry<Key,Value> entry : connPeer.createScanner(peerTable2,Authorizations.EMPTY)) {
      countTable++;
      Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable2));
    }
    log.info("Found {} records in {}",countTable,peerTable2);
    Assert.assertEquals(masterTable2Records,countTable);
  }
  finally {
    peer1Cluster.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.RemoveCompleteReplicationRecordsIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void replicatedClosedRowsAreRemoved() throws Exception {
  BatchWriter replBw=ReplicationTable.getBatchWriter(conn);
  int numRecords=3;
  Status.Builder builder=Status.newBuilder();
  builder.setClosed(false);
  builder.setEnd(10000);
  builder.setInfiniteEnd(false);
  long time=System.currentTimeMillis();
  for (int i=0; i < numRecords; i++) {
    builder.setCreatedTime(time++);
    String file="/accumulo/wal/tserver+port/" + UUID.randomUUID();
    Mutation m=new Mutation(file);
    Value v=ProtobufUtil.toValue(builder.setBegin(1000 * (i + 1)).build());
    StatusSection.add(m,new Text(Integer.toString(i)),v);
    replBw.addMutation(m);
    m=OrderSection.createMutation(file,time);
    OrderSection.add(m,new Text(Integer.toString(i)),v);
    replBw.addMutation(m);
  }
  Set<String> filesToRemove=new HashSet<>();
  numRecords*=2;
  int finalNumRecords=numRecords;
  String fileToRemove="/accumulo/wal/tserver+port/" + UUID.randomUUID();
  filesToRemove.add(fileToRemove);
  Mutation m=new Mutation(fileToRemove);
  ReplicationTarget target=new ReplicationTarget("peer1","5","5");
  Value value=ProtobufUtil.toValue(builder.setBegin(10000).setEnd(10000).setClosed(true).setCreatedTime(time).build());
  StatusSection.add(m,new Text("5"),value);
  WorkSection.add(m,target.toText(),value);
  replBw.addMutation(m);
  m=OrderSection.createMutation(fileToRemove,time);
  OrderSection.add(m,new Text("5"),value);
  replBw.addMutation(m);
  time++;
  numRecords+=3;
  fileToRemove="/accumulo/wal/tserver+port/" + UUID.randomUUID();
  filesToRemove.add(fileToRemove);
  m=new Mutation(fileToRemove);
  value=ProtobufUtil.toValue(builder.setBegin(10000).setEnd(10000).setClosed(true).setCreatedTime(time).build());
  target=new ReplicationTarget("peer1","6","6");
  StatusSection.add(m,new Text("6"),value);
  WorkSection.add(m,target.toText(),value);
  replBw.addMutation(m);
  m=OrderSection.createMutation(fileToRemove,time);
  OrderSection.add(m,new Text("6"),value);
  replBw.addMutation(m);
  time++;
  numRecords+=3;
  replBw.flush();
  Assert.assertEquals(numRecords,Iterables.size(ReplicationTable.getScanner(conn)));
  BatchScanner bs=ReplicationTable.getBatchScanner(conn,1);
  bs.setRanges(Collections.singleton(new Range()));
  StatusSection.limit(bs);
  WorkSection.limit(bs);
  IteratorSetting cfg=new IteratorSetting(50,WholeRowIterator.class);
  bs.addScanIterator(cfg);
  try {
    Assert.assertEquals(4l,rcrr.removeCompleteRecords(conn,bs,replBw));
  }
  finally {
    bs.close();
    replBw.close();
  }
  int actualRecords=0;
  for (  Entry<Key,Value> entry : ReplicationTable.getScanner(conn)) {
    Assert.assertFalse(filesToRemove.contains(entry.getKey().getRow().toString()));
    actualRecords++;
  }
  Assert.assertEquals(finalNumRecords,actualRecords);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.ReplicationIT </h4><pre class="type-9 type-13 type-8 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void correctRecordsCompleteFile() throws Exception {
  Connector conn=getConnector();
  String table="table1";
  conn.tableOperations().create(table);
  conn.tableOperations().setProperty(table,Property.TABLE_REPLICATION.getKey(),"true");
  BatchWriter bw=conn.createBatchWriter(table,new BatchWriterConfig());
  for (int i=0; i < 10; i++) {
    Mutation m=new Mutation(Integer.toString(i));
    m.put(new byte[0],new byte[0],new byte[0]);
    bw.addMutation(m);
  }
  bw.close();
  boolean online=ReplicationTable.isOnline(conn);
  int attempts=10;
  do {
    if (!online) {
      sleepUninterruptibly(2,TimeUnit.SECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table was not online",online);
  for (int i=0; i < 5; i++) {
    if (conn.securityOperations().hasTablePermission("root",ReplicationTable.NAME,TablePermission.READ)) {
      break;
    }
    log.info("Could not read replication table, waiting and will retry");
    Thread.sleep(2000);
  }
  Assert.assertTrue("'root' user could not read the replication table",conn.securityOperations().hasTablePermission("root",ReplicationTable.NAME,TablePermission.READ));
  Set<String> replRows=new HashSet<>();
  Scanner scanner;
  attempts=5;
  while (replRows.isEmpty() && attempts > 0) {
    scanner=ReplicationTable.getScanner(conn);
    StatusSection.limit(scanner);
    for (    Entry<Key,Value> entry : scanner) {
      Key k=entry.getKey();
      String fileUri=k.getRow().toString();
      try {
        new URI(fileUri);
      }
 catch (      URISyntaxException e) {
        Assert.fail("Expected a valid URI: " + fileUri);
      }
      replRows.add(fileUri);
    }
  }
  Set<String> wals=new HashSet<>();
  attempts=5;
  Instance i=conn.getInstance();
  ZooReaderWriter zk=new ZooReaderWriter(i.getZooKeepers(),i.getZooKeepersSessionTimeOut(),"");
  while (wals.isEmpty() && attempts > 0) {
    WalStateManager markers=new WalStateManager(i,zk);
    for (    Entry<Path,WalState> entry : markers.getAllState().entrySet()) {
      wals.add(entry.getKey().toString());
    }
    attempts--;
  }
  Assert.assertEquals("Rows found: " + replRows,1,replRows.size());
  replRows.removeAll(wals);
  Assert.assertEquals(2,wals.size());
  Assert.assertEquals(0,replRows.size());
}

</code></pre>

<br>
<pre class="type-9 type-11 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void replicationEntriesPrecludeWalDeletion() throws Exception {
  final Connector conn=getConnector();
  String table1="table1", table2="table2", table3="table3";
  final Multimap<String,String> logs=HashMultimap.create();
  final AtomicBoolean keepRunning=new AtomicBoolean(true);
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      while (keepRunning.get()) {
        try {
          logs.putAll(getAllLogs(conn));
        }
 catch (        Exception e) {
          log.error("Error getting logs",e);
        }
      }
    }
  }
);
  t.start();
  conn.tableOperations().create(table1);
  conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
  conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","1");
  Thread.sleep(2000);
  writeSomeData(conn,table1,200,500);
  conn.tableOperations().create(table2);
  conn.tableOperations().setProperty(table2,Property.TABLE_REPLICATION.getKey(),"true");
  conn.tableOperations().setProperty(table2,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","1");
  Thread.sleep(2000);
  writeSomeData(conn,table2,200,500);
  conn.tableOperations().create(table3);
  conn.tableOperations().setProperty(table3,Property.TABLE_REPLICATION.getKey(),"true");
  conn.tableOperations().setProperty(table3,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","1");
  Thread.sleep(2000);
  writeSomeData(conn,table3,200,500);
  for (  String table : Arrays.asList(table1,table2,table3)) {
    conn.tableOperations().flush(table,null,null,true);
  }
  keepRunning.set(false);
  t.join(5000);
  Thread.sleep(5000);
  Set<String> replFiles=getReferencesToFilesToBeReplicated(conn);
  String replicationTableId=conn.tableOperations().tableIdMap().get(ReplicationTable.NAME);
  Iterator<Entry<String,String>> observedLogs=logs.entries().iterator();
  while (observedLogs.hasNext()) {
    Entry<String,String> observedLog=observedLogs.next();
    if (replicationTableId.equals(observedLog.getValue())) {
      log.info("Removing {} because its tableId is for the replication table",observedLog);
      observedLogs.remove();
    }
  }
  Assert.assertTrue("Metadata log distribution: " + logs + "replFiles "+ replFiles,logs.keySet().containsAll(replFiles));
  Assert.assertTrue("Difference between replication entries and current logs is bigger than one",logs.keySet().size() - replFiles.size() <= 1);
  final Configuration conf=new Configuration();
  for (  String replFile : replFiles) {
    Path p=new Path(replFile);
    FileSystem fs=p.getFileSystem(conf);
    if (!fs.exists(p)) {
      Set<String> currentSet=getReferencesToFilesToBeReplicated(conn);
      log.info("Current references {}",currentSet);
      log.info("Looking for reference to {}",replFile);
      log.info("Contains? {}",currentSet.contains(replFile));
      Assert.assertTrue("File does not exist anymore, it was likely incorrectly garbage collected: " + p,!currentSet.contains(replFile));
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void replicationTableCreated() throws AccumuloException, AccumuloSecurityException {
  Assert.assertTrue(getConnector().tableOperations().exists(ReplicationTable.NAME));
  Assert.assertEquals(ReplicationTable.ID,getConnector().tableOperations().tableIdMap().get(ReplicationTable.NAME));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyReplicationTableConfig() throws AccumuloException, TableNotFoundException, AccumuloSecurityException {
  TableOperations tops=getConnector().tableOperations();
  Map<String,EnumSet<IteratorScope>> iterators=tops.listIterators(ReplicationTable.NAME);
  Assert.assertEquals(1,iterators.size());
  Assert.assertTrue(iterators.containsKey(ReplicationTable.COMBINER_NAME));
  Assert.assertTrue(iterators.get(ReplicationTable.COMBINER_NAME).containsAll(EnumSet.allOf(IteratorScope.class)));
  for (  IteratorScope scope : EnumSet.allOf(IteratorScope.class)) {
    IteratorSetting is=tops.getIteratorSetting(ReplicationTable.NAME,ReplicationTable.COMBINER_NAME,scope);
    Assert.assertEquals(30,is.getPriority());
    Assert.assertEquals(StatusCombiner.class.getName(),is.getIteratorClass());
    Assert.assertEquals(1,is.getOptions().size());
    Assert.assertTrue(is.getOptions().containsKey("columns"));
    String cols=is.getOptions().get("columns");
    Column statusSectionCol=new Column(StatusSection.NAME);
    Column workSectionCol=new Column(WorkSection.NAME);
    Assert.assertEquals(ColumnSet.encodeColumns(statusSectionCol.getColumnFamily(),statusSectionCol.getColumnQualifier()) + "," + ColumnSet.encodeColumns(workSectionCol.getColumnFamily(),workSectionCol.getColumnQualifier()),cols);
  }
  boolean foundLocalityGroups=false;
  boolean foundLocalityGroupDef1=false;
  boolean foundLocalityGroupDef2=false;
  boolean foundFormatter=false;
  Joiner j=Joiner.on(",");
  Function<Text,String> textToString=new Function<Text,String>(){
    @Override public String apply(    Text text){
      return text.toString();
    }
  }
;
  for (  Entry<String,String> p : tops.getProperties(ReplicationTable.NAME)) {
    String key=p.getKey();
    String val=p.getValue();
    if (key.equals(Property.TABLE_FORMATTER_CLASS.getKey()) && val.equals(StatusFormatter.class.getName())) {
      foundFormatter=true;
    }
 else     if (key.equals(Property.TABLE_LOCALITY_GROUPS.getKey()) && val.equals(j.join(ReplicationTable.LOCALITY_GROUPS.keySet()))) {
      foundLocalityGroups=true;
    }
 else     if (key.startsWith(Property.TABLE_LOCALITY_GROUP_PREFIX.getKey())) {
      if (key.equals(Property.TABLE_LOCALITY_GROUP_PREFIX.getKey() + ReplicationTable.STATUS_LG_NAME) && val.equals(j.join(Iterables.transform(ReplicationTable.STATUS_LG_COLFAMS,textToString)))) {
        foundLocalityGroupDef1=true;
      }
 else       if (key.equals(Property.TABLE_LOCALITY_GROUP_PREFIX.getKey() + ReplicationTable.WORK_LG_NAME) && val.equals(j.join(Iterables.transform(ReplicationTable.WORK_LG_COLFAMS,textToString)))) {
        foundLocalityGroupDef2=true;
      }
    }
  }
  Assert.assertTrue(foundLocalityGroups);
  Assert.assertTrue(foundLocalityGroupDef1);
  Assert.assertTrue(foundLocalityGroupDef2);
  Assert.assertTrue(foundFormatter);
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void replicatedStatusEntriesAreDeleted() throws Exception {
  getCluster().getClusterControl().stop(ServerType.GARBAGE_COLLECTOR);
  final Connector conn=getConnector();
  log.info("Got connector to MAC");
  String table1="table1";
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  conn.tableOperations().create(table1);
  int attempts=5;
  while (attempts > 0) {
    try {
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","4");
      conn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + "cluster1",ReplicaSystemFactory.getPeerConfigurationValue(MockReplicaSystem.class,"1000"));
      attempts=0;
    }
 catch (    Exception e) {
      attempts--;
      if (attempts <= 0) {
        throw e;
      }
      sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
    }
  }
  String tableId=conn.tableOperations().tableIdMap().get(table1);
  Assert.assertNotNull("Could not determine table id for " + table1,tableId);
  writeSomeData(conn,table1,2000,50);
  conn.tableOperations().flush(table1,null,null,true);
  boolean online=ReplicationTable.isOnline(conn);
  attempts=10;
  do {
    if (!online) {
      sleepUninterruptibly(1,TimeUnit.SECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table did not exist",online);
  conn.securityOperations().grantTablePermission("root",ReplicationTable.NAME,TablePermission.WRITE);
  log.info("Checking for replication entries in replication");
  Scanner s;
  Set<String> entries=new HashSet<>();
  for (int i=0; i < 5; i++) {
    s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
    s.setRange(ReplicationSection.getRange());
    entries.clear();
    for (    Entry<Key,Value> entry : s) {
      entries.add(entry.getKey().getRow().toString());
      log.info("{}={}",entry.getKey().toStringNoTruncate(),entry.getValue());
    }
    if (!entries.isEmpty()) {
      log.info("Replication entries {}",entries);
      break;
    }
    Thread.sleep(1000);
  }
  Assert.assertFalse("Did not find any replication entries in the replication table",entries.isEmpty());
  boolean notFound=true;
  for (int i=0; i < 10 && notFound; i++) {
    try {
      s=ReplicationTable.getScanner(conn);
      WorkSection.limit(s);
      Entry<Key,Value> e=Iterables.getOnlyElement(s);
      log.info("Found entry: " + e.getKey().toStringNoTruncate());
      Text expectedColqual=new ReplicationTarget("cluster1","4",tableId).toText();
      Assert.assertEquals(expectedColqual,e.getKey().getColumnQualifier());
      notFound=false;
    }
 catch (    NoSuchElementException e) {
    }
catch (    IllegalArgumentException e) {
      s=ReplicationTable.getScanner(conn);
      for (      Entry<Key,Value> content : s) {
        log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
      }
      Assert.fail("Found more than one work section entry");
    }
catch (    RuntimeException e) {
      Throwable cause=e.getCause();
      if (cause instanceof AccumuloSecurityException) {
        AccumuloSecurityException sec=(AccumuloSecurityException)cause;
switch (sec.getSecurityErrorCode()) {
case PERMISSION_DENIED:
          log.warn("Sleeping because permission was denied");
        break;
default :
      throw e;
  }
}
 else {
  throw e;
}
}
Thread.sleep(2000);
}
if (notFound) {
s=ReplicationTable.getScanner(conn);
for (Entry<Key,Value> content : s) {
log.info(content.getKey().toStringNoTruncate() + " => " + ProtobufUtil.toString(Status.parseFrom(content.getValue().get())));
}
Assert.assertFalse("Did not find the work entry for the status entry",notFound);
}
log.info("Killing tserver");
cluster.getClusterControl().stop(ServerType.TABLET_SERVER);
log.info("Starting tserver");
cluster.getClusterControl().start(ServerType.TABLET_SERVER);
log.info("Waiting to read tables");
sleepUninterruptibly(2 * 3,TimeUnit.SECONDS);
for (String table : new String[]{MetadataTable.NAME,table1}) {
Iterators.size(conn.createScanner(table,Authorizations.EMPTY).iterator());
}
log.info("Recovered metadata:");
s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
for (Entry<Key,Value> entry : s) {
log.info("{}={}",entry.getKey().toStringNoTruncate(),entry.getValue());
}
cluster.getClusterControl().start(ServerType.GARBAGE_COLLECTOR);
waitForGCLock(conn);
Thread.sleep(1000);
log.info("After GC");
s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
for (Entry<Key,Value> entry : s) {
log.info("{}={}",entry.getKey().toStringNoTruncate(),entry.getValue());
}
log.info("Checking metadata table for replication entries");
Set<String> remaining=new HashSet<>();
for (int i=0; i < 10; i++) {
s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
s.setRange(ReplicationSection.getRange());
remaining.clear();
for (Entry<Key,Value> e : s) {
remaining.add(e.getKey().getRow().toString());
}
remaining.retainAll(entries);
if (remaining.isEmpty()) {
break;
}
log.info("remaining {}",remaining);
Thread.sleep(2000);
log.info("");
}
Assert.assertTrue("Replication status messages were not cleaned up from metadata table",remaining.isEmpty());
int recordsFound=0;
for (int i=0; i < 30; i++) {
s=ReplicationTable.getScanner(conn);
recordsFound=0;
for (Entry<Key,Value> entry : s) {
recordsFound++;
log.info("{} {}",entry.getKey().toStringNoTruncate(),ProtobufUtil.toString(Status.parseFrom(entry.getValue().get())));
}
if (recordsFound <= 2) {
break;
}
 else {
Thread.sleep(1000);
log.info("");
}
}
Assert.assertTrue("Found unexpected replication records in the replication table",recordsFound <= 2);
}

</code></pre>

<br>
<pre class="type-9 type-11 type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void replicationRecordsAreClosedAfterGarbageCollection() throws Exception {
  getCluster().getClusterControl().stop(ServerType.GARBAGE_COLLECTOR);
  final Connector conn=getConnector();
  ReplicationTable.setOnline(conn);
  conn.securityOperations().grantTablePermission("root",ReplicationTable.NAME,TablePermission.WRITE);
  conn.tableOperations().deleteRows(ReplicationTable.NAME,null,null);
  final AtomicBoolean keepRunning=new AtomicBoolean(true);
  final Set<String> metadataWals=new HashSet<>();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      while (keepRunning.get()) {
        try {
          metadataWals.addAll(getLogs(conn).keySet());
        }
 catch (        Exception e) {
          log.error("Metadata table doesn't exist");
        }
      }
    }
  }
);
  t.start();
  String table1="table1", table2="table2", table3="table3";
  try {
    conn.tableOperations().create(table1);
    conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
    conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","1");
    conn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + "cluster1",ReplicaSystemFactory.getPeerConfigurationValue(MockReplicaSystem.class,null));
    writeSomeData(conn,table1,200,500);
    conn.tableOperations().create(table2);
    conn.tableOperations().setProperty(table2,Property.TABLE_REPLICATION.getKey(),"true");
    conn.tableOperations().setProperty(table2,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","1");
    writeSomeData(conn,table2,200,500);
    conn.tableOperations().create(table3);
    conn.tableOperations().setProperty(table3,Property.TABLE_REPLICATION.getKey(),"true");
    conn.tableOperations().setProperty(table3,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","1");
    writeSomeData(conn,table3,200,500);
    for (    String table : Arrays.asList(table1,table2,table3)) {
      conn.tableOperations().compact(table,null,null,true,true);
    }
  }
  finally {
    keepRunning.set(false);
    t.join(5000);
    Assert.assertFalse(t.isAlive());
  }
  cluster.getClusterControl().stop(ServerType.TABLET_SERVER);
  cluster.getClusterControl().start(ServerType.TABLET_SERVER);
  for (  String table : Arrays.asList(table1,table2,table3)) {
    Iterators.size(conn.createScanner(table,Authorizations.EMPTY).iterator());
  }
  Process gc=cluster.exec(SimpleGarbageCollector.class);
  waitForGCLock(conn);
  Thread.sleep(1000);
  log.info("GC is up and should have had time to run at least once by now");
  try {
    boolean allClosed=true;
    for (int i=0; i < 10; i++) {
      Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
      s.setRange(Range.prefix(ReplicationSection.getRowPrefix()));
      Iterator<Entry<Key,Value>> iter=s.iterator();
      long recordsFound=0l;
      while (allClosed && iter.hasNext()) {
        Entry<Key,Value> entry=iter.next();
        String wal=entry.getKey().getRow().toString();
        if (metadataWals.contains(wal)) {
          Status status=Status.parseFrom(entry.getValue().get());
          log.info("{}={}",entry.getKey().toStringNoTruncate(),ProtobufUtil.toString(status));
          allClosed&=status.getClosed();
          recordsFound++;
        }
      }
      log.info("Found {} records from the metadata table",recordsFound);
      if (allClosed) {
        break;
      }
      sleepUninterruptibly(2,TimeUnit.SECONDS);
    }
    if (!allClosed) {
      Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
      s.setRange(Range.prefix(ReplicationSection.getRowPrefix()));
      for (      Entry<Key,Value> entry : s) {
        log.info(entry.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(entry.getValue().get())));
      }
      Assert.fail("Expected all replication records in the metadata table to be closed");
    }
    for (int i=0; i < 10; i++) {
      allClosed=true;
      Scanner s=ReplicationTable.getScanner(conn);
      Iterator<Entry<Key,Value>> iter=s.iterator();
      long recordsFound=0l;
      while (allClosed && iter.hasNext()) {
        Entry<Key,Value> entry=iter.next();
        String wal=entry.getKey().getRow().toString();
        if (metadataWals.contains(wal)) {
          Status status=Status.parseFrom(entry.getValue().get());
          log.info("{}={}",entry.getKey().toStringNoTruncate(),ProtobufUtil.toString(status));
          allClosed&=status.getClosed();
          recordsFound++;
        }
      }
      log.info("Found {} records from the replication table",recordsFound);
      if (allClosed) {
        break;
      }
      sleepUninterruptibly(3,TimeUnit.SECONDS);
    }
    if (!allClosed) {
      Scanner s=ReplicationTable.getScanner(conn);
      StatusSection.limit(s);
      for (      Entry<Key,Value> entry : s) {
        log.info(entry.getKey().toStringNoTruncate() + " " + TextFormat.shortDebugString(Status.parseFrom(entry.getValue().get())));
      }
      Assert.fail("Expected all replication records in the replication table to be closed");
    }
  }
  finally {
    gc.destroy();
    gc.waitFor();
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void twoEntriesForTwoTables() throws Exception {
  Connector conn=getConnector();
  String table1="table1", table2="table2";
  Assert.assertFalse("Replication table already online at the beginning of the test",ReplicationTable.isOnline(conn));
  conn.tableOperations().create(table1);
  conn.tableOperations().create(table2);
  conn.securityOperations().grantTablePermission("root",ReplicationTable.NAME,TablePermission.READ);
  Thread.sleep(5000);
  conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  writeSomeData(conn,table1,50,50);
  boolean online=ReplicationTable.isOnline(conn);
  int attempts=10;
  do {
    if (!online) {
      sleepUninterruptibly(5,TimeUnit.SECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table did not exist",online);
  Assert.assertTrue(ReplicationTable.isOnline(conn));
  Scanner s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  for (int i=0; i < 5; i++) {
    if (Iterators.size(s.iterator()) == 1) {
      break;
    }
    Thread.sleep(1000);
  }
  Entry<Key,Value> entry=Iterators.getOnlyElement(s.iterator());
  Assert.assertEquals("Expected to find replication entry for " + table1,conn.tableOperations().tableIdMap().get(table1),entry.getKey().getColumnQualifier().toString());
  s.close();
  conn.tableOperations().setProperty(table2,Property.TABLE_REPLICATION.getKey(),"true");
  writeSomeData(conn,table2,50,50);
  Set<String> tableIds=Sets.newHashSet(conn.tableOperations().tableIdMap().get(table1),conn.tableOperations().tableIdMap().get(table2));
  Set<String> tableIdsForMetadata=Sets.newHashSet(tableIds);
  List<Entry<Key,Value>> records=new ArrayList<>();
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.ReplicationSection.getRange());
  for (  Entry<Key,Value> metadata : s) {
    records.add(metadata);
    log.debug("Meta: {} => {}",metadata.getKey().toStringNoTruncate(),metadata.getValue().toString());
  }
  Assert.assertEquals("Expected to find 2 records, but actually found " + records,2,records.size());
  for (  Entry<Key,Value> metadata : records) {
    Assert.assertTrue("Expected record to be in metadata but wasn't " + metadata.getKey().toStringNoTruncate() + ", tableIds remaining "+ tableIdsForMetadata,tableIdsForMetadata.remove(metadata.getKey().getColumnQualifier().toString()));
  }
  Assert.assertTrue("Expected that we had removed all metadata entries " + tableIdsForMetadata,tableIdsForMetadata.isEmpty());
  Thread.sleep(5000);
  s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  Iterator<Entry<Key,Value>> iter=s.iterator();
  Assert.assertTrue("Found no records in replication table",iter.hasNext());
  entry=iter.next();
  Assert.assertTrue("Expected to find element in replication table",tableIds.remove(entry.getKey().getColumnQualifier().toString()));
  Assert.assertTrue("Expected to find two elements in replication table, only found one ",iter.hasNext());
  entry=iter.next();
  Assert.assertTrue("Expected to find element in replication table",tableIds.remove(entry.getKey().getColumnQualifier().toString()));
  Assert.assertFalse("Expected to only find two elements in replication table",iter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void correctClusterNameInWorkEntry() throws Exception {
  Connector conn=getConnector();
  String table1="table1";
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  conn.tableOperations().create(table1);
  int attempts=5;
  while (attempts > 0) {
    try {
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","4");
      attempts=0;
    }
 catch (    Exception e) {
      attempts--;
      if (attempts <= 0) {
        throw e;
      }
      sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
    }
  }
  writeSomeData(conn,table1,2000,50);
  conn.tableOperations().flush(table1,null,null,true);
  String tableId=conn.tableOperations().tableIdMap().get(table1);
  Assert.assertNotNull("Table ID was null",tableId);
  boolean online=ReplicationTable.isOnline(conn);
  attempts=5;
  do {
    if (!online) {
      sleepUninterruptibly(500,TimeUnit.MILLISECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table did not exist",online);
  for (int i=0; i < 5 && !conn.securityOperations().hasTablePermission("root",ReplicationTable.NAME,TablePermission.READ); i++) {
    Thread.sleep(1000);
  }
  Assert.assertTrue(conn.securityOperations().hasTablePermission("root",ReplicationTable.NAME,TablePermission.READ));
  boolean notFound=true;
  Scanner s;
  for (int i=0; i < 10 && notFound; i++) {
    s=ReplicationTable.getScanner(conn);
    WorkSection.limit(s);
    try {
      Entry<Key,Value> e=Iterables.getOnlyElement(s);
      Text expectedColqual=new ReplicationTarget("cluster1","4",tableId).toText();
      Assert.assertEquals(expectedColqual,e.getKey().getColumnQualifier());
      notFound=false;
    }
 catch (    NoSuchElementException e) {
    }
catch (    IllegalArgumentException e) {
      s=ReplicationTable.getScanner(conn);
      for (      Entry<Key,Value> content : s) {
        log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
      }
      Assert.fail("Found more than one work section entry");
    }
    Thread.sleep(500);
  }
  if (notFound) {
    s=ReplicationTable.getScanner(conn);
    for (    Entry<Key,Value> content : s) {
      log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
    }
    Assert.assertFalse("Did not find the work entry for the status entry",notFound);
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void noRecordsWithoutReplication() throws Exception {
  Connector conn=getConnector();
  List<String> tables=new ArrayList<>();
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  for (int i=0; i < 5; i++) {
    String name="table" + i;
    tables.add(name);
    conn.tableOperations().create(name);
  }
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  for (  String table : tables) {
    writeSomeData(conn,table,5,5);
  }
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  for (  String table : tables) {
    conn.tableOperations().compact(table,null,null,true,true);
  }
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  for (  String table : tables) {
    conn.tableOperations().delete(table);
  }
  Assert.assertFalse(ReplicationTable.isOnline(conn));
}

</code></pre>

<br>
<pre class="type-9 type-13 type-11 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void singleTableWithSingleTarget() throws Exception {
  getCluster().getClusterControl().stop(ServerType.GARBAGE_COLLECTOR);
  Connector conn=getConnector();
  String table1="table1";
  Assert.assertFalse(ReplicationTable.isOnline(conn));
  conn.tableOperations().create(table1);
  int attempts=10;
  while (attempts > 0) {
    try {
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION.getKey(),"true");
      conn.tableOperations().setProperty(table1,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","4");
      conn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + "cluster1",ReplicaSystemFactory.getPeerConfigurationValue(MockReplicaSystem.class,"100000"));
      break;
    }
 catch (    Exception e) {
      attempts--;
      if (attempts <= 0) {
        throw e;
      }
      sleepUninterruptibly(2,TimeUnit.SECONDS);
    }
  }
  writeSomeData(conn,table1,2000,50);
  boolean online=ReplicationTable.isOnline(conn);
  attempts=10;
  do {
    if (!online) {
      sleepUninterruptibly(2,TimeUnit.SECONDS);
      online=ReplicationTable.isOnline(conn);
      attempts--;
    }
  }
 while (!online && attempts > 0);
  Assert.assertTrue("Replication table was never created",online);
  for (int i=0; i < 10 && !conn.tableOperations().listIterators(ReplicationTable.NAME).keySet().contains(ReplicationTable.COMBINER_NAME); i++) {
    sleepUninterruptibly(2,TimeUnit.SECONDS);
  }
  Assert.assertTrue("Combiner was never set on replication table",conn.tableOperations().listIterators(ReplicationTable.NAME).keySet().contains(ReplicationTable.COMBINER_NAME));
  conn.tableOperations().flush(table1,null,null,true);
  Scanner s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  Entry<Key,Value> entry=null;
  Status expectedStatus=StatusUtil.openWithUnknownLength();
  attempts=10;
  while (null == entry && attempts > 0) {
    try {
      entry=Iterables.getOnlyElement(s);
      Status actual=Status.parseFrom(entry.getValue().get());
      if (actual.getInfiniteEnd() != expectedStatus.getInfiniteEnd()) {
        entry=null;
        Thread.sleep(1000);
      }
    }
 catch (    NoSuchElementException e) {
      entry=null;
      Thread.sleep(500);
    }
catch (    IllegalArgumentException e) {
      s=ReplicationTable.getScanner(conn);
      StatusSection.limit(s);
      for (      Entry<Key,Value> content : s) {
        log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
      }
      throw e;
    }
 finally {
      attempts--;
    }
  }
  Assert.assertNotNull("Could not find expected entry in replication table",entry);
  Status actual=Status.parseFrom(entry.getValue().get());
  Assert.assertTrue("Expected to find a replication entry that is open with infinite length: " + ProtobufUtil.toString(actual),!actual.getClosed() && actual.getInfiniteEnd());
  boolean notFound=true;
  for (int i=0; i < 10 && notFound; i++) {
    s=ReplicationTable.getScanner(conn);
    WorkSection.limit(s);
    int elementsFound=Iterables.size(s);
    if (0 < elementsFound) {
      Assert.assertEquals(1,elementsFound);
      notFound=false;
    }
    Thread.sleep(500);
  }
  if (notFound) {
    s=ReplicationTable.getScanner(conn);
    for (    Entry<Key,Value> content : s) {
      log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
    }
    Assert.assertFalse("Did not find the work entry for the status entry",notFound);
  }
  writeSomeData(conn,table1,3000,50);
  log.info("Issued compaction for table");
  conn.tableOperations().compact(table1,null,null,true,true);
  log.info("Compaction completed");
  Thread.sleep(5000);
  s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  int numRecords=0;
  for (  Entry<Key,Value> e : s) {
    numRecords++;
    log.info("Found status record {}\t{}",e.getKey().toStringNoTruncate(),ProtobufUtil.toString(Status.parseFrom(e.getValue().get())));
  }
  Assert.assertEquals(2,numRecords);
  notFound=true;
  for (int i=0; i < 10 && notFound; i++) {
    s=ReplicationTable.getScanner(conn);
    WorkSection.limit(s);
    int elementsFound=Iterables.size(s);
    if (2 == elementsFound) {
      notFound=false;
    }
    Thread.sleep(500);
  }
  if (notFound) {
    s=ReplicationTable.getScanner(conn);
    for (    Entry<Key,Value> content : s) {
      log.info(content.getKey().toStringNoTruncate() + " => " + content.getValue());
    }
    Assert.assertFalse("Did not find the work entries for the status entries",notFound);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.ReplicationOperationsImplIT </h4><pre class="type-8 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void laterCreatedLogsDontBlockExecution() throws Exception {
  conn.tableOperations().create("foo");
  Text tableId1=new Text(conn.tableOperations().tableIdMap().get("foo"));
  String file1="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  Status stat=Status.newBuilder().setBegin(0).setEnd(10000).setInfiniteEnd(false).setClosed(false).build();
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  Mutation m=new Mutation(file1);
  StatusSection.add(m,tableId1,ProtobufUtil.toValue(stat));
  bw.addMutation(m);
  bw.close();
  bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  m=new Mutation(ReplicationSection.getRowPrefix() + file1);
  m.put(ReplicationSection.COLF,tableId1,ProtobufUtil.toValue(stat));
  bw.addMutation(m);
  bw.close();
  log.info("Reading metadata first time");
  for (  Entry<Key,Value> e : conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
    log.info("{}",e.getKey());
  }
  final AtomicBoolean done=new AtomicBoolean(false);
  final AtomicBoolean exception=new AtomicBoolean(false);
  final ReplicationOperationsImpl roi=getReplicationOperations();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        roi.drain("foo");
      }
 catch (      Exception e) {
        log.error("Got error",e);
        exception.set(true);
      }
      done.set(true);
    }
  }
);
  t.start();
  Thread.sleep(2000);
  bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  m=new Mutation(ReplicationSection.getRowPrefix() + "/accumulo/wals/tserver+port/" + UUID.randomUUID());
  m.put(ReplicationSection.COLF,tableId1,ProtobufUtil.toValue(stat));
  bw.addMutation(m);
  m=new Mutation(ReplicationSection.getRowPrefix() + file1);
  m.putDelete(ReplicationSection.COLF,tableId1);
  bw.addMutation(m);
  bw.close();
  log.info("Reading metadata second time");
  for (  Entry<Key,Value> e : conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
    log.info("{}",e.getKey());
  }
  bw=ReplicationTable.getBatchWriter(conn);
  m=new Mutation(file1);
  m.putDelete(StatusSection.NAME,tableId1);
  bw.addMutation(m);
  bw.close();
  try {
    t.join(5000);
  }
 catch (  InterruptedException e) {
    Assert.fail("ReplicationOperations.drain did not complete");
  }
  Assert.assertTrue("Drain didn't finish",done.get());
}

</code></pre>

<br>
<pre class="type-8 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void inprogressReplicationRecordsBlockExecution() throws Exception {
  conn.tableOperations().create("foo");
  Text tableId1=new Text(conn.tableOperations().tableIdMap().get("foo"));
  String file1="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  Status stat=Status.newBuilder().setBegin(0).setEnd(10000).setInfiniteEnd(false).setClosed(false).build();
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  Mutation m=new Mutation(file1);
  StatusSection.add(m,tableId1,ProtobufUtil.toValue(stat));
  bw.addMutation(m);
  bw.close();
  LogEntry logEntry=new LogEntry(new KeyExtent(new Text(tableId1),null,null),System.currentTimeMillis(),"tserver",file1);
  bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  m=new Mutation(ReplicationSection.getRowPrefix() + file1);
  m.put(ReplicationSection.COLF,tableId1,ProtobufUtil.toValue(stat));
  bw.addMutation(m);
  m=new Mutation(logEntry.getRow());
  m.put(logEntry.getColumnFamily(),logEntry.getColumnQualifier(),logEntry.getValue());
  bw.addMutation(m);
  bw.close();
  final AtomicBoolean done=new AtomicBoolean(false);
  final AtomicBoolean exception=new AtomicBoolean(false);
  final ReplicationOperationsImpl roi=getReplicationOperations();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        roi.drain("foo");
      }
 catch (      Exception e) {
        log.error("Got error",e);
        exception.set(true);
      }
      done.set(true);
    }
  }
);
  t.start();
  Assert.assertFalse(done.get());
  Status newStatus=Status.newBuilder().setBegin(1000).setEnd(2000).setInfiniteEnd(false).setClosed(true).build();
  bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  m=new Mutation(ReplicationSection.getRowPrefix() + file1);
  m.put(ReplicationSection.COLF,tableId1,ProtobufUtil.toValue(newStatus));
  bw.addMutation(m);
  bw.flush();
  Assert.assertFalse(done.get());
  bw=ReplicationTable.getBatchWriter(conn);
  m=new Mutation(file1);
  m.put(StatusSection.NAME,tableId1,ProtobufUtil.toValue(newStatus));
  bw.addMutation(m);
  bw.flush();
  try {
    t.join(5000);
  }
 catch (  InterruptedException e) {
    Assert.fail("ReplicationOperations.drain did not complete");
  }
  Assert.assertFalse("Drain somehow finished",done.get());
  Assert.assertFalse("Saw unexpected exception",exception.get());
}

</code></pre>

<br>
<pre class="type-8 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void unrelatedReplicationRecordsDontBlockDrain() throws Exception {
  conn.tableOperations().create("foo");
  conn.tableOperations().create("bar");
  Text tableId1=new Text(conn.tableOperations().tableIdMap().get("foo"));
  Text tableId2=new Text(conn.tableOperations().tableIdMap().get("bar"));
  String file1="/accumulo/wals/tserver+port/" + UUID.randomUUID(), file2="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  Status stat=Status.newBuilder().setBegin(0).setEnd(10000).setInfiniteEnd(false).setClosed(false).build();
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  Mutation m=new Mutation(file1);
  StatusSection.add(m,tableId1,ProtobufUtil.toValue(stat));
  bw.addMutation(m);
  m=new Mutation(file2);
  StatusSection.add(m,tableId2,ProtobufUtil.toValue(stat));
  bw.addMutation(m);
  bw.close();
  bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  m=new Mutation(ReplicationSection.getRowPrefix() + file1);
  m.put(ReplicationSection.COLF,tableId1,ProtobufUtil.toValue(stat));
  bw.addMutation(m);
  m=new Mutation(ReplicationSection.getRowPrefix() + file2);
  m.put(ReplicationSection.COLF,tableId2,ProtobufUtil.toValue(stat));
  bw.close();
  final AtomicBoolean done=new AtomicBoolean(false);
  final AtomicBoolean exception=new AtomicBoolean(false);
  final ReplicationOperationsImpl roi=getReplicationOperations();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        roi.drain("foo");
      }
 catch (      Exception e) {
        log.error("Got error",e);
        exception.set(true);
      }
      done.set(true);
    }
  }
);
  t.start();
  Assert.assertFalse(done.get());
  bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  m=new Mutation(ReplicationSection.getRowPrefix() + file1);
  m.putDelete(ReplicationSection.COLF,tableId1);
  bw.addMutation(m);
  bw.flush();
  Assert.assertFalse(done.get());
  bw=ReplicationTable.getBatchWriter(conn);
  m=new Mutation(file1);
  m.putDelete(StatusSection.NAME,tableId1);
  bw.addMutation(m);
  bw.flush();
  try {
    t.join(5000);
  }
 catch (  InterruptedException e) {
    Assert.fail("ReplicationOperations.drain did not complete");
  }
  Assert.assertTrue("Drain never completed",done.get());
  Assert.assertFalse("Saw unexpected exception",exception.get());
}

</code></pre>

<br>
<pre class="type-8 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void waitsUntilEntriesAreReplicated() throws Exception {
  conn.tableOperations().create("foo");
  Text tableId=new Text(conn.tableOperations().tableIdMap().get("foo"));
  String file1="/accumulo/wals/tserver+port/" + UUID.randomUUID(), file2="/accumulo/wals/tserver+port/" + UUID.randomUUID();
  Status stat=Status.newBuilder().setBegin(0).setEnd(10000).setInfiniteEnd(false).setClosed(false).build();
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  Mutation m=new Mutation(file1);
  StatusSection.add(m,tableId,ProtobufUtil.toValue(stat));
  bw.addMutation(m);
  m=new Mutation(file2);
  StatusSection.add(m,tableId,ProtobufUtil.toValue(stat));
  bw.addMutation(m);
  bw.close();
  bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  m=new Mutation(ReplicationSection.getRowPrefix() + file1);
  m.put(ReplicationSection.COLF,tableId,ProtobufUtil.toValue(stat));
  bw.addMutation(m);
  m=new Mutation(ReplicationSection.getRowPrefix() + file2);
  m.put(ReplicationSection.COLF,tableId,ProtobufUtil.toValue(stat));
  bw.close();
  final AtomicBoolean done=new AtomicBoolean(false);
  final AtomicBoolean exception=new AtomicBoolean(false);
  final ReplicationOperationsImpl roi=getReplicationOperations();
  Thread t=new Thread(new Runnable(){
    @Override public void run(){
      try {
        roi.drain("foo");
      }
 catch (      Exception e) {
        log.error("Got error",e);
        exception.set(true);
      }
      done.set(true);
    }
  }
);
  t.start();
  Assert.assertFalse(done.get());
  bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  m=new Mutation(ReplicationSection.getRowPrefix() + file1);
  m.putDelete(ReplicationSection.COLF,tableId);
  bw.addMutation(m);
  bw.flush();
  Assert.assertFalse(done.get());
  m=new Mutation(ReplicationSection.getRowPrefix() + file2);
  m.putDelete(ReplicationSection.COLF,tableId);
  bw.addMutation(m);
  bw.flush();
  bw.close();
  Assert.assertFalse(done.get());
  bw=ReplicationTable.getBatchWriter(conn);
  m=new Mutation(file1);
  m.putDelete(StatusSection.NAME,tableId);
  bw.addMutation(m);
  bw.flush();
  Assert.assertFalse(done.get());
  m=new Mutation(file2);
  m.putDelete(StatusSection.NAME,tableId);
  bw.addMutation(m);
  bw.flush();
  try {
    t.join(5000);
  }
 catch (  InterruptedException e) {
    Assert.fail("ReplicationOperations.drain did not complete");
  }
  Assert.assertTrue("Drain never finished",done.get());
  Assert.assertFalse("Saw unexpectetd exception",exception.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.SequentialWorkAssignerIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void workAcrossPeersHappensConcurrently() throws Exception {
  ReplicationTarget target1=new ReplicationTarget("cluster1","table1","1");
  Text serializedTarget1=target1.toText();
  ReplicationTarget target2=new ReplicationTarget("cluster2","table1","1");
  Text serializedTarget2=target2.toText();
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  String filename1="z_file1", filename2="a_file1";
  String file1="/accumulo/wal/tserver+port/" + filename1, file2="/accumulo/wal/tserver+port/" + filename2;
  Status stat1=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(250).build();
  Status stat2=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(500).build();
  Mutation m=new Mutation(file1);
  WorkSection.add(m,serializedTarget1,ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=new Mutation(file2);
  WorkSection.add(m,serializedTarget2,ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  m=OrderSection.createMutation(file1,stat1.getCreatedTime());
  OrderSection.add(m,new Text(target1.getSourceTableId()),ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=OrderSection.createMutation(file2,stat2.getCreatedTime());
  OrderSection.add(m,new Text(target2.getSourceTableId()),ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  bw.close();
  DistributedWorkQueue workQueue=createMock(DistributedWorkQueue.class);
  Map<String,Map<String,String>> queuedWork=new HashMap<>();
  assigner.setQueuedWork(queuedWork);
  assigner.setWorkQueue(workQueue);
  assigner.setMaxQueueSize(Integer.MAX_VALUE);
  workQueue.addWork(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target1),file1);
  expectLastCall().once();
  workQueue.addWork(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename2,target2),file2);
  expectLastCall().once();
  replay(workQueue);
  assigner.createWork();
  verify(workQueue);
  Assert.assertEquals(2,queuedWork.size());
  Assert.assertTrue(queuedWork.containsKey("cluster1"));
  Map<String,String> cluster1Work=queuedWork.get("cluster1");
  Assert.assertEquals(1,cluster1Work.size());
  Assert.assertTrue(cluster1Work.containsKey(target1.getSourceTableId()));
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target1),cluster1Work.get(target1.getSourceTableId()));
  Map<String,String> cluster2Work=queuedWork.get("cluster2");
  Assert.assertEquals(1,cluster2Work.size());
  Assert.assertTrue(cluster2Work.containsKey(target2.getSourceTableId()));
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename2,target2),cluster2Work.get(target2.getSourceTableId()));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createWorkForFilesInCorrectOrder() throws Exception {
  ReplicationTarget target=new ReplicationTarget("cluster1","table1","1");
  Text serializedTarget=target.toText();
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  String filename1="z_file1", filename2="a_file1";
  String file1="/accumulo/wal/tserver+port/" + filename1, file2="/accumulo/wal/tserver+port/" + filename2;
  Status stat1=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(250).build();
  Status stat2=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(500).build();
  Mutation m=new Mutation(file1);
  WorkSection.add(m,serializedTarget,ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=new Mutation(file2);
  WorkSection.add(m,serializedTarget,ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  m=OrderSection.createMutation(file1,stat1.getCreatedTime());
  OrderSection.add(m,new Text(target.getSourceTableId()),ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=OrderSection.createMutation(file2,stat2.getCreatedTime());
  OrderSection.add(m,new Text(target.getSourceTableId()),ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  bw.close();
  DistributedWorkQueue workQueue=createMock(DistributedWorkQueue.class);
  Map<String,Map<String,String>> queuedWork=new HashMap<>();
  assigner.setQueuedWork(queuedWork);
  assigner.setWorkQueue(workQueue);
  assigner.setMaxQueueSize(Integer.MAX_VALUE);
  workQueue.addWork(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target),file1);
  expectLastCall().once();
  replay(workQueue);
  assigner.createWork();
  verify(workQueue);
  Assert.assertEquals(1,queuedWork.size());
  Assert.assertTrue(queuedWork.containsKey("cluster1"));
  Map<String,String> cluster1Work=queuedWork.get("cluster1");
  Assert.assertEquals(1,cluster1Work.size());
  Assert.assertTrue(cluster1Work.containsKey(target.getSourceTableId()));
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target),cluster1Work.get(target.getSourceTableId()));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void workAcrossTablesHappensConcurrently() throws Exception {
  ReplicationTarget target1=new ReplicationTarget("cluster1","table1","1");
  Text serializedTarget1=target1.toText();
  ReplicationTarget target2=new ReplicationTarget("cluster1","table2","2");
  Text serializedTarget2=target2.toText();
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  String filename1="z_file1", filename2="a_file1";
  String file1="/accumulo/wal/tserver+port/" + filename1, file2="/accumulo/wal/tserver+port/" + filename2;
  Status stat1=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(250).build();
  Status stat2=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(500).build();
  Mutation m=new Mutation(file1);
  WorkSection.add(m,serializedTarget1,ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=new Mutation(file2);
  WorkSection.add(m,serializedTarget2,ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  m=OrderSection.createMutation(file1,stat1.getCreatedTime());
  OrderSection.add(m,new Text(target1.getSourceTableId()),ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=OrderSection.createMutation(file2,stat2.getCreatedTime());
  OrderSection.add(m,new Text(target2.getSourceTableId()),ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  bw.close();
  DistributedWorkQueue workQueue=createMock(DistributedWorkQueue.class);
  Map<String,Map<String,String>> queuedWork=new HashMap<>();
  assigner.setQueuedWork(queuedWork);
  assigner.setWorkQueue(workQueue);
  assigner.setMaxQueueSize(Integer.MAX_VALUE);
  workQueue.addWork(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target1),file1);
  expectLastCall().once();
  workQueue.addWork(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename2,target2),file2);
  expectLastCall().once();
  replay(workQueue);
  assigner.createWork();
  verify(workQueue);
  Assert.assertEquals(1,queuedWork.size());
  Assert.assertTrue(queuedWork.containsKey("cluster1"));
  Map<String,String> cluster1Work=queuedWork.get("cluster1");
  Assert.assertEquals(2,cluster1Work.size());
  Assert.assertTrue(cluster1Work.containsKey(target1.getSourceTableId()));
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target1),cluster1Work.get(target1.getSourceTableId()));
  Assert.assertTrue(cluster1Work.containsKey(target2.getSourceTableId()));
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename2,target2),cluster1Work.get(target2.getSourceTableId()));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void reprocessingOfCompletedWorkRemovesWork() throws Exception {
  ReplicationTarget target=new ReplicationTarget("cluster1","table1","1");
  Text serializedTarget=target.toText();
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  String filename1="z_file1", filename2="a_file1";
  String file1="/accumulo/wal/tserver+port/" + filename1, file2="/accumulo/wal/tserver+port/" + filename2;
  Status stat1=Status.newBuilder().setBegin(100).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(250).build();
  Status stat2=Status.newBuilder().setBegin(0).setEnd(100).setClosed(true).setInfiniteEnd(false).setCreatedTime(500).build();
  Mutation m=new Mutation(file1);
  WorkSection.add(m,serializedTarget,ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=new Mutation(file2);
  WorkSection.add(m,serializedTarget,ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  m=OrderSection.createMutation(file1,stat1.getCreatedTime());
  OrderSection.add(m,new Text(target.getSourceTableId()),ProtobufUtil.toValue(stat1));
  bw.addMutation(m);
  m=OrderSection.createMutation(file2,stat2.getCreatedTime());
  OrderSection.add(m,new Text(target.getSourceTableId()),ProtobufUtil.toValue(stat2));
  bw.addMutation(m);
  bw.close();
  DistributedWorkQueue workQueue=createMock(DistributedWorkQueue.class);
  Map<String,Map<String,String>> queuedWork=new HashMap<>();
  Map<String,String> queuedWorkForCluster=new HashMap<>();
  queuedWorkForCluster.put(target.getSourceTableId(),DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename1,target));
  queuedWork.put("cluster1",queuedWorkForCluster);
  assigner.setQueuedWork(queuedWork);
  assigner.setWorkQueue(workQueue);
  assigner.setMaxQueueSize(Integer.MAX_VALUE);
  workQueue.addWork(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename2,target),file2);
  expectLastCall().once();
  replay(workQueue);
  assigner.createWork();
  verify(workQueue);
  Assert.assertEquals(1,queuedWork.size());
  Assert.assertTrue(queuedWork.containsKey("cluster1"));
  Map<String,String> cluster1Work=queuedWork.get("cluster1");
  Assert.assertEquals(1,cluster1Work.size());
  Assert.assertTrue(cluster1Work.containsKey(target.getSourceTableId()));
  Assert.assertEquals(DistributedWorkQueueWorkAssignerHelper.getQueueKey(filename2,target),cluster1Work.get(target.getSourceTableId()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.StatusCombinerMacIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCombinerSetOnMetadata() throws Exception {
  TableOperations tops=getConnector().tableOperations();
  Map<String,EnumSet<IteratorScope>> iterators=tops.listIterators(MetadataTable.NAME);
  Assert.assertTrue(iterators.containsKey(ReplicationTableUtil.COMBINER_NAME));
  EnumSet<IteratorScope> scopes=iterators.get(ReplicationTableUtil.COMBINER_NAME);
  Assert.assertEquals(3,scopes.size());
  Assert.assertTrue(scopes.contains(IteratorScope.scan));
  Assert.assertTrue(scopes.contains(IteratorScope.minc));
  Assert.assertTrue(scopes.contains(IteratorScope.majc));
  Iterable<Entry<String,String>> propIter=tops.getProperties(MetadataTable.NAME);
  HashMap<String,String> properties=new HashMap<String,String>();
  for (  Entry<String,String> entry : propIter) {
    properties.put(entry.getKey(),entry.getValue());
  }
  for (  IteratorScope scope : scopes) {
    String key=Property.TABLE_ITERATOR_PREFIX.getKey() + scope.name() + "."+ ReplicationTableUtil.COMBINER_NAME+ ".opt.columns";
    Assert.assertTrue("Properties did not contain key : " + key,properties.containsKey(key));
    Assert.assertEquals(MetadataSchema.ReplicationSection.COLF.toString(),properties.get(key));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.StatusMakerIT </h4><pre class="type-9 type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void closedMessagesCreateOrderRecords() throws Exception {
  String sourceTable=testName.getMethodName();
  conn.tableOperations().create(sourceTable);
  ReplicationTableUtil.configureMetadataTable(conn,sourceTable);
  BatchWriter bw=conn.createBatchWriter(sourceTable,new BatchWriterConfig());
  String walPrefix="hdfs://localhost:8020/accumulo/wals/tserver+port/";
  List<String> files=Arrays.asList(walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID());
  Map<String,Integer> fileToTableId=new HashMap<>();
  Status.Builder statBuilder=Status.newBuilder().setBegin(0).setEnd(0).setInfiniteEnd(true).setClosed(true);
  int index=1;
  long time=System.currentTimeMillis();
  for (  String file : files) {
    statBuilder.setCreatedTime(time++);
    Mutation m=new Mutation(ReplicationSection.getRowPrefix() + file);
    m.put(ReplicationSection.COLF,new Text(Integer.toString(index)),ProtobufUtil.toValue(statBuilder.build()));
    bw.addMutation(m);
    fileToTableId.put(file,index);
    index++;
  }
  bw.close();
  StatusMaker statusMaker=new StatusMaker(conn);
  statusMaker.setSourceTableName(sourceTable);
  statusMaker.run();
  Scanner s=conn.createScanner(sourceTable,Authorizations.EMPTY);
  s.setRange(ReplicationSection.getRange());
  s.fetchColumnFamily(ReplicationSection.COLF);
  Assert.assertEquals(0,Iterables.size(s));
  s=ReplicationTable.getScanner(conn);
  OrderSection.limit(s);
  Iterator<Entry<Key,Value>> iter=s.iterator();
  Assert.assertTrue("Found no order records in replication table",iter.hasNext());
  Iterator<String> expectedFiles=files.iterator();
  Text buff=new Text();
  while (expectedFiles.hasNext() && iter.hasNext()) {
    String file=expectedFiles.next();
    Entry<Key,Value> entry=iter.next();
    Assert.assertEquals(file,OrderSection.getFile(entry.getKey(),buff));
    OrderSection.getTableId(entry.getKey(),buff);
    Assert.assertEquals(fileToTableId.get(file).intValue(),Integer.parseInt(buff.toString()));
  }
  Assert.assertFalse("Found more files unexpectedly",expectedFiles.hasNext());
  Assert.assertFalse("Found more entries in replication table unexpectedly",iter.hasNext());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void statusRecordsCreated() throws Exception {
  String sourceTable=testName.getMethodName();
  conn.tableOperations().create(sourceTable);
  ReplicationTableUtil.configureMetadataTable(conn,sourceTable);
  BatchWriter bw=conn.createBatchWriter(sourceTable,new BatchWriterConfig());
  String walPrefix="hdfs://localhost:8020/accumulo/wals/tserver+port/";
  Set<String> files=Sets.newHashSet(walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID(),walPrefix + UUID.randomUUID());
  Map<String,Integer> fileToTableId=new HashMap<>();
  int index=1;
  long timeCreated=0;
  Map<String,Long> fileToTimeCreated=new HashMap<>();
  for (  String file : files) {
    Mutation m=new Mutation(ReplicationSection.getRowPrefix() + file);
    m.put(ReplicationSection.COLF,new Text(Integer.toString(index)),StatusUtil.fileCreatedValue(timeCreated));
    fileToTimeCreated.put(file,timeCreated);
    bw.addMutation(m);
    fileToTableId.put(file,index);
    index++;
    timeCreated++;
  }
  bw.close();
  StatusMaker statusMaker=new StatusMaker(conn);
  statusMaker.setSourceTableName(sourceTable);
  statusMaker.run();
  Scanner s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  Text file=new Text(), tableId=new Text();
  for (  Entry<Key,Value> entry : s) {
    StatusSection.getFile(entry.getKey(),file);
    StatusSection.getTableId(entry.getKey(),tableId);
    Assert.assertTrue("Found unexpected file: " + file,files.contains(file.toString()));
    Assert.assertEquals(fileToTableId.get(file.toString()),new Integer(tableId.toString()));
    timeCreated=fileToTimeCreated.get(file.toString());
    Assert.assertNotNull(timeCreated);
    Assert.assertEquals(StatusUtil.fileCreated(timeCreated),Status.parseFrom(entry.getValue().get()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.UnorderedWorkAssignerReplicationIT </h4><pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTableWithoutDrain() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  MiniAccumuloClusterImpl peer1Cluster=new MiniAccumuloClusterImpl(peerCfg);
  peer1Cluster.start();
  try {
    Connector connMaster=getConnector();
    Connector connPeer=peer1Cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    String peerClusterName="peer";
    String peerUserName="repl";
    String peerPassword="passwd";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peer1Cluster.getInstanceName(),peer1Cluster.getZooKeepers())));
    String masterTable1="master1", peerTable1="peer1", masterTable2="master2", peerTable2="peer2";
    connMaster.tableOperations().create(masterTable1);
    String masterTableId1=connMaster.tableOperations().tableIdMap().get(masterTable1);
    Assert.assertNotNull(masterTableId1);
    connMaster.tableOperations().create(masterTable2);
    String masterTableId2=connMaster.tableOperations().tableIdMap().get(masterTable2);
    Assert.assertNotNull(masterTableId2);
    connPeer.tableOperations().create(peerTable1);
    String peerTableId1=connPeer.tableOperations().tableIdMap().get(peerTable1);
    Assert.assertNotNull(peerTableId1);
    connPeer.tableOperations().create(peerTable2);
    String peerTableId2=connPeer.tableOperations().tableIdMap().get(peerTable2);
    Assert.assertNotNull(peerTableId2);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable1,TablePermission.WRITE);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable2,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId1);
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId2);
    sleepUninterruptibly(3,TimeUnit.SECONDS);
    BatchWriter bw=connMaster.createBatchWriter(masterTable1,new BatchWriterConfig());
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable1 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    bw=connMaster.createBatchWriter(masterTable2,new BatchWriterConfig());
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable2 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    while (!ReplicationTable.isOnline(connMaster)) {
      Thread.sleep(500);
    }
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    boolean fullyReplicated=false;
    for (int i=0; i < 10 && !fullyReplicated; i++) {
      sleepUninterruptibly(timeoutFactor * 2,TimeUnit.SECONDS);
      Scanner s=ReplicationTable.getScanner(connMaster);
      WorkSection.limit(s);
      for (      Entry<Key,Value> entry : s) {
        Status status=Status.parseFrom(entry.getValue().get());
        if (StatusUtil.isFullyReplicated(status)) {
          fullyReplicated|=true;
        }
      }
    }
    Assert.assertNotEquals(0,fullyReplicated);
    long countTable=0l;
    for (int i=0; i < 10; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable1,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable1));
      }
      log.info("Found {} records in {}",countTable,peerTable1);
      if (0 < countTable) {
        break;
      }
      Thread.sleep(2000);
    }
    Assert.assertTrue("Did not find any records in " + peerTable1 + " on peer",countTable > 0);
    for (int i=0; i < 10; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable2,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable2));
      }
      log.info("Found {} records in {}",countTable,peerTable2);
      if (0 < countTable) {
        break;
      }
      Thread.sleep(2000);
    }
    Assert.assertTrue("Did not find any records in " + peerTable2 + " on peer",countTable > 0);
  }
  finally {
    peer1Cluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataWasReplicatedToThePeerWithoutDrain() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  MiniAccumuloClusterImpl peerCluster=new MiniAccumuloClusterImpl(peerCfg);
  peerCluster.start();
  Connector connMaster=getConnector();
  Connector connPeer=peerCluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
  String peerUserName="repl";
  String peerPassword="passwd";
  connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
  String peerClusterName="peer";
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerCluster.getInstanceName(),peerCluster.getZooKeepers())));
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
  connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
  String masterTable="master", peerTable="peer";
  connMaster.tableOperations().create(masterTable);
  String masterTableId=connMaster.tableOperations().tableIdMap().get(masterTable);
  Assert.assertNotNull(masterTableId);
  connPeer.tableOperations().create(peerTable);
  String peerTableId=connPeer.tableOperations().tableIdMap().get(peerTable);
  Assert.assertNotNull(peerTableId);
  connPeer.securityOperations().grantTablePermission(peerUserName,peerTable,TablePermission.WRITE);
  connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION.getKey(),"true");
  connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId);
  BatchWriter bw=connMaster.createBatchWriter(masterTable,new BatchWriterConfig());
  for (int rows=0; rows < 5000; rows++) {
    Mutation m=new Mutation(Integer.toString(rows));
    for (int cols=0; cols < 100; cols++) {
      String value=Integer.toString(cols);
      m.put(value,"",value);
    }
    bw.addMutation(m);
  }
  bw.close();
  log.info("Wrote all data to master cluster");
  Set<String> files=connMaster.replicationOperations().referencedFiles(masterTable);
  for (  String s : files) {
    log.info("Found referenced file for " + masterTable + ": "+ s);
  }
  for (  ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
    cluster.killProcess(ServerType.TABLET_SERVER,proc);
  }
  cluster.exec(TabletServer.class);
  Iterators.size(connMaster.createScanner(masterTable,Authorizations.EMPTY).iterator());
  for (  Entry<Key,Value> kv : connMaster.createScanner(ReplicationTable.NAME,Authorizations.EMPTY)) {
    log.debug(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
  }
  connMaster.replicationOperations().drain(masterTable,files);
  Scanner master=connMaster.createScanner(masterTable,Authorizations.EMPTY), peer=connPeer.createScanner(peerTable,Authorizations.EMPTY);
  Iterator<Entry<Key,Value>> masterIter=master.iterator(), peerIter=peer.iterator();
  Assert.assertTrue("No data in master table",masterIter.hasNext());
  Assert.assertTrue("No data in peer table",peerIter.hasNext());
  while (masterIter.hasNext() && peerIter.hasNext()) {
    Entry<Key,Value> masterEntry=masterIter.next(), peerEntry=peerIter.next();
    Assert.assertEquals(peerEntry.getKey() + " was not equal to " + peerEntry.getKey(),0,masterEntry.getKey().compareTo(peerEntry.getKey(),PartialKey.ROW_COLFAM_COLQUAL_COLVIS));
    Assert.assertEquals(masterEntry.getValue(),peerEntry.getValue());
  }
  Assert.assertFalse("Had more data to read from the master",masterIter.hasNext());
  Assert.assertFalse("Had more data to read from the peer",peerIter.hasNext());
  peerCluster.stop();
}

</code></pre>

<br>
<pre class="type-9 type-13 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataWasReplicatedToThePeer() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  MiniAccumuloClusterImpl peerCluster=new MiniAccumuloClusterImpl(peerCfg);
  peerCluster.start();
  try {
    final Connector connMaster=getConnector();
    final Connector connPeer=peerCluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    ReplicationTable.setOnline(connMaster);
    String peerUserName="peer", peerPassword="foo";
    String peerClusterName="peer";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peerCluster.getInstanceName(),peerCluster.getZooKeepers())));
    final String masterTable="master", peerTable="peer";
    connMaster.tableOperations().create(masterTable);
    String masterTableId=connMaster.tableOperations().tableIdMap().get(masterTable);
    Assert.assertNotNull(masterTableId);
    connPeer.tableOperations().create(peerTable);
    String peerTableId=connPeer.tableOperations().tableIdMap().get(peerTable);
    Assert.assertNotNull(peerTableId);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId);
    sleepUninterruptibly(3,TimeUnit.SECONDS);
    BatchWriter bw=connMaster.createBatchWriter(masterTable,new BatchWriterConfig());
    for (int rows=0; rows < 5000; rows++) {
      Mutation m=new Mutation(Integer.toString(rows));
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    final Set<String> filesNeedingReplication=connMaster.replicationOperations().referencedFiles(masterTable);
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    log.info("TabletServer restarted");
    Iterators.size(ReplicationTable.getScanner(connMaster).iterator());
    log.info("TabletServer is online");
    log.info("");
    log.info("Fetching metadata records:");
    for (    Entry<Key,Value> kv : connMaster.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
      if (ReplicationSection.COLF.equals(kv.getKey().getColumnFamily())) {
        log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
      }
 else {
        log.info(kv.getKey().toStringNoTruncate() + " " + kv.getValue());
      }
    }
    log.info("");
    log.info("Fetching replication records:");
    for (    Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
      log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
    }
    Future<Boolean> future=executor.submit(new Callable<Boolean>(){
      @Override public Boolean call() throws Exception {
        connMaster.replicationOperations().drain(masterTable,filesNeedingReplication);
        log.info("Drain completed");
        return true;
      }
    }
);
    long timeoutSeconds=timeoutFactor * 30;
    try {
      future.get(timeoutSeconds,TimeUnit.SECONDS);
    }
 catch (    TimeoutException e) {
      future.cancel(true);
      Assert.fail("Drain did not finish within " + timeoutSeconds + " seconds");
    }
    log.info("drain completed");
    log.info("");
    log.info("Fetching metadata records:");
    for (    Entry<Key,Value> kv : connMaster.createScanner(MetadataTable.NAME,Authorizations.EMPTY)) {
      if (ReplicationSection.COLF.equals(kv.getKey().getColumnFamily())) {
        log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
      }
 else {
        log.info(kv.getKey().toStringNoTruncate() + " " + kv.getValue());
      }
    }
    log.info("");
    log.info("Fetching replication records:");
    for (    Entry<Key,Value> kv : ReplicationTable.getScanner(connMaster)) {
      log.info(kv.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(kv.getValue().get())));
    }
    Scanner master=connMaster.createScanner(masterTable,Authorizations.EMPTY), peer=connPeer.createScanner(peerTable,Authorizations.EMPTY);
    Iterator<Entry<Key,Value>> masterIter=master.iterator(), peerIter=peer.iterator();
    Entry<Key,Value> masterEntry=null, peerEntry=null;
    while (masterIter.hasNext() && peerIter.hasNext()) {
      masterEntry=masterIter.next();
      peerEntry=peerIter.next();
      Assert.assertEquals(masterEntry.getKey() + " was not equal to " + peerEntry.getKey(),0,masterEntry.getKey().compareTo(peerEntry.getKey(),PartialKey.ROW_COLFAM_COLQUAL_COLVIS));
      Assert.assertEquals(masterEntry.getValue(),peerEntry.getValue());
    }
    log.info("Last master entry: " + masterEntry);
    log.info("Last peer entry: " + peerEntry);
    Assert.assertFalse("Had more data to read from the master",masterIter.hasNext());
    Assert.assertFalse("Had more data to read from the peer",peerIter.hasNext());
  }
  finally {
    peerCluster.stop();
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void createExecutor(){
  executor=Executors.newSingleThreadExecutor();
  try {
    timeoutFactor=Integer.parseInt(System.getProperty("timeout.factor"));
  }
 catch (  NumberFormatException exception) {
    log.warn("Could not parse timeout.factor, not increasing timeout.");
  }
  Assert.assertTrue("The timeout factor must be a positive, non-zero value",timeoutFactor > 0);
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dataReplicatedToCorrectTable() throws Exception {
  MiniAccumuloConfigImpl peerCfg=new MiniAccumuloConfigImpl(createTestDir(this.getClass().getName() + "_" + this.testName.getMethodName()+ "_peer"),ROOT_PASSWORD);
  peerCfg.setNumTservers(1);
  peerCfg.setInstanceName("peer");
  updatePeerConfigFromPrimary(getCluster().getConfig(),peerCfg);
  peerCfg.setProperty(Property.REPLICATION_NAME,"peer");
  MiniAccumuloClusterImpl peer1Cluster=new MiniAccumuloClusterImpl(peerCfg);
  peer1Cluster.start();
  try {
    Connector connMaster=getConnector();
    Connector connPeer=peer1Cluster.getConnector("root",new PasswordToken(ROOT_PASSWORD));
    String peerClusterName="peer";
    String peerUserName="peer", peerPassword="foo";
    connPeer.securityOperations().createLocalUser(peerUserName,new PasswordToken(peerPassword));
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_USER.getKey() + peerClusterName,peerUserName);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEER_PASSWORD.getKey() + peerClusterName,peerPassword);
    connMaster.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + peerClusterName,ReplicaSystemFactory.getPeerConfigurationValue(AccumuloReplicaSystem.class,AccumuloReplicaSystem.buildConfiguration(peer1Cluster.getInstanceName(),peer1Cluster.getZooKeepers())));
    String masterTable1="master1", peerTable1="peer1", masterTable2="master2", peerTable2="peer2";
    connMaster.tableOperations().create(masterTable1);
    String masterTableId1=connMaster.tableOperations().tableIdMap().get(masterTable1);
    Assert.assertNotNull(masterTableId1);
    connMaster.tableOperations().create(masterTable2);
    String masterTableId2=connMaster.tableOperations().tableIdMap().get(masterTable2);
    Assert.assertNotNull(masterTableId2);
    connPeer.tableOperations().create(peerTable1);
    String peerTableId1=connPeer.tableOperations().tableIdMap().get(peerTable1);
    Assert.assertNotNull(peerTableId1);
    connPeer.tableOperations().create(peerTable2);
    String peerTableId2=connPeer.tableOperations().tableIdMap().get(peerTable2);
    Assert.assertNotNull(peerTableId2);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable1,TablePermission.WRITE);
    connPeer.securityOperations().grantTablePermission(peerUserName,peerTable2,TablePermission.WRITE);
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable1,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId1);
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION.getKey(),"true");
    connMaster.tableOperations().setProperty(masterTable2,Property.TABLE_REPLICATION_TARGET.getKey() + peerClusterName,peerTableId2);
    sleepUninterruptibly(3,TimeUnit.SECONDS);
    BatchWriter bw=connMaster.createBatchWriter(masterTable1,new BatchWriterConfig());
    long masterTable1Records=0l;
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable1 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
        masterTable1Records++;
      }
      bw.addMutation(m);
    }
    bw.close();
    bw=connMaster.createBatchWriter(masterTable2,new BatchWriterConfig());
    long masterTable2Records=0l;
    for (int rows=0; rows < 2500; rows++) {
      Mutation m=new Mutation(masterTable2 + rows);
      for (int cols=0; cols < 100; cols++) {
        String value=Integer.toString(cols);
        m.put(value,"",value);
        masterTable2Records++;
      }
      bw.addMutation(m);
    }
    bw.close();
    log.info("Wrote all data to master cluster");
    Set<String> filesFor1=connMaster.replicationOperations().referencedFiles(masterTable1), filesFor2=connMaster.replicationOperations().referencedFiles(masterTable2);
    while (!ReplicationTable.isOnline(connMaster)) {
      Thread.sleep(500);
    }
    for (    ProcessReference proc : cluster.getProcesses().get(ServerType.TABLET_SERVER)) {
      cluster.killProcess(ServerType.TABLET_SERVER,proc);
    }
    cluster.exec(TabletServer.class);
    log.info("Restarted the tserver");
    Iterators.size(connMaster.createScanner(masterTable1,Authorizations.EMPTY).iterator());
    log.info("Waiting for {} for {}",filesFor1,masterTable1);
    connMaster.replicationOperations().drain(masterTable1,filesFor1);
    log.info("Waiting for {} for {}",filesFor2,masterTable2);
    connMaster.replicationOperations().drain(masterTable2,filesFor2);
    long countTable=0l;
    for (int i=0; i < 5; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable1,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable1));
      }
      log.info("Found {} records in {}",countTable,peerTable1);
      if (masterTable1Records != countTable) {
        log.warn("Did not find {} expected records in {}, only found {}",masterTable1Records,peerTable1,countTable);
      }
    }
    Assert.assertEquals(masterTable1Records,countTable);
    for (int i=0; i < 5; i++) {
      countTable=0l;
      for (      Entry<Key,Value> entry : connPeer.createScanner(peerTable2,Authorizations.EMPTY)) {
        countTable++;
        Assert.assertTrue("Found unexpected key-value" + entry.getKey().toStringNoTruncate() + " "+ entry.getValue(),entry.getKey().getRow().toString().startsWith(masterTable2));
      }
      log.info("Found {} records in {}",countTable,peerTable2);
      if (masterTable2Records != countTable) {
        log.warn("Did not find {} expected records in {}, only found {}",masterTable2Records,peerTable2,countTable);
      }
    }
    Assert.assertEquals(masterTable2Records,countTable);
  }
  finally {
    peer1Cluster.stop();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.UnusedWalDoesntCloseReplicationStatusIT </h4><pre class="type-9 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  File accumuloDir=this.getCluster().getConfig().getAccumuloDir();
  final Connector conn=getConnector();
  final String tableName=getUniqueNames(1)[0];
  conn.securityOperations().grantTablePermission("root",MetadataTable.NAME,TablePermission.WRITE);
  conn.tableOperations().create(tableName);
  final String tableId=conn.tableOperations().tableIdMap().get(tableName);
  final int numericTableId=Integer.parseInt(tableId);
  final int fakeTableId=numericTableId + 1;
  Assert.assertNotNull("Did not find table ID",tableId);
  conn.tableOperations().setProperty(tableName,Property.TABLE_REPLICATION.getKey(),"true");
  conn.tableOperations().setProperty(tableName,Property.TABLE_REPLICATION_TARGET.getKey() + "cluster1","1");
  conn.instanceOperations().setProperty(Property.REPLICATION_PEERS.getKey() + "cluster1",ReplicaSystemFactory.getPeerConfigurationValue(MockReplicaSystem.class,"50000"));
  FileSystem fs=FileSystem.getLocal(new Configuration());
  File tserverWalDir=new File(accumuloDir,ServerConstants.WAL_DIR + Path.SEPARATOR + "faketserver+port");
  File tserverWal=new File(tserverWalDir,UUID.randomUUID().toString());
  fs.mkdirs(new Path(tserverWalDir.getAbsolutePath()));
  FSDataOutputStream out=fs.create(new Path(tserverWal.getAbsolutePath()));
  out.write(DfsLogger.LOG_FILE_HEADER_V3.getBytes(UTF_8));
  DataOutputStream dos=new DataOutputStream(out);
  dos.writeUTF("NullCryptoModule");
  LogFileKey key=new LogFileKey();
  LogFileValue value=new LogFileValue();
  key.event=OPEN;
  key.tserverSession=tserverWal.getAbsolutePath();
  key.filename=tserverWal.getAbsolutePath();
  key.write(out);
  value.write(out);
  key.event=LogEvents.DEFINE_TABLET;
  key.tablet=new KeyExtent(new Text(Integer.toString(fakeTableId)),null,null);
  key.seq=1l;
  key.tid=1;
  key.write(dos);
  value.write(dos);
  key.tablet=null;
  key.event=LogEvents.MUTATION;
  key.filename=tserverWal.getAbsolutePath();
  value.mutations=Arrays.<Mutation>asList(new ServerMutation(new Text("row")));
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.COMPACTION_START;
  key.filename=accumuloDir.getAbsolutePath() + "/tables/" + fakeTableId+ "/t-000001/A000001.rf";
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  key.event=LogEvents.COMPACTION_FINISH;
  value.mutations=Collections.emptyList();
  key.write(dos);
  value.write(dos);
  dos.close();
  BatchWriter bw=conn.createBatchWriter(tableName,new BatchWriterConfig());
  Mutation m=new Mutation("m");
  m.put("m","m","M");
  bw.addMutation(m);
  bw.close();
  log.info("State of metadata table after inserting a record");
  Scanner s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  for (  Entry<Key,Value> entry : s) {
    System.out.println(entry.getKey().toStringNoTruncate() + " " + entry.getValue());
  }
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.ReplicationSection.getRange());
  for (  Entry<Key,Value> entry : s) {
    System.out.println(entry.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(entry.getValue().get())));
  }
  log.info("Offline'ing table");
  conn.tableOperations().offline(tableName,true);
  String walUri=tserverWal.toURI().toString();
  KeyExtent extent=new KeyExtent(new Text(tableId),null,null);
  bw=conn.createBatchWriter(MetadataTable.NAME,new BatchWriterConfig());
  m=new Mutation(extent.getMetadataEntry());
  m.put(MetadataSchema.TabletsSection.LogColumnFamily.NAME,new Text("localhost:12345/" + walUri),new Value((walUri + "|1").getBytes(UTF_8)));
  bw.addMutation(m);
  m=new Mutation(MetadataSchema.ReplicationSection.getRowPrefix() + new Path(walUri).toString());
  m.put(MetadataSchema.ReplicationSection.COLF,new Text(tableId),new Value(StatusUtil.fileCreated(System.currentTimeMillis()).toByteArray()));
  bw.addMutation(m);
  bw.close();
  log.info("State of metadata after injecting WAL manually");
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  for (  Entry<Key,Value> entry : s) {
    log.info(entry.getKey().toStringNoTruncate() + " " + entry.getValue());
  }
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.ReplicationSection.getRange());
  for (  Entry<Key,Value> entry : s) {
    log.info(entry.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(Status.parseFrom(entry.getValue().get())));
  }
  log.info("Bringing table online");
  conn.tableOperations().online(tableName,true);
  Assert.assertEquals(1,Iterables.size(conn.createScanner(tableName,Authorizations.EMPTY)));
  log.info("Table has performed recovery, state of metadata:");
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.TabletsSection.getRange(tableId));
  for (  Entry<Key,Value> entry : s) {
    log.info(entry.getKey().toStringNoTruncate() + " " + entry.getValue());
  }
  s=conn.createScanner(MetadataTable.NAME,Authorizations.EMPTY);
  s.setRange(MetadataSchema.ReplicationSection.getRange());
  for (  Entry<Key,Value> entry : s) {
    Status status=Status.parseFrom(entry.getValue().get());
    log.info(entry.getKey().toStringNoTruncate() + " " + ProtobufUtil.toString(status));
    Assert.assertFalse("Status record was closed and it should not be",status.getClosed());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.replication.WorkMakerIT </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void singleUnitMultipleTargets() throws Exception {
  String table=testName.getMethodName();
  conn.tableOperations().create(table);
  String tableId=conn.tableOperations().tableIdMap().get(table);
  String file="hdfs://localhost:8020/accumulo/wal/123456-1234-1234-12345678";
  Mutation m=new Mutation(new Path(file).toString());
  m.put(StatusSection.NAME,new Text(tableId),StatusUtil.fileCreatedValue(System.currentTimeMillis()));
  BatchWriter bw=ReplicationTable.getBatchWriter(conn);
  bw.addMutation(m);
  bw.flush();
  Scanner s=ReplicationTable.getScanner(conn);
  StatusSection.limit(s);
  Assert.assertEquals(1,Iterables.size(s));
  MockWorkMaker workMaker=new MockWorkMaker(conn);
  Map<String,String> targetClusters=ImmutableMap.of("remote_cluster_1","4","remote_cluster_2","6","remote_cluster_3","8");
  Set<ReplicationTarget> expectedTargets=new HashSet<>();
  for (  Entry<String,String> cluster : targetClusters.entrySet()) {
    expectedTargets.add(new ReplicationTarget(cluster.getKey(),cluster.getValue(),tableId));
  }
  workMaker.setBatchWriter(bw);
  workMaker.addWorkRecord(new Text(file),StatusUtil.fileCreatedValue(System.currentTimeMillis()),targetClusters,tableId);
  s=ReplicationTable.getScanner(conn);
  WorkSection.limit(s);
  Set<ReplicationTarget> actualTargets=new HashSet<>();
  for (  Entry<Key,Value> entry : s) {
    Assert.assertEquals(file,entry.getKey().getRow().toString());
    Assert.assertEquals(WorkSection.NAME,entry.getKey().getColumnFamily());
    ReplicationTarget target=ReplicationTarget.from(entry.getKey().getColumnQualifier());
    actualTargets.add(target);
  }
  for (  ReplicationTarget expected : expectedTargets) {
    Assert.assertTrue("Did not find expected target: " + expected,actualTargets.contains(expected));
    actualTargets.remove(expected);
  }
  Assert.assertTrue("Found extra replication work entries: " + actualTargets,actualTargets.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.security.KerberosTokenTest </h4><pre class="type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDestroy() throws Exception {
  String user=testName.getMethodName();
  File userKeytab=new File(kdc.getKeytabDir(),user + ".keytab");
  if (userKeytab.exists() && !userKeytab.delete()) {
    log.warn("Unable to delete {}",userKeytab);
  }
  kdc.createPrincipal(userKeytab,user);
  user=kdc.qualifyUser(user);
  UserGroupInformation.loginUserFromKeytab(user,userKeytab.getAbsolutePath());
  KerberosToken token=new KerberosToken();
  assertEquals(user,token.getPrincipal());
  token.destroy();
  assertTrue(token.isDestroyed());
  assertNull(token.getPrincipal());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.start.KeywordStartIT </h4><pre class="type-9 type-13 type-5 type-21 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Sets implicit assumptions 
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExpectedClasses() throws IOException {
  assumeTrue(new File(System.getProperty("user.dir") + "/src").exists());
  TreeMap<String,Class<? extends KeywordExecutable>> expectSet=new TreeMap<>();
  expectSet.put("admin",Admin.class);
  expectSet.put("classpath",Classpath.class);
  expectSet.put("create-token",CreateToken.class);
  expectSet.put("gc",GCExecutable.class);
  expectSet.put("help",Help.class);
  expectSet.put("info",Info.class);
  expectSet.put("init",Initialize.class);
  expectSet.put("jar",Jar.class);
  expectSet.put("login-info",LoginProperties.class);
  expectSet.put("master",MasterExecutable.class);
  expectSet.put("minicluster",MiniClusterExecutable.class);
  expectSet.put("monitor",MonitorExecutable.class);
  expectSet.put("proxy",Proxy.class);
  expectSet.put("rfile-info",PrintInfo.class);
  expectSet.put("shell",Shell.class);
  expectSet.put("tracer",TracerExecutable.class);
  expectSet.put("tserver",TServerExecutable.class);
  expectSet.put("version",Version.class);
  expectSet.put("zookeeper",ZooKeeperMain.class);
  Iterator<Entry<String,Class<? extends KeywordExecutable>>> expectIter=expectSet.entrySet().iterator();
  TreeMap<String,KeywordExecutable> actualSet=new TreeMap<>(Main.getExecutables(getClass().getClassLoader()));
  Iterator<Entry<String,KeywordExecutable>> actualIter=actualSet.entrySet().iterator();
  Entry<String,Class<? extends KeywordExecutable>> expected;
  Entry<String,KeywordExecutable> actual;
  while (expectIter.hasNext() && actualIter.hasNext()) {
    expected=expectIter.next();
    actual=actualIter.next();
    assertEquals(expected.getKey(),actual.getKey());
    assertEquals(expected.getValue(),actual.getValue().getClass());
  }
  boolean moreExpected=expectIter.hasNext();
  if (moreExpected) {
    while (expectIter.hasNext()) {
      log.warn("Missing class for keyword '" + expectIter.next() + "'");
    }
  }
  assertFalse("Missing expected classes",moreExpected);
  boolean moreActual=actualIter.hasNext();
  if (moreActual) {
    while (actualIter.hasNext()) {
      log.warn("Extra class found with keyword '" + actualIter.next() + "'");
    }
  }
  assertFalse("Found additional unexpected classes",moreActual);
}

</code></pre>

<br>
<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void checkHasMain(){
  assertFalse("Sanity check for test failed. Somehow the test class has a main method",hasMain(this.getClass()));
  HashSet<Class<?>> expectSet=new HashSet<>();
  expectSet.add(Admin.class);
  expectSet.add(CreateToken.class);
  expectSet.add(Info.class);
  expectSet.add(Initialize.class);
  expectSet.add(LoginProperties.class);
  expectSet.add(Master.class);
  expectSet.add(MiniAccumuloRunner.class);
  expectSet.add(Monitor.class);
  expectSet.add(PrintInfo.class);
  expectSet.add(Proxy.class);
  expectSet.add(Shell.class);
  expectSet.add(SimpleGarbageCollector.class);
  expectSet.add(TabletServer.class);
  expectSet.add(TraceServer.class);
  expectSet.add(ZooKeeperMain.class);
  for (  Class<?> c : expectSet) {
    assertTrue("Class " + c.getName() + " is missing a main method!",hasMain(c));
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCheckDuplicates(){
  NoOp one=new NoOp("one");
  NoOp anotherOne=new NoOp("another");
  NoOp two=new NoOp("two");
  NoOp three=new NoOp("three");
  List<NoOp> services=Arrays.asList(one,three,two,two,three,three,anotherOne);
  assertEquals(7,services.size());
  Map<String,KeywordExecutable> results=Main.checkDuplicates(services);
  assertTrue(results.containsKey(one.keyword()));
  assertTrue(results.containsKey(anotherOne.keyword()));
  assertFalse(results.containsKey(two.keyword()));
  assertFalse(results.containsKey(three.keyword()));
  assertEquals(2,results.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.test.util.CertUtilsTest </h4><pre class="type-8 type-5 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createPublicSelfSigned() throws Exception {
  CertUtils certUtils=getUtils();
  File rootKeyStoreFile=new File(folder.getRoot(),"root.jks");
  certUtils.createSelfSignedCert(rootKeyStoreFile,"test",PASSWORD);
  File publicKeyStoreFile=new File(folder.getRoot(),"public.jks");
  certUtils.createPublicCert(publicKeyStoreFile,"test",rootKeyStoreFile.getAbsolutePath(),PASSWORD,"");
  KeyStore keyStore=KeyStore.getInstance(KEYSTORE_TYPE);
  try (FileInputStream fis=new FileInputStream(publicKeyStoreFile)){
    keyStore.load(fis,new char[0]);
  }
   try {
    CertUtils.findPrivateKey(keyStore,PASSWORD_CHARS);
    fail("expected not to find private key in keystore");
  }
 catch (  KeyStoreException e) {
    assertTrue(e.getMessage().contains("private key"));
  }
  Certificate cert=CertUtils.findCert(keyStore);
  cert.verify(cert.getPublicKey());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tracer.TracerTest </h4><pre class="type-13 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThrift() throws Exception {
  TestReceiver tracer=new TestReceiver();
  org.apache.htrace.Trace.addReceiver(tracer);
  ServerSocket socket=new ServerSocket(0);
  TServerSocket transport=new TServerSocket(socket);
  transport.listen();
  TThreadPoolServer.Args args=new TThreadPoolServer.Args(transport);
  args.processor(new Processor<Iface>(TraceWrap.service(new Service())));
  final TServer tserver=new TThreadPoolServer(args);
  Thread t=new Thread(){
    @Override public void run(){
      tserver.serve();
    }
  }
;
  t.start();
  TTransport clientTransport=new TSocket(new Socket("localhost",socket.getLocalPort()));
  TestService.Iface client=new TestService.Client(new TBinaryProtocol(clientTransport),new TBinaryProtocol(clientTransport));
  client=TraceWrap.client(client);
  assertFalse(client.checkTrace(null,"test"));
  Span start=Trace.on("start");
  assertTrue(client.checkTrace(null,"my test"));
  start.stop();
  assertNotNull(tracer.traces.get(start.traceId()));
  String traces[]={"my test","checkTrace","client:checkTrace","start"};
  assertTrue(tracer.traces.get(start.traceId()).size() == traces.length);
  for (int i=0; i < traces.length; i++)   assertEquals(traces[i],tracer.traces.get(start.traceId()).get(i).description);
  tserver.stop();
  t.join(100);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void testTrace() throws Exception {
  TestReceiver tracer=new TestReceiver();
  org.apache.htrace.Trace.addReceiver(tracer);
  assertFalse(Trace.isTracing());
  Trace.start("nop").stop();
  assertTrue(tracer.traces.size() == 0);
  assertFalse(Trace.isTracing());
  Trace.on("nop").stop();
  assertTrue(tracer.traces.size() == 1);
  assertFalse(Trace.isTracing());
  Span start=Trace.on("testing");
  assertEquals(Trace.currentTrace().getSpan(),start.getScope().getSpan());
  assertTrue(Trace.isTracing());
  Span span=Trace.start("shortest trace ever");
  span.stop();
  long traceId=Trace.currentTraceId();
  assertNotNull(tracer.traces.get(traceId));
  assertTrue(tracer.traces.get(traceId).size() == 1);
  assertEquals("shortest trace ever",tracer.traces.get(traceId).get(0).description);
  Span pause=Trace.start("pause");
  Thread.sleep(100);
  pause.stop();
  assertTrue(tracer.traces.get(traceId).size() == 2);
  assertTrue(tracer.traces.get(traceId).get(1).millis() >= 100);
  Thread t=new Thread(Trace.wrap(new Runnable(){
    @Override public void run(){
      assertTrue(Trace.isTracing());
    }
  }
),"My Task");
  t.start();
  t.join();
  assertTrue(tracer.traces.get(traceId).size() == 3);
  assertEquals("My Task",tracer.traces.get(traceId).get(2).description);
  Trace.off();
  assertFalse(Trace.isTracing());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.InMemoryMapTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test3() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  mutate(imm,"r1","foo:cq1",3,"bar1");
  mutate(imm,"r1","foo:cq1",3,"bar2");
  MemoryIterator ski1=imm.skvIterator(null);
  mutate(imm,"r1","foo:cq1",3,"bar3");
  mutate(imm,"r3","foo:cq1",3,"bar9");
  mutate(imm,"r3","foo:cq1",3,"bara");
  MemoryIterator ski2=imm.skvIterator(null);
  ski1.seek(new Range(new Text("r1")),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar2");
  ae(ski1,"r1","foo:cq1",3,"bar1");
  assertFalse(ski1.hasTop());
  ski2.seek(new Range(new Text("r3")),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski2,"r3","foo:cq1",3,"bara");
  ae(ski2,"r3","foo:cq1",3,"bar9");
  assertFalse(ski1.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSample() throws Exception {
  SamplerConfigurationImpl sampleConfig=new SamplerConfigurationImpl(RowSampler.class.getName(),ImmutableMap.of("hasher","murmur3_32","modulus","7"));
  Sampler sampler=SamplerFactory.newSampler(sampleConfig,DefaultConfiguration.getInstance());
  ConfigurationCopy config1=newConfig(tempFolder.newFolder().getAbsolutePath());
  for (  Entry<String,String> entry : sampleConfig.toTablePropertiesMap().entrySet()) {
    config1.set(entry.getKey(),entry.getValue());
  }
  ConfigurationCopy config2=newConfig(tempFolder.newFolder().getAbsolutePath());
  config2.set(Property.TABLE_LOCALITY_GROUP_PREFIX + "lg1",LocalityGroupUtil.encodeColumnFamilies(toTextSet("cf2")));
  config2.set(Property.TABLE_LOCALITY_GROUPS.getKey(),"lg1");
  for (  Entry<String,String> entry : sampleConfig.toTablePropertiesMap().entrySet()) {
    config2.set(entry.getKey(),entry.getValue());
  }
  for (  ConfigurationCopy config : Arrays.asList(config1,config2)) {
    InMemoryMap imm=new InMemoryMap(config);
    TreeMap<Key,Value> expectedSample=new TreeMap<>();
    TreeMap<Key,Value> expectedAll=new TreeMap<>();
    TreeMap<Key,Value> expectedNone=new TreeMap<>();
    MemoryIterator iter0=imm.skvIterator(sampleConfig);
    for (int r=0; r < 100; r++) {
      String row=String.format("r%06d",r);
      mutate(imm,row,"cf1:cq1",5,"v" + (2 * r),sampler,expectedSample,expectedAll);
      mutate(imm,row,"cf2:cq2",5,"v" + ((2 * r) + 1),sampler,expectedSample,expectedAll);
    }
    assertTrue(expectedSample.size() > 0);
    MemoryIterator iter1=imm.skvIterator(sampleConfig);
    MemoryIterator iter2=imm.skvIterator(null);
    SortedKeyValueIterator<Key,Value> iter0dc1=iter0.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter0dc2=iter0.deepCopy(new SampleIE(sampleConfig));
    SortedKeyValueIterator<Key,Value> iter1dc1=iter1.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter1dc2=iter1.deepCopy(new SampleIE(sampleConfig));
    SortedKeyValueIterator<Key,Value> iter2dc1=iter2.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter2dc2=iter2.deepCopy(new SampleIE(sampleConfig));
    assertEquals(expectedNone,readAll(iter0));
    assertEquals(expectedNone,readAll(iter0dc1));
    assertEquals(expectedNone,readAll(iter0dc2));
    assertEquals(expectedSample,readAll(iter1));
    assertEquals(expectedAll,readAll(iter2));
    assertEquals(expectedAll,readAll(iter1dc1));
    assertEquals(expectedAll,readAll(iter2dc1));
    assertEquals(expectedSample,readAll(iter1dc2));
    assertEquals(expectedSample,readAll(iter2dc2));
    imm.delete(0);
    assertEquals(expectedNone,readAll(iter0));
    assertEquals(expectedNone,readAll(iter0dc1));
    assertEquals(expectedNone,readAll(iter0dc2));
    assertEquals(expectedSample,readAll(iter1));
    assertEquals(expectedAll,readAll(iter2));
    assertEquals(expectedAll,readAll(iter1dc1));
    assertEquals(expectedAll,readAll(iter2dc1));
    assertEquals(expectedSample,readAll(iter1dc2));
    assertEquals(expectedSample,readAll(iter2dc2));
    SortedKeyValueIterator<Key,Value> iter0dc3=iter0.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter0dc4=iter0.deepCopy(new SampleIE(sampleConfig));
    SortedKeyValueIterator<Key,Value> iter1dc3=iter1.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter1dc4=iter1.deepCopy(new SampleIE(sampleConfig));
    SortedKeyValueIterator<Key,Value> iter2dc3=iter2.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter2dc4=iter2.deepCopy(new SampleIE(sampleConfig));
    assertEquals(expectedNone,readAll(iter0dc3));
    assertEquals(expectedNone,readAll(iter0dc4));
    assertEquals(expectedAll,readAll(iter1dc3));
    assertEquals(expectedAll,readAll(iter2dc3));
    assertEquals(expectedSample,readAll(iter1dc4));
    assertEquals(expectedSample,readAll(iter2dc4));
    iter1.close();
    iter2.close();
  }
}

</code></pre>

<br>
<pre class="type-9 type-13 type-5 type-18 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Is not executed with the test suite
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @Ignore public void parallelWriteSpeed() throws Exception {
  List<Double> timings=new ArrayList<Double>();
  for (  int threads : new int[]{1,2,16}) {
    final long now=System.currentTimeMillis();
    final long counts[]=new long[threads];
    final InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
    ExecutorService e=Executors.newFixedThreadPool(threads);
    for (int j=0; j < threads; j++) {
      final int threadId=j;
      e.execute(new Runnable(){
        @Override public void run(){
          while (System.currentTimeMillis() - now < 1000) {
            for (int k=0; k < 1000; k++) {
              Mutation m=new Mutation("row");
              m.put("cf","cq",new Value("v".getBytes()));
              List<Mutation> mutations=Collections.singletonList(m);
              imm.mutate(mutations);
              counts[threadId]++;
            }
          }
        }
      }
);
    }
    e.shutdown();
    e.awaitTermination(10,TimeUnit.SECONDS);
    imm.delete(10000);
    double mutationsPerSecond=sum(counts) / ((System.currentTimeMillis() - now) / 1000.);
    timings.add(mutationsPerSecond);
    log.info(String.format("%.1f mutations per second with %d threads",mutationsPerSecond,threads));
  }
  for (int i=0; i < timings.size(); i++) {
    double ratioFirst=timings.get(0) / timings.get(i);
    assertTrue(ratioFirst < 3);
    assertTrue(ratioFirst > 0.3);
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test2() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  MemoryIterator ski1=imm.skvIterator(null);
  mutate(imm,"r1","foo:cq1",3,"bar1");
  MemoryIterator ski2=imm.skvIterator(null);
  ski1.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  assertFalse(ski1.hasTop());
  ski2.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  assertTrue(ski2.hasTop());
  ae(ski2,"r1","foo:cq1",3,"bar1");
  assertFalse(ski2.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test4() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  mutate(imm,"r1","foo:cq1",3,"bar1");
  mutate(imm,"r1","foo:cq1",3,"bar2");
  MemoryIterator ski1=imm.skvIterator(null);
  mutate(imm,"r1","foo:cq1",3,"bar3");
  imm.delete(0);
  ski1.seek(new Range(new Text("r1")),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar2");
  ae(ski1,"r1","foo:cq1",3,"bar1");
  assertFalse(ski1.hasTop());
  ski1.seek(new Range(new Text("r1")),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar2");
  ae(ski1,"r1","foo:cq1",3,"bar1");
  assertFalse(ski1.hasTop());
  ski1.seek(new Range(new Text("r2")),LocalityGroupUtil.EMPTY_CF_SET,false);
  assertFalse(ski1.hasTop());
  ski1.seek(new Range(nk("r1","foo:cq1",3),null),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar2");
  ae(ski1,"r1","foo:cq1",3,"bar1");
  assertFalse(ski1.hasTop());
  ski1.close();
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEmptyNoSampleConfig() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  SamplerConfigurationImpl sampleConfig2=new SamplerConfigurationImpl(RowSampler.class.getName(),ImmutableMap.of("hasher","murmur3_32","modulus","9"));
  MemoryIterator iter=imm.skvIterator(sampleConfig2);
  iter.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  Assert.assertFalse(iter.hasTop());
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test5() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  mutate(imm,"r1","foo:cq1",3,"bar1");
  mutate(imm,"r1","foo:cq1",3,"bar2");
  mutate(imm,"r1","foo:cq1",3,"bar3");
  MemoryIterator ski1=imm.skvIterator(null);
  ski1.seek(new Range(new Text("r1")),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar3");
  imm.delete(0);
  ae(ski1,"r1","foo:cq1",3,"bar2");
  ae(ski1,"r1","foo:cq1",3,"bar1");
  assertFalse(ski1.hasTop());
  ski1.close();
  imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  mutate(imm,"r1","foo:cq1",3,"bar1");
  mutate(imm,"r1","foo:cq2",3,"bar2");
  mutate(imm,"r1","foo:cq3",3,"bar3");
  ski1=imm.skvIterator(null);
  ski1.seek(new Range(new Text("r1")),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar1");
  imm.delete(0);
  ae(ski1,"r1","foo:cq2",3,"bar2");
  ae(ski1,"r1","foo:cq3",3,"bar3");
  assertFalse(ski1.hasTop());
  ski1.close();
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLocalityGroups() throws Exception {
  ConfigurationCopy config=newConfig(tempFolder.newFolder().getAbsolutePath());
  config.set(Property.TABLE_LOCALITY_GROUP_PREFIX + "lg1",LocalityGroupUtil.encodeColumnFamilies(toTextSet("cf1","cf2")));
  config.set(Property.TABLE_LOCALITY_GROUP_PREFIX + "lg2",LocalityGroupUtil.encodeColumnFamilies(toTextSet("cf3","cf4")));
  config.set(Property.TABLE_LOCALITY_GROUPS.getKey(),"lg1,lg2");
  InMemoryMap imm=new InMemoryMap(config);
  Mutation m1=new Mutation("r1");
  m1.put("cf1","x",2,"1");
  m1.put("cf1","y",2,"2");
  m1.put("cf3","z",2,"3");
  m1.put("foo","b",2,"9");
  Mutation m2=new Mutation("r2");
  m2.put("cf2","x",3,"5");
  Mutation m3=new Mutation("r3");
  m3.put("foo","b",4,"6");
  Mutation m4=new Mutation("r4");
  m4.put("foo","b",5,"7");
  m4.put("cf4","z",5,"8");
  Mutation m5=new Mutation("r5");
  m5.put("cf3","z",6,"A");
  m5.put("cf4","z",6,"B");
  imm.mutate(Arrays.asList(m1,m2,m3,m4,m5));
  MemoryIterator iter1=imm.skvIterator(null);
  seekLocalityGroups(iter1);
  SortedKeyValueIterator<Key,Value> dc1=iter1.deepCopy(new SampleIE());
  seekLocalityGroups(dc1);
  assertTrue(imm.getNumEntries() == 10);
  assertTrue(imm.estimatedSizeInBytes() > 0);
  imm.delete(0);
  seekLocalityGroups(iter1);
  seekLocalityGroups(dc1);
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test6() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  mutate(imm,"r1","foo:cq1",3,"bar1");
  mutate(imm,"r1","foo:cq2",3,"bar2");
  mutate(imm,"r1","foo:cq3",3,"bar3");
  mutate(imm,"r1","foo:cq4",3,"bar4");
  MemoryIterator ski1=imm.skvIterator(null);
  mutate(imm,"r1","foo:cq5",3,"bar5");
  SortedKeyValueIterator<Key,Value> dc=ski1.deepCopy(new SampleIE());
  ski1.seek(new Range(nk("r1","foo:cq1",3),null),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar1");
  dc.seek(new Range(nk("r1","foo:cq2",3),null),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(dc,"r1","foo:cq2",3,"bar2");
  imm.delete(0);
  ae(ski1,"r1","foo:cq2",3,"bar2");
  ae(dc,"r1","foo:cq3",3,"bar3");
  ae(ski1,"r1","foo:cq3",3,"bar3");
  ae(dc,"r1","foo:cq4",3,"bar4");
  ae(ski1,"r1","foo:cq4",3,"bar4");
  assertFalse(ski1.hasTop());
  assertFalse(dc.hasTop());
  ski1.seek(new Range(nk("r1","foo:cq3",3),null),LocalityGroupUtil.EMPTY_CF_SET,false);
  dc.seek(new Range(nk("r1","foo:cq4",3),null),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(dc,"r1","foo:cq4",3,"bar4");
  assertFalse(dc.hasTop());
  ae(ski1,"r1","foo:cq3",3,"bar3");
  ae(ski1,"r1","foo:cq4",3,"bar4");
  assertFalse(ski1.hasTop());
  assertFalse(dc.hasTop());
  ski1.close();
}

</code></pre>

<br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBug1() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  for (int i=0; i < 20; i++) {
    mutate(imm,"r1","foo:cq" + i,3,"bar" + i);
  }
  for (int i=0; i < 20; i++) {
    mutate(imm,"r2","foo:cq" + i,3,"bar" + i);
  }
  MemoryIterator ski1=imm.skvIterator(null);
  ColumnFamilySkippingIterator cfsi=new ColumnFamilySkippingIterator(ski1);
  imm.delete(0);
  ArrayList<ByteSequence> columns=new ArrayList<ByteSequence>();
  columns.add(new ArrayByteSequence("bar"));
  cfsi.seek(new Range("r1"),columns,true);
  assertFalse(cfsi.hasTop());
  ski1.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.TservConstraintEnvTest </h4><pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetAuthorizationsContainer() throws ThriftSecurityException {
  SecurityOperation security=createMock(SecurityOperation.class);
  TCredentials goodCred=createMock(TCredentials.class);
  TCredentials badCred=createMock(TCredentials.class);
  ByteSequence bs=new ArrayByteSequence("foo".getBytes());
  List<ByteBuffer> bbList=Collections.<ByteBuffer>singletonList(ByteBuffer.wrap(bs.getBackingArray(),bs.offset(),bs.length()));
  expect(security.userHasAuthorizations(goodCred,bbList)).andReturn(true);
  expect(security.userHasAuthorizations(badCred,bbList)).andReturn(false);
  replay(security);
  assertTrue(new TservConstraintEnv(security,goodCred).getAuthorizationsContainer().contains(bs));
  assertFalse(new TservConstraintEnv(security,badCred).getAuthorizationsContainer().contains(bs));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.compaction.DefaultCompactionStrategyTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetCompactionPlan() throws Exception {
  DefaultCompactionStrategy s=new DefaultCompactionStrategy();
  MajorCompactionRequest request=createRequest(MajorCompactionReason.IDLE,"file1",10,"file2",10);
  s.gatherInformation(request);
  CompactionPlan plan=s.getCompactionPlan(request);
  assertTrue(plan.inputFiles.isEmpty());
  request=createRequest(MajorCompactionReason.IDLE,"file1",10,"file2",10,"file3",10);
  s.gatherInformation(request);
  plan=s.getCompactionPlan(request);
  assertEquals(3,plan.inputFiles.size());
  request=createRequest(MajorCompactionReason.USER,"file1",10,"file2",10);
  s.gatherInformation(request);
  plan=s.getCompactionPlan(request);
  assertEquals(2,plan.inputFiles.size());
  request=createRequest(MajorCompactionReason.NORMAL,"file0",100,"file1",10,"file2",10,"file3",10);
  s.gatherInformation(request);
  plan=s.getCompactionPlan(request);
  assertEquals(3,plan.inputFiles.size());
  assertEquals(asStringSet(plan.inputFiles),asSet("file1,file2,file3".split(",")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.compaction.SizeLimitCompactionStrategyTest </h4><pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLimits() throws IOException {
  SizeLimitCompactionStrategy slcs=new SizeLimitCompactionStrategy();
  HashMap<String,String> opts=new HashMap<String,String>();
  opts.put(SizeLimitCompactionStrategy.SIZE_LIMIT_OPT,"1G");
  slcs.init(opts);
  KeyExtent ke=new KeyExtent(new Text("0"),null,null);
  MajorCompactionRequest mcr=new MajorCompactionRequest(ke,MajorCompactionReason.NORMAL,null,AccumuloConfiguration.getDefaultConfiguration());
  mcr.setFiles(nfl("f1","2G","f2","2G","f3","2G","f4","2G"));
  Assert.assertFalse(slcs.shouldCompact(mcr));
  Assert.assertEquals(0,slcs.getCompactionPlan(mcr).inputFiles.size());
  Assert.assertEquals(4,mcr.getFiles().size());
  mcr.setFiles(nfl("f1","2G","f2","2G","f3","2G","f4","2G","f5","500M","f6","500M","f7","500M","f8","500M"));
  Assert.assertTrue(slcs.shouldCompact(mcr));
  Assert.assertEquals(nfl("f5","500M","f6","500M","f7","500M","f8","500M").keySet(),new HashSet<FileRef>(slcs.getCompactionPlan(mcr).inputFiles));
  Assert.assertEquals(8,mcr.getFiles().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.log.MultiReaderTest </h4><pre class="type-13 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiReader() throws IOException {
  Path manyMaps=new Path("file://" + root.getRoot().getAbsolutePath() + "/manyMaps");
  MultiReader reader=new MultiReader(fs,manyMaps);
  IntWritable key=new IntWritable();
  BytesWritable value=new BytesWritable();
  for (int i=0; i < 1000; i++) {
    if (i == 10)     continue;
    assertTrue(reader.next(key,value));
    assertEquals(i,key.get());
  }
  assertEquals(value.compareTo(new BytesWritable("someValue".getBytes())),0);
  assertFalse(reader.next(key,value));
  key.set(500);
  assertTrue(reader.seek(key));
  scan(reader,500);
  key.set(10);
  assertFalse(reader.seek(key));
  scan(reader,10);
  key.set(1000);
  assertFalse(reader.seek(key));
  assertFalse(reader.next(key,value));
  key.set(-1);
  assertFalse(reader.seek(key));
  key.set(0);
  assertTrue(reader.next(key,value));
  assertEquals(0,key.get());
  reader.close();
  fs.deleteRecursively(new Path(manyMaps,"even"));
  reader=new MultiReader(fs,manyMaps);
  key.set(501);
  assertTrue(reader.seek(key));
  scanOdd(reader,501);
  key.set(1000);
  assertFalse(reader.seek(key));
  assertFalse(reader.next(key,value));
  key.set(-1);
  assertFalse(reader.seek(key));
  key.set(1);
  assertTrue(reader.next(key,value));
  assertEquals(1,key.get());
  reader.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.logger.LogFileTest </h4><pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEventType(){
  assertEquals(LogFileKey.eventType(MUTATION),LogFileKey.eventType(MANY_MUTATIONS));
  assertEquals(LogFileKey.eventType(COMPACTION_START),LogFileKey.eventType(COMPACTION_FINISH));
  assertTrue(LogFileKey.eventType(DEFINE_TABLET) < LogFileKey.eventType(COMPACTION_FINISH));
  assertTrue(LogFileKey.eventType(COMPACTION_FINISH) < LogFileKey.eventType(MUTATION));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.accumulo.tserver.replication.AccumuloReplicaSystemTest </h4><pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mutationsNotReReplicatedToPeers() throws Exception {
  AccumuloReplicaSystem ars=new AccumuloReplicaSystem();
  Map<String,String> confMap=new HashMap<>();
  confMap.put(Property.REPLICATION_NAME.getKey(),"source");
  AccumuloConfiguration conf=new ConfigurationCopy(confMap);
  ars.setConf(conf);
  LogFileValue value=new LogFileValue();
  value.mutations=new ArrayList<>();
  Mutation m=new Mutation("row");
  m.put("","",new Value(new byte[0]));
  value.mutations.add(m);
  m=new Mutation("row2");
  m.put("","",new Value(new byte[0]));
  m.addReplicationSource("peer");
  value.mutations.add(m);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutputStream out=new DataOutputStream(baos);
  ars.writeValueAvoidingReplicationCycles(out,value,new ReplicationTarget("peer","1","1"));
  out.close();
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  DataInputStream in=new DataInputStream(bais);
  int numMutations=in.readInt();
  Assert.assertEquals(1,numMutations);
  m=new Mutation();
  m.readFields(in);
  Assert.assertEquals("row",new String(m.getRow()));
  Assert.assertEquals(1,m.getReplicationSources().size());
  Assert.assertTrue("Expected source cluster to be listed in mutation replication source",m.getReplicationSources().contains("source"));
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
