<h3 style="margin:0px">Class: org.apache.accumulo.tserver.InMemoryMapTest (17 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(10)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(10)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(5)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="13"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('13')" data-toggle="tooltip" title="Verifies assertions in iterations"><kbd id="tag-13"class="label-info"style="display: inline-block;font-size:7pt" >IterativeVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >ExceptionVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="18"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('18')" data-toggle="tooltip" title="Is not executed with the test suite"><kbd id="tag-18"class="label-info"style="display: inline-block;font-size:7pt" >IgnoredMethod&nbsp;(1)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test3() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  mutate(imm,"r1","foo:cq1",3,"bar1");
  mutate(imm,"r1","foo:cq1",3,"bar2");
  MemoryIterator ski1=imm.skvIterator(null);
  mutate(imm,"r1","foo:cq1",3,"bar3");
  mutate(imm,"r3","foo:cq1",3,"bar9");
  mutate(imm,"r3","foo:cq1",3,"bara");
  MemoryIterator ski2=imm.skvIterator(null);
  ski1.seek(new Range(new Text("r1")),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar2");
  ae(ski1,"r1","foo:cq1",3,"bar1");
  assertFalse(ski1.hasTop());
  ski2.seek(new Range(new Text("r3")),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski2,"r3","foo:cq1",3,"bara");
  ae(ski2,"r3","foo:cq1",3,"bar9");
  assertFalse(ski1.hasTop());
}

</code></pre>

<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSample() throws Exception {
  SamplerConfigurationImpl sampleConfig=new SamplerConfigurationImpl(RowSampler.class.getName(),ImmutableMap.of("hasher","murmur3_32","modulus","7"));
  Sampler sampler=SamplerFactory.newSampler(sampleConfig,DefaultConfiguration.getInstance());
  ConfigurationCopy config1=newConfig(tempFolder.newFolder().getAbsolutePath());
  for (  Entry<String,String> entry : sampleConfig.toTablePropertiesMap().entrySet()) {
    config1.set(entry.getKey(),entry.getValue());
  }
  ConfigurationCopy config2=newConfig(tempFolder.newFolder().getAbsolutePath());
  config2.set(Property.TABLE_LOCALITY_GROUP_PREFIX + "lg1",LocalityGroupUtil.encodeColumnFamilies(toTextSet("cf2")));
  config2.set(Property.TABLE_LOCALITY_GROUPS.getKey(),"lg1");
  for (  Entry<String,String> entry : sampleConfig.toTablePropertiesMap().entrySet()) {
    config2.set(entry.getKey(),entry.getValue());
  }
  for (  ConfigurationCopy config : Arrays.asList(config1,config2)) {
    InMemoryMap imm=new InMemoryMap(config);
    TreeMap<Key,Value> expectedSample=new TreeMap<>();
    TreeMap<Key,Value> expectedAll=new TreeMap<>();
    TreeMap<Key,Value> expectedNone=new TreeMap<>();
    MemoryIterator iter0=imm.skvIterator(sampleConfig);
    for (int r=0; r < 100; r++) {
      String row=String.format("r%06d",r);
      mutate(imm,row,"cf1:cq1",5,"v" + (2 * r),sampler,expectedSample,expectedAll);
      mutate(imm,row,"cf2:cq2",5,"v" + ((2 * r) + 1),sampler,expectedSample,expectedAll);
    }
    assertTrue(expectedSample.size() > 0);
    MemoryIterator iter1=imm.skvIterator(sampleConfig);
    MemoryIterator iter2=imm.skvIterator(null);
    SortedKeyValueIterator<Key,Value> iter0dc1=iter0.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter0dc2=iter0.deepCopy(new SampleIE(sampleConfig));
    SortedKeyValueIterator<Key,Value> iter1dc1=iter1.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter1dc2=iter1.deepCopy(new SampleIE(sampleConfig));
    SortedKeyValueIterator<Key,Value> iter2dc1=iter2.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter2dc2=iter2.deepCopy(new SampleIE(sampleConfig));
    assertEquals(expectedNone,readAll(iter0));
    assertEquals(expectedNone,readAll(iter0dc1));
    assertEquals(expectedNone,readAll(iter0dc2));
    assertEquals(expectedSample,readAll(iter1));
    assertEquals(expectedAll,readAll(iter2));
    assertEquals(expectedAll,readAll(iter1dc1));
    assertEquals(expectedAll,readAll(iter2dc1));
    assertEquals(expectedSample,readAll(iter1dc2));
    assertEquals(expectedSample,readAll(iter2dc2));
    imm.delete(0);
    assertEquals(expectedNone,readAll(iter0));
    assertEquals(expectedNone,readAll(iter0dc1));
    assertEquals(expectedNone,readAll(iter0dc2));
    assertEquals(expectedSample,readAll(iter1));
    assertEquals(expectedAll,readAll(iter2));
    assertEquals(expectedAll,readAll(iter1dc1));
    assertEquals(expectedAll,readAll(iter2dc1));
    assertEquals(expectedSample,readAll(iter1dc2));
    assertEquals(expectedSample,readAll(iter2dc2));
    SortedKeyValueIterator<Key,Value> iter0dc3=iter0.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter0dc4=iter0.deepCopy(new SampleIE(sampleConfig));
    SortedKeyValueIterator<Key,Value> iter1dc3=iter1.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter1dc4=iter1.deepCopy(new SampleIE(sampleConfig));
    SortedKeyValueIterator<Key,Value> iter2dc3=iter2.deepCopy(new SampleIE());
    SortedKeyValueIterator<Key,Value> iter2dc4=iter2.deepCopy(new SampleIE(sampleConfig));
    assertEquals(expectedNone,readAll(iter0dc3));
    assertEquals(expectedNone,readAll(iter0dc4));
    assertEquals(expectedAll,readAll(iter1dc3));
    assertEquals(expectedAll,readAll(iter2dc3));
    assertEquals(expectedSample,readAll(iter1dc4));
    assertEquals(expectedSample,readAll(iter2dc4));
    iter1.close();
    iter2.close();
  }
}

</code></pre>

<pre class="type-9 type-13 type-5 type-18 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies boolean conditions
- Is not executed with the test suite
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @Ignore public void parallelWriteSpeed() throws Exception {
  List<Double> timings=new ArrayList<Double>();
  for (  int threads : new int[]{1,2,16}) {
    final long now=System.currentTimeMillis();
    final long counts[]=new long[threads];
    final InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
    ExecutorService e=Executors.newFixedThreadPool(threads);
    for (int j=0; j < threads; j++) {
      final int threadId=j;
      e.execute(new Runnable(){
        @Override public void run(){
          while (System.currentTimeMillis() - now < 1000) {
            for (int k=0; k < 1000; k++) {
              Mutation m=new Mutation("row");
              m.put("cf","cq",new Value("v".getBytes()));
              List<Mutation> mutations=Collections.singletonList(m);
              imm.mutate(mutations);
              counts[threadId]++;
            }
          }
        }
      }
);
    }
    e.shutdown();
    e.awaitTermination(10,TimeUnit.SECONDS);
    imm.delete(10000);
    double mutationsPerSecond=sum(counts) / ((System.currentTimeMillis() - now) / 1000.);
    timings.add(mutationsPerSecond);
    log.info(String.format("%.1f mutations per second with %d threads",mutationsPerSecond,threads));
  }
  for (int i=0; i < timings.size(); i++) {
    double ratioFirst=timings.get(0) / timings.get(i);
    assertTrue(ratioFirst < 3);
    assertTrue(ratioFirst > 0.3);
  }
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=SampleNotPresentException.class) public void testDifferentSampleConfig() throws Exception {
  SamplerConfigurationImpl sampleConfig=new SamplerConfigurationImpl(RowSampler.class.getName(),ImmutableMap.of("hasher","murmur3_32","modulus","7"));
  ConfigurationCopy config1=newConfig(tempFolder.newFolder().getAbsolutePath());
  for (  Entry<String,String> entry : sampleConfig.toTablePropertiesMap().entrySet()) {
    config1.set(entry.getKey(),entry.getValue());
  }
  InMemoryMap imm=new InMemoryMap(config1);
  mutate(imm,"r","cf:cq",5,"b");
  SamplerConfigurationImpl sampleConfig2=new SamplerConfigurationImpl(RowSampler.class.getName(),ImmutableMap.of("hasher","murmur3_32","modulus","9"));
  MemoryIterator iter=imm.skvIterator(sampleConfig2);
  iter.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
}

</code></pre>

<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test2() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  MemoryIterator ski1=imm.skvIterator(null);
  mutate(imm,"r1","foo:cq1",3,"bar1");
  MemoryIterator ski2=imm.skvIterator(null);
  ski1.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  assertFalse(ski1.hasTop());
  ski2.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  assertTrue(ski2.hasTop());
  ae(ski2,"r1","foo:cq1",3,"bar1");
  assertFalse(ski2.hasTop());
}

</code></pre>

<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeferredSamplerCreation() throws Exception {
  SamplerConfigurationImpl sampleConfig1=new SamplerConfigurationImpl(RowSampler.class.getName(),ImmutableMap.of("hasher","murmur3_32","modulus","9"));
  ConfigurationCopy config1=newConfig(tempFolder.newFolder().getAbsolutePath());
  for (  Entry<String,String> entry : sampleConfig1.toTablePropertiesMap().entrySet()) {
    config1.set(entry.getKey(),entry.getValue());
  }
  InMemoryMap imm=new InMemoryMap(config1);
  SamplerConfigurationImpl sampleConfig2=new SamplerConfigurationImpl(RowSampler.class.getName(),ImmutableMap.of("hasher","murmur3_32","modulus","7"));
  for (  Entry<String,String> entry : sampleConfig2.toTablePropertiesMap().entrySet()) {
    config1.set(entry.getKey(),entry.getValue());
  }
  TreeMap<Key,Value> expectedSample=new TreeMap<>();
  TreeMap<Key,Value> expectedAll=new TreeMap<>();
  Sampler sampler=SamplerFactory.newSampler(sampleConfig2,config1);
  for (int i=0; i < 100; i++) {
    mutate(imm,"r" + i,"cf:cq",5,"v" + i,sampler,expectedSample,expectedAll);
  }
  MemoryIterator iter=imm.skvIterator(sampleConfig2);
  iter.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  Assert.assertEquals(expectedSample,readAll(iter));
  SortedKeyValueIterator<Key,Value> dc=iter.deepCopy(new SampleIE(sampleConfig2));
  dc.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  Assert.assertEquals(expectedSample,readAll(dc));
  iter=imm.skvIterator(null);
  iter.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  Assert.assertEquals(expectedAll,readAll(iter));
  iter=imm.skvIterator(sampleConfig1);
  thrown.expect(SampleNotPresentException.class);
  iter.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
}

</code></pre>

<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test4() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  mutate(imm,"r1","foo:cq1",3,"bar1");
  mutate(imm,"r1","foo:cq1",3,"bar2");
  MemoryIterator ski1=imm.skvIterator(null);
  mutate(imm,"r1","foo:cq1",3,"bar3");
  imm.delete(0);
  ski1.seek(new Range(new Text("r1")),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar2");
  ae(ski1,"r1","foo:cq1",3,"bar1");
  assertFalse(ski1.hasTop());
  ski1.seek(new Range(new Text("r1")),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar2");
  ae(ski1,"r1","foo:cq1",3,"bar1");
  assertFalse(ski1.hasTop());
  ski1.seek(new Range(new Text("r2")),LocalityGroupUtil.EMPTY_CF_SET,false);
  assertFalse(ski1.hasTop());
  ski1.seek(new Range(nk("r1","foo:cq1",3),null),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar2");
  ae(ski1,"r1","foo:cq1",3,"bar1");
  assertFalse(ski1.hasTop());
  ski1.close();
}

</code></pre>

<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEmptyNoSampleConfig() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  SamplerConfigurationImpl sampleConfig2=new SamplerConfigurationImpl(RowSampler.class.getName(),ImmutableMap.of("hasher","murmur3_32","modulus","9"));
  MemoryIterator iter=imm.skvIterator(sampleConfig2);
  iter.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  Assert.assertFalse(iter.hasTop());
}

</code></pre>

<pre class="type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testDeepCopyAndDelete() throws Exception {
  for (int i=0; i <= 4; i++)   deepCopyAndDelete(i,false);
  for (int i=1; i <= 4; i++)   try {
    deepCopyAndDelete(i,true);
    fail("i = " + i);
  }
 catch (  IterationInterruptedException iie) {
  }
}

</code></pre>

<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test5() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  mutate(imm,"r1","foo:cq1",3,"bar1");
  mutate(imm,"r1","foo:cq1",3,"bar2");
  mutate(imm,"r1","foo:cq1",3,"bar3");
  MemoryIterator ski1=imm.skvIterator(null);
  ski1.seek(new Range(new Text("r1")),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar3");
  imm.delete(0);
  ae(ski1,"r1","foo:cq1",3,"bar2");
  ae(ski1,"r1","foo:cq1",3,"bar1");
  assertFalse(ski1.hasTop());
  ski1.close();
  imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  mutate(imm,"r1","foo:cq1",3,"bar1");
  mutate(imm,"r1","foo:cq2",3,"bar2");
  mutate(imm,"r1","foo:cq3",3,"bar3");
  ski1=imm.skvIterator(null);
  ski1.seek(new Range(new Text("r1")),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar1");
  imm.delete(0);
  ae(ski1,"r1","foo:cq2",3,"bar2");
  ae(ski1,"r1","foo:cq3",3,"bar3");
  assertFalse(ski1.hasTop());
  ski1.close();
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=SampleNotPresentException.class) public void testNoSampleConfig() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  mutate(imm,"r","cf:cq",5,"b");
  SamplerConfigurationImpl sampleConfig2=new SamplerConfigurationImpl(RowSampler.class.getName(),ImmutableMap.of("hasher","murmur3_32","modulus","9"));
  MemoryIterator iter=imm.skvIterator(sampleConfig2);
  iter.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testDuplicateKey() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  Mutation m=new Mutation(new Text("r1"));
  m.put(new Text("foo"),new Text("cq"),3,new Value("v1".getBytes()));
  m.put(new Text("foo"),new Text("cq"),3,new Value("v2".getBytes()));
  imm.mutate(Collections.singletonList(m));
  MemoryIterator skvi1=imm.skvIterator(null);
  skvi1.seek(new Range(),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(skvi1,"r1","foo:cq",3,"v2");
  ae(skvi1,"r1","foo:cq",3,"v1");
}

</code></pre>

<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLocalityGroups() throws Exception {
  ConfigurationCopy config=newConfig(tempFolder.newFolder().getAbsolutePath());
  config.set(Property.TABLE_LOCALITY_GROUP_PREFIX + "lg1",LocalityGroupUtil.encodeColumnFamilies(toTextSet("cf1","cf2")));
  config.set(Property.TABLE_LOCALITY_GROUP_PREFIX + "lg2",LocalityGroupUtil.encodeColumnFamilies(toTextSet("cf3","cf4")));
  config.set(Property.TABLE_LOCALITY_GROUPS.getKey(),"lg1,lg2");
  InMemoryMap imm=new InMemoryMap(config);
  Mutation m1=new Mutation("r1");
  m1.put("cf1","x",2,"1");
  m1.put("cf1","y",2,"2");
  m1.put("cf3","z",2,"3");
  m1.put("foo","b",2,"9");
  Mutation m2=new Mutation("r2");
  m2.put("cf2","x",3,"5");
  Mutation m3=new Mutation("r3");
  m3.put("foo","b",4,"6");
  Mutation m4=new Mutation("r4");
  m4.put("foo","b",5,"7");
  m4.put("cf4","z",5,"8");
  Mutation m5=new Mutation("r5");
  m5.put("cf3","z",6,"A");
  m5.put("cf4","z",6,"B");
  imm.mutate(Arrays.asList(m1,m2,m3,m4,m5));
  MemoryIterator iter1=imm.skvIterator(null);
  seekLocalityGroups(iter1);
  SortedKeyValueIterator<Key,Value> dc1=iter1.deepCopy(new SampleIE());
  seekLocalityGroups(dc1);
  assertTrue(imm.getNumEntries() == 10);
  assertTrue(imm.estimatedSizeInBytes() > 0);
  imm.delete(0);
  seekLocalityGroups(iter1);
  seekLocalityGroups(dc1);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInterruptingSample() throws Exception {
  runInterruptSampleTest(false,false,false);
  runInterruptSampleTest(false,true,false);
  runInterruptSampleTest(true,false,false);
  runInterruptSampleTest(true,true,false);
  runInterruptSampleTest(true,true,true);
}

</code></pre>

<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test6() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  mutate(imm,"r1","foo:cq1",3,"bar1");
  mutate(imm,"r1","foo:cq2",3,"bar2");
  mutate(imm,"r1","foo:cq3",3,"bar3");
  mutate(imm,"r1","foo:cq4",3,"bar4");
  MemoryIterator ski1=imm.skvIterator(null);
  mutate(imm,"r1","foo:cq5",3,"bar5");
  SortedKeyValueIterator<Key,Value> dc=ski1.deepCopy(new SampleIE());
  ski1.seek(new Range(nk("r1","foo:cq1",3),null),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(ski1,"r1","foo:cq1",3,"bar1");
  dc.seek(new Range(nk("r1","foo:cq2",3),null),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(dc,"r1","foo:cq2",3,"bar2");
  imm.delete(0);
  ae(ski1,"r1","foo:cq2",3,"bar2");
  ae(dc,"r1","foo:cq3",3,"bar3");
  ae(ski1,"r1","foo:cq3",3,"bar3");
  ae(dc,"r1","foo:cq4",3,"bar4");
  ae(ski1,"r1","foo:cq4",3,"bar4");
  assertFalse(ski1.hasTop());
  assertFalse(dc.hasTop());
  ski1.seek(new Range(nk("r1","foo:cq3",3),null),LocalityGroupUtil.EMPTY_CF_SET,false);
  dc.seek(new Range(nk("r1","foo:cq4",3),null),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(dc,"r1","foo:cq4",3,"bar4");
  assertFalse(dc.hasTop());
  ae(ski1,"r1","foo:cq3",3,"bar3");
  ae(ski1,"r1","foo:cq4",3,"bar4");
  assertFalse(ski1.hasTop());
  assertFalse(dc.hasTop());
  ski1.close();
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testSeekBackWards() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  mutate(imm,"r1","foo:cq1",3,"bar1");
  mutate(imm,"r1","foo:cq2",3,"bar2");
  mutate(imm,"r1","foo:cq3",3,"bar3");
  mutate(imm,"r1","foo:cq4",3,"bar4");
  MemoryIterator skvi1=imm.skvIterator(null);
  skvi1.seek(new Range(nk("r1","foo:cq3",3),null),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(skvi1,"r1","foo:cq3",3,"bar3");
  skvi1.seek(new Range(nk("r1","foo:cq1",3),null),LocalityGroupUtil.EMPTY_CF_SET,false);
  ae(skvi1,"r1","foo:cq1",3,"bar1");
}

</code></pre>

<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testBug1() throws Exception {
  InMemoryMap imm=newInMemoryMap(false,tempFolder.newFolder().getAbsolutePath());
  for (int i=0; i < 20; i++) {
    mutate(imm,"r1","foo:cq" + i,3,"bar" + i);
  }
  for (int i=0; i < 20; i++) {
    mutate(imm,"r2","foo:cq" + i,3,"bar" + i);
  }
  MemoryIterator ski1=imm.skvIterator(null);
  ColumnFamilySkippingIterator cfsi=new ColumnFamilySkippingIterator(ski1);
  imm.delete(0);
  ArrayList<ByteSequence> columns=new ArrayList<ByteSequence>();
  columns.add(new ArrayByteSequence("bar"));
  cfsi.seek(new Range("r1"),columns,true);
  assertFalse(cfsi.hasTop());
  ski1.close();
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
