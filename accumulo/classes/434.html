<h3 style="margin:0px">Class: org.apache.accumulo.test.proxy.SimpleProxyBase (98 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(64)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >ExceptionVerifier&nbsp;(63)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(23)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(17)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(16)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(13)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(11)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies assertions inside branch conditions"><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >BranchVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="17"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('17')" data-toggle="tooltip" title="Releases resources used by the test cases"><kbd id="tag-17"class="label-info"style="display: inline-block;font-size:7pt" >TestCleaner&nbsp;(2)</kbd></button>&nbsp;<button id="13"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('13')" data-toggle="tooltip" title="Verifies assertions in iterations"><kbd id="tag-13"class="label-info"style="display: inline-block;font-size:7pt" >IterativeVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void addConstraintLoginFailure() throws Exception {
  client.addConstraint(badLogin,table,NumericValueConstraint.class.getName());
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void offlineTableLoginFailure() throws Exception {
  client.offlineTable(badLogin,table,false);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void getTablePropertiesLoginFailure() throws Exception {
  client.getTableProperties(badLogin,table);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void onlineTableLoginFailure() throws Exception {
  client.onlineTable(badLogin,table,false);
}

</code></pre>

<pre class="type-11 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void userAuthentication() throws Exception {
  if (isKerberosEnabled()) {
    assertTrue(client.authenticateUser(creds,clientPrincipal,Collections.<String,String>emptyMap()));
  }
 else {
    assertTrue(client.authenticateUser(creds,"root",s2pp(SharedMiniClusterBase.getRootPassword())));
    assertFalse(client.authenticateUser(creds,"root",s2pp("")));
  }
}

</code></pre>

<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void tableMergesAndSplits() throws Exception {
  client.addSplits(creds,table,new HashSet<ByteBuffer>(Arrays.asList(s2bb("a"),s2bb("m"),s2bb("z"))));
  List<ByteBuffer> splits=client.listSplits(creds,table,1);
  assertEquals(Arrays.asList(s2bb("m")),splits);
  client.mergeTablets(creds,table,null,s2bb("m"));
  splits=client.listSplits(creds,table,10);
  assertEquals(Arrays.asList(s2bb("m"),s2bb("z")),splits);
  client.mergeTablets(creds,table,null,null);
  splits=client.listSplits(creds,table,10);
  List<ByteBuffer> empty=Collections.emptyList();
  assertEquals(empty,splits);
}

</code></pre>

<pre class="type-9 type-13 type-8 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConditionalWriter() throws Exception {
  log.debug("Adding constraint {} to {}",table,NumericValueConstraint.class.getName());
  client.addConstraint(creds,table,NumericValueConstraint.class.getName());
  sleepUninterruptibly(ZOOKEEPER_PROPAGATION_TIME,TimeUnit.MILLISECONDS);
  while (!client.listConstraints(creds,table).containsKey(NumericValueConstraint.class.getName())) {
    log.info("Failed to see constraint");
    Thread.sleep(1000);
  }
  String cwid=client.createConditionalWriter(creds,table,new ConditionalWriterOptions());
  Map<ByteBuffer,ConditionalUpdates> updates=new HashMap<ByteBuffer,ConditionalUpdates>();
  updates.put(s2bb("00345"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq")),Arrays.asList(newColUpdate("meta","seq",10,"1"),newColUpdate("data","img","73435435"))));
  Map<ByteBuffer,ConditionalStatus> results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00345")));
  assertScan(new String[][]{{"00345","data","img","73435435"},{"00345","meta","seq","1"}},table);
  updates.clear();
  updates.put(s2bb("00345"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq")),Arrays.asList(newColUpdate("meta","seq","2"))));
  updates.put(s2bb("00346"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq")),Arrays.asList(newColUpdate("meta","seq","1"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(2,results.size());
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00345")));
  assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00346")));
  assertScan(new String[][]{{"00345","data","img","73435435"},{"00345","meta","seq","1"},{"00346","meta","seq","1"}},table);
  updates.clear();
  updates.put(s2bb("00345"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq","1")),Arrays.asList(newColUpdate("meta","seq",20,"2"),newColUpdate("data","img","567890"))));
  updates.put(s2bb("00346"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq","2")),Arrays.asList(newColUpdate("meta","seq","3"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(2,results.size());
  assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00345")));
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00346")));
  assertScan(new String[][]{{"00345","data","img","567890"},{"00345","meta","seq","2"},{"00346","meta","seq","1"}},table);
  updates.clear();
  updates.put(s2bb("00345"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq",10,"2")),Arrays.asList(newColUpdate("meta","seq",30,"3"),newColUpdate("data","img","1234567890"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00345")));
  assertScan(new String[][]{{"00345","data","img","567890"},{"00345","meta","seq","2"},{"00346","meta","seq","1"}},table);
  updates.clear();
  updates.put(s2bb("00345"),new ConditionalUpdates(Arrays.asList(newCondition("meta","seq",20,"2")),Arrays.asList(newColUpdate("meta","seq",30,"3"),newColUpdate("data","img","1234567890"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00345")));
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"}},table);
  client.updateAndFlush(creds,table,Collections.singletonMap(s2bb("00347"),Arrays.asList(newColUpdate("data","count","1"))));
  client.updateAndFlush(creds,table,Collections.singletonMap(s2bb("00347"),Arrays.asList(newColUpdate("data","count","1"))));
  client.updateAndFlush(creds,table,Collections.singletonMap(s2bb("00347"),Arrays.asList(newColUpdate("data","count","1"))));
  updates.clear();
  updates.put(s2bb("00347"),new ConditionalUpdates(Arrays.asList(newCondition("data","count","3")),Arrays.asList(newColUpdate("data","img","1234567890"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00347")));
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","1"}},table);
  Condition iterCond=newCondition("data","count","3");
  Map<String,String> props=new HashMap<String,String>();
  props.put("type","STRING");
  props.put("columns","data:count");
  IteratorSetting is=new IteratorSetting(1,"sumc",SummingCombiner.class.getName(),props);
  iterCond.setIterators(Arrays.asList(is));
  updates.clear();
  updates.put(s2bb("00347"),new ConditionalUpdates(Arrays.asList(iterCond),Arrays.asList(newColUpdate("data","img","1234567890"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00347")));
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","1"},{"00347","data","img","1234567890"}},table);
  ConditionalStatus status=null;
  for (int i=0; i < 30; i++) {
    updates.clear();
    updates.put(s2bb("00347"),new ConditionalUpdates(Arrays.asList(newCondition("data","img","1234567890")),Arrays.asList(newColUpdate("data","count","A"))));
    results=client.updateRowsConditionally(cwid,updates);
    assertEquals(1,results.size());
    status=results.get(s2bb("00347"));
    if (ConditionalStatus.VIOLATED != status) {
      log.info("ConditionalUpdate was not rejected by server due to table constraint. Sleeping and retrying");
      Thread.sleep(5000);
      continue;
    }
    assertEquals(ConditionalStatus.VIOLATED,status);
    break;
  }
  assertEquals(ConditionalStatus.VIOLATED,status);
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","1"},{"00347","data","img","1234567890"}},table);
  updates.clear();
  updates.put(s2bb("00347"),new ConditionalUpdates(Arrays.asList(newCondition("data","img","565"),newCondition("data","count","2")),Arrays.asList(newColUpdate("data","count","3"),newColUpdate("data","img","0987654321"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00347")));
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","1"},{"00347","data","img","1234567890"}},table);
  updates.clear();
  updates.put(s2bb("00347"),new ConditionalUpdates(Arrays.asList(newCondition("data","img","1234567890"),newCondition("data","count","2")),Arrays.asList(newColUpdate("data","count","3"),newColUpdate("data","img","0987654321"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00347")));
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","1"},{"00347","data","img","1234567890"}},table);
  updates.clear();
  updates.put(s2bb("00347"),new ConditionalUpdates(Arrays.asList(newCondition("data","img","565"),newCondition("data","count","1")),Arrays.asList(newColUpdate("data","count","3"),newColUpdate("data","img","0987654321"))));
  results=client.updateRowsConditionally(cwid,updates);
  assertEquals(1,results.size());
  assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00347")));
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","1"},{"00347","data","img","1234567890"}},table);
  ConditionalStatus result=client.updateRowConditionally(creds,table,s2bb("00347"),new ConditionalUpdates(Arrays.asList(newCondition("data","img","1234567890"),newCondition("data","count","1")),Arrays.asList(newColUpdate("data","count","3"),newColUpdate("data","img","0987654321"))));
  assertEquals(ConditionalStatus.ACCEPTED,result);
  assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","3"},{"00347","data","img","0987654321"}},table);
  client.closeConditionalWriter(cwid);
  try {
    client.updateRowsConditionally(cwid,updates);
    fail("conditional writer not closed");
  }
 catch (  UnknownWriter uk) {
  }
  String principal;
  ClusterUser cwuser=null;
  if (isKerberosEnabled()) {
    cwuser=getKdc().getClientPrincipal(1);
    principal=cwuser.getPrincipal();
    client.createLocalUser(creds,principal,s2bb("unused"));
  }
 else {
    principal="cwuser";
    client.createLocalUser(creds,principal,s2bb("bestpasswordever"));
  }
  client.changeUserAuthorizations(creds,principal,Collections.singleton(s2bb("A")));
  client.grantTablePermission(creds,principal,table,TablePermission.WRITE);
  client.grantTablePermission(creds,principal,table,TablePermission.READ);
  TestProxyClient cwuserProxyClient=null;
  Client origClient=null;
  Map<String,String> cwProperties;
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(cwuser.getPrincipal(),cwuser.getKeytab().getAbsolutePath());
    final UserGroupInformation cwuserUgi=UserGroupInformation.getCurrentUser();
    cwuserProxyClient=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,cwuserUgi);
    origClient=client;
    client=cwuserProxyClient.proxy();
    cwProperties=Collections.emptyMap();
  }
 else {
    cwProperties=Collections.singletonMap("password","bestpasswordever");
  }
  try {
    ByteBuffer cwCreds=client.login(principal,cwProperties);
    cwid=client.createConditionalWriter(cwCreds,table,new ConditionalWriterOptions().setAuthorizations(Collections.singleton(s2bb("A"))));
    updates.clear();
    updates.put(s2bb("00348"),new ConditionalUpdates(Arrays.asList(new Condition(new Column(s2bb("data"),s2bb("c"),s2bb("A")))),Arrays.asList(newColUpdate("data","seq","1"),newColUpdate("data","c","1").setColVisibility(s2bb("A")))));
    updates.put(s2bb("00349"),new ConditionalUpdates(Arrays.asList(new Condition(new Column(s2bb("data"),s2bb("c"),s2bb("B")))),Arrays.asList(newColUpdate("data","seq","1"))));
    results=client.updateRowsConditionally(cwid,updates);
    assertEquals(2,results.size());
    assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00348")));
    assertEquals(ConditionalStatus.INVISIBLE_VISIBILITY,results.get(s2bb("00349")));
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
      client=origClient;
    }
    assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","3"},{"00347","data","img","0987654321"},{"00348","data","seq","1"}},table);
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(cwuser.getPrincipal(),cwuser.getKeytab().getAbsolutePath());
      client=cwuserProxyClient.proxy();
    }
    updates.clear();
    updates.clear();
    updates.put(s2bb("00348"),new ConditionalUpdates(Arrays.asList(new Condition(new Column(s2bb("data"),s2bb("c"),s2bb("A"))).setValue(s2bb("0"))),Arrays.asList(newColUpdate("data","seq","2"),newColUpdate("data","c","2").setColVisibility(s2bb("A")))));
    results=client.updateRowsConditionally(cwid,updates);
    assertEquals(1,results.size());
    assertEquals(ConditionalStatus.REJECTED,results.get(s2bb("00348")));
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
      client=origClient;
    }
    assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","3"},{"00347","data","img","0987654321"},{"00348","data","seq","1"}},table);
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(cwuser.getPrincipal(),cwuser.getKeytab().getAbsolutePath());
      client=cwuserProxyClient.proxy();
    }
    updates.clear();
    updates.put(s2bb("00348"),new ConditionalUpdates(Arrays.asList(new Condition(new Column(s2bb("data"),s2bb("c"),s2bb("A"))).setValue(s2bb("1"))),Arrays.asList(newColUpdate("data","seq","2"),newColUpdate("data","c","2").setColVisibility(s2bb("A")))));
    results=client.updateRowsConditionally(cwid,updates);
    assertEquals(1,results.size());
    assertEquals(ConditionalStatus.ACCEPTED,results.get(s2bb("00348")));
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
      client=origClient;
    }
    assertScan(new String[][]{{"00345","data","img","1234567890"},{"00345","meta","seq","3"},{"00346","meta","seq","1"},{"00347","data","count","3"},{"00347","data","img","0987654321"},{"00348","data","seq","2"}},table);
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(cwuser.getPrincipal(),cwuser.getKeytab().getAbsolutePath());
      client=cwuserProxyClient.proxy();
    }
    client.closeConditionalWriter(cwid);
    try {
      client.updateRowsConditionally(cwid,updates);
      fail("conditional writer not closed");
    }
 catch (    UnknownWriter uk) {
    }
  }
  finally {
    if (isKerberosEnabled()) {
      if (null != cwuserProxyClient) {
        cwuserProxyClient.close();
      }
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
      client=origClient;
    }
    client.dropLocalUser(creds,principal);
  }
}

</code></pre>

<pre class="type-5 type-3 type-10 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void importDirectoryLoginFailure() throws Exception {
  MiniAccumuloClusterImpl cluster=SharedMiniClusterBase.getCluster();
  Path base=cluster.getTemporaryPath();
  Path importDir=new Path(base,"importDir");
  Path failuresDir=new Path(base,"failuresDir");
  assertTrue(cluster.getFileSystem().mkdirs(importDir));
  assertTrue(cluster.getFileSystem().mkdirs(failuresDir));
  client.importDirectory(badLogin,table,importDir.toString(),failuresDir.toString(),true);
}

</code></pre>

<pre class="type-11 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testBatchWriter() throws Exception {
  client.addConstraint(creds,table,NumericValueConstraint.class.getName());
  sleepUninterruptibly(ZOOKEEPER_PROPAGATION_TIME,TimeUnit.MILLISECONDS);
  WriterOptions writerOptions=new WriterOptions();
  writerOptions.setLatencyMs(10000);
  writerOptions.setMaxMemory(2);
  writerOptions.setThreads(1);
  writerOptions.setTimeoutMs(100000);
  Map<String,Integer> constraints=client.listConstraints(creds,table);
  while (!constraints.containsKey(NumericValueConstraint.class.getName())) {
    log.info("Constraints don't contain NumericValueConstraint");
    Thread.sleep(2000);
    constraints=client.listConstraints(creds,table);
  }
  boolean success=false;
  for (int i=0; i < 15; i++) {
    String batchWriter=client.createWriter(creds,table,writerOptions);
    client.update(batchWriter,mutation("row1","cf","cq","x"));
    client.update(batchWriter,mutation("row1","cf","cq","x"));
    try {
      client.flush(batchWriter);
      log.debug("Constraint failed to fire. Waiting and retrying");
      Thread.sleep(5000);
      continue;
    }
 catch (    MutationsRejectedException ex) {
    }
    try {
      client.closeWriter(batchWriter);
      log.debug("Constraint failed to fire. Waiting and retrying");
      Thread.sleep(5000);
      continue;
    }
 catch (    MutationsRejectedException e) {
    }
    success=true;
    break;
  }
  if (!success) {
    fail("constraint did not fire");
  }
  client.removeConstraint(creds,table,2);
  constraints=client.listConstraints(creds,table);
  while (constraints.containsKey(NumericValueConstraint.class.getName())) {
    log.info("Constraints still contains NumericValueConstraint");
    Thread.sleep(2000);
    constraints=client.listConstraints(creds,table);
  }
  assertScan(new String[][]{},table);
  sleepUninterruptibly(ZOOKEEPER_PROPAGATION_TIME,TimeUnit.MILLISECONDS);
  writerOptions=new WriterOptions();
  writerOptions.setLatencyMs(10000);
  writerOptions.setMaxMemory(3000);
  writerOptions.setThreads(1);
  writerOptions.setTimeoutMs(100000);
  success=false;
  for (int i=0; i < 15; i++) {
    try {
      String batchWriter=client.createWriter(creds,table,writerOptions);
      client.update(batchWriter,mutation("row1","cf","cq","x"));
      client.flush(batchWriter);
      client.closeWriter(batchWriter);
      success=true;
      break;
    }
 catch (    MutationsRejectedException e) {
      log.info("Mutations were rejected, assuming constraint is still active",e);
      Thread.sleep(5000);
    }
  }
  if (!success) {
    fail("Failed to successfully write data after constraint was removed");
  }
  assertScan(new String[][]{{"row1","cf","cq","x"}},table);
  client.deleteTable(creds,table);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testUnknownWriter() throws Exception {
  String writer=client.createWriter(creds,table,null);
  client.update(writer,mutation("row0","cf","cq","value"));
  client.flush(writer);
  client.update(writer,mutation("row2","cf","cq","value2"));
  client.closeWriter(writer);
  client.update(writer,mutation("row2","cf","cq","value2"));
  try {
    client.flush(writer);
    fail("exception not thrown");
  }
 catch (  UnknownWriter uw) {
  }
  try {
    client.flush("99999");
    fail("exception not thrown");
  }
 catch (  UnknownWriter uw) {
  }
  try {
    client.flush(UUID.randomUUID().toString());
    fail("exception not thrown");
  }
 catch (  UnknownWriter uw) {
  }
  try {
    client.closeWriter("99999");
    fail("exception not thrown");
  }
 catch (  UnknownWriter uw) {
  }
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void deleteRowsLoginFailure() throws Exception {
  client.deleteRows(badLogin,table,null,null);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void dropUserLoginFailure() throws Exception {
  client.dropLocalUser(badLogin,"stooge");
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@After public void teardown() throws Exception {
  if (null != table) {
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
    }
    try {
      if (client.tableExists(creds,table)) {
        client.deleteTable(creds,table);
      }
    }
 catch (    Exception e) {
      log.warn("Failed to delete test table",e);
    }
  }
  if (null != proxyClient) {
    proxyClient.close();
  }
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void removeIteratorLoginFailure() throws Exception {
  client.removeIterator(badLogin,table,"name",EnumSet.allOf(IteratorScope.class));
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void removePropertyLoginFailure() throws Exception {
  client.removeProperty(badLogin,"table.split.threshold");
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void hasTablePermission() throws Exception {
  client.hasTablePermission(badLogin,"root",table,TablePermission.WRITE);
}

</code></pre>

<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelete() throws Exception {
  client.updateAndFlush(creds,table,mutation("row0","cf","cq","value"));
  assertScan(new String[][]{{"row0","cf","cq","value"}},table);
  ColumnUpdate upd=new ColumnUpdate(s2bb("cf"),s2bb("cq"));
  upd.setDeleteCell(false);
  Map<ByteBuffer,List<ColumnUpdate>> notDelete=Collections.singletonMap(s2bb("row0"),Collections.singletonList(upd));
  client.updateAndFlush(creds,table,notDelete);
  String scanner=client.createScanner(creds,table,null);
  ScanResult entries=client.nextK(scanner,10);
  client.closeScanner(scanner);
  assertFalse(entries.more);
  assertEquals("Results: " + entries.results,1,entries.results.size());
  upd=new ColumnUpdate(s2bb("cf"),s2bb("cq"));
  upd.setDeleteCell(true);
  Map<ByteBuffer,List<ColumnUpdate>> delete=Collections.singletonMap(s2bb("row0"),Collections.singletonList(upd));
  client.updateAndFlush(creds,table,delete);
  assertScan(new String[][]{},table);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void splitRangeByTabletsLoginFailure() throws Exception {
  client.splitRangeByTablets(badLogin,table,client.getRowRange(ByteBuffer.wrap("row".getBytes(UTF_8))),10);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=TApplicationException.class,timeout=5000) public void clearLocatorCacheLoginFailure() throws Exception {
  client.clearLocatorCache(badLogin,table);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void updateAndFlushLoginFailure() throws Exception {
  client.updateAndFlush(badLogin,table,new HashMap<ByteBuffer,List<ColumnUpdate>>());
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=TApplicationException.class,timeout=5000) public void listTablesLoginFailure() throws Exception {
  client.listTables(badLogin);
}

</code></pre>

<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTableConstraints() throws Exception {
  log.debug("Setting NumericValueConstraint on " + table);
  client.addConstraint(creds,table,NumericValueConstraint.class.getName());
  Thread.sleep(ZOOKEEPER_PROPAGATION_TIME);
  log.debug("Attempting to verify client-side that constraints are observed");
  Map<String,Integer> constraints=client.listConstraints(creds,table);
  while (!constraints.containsKey(NumericValueConstraint.class.getName())) {
    log.debug("Constraints don't contain NumericValueConstraint");
    Thread.sleep(2000);
    constraints=client.listConstraints(creds,table);
  }
  assertEquals(2,client.listConstraints(creds,table).size());
  log.debug("Verified client-side that constraints exist");
  client.updateAndFlush(creds,table,mutation("row1","cf","cq","123"));
  log.debug("Successfully wrote data that satisfies the constraint");
  log.debug("Trying to write data that the constraint should reject");
  while (true) {
    try {
      client.updateAndFlush(creds,table,mutation("row1","cf","cq","x"));
      log.debug("Expected mutation to be rejected, but was not. Waiting and retrying");
      Thread.sleep(5000);
    }
 catch (    MutationsRejectedException ex) {
      break;
    }
  }
  log.debug("Saw expected failure on data which fails the constraint");
  log.debug("Removing constraint from table");
  client.removeConstraint(creds,table,2);
  sleepUninterruptibly(ZOOKEEPER_PROPAGATION_TIME,TimeUnit.MILLISECONDS);
  constraints=client.listConstraints(creds,table);
  while (constraints.containsKey(NumericValueConstraint.class.getName())) {
    log.debug("Constraints contains NumericValueConstraint");
    Thread.sleep(2000);
    constraints=client.listConstraints(creds,table);
  }
  assertEquals(1,client.listConstraints(creds,table).size());
  log.debug("Verified client-side that the constraint was removed");
  log.debug("Attempting to write mutation that should succeed after constraints was removed");
  while (true) {
    try {
      client.updateAndFlush(creds,table,mutation("row1","cf","cq","x"));
      break;
    }
 catch (    MutationsRejectedException ex) {
      log.debug("Expected mutation accepted, but was not. Waiting and retrying");
      Thread.sleep(5000);
    }
  }
  log.debug("Verifying that record can be read from the table");
  assertScan(new String[][]{{"row1","cf","cq","x"}},table);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void iteratorFunctionality() throws Exception {
  HashMap<String,String> options=new HashMap<String,String>();
  options.put("type","STRING");
  options.put("columns","cf");
  IteratorSetting setting=new IteratorSetting(10,table,SummingCombiner.class.getName(),options);
  client.attachIterator(creds,table,setting,EnumSet.allOf(IteratorScope.class));
  for (int i=0; i < 10; i++) {
    client.updateAndFlush(creds,table,mutation("row1","cf","cq","1"));
  }
  assertScan(new String[][]{{"row1","cf","cq","10"}},table);
  try {
    client.checkIteratorConflicts(creds,table,setting,EnumSet.allOf(IteratorScope.class));
    fail("checkIteratorConflicts did not throw an exception");
  }
 catch (  Exception ex) {
  }
  client.deleteRows(creds,table,null,null);
  client.removeIterator(creds,table,"test",EnumSet.allOf(IteratorScope.class));
  String expected[][]=new String[10][];
  for (int i=0; i < 10; i++) {
    client.updateAndFlush(creds,table,mutation("row" + i,"cf","cq","" + i));
    expected[i]=new String[]{"row" + i,"cf","cq","" + i};
    client.flushTable(creds,table,null,null,true);
  }
  assertScan(expected,table);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void getActiveScansLoginFailure() throws Exception {
  client.getActiveScans(badLogin,"fake");
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void flustTableLoginFailure() throws Exception {
  client.flushTable(badLogin,table,null,null,false);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void getUserAuthorizationsLoginFailure() throws Exception {
  client.getUserAuthorizations(badLogin,"stooge");
}

</code></pre>

<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void bulkImport() throws Exception {
  MiniAccumuloClusterImpl cluster=SharedMiniClusterBase.getCluster();
  FileSystem fs=cluster.getFileSystem();
  Path base=cluster.getTemporaryPath();
  Path dir=new Path(base,"test");
  assertTrue(fs.mkdirs(dir));
  String filename=dir + "/bulk/import/rfile.rf";
  FileSKVWriter writer=FileOperations.getInstance().openWriter(filename,fs,fs.getConf(),DefaultConfiguration.getInstance());
  writer.startDefaultLocalityGroup();
  writer.append(new org.apache.accumulo.core.data.Key(new Text("a"),new Text("b"),new Text("c")),new Value("value".getBytes(UTF_8)));
  writer.close();
  fs.mkdirs(new Path(dir + "/bulk/fail"));
  client.importDirectory(creds,table,dir + "/bulk/import",dir + "/bulk/fail",true);
  String scanner=client.createScanner(creds,table,null);
  ScanResult more=client.nextK(scanner,100);
  client.closeScanner(scanner);
  assertEquals(1,more.results.size());
  ByteBuffer maxRow=client.getMaxRow(creds,table,null,null,false,null,false);
  assertEquals(s2bb("a"),maxRow);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void createTableLoginFailure() throws Exception {
  client.createTable(badLogin,table,false,TimeType.MILLIS);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=TException.class,timeout=5000) public void getTabletServersLoginFailure() throws Exception {
  client.getTabletServers(badLogin);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void getMaxRowLoginFailure() throws Exception {
  client.getMaxRow(badLogin,table,Collections.<ByteBuffer>emptySet(),null,false,null,false);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void changePasswordLoginFailure() throws Exception {
  client.changeLocalUserPassword(badLogin,"stooge",s2bb(""));
}

</code></pre>

<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSiteConfiguration() throws Exception {
  MiniAccumuloClusterImpl cluster=SharedMiniClusterBase.getCluster();
  Map<String,String> cfg=client.getSiteConfiguration(creds);
  assertTrue(cfg.get("instance.dfs.dir").startsWith(cluster.getConfig().getAccumuloDir().getAbsolutePath()));
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void removeTablePropertyLoginFailure() throws Exception {
  client.removeTableProperty(badLogin,table,Property.TABLE_FILE_MAX.getKey());
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void pingTabletServerLoginFailure() throws Exception {
  client.pingTabletServer(badLogin,"fake");
}

</code></pre>

<pre class="type-9 type-11 type-8 type-5 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void attachIteratorWithCompactions() throws Exception {
  if (client.tableExists(creds,"slow")) {
    client.deleteTable(creds,"slow");
  }
  client.createTable(creds,"slow",true,TimeType.MILLIS);
  IteratorSetting setting=new IteratorSetting(100,"slow",SlowIterator.class.getName(),Collections.singletonMap("sleepTime","250"));
  client.attachIterator(creds,"slow",setting,EnumSet.allOf(IteratorScope.class));
  for (int i=0; i < 40; i++) {
    client.updateAndFlush(creds,"slow",mutation("row" + i,"cf","cq","value"));
  }
  Map<String,String> map=client.tableIdMap(creds);
  Thread t=new Thread(){
    @Override public void run(){
      TestProxyClient proxyClient2=null;
      try {
        if (isKerberosEnabled()) {
          UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,UserGroupInformation.getCurrentUser());
        }
 else {
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory);
        }
        Client client2=proxyClient2.proxy();
        client2.compactTable(creds,"slow",null,null,null,true,true,null);
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
 finally {
        if (null != proxyClient2) {
          proxyClient2.close();
        }
      }
    }
  }
;
  t.start();
  final String desiredTableId=map.get("slow");
  assertNotNull(desiredTableId);
  List<ActiveCompaction> compactions=new ArrayList<ActiveCompaction>();
  for (int i=0; i < 100 && compactions.isEmpty(); i++) {
    for (    String tserver : client.getTabletServers(creds)) {
      List<ActiveCompaction> compactionsOnServer=client.getActiveCompactions(creds,tserver);
      for (      ActiveCompaction compact : compactionsOnServer) {
        if (desiredTableId.equals(compact.getExtent().tableId)) {
          compactions.add(compact);
        }
      }
      if (!compactions.isEmpty())       break;
    }
    sleepUninterruptibly(10,TimeUnit.MILLISECONDS);
  }
  t.join();
  assertFalse(compactions.isEmpty());
  for (  ActiveCompaction c : compactions) {
    if (desiredTableId.equals(c.getExtent().tableId)) {
      assertTrue(c.inputFiles.isEmpty());
      assertEquals(CompactionType.MINOR,c.getType());
      assertEquals(CompactionReason.USER,c.getReason());
      assertEquals("",c.localityGroup);
      assertTrue(c.outputFile.contains("default_tablet"));
      return;
    }
  }
  fail("Expection to find running compaction for table 'slow' but did not find one");
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void grantSystemPermissionLoginFailure() throws Exception {
  client.grantSystemPermission(badLogin,"stooge",SystemPermission.CREATE_TABLE);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void revokeSystemPermissionLoginFailure() throws Exception {
  client.revokeSystemPermission(badLogin,"stooge",SystemPermission.CREATE_TABLE);
}

</code></pre>

<pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void tableNotFound() throws Exception {
  final String doesNotExist="doesNotExists";
  try {
    client.addConstraint(creds,doesNotExist,NumericValueConstraint.class.getName());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.addSplits(creds,doesNotExist,Collections.<ByteBuffer>emptySet());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  final IteratorSetting setting=new IteratorSetting(100,"slow",SlowIterator.class.getName(),Collections.singletonMap("sleepTime","200"));
  try {
    client.attachIterator(creds,doesNotExist,setting,EnumSet.allOf(IteratorScope.class));
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.cancelCompaction(creds,doesNotExist);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.checkIteratorConflicts(creds,doesNotExist,setting,EnumSet.allOf(IteratorScope.class));
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.clearLocatorCache(creds,doesNotExist);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    final String TABLE_TEST=getUniqueNames(1)[0];
    client.cloneTable(creds,doesNotExist,TABLE_TEST,false,null,null);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.compactTable(creds,doesNotExist,null,null,null,true,false,null);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.createBatchScanner(creds,doesNotExist,new BatchScanOptions());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.createScanner(creds,doesNotExist,new ScanOptions());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.createWriter(creds,doesNotExist,new WriterOptions());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.deleteRows(creds,doesNotExist,null,null);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.deleteTable(creds,doesNotExist);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.exportTable(creds,doesNotExist,"/tmp");
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.flushTable(creds,doesNotExist,null,null,false);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.getIteratorSetting(creds,doesNotExist,"foo",IteratorScope.SCAN);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.getLocalityGroups(creds,doesNotExist);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.getMaxRow(creds,doesNotExist,Collections.<ByteBuffer>emptySet(),null,false,null,false);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.getTableProperties(creds,doesNotExist);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.grantTablePermission(creds,"root",doesNotExist,TablePermission.WRITE);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.hasTablePermission(creds,"root",doesNotExist,TablePermission.WRITE);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    MiniAccumuloClusterImpl cluster=SharedMiniClusterBase.getCluster();
    Path base=cluster.getTemporaryPath();
    Path importDir=new Path(base,"importDir");
    Path failuresDir=new Path(base,"failuresDir");
    assertTrue(cluster.getFileSystem().mkdirs(importDir));
    assertTrue(cluster.getFileSystem().mkdirs(failuresDir));
    client.importDirectory(creds,doesNotExist,importDir.toString(),failuresDir.toString(),true);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.listConstraints(creds,doesNotExist);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.listSplits(creds,doesNotExist,10000);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.mergeTablets(creds,doesNotExist,null,null);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.offlineTable(creds,doesNotExist,false);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.onlineTable(creds,doesNotExist,false);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.removeConstraint(creds,doesNotExist,0);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.removeIterator(creds,doesNotExist,"name",EnumSet.allOf(IteratorScope.class));
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.removeTableProperty(creds,doesNotExist,Property.TABLE_FILE_MAX.getKey());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.renameTable(creds,doesNotExist,"someTableName");
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.revokeTablePermission(creds,"root",doesNotExist,TablePermission.ALTER_TABLE);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.setTableProperty(creds,doesNotExist,Property.TABLE_FILE_MAX.getKey(),"0");
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.splitRangeByTablets(creds,doesNotExist,client.getRowRange(ByteBuffer.wrap("row".getBytes(UTF_8))),10);
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.updateAndFlush(creds,doesNotExist,new HashMap<ByteBuffer,List<ColumnUpdate>>());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.getDiskUsage(creds,Collections.singleton(doesNotExist));
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.testTableClassLoad(creds,doesNotExist,VersioningIterator.class.getName(),SortedKeyValueIterator.class.getName());
    fail("exception not thrown");
  }
 catch (  TableNotFoundException ex) {
  }
  try {
    client.createConditionalWriter(creds,doesNotExist,new ConditionalWriterOptions());
  }
 catch (  TableNotFoundException ex) {
  }
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void cloneTable() throws Exception {
  String TABLE_TEST2=getUniqueNames(2)[1];
  String expected[][]=new String[10][];
  for (int i=0; i < 10; i++) {
    client.updateAndFlush(creds,table,mutation("row" + i,"cf","cq","" + i));
    expected[i]=new String[]{"row" + i,"cf","cq","" + i};
    client.flushTable(creds,table,null,null,true);
  }
  assertScan(expected,table);
  client.cloneTable(creds,table,TABLE_TEST2,true,null,null);
  assertScan(expected,TABLE_TEST2);
  client.deleteTable(creds,TABLE_TEST2);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void createConditionalWriterLoginFailure() throws Exception {
  client.createConditionalWriter(badLogin,table,new ConditionalWriterOptions());
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void compactTable() throws Exception {
  String expected[][]=new String[10][];
  for (int i=0; i < 10; i++) {
    client.updateAndFlush(creds,table,mutation("row" + i,"cf","cq","" + i));
    expected[i]=new String[]{"row" + i,"cf","cq","" + i};
    client.flushTable(creds,table,null,null,true);
  }
  assertScan(expected,table);
  client.compactTable(creds,table,null,null,null,true,true,null);
  assertEquals(1,countFiles(table));
  assertScan(expected,table);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void compactTableLoginFailure() throws Exception {
  client.compactTable(badLogin,table,null,null,null,true,false,null);
}

</code></pre>

<pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void importExportTable() throws Exception {
  String expected[][]=new String[10][];
  for (int i=0; i < 10; i++) {
    client.updateAndFlush(creds,table,mutation("row" + i,"cf","cq","" + i));
    expected[i]=new String[]{"row" + i,"cf","cq","" + i};
    client.flushTable(creds,table,null,null,true);
  }
  assertScan(expected,table);
  MiniAccumuloClusterImpl cluster=SharedMiniClusterBase.getCluster();
  FileSystem fs=cluster.getFileSystem();
  Path base=cluster.getTemporaryPath();
  Path dir=new Path(base,"test");
  assertTrue(fs.mkdirs(dir));
  Path destDir=new Path(base,"test_dest");
  assertTrue(fs.mkdirs(destDir));
  client.offlineTable(creds,table,false);
  client.exportTable(creds,table,dir.toString());
  FSDataInputStream is=fs.open(new Path(dir,"distcp.txt"));
  try (BufferedReader r=new BufferedReader(new InputStreamReader(is,UTF_8))){
    while (true) {
      String line=r.readLine();
      if (line == null)       break;
      Path srcPath=new Path(line);
      FileUtil.copy(fs,srcPath,fs,destDir,false,fs.getConf());
    }
  }
   client.deleteTable(creds,table);
  client.importTable(creds,"testify",destDir.toString());
  assertScan(expected,"testify");
  client.deleteTable(creds,"testify");
  try {
    client.importTable(creds,"testify2",destDir.toString());
    fail();
  }
 catch (  Exception e) {
  }
  assertFalse(client.listTables(creds).contains("testify2"));
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void createWriterLoginFailure() throws Exception {
  client.createWriter(badLogin,table,new WriterOptions());
}

</code></pre>

<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testClassLoad() throws Exception {
  assertTrue(client.testClassLoad(creds,DevNull.class.getName(),SortedKeyValueIterator.class.getName()));
  assertFalse(client.testClassLoad(creds,"foo.bar",SortedKeyValueIterator.class.getName()));
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void createUserLoginFailure() throws Exception {
  client.createLocalUser(badLogin,"stooge",s2bb("password"));
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void cancelCompactionLoginFailure() throws Exception {
  client.cancelCompaction(badLogin,table);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void changeUserAuthorizationsLoginFailure() throws Exception {
  HashSet<ByteBuffer> auths=new HashSet<ByteBuffer>(Arrays.asList(s2bb("A"),s2bb("B")));
  client.changeUserAuthorizations(badLogin,"stooge",auths);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void removeConstraintLoginFailure() throws Exception {
  client.removeConstraint(badLogin,table,0);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void renameTableLoginFailure() throws Exception {
  client.renameTable(badLogin,table,"someTableName");
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void importTableLoginFailure() throws Exception {
  client.importTable(badLogin,"testify","/tmp");
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void clearLocatorCache() throws Exception {
  client.clearLocatorCache(creds,table);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void checkIteratorLoginFailure() throws Exception {
  client.checkIteratorConflicts(badLogin,table,setting,EnumSet.allOf(IteratorScope.class));
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void loginFailure() throws Exception {
  client.login("badUser",properties);
}

</code></pre>

<pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnknownScanner() throws Exception {
  String scanner=client.createScanner(creds,table,null);
  assertFalse(client.hasNext(scanner));
  client.closeScanner(scanner);
  try {
    client.hasNext(scanner);
    fail("exception not thrown");
  }
 catch (  UnknownScanner us) {
  }
  try {
    client.closeScanner(scanner);
    fail("exception not thrown");
  }
 catch (  UnknownScanner us) {
  }
  try {
    client.nextEntry("99999999");
    fail("exception not thrown");
  }
 catch (  UnknownScanner us) {
  }
  try {
    client.nextK("99999999",6);
    fail("exception not thrown");
  }
 catch (  UnknownScanner us) {
  }
  try {
    client.hasNext("99999999");
    fail("exception not thrown");
  }
 catch (  UnknownScanner us) {
  }
  try {
    client.hasNext(UUID.randomUUID().toString());
    fail("exception not thrown");
  }
 catch (  UnknownScanner us) {
  }
}

</code></pre>

<pre class="type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void tableRenames() throws Exception {
  Map<String,String> tables=client.tableIdMap(creds);
  client.renameTable(creds,table,"bar");
  Map<String,String> tables2=client.tableIdMap(creds);
  assertEquals(tables.get(table),tables2.get("bar"));
  assertTrue(client.tableExists(creds,"bar"));
  assertFalse(client.tableExists(creds,table));
  client.renameTable(creds,"bar",table);
}

</code></pre>

<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompactionStrategy() throws Exception {
  File jarDir=new File(System.getProperty("user.dir"),"target");
  assertTrue(jarDir.mkdirs() || jarDir.isDirectory());
  File jarFile=new File(jarDir,"TestCompactionStrat.jar");
  FileUtils.copyInputStreamToFile(Class.class.getResourceAsStream("/TestCompactionStrat.jar"),jarFile);
  client.setProperty(creds,Property.VFS_CONTEXT_CLASSPATH_PROPERTY.getKey() + "context1",jarFile.toString());
  client.setTableProperty(creds,table,Property.TABLE_CLASSPATH.getKey(),"context1");
  client.addSplits(creds,table,Collections.singleton(s2bb("efg")));
  client.updateAndFlush(creds,table,mutation("a","cf","cq","v1"));
  client.flushTable(creds,table,null,null,true);
  client.updateAndFlush(creds,table,mutation("b","cf","cq","v2"));
  client.flushTable(creds,table,null,null,true);
  client.updateAndFlush(creds,table,mutation("y","cf","cq","v1"));
  client.flushTable(creds,table,null,null,true);
  client.updateAndFlush(creds,table,mutation("z","cf","cq","v2"));
  client.flushTable(creds,table,null,null,true);
  assertEquals(4,countFiles(table));
  CompactionStrategyConfig csc=new CompactionStrategyConfig();
  csc.setClassName("org.apache.accumulo.test.EfgCompactionStrat");
  client.compactTable(creds,table,null,null,null,true,true,csc);
  assertEquals(3,countFiles(table));
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void addSplitsLoginFailure() throws Exception {
  client.addSplits(badLogin,table,Collections.singleton(s2bb("1")));
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void mergeTabletsLoginFailure() throws Exception {
  client.mergeTablets(badLogin,table,null,null);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void listConstraintsLoginFailure() throws Exception {
  client.listConstraints(badLogin,table);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void createBatchScannerLoginFailure() throws Exception {
  client.createBatchScanner(badLogin,table,new BatchScanOptions());
}

</code></pre>

<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void diskUsage() throws Exception {
  String TABLE_TEST2=getUniqueNames(2)[1];
  String expected[][]=new String[10][];
  for (int i=0; i < 10; i++) {
    client.updateAndFlush(creds,table,mutation("row" + i,"cf","cq","" + i));
    expected[i]=new String[]{"row" + i,"cf","cq","" + i};
    client.flushTable(creds,table,null,null,true);
  }
  assertScan(expected,table);
  client.compactTable(creds,table,null,null,null,true,true,null);
  assertEquals(1,countFiles(table));
  assertScan(expected,table);
  client.cloneTable(creds,table,TABLE_TEST2,true,null,null);
  Set<String> tablesToScan=new HashSet<String>();
  tablesToScan.add(table);
  tablesToScan.add(TABLE_TEST2);
  tablesToScan.add("foo");
  client.createTable(creds,"foo",true,TimeType.MILLIS);
  List<DiskUsage> diskUsage=(client.getDiskUsage(creds,tablesToScan));
  assertEquals(2,diskUsage.size());
  assertEquals(2,diskUsage.get(0).getTables().size());
  assertEquals(1,diskUsage.get(1).getTables().size());
  client.compactTable(creds,TABLE_TEST2,null,null,null,true,true,null);
  diskUsage=(client.getDiskUsage(creds,tablesToScan));
  assertEquals(3,diskUsage.size());
  assertEquals(1,diskUsage.get(0).getTables().size());
  assertEquals(1,diskUsage.get(1).getTables().size());
  assertEquals(1,diskUsage.get(2).getTables().size());
  client.deleteTable(creds,"foo");
  client.deleteTable(creds,TABLE_TEST2);
}

</code></pre>

<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void localityGroups() throws Exception {
  Map<String,Set<String>> groups=new HashMap<String,Set<String>>();
  groups.put("group1",Collections.singleton("cf1"));
  groups.put("group2",Collections.singleton("cf2"));
  client.setLocalityGroups(creds,table,groups);
  assertEquals(groups,client.getLocalityGroups(creds,table));
}

</code></pre>

<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSystemProperties() throws Exception {
  Map<String,String> cfg=client.getSiteConfiguration(creds);
  client.setProperty(creds,"table.split.threshold","500M");
  for (int i=0; i < 5; i++) {
    cfg=client.getSystemConfiguration(creds);
    if ("500M".equals(cfg.get("table.split.threshold")))     break;
    sleepUninterruptibly(200,TimeUnit.MILLISECONDS);
  }
  assertEquals("500M",cfg.get("table.split.threshold"));
  client.removeProperty(creds,"table.split.threshold");
  for (int i=0; i < 5; i++) {
    cfg=client.getSystemConfiguration(creds);
    if (!"500M".equals(cfg.get("table.split.threshold")))     break;
    sleepUninterruptibly(200,TimeUnit.MILLISECONDS);
  }
  assertNotEquals("500M",cfg.get("table.split.threshold"));
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=TException.class,timeout=5000) public void tableIdMapLoginFailure() throws Exception {
  client.tableIdMap(badLogin);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void listSplitsLoginFailure() throws Exception {
  client.listSplits(badLogin,table,10000);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void testTableClassLoadLoginFailure() throws Exception {
  client.testTableClassLoad(badLogin,table,VersioningIterator.class.getName(),SortedKeyValueIterator.class.getName());
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void listIteratorsLoginFailure() throws Exception {
  client.listIterators(badLogin,table);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void deleteTableLoginFailure() throws Exception {
  client.deleteTable(badLogin,table);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void exportTableLoginFailure() throws Exception {
  client.exportTable(badLogin,table,"/tmp");
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@AfterClass public static void tearDownProxy() throws Exception {
  if (null != proxyServer) {
    proxyServer.stop();
  }
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void setTablePropertyLoginFailure() throws Exception {
  client.setTableProperty(badLogin,table,Property.TABLE_FILE_MAX.getKey(),"0");
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void grantTablePermissionLoginFailure() throws Exception {
  client.grantTablePermission(badLogin,"root",table,TablePermission.WRITE);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void setPropertyLoginFailure() throws Exception {
  client.setProperty(badLogin,"table.split.threshold","500M");
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void getActiveCompactionsLoginFailure() throws Exception {
  client.getActiveCompactions(badLogin,"fakse");
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void getSystemConfigurationLoginFailure() throws Exception {
  client.getSystemConfiguration(badLogin);
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void pingTabletServers() throws Exception {
  int tservers=0;
  for (  String tserver : client.getTabletServers(creds)) {
    client.pingTabletServer(creds,tserver);
    tservers++;
  }
  assertTrue(tservers > 0);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void getLocalityGroupsLoginFailure() throws Exception {
  client.getLocalityGroups(badLogin,table);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void setLocalityGroupsLoginFailure() throws Exception {
  Map<String,Set<String>> groups=new HashMap<String,Set<String>>();
  groups.put("group1",Collections.singleton("cf1"));
  groups.put("group2",Collections.singleton("cf2"));
  client.setLocalityGroups(badLogin,table,groups);
}

</code></pre>

<pre class="type-9 type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userManagement() throws Exception {
  String user;
  ClusterUser otherClient=null;
  ByteBuffer password=s2bb("password");
  if (isKerberosEnabled()) {
    otherClient=getKdc().getClientPrincipal(1);
    user=otherClient.getPrincipal();
  }
 else {
    user=getUniqueNames(1)[0];
  }
  client.createLocalUser(creds,user,password);
  Set<String> users=client.listLocalUsers(creds);
  Set<String> expectedUsers=new HashSet<String>(Arrays.asList(clientPrincipal,user));
  assertTrue("Did not find all expected users: " + expectedUsers,users.containsAll(expectedUsers));
  HashSet<ByteBuffer> auths=new HashSet<ByteBuffer>(Arrays.asList(s2bb("A"),s2bb("B")));
  client.changeUserAuthorizations(creds,user,auths);
  List<ByteBuffer> update=client.getUserAuthorizations(creds,user);
  assertEquals(auths,new HashSet<ByteBuffer>(update));
  if (!isKerberosEnabled()) {
    password=s2bb("");
    client.changeLocalUserPassword(creds,user,password);
    assertTrue(client.authenticateUser(creds,user,s2pp(ByteBufferUtil.toString(password))));
  }
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
    final UserGroupInformation ugi=UserGroupInformation.getCurrentUser();
    TestProxyClient otherProxyClient=null;
    try {
      otherProxyClient=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,ugi);
      otherProxyClient.proxy().login(user,Collections.<String,String>emptyMap());
    }
  finally {
      if (null != otherProxyClient) {
        otherProxyClient.close();
      }
    }
  }
 else {
    client.login(user,s2pp(ByteBufferUtil.toString(password)));
  }
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void createScannerLoginFailure() throws Exception {
  client.createScanner(badLogin,table,new ScanOptions());
}

</code></pre>

<pre class="type-8 type-5 type-3 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userPermissions() throws Exception {
  String userName=getUniqueNames(1)[0];
  ClusterUser otherClient=null;
  ByteBuffer password=s2bb("password");
  ByteBuffer user;
  TestProxyClient origProxyClient=null;
  Client origClient=null;
  TestProxyClient userProxyClient=null;
  Client userClient=null;
  if (isKerberosEnabled()) {
    otherClient=getKdc().getClientPrincipal(1);
    userName=otherClient.getPrincipal();
    UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
    final UserGroupInformation ugi=UserGroupInformation.getCurrentUser();
    userProxyClient=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,ugi);
    origProxyClient=proxyClient;
    origClient=client;
    userClient=client=userProxyClient.proxy();
    user=client.login(userName,Collections.<String,String>emptyMap());
  }
 else {
    userName=getUniqueNames(1)[0];
    client.createLocalUser(creds,userName,password);
    user=client.login(userName,s2pp(ByteBufferUtil.toString(password)));
  }
  try {
    client.createTable(user,"fail",true,TimeType.MILLIS);
    fail("should not create the table");
  }
 catch (  AccumuloSecurityException ex) {
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
      client=origClient;
    }
    assertFalse(client.listTables(creds).contains("fail"));
  }
  assertFalse(client.hasSystemPermission(creds,userName,SystemPermission.CREATE_TABLE));
  client.grantSystemPermission(creds,userName,SystemPermission.CREATE_TABLE);
  assertTrue(client.hasSystemPermission(creds,userName,SystemPermission.CREATE_TABLE));
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
    client=userClient;
  }
  client.createTable(user,"success",true,TimeType.MILLIS);
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
    client=origClient;
  }
  assertTrue(client.listTables(creds).contains("success"));
  client.revokeSystemPermission(creds,userName,SystemPermission.CREATE_TABLE);
  assertFalse(client.hasSystemPermission(creds,userName,SystemPermission.CREATE_TABLE));
  try {
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
      client=userClient;
    }
    client.createTable(user,"fail",true,TimeType.MILLIS);
    fail("should not create the table");
  }
 catch (  AccumuloSecurityException ex) {
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
      client=origClient;
    }
    assertFalse(client.listTables(creds).contains("fail"));
  }
  try {
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
      client=userClient;
    }
    String scanner=client.createScanner(user,table,null);
    client.nextK(scanner,100);
    fail("stooge should not read table test");
  }
 catch (  AccumuloSecurityException ex) {
  }
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
    client=origClient;
  }
  assertFalse(client.hasTablePermission(creds,userName,table,TablePermission.READ));
  client.grantTablePermission(creds,userName,table,TablePermission.READ);
  assertTrue(client.hasTablePermission(creds,userName,table,TablePermission.READ));
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
    client=userClient;
  }
  String scanner=client.createScanner(user,table,null);
  client.nextK(scanner,10);
  client.closeScanner(scanner);
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
    client=origClient;
  }
  client.revokeTablePermission(creds,userName,table,TablePermission.READ);
  assertFalse(client.hasTablePermission(creds,userName,table,TablePermission.READ));
  try {
    if (isKerberosEnabled()) {
      UserGroupInformation.loginUserFromKeytab(otherClient.getPrincipal(),otherClient.getKeytab().getAbsolutePath());
      client=userClient;
    }
    scanner=client.createScanner(user,table,null);
    client.nextK(scanner,100);
    fail("stooge should not read table test");
  }
 catch (  AccumuloSecurityException ex) {
  }
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
    client=origClient;
  }
  client.dropLocalUser(creds,userName);
  Set<String> users=client.listLocalUsers(creds);
  assertFalse("Should not see user after they are deleted",users.contains(userName));
  if (isKerberosEnabled()) {
    userProxyClient.close();
    proxyClient=origProxyClient;
    client=origClient;
  }
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void revokeTablePermissionLoginFailure() throws Exception {
  client.revokeTablePermission(badLogin,"root",table,TablePermission.ALTER_TABLE);
}

</code></pre>

<pre class="type-9 type-13 type-11 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void attachIteratorsWithScans() throws Exception {
  if (client.tableExists(creds,"slow")) {
    client.deleteTable(creds,"slow");
  }
  client.createTable(creds,"slow",true,TimeType.MILLIS);
  IteratorSetting setting=new IteratorSetting(100,"slow",SlowIterator.class.getName(),Collections.singletonMap("sleepTime","250"));
  client.attachIterator(creds,"slow",setting,EnumSet.allOf(IteratorScope.class));
  for (int i=0; i < 40; i++) {
    client.updateAndFlush(creds,"slow",mutation("row" + i,"cf","cq","value"));
  }
  Thread t=new Thread(){
    @Override public void run(){
      String scanner;
      TestProxyClient proxyClient2=null;
      try {
        if (isKerberosEnabled()) {
          UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,UserGroupInformation.getCurrentUser());
        }
 else {
          proxyClient2=new TestProxyClient(hostname,proxyPort,factory);
        }
        Client client2=proxyClient2.proxy();
        scanner=client2.createScanner(creds,"slow",null);
        client2.nextK(scanner,10);
        client2.closeScanner(scanner);
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
 finally {
        if (null != proxyClient2) {
          proxyClient2.close();
        }
      }
    }
  }
;
  t.start();
  List<ActiveScan> scans=new ArrayList<ActiveScan>();
  for (int i=0; i < 100 && scans.isEmpty(); i++) {
    for (    String tserver : client.getTabletServers(creds)) {
      List<ActiveScan> scansForServer=client.getActiveScans(creds,tserver);
      for (      ActiveScan scan : scansForServer) {
        if (clientPrincipal.equals(scan.getUser())) {
          scans.add(scan);
        }
      }
      if (!scans.isEmpty())       break;
      sleepUninterruptibly(100,TimeUnit.MILLISECONDS);
    }
  }
  t.join();
  assertFalse("Expected to find scans, but found none",scans.isEmpty());
  boolean found=false;
  Map<String,String> map=null;
  for (int i=0; i < scans.size() && !found; i++) {
    ActiveScan scan=scans.get(i);
    if (clientPrincipal.equals(scan.getUser())) {
      assertTrue(ScanState.RUNNING.equals(scan.getState()) || ScanState.QUEUED.equals(scan.getState()));
      assertEquals(ScanType.SINGLE,scan.getType());
      assertEquals("slow",scan.getTable());
      map=client.tableIdMap(creds);
      assertEquals(map.get("slow"),scan.getExtent().tableId);
      assertTrue(scan.getExtent().endRow == null);
      assertTrue(scan.getExtent().prevEndRow == null);
      found=true;
    }
  }
  assertTrue("Could not find a scan against the 'slow' table",found);
}

</code></pre>

<pre class="type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTableClassLoad() throws Exception {
  assertFalse(client.testTableClassLoad(creds,table,"abc123",SortedKeyValueIterator.class.getName()));
  assertTrue(client.testTableClassLoad(creds,table,VersioningIterator.class.getName(),SortedKeyValueIterator.class.getName()));
}

</code></pre>

<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup() throws Exception {
  if (isKerberosEnabled()) {
    UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
    proxyClient=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,UserGroupInformation.getCurrentUser());
    client=proxyClient.proxy();
    creds=client.login(clientPrincipal,properties);
    TestingKdc kdc=getKdc();
    final ClusterUser user=kdc.getClientPrincipal(0);
    client.createLocalUser(creds,user.getPrincipal(),s2bb("unused"));
    UserGroupInformation.loginUserFromKeytab(user.getPrincipal(),user.getKeytab().getAbsolutePath());
    final UserGroupInformation badUgi=UserGroupInformation.getCurrentUser();
    TestProxyClient badClient=new TestProxyClient(hostname,proxyPort,factory,proxyPrimary,badUgi);
    try {
      Client badProxy=badClient.proxy();
      badLogin=badProxy.login(user.getPrincipal(),properties);
    }
  finally {
      badClient.close();
    }
    UserGroupInformation.loginUserFromKeytab(clientPrincipal,clientKeytab.getAbsolutePath());
    client.dropLocalUser(creds,user.getPrincipal());
  }
 else {
    proxyClient=new TestProxyClient(hostname,proxyPort,factory);
    client=proxyClient.proxy();
    creds=client.login("root",properties);
    client.createLocalUser(creds,"user",s2bb(SharedMiniClusterBase.getRootPassword()));
    badLogin=client.login("user",properties);
    client.dropLocalUser(creds,"user");
  }
  table=getUniqueNames(1)[0];
  client.createTable(creds,table,true,TimeType.MILLIS);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testExists() throws Exception {
  client.createTable(creds,"ett1",false,TimeType.MILLIS);
  client.createTable(creds,"ett2",false,TimeType.MILLIS);
  try {
    client.createTable(creds,"ett1",false,TimeType.MILLIS);
    fail("exception not thrown");
  }
 catch (  TableExistsException tee) {
  }
  try {
    client.renameTable(creds,"ett1","ett2");
    fail("exception not thrown");
  }
 catch (  TableExistsException tee) {
  }
  try {
    client.cloneTable(creds,"ett1","ett2",false,new HashMap<String,String>(),new HashSet<String>());
    fail("exception not thrown");
  }
 catch (  TableExistsException tee) {
  }
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void listLocalUsersLoginFailure() throws Exception {
  client.listLocalUsers(badLogin);
}

</code></pre>

<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void tableProperties() throws Exception {
  Map<String,String> systemProps=client.getSystemConfiguration(creds);
  String systemTableSplitThreshold=systemProps.get("table.split.threshold");
  Map<String,String> orig=client.getTableProperties(creds,table);
  client.setTableProperty(creds,table,"table.split.threshold","500M");
  Map<String,String> update=client.getTableProperties(creds,table);
  assertEquals(update.get("table.split.threshold"),"500M");
  assertEquals(systemTableSplitThreshold,client.getSystemConfiguration(creds).get("table.split.threshold"));
  client.removeTableProperty(creds,table,"table.split.threshold");
  update=client.getTableProperties(creds,table);
  assertEquals(orig,update);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void cloneTableLoginFailure() throws Exception {
  client.cloneTable(badLogin,table,table + "_clone",false,null,null);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void getIteratorSettingLoginFailure() throws Exception {
  client.getIteratorSetting(badLogin,table,"foo",IteratorScope.SCAN);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void getSiteConfigurationLoginFailure() throws Exception {
  client.getSiteConfiguration(badLogin);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void hasSystemPermissionLoginFailure() throws Exception {
  client.hasSystemPermission(badLogin,"stooge",SystemPermission.CREATE_TABLE);
}

</code></pre>

<pre class="type-11 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test(timeout=5000) public void authenticateUserLoginFailure() throws Exception {
  if (!isKerberosEnabled()) {
    try {
      client.authenticateUser(badLogin,"root",s2pp(SharedMiniClusterBase.getRootPassword()));
      fail("Expected AccumuloSecurityException");
    }
 catch (    AccumuloSecurityException e) {
      return;
    }
  }
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=TApplicationException.class,timeout=5000) public void tableExistsLoginFailure() throws Exception {
  client.tableExists(badLogin,table);
}

</code></pre>

<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetRowRange() throws Exception {
  Range range=client.getRowRange(s2bb("xyzzy"));
  org.apache.accumulo.core.data.Range range2=new org.apache.accumulo.core.data.Range(new Text("xyzzy"));
  assertEquals(0,range.start.row.compareTo(t2bb(range2.getStartKey().getRow())));
  assertEquals(0,range.stop.row.compareTo(t2bb(range2.getEndKey().getRow())));
  assertEquals(range.startInclusive,range2.isStartKeyInclusive());
  assertEquals(range.stopInclusive,range2.isEndKeyInclusive());
  assertEquals(0,range.start.colFamily.compareTo(t2bb(range2.getStartKey().getColumnFamily())));
  assertEquals(0,range.start.colQualifier.compareTo(t2bb(range2.getStartKey().getColumnQualifier())));
  assertEquals(0,range.stop.colFamily.compareTo(t2bb(range2.getEndKey().getColumnFamily())));
  assertEquals(0,range.stop.colQualifier.compareTo(t2bb(range2.getEndKey().getColumnQualifier())));
  assertEquals(range.start.timestamp,range.start.timestamp);
  assertEquals(range.stop.timestamp,range.stop.timestamp);
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void attachIteratorLoginFailure() throws Exception {
  client.attachIterator(badLogin,"slow",setting,EnumSet.allOf(IteratorScope.class));
}

</code></pre>

<pre class="type-10 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=AccumuloSecurityException.class,timeout=5000) public void testClassLoadLoginFailure() throws Exception {
  client.testClassLoad(badLogin,DevNull.class.getName(),SortedKeyValueIterator.class.getName());
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
