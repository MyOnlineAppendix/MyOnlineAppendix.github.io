<h3 style="margin:0px">Class: org.apache.accumulo.test.ShellServerIT (53 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(22)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(21)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(18)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(13)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies assertions inside branch conditions"><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >BranchVerifier&nbsp;(4)</kbd></button>&nbsp;<button id="17"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('17')" data-toggle="tooltip" title="Releases resources used by the test cases"><kbd id="tag-17"class="label-info"style="display: inline-block;font-size:7pt" >TestCleaner&nbsp;(3)</kbd></button>&nbsp;<button id="14"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('14')" data-toggle="tooltip" title="Verifies values related to public fields."><kbd id="tag-14"class="label-info"style="display: inline-block;font-size:7pt" >PublicFieldVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;<button id="21"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('21')" data-toggle="tooltip" title="Sets implicit assumptions "><kbd id="tag-21"class="label-info"style="display: inline-block;font-size:7pt" >AssumptionSetter&nbsp;(1)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void iter() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  ts.exec("insert a cf cq 1");
  ts.exec("insert a cf cq 1");
  ts.exec("insert a cf cq 1");
  ts.input.set("true\n\n\n\nSTRING\n");
  ts.exec("setshelliter -class org.apache.accumulo.core.iterators.user.SummingCombiner -p 10 -pn sum -n name",true);
  ts.exec("setshelliter -class org.apache.accumulo.core.iterators.user.SummingCombiner -p 11 -pn sum -n name",false);
  ts.exec("setshelliter -class org.apache.accumulo.core.iterators.user.SummingCombiner -p 10 -pn sum -n other",false);
  ts.input.set("true\n\n\n\nSTRING\n");
  ts.exec("setshelliter -class org.apache.accumulo.core.iterators.user.SummingCombiner -p 11 -pn sum -n xyzzy",true);
  ts.exec("scan -pn sum",true,"3",true);
  ts.exec("listshelliter",true,"Iterator name",true);
  ts.exec("listshelliter",true,"Iterator xyzzy",true);
  ts.exec("listshelliter",true,"Profile : sum",true);
  ts.exec("deleteshelliter -pn sum -n name",true);
  ts.exec("listshelliter",true,"Iterator name",false);
  ts.exec("listshelliter",true,"Iterator xyzzy",true);
  ts.exec("deleteshelliter -pn sum -a",true);
  ts.exec("listshelliter",true,"Iterator xyzzy",false);
  ts.exec("listshelliter",true,"Profile : sum",false);
  ts.exec("deletetable -f " + table);
  ts.exec("createtable " + table);
  ts.exec("insert a cf cq 1");
  ts.exec("insert a cf cq 1");
  ts.exec("insert a cf cq 1");
  ts.input.set("true\n\n\n\nSTRING\n");
  ts.exec("setiter -scan -class org.apache.accumulo.core.iterators.user.SummingCombiner -p 10 -n name",true);
  ts.exec("setiter -scan -class org.apache.accumulo.core.iterators.user.SummingCombiner -p 11 -n name",false);
  ts.exec("setiter -scan -class org.apache.accumulo.core.iterators.user.SummingCombiner -p 10 -n other",false);
  ts.input.set("true\n\n\n\nSTRING\n");
  ts.exec("setiter -scan -class org.apache.accumulo.core.iterators.user.SummingCombiner -p 11 -n xyzzy",true);
  ts.exec("scan",true,"3",true);
  ts.exec("listiter -scan",true,"Iterator name",true);
  ts.exec("listiter -scan",true,"Iterator xyzzy",true);
  ts.exec("listiter -minc",true,"Iterator name",false);
  ts.exec("listiter -minc",true,"Iterator xyzzy",false);
  ts.exec("deleteiter -scan -n name",true);
  ts.exec("listiter -scan",true,"Iterator name",false);
  ts.exec("listiter -scan",true,"Iterator xyzzy",true);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void setscaniterDeletescaniter() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  ts.exec("insert a cf cq 1");
  ts.exec("insert a cf cq 1");
  ts.exec("insert a cf cq 1");
  ts.input.set("true\n\n\n\nSTRING");
  ts.exec("setscaniter -class org.apache.accumulo.core.iterators.user.SummingCombiner -p 10 -n name",true);
  ts.exec("scan",true,"3",true);
  ts.exec("deletescaniter -n name",true);
  ts.exec("scan",true,"1",true);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void classpath() throws Exception {
  ts.exec("classpath",true,"Level 2: Java Classloader (loads everything defined by java classpath) URL classpath items are",true);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void maxrow() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table,true);
  ts.exec("insert a cf cq value",true);
  ts.exec("insert b cf cq value",true);
  ts.exec("insert ccc cf cq value",true);
  ts.exec("insert zzz cf cq value",true);
  ts.exec("maxrow",true,"zzz",true);
  ts.exec("delete zzz cf cq",true);
  ts.exec("maxrow",true,"ccc",true);
  ts.exec("deletetable -f " + table,true);
}

</code></pre>

<pre class="type-9 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void listcompactions() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table,true);
  ts.exec("config -t " + table + " -s table.iterator.minc.slow=30,org.apache.accumulo.test.functional.SlowIterator",true);
  ts.exec("config -t " + table + " -s table.iterator.minc.slow.opt.sleepTime=1000",true);
  ts.exec("insert a cf cq value",true);
  ts.exec("insert b cf cq value",true);
  ts.exec("insert c cf cq value",true);
  ts.exec("insert d cf cq value",true);
  ts.exec("flush -t " + table,true);
  ts.exec("sleep 0.2",true);
  ts.exec("listcompactions",true,"default_tablet");
  String[] lines=ts.output.get().split("\n");
  String last=lines[lines.length - 1];
  String[] parts=last.split("\\|");
  assertEquals(12,parts.length);
  ts.exec("deletetable -f " + table,true);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testCompactionSelectionAndStrategy() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  ts.exec("compact -t " + table + " -w --sf-ename F.* -s "+ TestCompactionStrategy.class.getName()+ " -sc inputPrefix=F,dropPrefix=A",false);
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@AfterClass public static void tearDownAfterClass() throws Exception {
  if (null != traceProcess) {
    traceProcess.destroy();
  }
}

</code></pre>

<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void egrep() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  make10();
  String lines=ts.exec("egrep row[123]",true);
  assertTrue(lines.split("\n").length - 1 == 3);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void importDirectory() throws Exception {
  final String table=name.getMethodName();
  Configuration conf=new Configuration();
  FileSystem fs=FileSystem.get(conf);
  File importDir=new File(rootPath,"import");
  assertTrue(importDir.mkdir());
  String even=new File(importDir,"even.rf").toString();
  String odd=new File(importDir,"odd.rf").toString();
  File errorsDir=new File(rootPath,"errors");
  assertTrue(errorsDir.mkdir());
  fs.mkdirs(new Path(errorsDir.toString()));
  AccumuloConfiguration aconf=AccumuloConfiguration.getDefaultConfiguration();
  FileSKVWriter evenWriter=FileOperations.getInstance().openWriter(even,fs,conf,aconf);
  evenWriter.startDefaultLocalityGroup();
  FileSKVWriter oddWriter=FileOperations.getInstance().openWriter(odd,fs,conf,aconf);
  oddWriter.startDefaultLocalityGroup();
  long timestamp=System.currentTimeMillis();
  Text cf=new Text("cf");
  Text cq=new Text("cq");
  Value value=new Value("value".getBytes());
  for (int i=0; i < 100; i+=2) {
    Key key=new Key(new Text(String.format("%8d",i)),cf,cq,timestamp);
    evenWriter.append(key,value);
    key=new Key(new Text(String.format("%8d",i + 1)),cf,cq,timestamp);
    oddWriter.append(key,value);
  }
  evenWriter.close();
  oddWriter.close();
  assertEquals(0,ts.shell.getExitCode());
  ts.exec("createtable " + table,true);
  ts.exec("importdirectory " + importDir + " "+ errorsDir+ " true",true);
  ts.exec("scan -r 00000000",true,"00000000",true);
  ts.exec("scan -r 00000099",true,"00000099",true);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void ping() throws Exception {
  for (int i=0; i < 10; i++) {
    ts.exec("ping",true,"OK",true);
    if (ts.output.get().split("\n").length == 3)     break;
    sleepUninterruptibly(1,TimeUnit.SECONDS);
  }
  assertEquals(3,ts.output.get().split("\n").length);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void help() throws Exception {
  ts.exec("help -np",true,"Help Commands",true);
  ts.exec("?",true,"Help Commands",true);
  for (  String c : ("bye exit quit " + "about help info ? " + "deleteiter deletescaniter listiter setiter setscaniter "+ "grant revoke systempermissions tablepermissions userpermissions "+ "execfile history "+ "authenticate cls clear notable sleep table user whoami "+ "clonetable config createtable deletetable droptable du exporttable importtable offline online renametable tables "+ "addsplits compact constraint flush getgropus getsplits merge setgroups "+ "addauths createuser deleteuser dropuser getauths passwd setauths users "+ "delete deletemany deleterows egrep formatter interpreter grep importdirectory insert maxrow scan").split(" ")) {
    ts.exec("help " + c,true);
  }
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void info() throws Exception {
  ts.exec("info",true,Constants.VERSION,true);
}

</code></pre>

<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void tables() throws Exception {
  final String table=name.getMethodName(), table1=table + "_z", table2=table + "_a";
  ts.exec("createtable " + table1);
  ts.exec("createtable " + table2);
  ts.exec("notable");
  String lst=ts.exec("tables -l");
  assertTrue(lst.indexOf(table2) < lst.indexOf(table1));
  lst=ts.exec("tables -l -s");
  assertTrue(lst.indexOf(table1) < lst.indexOf(table2));
}

</code></pre>

<pre class="type-9 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void whoami() throws Exception {
  AuthenticationToken token=getToken();
  assertTrue(ts.exec("whoami",true).contains(getPrincipal()));
  if (token instanceof PasswordToken) {
    ts.input.set("secret\nsecret\n");
  }
  ts.exec("createuser test_user");
  ts.exec("setauths -u test_user -s 12,3,4");
  String auths=ts.exec("getauths -u test_user");
  assertTrue(auths.contains("3") && auths.contains("12") && auths.contains("4"));
  if (token instanceof PasswordToken) {
    ts.input.set("secret\n");
    ts.exec("user test_user",true);
    assertTrue(ts.exec("whoami",true).contains("test_user"));
    ts.input.set(getRootPassword() + "\n");
    ts.exec("user root",true);
  }
}

</code></pre>

<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void trace() throws Exception {
  final String table=name.getMethodName() + "Test";
  ts.exec("trace on",true);
  ts.exec("createtable " + table,true);
  ts.exec("insert a b c value",true);
  ts.exec("scan -np",true,"value",true);
  ts.exec("deletetable -f " + table);
  ts.exec("sleep 1");
  String trace=ts.exec("trace off");
  System.out.println(trace);
  assertTrue(trace.contains("sendMutations"));
  assertTrue(trace.contains("startScan"));
  assertTrue(trace.contains("DeleteTable"));
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void sleep() throws Exception {
  long now=System.currentTimeMillis();
  ts.exec("sleep 0.2",true);
  long diff=System.currentTimeMillis() - now;
  assertTrue("Diff was actually " + diff,diff >= 200);
  assertTrue("Diff was actually " + diff,diff < 600);
}

</code></pre>

<pre class="type-9 type-5 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void notable() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table,true);
  ts.exec("scan",true," " + table + ">",true);
  assertTrue(ts.output.get().contains(" " + table + ">"));
  ts.exec("notable",true);
  ts.exec("scan",false,"Not in a table context.",true);
  assertFalse(ts.output.get().contains(" " + table + ">"));
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setupShell() throws Exception {
  ts=new TestShell(getPrincipal(),getRootPassword(),getCluster().getConfig().getInstanceName(),getCluster().getConfig().getZooKeepers(),getCluster().getConfig().getClientConfFile());
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testScanScample() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  ts.exec("insert 9255 doc content 'abcde'");
  ts.exec("insert 9255 doc url file://foo.txt");
  ts.exec("insert 8934 doc content 'accumulo scales'");
  ts.exec("insert 8934 doc url file://accumulo_notes.txt");
  ts.exec("insert 2317 doc content 'milk, eggs, bread, parmigiano-reggiano'");
  ts.exec("insert 2317 doc url file://groceries/9.txt");
  ts.exec("insert 3900 doc content 'EC2 ate my homework'");
  ts.exec("insert 3900 doc uril file://final_project.txt");
  String clone1=table + "_clone_1";
  ts.exec("clonetable -s table.sampler.opt.hasher=murmur3_32,table.sampler.opt.modulus=3,table.sampler=org.apache.accumulo.core.sample.RowSampler " + table + " "+ clone1);
  ts.exec("compact -t " + clone1 + " -w --sf-no-sample");
  ts.exec("table " + clone1);
  ts.exec("scan --sample",true,"parmigiano-reggiano",true);
  ts.exec("grep --sample reg",true,"parmigiano-reggiano",true);
  ts.exec("scan --sample",true,"accumulo",false);
  ts.exec("grep --sample acc",true,"accumulo",false);
  String clone2=table + "_clone_2";
  ts.exec("clonetable -s table.sampler.opt.hasher=murmur3_32,table.sampler.opt.modulus=2,table.sampler=org.apache.accumulo.core.sample.RowSampler " + clone1 + " "+ clone2);
  ts.exec("table " + clone2);
  ts.exec("scan --sample",false,"SampleNotPresentException",true);
  ts.exec("grep --sample reg",false,"SampleNotPresentException",true);
  ts.exec("compact -t " + clone2 + " -w --sf-no-sample");
  for (  String expected : Arrays.asList("2317","3900","9255")) {
    ts.exec("scan --sample",true,expected,true);
    ts.exec("grep --sample " + expected.substring(0,2),true,expected,true);
  }
  ts.exec("scan --sample",true,"8934",false);
  ts.exec("grep --sample 89",true,"8934",false);
}

</code></pre>

<pre class="type-9 type-11 type-3 type-7 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleterows() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  final String tableId=getTableId(table);
  int base=countFiles(tableId);
  assertEquals(0,base);
  log.info("Adding 2 splits");
  ts.exec("addsplits row5 row7");
  log.info("Writing 10 records");
  make10();
  log.info("Flushing table");
  ts.exec("flush -w -t " + table);
  log.info("Table flush completed");
  List<String> files=getFiles(tableId);
  if (3 < files.size()) {
    log.info("More than 3 files were found, compacting before proceeding");
    ts.exec("compact -w -t " + table);
    files=getFiles(tableId);
    assertEquals("Expected to only find 3 files after compaction: " + files,3,files.size());
  }
  assertNotNull(files);
  assertEquals("Found the following files: " + files,3,files.size());
  ts.exec("deleterows -t " + table + " -b row5 -e row7");
  assertEquals(2,countFiles(tableId));
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void formatter() throws Exception {
  ts.exec("createtable formatter_test",true);
  ts.exec("table formatter_test",true);
  ts.exec("insert row cf cq 1234abcd",true);
  ts.exec("insert row cf1 cq1 9876fedc",true);
  ts.exec("insert row2 cf cq 13579bdf",true);
  ts.exec("insert row2 cf1 cq 2468ace",true);
  ArrayList<String> expectedDefault=new ArrayList<>(4);
  expectedDefault.add("row cf:cq []    1234abcd");
  expectedDefault.add("row cf1:cq1 []    9876fedc");
  expectedDefault.add("row2 cf:cq []    13579bdf");
  expectedDefault.add("row2 cf1:cq []    2468ace");
  ArrayList<String> actualDefault=new ArrayList<>(4);
  boolean isFirst=true;
  for (  String s : ts.exec("scan -np",true).split("[\n\r]+")) {
    if (isFirst) {
      isFirst=false;
    }
 else {
      actualDefault.add(s);
    }
  }
  ArrayList<String> expectedFormatted=new ArrayList<>(4);
  expectedFormatted.add("row cf:cq []    0x31 0x32 0x33 0x34 0x61 0x62 0x63 0x64");
  expectedFormatted.add("row cf1:cq1 []    0x39 0x38 0x37 0x36 0x66 0x65 0x64 0x63");
  expectedFormatted.add("row2 cf:cq []    0x31 0x33 0x35 0x37 0x39 0x62 0x64 0x66");
  expectedFormatted.add("row2 cf1:cq []    0x32 0x34 0x36 0x38 0x61 0x63 0x65");
  ts.exec("formatter -t formatter_test -f " + HexFormatter.class.getName(),true);
  ArrayList<String> actualFormatted=new ArrayList<>(4);
  isFirst=true;
  for (  String s : ts.exec("scan -np",true).split("[\n\r]+")) {
    if (isFirst) {
      isFirst=false;
    }
 else {
      actualFormatted.add(s);
    }
  }
  ts.exec("deletetable -f formatter_test",true);
  assertTrue(Iterables.elementsEqual(expectedDefault,new ArrayList<String>(actualDefault)));
  assertTrue(Iterables.elementsEqual(expectedFormatted,new ArrayList<String>(actualFormatted)));
}

</code></pre>

<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void listscans() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table,true);
  for (int i=0; i < 6; i++) {
    ts.exec("insert " + i + " cf cq value",true);
  }
  Connector connector=getConnector();
  final Scanner s=connector.createScanner(table,Authorizations.EMPTY);
  IteratorSetting cfg=new IteratorSetting(30,SlowIterator.class);
  SlowIterator.setSleepTime(cfg,500);
  s.addScanIterator(cfg);
  Thread thread=new Thread(){
    @Override public void run(){
      try {
        Iterators.size(s.iterator());
      }
 catch (      Exception ex) {
        throw new RuntimeException(ex);
      }
    }
  }
;
  thread.start();
  List<String> scans=new ArrayList<String>();
  for (int i=0; i < 50 && scans.isEmpty(); i++) {
    String currentScans=ts.exec("listscans",true);
    log.info("Got output from listscans:\n" + currentScans);
    String[] lines=currentScans.split("\n");
    for (int scanOffset=2; scanOffset < lines.length; scanOffset++) {
      String currentScan=lines[scanOffset];
      if (currentScan.contains(table)) {
        log.info("Retaining scan: " + currentScan);
        scans.add(currentScan);
      }
 else {
        log.info("Ignoring scan because of wrong table: " + currentScan);
      }
    }
    sleepUninterruptibly(300,TimeUnit.MILLISECONDS);
  }
  thread.join();
  assertFalse("Could not find any active scans over table " + table,scans.isEmpty());
  for (  String scan : scans) {
    if (!scan.contains("RUNNING")) {
      log.info("Ignoring scan because it doesn't contain 'RUNNING': " + scan);
      continue;
    }
    String parts[]=scan.split("\\|");
    assertEquals("Expected 14 colums, but found " + parts.length + " instead for '"+ Arrays.toString(parts)+ "'",14,parts.length);
    String tserver=parts[0].trim();
    String hostPortPattern=".+:\\d+";
    assertTrue(tserver.matches(hostPortPattern));
    assertTrue(getConnector().instanceOperations().getTabletServers().contains(tserver));
    String client=parts[1].trim();
    assertTrue(client + " does not match " + hostPortPattern,client.matches(hostPortPattern));
    Long.parseLong(parts[11].trim());
  }
  ts.exec("deletetable -f " + table,true);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testPertableClasspath() throws Exception {
  final String table=name.getMethodName();
  File fooFilterJar=File.createTempFile("FooFilter",".jar",new File(rootPath));
  FileUtils.copyInputStreamToFile(this.getClass().getResourceAsStream("/FooFilter.jar"),fooFilterJar);
  fooFilterJar.deleteOnExit();
  File fooConstraintJar=File.createTempFile("FooConstraint",".jar",new File(rootPath));
  FileUtils.copyInputStreamToFile(this.getClass().getResourceAsStream("/FooConstraint.jar"),fooConstraintJar);
  fooConstraintJar.deleteOnExit();
  ts.exec("config -s " + Property.VFS_CONTEXT_CLASSPATH_PROPERTY.getKey() + "cx1="+ fooFilterJar.toURI().toString()+ ","+ fooConstraintJar.toURI().toString(),true);
  ts.exec("createtable " + table,true);
  ts.exec("config -t " + table + " -s "+ Property.TABLE_CLASSPATH.getKey()+ "=cx1",true);
  sleepUninterruptibly(200,TimeUnit.MILLISECONDS);
  ts.exec("config -t " + table + " -s "+ Property.TABLE_ITERATOR_PREFIX.getKey()+ "scan.foo=10,org.apache.accumulo.test.FooFilter");
  ts.exec("insert foo f q v",true);
  sleepUninterruptibly(100,TimeUnit.MILLISECONDS);
  ts.exec("scan -np",true,"foo",false);
  ts.exec("constraint -a FooConstraint",true);
  ts.exec("offline -w " + table);
  ts.exec("online -w " + table);
  ts.exec("table " + table,true);
  ts.exec("insert foo f q v",false);
  ts.exec("insert ok foo q v",true);
  ts.exec("deletetable -f " + table,true);
  ts.exec("config -d " + Property.VFS_CONTEXT_CLASSPATH_PROPERTY.getKey() + "cx1");
}

</code></pre>

<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void byeQuitExit() throws Exception {
  for (  String cmd : "bye quit exit".split(" ")) {
    assertFalse(ts.shell.getExit());
    ts.exec(cmd);
    assertTrue(ts.shell.getExit());
    ts.shell.setExit(false);
  }
}

</code></pre>

<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void deletemany() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  make10();
  assertEquals(10,countkeys(table));
  ts.exec("deletemany -f -b row8");
  assertEquals(8,countkeys(table));
  ts.exec("scan -t " + table + " -np",true,"row8",false);
  make10();
  ts.exec("deletemany -f -b row4 -e row5");
  assertEquals(8,countkeys(table));
  make10();
  ts.exec("deletemany -f -c cf:col4,cf:col5");
  assertEquals(8,countkeys(table));
  make10();
  ts.exec("deletemany -f -r row3");
  assertEquals(9,countkeys(table));
  make10();
  ts.exec("deletemany -f -r row3");
  assertEquals(9,countkeys(table));
  make10();
  ts.exec("deletemany -f -b row3 -be -e row5 -ee");
  assertEquals(9,countkeys(table));
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void durability() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  ts.exec("insert -d none a cf cq randomGunkaASDFWEAQRd");
  ts.exec("insert -d foo a cf cq2 2",false,"foo",true);
  ts.exec("scan -r a",true,"randomGunkaASDFWEAQRd",true);
  ts.exec("scan -r a",true,"foo",false);
}

</code></pre>

<pre class="type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void createTableWithProperties() throws Exception {
  final String table=name.getMethodName();
  String testProp="table.custom.description=description,table.custom.testProp=testProp," + Property.TABLE_SPLIT_THRESHOLD.getKey() + "=10K";
  ts.exec("createtable " + table + " -prop "+ testProp,true);
  ts.exec("insert a b c value",true);
  ts.exec("scan",true,"value",true);
  Connector connector=getConnector();
  for (  Entry<String,String> entry : connector.tableOperations().getProperties(table)) {
    if (entry.getKey().equals("table.custom.description"))     Assert.assertTrue("Initial property was not set correctly",entry.getValue().equals("description"));
    if (entry.getKey().equals("table.custom.testProp"))     Assert.assertTrue("Initial property was not set correctly",entry.getValue().equals("testProp"));
    if (entry.getKey().equals(Property.TABLE_SPLIT_THRESHOLD.getKey()))     Assert.assertTrue("Initial property was not set correctly",entry.getValue().equals("10K"));
  }
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public void addauths() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table + " -evc");
  boolean success=false;
  for (int i=0; i < 9 && !success; i++) {
    try {
      ts.exec("insert a b c d -l foo",false,"does not have authorization",true,new ErrorMessageCallback(){
        @Override public String getErrorMessage(){
          try {
            Connector c=getConnector();
            return "Current auths for root are: " + c.securityOperations().getUserAuthorizations("root").toString();
          }
 catch (          Exception e) {
            return "Could not check authorizations";
          }
        }
      }
);
    }
 catch (    AssertionError e) {
      Thread.sleep(200);
    }
  }
  if (!success) {
    ts.exec("insert a b c d -l foo",false,"does not have authorization",true,new ErrorMessageCallback(){
      @Override public String getErrorMessage(){
        try {
          Connector c=getConnector();
          return "Current auths for root are: " + c.securityOperations().getUserAuthorizations("root").toString();
        }
 catch (        Exception e) {
          return "Could not check authorizations";
        }
      }
    }
);
  }
  ts.exec("addauths -s foo,bar",true);
  boolean passed=false;
  for (int i=0; i < 50 && !passed; i++) {
    try {
      ts.exec("getauths",true,"foo",true);
      ts.exec("getauths",true,"bar",true);
      passed=true;
    }
 catch (    AssertionError|Exception e) {
      sleepUninterruptibly(300,TimeUnit.MILLISECONDS);
    }
  }
  assertTrue("Could not successfully see updated authoriations",passed);
  ts.exec("insert a b c d -l foo");
  ts.exec("scan",true,"[foo]");
  ts.exec("scan -s bar",true,"[foo]",false);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void systempermission() throws Exception {
  ts.exec("systempermissions");
  assertEquals(12,ts.output.get().split("\n").length - 1);
  ts.exec("tablepermissions",true);
  assertEquals(6,ts.output.get().split("\n").length - 1);
}

</code></pre>

<pre class="type-9 type-5 type-21 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Sets implicit assumptions ">AssumptionSetter</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Sets implicit assumptions 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void badLogin() throws Exception {
  Assume.assumeTrue(getToken() instanceof PasswordToken);
  ts.input.set(getRootPassword() + "\n");
  String err=ts.exec("user NoSuchUser",false);
  assertTrue(err.contains("BAD_CREDENTIALS for user NoSuchUser"));
}

</code></pre>

<pre class="type-9 type-5 type-3 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompactions() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  String tableId=getTableId(table);
  ts.exec("insert a b c d");
  ts.exec("flush -w");
  ts.exec("insert x y z v");
  ts.exec("flush -w");
  int oldCount=countFiles(tableId);
  ts.exec("compact -t " + table + " -w");
  assertTrue(countFiles(tableId) < oldCount);
  ts.exec("addsplits -t " + table + " f");
  ts.exec("insert m 1 2 3");
  ts.exec("flush -w");
  ts.exec("insert n 1 2 v901");
  ts.exec("flush -w");
  List<String> oldFiles=getFiles(tableId);
  assertEquals("Files that were found: " + oldFiles,4,oldFiles.size());
  ts.exec("compact -b g -e z -w");
  assertEquals(2,countFiles(tableId));
  ts.exec("compact -w");
  assertEquals(2,countFiles(tableId));
  ts.exec("merge --all -t " + table);
  ts.exec("compact -w");
  assertEquals(1,countFiles(tableId));
  ts.exec("insert z 1 2 v900");
  ts.exec("compact -w -s " + TestCompactionStrategy.class.getName() + " -sc inputPrefix=F,dropPrefix=A");
  assertEquals(1,countFiles(tableId));
  ts.exec("scan",true,"v900",true);
  ts.exec("scan",true,"v901",false);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void interpreter() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table,true);
  ts.exec("interpreter -l",true,"HexScan",false);
  ts.exec("insert \\x02 cf cq value",true);
  ts.exec("scan -b 02",true,"value",false);
  ts.exec("interpreter -i org.apache.accumulo.core.util.interpret.HexScanInterpreter",true);
  sleepUninterruptibly(3,TimeUnit.SECONDS);
  ts.exec("interpreter -l",true,"HexScan",true);
  ts.exec("scan -b 02",true,"value",true);
  ts.exec("deletetable -f " + table,true);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void debug() throws Exception {
  ts.exec("debug",true,"off",true);
  ts.exec("debug on",true);
  ts.exec("debug",true,"on",true);
  ts.exec("debug off",true);
  ts.exec("debug",true,"off",true);
  ts.exec("debug debug",false);
  ts.exec("debug debug debug",false);
}

</code></pre>

<pre class="type-9 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCompactionSelection() throws Exception {
  final String table=name.getMethodName();
  final String clone=table + "_clone";
  ts.exec("createtable " + table);
  ts.exec("insert a b c d");
  ts.exec("flush -w");
  ts.exec("insert x y z v");
  ts.exec("flush -w");
  ts.exec("clonetable -s " + Property.TABLE_MAJC_RATIO.getKey() + "=10 "+ table+ " "+ clone);
  ts.exec("table " + clone);
  ts.exec("insert m n l o");
  ts.exec("flush -w");
  String tableId=getTableId(table);
  String cloneId=getTableId(clone);
  assertEquals(3,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --sf-epath .*tables/"+ tableId+ ".*");
  assertEquals(2,countFiles(cloneId));
  ts.exec("insert r s t u");
  ts.exec("flush -w");
  assertEquals(3,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --sf-ename F.*");
  assertEquals(2,countFiles(cloneId));
  Random rand=new Random();
  StringBuilder sb=new StringBuilder("insert b v q ");
  for (int i=0; i < 10000; i++) {
    sb.append('a' + rand.nextInt(26));
  }
  ts.exec(sb.toString());
  ts.exec("flush -w");
  ts.exec(sb.toString());
  ts.exec("flush -w");
  assertEquals(4,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --sf-lt-esize 1000");
  assertEquals(3,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --sf-gt-esize 1K --min-files 3");
  assertEquals(3,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --sf-gt-esize 1K --min-files 2");
  assertEquals(2,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --min-files 3");
  assertEquals(2,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --min-files 2");
  assertEquals(1,countFiles(cloneId));
  ts.exec(sb.toString());
  ts.exec("flush -w");
  ts.exec("insert m n l o");
  ts.exec("flush -w");
  ts.exec("insert m n l o");
  ts.exec("flush -w");
  assertEquals(4,countFiles(cloneId));
  ts.exec("compact -t " + clone + " -w --sf-ename F.* --sf-lt-esize 1K");
  assertEquals(3,countFiles(cloneId));
  String clone2=table + "_clone_2";
  ts.exec("clonetable -s table.sampler.opt.hasher=murmur3_32,table.sampler.opt.modulus=7,table.sampler=org.apache.accumulo.core.sample.RowSampler " + clone + " "+ clone2);
  String clone2Id=getTableId(clone2);
  assertEquals(3,countFiles(clone2Id));
  ts.exec("table " + clone2);
  ts.exec("insert v n l o");
  ts.exec("flush -w");
  ts.exec("insert x n l o");
  ts.exec("flush -w");
  assertEquals(5,countFiles(clone2Id));
  ts.exec("compact -t " + clone2 + " -w --sf-no-sample");
  assertEquals(3,countFiles(clone2Id));
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@After public void tearDownShell(){
  ts.shell.shutdown();
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void groups() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  ts.exec("setgroups -t " + table + " alpha=a,b,c num=3,2,1");
  ts.exec("getgroups -t " + table,true,"alpha=a,b,c",true);
  ts.exec("getgroups -t " + table,true,"num=1,2,3",true);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void namespaces() throws Exception {
  ts.exec("namespaces",true,"\"\"",true);
  ts.exec("namespaces",true,Namespaces.ACCUMULO_NAMESPACE,true);
  ts.exec("createnamespace thing1",true);
  String namespaces=ts.exec("namespaces");
  assertTrue(namespaces.contains("thing1"));
  ts.exec("renamenamespace thing1 thing2");
  namespaces=ts.exec("namespaces");
  assertTrue(namespaces.contains("thing2"));
  assertTrue(!namespaces.contains("thing1"));
  ts.exec("createtable thing2.thingy",true);
  ts.exec("deletenamespace thing2");
  ts.exec("y");
  ts.exec("namespaces",true,"thing2",true);
  ts.exec("du -ns thing2",true,"thing2.thingy",true);
  ts.exec("offline -ns thing2",true);
  ts.exec("online -ns thing2",true);
  ts.exec("flush -ns thing2",true);
  ts.exec("compact -ns thing2",true);
  ts.exec("createnamespace testers3",true);
  ts.exec("createtable testers3.1",true);
  ts.exec("createtable testers3.2",true);
  ts.exec("deletetable -ns testers3 -f",true);
  ts.exec("tables",true,"testers3.1",false);
  ts.exec("namespaces",true,"testers3",true);
  ts.exec("deletenamespace testers3 -f",true);
  ts.input.set("true\n\n\n\nSTRING\n");
  ts.exec("setiter -ns thing2 -scan -class org.apache.accumulo.core.iterators.user.SummingCombiner -p 10 -n name",true);
  ts.exec("listiter -ns thing2 -scan",true,"Summing",true);
  ts.exec("deleteiter -ns thing2 -n name -scan",true);
  ts.exec("createuser dude");
  ts.exec("pass");
  ts.exec("pass");
  ts.exec("grant Namespace.CREATE_TABLE -ns thing2 -u dude",true);
  ts.exec("revoke Namespace.CREATE_TABLE -ns thing2 -u dude",true);
  ts.exec("config -ns thing2 -s table.file.max=44444",true);
  ts.exec("config -ns thing2",true,"44444",true);
  ts.exec("config -t thing2.thingy",true,"44444",true);
  ts.exec("config -t thing2.thingy -s table.file.max=55555",true);
  ts.exec("config -t thing2.thingy",true,"55555",true);
  ts.exec("createnamespace thing3 -cc thing2",true);
  ts.exec("config -ns thing3",true,"44444",true);
  ts.exec("deletenamespace -f thing2",true);
  ts.exec("namespaces",true,"thing2",false);
  ts.exec("tables",true,"thing2.thingy",false);
  ts.exec("constraint -ns thing3 -a org.apache.accumulo.examples.simple.constraints.NumericValueConstraint",true);
  ts.exec("createtable thing3.constrained",true);
  ts.exec("table thing3.constrained",true);
  ts.exec("constraint -d 1");
  ts.exec("constraint -l",true,"NumericValueConstraint",true);
  ts.exec("insert r cf cq abc",false);
  ts.exec("constraint -ns thing3 -d 1");
  ts.exec("sleep 1");
  ts.exec("insert r cf cq abc",true);
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@After public void deleteTables() throws Exception {
  Connector c=getConnector();
  for (  String table : c.tableOperations().list()) {
    if (!table.startsWith(Namespaces.ACCUMULO_NAMESPACE + ".") && !table.equals("trace"))     try {
      c.tableOperations().delete(table);
    }
 catch (    TableNotFoundException e) {
    }
  }
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void renametable() throws Exception {
  final String table=name.getMethodName() + "1", rename=name.getMethodName() + "2";
  ts.exec("createtable " + table);
  ts.exec("insert this is a value");
  ts.exec("renametable " + table + " "+ rename);
  ts.exec("tables",true,rename,true);
  ts.exec("tables",true,table,false);
  ts.exec("scan -t " + rename,true,"value",true);
  ts.exec("deletetable -f " + rename,true);
}

</code></pre>

<pre class="type-9 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void user() throws Exception {
  final String table=name.getMethodName();
  final boolean kerberosEnabled=getToken() instanceof KerberosToken;
  if (!kerberosEnabled) {
    ts.input.set("secret\nsecret\n");
  }
  ts.exec("createuser xyzzy",true);
  ts.exec("users",true,"xyzzy",true);
  String perms=ts.exec("userpermissions -u xyzzy",true);
  assertTrue(perms.contains("Table permissions (" + MetadataTable.NAME + "): Table.READ"));
  ts.exec("grant -u xyzzy -s System.CREATE_TABLE",true);
  perms=ts.exec("userpermissions -u xyzzy",true);
  assertTrue(perms.contains(""));
  ts.exec("grant -u " + getPrincipal() + " -t "+ MetadataTable.NAME+ " Table.WRITE",true);
  ts.exec("grant -u " + getPrincipal() + " -t "+ MetadataTable.NAME+ " Table.GOOFY",false);
  ts.exec("grant -u " + getPrincipal() + " -s foo",false);
  ts.exec("grant -u xyzzy -t " + MetadataTable.NAME + " foo",false);
  if (!kerberosEnabled) {
    ts.input.set("secret\nsecret\n");
    ts.exec("user xyzzy",true);
    ts.exec("createtable " + table,true,"xyzzy@",true);
    ts.exec("insert row1 cf cq 1",true);
    ts.exec("scan",true,"row1",true);
    ts.exec("droptable -f " + table,true);
    ts.input.set(getRootPassword() + "\n" + getRootPassword()+ "\n");
    ts.exec("user root",true);
  }
  ts.exec("deleteuser " + getPrincipal(),false,"delete yourself",true);
  ts.exec("revoke -u xyzzy -s System.CREATE_TABLE",true);
  ts.exec("revoke -u xyzzy -s System.GOOFY",false);
  ts.exec("revoke -u xyzzy -s foo",false);
  ts.exec("revoke -u xyzzy -t " + MetadataTable.NAME + " Table.WRITE",true);
  ts.exec("revoke -u xyzzy -t " + MetadataTable.NAME + " Table.GOOFY",false);
  ts.exec("revoke -u xyzzy -t " + MetadataTable.NAME + " foo",false);
  ts.exec("deleteuser xyzzy",true,"deleteuser { xyzzy } (yes|no)?",true);
  ts.exec("deleteuser -f xyzzy",true);
  ts.exec("users",true,"xyzzy",false);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void grep() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table,true);
  make10();
  ts.exec("grep row[123]",true,"row1",false);
  ts.exec("grep row5",true,"row5",true);
  ts.exec("deletetable -f " + table,true);
}

</code></pre>

<pre class="type-9 type-5 type-3 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies values related to public fields.
"></span><br>
@Test public void du() throws Exception {
  final String table=name.getMethodName();
  ts.exec("notable",true);
  ts.output.clear();
  ts.exec("du",true,"",true);
  ts.output.clear();
  ts.exec("createtable " + table);
  make10();
  ts.exec("flush -t " + table + " -w");
  ts.exec("du " + table,true," [" + table + "]",true);
  ts.output.clear();
  ts.shell.execCommand("du -h",false,false);
  String o=ts.output.get();
  assertTrue("Output did not match regex: '" + o + "'",o.matches(".*[1-9][0-9][0-9]\\s\\[" + table + "\\]\\n"));
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void clearCls() throws Exception {
  if (ts.shell.getReader().getTerminal().isAnsiSupported()) {
    ts.exec("cls",true,"[1;1H");
    ts.exec("clear",true,"[2J");
  }
 else {
    ts.exec("cls",false,"does not support");
    ts.exec("clear",false,"does not support");
  }
}

</code></pre>

<pre class="type-9 type-8 type-5 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void scansWithClassLoaderContext() throws Exception {
  try {
    Class.forName("org.apache.accumulo.test.functional.ValueReversingIterator");
    fail("ValueReversingIterator already on the classpath");
  }
 catch (  Exception e) {
    assertTrue(true);
  }
  ts.exec("createtable t");
  make10();
  setupFakeContextPath();
  ts.exec("config -s " + Property.VFS_CONTEXT_CLASSPATH_PROPERTY + FAKE_CONTEXT+ "="+ FAKE_CONTEXT_CLASSPATH);
  ts.exec("config -t t -s table.classpath.context=" + FAKE_CONTEXT);
  ts.exec("setscaniter -n reverse -t t -p 21 -class org.apache.accumulo.test.functional.ValueReversingIterator");
  String result=ts.exec("scan -np -b row1 -e row1");
  assertEquals(2,result.split("\n").length);
  log.error(result);
  assertTrue(result.contains("value"));
  result=ts.exec("scan -np -b row3 -e row5");
  assertEquals(4,result.split("\n").length);
  assertTrue(result.contains("value"));
  result=ts.exec("scan -np -r row3");
  assertEquals(2,result.split("\n").length);
  assertTrue(result.contains("value"));
  result=ts.exec("scan -np -b row:");
  assertEquals(1,result.split("\n").length);
  result=ts.exec("scan -np -b row");
  assertEquals(11,result.split("\n").length);
  assertTrue(result.contains("value"));
  result=ts.exec("scan -np -e row:");
  assertEquals(11,result.split("\n").length);
  assertTrue(result.contains("value"));
  setupRealContextPath();
  ts.exec("config -s " + Property.VFS_CONTEXT_CLASSPATH_PROPERTY + REAL_CONTEXT+ "="+ REAL_CONTEXT_CLASSPATH);
  result=ts.exec("scan -np -b row1 -e row1 -cc " + REAL_CONTEXT);
  log.error(result);
  assertEquals(2,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  result=ts.exec("scan -np -b row3 -e row5 -cc " + REAL_CONTEXT);
  assertEquals(4,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  result=ts.exec("scan -np -r row3 -cc " + REAL_CONTEXT);
  assertEquals(2,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  result=ts.exec("scan -np -b row: -cc " + REAL_CONTEXT);
  assertEquals(1,result.split("\n").length);
  result=ts.exec("scan -np -b row -cc " + REAL_CONTEXT);
  assertEquals(11,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  result=ts.exec("scan -np -e row: -cc " + REAL_CONTEXT);
  assertEquals(11,result.split("\n").length);
  assertTrue(result.contains("eulav"));
  assertFalse(result.contains("value"));
  ts.exec("deletetable -f t");
}

</code></pre>

<pre class="type-9 type-11 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void exporttableImporttable() throws Exception {
  final String table=name.getMethodName(), table2=table + "2";
  ts.exec("createtable " + table + " -evc",true);
  make10();
  ts.exec("addsplits row5",true);
  ts.exec("config -t " + table + " -s table.split.threshold=345M",true);
  ts.exec("offline " + table,true);
  File exportDir=new File(rootPath,"ShellServerIT.export");
  String exportUri="file://" + exportDir.toString();
  String localTmp="file://" + new File(rootPath,"ShellServerIT.tmp").toString();
  ts.exec("exporttable -t " + table + " "+ exportUri,true);
  DistCp cp=newDistCp(new Configuration(false));
  String import_="file://" + new File(rootPath,"ShellServerIT.import").toString();
  if (getCluster().getClientConfig().getBoolean(ClientProperty.INSTANCE_RPC_SASL_ENABLED.getKey(),false)) {
    FileSystem fs=getCluster().getFileSystem();
    FileSystem localFs=FileSystem.getLocal(new Configuration(false));
    Path localTmpPath=new Path(localTmp);
    localFs.mkdirs(localTmpPath);
    Path importDir=new Path(import_);
    fs.mkdirs(importDir);
    try (BufferedReader reader=new BufferedReader(new FileReader(new File(exportDir,"distcp.txt")))){
      for (String line; (line=reader.readLine()) != null; ) {
        Path exportedFile=new Path(line);
        log.info("Copying " + line + " to "+ localTmpPath);
        fs.copyToLocalFile(exportedFile,localTmpPath);
        Path tmpFile=new Path(localTmpPath,exportedFile.getName());
        log.info("Moving " + tmpFile + " to the import directory "+ importDir);
        fs.moveFromLocalFile(tmpFile,importDir);
      }
    }
   }
 else {
    String[] distCpArgs=new String[]{"-f",exportUri + "/distcp.txt",import_};
    assertEquals("Failed to run distcp: " + Arrays.toString(distCpArgs),0,cp.run(distCpArgs));
  }
  ts.exec("importtable " + table2 + " "+ import_,true);
  ts.exec("config -t " + table2 + " -np",true,"345M",true);
  ts.exec("getsplits -t " + table2,true,"row5",true);
  ts.exec("constraint --list -t " + table2,true,"VisibilityConstraint=2",true);
  ts.exec("online " + table,true);
  ts.exec("deletetable -f " + table,true);
  ts.exec("deletetable -f " + table2,true);
}

</code></pre>

<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void merge() throws Exception {
  final String table=name.getMethodName();
  ts.exec("createtable " + table);
  ts.exec("addsplits a m z");
  ts.exec("getsplits",true,"z",true);
  ts.exec("merge --all",true);
  ts.exec("getsplits",true,"z",false);
  ts.exec("deletetable -f " + table);
  ts.exec("getsplits -t " + MetadataTable.NAME + "",true);
  assertEquals(2,ts.output.get().split("\n").length);
  ts.exec("getsplits -t accumulo.root",true);
  assertEquals(1,ts.output.get().split("\n").length);
  ts.exec("merge --all -t " + MetadataTable.NAME + "");
  ts.exec("getsplits -t " + MetadataTable.NAME + "",true);
  assertEquals(1,ts.output.get().split("\n").length);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void extensions() throws Exception {
  String extName="ExampleShellExtension";
  ts.exec("help",true,extName,false);
  ts.exec("extensions -l",true,extName,false);
  ts.exec("extensions -e",true);
  ts.exec("extensions -l",true,extName,true);
  ts.exec("help",true,extName,true);
  ts.exec(extName + "::debug",true,"This is a test",true);
  ts.exec("extensions -d",true);
  ts.exec("extensions -l",true,extName,false);
  ts.exec("help",true,extName,false);
  ts.exec(extName + "::debug",true,"Unknown command",true);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void clonetable() throws Exception {
  final String table=name.getMethodName(), clone=table + "_clone";
  ts.exec("createtable " + table + " -evc");
  ts.exec("config -t " + table + " -s table.split.threshold=123M",true);
  ts.exec("addsplits -t " + table + " a b c",true);
  ts.exec("insert a b c value");
  ts.exec("scan",true,"value",true);
  ts.exec("clonetable " + table + " "+ clone);
  ts.exec("constraint --list -t " + clone,true,"VisibilityConstraint=2",true);
  ts.exec("config -t " + clone + " -np",true,"123M",true);
  ts.exec("getsplits -t " + clone,true,"a\nb\nc\n");
  ts.exec("deletetable -f " + table);
  ts.exec("deletetable -f " + clone);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void getAuths() throws Exception {
  Assume.assumeFalse("test skipped for kerberos",getToken() instanceof KerberosToken);
  for (int i=1; i <= 2; i++) {
    String userName=name.getMethodName() + "user" + i;
    String password="password" + i;
    String auths="auth" + i + "A,auth"+ i+ "B";
    ts.exec("createuser " + userName,true);
    ts.exec(password,true);
    ts.exec("addauths -u " + userName + " -s "+ auths,true);
  }
  ts.exec("getauths -u getAuthsuser1",true,"auth1A",true);
  ts.exec("getauths -u getAuthsuser1",true,"auth1B",true);
  ts.exec("getauths -u getAuthsuser2",true,"auth2A",true);
  ts.exec("getauths -u getAuthsuser2",true,"auth2B",true);
  ts.exec("grant -u getAuthsuser1 -s System.ALTER_USER",true);
  ts.exec("user getAuthsuser1",true);
  ts.exec("password1",true);
  ts.exec("getauths -u getAuthsuser1",true,"auth1A",true);
  ts.exec("getauths -u getAuthsuser1",true,"auth1B",true);
  ts.exec("getauths -u getAuthsuser2",true,"auth2A",true);
  ts.exec("getauths -u getAuthsuser2",true,"auth2B",true);
  ts.exec("user getAuthsuser2",true);
  ts.exec("password2",true);
  ts.exec("getauths -u getAuthsuser2",true,"auth2A",true);
  ts.exec("getauths -u getAuthsuser2",true,"auth2B",true);
  ts.exec("getauths -u getAuthsuser1",false,"PERMISSION_DENIED",true);
  ts.exec("getauths -u getAuthsuser1",false,"PERMISSION_DENIED",true);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void constraint() throws Exception {
  final String table=name.getMethodName();
  ts.exec("constraint -l -t " + MetadataTable.NAME + "",true,"MetadataConstraints=1",true);
  ts.exec("createtable " + table + " -evc");
  getTableId(table);
  ts.exec("constraint -l -t " + table,true,"VisibilityConstraint=2",true);
  ts.exec("constraint -t " + table + " -d 2",true,"Removed constraint 2 from table " + table);
  sleepUninterruptibly(1,TimeUnit.SECONDS);
  ts.exec("constraint -l -t " + table,true,"VisibilityConstraint=2",false);
  ts.exec("deletetable -f " + table);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void setIterOptionPrompt() throws Exception {
  Connector conn=getConnector();
  String tableName=name.getMethodName();
  ts.exec("createtable " + tableName);
  ts.input.set("\n\n");
  ts.exec("setiter -scan -class org.apache.accumulo.core.iterators.ColumnFamilyCounter -p 30",false);
  ts.exec("setiter -scan -class org.apache.accumulo.core.iterators.ColumnFamilyCounter -p 30 -name cfcounter",true);
  String expectedKey="table.iterator.scan.cfcounter";
  String expectedValue="30,org.apache.accumulo.core.iterators.ColumnFamilyCounter";
  TableOperations tops=conn.tableOperations();
  checkTableForProperty(tops,tableName,expectedKey,expectedValue);
  ts.exec("deletetable " + tableName,true);
  tableName=tableName + "1";
  ts.exec("createtable " + tableName,true);
  ts.input.set("customcfcounter\n\n");
  ts.exec("setiter -scan -class org.apache.accumulo.core.iterators.ColumnFamilyCounter -p 30",true);
  expectedKey="table.iterator.scan.customcfcounter";
  expectedValue="30,org.apache.accumulo.core.iterators.ColumnFamilyCounter";
  checkTableForProperty(tops,tableName,expectedKey,expectedValue);
  ts.exec("deletetable " + tableName,true);
  tableName=tableName + "1";
  ts.exec("createtable " + tableName,true);
  ts.input.set("customcfcounter\nname1 value1\nname2 value2\n\n");
  ts.exec("setiter -scan -class org.apache.accumulo.core.iterators.ColumnFamilyCounter -p 30",true);
  expectedKey="table.iterator.scan.customcfcounter";
  expectedValue="30,org.apache.accumulo.core.iterators.ColumnFamilyCounter";
  checkTableForProperty(tops,tableName,expectedKey,expectedValue);
  expectedKey="table.iterator.scan.customcfcounter.opt.name1";
  expectedValue="value1";
  checkTableForProperty(tops,tableName,expectedKey,expectedValue);
  expectedKey="table.iterator.scan.customcfcounter.opt.name2";
  expectedValue="value2";
  checkTableForProperty(tops,tableName,expectedKey,expectedValue);
  ts.exec("deletetable " + tableName,true);
  tableName=tableName + "1";
  ts.exec("createtable " + tableName,true);
  ts.input.set("\nname1 value1.1,value1.2,value1.3\nname2 value2\n\n");
  ts.exec("setiter -scan -class org.apache.accumulo.core.iterators.ColumnFamilyCounter -p 30 -name cfcounter",true);
  expectedKey="table.iterator.scan.cfcounter";
  expectedValue="30,org.apache.accumulo.core.iterators.ColumnFamilyCounter";
  checkTableForProperty(tops,tableName,expectedKey,expectedValue);
  expectedKey="table.iterator.scan.cfcounter.opt.name1";
  expectedValue="value1.1,value1.2,value1.3";
  checkTableForProperty(tops,tableName,expectedKey,expectedValue);
  expectedKey="table.iterator.scan.cfcounter.opt.name2";
  expectedValue="value2";
  checkTableForProperty(tops,tableName,expectedKey,expectedValue);
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void execfile() throws Exception {
  File file=File.createTempFile("ShellServerIT.execfile",".conf",new File(rootPath));
  PrintWriter writer=new PrintWriter(file.getAbsolutePath());
  writer.println("about");
  writer.close();
  ts.exec("execfile " + file.getAbsolutePath(),true,Constants.VERSION,true);
}

</code></pre>

<pre class="type-9 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void scans() throws Exception {
  ts.exec("createtable t");
  make10();
  String result=ts.exec("scan -np -b row1 -e row1");
  assertEquals(2,result.split("\n").length);
  result=ts.exec("scan -np -b row3 -e row5");
  assertEquals(4,result.split("\n").length);
  result=ts.exec("scan -np -r row3");
  assertEquals(2,result.split("\n").length);
  result=ts.exec("scan -np -b row:");
  assertEquals(1,result.split("\n").length);
  result=ts.exec("scan -np -b row");
  assertEquals(11,result.split("\n").length);
  result=ts.exec("scan -np -e row:");
  assertEquals(11,result.split("\n").length);
  ts.exec("deletetable -f t");
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
