<h3 style="margin:0px">Class: com.cloud.hypervisor.xenserver.resource.wrapper.xenbase.XenServer610WrapperTest (9 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="15"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('15')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-15"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(4)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-1 type-5 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMigrateWithStorageSendCommandSRException(){
  final String vmName="small";
  final Connection conn=Mockito.mock(Connection.class);
  final VirtualMachineTO vmSpec=Mockito.mock(VirtualMachineTO.class);
  final VolumeTO volume1=Mockito.mock(VolumeTO.class);
  final VolumeTO volume2=Mockito.mock(VolumeTO.class);
  final List<Pair<VolumeTO,Object>> volumeToSr=new ArrayList<Pair<VolumeTO,Object>>();
  volumeToSr.add(new Pair<VolumeTO,Object>(volume1,new String("a")));
  volumeToSr.add(new Pair<VolumeTO,Object>(volume2,new String("b")));
  final List<Pair<NicTO,Object>> nicToNetwork=new ArrayList<Pair<NicTO,Object>>();
  final Map<String,String> token=new HashMap<String,String>();
  final MigrateWithStorageSendCommand migrateStorageCommand=new MigrateWithStorageSendCommand(vmSpec,volumeToSr,nicToNetwork,token);
  final CitrixRequestWrapper wrapper=CitrixRequestWrapper.getInstance();
  assertNotNull(wrapper);
  when(xenServer610Resource.getConnection()).thenReturn(conn);
  when(vmSpec.getName()).thenReturn(vmName);
  final Answer answer=wrapper.execute(migrateStorageCommand,xenServer610Resource);
  verify(xenServer610Resource,times(1)).getConnection();
  assertFalse(answer.getResult());
}

</code></pre>

<pre class="type-1 type-5 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMigrateWithStorageSendCommandNetException(){
  final String vmName="small";
  final String path="/";
  final Connection conn=Mockito.mock(Connection.class);
  final VirtualMachineTO vmSpec=Mockito.mock(VirtualMachineTO.class);
  final VolumeTO volume1=Mockito.mock(VolumeTO.class);
  final VolumeTO volume2=Mockito.mock(VolumeTO.class);
  final SR sr1=Mockito.mock(SR.class);
  final SR sr2=Mockito.mock(SR.class);
  final VDI vdi1=Mockito.mock(VDI.class);
  final VDI vdi2=Mockito.mock(VDI.class);
  final NicTO nic1=Mockito.mock(NicTO.class);
  final NicTO nic2=Mockito.mock(NicTO.class);
  Gson gson=new Gson();
  final List<Pair<VolumeTO,Object>> volumeToSr=new ArrayList<Pair<VolumeTO,Object>>();
  volumeToSr.add(new Pair<VolumeTO,Object>(volume1,sr1));
  volumeToSr.add(new Pair<VolumeTO,Object>(volume2,sr2));
  final List<Pair<NicTO,Object>> nicToNetwork=new ArrayList<Pair<NicTO,Object>>();
  nicToNetwork.add(new Pair<NicTO,Object>(nic1,new String("a")));
  nicToNetwork.add(new Pair<NicTO,Object>(nic2,new String("b")));
  final Map<String,String> token=new HashMap<String,String>();
  final MigrateWithStorageSendCommand migrateStorageCommand=new MigrateWithStorageSendCommand(vmSpec,volumeToSr,nicToNetwork,token);
  final CitrixRequestWrapper wrapper=CitrixRequestWrapper.getInstance();
  assertNotNull(wrapper);
  when(xenServer610Resource.getConnection()).thenReturn(conn);
  when(vmSpec.getName()).thenReturn(vmName);
  when(volume1.getPath()).thenReturn(path);
  when(volume2.getPath()).thenReturn(path);
  when(xenServer610Resource.getVDIbyUuid(conn,volume1.getPath())).thenReturn(vdi1);
  when(xenServer610Resource.getVDIbyUuid(conn,volume2.getPath())).thenReturn(vdi2);
  final Answer answer=wrapper.execute(migrateStorageCommand,xenServer610Resource);
  verify(xenServer610Resource,times(1)).getConnection();
  assertFalse(answer.getResult());
}

</code></pre>

<pre class="type-15 type-1 type-5 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMigrateWithStorageReceiveCommand(){
  final String vmName="small";
  final String uuid="206b21a7-c6ec-40e2-b5e2-f861b9612f04";
  final Connection conn=Mockito.mock(Connection.class);
  final VirtualMachineTO vmSpec=Mockito.mock(VirtualMachineTO.class);
  final VolumeTO vol1=Mockito.mock(VolumeTO.class);
  final VolumeTO vol2=Mockito.mock(VolumeTO.class);
  final StorageFilerTO storage1=Mockito.mock(StorageFilerTO.class);
  final StorageFilerTO storage2=Mockito.mock(StorageFilerTO.class);
  final List<Pair<VolumeTO,StorageFilerTO>> volumeToFiler=new ArrayList<Pair<VolumeTO,StorageFilerTO>>();
  volumeToFiler.add(new Pair<VolumeTO,StorageFilerTO>(vol1,storage1));
  volumeToFiler.add(new Pair<VolumeTO,StorageFilerTO>(vol2,storage2));
  final NicTO nicTO1=Mockito.mock(NicTO.class);
  final NicTO nicTO2=Mockito.mock(NicTO.class);
  final NicTO nicTO3=Mockito.mock(NicTO.class);
  final NicTO[] nicTOs={nicTO1,nicTO2,nicTO3};
  final XsLocalNetwork nativeNetworkForTraffic=Mockito.mock(XsLocalNetwork.class);
  final Network network=Mockito.mock(Network.class);
  final XsHost xsHost=Mockito.mock(XsHost.class);
  final Network nw1=Mockito.mock(Network.class);
  final Network nw2=Mockito.mock(Network.class);
  final Network nw3=Mockito.mock(Network.class);
  final SR sr1=Mockito.mock(SR.class);
  final SR sr2=Mockito.mock(SR.class);
  final MigrateWithStorageReceiveCommand migrateStorageCommand=new MigrateWithStorageReceiveCommand(vmSpec,volumeToFiler);
  final CitrixRequestWrapper wrapper=CitrixRequestWrapper.getInstance();
  assertNotNull(wrapper);
  when(xenServer610Resource.getConnection()).thenReturn(conn);
  when(vmSpec.getName()).thenReturn(vmName);
  when(vmSpec.getNics()).thenReturn(nicTOs);
  when(storage1.getUuid()).thenReturn(uuid);
  when(storage2.getUuid()).thenReturn(uuid);
  when(xenServer610Resource.getStorageRepository(conn,storage1.getUuid())).thenReturn(sr1);
  when(xenServer610Resource.getStorageRepository(conn,storage2.getUuid())).thenReturn(sr2);
  try {
    when(xenServer610Resource.getNetwork(conn,nicTO1)).thenReturn(nw1);
    when(xenServer610Resource.getNetwork(conn,nicTO2)).thenReturn(nw2);
    when(xenServer610Resource.getNetwork(conn,nicTO3)).thenReturn(nw3);
    when(xenServer610Resource.getNativeNetworkForTraffic(conn,TrafficType.Storage,null)).thenReturn(nativeNetworkForTraffic);
    when(nativeNetworkForTraffic.getNetwork()).thenReturn(network);
    when(xenServer610Resource.getHost()).thenReturn(xsHost);
    when(xsHost.getUuid()).thenReturn(uuid);
  }
 catch (  final XenAPIException e) {
    fail(e.getMessage());
  }
catch (  final XmlRpcException e) {
    fail(e.getMessage());
  }
  final Answer answer=wrapper.execute(migrateStorageCommand,xenServer610Resource);
  verify(xenServer610Resource,times(1)).getConnection();
  try {
    verify(xenServer610Resource,times(1)).getNetwork(conn,nicTO1);
    verify(xenServer610Resource,times(1)).getNetwork(conn,nicTO2);
    verify(xenServer610Resource,times(1)).getNetwork(conn,nicTO3);
    verify(xenServer610Resource,times(1)).getNativeNetworkForTraffic(conn,TrafficType.Storage,null);
    verify(nativeNetworkForTraffic,times(1)).getNetwork();
    verify(xenServer610Resource,times(1)).getHost();
    verify(xsHost,times(1)).getUuid();
  }
 catch (  final XenAPIException e) {
    fail(e.getMessage());
  }
catch (  final XmlRpcException e) {
    fail(e.getMessage());
  }
  assertFalse(answer.getResult());
}

</code></pre>

<pre class="type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testSetupCommand(){
  final XenServer610Resource xenServer610Resource=new XenServer610Resource();
  final HostEnvironment env=Mockito.mock(HostEnvironment.class);
  final SetupCommand setupCommand=new SetupCommand(env);
  final Answer answer=xenServer610Resource.executeRequest(setupCommand);
  assertFalse(answer.getResult());
}

</code></pre>

<pre class="type-15 type-1 type-5 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMigrateWithStorageCommand(){
  final String vmName="small";
  final String uuid="206b21a7-c6ec-40e2-b5e2-f861b9612f04";
  final String path="/";
  final Connection conn=Mockito.mock(Connection.class);
  final VirtualMachineTO vmSpec=Mockito.mock(VirtualMachineTO.class);
  final VolumeTO vol1=Mockito.mock(VolumeTO.class);
  final VolumeTO vol2=Mockito.mock(VolumeTO.class);
  final StorageFilerTO storage1=Mockito.mock(StorageFilerTO.class);
  final StorageFilerTO storage2=Mockito.mock(StorageFilerTO.class);
  final Map<VolumeTO,StorageFilerTO> volumeToFiler=new HashMap<VolumeTO,StorageFilerTO>();
  volumeToFiler.put(vol1,storage1);
  volumeToFiler.put(vol2,storage2);
  final NicTO nicTO1=Mockito.mock(NicTO.class);
  final NicTO nicTO2=Mockito.mock(NicTO.class);
  final NicTO nicTO3=Mockito.mock(NicTO.class);
  final NicTO[] nicTOs={nicTO1,nicTO2,nicTO3};
  final XsLocalNetwork nativeNetworkForTraffic=Mockito.mock(XsLocalNetwork.class);
  final Network networkForSm=Mockito.mock(Network.class);
  final XsHost xsHost=Mockito.mock(XsHost.class);
  final SR sr1=Mockito.mock(SR.class);
  final SR sr2=Mockito.mock(SR.class);
  final VDI vdi1=Mockito.mock(VDI.class);
  final VDI vdi2=Mockito.mock(VDI.class);
  final MigrateWithStorageCommand migrateStorageCommand=new MigrateWithStorageCommand(vmSpec,volumeToFiler);
  final CitrixRequestWrapper wrapper=CitrixRequestWrapper.getInstance();
  assertNotNull(wrapper);
  when(xenServer610Resource.getConnection()).thenReturn(conn);
  when(vmSpec.getName()).thenReturn(vmName);
  when(vmSpec.getNics()).thenReturn(nicTOs);
  when(storage1.getUuid()).thenReturn(uuid);
  when(storage2.getUuid()).thenReturn(uuid);
  when(vol1.getPath()).thenReturn(path);
  when(vol2.getPath()).thenReturn(path);
  when(xenServer610Resource.getStorageRepository(conn,storage1.getUuid())).thenReturn(sr1);
  when(xenServer610Resource.getStorageRepository(conn,storage2.getUuid())).thenReturn(sr2);
  when(xenServer610Resource.getVDIbyUuid(conn,storage1.getPath())).thenReturn(vdi1);
  when(xenServer610Resource.getVDIbyUuid(conn,storage2.getPath())).thenReturn(vdi2);
  try {
    when(xenServer610Resource.getNativeNetworkForTraffic(conn,TrafficType.Storage,null)).thenReturn(nativeNetworkForTraffic);
    when(nativeNetworkForTraffic.getNetwork()).thenReturn(networkForSm);
    when(xenServer610Resource.getHost()).thenReturn(xsHost);
    when(xsHost.getUuid()).thenReturn(uuid);
  }
 catch (  final XenAPIException e) {
    fail(e.getMessage());
  }
catch (  final XmlRpcException e) {
    fail(e.getMessage());
  }
  final Answer answer=wrapper.execute(migrateStorageCommand,xenServer610Resource);
  verify(xenServer610Resource,times(1)).getConnection();
  try {
    verify(xenServer610Resource,times(1)).prepareISO(conn,vmName,null,null);
    verify(xenServer610Resource,times(1)).getNetwork(conn,nicTO1);
    verify(xenServer610Resource,times(1)).getNetwork(conn,nicTO2);
    verify(xenServer610Resource,times(1)).getNetwork(conn,nicTO3);
    verify(xenServer610Resource,times(1)).getNativeNetworkForTraffic(conn,TrafficType.Storage,null);
    verify(nativeNetworkForTraffic,times(1)).getNetwork();
    verify(xenServer610Resource,times(1)).getHost();
    verify(xsHost,times(1)).getUuid();
  }
 catch (  final XenAPIException e) {
    fail(e.getMessage());
  }
catch (  final XmlRpcException e) {
    fail(e.getMessage());
  }
  assertFalse(answer.getResult());
}

</code></pre>

<pre class="type-15 type-1 type-5 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMigrateWithStorageSendCommand(){
  final String vmName="small";
  final String path="/";
  final String mac="3c:15:c2:c4:4f:18";
  final Connection conn=Mockito.mock(Connection.class);
  final VirtualMachineTO vmSpec=Mockito.mock(VirtualMachineTO.class);
  final VolumeTO volume1=Mockito.mock(VolumeTO.class);
  final VolumeTO volume2=Mockito.mock(VolumeTO.class);
  final SR sr1=Mockito.mock(SR.class);
  final SR sr2=Mockito.mock(SR.class);
  final VDI vdi1=Mockito.mock(VDI.class);
  final VDI vdi2=Mockito.mock(VDI.class);
  final NicTO nic1=Mockito.mock(NicTO.class);
  final NicTO nic2=Mockito.mock(NicTO.class);
  final Network network1=Mockito.mock(Network.class);
  final Network network2=Mockito.mock(Network.class);
  final List<Pair<VolumeTO,Object>> volumeToSr=new ArrayList<Pair<VolumeTO,Object>>();
  volumeToSr.add(new Pair<VolumeTO,Object>(volume1,sr1));
  volumeToSr.add(new Pair<VolumeTO,Object>(volume2,sr2));
  final List<Pair<NicTO,Object>> nicToNetwork=new ArrayList<Pair<NicTO,Object>>();
  nicToNetwork.add(new Pair<NicTO,Object>(nic1,network1));
  nicToNetwork.add(new Pair<NicTO,Object>(nic2,network2));
  final Map<String,String> token=new HashMap<String,String>();
  final VIF vif1=Mockito.mock(VIF.class);
  final VIF vif2=Mockito.mock(VIF.class);
  final MigrateWithStorageSendCommand migrateStorageCommand=new MigrateWithStorageSendCommand(vmSpec,volumeToSr,nicToNetwork,token);
  final CitrixRequestWrapper wrapper=CitrixRequestWrapper.getInstance();
  assertNotNull(wrapper);
  when(xenServer610Resource.getConnection()).thenReturn(conn);
  when(vmSpec.getName()).thenReturn(vmName);
  when(volume1.getPath()).thenReturn(path);
  when(volume2.getPath()).thenReturn(path);
  when(nic1.getMac()).thenReturn(mac);
  when(nic2.getMac()).thenReturn(mac);
  when(xenServer610Resource.getVDIbyUuid(conn,volume1.getPath())).thenReturn(vdi1);
  when(xenServer610Resource.getVDIbyUuid(conn,volume2.getPath())).thenReturn(vdi2);
  try {
    when(xenServer610Resource.getVifByMac(conn,null,nic1.getMac())).thenReturn(vif1);
    when(xenServer610Resource.getVifByMac(conn,null,nic2.getMac())).thenReturn(vif2);
  }
 catch (  final XenAPIException e) {
    fail(e.getMessage());
  }
catch (  final XmlRpcException e) {
    fail(e.getMessage());
  }
  final Answer answer=wrapper.execute(migrateStorageCommand,xenServer610Resource);
  verify(xenServer610Resource,times(1)).getConnection();
  try {
    verify(xenServer610Resource,times(2)).getVDIbyUuid(conn,volume1.getPath());
    verify(xenServer610Resource,times(2)).getVifByMac(conn,null,nic1.getMac());
  }
 catch (  final XenAPIException e) {
    fail(e.getMessage());
  }
catch (  final XmlRpcException e) {
    fail(e.getMessage());
  }
  assertFalse(answer.getResult());
}

</code></pre>

<pre class="type-15 type-1 type-5 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testXenServer610MigrateVolumeCommandWrapper(){
  final String uuid="206b21a7-c6ec-40e2-b5e2-f861b9612f04";
  final Connection conn=Mockito.mock(Connection.class);
  final SR destinationPool=Mockito.mock(SR.class);
  final VDI srcVolume=Mockito.mock(VDI.class);
  final Task task=Mockito.mock(Task.class);
  final long volumeId=1l;
  final String volumePath="206b21a7-c6ec-40e2-b5e2-f861b9612f04";
  final StoragePool pool=Mockito.mock(StoragePool.class);
  final int timeout=120;
  final Map<String,String> other=new HashMap<String,String>();
  other.put("live","true");
  final MigrateVolumeCommand createStorageCommand=new MigrateVolumeCommand(volumeId,volumePath,pool,timeout);
  final CitrixRequestWrapper wrapper=CitrixRequestWrapper.getInstance();
  assertNotNull(wrapper);
  when(xenServer610Resource.getConnection()).thenReturn(conn);
  when(pool.getUuid()).thenReturn(uuid);
  when(xenServer610Resource.getStorageRepository(conn,uuid)).thenReturn(destinationPool);
  when(xenServer610Resource.getVDIbyUuid(conn,volumePath)).thenReturn(srcVolume);
  try {
    when(srcVolume.poolMigrateAsync(conn,destinationPool,other)).thenReturn(task);
  }
 catch (  final BadServerResponse e) {
    fail(e.getMessage());
  }
catch (  final XenAPIException e) {
    fail(e.getMessage());
  }
catch (  final XmlRpcException e) {
    fail(e.getMessage());
  }
  when(xenServer610Resource.getMigrateWait()).thenReturn(120);
  final Answer answer=wrapper.execute(createStorageCommand,xenServer610Resource);
  verify(xenServer610Resource,times(1)).getConnection();
  assertFalse(answer.getResult());
}

</code></pre>

<pre class="type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testCheckNetworkCommandFailure(){
  final XenServer610Resource xenServer610Resource=new XenServer610Resource();
  final PhysicalNetworkSetupInfo info=new PhysicalNetworkSetupInfo();
  final List<PhysicalNetworkSetupInfo> setupInfos=new ArrayList<PhysicalNetworkSetupInfo>();
  setupInfos.add(info);
  final CheckNetworkCommand checkNet=new CheckNetworkCommand(setupInfos);
  final Answer answer=xenServer610Resource.executeRequest(checkNet);
  assertTrue(answer.getResult());
}

</code></pre>

<pre class="type-1 type-5 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMigrateWithStorageCompleteCommand(){
  final String vmName="small";
  final String uuid="206b21a7-c6ec-40e2-b5e2-f861b9612f04";
  final Connection conn=Mockito.mock(Connection.class);
  final XsHost xsHost=Mockito.mock(XsHost.class);
  final VirtualMachineTO vm=Mockito.mock(VirtualMachineTO.class);
  final MigrateWithStorageCompleteCommand createStorageCommand=new MigrateWithStorageCompleteCommand(vm);
  final CitrixRequestWrapper wrapper=CitrixRequestWrapper.getInstance();
  assertNotNull(wrapper);
  when(xenServer610Resource.getConnection()).thenReturn(conn);
  when(vm.getName()).thenReturn(vmName);
  when(xenServer610Resource.getHost()).thenReturn(xsHost);
  when(xsHost.getUuid()).thenReturn(uuid);
  final Answer answer=wrapper.execute(createStorageCommand,xenServer610Resource);
  verify(xenServer610Resource,times(1)).getConnection();
  assertFalse(answer.getResult());
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
