<h3 style="margin:0px">Class: com.cloud.hypervisor.hyperv.test.HypervDirectConnectResourceTest (16 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(14)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(10)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="16"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('16')" data-toggle="tooltip" title="Verifies assertions inside branch conditions"><kbd id="tag-16"class="label-info"style="display: inline-block;font-size:7pt" >BranchVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Releases resources used by the test cases"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >TestCleaner&nbsp;(1)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(1)</kbd></button>&nbsp;<button id="15"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('15')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-15"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public final void testStartStopCommand(){
  String sample=getSampleStartCommand();
  StartAnswer sans=simpleVmStart(sample);
  Assert.assertTrue(sans.getDetails(),sans.getResult());
  StopAnswer stopAns=simpleVmStop();
  Assert.assertTrue(stopAns.getDetails(),stopAns.getResult());
}

</code></pre>

<pre class="type-8 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public final void testModifyStoragePoolCommand(){
  String folderName="." + File.separator + "Dummy";
  StoragePoolVO pool=createTestStoragePoolVO(folderName);
  ModifyStoragePoolCommand cmd=new ModifyStoragePoolCommand(true,pool,folderName);
  Answer ans=s_hypervresource.executeRequest(cmd);
  Assert.assertTrue(ans.getResult());
  DeleteStoragePoolCommand delCmd=new DeleteStoragePoolCommand(pool,folderName);
  Answer ans2=s_hypervresource.executeRequest(delCmd);
  Assert.assertTrue(ans2.getResult());
}

</code></pre>

<pre class="type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public final void testStartCommandCorruptDiskImage(){
  String sampleStart="{\"vm\":{\"id\":16,\"name\":\"i-3-17-VM\"," + "\"type\":\"User\",\"cpus\":1,\"speed\":500," + "\"minRam\":536870912,\"maxRam\":536870912,"+ "\"arch\":\"x86_64\","+ "\"os\":\"CentOS 6.0 (64-bit)\","+ "\"bootArgs\":\"\",\"rebootOnCrash\":false,"+ "\"enableHA\":false,"+ "\"limitCpuUse\":false,"+ "\"vncPassword\":\"31f82f29aff646eb\","+ "\"params\":{},"+ "\"uuid\":\"8b030b6a-0243-440a-8cc5-45d08815ca11\""+ ",\"disks\":["+ "{\"id\":18,\"name\":\"" + s_testSampleVolumeCorruptUUID + "\","+ "\"mountPoint\":"+ s_testSampleVolumeCorruptURIJSON+ ","+ "\"path\":"+ s_testSampleVolumeCorruptURIJSON+ ",\"size\":0,"+ "\"type\":\"ROOT\","+ "\"storagePoolType\":\"Filesystem\","+ "\"storagePoolUuid\":\""+ s_testLocalStoreUUID+ "\""+ ",\"deviceId\":0},"+ "{\"id\":16,\"name\":\"Hyper-V Sample2\",\"size\":0,"+ "\"type\":\"ISO\",\"storagePoolType\":\"ISO\","+ "\"deviceId\":3}],"+ "\"nics\":["+ "{\"deviceId\":0,\"networkRateMbps\":100,"+ "\"defaultNic\":true,"+ "\"uuid\":\"99cb4813-23af-428c-a87a-2d1899be4f4b\","+ "\"ip\":\"10.1.1.67\",\"netmask\":\"255.255.255.0\","+ "\"gateway\":\"10.1.1.1\","+ "\"mac\":\"02:00:51:2c:00:0e\",\"dns1\":\"4.4.4.4\","+ "\"broadcastType\":\"Vlan\",\"type\":\"Guest\","+ "\"broadcastUri\":\"vlan://261\","+ "\"isolationUri\":\"vlan://261\","+ "\"isSecurityGroupEnabled\":false}"+ "]},\"contextMap\":{},\"wait\":0}";
  StartCommand cmd=s_gson.fromJson(sampleStart,StartCommand.class);
  StartAnswer ans=(StartAnswer)s_hypervresource.executeRequest(cmd);
  Assert.assertFalse(ans.getDetails(),ans.getResult());
}

</code></pre>

<pre class="type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public final void testStartStartCommand(){
  String sample=getSampleStartCommand();
  StartAnswer sans=simpleVmStart(sample);
  Assert.assertTrue(sans.getDetails(),sans.getResult());
  simpleVmStart(sample);
  StopAnswer ans=simpleVmStop();
  Assert.assertTrue(ans.getDetails(),ans.getResult());
}

</code></pre>

<pre class="type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public final void testBadGetVmStatsCommand(){
  List<String> vmNames=new ArrayList<String>();
  vmNames.add("FakeVM");
  GetVmStatsCommand vmStatsCmd=new GetVmStatsCommand(vmNames,"1","localhost");
  GetVmStatsAnswer ans=(GetVmStatsAnswer)s_hypervresource.executeRequest(vmStatsCmd);
  Assert.assertTrue(ans.getDetails(),ans.getResult());
}

</code></pre>

<pre class="type-8 type-7 type-15 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Prep test environment.
 */
@Before public final void setUp() throws ConfigurationException {
  final Map<String,Object> params=PropertiesUtil.toMap(loadProperties());
  params.put("local.storage.uuid",s_testLocalStoreUUID);
  File testSecondarStoreDir=new File(s_testSecondaryStoreLocalPath);
  if (!testSecondarStoreDir.exists()) {
    testSecondarStoreDir.mkdirs();
  }
  Assert.assertTrue("Need to be able to create the folder " + s_testSecondaryStoreLocalPath,testSecondarStoreDir.exists());
  try {
    params.put("local.secondary.storage.path",testSecondarStoreDir.getCanonicalPath());
  }
 catch (  IOException e1) {
    Assert.fail("No canonical path for " + testSecondarStoreDir.getAbsolutePath());
  }
  File testPoolDir=new File(s_testLocalStorePath);
  if (!testPoolDir.exists()) {
    testPoolDir.mkdirs();
  }
  Assert.assertTrue("To simulate local file system Storage Pool, " + " you need folder at " + testPoolDir.getPath(),testPoolDir.exists() && testPoolDir.isDirectory());
  try {
    s_testLocalStorePath=testPoolDir.getCanonicalPath();
  }
 catch (  IOException e) {
    Assert.fail("No canonical path for " + testPoolDir.getAbsolutePath());
  }
  params.put("local.storage.path",s_testLocalStorePath);
  File testVolWorks=new File(s_testLocalStorePath + File.separator + s_testSampleVolumeWorkingUUID);
  if (!testVolWorks.exists()) {
    ReadableByteChannel rbc;
    try {
      URL sampleLegitDiskImageURL=new URL("http://s3-eu-west-1.amazonaws.com/cshv3eu/SmallDisk.vhdx");
      rbc=Channels.newChannel(sampleLegitDiskImageURL.openStream());
      FileOutputStream fos=new FileOutputStream(testVolWorks);
      fos.getChannel().transferFrom(rbc,0,Long.MAX_VALUE);
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
  }
  Assert.assertTrue("Need to put a sample working virtual disk at " + testVolWorks.getPath(),testVolWorks.exists());
  try {
    s_testSampleVolumeWorkingURIJSON=s_gson.toJson(testVolWorks.getCanonicalPath());
  }
 catch (  IOException e) {
    Assert.fail("No canonical path for " + testPoolDir.getAbsolutePath());
  }
  FilenameFilter vhdsFilt=new FilenameFilter(){
    @Override public boolean accept(    final File directory,    final String fileName){
      return fileName.endsWith(".vhdx") || fileName.endsWith(".vhd");
    }
  }
;
  for (  File file : testPoolDir.listFiles(vhdsFilt)) {
    if (file.getName().equals(testVolWorks.getName())) {
      continue;
    }
    Assert.assertTrue("Should have deleted file " + file.getPath(),file.delete());
    s_logger.info("Cleaned up by delete file " + file.getPath());
  }
  s_testSampleVolumeTempURIJSON=createTestDiskImageFromExistingImage(testVolWorks,s_testLocalStorePath,s_testSampleVolumeTempUUID);
  s_logger.info("Created " + s_testSampleVolumeTempURIJSON);
  s_testSampleVolumeCorruptURIJSON=createTestDiskImageFromExistingImage(testVolWorks,s_testLocalStorePath,s_testSampleVolumeCorruptUUID);
  s_logger.info("Created " + s_testSampleVolumeCorruptURIJSON);
  createTestDiskImageFromExistingImage(testVolWorks,s_testLocalStorePath,s_testSampleTemplateUUID);
  s_testSampleTemplateURLJSON=s_testSampleTemplateUUID;
  s_logger.info("Created " + s_testSampleTemplateURLJSON + " in local storage.");
  createTestDiskImageFromExistingImage(testVolWorks,testSecondarStoreDir.getAbsolutePath(),"af39aa7f-2b12-37e1-86d3-e23f2f005101.vhdx");
  s_logger.info("Created " + "af39aa7f-2b12-37e1-86d3-e23f2f005101.vhdx" + " in secondary (NFS) storage.");
  s_testLocalStorePathJSON=s_gson.toJson(s_testLocalStorePath);
  String agentIp=(String)params.get("ipaddress");
  s_logger.info("Test using agent IP address " + agentIp);
  params.put("agentIp",agentIp);
  setTestJsonResult(params);
  s_hypervresource.configure("hypervresource",params);
  s_logger.info("setUp complete, sample StoragePool at " + s_testLocalStorePathJSON + " sample template at "+ s_testSampleTemplateURLJSON);
  s_agentExecutable=(String)params.get("agent.executable");
  s_testPrimaryDataStoreHost=(String)params.get("ipaddress");
  agentCreation();
}

</code></pre>

<pre class="type-16 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public final void testModifyStoragePoolCommand2(){
  String folderName="." + File.separator + "Dummy";
  File folder=new File(folderName);
  if (!folder.exists()) {
    if (!folder.mkdir()) {
      Assert.assertTrue(false);
    }
  }
  s_logger.info("Createing pool at : " + folderName);
  StoragePoolVO pool=new StoragePoolVO(StoragePoolType.Filesystem,"127.0.0.1",-1,folderName);
  pool.setUuid(s_testLocalStoreUUID);
  ModifyStoragePoolCommand cmd=new ModifyStoragePoolCommand(true,pool,folderName);
  Answer ans=s_hypervresource.executeRequest(cmd);
  Assert.assertTrue(ans.getResult());
  DeleteStoragePoolCommand delCmd=new DeleteStoragePoolCommand(pool,folderName);
  Answer ans2=s_hypervresource.executeRequest(delCmd);
  Assert.assertTrue(ans2.getResult());
}

</code></pre>

<pre class="type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
@Test public final void testInitialize(){
  StartupCommand[] startCmds=s_hypervresource.initialize();
  Command[] cmds=new Command[]{startCmds[0],startCmds[1]};
  String result=s_gson.toJson(cmds);
  if (result == null) {
    result="NULL";
  }
  s_logger.debug("TestInitialize returned " + result);
  s_logger.debug("TestInitialize expected " + _setTestJsonResultStr);
  Assert.assertTrue("StartupCommand[] not what we expected",_setTestJsonResultStr.equals(result));
  return;
}

</code></pre>

<pre class="type-8 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public final void testCreateCommand(){
  String sample="{\"volId\":10,\"pool\":{\"id\":201,\"uuid\":\"" + s_testLocalStoreUUID + "\",\"host\":\"10.70.176.29\""+ ",\"path\":"+ s_testLocalStorePathJSON+ ",\"port\":0,\"type\":\"Filesystem\"},"+ "\"diskCharacteristics\":{\"size\":0,"+ "\"tags\":[],\"type\":\"ROOT\",\"name\":\"ROOT-9\","+ "\"useLocalStorage\":true,\"recreatable\":true,"+ "\"diskOfferingId\":11,"+ "\"volumeId\":10,\"hyperType\":\"Hyperv\"},"+ "\"templateUrl\":"+ s_testSampleTemplateURLJSON+ ",\"contextMap\":{},\"wait\":0}";
  File destDir=new File(s_testLocalStorePath);
  Assert.assertTrue(destDir.isDirectory());
  File testSampleTemplateURLFile=new File(s_testLocalStorePath + File.separator + s_gson.fromJson(s_testSampleTemplateURLJSON,String.class));
  Assert.assertTrue("The template that create should make" + " volumes from is missing from path " + testSampleTemplateURLFile.getPath(),testSampleTemplateURLFile.exists());
  int fileCount=destDir.listFiles().length;
  s_logger.debug(" test local store has " + fileCount + "files");
  CreateCommand cmd=s_gson.fromJson(sample,CreateCommand.class);
  CreateAnswer ans=(CreateAnswer)s_hypervresource.executeRequest(cmd);
  Assert.assertTrue(ans.getDetails(),ans.getResult());
  Assert.assertTrue("CreateCommand should add a file to the folder",fileCount + 1 == destDir.listFiles().length);
  File newFile=new File(ans.getVolume().getPath());
  Assert.assertTrue("The new file should have a size greater than zero",newFile.length() > 0);
  newFile.delete();
}

</code></pre>

<pre class="type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public final void testGetVmStatsCommand(){
  List<String> vmNames=new ArrayList<String>();
  vmNames.add("i-2-11-VM");
  GetVmStatsCommand cmd=new GetVmStatsCommand(vmNames,"1","localhost");
  s_hypervresource.executeRequest(cmd);
  GetVmStatsAnswer ans=(GetVmStatsAnswer)s_hypervresource.executeRequest(cmd);
  Assert.assertTrue(ans.getDetails(),ans.getResult());
}

</code></pre>

<pre class="type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public final void testGetHostStatsCommand(){
  long hostIdVal=123;
  GetHostStatsCommand cmd=new GetHostStatsCommand("1","testHost",hostIdVal);
  GetHostStatsAnswer ans=(GetHostStatsAnswer)s_hypervresource.executeRequest(cmd);
  Assert.assertTrue(ans.getResult());
  Assert.assertTrue(0.0 < ans.getTotalMemoryKBs());
  Assert.assertTrue(0.0 < ans.getFreeMemoryKBs());
  Assert.assertTrue(0.0 <= ans.getNetworkReadKBs());
  Assert.assertTrue(0.0 <= ans.getNetworkWriteKBs());
  Assert.assertTrue(0.0 <= ans.getCpuUtilization());
  Assert.assertTrue(100 >= ans.getCpuUtilization());
  Assert.assertTrue(ans.getEntityType().equals("host"));
  Assert.assertTrue(ans.getDetails() == null);
}

</code></pre>

<pre class="type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public final void testGetStorageStatsCommand(){
  String sample="{\"id\":\"" + s_testLocalStoreUUID + "\",\"localPath\":"+ s_testLocalStorePathJSON+ ","+ "\"pooltype\":\"Filesystem\","+ "\"contextMap\":{},\"wait\":0}";
  s_logger.info("Sample JSON: " + sample);
  GetStorageStatsCommand cmd=s_gson.fromJson(sample,GetStorageStatsCommand.class);
  s_hypervresource.executeRequest(cmd);
  GetStorageStatsAnswer ans=(GetStorageStatsAnswer)s_hypervresource.executeRequest(cmd);
  Assert.assertTrue(ans.getDetails(),ans.getResult());
  Assert.assertTrue(ans.getByteUsed() != ans.getCapacityBytes());
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@After public final void agentTerminate(){
  OutputStream scriptInput=s_agentProc.getOutputStream();
  OutputStreamWriter siw=new OutputStreamWriter(scriptInput);
  try {
    BufferedWriter writer=new BufferedWriter(siw);
    writer.write("\r\n");
    writer.flush();
    writer.close();
  }
 catch (  IOException ex) {
    s_logger.debug("Error closing agent at " + s_agentExecutable + " message "+ ex.getMessage());
  }
}

</code></pre>

<pre class="type-8 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public final void testCreateStoragePoolCommand(){
  String folderName="." + File.separator + "Dummy";
  StoragePoolVO pool=createTestStoragePoolVO(folderName);
  CreateStoragePoolCommand cmd=new CreateStoragePoolCommand(true,pool);
  s_logger.debug("TestCreateStoragePoolCommand sending " + s_gson.toJson(cmd));
  Answer ans=s_hypervresource.executeRequest(cmd);
  Assert.assertTrue(ans.getResult());
}

</code></pre>

<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public final void testPrimaryStorageDownloadCommandHTTP(){
  PrimaryStorageDownloadCommand cmd=samplePrimaryDownloadCommand();
  cmd.setUrl("http://s3-eu-west-1.amazonaws.com/cshv3eu/SmallDisk.vhdx");
  corePrimaryStorageDownloadCommandTestCycle(cmd);
}

</code></pre>

<pre class="type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public final void testDestroyCommand(){
  String sample2="{\"volume\":{\"name\":\"" + s_testSampleVolumeWorkingUUIDNoExt + "\",\"storagePoolType\":\"Filesystem\","+ "\"mountPoint\":"+ s_testLocalStorePathJSON+ ",\"path\":"+ s_testSampleVolumeTempURIJSON+ ",\"storagePoolUuid\":\""+ s_testLocalStoreUUID+ "\","+ "\"type\":\"ROOT\",\"id\":9,\"size\":0}}";
  DestroyCommand cmd=s_gson.fromJson(sample2,DestroyCommand.class);
  Answer ans=s_hypervresource.executeRequest(cmd);
  Assert.assertTrue(ans.getDetails(),ans.getResult());
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
