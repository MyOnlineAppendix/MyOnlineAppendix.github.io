<h3><span class=" glyphicon glyphicon-tag"/>&nbspConditionMatcher</h3><kbd>Verifies logic rules using matcher-style statements</kbd><br><br><br><h4 style="margin:0px">Class: com.cloud.network.nicira.ExecutionCounterTest </h4><pre class="type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testConcurrentUpdatesToCounter() throws Exception {
  final ExecutionCounter executionCounter=new ExecutionCounter(0);
  final ExecutorService executorService=Executors.newFixedThreadPool(3);
  final AtomicInteger counterTask1=new AtomicInteger(-1);
  final AtomicInteger counterTask2=new AtomicInteger(-1);
  final AtomicInteger counterTask3=new AtomicInteger(-1);
  final Runnable task1=new Runnable(){
    @Override public void run(){
      executionCounter.incrementExecutionCounter().incrementExecutionCounter();
      executionCounter.incrementExecutionCounter().incrementExecutionCounter();
      counterTask1.set(executionCounter.getValue());
    }
  }
;
  final Runnable task2=new Runnable(){
    @Override public void run(){
      executionCounter.incrementExecutionCounter().incrementExecutionCounter();
      counterTask2.set(executionCounter.getValue());
    }
  }
;
  final Runnable task3=new Runnable(){
    @Override public void run(){
      counterTask3.set(executionCounter.getValue());
    }
  }
;
  executorService.execute(task1);
  executorService.execute(task2);
  executorService.execute(task3);
  executorService.shutdown();
  executorService.awaitTermination(5L,TimeUnit.SECONDS);
  assertThat(counterTask1.get(),equalTo(4));
  assertThat(counterTask2.get(),equalTo(2));
  assertThat(counterTask3.get(),equalTo(0));
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testHasAlreadyReachedTheExecutuionLimit() throws Exception {
  final ExecutionCounter executionCounter=new ExecutionCounter(2);
  executionCounter.incrementExecutionCounter().incrementExecutionCounter();
  assertThat(executionCounter.hasReachedExecutionLimit(),equalTo(true));
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testHasNotYetReachedTheExecutuionLimit() throws Exception {
  final ExecutionCounter executionCounter=new ExecutionCounter(2);
  executionCounter.incrementExecutionCounter();
  assertThat(executionCounter.hasReachedExecutionLimit(),equalTo(false));
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testIncrementCounter() throws Exception {
  final ExecutionCounter executionCounter=new ExecutionCounter(-1);
  executionCounter.incrementExecutionCounter().incrementExecutionCounter();
  assertThat(executionCounter.getValue(),equalTo(2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.network.nicira.NatRuleAdapterTest </h4><pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test() public void testNatRuleAdapterWithSourceNatRule(){
  final SourceNatRule sourceNatRule=(SourceNatRule)gson.fromJson("{type : \"SourceNatRule\"}",NatRule.class);
  assertThat(sourceNatRule,instanceOf(SourceNatRule.class));
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test() public void testNatRuleAdapterWithDestinationNatRule(){
  final DestinationNatRule destinationNatRule=(DestinationNatRule)gson.fromJson("{type : \"DestinationNatRule\"}",NatRule.class);
  assertThat(destinationNatRule,instanceOf(DestinationNatRule.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.network.nicira.NiciraNvpApiTest </h4><pre class="type-8 type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test @SuppressWarnings("unchecked") public void testFindSecurityProfileByUuid() throws Exception {
  final CloseableHttpResponse response=mock(CloseableHttpResponse.class);
  when(response.getStatusLine()).thenReturn(HTTP_200_REPSONSE);
  when(response.getEntity()).thenReturn(new StringEntity(SEC_PROFILE_LIST_JSON_RESPONSE));
  final CloseableHttpClient httpClient=spy(HttpClientHelper.createHttpClient(2));
  doReturn(response).when(httpClient).execute(any(HttpHost.class),any(HttpRequest.class),any(HttpClientContext.class));
  final NiciraNvpApi api=buildApi(httpClient);
  final List<SecurityProfile> actualProfiles=api.findSecurityProfile(UUID);
  assertThat("Wrong number of results",actualProfiles,hasSize(2));
  assertThat("Wrong Uuid in the newly created SecurityProfile",actualProfiles,Matchers.<SecurityProfile>contains(hasProperty("uuid",equalTo(UUID)),hasProperty("uuid",equalTo(UUID2))));
  assertThat("Wrong HREF in the newly created SecurityProfile",actualProfiles,Matchers.<SecurityProfile>contains(hasProperty("href",equalTo(HREF)),hasProperty("href",equalTo(HREF2))));
  assertThat("Wrong Schema in the newly created SecurityProfile",actualProfiles,Matchers.<SecurityProfile>contains(hasProperty("schema",equalTo(SCHEMA)),hasProperty("schema",equalTo(SCHEMA2))));
  verify(response,times(1)).close();
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestMethodMatcher.aMethod("GET"),any(HttpClientContext.class));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestQueryMatcher.aQueryThatContains("uuid=" + UUID),any(HttpClientContext.class));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestQueryMatcher.aQueryThatContains("fields=*"),any(HttpClientContext.class));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestPathMatcher.aPath(NiciraConstants.SEC_PROFILE_URI_PREFIX),any(HttpClientContext.class));
}

</code></pre>

<br>
<pre class="type-8 type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test @SuppressWarnings("unchecked") public void testFindSecurityProfile() throws Exception {
  final CloseableHttpResponse response=mock(CloseableHttpResponse.class);
  when(response.getStatusLine()).thenReturn(HTTP_200_REPSONSE);
  when(response.getEntity()).thenReturn(new StringEntity(SEC_PROFILE_LIST_JSON_RESPONSE));
  final CloseableHttpClient httpClient=spy(HttpClientHelper.createHttpClient(2));
  doReturn(response).when(httpClient).execute(any(HttpHost.class),any(HttpRequest.class),any(HttpClientContext.class));
  final NiciraNvpApi api=buildApi(httpClient);
  final List<SecurityProfile> actualProfiles=api.findSecurityProfile();
  assertThat("Wrong number of results",actualProfiles,hasSize(2));
  assertThat("Wrong Uuid in the newly created SecurityProfile",actualProfiles,Matchers.<SecurityProfile>contains(hasProperty("uuid",equalTo(UUID)),hasProperty("uuid",equalTo(UUID2))));
  assertThat("Wrong HREF in the newly created SecurityProfile",actualProfiles,Matchers.<SecurityProfile>contains(hasProperty("href",equalTo(HREF)),hasProperty("href",equalTo(HREF2))));
  assertThat("Wrong Schema in the newly created SecurityProfile",actualProfiles,Matchers.<SecurityProfile>contains(hasProperty("schema",equalTo(SCHEMA)),hasProperty("schema",equalTo(SCHEMA2))));
  verify(response,times(1)).close();
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestMethodMatcher.aMethod("GET"),any(HttpClientContext.class));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestQueryMatcher.aQuery("fields=*"),any(HttpClientContext.class));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestPathMatcher.aPath(NiciraConstants.SEC_PROFILE_URI_PREFIX),any(HttpClientContext.class));
}

</code></pre>

<br>
<pre class="type-8 type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testCreateSecurityProfile() throws Exception {
  final CloseableHttpResponse response=mock(CloseableHttpResponse.class);
  when(response.getStatusLine()).thenReturn(HTTP_201_REPSONSE);
  when(response.getEntity()).thenReturn(new StringEntity(SEC_PROFILE_JSON_RESPONSE));
  final CloseableHttpClient httpClient=spy(HttpClientHelper.createHttpClient(2));
  doReturn(response).when(httpClient).execute(any(HttpHost.class),any(HttpRequest.class),any(HttpClientContext.class));
  final NiciraNvpApi api=buildApi(httpClient);
  final SecurityProfile actualSecProfile=api.createSecurityProfile(new SecurityProfile());
  assertThat("Wrong Uuid in the newly created SecurityProfile",actualSecProfile,hasProperty("uuid",equalTo(UUID)));
  assertThat("Wrong Href in the newly created SecurityProfile",actualSecProfile,hasProperty("href",equalTo(HREF)));
  assertThat("Wrong Schema in the newly created SecurityProfile",actualSecProfile,hasProperty("schema",equalTo(SCHEMA)));
  verify(response,times(1)).close();
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestMethodMatcher.aMethod("POST"),any(HttpClientContext.class));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestPathMatcher.aPath(NiciraConstants.SEC_PROFILE_URI_PREFIX),any(HttpClientContext.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.network.nicira.NiciraRestClientTest </h4><pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExecuteUnauthorizedThenSuccess() throws Exception {
  when(mockResponse.getStatusLine()).thenReturn(HTTP_401_STATUSLINE).thenReturn(HTTP_200_STATUSLINE).thenReturn(HTTP_200_STATUSLINE);
  when(httpClient.execute(eq(HTTP_HOST),HttpRequestMatcher.eq(request),eq(httpClientContext))).thenReturn(mockResponse).thenReturn(mockResponse);
  when(httpClient.execute(eq(HTTP_HOST),HttpRequestMatcher.eq(loginRequest),eq(httpClientContext))).thenReturn(mockResponse);
  final CloseableHttpResponse response=client.execute(request);
  assertThat(response,notNullValue());
  assertThat(response,sameInstance(mockResponse));
  verifyPrivate(client).invoke("execute",HttpRequestMatcher.eq(request),eq(0));
  verifyPrivate(client).invoke("execute",HttpRequestMatcher.eq(loginRequest),eq(401));
  verifyPrivate(client).invoke("execute",HttpRequestMatcher.eq(request),eq(200));
}

</code></pre>

<br>
<pre class="type-15 type-18 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExecuteTwoConsecutiveUnauthorizedExecutions() throws Exception {
  when(mockResponse.getStatusLine()).thenReturn(HTTP_401_STATUSLINE).thenReturn(HTTP_401_STATUSLINE);
  when(httpClient.execute(eq(HTTP_HOST),HttpRequestMatcher.eq(request),eq(httpClientContext))).thenReturn(mockResponse);
  when(httpClient.execute(eq(HTTP_HOST),HttpRequestMatcher.eq(loginRequest),eq(httpClientContext))).thenReturn(mockResponse);
  final NiciraRestClient client=spy(NiciraRestClient.create().client(httpClient).clientContext(httpClientContext).hostname(LOCALHOST).username(ADMIN).password(ADMIN_PASSWORD).loginUrl(LOGIN_PATH).executionLimit(2).build());
  try {
    client.execute(request);
    fail("Expected CloudstackRESTException exception");
  }
 catch (  final CloudstackRESTException e) {
    assertThat(e.getMessage(),not(isEmptyOrNullString()));
    verifyPrivate(client).invoke("execute",HttpRequestMatcher.eq(request),eq(0));
    verifyPrivate(client).invoke("execute",HttpRequestMatcher.eq(loginRequest),eq(401));
  }
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExecuteSuccessAtFirstAttempt() throws Exception {
  when(mockResponse.getStatusLine()).thenReturn(HTTP_200_STATUSLINE);
  when(httpClient.execute(eq(HTTP_HOST),eq(request),eq(httpClientContext))).thenReturn(mockResponse);
  final CloseableHttpResponse response=client.execute(request);
  assertThat(response,notNullValue());
  assertThat(response,sameInstance(mockResponse));
  verifyPrivate(client).invoke("execute",request,0);
}

</code></pre>

<br>
<pre class="type-15 type-18 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExecuteLiveLockWhenControllerAllowsLoginAndFollowsWithUnauthorizedButDoesNotRediect() throws Exception {
  when(mockResponse.getStatusLine()).thenReturn(HTTP_401_STATUSLINE).thenReturn(HTTP_200_STATUSLINE).thenReturn(HTTP_401_STATUSLINE).thenReturn(HTTP_200_STATUSLINE).thenReturn(HTTP_401_STATUSLINE).thenReturn(HTTP_200_STATUSLINE).thenReturn(HTTP_401_STATUSLINE).thenReturn(HTTP_200_STATUSLINE).thenReturn(HTTP_401_STATUSLINE);
  when(httpClient.execute(eq(HTTP_HOST),HttpRequestMatcher.eq(request),eq(httpClientContext))).thenReturn(mockResponse).thenReturn(mockResponse).thenReturn(mockResponse).thenReturn(mockResponse).thenReturn(mockResponse);
  when(httpClient.execute(eq(HTTP_HOST),HttpRequestMatcher.eq(loginRequest),eq(httpClientContext))).thenReturn(mockResponse).thenReturn(mockResponse).thenReturn(mockResponse).thenReturn(mockResponse);
  final NiciraRestClient client=spy(NiciraRestClient.create().client(httpClient).clientContext(httpClientContext).hostname(LOCALHOST).username(ADMIN).password(ADMIN_PASSWORD).loginUrl(LOGIN_PATH).executionLimit(2).build());
  try {
    client.execute(request);
    fail("Execution count should have been maxed out");
  }
 catch (  final CloudstackRESTException e) {
    assertThat(e.getMessage(),containsString("Reached max executions limit of "));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.network.nicira.RoutingConfigAdapterTest </h4><pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test() public void testRoutingConfigAdapter() throws Exception {
  final String jsonString="{type : \"SingleDefaultRouteImplicitRoutingConfig\"}";
  final SingleDefaultRouteImplicitRoutingConfig object=gson.fromJson(jsonString,SingleDefaultRouteImplicitRoutingConfig.class);
  assertThat(object,notNullValue());
  assertThat(object,instanceOf(SingleDefaultRouteImplicitRoutingConfig.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.network.resource.wrapper.NiciraCheckHealthCommandWrapperTest </h4><pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@SuppressWarnings("unchecked") @Test public void tetsExecuteWhenApiThrowsException() throws Exception {
  when(niciraApi.getControlClusterStatus()).thenThrow(NiciraNvpApiException.class);
  final NiciraCheckHealthCommandWrapper commandWrapper=new NiciraCheckHealthCommandWrapper();
  final Answer answer=commandWrapper.execute(new CheckHealthCommand(),niciraResource);
  assertThat(answer.getResult(),equalTo(false));
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void tetsExecuteWhenClusterIsStable() throws Exception {
  final ControlClusterStatus statusValue=mock(ControlClusterStatus.class);
  when(statusValue.getClusterStatus()).thenReturn("stable");
  when(niciraApi.getControlClusterStatus()).thenReturn(statusValue);
  final NiciraCheckHealthCommandWrapper commandWrapper=new NiciraCheckHealthCommandWrapper();
  final Answer answer=commandWrapper.execute(new CheckHealthCommand(),niciraResource);
  assertThat(answer.getResult(),equalTo(true));
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void tetsExecuteWhenClusterIsNotStable() throws Exception {
  when(niciraApi.getControlClusterStatus()).thenReturn(new ControlClusterStatus());
  final NiciraCheckHealthCommandWrapper commandWrapper=new NiciraCheckHealthCommandWrapper();
  final Answer answer=commandWrapper.execute(new CheckHealthCommand(),niciraResource);
  assertThat(answer.getResult(),equalTo(false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.utils.net.NetUtilsTest </h4><pre class="type-8 type-2 type-18 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRandomIpFromCidrUsignAvoid() throws Exception {
  final String cidr="192.168.124.1";
  final int size=30;
  final SortedSet<Long> avoid=new TreeSet<Long>();
  long ip=NetUtils.getRandomIpFromCidr(cidr,size,avoid);
  assertThat("We should be able to retrieve an ip on the first call.",ip,not(equalTo(-1L)));
  avoid.add(ip);
  ip=NetUtils.getRandomIpFromCidr(cidr,size,avoid);
  assertThat("We should be able to retrieve an ip on the second call.",ip,not(equalTo(-1L)));
  assertThat("ip returned is not in the avoid list",avoid,not(contains(ip)));
  avoid.add(ip);
  ip=NetUtils.getRandomIpFromCidr(cidr,size,avoid);
  assertThat("We should be able to retrieve an ip on the third call.",ip,not(equalTo(-1L)));
  assertThat("ip returned is not in the avoid list",avoid,not(contains(ip)));
  avoid.add(ip);
  ip=NetUtils.getRandomIpFromCidr(cidr,size,avoid);
  assertEquals("This should be -1 because we ran out of ip addresses: " + ip,ip,-1);
}

</code></pre>

<br>
<pre class="type-8 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testGetRandomIpFromCidrWithSize16() throws Exception {
  final String cidr="192.168.124.1";
  final int size=16;
  final int netCharacters=8;
  final long ip=NetUtils.getRandomIpFromCidr(cidr,16,new TreeSet<Long>());
  assertThat("The ip " + NetUtils.long2Ip(ip) + " retrieved must be within the cidr "+ cidr+ "/"+ size,cidr.substring(0,netCharacters),equalTo(NetUtils.long2Ip(ip).substring(0,netCharacters)));
}

</code></pre>

<br>
<pre class="type-8 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testGetRandomIpFromCidrWithSize8() throws Exception {
  final String cidr="192.168.124.1";
  final int size=8;
  final int netCharacters=4;
  final long ip=NetUtils.getRandomIpFromCidr(cidr,16,new TreeSet<Long>());
  assertThat("The ip " + NetUtils.long2Ip(ip) + " retrieved must be within the cidr "+ cidr+ "/"+ size,cidr.substring(0,netCharacters),equalTo(NetUtils.long2Ip(ip).substring(0,netCharacters)));
}

</code></pre>

<br>
<pre class="type-8 type-13 type-1 type-2 type-18 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetIp6FromRange(){
  assertEquals(NetUtils.getIp6FromRange("1234:5678::1-1234:5678::1"),"1234:5678::1");
  for (int i=0; i < 5; i++) {
    final String ip=NetUtils.getIp6FromRange("1234:5678::1-1234:5678::2");
    assertThat(ip,anyOf(equalTo("1234:5678::1"),equalTo("1234:5678::2")));
    s_logger.info("IP is " + ip);
  }
  String ipString=null;
  final IPv6Address ipStart=IPv6Address.fromString("1234:5678::1");
  final IPv6Address ipEnd=IPv6Address.fromString("1234:5678::ffff:ffff:ffff:ffff");
  for (int i=0; i < 10; i++) {
    ipString=NetUtils.getIp6FromRange(ipStart.toString() + "-" + ipEnd.toString());
    s_logger.info("IP is " + ipString);
    final IPv6Address ip=IPv6Address.fromString(ipString);
    assertThat(ip,greaterThanOrEqualTo(ipStart));
    assertThat(ip,lessThanOrEqualTo(ipEnd));
  }
}

</code></pre>

<br>
<pre class="type-8 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testGetRandomIpFromCidrWithSize24() throws Exception {
  final String cidr="192.168.124.1";
  final int size=24;
  final int netCharacters=12;
  final long ip=NetUtils.getRandomIpFromCidr(cidr,size,new TreeSet<Long>());
  assertThat("The ip " + NetUtils.long2Ip(ip) + " retrieved must be within the cidr "+ cidr+ "/"+ size,cidr.substring(0,netCharacters),equalTo(NetUtils.long2Ip(ip).substring(0,netCharacters)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.utils.rest.BasicRestClientTest </h4><pre class="type-8 type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExecuteRequestStatusCodeIsNotOk() throws Exception {
  when(mockResponse.getStatusLine()).thenReturn(HTTP_503_STATUSLINE);
  doReturn(mockResponse).when(httpClient).execute(any(HttpHost.class),HttpRequestMatcher.eq(request),any(HttpClientContext.class));
  final BasicRestClient restClient=BasicRestClient.create().host(LOCALHOST).client(httpClient).build();
  final CloseableHttpResponse response=restClient.execute(request);
  assertThat(response,notNullValue());
  assertThat(response,sameInstance(mockResponse));
  assertThat(response.getStatusLine(),sameInstance(HTTP_503_STATUSLINE));
}

</code></pre>

<br>
<pre class="type-8 type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExecuteRequest() throws Exception {
  when(mockResponse.getStatusLine()).thenReturn(HTTP_200_REPSONSE);
  doReturn(mockResponse).when(httpClient).execute(any(HttpHost.class),HttpRequestMatcher.eq(request),any(HttpClientContext.class));
  final BasicRestClient restClient=BasicRestClient.create().host(LOCALHOST).client(httpClient).build();
  final CloseableHttpResponse response=restClient.execute(request);
  assertThat(response,notNullValue());
  assertThat(response,sameInstance(mockResponse));
  assertThat(response.getStatusLine(),sameInstance(HTTP_200_REPSONSE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.utils.rest.HttpClientHelperTest </h4><pre class="type-8 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testCreateClient() throws Exception {
  int maxRedirects=5;
  final CloseableHttpClient client=HttpClientHelper.createHttpClient(maxRedirects);
  assertThat(client,notNullValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.utils.rest.HttpStatusCodeHelperTest </h4><pre class="type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testIsUnauthorized() throws Exception {
  assertThat(HttpStatusCodeHelper.isUnauthorized(HttpStatus.SC_TEMPORARY_REDIRECT),equalTo(false));
  assertThat(HttpStatusCodeHelper.isUnauthorized(HttpStatus.SC_BAD_REQUEST),equalTo(false));
  assertThat(HttpStatusCodeHelper.isUnauthorized(HttpStatus.SC_UNAUTHORIZED),equalTo(true));
  assertThat(HttpStatusCodeHelper.isUnauthorized(HttpStatus.SC_PAYMENT_REQUIRED),equalTo(false));
  assertThat(HttpStatusCodeHelper.isUnauthorized(HttpStatus.SC_FORBIDDEN),equalTo(false));
}

</code></pre>

<br>
<pre class="type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testIsSuccess() throws Exception {
  assertThat(HttpStatusCodeHelper.isSuccess(HttpStatus.SC_SWITCHING_PROTOCOLS),equalTo(false));
  assertThat(HttpStatusCodeHelper.isSuccess(HttpStatus.SC_PROCESSING),equalTo(false));
  assertThat(HttpStatusCodeHelper.isSuccess(HttpStatus.SC_OK),equalTo(true));
  assertThat(HttpStatusCodeHelper.isSuccess(HttpStatus.SC_CREATED),equalTo(true));
  assertThat(HttpStatusCodeHelper.isSuccess(HttpStatus.SC_ACCEPTED),equalTo(true));
  assertThat(HttpStatusCodeHelper.isSuccess(HttpStatus.SC_NON_AUTHORITATIVE_INFORMATION),equalTo(true));
  assertThat(HttpStatusCodeHelper.isSuccess(HttpStatus.SC_NO_CONTENT),equalTo(true));
  assertThat(HttpStatusCodeHelper.isSuccess(HttpStatus.SC_RESET_CONTENT),equalTo(true));
  assertThat(HttpStatusCodeHelper.isSuccess(HttpStatus.SC_PARTIAL_CONTENT),equalTo(true));
  assertThat(HttpStatusCodeHelper.isSuccess(HttpStatus.SC_MULTI_STATUS),equalTo(true));
  assertThat(HttpStatusCodeHelper.isSuccess(HttpStatus.SC_MULTIPLE_CHOICES),equalTo(false));
  assertThat(HttpStatusCodeHelper.isSuccess(HttpStatus.SC_MOVED_PERMANENTLY),equalTo(false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.utils.rest.HttpUriRequestBuilderTest </h4><pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testBuildRequestWithJsonPayload() throws Exception {
  final HttpUriRequest request=HttpUriRequestBuilder.create().method(HttpMethods.GET).path("/path").jsonPayload(Optional.of("{'key1':'value1'}")).build();
  assertThat(request,notNullValue());
  assertThat(request.getURI().getPath(),equalTo("/path"));
  assertThat(request.getURI().getScheme(),nullValue());
  assertThat(request.getURI().getQuery(),nullValue());
  assertThat(request.getURI().getHost(),nullValue());
  assertThat(request.getMethod(),equalTo(HttpGet.METHOD_NAME));
  assertThat(request.containsHeader(HttpConstants.CONTENT_TYPE),equalTo(true));
  assertThat(request.getFirstHeader(HttpConstants.CONTENT_TYPE).getValue(),equalTo(HttpConstants.JSON_CONTENT_TYPE));
  assertThat(request,HttpUriRequestPayloadMatcher.hasPayload("{'key1':'value1'}"));
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testBuildSimpleRequest() throws Exception {
  final HttpUriRequest request=HttpUriRequestBuilder.create().method(HttpMethods.GET).path("/path").build();
  assertThat(request,notNullValue());
  assertThat(request.getURI().getPath(),equalTo("/path"));
  assertThat(request.getURI().getScheme(),nullValue());
  assertThat(request.getURI().getQuery(),nullValue());
  assertThat(request.getURI().getHost(),nullValue());
  assertThat(request.getMethod(),equalTo(HttpGet.METHOD_NAME));
}

</code></pre>

<br>
<pre class="type-8 type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testBuildRequestWithParameters() throws Exception {
  final HashMap<String,String> parameters=new HashMap<String,String>();
  parameters.put("key1","value1");
  final HttpUriRequest request=HttpUriRequestBuilder.create().method(HttpMethods.GET).path("/path").parameters(parameters).build();
  assertThat(request,notNullValue());
  assertThat(request.getURI().getPath(),equalTo("/path"));
  assertThat(request.getURI().getQuery(),equalTo("key1=value1"));
  assertThat(request.getURI().getScheme(),nullValue());
  assertThat(request.getURI().getHost(),nullValue());
  assertThat(request.getMethod(),equalTo(HttpGet.METHOD_NAME));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.utils.rest.RESTServiceConnectorTest </h4><pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExecuteRetrieveObject() throws Exception {
  final TestPojo existingObject=new TestPojo();
  existingObject.setField("existingValue");
  final String newObjectJson=gson.toJson(existingObject);
  final CloseableHttpResponse response=mock(CloseableHttpResponse.class);
  when(response.getEntity()).thenReturn(new StringEntity(newObjectJson));
  when(response.getStatusLine()).thenReturn(HTTP_200_STATUS_LINE);
  final CloseableHttpClient httpClient=mock(CloseableHttpClient.class);
  when(httpClient.execute(any(HttpHost.class),any(HttpRequest.class),any(HttpClientContext.class))).thenReturn(response);
  final RestClient restClient=new BasicRestClient(httpClient,HttpClientContext.create(),"localhost");
  final RESTServiceConnector connector=new RESTServiceConnector.Builder().client(restClient).build();
  final TestPojo object=connector.executeRetrieveObject(TestPojo.class,"/somepath");
  assertThat(object,notNullValue());
  assertThat(object,equalTo(existingObject));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestMethodMatcher.aMethod("GET"),any(HttpClientContext.class));
  verify(response).close();
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExecuteRetrieveObjectWithParameters() throws Exception {
  final TestPojo existingObject=new TestPojo();
  existingObject.setField("existingValue");
  final String newObjectJson=gson.toJson(existingObject);
  final CloseableHttpResponse response=mock(CloseableHttpResponse.class);
  when(response.getEntity()).thenReturn(new StringEntity(newObjectJson));
  when(response.getStatusLine()).thenReturn(HTTP_200_STATUS_LINE);
  final CloseableHttpClient httpClient=mock(CloseableHttpClient.class);
  when(httpClient.execute(any(HttpHost.class),any(HttpRequest.class),any(HttpClientContext.class))).thenReturn(response);
  final RestClient restClient=new BasicRestClient(httpClient,HttpClientContext.create(),"localhost");
  final RESTServiceConnector connector=new RESTServiceConnector.Builder().client(restClient).build();
  final TestPojo object=connector.executeRetrieveObject(TestPojo.class,"/somepath",DEFAULT_TEST_PARAMETERS);
  assertThat(object,notNullValue());
  assertThat(object,equalTo(existingObject));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestMethodMatcher.aMethod("GET"),any(HttpClientContext.class));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestQueryMatcher.aQueryThatContains("arg2=val2"),any(HttpClientContext.class));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestQueryMatcher.aQueryThatContains("arg1=val1"),any(HttpClientContext.class));
  verify(response).close();
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExecuteCreateObjectWithParameters() throws Exception {
  final TestPojo newObject=new TestPojo();
  newObject.setField("newValue");
  final String newObjectJson=gson.toJson(newObject);
  final CloseableHttpResponse response=mock(CloseableHttpResponse.class);
  when(response.getEntity()).thenReturn(new StringEntity(newObjectJson));
  when(response.getStatusLine()).thenReturn(HTTP_200_STATUS_LINE);
  final CloseableHttpClient httpClient=mock(CloseableHttpClient.class);
  when(httpClient.execute(any(HttpHost.class),any(HttpRequest.class),any(HttpClientContext.class))).thenReturn(response);
  final RestClient restClient=new BasicRestClient(httpClient,HttpClientContext.create(),"localhost");
  final RESTServiceConnector connector=new RESTServiceConnector.Builder().client(restClient).build();
  final TestPojo object=connector.executeCreateObject(newObject,"/somepath",DEFAULT_TEST_PARAMETERS);
  assertThat(object,notNullValue());
  assertThat(object,equalTo(newObject));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestMethodMatcher.aMethod("POST"),any(HttpClientContext.class));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestPayloadMatcher.aPayload(newObjectJson),any(HttpClientContext.class));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestQueryMatcher.aQueryThatContains("arg2=val2"),any(HttpClientContext.class));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestQueryMatcher.aQueryThatContains("arg1=val1"),any(HttpClientContext.class));
  verify(response).close();
}

</code></pre>

<br>
<pre class="type-1 type-18 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExecuteCreateObject() throws Exception {
  final TestPojo newObject=new TestPojo();
  newObject.setField("newValue");
  final String newObjectJson=gson.toJson(newObject);
  final CloseableHttpResponse response=mock(CloseableHttpResponse.class);
  when(response.getEntity()).thenReturn(new StringEntity(newObjectJson));
  when(response.getStatusLine()).thenReturn(HTTP_200_STATUS_LINE);
  final CloseableHttpClient httpClient=mock(CloseableHttpClient.class);
  when(httpClient.execute(any(HttpHost.class),any(HttpRequest.class),any(HttpClientContext.class))).thenReturn(response);
  final RestClient restClient=new BasicRestClient(httpClient,HttpClientContext.create(),"localhost");
  final RESTServiceConnector connector=new RESTServiceConnector.Builder().client(restClient).build();
  final TestPojo object=connector.executeCreateObject(newObject,"/somepath");
  assertThat(object,notNullValue());
  assertThat(object,equalTo(newObject));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestMethodMatcher.aMethod("POST"),any(HttpClientContext.class));
  verify(httpClient).execute(any(HttpHost.class),HttpUriRequestPayloadMatcher.aPayload(newObjectJson),any(HttpClientContext.class));
  verify(response).close();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
