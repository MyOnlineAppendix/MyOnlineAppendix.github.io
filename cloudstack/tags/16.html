<h3><span class=" glyphicon glyphicon-tag"/>&nbspBranchVerifier</h3><kbd>Verifies assertions inside branch conditions</kbd><br><br><br><h4 style="margin:0px">Class: com.cloud.hypervisor.hyperv.test.HypervDirectConnectResourceTest </h4><pre class="type-16 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public final void testModifyStoragePoolCommand2(){
  String folderName="." + File.separator + "Dummy";
  File folder=new File(folderName);
  if (!folder.exists()) {
    if (!folder.mkdir()) {
      Assert.assertTrue(false);
    }
  }
  s_logger.info("Createing pool at : " + folderName);
  StoragePoolVO pool=new StoragePoolVO(StoragePoolType.Filesystem,"127.0.0.1",-1,folderName);
  pool.setUuid(s_testLocalStoreUUID);
  ModifyStoragePoolCommand cmd=new ModifyStoragePoolCommand(true,pool,folderName);
  Answer ans=s_hypervresource.executeRequest(cmd);
  Assert.assertTrue(ans.getResult());
  DeleteStoragePoolCommand delCmd=new DeleteStoragePoolCommand(pool,folderName);
  Answer ans2=s_hypervresource.executeRequest(delCmd);
  Assert.assertTrue(ans2.getResult());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.hypervisor.kvm.resource.LibvirtComputingResourceTest </h4><pre class="type-8 type-16 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void testIsInterface(){
  LibvirtComputingResource lvcr=new LibvirtComputingResource();
  assertFalse(lvcr.isInterface("bla"));
  assertTrue(lvcr.isInterface("p99p00"));
  for (  String ifNamePattern : lvcr._ifNamePatterns) {
    if (!ifNamePattern.contains("\\")) {
      String ifName=ifNamePattern.replaceFirst("\\^","") + "0";
      assertTrue("The pattern '" + ifNamePattern + "' is expected to be valid for interface "+ ifName,lvcr.isInterface(ifName));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.network.nicira.NiciraNvpApiIT </h4><pre class="type-16 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCRUDLogicalSwitch() throws Exception {
  LogicalSwitch logicalSwitch=new LogicalSwitch();
  logicalSwitch.setDisplayName("LogicalSwitch" + timestamp);
  logicalSwitch.setPortIsolationEnabled(true);
  logicalSwitch.setReplicationMode("service");
  logicalSwitch.setTags(new ArrayList<NiciraNvpTag>());
  logicalSwitch.getTags().add(new NiciraNvpTag("anto","hugo"));
  logicalSwitch=api.createLogicalSwitch(logicalSwitch);
  logicalSwitch.setDisplayName("UpdatedLogicalSwitch" + timestamp);
  api.updateLogicalSwitch(logicalSwitch,logicalSwitch.getUuid());
  List<LogicalSwitch> logicalSwitches=api.findLogicalSwitch();
  for (  final LogicalSwitch iLogicalSwitch : logicalSwitches) {
    if (iLogicalSwitch.getUuid().equalsIgnoreCase(logicalSwitch.getUuid())) {
      assertEquals("Read a LogicalSwitch different from the one just created and updated",logicalSwitch,iLogicalSwitch);
    }
  }
  logicalSwitches=api.findLogicalSwitch(logicalSwitch.getUuid());
  assertEquals("Read a LogicalSwitch different from the one just created and updated",logicalSwitch,logicalSwitches.get(0));
  assertEquals("Read a LogicalSwitch filtered by unique id (UUID) with more than one item",1,logicalSwitches.size());
  final List<NiciraNvpTag> tags=new ArrayList<NiciraNvpTag>();
  tags.add(new NiciraNvpTag("cs_account","OwnerName"));
  LogicalSwitchPort logicalSwitchPort=new LogicalSwitchPort("LSwitchPort" + timestamp,tags,true);
  logicalSwitchPort=api.createLogicalSwitchPort(logicalSwitch.getUuid(),logicalSwitchPort);
  logicalSwitchPort.setDisplayName("UpdatedLSwitchPort" + timestamp);
  api.updateLogicalSwitchPort(logicalSwitch.getUuid(),logicalSwitchPort);
  final List<LogicalSwitchPort> logicalSwitchePorts=api.findLogicalSwitchPortsByUuid(logicalSwitch.getUuid(),logicalSwitchPort.getUuid());
  for (  final LogicalSwitchPort iLSwitchPort : logicalSwitchePorts) {
    if (iLSwitchPort.getUuid().equalsIgnoreCase(logicalSwitchPort.getUuid())) {
      assertEquals("Read a LogicalSwitchPort different from the one just created and updated",logicalSwitchPort,iLSwitchPort);
    }
  }
  final String attachmentUuid=UUID.randomUUID().toString();
  final VifAttachment vifAttachment=new VifAttachment(attachmentUuid);
  api.updateLogicalSwitchPortAttachment(logicalSwitch.getUuid(),logicalSwitchPort.getUuid(),vifAttachment);
  assertEquals("Read a LogicalSwitchPort by vifAttachment different than expected",api.findLogicalSwitchPortUuidByVifAttachmentUuid(logicalSwitch.getUuid(),vifAttachment.getVifUuid()),logicalSwitchPort.getUuid());
  api.deleteLogicalSwitchPort(logicalSwitch.getUuid(),logicalSwitchPort.getUuid());
  api.deleteLogicalSwitch(logicalSwitch.getUuid());
}

</code></pre>

<br>
<pre class="type-16 type-1 type-5 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCRUDLogicalRouter(){
  LogicalRouter logicalRouter=new LogicalRouter();
  logicalRouter.setDisplayName("LogicalRouter" + timestamp);
  logicalRouter.setDistributed(true);
  logicalRouter.setNatSynchronizationEnabled(true);
  logicalRouter.setReplicationMode(LogicalRouter.REPLICATION_MODE_SERVICE);
  final RoutingConfig routingConfig=new SingleDefaultRouteImplicitRoutingConfig(new RouterNextHop("192.168.10.20"));
  logicalRouter.setRoutingConfig(routingConfig);
  try {
    logicalRouter=api.createLogicalRouter(logicalRouter);
    logicalRouter.setDisplayName("UpdatedLogicalSwitch" + timestamp);
    api.updateLogicalRouter(logicalRouter,logicalRouter.getUuid());
    List<LogicalRouter> logicalRouters=api.findLogicalRouter();
    LogicalRouter lsInList=null;
    for (    final LogicalRouter iLogicalRouter : logicalRouters) {
      if (iLogicalRouter.getUuid().equalsIgnoreCase(logicalRouter.getUuid())) {
        lsInList=iLogicalRouter;
      }
    }
    assertEquals("Read a LogicalRouter different from the one just created and updated",logicalRouter,lsInList);
    logicalRouters=api.findLogicalRouter(logicalRouter.getUuid());
    assertEquals("Read a LogicalRouter different from the one just created and updated",logicalRouter,logicalRouters.get(0));
    assertEquals("Read a LogicalRouter filtered by unique id (UUID) with more than one item",1,logicalRouters.size());
    assertEquals(logicalRouters.get(0),api.findOneLogicalRouterByUuid(logicalRouter.getUuid()));
    final List<NiciraNvpTag> tags=new ArrayList<NiciraNvpTag>();
    tags.add(new NiciraNvpTag("cs_account","OwnerName"));
    LogicalRouterPort logicalRouterPort=new LogicalRouterPort();
    logicalRouterPort.setDisplayName("LRouterPort" + timestamp);
    logicalRouterPort.setTags(tags);
    logicalRouterPort.setAdminStatusEnabled(true);
    logicalRouterPort.setPortno(1024);
    logicalRouterPort.setMacAddress("00:00:00:00:00:00");
    final List<String> ipAddresses=new ArrayList<String>();
    logicalRouterPort.setIpAddresses(ipAddresses);
    logicalRouterPort=api.createLogicalRouterPort(logicalRouter.getUuid(),logicalRouterPort);
    logicalRouterPort.setDisplayName("UpdatedLRouterPort" + timestamp);
    api.updateLogicalRouterPort(logicalRouter.getUuid(),logicalRouterPort);
    final List<LogicalRouterPort> logicalRouterePorts=api.findLogicalRouterPortsByUuid(logicalRouter.getUuid(),logicalRouterPort.getUuid());
    for (    final LogicalRouterPort iLRouterPort : logicalRouterePorts) {
      if (iLRouterPort.getUuid().equalsIgnoreCase(logicalRouterPort.getUuid())) {
        assertEquals("Read a LogicalRouterPort different from the one just created and updated",logicalRouterPort,iLRouterPort);
      }
    }
    UUID.randomUUID().toString();
    SourceNatRule snr=new SourceNatRule();
    snr.setToSourceIpAddressMin("192.168.10.10");
    snr.setToSourceIpAddressMax("192.168.10.20");
    snr.setOrder(200);
    final Match match=new Match();
    match.setSourceIpAddresses("192.168.150.150");
    snr.setMatch(match);
    snr=(SourceNatRule)api.createLogicalRouterNatRule(logicalRouter.getUuid(),snr);
    snr.setToSourceIpAddressMax("192.168.10.30");
    api.updateLogicalRouterNatRule(logicalRouter.getUuid(),snr);
    api.findNatRulesByLogicalRouterUuid(logicalRouter.getUuid());
    api.deleteLogicalRouterNatRule(logicalRouter.getUuid(),snr.getUuid());
    api.deleteLogicalRouterPort(logicalRouter.getUuid(),logicalRouterPort.getUuid());
    api.deleteLogicalRouter(logicalRouter.getUuid());
  }
 catch (  final NiciraNvpApiException e) {
    e.printStackTrace();
    assertTrue("Errors in LogicalRouter CRUD",false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.storage.template.LocalTemplateDownloaderTest </h4><pre class="type-16 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void localTemplateDownloaderTest() throws Exception {
  String url=new File("pom.xml").toURI().toURL().toString();
  TemplateDownloader td=new LocalTemplateDownloader(null,url,System.getProperty("java.io.tmpdir"),TemplateDownloader.DEFAULT_MAX_TEMPLATE_SIZE_IN_BYTES,null);
  long bytes=td.download(true,null);
  if (!(bytes > 0)) {
    fail("Failed download");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.test.ui.AddAndDeleteAISO </h4><pre class="type-13 type-16 type-15 type-1 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddAndDeleteISO() throws Exception {
  try {
    selenium.open("/client/");
    selenium.type("account_username","admin");
    selenium.type("account_password","password");
    selenium.click("loginbutton");
    Thread.sleep(3000);
    assertTrue(selenium.isTextPresent("admin"));
    selenium.click("//div[@id='leftmenu_templates']/div");
    selenium.click("//div[@id='leftmenu_submenu_my_iso']/div/div[2]");
    Thread.sleep(3000);
    selenium.click("label");
    selenium.type("add_iso_name","abc");
    selenium.type("add_iso_display_text","abc");
    String iso_url=System.getProperty("add_iso_url","http://10.91.28.6/ISO/Fedora-11-i386-DVD.iso");
    selenium.type("add_iso_url",iso_url);
    String iso_zone=System.getProperty("add_iso_zone","All Zones");
    selenium.select("add_iso_zone","label=" + iso_zone);
    String iso_os_type=System.getProperty("add_iso_os_type","Fedora 11");
    selenium.select("add_iso_os_type","label=" + iso_os_type);
    selenium.click("//div[28]/div[11]/button[1]");
    Thread.sleep(3000);
    int i=1;
    try {
      for (; ; i++) {
        System.out.println("i=   " + i);
        selenium.click("//div[" + i + "]/div/div[2]/span/span");
      }
    }
 catch (    Exception ex) {
      s_logger.info("[ignored]" + "error during clicking test on iso: " + e.getLocalizedMessage());
    }
    for (int second=0; ; second++) {
      if (second >= 60)       fail("timeout");
      try {
        if (selenium.isVisible("//div[@id='after_action_info_container_on_top']"))         break;
      }
 catch (      Exception e) {
        s_logger.info("[ignored]" + "error during visibility test of iso: " + e.getLocalizedMessage());
      }
      Thread.sleep(10000);
    }
    assertTrue(selenium.isTextPresent("Adding succeeded"));
    Thread.sleep(3000);
    int status=1;
    while (!selenium.isTextPresent("Ready")) {
      for (int j=1; j <= i; j++) {
        if (selenium.isTextPresent("Ready")) {
          status=0;
          break;
        }
        selenium.click("//div[" + j + "]/div/div[2]/span/span");
      }
      if (status == 0) {
        break;
      }
 else {
        selenium.click("//div[@id='leftmenu_submenu_featured_iso']/div/div[2]");
        Thread.sleep(3000);
        selenium.click("//div[@id='leftmenu_submenu_my_iso']/div/div[2]");
        Thread.sleep(3000);
      }
    }
    selenium.click("link=Delete ISO");
    selenium.click("//div[28]/div[11]/button[1]");
    for (int second=0; ; second++) {
      if (second >= 60)       fail("timeout");
      try {
        if (selenium.isVisible("after_action_info_container_on_top"))         break;
      }
 catch (      Exception e) {
        s_logger.info("[ignored]" + "error checking visibility after test completion for iso: " + e.getLocalizedMessage());
      }
      Thread.sleep(1000);
    }
    assertTrue(selenium.isTextPresent("Delete ISO action succeeded"));
    selenium.click("main_logout");
    selenium.waitForPageToLoad("30000");
    assertTrue(selenium.isTextPresent("Welcome to Management Console"));
  }
 catch (  SeleniumException ex) {
    System.err.println(ex.getMessage());
    fail(ex.getMessage());
    throw ex;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.test.ui.AddAndDeleteATemplate </h4><pre class="type-13 type-16 type-15 type-1 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddAndDeleteTemplate() throws Exception {
  try {
    selenium.open("/client/");
    selenium.type("account_username","admin");
    selenium.type("account_password","password");
    selenium.click("loginbutton");
    Thread.sleep(3000);
    assertTrue(selenium.isTextPresent("admin"));
    selenium.click("//div[@id='leftmenu_templates']/div");
    selenium.click("//div[@id='leftmenu_submenu_my_template']/div/div[2]");
    Thread.sleep(3000);
    selenium.click("label");
    selenium.type("add_template_name","abc");
    selenium.type("add_template_display_text","abc");
    String template_url=System.getProperty("add_template_url","http://10.91.28.6/templates/centos53-x86_64/latest/f59f18fb-ae94-4f97-afd2-f84755767aca.vhd.bz2");
    selenium.type("add_template_url",template_url);
    String template_zone=System.getProperty("add_template_zone","All Zones");
    selenium.select("add_template_zone","label=" + template_zone);
    String template_os_type=System.getProperty("add_template_os_type","CentOS 5.3 (32-bit)");
    selenium.select("add_template_os_type","label=" + template_os_type);
    selenium.click("//div[28]/div[11]/button[1]");
    Thread.sleep(3000);
    int i=1;
    try {
      for (; ; i++) {
        System.out.println("i=   " + i);
        selenium.click("//div[" + i + "]/div/div[2]/span/span");
      }
    }
 catch (    Exception ex) {
      s_logger.info("[ignored]" + "error during clicking test on template: " + e.getLocalizedMessage());
    }
    for (int second=0; ; second++) {
      if (second >= 60)       fail("timeout");
      try {
        if (selenium.isVisible("//div[@id='after_action_info_container_on_top']"))         break;
      }
 catch (      Exception e) {
        s_logger.info("[ignored]" + "error during visibility test of template: " + e.getLocalizedMessage());
      }
      Thread.sleep(10000);
    }
    assertTrue(selenium.isTextPresent("Adding succeeded"));
    Thread.sleep(3000);
    int status=1;
    while (!selenium.isTextPresent("Ready")) {
      for (int j=1; j <= i; j++) {
        if (selenium.isTextPresent("Ready")) {
          status=0;
          break;
        }
        selenium.click("//div[" + j + "]/div/div[2]/span/span");
      }
      if (status == 0) {
        break;
      }
 else {
        selenium.click("//div[@id='leftmenu_submenu_featured_template']/div/div[2]");
        Thread.sleep(3000);
        selenium.click("//div[@id='leftmenu_submenu_my_template']/div/div[2]");
        Thread.sleep(3000);
      }
    }
    selenium.click("link=Delete Template");
    selenium.click("//div[28]/div[11]/button[1]");
    for (int second=0; ; second++) {
      if (second >= 60)       fail("timeout");
      try {
        if (selenium.isVisible("after_action_info_container_on_top"))         break;
      }
 catch (      Exception e) {
        s_logger.info("[ignored]" + "error checking visibility after test completion for template: " + e.getLocalizedMessage());
      }
      Thread.sleep(1000);
    }
    assertTrue(selenium.isTextPresent("Delete Template action succeeded"));
    selenium.click("main_logout");
    selenium.waitForPageToLoad("30000");
    assertTrue(selenium.isTextPresent("Welcome to Management Console"));
  }
 catch (  SeleniumException ex) {
    System.err.println(ex.getMessage());
    fail(ex.getMessage());
    throw ex;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.test.ui.UIScenarioTest </h4><pre class="type-13 type-16 type-15 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLoginStartStopVMScenario() throws Exception {
  try {
    selenium.open("/client/");
    selenium.type("account_username","admin");
    selenium.type("account_password","password");
    selenium.click("loginbutton");
    Thread.sleep(3000);
    assertTrue(selenium.isTextPresent("admin"));
    selenium.click("//div[@id='leftmenu_instances']/div");
    selenium.click("//div[@id='leftmenu_instances_stopped_instances']/div/span");
    Thread.sleep(3000);
    selenium.click("//div[@id='midmenu_startvm_link']/div/div[2]");
    selenium.click("//div[39]/div[11]/button[1]");
    for (int second=0; ; second++) {
      if (second >= 60)       fail("timeout");
      try {
        if (selenium.isVisible("//div/p[@id='after_action_info']"))         break;
      }
 catch (      Exception e) {
        s_logger.info("[ignored]" + "error during visibility test after start vm: " + e.getLocalizedMessage());
      }
      Thread.sleep(10000);
    }
    assertTrue(selenium.isTextPresent("Start Instance action succeeded"));
    selenium.click("//div[@id='leftmenu_instances_running_instances']/div/span");
    Thread.sleep(3000);
    selenium.click("//div[@id='midmenu_stopvm_link']/div/div[2]");
    selenium.click("//div[39]/div[11]/button[1]");
    for (int second=0; ; second++) {
      if (second >= 60)       fail("timeout");
      try {
        if (selenium.isVisible("//div/p[@id='after_action_info']"))         break;
      }
 catch (      Exception e) {
        s_logger.info("[ignored]" + "error during visibility test after stop vm: " + e.getLocalizedMessage());
      }
      Thread.sleep(10000);
    }
    assertTrue(selenium.isTextPresent("Stop Instance action succeeded"));
    selenium.click("main_logout");
    selenium.waitForPageToLoad("30000");
    assertTrue(selenium.isTextPresent("Welcome to Management Console"));
  }
 catch (  SeleniumException ex) {
    fail(ex.getMessage());
    System.err.println(ex.getMessage());
    throw ex;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.utils.StringUtilsTest </h4><pre class="type-16 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetPreferredCharset(){
  final boolean ifUtf8Supported=StringUtils.isUtf8Supported();
  if (ifUtf8Supported) {
    assertEquals(StringUtils.getPreferredCharset(),Charset.forName("UTF-8"));
  }
 else {
    assertNotEquals(StringUtils.getPreferredCharset(),Charset.forName("UTF-8"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: com.cloud.utils.db.TransactionTest </h4><pre class="type-16 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testUserManagedConnection(){
  DbTestDao testDao=ComponentContext.inject(DbTestDao.class);
  TransactionLegacy txn=TransactionLegacy.open("SingleConnectionThread");
  Connection conn=null;
  try {
    conn=TransactionLegacy.getStandaloneConnectionWithException();
    txn.transitToUserManagedConnection(conn);
    testDao.create(1,1,"Record 1");
    Connection checkConn=TransactionLegacy.currentTxn().getConnection();
    if (checkConn != conn) {
      Assert.fail("A new db connection is acquired instead of using old one after create sql");
    }
    testDao.update(2,2,"Record 1");
    Connection checkConn2=TransactionLegacy.currentTxn().getConnection();
    if (checkConn2 != conn) {
      Assert.fail("A new db connection is acquired instead of using old one after update sql");
    }
  }
 catch (  SQLException e) {
    Assert.fail(e.getMessage());
  }
 finally {
    txn.transitToAutoManagedConnection(TransactionLegacy.CLOUD_DB);
    txn.close();
    if (conn != null) {
      try {
        conn.close();
      }
 catch (      SQLException e) {
        throw new CloudRuntimeException("Problem with close db connection",e);
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-13 type-16 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testTransactionReuse(){
  DbTestDao testDao=ComponentContext.inject(DbTestDao.class);
  Connection conn=null;
  try {
    conn=TransactionLegacy.getStandaloneConnectionWithException();
  }
 catch (  SQLException ex) {
    throw new CloudRuntimeException("Problem with getting db connection",ex);
  }
  TransactionLegacy txn=null;
  for (int i=0; i < 3; i++) {
    txn=TransactionLegacy.open("HeartbeatSimulator");
    try {
      txn.transitToUserManagedConnection(conn);
      testDao.create(i,i,"Record " + i);
      Connection checkConn=TransactionLegacy.currentTxn().getConnection();
      if (checkConn != conn) {
        Assert.fail("A new db connection is acquired instead of using old one in loop " + i);
      }
    }
 catch (    SQLException e) {
      Assert.fail(e.getMessage());
    }
 finally {
      txn.transitToAutoManagedConnection(TransactionLegacy.CLOUD_DB);
      txn.close();
    }
  }
  if (conn != null) {
    try {
      conn.close();
    }
 catch (    SQLException e) {
      throw new CloudRuntimeException("Problem with close db connection",e);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cloudstack.discovery.ApiDiscoveryTest </h4><pre class="type-16 type-1 type-5 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyListSingleApi() throws Exception {
  ListResponse<ApiDiscoveryResponse> responses=(ListResponse<ApiDiscoveryResponse>)s_discoveryService.listApis(testUser,testApiName);
  if (responses != null) {
    ApiDiscoveryResponse response=responses.getResponses().get(0);
    assertTrue("No. of response items should be one",responses.getCount() == 1);
    assertEquals("Error in api name",testApiName,response.getName());
    assertEquals("Error in api description",testApiDescription,response.getDescription());
    assertEquals("Error in api since",testApiSince,response.getSince());
    assertEquals("Error in api isAsync",testApiAsync,response.getAsync());
  }
}

</code></pre>

<br>
<pre class="type-16 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test public void verifyListApis() throws Exception {
  ListResponse<ApiDiscoveryResponse> responses=(ListResponse<ApiDiscoveryResponse>)s_discoveryService.listApis(testUser,null);
  if (responses != null) {
    assertTrue("No. of response items > 1",responses.getCount().intValue() == 1);
    for (    ApiDiscoveryResponse response : responses.getResponses()) {
      assertFalse("API name is empty",response.getName().isEmpty());
      assertFalse("API description is empty",response.getDescription().isEmpty());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cloudstack.implicitplanner.ImplicitPlannerTest </h4><pre class="type-16 type-15 type-1 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkStrictModeHostWithCurrentAccountVmsFull() throws InsufficientServerCapacityException {
  @SuppressWarnings("unchecked") VirtualMachineProfileImpl vmProfile=mock(VirtualMachineProfileImpl.class);
  DataCenterDeployment plan=mock(DataCenterDeployment.class);
  ExcludeList avoids=new ExcludeList();
  initializeForTest(vmProfile,plan);
  initializeForImplicitPlannerTest(false);
  avoids.addHost(5L);
  List<Long> clusterList=planner.orderClusters(vmProfile,plan,avoids);
  assertFalse("Cluster list should not be null/empty",(clusterList == null || clusterList.isEmpty()));
  boolean foundNeededCluster=false;
  for (  Long cluster : clusterList) {
    if (cluster != 2) {
      fail("Found a cluster that shouldn't have been present, cluster id : " + cluster);
    }
 else {
      foundNeededCluster=true;
    }
  }
  assertTrue("Didn't find cluster 2 in the list. It should have been present",foundNeededCluster);
  Set<Long> hostsInAvoidList=avoids.getHostsToAvoid();
  assertFalse("Host 6 shouldn't have be in the avoid list, but it is present",hostsInAvoidList.contains(6L));
  Set<Long> hostsThatShouldBeInAvoidList=new HashSet<Long>();
  hostsThatShouldBeInAvoidList.add(5L);
  hostsThatShouldBeInAvoidList.add(7L);
  assertTrue("Hosts 5 and 7 that should have been present were not found in avoid list",hostsInAvoidList.containsAll(hostsThatShouldBeInAvoidList));
}

</code></pre>

<br>
<pre class="type-16 type-15 type-1 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkPreferredModePreferredHostAvailable() throws InsufficientServerCapacityException {
  @SuppressWarnings("unchecked") VirtualMachineProfileImpl vmProfile=mock(VirtualMachineProfileImpl.class);
  DataCenterDeployment plan=mock(DataCenterDeployment.class);
  ExcludeList avoids=new ExcludeList();
  initializeForTest(vmProfile,plan);
  initializeForImplicitPlannerTest(true);
  avoids.addHost(5L);
  avoids.addHost(6L);
  List<Long> clusterList=planner.orderClusters(vmProfile,plan,avoids);
  assertFalse("Cluster list should not be null/empty",(clusterList == null || clusterList.isEmpty()));
  boolean foundNeededCluster=false;
  for (  Long cluster : clusterList) {
    if (cluster != 3) {
      fail("Found a cluster that shouldn't have been present, cluster id : " + cluster);
    }
 else {
      foundNeededCluster=true;
    }
  }
  assertTrue("Didn't find cluster 3 in the list. It should have been present",foundNeededCluster);
  Set<Long> hostsInAvoidList=avoids.getHostsToAvoid();
  assertFalse("Host 7 shouldn't have be in the avoid list, but it is present",hostsInAvoidList.contains(7L));
  Set<Long> hostsThatShouldBeInAvoidList=new HashSet<Long>();
  hostsThatShouldBeInAvoidList.add(5L);
  hostsThatShouldBeInAvoidList.add(6L);
  assertTrue("Hosts 5 and 6 that should have been present were not found in avoid list",hostsInAvoidList.containsAll(hostsThatShouldBeInAvoidList));
}

</code></pre>

<br>
<pre class="type-16 type-15 type-1 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkStrictModeWithCurrentAccountVmsPresent() throws InsufficientServerCapacityException {
  VirtualMachineProfileImpl vmProfile=mock(VirtualMachineProfileImpl.class);
  DataCenterDeployment plan=mock(DataCenterDeployment.class);
  ExcludeList avoids=new ExcludeList();
  initializeForTest(vmProfile,plan);
  initializeForImplicitPlannerTest(false);
  List<Long> clusterList=planner.orderClusters(vmProfile,plan,avoids);
  assertFalse("Cluster list should not be null/empty",(clusterList == null || clusterList.isEmpty()));
  boolean foundNeededCluster=false;
  for (  Long cluster : clusterList) {
    if (cluster != 1) {
      fail("Found a cluster that shouldn't have been present, cluster id : " + cluster);
    }
 else {
      foundNeededCluster=true;
    }
  }
  assertTrue("Didn't find cluster 1 in the list. It should have been present",foundNeededCluster);
  Set<Long> hostsInAvoidList=avoids.getHostsToAvoid();
  assertFalse("Host 5 shouldn't have be in the avoid list, but it is present",hostsInAvoidList.contains(5L));
  Set<Long> hostsThatShouldBeInAvoidList=new HashSet<Long>();
  hostsThatShouldBeInAvoidList.add(6L);
  hostsThatShouldBeInAvoidList.add(7L);
  assertTrue("Hosts 6 and 7 that should have been present were not found in avoid list",hostsInAvoidList.containsAll(hostsThatShouldBeInAvoidList));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cloudstack.network.contrail.management.NetworkProviderTest </h4><pre class="type-16 type-15 type-1 type-5 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dbSyncTest(){
  Network network=lookupTestNetwork("test-db-only-net");
  if (network == null) {
    network=createTestNetwork("test-db-only-net");
  }
  UserVm vm=_server.createVM("test-db-only-vm",network);
  try {
    createFloatingIp(network,vm);
  }
 catch (  Exception e) {
    fail("unable to create floating ip");
  }
  ((ApiConnectorMock)_api).initConfig();
  _contrailMgr.getDatabase().initDb();
  net.juniper.contrail.api.types.Domain domain=new net.juniper.contrail.api.types.Domain();
  domain.setName("test-vnc-only-domain--1");
  domain.setUuid(UUID.randomUUID().toString());
  try {
    assertTrue(_api.create(domain));
  }
 catch (  IOException ex) {
    fail(ex.getMessage());
  }
  Project project=new Project();
  project.setName("test-vnc-only-project-1");
  project.setUuid(UUID.randomUUID().toString());
  project.setParent(domain);
  try {
    assertTrue(_api.create(project));
  }
 catch (  IOException ex) {
    fail(ex.getMessage());
  }
  VirtualNetwork net=new VirtualNetwork();
  net.setName("test-vnc-only-net-1");
  net.setUuid(UUID.randomUUID().toString());
  net.setParent(project);
  NetworkIpam ipam=null;
  try {
    String ipam_id=_api.findByName(NetworkIpam.class,null,"default-network-ipam");
    assertNotNull(ipam_id);
    ipam=(NetworkIpam)_api.findById(NetworkIpam.class,ipam_id);
    assertNotNull(ipam);
  }
 catch (  IOException ex) {
    fail(ex.getMessage());
  }
  VnSubnetsType subnet=new VnSubnetsType();
  subnet.addIpamSubnets(new SubnetType("10.0.2.0",24),"10.0.2.254");
  net.addNetworkIpam(ipam,subnet);
  VirtualMachine vncVm=new VirtualMachine();
  vncVm.setName("test-vnc-only-vm-1");
  try {
    assertTrue(_api.create(vncVm));
  }
 catch (  IOException ex) {
    fail(ex.getMessage());
  }
  VirtualMachineInterface vmi=new VirtualMachineInterface();
  vmi.setParent(vncVm);
  vmi.setName("test-vnc-only-vmi-1");
  try {
    assertTrue(_api.create(vmi));
    assertTrue(_api.create(net));
  }
 catch (  IOException ex) {
    fail(ex.getMessage());
  }
  InstanceIp ip_obj=new InstanceIp();
  ip_obj.setName(net.getName() + ":0");
  ip_obj.setVirtualNetwork(net);
  ip_obj.setVirtualMachineInterface(vmi);
  try {
    assertTrue(_api.create(ip_obj));
    assertTrue(_api.read(ip_obj));
    assertNotNull(ip_obj.getAddress());
  }
 catch (  IOException ex) {
    fail(ex.getMessage());
  }
  if (_dbSync.syncAll(DBSyncGeneric.SYNC_MODE_UPDATE) == ServerDBSync.SYNC_STATE_OUT_OF_SYNC) {
    s_logger.info("# Cloudstack DB & VNC are out of sync - resync done");
  }
  if (_dbSync.syncAll(DBSyncGeneric.SYNC_MODE_CHECK) == ServerDBSync.SYNC_STATE_OUT_OF_SYNC) {
    s_logger.info("# Cloudstack DB & VNC are still out of sync");
    fail("DB Sync failed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cloudstack.storage.allocator.StorageAllocatorTest </h4><pre class="type-16 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testClusterAllocatorWithWrongTag(){
  try {
    createDb();
    StoragePoolDetailVO detailVO=new StoragePoolDetailVO(this.storagePoolId,"high","true",true);
    poolDetailsDao.persist(detailVO);
    DiskOfferingVO diskOff=this.diskOfferingDao.findById(diskOffering.getId());
    List<String> tags=new ArrayList<String>();
    tags.add("low");
    diskOff.setTagsArray(tags);
    diskOfferingDao.update(diskOff.getId(),diskOff);
    DiskProfile profile=new DiskProfile(volume,diskOff,HypervisorType.XenServer);
    VirtualMachineProfile vmProfile=Mockito.mock(VirtualMachineProfile.class);
    Mockito.when(storageMgr.storagePoolHasEnoughSpace(Matchers.anyListOf(Volume.class),Matchers.any(StoragePool.class))).thenReturn(true);
    DeploymentPlan plan=new DataCenterDeployment(dcId,podId,clusterId,null,null,null);
    int foundAcct=0;
    for (    StoragePoolAllocator allocator : allocators) {
      List<StoragePool> pools=allocator.allocateToPool(profile,vmProfile,plan,new ExcludeList(),1);
      if (!pools.isEmpty()) {
        foundAcct++;
      }
    }
    if (foundAcct != 0) {
      Assert.fail();
    }
  }
 catch (  Exception e) {
    cleanDb();
    Assert.fail();
  }
}

</code></pre>

<br>
<pre class="type-16 type-15 type-1 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZoneWideStorageAllocator(){
  try {
    createDb();
    StoragePoolVO pool=storagePoolDao.findById(storagePoolId);
    pool.setHypervisor(HypervisorType.KVM);
    pool.setScope(ScopeType.ZONE);
    pool.setClusterId(null);
    pool.setPodId(null);
    storagePoolDao.update(pool.getId(),pool);
    DiskProfile profile=new DiskProfile(volume,diskOffering,HypervisorType.KVM);
    VirtualMachineProfile vmProfile=Mockito.mock(VirtualMachineProfile.class);
    Mockito.when(vmProfile.getHypervisorType()).thenReturn(HypervisorType.KVM);
    Mockito.when(storageMgr.storagePoolHasEnoughSpace(Matchers.anyListOf(Volume.class),Matchers.any(StoragePool.class))).thenReturn(true);
    Mockito.when(storageMgr.storagePoolHasEnoughIops(Matchers.anyListOf(Volume.class),Matchers.any(StoragePool.class))).thenReturn(true);
    DeploymentPlan plan=new DataCenterDeployment(dcId,podId,clusterId,null,null,null);
    int foundAcct=0;
    for (    StoragePoolAllocator allocator : allocators) {
      List<StoragePool> pools=allocator.allocateToPool(profile,vmProfile,plan,new ExcludeList(),1);
      if (!pools.isEmpty()) {
        Assert.assertEquals(pools.get(0).getId(),storage.getId());
        foundAcct++;
      }
    }
    if (foundAcct > 1 || foundAcct == 0) {
      Assert.fail();
    }
  }
 catch (  Exception e) {
    cleanDb();
    Assert.fail();
  }
}

</code></pre>

<br>
<pre class="type-16 type-15 type-1 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClusterAllocatorMultiplePools(){
  Long newStorageId=null;
  try {
    createDb();
    DataStoreProvider provider=providerMgr.getDataStoreProvider(DataStoreProvider.DEFAULT_PRIMARY);
    storage=new StoragePoolVO();
    storage.setDataCenterId(dcId);
    storage.setPodId(podId);
    storage.setPoolType(StoragePoolType.NetworkFilesystem);
    storage.setClusterId(clusterId);
    storage.setStatus(StoragePoolStatus.Up);
    storage.setScope(ScopeType.CLUSTER);
    storage.setUsedBytes(1000);
    storage.setCapacityBytes(20000);
    storage.setHostAddress(UUID.randomUUID().toString());
    storage.setPath(UUID.randomUUID().toString());
    storage.setStorageProviderName(provider.getName());
    StoragePoolVO newStorage=storagePoolDao.persist(storage);
    newStorageId=newStorage.getId();
    DiskProfile profile=new DiskProfile(volume,diskOffering,HypervisorType.XenServer);
    VirtualMachineProfile vmProfile=Mockito.mock(VirtualMachineProfile.class);
    Mockito.when(storageMgr.storagePoolHasEnoughSpace(Matchers.anyListOf(Volume.class),Matchers.any(StoragePool.class))).thenReturn(true);
    DeploymentPlan plan=new DataCenterDeployment(dcId,podId,clusterId,null,null,null);
    int foundAcct=0;
    for (    StoragePoolAllocator allocator : allocators) {
      List<StoragePool> pools=allocator.allocateToPool(profile,vmProfile,plan,new ExcludeList(),1);
      if (!pools.isEmpty()) {
        Assert.assertEquals(pools.size(),1);
        foundAcct++;
      }
    }
    if (foundAcct > 1 || foundAcct == 0) {
      Assert.fail();
    }
  }
 catch (  Exception e) {
    cleanDb();
    if (newStorageId != null) {
      storagePoolDao.remove(newStorageId);
    }
    Assert.fail();
  }
}

</code></pre>

<br>
<pre class="type-16 type-15 type-1 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCLOUDSTACK3481(){
  try {
    createDb();
    StoragePoolVO pool=storagePoolDao.findById(storagePoolId);
    pool.setHypervisor(HypervisorType.KVM);
    pool.setScope(ScopeType.ZONE);
    pool.setClusterId(null);
    pool.setPodId(null);
    storagePoolDao.update(pool.getId(),pool);
    DiskProfile profile=new DiskProfile(volume,diskOffering,HypervisorType.KVM);
    VirtualMachineProfile vmProfile=Mockito.mock(VirtualMachineProfile.class);
    Account account=Mockito.mock(Account.class);
    Mockito.when(account.getAccountId()).thenReturn(1L);
    Mockito.when(vmProfile.getHypervisorType()).thenReturn(HypervisorType.KVM);
    Mockito.when(vmProfile.getOwner()).thenReturn(account);
    Mockito.when(storageMgr.storagePoolHasEnoughSpace(Matchers.anyListOf(Volume.class),Matchers.any(StoragePool.class))).thenReturn(true);
    Mockito.when(storageMgr.storagePoolHasEnoughIops(Matchers.anyListOf(Volume.class),Matchers.any(StoragePool.class))).thenReturn(true);
    DeploymentPlan plan=new DataCenterDeployment(dcId,podId,clusterId,null,null,null);
    int foundAcct=0;
    for (    StoragePoolAllocator allocator : allocators) {
      List<StoragePool> pools=allocator.allocateToPool(profile,vmProfile,plan,new ExcludeList(),1);
      if (!pools.isEmpty()) {
        Assert.assertEquals(pools.get(0).getId(),storage.getId());
        foundAcct++;
      }
    }
    if (foundAcct > 1 || foundAcct == 0) {
      Assert.fail();
    }
  }
 catch (  Exception e) {
    cleanDb();
    Assert.fail();
  }
}

</code></pre>

<br>
<pre class="type-16 type-15 type-1 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClusterAllocatorWithTags(){
  try {
    createDb();
    StoragePoolDetailVO detailVO=new StoragePoolDetailVO(this.storagePoolId,"high","true",true);
    poolDetailsDao.persist(detailVO);
    DiskOfferingVO diskOff=this.diskOfferingDao.findById(diskOffering.getId());
    List<String> tags=new ArrayList<String>();
    tags.add("high");
    diskOff.setTagsArray(tags);
    diskOfferingDao.update(diskOff.getId(),diskOff);
    DiskProfile profile=new DiskProfile(volume,diskOff,HypervisorType.XenServer);
    VirtualMachineProfile vmProfile=Mockito.mock(VirtualMachineProfile.class);
    Mockito.when(storageMgr.storagePoolHasEnoughSpace(Matchers.anyListOf(Volume.class),Matchers.any(StoragePool.class))).thenReturn(true);
    DeploymentPlan plan=new DataCenterDeployment(dcId,podId,clusterId,null,null,null);
    int foundAcct=0;
    for (    StoragePoolAllocator allocator : allocators) {
      List<StoragePool> pools=allocator.allocateToPool(profile,vmProfile,plan,new ExcludeList(),1);
      if (!pools.isEmpty()) {
        Assert.assertEquals(pools.get(0).getId(),storage.getId());
        foundAcct++;
      }
    }
    if (foundAcct > 1 || foundAcct == 0) {
      Assert.fail();
    }
  }
 catch (  Exception e) {
    cleanDb();
    Assert.fail();
  }
}

</code></pre>

<br>
<pre class="type-16 type-15 type-1 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClusterAllocator(){
  try {
    createDb();
    DiskProfile profile=new DiskProfile(volume,diskOffering,HypervisorType.XenServer);
    VirtualMachineProfile vmProfile=Mockito.mock(VirtualMachineProfile.class);
    Mockito.when(storageMgr.storagePoolHasEnoughSpace(Matchers.anyListOf(Volume.class),Matchers.any(StoragePool.class))).thenReturn(true);
    DeploymentPlan plan=new DataCenterDeployment(dcId,podId,clusterId,null,null,null);
    int foundAcct=0;
    for (    StoragePoolAllocator allocator : allocators) {
      List<StoragePool> pools=allocator.allocateToPool(profile,vmProfile,plan,new ExcludeList(),1);
      if (!pools.isEmpty()) {
        Assert.assertEquals(pools.get(0).getId(),storage.getId());
        foundAcct++;
      }
    }
    if (foundAcct > 1 || foundAcct == 0) {
      Assert.fail();
    }
  }
 catch (  Exception e) {
    cleanDb();
    Assert.fail();
  }
}

</code></pre>

<br>
<pre class="type-16 type-15 type-1 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPoolStateIsNotUp(){
  try {
    createDb();
    StoragePoolVO pool=storagePoolDao.findById(storagePoolId);
    pool.setScope(ScopeType.ZONE);
    pool.setStatus(StoragePoolStatus.Maintenance);
    storagePoolDao.update(pool.getId(),pool);
    DiskProfile profile=new DiskProfile(volume,diskOffering,HypervisorType.XenServer);
    VirtualMachineProfile vmProfile=Mockito.mock(VirtualMachineProfile.class);
    Mockito.when(storageMgr.storagePoolHasEnoughSpace(Matchers.anyListOf(Volume.class),Matchers.any(StoragePool.class))).thenReturn(true);
    DeploymentPlan plan=new DataCenterDeployment(dcId,podId,clusterId,null,null,null);
    int foundAcct=0;
    for (    StoragePoolAllocator allocator : allocators) {
      List<StoragePool> pools=allocator.allocateToPool(profile,vmProfile,plan,new ExcludeList(),1);
      if (!pools.isEmpty()) {
        Assert.assertEquals(pools.get(0).getId(),storage.getId());
        foundAcct++;
      }
    }
    if (foundAcct == 1) {
      Assert.fail();
    }
  }
 catch (  Exception e) {
    cleanDb();
    Assert.fail();
  }
}

</code></pre>

<br>
<pre class="type-16 type-15 type-1 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLocalStorageAllocator(){
  try {
    createDb();
    StoragePoolVO pool=storagePoolDao.findById(storagePoolId);
    pool.setScope(ScopeType.HOST);
    storagePoolDao.update(pool.getId(),pool);
    DiskOfferingVO diskOff=diskOfferingDao.findById(diskOfferingId);
    diskOff.setUseLocalStorage(true);
    diskOfferingDao.update(diskOfferingId,diskOff);
    DiskProfile profile=new DiskProfile(volume,diskOff,HypervisorType.XenServer);
    VirtualMachineProfile vmProfile=Mockito.mock(VirtualMachineProfile.class);
    Mockito.when(storageMgr.storagePoolHasEnoughSpace(Matchers.anyListOf(Volume.class),Matchers.any(StoragePool.class))).thenReturn(true);
    DeploymentPlan plan=new DataCenterDeployment(dcId,podId,clusterId,null,null,null);
    int foundAcct=0;
    for (    StoragePoolAllocator allocator : allocators) {
      List<StoragePool> pools=allocator.allocateToPool(profile,vmProfile,plan,new ExcludeList(),1);
      if (!pools.isEmpty()) {
        Assert.assertEquals(pools.get(0).getId(),storage.getId());
        foundAcct++;
      }
    }
    if (foundAcct > 1 || foundAcct == 0) {
      Assert.fail();
    }
  }
 catch (  Exception e) {
    cleanDb();
    Assert.fail();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cloudstack.storage.test.SnapshotTest </h4><pre class="type-8 type-16 type-1 type-5 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createSnapshot() throws InterruptedException, ExecutionException {
  VolumeInfo vol=createCopyBaseImage();
  SnapshotVO snapshotVO=createSnapshotInDb(vol);
  SnapshotInfo snapshot=this.snapshotFactory.getSnapshot(snapshotVO.getId(),vol.getDataStore());
  SnapshotInfo newSnapshot=null;
  SnapshotStrategy snapshotStrategy=storageStrategyFactory.getSnapshotStrategy(snapshot,SnapshotOperation.TAKE);
  if (snapshotStrategy != null) {
    newSnapshot=snapshotStrategy.takeSnapshot(snapshot);
  }
  AssertJUnit.assertNotNull(newSnapshot);
  LocalHostEndpoint ep=new MockLocalHostEndPoint();
  ep.setResource(new MockLocalNfsSecondaryStorageResource());
  Mockito.when(epSelector.select(Matchers.any(DataStore.class))).thenReturn(ep);
  try {
    for (    SnapshotStrategy strategy : this.snapshotStrategies) {
      if (strategy.canHandle(snapshot,SnapshotOperation.DELETE) != StrategyPriority.CANT_HANDLE) {
        boolean res=strategy.deleteSnapshot(newSnapshot.getId());
        Assert.assertTrue(res);
      }
    }
  }
  finally {
    Mockito.when(epSelector.select(Matchers.any(DataStore.class))).thenReturn(remoteEp);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cloudstack.storage.volume.test.ConfiguratorTest </h4><pre class="type-16 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
"></span><br>
@Test public void testProvider(){
  for (  PrimaryDataStoreProvider provider : providers) {
    if (provider.getName().startsWith("default")) {
      assertTrue(true);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.cloudstack.utils.qemu.QemuImgTest </h4><pre class="type-16 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testCreateWithBackingFile() throws QemuImgException {
  String firstFileName="/tmp/" + UUID.randomUUID() + ".qcow2";
  String secondFileName="/tmp/" + UUID.randomUUID() + ".qcow2";
  QemuImgFile firstFile=new QemuImgFile(firstFileName,20480,PhysicalDiskFormat.QCOW2);
  QemuImgFile secondFile=new QemuImgFile(secondFileName,PhysicalDiskFormat.QCOW2);
  QemuImg qemu=new QemuImg(0);
  qemu.create(firstFile);
  qemu.create(secondFile,firstFile);
  Map<String,String> info=qemu.info(secondFile);
  if (info == null) {
    fail("We didn't get any information back from qemu-img");
  }
  String backingFile=info.get(new String("backing_file"));
  if (backingFile == null) {
    fail("The second file does not have a property backing_file! Create failed?");
  }
}

</code></pre>

<br>
<pre class="type-8 type-16 type-15 type-1 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateAndResize() throws QemuImgException {
  String filename="/tmp/" + UUID.randomUUID() + ".qcow2";
  long startSize=20480;
  long endSize=40960;
  QemuImgFile file=new QemuImgFile(filename,startSize,PhysicalDiskFormat.QCOW2);
  try {
    QemuImg qemu=new QemuImg(0);
    qemu.create(file);
    qemu.resize(file,endSize);
    Map<String,String> info=qemu.info(file);
    if (info == null) {
      fail("We didn't get any information back from qemu-img");
    }
    Long infoSize=Long.parseLong(info.get(new String("virtual_size")));
    assertEquals(Long.valueOf(endSize),Long.valueOf(infoSize));
  }
 catch (  QemuImgException e) {
    fail(e.getMessage());
  }
  File f=new File(filename);
  f.delete();
}

</code></pre>

<br>
<pre class="type-8 type-16 type-15 type-1 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateAndInfo() throws QemuImgException {
  String filename="/tmp/" + UUID.randomUUID() + ".qcow2";
  long size=10995116277760l;
  QemuImgFile file=new QemuImgFile(filename,size,PhysicalDiskFormat.QCOW2);
  QemuImg qemu=new QemuImg(0);
  qemu.create(file);
  Map<String,String> info=qemu.info(file);
  if (info == null) {
    fail("We didn't get any information back from qemu-img");
  }
  Long infoSize=Long.parseLong(info.get(new String("virtual_size")));
  assertEquals(Long.valueOf(size),Long.valueOf(infoSize));
  String infoPath=info.get(new String("image"));
  assertEquals(filename,infoPath);
  File f=new File(filename);
  f.delete();
}

</code></pre>

<br>
<pre class="type-8 type-16 type-15 type-1 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateAndResizeDeltaPositive() throws QemuImgException {
  String filename="/tmp/" + UUID.randomUUID() + ".qcow2";
  long startSize=20480;
  long increment=20480;
  QemuImgFile file=new QemuImgFile(filename,startSize,PhysicalDiskFormat.RAW);
  try {
    QemuImg qemu=new QemuImg(0);
    qemu.create(file);
    qemu.resize(file,increment,true);
    Map<String,String> info=qemu.info(file);
    if (info == null) {
      fail("We didn't get any information back from qemu-img");
    }
    Long infoSize=Long.parseLong(info.get(new String("virtual_size")));
    assertEquals(Long.valueOf(startSize + increment),Long.valueOf(infoSize));
  }
 catch (  QemuImgException e) {
    fail(e.getMessage());
  }
  File f=new File(filename);
  f.delete();
}

</code></pre>

<br>
<pre class="type-8 type-16 type-15 type-1 type-2 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateAndResizeDeltaNegative() throws QemuImgException {
  String filename="/tmp/" + UUID.randomUUID() + ".qcow2";
  long startSize=81920;
  long increment=-40960;
  QemuImgFile file=new QemuImgFile(filename,startSize,PhysicalDiskFormat.RAW);
  try {
    QemuImg qemu=new QemuImg(0);
    qemu.create(file);
    qemu.resize(file,increment,true);
    Map<String,String> info=qemu.info(file);
    if (info == null) {
      fail("We didn't get any information back from qemu-img");
    }
    Long infoSize=Long.parseLong(info.get(new String("virtual_size")));
    assertEquals(Long.valueOf(startSize + increment),Long.valueOf(infoSize));
  }
 catch (  QemuImgException e) {
    fail(e.getMessage());
  }
  File f=new File(filename);
  f.delete();
}

</code></pre>

<br>
<pre class="type-16 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testConvertBasic() throws QemuImgException {
  long srcSize=20480;
  String srcFileName="/tmp/" + UUID.randomUUID() + ".qcow2";
  String destFileName="/tmp/" + UUID.randomUUID() + ".qcow2";
  QemuImgFile srcFile=new QemuImgFile(srcFileName,srcSize);
  QemuImgFile destFile=new QemuImgFile(destFileName);
  QemuImg qemu=new QemuImg(0);
  qemu.create(srcFile);
  qemu.convert(srcFile,destFile);
  Map<String,String> info=qemu.info(destFile);
  if (info == null) {
    fail("We didn't get any information back from qemu-img");
  }
  File sf=new File(srcFileName);
  sf.delete();
  File df=new File(destFileName);
  df.delete();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
