<h3 style="margin:0px">Class: org.apache.james.mime4j.message.MultipartBuilderTest (3 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-6 type-2 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasis() throws Exception {
  MultipartBuilder builder=MultipartBuilder.create("stuff");
  builder.setPreamble("Hello");
  builder.setEpilogue("Bye");
  Assert.assertEquals("stuff",builder.getSubType());
  Assert.assertEquals("Hello",builder.getPreamble());
  Assert.assertEquals("Bye",builder.getEpilogue());
  TextBody body1=BasicBodyFactory.INSTANCE.textBody("test");
  final BodyPart bodyPart1=new BodyPart();
  bodyPart1.setBody(body1);
  BinaryBody body2=BasicBodyFactory.INSTANCE.binaryBody(new byte[]{1,2,3});
  final BodyPart bodyPart2=new BodyPart();
  bodyPart2.setBody(body2);
  builder.addBodyPart(bodyPart1);
  builder.addBodyPart(bodyPart2,0);
  Assert.assertEquals(2,builder.getCount());
  Assert.assertEquals(Arrays.asList(bodyPart2,bodyPart1),builder.getBodyParts());
  TextBody body3=BasicBodyFactory.INSTANCE.textBody("test");
  final BodyPart bodyPart3=new BodyPart();
  bodyPart3.setBody(body3);
  try {
    builder.addBodyPart(bodyPart3,5);
    Assert.fail("IndexOutOfBoundsException expected");
  }
 catch (  IndexOutOfBoundsException expected) {
  }
  try {
    builder.replaceBodyPart(bodyPart3,5);
    Assert.fail("IndexOutOfBoundsException expected");
  }
 catch (  IndexOutOfBoundsException expected) {
  }
  builder.replaceBodyPart(bodyPart3,1);
  builder.removeBodyPart(0);
  Assert.assertEquals(1,builder.getCount());
  Assert.assertEquals(Arrays.asList(bodyPart3),builder.getBodyParts());
}

</code></pre>

<pre class="type-9 type-2 type-1 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCopy() throws Exception {
  MultipartBuilder builder1=MultipartBuilder.create("stuff");
  builder1.setPreamble("Hello");
  builder1.setEpilogue("Bye");
  builder1.addTextPart("stuff1",Charsets.UTF_8);
  builder1.addBinaryPart(new byte[]{1,2,3},"some/stuff");
  Multipart multipart=builder1.build();
  MultipartBuilder builder2=MultipartBuilder.createCopy(multipart);
  Assert.assertEquals("stuff",builder2.getSubType());
  Assert.assertEquals("Hello",builder2.getPreamble());
  Assert.assertEquals("Bye",builder2.getEpilogue());
  Assert.assertEquals(2,builder2.getCount());
  List<Entity> bodyParts=builder2.getBodyParts();
  Assert.assertNotNull(bodyParts);
  Assert.assertEquals(2,bodyParts.size());
  Entity entity1=bodyParts.get(0);
  Assert.assertNotNull(entity1);
  Header header1=entity1.getHeader();
  Assert.assertNotNull(header1);
  List<Field> fields1=header1.getFields();
  Assert.assertNotNull(fields1);
  Assert.assertEquals(2,fields1.size());
  ContentTypeField ct1=header1.getField("Content-Type",ContentTypeField.class);
  Assert.assertEquals("text/plain",ct1.getMimeType());
  Assert.assertEquals("UTF-8",ct1.getCharset());
  ContentTransferEncodingField te1=header1.getField("Content-Transfer-Encoding",ContentTransferEncodingField.class);
  Assert.assertEquals("quoted-printable",te1.getEncoding());
  Entity entity2=bodyParts.get(1);
  Assert.assertNotNull(entity2);
  Header header2=entity2.getHeader();
  Assert.assertNotNull(header2);
  List<Field> fields2=header2.getFields();
  Assert.assertNotNull(fields2);
  Assert.assertEquals(2,fields2.size());
  ContentTypeField ct2=header2.getField("Content-Type",ContentTypeField.class);
  Assert.assertEquals("some/stuff",ct2.getMimeType());
  Assert.assertEquals(null,ct2.getCharset());
  ContentTransferEncodingField te2=entity2.getHeader().getField("Content-Transfer-Encoding",ContentTransferEncodingField.class);
  Assert.assertEquals("base64",te2.getEncoding());
}

</code></pre>

<pre class="type-9 type-2 type-1 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddCustomPart() throws Exception {
  MultipartBuilder builder=MultipartBuilder.create();
  BodyFactory bodyFactory=Mockito.spy(new BasicBodyFactory());
  builder.use(bodyFactory);
  builder.addTextPart("stuff1",Charsets.UTF_8);
  builder.addTextPart("stuff2",null);
  builder.addBinaryPart(new byte[]{1,2,3},"some/stuff");
  builder.addBinaryPart(new byte[]{1,2,3},null);
  builder.addTextPart("stuff3",Charsets.US_ASCII);
  Assert.assertEquals(5,builder.getCount());
  List<Entity> bodyParts=builder.getBodyParts();
  Assert.assertNotNull(bodyParts);
  Assert.assertEquals(5,bodyParts.size());
  Entity entity1=bodyParts.get(0);
  ContentTypeField ct1=entity1.getHeader().getField("Content-Type",ContentTypeField.class);
  Assert.assertEquals("text/plain",ct1.getMimeType());
  Assert.assertEquals("UTF-8",ct1.getCharset());
  ContentTransferEncodingField te1=entity1.getHeader().getField("Content-Transfer-Encoding",ContentTransferEncodingField.class);
  Assert.assertEquals("quoted-printable",te1.getEncoding());
  Entity entity2=bodyParts.get(1);
  ContentTypeField ct2=entity2.getHeader().getField("Content-Type",ContentTypeField.class);
  Assert.assertEquals("text/plain",ct2.getMimeType());
  Assert.assertEquals("ISO-8859-1",ct2.getCharset());
  ContentTransferEncodingField te2=entity2.getHeader().getField("Content-Transfer-Encoding",ContentTransferEncodingField.class);
  Assert.assertEquals("quoted-printable",te2.getEncoding());
  Entity entity3=bodyParts.get(2);
  ContentTypeField ct3=entity3.getHeader().getField("Content-Type",ContentTypeField.class);
  Assert.assertEquals("some/stuff",ct3.getMimeType());
  Assert.assertEquals(null,ct3.getCharset());
  ContentTransferEncodingField te3=entity3.getHeader().getField("Content-Transfer-Encoding",ContentTransferEncodingField.class);
  Assert.assertEquals("base64",te3.getEncoding());
  Entity entity4=bodyParts.get(3);
  ContentTypeField ct4=entity4.getHeader().getField("Content-Type",ContentTypeField.class);
  Assert.assertEquals("application/octet-stream",ct4.getMimeType());
  Assert.assertEquals(null,ct4.getCharset());
  ContentTransferEncodingField te4=entity4.getHeader().getField("Content-Transfer-Encoding",ContentTransferEncodingField.class);
  Assert.assertEquals("base64",te4.getEncoding());
  Entity entity5=bodyParts.get(4);
  ContentTypeField ct5=entity5.getHeader().getField("Content-Type",ContentTypeField.class);
  Assert.assertEquals("text/plain",ct5.getMimeType());
  Assert.assertEquals("US-ASCII",ct5.getCharset());
  ContentTransferEncodingField te5=entity5.getHeader().getField("Content-Transfer-Encoding",ContentTransferEncodingField.class);
  Assert.assertEquals("7bit",te5.getEncoding());
  Mockito.verify(bodyFactory,Mockito.times(1)).textBody(Mockito.<InputStream>any(),Mockito.eq("UTF-8"));
  Mockito.verify(bodyFactory,Mockito.times(1)).textBody(Mockito.<InputStream>any(),Mockito.eq("ISO-8859-1"));
  Mockito.verify(bodyFactory,Mockito.times(1)).textBody(Mockito.<InputStream>any(),Mockito.eq("US-ASCII"));
  Mockito.verify(bodyFactory,Mockito.times(2)).binaryBody(Mockito.<InputStream>any());
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
