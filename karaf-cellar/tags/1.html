<h3><span class=" glyphicon glyphicon-tag"/>&nbspEqualityVerifier</h3><kbd>Verifies whether objects/variable are equal to an expected value </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.karaf.cellar.core.CellarSupportTest </h4><pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIsAllowed(){
  CellarSupport support=new CellarSupport();
  support.setConfigurationAdmin(configurationAdmin);
  Boolean expectedResult=false;
  Boolean result=support.isAllowed(defaultGroup,"config","org.apache.karaf.shell",EventType.INBOUND);
  assertEquals("Shell should not be allowed",expectedResult,result);
  expectedResult=true;
  result=support.isAllowed(defaultGroup,"config","org.apache.karaf.cellar.group",EventType.INBOUND);
  assertEquals("Group config should be allowed",expectedResult,result);
  expectedResult=false;
  result=support.isAllowed(defaultGroup,"config","org.apache.karaf.cellar.node",EventType.INBOUND);
  assertEquals("Node config should be allowed",expectedResult,result);
  expectedResult=false;
  result=support.isAllowed(defaultGroup,"config","org.apache.karaf.cellar.instance",EventType.INBOUND);
  assertEquals("Instance config should be allowed",expectedResult,result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.cellar.core.utils.CellarUtilsTest </h4><pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMergableRegex(){
  Pattern p=Pattern.compile(CellarUtils.MERGABLE_REGEX);
  Assert.assertEquals(true,p.matcher(String.format(CellarUtils.MERGABLE,"")).matches());
  Assert.assertEquals(true,p.matcher(String.format(CellarUtils.MERGABLE,"item1")).matches());
  Assert.assertEquals(true,p.matcher(String.format(CellarUtils.MERGABLE,"item1,item2")).matches());
  Assert.assertEquals(true,p.matcher(String.format(CellarUtils.MERGABLE,"item1, item2")).matches());
}

</code></pre>

<br>
<pre class="type-6 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringFromSet(){
  Set<String> itemSet=new LinkedHashSet<String>();
  String items="item1,item2";
  itemSet.add("item1");
  itemSet.add("item2");
  String result=CellarUtils.createStringFromSet(itemSet,false);
  Assert.assertEquals(items,result);
  result=CellarUtils.createStringFromSet(itemSet,true);
  Assert.assertEquals(String.format(CellarUtils.MERGABLE,items),result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.cellar.dosgi.ExportServiceListenerTest </h4><pre class="type-5 type-2 type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetServiceInterfaces() throws Exception {
  System.out.println("Test Service interfaces with null service");
  Set<String> expectedResult=new LinkedHashSet<String>();
  Set<String> result=listener.getServiceInterfaces(null,null);
  Assert.assertEquals(expectedResult,result);
  result=listener.getServiceInterfaces(null,new String[]{"*"});
  Assert.assertEquals(expectedResult,result);
  System.out.println("Test Service interfaces with ArrayList and wildcard services");
  result=listener.getServiceInterfaces(new ArrayList(),new String[]{"*"});
  Assert.assertTrue(result.contains("java.util.List"));
  System.out.println("Test Service interfaces with ArrayList and List/Serializable services");
  result=listener.getServiceInterfaces(new ArrayList(),new String[]{"java.util.List","java.io.Serializable"});
  Assert.assertTrue(result.contains("java.util.List"));
  Assert.assertTrue(result.contains("java.io.Serializable"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.cellar.hazelcast.factory.HazelcastServiceFactoryTest </h4><pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultInstance() throws InterruptedException {
  System.setProperty("karaf.etc","src/test/resources/etc");
  System.setProperty("javax.xml.transform.TransformerFactory","com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl");
  HazelcastServiceFactory factory=new HazelcastServiceFactory();
  factory.setConfigurationManager(new HazelcastConfigurationManager());
  factory.init();
  factory.getInstance();
  HazelcastInstance factoryInstance=factory.getInstance();
  HazelcastInstance defaultInstance=Hazelcast.newHazelcastInstance(null);
  Assert.assertEquals(true,factoryInstance.getCluster().getMembers().size() >= 2);
  factoryInstance.shutdown();
  defaultInstance.shutdown();
}

</code></pre>

<br>
<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultInstanceWithSaxon() throws InterruptedException {
  System.setProperty("karaf.etc","src/test/resources/etc");
  System.setProperty("javax.xml.transform.TransformerFactory","net.sf.saxon.TransformerFactoryImpl");
  HazelcastServiceFactory factory=new HazelcastServiceFactory();
  factory.setConfigurationManager(new HazelcastConfigurationManager());
  factory.init();
  factory.getInstance();
  HazelcastInstance factoryInstance=factory.getInstance();
  HazelcastInstance defaultInstance=Hazelcast.newHazelcastInstance(null);
  Assert.assertEquals(true,factoryInstance.getCluster().getMembers().size() >= 2);
  factoryInstance.shutdown();
  defaultInstance.shutdown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.cellar.itests.CellarGroupsTest </h4><pre class="type-5 type-2 type-1 type-9 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Is not executed with the test suite
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @Ignore public void testGroupsWithChildNodes() throws InterruptedException {
  installCellar();
  createCellarChild("child1");
  Thread.sleep(DEFAULT_TIMEOUT);
  ClusterManager clusterManager=getOsgiService(ClusterManager.class);
  assertNotNull(clusterManager);
  System.err.println(executeCommand("cluster:node-list"));
  Node localNode=clusterManager.getNode();
  Set<Node> nodes=clusterManager.listNodes();
  assertTrue("There should be at least 2 cellar nodes running",2 <= nodes.size());
  System.err.println(executeCommand("cluster:group-list"));
  System.err.println(executeCommand("cluster:group-set testgroup " + localNode.getId()));
  System.err.println(executeCommand("cluster:group-list"));
  GroupManager groupManager=getOsgiService(GroupManager.class);
  assertNotNull(groupManager);
  Set<Group> groups=groupManager.listAllGroups();
  assertEquals("There should be 2 cellar groups",2,groups.size());
  System.err.println(executeCommand("cluster:group-delete testgroup "));
  System.err.println(executeCommand("cluster:group-list"));
  groups=groupManager.listAllGroups();
  assertEquals("There should be a single cellar group",1,groups.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.karaf.cellar.itests.CellarSampleDosgiGreeterTest </h4><pre class="type-5 type-2 type-1 type-9 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Is not executed with the test suite
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @Ignore public void testDosgiGreeter() throws InterruptedException {
  installCellar();
  createCellarChild("child1");
  createCellarChild("child2");
  Thread.sleep(DEFAULT_TIMEOUT);
  ClusterManager clusterManager=getOsgiService(ClusterManager.class);
  assertNotNull(clusterManager);
  System.err.println(executeCommand("features:addurl mvn:org.apache.karaf.cellar.samples/dosgi-greeter/3.0.0-SNAPSHOT/xml/features"));
  System.err.println(executeCommand("instance:list"));
  System.err.println(executeCommand("cluster:node-list"));
  Node localNode=clusterManager.getNode();
  Set<Node> nodes=clusterManager.listNodes();
  assertTrue("There should be at least 3 cellar nodes running",3 <= nodes.size());
  Thread.sleep(DEFAULT_TIMEOUT);
  String node1=getNodeIdOfChild("child1");
  String node2=getNodeIdOfChild("child2");
  System.err.println("Node 1: " + node1);
  System.err.println("Node 2: " + node2);
  executeCommand("cluster:group-create client-grp");
  executeCommand("cluster:group-create service-grp");
  System.err.println(executeCommand("cluster:group-list"));
  System.err.println(executeCommand("cluster:group-set client-grp " + localNode.getId()));
  System.err.println(executeCommand("cluster:group-set service-grp " + node1));
  System.err.println(executeCommand("cluster:feature-install client-grp greeter-client"));
  Thread.sleep(10000);
  System.err.println(executeCommand("cluster:feature-install service-grp greeter-service"));
  Thread.sleep(10000);
  System.err.println(executeCommand("cluster:service-list"));
  String greetOutput=executeCommand("dosgi-greeter:greet Hi 10");
  System.err.println(greetOutput);
  assertEquals("Expected 10 greets",10,countGreetsFromNode(greetOutput,node1));
  System.err.println(executeCommand("cluster:group-set service-grp " + node2));
  Thread.sleep(10000);
  Thread.sleep(10000);
  System.err.println(executeCommand("cluster:group-list"));
  System.err.println(executeCommand("instance:connect child2 osgi:list -t 0"));
  System.err.println(executeCommand("cluster:list-services"));
  greetOutput=executeCommand("dosgi-greeter:greet Hi 10");
  System.err.println(greetOutput);
  assertEquals("Expected 5 greets",5,countGreetsFromNode(greetOutput,node1));
  assertEquals("Expected 5 greets",5,countGreetsFromNode(greetOutput,node2));
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
