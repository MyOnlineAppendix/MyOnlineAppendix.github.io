<h3 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.helper.ResourceResolverControlTest (16 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="17"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('17')" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements"><kbd id="tag-17"class="label-info"style="display: inline-block;font-size:7pt" >ConditionMatcher&nbsp;(13)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(10)</kbd></button>&nbsp;<button id="15"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('15')" data-toggle="tooltip" title="Verifies assertions in iterations"><kbd id="tag-15"class="label-info"style="display: inline-block;font-size:7pt" >IterativeVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="13"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('13')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-13"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(1)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies that a resource is returned when it should be
 */
@Test public void getResource_found(){
  assertThat(crp.getResource(context,"/something",null,null,false),not(nullValue()));
  assertThat(crp.getResource(context,"/some/path/object",null,null,false),not(nullValue()));
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies listing the children at a level below the root
 */
@Test public void listChildren_lowerLevel(){
  Resource root=crp.getResource(context,"/some",null,null,false);
  Iterator<Resource> children=crp.listChildren(context,root);
  Map<String,Resource> all=new HashMap<String,Resource>();
  while (children.hasNext()) {
    Resource child=children.next();
    all.put(child.getPath(),child);
  }
  assertThat(all.entrySet(),Matchers.hasSize(1));
  assertThat("Resource at /some/path",all.get("/some/path"),not(nullValue()));
}

</code></pre>

<pre class="type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies moving resources between different ResourceProviders
 * @throws PersistenceException persistence exception
 */
@Test public void move_differentProvider() throws PersistenceException {
  Resource newRes=newMockResource("/object");
  when(rootProvider.create(mockContext(),Mockito.eq("/object"),Mockito.anyMap())).thenReturn(newRes);
  Resource resource=crp.move(context,"/some/path/object","/");
  assertThat(resource,not(nullValue()));
  verify(subProvider).delete(mockContext(),Mockito.eq(subProviderResource));
}

</code></pre>

<pre class="type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Verifies that a synthetic parent is returned for a resource without an actual parent
 */
@Test public void getParent_synthetic(){
  Resource parent=crp.getParent(context,subProviderResource);
  assertThat(parent,notNullValue());
  assertTrue("parent is a synthetic resource",ResourceUtil.isSyntheticResource(parent));
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies that a getResource call for a missing resource returns null
 */
@Test public void getResource_missing(){
  assertThat(crp.getResource(context,"/nothing",null,null,false),nullValue());
}

</code></pre>

<pre class="type-15 type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies finding resources
 */
@Test public void findResource() throws PersistenceException {
  Iterator<Resource> resources=crp.findResources(QUERY_MOCK_FIND_ALL,QL_MOCK);
  int count=0;
  while (resources.hasNext()) {
    assertThat("resources[0].path",resources.next().getPath(),equalTo("/some/path/object"));
    count++;
  }
  assertThat("query result count",count,Matchers.equalTo(1));
}

</code></pre>

<pre class="type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies that the existing parent of a resource is found
 */
@Test public void getParent_found(){
  Resource parent=crp.getParent(context,somethingResource);
  assertThat(parent,notNullValue());
  assertThat("parent.path",parent.getPath(),equalTo("/"));
}

</code></pre>

<pre class="type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies copying resources between different ResourceProviders
 * @throws PersistenceException persistence exception
 */
@Test public void copy_differentProvider() throws PersistenceException {
  Resource newRes=newMockResource("/object");
  when(rootProvider.create(mockContext(),Mockito.eq("/object"),Mockito.anyMap())).thenReturn(newRes);
  Resource resource=crp.copy(context,"/some/path/object","/");
  assertThat(resource,not(nullValue()));
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Verifies that login and logout calls are invoked as expected on
 * ResourceProviders with authType = {@link AuthType#required}
 */
@Test public void loginLogout() throws LoginException {
  authenticator.authenticateAll(handlers,crp);
  verify(subProvider).authenticate(authInfo);
  crp.close();
  verify(subProvider).logout(mockContext());
}

</code></pre>

<pre class="type-15 type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies running a query
 */
@Test public void queryResources() throws PersistenceException {
  Iterator<Map<String,Object>> queryResources=crp.queryResources(QUERY_MOCK_FIND_ALL,QL_MOCK);
  int count=0;
  while (queryResources.hasNext()) {
    assertThat("ValueMap returned from query",queryResources.next(),hasEntry("key",(Object)"value"));
    count++;
  }
  assertThat("query result count",count,Matchers.equalTo(1));
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies that listing the children at root lists both the synthetic and the 'real' children
 */
@Test public void listChildren_root(){
  Resource root=crp.getResource(context,"/",null,null,false);
  Iterator<Resource> children=crp.listChildren(context,root);
  Map<String,Resource> all=new HashMap<String,Resource>();
  while (children.hasNext()) {
    Resource child=children.next();
    all.put(child.getPath(),child);
  }
  assertThat(all.entrySet(),Matchers.hasSize(2));
  assertThat("Resource at /something",all.get("/something"),not(nullValue()));
  assertThat("Resource at /some",all.get("/some"),not(nullValue()));
}

</code></pre>

<pre class="type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies moving resources between the same ResourceProvider
 * @throws PersistenceException persistence exception
 */
@Test public void move_sameProvider() throws PersistenceException {
  when(subProvider.move(mockContext(),Mockito.eq("/some/path/object"),Mockito.eq("/some/path/new"))).thenReturn(true);
  configureResourceAt(subProvider,"/some/path/new/object");
  configureResourceAt(subProvider,"/some/path/new");
  Resource resource=crp.move(context,"/some/path/object","/some/path/new");
  assertThat(resource,not(nullValue()));
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void prepare() throws Exception {
  BundleContext bc=MockOsgi.newBundleContext();
  Fixture fixture=new Fixture(bc);
  subProvider=Mockito.mock(ResourceProvider.class);
  ResourceProviderInfo info=fixture.registerResourceProvider(subProvider,"/some/path",AuthType.required);
  ResourceProviderHandler handler=new ResourceProviderHandler(bc,info);
  when(subProvider.getQueryLanguageProvider()).thenReturn(new SimpleQueryLanguageProvider(QL_MOCK,QL_ANOTHER_MOCK){
    @Override public Iterator<ValueMap> queryResources(    ResolverContext ctx,    String query,    String language){
      if (query.equals(QUERY_MOCK_FIND_ALL) && language.equals(QL_MOCK)) {
        SimpleValueMapImpl valueMap=new SimpleValueMapImpl();
        valueMap.put("key","value");
        return Collections.<ValueMap>singletonList(valueMap).iterator();
      }
      throw new UnsupportedOperationException();
    }
    @Override public Iterator<Resource> findResources(    ResolverContext ctx,    String query,    String language){
      if (query.equals(QUERY_MOCK_FIND_ALL) && language.equals(QL_MOCK)) {
        return Collections.<Resource>singletonList(newMockResource("/some/path/object")).iterator();
      }
      throw new UnsupportedOperationException();
    }
  }
);
  handler.activate();
  rootProvider=mock(ResourceProvider.class);
  ResourceProviderInfo rootInfo=fixture.registerResourceProvider(rootProvider,"/",AuthType.required);
  ResourceProviderHandler rootHandler=new ResourceProviderHandler(bc,rootInfo);
  when(rootProvider.getQueryLanguageProvider()).thenReturn(new SimpleQueryLanguageProvider(QL_NOOP));
  rootHandler.activate();
  Resource root=configureResourceAt(rootProvider,"/");
  somethingResource=configureResourceAt(rootProvider,"/something");
  subProviderResource=configureResourceAt(subProvider,"/some/path/object");
  when(rootProvider.listChildren((ResolverContext)Mockito.anyObject(),Mockito.eq(root))).thenReturn(Collections.singleton(somethingResource).iterator());
  ResourceResolver rr=mock(ResourceResolver.class);
  ResourceAccessSecurityTracker securityTracker=Mockito.mock(ResourceAccessSecurityTracker.class);
  authInfo=Collections.emptyMap();
  handlers=Arrays.asList(rootHandler,handler);
  ResourceProviderStorage storage=new ResourceProviderStorage(handlers);
  authenticator=new ResourceProviderAuthenticator(rr,authInfo,securityTracker);
  crp=new ResourceResolverControl(false,authInfo,storage,authenticator);
  context=new ResourceResolverContext(rr);
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies listing the query languages
 */
@Test public void queryLanguages() throws PersistenceException {
  assertThat(crp.getSupportedLanguages(),arrayContainingInAnyOrder(QL_NOOP,QL_MOCK,QL_ANOTHER_MOCK));
}

</code></pre>

<pre class="type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies copying resources between the same ResourceProvider
 * @throws PersistenceException persistence exception
 */
@Test public void copy_sameProvider() throws PersistenceException {
  when(subProvider.copy(mockContext(),Mockito.eq("/some/path/object"),Mockito.eq("/some/path/new"))).thenReturn(true);
  configureResourceAt(subProvider,"/some/path/new/object");
  configureResourceAt(subProvider,"/some/path/new");
  Resource resource=crp.copy(context,"/some/path/object","/some/path/new");
  assertThat(resource,not(nullValue()));
}

</code></pre>

<pre class="type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Verifies that a synthetic resource is returned for a path which holds no
 * actual resource but is an ancestor of another resource provider
 */
@Test public void getResource_synthetic(){
  Resource resource=crp.getResource(context,"/some",null,null,false);
  assertTrue("Not a syntethic resource : " + resource,ResourceUtil.isSyntheticResource(resource));
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
