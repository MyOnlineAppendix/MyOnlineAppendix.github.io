<h3 style="margin:0px">Class: org.apache.sling.ide.impl.vlt.serialization.ContentXmlHandlerTest (11 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="17"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('17')" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements"><kbd id="tag-17"class="label-info"style="display: inline-block;font-size:7pt" >ConditionMatcher&nbsp;(11)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(2)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void escapedCommaInMultiValuedProperty() throws Exception {
  ResourceProxy root=parseContentXmlFile("escaped-comma-in-multi-valued-property.xml","/");
  assertThat("properties[someProp]",(String[])root.getProperties().get("someProp"),Matchers.is(new String[]{"first,first","second"}));
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test @SuppressWarnings("unchecked") public void parseMultiValuedProperties() throws ParserConfigurationException, SAXException, IOException {
  Map<String,Object> properties=parseContentXmlFile("multivalued-properties-content.xml","/").getProperties();
  assertThat("properties.size",properties.size(),is(7));
  assertThat("properties[values]",(String[])properties.get("values"),Matchers.is(new String[]{"first","second"}));
  assertThat("properties[decimals]",(BigDecimal[])properties.get("decimals"),Matchers.is(new BigDecimal[]{new BigDecimal("5.10"),new BigDecimal("5.11")}));
  assertThat("properties[doubles]",(Double[])properties.get("doubles"),Matchers.is(new Double[]{new Double("5.1"),new Double("7.5"),new Double("9.0")}));
  assertThat("properties[flags]",(Boolean[])properties.get("flags"),Matchers.is(new Boolean[]{Boolean.FALSE,Boolean.TRUE}));
  assertThat("properties[longs]",(Long[])properties.get("longs"),Matchers.is(new Long[]{Long.valueOf(15),Long.valueOf(25)}));
  assertThat("properties[dates]",(Calendar[])properties.get("dates"),array(millis(1377982800000l),millis(1378242000000l)));
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void encodedChildContentXml() throws ParserConfigurationException, SAXException, IOException {
  ResourceProxy root=parseContentXmlFile("encoded-child-content.xml","/ROOT");
  assertThat("/ROOT contains /_jcr_content",root.getChildren(),hasChildPath("/ROOT/_jcr_content"));
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void simpleContentXml() throws ParserConfigurationException, SAXException, IOException {
  Map<String,Object> properties=parseContentXmlFile("simple-content.xml","/").getProperties();
  assertThat("properties.size",properties.size(),is(12));
  assertThat("properties[jcr:primaryType]",properties,hasEntry("jcr:primaryType",(Object)"sling:Folder"));
  assertThat("properties[jcr:title]",properties,hasEntry("jcr:title",(Object)"Application folder"));
  assertThat("properties[indexed]",properties,hasEntry("indexed",(Object)Boolean.TRUE));
  assertThat("properties[indexRatio]",properties,hasEntry("indexRatio",(Object)Double.valueOf(2.54)));
  assertThat("properties[indexDuration]",properties,hasEntry("indexDuration",(Object)BigDecimal.valueOf(500)));
  assertThat("properties[lastIndexTime]",(Calendar)properties.get("lastIndexTime"),is(millis(1378292400000l)));
  assertThat("properties[lastIndexId]",properties,hasEntry("lastIndexId",(Object)Long.valueOf(7293120000000l)));
  assertThat("properties[lastIndexId]",properties,hasEntry("lastIndexId",(Object)Long.valueOf(7293120000000l)));
  assertThat("properties[emptyValue]",properties,hasEntry("emptyValue",(Object)""));
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void escapedBraceAtStartOfPropertyValue() throws Exception {
  ResourceProxy root=parseContentXmlFile("escaped-braces-at-start-of-property.xml","/");
  assertThat("properties[org.apache.sling.commons.log.pattern]",root.getProperties(),hasEntry("org.apache.sling.commons.log.pattern",(Object)"{0,date,dd.MM.yyyy HH:mm:ss.SSS} *{4}* [{2}] {3} {5}"));
}

</code></pre>

<pre class="type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void parseFullCoverageXmlFile() throws ParserConfigurationException, SAXException, IOException {
  ResourceProxy root=parseContentXmlFile("full-coverage.xml","/apps/full-coverage");
  assertThat("full-coverage path",root.getPath(),is("/apps/full-coverage"));
  assertThat("full-coverage properties.size",root.getProperties().size(),is(3));
  assertThat("full-coverage properties[jcr:title]",root.getProperties(),hasEntry("jcr:title",(Object)"Full coverage parent"));
  assertThat("full-coverage children.size",root.getChildren().size(),is(2));
  ResourceProxy parent1=root.getChildren().get(0);
  assertThat("parent-1 path",parent1.getPath(),is("/apps/full-coverage/parent-1"));
  assertThat("parent-1 properties[jcr:title]",parent1.getProperties(),hasEntry("jcr:title",(Object)"Parent 1"));
  assertThat("parent-1 children.size",parent1.getChildren().size(),is(2));
  ResourceProxy child11=parent1.getChildren().get(0);
  assertThat("child-1-1 path",child11.getPath(),is("/apps/full-coverage/parent-1/child-1-1"));
  assertThat("child-1-1 properties[jcr:title]",child11.getProperties(),hasEntry("jcr:title",(Object)"Child 1-1"));
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void parseRootContentXml() throws ParserConfigurationException, SAXException, IOException {
  ResourceProxy root=parseContentXmlFile("root-content.xml","/");
  assertThat("root contains /jcr:system",root.getChildren(),hasChildPath("/jcr:system"));
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void parseContentXmlWithBinaryProperty() throws ParserConfigurationException, SAXException, IOException {
  ResourceProxy root=parseContentXmlFile("binary-property.xml","/");
  assertThat("root has 1 property, binary property is ignored",root.getProperties().entrySet(),hasSize(1));
}

</code></pre>

<pre class="type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void emptyMultivaluedProperties() throws Exception {
  ResourceProxy root=parseContentXmlFile("empty-multivalued-property.xml","/");
  assertThat("properties[labels]",(String[])root.getProperties().get("labels"),Matchers.arrayWithSize(0));
  assertThat("properties[values]",(Long[])root.getProperties().get("values"),Matchers.arrayWithSize(0));
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void parseContentXmlWithEscapedNames() throws ParserConfigurationException, SAXException, IOException {
  ResourceProxy root=parseContentXmlFile("full-coverage-escaped-names.xml","/");
  assertThat("node contains /50-50",root.getChildren(),hasChildPath("/50-50"));
}

</code></pre>

<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test @SuppressWarnings("unchecked") public void parseSingleExplicitMultiValuedProperties() throws ParserConfigurationException, SAXException, IOException {
  Map<String,Object> properties=parseContentXmlFile("single-explicit-multivalued-properties-content.xml","/").getProperties();
  assertThat("properties.size",properties.size(),is(7));
  assertThat("properties[values]",(String[])properties.get("values"),Matchers.is(new String[]{"first"}));
  assertThat("properties[decimals]",(BigDecimal[])properties.get("decimals"),Matchers.is(new BigDecimal[]{new BigDecimal("5.10")}));
  assertThat("properties[doubles]",(Double[])properties.get("doubles"),Matchers.is(new Double[]{new Double("5.1")}));
  assertThat("properties[flags]",(Boolean[])properties.get("flags"),Matchers.is(new Boolean[]{Boolean.FALSE}));
  assertThat("properties[longs]",(Long[])properties.get("longs"),Matchers.is(new Long[]{Long.valueOf(15)}));
  assertThat("properties[dates]",(Calendar[])properties.get("dates"),array(millis(1377982800000l)));
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
