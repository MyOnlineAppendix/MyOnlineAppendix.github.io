<h3><span class=" glyphicon glyphicon-tag"/>&nbspAPIUtilityVerifier</h3><kbd>Verifies values of objects/variables related to API calls (Java or TPL) </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.sling.api.resource.ResourceUtilTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_getValueMap_direct(){
  final ValueMap valueMap=new ValueMapDecorator(new HashMap<String,Object>());
  valueMap.put("sample",true);
  final Resource resource=new SyntheticResource(null,"/","sample"){
    @Override @SuppressWarnings("unchecked") public <Type>Type adaptTo(    Class<Type> type){
      if (type == ValueMap.class) {
        return (Type)valueMap;
      }
      return super.adaptTo(type);
    }
  }
;
  final ValueMap adapted=ResourceUtil.getValueMap(resource);
  assertEquals(valueMap,adapted);
  assertNotNull(adapted);
  assertEquals(1,adapted.size());
  assertEquals(true,adapted.get("sample"));
  assertEquals(Boolean.valueOf(true),adapted.get("sample",Boolean.class));
  assertEquals(Boolean.TRUE.toString(),adapted.get("sample",String.class));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_getValueMap_decorated_map(){
  final Map<String,Object> map=new HashMap<String,Object>();
  map.put("sample",true);
  final Resource resource=new SyntheticResource(null,"/","sample"){
    @Override @SuppressWarnings("unchecked") public <Type>Type adaptTo(    Class<Type> type){
      if (type == Map.class) {
        return (Type)map;
      }
      if (type == ValueMap.class) {
        return null;
      }
      return super.adaptTo(type);
    }
  }
;
  final ValueMap adapted=ResourceUtil.getValueMap(resource);
  assertNotNull(adapted);
  assertEquals(1,adapted.size());
  assertEquals(true,adapted.get("sample"));
  assertEquals(Boolean.valueOf(true),adapted.get("sample",Boolean.class));
  assertEquals(Boolean.TRUE.toString(),adapted.get("sample",String.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.api.resource.util.PathSetTest </h4><pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testPathSet(){
  final Set<Path> paths=new HashSet<Path>();
  paths.add(new Path("/a"));
  paths.add(new Path("/x/y"));
  paths.add(new Path("/z"));
  final PathSet set=PathSet.fromPathCollection(paths);
  assertNotNull(set);
  assertEqualSets(set,"/a","/x/y","/z");
}

</code></pre>

<br>
<pre class="type-11 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testStringSet(){
  final Set<String> strings=new HashSet<String>();
  strings.add("/a");
  strings.add("/x/y");
  strings.add("/z");
  final PathSet set=PathSet.fromStringCollection(strings);
  assertNotNull(set);
  assertEqualSets(set,"/a","/x/y","/z");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.auth.form.impl.FormAuthenticationHandlerTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_getTokenFile(){
  final File root=new File("bundle999").getAbsoluteFile();
  final SlingHomeAction slingHome=new SlingHomeAction();
  slingHome.setSlingHome(new File("sling").getAbsolutePath());
  Mockery context=new Mockery();
  final BundleContext bundleContext=context.mock(BundleContext.class);
  context.checking(new Expectations(){
{
      allowing(bundleContext).getProperty("sling.home");
      will(slingHome);
      allowing(bundleContext).getDataFile(with(new StringStartsWith("sl")));
      will(returnValue(null));
      allowing(bundleContext).getDataFile(with(any(String.class)));
      will(new RVA(root));
    }
  }
);
  final FormAuthenticationHandler handler=new FormAuthenticationHandler();
  File relFile0=handler.getTokenFile("",bundleContext);
  assertEquals(root,relFile0);
  String relName1="rel/path";
  File relFile1=handler.getTokenFile(relName1,bundleContext);
  assertEquals(new File(root,relName1),relFile1);
  String relName2="sl/rel_to_sling.home";
  File relFile2=handler.getTokenFile(relName2,bundleContext);
  assertEquals(new File(slingHome.getSlingHome(),relName2),relFile2);
  String relName3="sl/test";
  slingHome.setSlingHome(null);
  File relFile3=handler.getTokenFile(relName3,bundleContext);
  assertEquals(new File(relName3).getAbsoluteFile(),relFile3);
  File absFile=new File("test").getAbsoluteFile();
  File absFile0=handler.getTokenFile(absFile.getPath(),bundleContext);
  assertEquals(absFile,absFile0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.bgservlets.impl.DeepNodeCreatorTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateWithVariousTypes() throws Exception {
  final Mockery mockery=new Mockery();
  final String fooPath="/foo";
  final String barPath="/foo/bar";
  final String wiiPath="/foo/bar/wii";
  final Session s=mockery.mock(Session.class);
  final Node foo=mockery.mock(Node.class,fooPath);
  final Node bar=mockery.mock(Node.class,barPath);
  final Node wii=mockery.mock(Node.class,wiiPath);
  mockery.checking(new Expectations(){
{
      allowing(s).itemExists(wiiPath);
      will(returnValue(false));
      allowing(s).itemExists(barPath);
      will(returnValue(false));
      allowing(s).itemExists(fooPath);
      will(returnValue(true));
      allowing(s).getItem(fooPath);
      will(returnValue(foo));
      allowing(foo).isNode();
      will(returnValue(true));
      allowing(foo).getPath();
      will(returnValue(fooPath));
      allowing(foo).addNode("bar","NT_/foo.bar");
      will(returnValue(bar));
      allowing(bar).getPath();
      will(returnValue(barPath));
      allowing(bar).addNode("wii","NT_/foo/bar.wii");
      will(returnValue(wii));
      allowing(s).getRootNode();
      allowing(s).save();
    }
  }
);
  final AtomicInteger counter=new AtomicInteger();
  final DeepNodeCreator c=new DeepNodeCreator(){
    @Override protected String getNodeType(    Node parent,    String childPath,    String suggestedNodeType) throws RepositoryException {
      return "NT_" + parent.getPath() + "."+ childPath;
    }
    @Override protected void nodeCreated(    Node n) throws RepositoryException {
      counter.addAndGet(1);
    }
  }
;
  final Node result=c.deepCreateNode(wiiPath,s,null);
  assertTrue("Expecting deepCreate to return created node",result == wii);
  assertEquals("Expecting correct count of nodeCreated calls",2,counter.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.bgservlets.impl.SuspendableOutputStreamTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSuspend() throws Exception {
  final ByteArrayOutputStream bos=new ByteArrayOutputStream();
  final SuspendableOutputStream f=new SuspendableOutputStream(bos);
  f.requestStateChange(JobStatus.State.RUNNING);
  final WriterThread t=new WriterThread(f);
  t.setDaemon(true);
  t.start();
  final long delay=WriterThread.WRITE_DELAY * 3;
  Thread.sleep(delay);
  assertTrue("Expecting data to be written by WriterThread",bos.size() > 0);
  f.requestStateChange(JobStatus.State.SUSPENDED);
  Thread.sleep(delay);
  assertEquals("Expecting SUSPEND state after a few writes",JobStatus.State.SUSPENDED,f.getState());
  final int count=bos.size();
  Thread.sleep(delay);
  assertEquals("Expecting no writes in SUSPEND state",count,bos.size());
  f.requestStateChange(JobStatus.State.RUNNING);
  Thread.sleep(delay);
  assertEquals("Expecting RUNNING state",JobStatus.State.RUNNING,f.getState());
  assertTrue("Expecting data to be written after resuming",bos.size() > count);
  f.close();
  Thread.sleep(delay);
  assertFalse("Expecting WriterThread to end after closing stream",t.isAlive());
  assertNotNull("Expecting non-null Exception in WriterThread",t.runException);
  assertTrue("Expecting IOException in WriterThread",t.runException instanceof IOException);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.classloader.impl.ClassLoadingTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * This method tests the dynamic class loading through the package admin.
 * The returned class changes from map to array list.
 */
@Test public void testLoading() throws Exception {
  final Sequence sequence=this.context.sequence("load-sequence");
  final BundleContext bundleContext=this.context.mock(BundleContext.class);
  final PackageAdmin packageAdmin=this.context.mock(PackageAdmin.class);
  final ExportedPackage ep=this.context.mock(ExportedPackage.class);
  final Bundle bundle=this.context.mock(Bundle.class);
  this.context.checking(new Expectations(){
{
      allowing(bundleContext).createFilter(with(any(String.class)));
      will(returnValue(null));
      allowing(bundleContext).addServiceListener(with(any(ServiceListener.class)),with(any(String.class)));
      allowing(bundleContext).removeServiceListener(with(any(ServiceListener.class)));
      allowing(bundleContext).getServiceReferences(with(any(String.class)),with(any(String.class)));
      will(returnValue(null));
      allowing(packageAdmin).getExportedPackage("org.apache.sling.test");
      will(returnValue(ep));
      allowing(ep).getExportingBundle();
      will(returnValue(bundle));
      allowing(ep).isRemovalPending();
      will(returnValue(false));
      allowing(bundle).getBundleId();
      will(returnValue(2L));
      allowing(bundle).getState();
      will(returnValue(Bundle.ACTIVE));
      one(bundle).loadClass("org.apache.sling.test.A");
      inSequence(sequence);
      will(returnValue(java.util.Map.class));
      one(bundle).loadClass("org.apache.sling.test.A");
      inSequence(sequence);
      will(returnValue(java.util.Map.class));
      one(bundle).loadClass("org.apache.sling.test.A");
      inSequence(sequence);
      will(returnValue(java.util.ArrayList.class));
    }
  }
);
  DynamicClassLoaderManagerImpl manager=new DynamicClassLoaderManagerImpl(bundleContext,packageAdmin,null,new DynamicClassLoaderManagerFactory(bundleContext,packageAdmin));
  final ClassLoader cl=manager.getDynamicClassLoader();
  final Class<?> c1=cl.loadClass("org.apache.sling.test.A");
  Assert.assertEquals("java.util.Map",c1.getName());
  final Class<?> c2=cl.loadClass("org.apache.sling.test.A");
  Assert.assertEquals("java.util.Map",c2.getName());
  final Class<?> c3=cl.loadClass("org.apache.sling.test.A");
  Assert.assertEquals("java.util.Map",c3.getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.classloader.it.DynamicClassLoaderIT </h4><pre class="type-11 type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPackageAdminClassLoader() throws Exception {
  assertNotNull(getDynamicClassLoader());
  final URL url=new URL(mavenBundle("org.apache.sling","org.apache.sling.commons.osgi","2.1.0").getURL());
  final InputStream is=url.openStream();
  Bundle osgiBundle=null;
  try {
    osgiBundle=this.bundleContext.installBundle(url.toExternalForm(),is);
  }
  finally {
    try {
      is.close();
    }
 catch (    final IOException ignore) {
    }
  }
  assertNotNull(osgiBundle);
  assertEquals(Bundle.INSTALLED,osgiBundle.getState());
  final String className="org.apache.sling.commons.osgi.PropertiesUtil";
  try {
    getDynamicClassLoader().loadClass(className);
    fail("Class should not be available");
  }
 catch (  final ClassNotFoundException expected) {
  }
  osgiBundle.getResource("/something");
  assertEquals(Bundle.RESOLVED,osgiBundle.getState());
  try {
    getDynamicClassLoader().loadClass(className);
    fail("Class should not be available");
  }
 catch (  final ClassNotFoundException expected) {
  }
  osgiBundle.start();
  assertEquals(Bundle.ACTIVE,osgiBundle.getState());
  try {
    getDynamicClassLoader().loadClass(className);
  }
 catch (  final ClassNotFoundException expected) {
    fail("Class should be available");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.contentdetection.internal.FileNameExtractorImplTest </h4><pre class="type-11 type-6 type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidEncoding() throws NoSuchFieldException, SecurityException, IllegalArgumentException, IllegalAccessException {
  final String rawPath="http://example.com/demo%20test.jpg?test=true";
  final String oldEncoding=defaultEncoding;
  final String badEncoding="INVALID_ENCODING";
  try {
    defaultEncoding=badEncoding;
    try {
      fileNameExtractor.extract(rawPath);
      Assert.fail("Expected an exception with encoding " + defaultEncoding);
    }
 catch (    RuntimeException re) {
      final String msg=re.getMessage();
      Assert.assertTrue("Expected exception message to contain " + badEncoding + " ("+ msg+ ")",msg.contains(badEncoding));
    }
  }
  finally {
    defaultEncoding=oldEncoding;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.contentdetection.internal.it.ContentAwareMimeTypeServiceImplIT </h4><pre class="type-11 type-13 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void detectFromContent() throws IOException {
  final String filename="this-is-actually-a-wav-file.mp3";
  final String path="/" + filename;
  final InputStream s=new BufferedInputStream(getClass().getResourceAsStream(path));
  assertNotNull("Expecting stream to be found:" + filename,s);
  InputStream originalStream=null;
  try {
    assertEquals("audio/x-wav",contentAwaremimeTypeService.getMimeType(filename,s));
    originalStream=getClass().getResourceAsStream(path);
    assertNotNull("Expecting stream to be found:" + filename,originalStream);
    assertTrue("Expecting content to be unchanged",IOUtils.contentEquals(s,originalStream));
  }
  finally {
    IOUtils.closeQuietly(s);
    IOUtils.closeQuietly(originalStream);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.json.jcr.JsonItemWriterTest </h4><pre class="type-11 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
/** 
 * See <a href="https://issues.apache.org/jira/browse/SLING-924">SLING-924</a>
 */
@Test public void testOutputIterator() throws JSONException, RepositoryException {
  MockNode node1=new MockNode("/node1");
  MockNode node2=new MockNode("/node2");
  node1.addNode("node3");
  node1.setProperty("name","node1");
  node2.setProperty("name","node2");
  final NodeIterator it=new MockNodeIterator(new Node[]{node1,node2});
  final StringWriter sw=new StringWriter();
  writer.dump(it,sw);
  Pattern testPattern=Pattern.compile("\\{(.[^\\}]*)\\}");
  Matcher matcher=testPattern.matcher(sw.toString());
  assertTrue("Did not produce a JSON object",matcher.find());
  assertTrue("Did not produce a 2nd JSON object",matcher.find());
  assertFalse("Produced a JSON object for a child node",matcher.find());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.json.sling.JsonObjectCreatorTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringArray() throws JSONException {
  final String[] values={"A","B"};
  when(resource.adaptTo(String[].class)).thenReturn(values);
  final JSONObject j=JsonObjectCreator.create(resource,1);
  assertEquals("A",j.getJSONArray(RESOURCE_NAME).get(0));
  assertEquals("B",j.getJSONArray(RESOURCE_NAME).get(1));
}

</code></pre>

<br>
<pre class="type-15 type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChildren() throws JSONException {
  when(resource.adaptTo(ValueMap.class)).thenReturn(new ValueMapDecorator(props));
  final JSONObject j=JsonObjectCreator.create(resource,2);
  for (int i=0; i < NCHILDREN; i++) {
    final String id="child" + i;
    assertEquals(id,j.getJSONObject(id).get("id"));
  }
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringValue() throws JSONException {
  final String value="the string";
  when(resource.adaptTo(String.class)).thenReturn(value);
  final JSONObject j=JsonObjectCreator.create(resource,1);
  assertEquals(value,j.get(RESOURCE_NAME));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.log.logback.integration.ITWebConsoleRemote </h4><pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testWebConsolePlugin() throws IOException {
  final HtmlPage page=webClient.getPage(prepareUrl(PLUGIN_SUFFIX));
  String text=page.asText();
  assertTrue(text.contains("WebConsoleTestTurboFilter"));
  assertTrue(text.contains("WebConsoleTestAppender"));
  assertTrue(text.contains("testremote.log"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPrinter() throws IOException {
  final HtmlPage page=webClient.getPage(prepareUrl(PRINTER_SUFFIX));
  String text=page.asText();
  assertTrue(text.contains("testremote.log"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.log.logback.internal.TestLogConfig </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLayout(){
  String pattern="{0,date,dd.MM.yyyy HH:mm:ss.SSS} *{4}* [{2}] {3} {5}";
  String convertedPattern="%d{dd.MM.yyyy HH:mm:ss.SSS} *%level* [%thread] %logger %message%n";
  LogConfig logConfig=createConfig(pattern);
  assertEquals(convertedPattern,logConfig.createLayout().getPattern());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLayoutWithNewPattern(){
  String convertedPattern="%d{dd.MM.yyyy HH:mm:ss.SSS} *%level* [%thread] %logger %message%n";
  LogConfig logConfig=createConfig(convertedPattern);
  assertEquals(convertedPattern,logConfig.createLayout().getPattern());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.log.logback.internal.TestLogWriter </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSizeBasedLegacyPattern(){
  LogWriter lw=new LogWriter("foo","target/foo",5,"4k");
  Appender<ILoggingEvent> a=createappender(lw);
  assertInstanceOf(a,SlingRollingFileAppender.class);
  SlingRollingFileAppender sr=(SlingRollingFileAppender)a;
  assertInstanceOf(sr.getTriggeringPolicy(),SizeBasedTriggeringPolicy.class);
  assertInstanceOf(sr.getRollingPolicy(),FixedWindowRollingPolicy.class);
  SizeBasedTriggeringPolicy sbtp=(SizeBasedTriggeringPolicy)sr.getTriggeringPolicy();
  FixedWindowRollingPolicy fwRp=(FixedWindowRollingPolicy)sr.getRollingPolicy();
  assertEquals(5,fwRp.getMaxIndex());
  assertEquals(String.valueOf(4 * FileUtils.ONE_KB),sbtp.getMaxFileSize());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRotationBasedLegacyPattern(){
  LogWriter lw=new LogWriter("foo","target/foo",5,"'.'yyyy-MM");
  Appender<ILoggingEvent> a=createappender(lw);
  assertInstanceOf(a,SlingRollingFileAppender.class);
  SlingRollingFileAppender sr=(SlingRollingFileAppender)a;
  assertInstanceOf(sr.getTriggeringPolicy(),TimeBasedRollingPolicy.class);
  TimeBasedRollingPolicy tbrp=(TimeBasedRollingPolicy)sr.getTriggeringPolicy();
  assertEquals(5,tbrp.getMaxHistory());
  assertEquals("target/foo.%d{yyyy-MM}",tbrp.getFileNamePattern());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.log.logback.internal.TestTailer </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void randomTest() throws Exception {
  File f1=tempFolder.newFile();
  List<String> lines=createRandomLines(Tailer.BUFFER_SIZE * 10);
  int numOfLines=lines.size();
  writeToFile(f1,lines);
  int n=rnd.nextInt(numOfLines / 2);
  new Tailer(listener,n).tail(f1);
  assertEquals(listener.lines,lines.subList(numOfLines - n,numOfLines));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.metrics.internal.MetricServiceTest </h4><pre class="type-11 type-9 type-10 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void jmxRegistration() throws Exception {
  MBeanServer server=ManagementFactory.getPlatformMBeanServer();
  activate();
  Meter meter=service.meter("test");
  assertNotNull(meter);
  QueryExp q=Query.isInstanceOf(Query.value(JmxReporter.JmxMeterMBean.class.getName()));
  Set<ObjectName> names=server.queryNames(new ObjectName("org.apache.sling:name=*"),q);
  assertThat(names,is(not(empty())));
  MockOsgi.deactivate(service);
  names=server.queryNames(new ObjectName("org.apache.sling:name=*"),q);
  assertThat(names,is(empty()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.metrics.internal.MetricWebConsolePluginTest </h4><pre class="type-11 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void inventory_text() throws Exception {
  MetricRegistry reg1=new MetricRegistry();
  reg1.meter("test1").mark(5);
  context.registerService(MetricRegistry.class,reg1,regProps("foo"));
  activatePlugin();
  StringWriter sw=new StringWriter();
  plugin.print(new PrintWriter(sw),Format.TEXT,false);
  String out=sw.toString();
  assertThat(out,containsString("foo:test1"));
  assertThat(out,containsString("Meters"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.osgi.BundleFileProcessorTest </h4><pre class="type-11 type-12 type-13 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBSNRenaming() throws IOException {
  File tempDir=new File(System.getProperty("java.io.tmpdir"));
  File originalFile=getMavenArtifactFile(getMavenRepoRoot(),"com.google.guava","guava","15.0");
  File generatedFile=new BSNRenamer(originalFile,tempDir,"org.acme.baklava.guava").process();
  try {
    compareJarContents(originalFile,generatedFile);
    JarFile jfOrg=null;
    JarFile jfNew=null;
    try {
      jfOrg=new JarFile(originalFile);
      jfNew=new JarFile(generatedFile);
      Manifest mfOrg=jfOrg.getManifest();
      Manifest mfNew=jfNew.getManifest();
      Attributes orgAttrs=mfOrg.getMainAttributes();
      Attributes newAttrs=mfNew.getMainAttributes();
      for (      Object key : orgAttrs.keySet()) {
        String orgVal=orgAttrs.getValue(key.toString());
        String newVal=newAttrs.getValue(key.toString());
        if ("Bundle-SymbolicName".equals(key.toString())) {
          assertEquals("Should have recorded the original Bundle-SymbolicName",orgVal,newAttrs.getValue("X-Original-Bundle-SymbolicName"));
          assertEquals("org.acme.baklava.guava",newVal);
        }
 else {
          assertEquals("Different keys: " + key,orgVal,newVal);
        }
      }
    }
  finally {
      closeQuietly(jfOrg);
      closeQuietly(jfNew);
    }
  }
  finally {
    assertTrue("Unable to delete temporary file",generatedFile.delete());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.osgi.bundleversion.BundleBundleVersionInfoTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSnapshot(){
  final String name="some.bundle";
  final Version version=new Version("1.0.4.SNAPSHOT");
  final long lastMod=0;
  final Bundle b=getMockBundle(name,version,lastMod);
  BundleVersionInfo<?> vi=new BundleBundleVersionInfo(b);
  assertEquals("Symbolic name matches",name,vi.getBundleSymbolicName());
  assertEquals("Version matches",version,vi.getVersion());
  assertTrue("isBundle",vi.isBundle());
  assertTrue("Bundle is a snapshot",vi.isSnapshot());
  assertEquals("Last-Modified matches",BundleVersionInfo.BND_LAST_MODIFIED_MISSING,vi.getBundleLastModified());
  assertTrue("Bundle is stored as source",vi.getSource() == b);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVersionInfo(){
  final String name="some.bundle";
  final Version version=new Version("1.0.4");
  final long lastMod=1234L;
  final Bundle b=getMockBundle(name,version,lastMod);
  BundleVersionInfo<?> vi=new BundleBundleVersionInfo(b);
  assertEquals("Symbolic name matches",name,vi.getBundleSymbolicName());
  assertEquals("Version matches",version,vi.getVersion());
  assertTrue("isBundle",vi.isBundle());
  assertFalse("Not a snapshot",vi.isSnapshot());
  assertEquals("Last-Modified matches",lastMod,vi.getBundleLastModified());
  assertTrue("Bundle is stored as source",vi.getSource() == b);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.osgi.bundleversion.BundleVersionComparisonTest </h4><pre class="type-11 type-13 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSortBundles(){
  final MockBundleVersionInfo[] sorted={new MockBundleVersionInfo("a.name","1.0",1),new MockBundleVersionInfo("a.name","1.1",1),new MockBundleVersionInfo("b","0.8.1",1),new MockBundleVersionInfo("b","0.9",1),new MockBundleVersionInfo("b","1.0",1),new MockBundleVersionInfo("b","1.0.1.SNAPSHOT",1),new MockBundleVersionInfo("b","1.0.1.SNAPSHOT",2),new MockBundleVersionInfo("b","1.1",1),new MockBundleVersionInfo("b","1.2.0.SNAPSHOT",1),new MockBundleVersionInfo("b","1.2.0.SNAPSHOT",2)};
  final List<BundleVersionInfo<?>> list=new ArrayList<BundleVersionInfo<?>>();
  for (int i=sorted.length - 1; i >= 0; i--) {
    list.add(sorted[i]);
  }
  final String firstBeforeSort=list.get(0).toString();
  Collections.sort(list);
  final String newFirstItem=list.get(0).toString();
  assertFalse("First item (" + newFirstItem + ") must have changed during sort",firstBeforeSort.equals(newFirstItem));
  int i=0;
  for (  BundleVersionInfo<?> vi : list) {
    assertEquals("Item sorted as expected at index " + i,sorted[i].toString(),vi.toString());
    i++;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.scheduler.impl.SettingsSupportTest </h4><pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testStartAndStop() throws NoSuchFieldException, IllegalAccessException {
  listener.start();
  Field activeField=listener.getClass().getDeclaredField("active");
  activeField.setAccessible(true);
  AtomicBoolean isActive=(AtomicBoolean)activeField.get(listener);
  assertTrue(isActive.get());
  listener.stop();
  assertFalse(isActive.get());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.crankstart.launcher.BasicLauncherIT </h4><pre class="type-15 type-11 type-12 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @Retry(timeoutMsec=U.LONG_TIMEOUT_MSEC,intervalMsec=U.STD_INTERVAL) public void testSpecificStartLevel() throws Exception {
  final String symbolicName="org.apache.commons.collections";
  assertEquals("Expecting bundle " + symbolicName + " to be installed","Installed",osgiConsole.getBundleState(symbolicName));
  final JSONObject status=U.getBundleData(C,client,symbolicName);
  final JSONArray props=status.getJSONArray("data").getJSONObject(0).getJSONArray("props");
  final String KEY="key";
  final String SL="Start Level";
  boolean found=false;
  for (int i=0; i < props.length(); i++) {
    final JSONObject o=props.getJSONObject(i);
    if (o.has(KEY) && SL.equals(o.getString(KEY))) {
      found=true;
      assertEquals("Expecting the start level that's set in provisioning model","99",o.getString("value"));
    }
  }
  assertTrue("Expecting start level to be found in JSON output",found);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.datasource.DataSourceIT </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testDataSourceAsService() throws Exception {
  Configuration config=ca.createFactoryConfiguration(PID,null);
  Dictionary<String,Object> p=new Hashtable<String,Object>();
  p.put("url","jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE");
  p.put("datasource.name","test");
  p.put("initialSize","5");
  p.put("defaultAutoCommit","default");
  p.put("defaultReadOnly","false");
  p.put("datasource.svc.properties",new String[]{"initSQL=SELECT 1"});
  p.put("maxActive",70);
  config.update(p);
  Filter filter=context.createFilter("(&(objectclass=javax.sql.DataSource)(datasource.name=test))");
  ServiceTracker<DataSource,DataSource> st=new ServiceTracker<DataSource,DataSource>(context,filter,null);
  st.open();
  DataSource ds=st.waitForService(10000);
  assertNotNull(ds);
  Connection conn=ds.getConnection();
  assertNotNull(conn);
  assertEquals("70",getProperty(ds,"poolProperties.maxActive"));
  assertEquals("5",getProperty(ds,"poolProperties.initialSize"));
  assertEquals("SELECT 1",getProperty(ds,"poolProperties.initSQL"));
  assertEquals("false",getProperty(ds,"poolProperties.defaultReadOnly"));
  assertNull(getProperty(ds,"poolProperties.defaultAutoCommit"));
  config=ca.listConfigurations("(datasource.name=test)")[0];
  Dictionary dic=config.getProperties();
  dic.put("defaultReadOnly",Boolean.TRUE);
  config.update(dic);
  TimeUnit.MILLISECONDS.sleep(100);
  assertEquals("true",getProperty(ds,"poolProperties.defaultReadOnly"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.commons.DefaultTopologyViewTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComparelocalClusterSyncTokenId() throws Exception {
  String clusterViewId=UUID.randomUUID().toString();
  String slingId=UUID.randomUUID().toString();
  String syncTokenId=UUID.randomUUID().toString();
  DefaultTopologyView t1=createSingleInstanceTopology(slingId,clusterViewId,syncTokenId);
  DefaultTopologyView t2=createSingleInstanceTopology(slingId,clusterViewId,syncTokenId);
  assertNull(t1.compareTopology(t2));
  assertNull(t2.compareTopology(t1));
  DefaultTopologyView t3=createSingleInstanceTopology(slingId,clusterViewId,UUID.randomUUID().toString());
  assertEquals(TopologyEvent.Type.TOPOLOGY_CHANGED,t1.compareTopology(t3));
  assertEquals(TopologyEvent.Type.TOPOLOGY_CHANGED,t3.compareTopology(t1));
  assertEquals(TopologyEvent.Type.TOPOLOGY_CHANGED,t2.compareTopology(t3));
  assertEquals(TopologyEvent.Type.TOPOLOGY_CHANGED,t3.compareTopology(t2));
  DefaultTopologyView t4=createSingleInstanceTopology(slingId,clusterViewId,null);
  assertEquals(TopologyEvent.Type.TOPOLOGY_CHANGED,t1.compareTopology(t4));
  assertEquals(TopologyEvent.Type.TOPOLOGY_CHANGED,t4.compareTopology(t1));
  assertEquals(TopologyEvent.Type.TOPOLOGY_CHANGED,t2.compareTopology(t4));
  assertEquals(TopologyEvent.Type.TOPOLOGY_CHANGED,t4.compareTopology(t2));
  DefaultTopologyView t5=createSingleInstanceTopology(slingId,clusterViewId,null);
  assertNull(t5.compareTopology(t4));
  assertNull(t4.compareTopology(t5));
}

</code></pre>

<br>
<pre class="type-11 type-6 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFind() throws Exception {
  DefaultTopologyView newView=TopologyHelper.createTopologyView(UUID.randomUUID().toString(),UUID.randomUUID().toString());
  TopologyHelper.createAndAddInstanceDescription(newView,newView.getClusterViews().iterator().next());
  try {
    newView.findInstances(null);
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  final DefaultInstanceDescription id=TopologyHelper.createAndAddInstanceDescription(newView,newView.getClusterViews().iterator().next());
  TopologyHelper.createAndAddInstanceDescription(newView,newView.getClusterViews().iterator().next());
  assertEquals(4,newView.findInstances(new InstanceFilter(){
    public boolean accept(    InstanceDescription instance){
      return true;
    }
  }
).size());
  assertEquals(1,newView.findInstances(new InstanceFilter(){
    public boolean accept(    InstanceDescription instance){
      return instance.getSlingId().equals(id.getSlingId());
    }
  }
).size());
  assertEquals(1,newView.findInstances(new InstanceFilter(){
    public boolean accept(    InstanceDescription instance){
      return instance.isLeader();
    }
  }
).size());
  assertEquals(1,newView.findInstances(new InstanceFilter(){
    boolean first=true;
    public boolean accept(    InstanceDescription instance){
      if (!first) {
        return false;
      }
      first=false;
      return true;
    }
  }
).size());
}

</code></pre>

<br>
<pre class="type-11 type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompare() throws Exception {
  DefaultTopologyView newView=TopologyHelper.createTopologyView(UUID.randomUUID().toString(),UUID.randomUUID().toString());
  try {
    newView.compareTopology(null);
    fail("Should complain about null");
  }
 catch (  Exception e) {
  }
  DefaultTopologyView oldView=TopologyHelper.cloneTopologyView(newView);
  assertNull(newView.compareTopology(oldView));
  DefaultInstanceDescription id=TopologyHelper.createInstanceDescription(newView.getClusterViews().iterator().next());
  TopologyHelper.addInstanceDescription(newView,id);
  assertEquals(Type.TOPOLOGY_CHANGED,newView.compareTopology(oldView));
  assertEquals(2,newView.getInstances().size());
  TopologyHelper.addInstanceDescription(newView,id);
  assertEquals(2,newView.getInstances().size());
  oldView=TopologyHelper.cloneTopologyView(newView);
  assertNull(newView.compareTopology(oldView));
  DefaultInstanceDescription instance=(DefaultInstanceDescription)newView.getInstances().iterator().next();
  instance.setProperty("a","b");
  assertEquals(Type.PROPERTIES_CHANGED,newView.compareTopology(oldView));
  oldView=TopologyHelper.cloneTopologyView(newView);
  assertNull(newView.compareTopology(oldView));
  instance.setProperty("a","B");
  assertEquals(Type.PROPERTIES_CHANGED,newView.compareTopology(oldView));
  oldView=TopologyHelper.cloneTopologyView(newView);
  assertNull(newView.compareTopology(oldView));
  instance.setProperty("a","B");
  assertNull(newView.compareTopology(oldView));
  Iterator<InstanceDescription> it=newView.getInstances().iterator();
  DefaultInstanceDescription firstInstance=(DefaultInstanceDescription)it.next();
  assertNotNull(firstInstance);
  DefaultInstanceDescription secondInstance=(DefaultInstanceDescription)it.next();
  assertNotNull(secondInstance);
  firstInstance.setProperty("c","d");
  DefaultClusterView cluster=new DefaultClusterView(UUID.randomUUID().toString());
  PrivateAccessor.setField(secondInstance,"clusterView",null);
  cluster.addInstanceDescription(secondInstance);
  assertEquals(Type.TOPOLOGY_CHANGED,newView.compareTopology(oldView));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testForcedLeaderChangeCompare() throws Exception {
  final String slingId1=UUID.randomUUID().toString();
  final DefaultTopologyView view1=TopologyHelper.createTopologyView(UUID.randomUUID().toString(),slingId1);
  final DefaultInstanceDescription id2=TopologyHelper.addInstanceDescription(view1,TopologyHelper.createInstanceDescription(view1.getClusterViews().iterator().next()));
  final String slingId2=id2.getSlingId();
  final DefaultInstanceDescription id3=TopologyHelper.addInstanceDescription(view1,TopologyHelper.createInstanceDescription(view1.getClusterViews().iterator().next()));
  final String slingId3=id3.getSlingId();
  DefaultTopologyView view2=TopologyHelper.cloneTopologyView(view1,slingId2);
  assertNotEquals(view1.getClusterViews().iterator().next().getLeader().getSlingId(),view2.getClusterViews().iterator().next().getLeader().getSlingId());
  assertTrue(view1.compareTopology(view2) == Type.TOPOLOGY_CHANGED);
  DefaultTopologyView view3=TopologyHelper.cloneTopologyView(view1,slingId3);
  assertNotEquals(view1.getClusterViews().iterator().next().getLeader().getSlingId(),view3.getClusterViews().iterator().next().getLeader().getSlingId());
  assertTrue(view1.compareTopology(view3) == Type.TOPOLOGY_CHANGED);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.connectors.LargeTopologyWithHubTest </h4><pre class="type-15 type-11 type-2 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Throwable {
  instances=new LinkedList<VirtualInstance>();
  final int defaultHeartbeatTimeout=3600;
  final int heartbeatTimeout=TimeoutsProvider.getInstance().getTimeout(defaultHeartbeatTimeout);
  VirtualInstanceBuilder hubBuilder=newBuilder().newRepository("/var/discovery/impl/",true).setDebugName("hub").setConnectorPingInterval(5).setConnectorPingTimeout(heartbeatTimeout);
  hub=hubBuilder.build();
  instances.add(hub);
  hub.getConfig().setViewCheckTimeout(heartbeatTimeout);
  hub.heartbeatsAndCheckView();
  hub.heartbeatsAndCheckView();
  assertNotNull(hub.getClusterViewService().getLocalClusterView());
  hub.startViewChecker(1);
  hub.dumpRepo();
  slingIds=new LinkedList<String>();
  slingIds.add(hub.getSlingId());
  logger.info("setUp: using heartbeatTimeout of " + heartbeatTimeout + "sec "+ "(default: "+ defaultHeartbeatTimeout+ ")");
  for (int i=0; i < TEST_SIZE; i++) {
    logger.info("setUp: creating instance" + i);
    VirtualInstanceBuilder builder2=newBuilder().newRepository("/var/discovery/impl/",false).setDebugName("instance" + i).setConnectorPingInterval(5).setConnectorPingTimeout(heartbeatTimeout);
    VirtualInstance instance=builder2.build();
    instances.add(instance);
    instance.getConfig().setViewCheckTimeout(heartbeatTimeout);
    instance.heartbeatsAndCheckView();
    instance.heartbeatsAndCheckView();
    ClusterView clusterView=instance.getClusterViewService().getLocalClusterView();
    assertNotNull(clusterView);
    new VirtualConnector(instance,hub);
    slingIds.add(instance.getSlingId());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.connectors.announcement.AnnouncementRegistryImplTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCluster() throws Exception {
  ClusterView cluster1=createCluster(2);
  ClusterView cluster2=createCluster(4);
  ClusterView cluster3=createCluster(7);
  Announcement ann1=createAnnouncement(cluster1,1,true);
  Announcement ann2=createAnnouncement(cluster2,2,true);
  Announcement ann3=createAnnouncement(cluster3,3,false);
  final String instance1=UUID.randomUUID().toString();
  final String instance2=UUID.randomUUID().toString();
  final String instance3=UUID.randomUUID().toString();
  ClusterView myCluster=createCluster(instance1,instance2,instance3);
  AnnouncementRegistryImpl registry1=AnnouncementRegistryImpl.testConstructorAndActivate(resourceResolverFactory,new DummySlingSettingsService(instance1),config);
  AnnouncementRegistryImpl registry2=AnnouncementRegistryImpl.testConstructorAndActivate(resourceResolverFactory,new DummySlingSettingsService(instance2),config);
  AnnouncementRegistryImpl registry3=AnnouncementRegistryImpl.testConstructorAndActivate(resourceResolverFactory,new DummySlingSettingsService(instance3),config);
  assertTrue(registry1.registerAnnouncement(ann1) != -1);
  assertTrue(registry2.registerAnnouncement(ann2) != -1);
  assertTrue(registry3.registerAnnouncement(ann3) != -1);
  assertTrue(registry1.hasActiveAnnouncement(cluster1.getInstances().get(1).getSlingId()));
  assertTrue(registry2.hasActiveAnnouncement(cluster2.getInstances().get(2).getSlingId()));
  assertTrue(registry3.hasActiveAnnouncement(cluster3.getInstances().get(3).getSlingId()));
  assertEquals(3,registry1.listAnnouncementsInSameCluster(myCluster).size());
  assertEquals(1,registry1.listLocalAnnouncements().size());
  assertEquals(0,registry1.listLocalIncomingAnnouncements().size());
  assertAnnouncements(registry1,myCluster,4,16);
  assertEquals(3,registry2.listAnnouncementsInSameCluster(myCluster).size());
  assertEquals(1,registry2.listLocalAnnouncements().size());
  assertEquals(0,registry2.listLocalIncomingAnnouncements().size());
  assertAnnouncements(registry2,myCluster,4,16);
  assertEquals(3,registry3.listAnnouncementsInSameCluster(myCluster).size());
  assertEquals(1,registry3.listLocalAnnouncements().size());
  assertEquals(1,registry3.listLocalIncomingAnnouncements().size());
  assertAnnouncements(registry3,myCluster,4,16);
  myCluster=createCluster(instance1,instance2);
  VirtualInstanceHelper.dumpRepo(resourceResolverFactory);
  assertEquals(2,registry1.listAnnouncementsInSameCluster(myCluster).size());
  assertEquals(1,registry1.listLocalAnnouncements().size());
  assertEquals(0,registry1.listLocalIncomingAnnouncements().size());
  assertAnnouncements(registry1,myCluster,3,8);
  assertEquals(2,registry2.listAnnouncementsInSameCluster(myCluster).size());
  assertEquals(1,registry2.listLocalAnnouncements().size());
  assertEquals(0,registry2.listLocalIncomingAnnouncements().size());
  assertAnnouncements(registry2,myCluster,3,8);
  Thread.sleep(10500);
  assertAnnouncements(registry1,myCluster,3,8);
  assertAnnouncements(registry2,myCluster,3,8);
  registry1.checkExpiredAnnouncements();
  registry2.checkExpiredAnnouncements();
  assertAnnouncements(registry1,myCluster,1,2);
  assertAnnouncements(registry2,myCluster,1,2);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExpiry() throws InterruptedException, NoSuchFieldException {
  ClusterView cluster1=createCluster(4);
  ClusterView cluster2=createCluster(3);
  ClusterView cluster3=createCluster(5);
  ClusterView myCluster=createCluster(slingId);
  Announcement ann1=createAnnouncement(cluster1,0,true);
  Announcement ann2=createAnnouncement(cluster2,1,true);
  Announcement ann3=createAnnouncement(cluster3,1,false);
  assertTrue(registry.registerAnnouncement(ann1) != -1);
  assertTrue(registry.registerAnnouncement(ann2) != -1);
  assertTrue(registry.registerAnnouncement(ann3) != -1);
  assertTrue(registry.hasActiveAnnouncement(cluster1.getInstances().get(0).getSlingId()));
  assertTrue(registry.hasActiveAnnouncement(cluster2.getInstances().get(1).getSlingId()));
  assertTrue(registry.hasActiveAnnouncement(cluster3.getInstances().get(1).getSlingId()));
  assertEquals(3,registry.listAnnouncementsInSameCluster(myCluster).size());
  assertEquals(3,registry.listLocalAnnouncements().size());
  assertEquals(1,registry.listLocalIncomingAnnouncements().size());
{
    Announcement testAnn=createAnnouncement(myCluster,0,false);
    assertEquals(1,testAnn.listInstances().size());
    registry.addAllExcept(testAnn,myCluster,null);
    assertEquals(13,testAnn.listInstances().size());
  }
  Thread.sleep(10500);
{
    Announcement testAnn=createAnnouncement(myCluster,0,false);
    assertEquals(1,testAnn.listInstances().size());
    registry.addAllExcept(testAnn,myCluster,null);
    assertEquals(13,testAnn.listInstances().size());
  }
  assertTrue(registry.registerAnnouncement(ann3) != -1);
{
    Announcement testAnn=createAnnouncement(myCluster,0,false);
    assertEquals(1,testAnn.listInstances().size());
    registry.addAllExcept(testAnn,myCluster,null);
    assertEquals(13,testAnn.listInstances().size());
  }
  registry.checkExpiredAnnouncements();
  assertEquals(1,registry.listAnnouncementsInSameCluster(myCluster).size());
  assertEquals(1,registry.listLocalAnnouncements().size());
  assertEquals(1,registry.listLocalIncomingAnnouncements().size());
  assertFalse(registry.hasActiveAnnouncement(cluster1.getInstances().get(0).getSlingId()));
  assertFalse(registry.hasActiveAnnouncement(cluster2.getInstances().get(1).getSlingId()));
  assertTrue(registry.hasActiveAnnouncement(cluster3.getInstances().get(1).getSlingId()));
{
    Announcement testAnn=createAnnouncement(myCluster,0,false);
    assertEquals(1,testAnn.listInstances().size());
    registry.addAllExcept(testAnn,myCluster,null);
    assertEquals(6,testAnn.listInstances().size());
  }
}

</code></pre>

<br>
<pre class="type-11 type-6 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterUnregister() throws Exception {
  try {
    registry.registerAnnouncement(null);
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    registry.unregisterAnnouncement(null);
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    registry.unregisterAnnouncement("");
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    new Announcement(null);
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    new Announcement("");
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  Announcement ann=new Announcement(slingId);
  assertFalse(ann.isValid());
  assertFalse(registry.registerAnnouncement(ann) != -1);
  DefaultClusterView localCluster=new DefaultClusterView(UUID.randomUUID().toString());
  ann.setLocalCluster(localCluster);
  assertFalse(ann.isValid());
  assertFalse(registry.registerAnnouncement(ann) != -1);
  try {
    registry.listInstances(localCluster);
    fail("doing getInstances() on an empty cluster should throw an illegalstateexception");
  }
 catch (  IllegalStateException ise) {
  }
  DefaultInstanceDescription instance=TopologyHelper.createInstanceDescription(ann.getOwnerId(),true,localCluster);
  assertEquals(instance.getSlingId(),ann.getOwnerId());
  assertTrue(ann.isValid());
  assertTrue(registry.registerAnnouncement(ann) != -1);
  assertEquals(1,registry.listInstances(localCluster).size());
  registry.checkExpiredAnnouncements();
  assertEquals(1,registry.listInstances(localCluster).size());
  registry.unregisterAnnouncement(ann.getOwnerId());
  assertEquals(0,registry.listInstances(localCluster).size());
  assertTrue(ann.isValid());
  assertTrue(registry.registerAnnouncement(ann) != -1);
  assertEquals(1,registry.listInstances(localCluster).size());
  Thread.sleep(10500);
  assertEquals(0,registry.listInstances(localCluster).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.its.AbstractClusterTest </h4><pre class="type-15 type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectorSwitching4139() throws Throwable {
  final int MIN_EVENT_DELAY=1;
  tearDown();
  final org.apache.log4j.Logger discoveryLogger=LogManager.getRootLogger().getLogger("org.apache.sling.discovery");
  logLevel=discoveryLogger.getLevel();
  discoveryLogger.setLevel(Level.DEBUG);
  instance1=newBuilder().setDebugName("instance1").newRepository("/var/discovery/clusterA/",true).setConnectorPingTimeout(10).setConnectorPingInterval(999).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance2=newBuilder().setDebugName("instance2").useRepositoryOf(instance1).setConnectorPingTimeout(10).setConnectorPingInterval(999).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance3=newBuilder().setDebugName("instance3").newRepository("/var/discovery/clusterB/",false).setConnectorPingTimeout(10).setConnectorPingInterval(999).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance4=newBuilder().setDebugName("instance4").useRepositoryOf(instance3).setConnectorPingTimeout(10).setConnectorPingInterval(999).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance5=newBuilder().setDebugName("instance5").newRepository("/var/discovery/clusterC/",false).setConnectorPingTimeout(10).setConnectorPingInterval(999).setMinEventDelay(MIN_EVENT_DELAY).build();
  runHeartbeatOnceWith(instance1,instance2,instance3,instance4,instance5);
  Thread.sleep(500);
  runHeartbeatOnceWith(instance1,instance2,instance3,instance4,instance5);
  Thread.sleep(500);
  runHeartbeatOnceWith(instance1,instance2,instance3,instance4,instance5);
  Thread.sleep(500);
  assertSameTopology(new SimpleClusterView(instance1,instance2));
  assertSameTopology(new SimpleClusterView(instance3,instance4));
  assertSameTopology(new SimpleClusterView(instance5));
  runHeartbeatOnceWith(instance1,instance2,instance3,instance4,instance5);
  pingConnector(instance3,instance1);
  pingConnector(instance5,instance1);
  Thread.sleep(500);
  runHeartbeatOnceWith(instance1,instance2,instance3,instance4,instance5);
  pingConnector(instance3,instance1);
  pingConnector(instance5,instance1);
  Thread.sleep(500);
  logger.info("testConnectorSwitching4139: instance1.slingId=" + instance1.slingId);
  logger.info("testConnectorSwitching4139: instance2.slingId=" + instance2.slingId);
  logger.info("testConnectorSwitching4139: instance3.slingId=" + instance3.slingId);
  logger.info("testConnectorSwitching4139: instance4.slingId=" + instance4.slingId);
  logger.info("testConnectorSwitching4139: instance5.slingId=" + instance5.slingId);
  instance1.dumpRepo();
  assertSameTopology(new SimpleClusterView(instance1,instance2),new SimpleClusterView(instance3,instance4),new SimpleClusterView(instance5));
  boolean success=false;
  for (int i=0; i < 25; i++) {
    runHeartbeatOnceWith(instance2,instance3,instance4,instance5);
    final boolean ping1=pingConnector(instance3,instance2);
    final boolean ping2=pingConnector(instance5,instance2);
    if (ping1 && ping2) {
      success=true;
      logger.info("testConnectorSwitching4139: successfully switched all pings to instance2 after " + i + " rounds.");
      if (i < 20) {
        logger.info("testConnectorSwitching4139: min loop cnt not yet reached: i=" + i);
        Thread.sleep(1000);
        continue;
      }
      break;
    }
    logger.info("testConnectorSwitching4139: looping cos ping1=" + ping1 + ", ping2="+ ping2);
    Thread.sleep(1000);
  }
  assertTrue(success);
  runHeartbeatOnceWith(instance2,instance3,instance4,instance5);
  assertTrue(pingConnector(instance3,instance2));
  assertTrue(pingConnector(instance5,instance2));
  instance2.dumpRepo();
  assertSameTopology(new SimpleClusterView(instance2),new SimpleClusterView(instance3,instance4),new SimpleClusterView(instance5));
  instance4.stopViewChecker();
  instance1Restarted=newBuilder().setDebugName("instance1").useRepositoryOf(instance2).setConnectorPingTimeout(Integer.MAX_VALUE).setMinEventDelay(1).setSlingId(instance1.getSlingId()).build();
  runHeartbeatOnceWith(instance1Restarted,instance2,instance3,instance5);
  Thread.sleep(2000);
  assertTrue(pingConnector(instance3,instance2));
  assertTrue(pingConnector(instance5,instance2));
  success=false;
  for (int i=0; i < 40; i++) {
    runHeartbeatOnceWith(instance1Restarted,instance2,instance3,instance5);
    instance1.getViewChecker().checkView();
    try {
      pingConnector(instance3,instance2);
    }
 catch (    UndefinedClusterViewException ucve) {
    }
    pingConnector(instance5,instance2);
    final TopologyView topology=instance3.getDiscoveryService().getTopology();
    InstanceDescription i3=null;
    for (Iterator<InstanceDescription> it=topology.getInstances().iterator(); it.hasNext(); ) {
      final InstanceDescription id=it.next();
      if (id.getSlingId().equals(instance3.slingId)) {
        i3=id;
        break;
      }
    }
    assertNotNull(i3);
    assertEquals(instance3.slingId,i3.getSlingId());
    final ClusterView i3Cluster=i3.getClusterView();
    final int i3ClusterSize=i3Cluster.getInstances().size();
    if (i3ClusterSize == 1) {
      if (i < 30) {
        logger.info("testConnectorSwitching4139: [2] min loop cnt not yet reached: i=" + i);
        Thread.sleep(500);
        continue;
      }
      success=true;
      logger.info("testConnectorSwitching4139: i3ClusterSize: " + i3ClusterSize + ", i="+ i+ " (success)");
      break;
    }
    logger.info("testConnectorSwitching4139: i3ClusterSize: " + i3ClusterSize + ", i="+ i);
    Thread.sleep(500);
  }
  logger.info("testConnectorSwitching4139: instance1Restarted.slingId=" + instance1Restarted.slingId);
  logger.info("testConnectorSwitching4139: instance2.slingId=" + instance2.slingId);
  logger.info("testConnectorSwitching4139: instance3.slingId=" + instance3.slingId);
  logger.info("testConnectorSwitching4139: instance4.slingId=" + instance4.slingId);
  logger.info("testConnectorSwitching4139: instance5.slingId=" + instance5.slingId);
  instance1Restarted.dumpRepo();
  assertTrue(success);
  assertSameTopology(new SimpleClusterView(instance1Restarted,instance2),new SimpleClusterView(instance3),new SimpleClusterView(instance5));
  instance1Restarted.stop();
}

</code></pre>

<br>
<pre class="type-15 type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDuplicateInstance3726() throws Throwable {
  logger.info("testDuplicateInstance3726: start");
  final int MIN_EVENT_DELAY=1;
  tearDown();
  final org.apache.log4j.Logger discoveryLogger=LogManager.getRootLogger().getLogger("org.apache.sling.discovery");
  logLevel=discoveryLogger.getLevel();
  discoveryLogger.setLevel(Level.DEBUG);
  instance1=newBuilder().setDebugName("instance1").newRepository("/var/discovery/clusterA/",true).setConnectorPingTimeout(15).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance2=newBuilder().setDebugName("instance2").useRepositoryOf(instance1).setConnectorPingTimeout(15).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance3=newBuilder().setDebugName("instance3").newRepository("/var/discovery/clusterB/",false).setConnectorPingTimeout(15).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance5=newBuilder().setDebugName("instance5").newRepository("/var/discovery/clusterC/",false).setConnectorPingTimeout(15).setMinEventDelay(MIN_EVENT_DELAY).build();
  runHeartbeatOnceWith(instance1,instance2,instance3,instance5);
  Thread.sleep(500);
  runHeartbeatOnceWith(instance1,instance2,instance3,instance5);
  Thread.sleep(500);
  runHeartbeatOnceWith(instance1,instance2,instance3,instance5);
  Thread.sleep(500);
  assertSameTopology(new SimpleClusterView(instance1,instance2));
  assertSameTopology(new SimpleClusterView(instance3));
  assertSameTopology(new SimpleClusterView(instance5));
  pingConnector(instance3,instance1);
  pingConnector(instance5,instance1);
  pingConnector(instance3,instance1);
  pingConnector(instance5,instance1);
  logger.info("testDuplicateInstance3726: instance1.slingId=" + instance1.slingId);
  logger.info("testDuplicateInstance3726: instance2.slingId=" + instance2.slingId);
  logger.info("testDuplicateInstance3726: instance3.slingId=" + instance3.slingId);
  logger.info("testDuplicateInstance3726: instance5.slingId=" + instance5.slingId);
  instance1.dumpRepo();
  assertSameTopology(new SimpleClusterView(instance1,instance2),new SimpleClusterView(instance3),new SimpleClusterView(instance5));
  instance1.stopViewChecker();
  boolean success=false;
  for (int i=0; i < 25; i++) {
    runHeartbeatOnceWith(instance2,instance3,instance5);
    final boolean ping1=pingConnector(instance3,instance2);
    final boolean ping2=pingConnector(instance5,instance2);
    if (ping1 && ping2) {
      success=true;
      logger.info("testDuplicateInstance3726: successfully switched all pings to instance2 after " + i + " rounds.");
      if (i < 20) {
        logger.info("testDuplicateInstance3726: min loop cnt not yet reached: i=" + i);
        Thread.sleep(1000);
        continue;
      }
      break;
    }
    logger.info("testDuplicateInstance3726: looping");
    Thread.sleep(1000);
  }
  assertTrue(success);
  runHeartbeatOnceWith(instance2,instance3,instance5);
  assertTrue(pingConnector(instance3,instance2));
  assertTrue(pingConnector(instance5,instance2));
  instance2.dumpRepo();
  assertSameTopology(new SimpleClusterView(instance2),new SimpleClusterView(instance3),new SimpleClusterView(instance5));
  instance1Restarted=newBuilder().setDebugName("instance1").useRepositoryOf(instance2).setConnectorPingTimeout(Integer.MAX_VALUE).setMinEventDelay(1).setSlingId(instance1.getSlingId()).build();
  instance4=newBuilder().setDebugName("instance4").useRepositoryOf(instance3).setConnectorPingTimeout(30).setMinEventDelay(MIN_EVENT_DELAY).build();
  for (int i=0; i < 3; i++) {
    runHeartbeatOnceWith(instance1Restarted,instance2,instance3,instance4,instance5);
    Thread.sleep(250);
    try {
      pingConnector(instance3,instance2);
    }
 catch (    UndefinedClusterViewException ucve) {
    }
    assertTrue(pingConnector(instance5,instance2));
  }
  instance1Restarted.dumpRepo();
  logger.info("testDuplicateInstance3726: instance1Restarted.slingId=" + instance1Restarted.slingId);
  logger.info("testDuplicateInstance3726: instance2.slingId=" + instance2.slingId);
  logger.info("testDuplicateInstance3726: instance3.slingId=" + instance3.slingId);
  logger.info("testDuplicateInstance3726: instance4.slingId=" + instance4.slingId);
  logger.info("testDuplicateInstance3726: instance5.slingId=" + instance5.slingId);
  assertTrue(success);
  assertSameTopology(new SimpleClusterView(instance1Restarted,instance2),new SimpleClusterView(instance3,instance4),new SimpleClusterView(instance5));
  instance1Restarted.stop();
  logger.info("testDuplicateInstance3726: end");
}

</code></pre>

<br>
<pre class="type-11 type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClusterView() throws Exception {
  logger.info("testClusterView: start");
  assertNotNull(instance1);
  assertNotNull(instance2);
  assertNull(instance3);
  instance3=newBuilder().setDebugName("thirdInstance").useRepositoryOf(instance1).build();
  assertNotNull(instance3);
  assertEquals(instance1.getSlingId(),instance1.getClusterViewService().getSlingId());
  assertEquals(instance2.getSlingId(),instance2.getClusterViewService().getSlingId());
  assertEquals(instance3.getSlingId(),instance3.getClusterViewService().getSlingId());
  try {
    instance1.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  try {
    instance2.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  try {
    instance3.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  instance1.dumpRepo();
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  instance3.heartbeatsAndCheckView();
  instance1.dumpRepo();
  logger.info("testClusterView: 1st 2s sleep");
  Thread.sleep(2000);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  instance3.heartbeatsAndCheckView();
  logger.info("testClusterView: 2nd 2s sleep");
  Thread.sleep(2000);
  instance1.dumpRepo();
  String clusterId1=instance1.getClusterViewService().getLocalClusterView().getId();
  logger.info("clusterId1=" + clusterId1);
  String clusterId2=instance2.getClusterViewService().getLocalClusterView().getId();
  logger.info("clusterId2=" + clusterId2);
  String clusterId3=instance3.getClusterViewService().getLocalClusterView().getId();
  logger.info("clusterId3=" + clusterId3);
  assertEquals(clusterId1,clusterId2);
  assertEquals(clusterId1,clusterId3);
  assertEquals(3,instance1.getClusterViewService().getLocalClusterView().getInstances().size());
  assertEquals(3,instance2.getClusterViewService().getLocalClusterView().getInstances().size());
  assertEquals(3,instance3.getClusterViewService().getLocalClusterView().getInstances().size());
  logger.info("testClusterView: end");
}

</code></pre>

<br>
<pre class="type-11 type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStableClusterId() throws Throwable {
  logger.info("testStableClusterId: start");
  instance2.stopViewChecker();
  instance1.stopViewChecker();
  instance2.stop();
  instance1.stop();
  instance1=newBuilder().setDebugName("firstInstance").newRepository("/var/discovery/impl/",true).setConnectorPingTimeout(100).setMinEventDelay(1).build();
  instance2=newBuilder().setDebugName("secondInstance").useRepositoryOf(instance1).setConnectorPingTimeout(100).setMinEventDelay(1).build();
  assertNotNull(instance1);
  assertNotNull(instance2);
  try {
    instance1.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  try {
    instance2.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  String newClusterId1=instance1.getClusterViewService().getLocalClusterView().getId();
  String newClusterId2=instance2.getClusterViewService().getLocalClusterView().getId();
  assertEquals(newClusterId1,newClusterId1);
  instance1.dumpRepo();
  assertEquals(2,instance1.getClusterViewService().getLocalClusterView().getInstances().size());
  assertEquals(2,instance2.getClusterViewService().getLocalClusterView().getInstances().size());
  instance2.getConfig().setViewCheckTimeout(1);
  instance1.getConfig().setViewCheckTimeout(1);
  instance2.stopViewChecker();
  instance1.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  assertEquals(1,instance1.getClusterViewService().getLocalClusterView().getInstances().size());
  try {
    instance2.getViewChecker().checkView();
    instance2.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  instance1.dumpRepo();
  String actualClusterId=instance1.getClusterViewService().getLocalClusterView().getId();
  logger.info("expected cluster id: " + newClusterId1);
  logger.info("actual   cluster id: " + actualClusterId);
  assertEquals(newClusterId1,actualClusterId);
  logger.info("testStableClusterId: end");
}

</code></pre>

<br>
<pre class="type-11 type-12 type-6 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test plan:
 * * have a discoveryservice with two listeners registered
 * * one of them (the 'first' one) is long running
 * * during one of the topology changes, when the first
 * one is hit, deactivate the discovery service
 * * that deactivation used to block (SLING-4755) due
 * to synchronized(lock) which was blocked by the
 * long running listener. With having asynchronous
 * event sending this should no longer be the case
 * * also, once asserted that deactivation finished,
 * and that the first listener is still busy, make
 * sure that once the first listener finishes, that
 * the second listener still gets the event
 * @throws Throwable 
 */
@Test public void testLongRunningListener() throws Throwable {
  instance1.getConfig().setViewCheckTimeout(2);
  instance2.getConfig().setViewCheckTimeout(2);
  logger.info("testLongRunningListener : letting instance2 remain silent from now on");
  instance1.heartbeatsAndCheckView();
  Thread.sleep(1500);
  instance1.heartbeatsAndCheckView();
  Thread.sleep(1500);
  instance1.heartbeatsAndCheckView();
  Thread.sleep(1500);
  instance1.heartbeatsAndCheckView();
  logger.info("testLongRunningListener : instance 2 should now be considered dead");
  LongRunningListener longRunningListener1=new LongRunningListener();
  AssertingTopologyEventListener fastListener2=new AssertingTopologyEventListener();
  fastListener2.addExpected(Type.TOPOLOGY_INIT);
  longRunningListener1.assertNoFail();
  assertEquals(1,fastListener2.getRemainingExpectedCount());
  logger.info("testLongRunningListener : binding longRunningListener1 ...");
  instance1.bindTopologyEventListener(longRunningListener1);
  logger.info("testLongRunningListener : binding fastListener2 ...");
  instance1.bindTopologyEventListener(fastListener2);
  logger.info("testLongRunningListener : waiting a bit for longRunningListener1 to receive the TOPOLOGY_INIT event");
  Thread.sleep(2500);
  assertEquals(0,fastListener2.getRemainingExpectedCount());
  assertTrue(longRunningListener1.initReceived);
  fastListener2.addExpected(Type.TOPOLOGY_CHANGING);
  fastListener2.addExpected(Type.TOPOLOGY_CHANGED);
  instance1.getConfig().setViewCheckTimeout(10);
  instance2.getConfig().setViewCheckTimeout(10);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.dumpRepo();
  longRunningListener1.assertNoFail();
  assertEquals(0,fastListener2.getUnexpectedCount());
  assertEquals(1,fastListener2.getRemainingExpectedCount());
  assertEquals(1,longRunningListener1.noninitReceived);
  Thread.sleep(2000);
  assertTrue(longRunningListener1.getChangedSemaphore().hasQueuedThreads());
  Thread.sleep(2000);
  assertEquals(0,fastListener2.getUnexpectedCount());
  assertEquals(1,fastListener2.getRemainingExpectedCount());
  assertEquals(1,longRunningListener1.noninitReceived);
  assertTrue(longRunningListener1.getChangedSemaphore().hasQueuedThreads());
  final List<Exception> asyncException=new LinkedList<Exception>();
  Thread th=new Thread(new Runnable(){
    public void run(){
      try {
        instance1.stop();
      }
 catch (      Exception e) {
synchronized (asyncException) {
          asyncException.add(e);
        }
      }
    }
  }
);
  th.start();
  logger.info("Waiting max 4 sec...");
  th.join(4000);
  logger.info("Done waiting max 4 sec...");
  if (th.isAlive()) {
    logger.warn("Thread still alive: " + th.isAlive());
    longRunningListener1.getChangedSemaphore().release();
    fail("Thread was still alive");
  }
  logger.info("Thread was no longer alive: " + th.isAlive());
synchronized (asyncException) {
    logger.info("Async exceptions: " + asyncException.size());
    if (asyncException.size() != 0) {
      longRunningListener1.getChangedSemaphore().release();
      fail("async exceptions: " + asyncException.size() + ", first: "+ asyncException.get(0));
    }
  }
  longRunningListener1.getChangedSemaphore().release();
  Thread.sleep(500);
  assertEquals(0,fastListener2.getUnexpectedCount());
  assertEquals(0,fastListener2.getRemainingExpectedCount());
  assertEquals(2,longRunningListener1.noninitReceived);
  assertFalse(longRunningListener1.getChangedSemaphore().hasQueuedThreads());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.its.AbstractSingleInstanceTest </h4><pre class="type-11 type-6 type-13 type-9 type-7 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetters() throws UndefinedClusterViewException, InterruptedException {
  logger.info("testGetters: start");
  assertNotNull(instance);
  logger.info("sling id=" + instance.getSlingId());
  try {
    instance.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  instance.heartbeatsAndCheckView();
  Thread.sleep(4000);
  assertNotNull(instance.getClusterViewService().getLocalClusterView());
  ClusterView cv=instance.getClusterViewService().getLocalClusterView();
  logger.info("cluster view: id=" + cv.getId());
  assertNotNull(cv.getId());
  assertNotSame(cv.getId(),"");
  List<InstanceDescription> instances=cv.getInstances();
  assertNotNull(instances);
  assertTrue(instances.size() == 1);
  InstanceDescription myInstance=instances.get(0);
  assertNotNull(myInstance);
  assertTrue(myInstance.getClusterView() == cv);
  logger.info("instance id: " + myInstance.getSlingId());
  assertEquals(instance.getSlingId(),myInstance.getSlingId());
  Map<String,String> properties=myInstance.getProperties();
  assertNotNull(properties);
  assertNull(myInstance.getProperty("foo"));
  assertTrue(myInstance.isLeader());
  assertTrue(myInstance.isLocal());
  logger.info("testGetters: end");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.its.AbstractTopologyEventTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetDuringDelay() throws Throwable {
  instance1=newBuilder().setDebugName("firstInstanceA").newRepository("/var/discovery/impl/",true).setConnectorPingTimeout(20).setMinEventDelay(6).build();
  AssertingTopologyEventListener l1=new AssertingTopologyEventListener("instance1.l1");
  l1.addExpected(TopologyEvent.Type.TOPOLOGY_INIT);
  instance1.bindTopologyEventListener(l1);
  TopologyView earlyTopo=instance1.getDiscoveryService().getTopology();
  assertNotNull(earlyTopo);
  assertFalse(earlyTopo.isCurrent());
  assertEquals(1,earlyTopo.getInstances().size());
  for (int i=0; i < 4; i++) {
    instance1.heartbeatsAndCheckView();
    Thread.sleep(125);
  }
  TopologyView secondTopo=instance1.getDiscoveryService().getTopology();
  assertEquals(1,secondTopo.getInstances().size());
  assertEquals(instance1.getSlingId(),secondTopo.getInstances().iterator().next().getSlingId());
  assertTrue(secondTopo.isCurrent());
  instance1.dumpRepo();
  assertEarlyAndFirstClusterViewIdMatches(earlyTopo,secondTopo);
  Thread.sleep(500);
  assertEquals(0,l1.getRemainingExpectedCount());
  assertEquals(0,l1.getUnexpectedCount());
  l1.addExpected(TopologyEvent.Type.TOPOLOGY_CHANGING);
  instance2=newBuilder().setDebugName("secondInstanceB").useRepositoryOf(instance1).setConnectorPingTimeout(20).setMinEventDelay(1).build();
  AssertingTopologyEventListener l2=new AssertingTopologyEventListener("instance2.l1");
  l2.addExpected(TopologyEvent.Type.TOPOLOGY_INIT);
  instance2.bindTopologyEventListener(l2);
  for (int i=0; i < 4; i++) {
    instance2.heartbeatsAndCheckView();
    instance1.heartbeatsAndCheckView();
    Thread.sleep(750);
  }
  assertEquals(0,l1.getUnexpectedCount());
  TopologyView topo2=instance2.getDiscoveryService().getTopology();
  assertTrue(topo2.isCurrent());
  assertEquals(2,topo2.getInstances().size());
  TopologyView topo1=instance1.getDiscoveryService().getTopology();
  assertTrue(topo1.isCurrent());
  assertEquals(2,topo1.getInstances().size());
  l1.addExpected(TopologyEvent.Type.TOPOLOGY_CHANGED);
  Thread.sleep(5000);
  assertEquals(0,l1.getRemainingExpectedCount());
  assertEquals(0,l1.getUnexpectedCount());
  assertEquals(0,l2.getRemainingExpectedCount());
  assertEquals(0,l2.getUnexpectedCount());
  assertTrue(instance2.getDiscoveryService().getTopology().isCurrent());
  assertEquals(2,instance2.getDiscoveryService().getTopology().getInstances().size());
  assertTrue(instance1.getDiscoveryService().getTopology().isCurrent());
  assertEquals(2,instance1.getDiscoveryService().getTopology().getInstances().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.its.TopologyTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTwoNodes() throws Throwable {
  VirtualInstanceBuilder builder1=newBuilder().newRepository("/var/discovery/impl/",true).setDebugName("instance1").setConnectorPingInterval(20).setConnectorPingTimeout(200);
  VirtualInstance instance1=builder1.build();
  instances.add(instance1);
  VirtualInstanceBuilder builder2=newBuilder().useRepositoryOf(builder1).setDebugName("instance2").setConnectorPingInterval(20).setConnectorPingTimeout(200);
  VirtualInstance instance2=builder2.build();
  instances.add(instance2);
  instance1.getConfig().setViewCheckTimeout(8);
  instance1.getConfig().setViewCheckInterval(1);
  instance2.getConfig().setViewCheckTimeout(2);
  instance2.getConfig().setViewCheckInterval(1);
  for (int i=0; i < 5; i++) {
    instance1.heartbeatsAndCheckView();
    instance2.heartbeatsAndCheckView();
    Thread.sleep(500);
  }
  Set<InstanceDescription> instances1=instance1.getDiscoveryService().getTopology().getInstances();
  Set<InstanceDescription> instances2=instance2.getDiscoveryService().getTopology().getInstances();
  assertEquals(1,instances1.size());
  assertEquals(1,instances2.size());
  assertEquals(instance1.getSlingId(),instances1.iterator().next().getSlingId());
  assertEquals(instance2.getSlingId(),instances2.iterator().next().getSlingId());
  new VirtualConnector(instance1,instance2);
  Collection<Announcement> instance1LocalAnnouncements=instance1.getAnnouncementRegistry().listLocalAnnouncements();
  assertEquals(1,instance1LocalAnnouncements.size());
  Announcement instance1LocalAnnouncement=instance1LocalAnnouncements.iterator().next();
  assertEquals(instance2.getSlingId(),instance1LocalAnnouncement.getOwnerId());
  assertEquals(true,instance1LocalAnnouncement.isInherited());
  Collection<Announcement> instance2LocalAnnouncements=instance2.getAnnouncementRegistry().listLocalAnnouncements();
  assertEquals(1,instance2LocalAnnouncements.size());
  Announcement instance2LocalAnnouncement=instance2LocalAnnouncements.iterator().next();
  assertEquals(instance1.getSlingId(),instance2LocalAnnouncement.getOwnerId());
  assertEquals(false,instance2LocalAnnouncement.isInherited());
  TopologyHelper.assertTopologyConsistsOf(instance1.getDiscoveryService().getTopology(),instance1.getSlingId(),instance2.getSlingId());
  TopologyHelper.assertTopologyConsistsOf(instance2.getDiscoveryService().getTopology(),instance1.getSlingId(),instance2.getSlingId());
  instance1LocalAnnouncements=instance1.getAnnouncementRegistry().listLocalAnnouncements();
  assertEquals(1,instance1LocalAnnouncements.size());
  instance2LocalAnnouncements=instance2.getAnnouncementRegistry().listLocalAnnouncements();
  assertEquals(1,instance2LocalAnnouncements.size());
  Thread.sleep(2200);
  instance1LocalAnnouncements=instance1.getAnnouncementRegistry().listLocalAnnouncements();
  assertEquals(1,instance1LocalAnnouncements.size());
  instance2LocalAnnouncements=instance2.getAnnouncementRegistry().listLocalAnnouncements();
  assertEquals(0,instance2LocalAnnouncements.size());
  logger.info("testTwoNodes: instance1: " + instance1.getSlingId());
  instance1.dumpRepo();
  logger.info("testTwoNodes: instance2: " + instance2.getSlingId());
  instance2.dumpRepo();
  TopologyHelper.assertTopologyConsistsOf(instance1.getDiscoveryService().getTopology(),instance1.getSlingId(),instance2.getSlingId());
  TopologyHelper.assertTopologyConsistsOf(instance2.getDiscoveryService().getTopology(),instance2.getSlingId());
  Thread.sleep(6000);
  instance1LocalAnnouncements=instance1.getAnnouncementRegistry().listLocalAnnouncements();
  assertEquals(0,instance1LocalAnnouncements.size());
  instance2LocalAnnouncements=instance2.getAnnouncementRegistry().listLocalAnnouncements();
  assertEquals(0,instance2LocalAnnouncements.size());
  TopologyHelper.assertTopologyConsistsOf(instance1.getDiscoveryService().getTopology(),instance1.getSlingId());
  TopologyHelper.assertTopologyConsistsOf(instance2.getDiscoveryService().getTopology(),instance2.getSlingId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.commons.InstancesDiffTest </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIsInClusterView() throws Exception {
  ClusterView clusterView=clusterView("viewId");
  Collection<InstanceDescription> instances=new InstancesDiff(Arrays.asList(new Instance("one",true,false,Collections.<String,String>emptyMap(),"otherView"),new Instance("two",false,true,Collections.<String,String>emptyMap(),"viewId")),empty()).all(true).isInClusterView(clusterView).get();
  TestCase.assertEquals(1,instances.size());
  TestCase.assertEquals("two",instances.iterator().next().getSlingId());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIsNotInClusterView() throws Exception {
  ClusterView clusterView=clusterView("yet-another-view");
  Collection<InstanceDescription> instances=new InstancesDiff(Arrays.asList(new Instance("one",true,false,Collections.<String,String>emptyMap(),"otherView"),new Instance("two",false,true,Collections.<String,String>emptyMap(),"viewId")),empty()).all(true).isInClusterView(clusterView).get();
  TestCase.assertEquals(0,instances.size());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAllRetainedCollection() throws Exception {
  Instance oldInstance=new Instance("one");
  Instance newInstance=new Instance("one");
  InstancesDiff diff=new InstancesDiff(Collections.singletonList(oldInstance),Collections.singletonList(newInstance));
  TestCase.assertEquals(1,diff.all(true).get().size());
  TestCase.assertEquals(newInstance,diff.all(true).get().iterator().next());
  TestCase.assertEquals(1,diff.all(false).get().size());
  TestCase.assertEquals(oldInstance,diff.all(false).get().iterator().next());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRetainedCollection() throws Exception {
  Instance oldInstance=new Instance("one");
  Instance newInstance=new Instance("one");
  InstancesDiff diff=new InstancesDiff(Collections.singletonList(oldInstance),Collections.singletonList(newInstance));
  TestCase.assertEquals(1,diff.retained(true).get().size());
  TestCase.assertEquals(newInstance,diff.retained(true).get().iterator().next());
  TestCase.assertEquals(oldInstance,diff.retained(false).get().iterator().next());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.commons.providers.base.TestMinEventDelayHandler </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReactivate() throws Exception {
  logger.info("testReactivate: start");
  mgr.installMinEventDelayHandler(sds,scheduler,2);
  final DummyListener listener=new DummyListener();
  logger.info("testReactivate: calling handleActivated");
  mgr.bind(listener);
  mgr.handleActivated();
  TestHelper.assertNoEvents(listener);
  final DummyTopologyView view1=new DummyTopologyView().addInstance();
  final DummyTopologyView view2=DummyTopologyView.clone(view1).addInstance(UUID.randomUUID().toString(),(DefaultClusterView)view1.getLocalInstance().getClusterView(),false,false);
  final DummyTopologyView view3=DummyTopologyView.clone(view1).addInstance(UUID.randomUUID().toString(),(DefaultClusterView)view1.getLocalInstance().getClusterView(),false,false);
  logger.info("testReactivate: calling handleNewView...");
  mgr.handleNewView(view1);
  logger.info("testReactivate: asserting init event");
  TestHelper.assertEvents(mgr,listener,EventHelper.newInitEvent(view1));
  logger.info("testReactivate: calling handleChanging...");
  mgr.handleChanging();
  TestHelper.assertEvents(mgr,listener,EventHelper.newChangingEvent(view1));
  logger.info("testReactivate: calling handleNewView 2nd time...");
  mgr.handleNewView(view2);
  TestHelper.assertNoEvents(listener);
  sds.setTopoology(view2);
  logger.info("testReactivate: waiting for async events to have been processed - 4sec");
  Thread.sleep(4000);
  logger.info("testReactivate: waiting for async events to have been processed - max another 2sec");
  assertEquals(0,mgr.waitForAsyncEvents(2000));
  logger.info("testReactivate: asserting CHANGED event");
  TestHelper.assertEvents(mgr,listener,EventHelper.newChangedEvent(view1,view2));
  logger.info("testReactivate: calling handleChanging...");
  mgr.handleChanging();
  TestHelper.assertEvents(mgr,listener,EventHelper.newChangingEvent(view2));
  logger.info("testReactivate: calling handleNewView 2nd time...");
  mgr.handleNewView(view3);
  TestHelper.assertNoEvents(listener);
  sds.setTopoology(view3);
  logger.info("testReactivate: doing handleDeactivated");
  final AsyncEventSender asyncEventSender=mgr.getAsyncEventSender();
  Field field=mgr.getClass().getDeclaredField("minEventDelayHandler");
  field.setAccessible(true);
  MinEventDelayHandler minEventDelayHandler=(MinEventDelayHandler)field.get(mgr);
  assertNotNull(minEventDelayHandler);
  view3.setNotCurrent();
  sds.setTopoology(view3);
  mgr.handleDeactivated();
  TestHelper.assertNoEvents(listener);
  logger.info("testReactivate: now waiting 5 sec to make sure the MinEventDelayHandler would be finished");
  TestHelper.assertNoEvents(listener);
  Thread.sleep(5000);
  logger.info("testReactivate: after those 5 sec there should however still not be any new event");
  TestHelper.assertNoEvents(listener);
  int cnt=asyncEventSender.getInFlightEventCnt();
  if (minEventDelayHandler != null && minEventDelayHandler.isDelaying()) {
    cnt++;
  }
  assertEquals(0,cnt);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.commons.providers.base.TestViewStateManager </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnlyDiffersInProperties() throws Exception {
  final org.apache.log4j.Logger discoveryLogger=LogManager.getRootLogger().getLogger("org.apache.sling.discovery");
  discoveryLogger.setLevel(Level.DEBUG);
  logger.info("testOnlyDiffersInProperties: start");
  final String slingId1=UUID.randomUUID().toString();
  final String slingId2=UUID.randomUUID().toString();
  final String slingId3=UUID.randomUUID().toString();
  final String clusterId=UUID.randomUUID().toString();
  final DefaultClusterView cluster=new DefaultClusterView(clusterId);
  final DummyTopologyView view1=new DummyTopologyView().addInstance(slingId1,cluster,true,true).addInstance(slingId2,cluster,false,false).addInstance(slingId3,cluster,false,false);
  final DummyTopologyView view2=DummyTopologyView.clone(view1).removeInstance(slingId2);
  final DummyTopologyView view3=DummyTopologyView.clone(view1).removeInstance(slingId2).removeInstance(slingId3);
  DummyTopologyView view1Cloned=DummyTopologyView.clone(view1);
  logger.info("testOnlyDiffersInProperties: handleNewView(view1)");
  mgr.handleNewView(view1);
  logger.info("testOnlyDiffersInProperties: handleActivated()");
  mgr.handleActivated();
  assertEquals(0,mgr.waitForAsyncEvents(5000));
  assertFalse(mgr.onlyDiffersInProperties(view1));
  assertFalse(mgr.onlyDiffersInProperties(view2));
  assertFalse(mgr.onlyDiffersInProperties(view3));
  logger.info("testOnlyDiffersInProperties: handleNewView(view2)");
  mgr.handleNewView(view2);
  assertEquals(0,mgr.waitForAsyncEvents(5000));
  assertFalse(mgr.onlyDiffersInProperties(view1));
  assertFalse(mgr.onlyDiffersInProperties(view2));
  assertFalse(mgr.onlyDiffersInProperties(view3));
  logger.info("testOnlyDiffersInProperties: handleNewView(view3)");
  mgr.handleNewView(view3);
  assertEquals(0,mgr.waitForAsyncEvents(5000));
  assertFalse(mgr.onlyDiffersInProperties(view1));
  assertFalse(mgr.onlyDiffersInProperties(view2));
  assertFalse(mgr.onlyDiffersInProperties(view3));
  final DummyTopologyView view4=DummyTopologyView.clone(view1Cloned);
  final DummyTopologyView view5=DummyTopologyView.clone(view1Cloned);
  final DummyTopologyView view6=DummyTopologyView.clone(view1Cloned);
  logger.info("testOnlyDiffersInProperties: handleNewView(view1cloned)");
  mgr.handleNewView(view1Cloned);
  assertEquals(0,mgr.waitForAsyncEvents(5000));
  DefaultInstanceDescription i4_1=(DefaultInstanceDescription)view4.getInstance(slingId1);
  i4_1.setProperty("a","b");
  logger.info("testOnlyDiffersInProperties: onlyDiffersInProperties(view4)");
  assertTrue(mgr.onlyDiffersInProperties(view4));
  DefaultInstanceDescription i5_1=(DefaultInstanceDescription)view5.getInstance(slingId1);
  i5_1.setProperty("a","b");
  logger.info("testOnlyDiffersInProperties: onlyDiffersInProperties(view5)");
  assertTrue(mgr.onlyDiffersInProperties(view5));
  DummyTopologyView view4Cloned=DummyTopologyView.clone(view4);
  mgr.handleNewView(view4);
  assertEquals(0,mgr.waitForAsyncEvents(5000));
  logger.info("testOnlyDiffersInProperties: onlyDiffersInProperties(view4Cloned)");
  assertFalse(mgr.onlyDiffersInProperties(view4Cloned));
  logger.info("testOnlyDiffersInProperties: onlyDiffersInProperties(view5)");
  assertFalse(mgr.onlyDiffersInProperties(view5));
  DefaultInstanceDescription i6_1=(DefaultInstanceDescription)view6.getInstance(slingId1);
  i6_1.setProperty("a","c");
  logger.info("testOnlyDiffersInProperties: onlyDiffersInProperties(view6)");
  assertTrue(mgr.onlyDiffersInProperties(view6));
  String originalId=view6.getLocalClusterSyncTokenId();
  view6.setId(UUID.randomUUID().toString());
  logger.info("testOnlyDiffersInProperties: onlyDiffersInProperties(view6) [2]");
  assertFalse(mgr.onlyDiffersInProperties(view6));
  view6.setId(originalId);
  logger.info("testOnlyDiffersInProperties: onlyDiffersInProperties(view6) [3]");
  assertTrue(mgr.onlyDiffersInProperties(view6));
  view6.setId(null);
  logger.info("testOnlyDiffersInProperties: onlyDiffersInProperties(view6) [4]");
  assertFalse(mgr.onlyDiffersInProperties(view6));
  view6.setId(originalId);
  logger.info("testOnlyDiffersInProperties: onlyDiffersInProperties(view6) [5]");
  assertTrue(mgr.onlyDiffersInProperties(view6));
  view4.setId(null);
  view6.setId(null);
  logger.info("testOnlyDiffersInProperties: onlyDiffersInProperties(view6) [6]");
  assertTrue(mgr.onlyDiffersInProperties(view6));
  view6.setId(originalId);
  logger.info("testOnlyDiffersInProperties: onlyDiffersInProperties(view6) [7]");
  assertFalse(mgr.onlyDiffersInProperties(view6));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCancelSync() throws Exception {
  final List<Runnable> syncCallbacks=new LinkedList<Runnable>();
  mgr=new ViewStateManagerImpl(new ReentrantLock(),new ClusterSyncService(){
    public void sync(    BaseTopologyView view,    Runnable callback){
synchronized (syncCallbacks) {
        syncCallbacks.add(callback);
      }
    }
    @Override public void cancelSync(){
synchronized (syncCallbacks) {
        syncCallbacks.clear();
      }
    }
  }
);
  mgr.handleActivated();
  final DummyListener listener=new DummyListener();
  mgr.bind(listener);
  mgr.handleChanging();
  final BaseTopologyView view=new DummyTopologyView().addInstance();
  mgr.handleNewView(view);
  assertEquals(0,mgr.waitForAsyncEvents(1000));
  TestHelper.assertNoEvents(listener);
synchronized (syncCallbacks) {
    assertEquals(1,syncCallbacks.size());
  }
  String id1=UUID.randomUUID().toString();
  String id2=UUID.randomUUID().toString();
  final BaseTopologyView view2=TestHelper.newView(true,id1,id1,id1,id2);
  mgr.handleNewView(view2);
  assertEquals(0,mgr.waitForAsyncEvents(1000));
  TestHelper.assertNoEvents(listener);
synchronized (syncCallbacks) {
    assertEquals(1,syncCallbacks.size());
    syncCallbacks.get(0).run();
    syncCallbacks.clear();
  }
  assertEquals(0,mgr.waitForAsyncEvents(1000));
  assertEvents(listener,EventHelper.newInitEvent(view2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.commons.providers.spi.base.TestOakSyncTokenService </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOneNode() throws Exception {
  logger.info("testOneNode: start");
  DummyTopologyView one=TestHelper.newView(true,slingId1,slingId1,slingId1);
  Lock lock=new ReentrantLock();
  OakBacklogClusterSyncService cs=OakBacklogClusterSyncService.testConstructorAndActivate(new SimpleCommonsConfig(),idMapService1,new DummySlingSettingsService(slingId1),factory1);
  ViewStateManager vsm=ViewStateManagerFactory.newViewStateManager(lock,cs);
  DummyListener l=new DummyListener();
  assertEquals(0,l.countEvents());
  vsm.bind(l);
  cs.triggerBackgroundCheck();
  assertEquals(0,l.countEvents());
  vsm.handleActivated();
  cs.triggerBackgroundCheck();
  assertEquals(0,l.countEvents());
  vsm.handleNewView(one);
  cs.triggerBackgroundCheck();
  assertEquals(0,l.countEvents());
  cs.triggerBackgroundCheck();
  DescriptorHelper.setDiscoveryLiteDescriptor(factory1,new DiscoveryLiteDescriptorBuilder().me(1).seq(1).activeIds(1).setFinal(true));
  assertTrue(idMapService1.waitForInit(5000));
  cs.triggerBackgroundCheck();
  assertEquals(0,vsm.waitForAsyncEvents(1000));
  assertEquals(1,l.countEvents());
  logger.info("testOneNode: end");
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-19 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwoNodesOneLeaving() throws Exception {
  logger.info("testTwoNodesOneLeaving: start");
  String slingId2=UUID.randomUUID().toString();
  DummyTopologyView two1=TestHelper.newView(true,slingId1,slingId1,slingId1,slingId2);
  Lock lock1=new ReentrantLock();
  OakBacklogClusterSyncService cs1=OakBacklogClusterSyncService.testConstructorAndActivate(new SimpleCommonsConfig(),idMapService1,new DummySlingSettingsService(slingId1),factory1);
  ViewStateManager vsm1=ViewStateManagerFactory.newViewStateManager(lock1,cs1);
  DummyListener l=new DummyListener();
  vsm1.bind(l);
  vsm1.handleActivated();
  vsm1.handleNewView(two1);
  cs1.triggerBackgroundCheck();
  assertEquals(0,l.countEvents());
  DescriptorHelper.setDiscoveryLiteDescriptor(factory1,new DiscoveryLiteDescriptorBuilder().setFinal(true).me(1).seq(1).activeIds(1).deactivatingIds(2));
  cs1.triggerBackgroundCheck();
  assertEquals(0,l.countEvents());
  logger.info("testTwoNodesOneLeaving: sync service should be waiting for backlog to disappear");
  Thread.sleep(2000);
  BackgroundCheckRunnable backgroundCheckRunnable=cs1.backgroundCheckRunnable;
  assertNotNull(backgroundCheckRunnable);
  assertFalse(backgroundCheckRunnable.isDone());
  assertFalse(backgroundCheckRunnable.cancelled());
  logger.info("testTwoNodesOneLeaving: freeing backlog - sync service should finish up");
  DescriptorHelper.setDiscoveryLiteDescriptor(factory1,new DiscoveryLiteDescriptorBuilder().setFinal(true).me(1).seq(2).activeIds(1));
  cs1.triggerBackgroundCheck();
  Thread.sleep(2000);
  backgroundCheckRunnable=cs1.backgroundCheckRunnable;
  assertNotNull(backgroundCheckRunnable);
  assertFalse(backgroundCheckRunnable.cancelled());
  assertTrue(backgroundCheckRunnable.isDone());
  assertEquals(0,vsm1.waitForAsyncEvents(1000));
  logger.info("testTwoNodesOneLeaving: setting up 2nd node");
  Lock lock2=new ReentrantLock();
  IdMapService idMapService2=IdMapService.testConstructor(new SimpleCommonsConfig(),new DummySlingSettingsService(slingId2),factory2);
  OakBacklogClusterSyncService cs2=OakBacklogClusterSyncService.testConstructorAndActivate(new SimpleCommonsConfig(),idMapService2,new DummySlingSettingsService(slingId2),factory2);
  ViewStateManager vsm2=ViewStateManagerFactory.newViewStateManager(lock2,cs2);
  cs1.triggerBackgroundCheck();
  cs2.triggerBackgroundCheck();
  assertEquals(1,l.countEvents());
  DescriptorHelper.setDiscoveryLiteDescriptor(factory2,new DiscoveryLiteDescriptorBuilder().setFinal(true).me(2).seq(3).activeIds(1,2));
  cs1.triggerBackgroundCheck();
  cs2.triggerBackgroundCheck();
  assertEquals(1,l.countEvents());
  DescriptorHelper.setDiscoveryLiteDescriptor(factory1,new DiscoveryLiteDescriptorBuilder().setFinal(true).me(1).seq(3).activeIds(1,2));
  cs1.triggerBackgroundCheck();
  cs2.triggerBackgroundCheck();
  assertEquals(1,l.countEvents());
  vsm2.handleActivated();
  assertTrue(idMapService1.waitForInit(5000));
  assertTrue(idMapService2.waitForInit(5000));
  DummyTopologyView two2=TestHelper.newView(two1.getLocalClusterSyncTokenId(),two1.getLocalInstance().getClusterView().getId(),true,slingId1,slingId1,slingId1,slingId2);
  vsm2.handleNewView(two2);
  cs1.triggerBackgroundCheck();
  cs1.triggerBackgroundCheck();
  cs2.triggerBackgroundCheck();
  cs2.triggerBackgroundCheck();
  assertEquals(0,vsm1.waitForAsyncEvents(1000));
  assertEquals(1,l.countEvents());
  logger.info("testTwoNodesOneLeaving: removing instance2 from the view - even though vsm1 didn't really know about it, it should send a TOPOLOGY_CHANGING - we leave it as deactivating for now...");
  DummyTopologyView oneLeaving=two1.clone();
  oneLeaving.removeInstance(slingId2);
  DescriptorHelper.setDiscoveryLiteDescriptor(factory1,new DiscoveryLiteDescriptorBuilder().setFinal(true).me(1).seq(1).activeIds(1).deactivatingIds(2));
  vsm1.handleNewView(oneLeaving);
  cs1.triggerBackgroundCheck();
  cs2.triggerBackgroundCheck();
  assertEquals(0,vsm1.waitForAsyncEvents(5000));
  assertEquals(2,l.countEvents());
  logger.info("testTwoNodesOneLeaving: marking instance2 as no longer deactivating, so vsm1 should now send a TOPOLOGY_CHANGED");
  DescriptorHelper.setDiscoveryLiteDescriptor(factory1,new DiscoveryLiteDescriptorBuilder().setFinal(true).me(1).seq(2).activeIds(1).inactiveIds(2));
  cs1.triggerBackgroundCheck();
  cs2.triggerBackgroundCheck();
  assertEquals(0,vsm1.waitForAsyncEvents(5000));
  RepositoryTestHelper.dumpRepo(factory1);
  assertEquals(3,l.countEvents());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.impl.cluster.RepositoryDelaysTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * SLING-5195 : simulate slow session.saves that block
 * the calling thread for non-trivial amounts of time,
 * typically for longer than the configured heartbeat
 * timeout
 */
@Test public void testSlowSessionSaves() throws Exception {
  VirtualInstanceBuilder builder1=newBuilder();
  instance1=(FullJR2VirtualInstance)builder1.setDebugName("firstInstance").newRepository("/var/discovery/impl/",true).setMinEventDelay(0).setConnectorPingInterval(1).setConnectorPingTimeout(3).build();
  VirtualInstanceBuilder builder2=newBuilder();
  instance2=(FullJR2VirtualInstance)builder2.setDebugName("secondInstance").useRepositoryOf(instance1).setMinEventDelay(0).setConnectorPingInterval(1).setConnectorPingTimeout(3).build();
  instance1.setDelay("pre.commit",12000);
  instance1.startViewChecker(1);
  instance2.startViewChecker(1);
  Thread.sleep(5000);
  TopologyView t1=instance1.getDiscoveryService().getTopology();
  assertFalse(t1.isCurrent());
  TopologyView t2=instance2.getDiscoveryService().getTopology();
  assertTrue(t2.isCurrent());
  assertEquals(1,t2.getInstances().size());
  instance1.setDelay("pre.commit",-1);
  Thread.sleep(3000);
  TopologyView t1b=instance1.getDiscoveryService().getTopology();
  assertTrue(t1b.isCurrent());
  assertEquals(2,t1b.getInstances().size());
  TopologyView t2b=instance2.getDiscoveryService().getTopology();
  assertTrue(t2b.isCurrent());
  assertEquals(2,t2b.getInstances().size());
  instance1.setDelay("pre.commit",59876);
  instance2.setDelay("pre.commit",60000);
  logger.info("<main> both instances marked as delaying 1min - but with new background checks we should go changing within 3sec");
  Thread.sleep(8000);
  TopologyView t1c=instance1.getDiscoveryService().getTopology();
  assertFalse(t1c.isCurrent());
  TopologyView t2c=instance2.getDiscoveryService().getTopology();
  assertFalse(t2c.isCurrent());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.impl.cluster.voting.VotingHandlerTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVotingYesTwoNodes() throws Exception {
  VotingView voting=newVoting(slingId2,slingId1,slingId2);
  assertNotNull(voting);
  heartbeat(slingId1);
  heartbeat(slingId2);
  VirtualInstanceHelper.dumpRepo(factory);
  votingHandler1.activate(null);
  Map<VotingView,VotingDetail> result=votingHandler1.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.VOTED_YES,result.values().iterator().next());
  result=votingHandler1.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.WINNING,result.values().iterator().next());
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.WINNING,result.values().iterator().next());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVotingYesFiveNodes() throws Exception {
  VotingView voting=newVoting(slingId2,slingId1,slingId2,slingId3,slingId4,slingId5);
  assertNotNull(voting);
  heartbeat(slingId1);
  heartbeat(slingId2);
  heartbeat(slingId3);
  heartbeat(slingId4);
  heartbeat(slingId5);
  VirtualInstanceHelper.dumpRepo(factory);
  votingHandler1.activate(null);
  Map<VotingView,VotingDetail> result=votingHandler1.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.VOTED_YES,result.values().iterator().next());
  result=votingHandler1.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.UNCHANGED,result.values().iterator().next());
  votingHandler3.activate(null);
  result=votingHandler3.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.VOTED_YES,result.values().iterator().next());
  result=votingHandler3.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.UNCHANGED,result.values().iterator().next());
  votingHandler4.activate(null);
  result=votingHandler4.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.VOTED_YES,result.values().iterator().next());
  result=votingHandler4.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.UNCHANGED,result.values().iterator().next());
  votingHandler5.activate(null);
  result=votingHandler5.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.VOTED_YES,result.values().iterator().next());
  result=votingHandler5.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.WINNING,result.values().iterator().next());
  votingHandler2.activate(null);
  result=votingHandler2.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.PROMOTED,result.values().iterator().next());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPromotion() throws Exception {
  VotingView voting=newVoting(slingId1,slingId1);
  assertNotNull(voting);
  VirtualInstanceHelper.dumpRepo(factory);
  votingHandler1.activate(null);
  Map<VotingView,VotingDetail> result=votingHandler1.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.PROMOTED,result.values().iterator().next());
  result=votingHandler1.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(0,result.size());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimedout() throws Exception {
  config.setHeartbeatTimeout(1);
  VotingView voting=newVoting(slingId1,slingId1);
  assertNotNull(voting);
  Thread.sleep(1200);
  votingHandler1.activate(null);
  Map<VotingView,VotingDetail> result=votingHandler1.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.TIMEDOUT,result.values().iterator().next());
  result=votingHandler1.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(0,result.size());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVotingYesThreeNodes() throws Exception {
  VotingView voting=newVoting(slingId2,slingId1,slingId2,slingId3);
  assertNotNull(voting);
  heartbeat(slingId1);
  heartbeat(slingId2);
  heartbeat(slingId3);
  VirtualInstanceHelper.dumpRepo(factory);
  votingHandler1.activate(null);
  Map<VotingView,VotingDetail> result=votingHandler1.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.VOTED_YES,result.values().iterator().next());
  result=votingHandler1.analyzeVotings(resourceResolver);
  assertNotNull(result);
  assertEquals(1,result.size());
  assertEquals(VotingDetail.UNCHANGED,result.values().iterator().next());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.impl.common.heartbeat.HeartbeatTest </h4><pre class="type-15 type-11 type-12 type-6 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * SLING-5027 : test to reproduce the voting loop
 * (and verify that it's fixed)
 */
@Test public void testVotingLoop() throws Throwable {
  logger.info("testVotingLoop: creating slowMachine1...");
  FullJR2VirtualInstanceBuilder slowBuilder1=newBuilder();
  slowBuilder1.setDebugName("slow1").newRepository("/var/discovery/impl/",true).setConnectorPingTimeout(600).setConnectorPingInterval(999).setMinEventDelay(0);
  FullJR2VirtualInstance slowMachine1=slowBuilder1.fullBuild();
  instances.add(slowMachine1);
  SimpleTopologyEventListener slowListener1=new SimpleTopologyEventListener("slow1");
  slowMachine1.bindTopologyEventListener(slowListener1);
  logger.info("testVotingLoop: creating slowMachine2...");
  FullJR2VirtualInstanceBuilder slowBuilder2=newBuilder();
  slowBuilder2.setDebugName("slow2").useRepositoryOf(slowMachine1).setConnectorPingTimeout(600).setConnectorPingInterval(999).setMinEventDelay(0);
  FullJR2VirtualInstance slowMachine2=slowBuilder2.fullBuild();
  instances.add(slowMachine2);
  SimpleTopologyEventListener slowListener2=new SimpleTopologyEventListener("slow2");
  slowMachine2.bindTopologyEventListener(slowListener2);
  logger.info("testVotingLoop: creating fastMachine...");
  FullJR2VirtualInstanceBuilder fastBuilder=newBuilder();
  fastBuilder.setDebugName("fast").useRepositoryOf(slowMachine1).setConnectorPingTimeout(600).setConnectorPingInterval(999).setMinEventDelay(0);
  FullJR2VirtualInstance fastMachine=fastBuilder.fullBuild();
  instances.add(fastMachine);
  SimpleTopologyEventListener fastListener=new SimpleTopologyEventListener("fast");
  fastMachine.bindTopologyEventListener(fastListener);
  HeartbeatHandler hhSlow1=slowMachine1.getHeartbeatHandler();
  HeartbeatHandler hhSlow2=slowMachine2.getHeartbeatHandler();
  HeartbeatHandler hhFast=fastMachine.getHeartbeatHandler();
  Thread.sleep(1000);
  logger.info("testVotingLoop: after some initial 1sec sleep no event should yet have been sent");
  assertFalse(fastMachine.getDiscoveryService().getTopology().isCurrent());
  assertFalse(slowMachine1.getDiscoveryService().getTopology().isCurrent());
  assertFalse(slowMachine2.getDiscoveryService().getTopology().isCurrent());
  assertNull(fastListener.getLastEvent());
  assertNull(slowListener1.getLastEvent());
  assertNull(slowListener2.getLastEvent());
  logger.info("testVotingLoop: stopping voting of slowMachine1...");
  slowMachine1.stopVoting();
  logger.info("testVotingLoop: letting slow1, slow2 and fast all issue 1 heartbeat");
  hhSlow1.issueHeartbeat();
  hhSlow2.issueHeartbeat();
  hhFast.issueHeartbeat();
  logger.info("testVotingLoop: let the fast one do a checkView, thus initiate a voting");
  hhFast.doCheckView();
  Calendar previousVotedAt=null;
  for (int i=0; i < 5; i++) {
    logger.info("testVotingLoop: sleeping 1sec...");
    Thread.sleep(1000);
    logger.info("testVotingLoop: check to see that there is no voting loop...");
    ResourceResolverFactory factory=fastMachine.getResourceResolverFactory();
    ResourceResolver resourceResolver=factory.getAdministrativeResourceResolver(null);
    try {
      List<VotingView> ongoingVotings=VotingHelper.listOpenNonWinningVotings(resourceResolver,fastMachine.getFullConfig());
      assertNotNull(ongoingVotings);
      assertEquals(1,ongoingVotings.size());
      VotingView ongoingVote=ongoingVotings.get(0);
      assertFalse(ongoingVote.isWinning());
      assertFalse(ongoingVote.hasVotedYes(slowMachine1.getSlingId()));
      assertTrue(ongoingVote.hasVotedYes(slowMachine2.getSlingId()));
      final Resource memberResource=ongoingVote.getResource().getChild("members").getChild(slowMachine2.getSlingId());
      final ModifiableValueMap memberMap=memberResource.adaptTo(ModifiableValueMap.class);
      Property vote=(Property)memberMap.get("vote");
      assertEquals(Boolean.TRUE,vote.getBoolean());
      Property votedAt=(Property)memberMap.get("votedAt");
      if (previousVotedAt == null) {
        previousVotedAt=votedAt.getDate();
      }
 else {
        assertEquals(previousVotedAt,votedAt.getDate());
      }
    }
 catch (    Exception e) {
      resourceResolver.close();
      fail("Exception: " + e);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.distribution.component.impl.SettingsUtilsTest </h4><pre class="type-11 type-13 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseMap(){
  String[] lines=new String[]{"packageExporter/exporterKey=exporterValue","packageExporter/exporterMap[key1]=mapvalue1","packageExporter/exporterBuilder/builderKey=builderValue","packageExporter/endpointsArray[0]=http://abc.com","mainKey=mainValue","trigger[0]/propertyKey1=propertyValue1","trigger[0]/propertyKey2=propertyValue2","slashKey=http://aaa.com"};
  Map<String,Object> result=SettingsUtils.parseLines(lines);
  assertEquals("result map size",4,result.size());
  assertTrue(result.containsKey("packageExporter"));
  Object packageExporterProperties=result.get("packageExporter");
  assertTrue(packageExporterProperties instanceof Map);
  Map<String,Object> packageExporterMap=(Map)packageExporterProperties;
  assertTrue(packageExporterMap.containsKey("exporterKey"));
  assertEquals("exporterValue",packageExporterMap.get("exporterKey"));
  assertTrue(packageExporterMap.containsKey("exporterBuilder"));
  assertTrue(packageExporterMap.get("exporterBuilder") instanceof Map);
  Map exporterBuilderMap=(Map)packageExporterMap.get("exporterBuilder");
  assertEquals("builderValue",exporterBuilderMap.get("builderKey"));
  assertTrue(packageExporterMap.containsKey("exporterMap"));
  assertTrue(packageExporterMap.get("exporterMap") instanceof Map);
  Map exporterMap=(Map)packageExporterMap.get("exporterMap");
  assertEquals("mapvalue1",exporterMap.get("key1"));
  assertTrue(packageExporterMap.containsKey("endpointsArray"));
  assertTrue(packageExporterMap.get("endpointsArray") instanceof List);
  assertEquals("http://abc.com",((List)packageExporterMap.get("endpointsArray")).get(0));
  assertTrue(result.containsKey("mainKey"));
  assertTrue(result.containsKey("trigger"));
  assertTrue(result.get("trigger") instanceof List);
  List<Map> triggersList=(List<Map>)result.get("trigger");
  assertNotNull(triggersList.get(0));
  Map trigger0Map=triggersList.get(0);
  assertEquals("propertyValue1",trigger0Map.get("propertyKey1"));
  assertEquals("propertyValue2",trigger0Map.get("propertyKey2"));
  assertTrue(result.containsKey("slashKey"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.distribution.queue.impl.SingleQueueDistributionStrategyTest </h4><pre class="type-11 type-13 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPackageAdditionWithFailingItemDelivery() throws Exception {
  SingleQueueDispatchingStrategy singleQueueDistributionStrategy=new SingleQueueDispatchingStrategy();
  DistributionPackage distributionPackage=mock(DistributionPackage.class);
  DistributionQueueProvider queueProvider=mock(DistributionQueueProvider.class);
  DistributionQueue queue=mock(DistributionQueue.class);
  DistributionQueueItem queueItem=mock(DistributionQueueItem.class);
  when(queueProvider.getQueue(DistributionQueueDispatchingStrategy.DEFAULT_QUEUE_NAME)).thenReturn(queue);
  DistributionQueueItemStatus state=mock(DistributionQueueItemStatus.class);
  when(queue.add(queueItem)).thenReturn(new DistributionQueueEntry(queueItem,state));
  Iterable<DistributionQueueItemStatus> returnedStates=singleQueueDistributionStrategy.add(distributionPackage,queueProvider);
  assertNotNull(returnedStates);
  Iterator<DistributionQueueItemStatus> iterator=returnedStates.iterator();
  assertNotNull(iterator);
  assertTrue(iterator.hasNext());
  assertNotNull(iterator.next());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPackageAdditionWithNotNullItemStateFromTheQueue() throws Exception {
  SingleQueueDispatchingStrategy singleQueueDistributionStrategy=new SingleQueueDispatchingStrategy();
  DistributionPackage distributionPackage=mock(DistributionPackage.class);
  DistributionQueueProvider queueProvider=mock(DistributionQueueProvider.class);
  DistributionQueue queue=mock(DistributionQueue.class);
  when(queueProvider.getQueue(DistributionQueueDispatchingStrategy.DEFAULT_QUEUE_NAME)).thenReturn(queue);
  DistributionQueueItemStatus state=mock(DistributionQueueItemStatus.class);
  when(queue.add(any(DistributionQueueItem.class))).thenReturn(new DistributionQueueEntry(null,state));
  Iterable<DistributionQueueItemStatus> returnedStates=singleQueueDistributionStrategy.add(distributionPackage,queueProvider);
  assertNotNull(returnedStates);
  Iterator<DistributionQueueItemStatus> iterator=returnedStates.iterator();
  assertNotNull(iterator);
  assertTrue(iterator.hasNext());
  assertNotNull(iterator.next());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPackageAdditionWithSucceedingItemDelivery() throws Exception {
  SingleQueueDispatchingStrategy singleQueueDistributionStrategy=new SingleQueueDispatchingStrategy();
  DistributionPackage distributionPackage=mock(DistributionPackage.class);
  DistributionQueueProvider queueProvider=mock(DistributionQueueProvider.class);
  DistributionQueue queue=mock(DistributionQueue.class);
  when(queueProvider.getQueue(DistributionQueueDispatchingStrategy.DEFAULT_QUEUE_NAME)).thenReturn(queue);
  DistributionQueueItemStatus state=mock(DistributionQueueItemStatus.class);
  when(queue.add(any(DistributionQueueItem.class))).thenReturn(new DistributionQueueEntry(null,state));
  Iterable<DistributionQueueItemStatus> returnedStates=singleQueueDistributionStrategy.add(distributionPackage,queueProvider);
  assertNotNull(returnedStates);
  Iterator<DistributionQueueItemStatus> iterator=returnedStates.iterator();
  assertNotNull(iterator);
  assertTrue(iterator.hasNext());
  assertNotNull(iterator.next());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.distribution.queue.impl.jobhandling.JobHandlingUtilsTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFullPropertiesFromPackageCreation() throws Exception {
  DistributionPackageInfo packageInfo=new DistributionPackageInfo("vlt");
  packageInfo.put(DistributionPackageInfo.PROPERTY_REQUEST_PATHS,new String[]{"/foo"});
  packageInfo.put(DistributionPackageInfo.PROPERTY_REQUEST_TYPE,DistributionRequestType.ADD);
  packageInfo.put(DistributionPackageInfo.PROPERTY_PACKAGE_TYPE,"vlt");
  DistributionQueueItem queueItem=new DistributionQueueItem("an-id",packageInfo);
  Map<String,Object> fullPropertiesFromPackage=JobHandlingUtils.createFullProperties(queueItem);
  assertNotNull(fullPropertiesFromPackage);
  assertEquals(4,fullPropertiesFromPackage.size());
  assertNotNull(fullPropertiesFromPackage.get("distribution.request.paths"));
  assertNotNull(fullPropertiesFromPackage.get("distribution.item.id"));
  assertNotNull(fullPropertiesFromPackage.get("distribution.package.type"));
  assertNotNull(fullPropertiesFromPackage.get("distribution.request.type"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.engine.impl.RequestProcessorMBeanImplTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Asserts that the simple standard deviation algorithm used by the
 * RequestProcessorMBeanImpl is equivalent to the Commons Math
 * SummaryStatistics implementation.
 * It also tests that resetStatistics method, actually resets all the statistics
 * @throws NotCompliantMBeanException not expected
 */
@Test public void test_statistics() throws NotCompliantMBeanException {
  final SummaryStatistics durationStats=new SummaryStatistics();
  final SummaryStatistics servletCallCountStats=new SummaryStatistics();
  final SummaryStatistics peakRecursionDepthStats=new SummaryStatistics();
  final RequestProcessorMBeanImpl bean=new RequestProcessorMBeanImpl();
  assertEquals(0l,bean.getRequestsCount());
  assertEquals(Long.MAX_VALUE,bean.getMinRequestDurationMsec());
  assertEquals(0l,bean.getMaxRequestDurationMsec());
  assertEquals(0.0,bean.getMeanRequestDurationMsec(),0);
  assertEquals(0.0,bean.getStandardDeviationDurationMsec(),0);
  assertEquals(Integer.MAX_VALUE,bean.getMinServletCallCount());
  assertEquals(0l,bean.getMaxServletCallCount());
  assertEquals(0.0,bean.getMeanServletCallCount(),0);
  assertEquals(0.0,bean.getStandardDeviationServletCallCount(),0);
  assertEquals(Integer.MAX_VALUE,bean.getMinPeakRecursionDepth());
  assertEquals(0l,bean.getMaxPeakRecursionDepth());
  assertEquals(0.0,bean.getMeanPeakRecursionDepth(),0);
  assertEquals(0.0,bean.getStandardDeviationPeakRecursionDepth(),0);
  final Random random=new Random(System.currentTimeMillis() / 17);
  final int num=10000;
  final int min=85;
  final int max=250;
  for (int i=0; i < num; i++) {
    final long durationValue=min + random.nextInt(max - min);
    final int callCountValue=min + random.nextInt(max - min);
    final int peakRecursionDepthValue=min + random.nextInt(max - min);
    durationStats.addValue(durationValue);
    servletCallCountStats.addValue(callCountValue);
    peakRecursionDepthStats.addValue(peakRecursionDepthValue);
    final RequestData requestData=context.mock(RequestData.class,"requestData" + i);
    context.checking(new Expectations(){
{
        one(requestData).getElapsedTimeMsec();
        will(returnValue(durationValue));
        one(requestData).getServletCallCount();
        will(returnValue(callCountValue));
        one(requestData).getPeakRecusionDepth();
        will(returnValue(peakRecursionDepthValue));
      }
    }
);
    bean.addRequestData(requestData);
  }
  assertEquals("Number of points must be the same",durationStats.getN(),bean.getRequestsCount());
  assertEquals("Min Duration must be equal",(long)durationStats.getMin(),bean.getMinRequestDurationMsec());
  assertEquals("Max Duration must be equal",(long)durationStats.getMax(),bean.getMaxRequestDurationMsec());
  assertAlmostEqual("Mean Duration",durationStats.getMean(),bean.getMeanRequestDurationMsec(),num);
  assertAlmostEqual("Standard Deviation Duration",durationStats.getStandardDeviation(),bean.getStandardDeviationDurationMsec(),num);
  assertEquals("Min Servlet Call Count must be equal",(long)servletCallCountStats.getMin(),bean.getMinServletCallCount());
  assertEquals("Max Servlet Call Count must be equal",(long)servletCallCountStats.getMax(),bean.getMaxServletCallCount());
  assertAlmostEqual("Mean Servlet Call Count",servletCallCountStats.getMean(),bean.getMeanServletCallCount(),num);
  assertAlmostEqual("Standard Deviation Servlet Call Count",servletCallCountStats.getStandardDeviation(),bean.getStandardDeviationServletCallCount(),num);
  assertEquals("Min Peak Recursion Depth must be equal",(long)peakRecursionDepthStats.getMin(),bean.getMinPeakRecursionDepth());
  assertEquals("Max Peak Recursion Depth must be equal",(long)peakRecursionDepthStats.getMax(),bean.getMaxPeakRecursionDepth());
  assertAlmostEqual("Mean Peak Recursion Depth",peakRecursionDepthStats.getMean(),bean.getMeanPeakRecursionDepth(),num);
  assertAlmostEqual("Standard Deviation Peak Recursion Depth",peakRecursionDepthStats.getStandardDeviation(),bean.getStandardDeviationPeakRecursionDepth(),num);
  bean.resetStatistics();
  final long durationValue=min + random.nextInt(max - min);
  final int callCountValue=min + random.nextInt(max - min);
  final int peakRecursionDepthValue=min + random.nextInt(max - min);
  final RequestData requestData=context.mock(RequestData.class,"requestDataAfterReset");
  context.checking(new Expectations(){
{
      one(requestData).getElapsedTimeMsec();
      will(returnValue(durationValue));
      one(requestData).getServletCallCount();
      will(returnValue(callCountValue));
      one(requestData).getPeakRecusionDepth();
      will(returnValue(peakRecursionDepthValue));
    }
  }
);
  bean.addRequestData(requestData);
  assertEquals("After resetStatistics Number of requests must be one",1,bean.getRequestsCount());
  assertEquals("After resetStatistics Min Duration must be equal",bean.getMinRequestDurationMsec(),(long)durationValue);
  assertEquals("After resetStatistics Max Duration must be equal",bean.getMaxRequestDurationMsec(),(long)durationValue);
  assertEquals("After resetStatistics Mean Duration must be equal",bean.getMeanRequestDurationMsec(),(double)durationValue,0d);
  assertEquals("After resetStatistics Min Servlet Call Count must be equal",bean.getMinServletCallCount(),callCountValue);
  assertEquals("After resetStatistics Max Servlet Call Count must be equal",bean.getMaxServletCallCount(),callCountValue);
  assertEquals("After resetStatistics Mean Servlet Call Count",bean.getMeanServletCallCount(),(double)callCountValue,0d);
  assertEquals("After resetStatistics Min Peak Recursion Depth must be equal",bean.getMinPeakRecursionDepth(),peakRecursionDepthValue);
  assertEquals("After resetStatistics Max Peak Recursion Depth must be equal",bean.getMinPeakRecursionDepth(),peakRecursionDepthValue);
  assertEquals("After resetStatistics Mean Peak Recursion Depth",bean.getMeanPeakRecursionDepth(),(double)peakRecursionDepthValue,0d);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.engine.impl.helper.ExternalServletContextWrapperTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Unwrapping a wrapped sling response should return the first-level response
 * wrapped by the sling response.
 */
@Test public void testUnwrappingWrappedSlingResponse(){
  final HttpServletResponse resp=context.mock(HttpServletResponse.class);
  final HttpServletResponseWrapper wrapper=new HttpServletResponseWrapper(resp);
  final HttpServletResponseWrapper wrapper2=new HttpServletResponseWrapper(wrapper);
  final SlingHttpServletResponseImpl slingResponse=new SlingHttpServletResponseImpl(null,wrapper2);
  final HttpServletResponseWrapper slingWrapper=new HttpServletResponseWrapper(slingResponse);
  ServletResponse unwrapped=ExternalServletContextWrapper.RequestDispatcherWrapper.unwrapServletResponse(slingWrapper);
  assertEquals(wrapper2,unwrapped);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Unwrapping a wrapped sling request should return the first-level request
 * wrapped by the sling request.
 */
@Test public void testUnwrappingWrappedSlingRequest(){
  final HttpServletRequest req=context.mock(HttpServletRequest.class);
  context.checking(new Expectations(){
{
      allowing(req).getServletPath();
      will(returnValue("/"));
      allowing(req).getPathInfo();
      will(returnValue("/test"));
    }
  }
);
  final HttpServletRequestWrapper wrapper=new HttpServletRequestWrapper(req);
  final HttpServletRequestWrapper wrapper2=new HttpServletRequestWrapper(wrapper);
  final SlingHttpServletRequestImpl slingRequest=new SlingHttpServletRequestImpl(null,wrapper2);
  final HttpServletRequestWrapper slingWrapper=new HttpServletRequestWrapper(slingRequest);
  ServletRequest unwrapped=ExternalServletContextWrapper.RequestDispatcherWrapper.unwrapServletRequest(slingWrapper);
  assertEquals(wrapper2,unwrapped);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Unwrapping a non-wrapper request should return the request itself.
 */
@Test public void testUnwrappingRegularRequest(){
  final ServletRequest req=context.mock(ServletRequest.class);
  ServletRequest unwrapped=ExternalServletContextWrapper.RequestDispatcherWrapper.unwrapServletRequest(req);
  assertEquals(req,unwrapped);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Unwrapping a non-wrapper response should return the response itself.
 */
@Test public void testUnwrappingRegularResponse(){
  final ServletResponse req=context.mock(ServletResponse.class);
  ServletResponse unwrapped=ExternalServletContextWrapper.RequestDispatcherWrapper.unwrapServletResponse(req);
  assertEquals(req,unwrapped);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Unwrapping a wrapper response should return in the response.
 */
@Test public void testUnwrappingWrappedResponse(){
  final ServletResponse resp=context.mock(ServletResponse.class);
  final ServletResponseWrapper wrapper=new ServletResponseWrapper(resp);
  ServletResponse unwrapped=ExternalServletContextWrapper.RequestDispatcherWrapper.unwrapServletResponse(wrapper);
  assertEquals(resp,unwrapped);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnwrappingDoubleWrappedResponse(){
  final ServletResponse resp=context.mock(ServletResponse.class);
  final ServletResponseWrapper wrapper=new ServletResponseWrapper(resp);
  final ServletResponseWrapper wrapper2=new ServletResponseWrapper(wrapper);
  ServletResponse unwrapped=ExternalServletContextWrapper.RequestDispatcherWrapper.unwrapServletResponse(wrapper2);
  assertEquals(resp,unwrapped);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Unwrapping a sling request should return the first-level request wrapped
 * by the sling request.
 */
@Test public void testUnwrappingSlingRequest(){
  final HttpServletRequest req=context.mock(HttpServletRequest.class);
  context.checking(new Expectations(){
{
      allowing(req).getServletPath();
      will(returnValue("/"));
      allowing(req).getPathInfo();
      will(returnValue("/test"));
    }
  }
);
  final HttpServletRequestWrapper wrapper=new HttpServletRequestWrapper(req);
  final HttpServletRequestWrapper wrapper2=new HttpServletRequestWrapper(wrapper);
  final SlingHttpServletRequestImpl slingRequest=new SlingHttpServletRequestImpl(null,wrapper2);
  ServletRequest unwrapped=ExternalServletContextWrapper.RequestDispatcherWrapper.unwrapServletRequest(slingRequest);
  assertEquals(wrapper2,unwrapped);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Unwrapping a sling response should return the first-level response wrapped
 * by the sling response.
 */
@Test public void testUnwrappingSlingResponse(){
  final HttpServletResponse resp=context.mock(HttpServletResponse.class);
  final HttpServletResponseWrapper wrapper=new HttpServletResponseWrapper(resp);
  final HttpServletResponseWrapper wrapper2=new HttpServletResponseWrapper(wrapper);
  final SlingHttpServletResponseImpl slingResponse=new SlingHttpServletResponseImpl(null,wrapper2);
  ServletResponse unwrapped=ExternalServletContextWrapper.RequestDispatcherWrapper.unwrapServletResponse(slingResponse);
  assertEquals(wrapper2,unwrapped);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Unwrapping a wrapper request should return in the request.
 */
@Test public void testUnwrappingWrappedRequest(){
  final ServletRequest req=context.mock(ServletRequest.class);
  final ServletRequestWrapper wrapper=new ServletRequestWrapper(req);
  ServletRequest unwrapped=ExternalServletContextWrapper.RequestDispatcherWrapper.unwrapServletRequest(wrapper);
  assertEquals(req,unwrapped);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnwrappingDoubleWrappedRequest(){
  final ServletRequest req=context.mock(ServletRequest.class);
  final ServletRequestWrapper wrapper=new ServletRequestWrapper(req);
  final ServletRequestWrapper wrapper2=new ServletRequestWrapper(wrapper);
  ServletRequest unwrapped=ExternalServletContextWrapper.RequestDispatcherWrapper.unwrapServletRequest(wrapper2);
  assertEquals(req,unwrapped);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.engine.impl.request.SlingRequestProgressTrackerTest </h4><pre class="type-15 type-11 type-12 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void messageFormatting(){
  final SlingRequestProgressTracker tracker=new SlingRequestProgressTracker();
  tracker.startTimer("foo");
  tracker.log("one {0}, two {1}, three {2}","eins","zwei","drei");
  tracker.startTimer("bar");
  tracker.logTimer("bar");
  tracker.logTimer("foo");
  tracker.done();
  final String[] expected={"TIMER_START{Request Processing}\n","COMMENT timer_end format is {<elapsed msec>,<timer name>} <optional message>\n","TIMER_START{foo}\n","LOG one eins, two zwei, three drei\n","TIMER_START{bar}\n","TIMER_END{?,bar}\n","TIMER_END{?,foo}\n","TIMER_END{?,Request Processing} Request Processing\n"};
  final Iterator<String> messages=tracker.getMessages();
  int messageCounter=0;
  while (messages.hasNext()) {
    final String m=messages.next();
    final String e=expected[messageCounter++];
    if (e.startsWith("TIMER_END{")) {
      assertEquals(substringAfter(e,','),substringAfter(m,','));
    }
 else {
      assertEquals(e,m.substring(8));
    }
  }
  assertEquals(expected.length,messageCounter);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.event.it.ClassloadingTest </h4><pre class="type-11 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=DEFAULT_TEST_TIMEOUT) public void testSimpleClassloading() throws Exception {
  final AtomicInteger processedJobsCount=new AtomicInteger(0);
  final List<Event> finishedEvents=Collections.synchronizedList(new ArrayList<Event>());
  this.registerJobConsumer(TOPIC,new JobConsumer(){
    @Override public JobResult process(    Job job){
      processedJobsCount.incrementAndGet();
      return JobResult.OK;
    }
  }
);
  this.registerEventHandler(NotificationConstants.TOPIC_JOB_FINISHED,new EventHandler(){
    @Override public void handleEvent(    Event event){
      finishedEvents.add(event);
    }
  }
);
  final JobManager jobManager=this.getJobManager();
  final List<String> list=new ArrayList<String>();
  list.add("1");
  list.add("2");
  final Map<String,String> map=new HashMap<String,String>();
  map.put("a","a1");
  map.put("b","b2");
  final Map<String,Object> props=new HashMap<String,Object>();
  props.put("string","Hello");
  props.put("int",new Integer(5));
  props.put("long",new Long(7));
  props.put("list",list);
  props.put("map",map);
  final String jobId=jobManager.addJob(TOPIC,props).getId();
  new RetryLoop(Conditions.collectionIsNotEmptyCondition(finishedEvents,"Waiting for finishedEvents to have at least one element"),5,50);
  new RetryLoop(new RetryLoop.Condition(){
    @Override public String getDescription(){
      return "Waiting for job to be processed. Conditions: queuedJobs=" + jobManager.getStatistics().getNumberOfQueuedJobs() + ", jobsCount="+ processedJobsCount+ ", findJobs="+ jobManager.findJobs(JobManager.QueryType.ALL,TOPIC,-1,(Map<String,Object>[])null).size();
    }
    @Override public boolean isTrue() throws Exception {
      return jobManager.getStatistics().getNumberOfQueuedJobs() == 0 && processedJobsCount.get() == 1 && jobManager.findJobs(JobManager.QueryType.ALL,TOPIC,-1,(Map<String,Object>[])null).size() == 0;
    }
  }
,CONDITION_TIMEOUT_SECONDS,CONDITION_INTERVAL_MILLIS);
  final String jobTopic=(String)finishedEvents.get(0).getProperty(NotificationConstants.NOTIFICATION_PROPERTY_JOB_TOPIC);
  assertNotNull(jobTopic);
  assertEquals("Hello",finishedEvents.get(0).getProperty("string"));
  assertEquals(new Integer(5),Integer.valueOf(finishedEvents.get(0).getProperty("int").toString()));
  assertEquals(new Long(7),Long.valueOf(finishedEvents.get(0).getProperty("long").toString()));
  assertEquals(list,finishedEvents.get(0).getProperty("list"));
  assertEquals(map,finishedEvents.get(0).getProperty("map"));
  jobManager.removeJobById(jobId);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.event.it.HistoryTest </h4><pre class="type-11 type-12 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test history.
 * Start 10 jobs and cancel some of them and succeed others
 */
@Test(timeout=DEFAULT_TEST_TIMEOUT) public void testHistory() throws Exception {
  this.registerJobExecutor(TOPIC,new JobExecutor(){
    @Override public JobExecutionResult process(    final Job job,    final JobExecutionContext context){
      sleep(5L);
      final long count=job.getProperty(PROP_COUNTER,Long.class);
      if (count == 2 || count == 5 || count == 7) {
        return context.result().message(Job.JobState.ERROR.name()).cancelled();
      }
      return context.result().message(Job.JobState.SUCCEEDED.name()).succeeded();
    }
  }
);
  for (int i=0; i < 10; i++) {
    this.addJob(i);
  }
  this.sleep(200L);
  while (this.getJobManager().findJobs(JobManager.QueryType.HISTORY,TOPIC,-1,(Map<String,Object>[])null).size() < 10) {
    this.sleep(20L);
  }
  Collection<Job> col=this.getJobManager().findJobs(JobManager.QueryType.HISTORY,TOPIC,-1,(Map<String,Object>[])null);
  assertEquals(10,col.size());
  assertEquals(0,this.getJobManager().findJobs(JobManager.QueryType.ACTIVE,TOPIC,-1,(Map<String,Object>[])null).size());
  assertEquals(0,this.getJobManager().findJobs(JobManager.QueryType.QUEUED,TOPIC,-1,(Map<String,Object>[])null).size());
  assertEquals(0,this.getJobManager().findJobs(JobManager.QueryType.ALL,TOPIC,-1,(Map<String,Object>[])null).size());
  assertEquals(3,this.getJobManager().findJobs(JobManager.QueryType.CANCELLED,TOPIC,-1,(Map<String,Object>[])null).size());
  assertEquals(0,this.getJobManager().findJobs(JobManager.QueryType.DROPPED,TOPIC,-1,(Map<String,Object>[])null).size());
  assertEquals(3,this.getJobManager().findJobs(JobManager.QueryType.ERROR,TOPIC,-1,(Map<String,Object>[])null).size());
  assertEquals(0,this.getJobManager().findJobs(JobManager.QueryType.GIVEN_UP,TOPIC,-1,(Map<String,Object>[])null).size());
  assertEquals(0,this.getJobManager().findJobs(JobManager.QueryType.STOPPED,TOPIC,-1,(Map<String,Object>[])null).size());
  assertEquals(7,this.getJobManager().findJobs(JobManager.QueryType.SUCCEEDED,TOPIC,-1,(Map<String,Object>[])null).size());
  assertEquals(7,this.getJobManager().findJobs(JobManager.QueryType.SUCCEEDED,null,-1,(Map<String,Object>[])null).size());
  long last=9;
  for (  final Job j : col) {
    assertNotNull(j.getFinishedDate());
    final long count=j.getProperty(PROP_COUNTER,Long.class);
    assertEquals(last,count);
    if (count == 2 || count == 5 || count == 7) {
      assertEquals(Job.JobState.ERROR,j.getJobState());
    }
 else {
      assertEquals(Job.JobState.SUCCEEDED,j.getJobState());
    }
    assertEquals(j.getJobState().name(),j.getResultMessage());
    last--;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.event.it.SchedulingTest </h4><pre class="type-11 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=DEFAULT_TEST_TIMEOUT) public void testScheduling() throws Exception {
  final AtomicInteger counter=new AtomicInteger();
  this.registerJobConsumer(TOPIC,new JobConsumer(){
    @Override public JobResult process(    final Job job){
      if (job.getTopic().equals(TOPIC)) {
        counter.incrementAndGet();
      }
      return JobResult.OK;
    }
  }
);
  final ScheduledJobInfo info1=this.getJobManager().createJob(TOPIC).schedule().hourly(5).add();
  assertNotNull(info1);
  final ScheduledJobInfo info2=this.getJobManager().createJob(TOPIC).schedule().daily(10,5).add();
  assertNotNull(info2);
  final ScheduledJobInfo info3=this.getJobManager().createJob(TOPIC).schedule().weekly(3,19,12).add();
  assertNotNull(info3);
  assertEquals(3,this.getJobManager().getScheduledJobs().size());
  info3.unschedule();
  assertEquals(2,this.getJobManager().getScheduledJobs().size());
  info1.unschedule();
  assertEquals(1,this.getJobManager().getScheduledJobs().size());
  info2.unschedule();
  assertEquals(0,this.getJobManager().getScheduledJobs().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.event.it.TimedJobsTest </h4><pre class="type-11 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=DEFAULT_TEST_TIMEOUT) public void testTimedJob() throws Exception {
  final AtomicInteger counter=new AtomicInteger();
  this.registerJobConsumer(TOPIC,new JobConsumer(){
    @Override public JobResult process(    final Job job){
      if (job.getTopic().equals(TOPIC)) {
        counter.incrementAndGet();
      }
      return JobResult.OK;
    }
  }
);
  final Date d=new Date();
  d.setTime(System.currentTimeMillis() + 3000);
  final ScheduledJobInfo info=this.getJobManager().createJob(TOPIC).schedule().at(d).add();
  assertNotNull(info);
  while (counter.get() == 0) {
    this.sleep(1000);
  }
  assertEquals(0,this.getJobManager().getScheduledJobs().size());
  info.unschedule();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.hapi.client.test.FormTest </h4><pre class="type-11 type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testForm() throws ClientException, URISyntaxException {
  MicrodataHtmlClient client=new MicrodataHtmlClient(httpServer.getURI().toString());
  Document doc=client.enter(GET_URL);
  Items items=doc.items();
  Assert.assertThat(items.length(),equalTo(1));
  Items form=doc.form("test");
  Assert.assertThat(form.length(),equalTo(2));
  List<NameValuePair> data=new ArrayList<NameValuePair>();
  data.add(new BasicNameValuePair("f1","val1"));
  Document doc2=form.at(0).submit(data);
  Assert.assertThat(doc2.items().length(),equalTo(1));
  Document doc3=form.at(1).submit(data);
  Assert.assertThat(doc3.items().length(),equalTo(1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.hc.core.impl.executor.HealthCheckExecutorImplTest </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCollectResultsFromFuturesTimeout() throws Exception {
  List<HealthCheckFuture> futures=new LinkedList<HealthCheckFuture>();
  futures.add(future);
  Set<HealthCheckExecutionResult> results=new TreeSet<HealthCheckExecutionResult>();
  when(future.isDone()).thenReturn(false);
  when(future.getCreatedTime()).thenReturn(new Date());
  healthCheckExecutorImpl.collectResultsFromFutures(futures,results);
  verify(future,times(0)).get();
  assertEquals(1,results.size());
  HealthCheckExecutionResult result=results.iterator().next();
  assertEquals(Result.Status.WARN,result.getHealthCheckResult().getStatus());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCollectResultsFromFuturesCriticalTimeout() throws Exception {
  List<HealthCheckFuture> futures=new LinkedList<HealthCheckFuture>();
  futures.add(future);
  Set<HealthCheckExecutionResult> results=new TreeSet<HealthCheckExecutionResult>();
  when(future.isDone()).thenReturn(false);
  when(future.getCreatedTime()).thenReturn(new Date(new Date().getTime() - 1000 * 60 * 60));
  healthCheckExecutorImpl.collectResultsFromFutures(futures,results);
  assertEquals(1,results.size());
  HealthCheckExecutionResult result=results.iterator().next();
  verify(future,times(0)).get();
  assertEquals(Result.Status.CRITICAL,result.getHealthCheckResult().getStatus());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.hc.it.core.AsyncHealthCheckTest </h4><pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testAsyncHealthCheck() throws InterruptedException {
  final String id=UUID.randomUUID().toString();
  final AtomicInteger counter=new AtomicInteger(Integer.MIN_VALUE);
  final HealthCheck hc=new HealthCheck(){
    @Override public Result execute(){
      final int v=counter.incrementAndGet();
      return new Result(Result.Status.OK,"counter is now " + v);
    }
  }
;
  final Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(HealthCheck.NAME,"name_" + id);
  props.put(HealthCheck.TAGS,id);
  props.put(HealthCheck.ASYNC_CRON_EXPRESSION,"*/1 * * * * ?");
  @SuppressWarnings("rawtypes") final ServiceRegistration reg=bundleContext.registerService(HealthCheck.class,hc,props);
  try {
    U.expectHealthChecks(1,executor,id);
{
      counter.set(0);
      final long timeout=System.currentTimeMillis() + 5000L;
      while (System.currentTimeMillis() < timeout) {
        if (counter.get() > 0) {
          break;
        }
        Thread.sleep(100L);
      }
      assertTrue("Expecting counter to be incremented",counter.get() > 0);
    }
    final String msg=executor.execute(id).get(0).getHealthCheckResult().iterator().next().getMessage();
    assertTrue("Expecting the right message: " + msg,msg.contains("counter is now"));
    final int previous=counter.get();
    final int n=100;
    for (int i=0; i < n; i++) {
      executor.execute(id);
    }
    assertTrue("Expecting counter to increment asynchronously",counter.get() < previous + n);
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.hc.it.core.SampleHealthChecksTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnnotatedHC(){
  final List<HealthCheckExecutionResult> results=executor.execute("annotation","sample");
  assertNotNull("Expecting non-null results");
  assertEquals("Expecting a single result",1,results.size());
  final HealthCheckExecutionResult r=results.get(0);
  assertTrue("Expecting non-empty HC log",r.getHealthCheckResult().iterator().hasNext());
  final String expected="All good";
  assertTrue("Expecting first log message to contain " + expected,r.getHealthCheckResult().iterator().next().getMessage().contains(expected));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.hc.junitbridge.tests.HealthCheckTestsProviderTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetTestNames(){
  final List<String> names=provider.getTestNames();
  assertEquals(TAG_GROUPS.length,names.size());
  for (  String tag : TAG_GROUPS) {
    final String expected=testName(tag);
    assertTrue("Expecting test names to contain " + expected + ", "+ names,names.contains(expected));
  }
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoFailuresHealthCheck() throws ClassNotFoundException {
  final Class<?> c=provider.createTestClass(testName("PASS_HC"));
  assertNotNull("Expecting non-null test class",c);
  final org.junit.runner.Result r=JUnitCore.runClasses(c);
  assertEquals(0,r.getFailureCount());
  assertEquals(1,r.getRunCount());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailingHealthCheck() throws ClassNotFoundException {
  final Class<?> c=provider.createTestClass(testName("FAIL_HC and BAD_HC"));
  assertNotNull("Expecting non-null test class",c);
  final org.junit.runner.Result r=JUnitCore.runClasses(c);
  assertEquals(2,r.getFailureCount());
  assertEquals(2,r.getRunCount());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPassAndFailHealthCheck() throws ClassNotFoundException {
  final Class<?> c=provider.createTestClass(testName("FAIL_HC and PASS_HC and OK_HC and BAD_HC"));
  assertNotNull("Expecting non-null test class",c);
  final org.junit.runner.Result r=JUnitCore.runClasses(c);
  assertEquals(2,r.getFailureCount());
  assertEquals(4,r.getRunCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.ide.eclipse.ui.wizards.np.ChooseArchetypeWizardPageTest </h4><pre class="type-11 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void comparatorForDifferentVersions(){
  String key1="org.apache.sling : template1 : 1.0.0";
  String key2="org.apache.sling : template1 : 1.0.2";
  int res=ChooseArchetypeWizardPage.ARTIFACT_KEY_COMPARATOR.compare(key1,key2);
  assertThat(res,CoreMatchers.equalTo(1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.ide.impl.vlt.transport.DefaultBatcherTest </h4><pre class="type-11 type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void identicalAddOrUpdatesAreCompacted(){
  AddOrUpdateNodeCommand first=new AddOrUpdateNodeCommand(mockRepo,credentials,null,null,new ResourceProxy("/content"),null);
  AddOrUpdateNodeCommand second=new AddOrUpdateNodeCommand(mockRepo,credentials,null,null,new ResourceProxy("/content"),null);
  batcher.add(first);
  batcher.add(second);
  List<Command<?>> batched=batcher.get();
  assertThat(batched,hasSize(1));
  Command<?> command=batched.get(0);
  assertThat(command,instanceOf(AddOrUpdateNodeCommand.class));
  assertThat(command.getPath(),equalTo("/content"));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void identicalsReorderingsAreCompacted(){
  ReorderChildNodesCommand first=new ReorderChildNodesCommand(mockRepo,credentials,new ResourceProxy("/content"),null);
  ReorderChildNodesCommand second=new ReorderChildNodesCommand(mockRepo,credentials,new ResourceProxy("/content"),null);
  batcher.add(first);
  batcher.add(second);
  List<Command<?>> batched=batcher.get();
  assertThat(batched,hasSize(1));
  Command<?> command=batched.get(0);
  assertThat(command,instanceOf(ReorderChildNodesCommand.class));
  assertThat(command.getPath(),equalTo("/content"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.ide.test.impl.ProjectUtilTest </h4><pre class="type-11 type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void slingContentProjectSyncedResourcesAreExportable() throws CoreException, InterruptedException {
  project.createOrUpdateFile(Path.fromPortableString("jcr_root/test/hello.txt"),new ByteArrayInputStream("goodbye, world".getBytes()));
  IPath filterPath=ProjectUtil.findFilterPath(contentProject);
  assertThat("filterPath.absolute",filterPath.isAbsolute(),equalTo(true));
  assertThat("filterPath",filterPath.makeRelativeTo(contentProject.getLocation()).toPortableString(),equalTo("META-INF/vault/filter.xml"));
}

</code></pre>

<br>
<pre class="type-11 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void defaultContentSyncRootIsReturned() throws Exception {
  IFolder syncDirectory=ProjectUtil.getSyncDirectory(contentProject);
  assertThat(syncDirectory.getProjectRelativePath(),equalTo(Path.fromPortableString("jcr_root")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.ide.test.impl.SlingContentModuleAdapterTest </h4><pre class="type-11 type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void projectMembersContainContentXmlFirst() throws Exception {
  IProject contentProject=projectRule.getProject();
  ProjectAdapter project=new ProjectAdapter(contentProject);
  project.addNatures(JavaCore.NATURE_ID,"org.eclipse.wst.common.project.facet.core.nature");
  project.installFacet("sling.content","1.0");
  project.createOrUpdateFile(Path.fromPortableString("jcr_root/content/1_file.txt"),new ByteArrayInputStream(new byte[0]));
  project.createOrUpdateFile(Path.fromPortableString("jcr_root/content/2_folder/filler.txt"),new ByteArrayInputStream(new byte[0]));
  project.createOrUpdateFile(Path.fromPortableString("jcr_root/content/3_file.txt"),new ByteArrayInputStream(new byte[0]));
  project.createOrUpdateFile(Path.fromPortableString("jcr_root/content/4_folder/filler.txt"),new ByteArrayInputStream(new byte[0]));
  project.createOrUpdateFile(Path.fromPortableString("jcr_root/content/5_file.txt"),new ByteArrayInputStream(new byte[0]));
  project.createOrUpdateFile(Path.fromPortableString("jcr_root/content/.content.xml"),new ByteArrayInputStream(new byte[0]));
  IModule module=ServerUtil.getModule(contentProject);
  SlingContentModuleFactory moduleFactory=new SlingContentModuleFactory();
  ModuleDelegate moduleDelegate=moduleFactory.getModuleDelegate(module);
  IModuleResource[] members=moduleDelegate.members();
  assertThat("members[0].path",members[0].getModuleRelativePath().toPortableString(),equalTo(""));
  assertThat("members[1].path",members[1].getModuleRelativePath().toPortableString(),equalTo("content"));
  assertThat("members[2].path",members[2].getModuleRelativePath().toPortableString(),equalTo("content/.content.xml"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.core.impl.InternalResourceTest </h4><pre class="type-15 type-11 type-12 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleProps() throws IOException {
  final String[] types=new String[]{InstallableResource.TYPE_CONFIG,InstallableResource.TYPE_PROPERTIES,null,"zip"};
  for (int i=0; i < types.length; i++) {
    final InstallableResource instRes=new InstallableResource("1",null,getSimpleDict(),null,types[i],null);
    final InternalResource ir=InternalResource.create(SCHEME,instRes);
    assertEquals(SCHEME + ":1",ir.getURL());
    assertEquals("1",ir.getId());
    assertNotNull(ir.getDictionary());
    assertIsSimpleDict(ir.getDictionary());
    assertNotNull(ir.getPrivateCopyOfDictionary());
    assertIsSimpleDict(ir.getPrivateCopyOfDictionary());
    assertNull(ir.getInputStream());
    assertNull(ir.getPrivateCopyOfFile());
    if ("zip".equals(types[i])) {
      assertEquals("zip",ir.getType());
    }
 else {
      assertEquals(InstallableResource.TYPE_PROPERTIES,ir.getType());
    }
    assertNotNull(ir.getDigest());
    assertEquals(InstallableResource.DEFAULT_PRIORITY,ir.getPriority());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.core.impl.RegisteredResourceComparatorTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfigDigests() throws IOException {
  final Dictionary<String,Object> data=new Hashtable<String,Object>();
  data.put("foo","bar");
  final RegisteredResourceImpl a=getConfig("pid",data,0);
  data.put("foo","changed");
  final RegisteredResourceImpl b=getConfig("pid",data,0);
  assertEquals("Entity urls must be the same",a.getEntityId(),b.getEntityId());
  assertTrue("Digests must be included in configs comparison",a.compareTo(b) != 0);
  final RegisteredResourceImpl a2=getConfig("pid",data,0);
  final RegisteredResourceImpl b2=getConfig("pid",data,0);
  assertEquals("Digests must be included in configs comparison",0,a2.compareTo(b2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.core.impl.tasks.BundleTaskCreatorTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleUpgradeSnapshot() throws IOException {
  final String v="2.0.7.SNAPSHOT";
  final TaskResource[] r={new MockBundleResource(SN,v)};
{
    final MockBundleTaskCreator c=new MockBundleTaskCreator();
    c.addBundleInfo(SN,v,Bundle.ACTIVE);
    final SortedSet<InstallTask> s=getTasks(r,c);
    assertEquals("Expected one task",1,s.size());
    assertTrue("Expected a BundleUpdateTask",s.first() instanceof BundleUpdateTask);
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleBundleAlreadyInstalled() throws IOException {
  final TaskResource[] r={new MockBundleResource(SN,"1.0")};
{
    final MockBundleTaskCreator c=new MockBundleTaskCreator();
    c.addBundleInfo(SN,"1.0",Bundle.ACTIVE);
    final SortedSet<InstallTask> s=getTasks(r,c);
    assertEquals("Expected one task, same version is active",1,s.size());
    assertTrue("Change state task expected.",s.first() instanceof ChangeStateTask);
  }
{
    final MockBundleTaskCreator c=new MockBundleTaskCreator();
    c.addBundleInfo(SN,"1.0",Bundle.RESOLVED);
    final SortedSet<InstallTask> s=getTasks(r,c);
    assertEquals("Expected one tasks, same version is installed",1,s.size());
    assertTrue("Change state task expected.",s.first() instanceof ChangeStateTask);
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleBundleNew() throws IOException {
  final TaskResource[] r={new MockBundleResource(SN,"1.0")};
  final MockBundleTaskCreator c=new MockBundleTaskCreator();
  final SortedSet<InstallTask> s=getTasks(r,c);
  assertEquals("Expected one task",1,s.size());
  assertTrue("Expected a BundleInstallTask",s.first() instanceof BundleInstallTask);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleUpgradeBothRegisteredReversed() throws IOException {
  final TaskResource[] r={new MockBundleResource(SN,"1.0"),new MockBundleResource(SN,"1.1")};
{
    final MockBundleTaskCreator c=new MockBundleTaskCreator();
    c.addBundleInfo(SN,"1.0",Bundle.ACTIVE);
    final SortedSet<InstallTask> s=getTasks(r,c);
    assertEquals("Expected two tasks",2,s.size());
    assertTrue("Expected a ChangeStateTask",s.first() instanceof ChangeStateTask);
    assertTrue("Expected a BundleUpdateTask",s.toArray()[1] instanceof BundleUpdateTask);
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleRemoveSingle() throws IOException {
  final String version="1.0";
  final MockBundleResource[] r={new MockBundleResource(SN,version)};
  r[0].setState(ResourceState.UNINSTALL);
{
    final MockBundleTaskCreator c=new MockBundleTaskCreator();
    c.addBundleInfo(SN,"1.0",Bundle.ACTIVE);
    final SortedSet<InstallTask> s=getTasks(r,c);
    assertEquals("Expected one task, remove bundle",1,s.size());
    assertTrue("Expected a BundleRemoveTask",s.first() instanceof BundleRemoveTask);
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleRemoveMultiple() throws IOException {
  final MockBundleResource[] r={new MockBundleResource(SN,"1.0"),new MockBundleResource(SN,"1.1"),new MockBundleResource(SN,"2.0")};
  for (  MockBundleResource x : r) {
    x.setState(ResourceState.UNINSTALL);
  }
{
    final MockBundleTaskCreator c=new MockBundleTaskCreator();
    c.addBundleInfo(SN,"1.1",Bundle.ACTIVE);
    final SortedSet<InstallTask> s=getTasks(r,c);
    assertEquals("Expected one tasks, bundle was not installed by us",2,s.size());
    final Iterator<InstallTask> i=s.iterator();
    final InstallTask first=i.next();
    final InstallTask second=i.next();
    assertTrue("Expected a ChangeStateTask",first instanceof ChangeStateTask);
    assertTrue("Expected a BundleRemoveTask",second instanceof BundleRemoveTask);
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDowngradeOfRemovedResource() throws IOException {
  final MockBundleResource[] r={new MockBundleResource(SN,"1.0.0"),new MockBundleResource(SN,"1.1.0")};
  r[1].setState(ResourceState.UNINSTALL);
{
    final MockBundleTaskCreator c=new MockBundleTaskCreator();
    c.addBundleInfo(SN,"1.1.0",Bundle.ACTIVE);
    final SortedSet<InstallTask> s=getTasks(r,c);
    assertEquals("Expected two tasks",2,s.size());
    final Iterator<InstallTask> i=s.iterator();
    final InstallTask first=i.next();
    assertTrue("Expected a ChangeStateTask:" + first,first instanceof ChangeStateTask);
    final InstallTask second=i.next();
    assertTrue("Expected a BundleRemoveTask",second instanceof BundleRemoveTask);
    final BundleRemoveTask t=(BundleRemoveTask)second;
    assertEquals("Remove should be to V1.1",r[1].getEntityId(),t.getResource().getEntityId());
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleUpgradeBothRegistered() throws IOException {
  final TaskResource[] r={new MockBundleResource(SN,"1.1"),new MockBundleResource(SN,"1.0")};
{
    final MockBundleTaskCreator c=new MockBundleTaskCreator();
    c.addBundleInfo(SN,"1.0",Bundle.ACTIVE);
    final SortedSet<InstallTask> s=getTasks(r,c);
    assertEquals("Expected two tasks",2,s.size());
    assertTrue("Expected a ChangeStateTask",s.first() instanceof ChangeStateTask);
    assertTrue("Expected a BundleUpdateTask",s.toArray()[1] instanceof BundleUpdateTask);
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleUpgrade() throws IOException {
  final TaskResource[] r={new MockBundleResource(SN,"1.1")};
{
    final MockBundleTaskCreator c=new MockBundleTaskCreator();
    c.addBundleInfo(SN,"1.0",Bundle.ACTIVE);
    final SortedSet<InstallTask> s=getTasks(r,c);
    assertEquals("Expected one task",1,s.size());
    assertTrue("Expected a BundleUpdateTask",s.first() instanceof BundleUpdateTask);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.factories.subsystems.base.impl.SubsystemBaseTransformerTest </h4><pre class="type-15 type-11 type-12 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOtherRunMode() throws Exception {
  SlingSettingsService slingSettings=Mockito.mock(SlingSettingsService.class);
  Mockito.when(slingSettings.getRunModes()).thenReturn(new HashSet<String>(Arrays.asList("bar","tar")));
  SubsystemBaseTransformer sbt=new SubsystemBaseTransformer(slingSettings);
  URL testArchive=getClass().getResource("/test1.subsystem-base");
  RegisteredResource resource=new TestRegisteredResource(testArchive);
  TransformationResult[] tra=sbt.transform(resource);
  assertEquals(1,tra.length);
  TransformationResult tr=tra[0];
  assertEquals("esa",tr.getResourceType());
  assertEquals("test1",tr.getId());
  DeleteOnCloseFileInputStream dcis=(DeleteOnCloseFileInputStream)tr.getInputStream();
  assertTrue("The file backing the stream should exist",dcis.file.exists());
  Set<String> foundBundles=new HashSet<>();
  try (ZipInputStream zis=new ZipInputStream(dcis);JarFile jf=new JarFile(testArchive.getFile())){
    ZipEntry ze=null;
    while ((ze=zis.getNextEntry()) != null) {
      foundBundles.add(ze.getName());
switch (ze.getName()) {
case "OSGI-INF/SUBSYSTEM.MF":
        Manifest mf=new Manifest(zis);
      Attributes attrs=mf.getMainAttributes();
    assertEquals("test1",attrs.getValue("Subsystem-SymbolicName"));
  assertEquals("osgi.subsystem.composite",attrs.getValue("Subsystem-Type"));
assertEquals("(c) 2015 yeah!",attrs.getValue("Subsystem-Copyright"));
assertEquals("Extra subsystem headers can go here including very long ones " + "that would span multiple lines in a manifest",attrs.getValue("Subsystem-Description"));
assertEquals("org.apache.sling.commons.osgi;version=2.3.0;type=osgi.bundle;start-order:=0," + "org.apache.sling.commons.json;version=2.0.12;type=osgi.bundle;start-order:=10," + "org.apache.sling.commons.mime;version=2.1.8;type=osgi.bundle;start-order:=10,"+ "org.apache.sling.commons.threads;version=3.2.0;type=osgi.bundle;start-order:=20,"+ "org.apache.sling.commons.contentdetection;version=1.0.2;type=osgi.bundle;start-order:=100",attrs.getValue("Subsystem-Content"));
break;
case "org.apache.sling.commons.osgi-2.3.0.jar":
ZipEntry oze=jf.getEntry("Potential_Bundles/0/org.apache.sling.commons.osgi-2.3.0.jar");
assertArtifactsEqual(oze.getName(),jf.getInputStream(oze),zis);
break;
case "org.apache.sling.commons.json-2.0.12.jar":
ZipEntry jze=jf.getEntry("Potential_Bundles/10/org.apache.sling.commons.json-2.0.12.jar");
assertArtifactsEqual(jze.getName(),jf.getInputStream(jze),zis);
break;
case "org.apache.sling.commons.mime-2.1.8.jar":
ZipEntry mze=jf.getEntry("Potential_Bundles/10/org.apache.sling.commons.mime-2.1.8.jar");
assertArtifactsEqual(mze.getName(),jf.getInputStream(mze),zis);
break;
case "org.apache.sling.commons.threads-3.2.0.jar":
ZipEntry tze=jf.getEntry("Potential_Bundles/20/org.apache.sling.commons.threads-3.2.0.jar");
assertArtifactsEqual(tze.getName(),jf.getInputStream(tze),zis);
break;
case "org.apache.sling.commons.contentdetection-1.0.2.jar":
ZipEntry cze=jf.getEntry("Potential_Bundles/100/org.apache.sling.commons.contentdetection-1.0.2.jar");
assertArtifactsEqual(cze.getName(),jf.getInputStream(cze),zis);
break;
}
}
}
 assertEquals(new HashSet<>(Arrays.asList("OSGI-INF/SUBSYSTEM.MF","org.apache.sling.commons.osgi-2.3.0.jar","org.apache.sling.commons.json-2.0.12.jar","org.apache.sling.commons.mime-2.1.8.jar","org.apache.sling.commons.threads-3.2.0.jar","org.apache.sling.commons.contentdetection-1.0.2.jar")),foundBundles);
assertFalse("After closing the stream the temp file should have been deleted.",dcis.file.exists());
}

</code></pre>

<br>
<pre class="type-15 type-11 type-12 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransformNoRunMode() throws Exception {
  SlingSettingsService slingSettings=Mockito.mock(SlingSettingsService.class);
  SubsystemBaseTransformer sbt=new SubsystemBaseTransformer(slingSettings);
  URL testArchive=getClass().getResource("/test1.subsystem-base");
  RegisteredResource resource=new TestRegisteredResource(testArchive);
  TransformationResult[] tra=sbt.transform(resource);
  assertEquals(1,tra.length);
  TransformationResult tr=tra[0];
  assertEquals("esa",tr.getResourceType());
  assertEquals("test1",tr.getId());
  DeleteOnCloseFileInputStream dcis=(DeleteOnCloseFileInputStream)tr.getInputStream();
  assertTrue("The file backing the stream should exist",dcis.file.exists());
  Set<String> foundBundles=new HashSet<>();
  try (ZipInputStream zis=new ZipInputStream(dcis);JarFile jf=new JarFile(testArchive.getFile())){
    ZipEntry ze=null;
    while ((ze=zis.getNextEntry()) != null) {
      foundBundles.add(ze.getName());
switch (ze.getName()) {
case "OSGI-INF/SUBSYSTEM.MF":
        Manifest mf=new Manifest(zis);
      Attributes attrs=mf.getMainAttributes();
    assertEquals("test1",attrs.getValue("Subsystem-SymbolicName"));
  assertEquals("osgi.subsystem.composite",attrs.getValue("Subsystem-Type"));
assertEquals("(c) 2015 yeah!",attrs.getValue("Subsystem-Copyright"));
assertEquals("Extra subsystem headers can go here including very long ones " + "that would span multiple lines in a manifest",attrs.getValue("Subsystem-Description"));
assertEquals("org.apache.sling.commons.osgi;version=2.3.0;type=osgi.bundle;start-order:=0," + "org.apache.sling.commons.json;version=2.0.12;type=osgi.bundle;start-order:=10," + "org.apache.sling.commons.mime;version=2.1.8;type=osgi.bundle;start-order:=10",attrs.getValue("Subsystem-Content"));
break;
case "org.apache.sling.commons.osgi-2.3.0.jar":
ZipEntry oze=jf.getEntry("Potential_Bundles/0/org.apache.sling.commons.osgi-2.3.0.jar");
assertArtifactsEqual(oze.getName(),jf.getInputStream(oze),zis);
break;
case "org.apache.sling.commons.json-2.0.12.jar":
ZipEntry jze=jf.getEntry("Potential_Bundles/10/org.apache.sling.commons.json-2.0.12.jar");
assertArtifactsEqual(jze.getName(),jf.getInputStream(jze),zis);
break;
case "org.apache.sling.commons.mime-2.1.8.jar":
ZipEntry mze=jf.getEntry("Potential_Bundles/10/org.apache.sling.commons.mime-2.1.8.jar");
assertArtifactsEqual(mze.getName(),jf.getInputStream(mze),zis);
break;
}
}
}
 assertEquals(new HashSet<>(Arrays.asList("OSGI-INF/SUBSYSTEM.MF","org.apache.sling.commons.osgi-2.3.0.jar","org.apache.sling.commons.json-2.0.12.jar","org.apache.sling.commons.mime-2.1.8.jar")),foundBundles);
assertFalse("After closing the stream the temp file should have been deleted.",dcis.file.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.it.BundleInstallStressTest </h4><pre class="type-11 type-2 type-12 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp(){
  setupInstaller();
  final String bf=System.getProperty(PROP_BUNDLES_FOLDER);
  if (bf == null) {
    fail("Missing system property: " + PROP_BUNDLES_FOLDER);
  }
  bundlesFolder=new File(bf);
  if (!bundlesFolder.isDirectory()) {
    fail("Bundles folder '" + bundlesFolder.getAbsolutePath() + "' not found");
  }
  final String cc=System.getProperty(PROP_CYCLE_COUNT);
  if (cc == null) {
    fail("Missing system property:" + PROP_CYCLE_COUNT);
  }
  cycleCount=Integer.parseInt(cc);
  final String et=System.getProperty(PROP_EXPECT_TIMEOUT_SECONDS);
  if (et == null) {
    fail("Missing system property:" + PROP_EXPECT_TIMEOUT_SECONDS);
  }
  expectBundlesTimeoutMsec=Integer.parseInt(et) * 1000L;
  log(LogService.LOG_INFO,getClass().getSimpleName() + ": cycle count=" + cycleCount+ ", expect timeout (msec)="+ expectBundlesTimeoutMsec+ ", test bundles folder="+ bundlesFolder.getAbsolutePath());
  testBundles=new LinkedList<File>();
  final String[] files=bundlesFolder.list();
  for (  String filename : files) {
    if (filename.endsWith(".jar")) {
      testBundles.add(new File(bundlesFolder,filename));
    }
  }
  if (testBundles.size() < MIN_TEST_BUNDLES) {
    fail("Found only " + testBundles.size() + " bundles in test folder, expected at least "+ MIN_TEST_BUNDLES+ " (test folder="+ bundlesFolder.getAbsolutePath()+ ")");
  }
  random=new Random(42 + cycleCount);
  eventsDetector=new EventsDetector(bundleContext);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.it.BundleInstallUpgradeDowngradeTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallUpgradeDowngradeBundle() throws Exception {
  final String symbolicName="osgi-installer-testbundle";
  assertNull("Test bundle must not be present before test",findBundle(symbolicName));
  long bundleId=0;
{
    assertNull("Test bundle must be absent before installing",findBundle(symbolicName));
    final Object listener=this.startObservingBundleEvents();
    installer.updateResources(URL_SCHEME,getInstallableResource(getTestBundle(BUNDLE_BASE_NAME + "-testbundle-1.1.jar")),null);
    this.waitForBundleEvents(symbolicName + " must be installed",listener,new BundleEvent(symbolicName,"1.1",org.osgi.framework.BundleEvent.INSTALLED),new BundleEvent(symbolicName,"1.1",org.osgi.framework.BundleEvent.STARTED));
    final Bundle b=assertBundle("After installing",symbolicName,"1.1",Bundle.ACTIVE);
    bundleId=b.getBundleId();
  }
{
    final Object listener=this.startObservingBundleEvents();
    installer.updateResources(URL_SCHEME,getInstallableResource(getTestBundle(BUNDLE_BASE_NAME + "-testbundle-1.2.jar"),"digestA"),null);
    this.waitForBundleEvents(symbolicName + " must be installed",listener,new BundleEvent(symbolicName,"1.1",org.osgi.framework.BundleEvent.STOPPED),new BundleEvent(symbolicName,"1.2",org.osgi.framework.BundleEvent.STARTED));
    final Bundle b=assertBundle("After updating to 1.2",symbolicName,"1.2",Bundle.ACTIVE);
    assertEquals("Bundle ID must not change after update",bundleId,b.getBundleId());
  }
{
    final Object listener=this.startObservingBundleEvents();
    installer.updateResources(URL_SCHEME,getInstallableResource(getTestBundle(BUNDLE_BASE_NAME + "-testbundle-1.0.jar"),"digestA"),null);
    sleep(150);
    this.assertNoBundleEvents("Older bundle should not be installed.",listener,symbolicName);
    final Bundle b=assertBundle("After ignored downgrade",symbolicName,"1.2",Bundle.ACTIVE);
    assertEquals("Bundle ID must not change after ignored downgrade",bundleId,b.getBundleId());
  }
{
    final Object listener=this.startObservingBundleEvents();
    installer.updateResources(URL_SCHEME,getInstallableResource(getTestBundle(BUNDLE_BASE_NAME + "-testbundle-1.0.jar"),"digestB"),null);
    sleep(150);
    this.assertNoBundleEvents("Update to same version should generate no OSGi tasks.",listener,symbolicName);
  }
{
    final Object listener=this.startObservingBundleEvents();
    installer.updateResources(URL_SCHEME,null,getNonInstallableResourceUrl(getTestBundle(BUNDLE_BASE_NAME + "-testbundle-1.0.jar")));
    sleep(150);
    this.assertNoBundleEvents("Older bundle remove should not cause a remove",listener,symbolicName);
  }
{
    final Object listener=this.startObservingBundleEvents();
    installer.updateResources(URL_SCHEME,null,getNonInstallableResourceUrl(getTestBundle(BUNDLE_BASE_NAME + "-testbundle-1.1.jar")));
    this.assertNoBundleEvents("Older bundle remove should not cause a remove",listener,symbolicName);
  }
{
    final Object listener=this.startObservingBundleEvents();
    installer.updateResources(URL_SCHEME,null,getNonInstallableResourceUrl(getTestBundle(BUNDLE_BASE_NAME + "-testbundle-1.2.jar")));
    this.waitForBundleEvents(symbolicName + " must be installed",listener,new BundleEvent(symbolicName,"1.2",org.osgi.framework.BundleEvent.STOPPED),new BundleEvent(symbolicName,"1.2",org.osgi.framework.BundleEvent.UNINSTALLED));
    final Bundle b=findBundle(symbolicName);
    assertNull("Testbundle must be gone",b);
  }
{
    final Object listener=this.startObservingBundleEvents();
    installer.updateResources(URL_SCHEME,getInstallableResource(getTestBundle(BUNDLE_BASE_NAME + "-testbundle-1.1.jar")),null);
    this.waitForBundleEvents(symbolicName + " reinstall with lower version",listener,new BundleEvent(symbolicName,"1.1",org.osgi.framework.BundleEvent.INSTALLED),new BundleEvent(symbolicName,"1.1",org.osgi.framework.BundleEvent.STARTED));
    assertBundle("After reinstalling 1.1",symbolicName,"1.1",Bundle.ACTIVE);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.it.BundlePrioritiesTest </h4><pre class="type-11 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Use snapshots, it's the only bundles which are updated even if their version doesn't change
 */
@Test public void testPrioritiesUsingSnapshots() throws Exception {
  final String symbolicName="osgi-installer-snapshot-test";
  assertNull("Snapshot test bundle must be absent before installing",findBundle(symbolicName));
  final int lowPriority=InstallableResource.DEFAULT_PRIORITY - 1;
  final int highPriority=InstallableResource.DEFAULT_PRIORITY + 1;
{
    final Object listener=this.startObservingBundleEvents();
    installer.updateResources(URL_SCHEME,getInstallableResource(getTestBundle(BUNDLE_BASE_NAME + "-snap.jar"),"digest1"),null);
    this.waitForBundleEvents(symbolicName + " must be installed and active",listener,new BundleEvent(symbolicName,org.osgi.framework.BundleEvent.INSTALLED),new BundleEvent(symbolicName,org.osgi.framework.BundleEvent.STARTED));
    assertBundle("Initial install",symbolicName,null,Bundle.ACTIVE);
    final Bundle b=findBundle(symbolicName);
    assertEquals("A",b.getHeaders().get("SNAPSHOT"));
  }
{
    final Object listener=this.startObservingBundleEvents();
    installer.updateResources(URL_SCHEME,getInstallableResource(getTestBundle(BUNDLE_BASE_NAME + "-snapb.jar"),"digest2",lowPriority),null);
    sleep(1000L);
    this.assertNoBundleEvents("Low-priority snapshot updated must be ignored",listener,symbolicName);
    assertBundle("Update one",symbolicName,null,Bundle.ACTIVE);
    final Bundle b=findBundle(symbolicName);
    assertEquals("Low-priority snapshot updated must be ignored","A",b.getHeaders().get("SNAPSHOT"));
  }
{
    final Object listener=this.startObservingBundleEvents();
    installer.updateResources(URL_SCHEME,getInstallableResource(getTestBundle(BUNDLE_BASE_NAME + "-snapc.jar"),"digest3",highPriority),null);
    this.waitForBundleEvents(symbolicName + " must be installed and active",listener,new BundleEvent(symbolicName,org.osgi.framework.BundleEvent.UPDATED),new BundleEvent(symbolicName,org.osgi.framework.BundleEvent.STARTED));
    assertBundle("Update two",symbolicName,null,Bundle.ACTIVE);
    final Bundle b=findBundle(symbolicName);
    assertEquals("High-priority snapshot updated must be processed","C",b.getHeaders().get("SNAPSHOT"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.it.ConfigInstallTest </h4><pre class="type-11 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallConfigWindowsPath() throws Exception {
  final Dictionary<String,Object> cfgData=new Hashtable<String,Object>();
  cfgData.put("foo","bar");
  final String cfgPid=getClass().getSimpleName() + "." + uniqueID();
  assertNull("Config " + cfgPid + " must not be found before test",findConfiguration(cfgPid));
  final String uri="c:\\foo\bar\\";
  final InstallableResource result=new MockInstallableResource(uri + cfgPid,copy(cfgData),null,null,100);
  final InstallableResource[] rsrc=new InstallableResource[]{result};
  installer.updateResources(URL_SCHEME,rsrc,null);
  Configuration cfg=waitForConfiguration("After installing",cfgPid,true);
  assertEquals("Config value must match","bar",cfg.getProperties().get("foo"));
  installer.updateResources(URL_SCHEME,null,new String[]{rsrc[0].getId()});
  waitForConfiguration("After removing for the second time",cfgPid,false);
}

</code></pre>

<br>
<pre class="type-11 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallAndRemoveConfig() throws Exception {
  final Dictionary<String,Object> cfgData=new Hashtable<String,Object>();
  cfgData.put("foo","bar");
  final String cfgPid=getClass().getSimpleName() + "." + uniqueID();
  assertNull("Config " + cfgPid + " must not be found before test",findConfiguration(cfgPid));
  final InstallableResource[] rsrc=getInstallableResource(cfgPid,cfgData);
  installer.updateResources(URL_SCHEME,rsrc,null);
  Configuration cfg=waitForConfiguration("After installing",cfgPid,true);
  assertEquals("Config value must match","bar",cfg.getProperties().get("foo"));
  installer.updateResources(URL_SCHEME,null,new String[]{rsrc[0].getId()});
  waitForConfiguration("After removing",cfgPid,false);
  installer.updateResources(URL_SCHEME,rsrc,null);
  cfg=waitForConfiguration("After reinstalling",cfgPid,true);
  assertEquals("Config value must match","bar",cfg.getProperties().get("foo"));
  installer.updateResources(URL_SCHEME,null,new String[]{rsrc[0].getId()});
  waitForConfiguration("After removing for the second time",cfgPid,false);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.it.FragmentInstallTest </h4><pre class="type-11 type-13 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallFragment() throws Exception {
  final String hostSymbolicName="osgi-installer-testbundle";
  assertNull("Test host bundle must be absent before installing",findBundle(hostSymbolicName));
  final String fragmentSymbolicName="osgi-installer-testfragment";
  assertNull("Test fragment bundle must be absent before installing",findBundle(fragmentSymbolicName));
  Object listener=this.startObservingBundleEvents();
  installer.updateResources(URL_SCHEME,getInstallableResource(getTestBundle(BUNDLE_BASE_NAME + "-testbundle-1.2.jar"),"digest1"),null);
  this.waitForBundleEvents("Test bundle 1.2 must be found after waitForInstallerAction",listener,new BundleEvent(hostSymbolicName,"1.2",org.osgi.framework.BundleEvent.INSTALLED),new BundleEvent(hostSymbolicName,"1.2",org.osgi.framework.BundleEvent.STARTED));
  this.assertBundle("Bundle version 1.2 must be installed.",hostSymbolicName,"1.2",Bundle.ACTIVE);
  listener=this.startObservingBundleEvents();
  installer.updateResources(URL_SCHEME,getInstallableResource(getTestBundle(BUNDLE_BASE_NAME + "-testfragment-1.0.jar"),"digest2"),null);
  this.waitForBundleEvents("Fragment bundle 1.0 must be found after waitForInstallerAction",listener,new BundleEvent(fragmentSymbolicName,"1.0",org.osgi.framework.BundleEvent.RESOLVED),new BundleEvent(hostSymbolicName,"1.2",org.osgi.framework.BundleEvent.STARTED));
  this.assertBundle("Host bundle must be still be active.",hostSymbolicName,"1.2",Bundle.ACTIVE);
  final Bundle host=findBundle(hostSymbolicName);
  assertTrue("Expecting host bundle to export its own package",isPackageExported(host,"com.example.testbundle.somepackage"));
  assertTrue("Expecting host bundle to export the fragment's package",isPackageExported(host,"com.example.testfragment.fragmentpackage"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.jcr.base.SessionProxyHandlerTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Method verifies that session proxy with given repository manager could be created
 * and proxy instance is a kind of <code>SessionProxyHandler.SessionProxyInvocationHandler</code>
 * class.
 */
@Test public void testProxy() throws RepositoryException {
  Session session=Mockito.spy(MockJcr.newSession("admin","adminSpace"));
  Session imperSession=MockJcr.newSession("test","testSpace");
  doReturn(imperSession).when(session).impersonate(null);
  SessionProxyHandler proxyHandler=new SessionProxyHandler(new MockSlingRepositoryManager(null));
  Session proxySession=proxyHandler.createProxy(session);
  Session sessionForTest=proxySession.impersonate(null);
  InvocationHandler handler=Proxy.getInvocationHandler(sessionForTest);
  assertEquals(SessionProxyHandler.SessionProxyInvocationHandler.class,handler.getClass());
  assertNotNull(sessionForTest.getRootNode());
  assertNotNull(sessionForTest.getRepository());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.jcr.contentloader.internal.ContentLoaderServiceTest </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBundleResolvedBundleChanged() throws NoSuchFieldException, RepositoryException {
  final Bundle bundle=createNewBundle();
  final List<Bundle> delayedBundles=(List<Bundle>)PrivateAccessor.getField(contentLoader,"delayedBundles");
  final Set<String> updatedBundles=(Set<String>)PrivateAccessor.getField(underTest,"updatedBundles");
  updatedBundles.add(bundle.getSymbolicName());
  int updatedBundlesCurrentAmout=updatedBundles.size();
  underTest.bundleChanged(new BundleEvent(BundleEvent.RESOLVED,bundle));
  assertEquals(updatedBundlesCurrentAmout - 1,delayedBundles.size());
  updatedBundlesCurrentAmout=updatedBundles.size();
  underTest.bundleChanged(new BundleEvent(BundleEvent.UPDATED,bundle));
  assertEquals(updatedBundlesCurrentAmout + 1,updatedBundles.size());
  underTest.bundleChanged(new BundleEvent(BundleEvent.UNINSTALLED,bundle));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.jcr.contentloader.internal.DefaultContentCreatorTest </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void createNodeWithoutProvidedNames() throws RepositoryException, NoSuchFieldException {
  Stack nodesStack=(Stack)PrivateAccessor.getField(contentCreator,"parentNodeStack");
  contentCreator.init(ImportOptionsFactory.createImportOptions(true,true,true,false,false),new HashMap<String,ContentReader>(),null,null);
  contentCreator.prepareParsing(parentNode,null);
  assertEquals(1,nodesStack.size());
  contentCreator.createNode(null,null,null);
  assertEquals(1,nodesStack.size());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createNodeWithPrimaryType() throws RepositoryException {
  final String newNodeName=uniqueId();
  final List<String> createdNodes=new ArrayList<String>();
  final ContentImportListener listener=mockery.mock(ContentImportListener.class);
  this.mockery.checking(new Expectations(){
{
      oneOf(listener).onCreate(with(any(String.class)));
    }
  }
);
  contentCreator.init(ImportOptionsFactory.createImportOptions(true,false,true,false,false),new HashMap<String,ContentReader>(),createdNodes,listener);
  contentCreator.prepareParsing(parentNode,DEFAULT_NAME);
  int createdNodesSize=createdNodes.size();
  contentCreator.createNode(newNodeName,NodeType.NT_UNSTRUCTURED,null);
  assertEquals(createdNodesSize + 1,createdNodes.size());
  Node createdNode=parentNode.getNode(newNodeName);
  assertNotNull(createdNode);
  assertTrue(createdNode.getPrimaryNodeType().isNodeType(NodeType.NT_UNSTRUCTURED));
  mockery.assertIsSatisfied();
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addMixinsToExistingNode() throws RepositoryException, NoSuchFieldException {
  final String newNodeName=uniqueId();
  final String[] mixins={"mix:versionable"};
  final List<Node> versionables=(List<Node>)PrivateAccessor.getField(contentCreator,"versionables");
  contentCreator.init(ImportOptionsFactory.createImportOptions(false,false,false,true,false),new HashMap<String,ContentReader>(),null,null);
  contentCreator.prepareParsing(parentNode,DEFAULT_NAME);
  Node newNode=parentNode.addNode(newNodeName);
  assertEquals(0,versionables.size());
  assertFalse(newNode.isNodeType(mixins[0]));
  contentCreator.createNode(newNodeName,null,mixins);
  assertEquals(1,versionables.size());
  assertTrue(newNode.isNodeType(mixins[0]));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void createReferenceProperty() throws RepositoryException, NoSuchFieldException {
  final String propName=uniqueId();
  final String[] propValues={uniqueId(),uniqueId()};
  final ContentImportListener listener=mockery.mock(ContentImportListener.class);
  final Map<String,String[]> delayedMultipleReferences=(Map<String,String[]>)PrivateAccessor.getField(contentCreator,"delayedMultipleReferences");
  this.mockery.checking(new Expectations(){
{
      oneOf(listener).onCreate(with(any(String.class)));
    }
  }
);
  contentCreator.init(ImportOptionsFactory.createImportOptions(false,false,false,false,false),new HashMap<String,ContentReader>(),null,listener);
  contentCreator.prepareParsing(parentNode,DEFAULT_NAME);
  contentCreator.createProperty(propName,PropertyType.REFERENCE,propValues);
  assertTrue(parentNode.hasProperty(propName));
  assertTrue(parentNode.getProperty(propName).isNew());
  String referencesKey=parentNode.getPath() + "/" + propName;
  String[] uuidsOrPaths=delayedMultipleReferences.get(referencesKey);
  assertNotNull(uuidsOrPaths);
  assertEquals(propValues.length,uuidsOrPaths.length);
  mockery.assertIsSatisfied();
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void finishNodeWithMultipleProperty() throws RepositoryException, NoSuchFieldException {
  final String propName=uniqueId();
  final String underTestNodeName=uniqueId();
  final Map<String,List<String>> delayedMultipleReferences=(Map<String,List<String>>)PrivateAccessor.getField(contentCreator,"delayedMultipleReferences");
  final ContentImportListener listener=mockery.mock(ContentImportListener.class);
  this.mockery.checking(new Expectations(){
{
      exactly(3).of(listener).onCreate(with(any(String.class)));
    }
  }
);
  contentCreator.init(ImportOptionsFactory.createImportOptions(false,false,false,false,false),new HashMap<String,ContentReader>(),null,listener);
  contentCreator.prepareParsing(parentNode,null);
  contentCreator.createProperty(propName,PropertyType.REFERENCE,new String[]{underTestNodeName});
  contentCreator.createNode(underTestNodeName,null,null);
  assertEquals(1,delayedMultipleReferences.size());
  Node underTest=parentNode.getNode(underTestNodeName);
  underTest.addMixin("mix:referenceable");
  contentCreator.finishNode();
  assertEquals(0,delayedMultipleReferences.size());
  mockery.assertIsSatisfied();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.jcr.contentloader.internal.PathEntryTest </h4><pre class="type-15 type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetContentPaths(){
  final Bundle bundle=mockery.mock(Bundle.class);
  final Dictionary<String,String> dict=new Hashtable();
  dict.put("Bnd-LastModified","1258555936230");
  dict.put(PathEntry.CONTENT_HEADER,"test1, test2");
  final long lastModifiedValue=1258555936229L;
  mockery.checking(new Expectations(){
{
      allowing(bundle).getLastModified();
      will(returnValue(lastModifiedValue));
      allowing(bundle).getHeaders();
      will(returnValue(dict));
    }
  }
);
  int i=0;
  Iterator<PathEntry> paths=PathEntry.getContentPaths(bundle);
  assertNotNull(paths);
  while (paths.hasNext()) {
    i++;
    assertEquals(lastModifiedValue,paths.next().getLastModified());
  }
  assertEquals(2,i);
  dict.remove(PathEntry.CONTENT_HEADER);
  assertNull(PathEntry.getContentPaths(bundle));
  mockery.assertIsSatisfied();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.jcr.repository.it.CommonTests </h4><pre class="type-11 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testOsgiResourceEvents() throws RepositoryException {
  final ResourceEventListener listener=new ResourceEventListener();
  final ServiceRegistration reg=listener.register(bundleContext,SlingConstants.TOPIC_RESOURCE_ADDED);
  final Session s=repository.loginAdministrative(null);
  final int nPaths=2500 * TEST_SCALE;
  final int timeoutMsec=2 * nPaths;
  final String prefix=uniqueName("testOsgiResourceEvents");
  try {
    for (int i=0; i < nPaths; i++) {
      s.getRootNode().addNode(prefix + i);
    }
    s.save();
    log.info("Added {} nodes, checking what ResourceEventListener got...",nPaths);
    final long timeout=System.currentTimeMillis() + timeoutMsec;
    final Set<String> missing=new HashSet<String>();
    while (System.currentTimeMillis() < timeout) {
      missing.clear();
      final Set<String> paths=listener.getPaths();
      for (int i=0; i < nPaths; i++) {
        final String path="/" + prefix + i;
        if (!paths.contains(path)) {
          missing.add(path);
        }
      }
      if (missing.isEmpty()) {
        break;
      }
    }
    if (!missing.isEmpty()) {
      final String missingStr=missing.size() > 10 ? missing.size() + " paths missing" : missing.toString();
      fail("OSGi add resource events are missing for " + missing.size() + "/"+ nPaths+ " paths after "+ timeoutMsec+ " msec: "+ missingStr);
    }
  }
  finally {
    reg.unregister();
    s.logout();
  }
  log.info("Successfuly detected OSGi observation events for " + nPaths + " paths");
}

</code></pre>

<br>
<pre class="type-11 type-9 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testSingleValueInputStream() throws RepositoryException {
  Session s=repository.loginAdministrative(null);
  try {
    final String path=getClass().getSimpleName() + System.currentTimeMillis();
    final Node child=deleteAfterTests(s.getRootNode().addNode(path));
    final Property p=child.setProperty("foo","bar");
    s.save();
    assertNotNull(p.getBinary().getStream());
  }
  finally {
    s.logout();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testXpathQueryWithMixin() throws RepositoryException {
  Session s=repository.loginAdministrative(null);
  try {
    final String path="XPATH_QUERY_" + System.currentTimeMillis();
    final String absPath="/" + path;
    final Node n=deleteAfterTests(s.getRootNode().addNode(path));
    n.addMixin("mix:title");
    s.save();
    final String statement="/jcr:root//element(*, mix:title)";
    @SuppressWarnings("deprecation") final Query q=s.getWorkspace().getQueryManager().createQuery(statement,Query.XPATH);
    final NodeIterator it=q.execute().getNodes();
    assertTrue("Expecting a non-empty result",it.hasNext());
    boolean found=false;
    while (it.hasNext()) {
      if (it.nextNode().getPath().equals(absPath)) {
        found=true;
        break;
      }
    }
    assertTrue("Expecting test node " + absPath + " to be found",found);
  }
  finally {
    s.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.jcr.repository.it.OakRepositoryIT </h4><pre class="type-11 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void doCheckRepositoryDescriptors(){
  final String propName="jcr.repository.name";
  final String name=repository.getDescriptor(propName);
  final String expected="Oak";
  if (!name.contains(expected)) {
    fail("Expected repository descriptor " + propName + " to contain "+ expected+ ", failed (descriptor="+ name+ ")");
  }
  log.info("Running on Oak version {}",repository.getDescriptor("jcr.repository.version"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.jcr.resource.internal.helper.jcr.JcrPropertyResourceTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCorrectUTF8ByteLength() throws RepositoryException, UnsupportedEncodingException {
  final HashMap<Object,Integer> testData=new HashMap<Object,Integer>(){
{
      put("some random ascii string",PropertyType.STRING);
      put(" ",PropertyType.STRING);
      put("",PropertyType.STRING);
      put("string with mlaut",PropertyType.STRING);
      put(true,PropertyType.BOOLEAN);
      put(1000L,PropertyType.LONG);
      put(BigDecimal.TEN,PropertyType.DECIMAL);
    }
  }
;
  final ResourceResolver resolver=this.context.mock(ResourceResolver.class);
  for (  final Entry<Object,Integer> data : testData.entrySet()) {
    final String stringValue=data.getKey().toString();
    final long stringByteLength=stringValue.getBytes("UTF-8").length;
    final Property property=this.context.mock(Property.class,stringValue);
    this.context.checking(new Expectations(){
{
        ignoring(resolver);
        allowing(property).getParent();
        allowing(property).getName();
        allowing(property).isMultiple();
        will(returnValue(false));
        allowing(property).getLength();
        will(returnValue((long)stringValue.length()));
        allowing(property).getType();
        will(returnValue(data.getValue()));
        allowing(property).getString();
        will(returnValue(stringValue));
      }
    }
);
    final JcrPropertyResource propResource=new JcrPropertyResource(resolver,"/path/to/string-property",null,property);
    assertEquals("Byte length of " + stringValue,stringByteLength,propResource.getResourceMetadata().getContentLength());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.junit.remote.testrunner.RemoteExecutionExceptionTest </h4><pre class="type-11 type-3 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetStackTraceFromString() throws NumberFormatException, IOException {
  String trace=null;
  try {
    throw new IllegalStateException("Some message");
  }
 catch (  Exception e) {
    StringWriter writer=new StringWriter();
    e.printStackTrace(new PrintWriter(writer));
    trace=writer.toString();
  }
  RemoteExecutionException e=RemoteExecutionException.getExceptionFromTrace(trace);
  Assert.assertThat(e.getMessage(),Matchers.equalTo("java.lang.IllegalStateException: Some message"));
  List<StackTraceElement> stackTraceElements=Arrays.asList(new RemoteExecutionException("some failure",trace).getStackTrace());
  Assert.assertThat(stackTraceElements,Matchers.hasItem(new StackTraceElement("org.apache.sling.junit.remote.testrunner.RemoteExecutionExceptionTest","testGetStackTraceFromString","RemoteExecutionExceptionTest.java",36)));
  StringWriter writer=new StringWriter();
  e.printStackTrace(new PrintWriter(writer));
  String newTrace=writer.toString();
  Assert.assertEquals(trace,newTrace);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-10 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetStackTraceFromStringWithNestedException() throws NumberFormatException, IOException {
  String trace=null;
  try {
    try {
      throw new IllegalStateException("Some message");
    }
 catch (    Exception e) {
      throw new RuntimeException("Wrapper exception",e);
    }
  }
 catch (  Exception e) {
    StringWriter writer=new StringWriter();
    e.printStackTrace(new PrintWriter(writer));
    trace=writer.toString();
  }
  RemoteExecutionException e=RemoteExecutionException.getExceptionFromTrace(trace);
  Assert.assertThat(e.getMessage(),Matchers.equalTo("java.lang.RuntimeException: Wrapper exception"));
  List<StackTraceElement> stackTraceElements=Arrays.asList(e.getStackTrace());
  Assert.assertThat(stackTraceElements,Matchers.hasItem(new StackTraceElement("org.apache.sling.junit.remote.testrunner.RemoteExecutionExceptionTest","testGetStackTraceFromStringWithNestedException","RemoteExecutionExceptionTest.java",60)));
  Assert.assertThat(stackTraceElements,Matchers.not(Matchers.hasItem(new StackTraceElement("org.apache.sling.junit.remote.testrunner.RemoteExecutionExceptionTest","testGetStackTraceFromStringWithNestedException","RemoteExecutionExceptionTest.java",58))));
  Assert.assertNotNull("Cause must be set on the exception",e.getCause());
  Assert.assertThat(e.getCause().getMessage(),Matchers.equalTo("java.lang.IllegalStateException: Some message"));
  stackTraceElements=Arrays.asList(e.getCause().getStackTrace());
  Assert.assertThat(stackTraceElements,Matchers.hasItem(new StackTraceElement("org.apache.sling.junit.remote.testrunner.RemoteExecutionExceptionTest","testGetStackTraceFromStringWithNestedException","RemoteExecutionExceptionTest.java",58)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.base.impl.BootstrapInstallerTest </h4><pre class="type-11 type-6 type-13 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for{@link org.apache.sling.launchpad.base.impl.BootstrapInstaller#copyStreamToFile(java.io.InputStream,java.io.File)}.
 */
@Test public void testCopyStreamToFile(){
  InputStream stream=null;
  File to=null;
  File testDir=new File("testing");
  testDir.deleteOnExit();
  assertTrue(testDir.mkdir());
  stream=Thread.currentThread().getContextClassLoader().getResourceAsStream("holaworld.jar");
  assertNotNull(stream);
  to=new File(testDir,"test.jar");
  to.deleteOnExit();
  try {
    BootstrapInstaller.copyStreamToFile(stream,to);
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
  File copy=new File(testDir,"test.jar");
  try {
    FileInputStream copyStream=new FileInputStream(copy);
    byte[] copyData=new byte[copyStream.available()];
    copyStream.read(copyData);
    copyStream.close();
    FileInputStream origStream=new FileInputStream(copy);
    byte[] origData=new byte[origStream.available()];
    origStream.read(origData);
    origStream.close();
    assertArrayEquals(copyData,origData);
  }
 catch (  FileNotFoundException e) {
    fail(e.getMessage());
  }
catch (  IOException e) {
    fail(e.getMessage());
  }
  try {
    BootstrapInstaller.copyStreamToFile(null,to);
    fail("should have thrown exception");
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
catch (  IllegalArgumentException e) {
    assertNotNull(e.getMessage());
  }
  try {
    BootstrapInstaller.copyStreamToFile(stream,null);
    fail("should have thrown exception");
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
catch (  IllegalArgumentException e) {
    assertNotNull(e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.base.impl.SlingFelixTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void test_Felix_getBundle_Class_from_PackageAdmin(){
  PackageAdmin pa=getService(framework,PackageAdmin.class);
  assertNotNull(pa);
  assertNull("Integer class provided by the VM not from a bundle",pa.getBundle(Integer.class));
  assertEquals("BundleContext class must come from the framework",framework.getBundle(),pa.getBundle(BundleContext.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.base.impl.bootstrapcommands.BootstrapCommandFileTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParsing() throws IOException {
  final BootstrapCommandFile bcf=new BootstrapCommandFile(logger,cmdFile);
  final String cmdString="# a comment\n" + "uninstall symbolicname1 1.0\n" + "\n"+ "# another comment\n"+ "uninstall symbolicname1 1.0\n";
  final List<Command> c=bcf.parse(new ByteArrayInputStream(cmdString.getBytes()));
  assertEquals("Expecting two commands after parsing",2,c.size());
  int index=0;
  for (  Command cmd : c) {
    assertTrue("Expecting an UninstallBundleCommand at index " + index,cmd instanceof UninstallBundleCommand);
    index++;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.testservices.serversidetests.ResourceResolverTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveRemovedVanityPath() throws Exception {
  String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[0]+ ".print.html");
  HttpServletRequest request=new FakeSlingHttpServletRequest(path);
  Resource res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  rootNode.getProperty("sling:vanityPath").remove();
  saveMappings(session);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertTrue(res instanceof NonExistingResource);
  assertEquals("/" + vanity[0] + ".print.html",res.getPath());
  rootNode.setProperty("sling:vanityPath",vanity);
  saveMappings(session);
  Node childNode=maybeCreateNode(rootNode,"rootChild","nt:unstructured");
  childNode.setProperty("sling:vanityPath","childVanity");
  childNode.addMixin("sling:VanityPath");
  saveMappings(session);
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(childNode.getPath(),res.getPath());
  assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(childNode.isSame(res.adaptTo(Node.class)));
  childNode.remove();
  saveMappings(session);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertTrue(res instanceof NonExistingResource);
  assertEquals("/childVanity.print.html",res.getPath());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveRemovedesourceAliasJcrContent() throws Exception {
  String alias="testAlias";
  Node content=rootNode.addNode("jcr:content","nt:unstructured");
  content.setProperty("sling:alias",alias);
  try {
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ "/"+ alias+ ".print.html");
    res=resResolver.resolve(request,path);
    assertEquals("GET request resolution does not go up the path",Resource.RESOURCE_TYPE_NON_EXISTING,res.getResourceType());
    content.getProperty("sling:alias").remove();
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertTrue(res instanceof NonExistingResource);
    assertEquals("/" + alias + ".print.html",res.getPath());
  }
  finally {
    content.remove();
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveResourceAlias() throws Exception {
  String alias="testAlias";
  rootNode.setProperty("sling:alias",alias);
  try {
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  }
  finally {
    rootNode.getProperty("sling:alias").remove();
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveResourceAliasJcrContent() throws Exception {
  String alias="testAlias";
  Node content=rootNode.addNode("jcr:content","nt:unstructured");
  content.setProperty("sling:alias",alias);
  try {
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ "/"+ alias+ ".print.html");
    res=resResolver.resolve(request,path);
    assertEquals("GET request resolution does not go up the path",Resource.RESOURCE_TYPE_NON_EXISTING,res.getResourceType());
    Node child=rootNode.addNode("child","nt:unstructured");
    child.setProperty("sling:alias",alias);
    try {
      saveMappings(session);
      res=resResolver.resolve(request,path);
      assertEquals(child.getPath(),res.getPath());
    }
  finally {
      child.remove();
      session.save();
    }
  }
  finally {
    content.remove();
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMapResourceAlias() throws Exception {
  String alias="testAlias";
  rootNode.setProperty("sling:alias",alias);
  saveMappings(session);
  try {
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias);
    String mapped=resResolver.map(rootNode.getPath());
    assertEquals(path,mapped);
    Node child=rootNode.addNode("child");
    session.save();
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ "/child");
    mapped=resResolver.map(child.getPath());
    assertEquals(path,mapped);
  }
  finally {
    rootNode.getProperty("sling:alias").remove();
    if (rootNode.hasNode("child")) {
      rootNode.getNode("child").remove();
    }
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveVanityPath() throws Exception {
  String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[0]+ ".print.html");
  HttpServletRequest request=new FakeSlingHttpServletRequest(path);
  Resource res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[0]+ ".print.html/suffix.pdf");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[1]+ ".print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[1]+ ".print.html/suffix.pdf");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveResourceAliasWithUpdate() throws Exception {
  String[] alias={"testAlias","testAliasToUpdate"};
  rootNode.setProperty("sling:alias",alias);
  try {
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias[1]+ ".print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias[1]+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    String[] aliasUpdated={"testAlias","testAliasUpdated"};
    rootNode.setProperty("sling:alias",aliasUpdated);
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + aliasUpdated[1]+ ".print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + aliasUpdated[1]+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  }
  finally {
    rootNode.getProperty("sling:alias").remove();
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testResolveRemovedMixinVanityPath() throws Exception {
  Node childNode=null;
  try {
    childNode=maybeCreateNode(rootNode,"rootChild","nt:unstructured");
    childNode.setProperty("sling:vanityPath","childVanity");
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertTrue(res instanceof NonExistingResource);
    assertEquals("/childVanity.print.html",res.getPath());
    childNode.addMixin("sling:VanityPath");
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(childNode.getPath(),res.getPath());
    assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(childNode.isSame(res.adaptTo(Node.class)));
    childNode.removeMixin("sling:VanityPath");
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertTrue(res instanceof NonExistingResource);
    assertEquals("/childVanity.print.html",res.getPath());
  }
  finally {
    if (childNode != null) {
      childNode.remove();
      saveMappings(session);
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveVanityPathWithUpdate() throws Exception {
  String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[2]+ ".print.html");
  HttpServletRequest request=new FakeSlingHttpServletRequest(path);
  Resource res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[2]+ ".print.html/suffix.pdf");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  String[] vanityPathUpdated=new String[]{"testVanity","testV","testVanityUpdated"};
  rootNode.setProperty("sling:vanityPath",vanityPathUpdated);
  saveMappings(session);
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanityPathUpdated[2]+ ".print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanityPathUpdated[2]+ ".print.html/suffix.pdf");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[2]+ ".print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertTrue(res instanceof NonExistingResource);
  assertEquals("/" + vanity[2] + ".print.html",res.getPath());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveResourceAliasJcrContentWithUpdate() throws Exception {
  String[] alias={"testAlias","testAliasToUpdate"};
  Node content=rootNode.addNode("jcr:content","nt:unstructured");
  content.setProperty("sling:alias",alias);
  try {
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias[1]+ ".print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias[1]+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    String[] aliasUpdated={"testAlias","testAliasUpdated"};
    content.setProperty("sling:alias",aliasUpdated);
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + aliasUpdated[1]+ ".print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + aliasUpdated[1]+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  }
  finally {
    content.remove();
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveRemovedResourceAlias() throws Exception {
  String alias="testAlias";
  rootNode.setProperty("sling:alias",alias);
  saveMappings(session);
  String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html");
  HttpServletRequest request=new FakeSlingHttpServletRequest(path);
  Resource res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html/suffix.pdf");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  rootNode.getProperty("sling:alias").remove();
  saveMappings(session);
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertTrue(res instanceof NonExistingResource);
  assertEquals("/" + alias + ".print.html",res.getPath());
  String childNodeName="rootChildAlias";
  Node childNode=maybeCreateNode(rootNode,childNodeName,"nt:unstructured");
  childNode.setProperty("sling:alias","childAlias");
  saveMappings(session);
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + rootPath+ "/childAlias.print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath + "/" + childNodeName,res.getPath());
  assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(childNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + rootPath+ "/childAlias"+ ".print.html/suffix.pdf");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath + "/" + childNodeName,res.getPath());
  assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(childNode.isSame(res.adaptTo(Node.class)));
  childNode.remove();
  saveMappings(session);
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + rootPath+ "/childAlias"+ ".print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertTrue(res instanceof NonExistingResource);
  assertEquals(rootPath + "/childAlias.print.html",res.getPath());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveVanityPathWithVanityOrder() throws Exception {
  Node childNode=null;
  Node childNode2=null;
  try {
    childNode=maybeCreateNode(rootNode,"rootChild","nt:unstructured");
    childNode.setProperty("sling:vanityPath","childVanity");
    childNode.addMixin("sling:VanityPath");
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(childNode.getPath(),res.getPath());
    assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(childNode.isSame(res.adaptTo(Node.class)));
    childNode2=maybeCreateNode(rootNode,"rootChild2","nt:unstructured");
    childNode2.setProperty("sling:vanityPath","childVanity");
    childNode2.addMixin("sling:VanityPath");
    saveMappings(session);
    assertNotNull(res);
    assertEquals(childNode.getPath(),res.getPath());
    assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(childNode.isSame(res.adaptTo(Node.class)));
    childNode2.setProperty("sling:vanityOrder",100);
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(childNode2.getPath(),res.getPath());
    assertEquals(childNode2.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(childNode2.isSame(res.adaptTo(Node.class)));
    childNode.setProperty("sling:vanityOrder",1000);
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(childNode.getPath(),res.getPath());
    assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(childNode.isSame(res.adaptTo(Node.class)));
  }
  finally {
    if (childNode != null) {
      childNode.remove();
    }
    if (childNode2 != null) {
      childNode2.remove();
    }
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMapResourceAliasJcrContent() throws Exception {
  String alias="testAlias";
  Node content=rootNode.addNode("jcr:content","nt:unstructured");
  content.setProperty("sling:alias",alias);
  saveMappings(session);
  try {
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias);
    String mapped=resResolver.map(rootNode.getPath());
    assertEquals(path,mapped);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ "/_jcr_content");
    mapped=resResolver.map(content.getPath());
    assertEquals(path,mapped);
    Node child=content.addNode("child");
    session.save();
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ "/_jcr_content/child");
    mapped=resResolver.map(child.getPath());
    assertEquals(path,mapped);
  }
  finally {
    content.remove();
    session.save();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.testservices.serversidetests.ResourceResolverWithVanityBloomFilterTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveResourceAliasJcrContentWithUpdate() throws Exception {
  String[] alias={"testAlias","testAliasToUpdate"};
  Node content=rootNode.addNode("jcr:content","nt:unstructured");
  content.setProperty("sling:alias",alias);
  try {
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias[1]+ ".print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias[1]+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    String[] aliasUpdated={"testAlias","testAliasUpdated"};
    content.setProperty("sling:alias",aliasUpdated);
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + aliasUpdated[1]+ ".print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + aliasUpdated[1]+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  }
  finally {
    content.remove();
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveResourceAlias() throws Exception {
  String alias="testAlias";
  rootNode.setProperty("sling:alias",alias);
  try {
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  }
  finally {
    rootNode.getProperty("sling:alias").remove();
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveVanityPath() throws Exception {
  String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[0]+ ".print.html");
  HttpServletRequest request=new FakeSlingHttpServletRequest(path);
  Resource res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[0]+ ".print.html/suffix.pdf");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[1]+ ".print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[1]+ ".print.html/suffix.pdf");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveVanityPathWithUpdate() throws Exception {
  String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[2]+ ".print.html");
  HttpServletRequest request=new FakeSlingHttpServletRequest(path);
  Resource res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[2]+ ".print.html/suffix.pdf");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  String[] vanityPathUpdated=new String[]{"testVanity","testV","testVanityUpdated"};
  rootNode.setProperty("sling:vanityPath",vanityPathUpdated);
  saveMappings(session);
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanityPathUpdated[2]+ ".print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanityPathUpdated[2]+ ".print.html/suffix.pdf");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + vanity[2]+ ".print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertTrue(res instanceof NonExistingResource);
  assertEquals("/" + vanity[2] + ".print.html",res.getPath());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveVanityPathWithVanityOrder() throws Exception {
  Node childNode=null;
  Node childNode2=null;
  try {
    childNode=maybeCreateNode(rootNode,"rootChild","nt:unstructured");
    childNode.setProperty("sling:vanityPath","childVanity");
    childNode.addMixin("sling:VanityPath");
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(childNode.getPath(),res.getPath());
    assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(childNode.isSame(res.adaptTo(Node.class)));
    childNode2=maybeCreateNode(rootNode,"rootChild2","nt:unstructured");
    childNode2.setProperty("sling:vanityPath","childVanity");
    childNode2.addMixin("sling:VanityPath");
    saveMappings(session);
    assertNotNull(res);
    assertEquals(childNode.getPath(),res.getPath());
    assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(childNode.isSame(res.adaptTo(Node.class)));
    childNode2.setProperty("sling:vanityOrder",100);
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(childNode2.getPath(),res.getPath());
    assertEquals(childNode2.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(childNode2.isSame(res.adaptTo(Node.class)));
    childNode.setProperty("sling:vanityOrder",1000);
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(childNode.getPath(),res.getPath());
    assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(childNode.isSame(res.adaptTo(Node.class)));
  }
  finally {
    if (childNode != null) {
      childNode.remove();
    }
    if (childNode2 != null) {
      childNode2.remove();
    }
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveResourceAliasJcrContent() throws Exception {
  String alias="testAlias";
  Node content=rootNode.addNode("jcr:content","nt:unstructured");
  content.setProperty("sling:alias",alias);
  try {
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ "/"+ alias+ ".print.html");
    res=resResolver.resolve(request,path);
    assertEquals("GET request resolution does not go up the path",Resource.RESOURCE_TYPE_NON_EXISTING,res.getResourceType());
    Node child=rootNode.addNode("child","nt:unstructured");
    child.setProperty("sling:alias",alias);
    try {
      saveMappings(session);
      res=resResolver.resolve(request,path);
      assertEquals(child.getPath(),res.getPath());
    }
  finally {
      child.remove();
      session.save();
    }
  }
  finally {
    content.remove();
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveRemovedesourceAliasJcrContent() throws Exception {
  String alias="testAlias";
  Node content=rootNode.addNode("jcr:content","nt:unstructured");
  content.setProperty("sling:alias",alias);
  try {
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ "/"+ alias+ ".print.html");
    res=resResolver.resolve(request,path);
    assertEquals("GET request resolution does not go up the path",Resource.RESOURCE_TYPE_NON_EXISTING,res.getResourceType());
    content.getProperty("sling:alias").remove();
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertTrue(res instanceof NonExistingResource);
    assertEquals("/" + alias + ".print.html",res.getPath());
  }
  finally {
    content.remove();
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveResourceAliasWithUpdate() throws Exception {
  String[] alias={"testAlias","testAliasToUpdate"};
  rootNode.setProperty("sling:alias",alias);
  try {
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias[1]+ ".print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias[1]+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    String[] aliasUpdated={"testAlias","testAliasUpdated"};
    rootNode.setProperty("sling:alias",aliasUpdated);
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + aliasUpdated[1]+ ".print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + aliasUpdated[1]+ ".print.html/suffix.pdf");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(rootPath,res.getPath());
    assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  }
  finally {
    rootNode.getProperty("sling:alias").remove();
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveRemovedResourceAlias() throws Exception {
  String alias="testAlias";
  rootNode.setProperty("sling:alias",alias);
  saveMappings(session);
  String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html");
  HttpServletRequest request=new FakeSlingHttpServletRequest(path);
  Resource res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html/suffix.pdf");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath,res.getPath());
  assertEquals(rootNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(rootNode.isSame(res.adaptTo(Node.class)));
  rootNode.getProperty("sling:alias").remove();
  saveMappings(session);
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ ".print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertTrue(res instanceof NonExistingResource);
  assertEquals("/" + alias + ".print.html",res.getPath());
  String childNodeName="rootChildAlias";
  Node childNode=maybeCreateNode(rootNode,childNodeName,"nt:unstructured");
  childNode.setProperty("sling:alias","childAlias");
  saveMappings(session);
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + rootPath+ "/childAlias.print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath + "/" + childNodeName,res.getPath());
  assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(childNode.isSame(res.adaptTo(Node.class)));
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + rootPath+ "/childAlias"+ ".print.html/suffix.pdf");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertEquals(rootPath + "/" + childNodeName,res.getPath());
  assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
  assertEquals(".print.html/suffix.pdf",res.getResourceMetadata().getResolutionPathInfo());
  assertNotNull(res.adaptTo(Node.class));
  assertTrue(childNode.isSame(res.adaptTo(Node.class)));
  childNode.remove();
  saveMappings(session);
  path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + rootPath+ "/childAlias"+ ".print.html");
  request=new FakeSlingHttpServletRequest(path);
  res=resResolver.resolve(request,path);
  assertNotNull(res);
  assertTrue(res instanceof NonExistingResource);
  assertEquals(rootPath + "/childAlias.print.html",res.getPath());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMapResourceAlias() throws Exception {
  String alias="testAlias";
  rootNode.setProperty("sling:alias",alias);
  saveMappings(session);
  try {
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias);
    String mapped=resResolver.map(rootNode.getPath());
    assertEquals(path,mapped);
    Node child=rootNode.addNode("child");
    session.save();
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ "/child");
    mapped=resResolver.map(child.getPath());
    assertEquals(path,mapped);
  }
  finally {
    rootNode.getProperty("sling:alias").remove();
    if (rootNode.hasNode("child")) {
      rootNode.getNode("child").remove();
    }
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMapResourceAliasJcrContent() throws Exception {
  String alias="testAlias";
  Node content=rootNode.addNode("jcr:content","nt:unstructured");
  content.setProperty("sling:alias",alias);
  saveMappings(session);
  try {
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias);
    String mapped=resResolver.map(rootNode.getPath());
    assertEquals(path,mapped);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ "/_jcr_content");
    mapped=resResolver.map(content.getPath());
    assertEquals(path,mapped);
    Node child=content.addNode("child");
    session.save();
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/" + alias+ "/_jcr_content/child");
    mapped=resResolver.map(child.getPath());
    assertEquals(path,mapped);
  }
  finally {
    content.remove();
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testResolveRemovedMixinVanityPath() throws Exception {
  Node childNode=null;
  try {
    childNode=maybeCreateNode(rootNode,"rootChild","nt:unstructured");
    childNode.setProperty("sling:vanityPath","childVanity");
    saveMappings(session);
    String path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
    HttpServletRequest request=new FakeSlingHttpServletRequest(path);
    Resource res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertTrue(res instanceof NonExistingResource);
    assertEquals("/childVanity.print.html",res.getPath());
    childNode.addMixin("sling:VanityPath");
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertEquals(childNode.getPath(),res.getPath());
    assertEquals(childNode.getPrimaryNodeType().getName(),res.getResourceType());
    assertEquals(".print.html",res.getResourceMetadata().getResolutionPathInfo());
    assertNotNull(res.adaptTo(Node.class));
    assertTrue(childNode.isSame(res.adaptTo(Node.class)));
    childNode.removeMixin("sling:VanityPath");
    saveMappings(session);
    path=ResourceUtil.normalize(ResourceUtil.getParent(rootPath) + "/childVanity.print.html");
    request=new FakeSlingHttpServletRequest(path);
    res=resResolver.resolve(request,path);
    assertNotNull(res);
    assertTrue(res instanceof NonExistingResource);
    assertEquals("/childVanity.print.html",res.getPath());
  }
  finally {
    if (childNode != null) {
      childNode.remove();
      saveMappings(session);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.accessManager.AccessPrivilegesInfoTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the fix for SLING-1090
 */
@Test public void testSLING_1090() throws Exception {
  testUserId=H.createTestUser();
  ArrayList<NameValuePair> postParams=new ArrayList<NameValuePair>();
  postParams.add(new NameValuePair("principalId",testUserId));
  postParams.add(new NameValuePair("privilege@jcr:read","granted"));
  postParams.add(new NameValuePair("privilege@jcr:removeChildNodes","granted"));
  Credentials adminCreds=new UsernamePasswordCredentials("admin","admin");
  H.assertAuthenticatedPostStatus(adminCreds,HttpTest.HTTP_BASE_URL + "/.modifyAce.html",HttpServletResponse.SC_OK,postParams,null);
  testFolderUrl=H.getTestClient().createNode(HttpTest.HTTP_BASE_URL + "/testFolder" + random.nextInt()+ SlingPostConstants.DEFAULT_CREATE_SUFFIX,null);
  String postUrl=testFolderUrl + ".modifyAce.html";
  postParams=new ArrayList<NameValuePair>();
  postParams.add(new NameValuePair("principalId",testUserId));
  postParams.add(new NameValuePair("privilege@jcr:read","granted"));
  postParams.add(new NameValuePair("privilege@jcr:removeNode","granted"));
  H.assertAuthenticatedPostStatus(adminCreds,postUrl,HttpServletResponse.SC_OK,postParams,null);
  String getUrl=testFolderUrl + ".privileges-info.json";
  Credentials testUserCreds=new UsernamePasswordCredentials(testUserId,"testPwd");
  String json=H.getAuthenticatedContent(testUserCreds,getUrl,HttpTest.CONTENT_TYPE_JSON,null,HttpServletResponse.SC_OK);
  assertNotNull(json);
  JSONObject jsonObj=new JSONObject(json);
  assertEquals(true,jsonObj.getBoolean("canDelete"));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGrantedWriteForGroup() throws IOException, JSONException {
  testGroupId=H.createTestGroup();
  testUserId=H.createTestUser();
  testFolderUrl=H.createTestFolder();
  Credentials adminCreds=new UsernamePasswordCredentials("admin","admin");
  String groupPostUrl=HttpTest.HTTP_BASE_URL + "/system/userManager/group/" + testGroupId+ ".update.html";
  List<NameValuePair> groupPostParams=new ArrayList<NameValuePair>();
  groupPostParams.add(new NameValuePair(":member",testUserId));
  H.assertAuthenticatedPostStatus(adminCreds,groupPostUrl,HttpServletResponse.SC_OK,groupPostParams,null);
  String postUrl=testFolderUrl + ".modifyAce.html";
  List<NameValuePair> postParams=new ArrayList<NameValuePair>();
  postParams.add(new NameValuePair("principalId",testGroupId));
  postParams.add(new NameValuePair("privilege@jcr:read","granted"));
  postParams.add(new NameValuePair("privilege@jcr:write","granted"));
  postParams.add(new NameValuePair("privilege@jcr:readAccessControl","granted"));
  postParams.add(new NameValuePair("privilege@jcr:modifyAccessControl","granted"));
  H.assertAuthenticatedPostStatus(adminCreds,postUrl,HttpServletResponse.SC_OK,postParams,null);
  String getUrl=testFolderUrl + ".privileges-info.json";
  Credentials testUserCreds=new UsernamePasswordCredentials(testUserId,"testPwd");
  String json=H.getAuthenticatedContent(testUserCreds,getUrl,HttpTest.CONTENT_TYPE_JSON,null,HttpServletResponse.SC_OK);
  assertNotNull(json);
  JSONObject jsonObj=new JSONObject(json);
  assertEquals(true,jsonObj.getBoolean("canAddChildren"));
  assertEquals(true,jsonObj.getBoolean("canDeleteChildren"));
  assertEquals(false,jsonObj.getBoolean("canDelete"));
  assertEquals(true,jsonObj.getBoolean("canModifyProperties"));
  assertEquals(true,jsonObj.getBoolean("canReadAccessControl"));
  assertEquals(true,jsonObj.getBoolean("canModifyAccessControl"));
  String childFolderUrl=H.getTestClient().createNode(testFolderUrl + "/testFolder" + random.nextInt()+ SlingPostConstants.DEFAULT_CREATE_SUFFIX,null);
  String childPostUrl=childFolderUrl + ".modifyAce.html";
  postParams=new ArrayList<NameValuePair>();
  postParams.add(new NameValuePair("principalId",testGroupId));
  postParams.add(new NameValuePair("privilege@jcr:read","granted"));
  postParams.add(new NameValuePair("privilege@jcr:removeNode","granted"));
  H.assertAuthenticatedPostStatus(adminCreds,childPostUrl,HttpServletResponse.SC_OK,postParams,null);
  String childGetUrl=childFolderUrl + ".privileges-info.json";
  String childJson=H.getAuthenticatedContent(testUserCreds,childGetUrl,HttpTest.CONTENT_TYPE_JSON,null,HttpServletResponse.SC_OK);
  assertNotNull(childJson);
  JSONObject childJsonObj=new JSONObject(childJson);
  assertEquals(true,childJsonObj.getBoolean("canDelete"));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGrantedWriteForUser() throws IOException, JSONException {
  testUserId=H.createTestUser();
  testFolderUrl=H.createTestFolder();
  String postUrl=testFolderUrl + ".modifyAce.html";
  List<NameValuePair> postParams=new ArrayList<NameValuePair>();
  postParams.add(new NameValuePair("principalId",testUserId));
  postParams.add(new NameValuePair("privilege@jcr:read","granted"));
  postParams.add(new NameValuePair("privilege@jcr:write","granted"));
  postParams.add(new NameValuePair("privilege@jcr:readAccessControl","granted"));
  postParams.add(new NameValuePair("privilege@jcr:modifyAccessControl","granted"));
  Credentials adminCreds=new UsernamePasswordCredentials("admin","admin");
  H.assertAuthenticatedPostStatus(adminCreds,postUrl,HttpServletResponse.SC_OK,postParams,null);
  String getUrl=testFolderUrl + ".privileges-info.json";
  Credentials testUserCreds=new UsernamePasswordCredentials(testUserId,"testPwd");
  String json=H.getAuthenticatedContent(testUserCreds,getUrl,HttpTest.CONTENT_TYPE_JSON,null,HttpServletResponse.SC_OK);
  assertNotNull(json);
  JSONObject jsonObj=new JSONObject(json);
  assertEquals(true,jsonObj.getBoolean("canAddChildren"));
  assertEquals(true,jsonObj.getBoolean("canDeleteChildren"));
  assertEquals(false,jsonObj.getBoolean("canDelete"));
  assertEquals(true,jsonObj.getBoolean("canModifyProperties"));
  assertEquals(true,jsonObj.getBoolean("canReadAccessControl"));
  assertEquals(true,jsonObj.getBoolean("canModifyAccessControl"));
  String childFolderUrl=H.getTestClient().createNode(testFolderUrl + "/testFolder" + random.nextInt()+ SlingPostConstants.DEFAULT_CREATE_SUFFIX,null);
  String childPostUrl=childFolderUrl + ".modifyAce.html";
  postParams=new ArrayList<NameValuePair>();
  postParams.add(new NameValuePair("principalId",testUserId));
  postParams.add(new NameValuePair("privilege@jcr:read","granted"));
  postParams.add(new NameValuePair("privilege@jcr:removeNode","granted"));
  H.assertAuthenticatedPostStatus(adminCreds,childPostUrl,HttpServletResponse.SC_OK,postParams,null);
  String childGetUrl=childFolderUrl + ".privileges-info.json";
  String childJson=H.getAuthenticatedContent(testUserCreds,childGetUrl,HttpTest.CONTENT_TYPE_JSON,null,HttpServletResponse.SC_OK);
  assertNotNull(childJson);
  JSONObject childJsonObj=new JSONObject(childJson);
  assertEquals(true,childJsonObj.getBoolean("canDelete"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.auth.AuthenticationResponseCodeTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testXRequestedWithIncorrectCredentials() throws Exception {
  List<NameValuePair> params=new ArrayList<NameValuePair>();
  params.add(new NameValuePair("j_username","garbage"));
  params.add(new NameValuePair("j_password","garbage"));
  List<Header> headers=new ArrayList<Header>();
  headers.add(new Header("X-Requested-With","XMLHttpRequest"));
  headers.add(new Header("User-Agent","Mozilla/5.0 Sling Integration Test"));
  HttpMethod post=assertPostStatus(HttpTest.HTTP_BASE_URL + "/j_security_check",HttpServletResponse.SC_FORBIDDEN,params,headers,null);
  assertNotNull(post.getResponseHeader("X-Reason"));
  assertEquals("Username and Password do not match",post.getResponseHeader("X-Reason").getValue());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPreventLoopIncorrectHttpBasicCredentials() throws Exception {
  URL url=new URL(HttpTest.HTTP_BASE_URL);
  Credentials defaultcreds=new UsernamePasswordCredentials("garbage","garbage");
  H.getHttpClient().getState().setCredentials(new AuthScope(url.getHost(),url.getPort(),AuthScope.ANY_REALM),defaultcreds);
  final String requestUrl=HttpTest.HTTP_BASE_URL + "/junk?param1=1";
  HttpMethod get=new GetMethod(requestUrl);
  get.setRequestHeader("Referer",requestUrl);
  get.setRequestHeader("User-Agent","Mozilla/5.0 Sling Integration Test");
  int status=H.getHttpClient().executeMethod(get);
  assertEquals(HttpServletResponse.SC_UNAUTHORIZED,status);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPreventLoopIncorrectFormCredentials() throws Exception {
  List<NameValuePair> params=new ArrayList<NameValuePair>();
  params.add(new NameValuePair("j_username","garbage"));
  params.add(new NameValuePair("j_password","garbage"));
  final String requestUrl=HttpTest.HTTP_BASE_URL + "/j_security_check";
  List<Header> headers=new ArrayList<Header>();
  headers.add(new Header("Referer",requestUrl));
  headers.add(new Header("User-Agent","Mozilla/5.0 Sling Integration Test"));
  HttpMethod post=assertPostStatus(requestUrl,HttpServletResponse.SC_FORBIDDEN,params,headers,null);
  assertNotNull(post.getResponseHeader("X-Reason"));
  assertEquals("Username and Password do not match",post.getResponseHeader("X-Reason").getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.auth.SelectorAuthenticationResponseCodeTest </h4><pre class="type-11 type-13 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithAcceptHeaderIncorrectCredentials() throws Exception {
  List<NameValuePair> params=new ArrayList<NameValuePair>();
  params.add(new NameValuePair("j_username","garbage"));
  params.add(new NameValuePair("j_password","garbage"));
  List<Header> headers=new ArrayList<Header>();
  headers.add(new Header("User-Agent","Mozilla/5.0 Sling Integration Test"));
  HttpMethod post=assertPostStatus(HttpTest.HTTP_BASE_URL + "/j_security_check",HttpServletResponse.SC_MOVED_TEMPORARILY,params,headers,null);
  final String location=post.getResponseHeader("Location").getValue();
  assertNotNull(location);
  assertTrue(location.startsWith(HttpTest.HTTP_BASE_URL + "/system/sling/selector/login?"));
  assertTrue(location.contains("resource=%2F"));
  assertTrue(location.contains("j_reason=INVALID_CREDENTIALS"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.indexing.FullTextIndexingTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUploadedPdfIsIndexed() throws Exception {
  final String queryUrl=HttpTest.WEBDAV_BASE_URL + "/content.query.json?queryType=xpath&statement=" + URLEncoder.encode("/jcr:root" + uploadPath + "//*[jcr:contains(.,'"+ expectedText+ "')]","UTF-8");
  final Condition c=new Condition(){
    public boolean isTrue() throws Exception {
      String result=H.getContent(queryUrl,HttpTest.CONTENT_TYPE_JSON);
      JSONArray results=new JSONArray(result);
      if (results.length() == 0) {
        return false;
      }
      String expectedPath=HttpTest.SERVLET_CONTEXT + uploadPath + "/"+ fileName+ "/jcr:content";
      for (int i=0; i < results.length(); i++) {
        JSONObject object=results.getJSONObject(i);
        if (expectedPath.equals(object.getString("jcr:path"))) {
          return true;
        }
      }
      return false;
    }
    public String getDescription(){
      return "A document containing '" + expectedText + "' is found under "+ uploadPath;
    }
  }
;
  assertFalse("Expecting search to return nothing before upload",c.isTrue());
  String localPath="/integration-test/indexing/" + fileName;
  InputStream resourceToUpload=getClass().getResourceAsStream(localPath);
  if (resourceToUpload == null)   throw new IllegalArgumentException("No resource to upload found at " + localPath);
  H.getTestClient().mkdirs(HttpTest.WEBDAV_BASE_URL,uploadPath);
  final int status=H.getTestClient().upload(HttpTest.WEBDAV_BASE_URL + uploadPath + "/"+ fileName,resourceToUpload);
  assertEquals("Upload status code",201,status);
  new RetryLoop(c,45,50);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.login.RedirectOnLogoutTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test SLING-1847
 * @throws Exception
 */
@Test public void testRedirectToResourceAfterLogout() throws Exception {
  List<NameValuePair> params=new ArrayList<NameValuePair>();
  params.add(new NameValuePair("j_username","admin"));
  params.add(new NameValuePair("j_password","admin"));
  H.assertPostStatus(HttpTest.HTTP_BASE_URL + "/j_security_check",HttpServletResponse.SC_MOVED_TEMPORARILY,params,null);
  String locationAfterLogout=HttpTest.SERVLET_CONTEXT + "/system/sling/info.sessionInfo.json";
  final GetMethod get=new GetMethod(HttpTest.HTTP_BASE_URL + "/system/sling/logout");
  NameValuePair[] logoutParams=new NameValuePair[1];
  logoutParams[0]=new NameValuePair("resource",locationAfterLogout);
  get.setQueryString(logoutParams);
  get.setFollowRedirects(false);
  final int status=H.getHttpClient().executeMethod(get);
  assertEquals("Expected redirect",HttpServletResponse.SC_MOVED_TEMPORARILY,status);
  Header location=get.getResponseHeader("Location");
  assertEquals(HttpTest.HTTP_BASE_URL + locationAfterLogout,location.getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.provisioning.EmbeddedModelTest </h4><pre class="type-11 type-2 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws IOException {
  final InputStream modelStream=teleporter.getService(LaunchpadContentProvider.class).getResourceAsStream(MODEL_RESOURCE_PATH);
  assertNotNull("Expecting embedded model resource at " + MODEL_RESOURCE_PATH,modelStream);
  try {
    modelContent=new String(IOUtils.toByteArray(modelStream));
  }
  finally {
    modelStream.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.servlets.post.PostServletDeleteParentTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteNonExisting() throws Exception {
  final String path=TEST_PATH + "/" + EXISTING_PATH;
  final String testNodeUrl=H.getTestClient().createNode(HttpTest.HTTP_BASE_URL + "/" + path,null);
  assertTrue("Expecting created node path to end with " + path,testNodeUrl.endsWith(path));
  H.assertHttpStatus(testNodeUrl + ".json",200,"Expecting test node to exist before test");
  final String selectorsPath=TEST_PATH + "/" + deletePath;
  final PostMethod post=new PostMethod(HttpTest.HTTP_BASE_URL + "/" + selectorsPath);
  post.setParameter(":operation","delete");
  final int status=H.getHttpClient().executeMethod(post);
  assertEquals("Expecting 403 status for delete operation",403,status);
  H.assertHttpStatus(testNodeUrl + ".json",200,"Expecting test node to exist after test");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.servlets.post.PostServletPrivilegesUpdateTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test for SLING-897 fix: 
 * 1. Updating a property requires jcr:modifyProperties privilege on node.
 * 2. When changing an existing property observers should receive a PROPERTY_CHANGED event instead 
 * of a PROPERTY_REMOVED event and a PROPERTY_ADDED event
 */
@Test @Ignore public void testUpdatePropertyPrivilegesAndEvents() throws IOException, JSONException, RepositoryException, InterruptedException {
  testUserId=H.createTestUser();
  final String createTestNodeUrl=postUrl + SlingPostConstants.DEFAULT_CREATE_SUFFIX;
  NameValuePairList clientNodeProperties=new NameValuePairList();
  clientNodeProperties.add(SlingPostConstants.RP_NODE_NAME_HINT,testName.getMethodName());
  clientNodeProperties.add("propOne","propOneValue1");
  clientNodeProperties.add("propOne","propOneValue2");
  clientNodeProperties.add("propTwo","propTwoValue");
  String testNodeUrl=H.getTestClient().createNode(createTestNodeUrl,clientNodeProperties,null,false);
  String content=H.getContent(testNodeUrl + ".json",HttpTest.CONTENT_TYPE_JSON);
  JSONObject json=new JSONObject(content);
  Object propOneObj=json.opt("propOne");
  assertTrue(propOneObj instanceof JSONArray);
  assertEquals(2,((JSONArray)propOneObj).length());
  assertEquals("propOneValue1",((JSONArray)propOneObj).get(0));
  assertEquals("propOneValue2",((JSONArray)propOneObj).get(1));
  Object propTwoObj=json.opt("propTwo");
  assertTrue(propTwoObj instanceof String);
  assertEquals("propTwoValue",propTwoObj);
  List<NameValuePair> postParams=new ArrayList<NameValuePair>();
  postParams.add(new NameValuePair("propOne","propOneValueChanged"));
  postParams.add(new NameValuePair("propTwo","propTwoValueChanged1"));
  postParams.add(new NameValuePair("propTwo","propTwoValueChanged2"));
  Credentials testUserCreds=new UsernamePasswordCredentials(testUserId,"testPwd");
  String expectedMessage="Expected javax.jcr.AccessDeniedException";
  H.assertAuthenticatedPostStatus(testUserCreds,testNodeUrl,HttpServletResponse.SC_INTERNAL_SERVER_ERROR,postParams,expectedMessage);
  Map<String,String> nodeAceProperties=new HashMap<String,String>();
  nodeAceProperties.put("principalId",testUserId);
  nodeAceProperties.put("privilege@jcr:modifyProperties","granted");
  H.getTestClient().createNode(testNodeUrl + ".modifyAce.html",nodeAceProperties);
  Repository repository=JcrUtils.getRepository(HttpTest.HTTP_BASE_URL + "/server/");
  Session jcrSession=null;
  TestEventListener listener=new TestEventListener();
  ObservationManager observationManager=null;
  try {
    jcrSession=repository.login(new SimpleCredentials("admin","admin".toCharArray()));
    observationManager=jcrSession.getWorkspace().getObservationManager();
    String testNodePath=testNodeUrl.substring(HttpTest.HTTP_BASE_URL.length());
    observationManager.addEventListener(listener,Event.PROPERTY_ADDED | Event.PROPERTY_CHANGED | Event.PROPERTY_REMOVED,testNodePath,true,null,null,false);
    H.assertAuthenticatedPostStatus(testUserCreds,testNodeUrl,HttpServletResponse.SC_OK,postParams,expectedMessage);
    String afterUpdateContent=H.getContent(testNodeUrl + ".json",HttpTest.CONTENT_TYPE_JSON);
    JSONObject afterUpdateJson=new JSONObject(afterUpdateContent);
    Object afterUpdatePropOneObj=afterUpdateJson.opt("propOne");
    assertTrue(afterUpdatePropOneObj instanceof JSONArray);
    assertEquals(1,((JSONArray)afterUpdatePropOneObj).length());
    assertEquals("propOneValueChanged",((JSONArray)afterUpdatePropOneObj).get(0));
    Object afterUpdatePropTwoObj=afterUpdateJson.opt("propTwo");
    assertTrue(afterUpdatePropTwoObj instanceof JSONArray);
    assertEquals(2,((JSONArray)afterUpdatePropTwoObj).length());
    assertEquals("propTwoValueChanged1",((JSONArray)afterUpdatePropTwoObj).get(0));
    assertEquals("propTwoValueChanged2",((JSONArray)afterUpdatePropTwoObj).get(1));
    for (int second=0; second < 15; second++) {
      if (listener.getEventBundlesProcessed() > 0) {
        break;
      }
      Thread.sleep(1000);
    }
    assertEquals("One property added event was expected: " + listener.toString(),1,listener.addedProperties.size());
    assertEquals(testNodePath + "/propTwo",listener.addedProperties.get(0));
    assertEquals("One property removed event was expected: " + listener.toString(),1,listener.removedProperties.size());
    assertEquals(testNodePath + "/propTwo",listener.removedProperties.get(0));
    assertEquals("One property changed event was expected: " + listener.toString(),1,listener.changedProperties.size());
    assertEquals(testNodePath + "/propOne",listener.changedProperties.get(0));
  }
  finally {
    if (observationManager != null) {
      observationManager.removeEventListener(listener);
    }
    jcrSession.logout();
    repository=null;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.userManager.CreateUserTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUserWithExtraProperties() throws IOException, JSONException {
  String postUrl=HttpTest.HTTP_BASE_URL + "/system/userManager/user.create.html";
  testUserId="testUser" + random.nextInt();
  List<NameValuePair> postParams=new ArrayList<NameValuePair>();
  postParams.add(new NameValuePair(":name",testUserId));
  postParams.add(new NameValuePair("marker",testUserId));
  postParams.add(new NameValuePair("pwd","testPwd"));
  postParams.add(new NameValuePair("pwdConfirm","testPwd"));
  postParams.add(new NameValuePair("displayName","My Test User"));
  postParams.add(new NameValuePair("url","http://www.apache.org"));
  Credentials creds=new UsernamePasswordCredentials("admin","admin");
  H.assertAuthenticatedPostStatus(creds,postUrl,HttpServletResponse.SC_OK,postParams,null);
  String getUrl=HttpTest.HTTP_BASE_URL + "/system/userManager/user/" + testUserId+ ".json";
  String json=H.getAuthenticatedContent(creds,getUrl,HttpTest.CONTENT_TYPE_JSON,null,HttpServletResponse.SC_OK);
  assertNotNull(json);
  JSONObject jsonObj=new JSONObject(json);
  assertEquals(testUserId,jsonObj.getString("marker"));
  assertEquals("My Test User",jsonObj.getString("displayName"));
  assertEquals("http://www.apache.org",jsonObj.getString("url"));
  assertFalse(jsonObj.has(":name"));
  assertFalse(jsonObj.has("pwd"));
  assertFalse(jsonObj.has("pwdConfirm"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateUser() throws IOException, JSONException {
  testUserId="testUser" + random.nextInt() + System.currentTimeMillis();
  String postUrl=HttpTest.HTTP_BASE_URL + "/system/userManager/user.create.html";
  final List<NameValuePair> postParams=new ArrayList<NameValuePair>();
  postParams.add(new NameValuePair(":name",testUserId));
  postParams.add(new NameValuePair("marker",testUserId));
  postParams.add(new NameValuePair("pwd","testPwd"));
  postParams.add(new NameValuePair("pwdConfirm","testPwd"));
  final Credentials creds=new UsernamePasswordCredentials("admin","admin");
  H.assertAuthenticatedPostStatus(creds,postUrl,HttpServletResponse.SC_OK,postParams,null);
{
    final String getUrl=HttpTest.HTTP_BASE_URL + "/system/userManager/user/" + testUserId+ ".json";
    final String json=H.getAuthenticatedContent(creds,getUrl,HttpTest.CONTENT_TYPE_JSON,null,HttpServletResponse.SC_OK);
    assertNotNull(json);
    final JSONObject jsonObj=new JSONObject(json);
    assertEquals(testUserId,jsonObj.getString("marker"));
    assertFalse(jsonObj.has(":name"));
    assertFalse(jsonObj.has("pwd"));
    assertFalse(jsonObj.has("pwdConfirm"));
  }
{
    final Credentials newUserCreds=new UsernamePasswordCredentials(testUserId,"testPwd");
    final String getUrl=HttpTest.HTTP_BASE_URL + "/system/sling/info.sessionInfo.json";
    final String json=H.getAuthenticatedContent(newUserCreds,getUrl,HttpTest.CONTENT_TYPE_JSON,null,HttpServletResponse.SC_OK);
    assertNotNull(json);
    final JSONObject jsonObj=new JSONObject(json);
    assertEquals(testUserId,jsonObj.getString("userID"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.mailarchiveserver.impl.Mime4jMboxParserImplStreamingTest </h4><pre class="type-11 type-6 type-3 type-8 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("TODO - fails if running tests with lots of memory") @Test public void testParserIsStreaming() throws IOException {
  File tempf=null;
  FileInputStream fis=null;
  FileOutputStream fos=null;
  try {
    final long maxMem=Runtime.getRuntime().maxMemory();
    log.info("Max memory={}, reading from {}, might take a while...",maxMem,TEST_FILE_NAME);
    log.info("TODO: this test fails with 'Size exceeds Integer.MAX_VALUE' if maxMem is over a certain limit");
    final File fileToSample=new File(TU.TEST_FOLDER,TEST_FILE_NAME);
    final int count=(int)(maxMem * TEST_FILE_RATIO / fileToSample.length()) + 1;
    fis=new FileInputStream(fileToSample);
    final byte[] sample=new byte[(int)fileToSample.length()];
    assertEquals("Expecting the correct number of bytes read",fis.read(sample),fileToSample.length());
    tempf=File.createTempFile("MAS_",".mbox");
    fos=new FileOutputStream(tempf);
    for (int i=0; i < count; i++) {
      fos.write(sample);
    }
    fos.flush();
    fos.close();
    fos=null;
    parser.parse(new FileInputStream(tempf));
  }
 catch (  OutOfMemoryError e) {
    fail("Got OutOfMemoryError, looks like the Parser is not streaming");
  }
 finally {
    if (tempf != null) {
      tempf.delete();
    }
    if (fis != null) {
      fis.close();
    }
    if (fos != null) {
      fos.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.mailarchiveserver.impl.Mime4jMboxParserImplTest </h4><pre class="type-15 type-11 type-12 type-6 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMboxParsing() throws IOException {
  Iterator<Message> iter=parser.parse(new FileInputStream(new File(TU.TEST_FOLDER,WRONGBODY_MBOX)));
  boolean fail=true;
  int i=1;
  while (iter.hasNext()) {
    final Message message=iter.next();
    File bodyFile=new File(TU.TEST_FOLDER,specialPathFromFilePath(WRONGBODY_MBOX,"_bodyOf" + i,"txt"));
    if (bodyFile.exists()) {
      final String actual=getPlainBody(message);
      final String expected=readTextFile(bodyFile);
      assertEquals("Body #" + i,expected,actual);
      fail=false;
    }
    i++;
  }
  if (fail) {
    fail("No file with expected body.");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.maven.projectsupport.BundleListContentProviderTest </h4><pre class="type-11 type-2 type-13 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setupTemporaryFiles() throws IOException {
  TemporaryFolder configRoot=new TemporaryFolder(tempFolder.getRoot());
  configRoot.create();
  for (  String filename : CONFIG_FILES) {
    final File f=getConfigFile(configRoot,filename);
    f.createNewFile();
    assertTrue("Expecting temporary config file to have been created: " + f.getAbsolutePath(),f.exists());
  }
  configDirectory=configRoot.getRoot();
  resourceProviderRoot=new File(tempFolder.getRoot(),"RESOURCE_PROVIDER_ROOT");
  resourceProviderRoot.mkdirs();
  resourceProviderFile=new File(resourceProviderRoot,"RP_FILE_" + System.currentTimeMillis());
  resourceProviderFile.createNewFile();
  fakeBundlePath=getFakeBundlePath();
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResourceProviderResource() throws Exception {
  final URL url=provider.getResource(resourceProviderFile.getName());
  assertNotNull("Expecting resource provider file to be found",url);
  assertEquals(resourceProviderFile.toURI().toURL().toExternalForm(),url.toExternalForm());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.maven.slingstart.PreparePackageMojoTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSubsystemBaseGeneration() throws Exception {
  PreparePackageMojo ppm=getMojoUnderTest("org.apache.sling/org.apache.sling.commons.classloader/1.3.2","org.apache.sling/org.apache.sling.commons.classloader/1.3.2/app","org.apache.sling/org.apache.sling.commons.contentdetection/1.0.2","org.apache.sling/org.apache.sling.commons.json/2.0.12","org.apache.sling/org.apache.sling.commons.mime/2.1.8","org.apache.sling/org.apache.sling.commons.osgi/2.3.0","org.apache.sling/org.apache.sling.commons.threads/3.2.0");
  try {
    String modelTxt="[feature name=:launchpad]\n" + "[artifacts]\n" + "  org.apache.sling/org.apache.sling.commons.classloader/1.3.2\n"+ ""+ "[feature name=test1 type=osgi.subsystem.composite]\n"+ ""+ "[:subsystem-manifest startLevel=123]\n"+ "  Subsystem-Description: Extra subsystem headers can go here including very long ones that would span multiple lines in a manifest\n"+ "  Subsystem-Copyright: (c) 2015 yeah!\n"+ ""+ "[artifacts]\n"+ "  org.apache.sling/org.apache.sling.commons.osgi/2.3.0\n"+ ""+ "[artifacts startLevel=10]\n"+ "  org.apache.sling/org.apache.sling.commons.json/2.0.12\n"+ "  org.apache.sling/org.apache.sling.commons.mime/2.1.8\n"+ ""+ "[artifacts startLevel=20 runModes=foo,bar,:blah]\n"+ "  org.apache.sling/org.apache.sling.commons.threads/3.2.0\n"+ ""+ "[artifacts startLevel=100 runModes=bar]\n"+ "  org.apache.sling/org.apache.sling.commons.contentdetection/1.0.2\n";
    Model model=ModelReader.read(new StringReader(modelTxt),null);
    ppm.execute(model);
    File generatedFile=new File(ppm.getTmpDir() + "/test1.subsystem-base");
    try (JarFile jf=new JarFile(generatedFile)){
      Manifest mf=jf.getManifest();
      Attributes attrs=mf.getMainAttributes();
      String expected="Potential_Bundles/0/org.apache.sling.commons.osgi-2.3.0.jar|" + "Potential_Bundles/10/org.apache.sling.commons.json-2.0.12.jar|" + "Potential_Bundles/10/org.apache.sling.commons.mime-2.1.8.jar";
      assertEquals(expected,attrs.getValue("_all_"));
      assertEquals("Potential_Bundles/20/org.apache.sling.commons.threads-3.2.0.jar",attrs.getValue("foo"));
      assertEquals("Potential_Bundles/20/org.apache.sling.commons.threads-3.2.0.jar|" + "Potential_Bundles/100/org.apache.sling.commons.contentdetection-1.0.2.jar",attrs.getValue("bar"));
      ZipEntry smbZE=jf.getEntry("SUBSYSTEM-MANIFEST-BASE.MF");
      try (InputStream smbIS=jf.getInputStream(smbZE)){
        Manifest smbMF=new Manifest(smbIS);
        Attributes smbAttrs=smbMF.getMainAttributes();
        assertEquals("test1",smbAttrs.getValue("Subsystem-SymbolicName"));
        assertEquals("osgi.subsystem.composite",smbAttrs.getValue("Subsystem-Type"));
        assertEquals("(c) 2015 yeah!",smbAttrs.getValue("Subsystem-Copyright"));
        assertEquals("Extra subsystem headers can go here including very long ones " + "that would span multiple lines in a manifest",smbAttrs.getValue("Subsystem-Description"));
      }
       File mrr=getMavenRepoRoot();
      File soj=getMavenArtifactFile(mrr,"org.apache.sling","org.apache.sling.commons.osgi","2.3.0");
      ZipEntry sojZE=jf.getEntry("Potential_Bundles/0/org.apache.sling.commons.osgi-2.3.0.jar");
      try (InputStream is=jf.getInputStream(sojZE)){
        assertArtifactsEqual(soj,is);
      }
       File sjj=getMavenArtifactFile(mrr,"org.apache.sling","org.apache.sling.commons.json","2.0.12");
      ZipEntry sjZE=jf.getEntry("Potential_Bundles/10/org.apache.sling.commons.json-2.0.12.jar");
      try (InputStream is=jf.getInputStream(sjZE)){
        assertArtifactsEqual(sjj,is);
      }
       File smj=getMavenArtifactFile(mrr,"org.apache.sling","org.apache.sling.commons.mime","2.1.8");
      ZipEntry smjZE=jf.getEntry("Potential_Bundles/10/org.apache.sling.commons.mime-2.1.8.jar");
      try (InputStream is=jf.getInputStream(smjZE)){
        assertArtifactsEqual(smj,is);
      }
       File stj=getMavenArtifactFile(mrr,"org.apache.sling","org.apache.sling.commons.threads","3.2.0");
      ZipEntry stjZE=jf.getEntry("Potential_Bundles/20/org.apache.sling.commons.threads-3.2.0.jar");
      try (InputStream is=jf.getInputStream(stjZE)){
        assertArtifactsEqual(stj,is);
      }
       File ctj=getMavenArtifactFile(mrr,"org.apache.sling","org.apache.sling.commons.contentdetection","1.0.2");
      ZipEntry ctjZE=jf.getEntry("Potential_Bundles/100/org.apache.sling.commons.contentdetection-1.0.2.jar");
      try (InputStream is=jf.getInputStream(ctjZE)){
        assertArtifactsEqual(ctj,is);
      }
     }
   }
  finally {
    FileUtils.deleteDirectory(new File(ppm.project.getBuild().getDirectory()));
  }
}

</code></pre>

<br>
<pre class="type-11 type-12 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBSNRenaming() throws Exception {
  PreparePackageMojo ppm=getMojoUnderTest("org.apache.sling/org.apache.sling.commons.classloader/1.3.2","org.apache.sling/org.apache.sling.commons.classloader/1.3.2/app","org.apache.sling/org.apache.sling.commons.json/2.0.12");
  try {
    String modelTxt="[feature name=:launchpad]\n" + "[artifacts]\n" + "  org.apache.sling/org.apache.sling.commons.classloader/1.3.2\n"+ ""+ "[feature name=rename_test]\n"+ "  org.apache.sling/org.apache.sling.commons.json/2.0.12 [bundle:rename-bsn=r-foo.bar.renamed.sling.commons.json]\n";
    Model model=ModelReader.read(new StringReader(modelTxt),null);
    ppm.execute(model);
    File orgJar=getMavenArtifactFile(getMavenRepoRoot(),"org.apache.sling","org.apache.sling.commons.json","2.0.12");
    File generatedJar=new File(ppm.getTmpDir() + "/r-foo.bar.renamed.sling.commons.json-2.0.12.jar");
    compareJarContents(orgJar,generatedJar);
    try (JarFile jfOrg=new JarFile(orgJar);JarFile jfNew=new JarFile(generatedJar)){
      Manifest mfOrg=jfOrg.getManifest();
      Manifest mfNew=jfNew.getManifest();
      Attributes orgAttrs=mfOrg.getMainAttributes();
      Attributes newAttrs=mfNew.getMainAttributes();
      for (      Object key : orgAttrs.keySet()) {
        String orgVal=orgAttrs.getValue(key.toString());
        String newVal=newAttrs.getValue(key.toString());
        if ("Bundle-SymbolicName".equals(key.toString())) {
          assertEquals("Should have recorded the original Bundle-SymbolicName",orgVal,newAttrs.getValue("X-Original-Bundle-SymbolicName"));
          assertEquals("r-foo.bar.renamed.sling.commons.json",newVal);
        }
 else {
          assertEquals("Different keys: " + key,orgVal,newVal);
        }
      }
    }
   }
  finally {
    FileUtils.deleteDirectory(new File(ppm.project.getBuild().getDirectory()));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.models.impl.CustomInjectorTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInjectorWithCustomAnnotation(){
  CustomAnnotationInjector injector=new CustomAnnotationInjector();
  factory.bindInjector(new SimpleInjector(),new ServicePropertiesMap(1,1));
  factory.bindInjector(injector,new ServicePropertiesMap(1,1));
  factory.bindInjectAnnotationProcessorFactory(injector,new ServicePropertiesMap(1,1));
  CustomAnnotationModel model=factory.getAdapter(new Object(),CustomAnnotationModel.class);
  assertNotNull(model);
  assertEquals("default value",model.getDefaultString());
  assertEquals("custom value",model.getCustomString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.nosql.couchbase.client.CouchbaseKeyTest </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testShortKey(){
  String key=CouchbaseKey.build("/short/key",PREFIX);
  assertEquals(PREFIX + "/short/key",key);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLongKey(){
  String key=CouchbaseKey.build("/long/key/" + StringUtils.repeat("/aaa",500),PREFIX);
  assertTrue(StringUtils.startsWith(key,PREFIX + "/long/key/"));
  assertEquals(CouchbaseKey.MAX_KEY_LENGTH,key.length());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.nosql.generic.resource.impl.AbstractNoSqlResourceProviderTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBinaryData() throws IOException {
  Resource resource1=context.resourceResolver().getResource(testRoot().getPath() + "/node1");
  InputStream is=ResourceUtil.getValueMap(resource1).get("binaryProp",InputStream.class);
  byte[] dataFromResource=IOUtils.toByteArray(is);
  is.close();
  assertArrayEquals(BINARY_VALUE,dataFromResource);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleProperties_DeepPathAccess() throws IOException {
  Resource resource1=context.resourceResolver().getResource(testRoot().getPath());
  assertNotNull(resource1);
  assertEquals(testRoot().getName(),resource1.getName());
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(STRING_VALUE,props.get("node1/stringProp",String.class));
  assertArrayEquals(STRING_ARRAY_VALUE,props.get("node1/stringArrayProp",String[].class));
  assertEquals((Integer)INTEGER_VALUE,props.get("node1/integerProp",Integer.class));
  assertEquals(DOUBLE_VALUE,props.get("node1/doubleProp",Double.class),0.0001);
  assertEquals(BOOLEAN_VALUE,props.get("node1/booleanProp",Boolean.class));
  assertEquals(STRING_VALUE,props.get("node1/node11/stringProp11",String.class));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCalendarPropertyToDate() throws IOException {
  Resource resource1=context.resourceResolver().getResource(testRoot().getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  Date dateValue=props.get("calendarProp",Date.class);
  assertNotNull(dateValue);
  assertEquals(CALENDAR_VALUE.getTime(),dateValue);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDatePropertyToCalendar() throws IOException {
  Resource resource1=context.resourceResolver().getResource(testRoot().getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  Calendar calendarValue=props.get("dateProp",Calendar.class);
  assertNotNull(calendarValue);
  assertEquals(DATE_VALUE,calendarValue.getTime());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDateProperty() throws IOException {
  Resource resource1=context.resourceResolver().getResource(testRoot().getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(DATE_VALUE,props.get("dateProp",Date.class));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleProperties() throws IOException {
  Resource resource1=context.resourceResolver().getResource(testRoot().getPath() + "/node1");
  assertTrue(resource1 instanceof NoSqlResource);
  assertNotNull(resource1);
  assertEquals("node1",resource1.getName());
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(STRING_VALUE,props.get("stringProp",String.class));
  assertArrayEquals(STRING_ARRAY_VALUE,props.get("stringArrayProp",String[].class));
  assertEquals((Integer)INTEGER_VALUE,props.get("integerProp",Integer.class));
  assertEquals(DOUBLE_VALUE,props.get("doubleProp",Double.class),0.0001);
  assertEquals(BOOLEAN_VALUE,props.get("booleanProp",Boolean.class));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCalendarProperty() throws IOException {
  Resource resource1=context.resourceResolver().getResource(testRoot().getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(CALENDAR_VALUE.getTime(),props.get("calendarProp",Calendar.class).getTime());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.pipes.ContainerPipeTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOtherTree() throws Exception {
  Resource resource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_OTHERTREE);
  ContainerPipe pipe=(ContainerPipe)plumber.getPipe(resource);
  Iterator<Resource> resourceIterator=pipe.getOutput();
  assertTrue("There should be some results",resourceIterator.hasNext());
  Resource firstResource=resourceIterator.next();
  assertNotNull("First resource should not be null",firstResource);
  assertEquals("First resource should be instantiated path with apple & pea",PATH_FRUITS + "/apple/isnota/pea/buttheyhavesamecolor",firstResource.getPath());
  assertTrue("There should still be another item",resourceIterator.hasNext());
  Resource secondResource=resourceIterator.next();
  assertNotNull("Second resource should not be null",secondResource);
  assertEquals("Second resource should be instantiated path with banana & pea",PATH_FRUITS + "/banana/isnota/pea/andtheircolorisdifferent",secondResource.getPath());
  assertFalse("There should be no more items",resourceIterator.hasNext());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testOnePipe() throws Exception {
  Resource resource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_ONEPIPE);
  ContainerPipe pipe=(ContainerPipe)plumber.getPipe(resource);
  Iterator<Resource> resourceIterator=pipe.getOutput();
  assertTrue("There should be children",resourceIterator.hasNext());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testRottenTree() throws Exception {
  Resource resource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_ROTTENTREE);
  ContainerPipe pipe=(ContainerPipe)plumber.getPipe(resource);
  Iterator<Resource> resourceIterator=pipe.getOutput();
  assertFalse("There shouldn't be any resource",resourceIterator.hasNext());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDummyTree() throws Exception {
  Resource resource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_DUMMYTREE);
  ContainerPipe pipe=(ContainerPipe)plumber.getPipe(resource);
  assertNotNull("A container pipe should be built out from the given configuration",pipe);
  Iterator<Resource> resourceIterator=pipe.getOutput();
  assertTrue("There should be some results",resourceIterator.hasNext());
  Resource firstResource=resourceIterator.next();
  assertNotNull("First resource should not be null",firstResource);
  assertEquals("First resource should be instantiated path with apple & pea",PATH_FRUITS + "/apple/isnota/pea/buttheyhavesamecolor",firstResource.getPath());
  assertTrue("There should still be another item",resourceIterator.hasNext());
  Resource secondResource=resourceIterator.next();
  assertNotNull("Second resource should not be null",secondResource);
  assertEquals("Second resource should be instantiated path with apple & carrot",PATH_FRUITS + "/apple/isnota/carrot/andtheircolorisdifferent",secondResource.getPath());
  assertTrue("There should still be another item",resourceIterator.hasNext());
  Resource thirdResource=resourceIterator.next();
  assertNotNull("Third resource should not be null",thirdResource);
  assertEquals("Third resource should be instantiated path with banana & pea",PATH_FRUITS + "/banana/isnota/pea/andtheircolorisdifferent",thirdResource.getPath());
  assertTrue("There should still be another item",resourceIterator.hasNext());
  Resource fourthResource=resourceIterator.next();
  assertNotNull("Fourth resource should not be null",fourthResource);
  assertEquals("fourthResource resource should be instantiated path with banana & carrot",PATH_FRUITS + "/banana/isnota/carrot/andtheircolorisdifferent",fourthResource.getPath());
  assertFalse("There should be no more items",resourceIterator.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.pipes.FilterPipeTest </h4><pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTestPasses(){
  Resource resource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_TEST);
  Pipe pipe=plumber.getPipe(resource);
  Iterator<Resource> resourceIterator=pipe.getOutput();
  assertTrue("output has one resource...",resourceIterator.hasNext());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterProperties(){
  Resource resource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_PROPERTIES);
  ContainerPipe pipe=(ContainerPipe)plumber.getPipe(resource);
  Iterator<Resource> resourceIterator=pipe.getOutput();
  assertTrue("output has one resource...",resourceIterator.hasNext());
  ValueMap properties=resourceIterator.next().adaptTo(ValueMap.class);
  assertFalse("...and only One",resourceIterator.hasNext());
  assertEquals("output resource's color is green","green",properties.get("color",String.class));
  assertTrue("output resource's name is not void",StringUtils.isNotBlank(properties.get("name",String.class)));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNoChildrenPasses(){
  Resource resource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_NOCHILDREN);
  Pipe pipe=plumber.getPipe(resource);
  Iterator<Resource> resourceIterator=pipe.getOutput();
  assertTrue("output has one resource...",resourceIterator.hasNext());
  resourceIterator.next().adaptTo(ValueMap.class);
  assertFalse("...and only One",resourceIterator.hasNext());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNoChildrenFails(){
  Resource resource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_NOCHILDREN_FAILS);
  Pipe pipe=plumber.getPipe(resource);
  Iterator<Resource> resourceIterator=pipe.getOutput();
  assertFalse("output has no resource...",resourceIterator.hasNext());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTestFails(){
  Resource resource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_TEST_FAILS);
  Pipe pipe=plumber.getPipe(resource);
  Iterator<Resource> resourceIterator=pipe.getOutput();
  assertFalse("output has no resource...",resourceIterator.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.pipes.JsonPipeTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPipedArray() throws Exception {
  Resource resource=context.resourceResolver().getResource(ARRAY);
  ContainerPipe pipe=(ContainerPipe)plumber.getPipe(resource);
  Iterator<Resource> outputs=pipe.getOutput();
  Resource first=outputs.next();
  Resource second=outputs.next();
  Resource third=outputs.next();
  assertFalse("there should be only three elements",outputs.hasNext());
  assertEquals("first resource should be one","/content/json/array/one",first.getPath());
  assertEquals("second resource should be two","/content/json/array/two",second.getPath());
  assertEquals("third resource should be three","/content/json/array/three",third.getPath());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testPipedJson() throws Exception {
  Resource resource=context.resourceResolver().getResource(CONF);
  Pipe pipe=plumber.getPipe(resource);
  Iterator<Resource> outputs=pipe.getOutput();
  outputs.next();
  Resource result=outputs.next();
  context.resourceResolver().commit();
  ValueMap properties=result.adaptTo(ValueMap.class);
  assertTrue("There should be a Paris property",properties.containsKey("Paris"));
  assertTrue("There should be a Bucharest property",properties.containsKey("Bucharest"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.pipes.MovePipeTest </h4><pre class="type-11 type-13 type-9 type-8 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testMoveProperty() throws Exception {
  Resource resource=context.resourceResolver().getResource(PATH_PIPE + MOVEPROPERTY_PIPE);
  Pipe pipe=plumber.getPipe(resource);
  Iterator<Resource> output=pipe.getOutput();
  Assert.assertTrue(output.hasNext());
  output.next();
  Session session=context.resourceResolver().adaptTo(Session.class);
  session.save();
  Assert.assertTrue("new property path should exists",session.propertyExists(PATH_FRUITS + MOVED_NODE_PATH));
  Assert.assertFalse("old property path should not",session.propertyExists(PATH_FRUITS + PN_INDEX));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-8 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore @Test public void testMoveNode() throws Exception {
  Resource resource=context.resourceResolver().getResource(PATH_PIPE + MOVENODE_PIPE);
  Pipe pipe=plumber.getPipe(resource);
  Iterator<Resource> output=pipe.getOutput();
  Assert.assertTrue(output.hasNext());
  output.next();
  Session session=context.resourceResolver().adaptTo(Session.class);
  session.save();
  Assert.assertTrue("new node path should exists",session.nodeExists(PATH_FRUITS + MOVED_NODE_PATH));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.pipes.MultiPropertyPipeTest </h4><pre class="type-11 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testNonWorkingMV() throws Exception {
  Resource conf=context.resourceResolver().getResource(PATH_PIPE + "/typo");
  Pipe pipe=plumber.getPipe(conf);
  assertFalse("There should not be next for a non existing resource",pipe.getOutput().hasNext());
  conf=context.resourceResolver().getResource(PATH_PIPE + "/notProperty");
  pipe=plumber.getPipe(conf);
  assertFalse("There should not be next for a resource that is not a property",pipe.getOutput().hasNext());
  conf=context.resourceResolver().getResource(PATH_PIPE + "/notMultiple");
  pipe=plumber.getPipe(conf);
  assertFalse("There should not be next for a property that is not multiple",pipe.getOutput().hasNext());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMV() throws Exception {
  Resource conf=context.resourceResolver().getResource(PATH_PIPE + "/working");
  Pipe pipe=plumber.getPipe(conf);
  Iterator<Resource> outputs=pipe.getOutput();
  Resource resource=outputs.next();
  assertNotNull(resource);
  assertEquals("Resource path should be the input",PATH_FRUITS + PN_INDEX,resource.getPath());
  String fruit=(String)pipe.getOutputBinding();
  assertEquals("First resource binding should be apple","apple",fruit);
  resource=outputs.next();
  assertNotNull(resource);
  assertEquals("Resource path should be the input",PATH_FRUITS + PN_INDEX,resource.getPath());
  fruit=(String)pipe.getOutputBinding();
  assertEquals("Second resource binding should be banana","banana",fruit);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.pipes.PlumberServletTest </h4><pre class="type-15 type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdditionalBindingsAndWriter() throws Exception {
  String testBinding="testBinding";
  String testBindingLength=testBinding + "Length";
  String bindingValue="testBindingValue";
  String pathLengthParam="pathLength";
  JSONObject bindings=new JSONObject("{'" + testBinding + "':'"+ bindingValue+ "'}");
  JSONObject respObject=new JSONObject("{'" + pathLengthParam + "':'${path.get(\"dummyGrandChild\").length}','"+ testBindingLength+ "':'${"+ testBinding+ ".length}'}");
  SlingHttpServletRequest request=mockPlumberServletRequest(context.resourceResolver(),dummyTreePath,null,bindings.toString(),respObject.toString(),null);
  servlet.execute(request,response,false);
  assertDummyTree();
  JSONObject response=new JSONObject(stringResponse.toString());
  JSONArray array=response.getJSONArray(PlumberServlet.KEY_ITEMS);
  for (int i=0; i < array.length(); i++) {
    JSONObject object=array.optJSONObject(i);
    assertNotNull("there should be an object returned at each time",object);
    String path=object.optString(PlumberServlet.PATH_KEY);
    assertNotNull("the string path should be returned for each item, containing the path of the resource");
    String pathLength=object.optString(pathLengthParam);
    assertNotNull("there should be a pathLength param, as specified in the writer",pathLength);
    assertEquals("Pathlength should be the string representation of the path length",path.length() + "",pathLength);
    String testBindingLengthValue=object.optString(testBindingLength);
    assertNotNull("testBindingLength should be there",testBindingLengthValue);
    assertEquals("testBindingLength should be the string representation of the additional binding length",bindingValue.length() + "",testBindingLengthValue);
  }
}

</code></pre>

<br>
<pre class="type-11 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testWriteExecute() throws ServletException {
  SlingHttpServletRequest request=mockPlumberServletRequest(context.resourceResolver(),pipedWritePath,null,null,null,null);
  servlet.execute(request,response,true);
  String finalResponse=stringResponse.toString();
  assertFalse("There should be a response",StringUtils.isBlank(finalResponse));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.pipes.RemovePipeTest </h4><pre class="type-11 type-13 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComplexRemove() throws Exception {
  ResourceResolver resolver=context.resourceResolver();
  Resource resource=resolver.getResource(PATH_PIPE + "/" + NN_COMPLEX);
  Pipe pipe=plumber.getPipe(resource);
  assertTrue("resource should be solved",pipe.getOutput().hasNext());
  pipe.getOutput().next();
  resolver.commit();
  assertNull("isnota carrot should be removed",resolver.getResource(PATH_APPLE + "/isnota/carrot"));
  Resource isNotAPea=resolver.getResource(PATH_APPLE + "/isnota/pea");
  assertNotNull("isnota pea should not be removed",isNotAPea);
  assertFalse("isnota pea color property should not be here",isNotAPea.adaptTo(ValueMap.class).containsKey("color"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.pipes.SlingQueryPipeTest </h4><pre class="type-11 type-13 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testChildren() throws Exception {
  Resource resource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_SIMPLE);
  SlingQueryPipe pipe=(SlingQueryPipe)plumber.getPipe(resource);
  assertNotNull("A Sling query pipe should be built out from the given configuration",pipe);
  Iterator<Resource> it=pipe.getOutput();
  assertTrue("this pipe should have an output",it.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.pipes.WritePipeTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple() throws Exception {
  Resource confResource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_SIMPLE);
  Pipe pipe=plumber.getPipe(confResource);
  assertNotNull("pipe should be found",pipe);
  assertTrue("this pipe should be marked as content modifier",pipe.modifiesContent());
  pipe.getOutput();
  context.resourceResolver().commit();
  ValueMap properties=context.resourceResolver().getResource("/content/fruits/apple").adaptTo(ValueMap.class);
  assertTrue("There should be hasSeed set to true",properties.get("hasSeed",false));
  assertArrayEquals("Colors should be correctly set",new String[]{"green","red"},properties.get("colors",String[].class));
  assertFalse("worm property should be gone (${null} conf)",properties.get("worm",false));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPiped() throws Exception {
  Resource confResource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_PIPED);
  Pipe pipe=plumber.getPipe(confResource);
  assertNotNull("pipe should be found",pipe);
  assertTrue("this pipe should be marked as content modifier",pipe.modifiesContent());
  Iterator<Resource> it=pipe.getOutput();
  assertTrue("There should be one result",it.hasNext());
  Resource resource=it.next();
  assertNotNull("The result should not be null",resource);
  assertEquals("The result should be the configured one in the piped write pipe","/content/fruits",resource.getPath());
  context.resourceResolver().commit();
  ValueMap properties=resource.adaptTo(ValueMap.class);
  assertArrayEquals("First fruit should have been correctly instantiated & patched from nothing",new String[]{"apple"},properties.get("fruits",String[].class));
  assertTrue("There should be a second result awaiting",it.hasNext());
  resource=it.next();
  assertNotNull("The second result should not be null",resource);
  assertEquals("The second result should be the configured one in the piped write pipe","/content/fruits",resource.getPath());
  context.resourceResolver().commit();
  assertPiped(resource);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testVariablePiped() throws Exception {
  String pipePath=PATH_PIPE + "/" + NN_VARIABLE_PIPED;
  Resource confResource=context.resourceResolver().getResource(pipePath);
  Pipe pipe=plumber.getPipe(confResource);
  assertNotNull("pipe should be found",pipe);
  Iterator<Resource> it=pipe.getOutput();
  Resource resource=it.next();
  assertEquals("path should be the one configured in first pipe",pipePath + "/conf/fruit/conf/apple",resource.getPath());
  context.resourceResolver().commit();
  assertEquals("Configured value should be written","apple is a fruit and its color is green",resource.adaptTo(ValueMap.class).get("jcr:description",""));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleTree() throws Exception {
  Resource confResource=context.resourceResolver().getResource(PATH_PIPE + "/" + NN_SIMPLETREE);
  Pipe pipe=plumber.getPipe(confResource);
  assertNotNull("pipe should be found",pipe);
  assertTrue("this pipe should be marked as content modifier",pipe.modifiesContent());
  pipe.getOutput();
  context.resourceResolver().commit();
  Resource appleResource=context.resourceResolver().getResource("/content/fruits/apple");
  ValueMap properties=appleResource.adaptTo(ValueMap.class);
  assertTrue("There should be hasSeed set to true",properties.get("hasSeed",false));
  assertArrayEquals("Colors should be correctly set",new String[]{"green","red"},properties.get("colors",String[].class));
  Node appleNode=appleResource.adaptTo(Node.class);
  NodeIterator children=appleNode.getNodes();
  assertTrue("Apple node should have children",children.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.provisioning.model.MergeUtilityTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mergeBaseRawTest() throws Exception {
  final Model baseRaw=U.readTestModel("merge/config-base.txt");
  final Model mergeRaw=U.readTestModel("merge/config-merge.txt");
  final Model mergeEffective=ModelUtility.getEffectiveModel(mergeRaw);
  MergeUtility.merge(baseRaw,mergeEffective);
  final List<Configuration> cfgs=U.assertConfigurationsInRunMode(baseRaw.getFeature("configadmin").getRunMode(),4);
  final Configuration cfgBoot=cfgs.get(0);
  assertEquals(1,cfgBoot.getProperties().size());
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.c"));
  final Configuration cfgA=cfgs.get(1);
  assertEquals("org.apache.test.A",cfgA.getPid());
  assertNull(cfgA.getFactoryPid());
  assertEquals(1,cfgA.getProperties().size());
  assertEquals("AA",cfgA.getProperties().get("name"));
  final Configuration cfgB=cfgs.get(2);
  assertEquals("org.apache.test.B",cfgB.getPid());
  assertNull(cfgB.getFactoryPid());
  assertEquals(2,cfgB.getProperties().size());
  assertEquals("BB",cfgB.getProperties().get("name"));
  assertEquals("bar",cfgB.getProperties().get("foo"));
  final Configuration cfgC=cfgs.get(3);
  assertEquals("org.apache.test.C",cfgC.getPid());
  assertNull(cfgC.getFactoryPid());
  assertEquals(1,cfgC.getProperties().size());
  assertEquals("bar",cfgB.getProperties().get("foo"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mergeBaseEffectiveTest() throws Exception {
  final Model baseRaw=U.readTestModel("merge/config-base.txt");
  final Model mergeRaw=U.readTestModel("merge/config-merge.txt");
  final Model baseEffective=ModelUtility.getEffectiveModel(baseRaw);
  MergeUtility.merge(baseEffective,mergeRaw);
  final List<Configuration> cfgs=U.assertConfigurationsInRunMode(baseEffective.getFeature("configadmin").getRunMode(),4);
  final Configuration cfgBoot=cfgs.get(0);
  assertEquals(1,cfgBoot.getProperties().size());
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.a"));
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.b"));
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.c"));
  final Configuration cfgA=cfgs.get(1);
  assertEquals("org.apache.test.A",cfgA.getPid());
  assertNull(cfgA.getFactoryPid());
  assertEquals(1,cfgA.getProperties().size());
  assertEquals("AA",cfgA.getProperties().get("name"));
  final Configuration cfgB=cfgs.get(2);
  assertEquals("org.apache.test.B",cfgB.getPid());
  assertNull(cfgB.getFactoryPid());
  assertEquals(3,cfgB.getProperties().size());
  assertEquals("BB",cfgB.getProperties().get("name"));
  assertEquals("bar",cfgB.getProperties().get("foo"));
  assertArrayEquals(new String[]{"one","two","three"},(String[])cfgB.getProperties().get("array"));
  final Configuration cfgC=cfgs.get(3);
  assertEquals("org.apache.test.C",cfgC.getPid());
  assertNull(cfgC.getFactoryPid());
  assertEquals(3,cfgC.getProperties().size());
  assertEquals("C",cfgC.getProperties().get("name"));
  assertEquals("bar",cfgB.getProperties().get("foo"));
  assertArrayEquals(new Integer[]{1,2,3},(Integer[])cfgC.getProperties().get("array"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mergeEffectiveTest() throws Exception {
  final Model baseRaw=U.readTestModel("merge/config-base.txt");
  final Model mergeRaw=U.readTestModel("merge/config-merge.txt");
  final Model baseEffective=ModelUtility.getEffectiveModel(baseRaw);
  final Model mergeEffective=ModelUtility.getEffectiveModel(mergeRaw);
  MergeUtility.merge(baseEffective,mergeEffective);
  final List<Configuration> cfgs=U.assertConfigurationsInRunMode(baseEffective.getFeature("configadmin").getRunMode(),4);
  final Configuration cfgBoot=cfgs.get(0);
  assertEquals(1,cfgBoot.getProperties().size());
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.c"));
  final Configuration cfgA=cfgs.get(1);
  assertEquals("org.apache.test.A",cfgA.getPid());
  assertNull(cfgA.getFactoryPid());
  assertEquals(1,cfgA.getProperties().size());
  assertEquals("AA",cfgA.getProperties().get("name"));
  final Configuration cfgB=cfgs.get(2);
  assertEquals("org.apache.test.B",cfgB.getPid());
  assertNull(cfgB.getFactoryPid());
  assertEquals(2,cfgB.getProperties().size());
  assertEquals("BB",cfgB.getProperties().get("name"));
  assertEquals("bar",cfgB.getProperties().get("foo"));
  final Configuration cfgC=cfgs.get(3);
  assertEquals("org.apache.test.C",cfgC.getPid());
  assertNull(cfgC.getFactoryPid());
  assertEquals(1,cfgC.getProperties().size());
  assertEquals("bar",cfgB.getProperties().get("foo"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mergeRawTest() throws Exception {
  final Model baseRaw=U.readTestModel("merge/config-base.txt");
  final Model mergeRaw=U.readTestModel("merge/config-merge.txt");
  MergeUtility.merge(baseRaw,mergeRaw);
  final List<Configuration> cfgs=U.assertConfigurationsInRunMode(baseRaw.getFeature("configadmin").getRunMode(),4);
  final Configuration cfgBoot=cfgs.get(0);
  assertEquals(1,cfgBoot.getProperties().size());
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.a"));
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.b"));
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.c"));
  final Configuration cfgA=cfgs.get(1);
  assertEquals("org.apache.test.A",cfgA.getPid());
  assertNull(cfgA.getFactoryPid());
  assertEquals(1,cfgA.getProperties().size());
  assertEquals("AA",cfgA.getProperties().get("name"));
  final Configuration cfgB=cfgs.get(2);
  assertEquals("org.apache.test.B",cfgB.getPid());
  assertNull(cfgB.getFactoryPid());
  assertEquals(3,cfgB.getProperties().size());
  assertEquals("BB",cfgB.getProperties().get("name"));
  assertEquals("bar",cfgB.getProperties().get("foo"));
  assertArrayEquals(new String[]{"one","two","three"},(String[])cfgB.getProperties().get("array"));
  final Configuration cfgC=cfgs.get(3);
  assertEquals("org.apache.test.C",cfgC.getPid());
  assertNull(cfgC.getFactoryPid());
  assertEquals(3,cfgC.getProperties().size());
  assertEquals("C",cfgC.getProperties().get("name"));
  assertEquals("bar",cfgB.getProperties().get("foo"));
  assertArrayEquals(new Integer[]{1,2,3},(Integer[])cfgC.getProperties().get("array"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.provisioning.model.ModelResolveUtilityReplaceTest </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOneResolver(){
  VariableResolver resolver=new VariableResolver(){
    @Override public String resolve(    Feature feature,    String name){
      return name.toUpperCase();
    }
  }
;
  assertEquals("one VAR1 variable",replace(TEST_FEATURE,"one ${var1} variable",resolver));
  assertEquals("VAR1 one variable",replace(TEST_FEATURE,"${var1} one variable",resolver));
  assertEquals("VAR1 one variable VAR2",replace(TEST_FEATURE,"${var1} one variable ${var2}",resolver));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.provisioning.model.ModelUtilityApplyVariablesTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testApplyVariables(){
  Model model=ModelUtility.applyVariables(testModel,testVariableResolver);
  Feature feature=model.getFeature("feature1");
  assertEquals("v1",feature.getVariables().get("param1"));
  assertEquals("extvalue1",feature.getVariables().get("extparam1"));
  assertEquals("extvalue2",feature.getVariables().get("extparam2"));
  assertEquals(3,feature.getVariables().size());
  Model effectiveModel=ModelUtility.getEffectiveModel(model);
  Feature effectiveFeature=effectiveModel.getFeature("feature1");
  RunMode runMode=effectiveFeature.getRunMode("rm1");
  ArtifactGroup group=runMode.getArtifactGroup(10);
  U.assertArtifactsInGroup(group,2);
  U.assertArtifact(group,"mvn:g1/a1/v1/t1/c1");
  U.assertArtifact(group,"mvn:g2/a2/extvalue2/jar");
  Configuration conf=runMode.getConfiguration("pid1",null);
  assertEquals("extvalue1",conf.getProperties().get("conf1"));
  assertEquals("extvalue2",conf.getProperties().get("conf2"));
  assertEquals("v1",runMode.getSettings().get("set1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.provisioning.model.ModelUtilityTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mergeBaseRawTest() throws Exception {
  final Model baseRaw=U.readCompleteTestModel(new String[]{"merge/config-base.txt"});
  final Model mergeRaw=U.readCompleteTestModel(new String[]{"merge/config-merge.txt"});
  final Model mergeEffective=ModelUtility.getEffectiveModel(mergeRaw);
  ModelUtility.merge(baseRaw,mergeEffective);
  final List<Configuration> cfgs=U.assertConfigurationsInRunMode(baseRaw.getFeature("configadmin").getRunMode(),4);
  final Configuration cfgBoot=cfgs.get(0);
  assertEquals(1,cfgBoot.getProperties().size());
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.c"));
  final Configuration cfgA=cfgs.get(1);
  assertEquals("org.apache.test.A",cfgA.getPid());
  assertNull(cfgA.getFactoryPid());
  assertEquals(1,cfgA.getProperties().size());
  assertEquals("AA",cfgA.getProperties().get("name"));
  final Configuration cfgB=cfgs.get(2);
  assertEquals("org.apache.test.B",cfgB.getPid());
  assertNull(cfgB.getFactoryPid());
  assertEquals(2,cfgB.getProperties().size());
  assertEquals("BB",cfgB.getProperties().get("name"));
  assertEquals("bar",cfgB.getProperties().get("foo"));
  final Configuration cfgC=cfgs.get(3);
  assertEquals("org.apache.test.C",cfgC.getPid());
  assertNull(cfgC.getFactoryPid());
  assertEquals(1,cfgC.getProperties().size());
  assertEquals("bar",cfgB.getProperties().get("foo"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mergeBaseEffectiveTest() throws Exception {
  final Model baseRaw=U.readCompleteTestModel(new String[]{"merge/config-base.txt"});
  final Model mergeRaw=U.readCompleteTestModel(new String[]{"merge/config-merge.txt"});
  final Model baseEffective=ModelUtility.getEffectiveModel(baseRaw);
  ModelUtility.merge(baseEffective,mergeRaw);
  final List<Configuration> cfgs=U.assertConfigurationsInRunMode(baseEffective.getFeature("configadmin").getRunMode(),4);
  final Configuration cfgBoot=cfgs.get(0);
  assertEquals(1,cfgBoot.getProperties().size());
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.a"));
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.b"));
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.c"));
  final Configuration cfgA=cfgs.get(1);
  assertEquals("org.apache.test.A",cfgA.getPid());
  assertNull(cfgA.getFactoryPid());
  assertEquals(1,cfgA.getProperties().size());
  assertEquals("AA",cfgA.getProperties().get("name"));
  final Configuration cfgB=cfgs.get(2);
  assertEquals("org.apache.test.B",cfgB.getPid());
  assertNull(cfgB.getFactoryPid());
  assertEquals(3,cfgB.getProperties().size());
  assertEquals("BB",cfgB.getProperties().get("name"));
  assertEquals("bar",cfgB.getProperties().get("foo"));
  assertArrayEquals(new String[]{"one","two","three"},(String[])cfgB.getProperties().get("array"));
  final Configuration cfgC=cfgs.get(3);
  assertEquals("org.apache.test.C",cfgC.getPid());
  assertNull(cfgC.getFactoryPid());
  assertEquals(3,cfgC.getProperties().size());
  assertEquals("C",cfgC.getProperties().get("name"));
  assertEquals("bar",cfgB.getProperties().get("foo"));
  assertArrayEquals(new Integer[]{1,2,3},(Integer[])cfgC.getProperties().get("array"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mergeRawTest() throws Exception {
  final Model baseRaw=U.readCompleteTestModel(new String[]{"merge/config-base.txt"});
  final Model mergeRaw=U.readCompleteTestModel(new String[]{"merge/config-merge.txt"});
  ModelUtility.merge(baseRaw,mergeRaw);
  final List<Configuration> cfgs=U.assertConfigurationsInRunMode(baseRaw.getFeature("configadmin").getRunMode(),4);
  final Configuration cfgBoot=cfgs.get(0);
  assertEquals(1,cfgBoot.getProperties().size());
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.a"));
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.b"));
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.c"));
  final Configuration cfgA=cfgs.get(1);
  assertEquals("org.apache.test.A",cfgA.getPid());
  assertNull(cfgA.getFactoryPid());
  assertEquals(1,cfgA.getProperties().size());
  assertEquals("AA",cfgA.getProperties().get("name"));
  final Configuration cfgB=cfgs.get(2);
  assertEquals("org.apache.test.B",cfgB.getPid());
  assertNull(cfgB.getFactoryPid());
  assertEquals(3,cfgB.getProperties().size());
  assertEquals("BB",cfgB.getProperties().get("name"));
  assertEquals("bar",cfgB.getProperties().get("foo"));
  assertArrayEquals(new String[]{"one","two","three"},(String[])cfgB.getProperties().get("array"));
  final Configuration cfgC=cfgs.get(3);
  assertEquals("org.apache.test.C",cfgC.getPid());
  assertNull(cfgC.getFactoryPid());
  assertEquals(3,cfgC.getProperties().size());
  assertEquals("C",cfgC.getProperties().get("name"));
  assertEquals("bar",cfgB.getProperties().get("foo"));
  assertArrayEquals(new Integer[]{1,2,3},(Integer[])cfgC.getProperties().get("array"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mergeEffectiveTest() throws Exception {
  final Model baseRaw=U.readCompleteTestModel(new String[]{"merge/config-base.txt"});
  final Model mergeRaw=U.readCompleteTestModel(new String[]{"merge/config-merge.txt"});
  final Model baseEffective=ModelUtility.getEffectiveModel(baseRaw);
  final Model mergeEffective=ModelUtility.getEffectiveModel(mergeRaw);
  ModelUtility.merge(baseEffective,mergeEffective);
  final List<Configuration> cfgs=U.assertConfigurationsInRunMode(baseEffective.getFeature("configadmin").getRunMode(),4);
  final Configuration cfgBoot=cfgs.get(0);
  assertEquals(1,cfgBoot.getProperties().size());
  assertTrue(cfgBoot.getProperties().get(":bootstrap").toString().contains("uninstall bundle.c"));
  final Configuration cfgA=cfgs.get(1);
  assertEquals("org.apache.test.A",cfgA.getPid());
  assertNull(cfgA.getFactoryPid());
  assertEquals(1,cfgA.getProperties().size());
  assertEquals("AA",cfgA.getProperties().get("name"));
  final Configuration cfgB=cfgs.get(2);
  assertEquals("org.apache.test.B",cfgB.getPid());
  assertNull(cfgB.getFactoryPid());
  assertEquals(2,cfgB.getProperties().size());
  assertEquals("BB",cfgB.getProperties().get("name"));
  assertEquals("bar",cfgB.getProperties().get("foo"));
  final Configuration cfgC=cfgs.get(3);
  assertEquals("org.apache.test.C",cfgC.getPid());
  assertNull(cfgC.getFactoryPid());
  assertEquals(1,cfgC.getProperties().size());
  assertEquals("bar",cfgB.getProperties().get("foo"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.provisioning.model.io.IOTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultilineConfiguration() throws Exception {
  final Model m=ModelUtility.getEffectiveModel(U.readCompleteTestModel(new String[]{"configadmin.txt"}));
  final List<Configuration> configs=new ArrayList<Configuration>();
  for (  final Configuration c : m.getFeature("configadmin").getRunMode().getConfigurations()) {
    configs.add(c);
  }
  assertEquals(4,configs.size());
  final Configuration cfgA=configs.get(0);
  assertEquals("org.apache.test.A",cfgA.getPid());
  assertNull(cfgA.getFactoryPid());
  assertEquals(1,cfgA.getProperties().size());
  assertEquals("A",cfgA.getProperties().get("name"));
  final Configuration cfgB=configs.get(1);
  assertEquals("org.apache.test.B",cfgB.getPid());
  assertNull(cfgB.getFactoryPid());
  assertEquals(2,cfgB.getProperties().size());
  assertEquals("B",cfgB.getProperties().get("name"));
  assertArrayEquals(new String[]{"one","two","three"},(String[])cfgB.getProperties().get("array"));
  final Configuration cfgC=configs.get(2);
  assertEquals("org.apache.test.C",cfgC.getPid());
  assertNull(cfgC.getFactoryPid());
  assertEquals(2,cfgC.getProperties().size());
  assertEquals("C",cfgC.getProperties().get("name"));
  assertArrayEquals(new Integer[]{1,2,3},(Integer[])cfgC.getProperties().get("array"));
  final Configuration cfgD=configs.get(3);
  assertEquals("org.apache.test.D",cfgD.getPid());
  assertEquals("Here is\na multiline\nstring",cfgD.getProperties().get("textA"));
  assertEquals("Another one\nusing\nescaped newlines",cfgD.getProperties().get("textB"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.query.ListTest </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testListIterator(){
  ListIterator<Resource> iterator=$(tree).children().asList().listIterator();
  Assert.assertEquals("jcr:content",iterator.next().getName());
  Assert.assertEquals("application",iterator.next().getName());
  Assert.assertEquals("home",iterator.next().getName());
  Assert.assertEquals("home",iterator.previous().getName());
  Assert.assertEquals("application",iterator.previous().getName());
  Assert.assertEquals("jcr:content",iterator.previous().getName());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testContains(){
  Resource home=$(tree).children("#home").iterator().next();
  List<Resource> list=$(tree).children().asList();
  Assert.assertEquals(true,list.contains(home));
  Assert.assertEquals(false,list.contains(tree));
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSize(){
  List<Resource> list=$(tree).children().asList();
  Assert.assertEquals(3,list.size());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGet(){
  List<Resource> list=$(tree).children().asList();
  Assert.assertEquals("jcr:content",list.get(0).getName());
  Assert.assertEquals("application",list.get(1).getName());
  Assert.assertEquals("home",list.get(2).getName());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIndexOf(){
  Resource home=$(tree).children("#home").iterator().next();
  List<Resource> list=$(tree).children().asList();
  Assert.assertEquals(2,list.indexOf(home));
  Assert.assertEquals(-1,list.indexOf(tree));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.repoinit.it.RepoInitIT </h4><pre class="type-11 type-2 type-13 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Exception {
  WaitFor.services(teleporter,SlingRepository.class,RepoInitParser.class);
  session=teleporter.getService(SlingRepository.class).loginAdministrative(null);
  try {
    session.getRootNode().addNode("acltest").addNode("A").addNode("B").save();
    ;
  }
 catch (  RepositoryException ignore) {
  }
  assertTrue("Expecting test nodes to be created",session.itemExists("/acltest/A/B"));
  final InputStream is=getClass().getResourceAsStream(REPO_INIT_FILE);
  assertNotNull("Expecting " + REPO_INIT_FILE,is);
  try {
    final RepoInitParser parser=teleporter.getService(RepoInitParser.class);
    final OperationVisitor v=new JcrRepoInitOpVisitor(session);
    for (    Operation op : parser.parse(new InputStreamReader(is,"UTF-8"))) {
      op.accept(v);
    }
    session.save();
  }
  finally {
    is.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.repoinit.parser.test.ParserTest </h4><pre class="type-11 type-3 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void checkResult() throws ParseException, IOException {
  final String expected=IOUtils.toString(tc.expected,DEFAULT_ENCODING).trim();
  try {
    final StringWriter sw=new StringWriter();
    final OperationVisitor v=new OperationToStringVisitor(new PrintWriter(sw));
    final List<Operation> result=new RepoInitParserImpl(tc.input).parse();
    for (    Operation o : result) {
      o.accept(v);
    }
    sw.flush();
    assertEquals(expected,sw.toString().trim());
  }
  finally {
    tc.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resource.collection.impl.ResourceCollectionImplTest </h4><pre class="type-15 type-11 type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOrdering() throws Exception {
  final ResourceCollection collection=rcm.createCollection(resResolver.getResource("/"),"test1");
  String[] resPaths={"/res1","/res2"};
  final Resource resource=resResolver.create(resResolver.getResource("/"),resPaths[0].substring(1),Collections.singletonMap(ResourceResolver.PROPERTY_RESOURCE_TYPE,(Object)"type"));
  collection.add(resource,null);
  final Resource resource2=resResolver.create(resResolver.getResource("/"),resPaths[1].substring(1),Collections.singletonMap(ResourceResolver.PROPERTY_RESOURCE_TYPE,(Object)"type"));
  collection.add(resource2,null);
  Assert.assertEquals(true,collection.contains(resource2));
  Assert.assertNotNull(resResolver.getResource("/test1"));
  Assert.assertEquals(ResourceCollection.RESOURCE_TYPE,resResolver.getResource("/test1").getResourceType());
  Iterator<Resource> resources=collection.getResources();
  int numOfRes=0;
  while (resources.hasNext()) {
    Resource entry=resources.next();
    Assert.assertEquals(resPaths[numOfRes],entry.getPath());
    numOfRes++;
  }
  try {
    collection.orderBefore(resource,resource);
    Assert.fail("should have thrown IllegalArgument");
  }
 catch (  IllegalArgumentException e) {
  }
  collection.orderBefore(resource2,resource);
  resources=collection.getResources();
  numOfRes=2;
  while (resources.hasNext()) {
    numOfRes--;
    Resource entry=resources.next();
    Assert.assertEquals(resPaths[numOfRes],entry.getPath());
  }
  Assert.assertEquals(0,numOfRes);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourcebuilder.impl.ResourceBuilderImplTest </h4><pre class="type-11 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getParent() throws Exception {
  final Resource parent=getBuilder(testRootPath).getCurrentParent();
  assertNotNull(parent);
  assertEquals(testRootPath,parent.getPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourcemerger.impl.MergedResourceProviderTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleCreateAndDelete() throws PersistenceException {
  final String path="/merged/a/new";
  try {
    final Resource rsrc=this.provider.create(ctx,path,Collections.singletonMap("foo",(Object)"bla"));
    assertNotNull(rsrc);
    assertEquals(path,rsrc.getPath());
    final ValueMap vm=ResourceUtil.getValueMap(rsrc);
    assertEquals("bla",vm.get("foo"));
    final Resource realResource=this.resolver.getResource("/apps/a/new");
    assertNotNull(realResource);
    final ValueMap vmReal=ResourceUtil.getValueMap(realResource);
    assertEquals("bla",vmReal.get("foo"));
    assertNull(this.resolver.getResource("/libs/a/new"));
    this.provider.delete(ctx,rsrc);
    assertNull(this.provider.getResource(ctx,path,ResourceContext.EMPTY_CONTEXT,null));
    assertNull(this.resolver.getResource("/libs/a/new"));
    assertNull(this.resolver.getResource("/apps/a/new"));
  }
  finally {
    this.resolver.revert();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourcemerger.impl.MergedResourceTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testResourceTypeMixed() throws Exception {
  final ValueMap vm1=new ValueMapDecorator(Collections.singletonMap(ResourceResolver.PROPERTY_RESOURCE_TYPE,(Object)"vma"));
  final MockResource r1=new MockResource("/a",vm1,null){
    @Override public String getResourceType(){
      return "a";
    }
  }
;
  final ValueMap vm2=new ValueMapDecorator(Collections.singletonMap(ResourceResolver.PROPERTY_RESOURCE_TYPE,(Object)"vmb"));
  final MockResource r2=new MockResource("/b",vm2,null){
    @Override public String getResourceType(){
      return "b";
    }
  }
;
  final ValueMap vm3=new ValueMapDecorator(Collections.singletonMap(ResourceResolver.PROPERTY_RESOURCE_TYPE,(Object)"vmc"));
  final MockResource r3=new MockResource("/c",vm3,null){
    @Override public String getResourceType(){
      return "c";
    }
  }
;
  final List<Resource> resources=new ArrayList<Resource>();
  resources.add(r1);
  resources.add(r2);
  resources.add(r3);
  final List<ValueMap> valueMaps=new ArrayList<ValueMap>();
  valueMaps.add(vm1);
  valueMaps.add(vm2);
  valueMaps.add(vm3);
  final MergedResource mr1=new MergedResource(null,"/a","a",resources,valueMaps);
  assertEquals("c",mr1.getResourceType());
  assertEquals("vmc",mr1.getResourceSuperType());
  final MergedResource mr2=new MergedResource(null,"/a","a",resources,Collections.singletonList(vm2));
  assertEquals("c",mr2.getResourceType());
  assertEquals("vmb",mr2.getResourceSuperType());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourcemerger.impl.OverridingResourceProviderTest </h4><pre class="type-11 type-9 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testOverriddenIncludesChildFromSuper(){
  final Resource rsrcA2=this.provider.getResource(ctx,"/override/apps/a/2",ResourceContext.EMPTY_CONTEXT,null);
  Resource d=getChildResource(rsrcA2,"d");
  assertNotNull(d);
  Resource d1=getChildResource(d,"1");
  assertNotNull(d1);
  Resource d1a=getChildResource(d1,"a");
  assertNotNull(d1a);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testLoopInInheritance(){
  final Resource rsrcA4=this.provider.getResource(ctx,"/override/apps/a/4",ResourceContext.EMPTY_CONTEXT,null);
  Resource d=getChildResource(rsrcA4,"d");
  assertNotNull(d);
  final Resource z=this.provider.getResource(ctx,"/override/apps/x/z",ResourceContext.EMPTY_CONTEXT,null);
  assertNotNull(z);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.MockedResourceResolverImplTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test getResource where path contains intermediate . verifying fix for SLING-864
 * @throws LoginException
 */
@Test public void testGetResourceSLING864() throws LoginException {
  ResourceResolver resourceResolver=resourceResolverFactory.getResourceResolver(null);
  Assert.assertNotNull(resourceResolver);
  Resource singleResource=buildResource("/single/test.with/extra.dots/inthepath",EMPTY_RESOURCE_LIST,resourceResolver,resourceProvider);
  Resource resource=resourceResolver.getResource("/single/test.with/extra.dots/inthepath");
  Assert.assertEquals(singleResource,resource);
}

</code></pre>

<br>
<pre class="type-11 type-2 type-13 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Before public void before() throws LoginException {
  activator=new ResourceResolverFactoryActivator();
  Mockito.when(componentContext.getProperties()).thenReturn(buildBundleProperties());
  Mockito.when(componentContext.getBundleContext()).thenReturn(bundleContext);
  activator.resourceAccessSecurityTracker=new ResourceAccessSecurityTracker();
  activator.resourceProviderTracker=resourceProviderTracker;
  activator.changeListenerWhiteboard=resourceChangeListenerWhiteboard;
  handlers.add(createRPHandler(resourceProvider,"org.apache.sling.resourceresolver.impl.DummyTestProvider",10L,"/single"));
  buildMappingResource("/etc/map",mappingResourceProvider,null);
  handlers.add(createRPHandler(mappingResourceProvider,"org.apache.sling.resourceresolver.impl.MapProvider",11L,"/etc"));
  handlers.add(createRPHandler(appsResourceProvider,"org.apache.sling.resourceresolver.impl.AppsProvider",12L,"/libs"));
  handlers.add(createRPHandler(appsResourceProvider,"org.apache.sling.resourceresolver.impl.AppsProvider",13L,"/apps"));
  handlers.add(createRPHandler(queriableResourceProviderA,"org.apache.sling.resourceresolver.impl.QueriableResourceProviderA",14L,"/searchA"));
  Mockito.when(queriableResourceProviderA.getQueryLanguageProvider()).thenReturn(queryProvider);
  ResourceProviderStorage storage=new ResourceProviderStorage(handlers);
  Mockito.when(resourceProviderTracker.getResourceProviderStorage()).thenReturn(storage);
  activator.activate(componentContext);
  Mockito.when(usingBundle.getBundleContext()).thenReturn(usingBundleContext);
  Mockito.when(usingBundleContext.getBundle()).thenReturn(usingBundle);
  ArgumentCaptor<String> classesCaptor=ArgumentCaptor.forClass(String.class);
  ArgumentCaptor serviceCaptor=ArgumentCaptor.forClass(Object.class);
  @SuppressWarnings("rawtypes") ArgumentCaptor<Dictionary> propertiesCaptor=ArgumentCaptor.forClass(Dictionary.class);
  Mockito.verify(bundleContext,Mockito.atLeastOnce()).registerService(classesCaptor.capture(),serviceCaptor.capture(),propertiesCaptor.capture());
  int si=0;
  List serviceList=serviceCaptor.getAllValues();
  @SuppressWarnings({"unused","rawtypes"}) List<Dictionary> servicePropertiesList=propertiesCaptor.getAllValues();
  for (  String serviceName : classesCaptor.getAllValues()) {
    services.put(serviceName,serviceList.get(si));
    serviceProperties.put(serviceName,serviceProperties.get(si));
    si++;
  }
  Assert.assertNotNull(services.get(ResourceResolverFactory.class.getName()));
  Object rrf=services.get(ResourceResolverFactory.class.getName());
  if (rrf instanceof ServiceFactory) {
    rrf=((ServiceFactory)rrf).getService(usingBundle,null);
  }
  Assert.assertTrue(rrf instanceof ResourceResolverFactoryImpl);
  resourceResolverFactory=(ResourceResolverFactoryImpl)rrf;
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test search paths
 * @throws LoginException
 */
@Test public void testRelativeResource() throws LoginException {
  ResourceResolver resourceResolver=resourceResolverFactory.getResourceResolver(null);
  Assert.assertNotNull(resourceResolver);
  Resource appResource=buildResource("/apps/store/inventory",EMPTY_RESOURCE_LIST,resourceResolver,appsResourceProvider);
  Resource libResource=buildResource("/libs/store/catalog",EMPTY_RESOURCE_LIST,resourceResolver,appsResourceProvider);
  Resource testResource=resourceResolver.getResource("store/inventory");
  Assert.assertEquals(appResource,testResource);
  testResource=resourceResolver.getResource("store/catalog");
  Assert.assertEquals(libResource,testResource);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test getResource for a resource provided by a resource provider.
 * @throws LoginException
 */
@Test public void testGetResource() throws LoginException {
  ResourceResolver resourceResolver=resourceResolverFactory.getResourceResolver(null);
  Assert.assertNotNull(resourceResolver);
  Resource singleResource=buildResource("/single/test",EMPTY_RESOURCE_LIST,resourceResolver,resourceProvider);
  Resource resource=resourceResolver.getResource("/single/test");
  Assert.assertEquals(singleResource,resource);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.ProviderHandlerTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testServletRegistrationAndSyntheticResources() throws LoginException {
  final String servletpath="/libs/a/b/GET.servlet";
  final Resource servletResource=Mockito.mock(Resource.class);
  Mockito.when(servletResource.getResourceMetadata()).then(new Answer<ResourceMetadata>(){
    @Override public ResourceMetadata answer(    InvocationOnMock invocation) throws Throwable {
      return new ResourceMetadata();
    }
  }
);
  final ResourceProvider<?> leaveProvider=Mockito.mock(ResourceProvider.class);
  Mockito.when(leaveProvider.getResource(Mockito.any(ResolverContext.class),Mockito.eq(servletpath),Mockito.any(ResourceContext.class),Mockito.any(Resource.class))).thenReturn(servletResource);
  ResourceProviderHandler h=createRPHandler(leaveProvider,"my-pid",0,servletpath);
  ResourceResolver resolver=new ResourceResolverImpl(new CommonResourceResolverFactoryImpl(new ResourceResolverFactoryActivator()),false,null,new ResourceProviderStorage(Arrays.asList(h)));
  final Resource parent=resolver.getResource(ResourceUtil.getParent(servletpath));
  assertNotNull("Parent must be available",parent);
  assertTrue("Resource should be synthetic",ResourceUtil.isSyntheticResource(parent));
  final Resource servlet=resolver.getResource(servletpath);
  assertNotNull("Servlet resource must not be null",servlet);
  assertEquals(servletResource,servlet);
  assertNotNull(resolver.getResource("/libs"));
  assertTrue(resolver.resolve("/libs") instanceof NonExistingResource);
  assertTrue(resolver.resolve(ResourceUtil.getParent(servletpath)) instanceof NonExistingResource);
  assertNotNull(resolver.resolve(servletpath));
  resolver.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.ResourceDecorationTest </h4><pre class="type-11 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void childrenAreDecorated(){
  final Resource root=resolver.resolve((String)null);
  final Iterator<Resource> it=resolver.listChildren(root);
  assertTrue("Expecting root to have children",it.hasNext());
  assertDecorated(it,2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.ResourceProviderEntryTest </h4><pre class="type-11 type-12 type-6 type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveTheOnlyProvider() throws LoginException {
  long counter=1;
  providers.clear();
  for (  String path : new String[]{"/foo","/","/foo/bar"}) {
    final ResourceResolver resolver=Mockito.mock(ResourceResolver.class);
    final ResourceProvider<?> p=Mockito.mock(ResourceProvider.class);
    Mockito.when(p.getResource(Mockito.any(ResolverContext.class),Mockito.startsWith(path),Mockito.any(ResourceContext.class),Mockito.any(Resource.class))).thenReturn(new TestResource(resolver));
    ++counter;
    ResourceProviderHandler h=createRPHandler(p,"rp" + counter,counter,path);
    providers.add(h);
    this.providersBasedResolver=null;
{
      final Resource r=getResource(path);
      assertEqualsResolver(resolver,r);
      assertFalse(r instanceof SyntheticResource);
    }
    providers.remove(h);
    this.providersBasedResolver=null;
{
      final Resource r=getResource(path);
      if (r == null) {
      }
 else       if (!p.equals(r.getResourceResolver())) {
      }
 else {
        fail("Expecting inactive provider after removing it for " + path);
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.mapping.MapEntriesTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doRemoveAlias4() throws Exception {
  Method method=MapEntries.class.getDeclaredMethod("doAddAlias",String.class);
  method.setAccessible(true);
  Method method1=MapEntries.class.getDeclaredMethod("doRemoveAttributes",String.class,String[].class,boolean.class,boolean.class);
  method1.setAccessible(true);
  Field field0=MapEntries.class.getDeclaredField("aliasMap");
  field0.setAccessible(true);
  Map<String,Map<String,String>> aliasMap=(Map<String,Map<String,String>>)field0.get(mapEntries);
  assertEquals(0,aliasMap.size());
  Resource parent=mock(Resource.class);
  when(parent.getPath()).thenReturn("/");
  final Resource result=mock(Resource.class);
  when(resourceResolver.getResource("/parent")).thenReturn(result);
  when(result.getParent()).thenReturn(parent);
  when(result.getPath()).thenReturn("/parent");
  when(result.getName()).thenReturn("parent");
  when(result.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","alias"));
  method.invoke(mapEntries,"/parent");
  Map<String,String> aliasMapEntry=mapEntries.getAliasMap("/");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("alias"));
  assertEquals("parent",aliasMapEntry.get("alias"));
  assertEquals(1,aliasMap.size());
  method1.invoke(mapEntries,"/parent",new String[]{"sling:alias"},false,false);
  aliasMapEntry=mapEntries.getAliasMap("/");
  assertNull(aliasMapEntry);
  assertEquals(0,aliasMap.size());
  method.invoke(mapEntries,"/parent");
  aliasMapEntry=mapEntries.getAliasMap("/");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("alias"));
  assertEquals("parent",aliasMapEntry.get("alias"));
  assertEquals(1,aliasMap.size());
  when(resourceResolver.getResource("/parent")).thenReturn(null);
  method1.invoke(mapEntries,"/parent",new String[]{"sling:alias"},true,false);
  aliasMapEntry=mapEntries.getAliasMap("/");
  assertNull(aliasMapEntry);
  assertEquals(0,aliasMap.size());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doAddVanity_1() throws Exception {
  Field field1=MapEntries.class.getDeclaredField("maxCachedVanityPathEntries");
  field1.setAccessible(true);
  field1.set(mapEntries,10);
  List<MapEntry> entries=mapEntries.getResolveMaps();
  assertEquals(0,entries.size());
  Field field=MapEntries.class.getDeclaredField("vanityTargets");
  field.setAccessible(true);
  Map<String,List<String>> vanityTargets=(Map<String,List<String>>)field.get(mapEntries);
  assertEquals(0,vanityTargets.size());
  Method method=MapEntries.class.getDeclaredMethod("doAddVanity",String.class);
  method.setAccessible(true);
  Resource justVanityPath=mock(Resource.class,"justVanityPath");
  when(resourceResolver.getResource("/justVanityPath")).thenReturn(justVanityPath);
  when(justVanityPath.getPath()).thenReturn("/justVanityPath");
  when(justVanityPath.getName()).thenReturn("justVanityPath");
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  method.invoke(mapEntries,"/justVanityPath");
  entries=mapEntries.getResolveMaps();
  assertEquals(2,entries.size());
  Field vanityCounter=MapEntries.class.getDeclaredField("vanityCounter");
  vanityCounter.setAccessible(true);
  AtomicLong counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(2,counter.longValue());
  Resource badVanityPath=mock(Resource.class,"badVanityPath");
  when(resourceResolver.getResource("/badVanityPath")).thenReturn(badVanityPath);
  when(badVanityPath.getPath()).thenReturn("/badVanityPath");
  when(badVanityPath.getName()).thenReturn("badVanityPath");
  when(badVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/content/mypage/en-us-{132"));
  method.invoke(mapEntries,"/badVanityPath");
  assertEquals(2,entries.size());
  vanityTargets=(Map<String,List<String>>)field.get(mapEntries);
  assertEquals(1,vanityTargets.size());
  Resource vanityPathOnJcrContentParent=mock(Resource.class,"vanityPathOnJcrContentParent");
  when(vanityPathOnJcrContentParent.getPath()).thenReturn("/vanityPathOnJcrContent");
  when(vanityPathOnJcrContentParent.getName()).thenReturn("vanityPathOnJcrContent");
  Resource vanityPathOnJcrContent=mock(Resource.class,"vanityPathOnJcrContent");
  when(resourceResolver.getResource("/vanityPathOnJcrContent/jcr:content")).thenReturn(vanityPathOnJcrContent);
  when(vanityPathOnJcrContent.getPath()).thenReturn("/vanityPathOnJcrContent/jcr:content");
  when(vanityPathOnJcrContent.getName()).thenReturn("jcr:content");
  when(vanityPathOnJcrContent.getParent()).thenReturn(vanityPathOnJcrContentParent);
  when(vanityPathOnJcrContent.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/vanityPathOnJcrContent"));
  method.invoke(mapEntries,"/vanityPathOnJcrContent/jcr:content");
  entries=mapEntries.getResolveMaps();
  assertEquals(4,entries.size());
  counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(4,counter.longValue());
  vanityTargets=(Map<String,List<String>>)field.get(mapEntries);
  assertEquals(2,vanityTargets.size());
  assertNull(vanityTargets.get("/vanityPathOnJcrContent/jcr:content"));
  assertNotNull(vanityTargets.get("/vanityPathOnJcrContent"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doRemoveAlias5() throws Exception {
  Method method=MapEntries.class.getDeclaredMethod("doAddAlias",String.class);
  method.setAccessible(true);
  Method method1=MapEntries.class.getDeclaredMethod("doRemoveAttributes",String.class,String[].class,boolean.class,boolean.class);
  method1.setAccessible(true);
  Field field0=MapEntries.class.getDeclaredField("aliasMap");
  field0.setAccessible(true);
  Map<String,Map<String,String>> aliasMap=(Map<String,Map<String,String>>)field0.get(mapEntries);
  assertEquals(0,aliasMap.size());
  Resource parent=mock(Resource.class);
  when(parent.getPath()).thenReturn("/");
  final Resource result=mock(Resource.class);
  when(resourceResolver.getResource("/parent")).thenReturn(result);
  when(result.getParent()).thenReturn(parent);
  when(result.getPath()).thenReturn("/parent");
  when(result.getName()).thenReturn("parent");
  when(result.adaptTo(ValueMap.class)).thenReturn(buildValueMap());
  final Resource jcrContentResult=mock(Resource.class);
  when(resourceResolver.getResource("/parent/jcr:content")).thenReturn(jcrContentResult);
  when(jcrContentResult.getParent()).thenReturn(result);
  when(jcrContentResult.getPath()).thenReturn("/parent/jcr:content");
  when(jcrContentResult.getName()).thenReturn("jcr:content");
  when(jcrContentResult.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","aliasJcrContent"));
  when(result.getChild("jcr:content")).thenReturn(jcrContentResult);
  method.invoke(mapEntries,"/parent/jcr:content");
  Map<String,String> aliasMapEntry=mapEntries.getAliasMap("/");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("aliasJcrContent"));
  assertEquals("parent",aliasMapEntry.get("aliasJcrContent"));
  assertEquals(1,aliasMap.size());
  method1.invoke(mapEntries,"/parent/jcr:content",new String[]{"sling:alias"},false,false);
  aliasMapEntry=mapEntries.getAliasMap("/");
  assertNull(aliasMapEntry);
  assertEquals(0,aliasMap.size());
  method.invoke(mapEntries,"/parent/jcr:content");
  aliasMapEntry=mapEntries.getAliasMap("/");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("aliasJcrContent"));
  assertEquals("parent",aliasMapEntry.get("aliasJcrContent"));
  assertEquals(1,aliasMap.size());
  when(resourceResolver.getResource("/parent/jcr:content")).thenReturn(null);
  when(result.getChild("jcr:content")).thenReturn(null);
  method1.invoke(mapEntries,"/parent/jcr:content",new String[]{"sling:alias"},true,false);
  aliasMapEntry=mapEntries.getAliasMap("/");
  assertNull(aliasMapEntry);
  assertEquals(0,aliasMap.size());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doUpdateAlias() throws Exception {
  Method method=MapEntries.class.getDeclaredMethod("doAddAlias",String.class);
  method.setAccessible(true);
  Method method1=MapEntries.class.getDeclaredMethod("doUpdateAttributes",String.class,String[].class,boolean.class);
  method1.setAccessible(true);
  Field field0=MapEntries.class.getDeclaredField("aliasMap");
  field0.setAccessible(true);
  Map<String,Map<String,String>> aliasMap=(Map<String,Map<String,String>>)field0.get(mapEntries);
  assertEquals(0,aliasMap.size());
  Resource parent=mock(Resource.class);
  when(parent.getPath()).thenReturn("/parent");
  final Resource result=mock(Resource.class);
  when(resourceResolver.getResource("/parent/child")).thenReturn(result);
  when(result.getParent()).thenReturn(parent);
  when(result.getPath()).thenReturn("/parent/child");
  when(result.getName()).thenReturn("child");
  when(result.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","alias"));
  method.invoke(mapEntries,"/parent/child");
  Map<String,String> aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("alias"));
  assertFalse(aliasMapEntry.containsKey("aliasUpdated"));
  assertEquals("child",aliasMapEntry.get("alias"));
  assertEquals(1,aliasMap.size());
  when(result.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","aliasUpdated"));
  method1.invoke(mapEntries,"/parent/child",new String[]{"sling:alias"},false);
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertFalse(aliasMapEntry.containsKey("alias"));
  assertTrue(aliasMapEntry.containsKey("aliasUpdated"));
  assertEquals("child",aliasMapEntry.get("aliasUpdated"));
  assertEquals(1,aliasMap.size());
  final Resource jcrContentResult=mock(Resource.class);
  when(resourceResolver.getResource("/parent/child/jcr:content")).thenReturn(jcrContentResult);
  when(jcrContentResult.getParent()).thenReturn(result);
  when(jcrContentResult.getPath()).thenReturn("/parent/child/jcr:content");
  when(jcrContentResult.getName()).thenReturn("jcr:content");
  when(jcrContentResult.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","aliasJcrContent"));
  when(result.getChild("jcr:content")).thenReturn(jcrContentResult);
  method.invoke(mapEntries,"/parent/child/jcr:content");
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertEquals(2,aliasMapEntry.size());
  assertTrue(aliasMapEntry.containsKey("aliasJcrContent"));
  assertFalse(aliasMapEntry.containsKey("aliasJcrContentUpdated"));
  assertEquals("child",aliasMapEntry.get("aliasJcrContent"));
  assertEquals(1,aliasMap.size());
  when(jcrContentResult.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","aliasJcrContentUpdated"));
  method1.invoke(mapEntries,"/parent/child/jcr:content",new String[]{"sling:alias"},false);
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertEquals(2,aliasMapEntry.size());
  assertFalse(aliasMapEntry.containsKey("aliasJcrContent"));
  assertTrue(aliasMapEntry.containsKey("aliasJcrContentUpdated"));
  assertEquals("child",aliasMapEntry.get("aliasJcrContentUpdated"));
  assertEquals(1,aliasMap.size());
  method1.invoke(mapEntries,"/parent/child",new String[]{"sling:alias"},false);
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertEquals(2,aliasMapEntry.size());
  assertFalse(aliasMapEntry.containsKey("alias"));
  assertTrue(aliasMapEntry.containsKey("aliasUpdated"));
  assertEquals("child",aliasMapEntry.get("aliasUpdated"));
  final Resource secondResult=mock(Resource.class);
  when(resourceResolver.getResource("/parent/child2")).thenReturn(secondResult);
  when(secondResult.getParent()).thenReturn(parent);
  when(secondResult.getPath()).thenReturn("/parent/child2");
  when(secondResult.getName()).thenReturn("child2");
  when(secondResult.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","alias2"));
  method.invoke(mapEntries,"/parent/child2");
  assertEquals(1,aliasMap.size());
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertEquals(3,aliasMapEntry.size());
  when(jcrContentResult.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","aliasJcrContentUpdated"));
  method1.invoke(mapEntries,"/parent/child/jcr:content",new String[]{"sling:alias"},false);
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertEquals(3,aliasMapEntry.size());
  assertFalse(aliasMapEntry.containsKey("aliasJcrContent"));
  assertTrue(aliasMapEntry.containsKey("aliasJcrContentUpdated"));
  assertEquals("child",aliasMapEntry.get("aliasJcrContentUpdated"));
  assertEquals(1,aliasMap.size());
  when(result.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias",null));
  when(jcrContentResult.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","aliasJcrContentUpdated"));
  method1.invoke(mapEntries,"/parent/child/jcr:content",new String[]{"sling:alias"},false);
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertEquals(2,aliasMapEntry.size());
  assertFalse(aliasMapEntry.containsKey("aliasJcrContent"));
  assertTrue(aliasMapEntry.containsKey("aliasJcrContentUpdated"));
  assertEquals("child",aliasMapEntry.get("aliasJcrContentUpdated"));
  assertEquals(1,aliasMap.size());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_loadVanityPaths_1() throws Exception {
  final Resource justVanityPath=mock(Resource.class,"justVanityPath");
  when(resourceResolver.getResource("/justVanityPath")).thenReturn(justVanityPath);
  when(justVanityPath.getPath()).thenReturn("/justVanityPath");
  when(justVanityPath.getName()).thenReturn("justVanityPath");
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  when(resourceResolver.findResources(anyString(),eq("sql"))).thenAnswer(new Answer<Iterator<Resource>>(){
    public Iterator<Resource> answer(    InvocationOnMock invocation) throws Throwable {
      if (invocation.getArguments()[0].toString().contains("sling:vanityPath")) {
        return Collections.singleton(justVanityPath).iterator();
      }
 else {
        return Collections.<Resource>emptySet().iterator();
      }
    }
  }
);
  Method method=MapEntries.class.getDeclaredMethod("loadVanityPaths",boolean.class);
  method.setAccessible(true);
  method.invoke(mapEntries,false);
  Field vanityCounter=MapEntries.class.getDeclaredField("vanityCounter");
  vanityCounter.setAccessible(true);
  AtomicLong counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(2,counter.longValue());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_getMapEntryRedirect() throws Exception {
  Method method=MapEntries.class.getDeclaredMethod("getMapEntryRedirect",MapEntry.class);
  method.setAccessible(true);
  MapEntry mapEntry=new MapEntry("/content",-1,false,0,"/content");
  String actualContent=(String)method.invoke(mapEntries,mapEntry);
  assertEquals("/content",actualContent);
  mapEntry=new MapEntry("/content",-1,false,0,"/content$1");
  actualContent=(String)method.invoke(mapEntries,mapEntry);
  assertEquals("/content",actualContent);
  mapEntry=new MapEntry("/content",-1,false,0,"/content.html");
  actualContent=(String)method.invoke(mapEntries,mapEntry);
  assertEquals("/content",actualContent);
}

</code></pre>

<br>
<pre class="type-11 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doUpdateVanity() throws Exception {
  Field field0=MapEntries.class.getDeclaredField("resolveMapsMap");
  field0.setAccessible(true);
  Map<String,List<MapEntry>> resolveMapsMap=(Map<String,List<MapEntry>>)field0.get(mapEntries);
  assertEquals(1,resolveMapsMap.size());
  Field field=MapEntries.class.getDeclaredField("vanityTargets");
  field.setAccessible(true);
  Map<String,List<String>> vanityTargets=(Map<String,List<String>>)field.get(mapEntries);
  assertEquals(0,vanityTargets.size());
  Method method=MapEntries.class.getDeclaredMethod("doAddVanity",String.class);
  method.setAccessible(true);
  Method method1=MapEntries.class.getDeclaredMethod("doUpdateVanity",String.class);
  method1.setAccessible(true);
  Resource justVanityPath=mock(Resource.class,"justVanityPath");
  when(resourceResolver.getResource("/justVanityPath")).thenReturn(justVanityPath);
  when(justVanityPath.getPath()).thenReturn("/justVanityPath");
  when(justVanityPath.getName()).thenReturn("justVanityPath");
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  method.invoke(mapEntries,"/justVanityPath");
  assertEquals(2,resolveMapsMap.size());
  assertEquals(1,vanityTargets.size());
  assertNotNull(resolveMapsMap.get("/target/justVanityPath"));
  assertNull(resolveMapsMap.get("/target/justVanityPathUpdated"));
  assertEquals(1,vanityTargets.get("/justVanityPath").size());
  assertEquals("/target/justVanityPath",vanityTargets.get("/justVanityPath").get(0));
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPathUpdated"));
  method1.invoke(mapEntries,"/justVanityPath");
  assertEquals(2,resolveMapsMap.size());
  assertEquals(1,vanityTargets.size());
  assertNull(resolveMapsMap.get("/target/justVanityPath"));
  assertNotNull(resolveMapsMap.get("/target/justVanityPathUpdated"));
  assertEquals(1,vanityTargets.get("/justVanityPath").size());
  assertEquals("/target/justVanityPathUpdated",vanityTargets.get("/justVanityPath").get(0));
  Resource vanityPathOnJcrContentParent=mock(Resource.class,"vanityPathOnJcrContentParent");
  when(vanityPathOnJcrContentParent.getPath()).thenReturn("/vanityPathOnJcrContent");
  when(vanityPathOnJcrContentParent.getName()).thenReturn("vanityPathOnJcrContent");
  Resource vanityPathOnJcrContent=mock(Resource.class,"vanityPathOnJcrContent");
  when(resourceResolver.getResource("/vanityPathOnJcrContent/jcr:content")).thenReturn(vanityPathOnJcrContent);
  when(vanityPathOnJcrContent.getPath()).thenReturn("/vanityPathOnJcrContent/jcr:content");
  when(vanityPathOnJcrContent.getName()).thenReturn("jcr:content");
  when(vanityPathOnJcrContent.getParent()).thenReturn(vanityPathOnJcrContentParent);
  when(vanityPathOnJcrContent.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/vanityPathOnJcrContent"));
  method.invoke(mapEntries,"/vanityPathOnJcrContent/jcr:content");
  assertEquals(3,resolveMapsMap.size());
  assertEquals(2,vanityTargets.size());
  assertNotNull(resolveMapsMap.get("/target/vanityPathOnJcrContent"));
  assertNull(resolveMapsMap.get("/target/vanityPathOnJcrContentUpdated"));
  assertEquals(1,vanityTargets.get("/vanityPathOnJcrContent").size());
  assertEquals("/target/vanityPathOnJcrContent",vanityTargets.get("/vanityPathOnJcrContent").get(0));
  when(vanityPathOnJcrContent.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/vanityPathOnJcrContentUpdated"));
  method1.invoke(mapEntries,"/vanityPathOnJcrContent/jcr:content");
  assertEquals(3,resolveMapsMap.size());
  assertEquals(2,vanityTargets.size());
  assertNull(resolveMapsMap.get("/target/vanityPathOnJcrContent"));
  assertNotNull(resolveMapsMap.get("/target/vanityPathOnJcrContentUpdated"));
  assertEquals(1,vanityTargets.get("/vanityPathOnJcrContent").size());
  assertEquals("/target/vanityPathOnJcrContentUpdated",vanityTargets.get("/vanityPathOnJcrContent").get(0));
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_getVanityPaths_5() throws Exception {
  final Resource justVanityPath=mock(Resource.class,"justVanityPath");
  when(resourceResolver.getResource("/justVanityPath")).thenReturn(justVanityPath);
  when(justVanityPath.getPath()).thenReturn("/justVanityPath");
  when(justVanityPath.getName()).thenReturn("justVanityPath");
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  when(resourceResolver.findResources(anyString(),eq("sql"))).thenAnswer(new Answer<Iterator<Resource>>(){
    public Iterator<Resource> answer(    InvocationOnMock invocation) throws Throwable {
      if (invocation.getArguments()[0].toString().contains("sling:vanityPath")) {
        return Collections.singleton(justVanityPath).iterator();
      }
 else {
        return Collections.<Resource>emptySet().iterator();
      }
    }
  }
);
  Field field1=MapEntries.class.getDeclaredField("maxCachedVanityPathEntries");
  field1.setAccessible(true);
  field1.set(mapEntries,2);
  Field field2=MapEntries.class.getDeclaredField("maxCachedVanityPathEntriesStartup");
  field2.setAccessible(true);
  field2.set(mapEntries,false);
  Method method=MapEntries.class.getDeclaredMethod("getVanityPaths",String.class);
  method.setAccessible(true);
  method.invoke(mapEntries,"/target/justVanityPath");
  Field vanityCounter=MapEntries.class.getDeclaredField("vanityCounter");
  vanityCounter.setAccessible(true);
  AtomicLong counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(2,counter.longValue());
  final Resource justVanityPath2=mock(Resource.class,"justVanityPath2");
  when(resourceResolver.getResource("/justVanityPath2")).thenReturn(justVanityPath2);
  when(justVanityPath2.getPath()).thenReturn("/justVanityPath2");
  when(justVanityPath2.getName()).thenReturn("justVanityPath2");
  when(justVanityPath2.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath","sling:vanityOrder",100));
  when(resourceResolver.findResources(anyString(),eq("sql"))).thenAnswer(new Answer<Iterator<Resource>>(){
    public Iterator<Resource> answer(    InvocationOnMock invocation) throws Throwable {
      if (invocation.getArguments()[0].toString().contains("sling:vanityPath")) {
        return Collections.singleton(justVanityPath).iterator();
      }
 else {
        return Collections.<Resource>emptySet().iterator();
      }
    }
  }
);
  method.invoke(mapEntries,"/target/justVanityPath");
  counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(2,counter.longValue());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_getMapEntryList() throws Exception {
  List<MapEntry> entries=mapEntries.getResolveMaps();
  assertEquals(0,entries.size());
  final Resource justVanityPath=mock(Resource.class,"justVanityPath");
  when(resourceResolver.getResource("/justVanityPath")).thenReturn(justVanityPath);
  when(justVanityPath.getPath()).thenReturn("/justVanityPath");
  when(justVanityPath.getName()).thenReturn("justVanityPath");
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  when(resourceResolver.findResources(anyString(),eq("sql"))).thenAnswer(new Answer<Iterator<Resource>>(){
    public Iterator<Resource> answer(    InvocationOnMock invocation) throws Throwable {
      if (invocation.getArguments()[0].toString().contains("sling:vanityPath")) {
        return Collections.singleton(justVanityPath).iterator();
      }
 else {
        return Collections.<Resource>emptySet().iterator();
      }
    }
  }
);
  Method method=MapEntries.class.getDeclaredMethod("getMapEntryList",String.class);
  method.setAccessible(true);
  method.invoke(mapEntries,"/target/justVanityPath");
  entries=mapEntries.getResolveMaps();
  assertEquals(2,entries.size());
  Field vanityCounter=MapEntries.class.getDeclaredField("vanityCounter");
  vanityCounter.setAccessible(true);
  AtomicLong counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(2,counter.longValue());
  method.invoke(mapEntries,"/target/justVanityPath");
  entries=mapEntries.getResolveMaps();
  assertEquals(2,entries.size());
  counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(2,counter.longValue());
}

</code></pre>

<br>
<pre class="type-11 type-12 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_vanity_path_registration() throws Exception {
  int DEFAULT_VANITY_STATUS=333333;
  when(resourceResolverFactory.getDefaultVanityPathRedirectStatus()).thenReturn(DEFAULT_VANITY_STATUS);
  final List<Resource> resources=new ArrayList<Resource>();
  Resource justVanityPath=mock(Resource.class,"justVanityPath");
  when(justVanityPath.getPath()).thenReturn("/justVanityPath");
  when(justVanityPath.getName()).thenReturn("justVanityPath");
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  resources.add(justVanityPath);
  Resource badVanityPath=mock(Resource.class,"badVanityPath");
  when(badVanityPath.getPath()).thenReturn("/badVanityPath");
  when(badVanityPath.getName()).thenReturn("badVanityPath");
  when(badVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/content/mypage/en-us-{132"));
  resources.add(badVanityPath);
  Resource redirectingVanityPath=mock(Resource.class,"redirectingVanityPath");
  when(redirectingVanityPath.getPath()).thenReturn("/redirectingVanityPath");
  when(redirectingVanityPath.getName()).thenReturn("redirectingVanityPath");
  when(redirectingVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/redirectingVanityPath","sling:redirect",true));
  resources.add(redirectingVanityPath);
  Resource redirectingVanityPath301=mock(Resource.class,"redirectingVanityPath301");
  when(redirectingVanityPath301.getPath()).thenReturn("/redirectingVanityPath301");
  when(redirectingVanityPath301.getName()).thenReturn("redirectingVanityPath301");
  when(redirectingVanityPath301.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/redirectingVanityPath301","sling:redirect",true,"sling:redirectStatus",301));
  resources.add(redirectingVanityPath301);
  Resource vanityPathOnJcrContentParent=mock(Resource.class,"vanityPathOnJcrContentParent");
  when(vanityPathOnJcrContentParent.getPath()).thenReturn("/vanityPathOnJcrContent");
  when(vanityPathOnJcrContentParent.getName()).thenReturn("vanityPathOnJcrContent");
  Resource vanityPathOnJcrContent=mock(Resource.class,"vanityPathOnJcrContent");
  when(vanityPathOnJcrContent.getPath()).thenReturn("/vanityPathOnJcrContent/jcr:content");
  when(vanityPathOnJcrContent.getName()).thenReturn("jcr:content");
  when(vanityPathOnJcrContent.getParent()).thenReturn(vanityPathOnJcrContentParent);
  when(vanityPathOnJcrContent.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/vanityPathOnJcrContent"));
  resources.add(vanityPathOnJcrContent);
  when(resourceResolver.findResources(anyString(),eq("sql"))).thenAnswer(new Answer<Iterator<Resource>>(){
    public Iterator<Resource> answer(    InvocationOnMock invocation) throws Throwable {
      if (invocation.getArguments()[0].toString().contains("sling:vanityPath")) {
        return resources.iterator();
      }
 else {
        return Collections.<Resource>emptySet().iterator();
      }
    }
  }
);
  mapEntries.doInit();
  mapEntries.initializeVanityPaths();
  List<MapEntry> entries=mapEntries.getResolveMaps();
  assertEquals(8,entries.size());
  for (  MapEntry entry : entries) {
    if (entry.getPattern().contains("/target/redirectingVanityPath301")) {
      assertEquals(301,entry.getStatus());
      assertFalse(entry.isInternal());
    }
 else     if (entry.getPattern().contains("/target/redirectingVanityPath")) {
      assertEquals(DEFAULT_VANITY_STATUS,entry.getStatus());
      assertFalse(entry.isInternal());
    }
 else     if (entry.getPattern().contains("/target/justVanityPath")) {
      assertTrue(entry.isInternal());
    }
 else     if (entry.getPattern().contains("/target/vanityPathOnJcrContent")) {
      for (      String redirect : entry.getRedirect()) {
        assertFalse(redirect.contains("jcr:content"));
      }
    }
  }
  Field field=MapEntries.class.getDeclaredField("vanityTargets");
  field.setAccessible(true);
  @SuppressWarnings("unchecked") Map<String,List<String>> vanityTargets=(Map<String,List<String>>)field.get(mapEntries);
  assertEquals(4,vanityTargets.size());
}

</code></pre>

<br>
<pre class="type-11 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void test_doNodeAdded1() throws Exception {
  Method method=MapEntries.class.getDeclaredMethod("doNodeAdded",String.class,boolean.class);
  method.setAccessible(true);
  Boolean resfreshed=(Boolean)method.invoke(mapEntries,"/node",true);
  assertTrue(resfreshed.booleanValue());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_getVanityPaths_4() throws Exception {
  final Resource badVanityPath=mock(Resource.class,"badVanityPath");
  when(badVanityPath.getPath()).thenReturn("/badVanityPath");
  when(badVanityPath.getName()).thenReturn("badVanityPath");
  when(badVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/content/mypage/en-us-{132"));
  when(resourceResolver.findResources(anyString(),eq("sql"))).thenAnswer(new Answer<Iterator<Resource>>(){
    public Iterator<Resource> answer(    InvocationOnMock invocation) throws Throwable {
      if (invocation.getArguments()[0].toString().contains("sling:vanityPath")) {
        return Collections.singleton(badVanityPath).iterator();
      }
 else {
        return Collections.<Resource>emptySet().iterator();
      }
    }
  }
);
  Field field1=MapEntries.class.getDeclaredField("maxCachedVanityPathEntries");
  field1.setAccessible(true);
  field1.set(mapEntries,0);
  Field field2=MapEntries.class.getDeclaredField("maxCachedVanityPathEntriesStartup");
  field2.setAccessible(true);
  field2.set(mapEntries,true);
  Method method=MapEntries.class.getDeclaredMethod("getVanityPaths",String.class);
  method.setAccessible(true);
  method.invoke(mapEntries,"/content/mypage/en-us-{132");
  Field vanityCounter=MapEntries.class.getDeclaredField("vanityCounter");
  vanityCounter.setAccessible(true);
  AtomicLong counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(0,counter.longValue());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doAddAlias() throws Exception {
  Method method=MapEntries.class.getDeclaredMethod("doAddAlias",String.class);
  method.setAccessible(true);
  Field field0=MapEntries.class.getDeclaredField("aliasMap");
  field0.setAccessible(true);
  Map<String,Map<String,String>> aliasMap=(Map<String,Map<String,String>>)field0.get(mapEntries);
  assertEquals(0,aliasMap.size());
  Resource parent=mock(Resource.class);
  when(parent.getPath()).thenReturn("/parent");
  final Resource result=mock(Resource.class);
  when(resourceResolver.getResource("/parent/child")).thenReturn(result);
  when(result.getParent()).thenReturn(parent);
  when(result.getPath()).thenReturn("/parent/child");
  when(result.getName()).thenReturn("child");
  when(result.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","alias"));
  method.invoke(mapEntries,"/parent/child");
  Map<String,String> aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("alias"));
  assertEquals("child",aliasMapEntry.get("alias"));
  assertEquals(1,aliasMap.size());
  final Resource secondResult=mock(Resource.class);
  when(resourceResolver.getResource("/parent/child2")).thenReturn(secondResult);
  when(secondResult.getParent()).thenReturn(parent);
  when(secondResult.getPath()).thenReturn("/parent/child2");
  when(secondResult.getName()).thenReturn("child2");
  when(secondResult.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","alias"));
  method.invoke(mapEntries,"/parent/child2");
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("alias"));
  assertEquals("child",aliasMapEntry.get("alias"));
  assertEquals(1,aliasMap.size());
  final Resource jcrContentResult=mock(Resource.class);
  when(resourceResolver.getResource("/parent/child/jcr:content")).thenReturn(jcrContentResult);
  when(jcrContentResult.getParent()).thenReturn(result);
  when(jcrContentResult.getPath()).thenReturn("/parent/child/jcr:content");
  when(jcrContentResult.getName()).thenReturn("jcr:content");
  when(jcrContentResult.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","aliasJcrContent"));
  method.invoke(mapEntries,"/parent/child/jcr:content");
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertEquals(2,aliasMapEntry.size());
  assertTrue(aliasMapEntry.containsKey("aliasJcrContent"));
  assertEquals("child",aliasMapEntry.get("aliasJcrContent"));
  assertEquals(1,aliasMap.size());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_getVanityPaths_3() throws Exception {
  final Resource justVanityPath=mock(Resource.class,"justVanityPath");
  when(resourceResolver.getResource("/justVanityPath")).thenReturn(justVanityPath);
  when(justVanityPath.getPath()).thenReturn("/justVanityPath");
  when(justVanityPath.getName()).thenReturn("justVanityPath");
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  when(resourceResolver.findResources(anyString(),eq("sql"))).thenAnswer(new Answer<Iterator<Resource>>(){
    public Iterator<Resource> answer(    InvocationOnMock invocation) throws Throwable {
      if (invocation.getArguments()[0].toString().contains("sling:vanityPath")) {
        return Collections.singleton(justVanityPath).iterator();
      }
 else {
        return Collections.<Resource>emptySet().iterator();
      }
    }
  }
);
  Field field1=MapEntries.class.getDeclaredField("maxCachedVanityPathEntries");
  field1.setAccessible(true);
  field1.set(mapEntries,0);
  Field field2=MapEntries.class.getDeclaredField("maxCachedVanityPathEntriesStartup");
  field2.setAccessible(true);
  field2.set(mapEntries,false);
  Method method=MapEntries.class.getDeclaredMethod("getVanityPaths",String.class);
  method.setAccessible(true);
  method.invoke(mapEntries,"/target/justVanityPath");
  Field vanityCounter=MapEntries.class.getDeclaredField("vanityCounter");
  vanityCounter.setAccessible(true);
  AtomicLong counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(0,counter.longValue());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_loadVanityPaths() throws Exception {
  Field field1=MapEntries.class.getDeclaredField("maxCachedVanityPathEntries");
  field1.setAccessible(true);
  field1.set(mapEntries,2);
  final Resource justVanityPath=mock(Resource.class,"justVanityPath");
  when(resourceResolver.getResource("/justVanityPath")).thenReturn(justVanityPath);
  when(justVanityPath.getPath()).thenReturn("/justVanityPath");
  when(justVanityPath.getName()).thenReturn("justVanityPath");
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  when(resourceResolver.findResources(anyString(),eq("sql"))).thenAnswer(new Answer<Iterator<Resource>>(){
    public Iterator<Resource> answer(    InvocationOnMock invocation) throws Throwable {
      if (invocation.getArguments()[0].toString().contains("sling:vanityPath")) {
        return Collections.singleton(justVanityPath).iterator();
      }
 else {
        return Collections.<Resource>emptySet().iterator();
      }
    }
  }
);
  Method method=MapEntries.class.getDeclaredMethod("loadVanityPaths",boolean.class);
  method.setAccessible(true);
  method.invoke(mapEntries,false);
  Field vanityCounter=MapEntries.class.getDeclaredField("vanityCounter");
  vanityCounter.setAccessible(true);
  AtomicLong counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(2,counter.longValue());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doUpdateVanityOrder() throws Exception {
  Field field0=MapEntries.class.getDeclaredField("resolveMapsMap");
  field0.setAccessible(true);
  Map<String,List<MapEntry>> resolveMapsMap=(Map<String,List<MapEntry>>)field0.get(mapEntries);
  assertEquals(1,resolveMapsMap.size());
  Field field=MapEntries.class.getDeclaredField("vanityTargets");
  field.setAccessible(true);
  Map<String,List<String>> vanityTargets=(Map<String,List<String>>)field.get(mapEntries);
  assertEquals(0,vanityTargets.size());
  Method method=MapEntries.class.getDeclaredMethod("doAddVanity",String.class);
  method.setAccessible(true);
  Method method1=MapEntries.class.getDeclaredMethod("doUpdateVanityOrder",String.class,boolean.class);
  method1.setAccessible(true);
  Resource justVanityPath=mock(Resource.class,"justVanityPath");
  when(resourceResolver.getResource("/justVanityPath")).thenReturn(justVanityPath);
  when(justVanityPath.getPath()).thenReturn("/justVanityPath");
  when(justVanityPath.getName()).thenReturn("justVanityPath");
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  method.invoke(mapEntries,"/justVanityPath");
  Resource justVanityPath2=mock(Resource.class,"justVanityPath2");
  when(resourceResolver.getResource("/justVanityPath2")).thenReturn(justVanityPath2);
  when(justVanityPath2.getPath()).thenReturn("/justVanityPath2");
  when(justVanityPath2.getName()).thenReturn("justVanityPath2");
  when(justVanityPath2.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath","sling:vanityOrder",100));
  method.invoke(mapEntries,"/justVanityPath2");
  assertEquals(2,resolveMapsMap.size());
  assertEquals(2,vanityTargets.size());
  assertNotNull(resolveMapsMap.get("/target/justVanityPath"));
  Iterator<MapEntry> iterator=resolveMapsMap.get("/target/justVanityPath").iterator();
  assertEquals("/justVanityPath2$1",iterator.next().getRedirect()[0]);
  assertEquals("/justVanityPath$1",iterator.next().getRedirect()[0]);
  assertEquals("/justVanityPath2.html",iterator.next().getRedirect()[0]);
  assertEquals("/justVanityPath.html",iterator.next().getRedirect()[0]);
  assertFalse(iterator.hasNext());
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath","sling:vanityOrder",1000));
  method1.invoke(mapEntries,"/justVanityPath",false);
  iterator=resolveMapsMap.get("/target/justVanityPath").iterator();
  assertEquals("/justVanityPath$1",iterator.next().getRedirect()[0]);
  assertEquals("/justVanityPath2$1",iterator.next().getRedirect()[0]);
  assertEquals("/justVanityPath.html",iterator.next().getRedirect()[0]);
  assertEquals("/justVanityPath2.html",iterator.next().getRedirect()[0]);
  assertFalse(iterator.hasNext());
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  method1.invoke(mapEntries,"/justVanityPath",true);
  iterator=resolveMapsMap.get("/target/justVanityPath").iterator();
  assertEquals("/justVanityPath2$1",iterator.next().getRedirect()[0]);
  assertEquals("/justVanityPath$1",iterator.next().getRedirect()[0]);
  assertEquals("/justVanityPath2.html",iterator.next().getRedirect()[0]);
  assertEquals("/justVanityPath.html",iterator.next().getRedirect()[0]);
  assertFalse(iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_getVanityPaths_2() throws Exception {
  final Resource justVanityPath=mock(Resource.class,"justVanityPath");
  when(resourceResolver.getResource("/justVanityPath")).thenReturn(justVanityPath);
  when(justVanityPath.getPath()).thenReturn("/justVanityPath");
  when(justVanityPath.getName()).thenReturn("justVanityPath");
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  when(resourceResolver.findResources(anyString(),eq("sql"))).thenAnswer(new Answer<Iterator<Resource>>(){
    public Iterator<Resource> answer(    InvocationOnMock invocation) throws Throwable {
      if (invocation.getArguments()[0].toString().contains("sling:vanityPath")) {
        return Collections.singleton(justVanityPath).iterator();
      }
 else {
        return Collections.<Resource>emptySet().iterator();
      }
    }
  }
);
  Field field1=MapEntries.class.getDeclaredField("maxCachedVanityPathEntries");
  field1.setAccessible(true);
  field1.set(mapEntries,0);
  Method method=MapEntries.class.getDeclaredMethod("getVanityPaths",String.class);
  method.setAccessible(true);
  method.invoke(mapEntries,"/target/justVanityPath");
  Field vanityCounter=MapEntries.class.getDeclaredField("vanityCounter");
  vanityCounter.setAccessible(true);
  AtomicLong counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(2,counter.longValue());
  final Resource justVanityPath2=mock(Resource.class,"justVanityPath2");
  when(resourceResolver.getResource("/justVanityPath2")).thenReturn(justVanityPath2);
  when(justVanityPath2.getPath()).thenReturn("/justVanityPath2");
  when(justVanityPath2.getName()).thenReturn("justVanityPath2");
  when(justVanityPath2.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath","sling:vanityOrder",100));
  when(resourceResolver.findResources(anyString(),eq("sql"))).thenAnswer(new Answer<Iterator<Resource>>(){
    public Iterator<Resource> answer(    InvocationOnMock invocation) throws Throwable {
      if (invocation.getArguments()[0].toString().contains("sling:vanityPath")) {
        return Collections.singleton(justVanityPath).iterator();
      }
 else {
        return Collections.<Resource>emptySet().iterator();
      }
    }
  }
);
  method.invoke(mapEntries,"/target/justVanityPath");
  counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(4,counter.longValue());
}

</code></pre>

<br>
<pre class="type-11 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doRemoveVanity() throws Exception {
  Field field0=MapEntries.class.getDeclaredField("resolveMapsMap");
  field0.setAccessible(true);
  Map<String,List<MapEntry>> resolveMapsMap=(Map<String,List<MapEntry>>)field0.get(mapEntries);
  assertEquals(1,resolveMapsMap.size());
  Field field=MapEntries.class.getDeclaredField("vanityTargets");
  field.setAccessible(true);
  Map<String,List<String>> vanityTargets=(Map<String,List<String>>)field.get(mapEntries);
  assertEquals(0,vanityTargets.size());
  Method method=MapEntries.class.getDeclaredMethod("doAddVanity",String.class);
  method.setAccessible(true);
  Method method1=MapEntries.class.getDeclaredMethod("doRemoveVanity",String.class);
  method1.setAccessible(true);
  Resource justVanityPath=mock(Resource.class,"justVanityPath");
  when(resourceResolver.getResource("/justVanityPath")).thenReturn(justVanityPath);
  when(justVanityPath.getPath()).thenReturn("/justVanityPath");
  when(justVanityPath.getName()).thenReturn("justVanityPath");
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  method.invoke(mapEntries,"/justVanityPath");
  Field vanityCounter=MapEntries.class.getDeclaredField("vanityCounter");
  vanityCounter.setAccessible(true);
  AtomicLong counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(2,counter.longValue());
  assertEquals(2,resolveMapsMap.size());
  assertEquals(1,vanityTargets.size());
  assertNotNull(resolveMapsMap.get("/target/justVanityPath"));
  assertEquals(1,vanityTargets.get("/justVanityPath").size());
  assertEquals("/target/justVanityPath",vanityTargets.get("/justVanityPath").get(0));
  method1.invoke(mapEntries,"/justVanityPath");
  counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(0,counter.longValue());
  assertEquals(1,resolveMapsMap.size());
  assertEquals(0,vanityTargets.size());
  assertNull(resolveMapsMap.get("/target/justVanityPath"));
  Resource vanityPathOnJcrContentParent=mock(Resource.class,"vanityPathOnJcrContentParent");
  when(vanityPathOnJcrContentParent.getPath()).thenReturn("/vanityPathOnJcrContent");
  when(vanityPathOnJcrContentParent.getName()).thenReturn("vanityPathOnJcrContent");
  Resource vanityPathOnJcrContent=mock(Resource.class,"vanityPathOnJcrContent");
  when(resourceResolver.getResource("/vanityPathOnJcrContent/jcr:content")).thenReturn(vanityPathOnJcrContent);
  when(vanityPathOnJcrContent.getPath()).thenReturn("/vanityPathOnJcrContent/jcr:content");
  when(vanityPathOnJcrContent.getName()).thenReturn("jcr:content");
  when(vanityPathOnJcrContent.getParent()).thenReturn(vanityPathOnJcrContentParent);
  when(vanityPathOnJcrContent.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/vanityPathOnJcrContent"));
  method.invoke(mapEntries,"/vanityPathOnJcrContent/jcr:content");
  assertEquals(2,resolveMapsMap.size());
  assertEquals(1,vanityTargets.size());
  assertNotNull(resolveMapsMap.get("/target/vanityPathOnJcrContent"));
  assertEquals(1,vanityTargets.get("/vanityPathOnJcrContent").size());
  assertEquals("/target/vanityPathOnJcrContent",vanityTargets.get("/vanityPathOnJcrContent").get(0));
  method1.invoke(mapEntries,"/vanityPathOnJcrContent/jcr:content");
  assertEquals(1,resolveMapsMap.size());
  assertEquals(0,vanityTargets.size());
  assertNull(resolveMapsMap.get("/target/vanityPathOnJcrContent"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doRemoveAlias2() throws Exception {
  Method method=MapEntries.class.getDeclaredMethod("doAddAlias",String.class);
  method.setAccessible(true);
  Method method1=MapEntries.class.getDeclaredMethod("doRemoveAttributes",String.class,String[].class,boolean.class,boolean.class);
  method1.setAccessible(true);
  Field field0=MapEntries.class.getDeclaredField("aliasMap");
  field0.setAccessible(true);
  Map<String,Map<String,String>> aliasMap=(Map<String,Map<String,String>>)field0.get(mapEntries);
  assertEquals(0,aliasMap.size());
  Resource parent=mock(Resource.class);
  when(parent.getPath()).thenReturn("/parent");
  final Resource result=mock(Resource.class);
  when(resourceResolver.getResource("/parent/child")).thenReturn(result);
  when(result.getParent()).thenReturn(parent);
  when(result.getPath()).thenReturn("/parent/child");
  when(result.getName()).thenReturn("child");
  when(result.adaptTo(ValueMap.class)).thenReturn(buildValueMap());
  final Resource jcrContentResult=mock(Resource.class);
  when(resourceResolver.getResource("/parent/child/jcr:content")).thenReturn(jcrContentResult);
  when(jcrContentResult.getParent()).thenReturn(result);
  when(jcrContentResult.getPath()).thenReturn("/parent/child/jcr:content");
  when(jcrContentResult.getName()).thenReturn("jcr:content");
  when(jcrContentResult.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","aliasJcrContent"));
  when(result.getChild("jcr:content")).thenReturn(jcrContentResult);
  method.invoke(mapEntries,"/parent/child/jcr:content");
  Map<String,String> aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("aliasJcrContent"));
  assertEquals("child",aliasMapEntry.get("aliasJcrContent"));
  assertEquals(1,aliasMap.size());
  method1.invoke(mapEntries,"/parent/child/jcr:content",new String[]{"sling:alias"},false,false);
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNull(aliasMapEntry);
  assertEquals(0,aliasMap.size());
  method.invoke(mapEntries,"/parent/child/jcr:content");
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("aliasJcrContent"));
  assertEquals("child",aliasMapEntry.get("aliasJcrContent"));
  assertEquals(1,aliasMap.size());
  when(resourceResolver.getResource("/parent/child/jcr:content")).thenReturn(null);
  when(result.getChild("jcr:content")).thenReturn(null);
  method1.invoke(mapEntries,"/parent/child/jcr:content",new String[]{"sling:alias"},true,false);
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNull(aliasMapEntry);
  assertEquals(0,aliasMap.size());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doAddVanity() throws Exception {
  List<MapEntry> entries=mapEntries.getResolveMaps();
  assertEquals(0,entries.size());
  Field field=MapEntries.class.getDeclaredField("vanityTargets");
  field.setAccessible(true);
  Map<String,List<String>> vanityTargets=(Map<String,List<String>>)field.get(mapEntries);
  assertEquals(0,vanityTargets.size());
  Method method=MapEntries.class.getDeclaredMethod("doAddVanity",String.class);
  method.setAccessible(true);
  Resource justVanityPath=mock(Resource.class,"justVanityPath");
  when(resourceResolver.getResource("/justVanityPath")).thenReturn(justVanityPath);
  when(justVanityPath.getPath()).thenReturn("/justVanityPath");
  when(justVanityPath.getName()).thenReturn("justVanityPath");
  when(justVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/justVanityPath"));
  method.invoke(mapEntries,"/justVanityPath");
  entries=mapEntries.getResolveMaps();
  assertEquals(2,entries.size());
  Field vanityCounter=MapEntries.class.getDeclaredField("vanityCounter");
  vanityCounter.setAccessible(true);
  AtomicLong counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(2,counter.longValue());
  Resource badVanityPath=mock(Resource.class,"badVanityPath");
  when(resourceResolver.getResource("/badVanityPath")).thenReturn(badVanityPath);
  when(badVanityPath.getPath()).thenReturn("/badVanityPath");
  when(badVanityPath.getName()).thenReturn("badVanityPath");
  when(badVanityPath.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/content/mypage/en-us-{132"));
  method.invoke(mapEntries,"/badVanityPath");
  assertEquals(2,entries.size());
  vanityTargets=(Map<String,List<String>>)field.get(mapEntries);
  assertEquals(1,vanityTargets.size());
  Resource vanityPathOnJcrContentParent=mock(Resource.class,"vanityPathOnJcrContentParent");
  when(vanityPathOnJcrContentParent.getPath()).thenReturn("/vanityPathOnJcrContent");
  when(vanityPathOnJcrContentParent.getName()).thenReturn("vanityPathOnJcrContent");
  Resource vanityPathOnJcrContent=mock(Resource.class,"vanityPathOnJcrContent");
  when(resourceResolver.getResource("/vanityPathOnJcrContent/jcr:content")).thenReturn(vanityPathOnJcrContent);
  when(vanityPathOnJcrContent.getPath()).thenReturn("/vanityPathOnJcrContent/jcr:content");
  when(vanityPathOnJcrContent.getName()).thenReturn("jcr:content");
  when(vanityPathOnJcrContent.getParent()).thenReturn(vanityPathOnJcrContentParent);
  when(vanityPathOnJcrContent.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:vanityPath","/target/vanityPathOnJcrContent"));
  method.invoke(mapEntries,"/vanityPathOnJcrContent/jcr:content");
  entries=mapEntries.getResolveMaps();
  assertEquals(4,entries.size());
  counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(4,counter.longValue());
  vanityTargets=(Map<String,List<String>>)field.get(mapEntries);
  assertEquals(2,vanityTargets.size());
  assertNull(vanityTargets.get("/vanityPathOnJcrContent/jcr:content"));
  assertNotNull(vanityTargets.get("/vanityPathOnJcrContent"));
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_getActualContentPath() throws Exception {
  Method method=MapEntries.class.getDeclaredMethod("getActualContentPath",String.class);
  method.setAccessible(true);
  String actualContent=(String)method.invoke(mapEntries,"/content");
  assertEquals("/content",actualContent);
  actualContent=(String)method.invoke(mapEntries,"/content/jcr:content");
  assertEquals("/content",actualContent);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doAddAlias2() throws Exception {
  Method method=MapEntries.class.getDeclaredMethod("doAddAlias",String.class);
  method.setAccessible(true);
  Field field0=MapEntries.class.getDeclaredField("aliasMap");
  field0.setAccessible(true);
  Map<String,Map<String,String>> aliasMap=(Map<String,Map<String,String>>)field0.get(mapEntries);
  assertEquals(0,aliasMap.size());
  Resource parent=mock(Resource.class);
  when(parent.getPath()).thenReturn("/");
  final Resource result=mock(Resource.class);
  when(resourceResolver.getResource("/parent")).thenReturn(result);
  when(result.getParent()).thenReturn(parent);
  when(result.getPath()).thenReturn("/parent");
  when(result.getName()).thenReturn("parent");
  when(result.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","alias"));
  method.invoke(mapEntries,"/parent");
  Map<String,String> aliasMapEntry=mapEntries.getAliasMap("/");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("alias"));
  assertEquals("parent",aliasMapEntry.get("alias"));
  assertEquals(1,aliasMap.size());
  final Resource secondResult=mock(Resource.class);
  when(resourceResolver.getResource("/parent2")).thenReturn(secondResult);
  when(secondResult.getParent()).thenReturn(parent);
  when(secondResult.getPath()).thenReturn("/parent2");
  when(secondResult.getName()).thenReturn("parent2");
  when(secondResult.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","alias"));
  method.invoke(mapEntries,"/parent2");
  aliasMapEntry=mapEntries.getAliasMap("/");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("alias"));
  assertEquals("parent",aliasMapEntry.get("alias"));
  assertEquals(1,aliasMap.size());
  final Resource jcrContentResult=mock(Resource.class);
  when(resourceResolver.getResource("/parent/jcr:content")).thenReturn(jcrContentResult);
  when(jcrContentResult.getParent()).thenReturn(result);
  when(jcrContentResult.getPath()).thenReturn("/parent/jcr:content");
  when(jcrContentResult.getName()).thenReturn("jcr:content");
  when(jcrContentResult.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","aliasJcrContent"));
  method.invoke(mapEntries,"/parent/jcr:content");
  aliasMapEntry=mapEntries.getAliasMap("/");
  assertNotNull(aliasMapEntry);
  assertEquals(2,aliasMapEntry.size());
  assertTrue(aliasMapEntry.containsKey("aliasJcrContent"));
  assertEquals("parent",aliasMapEntry.get("aliasJcrContent"));
  assertEquals(1,aliasMap.size());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_getVanityPaths_1() throws Exception {
  Field field1=MapEntries.class.getDeclaredField("maxCachedVanityPathEntries");
  field1.setAccessible(true);
  field1.set(mapEntries,0);
  Method method=MapEntries.class.getDeclaredMethod("getVanityPaths",String.class);
  method.setAccessible(true);
  method.invoke(mapEntries,"/notExisting");
  Field vanityCounter=MapEntries.class.getDeclaredField("vanityCounter");
  vanityCounter.setAccessible(true);
  AtomicLong counter=(AtomicLong)vanityCounter.get(mapEntries);
  assertEquals(0,counter.longValue());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doRemoveAlias() throws Exception {
  Method method=MapEntries.class.getDeclaredMethod("doAddAlias",String.class);
  method.setAccessible(true);
  Method method1=MapEntries.class.getDeclaredMethod("doRemoveAttributes",String.class,String[].class,boolean.class,boolean.class);
  method1.setAccessible(true);
  Field field0=MapEntries.class.getDeclaredField("aliasMap");
  field0.setAccessible(true);
  Map<String,Map<String,String>> aliasMap=(Map<String,Map<String,String>>)field0.get(mapEntries);
  assertEquals(0,aliasMap.size());
  Resource parent=mock(Resource.class);
  when(parent.getPath()).thenReturn("/parent");
  final Resource result=mock(Resource.class);
  when(resourceResolver.getResource("/parent/child")).thenReturn(result);
  when(result.getParent()).thenReturn(parent);
  when(result.getPath()).thenReturn("/parent/child");
  when(result.getName()).thenReturn("child");
  when(result.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","alias"));
  method.invoke(mapEntries,"/parent/child");
  Map<String,String> aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("alias"));
  assertEquals("child",aliasMapEntry.get("alias"));
  assertEquals(1,aliasMap.size());
  method1.invoke(mapEntries,"/parent/child",new String[]{"sling:alias"},false,false);
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNull(aliasMapEntry);
  assertEquals(0,aliasMap.size());
  method.invoke(mapEntries,"/parent/child");
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("alias"));
  assertEquals("child",aliasMapEntry.get("alias"));
  assertEquals(1,aliasMap.size());
  when(resourceResolver.getResource("/parent/child")).thenReturn(null);
  method1.invoke(mapEntries,"/parent/child",new String[]{"sling:alias"},true,false);
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNull(aliasMapEntry);
  assertEquals(0,aliasMap.size());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void test_doRemoveAlias3() throws Exception {
  Method method=MapEntries.class.getDeclaredMethod("doAddAlias",String.class);
  method.setAccessible(true);
  Method method1=MapEntries.class.getDeclaredMethod("doRemoveAttributes",String.class,String[].class,boolean.class,boolean.class);
  method1.setAccessible(true);
  Field field0=MapEntries.class.getDeclaredField("aliasMap");
  field0.setAccessible(true);
  Map<String,Map<String,String>> aliasMap=(Map<String,Map<String,String>>)field0.get(mapEntries);
  assertEquals(0,aliasMap.size());
  Resource parent=mock(Resource.class);
  when(parent.getPath()).thenReturn("/parent");
  final Resource result=mock(Resource.class);
  when(resourceResolver.getResource("/parent/child")).thenReturn(result);
  when(result.getParent()).thenReturn(parent);
  when(result.getPath()).thenReturn("/parent/child");
  when(result.getName()).thenReturn("child");
  when(result.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","alias"));
  method.invoke(mapEntries,"/parent/child");
  final Resource jcrContentResult=mock(Resource.class);
  when(resourceResolver.getResource("/parent/child/jcr:content")).thenReturn(jcrContentResult);
  when(jcrContentResult.getParent()).thenReturn(result);
  when(jcrContentResult.getPath()).thenReturn("/parent/child/jcr:content");
  when(jcrContentResult.getName()).thenReturn("jcr:content");
  when(jcrContentResult.adaptTo(ValueMap.class)).thenReturn(buildValueMap("sling:alias","aliasJcrContent"));
  when(result.getChild("jcr:content")).thenReturn(jcrContentResult);
  method.invoke(mapEntries,"/parent/child/jcr:content");
  Map<String,String> aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("aliasJcrContent"));
  assertEquals("child",aliasMapEntry.get("aliasJcrContent"));
  assertEquals(1,aliasMap.size());
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertEquals(2,aliasMapEntry.size());
  method1.invoke(mapEntries,"/parent/child/jcr:content",new String[]{"sling:alias"},false,false);
  assertEquals(1,aliasMap.size());
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertEquals(1,aliasMapEntry.size());
  method.invoke(mapEntries,"/parent/child/jcr:content");
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("aliasJcrContent"));
  assertEquals("child",aliasMapEntry.get("aliasJcrContent"));
  assertEquals(2,aliasMapEntry.size());
  method1.invoke(mapEntries,"/parent/child",new String[]{"sling:alias"},false,false);
  assertEquals(1,aliasMap.size());
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertEquals(1,aliasMapEntry.size());
  method.invoke(mapEntries,"/parent/child");
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("aliasJcrContent"));
  assertEquals("child",aliasMapEntry.get("aliasJcrContent"));
  assertEquals(2,aliasMapEntry.size());
  when(resourceResolver.getResource("/parent/child/jcr:content")).thenReturn(null);
  when(result.getChild("jcr:content")).thenReturn(null);
  method1.invoke(mapEntries,"/parent/child/jcr:content",new String[]{"sling:alias"},true,false);
  assertEquals(1,aliasMap.size());
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertEquals(1,aliasMapEntry.size());
  when(resourceResolver.getResource("/parent/child/jcr:content")).thenReturn(jcrContentResult);
  when(result.getChild("jcr:content")).thenReturn(jcrContentResult);
  method.invoke(mapEntries,"/parent/child/jcr:content");
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNotNull(aliasMapEntry);
  assertTrue(aliasMapEntry.containsKey("aliasJcrContent"));
  assertEquals("child",aliasMapEntry.get("aliasJcrContent"));
  assertEquals(2,aliasMapEntry.size());
  method1.invoke(mapEntries,"/parent/child",new String[]{"sling:alias"},true,false);
  assertEquals(0,aliasMap.size());
  aliasMapEntry=mapEntries.getAliasMap("/parent");
  assertNull(aliasMapEntry);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.mapping.MapEntryTest </h4><pre class="type-11 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_filterRegExp(){
  TestCase.assertNull(filterRegExp((String[])null));
  TestCase.assertNull(filterRegExp(new String[0]));
  String aString="plain";
  String aPattern="http/[^.]+.www.example.com.8080/bla";
  TestCase.assertNull(filterRegExp(aPattern));
  String[] res=filterRegExp(aString);
  TestCase.assertNotNull(res);
  TestCase.assertEquals(1,res.length);
  TestCase.assertEquals(aString,res[0]);
  res=filterRegExp(aString,aPattern);
  TestCase.assertNotNull(res);
  TestCase.assertEquals(1,res.length);
  TestCase.assertEquals(aString,res[0]);
  res=filterRegExp(aPattern,aString,aPattern);
  TestCase.assertNotNull(res);
  TestCase.assertEquals(1,res.length);
  TestCase.assertEquals(aString,res[0]);
  res=filterRegExp(aPattern,aString);
  TestCase.assertNotNull(res);
  TestCase.assertEquals(1,res.length);
  TestCase.assertEquals(aString,res[0]);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.stateful.SecureResourceProviderDecoratorTest </h4><pre class="type-11 type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void find(){
  Iterator<Resource> resources=src.findResources("FIND ALL","MockQueryLanguage");
  assertThat("resources should contain at least one item",resources.hasNext(),equalTo(true));
  Resource resource=resources.next();
  assertThat("unexpected resource found",resource,equalTo(first));
  assertThat("resources should exactly at least one item",resources.hasNext(),equalTo(false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.sample.slingshot.impl.SetupServiceTest </h4><pre class="type-11 type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void setup() throws Exception {
  context.load().json("/slingshot.json",SlingshotConstants.APP_ROOT_PATH);
  ConfigurationAdmin configAdmin=mock(ConfigurationAdmin.class);
  when(configAdmin.listConfigurations(anyString())).thenReturn(new Configuration[]{null});
  context.registerService(ConfigurationAdmin.class,configAdmin);
  context.registerInjectActivateService(new SetupService());
  Session adminSession=context.resourceResolver().adaptTo(Session.class);
  UserManager userManager=AccessControlUtil.getUserManager(adminSession);
  for (  String user : new String[]{"slingshot1","slingshot2",InternalConstants.SERVICE_USER_NAME}) {
    assertThat(userManager.getAuthorizable(user),notNullValue());
  }
  Resource resource=context.resourceResolver().getResource(SlingshotConstants.APP_ROOT_PATH);
  assertThat(resource,resourceOfType(RESOURCETYPE_HOME));
  assertThat(resource.getChild("users"),notNullValue());
  assertThat(resource.getChild("users/slingshot1"),resourceOfType(RESOURCETYPE_USER));
  assertThat(resource.getChild("users/slingshot1"),hasChildren("info","profile","ugc"));
  Session user=adminSession.impersonate(new SimpleCredentials("slingshot1","slingshot1".toCharArray()));
  assertThat(user.hasPermission(SlingshotConstants.APP_ROOT_PATH + "/users/slingshot1/info","read,add_node,set_property"),equalTo(true));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.scripting.jsp.taglib.TestSlingFunctions </h4><pre class="type-11 type-13 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindResources() throws ClassNotFoundException {
  log.info("testFindResources");
  Iterator<Resource> resources=SlingFunctions.findResources(resolver,"query","language");
  assertNotNull(resources);
  assertTrue(resources.hasNext());
  assertEquals(resource,resources.next());
  log.info("Tests successful!");
}

</code></pre>

<br>
<pre class="type-11 type-13 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdaptTo() throws ClassNotFoundException {
  log.info("testAdaptTo");
  Adaptable adaptable=SlingFunctions.getResource(resolver,TEST_PATH);
  Object adapted=SlingFunctions.adaptTo(adaptable,ValueMap.class.getCanonicalName());
  assertNotNull(adapted);
  assertTrue(adapted instanceof ValueMap);
  log.info("Tests successful!");
}

</code></pre>

<br>
<pre class="type-11 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRelativeResource(){
  log.info("testGetRelativeResource");
  Resource parent=SlingFunctions.getResource(resolver,TEST_PATH);
  Resource child=SlingFunctions.getRelativeResource(parent,"child1");
  assertNotNull(child);
  assertEquals(TEST_PATH + "/child1",child.getPath());
  log.info("Tests successful!");
}

</code></pre>

<br>
<pre class="type-11 type-13 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListChildResources(){
  log.info("testListChildResources");
  Iterator<Resource> children=SlingFunctions.listChildren(resource);
  assertNotNull(children);
  assertTrue(children.hasNext());
  log.info("Tests successful!");
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetValue(){
  log.info("testGetValue");
  Resource resource=SlingFunctions.getResource(resolver,TEST_PATH);
  ValueMap properties=resource.adaptTo(ValueMap.class);
  log.info("Testing using class coersion");
  Date retrievedDate=SlingFunctions.getValue(properties,"date",Date.class);
  assertEquals(date,retrievedDate);
  assertTrue(retrievedDate instanceof Date);
  log.info("Testing with default value on existing key");
  Long retrievedLong=SlingFunctions.getValue(properties,"long",new Long(-123L));
  assertEquals(new Long(0L),retrievedLong);
  assertTrue(retrievedLong instanceof Long);
  log.info("Testing with no value and class coersion");
  Date fakeDate=SlingFunctions.getValue(properties,"date1",Date.class);
  assertTrue(fakeDate == null);
  log.info("Testing with no value and default specified");
  Long fakeLong=SlingFunctions.getValue(properties,"long1",new Long(-123L));
  assertEquals(new Long(-123L),fakeLong);
  assertTrue(fakeLong instanceof Long);
  log.info("Tests successful!");
}

</code></pre>

<br>
<pre class="type-11 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetResource(){
  log.info("testGetResource");
  Resource resource=SlingFunctions.getResource(resolver,TEST_PATH);
  assertNotNull(resource);
  assertEquals(TEST_PATH,resource.getPath());
  log.info("Tests successful!");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.scripting.sightly.impl.utils.RenderUtilsTest </h4><pre class="type-11 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testGetCollectionWithOneElement(){
  String stringObject="test";
  Integer numberObject=1;
  Collection stringCollection=RenderUtils.toCollection(stringObject);
  assertTrue(stringCollection.size() == 1 && stringCollection.contains(stringObject));
  Collection numberCollection=RenderUtils.toCollection(numberObject);
  assertTrue(numberCollection.size() == 1 && numberCollection.contains(numberObject));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.security.impl.ContentDispositionFilterTest </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_activator3() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final ComponentContext ctx=context.mock(ComponentContext.class);
  final Dictionary props=new Hashtable<String,String[]>();
  props.put("sling.content.disposition.paths",new String[]{"/libs","/content/usergenerated/*"});
  props.put("sling.content.disposition.excluded.paths",new String[]{""});
  context.checking(new Expectations(){
{
      allowing(ctx).getProperties();
      will(returnValue(props));
    }
  }
);
  PrivateAccessor.invoke(contentDispositionFilter,"activate",new Class[]{ComponentContext.class},new Object[]{ctx});
  Set<String> contentDispositionPaths=(Set<String>)PrivateAccessor.getField(contentDispositionFilter,"contentDispositionPaths");
  Assert.assertEquals(1,contentDispositionPaths.size());
  String[] contentDispositionPathsPfx=(String[])PrivateAccessor.getField(contentDispositionFilter,"contentDispositionPathsPfx");
  Assert.assertEquals(1,contentDispositionPathsPfx.length);
  Map<String,Set<String>> contentTypesMapping=(Map<String,Set<String>>)PrivateAccessor.getField(contentDispositionFilter,"contentTypesMapping");
  Assert.assertEquals(0,contentTypesMapping.size());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test_isJcrData1() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final SlingHttpServletRequest request=context.mock(SlingHttpServletRequest.class);
  final SlingHttpServletResponse response=context.mock(SlingHttpServletResponse.class);
  final Resource resource=null;
  context.checking(new Expectations(){
{
      allowing(request).getResource();
      will(returnValue(resource));
    }
  }
);
  final ContentDispositionFilter.RewriterResponse rewriterResponse=contentDispositionFilter.new RewriterResponse(request,response);
  Boolean result=(Boolean)PrivateAccessor.invoke(rewriterResponse,"isJcrData",new Class[]{Resource.class},new Object[]{resource});
  Assert.assertFalse(result);
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_activator5() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final ComponentContext ctx=context.mock(ComponentContext.class);
  final Dictionary props=new Hashtable<String,String[]>();
  props.put("sling.content.disposition.paths",new String[]{"*"});
  props.put("sling.content.disposition.excluded.paths",new String[]{""});
  context.checking(new Expectations(){
{
      allowing(ctx).getProperties();
      will(returnValue(props));
    }
  }
);
  PrivateAccessor.invoke(contentDispositionFilter,"activate",new Class[]{ComponentContext.class},new Object[]{ctx});
  Set<String> contentDispositionPaths=(Set<String>)PrivateAccessor.getField(contentDispositionFilter,"contentDispositionPaths");
  Assert.assertEquals(0,contentDispositionPaths.size());
  String[] contentDispositionPathsPfx=(String[])PrivateAccessor.getField(contentDispositionFilter,"contentDispositionPathsPfx");
  Assert.assertEquals(0,contentDispositionPathsPfx.length);
  Map<String,Set<String>> contentTypesMapping=(Map<String,Set<String>>)PrivateAccessor.getField(contentDispositionFilter,"contentTypesMapping");
  Assert.assertEquals(0,contentTypesMapping.size());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test_isJcrData2() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final SlingHttpServletRequest request=context.mock(SlingHttpServletRequest.class);
  final SlingHttpServletResponse response=context.mock(SlingHttpServletResponse.class);
  final Resource resource=context.mock(Resource.class);
  context.checking(new Expectations(){
{
      allowing(request).getResource();
      will(returnValue(resource));
    }
  }
);
  final ContentDispositionFilter.RewriterResponse rewriterResponse=contentDispositionFilter.new RewriterResponse(request,response);
  final ValueMap properties=context.mock(ValueMap.class);
  context.checking(new Expectations(){
{
      allowing(resource).adaptTo(ValueMap.class);
      will(returnValue(properties));
      allowing(properties).containsKey(PROP_JCR_DATA);
      will(returnValue(true));
    }
  }
);
  Boolean result=(Boolean)PrivateAccessor.invoke(rewriterResponse,"isJcrData",new Class[]{Resource.class},new Object[]{resource});
  Assert.assertTrue(result);
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_activator6() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final ComponentContext ctx=context.mock(ComponentContext.class);
  final Dictionary props=new Hashtable<String,String[]>();
  props.put("sling.content.disposition.paths",new String[]{"/libs:*"});
  props.put("sling.content.disposition.excluded.paths",new String[]{""});
  context.checking(new Expectations(){
{
      allowing(ctx).getProperties();
      will(returnValue(props));
    }
  }
);
  PrivateAccessor.invoke(contentDispositionFilter,"activate",new Class[]{ComponentContext.class},new Object[]{ctx});
  Set<String> contentDispositionPaths=(Set<String>)PrivateAccessor.getField(contentDispositionFilter,"contentDispositionPaths");
  Assert.assertEquals(0,contentDispositionPaths.size());
  String[] contentDispositionPathsPfx=(String[])PrivateAccessor.getField(contentDispositionFilter,"contentDispositionPathsPfx");
  Assert.assertEquals(0,contentDispositionPathsPfx.length);
  Map<String,Set<String>> contentTypesMapping=(Map<String,Set<String>>)PrivateAccessor.getField(contentDispositionFilter,"contentTypesMapping");
  Assert.assertEquals(0,contentTypesMapping.size());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test_isJcrData3() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final SlingHttpServletRequest request=context.mock(SlingHttpServletRequest.class);
  final SlingHttpServletResponse response=context.mock(SlingHttpServletResponse.class);
  final Resource resource=context.mock(Resource.class);
  final ValueMap properties=context.mock(ValueMap.class);
  context.checking(new Expectations(){
{
      allowing(request).getResource();
      will(returnValue(resource));
      allowing(resource).adaptTo(ValueMap.class);
      will(returnValue(properties));
      allowing(properties).containsKey(PROP_JCR_DATA);
      will(returnValue(false));
      allowing(resource).getChild(JCR_CONTENT_LEAF);
      will(returnValue(null));
    }
  }
);
  final ContentDispositionFilter.RewriterResponse rewriterResponse=contentDispositionFilter.new RewriterResponse(request,response);
  Boolean result=(Boolean)PrivateAccessor.invoke(rewriterResponse,"isJcrData",new Class[]{Resource.class},new Object[]{resource});
  Assert.assertFalse(result);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test_isJcrData4() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final SlingHttpServletRequest request=context.mock(SlingHttpServletRequest.class);
  final SlingHttpServletResponse response=context.mock(SlingHttpServletResponse.class);
  final Resource child=context.mock(Resource.class,"child");
  final Resource resource=context.mock(Resource.class,"resource");
  final ValueMap properties=context.mock(ValueMap.class);
  final ValueMap childPropoerties=context.mock(ValueMap.class,"childPropoerties");
  context.checking(new Expectations(){
{
      allowing(request).getResource();
      will(returnValue(resource));
      allowing(resource).adaptTo(ValueMap.class);
      will(returnValue(properties));
      allowing(properties).containsKey(PROP_JCR_DATA);
      will(returnValue(false));
      allowing(resource).getChild(JCR_CONTENT_LEAF);
      will(returnValue(child));
      allowing(child).adaptTo(ValueMap.class);
      will(returnValue(childPropoerties));
      allowing(childPropoerties).containsKey(PROP_JCR_DATA);
      will(returnValue(false));
    }
  }
);
  final ContentDispositionFilter.RewriterResponse rewriterResponse=contentDispositionFilter.new RewriterResponse(request,response);
  Boolean result=(Boolean)PrivateAccessor.invoke(rewriterResponse,"isJcrData",new Class[]{Resource.class},new Object[]{resource});
  Assert.assertFalse(result);
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_activator7() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final ComponentContext ctx=context.mock(ComponentContext.class);
  final Dictionary props=new Hashtable<String,String[]>();
  props.put("sling.content.disposition.paths",new String[]{"/libs:text/html,text/plain","/content/usergenerated/*:image/jpeg"});
  props.put("sling.content.disposition.excluded.paths",new String[]{""});
  context.checking(new Expectations(){
{
      allowing(ctx).getProperties();
      will(returnValue(props));
    }
  }
);
  PrivateAccessor.invoke(contentDispositionFilter,"activate",new Class[]{ComponentContext.class},new Object[]{ctx});
  Set<String> contentDispositionPaths=(Set<String>)PrivateAccessor.getField(contentDispositionFilter,"contentDispositionPaths");
  Assert.assertEquals(1,contentDispositionPaths.size());
  String[] contentDispositionPathsPfx=(String[])PrivateAccessor.getField(contentDispositionFilter,"contentDispositionPathsPfx");
  Assert.assertEquals(1,contentDispositionPathsPfx.length);
  Map<String,Set<String>> contentTypesMapping=(Map<String,Set<String>>)PrivateAccessor.getField(contentDispositionFilter,"contentTypesMapping");
  Assert.assertEquals(2,contentTypesMapping.size());
  Set<String> libsMapping=contentTypesMapping.get("/libs");
  Assert.assertEquals(2,libsMapping.size());
  libsMapping.contains("text/html");
  libsMapping.contains("text/plain");
  Set<String> userGeneratedMapping=contentTypesMapping.get("/content/usergenerated/");
  Assert.assertEquals(1,userGeneratedMapping.size());
  userGeneratedMapping.contains("image/jpeg");
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test_isJcrData5() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final SlingHttpServletRequest request=context.mock(SlingHttpServletRequest.class);
  final SlingHttpServletResponse response=context.mock(SlingHttpServletResponse.class);
  final Resource child=context.mock(Resource.class,"child");
  final Resource resource=context.mock(Resource.class,"resource");
  final ValueMap properties=context.mock(ValueMap.class);
  final ValueMap childPropoerties=context.mock(ValueMap.class,"childPropoerties");
  context.checking(new Expectations(){
{
      allowing(request).getResource();
      will(returnValue(resource));
      allowing(resource).adaptTo(ValueMap.class);
      will(returnValue(properties));
      allowing(properties).containsKey(PROP_JCR_DATA);
      will(returnValue(false));
      allowing(resource).getChild(JCR_CONTENT_LEAF);
      will(returnValue(child));
      allowing(child).adaptTo(ValueMap.class);
      will(returnValue(childPropoerties));
      allowing(childPropoerties).containsKey(PROP_JCR_DATA);
      will(returnValue(true));
    }
  }
);
  final ContentDispositionFilter.RewriterResponse rewriterResponse=contentDispositionFilter.new RewriterResponse(request,response);
  Boolean result=(Boolean)PrivateAccessor.invoke(rewriterResponse,"isJcrData",new Class[]{Resource.class},new Object[]{resource});
  Assert.assertTrue(result);
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_activator8() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final ComponentContext ctx=context.mock(ComponentContext.class);
  final Dictionary props=new Hashtable<String,String[]>();
  props.put("sling.content.disposition.paths",new String[]{"/libs:text/html,text/plain","/content/usergenerated/*:image/jpeg"});
  props.put("sling.content.disposition.excluded.paths",new String[]{});
  context.checking(new Expectations(){
{
      allowing(ctx).getProperties();
      will(returnValue(props));
    }
  }
);
  PrivateAccessor.invoke(contentDispositionFilter,"activate",new Class[]{ComponentContext.class},new Object[]{ctx});
  Set<String> contentDispositionExcludedPaths=(Set<String>)PrivateAccessor.getField(contentDispositionFilter,"contentDispositionExcludedPaths");
  Assert.assertEquals(0,contentDispositionExcludedPaths.size());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_activator9() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final ComponentContext ctx=context.mock(ComponentContext.class);
  final Dictionary props=new Hashtable<String,String[]>();
  props.put("sling.content.disposition.paths",new String[]{"/libs:text/html,text/plain","/content/usergenerated/*:image/jpeg"});
  props.put("sling.content.disposition.excluded.paths",new String[]{"/content","/libs"});
  context.checking(new Expectations(){
{
      allowing(ctx).getProperties();
      will(returnValue(props));
    }
  }
);
  PrivateAccessor.invoke(contentDispositionFilter,"activate",new Class[]{ComponentContext.class},new Object[]{ctx});
  Set<String> contentDispositionExcludedPaths=(Set<String>)PrivateAccessor.getField(contentDispositionFilter,"contentDispositionExcludedPaths");
  Assert.assertEquals(2,contentDispositionExcludedPaths.size());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test_isJcrData6() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final SlingHttpServletRequest request=context.mock(SlingHttpServletRequest.class);
  final SlingHttpServletResponse response=context.mock(SlingHttpServletResponse.class);
  final Resource resource=context.mock(Resource.class);
  final ValueMap properties=context.mock(ValueMap.class);
  context.checking(new Expectations(){
{
      allowing(request).getResource();
      will(returnValue(resource));
      allowing(resource).adaptTo(ValueMap.class);
      will(returnValue(null));
      allowing(resource).getChild(JCR_CONTENT_LEAF);
      will(returnValue(null));
    }
  }
);
  final ContentDispositionFilter.RewriterResponse rewriterResponse=contentDispositionFilter.new RewriterResponse(request,response);
  Boolean result=(Boolean)PrivateAccessor.invoke(rewriterResponse,"isJcrData",new Class[]{Resource.class},new Object[]{resource});
  Assert.assertFalse(result);
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_activator1() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final ComponentContext ctx=context.mock(ComponentContext.class);
  final Dictionary props=new Hashtable<String,String[]>();
  props.put("sling.content.disposition.paths",new String[]{"/content/usergenerated"});
  props.put("sling.content.disposition.excluded.paths",new String[]{""});
  context.checking(new Expectations(){
{
      allowing(ctx).getProperties();
      will(returnValue(props));
    }
  }
);
  PrivateAccessor.invoke(contentDispositionFilter,"activate",new Class[]{ComponentContext.class},new Object[]{ctx});
  Set<String> contentDispositionPaths=(Set<String>)PrivateAccessor.getField(contentDispositionFilter,"contentDispositionPaths");
  Assert.assertEquals(1,contentDispositionPaths.size());
  String[] contentDispositionPathsPfx=(String[])PrivateAccessor.getField(contentDispositionFilter,"contentDispositionPathsPfx");
  Assert.assertEquals(0,contentDispositionPathsPfx.length);
  Map<String,Set<String>> contentTypesMapping=(Map<String,Set<String>>)PrivateAccessor.getField(contentDispositionFilter,"contentTypesMapping");
  Assert.assertEquals(0,contentTypesMapping.size());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void test_isJcrData7() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final SlingHttpServletRequest request=context.mock(SlingHttpServletRequest.class);
  final SlingHttpServletResponse response=context.mock(SlingHttpServletResponse.class);
  final Resource child=context.mock(Resource.class,"child");
  final Resource resource=context.mock(Resource.class,"resource");
  final ValueMap properties=context.mock(ValueMap.class);
  final ValueMap childPropoerties=context.mock(ValueMap.class,"childPropoerties");
  context.checking(new Expectations(){
{
      allowing(request).getResource();
      will(returnValue(resource));
      allowing(resource).adaptTo(ValueMap.class);
      will(returnValue(properties));
      allowing(properties).containsKey(PROP_JCR_DATA);
      will(returnValue(false));
      allowing(resource).getChild(JCR_CONTENT_LEAF);
      will(returnValue(child));
      allowing(child).adaptTo(ValueMap.class);
      will(returnValue(null));
    }
  }
);
  final ContentDispositionFilter.RewriterResponse rewriterResponse=contentDispositionFilter.new RewriterResponse(request,response);
  Boolean result=(Boolean)PrivateAccessor.invoke(rewriterResponse,"isJcrData",new Class[]{Resource.class},new Object[]{resource});
  Assert.assertFalse(result);
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_activator2() throws Throwable {
  contentDispositionFilter=new ContentDispositionFilter();
  final ComponentContext ctx=context.mock(ComponentContext.class);
  final Dictionary props=new Hashtable<String,String[]>();
  props.put("sling.content.disposition.paths",new String[]{"/content/usergenerated/*"});
  props.put("sling.content.disposition.excluded.paths",new String[]{""});
  context.checking(new Expectations(){
{
      allowing(ctx).getProperties();
      will(returnValue(props));
    }
  }
);
  PrivateAccessor.invoke(contentDispositionFilter,"activate",new Class[]{ComponentContext.class},new Object[]{ctx});
  Set<String> contentDispositionPaths=(Set<String>)PrivateAccessor.getField(contentDispositionFilter,"contentDispositionPaths");
  Assert.assertEquals(0,contentDispositionPaths.size());
  String[] contentDispositionPathsPfx=(String[])PrivateAccessor.getField(contentDispositionFilter,"contentDispositionPathsPfx");
  Assert.assertEquals(1,contentDispositionPathsPfx.length);
  Map<String,Set<String>> contentTypesMapping=(Map<String,Set<String>>)PrivateAccessor.getField(contentDispositionFilter,"contentTypesMapping");
  Assert.assertEquals(0,contentTypesMapping.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.serviceusermapping.impl.ServiceUserMapperImplTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_amendmentServiceUserMapping(){
  @SuppressWarnings("serial") Map<String,Object> config=new HashMap<String,Object>(){
{
      put("user.mapping",new String[]{BUNDLE_SYMBOLIC1 + "=" + SAMPLE,BUNDLE_SYMBOLIC1 + ":" + SUB+ "="+ SAMPLE_SUB});
      put("user.default",NONE);
    }
  }
;
  final ServiceUserMapperImpl sum=new ServiceUserMapperImpl();
  sum.registerAsync=false;
  final ServiceRegistrationContextHelper context=new ServiceRegistrationContextHelper();
  sum.configure(context.getBundleContext(),config);
  TestCase.assertEquals(2,context.getRegistrations(ServiceUserMappedImpl.SERVICEUSERMAPPED).size());
  final MappingConfigAmendment mca1=new MappingConfigAmendment();
  @SuppressWarnings("serial") final Map<String,Object> mca1Config=new HashMap<String,Object>(){
{
      put("user.mapping",new String[]{BUNDLE_SYMBOLIC2 + "=" + ANOTHER});
      put(Constants.SERVICE_ID,1L);
      put(Constants.SERVICE_RANKING,100);
    }
  }
;
  mca1.configure(mca1Config);
  sum.bindAmendment(mca1,mca1Config);
  TestCase.assertEquals(3,context.getRegistrations(ServiceUserMappedImpl.SERVICEUSERMAPPED).size());
  final MappingConfigAmendment mca2=new MappingConfigAmendment();
  @SuppressWarnings("serial") final Map<String,Object> mca2Config=new HashMap<String,Object>(){
{
      put("user.mapping",new String[]{BUNDLE_SYMBOLIC2 + ":" + SUB+ "="+ ANOTHER_SUB});
      put(Constants.SERVICE_ID,2L);
      put(Constants.SERVICE_RANKING,200);
    }
  }
;
  mca2.configure(mca2Config);
  sum.bindAmendment(mca2,mca2Config);
  TestCase.assertEquals(4,context.getRegistrations(ServiceUserMappedImpl.SERVICEUSERMAPPED).size());
  sum.unbindAmendment(mca1,mca1Config);
  TestCase.assertEquals(3,context.getRegistrations(ServiceUserMappedImpl.SERVICEUSERMAPPED).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.servlethelpers.MockSlingHttpServletRequestTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeaders(){
  assertFalse(request.getHeaderNames().hasMoreElements());
  Calendar calendar=Calendar.getInstance();
  calendar.set(Calendar.MILLISECOND,0);
  long dateValue=calendar.getTimeInMillis();
  request.addHeader("header1","value1");
  request.addIntHeader("header2",5);
  request.addDateHeader("header3",dateValue);
  assertEquals("value1",request.getHeader("header1"));
  assertEquals(5,request.getIntHeader("header2"));
  assertEquals(dateValue,request.getDateHeader("header3"));
  request.setHeader("header1","value2");
  request.addIntHeader("header2",10);
  Enumeration<String> header1Values=request.getHeaders("header1");
  assertEquals("value2",header1Values.nextElement());
  assertFalse(header1Values.hasMoreElements());
  Enumeration<String> header2Values=request.getHeaders("header2");
  assertEquals("5",header2Values.nextElement());
  assertEquals("10",header2Values.nextElement());
  assertFalse(header2Values.hasMoreElements());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.servlethelpers.MockSlingHttpServletResponseTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeaders() throws Exception {
  assertEquals(0,response.getHeaderNames().size());
  response.addHeader("header1","value1");
  response.addIntHeader("header2",5);
  response.addDateHeader("header3",System.currentTimeMillis());
  assertEquals(3,response.getHeaderNames().size());
  assertTrue(response.containsHeader("header1"));
  assertEquals("value1",response.getHeader("header1"));
  assertEquals("5",response.getHeader("header2"));
  assertNotNull(response.getHeader("header3"));
  response.setHeader("header1","value2");
  response.addIntHeader("header2",10);
  assertEquals(3,response.getHeaderNames().size());
  Collection<String> header1Values=response.getHeaders("header1");
  assertEquals(1,header1Values.size());
  assertEquals("value2",header1Values.iterator().next());
  Collection<String> header2Values=response.getHeaders("header2");
  assertEquals(2,header2Values.size());
  Iterator<String> header2Iterator=header2Values.iterator();
  assertEquals("5",header2Iterator.next());
  assertEquals("10",header2Iterator.next());
  response.reset();
  assertEquals(0,response.getHeaderNames().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.servlets.get.impl.helpers.StreamRendererServletTest </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testResultingLength() throws IOException {
  final ByteArrayInputStream in=new ByteArrayInputStream("12345678".getBytes());
  final ByteArrayOutputStream out=new ByteArrayOutputStream();
  StreamRendererServlet.staticCopyRange(in,out,2,4);
  final String result=out.toString();
  assertEquals(2,result.length());
  assertEquals("34",result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.servlets.post.impl.RequestPropertyTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiValueWithBlankIgnoringBlanks() throws Throwable {
  Map<String,RequestProperty> props=collectContent(p("./param","true",""));
  assertEquals(1,props.size());
  RequestProperty prop=props.get("/test/path/param");
  assertTrue(prop.hasValues());
  assertTrue(prop.providesValue());
  assertEquals(2,prop.getStringValues().length);
  assertEquals("true",prop.getStringValues()[0]);
  assertEquals("",prop.getStringValues()[1]);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiValueWithBlanks() throws Throwable {
  Map<String,RequestProperty> props=collectContent(p("./param","true","",""));
  assertEquals(1,props.size());
  RequestProperty prop=props.get("/test/path/param");
  assertTrue(prop.hasValues());
  assertTrue(prop.providesValue());
  assertEquals(3,prop.getStringValues().length);
  assertEquals("true",prop.getStringValues()[0]);
  assertEquals("",prop.getStringValues()[1]);
  assertEquals("",prop.getStringValues()[2]);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleValueWithDefaultToIgnore() throws Throwable {
  Map<String,RequestProperty> props=collectContent(p("./param",""),p("./param@DefaultValue",":ignore"));
  assertEquals(1,props.size());
  RequestProperty prop=props.get("/test/path/param");
  assertTrue(prop.hasValues());
  assertFalse(prop.providesValue());
  assertEquals(0,prop.getStringValues().length);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiValueWithBlanksIgnoringBlanks() throws Throwable {
  Map<String,RequestProperty> props=collectContent(p("./param","true","",""),p("./param@IgnoreBlanks","true"));
  assertEquals(1,props.size());
  RequestProperty prop=props.get("/test/path/param");
  assertTrue(prop.hasValues());
  assertTrue(prop.providesValue());
  assertEquals(1,prop.getStringValues().length);
  assertEquals("true",prop.getStringValues()[0]);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleValueWithDefaultToNull() throws Throwable {
  Map<String,RequestProperty> props=collectContent(p("./param",""),p("./param@DefaultValue",":null"));
  assertEquals(1,props.size());
  RequestProperty prop=props.get("/test/path/param");
  assertTrue(prop.hasValues());
  assertTrue(prop.providesValue());
  assertNull(prop.getStringValues());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiValueWithBlank() throws Throwable {
  Map<String,RequestProperty> props=collectContent(p("./param","true",""));
  assertEquals(1,props.size());
  RequestProperty prop=props.get("/test/path/param");
  assertTrue(prop.hasValues());
  assertTrue(prop.providesValue());
  assertEquals(2,prop.getStringValues().length);
  assertEquals("true",prop.getStringValues()[0]);
  assertEquals("",prop.getStringValues()[1]);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleValueIgnoringBlanks() throws Throwable {
  Map<String,RequestProperty> props=collectContent(p("./param",""),p("./param@IgnoreBlanks","true"));
  assertEquals(1,props.size());
  RequestProperty prop=props.get("/test/path/param");
  assertFalse(prop.hasValues());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNullSingleValueWithDefaultToIgnore() throws Throwable {
  Map<String,RequestProperty> props=collectContent(p("./param@DefaultValue",":ignore"));
  assertEquals(1,props.size());
  RequestProperty prop=props.get("/test/path/param");
  assertFalse(prop.hasValues());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiValue() throws Throwable {
  Map<String,RequestProperty> props=collectContent(p("./param","true","false"));
  assertEquals(1,props.size());
  RequestProperty prop=props.get("/test/path/param");
  assertTrue(prop.hasValues());
  assertTrue(prop.providesValue());
  assertEquals(2,prop.getStringValues().length);
  assertEquals("true",prop.getStringValues()[0]);
  assertEquals("false",prop.getStringValues()[1]);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiValueWithAllBlanksIgnoringBlanks() throws Throwable {
  Map<String,RequestProperty> props=collectContent(p("./param","","",""),p("./param@IgnoreBlanks","true"));
  assertEquals(1,props.size());
  RequestProperty prop=props.get("/test/path/param");
  assertFalse(prop.hasValues());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSingleValueWithBlank() throws Throwable {
  Map<String,RequestProperty> props=collectContent(p("./param",""));
  assertEquals(1,props.size());
  RequestProperty prop=props.get("/test/path/param");
  assertTrue(prop.hasValues());
  assertFalse(prop.providesValue());
  assertEquals(1,prop.getStringValues().length);
  assertEquals("",prop.getStringValues()[0]);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiValueWithAllBlanks() throws Throwable {
  Map<String,RequestProperty> props=collectContent(p("./param","","",""));
  assertEquals(1,props.size());
  RequestProperty prop=props.get("/test/path/param");
  assertTrue(prop.hasValues());
  assertFalse(prop.providesValue());
  assertEquals(3,prop.getStringValues().length);
  assertEquals("",prop.getStringValues()[0]);
  assertEquals("",prop.getStringValues()[1]);
  assertEquals("",prop.getStringValues()[2]);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.servlets.resolver.internal.SlingServletResolverTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateServiceRegistrationProperties() throws Throwable {
  MockServiceReference msr=new MockServiceReference(null);
  msr.setProperty(ServletResolverConstants.SLING_SERVLET_RESOURCE_TYPES,"sample");
  msr.setProperty(ServletResolverConstants.SLING_SERVLET_METHODS,"GET");
  Field srpf=SlingServletResolver.class.getDeclaredField("servletResourceProviderFactory");
  srpf.setAccessible(true);
  ServletResourceProviderFactory factory=(ServletResourceProviderFactory)srpf.get(servletResolver);
  ServletResourceProvider servlet=factory.create(msr);
  Method createServiceProperties=SlingServletResolver.class.getDeclaredMethod("createServiceProperties",ServiceReference.class,ServletResourceProvider.class,String.class);
  createServiceProperties.setAccessible(true);
  assertNull(msr.getProperty(Constants.SERVICE_RANKING));
  @SuppressWarnings("unchecked") final Dictionary<String,Object> p1=(Dictionary<String,Object>)createServiceProperties.invoke(servletResolver,msr,servlet,"/a");
  assertNull(p1.get(Constants.SERVICE_RANKING));
  Object nonIntValue="Some Non Integer Value";
  msr.setProperty(Constants.SERVICE_RANKING,nonIntValue);
  assertEquals(nonIntValue,msr.getProperty(Constants.SERVICE_RANKING));
  @SuppressWarnings("unchecked") final Dictionary<String,Object> p2=(Dictionary<String,Object>)createServiceProperties.invoke(servletResolver,msr,servlet,"/a");
  assertNull(p2.get(Constants.SERVICE_RANKING));
  Object intValue=Integer.valueOf(123);
  msr.setProperty(Constants.SERVICE_RANKING,intValue);
  assertEquals(intValue,msr.getProperty(Constants.SERVICE_RANKING));
  @SuppressWarnings("unchecked") final Dictionary<String,Object> p3=(Dictionary<String,Object>)createServiceProperties.invoke(servletResolver,msr,servlet,"/a");
  assertEquals(intValue,p3.get(Constants.SERVICE_RANKING));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.settings.impl.SlingSettingsServiceImplTest </h4><pre class="type-11 type-9 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetSlingIdFromTooShortData() throws IOException {
  final String data=RandomStringUtils.randomAscii(8);
  SlingIdUtil.writeSlingId(slingIdFile,data);
  final SlingSettingsService slingSettingsService=createSlingSettingsService(slingIdFile,optionsFile);
  final String slingId=slingSettingsService.getSlingId();
  assertNotNull(slingId);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testGetSlingIdCreating() throws IOException {
  final SlingSettingsService slingSettingsService=createSlingSettingsService(slingIdFile,optionsFile);
  final String slingId=slingSettingsService.getSlingId();
  assertNotNull(slingId);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSlingIdExisting() throws IOException {
  final String expected=SlingIdUtil.createSlingId();
  SlingIdUtil.writeSlingId(slingIdFile,expected);
  final SlingSettingsService slingSettingsService=createSlingSettingsService(slingIdFile,optionsFile);
  final String slingId=slingSettingsService.getSlingId();
  assertNotNull(slingId);
  assertEquals(expected,slingId);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSlingIdFromTooLargeData() throws IOException {
  final String expected=SlingIdUtil.createSlingId();
  final String data=expected + RandomStringUtils.randomAscii(1024 * 1024);
  SlingIdUtil.writeSlingId(slingIdFile,data);
  final SlingSettingsService slingSettingsService=createSlingSettingsService(slingIdFile,optionsFile);
  final String slingId=slingSettingsService.getSlingId();
  assertNotNull(slingId);
  assertEquals(expected,slingId);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.superimposing.impl.SuperimposingManagerImplTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testFindAllSuperimposings() throws InterruptedException, LoginException, RepositoryException {
  when(componentContextProperties.get(SuperimposingManagerImpl.FINDALLQUERIES_PROPERTY)).thenReturn("syntax|query");
  when(resourceResolver.findResources("query","syntax")).then(new Answer<Iterator<Resource>>(){
    public Iterator<Resource> answer(    InvocationOnMock invocation){
      return Arrays.asList(new Resource[]{prepareSuperimposingResource(SUPERIMPOSED_PATH,ORIGINAL_PATH,false,false)}).iterator();
    }
  }
);
  initialize(true);
  List<SuperimposingResourceProvider> providers=IteratorUtils.toList(underTest.getRegisteredProviders());
  assertEquals(1,providers.size());
  SuperimposingResourceProvider provider=providers.iterator().next();
  assertEquals(SUPERIMPOSED_PATH,provider.getRootPath());
  assertEquals(ORIGINAL_PATH,provider.getSourcePath());
  assertFalse(provider.isOverlayable());
  verify(bundleContext).registerService(anyString(),same(provider),any(Dictionary.class));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testSuperimposedResourceCreateMove() throws InterruptedException, LoginException, RepositoryException {
  when(componentContextProperties.get(SuperimposingManagerImpl.FINDALLQUERIES_PROPERTY)).thenReturn("syntax|query");
  initialize(true);
  final Resource superimposedResource=prepareSuperimposingResource(SUPERIMPOSED_PATH,ORIGINAL_PATH,false,false);
  underTest.onEvent(prepareNodeCreateEvent(superimposedResource));
  String oldPath=superimposedResource.getPath();
  moveSuperimposedResource(superimposedResource,"/new/path");
  when(resourceResolver.findResources("query","syntax")).then(new Answer<Iterator<Resource>>(){
    public Iterator<Resource> answer(    InvocationOnMock invocation){
      return Arrays.asList(new Resource[]{superimposedResource}).iterator();
    }
  }
);
  underTest.onEvent(prepareNodeMoveEvent(superimposedResource,oldPath));
  List<SuperimposingResourceProvider> providers=IteratorUtils.toList(underTest.getRegisteredProviders());
  assertEquals(1,providers.size());
  SuperimposingResourceProvider provider=providers.iterator().next();
  assertEquals("/new/path",provider.getRootPath());
  assertEquals(ORIGINAL_PATH,provider.getSourcePath());
  assertFalse(provider.isOverlayable());
  verify(bundleContext).registerService(anyString(),same(provider),any(Dictionary.class));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testSuperimposedResourceCreateUpdateRemove() throws InterruptedException, LoginException, RepositoryException {
  initialize(true);
  Resource superimposedResource=prepareSuperimposingResource(SUPERIMPOSED_PATH,ORIGINAL_PATH,false,false);
  underTest.onEvent(prepareNodeCreateEvent(superimposedResource));
  List<SuperimposingResourceProvider> providers=IteratorUtils.toList(underTest.getRegisteredProviders());
  assertEquals(1,providers.size());
  SuperimposingResourceProvider provider=providers.iterator().next();
  assertEquals(SUPERIMPOSED_PATH,provider.getRootPath());
  assertEquals(ORIGINAL_PATH,provider.getSourcePath());
  assertFalse(provider.isOverlayable());
  verify(bundleContext).registerService(anyString(),same(provider),any(Dictionary.class));
  superimposedResource.adaptTo(ValueMap.class).put(PROP_SUPERIMPOSE_SOURCE_PATH,"/other/path");
  underTest.onEvent(prepareNodeChangeEvent(superimposedResource));
  providers=IteratorUtils.toList(underTest.getRegisteredProviders());
  assertEquals(1,providers.size());
  SuperimposingResourceProvider provider2=providers.iterator().next();
  assertEquals(SUPERIMPOSED_PATH,provider2.getRootPath());
  assertEquals("/other/path",provider2.getSourcePath());
  assertFalse(provider2.isOverlayable());
  verify(bundleContext).registerService(anyString(),same(provider2),any(Dictionary.class));
  underTest.onEvent(prepareNodeRemoveEvent(superimposedResource));
  providers=IteratorUtils.toList(underTest.getRegisteredProviders());
  assertEquals(0,providers.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.tenant.internal.TenantImplTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_property(){
  @SuppressWarnings("serial") Resource r=new MockResource(pt1,new HashMap<String,Object>(){
{
      put(p1,p1);
    }
  }
);
  Tenant tenant1=new TenantImpl(r);
  TestCase.assertEquals(t1,tenant1.getId());
  TestCase.assertNull(tenant1.getName());
  TestCase.assertNull(tenant1.getDescription());
  Iterator<String> pi=tenant1.getPropertyNames();
  TestCase.assertTrue(propNamesTest.contains(pi.next()));
  TestCase.assertFalse(pi.hasNext());
  TestCase.assertNull(tenant1.getProperty(Tenant.PROP_NAME));
  TestCase.assertNull(tenant1.getProperty(Tenant.PROP_DESCRIPTION));
  TestCase.assertEquals(p1,tenant1.getProperty(p1));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_name_description(){
  @SuppressWarnings("serial") Resource r=new MockResource(pt1,new HashMap<String,Object>(){
{
      put(Tenant.PROP_NAME,n1);
      put(Tenant.PROP_DESCRIPTION,d1);
    }
  }
);
  Tenant tenant1=new TenantImpl(r);
  TestCase.assertEquals(t1,tenant1.getId());
  TestCase.assertEquals(n1,tenant1.getName());
  TestCase.assertEquals(d1,tenant1.getDescription());
  Iterator<String> pi=tenant1.getPropertyNames();
  TestCase.assertTrue(propNamesDefault.contains(pi.next()));
  TestCase.assertTrue(propNamesDefault.contains(pi.next()));
  TestCase.assertFalse(pi.hasNext());
  TestCase.assertEquals(n1,tenant1.getProperty(Tenant.PROP_NAME));
  TestCase.assertEquals(d1,tenant1.getProperty(Tenant.PROP_DESCRIPTION));
  TestCase.assertNull(tenant1.getProperty(p1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.jcr.MockNodeTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProperties() throws RepositoryException {
  PropertyIterator properties=this.node1.getProperties();
  Map<String,Property> props=propertiesToMap(properties);
  assertEquals(2,properties.getSize());
  assertEquals(this.prop1,props.get("prop1"));
  assertTrue(this.node1.hasProperties());
  assertTrue(this.node11.hasProperties());
  properties=this.node1.getProperties("^prop.*$");
  assertEquals(1,properties.getSize());
  assertEquals(this.prop1,properties.next());
  properties=this.node1.getProperties("unknown?");
  assertEquals(0,properties.getSize());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.jcr.MockQueryManagerTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testQueryResults_MultipleResultHandlers() throws RepositoryException {
  final List<Node> sampleNodes2=ImmutableList.of(sampleNodes.get(0));
  MockJcr.addQueryResultHandler(session,new MockQueryResultHandler(){
    @Override public MockQueryResult executeQuery(    MockQuery query){
      if (StringUtils.equals(query.getStatement(),"query2")) {
        return new MockQueryResult(sampleNodes2);
      }
      return null;
    }
  }
);
  MockJcr.addQueryResultHandler(session,new MockQueryResultHandler(){
    @Override public MockQueryResult executeQuery(    MockQuery query){
      if (StringUtils.equals(query.getStatement(),"query1")) {
        return new MockQueryResult(sampleNodes);
      }
      return null;
    }
  }
);
  Query query=queryManager.createQuery("query1",Query.JCR_SQL2);
  QueryResult result=query.execute();
  assertEquals(sampleNodes,ImmutableList.copyOf(result.getNodes()));
  query=queryManager.createQuery("query2",Query.JCR_SQL2);
  result=query.execute();
  assertEquals(sampleNodes2,ImmutableList.copyOf(result.getNodes()));
  query=queryManager.createQuery("query3",Query.JCR_SQL2);
  result=query.execute();
  assertFalse(result.getNodes().hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.osgi.MockBundleTest </h4><pre class="type-11 type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getEntryPaths_leadingSlash(){
  Enumeration<String> entryPaths=bundle.getEntryPaths("bundleData");
  List<String> paths=Collections.list(entryPaths);
  assertThat(paths.size(),CoreMatchers.is(1));
  assertTrue(paths.contains("bundleData/nested/"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void getEntryPaths_empty(){
  Enumeration<String> entryPaths=bundle.getEntryPaths("/");
  List<String> paths=Collections.list(entryPaths);
  assertTrue(paths.size() >= 3);
  assertTrue(paths.contains("bundleData/"));
  assertTrue(paths.contains("OSGI-INF/"));
  assertTrue(paths.contains("META-INF/"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void getEntryPaths_slash(){
  Enumeration<String> entryPaths=bundle.getEntryPaths("/");
  List<String> paths=Collections.list(entryPaths);
  assertTrue(paths.size() >= 3);
  assertTrue(paths.contains("bundleData/"));
  assertTrue(paths.contains("OSGI-INF/"));
  assertTrue(paths.contains("META-INF/"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getEntryPaths_Nested(){
  Enumeration<String> entryPaths=bundle.getEntryPaths("bundleData/nested");
  List<String> paths=Collections.list(entryPaths);
  assertThat(paths.size(),CoreMatchers.is(2));
  assertTrue(paths.contains("bundleData/nested/first.txt"));
  assertTrue(paths.contains("bundleData/nested/second.txt"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getEntryPaths(){
  Enumeration<String> entryPaths=bundle.getEntryPaths("bundleData");
  List<String> paths=Collections.list(entryPaths);
  assertThat(paths.size(),CoreMatchers.is(1));
  assertTrue(paths.contains("bundleData/nested/"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.osgi.MockComponentContextTest </h4><pre class="type-11 type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
@Test public void testLocateService(){
  String clazz=String.class.getName();
  Object service=new Object();
  underTest.getBundleContext().registerService(clazz,service,null);
  ServiceReference<?> ref=underTest.getBundleContext().getServiceReference(clazz);
  Object locatedService=underTest.locateService(null,ref);
  assertSame(service,locatedService);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProvidedProperties(){
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put("prop1","value1");
  props.put("prop2",25);
  ComponentContext componentContextWithProperties=MockOsgi.newComponentContext(props);
  Dictionary contextProps=componentContextWithProperties.getProperties();
  assertEquals(2,contextProps.size());
  assertEquals("value1",contextProps.get("prop1"));
  assertEquals(25,contextProps.get("prop2"));
}

</code></pre>

<br>
<pre class="type-11 type-7 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetUsingBundle(){
  assertNull(underTest.getUsingBundle());
  Bundle usingBundle=mock(Bundle.class);
  ComponentContext contextWithUsingBundle=MockOsgi.componentContext().usingBundle(usingBundle).build();
  assertSame(usingBundle,contextWithUsingBundle.getUsingBundle());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.osgi.OsgiMetadataUtilTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReferences(){
  OsgiMetadata metadata=OsgiMetadataUtil.getMetadata(OsgiServiceUtilTest.Service3.class);
  List<Reference> references=metadata.getReferences();
  assertEquals(4,references.size());
  Reference ref1=references.get(2);
  assertEquals("reference2",ref1.getName());
  assertEquals("org.apache.sling.testing.mock.osgi.OsgiServiceUtilTest$ServiceInterface2",ref1.getInterfaceType());
  assertEquals(ReferenceCardinality.MANDATORY_MULTIPLE,ref1.getCardinality());
  assertEquals("bindReference2",ref1.getBind());
  assertEquals("unbindReference2",ref1.getUnbind());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.osgi.OsgiServiceUtilActivateDeactivateTest </h4><pre class="type-11 type-13 type-9 type-7 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testService6(){
  Service6 service=new Service6();
  assertTrue(MockOsgi.activate(service,bundleContext,map));
  assertTrue(service.isActivated());
  assertSame(bundleContext,service.getComponentContext().getBundleContext());
  assertSame(bundleContext,service.getBundleContext());
  assertEquals(map,ImmutableMap.copyOf(service.getMap()));
  assertTrue(MockOsgi.deactivate(service,bundleContext,map));
  assertFalse(service.isActivated());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testService4(){
  Service4 service=new Service4();
  assertTrue(MockOsgi.activate(service,bundleContext,map));
  assertTrue(service.isActivated());
  assertEquals(map,ImmutableMap.copyOf(service.getMap()));
  assertTrue(MockOsgi.deactivate(service,bundleContext,map));
  assertFalse(service.isActivated());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testService3(){
  Service3 service=new Service3();
  assertTrue(MockOsgi.activate(service,bundleContext,map));
  assertTrue(service.isActivated());
  assertEquals(map,ImmutableMap.copyOf(service.getMap()));
  assertTrue(MockOsgi.deactivate(service,bundleContext,map));
  assertFalse(service.isActivated());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-7 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testService7(){
  Service7 service=new Service7();
  assertTrue(MockOsgi.activate(service,bundleContext,map));
  assertTrue(service.isActivated());
  assertSame(bundleContext,service.getComponentContext().getBundleContext());
  assertSame(bundleContext,service.getBundleContext());
  assertEquals(map,ImmutableMap.copyOf(service.getMap()));
  assertTrue(MockOsgi.deactivate(service,bundleContext,map));
  assertFalse(service.isActivated());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.osgi.OsgiServiceUtilTest </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testService3_Config(){
  BundleContext bundleContext=MockOsgi.newBundleContext();
  Map<String,Object> initialProperites=ImmutableMap.<String,Object>of("prop1","value1");
  Service3 service3=new Service3();
  MockOsgi.activate(service3,bundleContext,initialProperites);
  assertEquals(initialProperites.get("prop1"),service3.getConfig().get("prop1"));
  Map<String,Object> newProperties=ImmutableMap.<String,Object>of("prop2","value2");
  MockOsgi.modified(service3,bundleContext,newProperties);
  assertEquals(newProperties.get("prop2"),service3.getConfig().get("prop2"));
  newProperties=ImmutableMap.<String,Object>of("prop3","value3");
  Dictionary<String,Object> newPropertiesDictonary=new Hashtable<String,Object>(newProperties);
  MockOsgi.modified(service3,bundleContext,newPropertiesDictonary);
  assertEquals(newProperties.get("prop3"),service3.getConfig().get("prop3"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-7 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testService3(){
  Service3 service3=new Service3();
  assertTrue(MockOsgi.injectServices(service3,bundleContext));
  Dictionary<String,Object> service3Config=new Hashtable<String,Object>();
  service3Config.put("prop1","value1");
  assertTrue(MockOsgi.activate(service3,bundleContext,service3Config));
  assertNotNull(service3.getComponentContext());
  assertEquals(service3Config.get("prop1"),service3.getComponentContext().getProperties().get("prop1"));
  assertSame(service1,service3.getReference1());
  List<ServiceInterface2> references2=service3.getReferences2();
  assertEquals(1,references2.size());
  assertSame(service2,references2.get(0));
  List<ServiceSuperInterface3> references3=service3.getReferences3();
  assertEquals(1,references3.size());
  assertSame(service2,references3.get(0));
  List<Map<String,Object>> reference3Configs=service3.getReference3Configs();
  assertEquals(1,reference3Configs.size());
  assertEquals(200,reference3Configs.get(0).get(Constants.SERVICE_RANKING));
  assertTrue(MockOsgi.deactivate(service3,bundleContext));
  assertNull(service3.getComponentContext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.osgi.context.OsgiContextImplTest </h4><pre class="type-11 type-9 type-7 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterServiceWithProperties(){
  Map<String,Object> props=new HashMap<String,Object>();
  props.put("prop1","value1");
  Set<String> myService=new HashSet<String>();
  context.registerService(Set.class,myService,props);
  ServiceReference<?> serviceReference=context.bundleContext().getServiceReference(Set.class.getName());
  Object serviceResult=context.bundleContext().getService(serviceReference);
  assertSame(myService,serviceResult);
  assertEquals("value1",serviceReference.getProperty("prop1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.sling.builder.ContentBuilderTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResourceWithProperties(){
  Resource resource=context.create().resource("/content/test1/resource2",ImmutableMap.<String,Object>builder().put("jcr:title","Test Title").put("stringProp","value1").build());
  assertNotNull(resource);
  assertEquals("resource2",resource.getName());
  ValueMap props=ResourceUtil.getValueMap(resource);
  assertEquals("Test Title",props.get("jcr:title",String.class));
  assertEquals("value1",props.get("stringProp",String.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.sling.loader.AbstractContentLoaderJsonDamTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDamAssetMetadata() throws IOException {
  Resource assetMetadata=context.resourceResolver().getResource(path + "/sample/portraits/scott_reynolds.jpg/jcr:content/metadata");
  ValueMap props=ResourceUtil.getValueMap(assetMetadata);
  assertEquals("Canon\u0000",props.get("tiff:Make",String.class));
  assertEquals((Long)807L,props.get("tiff:ImageWidth",Long.class));
  assertEquals((Integer)595,props.get("tiff:ImageLength",Integer.class));
  assertEquals(4.64385986328125d,props.get("dam:ApertureValue",Double.class),0.00000000001d);
  assertArrayEquals(new String[]{"stockphotography:business/business_people","properties:style/color","properties:orientation/landscape"},props.get("app:tags",String[].class));
  Resource binaryMetadata=context.resourceResolver().getResource(path + "/sample/portraits/scott_reynolds.jpg/jcr:content/renditions/original/jcr:content");
  ValueMap binaryProps=ResourceUtil.getValueMap(binaryMetadata);
  InputStream is=binaryProps.get(JcrConstants.JCR_DATA,InputStream.class);
  assertNotNull(is);
  byte[] binaryData=IOUtils.toByteArray(is);
  assertEquals(0,binaryData.length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.sling.loader.AbstractContentLoaderJsonTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testContentProperties(){
  Resource resource=context.resourceResolver().getResource(path + "/sample/en/jcr:content/header");
  ValueMap props=ResourceUtil.getValueMap(resource);
  assertEquals("/content/dam/sample/header.png",props.get("imageReference",String.class));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUTF8Chars(){
  Resource resource=context.resourceResolver().getResource(path + "/sample/en/jcr:content");
  ValueMap props=ResourceUtil.getValueMap(resource);
  assertEquals("",props.get("utf8Property"));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPageContentProperties(){
  Resource resource=context.resourceResolver().getResource(path + "/sample/en/toolbar/profiles/jcr:content");
  ValueMap props=ResourceUtil.getValueMap(resource);
  assertEquals(true,props.get("hideInNav",Boolean.class));
  assertEquals((Long)1234567890123L,props.get("longProp",Long.class));
  assertEquals(1.2345d,props.get("decimalProp",Double.class),0.00001d);
  assertEquals(true,props.get("booleanProp",Boolean.class));
  assertArrayEquals(new Long[]{1234567890123L,55L},props.get("longPropMulti",Long[].class));
  assertArrayEquals(new Double[]{1.2345d,1.1d},props.get("decimalPropMulti",Double[].class));
  assertArrayEquals(new Boolean[]{true,false},props.get("booleanPropMulti",Boolean[].class));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCalendarISO8601Format(){
  Resource resource=context.resourceResolver().getResource(path + "/sample/en/jcr:content");
  ValueMap props=ResourceUtil.getValueMap(resource);
  Calendar calendar=props.get("dateISO8601String",Calendar.class);
  assertNotNull(calendar);
  calendar.setTimeZone(TimeZone.getTimeZone("GMT+2"));
  assertEquals(2014,calendar.get(Calendar.YEAR));
  assertEquals(4,calendar.get(Calendar.MONTH) + 1);
  assertEquals(22,calendar.get(Calendar.DAY_OF_MONTH));
  assertEquals(15,calendar.get(Calendar.HOUR_OF_DAY));
  assertEquals(11,calendar.get(Calendar.MINUTE));
  assertEquals(24,calendar.get(Calendar.SECOND));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCalendarEcmaFormat(){
  Resource resource=context.resourceResolver().getResource(path + "/sample/en/jcr:content");
  ValueMap props=ResourceUtil.getValueMap(resource);
  Calendar calendar=props.get("app:lastModified",Calendar.class);
  assertNotNull(calendar);
  calendar.setTimeZone(TimeZone.getTimeZone("GMT+2"));
  assertEquals(2014,calendar.get(Calendar.YEAR));
  assertEquals(4,calendar.get(Calendar.MONTH) + 1);
  assertEquals(22,calendar.get(Calendar.DAY_OF_MONTH));
  assertEquals(15,calendar.get(Calendar.HOUR_OF_DAY));
  assertEquals(11,calendar.get(Calendar.MINUTE));
  assertEquals(24,calendar.get(Calendar.SECOND));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.sling.resource.AbstractJcrNamespaceTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSling4362() throws RepositoryException {
  BundleContext bundleContext=MockOsgi.newBundleContext();
  ResourceResolver resolver=MockSling.newResourceResolver(getResourceResolverType(),bundleContext);
  ContentLoader contentLoader=new ContentLoader(resolver);
  contentLoader.json("/json-import-samples/SLING-4362.json",context.uniqueRoot().content() + "/foo");
  Resource resource=resolver.getResource(context.uniqueRoot().content() + "/foo");
  ValueMap props=ResourceUtil.getValueMap(resource);
  assertEquals("fooType",props.get(SLING_RESOURCE_TYPE_PROPERTY));
  assertEquals("fooType",resource.getResourceType());
  MockOsgi.shutdown(bundleContext);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSling4362_ViaContextRule() throws RepositoryException {
  ResourceResolver resolver=context.resourceResolver();
  ContentLoader contentLoader=new ContentLoader(resolver);
  contentLoader.json("/json-import-samples/SLING-4362.json",context.uniqueRoot().content() + "/foo");
  Resource resource=resolver.getResource(context.uniqueRoot().content() + "/foo");
  ValueMap props=ResourceUtil.getValueMap(resource);
  assertEquals("fooType",props.get(SLING_RESOURCE_TYPE_PROPERTY));
  assertEquals("fooType",resource.getResourceType());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.sling.resource.AbstractJcrResourceResolverTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateNodeWithPrimaryType() throws RepositoryException, PersistenceException {
  Resource parent=context.resourceResolver().getResource(getTestRootNode().getPath());
  Resource child=context.resourceResolver().create(parent,"nodeTypeResource",ImmutableMap.<String,Object>builder().put(SLING_RESOURCE_TYPE_PROPERTY,JcrConstants.NT_UNSTRUCTURED).build());
  assertNotNull(child);
  assertEquals(JcrConstants.NT_UNSTRUCTURED,child.getResourceType());
  assertEquals(JcrConstants.NT_UNSTRUCTURED,child.adaptTo(Node.class).getPrimaryNodeType().getName());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetResourcesAndValues() throws IOException, RepositoryException {
  Resource resource1=context.resourceResolver().getResource(getTestRootNode().getPath() + "/node1");
  assertNotNull(resource1);
  assertEquals("node1",resource1.getName());
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(STRING_VALUE,props.get("stringProp",String.class));
  assertArrayEquals(STRING_ARRAY_VALUE,props.get("stringArrayProp",String[].class));
  assertEquals((Integer)INTEGER_VALUE,props.get("integerProp",Integer.class));
  assertEquals(DOUBLE_VALUE,props.get("doubleProp",Double.class),0.0001);
  assertEquals(BOOLEAN_VALUE,props.get("booleanProp",Boolean.class));
  assertEquals(DATE_VALUE,props.get("dateProp",Date.class));
  assertEquals(CALENDAR_VALUE.getTime(),props.get("calendarProp",Calendar.class).getTime());
  Resource binaryPropResource=resource1.getChild("binaryProp");
  InputStream is=binaryPropResource.adaptTo(InputStream.class);
  byte[] dataFromResource=IOUtils.toByteArray(is);
  is.close();
  assertArrayEquals(BINARY_VALUE,dataFromResource);
  InputStream is2=binaryPropResource.adaptTo(InputStream.class);
  byte[] dataFromResource2=IOUtils.toByteArray(is2);
  is2.close();
  assertArrayEquals(BINARY_VALUE,dataFromResource2);
  List<Resource> children=ImmutableList.copyOf(resource1.listChildren());
  assertEquals(2,children.size());
  assertEquals("node11",children.get(0).getName());
  assertEquals("node12",children.get(1).getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.sling.resource.AbstractSlingCrudResourceResolverTest </h4><pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleProperties() throws IOException {
  Resource resource1=context.resourceResolver().getResource(getTestRootResource().getPath() + "/node1");
  assertNotNull(resource1);
  assertEquals("node1",resource1.getName());
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(STRING_VALUE,props.get("stringProp",String.class));
  assertArrayEquals(STRING_ARRAY_VALUE,props.get("stringArrayProp",String[].class));
  assertEquals((Integer)INTEGER_VALUE,props.get("integerProp",Integer.class));
  assertEquals(DOUBLE_VALUE,props.get("doubleProp",Double.class),0.0001);
  assertEquals(BOOLEAN_VALUE,props.get("booleanProp",Boolean.class));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCalendarProperty() throws IOException {
  Resource resource1=context.resourceResolver().getResource(getTestRootResource().getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(CALENDAR_VALUE.getTime(),props.get("calendarProp",Calendar.class).getTime());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleProperties_DeepPathAccess() throws IOException {
  Resource resource1=context.resourceResolver().getResource(testRoot.getPath());
  assertNotNull(resource1);
  assertEquals(testRoot.getName(),resource1.getName());
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(STRING_VALUE,props.get("node1/stringProp",String.class));
  assertArrayEquals(STRING_ARRAY_VALUE,props.get("node1/stringArrayProp",String[].class));
  assertEquals((Integer)INTEGER_VALUE,props.get("node1/integerProp",Integer.class));
  assertEquals(DOUBLE_VALUE,props.get("node1/doubleProp",Double.class),0.0001);
  assertEquals(BOOLEAN_VALUE,props.get("node1/booleanProp",Boolean.class));
  assertEquals(STRING_VALUE,props.get("node1/node11/stringProp11",String.class));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBinaryData() throws IOException {
  Resource resource1=context.resourceResolver().getResource(getTestRootResource().getPath() + "/node1");
  Resource binaryPropResource=resource1.getChild("binaryProp");
  InputStream is=binaryPropResource.adaptTo(InputStream.class);
  byte[] dataFromResource=IOUtils.toByteArray(is);
  is.close();
  assertArrayEquals(BINARY_VALUE,dataFromResource);
  InputStream is2=ResourceUtil.getValueMap(resource1).get("binaryProp",InputStream.class);
  byte[] dataFromResource2=IOUtils.toByteArray(is2);
  is2.close();
  assertArrayEquals(BINARY_VALUE,dataFromResource2);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCalendarPropertyToDate() throws IOException {
  Resource resource1=context.resourceResolver().getResource(getTestRootResource().getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  Date dateValue=props.get("calendarProp",Date.class);
  assertNotNull(dateValue);
  assertEquals(CALENDAR_VALUE.getTime(),dateValue);
}

</code></pre>

<br>
<pre class="type-11 type-12 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDatePropertyToCalendar() throws IOException {
  Resource resource1=context.resourceResolver().getResource(getTestRootResource().getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  if (getResourceResolverType() != ResourceResolverType.JCR_MOCK && getResourceResolverType() != ResourceResolverType.JCR_JACKRABBIT && getResourceResolverType() != ResourceResolverType.JCR_OAK) {
    Calendar calendarValue=props.get("dateProp",Calendar.class);
    assertNotNull(calendarValue);
    assertEquals(DATE_VALUE,calendarValue.getTime());
  }
}

</code></pre>

<br>
<pre class="type-11 type-12 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDateProperty() throws IOException {
  Resource resource1=context.resourceResolver().getResource(getTestRootResource().getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  if (getResourceResolverType() != ResourceResolverType.JCR_MOCK && getResourceResolverType() != ResourceResolverType.JCR_JACKRABBIT && getResourceResolverType() != ResourceResolverType.JCR_OAK) {
    assertEquals(DATE_VALUE,props.get("dateProp",Date.class));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.resourceresolver.SlingCrudResourceResolverTest </h4><pre class="type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleProperties_DeepPathAccess() throws IOException {
  Resource resource1=resourceResolver.getResource(testRoot.getPath());
  assertNotNull(resource1);
  assertEquals(testRoot.getName(),resource1.getName());
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(STRING_VALUE,props.get("node1/stringProp",String.class));
  assertArrayEquals(STRING_ARRAY_VALUE,props.get("node1/stringArrayProp",String[].class));
  assertEquals((Integer)INTEGER_VALUE,props.get("node1/integerProp",Integer.class));
  assertEquals(DOUBLE_VALUE,props.get("node1/doubleProp",Double.class),0.0001);
  assertEquals(BOOLEAN_VALUE,props.get("node1/booleanProp",Boolean.class));
  assertEquals(STRING_VALUE,props.get("node1/node11/stringProp11",String.class));
  assertTrue(STRING_VALUE,props.containsKey("node1/stringProp"));
  assertFalse(STRING_VALUE,props.containsKey("node1/unknownProp"));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCalendarProperty() throws IOException {
  Resource resource1=resourceResolver.getResource(testRoot.getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(CALENDAR_VALUE.getTime(),props.get("calendarProp",Calendar.class).getTime());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBinaryData() throws IOException {
  Resource resource1=resourceResolver.getResource(testRoot.getPath() + "/node1");
  Resource binaryPropResource=resource1.getChild("binaryProp");
  InputStream is=binaryPropResource.adaptTo(InputStream.class);
  byte[] dataFromResource=IOUtils.toByteArray(is);
  is.close();
  assertArrayEquals(BINARY_VALUE,dataFromResource);
  InputStream is2=ResourceUtil.getValueMap(resource1).get("binaryProp",InputStream.class);
  byte[] dataFromResource2=IOUtils.toByteArray(is2);
  is2.close();
  assertArrayEquals(BINARY_VALUE,dataFromResource2);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStringToCalendarConversion() throws IOException {
  Resource resource1=resourceResolver.getResource(testRoot.getPath() + "/node1");
  ModifiableValueMap modProps=resource1.adaptTo(ModifiableValueMap.class);
  modProps.put("dateISO8601String",ISO8601.format(CALENDAR_VALUE));
  resourceResolver.commit();
  resource1=resourceResolver.getResource(testRoot.getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(CALENDAR_VALUE.getTime(),props.get("calendarProp",Calendar.class).getTime());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetConvertedToNullType(){
  Resource resource1=resourceResolver.getResource(testRoot.getPath() + "/node1");
  Object propValue=ResourceUtil.getValueMap(resource1).get("stringProp",null);
  assertEquals(STRING_VALUE,propValue);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDatePropertyToCalendar() throws IOException {
  Resource resource1=resourceResolver.getResource(testRoot.getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  Calendar calendarValue=props.get("dateProp",Calendar.class);
  assertNotNull(calendarValue);
  assertEquals(DATE_VALUE,calendarValue.getTime());
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDateProperty() throws IOException {
  Resource resource1=resourceResolver.getResource(testRoot.getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(DATE_VALUE,props.get("dateProp",Date.class));
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCalendarPropertyToDate() throws IOException {
  Resource resource1=resourceResolver.getResource(testRoot.getPath() + "/node1");
  ValueMap props=ResourceUtil.getValueMap(resource1);
  Date dateValue=props.get("calendarProp",Date.class);
  assertNotNull(dateValue);
  assertEquals(CALENDAR_VALUE.getTime(),dateValue);
}

</code></pre>

<br>
<pre class="type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleProperties() throws IOException {
  Resource resource1=resourceResolver.getResource(testRoot.getPath() + "/node1");
  assertNotNull(resource1);
  assertEquals("node1",resource1.getName());
  ValueMap props=ResourceUtil.getValueMap(resource1);
  assertEquals(STRING_VALUE,props.get("stringProp",String.class));
  assertArrayEquals(STRING_ARRAY_VALUE,props.get("stringArrayProp",String[].class));
  assertEquals((Integer)INTEGER_VALUE,props.get("integerProp",Integer.class));
  assertEquals(DOUBLE_VALUE,props.get("doubleProp",Double.class),0.0001);
  assertEquals(BOOLEAN_VALUE,props.get("booleanProp",Boolean.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.samples.integrationtests.serverside.sling.post.SlingPostChunkUploadTest </h4><pre class="type-11 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test upload on a existing node. Test that binary content doesn't get
 * updated until chunk upload finishes.
 */
@Test public void testChunkUploadOnExistingNode(){
  try {
    File file=createFile("helloworld",170);
    String nodeName=file.getName();
    InputStream fis=new FileInputStream(file);
    uploadMultiPart(parentPath,null,fis,file.getName());
    fis.close();
    HttpResponse response=httpGet(parentPath + "/" + nodeName);
    fis=new FileInputStream(file);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    File secondFile=createFile("helloearth",100);
    int chunkSize=200;
    uploadChunks(parentPath,secondFile,nodeName,0,chunkSize,3);
    JSONObject json=getChunkJson(parentPath + "/" + nodeName);
    validate(json,600,3);
    response=httpGet(parentPath + "/" + nodeName);
    fis=new FileInputStream(file);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    uploadChunks(parentPath,secondFile,nodeName,600,chunkSize,Integer.MAX_VALUE);
    response=httpGet(parentPath + "/" + nodeName);
    fis=new FileInputStream(secondFile);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    Map<String,String> reqParams=new HashMap<String,String>();
    reqParams.put(SlingPostConstants.RP_OPERATION,"delete");
    response=uploadMultiPart(parentPath + "/" + nodeName,reqParams,null,null);
    response=httpGet(parentPath + "/" + nodeName);
    Assert.assertEquals("status should be 404 not found ",404,response.getStatusLine().getStatusCode());
    file.delete();
    secondFile.delete();
  }
 catch (  Exception e) {
    log.error("error:",e);
    Assert.fail("exception caught: " + e.getMessage());
  }
 finally {
  }
}

</code></pre>

<br>
<pre class="type-11 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test two concurrent chunk upload. Second will fail. Test deletion of
 * incomplete upload and test new upload on the same path.
 */
@Test public void testConcurrentChunkUpload(){
  try {
    File file=createFile("helloworld",170);
    String nodeName=file.getName();
    int chunkSize=200;
    uploadChunks(parentPath,file,nodeName,0,chunkSize,3);
    JSONObject json=getChunkJson(parentPath + "/" + file.getName());
    validate(json,600,3);
    File secondFile=createFile("helloearth",100);
    chunkSize=300;
    try {
      uploadChunks(parentPath,secondFile,nodeName,0,chunkSize,1);
      Assert.fail("second upload should fail");
    }
 catch (    Exception ignore) {
    }
    try {
      uploadChunks(parentPath,secondFile,nodeName,200,chunkSize,2);
      Assert.fail("second upload should fail");
    }
 catch (    Exception ignore) {
    }
    Map<String,String> reqParams=new HashMap<String,String>();
    reqParams.put(SlingPostConstants.RP_OPERATION,"delete");
    reqParams.put(":applyToChunks","true");
    HttpResponse response=uploadMultiPart(parentPath + "/" + file.getName(),reqParams,null,null);
    Assert.assertEquals("status should be 200 OK ",200,response.getStatusLine().getStatusCode());
    chunkSize=200;
    uploadChunks(parentPath,secondFile,nodeName,0,chunkSize,Integer.MAX_VALUE);
    response=httpGet(parentPath + "/" + nodeName);
    InputStream fis=new FileInputStream(secondFile);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    reqParams=new HashMap<String,String>();
    reqParams.put(SlingPostConstants.RP_OPERATION,"delete");
    response=uploadMultiPart(parentPath + "/" + nodeName,reqParams,null,null);
    response=httpGet(parentPath + "/" + nodeName);
    Assert.assertEquals("status should be 404 not found ",404,response.getStatusLine().getStatusCode());
    file.delete();
    secondFile.delete();
  }
 catch (  Exception e) {
    log.error("error:",e);
    Assert.fail("exception caught: " + e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-11 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test use case where file size is not known in advance. File parameter
 * "@Completed" indicates file completion.
 */
@Test public void testChunkUploadOnStreaming(){
  try {
    File file=createFile("helloworld",170);
    String nodeName=file.getName();
    InputStream fis=new FileInputStream(file);
    int chunkSize=200;
    uploadPart(parentPath,file,file.getName(),0,0,chunkSize,false);
    uploadPart(parentPath,file,file.getName(),0,200,chunkSize,false);
    uploadPart(parentPath,file,file.getName(),0,400,chunkSize,true);
    fis.close();
    File secondFile=createFile("helloworld",60);
    HttpResponse response=httpGet(parentPath + "/" + nodeName);
    fis=new FileInputStream(secondFile);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    Map<String,String> reqParams=new HashMap<String,String>();
    reqParams.put(SlingPostConstants.RP_OPERATION,"delete");
    response=uploadMultiPart(parentPath + "/" + nodeName,reqParams,null,null);
    response=httpGet(parentPath + "/" + nodeName);
    Assert.assertEquals("status should be 404 not found ",404,response.getStatusLine().getStatusCode());
    file.delete();
    secondFile.delete();
  }
 catch (  Exception e) {
    log.error("error:",e);
    Assert.fail("exception caught: " + e.getMessage());
  }
 finally {
  }
}

</code></pre>

<br>
<pre class="type-11 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test chunk upload without interruption.
 */
@Test public void testChunkUpload(){
  try {
    File file=createFile("helloworld",100);
    int chunkSize=400;
    String nodeName=file.getName();
    uploadChunks(parentPath,file,nodeName,0,chunkSize,Integer.MAX_VALUE);
    HttpResponse response=httpGet(parentPath + "/" + nodeName);
    InputStream fis=new FileInputStream(file);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    Map<String,String> reqParams=new HashMap<String,String>();
    reqParams.put(SlingPostConstants.RP_OPERATION,"delete");
    response=uploadMultiPart(parentPath + "/" + nodeName,reqParams,null,null);
    response=httpGet(parentPath + "/" + nodeName);
    Assert.assertEquals("status should be 404 not found ",404,response.getStatusLine().getStatusCode());
    file.delete();
  }
 catch (  Exception e) {
    log.error("error:",e);
    Assert.fail("exception caught: " + e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-11 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test chunk upload after interruption. Test the use of variable chunk
 * size. After interruption, client retrieves chunk upload information and
 * resume upload with variable chunk size.
 */
@Test public void testInterruptedChunkUpload(){
  try {
    File file=createFile("helloworld",170);
    String nodeName=file.getName();
    int chunkSize=200;
    uploadChunks(parentPath,file,nodeName,0,chunkSize,1);
    JSONObject json=getChunkJson(parentPath + "/" + nodeName);
    validate(json,200,1);
    chunkSize=300;
    uploadChunks(parentPath,file,nodeName,200,chunkSize,2);
    json=getChunkJson(parentPath + "/" + nodeName);
    validate(json,800,3);
    chunkSize=400;
    uploadChunks(parentPath,file,nodeName,json.getInt(SlingPostConstants.NT_SLING_CHUNKS_LENGTH),chunkSize,2);
    json=getChunkJson(parentPath + "/" + nodeName);
    validate(json,1600,5);
    chunkSize=500;
    uploadChunks(parentPath,file,nodeName,json.getInt(SlingPostConstants.NT_SLING_CHUNKS_LENGTH),chunkSize,Integer.MAX_VALUE);
    HttpResponse response=httpGet(parentPath + "/" + nodeName);
    InputStream fis=new FileInputStream(file);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    Map<String,String> reqParams=new HashMap<String,String>();
    reqParams.put(SlingPostConstants.RP_OPERATION,"delete");
    response=uploadMultiPart(parentPath + "/" + nodeName,reqParams,null,null);
    response=httpGet(parentPath + "/" + nodeName);
    Assert.assertEquals("status should be 404 not found ",404,response.getStatusLine().getStatusCode());
    file.delete();
  }
 catch (  Exception e) {
    log.error("error:",e);
    Assert.fail("exception caught: " + e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.tracer.internal.JSONRecordingTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void logQueries() throws Exception {
  StringWriter sw=new StringWriter();
  when(request.getMethod()).thenReturn("GET");
  JSONRecording r=new JSONRecording(request);
  r.log(TracerContext.QUERY_LOGGER,"foo bar",new Object[]{"x","y"});
  r.log(TracerContext.QUERY_LOGGER,"foo bar",new Object[]{"x","z"});
  JSONWriter jw=new JSONWriter(sw).object();
  r.render(jw);
  jw.endObject();
  JSONObject json=new JSONObject(sw.toString());
  assertEquals("GET",json.get("method"));
  assertEquals(2,json.getJSONArray("queries").length());
}

</code></pre>

<br>
<pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void requestTrackerLogs() throws Exception {
  StringWriter sw=new StringWriter();
  JSONRecording r=new JSONRecording(request);
  r.registerTracker(TestUtil.createTracker("x","y"));
  JSONWriter jw=new JSONWriter(sw).object();
  r.render(jw);
  jw.endObject();
  JSONObject json=new JSONObject(sw.toString());
  assertEquals(2,json.getJSONArray("logs").length());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.tracer.internal.LogTracerModelTest </h4><pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void childLoggerLevelDiff() throws Exception {
  TracerSet ts=new TracerSet("foo : a.b;level=trace, a.b.c;level=info");
  TracerContext tc=getContext(ts);
  assertTrue(tc.shouldLog("a.b",Level.TRACE));
  assertTrue(tc.shouldLog("a.b.d",Level.TRACE));
  assertFalse(tc.shouldLog("a.b.c",Level.TRACE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.tracer.internal.LogTracerTest </h4><pre class="type-11 type-9 type-10 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkTracing() throws Exception {
  HttpServletRequest request=mock(SlingHttpServletRequest.class);
  HttpServletResponse response=mock(HttpServletResponse.class);
  when(request.getParameter(LogTracer.PARAM_TRACER_CONFIG)).thenReturn("a.b.c;level=trace,a.b;level=debug");
  activateTracer();
  Level oldLevel=rootLogger().getLevel();
  rootLogger().setLevel(Level.INFO);
  FilterChain chain=new FilterChain(){
    @Override public void doFilter(    ServletRequest request,    ServletResponse response) throws IOException, ServletException {
      TurboFilter turboFilter=context.getService(TurboFilter.class);
      assertNotNull(turboFilter);
      getLogContext().addTurboFilter(turboFilter);
      getLogger("a").info("a-info");
      getLogger("a").debug("a-debug");
      getLogger("a.b").info("a.b-info");
      getLogger("a.b").debug("a.b-debug");
      getLogger("a.b").trace("a.b-trace");
      getLogger("a.b.c").debug("a.b.c-debug");
      getLogger("a.b.c").trace("a.b.c-trace");
      getLogger("a.b.c.d").trace("a.b.c.d-trace");
      if (getLogger("a.b.c").isTraceEnabled()) {
        getLogger("a.b.c").trace("a.b.c-trace2");
      }
    }
  }
;
  Filter filter=getFilter(true);
  filter.doFilter(request,response,chain);
  assertNull(context.getService(TurboFilter.class));
  List<String> logs=logCollector.getLogs();
  assertThat(logs,hasItem("a-info"));
  assertThat(logs,not(hasItem("a-debug")));
  assertThat(logs,hasItem("a.b-info"));
  assertThat(logs,hasItem("a.b-debug"));
  assertThat(logs,not(hasItem("a.b-trace")));
  assertThat(logs,hasItem("a.b.c-debug"));
  assertThat(logs,hasItem("a.b.c-trace"));
  assertThat(logs,hasItem("a.b.c-trace2"));
  assertThat(logs,hasItem("a.b.c.d-trace"));
  rootLogger().setLevel(oldLevel);
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void recordingWithoutTracing() throws Exception {
  activateTracerAndServlet();
  MockSlingHttpServletRequest request=new MockSlingHttpServletRequest(){
    @Override public RequestProgressTracker getRequestProgressTracker(){
      return createTracker("x","y");
    }
  }
;
  request.setHeader(TracerLogServlet.HEADER_TRACER_RECORDING,"true");
  HttpServletResponse response=mock(HttpServletResponse.class);
  FilterChain chain=new FilterChain(){
    @Override public void doFilter(    ServletRequest request,    ServletResponse response) throws IOException, ServletException {
      assertNull(context.getService(TurboFilter.class));
    }
  }
;
  prepareChain(chain).doFilter(request,response);
  String requestId=getRequestId(response);
  assertNotNull(requestId);
  Recording r=((TracerLogServlet)context.getService(Servlet.class)).getRecording(requestId);
  assertTrue(r instanceof JSONRecording);
  assertNotNull(((JSONRecording)r).getTracker());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.tracer.internal.TracerLogServletTest </h4><pre class="type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void jsonRendering() throws Exception {
  TracerLogServlet logServlet=new TracerLogServlet(context.bundleContext());
  when(request.getMethod()).thenReturn("GET");
  when(request.getHeader(TracerLogServlet.HEADER_TRACER_RECORDING)).thenReturn("true");
  Recording recording=logServlet.startRecording(request,response);
  recording.registerTracker(createTracker("x","y"));
  ArgumentCaptor<String> requestIdCaptor=ArgumentCaptor.forClass(String.class);
  verify(response).setHeader(eq(TracerLogServlet.HEADER_TRACER_REQUEST_ID),requestIdCaptor.capture());
  verify(response).setHeader(TracerLogServlet.HEADER_TRACER_PROTOCOL_VERSION,String.valueOf(TracerLogServlet.TRACER_PROTOCOL_VERSION));
  StringWriter sw=new StringWriter();
  when(response.getWriter()).thenReturn(new PrintWriter(sw));
  when(request.getRequestURI()).thenReturn("/system/console/" + requestIdCaptor.getValue() + ".json");
  logServlet.renderContent(request,response);
  JSONObject json=new JSONObject(sw.toString());
  assertEquals("GET",json.getString("method"));
  assertEquals(2,json.getJSONArray("logs").length());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.validation.impl.ValidationServiceImplTest </h4><pre class="type-11 type-12 type-6 type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResourceWithValidatorLeveragingTheResource() throws Exception {
  Validator<String> extendedValidator=new Validator<String>(){
    @Override @Nonnull public ValidationResult validate(    @Nonnull String data,    @Nonnull ValidationContext context,    @Nonnull ValueMap arguments) throws SlingValidationException {
      Resource resource=context.getResource();
      if (resource == null) {
        Assert.fail("Resource must not be null");
      }
 else {
        Assert.assertThat(resource.getPath(),Matchers.equalTo("/content/validation/1/resource"));
      }
      return DefaultValidationResult.VALID;
    }
  }
;
  propertyBuilder.validator(extendedValidator);
  modelBuilder.resourceProperty(propertyBuilder.build("field1"));
  ValidationModel vm=modelBuilder.build("sometype");
  ResourceResolver rr=context.resourceResolver();
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put("field1","1");
  Resource testResource=ResourceUtil.getOrCreateResource(rr,"/content/validation/1/resource",properties,JcrConstants.NT_UNSTRUCTURED,true);
  ValidationResult vr=validationService.validate(testResource,vm);
  Assert.assertTrue(vr.isValid());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test() public void testValidateResourceRecursivelyWithMissingValidatorAndNoEnforcement() throws Exception {
  validationService.modelRetriever=new ValidationModelRetriever(){
    @Override public @CheckForNull ValidationModel getModel(    @Nonnull String resourceType,    String resourcePath,    boolean considerResourceSuperTypeModels){
      return null;
    }
  }
;
  ResourceResolver rr=context.resourceResolver();
  Resource testResource=ResourceUtil.getOrCreateResource(rr,"/content/validation/1/resource","resourcetype1",JcrConstants.NT_UNSTRUCTURED,true);
  ValidationResult vr=validationService.validateResourceRecursively(testResource,false,null,false);
  Assert.assertTrue(vr.isValid());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResourceWithNestedChildren() throws Exception {
  propertyBuilder.validator(new RegexValidator(),RegexValidator.REGEX_PARAM,"\\d");
  ResourceProperty property=propertyBuilder.build("field1");
  ChildResource modelGrandChild=new ChildResourceImpl("grandchild",null,true,Collections.singletonList(property),Collections.<ChildResource>emptyList());
  ChildResource modelChild=new ChildResourceImpl("child",null,true,Collections.singletonList(property),Collections.singletonList(modelGrandChild));
  modelBuilder.childResource(modelChild);
  ValidationModel vm=modelBuilder.build("sometype");
  ResourceResolver rr=context.resourceResolver();
  Resource testResource=ResourceUtil.getOrCreateResource(rr,"/content/validation/1/resource",JcrConstants.NT_UNSTRUCTURED,JcrConstants.NT_UNSTRUCTURED,true);
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put("field1","1");
  Resource resourceChild=rr.create(testResource,"child",properties);
  rr.create(resourceChild,"grandchild",properties);
  ValidationResult vr=validationService.validate(testResource,vm);
  Assert.assertThat(vr.getFailures(),Matchers.hasSize(0));
  Assert.assertTrue(vr.isValid());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResourceWithMissingGrandChildProperty() throws Exception {
  propertyBuilder.validator(new RegexValidator(),RegexValidator.REGEX_PARAM,"\\d");
  ResourceProperty property=propertyBuilder.build("field1");
  modelBuilder.resourceProperty(property);
  ChildResource modelGrandChild=new ChildResourceImpl("grandchild",null,true,Collections.singletonList(property),Collections.<ChildResource>emptyList());
  ChildResource modelChild=new ChildResourceImpl("child",null,true,Collections.singletonList(property),Collections.singletonList(modelGrandChild));
  modelBuilder.childResource(modelChild);
  ValidationModel vm=modelBuilder.build("sometype");
  ResourceResolver rr=context.resourceResolver();
  Resource testResource=ResourceUtil.getOrCreateResource(rr,"/content/validation/1/resource",JcrConstants.NT_UNSTRUCTURED,JcrConstants.NT_UNSTRUCTURED,true);
  ModifiableValueMap mvm=testResource.adaptTo(ModifiableValueMap.class);
  mvm.put("field1","1");
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put("field1","1");
  Resource resourceChild=rr.create(testResource,"child",properties);
  rr.create(resourceChild,"grandchild",null);
  ValidationResult vr=validationService.validate(testResource,vm);
  Assert.assertFalse("resource should have been considered invalid",vr.isValid());
  Assert.assertThat(vr.getFailures(),Matchers.<ValidationFailure>contains(new DefaultValidationFailure("child/grandchild",ValidationServiceImpl.I18N_KEY_MISSING_REQUIRED_PROPERTY_WITH_NAME,"field1")));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResourceWithMissingOptionalChildResource() throws Exception {
  propertyBuilder.validator(new RegexValidator(),RegexValidator.REGEX_PARAM,"\\d");
  ResourceProperty property=propertyBuilder.build("field1");
  ChildResource child=new ChildResourceImpl("child",null,false,Collections.singletonList(property),Collections.<ChildResource>emptyList());
  modelBuilder.childResource(child);
  ValidationModel vm=modelBuilder.build("type");
  ResourceResolver rr=context.resourceResolver();
  Resource testResource=ResourceUtil.getOrCreateResource(rr,"/content/validation/1/resource",JcrConstants.NT_UNSTRUCTURED,JcrConstants.NT_UNSTRUCTURED,true);
  ValidationResult vr=validationService.validate(testResource,vm);
  Assert.assertThat(vr.getFailures(),Matchers.hasSize(0));
  Assert.assertTrue(vr.isValid());
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test() public void testValidateResourceRecursively() throws Exception {
  modelBuilder.resourceProperty(propertyBuilder.build("field1"));
  final ValidationModel vm1=modelBuilder.build("resourcetype1");
  modelBuilder=new ValidationModelBuilder();
  modelBuilder.resourceProperty(propertyBuilder.build("field2"));
  final ValidationModel vm2=modelBuilder.build("resourcetype2");
  validationService.modelRetriever=new ValidationModelRetriever(){
    @Override public @CheckForNull ValidationModel getModel(    @Nonnull String resourceType,    String resourcePath,    boolean considerResourceSuperTypeModels){
      if (resourceType.equals("resourcetype1")) {
        return vm1;
      }
 else       if (resourceType.equals("resourcetype2")) {
        return vm2;
      }
 else {
        return null;
      }
    }
  }
;
  ResourceResolver rr=context.resourceResolver();
  Resource testResource=ResourceUtil.getOrCreateResource(rr,"/content/validation/1/resource","resourcetype1",JcrConstants.NT_UNSTRUCTURED,true);
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put(JcrResourceConstants.SLING_RESOURCE_TYPE_PROPERTY,"resourcetype2");
  properties.put("field2","test");
  rr.create(testResource,"child1",properties);
  properties.clear();
  properties.put(JcrResourceConstants.SLING_RESOURCE_TYPE_PROPERTY,"resourcetype2");
  rr.create(testResource,"child2",properties);
  properties.clear();
  properties.put(JcrResourceConstants.SLING_RESOURCE_TYPE_PROPERTY,"resourcetype3");
  rr.create(testResource,"child3",properties);
  Predicate ignoreResourceType3Filter=new Predicate(){
    @Override public boolean evaluate(    Object object){
      Resource resource=(Resource)object;
      if ("resourcetype3".equals(resource.getResourceType())) {
        return false;
      }
      return true;
    }
  }
;
  ValidationResult vr=validationService.validateResourceRecursively(testResource,true,ignoreResourceType3Filter,false);
  Assert.assertFalse("resource should have been considered invalid",vr.isValid());
  Assert.assertThat(vr.getFailures(),Matchers.<ValidationFailure>contains(new DefaultValidationFailure("",ValidationServiceImpl.I18N_KEY_MISSING_REQUIRED_PROPERTY_WITH_NAME,"field1"),new DefaultValidationFailure("child2",ValidationServiceImpl.I18N_KEY_MISSING_REQUIRED_PROPERTY_WITH_NAME,"field2")));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResourceWithMultivalueProperties() throws Exception {
  propertyBuilder.validator(new RegexValidator(),RegexValidator.REGEX_PARAM,"\\d");
  propertyBuilder.multiple();
  modelBuilder.resourceProperty(propertyBuilder.build("field"));
  ValidationModel vm=modelBuilder.build("type");
  ResourceResolver rr=context.resourceResolver();
  Resource testResource=ResourceUtil.getOrCreateResource(rr,"/content/validation/1/resource",JcrConstants.NT_UNSTRUCTURED,JcrConstants.NT_UNSTRUCTURED,true);
  ModifiableValueMap mvm=testResource.adaptTo(ModifiableValueMap.class);
  mvm.put("field",new String[]{"1","abc","2"});
  ValidationResult vr=validationService.validate(testResource,vm);
  Assert.assertFalse("resource should have been considered invalid",vr.isValid());
  Assert.assertThat(vr.getFailures(),Matchers.<ValidationFailure>contains(new DefaultValidationFailure("field[1]",RegexValidator.I18N_KEY_PATTERN_DOES_NOT_MATCH,"\\d")));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResourceWithPropertyPatternMatching() throws Exception {
  propertyBuilder.validator(new RegexValidator(),RegexValidator.REGEX_PARAM,"\\d");
  propertyBuilder.nameRegex("field.*");
  modelBuilder.resourceProperty(propertyBuilder.build("field"));
  propertyBuilder.nameRegex("otherfield.*");
  modelBuilder.resourceProperty(propertyBuilder.build("otherfield"));
  propertyBuilder.nameRegex("optionalfield.*").optional();
  modelBuilder.resourceProperty(propertyBuilder.build("optionalfield"));
  ValidationModel vm=modelBuilder.build("type");
  ResourceResolver rr=context.resourceResolver();
  Resource testResource=ResourceUtil.getOrCreateResource(rr,"/content/validation/1/resource",JcrConstants.NT_UNSTRUCTURED,JcrConstants.NT_UNSTRUCTURED,true);
  ModifiableValueMap mvm=testResource.adaptTo(ModifiableValueMap.class);
  mvm.put("field1","1");
  mvm.put("field2","1");
  mvm.put("field3","abc");
  ValidationResult vr=validationService.validate(testResource,vm);
  Assert.assertFalse("resource should have been considered invalid",vr.isValid());
  Assert.assertThat(vr.getFailures(),Matchers.<ValidationFailure>contains(new DefaultValidationFailure("field3",RegexValidator.I18N_KEY_PATTERN_DOES_NOT_MATCH,"\\d"),new DefaultValidationFailure("",ValidationServiceImpl.I18N_KEY_MISSING_REQUIRED_PROPERTY_MATCHING_PATTERN,"otherfield.*")));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResourceWithNestedChildrenAndPatternMatching() throws Exception {
  propertyBuilder.validator(new RegexValidator(),RegexValidator.REGEX_PARAM,"\\d");
  ResourceProperty property=propertyBuilder.build("field1");
  ChildResource modelGrandChild=new ChildResourceImpl("grandchild","grandchild.*",true,Collections.singletonList(property),Collections.<ChildResource>emptyList());
  ChildResource modelChild=new ChildResourceImpl("child","child.*",true,Collections.singletonList(property),Collections.singletonList(modelGrandChild));
  ChildResource siblingChild=new ChildResourceImpl("siblingchild","siblingchild.*",true,Collections.singletonList(property),Collections.singletonList(modelGrandChild));
  modelBuilder.childResource(modelChild);
  modelBuilder.childResource(siblingChild);
  ValidationModel vm=modelBuilder.build("sometype");
  ResourceResolver rr=context.resourceResolver();
  Resource testResource=ResourceUtil.getOrCreateResource(rr,"/apps/validation/1/resource",JcrConstants.NT_UNSTRUCTURED,JcrConstants.NT_UNSTRUCTURED,true);
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put("field1","1");
  Resource resourceChild=rr.create(testResource,"child1",properties);
  rr.create(resourceChild,"grandchild1",properties);
  rr.create(testResource,"child2",properties);
  rr.create(testResource,"child3",null);
  ValidationResult vr=validationService.validate(testResource,vm);
  Assert.assertFalse("resource should have been considered invalid",vr.isValid());
  Assert.assertThat(vr.getFailures(),Matchers.<ValidationFailure>containsInAnyOrder(new DefaultValidationFailure("child2",ValidationServiceImpl.I18N_KEY_MISSING_REQUIRED_CHILD_RESOURCE_MATCHING_PATTERN,"grandchild.*"),new DefaultValidationFailure("child3",ValidationServiceImpl.I18N_KEY_MISSING_REQUIRED_CHILD_RESOURCE_MATCHING_PATTERN,"grandchild.*"),new DefaultValidationFailure("child3",ValidationServiceImpl.I18N_KEY_MISSING_REQUIRED_PROPERTY_WITH_NAME,"field1"),new DefaultValidationFailure("",ValidationServiceImpl.I18N_KEY_MISSING_REQUIRED_CHILD_RESOURCE_MATCHING_PATTERN,"siblingchild.*")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.validation.testservices.ValidationServiceTest </h4><pre class="type-11 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidRequestModel1() throws IOException, JSONException {
  MultipartEntity entity=new MultipartEntity();
  entity.addPart("sling:resourceType",new StringBody("validation/test/resourceType1"));
  entity.addPart("field1",new StringBody("Hello World"));
  entity.addPart(SlingPostConstants.RP_OPERATION,new StringBody("validation"));
  RequestExecutor re=getRequestExecutor().execute(getRequestBuilder().buildPostRequest("/validation/testing/fakeFolder1/resource").withEntity(entity)).assertStatus(200);
  String content=re.getContent();
  JSONObject jsonResponse=new JSONObject(content);
  assertFalse(jsonResponse.getBoolean("valid"));
  JSONObject failure=jsonResponse.getJSONArray("failures").getJSONObject(0);
  assertEquals("Property does not match the pattern \"^\\p{Upper}+$\".",failure.get("message"));
  assertEquals("field1",failure.get("location"));
  failure=jsonResponse.getJSONArray("failures").getJSONObject(1);
  assertEquals("Missing required property with name \"field2\".",failure.get("message"));
  assertEquals("",failure.get("location"));
}

</code></pre>

<br>
<pre class="type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testValidRequestModel1() throws IOException, JSONException {
  MultipartEntity entity=new MultipartEntity();
  entity.addPart("sling:resourceType",new StringBody("validation/test/resourceType1"));
  entity.addPart("field1",new StringBody("HELLOWORLD"));
  entity.addPart("field2",new StringBody("30.01.1988"));
  entity.addPart(SlingPostConstants.RP_OPERATION,new StringBody("validation"));
  RequestExecutor re=getRequestExecutor().execute(getRequestBuilder().buildPostRequest("/validation/testing/fakeFolder1/resource").withEntity(entity)).assertStatus(200);
  JSONObject jsonResponse=new JSONObject(re.getContent());
  assertTrue(jsonResponse.getBoolean("valid"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.xss.impl.XSSAPIImplTest </h4><pre class="type-11 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetValidHrefWithoutHrefConfig() throws Exception {
  XSSFilterImpl xssFilter=Whitebox.getInternalState(xssAPI,"xssFilter");
  setDefaultHandler(xssFilter,"./src/test/resources/configWithoutHref.xml");
  Attribute hrefAttribute=Whitebox.getInternalState(xssFilter,"hrefAttribute");
  Assert.assertEquals(hrefAttribute,XSSFilterImpl.DEFAULT_HREF_ATTRIBUTE);
  testGetValidHref();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
