<h3><span class=" glyphicon glyphicon-tag"/>&nbspIterativeVerifier</h3><kbd>Verifies assertions in iterations</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.sling.bgservlets.impl.nodestream.NodeStreamPathTest </h4><pre class="type-15 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPaths(){
  final String[] data={"1","1","9","9","99","99","100","10/0","199","19/9","200","20/0","1234","12/34"};
  for (int i=0; i < data.length; i+=2) {
    final NodeStreamPath nsp=new NodeStreamPath();
    for (int j=0; j < Integer.parseInt(data[i]); j++) {
      nsp.selectNextPath();
    }
    final String exp=data[i + 1];
    assertEquals("At index " + i + ", expected "+ exp,exp,nsp.getNodePath());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.bgservlets.it.BackgroundRequestIT </h4><pre class="type-15 type-12 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTmpRequestCreatesJob() throws IOException, InterruptedException, JSONException {
  final int initialJobs=countStoredJobs();
  T.getContent(HttpTest.HTTP_BASE_URL + "/tmp.json?sling:bg=true","application/json");
  final long timeout=System.currentTimeMillis() + 10000L;
  while (true) {
    if (countStoredJobs() >= initialJobs + 1) {
      break;
    }
    if (System.currentTimeMillis() > timeout) {
      fail("Timeout waiting for background job creation");
    }
    Thread.sleep(50L);
  }
  final String path="/var/bg/jobs.tidy.1.json";
  final JSONObject json=new JSONObject(T.getContent(HttpTest.HTTP_BASE_URL + path,"application/json"));
  int matches=0;
  final Pattern instanceIdPattern=Pattern.compile("([0-9a-fA-F\\\\-]){20,}");
  final Iterator<String> it=json.keys();
  while (it.hasNext()) {
    final String key=it.next();
    if (instanceIdPattern.matcher(key).matches()) {
      matches++;
    }
  }
  if (matches == 0) {
    fail("No instance ID node found under " + path);
  }
  Thread.sleep(2000L);
  assertEquals("Expecting no extra jobs",initialJobs + 1,countStoredJobs());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.bgservlets.it.JobConsoleIT </h4><pre class="type-15 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testJobConsoleOutput() throws IOException, InterruptedException, JSONException {
  T.getContent(HttpTest.HTTP_BASE_URL + "/tmp.json?sling:bg=true","application/json");
  final long timeout=System.currentTimeMillis() + 10000L;
  final String path="/system/console/bgservlets";
  final Pattern instanceIdPattern=Pattern.compile("(?s).+([0-9a-fA-F\\\\-]){20,}.+");
  while (true) {
    final String jobConsoleContent=T.getContent(HttpTest.HTTP_BASE_URL + path,HttpTest.CONTENT_TYPE_HTML);
    if (instanceIdPattern.matcher(jobConsoleContent).matches()) {
      break;
    }
    if (System.currentTimeMillis() > timeout) {
      fail("Timeout waiting for instance ID at " + path);
    }
    Thread.sleep(50L);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.json.sling.JsonObjectCreatorTest </h4><pre class="type-15 type-11 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChildren() throws JSONException {
  when(resource.adaptTo(ValueMap.class)).thenReturn(new ValueMapDecorator(props));
  final JSONObject j=JsonObjectCreator.create(resource,2);
  for (int i=0; i < NCHILDREN; i++) {
    final String id="child" + i;
    assertEquals(id,j.getJSONObject(id).get("id"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.log.logback.integration.ITConfigPrinter </h4><pre class="type-15 type-13 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void includeOnlyLastNFiles() throws Exception {
  waitForPrinter();
  Configuration config=ca.getConfiguration(PID,null);
  Dictionary<String,Object> p=new Hashtable<String,Object>();
  p.put(LogConfigManager.PRINTER_MAX_INCLUDED_FILES,3);
  p.put(LogConfigManager.LOG_LEVEL,"INFO");
  config.update(p);
  delay();
  createLogConfig("error.log","includeOnlyLastNFiles","includeOnlyLastNFiles.1");
  for (int i=0; i < 10; i++) {
    FileUtils.touch(new File(logDir,"error.log." + i));
  }
  StringWriter sw=new StringWriter();
  invoke("printConfiguration",new PrintWriter(sw),"txt");
  assertThat(sw.toString(),containsString("error.log"));
  for (int i=0; i < 10; i++) {
    assertThat(sw.toString(),containsString("error.log." + i));
  }
  assertTrue(((URL[])invoke("getAttachments","zip")).length > 3);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.testing.util.JavascriptEngineTest </h4><pre class="type-15 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimpleScripts() throws IOException {
  final String[] data={"{}","out.print('hello')","hello","{ i:26, j:'a' }","out.print(data.i + data.j)","26a","{ i:'ab', j:'cd' }","out.print(data.i) ; out.print('+') ; out.print(data.j)","ab+cd"};
  for (int i=0; i < data.length; i+=3) {
    final String json=data[i];
    final String code=data[i + 1];
    final String expected=data[i + 2];
    final String actual=engine.execute(code,json);
    assertEquals("At index " + i,expected,actual);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.crankstart.launcher.BasicLauncherIT </h4><pre class="type-15 type-11 type-12 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @Retry(timeoutMsec=U.LONG_TIMEOUT_MSEC,intervalMsec=U.STD_INTERVAL) public void testSpecificStartLevel() throws Exception {
  final String symbolicName="org.apache.commons.collections";
  assertEquals("Expecting bundle " + symbolicName + " to be installed","Installed",osgiConsole.getBundleState(symbolicName));
  final JSONObject status=U.getBundleData(C,client,symbolicName);
  final JSONArray props=status.getJSONArray("data").getJSONObject(0).getJSONArray("props");
  final String KEY="key";
  final String SL="Start Level";
  boolean found=false;
  for (int i=0; i < props.length(); i++) {
    final JSONObject o=props.getJSONObject(i);
    if (o.has(KEY) && SL.equals(o.getString(KEY))) {
      found=true;
      assertEquals("Expecting the start level that's set in provisioning model","99",o.getString("value"));
    }
  }
  assertTrue("Expecting start level to be found in JSON output",found);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.connectors.LargeTopologyWithHubTest </h4><pre class="type-15 type-11 type-2 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setup() throws Throwable {
  instances=new LinkedList<VirtualInstance>();
  final int defaultHeartbeatTimeout=3600;
  final int heartbeatTimeout=TimeoutsProvider.getInstance().getTimeout(defaultHeartbeatTimeout);
  VirtualInstanceBuilder hubBuilder=newBuilder().newRepository("/var/discovery/impl/",true).setDebugName("hub").setConnectorPingInterval(5).setConnectorPingTimeout(heartbeatTimeout);
  hub=hubBuilder.build();
  instances.add(hub);
  hub.getConfig().setViewCheckTimeout(heartbeatTimeout);
  hub.heartbeatsAndCheckView();
  hub.heartbeatsAndCheckView();
  assertNotNull(hub.getClusterViewService().getLocalClusterView());
  hub.startViewChecker(1);
  hub.dumpRepo();
  slingIds=new LinkedList<String>();
  slingIds.add(hub.getSlingId());
  logger.info("setUp: using heartbeatTimeout of " + heartbeatTimeout + "sec "+ "(default: "+ defaultHeartbeatTimeout+ ")");
  for (int i=0; i < TEST_SIZE; i++) {
    logger.info("setUp: creating instance" + i);
    VirtualInstanceBuilder builder2=newBuilder().newRepository("/var/discovery/impl/",false).setDebugName("instance" + i).setConnectorPingInterval(5).setConnectorPingTimeout(heartbeatTimeout);
    VirtualInstance instance=builder2.build();
    instances.add(instance);
    instance.getConfig().setViewCheckTimeout(heartbeatTimeout);
    instance.heartbeatsAndCheckView();
    instance.heartbeatsAndCheckView();
    ClusterView clusterView=instance.getClusterViewService().getLocalClusterView();
    assertNotNull(clusterView);
    new VirtualConnector(instance,hub);
    slingIds.add(instance.getSlingId());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.connectors.ping.wl.WildcardHelperTest </h4><pre class="type-15 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void testWildcards(){
  assertTrue(WildcardHelper.matchesWildcard("","*"));
  assertTrue(WildcardHelper.matchesWildcard("fooo","*"));
  assertTrue(WildcardHelper.matchesWildcard("fooo","**"));
  assertTrue(WildcardHelper.matchesWildcard("fooo","**?"));
  assertTrue(WildcardHelper.matchesWildcard("fooo","????"));
  assertFalse(WildcardHelper.matchesWildcard("fooo","???"));
  assertFalse(WildcardHelper.matchesWildcard("fooo","?????"));
  for (int i=0; i < 100; i++) {
    String randomString=UUID.randomUUID().toString();
    assertTrue(WildcardHelper.matchesWildcard(randomString,"*"));
    assertTrue(WildcardHelper.matchesWildcard(randomString,randomString.substring(0,randomString.length() - 1) + "?"));
    assertTrue(WildcardHelper.matchesWildcard(randomString,randomString.substring(0,randomString.length() - 1) + "*"));
    assertTrue(WildcardHelper.matchesWildcard(randomString,randomString.substring(0,randomString.length() - 2) + "??"));
    assertTrue(WildcardHelper.matchesWildcard(randomString,randomString.substring(0,randomString.length() - 2) + "*"));
    assertTrue(WildcardHelper.matchesWildcard(randomString,"?" + randomString.substring(1,randomString.length())));
    assertTrue(WildcardHelper.matchesWildcard(randomString,"*" + randomString.substring(1,randomString.length())));
    assertTrue(WildcardHelper.matchesWildcard(randomString,"??" + randomString.substring(2,randomString.length())));
    assertTrue(WildcardHelper.matchesWildcard(randomString,"*" + randomString.substring(2,randomString.length())));
  }
  assertTrue(WildcardHelper.matchesWildcard("fooo","f*"));
  assertTrue(WildcardHelper.matchesWildcard("fooo","fo*"));
  assertTrue(WildcardHelper.matchesWildcard("fooo","foo*"));
  assertTrue(WildcardHelper.matchesWildcard("fooo","fooo*"));
  assertFalse(WildcardHelper.matchesWildcard("fooo","fooo?"));
  assertFalse(WildcardHelper.matchesWildcard("fooo","foooo*"));
  assertTrue(WildcardHelper.matchesWildcard("fooo","*"));
  assertFalse(WildcardHelper.matchesWildcard("fooo","?"));
  assertFalse(WildcardHelper.matchesWildcard("fooo","f?"));
  assertTrue(WildcardHelper.matchesWildcard("fo","f?"));
  assertTrue(WildcardHelper.matchesWildcard("foooba","f*b?"));
  assertFalse(WildcardHelper.matchesWildcard("fooobar","f*b?"));
  assertFalse(WildcardHelper.matchesWildcard("foooba","f*b?r"));
  assertTrue(WildcardHelper.matchesWildcard("fooobar","f*b?r"));
  assertTrue(WildcardHelper.matchesWildcard("foooba","f???b?"));
  assertFalse(WildcardHelper.matchesWildcard("foooba","f??b?"));
  assertFalse(WildcardHelper.matchesWildcard("foooba","f??b?"));
}

</code></pre>

<br>
<pre class="type-15 type-13 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
"></span><br>
@Test public void testWithoutWildcards(){
  for (int i=0; i < 1000; i++) {
    String randomString=UUID.randomUUID().toString();
    assertTrue(WildcardHelper.matchesWildcard(randomString,randomString));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.its.AbstractClusterTest </h4><pre class="type-15 type-11 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectorSwitching4139() throws Throwable {
  final int MIN_EVENT_DELAY=1;
  tearDown();
  final org.apache.log4j.Logger discoveryLogger=LogManager.getRootLogger().getLogger("org.apache.sling.discovery");
  logLevel=discoveryLogger.getLevel();
  discoveryLogger.setLevel(Level.DEBUG);
  instance1=newBuilder().setDebugName("instance1").newRepository("/var/discovery/clusterA/",true).setConnectorPingTimeout(10).setConnectorPingInterval(999).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance2=newBuilder().setDebugName("instance2").useRepositoryOf(instance1).setConnectorPingTimeout(10).setConnectorPingInterval(999).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance3=newBuilder().setDebugName("instance3").newRepository("/var/discovery/clusterB/",false).setConnectorPingTimeout(10).setConnectorPingInterval(999).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance4=newBuilder().setDebugName("instance4").useRepositoryOf(instance3).setConnectorPingTimeout(10).setConnectorPingInterval(999).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance5=newBuilder().setDebugName("instance5").newRepository("/var/discovery/clusterC/",false).setConnectorPingTimeout(10).setConnectorPingInterval(999).setMinEventDelay(MIN_EVENT_DELAY).build();
  runHeartbeatOnceWith(instance1,instance2,instance3,instance4,instance5);
  Thread.sleep(500);
  runHeartbeatOnceWith(instance1,instance2,instance3,instance4,instance5);
  Thread.sleep(500);
  runHeartbeatOnceWith(instance1,instance2,instance3,instance4,instance5);
  Thread.sleep(500);
  assertSameTopology(new SimpleClusterView(instance1,instance2));
  assertSameTopology(new SimpleClusterView(instance3,instance4));
  assertSameTopology(new SimpleClusterView(instance5));
  runHeartbeatOnceWith(instance1,instance2,instance3,instance4,instance5);
  pingConnector(instance3,instance1);
  pingConnector(instance5,instance1);
  Thread.sleep(500);
  runHeartbeatOnceWith(instance1,instance2,instance3,instance4,instance5);
  pingConnector(instance3,instance1);
  pingConnector(instance5,instance1);
  Thread.sleep(500);
  logger.info("testConnectorSwitching4139: instance1.slingId=" + instance1.slingId);
  logger.info("testConnectorSwitching4139: instance2.slingId=" + instance2.slingId);
  logger.info("testConnectorSwitching4139: instance3.slingId=" + instance3.slingId);
  logger.info("testConnectorSwitching4139: instance4.slingId=" + instance4.slingId);
  logger.info("testConnectorSwitching4139: instance5.slingId=" + instance5.slingId);
  instance1.dumpRepo();
  assertSameTopology(new SimpleClusterView(instance1,instance2),new SimpleClusterView(instance3,instance4),new SimpleClusterView(instance5));
  boolean success=false;
  for (int i=0; i < 25; i++) {
    runHeartbeatOnceWith(instance2,instance3,instance4,instance5);
    final boolean ping1=pingConnector(instance3,instance2);
    final boolean ping2=pingConnector(instance5,instance2);
    if (ping1 && ping2) {
      success=true;
      logger.info("testConnectorSwitching4139: successfully switched all pings to instance2 after " + i + " rounds.");
      if (i < 20) {
        logger.info("testConnectorSwitching4139: min loop cnt not yet reached: i=" + i);
        Thread.sleep(1000);
        continue;
      }
      break;
    }
    logger.info("testConnectorSwitching4139: looping cos ping1=" + ping1 + ", ping2="+ ping2);
    Thread.sleep(1000);
  }
  assertTrue(success);
  runHeartbeatOnceWith(instance2,instance3,instance4,instance5);
  assertTrue(pingConnector(instance3,instance2));
  assertTrue(pingConnector(instance5,instance2));
  instance2.dumpRepo();
  assertSameTopology(new SimpleClusterView(instance2),new SimpleClusterView(instance3,instance4),new SimpleClusterView(instance5));
  instance4.stopViewChecker();
  instance1Restarted=newBuilder().setDebugName("instance1").useRepositoryOf(instance2).setConnectorPingTimeout(Integer.MAX_VALUE).setMinEventDelay(1).setSlingId(instance1.getSlingId()).build();
  runHeartbeatOnceWith(instance1Restarted,instance2,instance3,instance5);
  Thread.sleep(2000);
  assertTrue(pingConnector(instance3,instance2));
  assertTrue(pingConnector(instance5,instance2));
  success=false;
  for (int i=0; i < 40; i++) {
    runHeartbeatOnceWith(instance1Restarted,instance2,instance3,instance5);
    instance1.getViewChecker().checkView();
    try {
      pingConnector(instance3,instance2);
    }
 catch (    UndefinedClusterViewException ucve) {
    }
    pingConnector(instance5,instance2);
    final TopologyView topology=instance3.getDiscoveryService().getTopology();
    InstanceDescription i3=null;
    for (Iterator<InstanceDescription> it=topology.getInstances().iterator(); it.hasNext(); ) {
      final InstanceDescription id=it.next();
      if (id.getSlingId().equals(instance3.slingId)) {
        i3=id;
        break;
      }
    }
    assertNotNull(i3);
    assertEquals(instance3.slingId,i3.getSlingId());
    final ClusterView i3Cluster=i3.getClusterView();
    final int i3ClusterSize=i3Cluster.getInstances().size();
    if (i3ClusterSize == 1) {
      if (i < 30) {
        logger.info("testConnectorSwitching4139: [2] min loop cnt not yet reached: i=" + i);
        Thread.sleep(500);
        continue;
      }
      success=true;
      logger.info("testConnectorSwitching4139: i3ClusterSize: " + i3ClusterSize + ", i="+ i+ " (success)");
      break;
    }
    logger.info("testConnectorSwitching4139: i3ClusterSize: " + i3ClusterSize + ", i="+ i);
    Thread.sleep(500);
  }
  logger.info("testConnectorSwitching4139: instance1Restarted.slingId=" + instance1Restarted.slingId);
  logger.info("testConnectorSwitching4139: instance2.slingId=" + instance2.slingId);
  logger.info("testConnectorSwitching4139: instance3.slingId=" + instance3.slingId);
  logger.info("testConnectorSwitching4139: instance4.slingId=" + instance4.slingId);
  logger.info("testConnectorSwitching4139: instance5.slingId=" + instance5.slingId);
  instance1Restarted.dumpRepo();
  assertTrue(success);
  assertSameTopology(new SimpleClusterView(instance1Restarted,instance2),new SimpleClusterView(instance3),new SimpleClusterView(instance5));
  instance1Restarted.stop();
}

</code></pre>

<br>
<pre class="type-15 type-11 type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testDuplicateInstance3726() throws Throwable {
  logger.info("testDuplicateInstance3726: start");
  final int MIN_EVENT_DELAY=1;
  tearDown();
  final org.apache.log4j.Logger discoveryLogger=LogManager.getRootLogger().getLogger("org.apache.sling.discovery");
  logLevel=discoveryLogger.getLevel();
  discoveryLogger.setLevel(Level.DEBUG);
  instance1=newBuilder().setDebugName("instance1").newRepository("/var/discovery/clusterA/",true).setConnectorPingTimeout(15).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance2=newBuilder().setDebugName("instance2").useRepositoryOf(instance1).setConnectorPingTimeout(15).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance3=newBuilder().setDebugName("instance3").newRepository("/var/discovery/clusterB/",false).setConnectorPingTimeout(15).setMinEventDelay(MIN_EVENT_DELAY).build();
  instance5=newBuilder().setDebugName("instance5").newRepository("/var/discovery/clusterC/",false).setConnectorPingTimeout(15).setMinEventDelay(MIN_EVENT_DELAY).build();
  runHeartbeatOnceWith(instance1,instance2,instance3,instance5);
  Thread.sleep(500);
  runHeartbeatOnceWith(instance1,instance2,instance3,instance5);
  Thread.sleep(500);
  runHeartbeatOnceWith(instance1,instance2,instance3,instance5);
  Thread.sleep(500);
  assertSameTopology(new SimpleClusterView(instance1,instance2));
  assertSameTopology(new SimpleClusterView(instance3));
  assertSameTopology(new SimpleClusterView(instance5));
  pingConnector(instance3,instance1);
  pingConnector(instance5,instance1);
  pingConnector(instance3,instance1);
  pingConnector(instance5,instance1);
  logger.info("testDuplicateInstance3726: instance1.slingId=" + instance1.slingId);
  logger.info("testDuplicateInstance3726: instance2.slingId=" + instance2.slingId);
  logger.info("testDuplicateInstance3726: instance3.slingId=" + instance3.slingId);
  logger.info("testDuplicateInstance3726: instance5.slingId=" + instance5.slingId);
  instance1.dumpRepo();
  assertSameTopology(new SimpleClusterView(instance1,instance2),new SimpleClusterView(instance3),new SimpleClusterView(instance5));
  instance1.stopViewChecker();
  boolean success=false;
  for (int i=0; i < 25; i++) {
    runHeartbeatOnceWith(instance2,instance3,instance5);
    final boolean ping1=pingConnector(instance3,instance2);
    final boolean ping2=pingConnector(instance5,instance2);
    if (ping1 && ping2) {
      success=true;
      logger.info("testDuplicateInstance3726: successfully switched all pings to instance2 after " + i + " rounds.");
      if (i < 20) {
        logger.info("testDuplicateInstance3726: min loop cnt not yet reached: i=" + i);
        Thread.sleep(1000);
        continue;
      }
      break;
    }
    logger.info("testDuplicateInstance3726: looping");
    Thread.sleep(1000);
  }
  assertTrue(success);
  runHeartbeatOnceWith(instance2,instance3,instance5);
  assertTrue(pingConnector(instance3,instance2));
  assertTrue(pingConnector(instance5,instance2));
  instance2.dumpRepo();
  assertSameTopology(new SimpleClusterView(instance2),new SimpleClusterView(instance3),new SimpleClusterView(instance5));
  instance1Restarted=newBuilder().setDebugName("instance1").useRepositoryOf(instance2).setConnectorPingTimeout(Integer.MAX_VALUE).setMinEventDelay(1).setSlingId(instance1.getSlingId()).build();
  instance4=newBuilder().setDebugName("instance4").useRepositoryOf(instance3).setConnectorPingTimeout(30).setMinEventDelay(MIN_EVENT_DELAY).build();
  for (int i=0; i < 3; i++) {
    runHeartbeatOnceWith(instance1Restarted,instance2,instance3,instance4,instance5);
    Thread.sleep(250);
    try {
      pingConnector(instance3,instance2);
    }
 catch (    UndefinedClusterViewException ucve) {
    }
    assertTrue(pingConnector(instance5,instance2));
  }
  instance1Restarted.dumpRepo();
  logger.info("testDuplicateInstance3726: instance1Restarted.slingId=" + instance1Restarted.slingId);
  logger.info("testDuplicateInstance3726: instance2.slingId=" + instance2.slingId);
  logger.info("testDuplicateInstance3726: instance3.slingId=" + instance3.slingId);
  logger.info("testDuplicateInstance3726: instance4.slingId=" + instance4.slingId);
  logger.info("testDuplicateInstance3726: instance5.slingId=" + instance5.slingId);
  assertTrue(success);
  assertSameTopology(new SimpleClusterView(instance1Restarted,instance2),new SimpleClusterView(instance3,instance4),new SimpleClusterView(instance5));
  instance1Restarted.stop();
  logger.info("testDuplicateInstance3726: end");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.impl.common.heartbeat.HeartbeatTest </h4><pre class="type-15 type-11 type-12 type-6 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * SLING-5027 : test to reproduce the voting loop
 * (and verify that it's fixed)
 */
@Test public void testVotingLoop() throws Throwable {
  logger.info("testVotingLoop: creating slowMachine1...");
  FullJR2VirtualInstanceBuilder slowBuilder1=newBuilder();
  slowBuilder1.setDebugName("slow1").newRepository("/var/discovery/impl/",true).setConnectorPingTimeout(600).setConnectorPingInterval(999).setMinEventDelay(0);
  FullJR2VirtualInstance slowMachine1=slowBuilder1.fullBuild();
  instances.add(slowMachine1);
  SimpleTopologyEventListener slowListener1=new SimpleTopologyEventListener("slow1");
  slowMachine1.bindTopologyEventListener(slowListener1);
  logger.info("testVotingLoop: creating slowMachine2...");
  FullJR2VirtualInstanceBuilder slowBuilder2=newBuilder();
  slowBuilder2.setDebugName("slow2").useRepositoryOf(slowMachine1).setConnectorPingTimeout(600).setConnectorPingInterval(999).setMinEventDelay(0);
  FullJR2VirtualInstance slowMachine2=slowBuilder2.fullBuild();
  instances.add(slowMachine2);
  SimpleTopologyEventListener slowListener2=new SimpleTopologyEventListener("slow2");
  slowMachine2.bindTopologyEventListener(slowListener2);
  logger.info("testVotingLoop: creating fastMachine...");
  FullJR2VirtualInstanceBuilder fastBuilder=newBuilder();
  fastBuilder.setDebugName("fast").useRepositoryOf(slowMachine1).setConnectorPingTimeout(600).setConnectorPingInterval(999).setMinEventDelay(0);
  FullJR2VirtualInstance fastMachine=fastBuilder.fullBuild();
  instances.add(fastMachine);
  SimpleTopologyEventListener fastListener=new SimpleTopologyEventListener("fast");
  fastMachine.bindTopologyEventListener(fastListener);
  HeartbeatHandler hhSlow1=slowMachine1.getHeartbeatHandler();
  HeartbeatHandler hhSlow2=slowMachine2.getHeartbeatHandler();
  HeartbeatHandler hhFast=fastMachine.getHeartbeatHandler();
  Thread.sleep(1000);
  logger.info("testVotingLoop: after some initial 1sec sleep no event should yet have been sent");
  assertFalse(fastMachine.getDiscoveryService().getTopology().isCurrent());
  assertFalse(slowMachine1.getDiscoveryService().getTopology().isCurrent());
  assertFalse(slowMachine2.getDiscoveryService().getTopology().isCurrent());
  assertNull(fastListener.getLastEvent());
  assertNull(slowListener1.getLastEvent());
  assertNull(slowListener2.getLastEvent());
  logger.info("testVotingLoop: stopping voting of slowMachine1...");
  slowMachine1.stopVoting();
  logger.info("testVotingLoop: letting slow1, slow2 and fast all issue 1 heartbeat");
  hhSlow1.issueHeartbeat();
  hhSlow2.issueHeartbeat();
  hhFast.issueHeartbeat();
  logger.info("testVotingLoop: let the fast one do a checkView, thus initiate a voting");
  hhFast.doCheckView();
  Calendar previousVotedAt=null;
  for (int i=0; i < 5; i++) {
    logger.info("testVotingLoop: sleeping 1sec...");
    Thread.sleep(1000);
    logger.info("testVotingLoop: check to see that there is no voting loop...");
    ResourceResolverFactory factory=fastMachine.getResourceResolverFactory();
    ResourceResolver resourceResolver=factory.getAdministrativeResourceResolver(null);
    try {
      List<VotingView> ongoingVotings=VotingHelper.listOpenNonWinningVotings(resourceResolver,fastMachine.getFullConfig());
      assertNotNull(ongoingVotings);
      assertEquals(1,ongoingVotings.size());
      VotingView ongoingVote=ongoingVotings.get(0);
      assertFalse(ongoingVote.isWinning());
      assertFalse(ongoingVote.hasVotedYes(slowMachine1.getSlingId()));
      assertTrue(ongoingVote.hasVotedYes(slowMachine2.getSlingId()));
      final Resource memberResource=ongoingVote.getResource().getChild("members").getChild(slowMachine2.getSlingId());
      final ModifiableValueMap memberMap=memberResource.adaptTo(ModifiableValueMap.class);
      Property vote=(Property)memberMap.get("vote");
      assertEquals(Boolean.TRUE,vote.getBoolean());
      Property votedAt=(Property)memberMap.get("votedAt");
      if (previousVotedAt == null) {
        previousVotedAt=votedAt.getDate();
      }
 else {
        assertEquals(previousVotedAt,votedAt.getDate());
      }
    }
 catch (    Exception e) {
      resourceResolver.close();
      fail("Exception: " + e);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.engine.impl.request.SlingRequestProgressTrackerTest </h4><pre class="type-15 type-11 type-12 type-9 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void messageFormatting(){
  final SlingRequestProgressTracker tracker=new SlingRequestProgressTracker();
  tracker.startTimer("foo");
  tracker.log("one {0}, two {1}, three {2}","eins","zwei","drei");
  tracker.startTimer("bar");
  tracker.logTimer("bar");
  tracker.logTimer("foo");
  tracker.done();
  final String[] expected={"TIMER_START{Request Processing}\n","COMMENT timer_end format is {<elapsed msec>,<timer name>} <optional message>\n","TIMER_START{foo}\n","LOG one eins, two zwei, three drei\n","TIMER_START{bar}\n","TIMER_END{?,bar}\n","TIMER_END{?,foo}\n","TIMER_END{?,Request Processing} Request Processing\n"};
  final Iterator<String> messages=tracker.getMessages();
  int messageCounter=0;
  while (messages.hasNext()) {
    final String m=messages.next();
    final String e=expected[messageCounter++];
    if (e.startsWith("TIMER_END{")) {
      assertEquals(substringAfter(e,','),substringAfter(m,','));
    }
 else {
      assertEquals(e,m.substring(8));
    }
  }
  assertEquals(expected.length,messageCounter);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.event.it.RoundRobinQueueTest </h4><pre class="type-15 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=DEFAULT_TEST_TIMEOUT) public void testRoundRobinQueue() throws Exception {
  final JobManager jobManager=this.getJobManager();
  final Barrier cb=new Barrier(2);
  this.registerJobConsumer(TOPIC + "/start",new JobConsumer(){
    @Override public JobResult process(    final Job job){
      cb.block();
      return JobResult.OK;
    }
  }
);
  final AtomicInteger count=new AtomicInteger(0);
  final AtomicInteger parallelCount=new AtomicInteger(0);
  final Set<Integer> maxParticipants=new HashSet<Integer>();
  this.registerJobConsumer(TOPIC + "/*",new JobConsumer(){
    @Override public JobResult process(    final Job job){
      final int max=parallelCount.incrementAndGet();
      if (max > MAX_PAR) {
        parallelCount.decrementAndGet();
        return JobResult.FAILED;
      }
synchronized (maxParticipants) {
        maxParticipants.add(max);
      }
      sleep(job.getProperty("sleep",30));
      parallelCount.decrementAndGet();
      return JobResult.OK;
    }
  }
);
  this.registerEventHandler(NotificationConstants.TOPIC_JOB_FINISHED,new EventHandler(){
    @Override public void handleEvent(    final Event event){
      count.incrementAndGet();
    }
  }
);
  jobManager.addJob(TOPIC + "/start",null);
  assertTrue("No event received in the given time.",cb.block(5));
  cb.reset();
  final Queue q=jobManager.getQueue(QUEUE_NAME);
  assertNotNull("Queue '" + QUEUE_NAME + "' should exist!",q);
  q.suspend();
  for (int i=0; i < NUM_JOBS; i++) {
    final String subTopic=TOPIC + "/sub" + (i % 10);
    final Map<String,Object> props=new HashMap<String,Object>();
    if (i < 10) {
      props.put("sleep",300);
    }
 else {
      props.put("sleep",30);
    }
    jobManager.addJob(subTopic,props);
  }
  q.resume();
  while (count.get() < NUM_JOBS + 1) {
    assertEquals("Failed count",0,q.getStatistics().getNumberOfFailedJobs());
    assertEquals("Cancelled count",0,q.getStatistics().getNumberOfCancelledJobs());
    sleep(300);
  }
  assertEquals("Finished count",NUM_JOBS + 1,count.get());
  assertEquals("Finished count",NUM_JOBS + 1,jobManager.getStatistics().getNumberOfFinishedJobs());
  assertEquals("Finished count",NUM_JOBS + 1,q.getStatistics().getNumberOfFinishedJobs());
  assertEquals("Failed count",0,q.getStatistics().getNumberOfFailedJobs());
  assertEquals("Cancelled count",0,q.getStatistics().getNumberOfCancelledJobs());
  for (int i=1; i <= MAX_PAR; i++) {
    assertTrue("# Participants " + String.valueOf(i) + " not in "+ maxParticipants,maxParticipants.contains(i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.event.it.UnorderedQueueTest </h4><pre class="type-15 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=DEFAULT_TEST_TIMEOUT) public void testUnorderedQueue() throws Exception {
  final JobManager jobManager=this.getJobManager();
  final Barrier cb=new Barrier(2);
  this.registerJobConsumer(TOPIC + "/start",new JobConsumer(){
    @Override public JobResult process(    final Job job){
      cb.block();
      return JobResult.OK;
    }
  }
);
  final AtomicInteger count=new AtomicInteger(0);
  final AtomicInteger parallelCount=new AtomicInteger(0);
  final Set<Integer> maxParticipants=new HashSet<Integer>();
  this.registerJobConsumer(TOPIC + "/*",new JobConsumer(){
    @Override public JobResult process(    final Job job){
      final int max=parallelCount.incrementAndGet();
      if (max > MAX_PAR) {
        parallelCount.decrementAndGet();
        return JobResult.FAILED;
      }
synchronized (maxParticipants) {
        maxParticipants.add(max);
      }
      sleep(job.getProperty("sleep",30));
      parallelCount.decrementAndGet();
      return JobResult.OK;
    }
  }
);
  this.registerEventHandler(NotificationConstants.TOPIC_JOB_FINISHED,new EventHandler(){
    @Override public void handleEvent(    final Event event){
      count.incrementAndGet();
    }
  }
);
  jobManager.addJob(TOPIC + "/start",null);
  assertTrue("No event received in the given time.",cb.block(5));
  cb.reset();
  final Queue q=jobManager.getQueue(QUEUE_NAME);
  assertNotNull("Queue '" + QUEUE_NAME + "' should exist!",q);
  q.suspend();
  for (int i=0; i < NUM_JOBS; i++) {
    final String subTopic=TOPIC + "/sub" + (i % 10);
    final Map<String,Object> props=new HashMap<String,Object>();
    if (i < 10) {
      props.put("sleep",300);
    }
 else {
      props.put("sleep",30);
    }
    jobManager.addJob(subTopic,props);
  }
  q.resume();
  while (count.get() < NUM_JOBS + 1) {
    assertEquals("Failed count",0,q.getStatistics().getNumberOfFailedJobs());
    assertEquals("Cancelled count",0,q.getStatistics().getNumberOfCancelledJobs());
    sleep(300);
  }
  assertEquals("Finished count",NUM_JOBS + 1,count.get());
  assertEquals("Finished count",NUM_JOBS + 1,jobManager.getStatistics().getNumberOfFinishedJobs());
  assertEquals("Finished count",NUM_JOBS + 1,q.getStatistics().getNumberOfFinishedJobs());
  assertEquals("Failed count",0,q.getStatistics().getNumberOfFailedJobs());
  assertEquals("Cancelled count",0,q.getStatistics().getNumberOfCancelledJobs());
  for (int i=1; i <= MAX_PAR; i++) {
    assertTrue("# Participants " + String.valueOf(i) + " not in "+ maxParticipants,maxParticipants.contains(i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.hapi.client.test.ItemsTest </h4><pre class="type-15 type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testItems() throws ClientException, URISyntaxException {
  MicrodataHtmlClient client=new MicrodataHtmlClient(httpServer.getURI().toString());
  Document doc=client.enter(GET_URL);
  Items items=doc.items();
  Assert.assertThat(items.length(),equalTo(2));
  for (int i=0; i < 2; i++) {
    Assert.assertThat(items.at(i).prop("name").text(),equalTo("Avatar" + i));
    Assert.assertThat(items.at(i).prop("genre").text(),equalTo("Science fiction" + i));
    Assert.assertThat(items.at(i).prop("rank").number(),equalTo(i));
    Assert.assertThat(items.at(i).prop("director").prop("name").text(),equalTo("James Cameron" + i));
    Assert.assertThat(items.at(i).prop("director").prop("birthDate").text(),equalTo("August 16, 1954 - " + i));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.core.impl.InternalResourceTest </h4><pre class="type-15 type-11 type-12 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleProps() throws IOException {
  final String[] types=new String[]{InstallableResource.TYPE_CONFIG,InstallableResource.TYPE_PROPERTIES,null,"zip"};
  for (int i=0; i < types.length; i++) {
    final InstallableResource instRes=new InstallableResource("1",null,getSimpleDict(),null,types[i],null);
    final InternalResource ir=InternalResource.create(SCHEME,instRes);
    assertEquals(SCHEME + ":1",ir.getURL());
    assertEquals("1",ir.getId());
    assertNotNull(ir.getDictionary());
    assertIsSimpleDict(ir.getDictionary());
    assertNotNull(ir.getPrivateCopyOfDictionary());
    assertIsSimpleDict(ir.getPrivateCopyOfDictionary());
    assertNull(ir.getInputStream());
    assertNull(ir.getPrivateCopyOfFile());
    if ("zip".equals(types[i])) {
      assertEquals("zip",ir.getType());
    }
 else {
      assertEquals(InstallableResource.TYPE_PROPERTIES,ir.getType());
    }
    assertNotNull(ir.getDigest());
    assertEquals(InstallableResource.DEFAULT_PRIORITY,ir.getPriority());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.factories.subsystems.base.impl.SubsystemBaseTransformerTest </h4><pre class="type-15 type-11 type-12 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOtherRunMode() throws Exception {
  SlingSettingsService slingSettings=Mockito.mock(SlingSettingsService.class);
  Mockito.when(slingSettings.getRunModes()).thenReturn(new HashSet<String>(Arrays.asList("bar","tar")));
  SubsystemBaseTransformer sbt=new SubsystemBaseTransformer(slingSettings);
  URL testArchive=getClass().getResource("/test1.subsystem-base");
  RegisteredResource resource=new TestRegisteredResource(testArchive);
  TransformationResult[] tra=sbt.transform(resource);
  assertEquals(1,tra.length);
  TransformationResult tr=tra[0];
  assertEquals("esa",tr.getResourceType());
  assertEquals("test1",tr.getId());
  DeleteOnCloseFileInputStream dcis=(DeleteOnCloseFileInputStream)tr.getInputStream();
  assertTrue("The file backing the stream should exist",dcis.file.exists());
  Set<String> foundBundles=new HashSet<>();
  try (ZipInputStream zis=new ZipInputStream(dcis);JarFile jf=new JarFile(testArchive.getFile())){
    ZipEntry ze=null;
    while ((ze=zis.getNextEntry()) != null) {
      foundBundles.add(ze.getName());
switch (ze.getName()) {
case "OSGI-INF/SUBSYSTEM.MF":
        Manifest mf=new Manifest(zis);
      Attributes attrs=mf.getMainAttributes();
    assertEquals("test1",attrs.getValue("Subsystem-SymbolicName"));
  assertEquals("osgi.subsystem.composite",attrs.getValue("Subsystem-Type"));
assertEquals("(c) 2015 yeah!",attrs.getValue("Subsystem-Copyright"));
assertEquals("Extra subsystem headers can go here including very long ones " + "that would span multiple lines in a manifest",attrs.getValue("Subsystem-Description"));
assertEquals("org.apache.sling.commons.osgi;version=2.3.0;type=osgi.bundle;start-order:=0," + "org.apache.sling.commons.json;version=2.0.12;type=osgi.bundle;start-order:=10," + "org.apache.sling.commons.mime;version=2.1.8;type=osgi.bundle;start-order:=10,"+ "org.apache.sling.commons.threads;version=3.2.0;type=osgi.bundle;start-order:=20,"+ "org.apache.sling.commons.contentdetection;version=1.0.2;type=osgi.bundle;start-order:=100",attrs.getValue("Subsystem-Content"));
break;
case "org.apache.sling.commons.osgi-2.3.0.jar":
ZipEntry oze=jf.getEntry("Potential_Bundles/0/org.apache.sling.commons.osgi-2.3.0.jar");
assertArtifactsEqual(oze.getName(),jf.getInputStream(oze),zis);
break;
case "org.apache.sling.commons.json-2.0.12.jar":
ZipEntry jze=jf.getEntry("Potential_Bundles/10/org.apache.sling.commons.json-2.0.12.jar");
assertArtifactsEqual(jze.getName(),jf.getInputStream(jze),zis);
break;
case "org.apache.sling.commons.mime-2.1.8.jar":
ZipEntry mze=jf.getEntry("Potential_Bundles/10/org.apache.sling.commons.mime-2.1.8.jar");
assertArtifactsEqual(mze.getName(),jf.getInputStream(mze),zis);
break;
case "org.apache.sling.commons.threads-3.2.0.jar":
ZipEntry tze=jf.getEntry("Potential_Bundles/20/org.apache.sling.commons.threads-3.2.0.jar");
assertArtifactsEqual(tze.getName(),jf.getInputStream(tze),zis);
break;
case "org.apache.sling.commons.contentdetection-1.0.2.jar":
ZipEntry cze=jf.getEntry("Potential_Bundles/100/org.apache.sling.commons.contentdetection-1.0.2.jar");
assertArtifactsEqual(cze.getName(),jf.getInputStream(cze),zis);
break;
}
}
}
 assertEquals(new HashSet<>(Arrays.asList("OSGI-INF/SUBSYSTEM.MF","org.apache.sling.commons.osgi-2.3.0.jar","org.apache.sling.commons.json-2.0.12.jar","org.apache.sling.commons.mime-2.1.8.jar","org.apache.sling.commons.threads-3.2.0.jar","org.apache.sling.commons.contentdetection-1.0.2.jar")),foundBundles);
assertFalse("After closing the stream the temp file should have been deleted.",dcis.file.exists());
}

</code></pre>

<br>
<pre class="type-15 type-11 type-12 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransformNoRunMode() throws Exception {
  SlingSettingsService slingSettings=Mockito.mock(SlingSettingsService.class);
  SubsystemBaseTransformer sbt=new SubsystemBaseTransformer(slingSettings);
  URL testArchive=getClass().getResource("/test1.subsystem-base");
  RegisteredResource resource=new TestRegisteredResource(testArchive);
  TransformationResult[] tra=sbt.transform(resource);
  assertEquals(1,tra.length);
  TransformationResult tr=tra[0];
  assertEquals("esa",tr.getResourceType());
  assertEquals("test1",tr.getId());
  DeleteOnCloseFileInputStream dcis=(DeleteOnCloseFileInputStream)tr.getInputStream();
  assertTrue("The file backing the stream should exist",dcis.file.exists());
  Set<String> foundBundles=new HashSet<>();
  try (ZipInputStream zis=new ZipInputStream(dcis);JarFile jf=new JarFile(testArchive.getFile())){
    ZipEntry ze=null;
    while ((ze=zis.getNextEntry()) != null) {
      foundBundles.add(ze.getName());
switch (ze.getName()) {
case "OSGI-INF/SUBSYSTEM.MF":
        Manifest mf=new Manifest(zis);
      Attributes attrs=mf.getMainAttributes();
    assertEquals("test1",attrs.getValue("Subsystem-SymbolicName"));
  assertEquals("osgi.subsystem.composite",attrs.getValue("Subsystem-Type"));
assertEquals("(c) 2015 yeah!",attrs.getValue("Subsystem-Copyright"));
assertEquals("Extra subsystem headers can go here including very long ones " + "that would span multiple lines in a manifest",attrs.getValue("Subsystem-Description"));
assertEquals("org.apache.sling.commons.osgi;version=2.3.0;type=osgi.bundle;start-order:=0," + "org.apache.sling.commons.json;version=2.0.12;type=osgi.bundle;start-order:=10," + "org.apache.sling.commons.mime;version=2.1.8;type=osgi.bundle;start-order:=10",attrs.getValue("Subsystem-Content"));
break;
case "org.apache.sling.commons.osgi-2.3.0.jar":
ZipEntry oze=jf.getEntry("Potential_Bundles/0/org.apache.sling.commons.osgi-2.3.0.jar");
assertArtifactsEqual(oze.getName(),jf.getInputStream(oze),zis);
break;
case "org.apache.sling.commons.json-2.0.12.jar":
ZipEntry jze=jf.getEntry("Potential_Bundles/10/org.apache.sling.commons.json-2.0.12.jar");
assertArtifactsEqual(jze.getName(),jf.getInputStream(jze),zis);
break;
case "org.apache.sling.commons.mime-2.1.8.jar":
ZipEntry mze=jf.getEntry("Potential_Bundles/10/org.apache.sling.commons.mime-2.1.8.jar");
assertArtifactsEqual(mze.getName(),jf.getInputStream(mze),zis);
break;
}
}
}
 assertEquals(new HashSet<>(Arrays.asList("OSGI-INF/SUBSYSTEM.MF","org.apache.sling.commons.osgi-2.3.0.jar","org.apache.sling.commons.json-2.0.12.jar","org.apache.sling.commons.mime-2.1.8.jar")),foundBundles);
assertFalse("After closing the stream the temp file should have been deleted.",dcis.file.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.jcr.contentloader.internal.PathEntryTest </h4><pre class="type-15 type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetContentPaths(){
  final Bundle bundle=mockery.mock(Bundle.class);
  final Dictionary<String,String> dict=new Hashtable();
  dict.put("Bnd-LastModified","1258555936230");
  dict.put(PathEntry.CONTENT_HEADER,"test1, test2");
  final long lastModifiedValue=1258555936229L;
  mockery.checking(new Expectations(){
{
      allowing(bundle).getLastModified();
      will(returnValue(lastModifiedValue));
      allowing(bundle).getHeaders();
      will(returnValue(dict));
    }
  }
);
  int i=0;
  Iterator<PathEntry> paths=PathEntry.getContentPaths(bundle);
  assertNotNull(paths);
  while (paths.hasNext()) {
    i++;
    assertEquals(lastModifiedValue,paths.next().getLastModified());
  }
  assertEquals(2,i);
  dict.remove(PathEntry.CONTENT_HEADER);
  assertNull(PathEntry.getContentPaths(bundle));
  mockery.assertIsSatisfied();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.testservices.serversidetests.MappingEventsTest </h4><pre class="type-15 type-12 type-6 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test SLING-4058 - unexpected timeouts in saveMappings 
 */
@Test public void testSaveMappings() throws Exception {
  final Node base=mapRoot.getNode("map/https/localhost.443");
  final MappingsFacade f=new MappingsFacade(eventsCounter);
  try {
    int count=N_STEPS;
    while (count-- > 0) {
      base.setProperty(PROP_REDIRECT_EXTERNAL,"http://somehost." + count);
      final String result=f.saveMappings(session);
      if (result != null) {
        fail(result);
      }
    }
  }
  finally {
    base.setProperty(PROP_REDIRECT_EXTERNAL,"");
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-15 type-12 type-6 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testVanityPaths() throws Exception {
  final MappingsFacade f=new MappingsFacade(eventsCounter);
  final Node vanityTest=maybeCreateNode(session.getRootNode(),"vanityTest","sling:Folder");
  toDelete.add(vanityTest.getPath());
  int count=N_STEPS;
  while (count-- > 0) {
    final String[] paths={"one","two","three_" + count};
    vanityTest.setProperty("sling:vanityPath",paths);
    final String result=f.saveMappings(session);
    if (result != null) {
      fail(result);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.mailarchiveserver.impl.Mime4jMboxParserImplTest </h4><pre class="type-15 type-11 type-12 type-6 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMboxParsing() throws IOException {
  Iterator<Message> iter=parser.parse(new FileInputStream(new File(TU.TEST_FOLDER,WRONGBODY_MBOX)));
  boolean fail=true;
  int i=1;
  while (iter.hasNext()) {
    final Message message=iter.next();
    File bodyFile=new File(TU.TEST_FOLDER,specialPathFromFilePath(WRONGBODY_MBOX,"_bodyOf" + i,"txt"));
    if (bodyFile.exists()) {
      final String actual=getPlainBody(message);
      final String expected=readTextFile(bodyFile);
      assertEquals("Body #" + i,expected,actual);
      fail=false;
    }
    i++;
  }
  if (fail) {
    fail("No file with expected body.");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.maven.projectsupport.BundleListContentProviderTest </h4><pre class="type-15 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies whether objects are null
"></span><br>
@Test public void testIgnoredNonBootstrapBundles(){
  for (int i=0; i <= 30; i++) {
    if (i == 1) {
      continue;
    }
    final String path="resources/bundles/" + i;
    assertNull("Expecting no resources under " + path,provider.getChildren(path));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.pipes.PlumberServletTest </h4><pre class="type-15 type-11 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdditionalBindingsAndWriter() throws Exception {
  String testBinding="testBinding";
  String testBindingLength=testBinding + "Length";
  String bindingValue="testBindingValue";
  String pathLengthParam="pathLength";
  JSONObject bindings=new JSONObject("{'" + testBinding + "':'"+ bindingValue+ "'}");
  JSONObject respObject=new JSONObject("{'" + pathLengthParam + "':'${path.get(\"dummyGrandChild\").length}','"+ testBindingLength+ "':'${"+ testBinding+ ".length}'}");
  SlingHttpServletRequest request=mockPlumberServletRequest(context.resourceResolver(),dummyTreePath,null,bindings.toString(),respObject.toString(),null);
  servlet.execute(request,response,false);
  assertDummyTree();
  JSONObject response=new JSONObject(stringResponse.toString());
  JSONArray array=response.getJSONArray(PlumberServlet.KEY_ITEMS);
  for (int i=0; i < array.length(); i++) {
    JSONObject object=array.optJSONObject(i);
    assertNotNull("there should be an object returned at each time",object);
    String path=object.optString(PlumberServlet.PATH_KEY);
    assertNotNull("the string path should be returned for each item, containing the path of the resource");
    String pathLength=object.optString(pathLengthParam);
    assertNotNull("there should be a pathLength param, as specified in the writer",pathLength);
    assertEquals("Pathlength should be the string representation of the path length",path.length() + "",pathLength);
    String testBindingLengthValue=object.optString(testBindingLength);
    assertNotNull("testBindingLength should be there",testBindingLengthValue);
    assertEquals("testBindingLength should be the string representation of the additional binding length",bindingValue.length() + "",testBindingLengthValue);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resource.collection.impl.ResourceCollectionImplTest </h4><pre class="type-15 type-11 type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOrdering() throws Exception {
  final ResourceCollection collection=rcm.createCollection(resResolver.getResource("/"),"test1");
  String[] resPaths={"/res1","/res2"};
  final Resource resource=resResolver.create(resResolver.getResource("/"),resPaths[0].substring(1),Collections.singletonMap(ResourceResolver.PROPERTY_RESOURCE_TYPE,(Object)"type"));
  collection.add(resource,null);
  final Resource resource2=resResolver.create(resResolver.getResource("/"),resPaths[1].substring(1),Collections.singletonMap(ResourceResolver.PROPERTY_RESOURCE_TYPE,(Object)"type"));
  collection.add(resource2,null);
  Assert.assertEquals(true,collection.contains(resource2));
  Assert.assertNotNull(resResolver.getResource("/test1"));
  Assert.assertEquals(ResourceCollection.RESOURCE_TYPE,resResolver.getResource("/test1").getResourceType());
  Iterator<Resource> resources=collection.getResources();
  int numOfRes=0;
  while (resources.hasNext()) {
    Resource entry=resources.next();
    Assert.assertEquals(resPaths[numOfRes],entry.getPath());
    numOfRes++;
  }
  try {
    collection.orderBefore(resource,resource);
    Assert.fail("should have thrown IllegalArgument");
  }
 catch (  IllegalArgumentException e) {
  }
  collection.orderBefore(resource2,resource);
  resources=collection.getResources();
  numOfRes=2;
  while (resources.hasNext()) {
    numOfRes--;
    Resource entry=resources.next();
    Assert.assertEquals(resPaths[numOfRes],entry.getPath());
  }
  Assert.assertEquals(0,numOfRes);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.MockedResourceResolverImplTest </h4><pre class="type-15 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests list children via the resource (NB, this doesn't really test the
 * resource resolver at all, but validates this unit test.)
 * @throws LoginException
 */
@Test public void testListChildren() throws LoginException {
  ResourceResolver resourceResolver=resourceResolverFactory.getResourceResolver(null);
  buildResource("/single/test/withchildren",buildChildResources("/single/test/withchildren"),resourceResolver,resourceProvider);
  Resource resource=resourceResolver.getResource("/single/test/withchildren");
  Assert.assertNotNull(resource);
  Iterator<Resource> resourceIterator=resource.listChildren();
  Assert.assertNotNull(resourceResolver);
  int i=0;
  while (resourceIterator.hasNext()) {
    Assert.assertEquals("m" + i,resourceIterator.next().getName());
    i++;
  }
  Assert.assertEquals(5,i);
}

</code></pre>

<br>
<pre class="type-15 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test listing children via the resource resolver listChildren call.
 * @throws LoginException
 */
@Test public void testResourceResolverListChildren() throws LoginException {
  ResourceResolver resourceResolver=resourceResolverFactory.getResourceResolver(null);
  buildResource("/single/test/withchildren",buildChildResources("/single/test/withchildren"),resourceResolver,resourceProvider);
  Resource resource=resourceResolver.getResource("/single/test/withchildren");
  Assert.assertNotNull(resource);
  Iterator<Resource> resourceIterator=resourceResolver.listChildren(resource);
  Assert.assertNotNull(resourceResolver);
  int i=0;
  while (resourceIterator.hasNext()) {
    Assert.assertEquals("m" + i,resourceIterator.next().getName());
    i++;
  }
  Assert.assertEquals(5,i);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.helper.ResourceResolverControlTest </h4><pre class="type-15 type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies finding resources
 */
@Test public void findResource() throws PersistenceException {
  Iterator<Resource> resources=crp.findResources(QUERY_MOCK_FIND_ALL,QL_MOCK);
  int count=0;
  while (resources.hasNext()) {
    assertThat("resources[0].path",resources.next().getPath(),equalTo("/some/path/object"));
    count++;
  }
  assertThat("query result count",count,Matchers.equalTo(1));
}

</code></pre>

<br>
<pre class="type-15 type-9 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Verifies running a query
 */
@Test public void queryResources() throws PersistenceException {
  Iterator<Map<String,Object>> queryResources=crp.queryResources(QUERY_MOCK_FIND_ALL,QL_MOCK);
  int count=0;
  while (queryResources.hasNext()) {
    assertThat("ValueMap returned from query",queryResources.next(),hasEntry("key",(Object)"value"));
    count++;
  }
  assertThat("query result count",count,Matchers.equalTo(1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.mapping.BloomFilterUtilsTest </h4><pre class="type-15 type-13 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void probability(){
  byte[] bloom=BloomFilterUtils.createFilter(20,64);
  System.out.println(bloom.length);
  Random random=new Random(1);
  random.setSeed(1);
  for (int i=0; i < 20; i++) {
    BloomFilterUtils.add(bloom,random.nextInt());
  }
  random.setSeed(1);
  for (int i=0; i < 20; i++) {
    assertTrue(BloomFilterUtils.probablyContains(bloom,random.nextInt()));
  }
  int falsePositives=0;
  for (int i=20; i < 100000; i++) {
    if (BloomFilterUtils.probablyContains(bloom,random.nextInt())) {
      falsePositives++;
    }
  }
  assertEquals(4594,falsePositives);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.samples.pathbasedrtp.MappingTest </h4><pre class="type-15 type-12 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleMapping(){
  final Mapping m=new Mapping("/content:2");
  final String[][] testCases={{"/content/foo","nt:unstructured","foo"},{"/content/foo/bar","nt:unstructured","foo"},{"/not/content/foo/bar","nt:unstructured",null},{"/content/foo/bar","nt:file",null}};
  for (int i=0; i < testCases.length; i++) {
    final String[] tc=testCases[i];
    if (tc[2] == null) {
      assertNull("At index " + i,m.getResourceType(tc[0],tc[1]));
    }
 else {
      assertEquals("At index " + i,tc[2],m.getResourceType(tc[0],tc[1]));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.jcr.MockPropertyTest </h4><pre class="type-15 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValueArray() throws RepositoryException {
  Value[] value1=new Value[]{this.session.getValueFactory().createValue("aaa"),this.session.getValueFactory().createValue("bbb")};
  this.node1.setProperty("prop1",value1);
  Property prop1=this.node1.getProperty("prop1");
  Value[] values=prop1.getValues();
  for (int i=0; i < values.length; i++) {
    assertEquals("value #" + i,value1[i].getString(),values[i].getString());
  }
  Value[] value2=new Value[]{this.session.getValueFactory().createValue("cc")};
  prop1.setValue(value2);
  values=prop1.getValues();
  for (int i=0; i < values.length; i++) {
    assertEquals("value #" + i,value2[i].getString(),values[i].getString());
  }
  assertTrue(prop1.isMultiple());
  assertTrue(prop1.getDefinition().isMultiple());
  assertArrayEquals(new long[]{2},prop1.getLengths());
}

</code></pre>

<br>
<pre class="type-15 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStringArray() throws RepositoryException {
  String[] value1=new String[]{"aaa","bbb"};
  this.node1.setProperty("prop1",value1);
  Property prop1=this.node1.getProperty("prop1");
  Value[] values=prop1.getValues();
  for (int i=0; i < values.length; i++) {
    assertEquals("value #" + i,value1[i],values[i].getString());
  }
  String[] value2=new String[]{"cc"};
  prop1.setValue(value2);
  values=prop1.getValues();
  for (int i=0; i < values.length; i++) {
    assertEquals("value #" + i,value2[i],values[i].getString());
  }
  assertTrue(prop1.isMultiple());
  assertTrue(prop1.getDefinition().isMultiple());
  assertArrayEquals(new long[]{2},prop1.getLengths());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.tools.test.ServerSetupSingletonTest </h4><pre class="type-15 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailingStartup(){
  TestSetupPhase.failingPhases="two, five";
  for (int i=0; i < 3; i++) {
    try {
      serverSetup.setupTestServer();
      fail("startup should have failed");
    }
 catch (    Exception ignored) {
    }
    assertEquals("Expecting only one startup phase to have run","one",TestSetupPhase.executionLog.toString());
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
