<h3><span class=" glyphicon glyphicon-tag"/>&nbspUtilityVerifier</h3><kbd>Verifies (un)successful execution of the test case by reporting explicitly a failure</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.sling.api.resource.ResourceMetadataTest </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testLockedPut(){
  final ResourceMetadata m=new ResourceMetadata();
  m.lock();
  try {
    m.put("after","locking");
    fail("put() should fail after locking");
  }
 catch (  UnsupportedOperationException uoe) {
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testLockedPutAll(){
  final ResourceMetadata m=new ResourceMetadata();
  m.lock();
  try {
    m.putAll(TEST_MAP);
    fail("putAll() should fail after locking");
  }
 catch (  UnsupportedOperationException uoe) {
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testLockedRemove(){
  final ResourceMetadata m=new ResourceMetadata();
  m.lock();
  try {
    m.remove("foo");
    fail("remove() should fail after locking");
  }
 catch (  UnsupportedOperationException uoe) {
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testLockedClear(){
  final ResourceMetadata m=new ResourceMetadata();
  m.lock();
  try {
    m.clear();
    fail("clear() should fail after locking");
  }
 catch (  UnsupportedOperationException uoe) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.api.resource.ResourceUtilTest </h4><pre class="type-12 type-6 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetParentLevel() throws Exception {
  boolean caughtNullPointerException=false;
  try {
    ResourceUtil.getParent(null,4);
  }
 catch (  NullPointerException e) {
    caughtNullPointerException=true;
  }
catch (  Exception e) {
    fail("Expected NullPointerException, but caught " + e.getClass().getName() + " instead.");
  }
  if (!caughtNullPointerException) {
    fail("Expected NullPointerException, but no exception was thrown.");
  }
  boolean caughtIllegalArgumentException=false;
  try {
    ResourceUtil.getParent("/a/b",-2);
  }
 catch (  IllegalArgumentException e) {
    caughtIllegalArgumentException=true;
  }
catch (  Exception e) {
    fail("Expected IllegalArgumentException, but caught " + e.getClass().getName() + " instead.");
  }
  if (!caughtIllegalArgumentException) {
    fail("Expected IllegalArgumentException, but no exception was thrown.");
  }
  assertNull(ResourceUtil.getParent("/a",4));
  assertNull(ResourceUtil.getParent("/",1));
  assertNull(ResourceUtil.getParent("b/c",2));
  assertNull(ResourceUtil.getParent("/b/..",1));
  assertNull(ResourceUtil.getParent("b",1));
  assertNull(ResourceUtil.getParent("",3));
  assertNull(ResourceUtil.getParent("/..",1));
  assertNull(ResourceUtil.getParent("security:/b",2));
  assertNull(ResourceUtil.getParent("/b///",2));
  assertEquals("",ResourceUtil.getParent("",0));
  assertEquals("b",ResourceUtil.getParent("b",0));
  assertEquals("/",ResourceUtil.getParent("/",0));
  assertEquals("/a/b",ResourceUtil.getParent("/a/b",0));
  assertEquals("security:/b",ResourceUtil.getParent("security:/b",0));
  assertEquals("/",ResourceUtil.getParent("/b",1));
  assertEquals("b",ResourceUtil.getParent("b/c",1));
  assertEquals("b/c",ResourceUtil.getParent("b/c/d",1));
  assertEquals("/b/c",ResourceUtil.getParent("/b/c/d",1));
  assertEquals("security:/",ResourceUtil.getParent("security:/b",1));
  assertEquals("security:/b",ResourceUtil.getParent("security:/b/c",1));
  assertEquals("security:/b/c",ResourceUtil.getParent("security:/b/c/d",1));
  assertEquals("b",ResourceUtil.getParent("b/c/d",2));
  assertEquals("b/c",ResourceUtil.getParent("b/c/d/e",2));
  assertEquals("/",ResourceUtil.getParent("/b/c/d",3));
  assertEquals("/",ResourceUtil.getParent("/b///",1));
}

</code></pre>

<br>
<pre class="type-6 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveRelativeSegments(){
  assertEquals("/",ResourceUtil.normalize("/"));
  assertEquals("/",ResourceUtil.normalize("///"));
  assertEquals("/a/b/c",ResourceUtil.normalize("/a//b/c"));
  assertEquals("/a/b/c",ResourceUtil.normalize("/a/b//c"));
  assertEquals("/a/b/c",ResourceUtil.normalize("/a///b///c"));
  assertEquals("/a/b/c",ResourceUtil.normalize("/a/b/c/"));
  assertEquals("/a/b/c",ResourceUtil.normalize("/a/b/c//"));
  assertEquals("/a/b/c",ResourceUtil.normalize("/a/b/c///"));
  assertEquals("/az/bz/cz",ResourceUtil.normalize("/az//bz/cz"));
  assertEquals("/az/bz/cz",ResourceUtil.normalize("/az/bz//cz"));
  assertEquals("/az/bz/cz",ResourceUtil.normalize("/az///bz///cz"));
  assertEquals("/az/bz/cz",ResourceUtil.normalize("/az/bz/cz/"));
  assertEquals("/az/bz/cz",ResourceUtil.normalize("/az/bz/cz//"));
  assertEquals("/az/bz/cz",ResourceUtil.normalize("/az/bz/cz///"));
  assertEquals("/a",ResourceUtil.normalize("/a"));
  assertEquals("/a",ResourceUtil.normalize("//a"));
  assertEquals("/a",ResourceUtil.normalize("///a"));
  assertEquals("/az",ResourceUtil.normalize("/az"));
  assertEquals("/az",ResourceUtil.normalize("//az"));
  assertEquals("/az",ResourceUtil.normalize("///az"));
  assertEquals("/",ResourceUtil.normalize("/."));
  assertEquals("/a",ResourceUtil.normalize("/a/."));
  assertEquals("/a",ResourceUtil.normalize("/./a"));
  assertEquals("/a/b",ResourceUtil.normalize("/a/./b"));
  assertEquals("/a/b",ResourceUtil.normalize("/a/b/."));
  assertEquals("/a/b",ResourceUtil.normalize("/a/./b/."));
  assertEquals("/",ResourceUtil.normalize("/."));
  assertEquals("/az",ResourceUtil.normalize("/az/."));
  assertEquals("/az",ResourceUtil.normalize("/./az"));
  assertEquals("/az/bz",ResourceUtil.normalize("/az/./bz"));
  assertEquals("/az/bz",ResourceUtil.normalize("/az/bz/."));
  assertEquals("/az/bz",ResourceUtil.normalize("/az/./bz/."));
  assertNull(ResourceUtil.normalize("/.."));
  assertNull(ResourceUtil.normalize("/.."));
  assertEquals("/",ResourceUtil.normalize("/a/.."));
  assertEquals("/a",ResourceUtil.normalize("/a/b/.."));
  assertEquals("/",ResourceUtil.normalize("/a/b/../.."));
  assertNull(ResourceUtil.normalize("/a/b/../../.."));
  assertNull(ResourceUtil.normalize("/.."));
  assertNull(ResourceUtil.normalize("/.."));
  assertEquals("/",ResourceUtil.normalize("/az/.."));
  assertEquals("/az",ResourceUtil.normalize("/az/bz/.."));
  assertEquals("/",ResourceUtil.normalize("/az/bz/../.."));
  assertNull(ResourceUtil.normalize("/az/bz/../../.."));
  assertEquals("/b",ResourceUtil.normalize("/a/../b"));
  assertEquals("/a/c",ResourceUtil.normalize("/a/b/../c"));
  assertEquals("/c",ResourceUtil.normalize("/a/b/../../c"));
  assertNull(ResourceUtil.normalize("/a/b/../../../c"));
  assertEquals("/bz",ResourceUtil.normalize("/az/../bz"));
  assertEquals("/az/cz",ResourceUtil.normalize("/az/bz/../cz"));
  assertEquals("/cz",ResourceUtil.normalize("/az/bz/../../cz"));
  assertNull(ResourceUtil.normalize("/az/bz/../../../cz"));
  assertEquals("/...",ResourceUtil.normalize("/..."));
  assertEquals("/a/...",ResourceUtil.normalize("/a/..."));
  assertEquals("/a/b/...",ResourceUtil.normalize("/a/b/..."));
  assertEquals("/az/...",ResourceUtil.normalize("/az/..."));
  assertEquals("/az/bz/...",ResourceUtil.normalize("/az/bz/..."));
  try {
    ResourceUtil.normalize(null);
    fail("Resolving null expects NullPointerException");
  }
 catch (  NullPointerException npe) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.api.resource.util.PathSetTest </h4><pre class="type-6 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testToStringSet(){
  final PathSet set=PathSet.fromStrings("/a","/x/y");
  final Set<String> stringSet=set.toStringSet();
  assertEquals(2,stringSet.size());
  assertTrue(stringSet.contains("/a"));
  assertTrue(stringSet.contains("/x/y"));
  try {
    stringSet.add("foo");
    fail();
  }
 catch (  final UnsupportedOperationException uoe) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.auth.form.FormReasonTest </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test_INVALID(){
  try {
    FormReason.valueOf("INVALID");
    fail("unexpected result getting value of an invalid constant");
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.bgservlets.impl.DeepNodeCreatorTest </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testCannotReadFoo() throws Exception {
  final Mockery mockery=new Mockery();
  final Session s=mockery.mock(Session.class);
  final String fooPath="/foo";
  final Node foo=mockery.mock(Node.class,fooPath);
  final String barPath="/foo/bar";
  final Node bar=mockery.mock(Node.class,barPath);
  final Node root=mockery.mock(Node.class,"/");
  mockery.checking(new Expectations(){
{
      allowing(s).itemExists(with(any(String.class)));
      will(returnValue(false));
      allowing(s).itemExists(barPath);
      will(returnValue(true));
      allowing(s).getItem(fooPath);
      will(returnValue(foo));
      allowing(s).getItem(barPath);
      will(returnValue(bar));
      allowing(s).getRootNode();
      will(returnValue(root));
      allowing(root).addNode(with(any(String.class)),with(any(String.class)));
      will(throwException(new ItemExistsException("As if the child node was not readable")));
      allowing(s).save();
    }
  }
);
  final DeepNodeCreator c=new DeepNodeCreator();
  try {
    c.deepCreateNode("/foo/bar/something",s,"nt:unstructured");
    fail("Expecting an exception as /foo is not accessible");
  }
 catch (  ItemExistsException asExpected) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.bgservlets.impl.SuspendableOutputStreamTest </h4><pre class="type-6 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStop() throws IOException {
  final ByteArrayOutputStream bos=new ByteArrayOutputStream();
  final SuspendableOutputStream f=new SuspendableOutputStream(bos);
  assertEquals("Expecting NEW state first",JobStatus.State.NEW,f.getState());
  f.requestStateChange(JobStatus.State.RUNNING);
  f.write(TEST.getBytes());
  f.flush();
  f.requestStateChange(JobStatus.State.STOPPED);
  assertEquals("Expecting STOP_REQUESTED state before write",JobStatus.State.STOP_REQUESTED,f.getState());
  try {
    f.write("nothing".getBytes());
    fail("Expected StreamStoppedException when writing to STOPPED stream");
  }
 catch (  SuspendableOutputStream.StreamStoppedException asExpected) {
  }
  assertEquals("Expecting STOPPED state after write",JobStatus.State.STOPPED,f.getState());
}

</code></pre>

<br>
<pre class="type-6 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSuspendThenStop() throws Exception {
  final ByteArrayOutputStream bos=new ByteArrayOutputStream();
  final SuspendableOutputStream f=new SuspendableOutputStream(bos);
  assertEquals("Expecting NEW state first",JobStatus.State.NEW,f.getState());
  final WriterThread t=new WriterThread(f);
  t.setDaemon(true);
  t.start();
  f.requestStateChange(JobStatus.State.SUSPENDED);
  final long delay=WriterThread.WRITE_DELAY * 3;
  Thread.sleep(delay);
  assertEquals("Expecting SUSPEND state after a few writes",JobStatus.State.SUSPENDED,f.getState());
  f.requestStateChange(JobStatus.State.STOPPED);
  assertEquals("Expecting STOP_REQUESTED state before write",JobStatus.State.STOP_REQUESTED,f.getState());
  try {
    f.write("nothing".getBytes());
    fail("Expected StreamStoppedException when writing to STOPPED stream");
  }
 catch (  SuspendableOutputStream.StreamStoppedException asExpected) {
  }
  assertEquals("Expecting STOPPED state after write",JobStatus.State.STOPPED,f.getState());
  f.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.bgservlets.it.BackgroundRequestIT </h4><pre class="type-15 type-12 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTmpRequestCreatesJob() throws IOException, InterruptedException, JSONException {
  final int initialJobs=countStoredJobs();
  T.getContent(HttpTest.HTTP_BASE_URL + "/tmp.json?sling:bg=true","application/json");
  final long timeout=System.currentTimeMillis() + 10000L;
  while (true) {
    if (countStoredJobs() >= initialJobs + 1) {
      break;
    }
    if (System.currentTimeMillis() > timeout) {
      fail("Timeout waiting for background job creation");
    }
    Thread.sleep(50L);
  }
  final String path="/var/bg/jobs.tidy.1.json";
  final JSONObject json=new JSONObject(T.getContent(HttpTest.HTTP_BASE_URL + path,"application/json"));
  int matches=0;
  final Pattern instanceIdPattern=Pattern.compile("([0-9a-fA-F\\\\-]){20,}");
  final Iterator<String> it=json.keys();
  while (it.hasNext()) {
    final String key=it.next();
    if (instanceIdPattern.matcher(key).matches()) {
      matches++;
    }
  }
  if (matches == 0) {
    fail("No instance ID node found under " + path);
  }
  Thread.sleep(2000L);
  assertEquals("Expecting no extra jobs",initialJobs + 1,countStoredJobs());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.bgservlets.it.JobConsoleIT </h4><pre class="type-15 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testJobConsoleOutput() throws IOException, InterruptedException, JSONException {
  T.getContent(HttpTest.HTTP_BASE_URL + "/tmp.json?sling:bg=true","application/json");
  final long timeout=System.currentTimeMillis() + 10000L;
  final String path="/system/console/bgservlets";
  final Pattern instanceIdPattern=Pattern.compile("(?s).+([0-9a-fA-F\\\\-]){20,}.+");
  while (true) {
    final String jobConsoleContent=T.getContent(HttpTest.HTTP_BASE_URL + path,HttpTest.CONTENT_TYPE_HTML);
    if (instanceIdPattern.matcher(jobConsoleContent).matches()) {
      break;
    }
    if (System.currentTimeMillis() > timeout) {
      fail("Timeout waiting for instance ID at " + path);
    }
    Thread.sleep(50L);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.cassandra.test.data.populator.CassandraDataAddTest </h4><pre class="type-6 type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddData(){
  String cf="p1";
  try {
    String r1=getrowID("/content/cassandra/" + cf + "/c1");
    String r2=getrowID("/content/cassandra/" + cf + "/c1/c2");
    CassandraResourceProvider cassandraResourceProvider=new CassandraResourceProvider();
    createColumnFamily(cf,cassandraResourceProvider.getKeyspace(),new StringSerializer());
    cassandraResourceProvider.setColumnFamily(cf);
    addData(cassandraResourceProvider.getKeyspace(),cf,new StringSerializer(),new String[]{"'" + r1 + "','/content/cassandra/"+ cf+ "/c1','nt:cassandra1','nt:supercass1','resolutionPathInfo=json'","'" + r2 + "','/content/cassandra/"+ cf+ "/c1/c2','nt:cassandra','nt:supercass2','resolutionPathInfo=json'"});
    Assert.assertTrue(true);
  }
 catch (  Exception e) {
    LOGGER.info("Ignore err" + e.getMessage());
    Assert.fail("Failed to add data to cassandra");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.cassandra.test.data.populator.CassandraModifyResourceProviderAddTest </h4><pre class="type-6 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddData(){
  String cf="p2";
  try {
    String path1="/content/cassandra/" + cf + "/c1";
    CassandraResourceProvider cassandraResourceProvider=new CassandraResourceProvider();
    createColumnFamily(cf,cassandraResourceProvider.getKeyspace(),new StringSerializer());
    cassandraResourceProvider.setColumnFamily(cf);
    Map<String,Object> map1=new HashMap<String,Object>();
    map1.put("metadata","resolutionPathInfo=json");
    map1.put("resourceType","nt:cassandra0");
    map1.put("resourceSuperType","nt:supercass1");
    CassandraResourceResolver resolver=new CassandraResourceResolver();
    cassandraResourceProvider.create(resolver,path1,map1);
    Assert.assertNull("Before Commiting Resource should be null",cassandraResourceProvider.getResource(resolver,path1));
    cassandraResourceProvider.commit(resolver);
    Assert.assertNotNull("Commited Resource cannot be null",cassandraResourceProvider.getResource(resolver,path1));
  }
 catch (  Exception e) {
    LOGGER.info("Ignore err" + e.getMessage());
    Assert.fail("Failed to add data to cassandra");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.cassandra.test.data.populator.CassandraModifyResourceProviderDeleteTest </h4><pre class="type-6 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteData(){
  String cf="p3";
  try {
    String path1="/content/cassandra/" + cf + "/c1";
    CassandraResourceProvider cassandraResourceProvider=new CassandraResourceProvider();
    createColumnFamily(cf,cassandraResourceProvider.getKeyspace(),new StringSerializer());
    cassandraResourceProvider.setColumnFamily(cf);
    Map<String,Object> map1=new HashMap<String,Object>();
    map1.put("metadata","resolutionPathInfo=json");
    map1.put("resourceType","nt:cassandra0");
    map1.put("resourceSuperType","nt:supercass1");
    CassandraResourceResolver resolver=new CassandraResourceResolver();
    cassandraResourceProvider.create(resolver,path1,map1);
    Assert.assertNull("Before Commiting Resource should be null",cassandraResourceProvider.getResource(resolver,path1));
    cassandraResourceProvider.commit(resolver);
    Assert.assertNotNull("Commited Resource cannot be null",cassandraResourceProvider.getResource(resolver,path1));
    cassandraResourceProvider.delete(resolver,path1);
    Assert.assertNotNull("Uncommited deleted resource cannot be null",cassandraResourceProvider.getResource(resolver,path1));
    cassandraResourceProvider.commit(resolver);
    Assert.assertNull("Deleted resource should be null",cassandraResourceProvider.getResource(resolver,path1));
  }
 catch (  Exception e) {
    LOGGER.info("Ignore err" + e.getMessage());
    Assert.fail("Failed to add data to cassandra");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.cassandra.test.data.populator.CassandraModifyResourceProviderRevertTest </h4><pre class="type-6 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRevertData(){
  String cf="p4";
  try {
    String path1="/content/cassandra/" + cf + "/c1";
    CassandraResourceProvider cassandraResourceProvider=new CassandraResourceProvider();
    createColumnFamily(cf,cassandraResourceProvider.getKeyspace(),new StringSerializer());
    cassandraResourceProvider.setColumnFamily(cf);
    Map<String,Object> map1=new HashMap<String,Object>();
    map1.put("metadata","resolutionPathInfo=json");
    map1.put("resourceType","nt:cassandra0");
    map1.put("resourceSuperType","nt:supercass1");
    CassandraResourceResolver resolver=new CassandraResourceResolver();
    cassandraResourceProvider.create(resolver,path1,map1);
    Assert.assertNull("Before Commiting resource should be null",cassandraResourceProvider.getResource(resolver,path1));
    cassandraResourceProvider.revert(resolver);
    Assert.assertNull("Reverted resource should be null",cassandraResourceProvider.getResource(resolver,path1));
  }
 catch (  Exception e) {
    LOGGER.info("Ignore err" + e.getMessage());
    Assert.fail("Failed to add data to cassandra");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.classloader.it.DynamicClassLoaderIT </h4><pre class="type-11 type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPackageAdminClassLoader() throws Exception {
  assertNotNull(getDynamicClassLoader());
  final URL url=new URL(mavenBundle("org.apache.sling","org.apache.sling.commons.osgi","2.1.0").getURL());
  final InputStream is=url.openStream();
  Bundle osgiBundle=null;
  try {
    osgiBundle=this.bundleContext.installBundle(url.toExternalForm(),is);
  }
  finally {
    try {
      is.close();
    }
 catch (    final IOException ignore) {
    }
  }
  assertNotNull(osgiBundle);
  assertEquals(Bundle.INSTALLED,osgiBundle.getState());
  final String className="org.apache.sling.commons.osgi.PropertiesUtil";
  try {
    getDynamicClassLoader().loadClass(className);
    fail("Class should not be available");
  }
 catch (  final ClassNotFoundException expected) {
  }
  osgiBundle.getResource("/something");
  assertEquals(Bundle.RESOLVED,osgiBundle.getState());
  try {
    getDynamicClassLoader().loadClass(className);
    fail("Class should not be available");
  }
 catch (  final ClassNotFoundException expected) {
  }
  osgiBundle.start();
  assertEquals(Bundle.ACTIVE,osgiBundle.getState());
  try {
    getDynamicClassLoader().loadClass(className);
  }
 catch (  final ClassNotFoundException expected) {
    fail("Class should be available");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.contentdetection.internal.FileNameExtractorImplTest </h4><pre class="type-11 type-6 type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidEncoding() throws NoSuchFieldException, SecurityException, IllegalArgumentException, IllegalAccessException {
  final String rawPath="http://example.com/demo%20test.jpg?test=true";
  final String oldEncoding=defaultEncoding;
  final String badEncoding="INVALID_ENCODING";
  try {
    defaultEncoding=badEncoding;
    try {
      fileNameExtractor.extract(rawPath);
      Assert.fail("Expected an exception with encoding " + defaultEncoding);
    }
 catch (    RuntimeException re) {
      final String msg=re.getMessage();
      Assert.assertTrue("Expected exception message to contain " + badEncoding + " ("+ msg+ ")",msg.contains(badEncoding));
    }
  }
  finally {
    defaultEncoding=oldEncoding;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.json.JSONObjectTest </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * See <a href="https://issues.apache.org/jira/browse/SLING-929">SLING-929</a>
 */
@Test public void testFailAppend() throws JSONException {
  JSONObject obj=new JSONObject();
  obj.put(KEY,"value1");
  try {
    obj.append(KEY,"value2");
    TestCase.fail("Accepted append() to a non-array property");
  }
 catch (  JSONException ignore) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.commons.json.JSONObjectToStringTest </h4><pre class="type-6 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testJSONStringException() throws JSONException {
  final JSONString js=new JSONString(){
    @Override public String toString(){
      return toJSONString();
    }
    public String toJSONString(){
      throw new UnsupportedOperationException("toJSONString");
    }
  }
;
  j.put("should.fail",js);
  assertNull("Expecting null output for toString()",j.toString());
  try {
    assertNull("Expecting null output for toString(2)",j.toString(2));
    fail("Expected UnsupportedOperationException");
  }
 catch (  UnsupportedOperationException uso) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.crankstart.launcher.BasicLauncherIT </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testAdditionalBundles() throws Exception {
  final String[] addBundles={"org.apache.sling.commons.mime","org.apache.sling.settings"};
  for (  String name : addBundles) {
    try {
      osgiConsole.checkBundleInstalled(name,U.LONG_TIMEOUT_SECONDS);
    }
 catch (    AssertionError ae) {
      fail("Expected bundle to be present:" + name);
    }
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testBundlesFromNestedModel() throws Exception {
  final String[] addBundles={"org.apache.sling.commons.threads","org.apache.sling/org.apache.sling.discovery.api"};
  for (  String name : addBundles) {
    try {
      osgiConsole.checkBundleInstalled(name,U.LONG_TIMEOUT_SECONDS);
    }
 catch (    AssertionError ae) {
      fail("Expected bundle to be present:" + name);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.commons.DefaultTopologyViewTest </h4><pre class="type-6 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetInstances() throws Exception {
  DefaultTopologyView newView=TopologyHelper.createTopologyView(UUID.randomUUID().toString(),UUID.randomUUID().toString());
  Set<InstanceDescription> instances=newView.getInstances();
  assertNotNull(instances);
  try {
    instances.remove(instances.iterator().next());
    fail("list should not be modifiable");
  }
 catch (  Exception e) {
  }
}

</code></pre>

<br>
<pre class="type-11 type-6 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFind() throws Exception {
  DefaultTopologyView newView=TopologyHelper.createTopologyView(UUID.randomUUID().toString(),UUID.randomUUID().toString());
  TopologyHelper.createAndAddInstanceDescription(newView,newView.getClusterViews().iterator().next());
  try {
    newView.findInstances(null);
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  final DefaultInstanceDescription id=TopologyHelper.createAndAddInstanceDescription(newView,newView.getClusterViews().iterator().next());
  TopologyHelper.createAndAddInstanceDescription(newView,newView.getClusterViews().iterator().next());
  assertEquals(4,newView.findInstances(new InstanceFilter(){
    public boolean accept(    InstanceDescription instance){
      return true;
    }
  }
).size());
  assertEquals(1,newView.findInstances(new InstanceFilter(){
    public boolean accept(    InstanceDescription instance){
      return instance.getSlingId().equals(id.getSlingId());
    }
  }
).size());
  assertEquals(1,newView.findInstances(new InstanceFilter(){
    public boolean accept(    InstanceDescription instance){
      return instance.isLeader();
    }
  }
).size());
  assertEquals(1,newView.findInstances(new InstanceFilter(){
    boolean first=true;
    public boolean accept(    InstanceDescription instance){
      if (!first) {
        return false;
      }
      first=false;
      return true;
    }
  }
).size());
}

</code></pre>

<br>
<pre class="type-11 type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompare() throws Exception {
  DefaultTopologyView newView=TopologyHelper.createTopologyView(UUID.randomUUID().toString(),UUID.randomUUID().toString());
  try {
    newView.compareTopology(null);
    fail("Should complain about null");
  }
 catch (  Exception e) {
  }
  DefaultTopologyView oldView=TopologyHelper.cloneTopologyView(newView);
  assertNull(newView.compareTopology(oldView));
  DefaultInstanceDescription id=TopologyHelper.createInstanceDescription(newView.getClusterViews().iterator().next());
  TopologyHelper.addInstanceDescription(newView,id);
  assertEquals(Type.TOPOLOGY_CHANGED,newView.compareTopology(oldView));
  assertEquals(2,newView.getInstances().size());
  TopologyHelper.addInstanceDescription(newView,id);
  assertEquals(2,newView.getInstances().size());
  oldView=TopologyHelper.cloneTopologyView(newView);
  assertNull(newView.compareTopology(oldView));
  DefaultInstanceDescription instance=(DefaultInstanceDescription)newView.getInstances().iterator().next();
  instance.setProperty("a","b");
  assertEquals(Type.PROPERTIES_CHANGED,newView.compareTopology(oldView));
  oldView=TopologyHelper.cloneTopologyView(newView);
  assertNull(newView.compareTopology(oldView));
  instance.setProperty("a","B");
  assertEquals(Type.PROPERTIES_CHANGED,newView.compareTopology(oldView));
  oldView=TopologyHelper.cloneTopologyView(newView);
  assertNull(newView.compareTopology(oldView));
  instance.setProperty("a","B");
  assertNull(newView.compareTopology(oldView));
  Iterator<InstanceDescription> it=newView.getInstances().iterator();
  DefaultInstanceDescription firstInstance=(DefaultInstanceDescription)it.next();
  assertNotNull(firstInstance);
  DefaultInstanceDescription secondInstance=(DefaultInstanceDescription)it.next();
  assertNotNull(secondInstance);
  firstInstance.setProperty("c","d");
  DefaultClusterView cluster=new DefaultClusterView(UUID.randomUUID().toString());
  PrivateAccessor.setField(secondInstance,"clusterView",null);
  cluster.addInstanceDescription(secondInstance);
  assertEquals(Type.TOPOLOGY_CHANGED,newView.compareTopology(oldView));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.connectors.announcement.AnnouncementRegistryImplTest </h4><pre class="type-6 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLists() throws Exception {
  try {
    registry.listAnnouncementsInSameCluster(null);
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    registry.listAnnouncementsInSameCluster(null);
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  assertEquals(0,registry.listLocalAnnouncements().size());
  assertEquals(0,registry.listLocalIncomingAnnouncements().size());
  DefaultClusterView localCluster=new DefaultClusterView(UUID.randomUUID().toString());
  DefaultInstanceDescription instance=TopologyHelper.createInstanceDescription(slingId,true,localCluster);
  assertEquals(0,registry.listAnnouncementsInSameCluster(localCluster).size());
  assertEquals(0,registry.listLocalAnnouncements().size());
  assertEquals(0,registry.listLocalIncomingAnnouncements().size());
  Announcement ann=new Announcement(slingId);
  ann.setLocalCluster(localCluster);
  ann.setInherited(true);
  registry.registerAnnouncement(ann);
  assertEquals(1,registry.listAnnouncementsInSameCluster(localCluster).size());
  assertEquals(1,registry.listLocalAnnouncements().size());
  assertEquals(0,registry.listLocalIncomingAnnouncements().size());
  ann.setInherited(true);
  assertEquals(0,registry.listLocalIncomingAnnouncements().size());
  assertTrue(registry.hasActiveAnnouncement(slingId));
  assertFalse(registry.hasActiveAnnouncement(UUID.randomUUID().toString()));
  registry.unregisterAnnouncement(slingId);
  assertEquals(0,registry.listAnnouncementsInSameCluster(localCluster).size());
  assertEquals(0,registry.listLocalAnnouncements().size());
  assertEquals(0,registry.listLocalIncomingAnnouncements().size());
  assertFalse(registry.hasActiveAnnouncement(slingId));
  assertFalse(registry.hasActiveAnnouncement(UUID.randomUUID().toString()));
  ann.setInherited(false);
  registry.registerAnnouncement(ann);
  assertEquals(1,registry.listAnnouncementsInSameCluster(localCluster).size());
  assertEquals(1,registry.listLocalAnnouncements().size());
  assertEquals(1,registry.listLocalIncomingAnnouncements().size());
  assertTrue(registry.hasActiveAnnouncement(slingId));
  assertFalse(registry.hasActiveAnnouncement(UUID.randomUUID().toString()));
  registry.unregisterAnnouncement(slingId);
  assertEquals(0,registry.listAnnouncementsInSameCluster(localCluster).size());
  assertEquals(0,registry.listLocalAnnouncements().size());
  assertEquals(0,registry.listLocalIncomingAnnouncements().size());
  assertFalse(registry.hasActiveAnnouncement(slingId));
  assertFalse(registry.hasActiveAnnouncement(UUID.randomUUID().toString()));
  assertEquals(1,ann.listInstances().size());
  registry.addAllExcept(ann,localCluster,new AnnouncementFilter(){
    public boolean accept(    String receivingSlingId,    Announcement announcement){
      assertNotNull(receivingSlingId);
      assertNotNull(announcement);
      return true;
    }
  }
);
  assertEquals(1,ann.listInstances().size());
  registry.registerAnnouncement(createAnnouncement(createCluster(3),1,false));
  assertEquals(1,registry.listAnnouncementsInSameCluster(localCluster).size());
  assertEquals(3,registry.listInstances(localCluster).size());
  registry.addAllExcept(ann,localCluster,new AnnouncementFilter(){
    public boolean accept(    String receivingSlingId,    Announcement announcement){
      assertNotNull(receivingSlingId);
      assertNotNull(announcement);
      return true;
    }
  }
);
  assertEquals(4,ann.listInstances().size());
  registry.registerAnnouncement(ann);
  assertEquals(2,registry.listAnnouncementsInSameCluster(localCluster).size());
}

</code></pre>

<br>
<pre class="type-11 type-6 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterUnregister() throws Exception {
  try {
    registry.registerAnnouncement(null);
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    registry.unregisterAnnouncement(null);
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    registry.unregisterAnnouncement("");
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    new Announcement(null);
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    new Announcement("");
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  Announcement ann=new Announcement(slingId);
  assertFalse(ann.isValid());
  assertFalse(registry.registerAnnouncement(ann) != -1);
  DefaultClusterView localCluster=new DefaultClusterView(UUID.randomUUID().toString());
  ann.setLocalCluster(localCluster);
  assertFalse(ann.isValid());
  assertFalse(registry.registerAnnouncement(ann) != -1);
  try {
    registry.listInstances(localCluster);
    fail("doing getInstances() on an empty cluster should throw an illegalstateexception");
  }
 catch (  IllegalStateException ise) {
  }
  DefaultInstanceDescription instance=TopologyHelper.createInstanceDescription(ann.getOwnerId(),true,localCluster);
  assertEquals(instance.getSlingId(),ann.getOwnerId());
  assertTrue(ann.isValid());
  assertTrue(registry.registerAnnouncement(ann) != -1);
  assertEquals(1,registry.listInstances(localCluster).size());
  registry.checkExpiredAnnouncements();
  assertEquals(1,registry.listInstances(localCluster).size());
  registry.unregisterAnnouncement(ann.getOwnerId());
  assertEquals(0,registry.listInstances(localCluster).size());
  assertTrue(ann.isValid());
  assertTrue(registry.registerAnnouncement(ann) != -1);
  assertEquals(1,registry.listInstances(localCluster).size());
  Thread.sleep(10500);
  assertEquals(0,registry.listInstances(localCluster).size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.connectors.ping.ConnectorRegistryImplTest </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testRegisterUnregister() throws Exception {
  BaseConfig config=new SimpleConnectorConfig(){
    @Override public long getConnectorPingTimeout(){
      return 20000;
    }
  }
;
  AnnouncementRegistryImpl announcementRegistry=AnnouncementRegistryImpl.testConstructorAndActivate(MockFactory.mockResourceResolverFactory(),new DummySlingSettingsService(UUID.randomUUID().toString()),config);
  ConnectorRegistry c=ConnectorRegistryImpl.testConstructor(announcementRegistry,config);
  final URL url=new URL("http://localhost:1234/connector");
  final ClusterViewService cvs=i.getClusterViewService();
  try {
    c.registerOutgoingConnector(null,url);
    fail("should have complained");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    c.registerOutgoingConnector(cvs,null);
    fail("should have complained");
  }
 catch (  IllegalArgumentException e) {
  }
  TopologyConnectorClientInformation client=c.registerOutgoingConnector(cvs,url);
  try {
    client=c.registerOutgoingConnector(cvs,url);
  }
 catch (  IllegalStateException e) {
    fail("should no longer be thrown");
  }
  try {
    c.unregisterOutgoingConnector(null);
    fail("should have complained");
  }
 catch (  IllegalArgumentException e) {
  }
  c.unregisterOutgoingConnector(client.getId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.connectors.ping.wl.WildcardHelperTest </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testNullValues(){
  SubnetUtils s=new SubnetUtils("1.2.3.4/10");
  s=new SubnetUtils("1.2.3.4","255.255.0.0");
  try {
    WildcardHelper.wildcardAsRegex(null);
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    WildcardHelper.matchesWildcard(null,"foo");
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    WildcardHelper.matchesWildcard("foo",null);
    fail("should complain");
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.its.AbstractClusterLoadTest </h4><pre class="type-6 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFramework() throws Exception {
  logger.info("testFramework: building 1st instance..");
  VirtualInstanceBuilder builder=newBuilder().newRepository("/var/discovery/impl/ClusterLoadTest/testFramework/",true).setDebugName("firstInstance").setConnectorPingTimeout(3).setConnectorPingInterval(20).setMinEventDelay(0);
  VirtualInstance firstInstance=builder.build();
  instances.add(firstInstance);
  Thread.sleep(2000);
  try {
    firstInstance.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  firstInstance.startViewChecker(1);
  Thread.sleep(4000);
  firstInstance.dumpRepo();
  firstInstance.assertEstablishedView();
  VirtualInstanceBuilder builder2=newBuilder().useRepositoryOf(builder).setDebugName("secondInstance").setConnectorPingTimeout(3).setConnectorPingInterval(20).setMinEventDelay(0);
  firstInstance.dumpRepo();
  logger.info("testFramework: building 2nd instance..");
  VirtualInstance secondInstance=builder2.build();
  instances.add(secondInstance);
  secondInstance.startViewChecker(1);
  Thread.sleep(4000);
  firstInstance.dumpRepo();
  assertEquals(firstInstance.getClusterViewService().getLocalClusterView().getInstances().size(),2);
  assertEquals(secondInstance.getClusterViewService().getLocalClusterView().getInstances().size(),2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.its.AbstractClusterTest </h4><pre class="type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdditionalInstance() throws Throwable {
  logger.info("testAdditionalInstance: start");
  assertNotNull(instance1);
  assertNotNull(instance2);
  assertEquals(instance1.getSlingId(),instance1.getClusterViewService().getSlingId());
  assertEquals(instance2.getSlingId(),instance2.getClusterViewService().getSlingId());
  try {
    instance1.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  try {
    instance2.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  instance1.dumpRepo();
  logger.info("testAdditionalInstance: 1st 2s sleep");
  Thread.sleep(2000);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  logger.info("testAdditionalInstance: 2nd 2s sleep");
  Thread.sleep(2000);
  instance1.dumpRepo();
  String clusterId1=instance1.getClusterViewService().getLocalClusterView().getId();
  logger.info("clusterId1=" + clusterId1);
  String clusterId2=instance2.getClusterViewService().getLocalClusterView().getId();
  logger.info("clusterId2=" + clusterId2);
  assertEquals(clusterId1,clusterId2);
  assertEquals(2,instance1.getClusterViewService().getLocalClusterView().getInstances().size());
  assertEquals(2,instance2.getClusterViewService().getLocalClusterView().getInstances().size());
  AssertingTopologyEventListener assertingTopologyEventListener=new AssertingTopologyEventListener();
  assertingTopologyEventListener.addExpected(Type.TOPOLOGY_INIT);
  assertEquals(1,assertingTopologyEventListener.getRemainingExpectedCount());
  instance1.bindTopologyEventListener(assertingTopologyEventListener);
  Thread.sleep(500);
  assertEquals(0,assertingTopologyEventListener.getRemainingExpectedCount());
  AcceptsMultiple acceptsMultiple=new AcceptsMultiple(Type.TOPOLOGY_CHANGING,Type.TOPOLOGY_CHANGED);
  assertingTopologyEventListener.addExpected(acceptsMultiple);
  assertingTopologyEventListener.addExpected(acceptsMultiple);
  instance3=newBuilder().setDebugName("thirdInstance").useRepositoryOf(instance1).build();
  for (int i=0; i < 4; i++) {
    instance1.heartbeatsAndCheckView();
    instance2.heartbeatsAndCheckView();
    instance3.heartbeatsAndCheckView();
    logger.info("testAdditionalInstance: i=" + i + ", 2s sleep");
    Thread.sleep(2000);
  }
  assertEquals(1,acceptsMultiple.getEventCnt(Type.TOPOLOGY_CHANGING));
  assertEquals(1,acceptsMultiple.getEventCnt(Type.TOPOLOGY_CHANGED));
  logger.info("testAdditionalInstance: end");
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * Tests a situation where a connector was done to instance1, which eventually
 * crashed, then the connector is done to instance4 (which is in a separate, 3rd cluster). 
 * Meanwhile instance1 got restarted and this test assures that the instance3 is not reported
 * twice in the topology. This used to happen prior to SLING-4139
 */
@Test public void testStaleInstanceIn3Clusters4139() throws Throwable {
  logger.info("testStaleInstanceIn3Clusters4139: start");
  final String instance1SlingId=prepare4139();
  instance4=newBuilder().setDebugName("remoteInstance4").newRepository("/var/discovery/implremote4/",false).setConnectorPingTimeout(Integer.MAX_VALUE).setMinEventDelay(1).build();
  try {
    instance4.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  instance4.heartbeatsAndCheckView();
  instance4.heartbeatsAndCheckView();
  pingConnector(instance3,instance4);
  instance1Restarted=newBuilder().setDebugName("firstInstance").useRepositoryOf(instance2).setConnectorPingTimeout(Integer.MAX_VALUE).setMinEventDelay(1).setSlingId(instance1SlingId).build();
  runHeartbeatOnceWith(instance1Restarted,instance2,instance3,instance4);
  pingConnector(instance3,instance4);
  runHeartbeatOnceWith(instance1Restarted,instance2,instance3,instance4);
  pingConnector(instance3,instance4);
  logger.info("iteration 0");
  logger.info("instance1Restarted.slingId: " + instance1Restarted.slingId);
  logger.info("instance2.slingId: " + instance2.slingId);
  logger.info("instance3.slingId: " + instance3.slingId);
  logger.info("instance4.slingId: " + instance4.slingId);
  instance1Restarted.dumpRepo();
  assertSameTopology(new SimpleClusterView(instance3),new SimpleClusterView(instance4));
  assertSameTopology(new SimpleClusterView(instance1Restarted,instance2));
  Thread.sleep(100);
  runHeartbeatOnceWith(instance1Restarted,instance2,instance3,instance4);
  pingConnector(instance3,instance4);
  runHeartbeatOnceWith(instance1Restarted,instance2,instance3,instance4);
  pingConnector(instance3,instance4);
  logger.info("iteration 1");
  logger.info("instance1Restarted.slingId: " + instance1Restarted.slingId);
  logger.info("instance2.slingId: " + instance2.slingId);
  logger.info("instance3.slingId: " + instance3.slingId);
  logger.info("instance4.slingId: " + instance4.slingId);
  instance1Restarted.dumpRepo();
  assertSameTopology(new SimpleClusterView(instance1Restarted,instance2));
  assertSameTopology(new SimpleClusterView(instance3),new SimpleClusterView(instance4));
  Thread.sleep(100);
  runHeartbeatOnceWith(instance1Restarted,instance2,instance3,instance4);
  pingConnector(instance3,instance4);
  logger.info("iteration 2");
  logger.info("instance1Restarted.slingId: " + instance1Restarted.slingId);
  logger.info("instance2.slingId: " + instance2.slingId);
  logger.info("instance3.slingId: " + instance3.slingId);
  logger.info("instance4.slingId: " + instance4.slingId);
  instance1Restarted.dumpRepo();
  assertSameTopology(new SimpleClusterView(instance1Restarted,instance2));
  assertSameTopology(new SimpleClusterView(instance3),new SimpleClusterView(instance4));
  instance1Restarted.stop();
  logger.info("testStaleInstanceIn3Clusters4139: end");
}

</code></pre>

<br>
<pre class="type-11 type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClusterView() throws Exception {
  logger.info("testClusterView: start");
  assertNotNull(instance1);
  assertNotNull(instance2);
  assertNull(instance3);
  instance3=newBuilder().setDebugName("thirdInstance").useRepositoryOf(instance1).build();
  assertNotNull(instance3);
  assertEquals(instance1.getSlingId(),instance1.getClusterViewService().getSlingId());
  assertEquals(instance2.getSlingId(),instance2.getClusterViewService().getSlingId());
  assertEquals(instance3.getSlingId(),instance3.getClusterViewService().getSlingId());
  try {
    instance1.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  try {
    instance2.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  try {
    instance3.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  instance1.dumpRepo();
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  instance3.heartbeatsAndCheckView();
  instance1.dumpRepo();
  logger.info("testClusterView: 1st 2s sleep");
  Thread.sleep(2000);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  instance3.heartbeatsAndCheckView();
  logger.info("testClusterView: 2nd 2s sleep");
  Thread.sleep(2000);
  instance1.dumpRepo();
  String clusterId1=instance1.getClusterViewService().getLocalClusterView().getId();
  logger.info("clusterId1=" + clusterId1);
  String clusterId2=instance2.getClusterViewService().getLocalClusterView().getId();
  logger.info("clusterId2=" + clusterId2);
  String clusterId3=instance3.getClusterViewService().getLocalClusterView().getId();
  logger.info("clusterId3=" + clusterId3);
  assertEquals(clusterId1,clusterId2);
  assertEquals(clusterId1,clusterId3);
  assertEquals(3,instance1.getClusterViewService().getLocalClusterView().getInstances().size());
  assertEquals(3,instance2.getClusterViewService().getLocalClusterView().getInstances().size());
  assertEquals(3,instance3.getClusterViewService().getLocalClusterView().getInstances().size());
  logger.info("testClusterView: end");
}

</code></pre>

<br>
<pre class="type-11 type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStableClusterId() throws Throwable {
  logger.info("testStableClusterId: start");
  instance2.stopViewChecker();
  instance1.stopViewChecker();
  instance2.stop();
  instance1.stop();
  instance1=newBuilder().setDebugName("firstInstance").newRepository("/var/discovery/impl/",true).setConnectorPingTimeout(100).setMinEventDelay(1).build();
  instance2=newBuilder().setDebugName("secondInstance").useRepositoryOf(instance1).setConnectorPingTimeout(100).setMinEventDelay(1).build();
  assertNotNull(instance1);
  assertNotNull(instance2);
  try {
    instance1.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  try {
    instance2.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  String newClusterId1=instance1.getClusterViewService().getLocalClusterView().getId();
  String newClusterId2=instance2.getClusterViewService().getLocalClusterView().getId();
  assertEquals(newClusterId1,newClusterId1);
  instance1.dumpRepo();
  assertEquals(2,instance1.getClusterViewService().getLocalClusterView().getInstances().size());
  assertEquals(2,instance2.getClusterViewService().getLocalClusterView().getInstances().size());
  instance2.getConfig().setViewCheckTimeout(1);
  instance1.getConfig().setViewCheckTimeout(1);
  instance2.stopViewChecker();
  instance1.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  assertEquals(1,instance1.getClusterViewService().getLocalClusterView().getInstances().size());
  try {
    instance2.getViewChecker().checkView();
    instance2.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  instance1.dumpRepo();
  String actualClusterId=instance1.getClusterViewService().getLocalClusterView().getId();
  logger.info("expected cluster id: " + newClusterId1);
  logger.info("actual   cluster id: " + actualClusterId);
  assertEquals(newClusterId1,actualClusterId);
  logger.info("testStableClusterId: end");
}

</code></pre>

<br>
<pre class="type-11 type-12 type-6 type-13 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test plan:
 * * have a discoveryservice with two listeners registered
 * * one of them (the 'first' one) is long running
 * * during one of the topology changes, when the first
 * one is hit, deactivate the discovery service
 * * that deactivation used to block (SLING-4755) due
 * to synchronized(lock) which was blocked by the
 * long running listener. With having asynchronous
 * event sending this should no longer be the case
 * * also, once asserted that deactivation finished,
 * and that the first listener is still busy, make
 * sure that once the first listener finishes, that
 * the second listener still gets the event
 * @throws Throwable 
 */
@Test public void testLongRunningListener() throws Throwable {
  instance1.getConfig().setViewCheckTimeout(2);
  instance2.getConfig().setViewCheckTimeout(2);
  logger.info("testLongRunningListener : letting instance2 remain silent from now on");
  instance1.heartbeatsAndCheckView();
  Thread.sleep(1500);
  instance1.heartbeatsAndCheckView();
  Thread.sleep(1500);
  instance1.heartbeatsAndCheckView();
  Thread.sleep(1500);
  instance1.heartbeatsAndCheckView();
  logger.info("testLongRunningListener : instance 2 should now be considered dead");
  LongRunningListener longRunningListener1=new LongRunningListener();
  AssertingTopologyEventListener fastListener2=new AssertingTopologyEventListener();
  fastListener2.addExpected(Type.TOPOLOGY_INIT);
  longRunningListener1.assertNoFail();
  assertEquals(1,fastListener2.getRemainingExpectedCount());
  logger.info("testLongRunningListener : binding longRunningListener1 ...");
  instance1.bindTopologyEventListener(longRunningListener1);
  logger.info("testLongRunningListener : binding fastListener2 ...");
  instance1.bindTopologyEventListener(fastListener2);
  logger.info("testLongRunningListener : waiting a bit for longRunningListener1 to receive the TOPOLOGY_INIT event");
  Thread.sleep(2500);
  assertEquals(0,fastListener2.getRemainingExpectedCount());
  assertTrue(longRunningListener1.initReceived);
  fastListener2.addExpected(Type.TOPOLOGY_CHANGING);
  fastListener2.addExpected(Type.TOPOLOGY_CHANGED);
  instance1.getConfig().setViewCheckTimeout(10);
  instance2.getConfig().setViewCheckTimeout(10);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.heartbeatsAndCheckView();
  instance2.heartbeatsAndCheckView();
  Thread.sleep(500);
  instance1.dumpRepo();
  longRunningListener1.assertNoFail();
  assertEquals(0,fastListener2.getUnexpectedCount());
  assertEquals(1,fastListener2.getRemainingExpectedCount());
  assertEquals(1,longRunningListener1.noninitReceived);
  Thread.sleep(2000);
  assertTrue(longRunningListener1.getChangedSemaphore().hasQueuedThreads());
  Thread.sleep(2000);
  assertEquals(0,fastListener2.getUnexpectedCount());
  assertEquals(1,fastListener2.getRemainingExpectedCount());
  assertEquals(1,longRunningListener1.noninitReceived);
  assertTrue(longRunningListener1.getChangedSemaphore().hasQueuedThreads());
  final List<Exception> asyncException=new LinkedList<Exception>();
  Thread th=new Thread(new Runnable(){
    public void run(){
      try {
        instance1.stop();
      }
 catch (      Exception e) {
synchronized (asyncException) {
          asyncException.add(e);
        }
      }
    }
  }
);
  th.start();
  logger.info("Waiting max 4 sec...");
  th.join(4000);
  logger.info("Done waiting max 4 sec...");
  if (th.isAlive()) {
    logger.warn("Thread still alive: " + th.isAlive());
    longRunningListener1.getChangedSemaphore().release();
    fail("Thread was still alive");
  }
  logger.info("Thread was no longer alive: " + th.isAlive());
synchronized (asyncException) {
    logger.info("Async exceptions: " + asyncException.size());
    if (asyncException.size() != 0) {
      longRunningListener1.getChangedSemaphore().release();
      fail("async exceptions: " + asyncException.size() + ", first: "+ asyncException.get(0));
    }
  }
  longRunningListener1.getChangedSemaphore().release();
  Thread.sleep(500);
  assertEquals(0,fastListener2.getUnexpectedCount());
  assertEquals(0,fastListener2.getRemainingExpectedCount());
  assertEquals(2,longRunningListener1.noninitReceived);
  assertFalse(longRunningListener1.getChangedSemaphore().hasQueuedThreads());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.base.its.AbstractSingleInstanceTest </h4><pre class="type-11 type-6 type-13 type-9 type-7 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetters() throws UndefinedClusterViewException, InterruptedException {
  logger.info("testGetters: start");
  assertNotNull(instance);
  logger.info("sling id=" + instance.getSlingId());
  try {
    instance.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  instance.heartbeatsAndCheckView();
  Thread.sleep(4000);
  assertNotNull(instance.getClusterViewService().getLocalClusterView());
  ClusterView cv=instance.getClusterViewService().getLocalClusterView();
  logger.info("cluster view: id=" + cv.getId());
  assertNotNull(cv.getId());
  assertNotSame(cv.getId(),"");
  List<InstanceDescription> instances=cv.getInstances();
  assertNotNull(instances);
  assertTrue(instances.size() == 1);
  InstanceDescription myInstance=instances.get(0);
  assertNotNull(myInstance);
  assertTrue(myInstance.getClusterView() == cv);
  logger.info("instance id: " + myInstance.getSlingId());
  assertEquals(instance.getSlingId(),myInstance.getSlingId());
  Map<String,String> properties=myInstance.getProperties();
  assertNotNull(properties);
  assertNull(myInstance.getProperty("foo"));
  assertTrue(myInstance.isLeader());
  assertTrue(myInstance.isLocal());
  logger.info("testGetters: end");
}

</code></pre>

<br>
<pre class="type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBootstrap() throws Throwable {
  logger.info("testBootstrap: start");
  try {
    instance.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  AssertingTopologyEventListener ada=new AssertingTopologyEventListener();
  instance.bindTopologyEventListener(ada);
  assertEquals(0,ada.getEvents().size());
  assertEquals(0,ada.getUnexpectedCount());
  try {
    instance.getClusterViewService().getLocalClusterView();
    fail("should complain");
  }
 catch (  UndefinedClusterViewException e) {
  }
  ada.addExpected(Type.TOPOLOGY_INIT);
  instance.heartbeatsAndCheckView();
  Thread.sleep(1000);
  instance.heartbeatsAndCheckView();
  Thread.sleep(1000);
  logger.info("testBoostrap: dumping repo...");
  instance.dumpRepo();
  logger.info("testBoostrap: dumping listener...");
  ada.dump();
  assertEquals(0,ada.getUnexpectedCount());
  assertEquals(1,ada.getEvents().size());
  TopologyEvent initEvent=ada.getEvents().remove(0);
  assertNotNull(initEvent);
  assertNotNull(initEvent.getNewView());
  assertNotNull(initEvent.getNewView().getClusterViews());
  instance.assertEstablishedView();
  logger.info("testBootstrap: end");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.commons.providers.DefaultClusterViewTest </h4><pre class="type-6 type-9 type-7 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstructor() throws Exception {
  try {
    new DefaultClusterView(null);
    fail("should throw an exception");
  }
 catch (  Exception e) {
  }
  try {
    new DefaultClusterView("");
    fail("should throw an exception");
  }
 catch (  Exception e) {
  }
  final String slingId=UUID.randomUUID().toString();
  DefaultClusterView cv=new DefaultClusterView(slingId);
  assertEquals(slingId,cv.getId());
  try {
    cv.getInstances();
    fail("should throw an exception");
  }
 catch (  Exception e) {
  }
  try {
    cv.getLeader();
    fail("should throw an exception");
  }
 catch (  Exception e) {
  }
  try {
    cv.getInstances();
    fail("should complain that there were never any instances added...");
  }
 catch (  Exception e) {
  }
  DefaultInstanceDescription id0=new DefaultInstanceDescription(null,false,false,UUID.randomUUID().toString(),null);
  try {
    cv.getInstances();
    fail("should complain that there were never any instances added...");
  }
 catch (  Exception e) {
  }
  cv.addInstanceDescription(id0);
  assertEquals(1,cv.getInstances().size());
  assertSame(id0,cv.getInstances().get(0));
  try {
    cv.addInstanceDescription(id0);
    fail("can only set clusterview once");
  }
 catch (  Exception e) {
  }
  assertEquals(1,cv.getInstances().size());
  DefaultInstanceDescription id=new DefaultInstanceDescription(cv,true,false,UUID.randomUUID().toString(),null);
  assertEquals(2,cv.getInstances().size());
  try {
    cv.addInstanceDescription(id);
    fail("can only set clusterview once - already set in constructor above");
  }
 catch (  Exception e) {
  }
  assertEquals(2,cv.getInstances().size());
  assertSame(id,cv.getInstances().get(1));
  assertSame(id,cv.getLeader());
  DefaultInstanceDescription id2=new DefaultInstanceDescription(cv,false,false,UUID.randomUUID().toString(),null);
  try {
    cv.addInstanceDescription(id2);
    fail("can only set clusterview once - already set in constructor above");
  }
 catch (  Exception e) {
  }
  assertEquals(3,cv.getInstances().size());
  assertSame(id,cv.getLeader());
  try {
    cv.addInstanceDescription(id);
    fail("should throw an exception");
  }
 catch (  Exception e) {
  }
  try {
    cv.addInstanceDescription(id2);
    fail("should throw an exception");
  }
 catch (  Exception e) {
  }
  try {
    DefaultInstanceDescription id3=new DefaultInstanceDescription(cv,true,false,UUID.randomUUID().toString(),null);
    cv.addInstanceDescription(id3);
    fail("should throw an exception");
  }
 catch (  Exception e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.commons.providers.DefaultInstanceDescriptionTest </h4><pre class="type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConstructor() throws Exception {
  final String slingId=UUID.randomUUID().toString();
  final DefaultClusterView clusterView=null;
  final boolean isLeader=false;
  final boolean isOwn=false;
  final String theSlingId=null;
  final Map<String,String> properties=null;
  try {
    constructInstanceDescription(clusterView,isLeader,isOwn,theSlingId,properties);
    fail("should have thrown an exception");
  }
 catch (  Exception e) {
  }
  try {
    constructInstanceDescription(null,false,false,"",null);
    fail("should have thrown an exception");
  }
 catch (  Exception e) {
  }
  try {
    constructInstanceDescription(null,false,false,slingId,null).setClusterView(null);
    fail("should have thrown an exception");
  }
 catch (  Exception e) {
  }
  try {
    constructInstanceDescription(null,false,false,slingId,null).setProperties(null);
    fail("should have thrown an exception");
  }
 catch (  Exception e) {
  }
  DefaultInstanceDescription id=constructInstanceDescription(null,false,false,slingId,null);
  id.setClusterView(new DefaultClusterView(UUID.randomUUID().toString()));
  try {
    id.setClusterView(new DefaultClusterView(UUID.randomUUID().toString()));
    fail("should have thrown an exception");
  }
 catch (  Exception e) {
  }
  assertEquals(slingId,constructInstanceDescription(null,false,false,slingId,null).getSlingId());
  assertEquals(true,constructInstanceDescription(null,true,false,slingId,null).isLeader());
  assertEquals(false,constructInstanceDescription(null,false,false,slingId,null).isLeader());
  assertEquals(false,constructInstanceDescription(null,false,false,slingId,null).isLocal());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.commons.providers.EventFactoryTest </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testChangedEvent() throws Exception {
  try {
    EventHelper.newChangedEvent(null,null);
    fail("should complain");
  }
 catch (  Exception e) {
  }
  try {
    EventHelper.newChangedEvent(newView(),null);
    fail("should complain");
  }
 catch (  Exception e) {
  }
  try {
    EventHelper.newChangedEvent(null,newView());
    fail("should complain");
  }
 catch (  Exception e) {
  }
  try {
    EventHelper.newChangedEvent(newView(),newView());
    fail("should complain");
  }
 catch (  Exception e) {
  }
  BaseTopologyView oldView=newView();
  oldView.setNotCurrent();
  BaseTopologyView newView=newView();
  EventHelper.newChangedEvent(oldView,newView);
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testPropertiesEvent() throws Exception {
  try {
    EventHelper.newPropertiesChangedEvent(null,null);
    fail("should complain");
  }
 catch (  Exception e) {
  }
  try {
    EventHelper.newPropertiesChangedEvent(newView(),null);
    fail("should complain");
  }
 catch (  Exception e) {
  }
  try {
    EventHelper.newPropertiesChangedEvent(null,newView());
    fail("should complain");
  }
 catch (  Exception e) {
  }
  try {
    EventHelper.newPropertiesChangedEvent(newView(),newView());
    fail("should complain");
  }
 catch (  Exception e) {
  }
  BaseTopologyView oldView=newView();
  oldView.setNotCurrent();
  BaseTopologyView newView=newView();
  EventHelper.newPropertiesChangedEvent(oldView,newView);
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testInitEvent() throws Exception {
  try {
    EventHelper.newInitEvent(null);
    fail("should complain");
  }
 catch (  Exception e) {
  }
  EventHelper.newInitEvent(newView());
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testChangingEvent() throws Exception {
  try {
    EventHelper.newChangingEvent(null);
    fail("should complain");
  }
 catch (  Exception e) {
  }
  try {
    EventHelper.newChangingEvent(newView());
    fail("should complain");
  }
 catch (  Exception e) {
  }
  BaseTopologyView view=newView();
  view.setNotCurrent();
  EventHelper.newChangingEvent(view);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.discovery.impl.common.heartbeat.HeartbeatTest </h4><pre class="type-15 type-11 type-12 type-6 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * SLING-5027 : test to reproduce the voting loop
 * (and verify that it's fixed)
 */
@Test public void testVotingLoop() throws Throwable {
  logger.info("testVotingLoop: creating slowMachine1...");
  FullJR2VirtualInstanceBuilder slowBuilder1=newBuilder();
  slowBuilder1.setDebugName("slow1").newRepository("/var/discovery/impl/",true).setConnectorPingTimeout(600).setConnectorPingInterval(999).setMinEventDelay(0);
  FullJR2VirtualInstance slowMachine1=slowBuilder1.fullBuild();
  instances.add(slowMachine1);
  SimpleTopologyEventListener slowListener1=new SimpleTopologyEventListener("slow1");
  slowMachine1.bindTopologyEventListener(slowListener1);
  logger.info("testVotingLoop: creating slowMachine2...");
  FullJR2VirtualInstanceBuilder slowBuilder2=newBuilder();
  slowBuilder2.setDebugName("slow2").useRepositoryOf(slowMachine1).setConnectorPingTimeout(600).setConnectorPingInterval(999).setMinEventDelay(0);
  FullJR2VirtualInstance slowMachine2=slowBuilder2.fullBuild();
  instances.add(slowMachine2);
  SimpleTopologyEventListener slowListener2=new SimpleTopologyEventListener("slow2");
  slowMachine2.bindTopologyEventListener(slowListener2);
  logger.info("testVotingLoop: creating fastMachine...");
  FullJR2VirtualInstanceBuilder fastBuilder=newBuilder();
  fastBuilder.setDebugName("fast").useRepositoryOf(slowMachine1).setConnectorPingTimeout(600).setConnectorPingInterval(999).setMinEventDelay(0);
  FullJR2VirtualInstance fastMachine=fastBuilder.fullBuild();
  instances.add(fastMachine);
  SimpleTopologyEventListener fastListener=new SimpleTopologyEventListener("fast");
  fastMachine.bindTopologyEventListener(fastListener);
  HeartbeatHandler hhSlow1=slowMachine1.getHeartbeatHandler();
  HeartbeatHandler hhSlow2=slowMachine2.getHeartbeatHandler();
  HeartbeatHandler hhFast=fastMachine.getHeartbeatHandler();
  Thread.sleep(1000);
  logger.info("testVotingLoop: after some initial 1sec sleep no event should yet have been sent");
  assertFalse(fastMachine.getDiscoveryService().getTopology().isCurrent());
  assertFalse(slowMachine1.getDiscoveryService().getTopology().isCurrent());
  assertFalse(slowMachine2.getDiscoveryService().getTopology().isCurrent());
  assertNull(fastListener.getLastEvent());
  assertNull(slowListener1.getLastEvent());
  assertNull(slowListener2.getLastEvent());
  logger.info("testVotingLoop: stopping voting of slowMachine1...");
  slowMachine1.stopVoting();
  logger.info("testVotingLoop: letting slow1, slow2 and fast all issue 1 heartbeat");
  hhSlow1.issueHeartbeat();
  hhSlow2.issueHeartbeat();
  hhFast.issueHeartbeat();
  logger.info("testVotingLoop: let the fast one do a checkView, thus initiate a voting");
  hhFast.doCheckView();
  Calendar previousVotedAt=null;
  for (int i=0; i < 5; i++) {
    logger.info("testVotingLoop: sleeping 1sec...");
    Thread.sleep(1000);
    logger.info("testVotingLoop: check to see that there is no voting loop...");
    ResourceResolverFactory factory=fastMachine.getResourceResolverFactory();
    ResourceResolver resourceResolver=factory.getAdministrativeResourceResolver(null);
    try {
      List<VotingView> ongoingVotings=VotingHelper.listOpenNonWinningVotings(resourceResolver,fastMachine.getFullConfig());
      assertNotNull(ongoingVotings);
      assertEquals(1,ongoingVotings.size());
      VotingView ongoingVote=ongoingVotings.get(0);
      assertFalse(ongoingVote.isWinning());
      assertFalse(ongoingVote.hasVotedYes(slowMachine1.getSlingId()));
      assertTrue(ongoingVote.hasVotedYes(slowMachine2.getSlingId()));
      final Resource memberResource=ongoingVote.getResource().getChild("members").getChild(slowMachine2.getSlingId());
      final ModifiableValueMap memberMap=memberResource.adaptTo(ModifiableValueMap.class);
      Property vote=(Property)memberMap.get("vote");
      assertEquals(Boolean.TRUE,vote.getBoolean());
      Property votedAt=(Property)memberMap.get("votedAt");
      if (previousVotedAt == null) {
        previousVotedAt=votedAt.getDate();
      }
 else {
        assertEquals(previousVotedAt,votedAt.getDate());
      }
    }
 catch (    Exception e) {
      resourceResolver.close();
      fail("Exception: " + e);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.distribution.packaging.impl.importer.RepositoryDistributionPackageImporterTest </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testImportPackageWithoutRequiredPrivileges() throws Exception {
  try {
    SlingRepository repository=mock(SlingRepository.class);
    String serviceName="admin";
    Session session=mock(Session.class);
    AccessControlManager acm=mock(AccessControlManager.class);
    String privilegeName="jcr:read";
    Privilege privilege=mock(Privilege.class);
    when(acm.privilegeFromName(privilegeName)).thenReturn(privilege);
    when(session.getAccessControlManager()).thenReturn(acm);
    when(repository.loginService(serviceName,null)).thenReturn(session);
    String path="/var/something";
    RepositoryDistributionPackageImporter repositoryDistributionPackageImporter=new RepositoryDistributionPackageImporter(repository,serviceName,path,privilegeName);
    ResourceResolver resourceResolver=mock(ResourceResolver.class);
    DistributionPackage distributionPackage=mock(DistributionPackage.class);
    when(distributionPackage.getId()).thenReturn("someid");
    repositoryDistributionPackageImporter.importPackage(resourceResolver,distributionPackage);
    fail("import cannot succeed if privileges are not sufficient");
  }
 catch (  DistributionException e) {
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testImportPackageWithUnauthorizedServiceUser() throws Exception {
  try {
    SlingRepository repository=mock(SlingRepository.class);
    String serviceName="admin";
    String path="/var/something";
    String privilegeName="jcr:read";
    RepositoryDistributionPackageImporter repositoryDistributionPackageImporter=new RepositoryDistributionPackageImporter(repository,serviceName,path,privilegeName);
    ResourceResolver resourceResolver=mock(ResourceResolver.class);
    DistributionPackage distributionPackage=mock(DistributionPackage.class);
    when(distributionPackage.getId()).thenReturn("someid");
    repositoryDistributionPackageImporter.importPackage(resourceResolver,distributionPackage);
    fail("import cannot succeed if service is user is unable to obtain a session");
  }
 catch (  DistributionException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.engine.impl.StaticResponseHeaderTest </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test_constructor_missing_responseHeaderName(){
  try {
    new StaticResponseHeader("=user");
    TestCase.fail("IllegalArgumentException expected");
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test_constructor_missing_responseHeaderValue(){
  try {
    new StaticResponseHeader("responseHeader");
    TestCase.fail("IllegalArgumentException expected");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    new StaticResponseHeader("responseHeaderName=");
    TestCase.fail("IllegalArgumentException expected");
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test_constructor_empty(){
  try {
    new StaticResponseHeader("");
    TestCase.fail("IllegalArgumentException expected");
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test_constructor_null(){
  try {
    new StaticResponseHeader(null);
    TestCase.fail("NullPointerException expected");
  }
 catch (  NullPointerException npe) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.api.InstallableResourceTest </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testConstructor(){
  try {
    new InstallableResource(null,null,new Hashtable<String,Object>(),null,null,null);
    fail("IAE expected : no id");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    new InstallableResource("1",null,null,null,null,null);
    fail("IAE expected : no is no dict");
  }
 catch (  IllegalArgumentException iae) {
  }
  new InstallableResource("1",new ByteArrayInputStream("a".getBytes()),null,null,null,null);
  new InstallableResource("1",null,new Hashtable<String,Object>(),null,null,null);
  new InstallableResource("1",new ByteArrayInputStream("a".getBytes()),new Hashtable<String,Object>(),null,null,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.installer.it.BundleInstallStressTest </h4><pre class="type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testSemiRandomInstall() throws Exception {
  if (cycleCount < 1) {
    fail("Cycle count (" + cycleCount + ") should be >= 1");
  }
  final int initialBundleCount=bundleContext.getBundles().length;
  log(LogService.LOG_INFO,"Initial bundle count=" + initialBundleCount);
  logInstalledBundles();
  Object listener=this.startObservingBundleEvents();
  log(LogService.LOG_INFO,"Registering all test bundles, " + testBundles.size() + " resources");
  install(testBundles);
  BundleEvent[] installedEvents=new BundleEvent[testBundles.size()];
  for (int i=0; i < installedEvents.length; i++) {
    installedEvents[i]=new BundleEvent(null,null,org.osgi.framework.BundleEvent.INSTALLED);
  }
  this.waitForBundleEvents("All bundles should be installed",listener,expectBundlesTimeoutMsec,installedEvents);
  expectBundleCount("After installing all test bundles",initialBundleCount + testBundles.size());
  final List<File> currentInstallation=new ArrayList<File>(testBundles);
  for (int i=0; i < cycleCount; i++) {
    final long start=System.currentTimeMillis();
    log(LogService.LOG_INFO,"Test cycle " + i + ", semi-randomly selecting a subset of our test bundles");
    for (    final File f : currentInstallation) {
      log(LogService.LOG_DEBUG,"Installed bundle: " + f);
    }
    final List<File> toInstall=selectRandomBundles();
    log(LogService.LOG_INFO,"Re-registering " + toInstall.size() + " randomly selected resources (other test bundles should be uninstalled)");
    for (    final File f : toInstall) {
      log(LogService.LOG_DEBUG,"Re-Registering bundle: " + f);
    }
    int updates=0;
    int installs=0;
    for (    final File f : toInstall) {
      if (currentInstallation.contains(f)) {
        updates++;
      }
 else {
        installs++;
      }
    }
    final int removes=currentInstallation.size() - updates;
    installedEvents=new BundleEvent[removes + installs];
    for (int m=0; m < installedEvents.length; m++) {
      if (m < removes) {
        installedEvents[m]=new BundleEvent(null,null,org.osgi.framework.BundleEvent.UNINSTALLED);
      }
 else {
        installedEvents[m]=new BundleEvent(null,null,org.osgi.framework.BundleEvent.INSTALLED);
      }
    }
    log(LogService.LOG_DEBUG,"Cycle results in " + removes + " removed bundles, "+ updates+ " updated bundles, "+ installs+ " installed bundles");
    listener=this.startObservingBundleEvents();
    install(toInstall);
    this.waitForBundleEvents("All bundles should be installed in cycle " + i,listener,expectBundlesTimeoutMsec,installedEvents);
    eventsDetector.waitForNoEvents(MSEC_WITHOUT_EVENTS,expectBundlesTimeoutMsec);
    expectBundleCount("At cycle " + i,initialBundleCount + toInstall.size());
    log(LogService.LOG_INFO,"Test cycle " + i + " successful, "+ toInstall.size()+ " bundles, "+ (System.currentTimeMillis() - start)+ " msec");
    currentInstallation.clear();
    currentInstallation.addAll(toInstall);
    try {
      Thread.sleep(500);
    }
 catch (    final InterruptedException ie) {
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-2 type-12 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp(){
  setupInstaller();
  final String bf=System.getProperty(PROP_BUNDLES_FOLDER);
  if (bf == null) {
    fail("Missing system property: " + PROP_BUNDLES_FOLDER);
  }
  bundlesFolder=new File(bf);
  if (!bundlesFolder.isDirectory()) {
    fail("Bundles folder '" + bundlesFolder.getAbsolutePath() + "' not found");
  }
  final String cc=System.getProperty(PROP_CYCLE_COUNT);
  if (cc == null) {
    fail("Missing system property:" + PROP_CYCLE_COUNT);
  }
  cycleCount=Integer.parseInt(cc);
  final String et=System.getProperty(PROP_EXPECT_TIMEOUT_SECONDS);
  if (et == null) {
    fail("Missing system property:" + PROP_EXPECT_TIMEOUT_SECONDS);
  }
  expectBundlesTimeoutMsec=Integer.parseInt(et) * 1000L;
  log(LogService.LOG_INFO,getClass().getSimpleName() + ": cycle count=" + cycleCount+ ", expect timeout (msec)="+ expectBundlesTimeoutMsec+ ", test bundles folder="+ bundlesFolder.getAbsolutePath());
  testBundles=new LinkedList<File>();
  final String[] files=bundlesFolder.list();
  for (  String filename : files) {
    if (filename.endsWith(".jar")) {
      testBundles.add(new File(bundlesFolder,filename));
    }
  }
  if (testBundles.size() < MIN_TEST_BUNDLES) {
    fail("Found only " + testBundles.size() + " bundles in test folder, expected at least "+ MIN_TEST_BUNDLES+ " (test folder="+ bundlesFolder.getAbsolutePath()+ ")");
  }
  random=new Random(42 + cycleCount);
  eventsDetector=new EventsDetector(bundleContext);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.jcr.repository.it.CommonTests </h4><pre class="type-11 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testOsgiResourceEvents() throws RepositoryException {
  final ResourceEventListener listener=new ResourceEventListener();
  final ServiceRegistration reg=listener.register(bundleContext,SlingConstants.TOPIC_RESOURCE_ADDED);
  final Session s=repository.loginAdministrative(null);
  final int nPaths=2500 * TEST_SCALE;
  final int timeoutMsec=2 * nPaths;
  final String prefix=uniqueName("testOsgiResourceEvents");
  try {
    for (int i=0; i < nPaths; i++) {
      s.getRootNode().addNode(prefix + i);
    }
    s.save();
    log.info("Added {} nodes, checking what ResourceEventListener got...",nPaths);
    final long timeout=System.currentTimeMillis() + timeoutMsec;
    final Set<String> missing=new HashSet<String>();
    while (System.currentTimeMillis() < timeout) {
      missing.clear();
      final Set<String> paths=listener.getPaths();
      for (int i=0; i < nPaths; i++) {
        final String path="/" + prefix + i;
        if (!paths.contains(path)) {
          missing.add(path);
        }
      }
      if (missing.isEmpty()) {
        break;
      }
    }
    if (!missing.isEmpty()) {
      final String missingStr=missing.size() > 10 ? missing.size() + " paths missing" : missing.toString();
      fail("OSGi add resource events are missing for " + missing.size() + "/"+ nPaths+ " paths after "+ timeoutMsec+ " msec: "+ missingStr);
    }
  }
  finally {
    reg.unregister();
    s.logout();
  }
  log.info("Successfuly detected OSGi observation events for " + nPaths + " paths");
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testMultiValueInputStream() throws RepositoryException {
  final Session s=repository.loginAdministrative(null);
  try {
    final String path=getClass().getSimpleName() + System.currentTimeMillis();
    final Node child=deleteAfterTests(s.getRootNode().addNode(path));
    final Property p=child.setProperty("foo",new String[]{"bar","wii "});
    s.save();
    try {
      p.getBinary().getStream();
      fail("Expecting getStream() to fail on a multi-value Property");
    }
 catch (    RepositoryException asExpected) {
    }
  }
  finally {
    s.logout();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.jcr.repository.it.OakRepositoryIT </h4><pre class="type-11 type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void doCheckRepositoryDescriptors(){
  final String propName="jcr.repository.name";
  final String name=repository.getDescriptor(propName);
  final String expected="Oak";
  if (!name.contains(expected)) {
    fail("Expected repository descriptor " + propName + " to contain "+ expected+ ", failed (descriptor="+ name+ ")");
  }
  log.info("Running on Oak version {}",repository.getDescriptor("jcr.repository.version"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.jcr.resource.internal.AbstractListenerTest </h4><pre class="type-12 type-6 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleOperations() throws Exception {
  generateEvents();
  assertEquals("Received: " + events,5,events.size());
  final Set<String> addPaths=new HashSet<String>();
  final Set<String> modifyPaths=new HashSet<String>();
  final Set<String> removePaths=new HashSet<String>();
  for (  final ResourceChange event : events) {
    if (event.getType() == ChangeType.ADDED) {
      addPaths.add(event.getPath());
    }
 else     if (event.getType() == ChangeType.CHANGED) {
      modifyPaths.add(event.getPath());
      assertEquals(Collections.singleton("foo"),event.getAddedPropertyNames());
    }
 else     if (event.getType() == ChangeType.REMOVED) {
      removePaths.add(event.getPath());
    }
 else {
      fail("Unexpected event: " + event);
    }
    assertNotNull(event.getUserId());
  }
  assertEquals(3,addPaths.size());
  assertTrue("Added set should contain " + createdPath,addPaths.contains(createdPath));
  assertTrue("Added set should contain " + pathToDelete,addPaths.contains(pathToDelete));
  assertTrue("Added set should contain " + pathToModify,addPaths.contains(pathToModify));
  assertEquals(1,modifyPaths.size());
  assertTrue("Modified set should contain " + pathToModify,modifyPaths.contains(pathToModify));
  assertEquals(1,removePaths.size());
  assertTrue("Removed set should contain " + pathToDelete,removePaths.contains(pathToDelete));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.junit.remote.exported.ExampleRemoteTest </h4><pre class="type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testFailsSometimes(){
  if (Math.random() < 0.5) {
    fail("This test fails sometimes");
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testAlwaysFails(){
  fail("This test always fails");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.junit.scriptable.ExplainTests </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void explain(){
  fail("No scriptable tests found." + " To create scriptable tests, create nodes with the sling:Test" + " mixin under /apps or /libs (*), and setup Sling so that requesting them with .test.txt generates"+ " a text response containing just TEST_PASSED if the test is successful."+ " Empty lines and lines starting with # are ignored in the test output."+ " (*) depends on the JCR resource resolver configuration.");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.junit.scriptable.TestAllPaths </h4><pre class="type-12 type-6 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyContent() throws Exception {
  final TestContext ctx=ScriptableTestsProvider.getTestContext();
  final HttpRequest req=new HttpRequest(path);
  final HttpResponse resp=new HttpResponse();
  ctx.requestProcessor.processRequest(req,resp,ctx.resourceResolver);
  final String content=resp.getContent();
  assertEquals("Expecting HTTP status 200 for path " + path,200,resp.getStatus());
  boolean testSuccess=checkTest(content);
  if (!testSuccess) {
    fail("Unexpected content at path " + path + ", should be just "+ PASSED+ " (lines starting with # and empty lines are ignored)"+ "\ncontent was:\n"+ content+ "\n");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.base.impl.BootstrapInstallerTest </h4><pre class="type-6 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for{@link org.apache.sling.launchpad.base.impl.BootstrapInstaller#extractFileName(java.lang.String)}.
 */
@Test public void testExtractFileNameForwardSlash(){
  String filename=BootstrapInstaller.extractFileName("myfile.html");
  assertEquals("myfile.html",filename);
  filename=BootstrapInstaller.extractFileName("/things/myfile.html");
  assertEquals("myfile.html",filename);
  filename=BootstrapInstaller.extractFileName("LOTS/of/random/things/myfile.html");
  assertEquals("myfile.html",filename);
  try {
    filename=BootstrapInstaller.extractFileName("LOTS/of/random/things/");
    fail("should have thrown exception");
  }
 catch (  IllegalArgumentException e) {
    assertNotNull(e.getMessage());
  }
  try {
    filename=BootstrapInstaller.extractFileName("LOTS/of/random/things/");
    fail("should have thrown exception");
  }
 catch (  IllegalArgumentException e) {
    assertNotNull(e.getMessage());
  }
  try {
    filename=BootstrapInstaller.extractFileName(null);
    fail("should have thrown exception");
  }
 catch (  IllegalArgumentException e) {
    assertNotNull(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for{@link org.apache.sling.launchpad.base.impl.BootstrapInstaller#extractFileName(java.lang.String)}.
 */
@Test public void testExtractFileNameSeparatorChar(){
  String filename=BootstrapInstaller.extractFileName("myfile.html".replace('/',File.separatorChar));
  assertEquals("myfile.html",filename);
  filename=BootstrapInstaller.extractFileName("/things/myfile.html".replace('/',File.separatorChar));
  assertEquals("myfile.html",filename);
  filename=BootstrapInstaller.extractFileName("LOTS/of/random/things/myfile.html".replace('/',File.separatorChar));
  assertEquals("myfile.html",filename);
  try {
    filename=BootstrapInstaller.extractFileName("LOTS/of/random/things/".replace('/',File.separatorChar));
    fail("should have thrown exception");
  }
 catch (  IllegalArgumentException e) {
    assertNotNull(e.getMessage());
  }
  try {
    filename=BootstrapInstaller.extractFileName("LOTS/of/random/things/".replace('/',File.separatorChar));
    fail("should have thrown exception");
  }
 catch (  IllegalArgumentException e) {
    assertNotNull(e.getMessage());
  }
  try {
    filename=BootstrapInstaller.extractFileName(null);
    fail("should have thrown exception");
  }
 catch (  IllegalArgumentException e) {
    assertNotNull(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-11 type-6 type-13 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for{@link org.apache.sling.launchpad.base.impl.BootstrapInstaller#copyStreamToFile(java.io.InputStream,java.io.File)}.
 */
@Test public void testCopyStreamToFile(){
  InputStream stream=null;
  File to=null;
  File testDir=new File("testing");
  testDir.deleteOnExit();
  assertTrue(testDir.mkdir());
  stream=Thread.currentThread().getContextClassLoader().getResourceAsStream("holaworld.jar");
  assertNotNull(stream);
  to=new File(testDir,"test.jar");
  to.deleteOnExit();
  try {
    BootstrapInstaller.copyStreamToFile(stream,to);
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
  File copy=new File(testDir,"test.jar");
  try {
    FileInputStream copyStream=new FileInputStream(copy);
    byte[] copyData=new byte[copyStream.available()];
    copyStream.read(copyData);
    copyStream.close();
    FileInputStream origStream=new FileInputStream(copy);
    byte[] origData=new byte[origStream.available()];
    origStream.read(origData);
    origStream.close();
    assertArrayEquals(copyData,origData);
  }
 catch (  FileNotFoundException e) {
    fail(e.getMessage());
  }
catch (  IOException e) {
    fail(e.getMessage());
  }
  try {
    BootstrapInstaller.copyStreamToFile(null,to);
    fail("should have thrown exception");
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
catch (  IllegalArgumentException e) {
    assertNotNull(e.getMessage());
  }
  try {
    BootstrapInstaller.copyStreamToFile(stream,null);
    fail("should have thrown exception");
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
catch (  IllegalArgumentException e) {
    assertNotNull(e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.base.impl.bootstrapcommands.BootstrapCommandFileTest </h4><pre class="type-6 type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSyntaxError() throws IOException {
  final BootstrapCommandFile bcf=new BootstrapCommandFile(logger,cmdFile);
  final String cmdString="# a comment\n" + "uninstall only_one_field\n" + "\n"+ "# another comment\n"+ "uninstall symbolicname1 1.0\n"+ "\n"+ "# another comment\n"+ "uninstall three args 1.0\n";
  try {
    bcf.parse(new ByteArrayInputStream(cmdString.getBytes()));
    fail("Expecting IOException for syntax error");
  }
 catch (  IOException ioe) {
    assertTrue("Exception message (" + ioe.getMessage() + ") should contain command line",ioe.getMessage().contains("three args"));
  }
}

</code></pre>

<br>
<pre class="type-6 type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidCommand() throws IOException {
  final BootstrapCommandFile bcf=new BootstrapCommandFile(logger,cmdFile);
  final String cmdString="foo\n";
  try {
    bcf.parse(new ByteArrayInputStream(cmdString.getBytes()));
    fail("Expecting IOException for invalid command");
  }
 catch (  IOException ioe) {
    assertTrue("Exception message (" + ioe.getMessage() + ") should contain command line",ioe.getMessage().contains("foo"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.testservices.serversidetests.MappingEventsTest </h4><pre class="type-15 type-12 type-6 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test SLING-4058 - unexpected timeouts in saveMappings 
 */
@Test public void testSaveMappings() throws Exception {
  final Node base=mapRoot.getNode("map/https/localhost.443");
  final MappingsFacade f=new MappingsFacade(eventsCounter);
  try {
    int count=N_STEPS;
    while (count-- > 0) {
      base.setProperty(PROP_REDIRECT_EXTERNAL,"http://somehost." + count);
      final String result=f.saveMappings(session);
      if (result != null) {
        fail(result);
      }
    }
  }
  finally {
    base.setProperty(PROP_REDIRECT_EXTERNAL,"");
    session.save();
  }
}

</code></pre>

<br>
<pre class="type-15 type-12 type-6 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testVanityPaths() throws Exception {
  final MappingsFacade f=new MappingsFacade(eventsCounter);
  final Node vanityTest=maybeCreateNode(session.getRootNode(),"vanityTest","sling:Folder");
  toDelete.add(vanityTest.getPath());
  int count=N_STEPS;
  while (count-- > 0) {
    final String[] paths={"one","two","three_" + count};
    vanityTest.setProperty("sling:vanityPath",paths);
    final String result=f.saveMappings(session);
    if (result != null) {
      fail(result);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.ServerSideScriptsTest </h4><pre class="type-12 type-6 type-9 type-3 type-19 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void runScripts() throws Exception {
  final String resourceType=RESOURCE_TYPE_PREFIX + '/' + test.testName;
  final String scriptPath="/apps/" + resourceType;
  String toDelete=null;
  try {
    this.slingClient.createNode(scriptPath,"jcr:primaryType","sling:Folder","jcr:mixinTypes","sling:Test","sling:resourceType",RESOURCE_TYPE_PREFIX + '/' + test.testName);
    toDelete=scriptPath;
    final String destPath=scriptPath + "/test.txt" + test.scriptExtension;
    logger.info("Setting up node {} for {}",destPath,test.testScriptFile.getAbsoluteFile());
    this.slingClient.upload(destPath,new FileInputStream(test.testScriptFile),-1,false);
    Thread.sleep(2000L);
    final long startTime=System.currentTimeMillis();
    final ServerSideTestClient.TestResults results=slingClient.runTests("org.apache.sling.junit.scriptable.ScriptableTestsProvider");
    assertEquals("Expecting 1 scriptable test",1,results.getTestCount());
    final int failureCount=test.willFail ? 1 : 0;
    if (results.getFailures().size() != failureCount) {
      fail("Expected " + failureCount + " failing tests but got "+ results.getFailures().size()+ " for "+ test.testScriptFile.getAbsolutePath()+ ": "+ results.getFailures());
    }
    logger.info("Execution of {} took {} msec",test,System.currentTimeMillis() - startTime);
  }
  finally {
    if (toDelete != null) {
      this.slingClient.delete(toDelete);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.WebdavDeleteTest </h4><pre class="type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelete(){
  try {
    testClient.delete(HTTP_BASE_URL + testDir + "/"+ HANDLER_1);
    testClient.delete(HTTP_BASE_URL + testDir + "/"+ HANDLER_2);
    testClient.delete(HTTP_BASE_URL + testDir + "/"+ DEFAULT_HANDLER);
    Assert.assertEquals(HttpServletResponse.SC_NOT_FOUND,testClient.get(HTTP_BASE_URL + testDir + "/"+ HANDLER_1));
    Assert.assertEquals(HttpServletResponse.SC_NOT_FOUND,testClient.get(HTTP_BASE_URL + testDir + "/"+ HANDLER_2));
    Assert.assertEquals(HttpServletResponse.SC_NOT_FOUND,testClient.get(HTTP_BASE_URL + testDir + "/"+ DEFAULT_HANDLER));
    Assert.assertEquals(HttpServletResponse.SC_OK,testClient.get(HTTP_BASE_URL + testDir + "/"+ HANDLER_1+ HANDLER_1_BKP+ ".json"));
    Assert.assertEquals(HttpServletResponse.SC_OK,testClient.get(HTTP_BASE_URL + testDir + "/"+ HANDLER_2+ HANDLER_2_BKP+ ".json"));
  }
 catch (  IOException e) {
    Assert.fail(e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.installer.ServerSideInstallerTest </h4><pre class="type-12 type-6 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void noUntransformedResources(){
  final List<?> utr=is.getUntransformedResources();
  if (utr.size() > 0) {
    fail("Untransformed resources found: " + utr);
  }
}

</code></pre>

<br>
<pre class="type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void noDuplicates(){
  String output="";
  final List<ResourceGroup> resources=is.getInstalledResources();
  for (  final ResourceGroup group : resources) {
    if (group.getResources().size() > 1) {
      boolean first=true;
      for (      final Resource rsrc : group.getResources()) {
        if (first) {
          output+="Duplicate resources for '" + rsrc.getEntityId() + "' : ";
          first=false;
        }
 else {
          output+=", ";
        }
        output+=rsrc.getURL();
      }
      output+="\n";
    }
  }
  if (output.length() > 0) {
    fail(output);
  }
}

</code></pre>

<br>
<pre class="type-12 type-6 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void noActiveResources(){
  final List<?> ar=is.getActiveResources();
  if (ar.size() > 0) {
    fail("Active resources found: " + ar);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.launchpad.webapp.integrationtest.teleporter.TeleporterOptionsTest </h4><pre class="type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOptions(){
  try {
    final TeleporterRule r=TeleporterRule.forClass(getClass(),"Launchpad:" + OPTIONS);
    r.apply(null,null);
    fail("Expecting an OptionsException");
  }
 catch (  OptionsException oex) {
    assertEquals(OPTIONS,oex.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.mailarchiveserver.impl.Mime4jMboxParserImplStreamingTest </h4><pre class="type-11 type-6 type-3 type-8 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("TODO - fails if running tests with lots of memory") @Test public void testParserIsStreaming() throws IOException {
  File tempf=null;
  FileInputStream fis=null;
  FileOutputStream fos=null;
  try {
    final long maxMem=Runtime.getRuntime().maxMemory();
    log.info("Max memory={}, reading from {}, might take a while...",maxMem,TEST_FILE_NAME);
    log.info("TODO: this test fails with 'Size exceeds Integer.MAX_VALUE' if maxMem is over a certain limit");
    final File fileToSample=new File(TU.TEST_FOLDER,TEST_FILE_NAME);
    final int count=(int)(maxMem * TEST_FILE_RATIO / fileToSample.length()) + 1;
    fis=new FileInputStream(fileToSample);
    final byte[] sample=new byte[(int)fileToSample.length()];
    assertEquals("Expecting the correct number of bytes read",fis.read(sample),fileToSample.length());
    tempf=File.createTempFile("MAS_",".mbox");
    fos=new FileOutputStream(tempf);
    for (int i=0; i < count; i++) {
      fos.write(sample);
    }
    fos.flush();
    fos.close();
    fos=null;
    parser.parse(new FileInputStream(tempf));
  }
 catch (  OutOfMemoryError e) {
    fail("Got OutOfMemoryError, looks like the Parser is not streaming");
  }
 finally {
    if (tempf != null) {
      tempf.delete();
    }
    if (fis != null) {
      fis.close();
    }
    if (fos != null) {
      fos.close();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.mailarchiveserver.impl.Mime4jMboxParserImplTest </h4><pre class="type-15 type-11 type-12 type-6 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMboxParsing() throws IOException {
  Iterator<Message> iter=parser.parse(new FileInputStream(new File(TU.TEST_FOLDER,WRONGBODY_MBOX)));
  boolean fail=true;
  int i=1;
  while (iter.hasNext()) {
    final Message message=iter.next();
    File bodyFile=new File(TU.TEST_FOLDER,specialPathFromFilePath(WRONGBODY_MBOX,"_bodyOf" + i,"txt"));
    if (bodyFile.exists()) {
      final String actual=getPlainBody(message);
      final String expected=readTextFile(bodyFile);
      assertEquals("Body #" + i,expected,actual);
      fail=false;
    }
    i++;
  }
  if (fail) {
    fail("No file with expected body.");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.models.impl.ImplementsExtendsTest </h4><pre class="type-16 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@After public void tearDown(){
  factory.listener.removedBundle(bundle,bundleEvent,registeredAdapterFactories);
  Resource res=getMockResourceWithProps();
  try {
    SampleServiceInterface model=factory.getAdapter(res,SampleServiceInterface.class);
    Assert.fail("Getting the model for interface 'SampleServiceInterface' should fail after the accroding adapter factory has been unregistered");
  }
 catch (  ModelClassException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.paxexam.util.SlingSetupTest </h4><pre class="type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testSlingBundles(){
  final String[] LAUNCHPAD_7_BUNDLES={"derby","jcl.over.slf4j","log4j.over.slf4j","org.apache.aries.jmx.api","org.apache.aries.jmx.core","org.apache.aries.jmx.whiteboard","org.apache.aries.util","org.apache.commons.codec","org.apache.commons.collections","org.apache.commons.fileupload","org.apache.commons.io","org.apache.commons.lang","org.apache.commons.math","org.apache.commons.pool","org.apache.felix.bundlerepository","org.apache.felix.configadmin","org.apache.felix.eventadmin","org.apache.felix.framework","org.apache.felix.http.jetty","org.apache.felix.http.whiteboard","org.apache.felix.inventory","org.apache.felix.metatype","org.apache.felix.prefs","org.apache.felix.scr","org.apache.felix.webconsole","org.apache.felix.webconsole.plugins.ds","org.apache.felix.webconsole.plugins.event","org.apache.felix.webconsole.plugins.memoryusage","org.apache.felix.webconsole.plugins.obr","org.apache.felix.webconsole.plugins.packageadmin","org.apache.geronimo.bundles.commons-httpclient","org.apache.geronimo.bundles.json","org.apache.geronimo.bundles.jstl","org.apache.jackrabbit.jackrabbit-api","org.apache.jackrabbit.jackrabbit-jcr-commons","org.apache.jackrabbit.jackrabbit-jcr-rmi","org.apache.jackrabbit.jackrabbit-spi","org.apache.jackrabbit.jackrabbit-spi-commons","org.apache.jackrabbit.jackrabbit-webdav","org.apache.servicemix.bundles.concurrent","org.apache.sling.adapter","org.apache.sling.api","org.apache.sling.auth.core","org.apache.sling.auth.form","org.apache.sling.bundleresource.impl","org.apache.sling.commons.classloader","org.apache.sling.commons.compiler",IgnoredBundlesTest.JSON_BUNDLE_SN,"org.apache.sling.commons.log","org.apache.sling.commons.logservice",IgnoredBundlesTest.MIME_BUNDLE_SN,"org.apache.sling.commons.osgi","org.apache.sling.commons.scheduler","org.apache.sling.commons.threads","org.apache.sling.discovery.api","org.apache.sling.discovery.impl","org.apache.sling.discovery.support","org.apache.sling.engine","org.apache.sling.event","org.apache.sling.extensions.explorer","org.apache.sling.extensions.threaddump","org.apache.sling.extensions.webconsolebranding","org.apache.sling.extensions.webconsolesecurityprovider","org.apache.sling.fragment.transaction","org.apache.sling.fragment.ws","org.apache.sling.fragment.xml","org.apache.sling.fsresource","org.apache.sling.installer.console","org.apache.sling.installer.core","org.apache.sling.installer.factory.configuration","org.apache.sling.installer.provider.file","org.apache.sling.installer.provider.jcr","org.apache.sling.javax.activation","org.apache.sling.jcr.api","org.apache.sling.jcr.base","org.apache.sling.jcr.classloader","org.apache.sling.jcr.contentloader","org.apache.sling.jcr.davex","org.apache.sling.jcr.jackrabbit.accessmanager","org.apache.sling.jcr.jackrabbit.server","org.apache.sling.jcr.jackrabbit.usermanager","org.apache.sling.jcr.jcr-wrapper","org.apache.sling.jcr.registration","org.apache.sling.jcr.resource","org.apache.sling.jcr.webconsole","org.apache.sling.jcr.webdav","org.apache.sling.launchpad.content","org.apache.sling.launchpad.installer","org.apache.sling.models.api","org.apache.sling.models.impl","org.apache.sling.resourceresolver","org.apache.sling.scripting.api","org.apache.sling.scripting.core","org.apache.sling.scripting.javascript","org.apache.sling.scripting.jsp","org.apache.sling.scripting.jsp.taglib","org.apache.sling.serviceusermapper","org.apache.sling.servlets.get","org.apache.sling.servlets.post","org.apache.sling.servlets.resolver","org.apache.sling.settings","org.apache.tika.bundle","org.apache.tika.core","slf4j.api"};
  final List<String> missing=new ArrayList<String>();
  for (  String bundleName : LAUNCHPAD_7_BUNDLES) {
    final int state=getBundleState(bundleName);
    if (state != Bundle.ACTIVE) {
      missing.add(bundleName + " (state=" + state+ ")");
    }
  }
  if (!missing.isEmpty()) {
    fail("Some required bundles are missing or inactive:" + missing);
  }
}

</code></pre>

<br>
<pre class="type-12 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testSlingServices(){
  assertBundleActive("org.apache.sling.commons.mime");
  assertBundleActive("org.apache.sling.engine");
  final String[] services={"org.apache.sling.engine.SlingRequestProcessor","org.apache.sling.commons.mime.MimeTypeService","org.apache.sling.jcr.api.SlingRepository","org.apache.sling.settings.SlingSettingsService"};
  final List<String> missing=new ArrayList<String>();
  for (  String svc : services) {
    final ServiceReference<?> ref=bundleContext.getServiceReference(svc);
    if (ref == null) {
      missing.add(svc);
    }
 else {
      bundleContext.ungetService(ref);
    }
  }
  if (!missing.isEmpty()) {
    fail("Some required services are missing:" + missing);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.repoinit.jcr.GeneralAclTest </h4><pre class="type-6 type-9 type-19 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies values related to public fields.
"></span><br>
@Test public void readOnlyThenWriteThenDeny() throws Exception {
  final Node tmp=U.adminSession.getRootNode().addNode("tmp_" + U.id);
  U.adminSession.save();
  final String path=tmp.getPath();
  try {
    s.getNode(path);
    fail("Expected read access to be initially denied:" + path);
  }
 catch (  PathNotFoundException ignore) {
  }
  final String allowRead="set ACL for " + U.username + "\n"+ "allow jcr:read on "+ path+ "\n"+ "end";
  U.parseAndExecute(allowRead);
  final Node n=s.getNode(path);
  try {
    n.setProperty("U.id",U.id);
    s.save();
    fail("Expected write access to be initially denied:" + path);
  }
 catch (  AccessDeniedException ignore) {
  }
  s.refresh(false);
  final String allowWrite="set ACL for " + U.username + "\n"+ "allow jcr:write on "+ path+ "\n"+ "end";
  U.parseAndExecute(allowWrite);
  n.setProperty("U.id",U.id);
  s.save();
  final String deny="set ACL for " + U.username + "\n"+ "deny jcr:all on "+ path+ "\n"+ "end";
  U.parseAndExecute(deny);
  try {
    s.getNode(path);
    fail("Expected access to be denied again:" + path);
  }
 catch (  PathNotFoundException ignore) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.repoinit.jcr.NonExistentPathTest </h4><pre class="type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void setAclOnFoo() throws Exception {
  final String aclDef="set ACL on /foo_" + U.id + "\n"+ "  allow jcr:all for "+ U.username+ "\n"+ "end";
  try {
    U.parseAndExecute(aclDef);
    fail("Expecting a wrapped PathNotFoundException");
  }
 catch (  RuntimeException rux) {
    assertEquals(PathNotFoundException.class,rux.getCause().getClass());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.repoinit.parser.test.ParsingErrorsTest </h4><pre class="type-12 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkResult() throws ParseException, IOException {
  final StringReader r=new StringReader(input);
  try {
    new RepoInitParserImpl(r).parse();
    if (expected != null) {
      fail("Expected a " + expected.getSimpleName() + " for ["+ input+ "]");
    }
  }
 catch (  Exception e) {
    assertEquals(expected,e.getClass());
  }
catch (  Error err) {
    assertEquals(expected,err.getClass());
  }
 finally {
    r.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resource.collection.impl.ResourceCollectionImplTest </h4><pre class="type-12 type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddResourceWithProperties() throws Exception {
  final Map<String,Object> props=new HashMap<String,Object>();
  props.put("creator","slingdev");
  final ResourceCollection collection=rcm.createCollection(resResolver.getResource("/"),"collection3");
  final Resource resource=resResolver.create(resResolver.getResource("/"),"res1",Collections.singletonMap(ResourceResolver.PROPERTY_RESOURCE_TYPE,(Object)"type"));
  collection.add(resource,props);
  final Resource collectionRes=resResolver.getResource("/collection3");
  Assert.assertNotNull(collectionRes);
  Assert.assertEquals(true,collection.contains(resource));
  ValueMap vm=collection.getProperties(resource);
  if (vm != null) {
    Assert.assertEquals("slingdev",vm.get("creator",""));
  }
 else {
    Assert.fail("no resource entry in collection");
  }
}

</code></pre>

<br>
<pre class="type-15 type-11 type-6 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOrdering() throws Exception {
  final ResourceCollection collection=rcm.createCollection(resResolver.getResource("/"),"test1");
  String[] resPaths={"/res1","/res2"};
  final Resource resource=resResolver.create(resResolver.getResource("/"),resPaths[0].substring(1),Collections.singletonMap(ResourceResolver.PROPERTY_RESOURCE_TYPE,(Object)"type"));
  collection.add(resource,null);
  final Resource resource2=resResolver.create(resResolver.getResource("/"),resPaths[1].substring(1),Collections.singletonMap(ResourceResolver.PROPERTY_RESOURCE_TYPE,(Object)"type"));
  collection.add(resource2,null);
  Assert.assertEquals(true,collection.contains(resource2));
  Assert.assertNotNull(resResolver.getResource("/test1"));
  Assert.assertEquals(ResourceCollection.RESOURCE_TYPE,resResolver.getResource("/test1").getResourceType());
  Iterator<Resource> resources=collection.getResources();
  int numOfRes=0;
  while (resources.hasNext()) {
    Resource entry=resources.next();
    Assert.assertEquals(resPaths[numOfRes],entry.getPath());
    numOfRes++;
  }
  try {
    collection.orderBefore(resource,resource);
    Assert.fail("should have thrown IllegalArgument");
  }
 catch (  IllegalArgumentException e) {
  }
  collection.orderBefore(resource2,resource);
  resources=collection.getResources();
  numOfRes=2;
  while (resources.hasNext()) {
    numOfRes--;
    Resource entry=resources.next();
    Assert.assertEquals(resPaths[numOfRes],entry.getPath());
  }
  Assert.assertEquals(0,numOfRes);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourcebuilder.it.ResourceBuilderIT </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void fileAutoValues() throws IOException {
  final long startTime=System.currentTimeMillis();
  E.builder.resource("a/b/c").file("model2.js",getClass().getResourceAsStream("/files/models.js")).commit();
  final Comparator<Long> moreThanStartTime=new Comparator<Long>(){
    @Override public int compare(    Long expected,    Long fromResource){
      if (fromResource >= startTime) {
        return 0;
      }
      fail("last-modified is not >= than current time:" + fromResource + " < "+ startTime);
      return -1;
    }
  }
;
  A.assertFile("a/b/c/model2.js","application/javascript","yes, it worked",startTime,moreThanStartTime);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.MockedResourceResolverImplTest </h4><pre class="type-6 type-9 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Misceleneous coverage.
 * @throws LoginException
 */
@Test public void testResolverMisc() throws LoginException {
  ResourceResolver resourceResolver=resourceResolverFactory.getResourceResolver(null);
  try {
    resourceResolver.getAttribute(null);
    Assert.fail("Should have thrown a NPE");
  }
 catch (  NullPointerException e) {
  }
  Assert.assertArrayEquals(new String[]{"/apps/","/libs/"},resourceResolver.getSearchPath());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.ResourceProviderEntryTest </h4><pre class="type-11 type-12 type-6 type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveTheOnlyProvider() throws LoginException {
  long counter=1;
  providers.clear();
  for (  String path : new String[]{"/foo","/","/foo/bar"}) {
    final ResourceResolver resolver=Mockito.mock(ResourceResolver.class);
    final ResourceProvider<?> p=Mockito.mock(ResourceProvider.class);
    Mockito.when(p.getResource(Mockito.any(ResolverContext.class),Mockito.startsWith(path),Mockito.any(ResourceContext.class),Mockito.any(Resource.class))).thenReturn(new TestResource(resolver));
    ++counter;
    ResourceProviderHandler h=createRPHandler(p,"rp" + counter,counter,path);
    providers.add(h);
    this.providersBasedResolver=null;
{
      final Resource r=getResource(path);
      assertEqualsResolver(resolver,r);
      assertFalse(r instanceof SyntheticResource);
    }
    providers.remove(h);
    this.providersBasedResolver=null;
{
      final Resource r=getResource(path);
      if (r == null) {
      }
 else       if (!p.equals(r.getResourceResolver())) {
      }
 else {
        fail("Expecting inactive provider after removing it for " + path);
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.resourceresolver.impl.ResourceResolverImplTest </h4><pre class="type-6 type-13 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void testCloseWithStackTraceLogging() throws Exception {
  ResourceResolverFactoryActivator rrfa=spy(new ResourceResolverFactoryActivator());
  Whitebox.setInternalState(rrfa,"logResourceResolverClosing",true);
  CommonResourceResolverFactoryImpl crrfi=new CommonResourceResolverFactoryImpl(rrfa);
  final ResourceResolver rr=new ResourceResolverImpl(crrfi,false,null,resourceProviderTracker.getResourceProviderStorage());
  assertTrue(rr.isLive());
  rr.close();
  assertFalse(rr.isLive());
  rr.close();
  assertFalse(rr.isLive());
  try {
    rr.adaptTo(Session.class);
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.clone(null);
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.findResources("a","b");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.getAttribute("a");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.getAttributeNames();
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.getResource(null);
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.getResource(null,"/a");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.getSearchPath();
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.getUserID();
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.listChildren(null);
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.map("/somepath");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.map(null,"/somepath");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.queryResources("a","b");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.resolve((HttpServletRequest)null);
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.resolve("/path");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.resolve(null,"/path");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-13 type-9 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void testBasicAPIAssumptions() throws Exception {
  final Resource res00=resResolver.resolve((String)null);
  assertNotNull(res00);
  assertTrue("Resource must be NonExistingResource",res00 instanceof NonExistingResource);
  assertEquals("Null path is expected to return root","/",res00.getPath());
  final String path01="relPath/relPath";
  final Resource res01=resResolver.resolve(path01);
  assertNotNull(res01);
  assertEquals("Expecting absolute path for relative path","/" + path01,res01.getPath());
  assertTrue("Resource must be NonExistingResource",res01 instanceof NonExistingResource);
  final String no_resource_path="/no_resource/at/this/location";
  final Resource res02=resResolver.resolve(no_resource_path);
  assertNotNull(res02);
  assertEquals("Expecting absolute path for relative path",no_resource_path,res02.getPath());
  assertTrue("Resource must be NonExistingResource",res01 instanceof NonExistingResource);
  try {
    resResolver.resolve((HttpServletRequest)null);
    fail("Expected NullPointerException trying to resolve null request");
  }
 catch (  NullPointerException npe) {
  }
  final Resource res0=resResolver.resolve(null,no_resource_path);
  assertNotNull("Expecting resource if resolution fails",res0);
  assertTrue("Resource must be NonExistingResource",res0 instanceof NonExistingResource);
  assertEquals("Path must be the original path",no_resource_path,res0.getPath());
  final HttpServletRequest req1=mock(HttpServletRequest.class);
  when(req1.getProtocol()).thenReturn("http");
  when(req1.getServerName()).thenReturn("localhost");
  when(req1.getPathInfo()).thenReturn(no_resource_path);
  final Resource res1=resResolver.resolve(req1);
  assertNotNull("Expecting resource if resolution fails",res1);
  assertTrue("Resource must be NonExistingResource",res1 instanceof NonExistingResource);
  assertEquals("Path must be the original path",no_resource_path,res1.getPath());
  final HttpServletRequest req2=mock(HttpServletRequest.class);
  when(req2.getProtocol()).thenReturn("http");
  when(req2.getServerName()).thenReturn("localhost");
  when(req2.getPathInfo()).thenReturn(null);
  final Resource res2=resResolver.resolve(req2);
  assertNotNull("Expecting resource if resolution fails",res2);
  assertTrue("Resource must be NonExistingResource",res2 instanceof NonExistingResource);
  assertEquals("Path must be the the root path","/",res2.getPath());
  final Resource res3=resResolver.getResource(null);
  assertNull("Expected null resource for null path",res3);
  final Resource res4=resResolver.getResource(null,null);
  assertNull("Expected null resource for null path",res4);
  final Resource res5=resResolver.getResource(res01,null);
  assertNull("Expected null resource for null path",res5);
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testBasicCrud() throws Exception {
  final Resource r=mock(Resource.class);
  when(r.getPath()).thenReturn("/some");
  try {
    this.resResolver.create(null,"a",null);
    fail("Null parent resource should throw NPE");
  }
 catch (  final NullPointerException npe) {
  }
  try {
    this.resResolver.create(r,null,null);
    fail("Null name should throw NPE");
  }
 catch (  final NullPointerException npe) {
  }
  try {
    this.resResolver.create(r,"a/b",null);
    fail("Slash in name should throw illegal argument exception");
  }
 catch (  final IllegalArgumentException pe) {
  }
  try {
    this.resResolver.create(r,"a",null);
    fail("This should be unsupported.");
  }
 catch (  final PersistenceException uoe) {
  }
}

</code></pre>

<br>
<pre class="type-6 type-13 type-9 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("deprecation") @Test public void testClose() throws Exception {
  final ResourceResolver rr=new ResourceResolverImpl(commonFactory,false,null,resourceProviderTracker.getResourceProviderStorage());
  assertTrue(rr.isLive());
  rr.close();
  assertFalse(rr.isLive());
  rr.close();
  assertFalse(rr.isLive());
  try {
    rr.adaptTo(Session.class);
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.clone(null);
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.findResources("a","b");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.getAttribute("a");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.getAttributeNames();
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.getResource(null);
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.getResource(null,"/a");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.getSearchPath();
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.getUserID();
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.listChildren(null);
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.map("/somepath");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.map(null,"/somepath");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.queryResources("a","b");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.resolve((HttpServletRequest)null);
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.resolve("/path");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
  try {
    rr.resolve(null,"/path");
    fail();
  }
 catch (  final IllegalStateException ise) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.scripting.jsp.taglib.TestSlingFunctions </h4><pre class="type-6 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEncode(){
  log.info("testEncode");
  log.info("Testing HTML Encoding");
  assertEquals("&amp;nbsp&#x3b;Here is some text&#x21;",SlingFunctions.encode("&nbsp;Here is some text!","HTML"));
  log.info("Testing HTML Attr Encoding");
  assertEquals("&amp;nbsp&#x3b;Here&#x20;is&#x20;some&#x20;text&#x21;&quot;",SlingFunctions.encode("&nbsp;Here is some text!\"","HTML_ATTR"));
  log.info("Testing invalid values");
  try {
    SlingFunctions.encode(null,null);
    fail("Expected null pointer exception");
  }
 catch (  NullPointerException npe) {
    log.info("Encountered expected exception");
  }
  try {
    SlingFunctions.encode(null,"Invalid");
    fail("Expected invalid argument exception");
  }
 catch (  IllegalArgumentException iae) {
    log.info("Encountered expected exception");
  }
  log.info("Testing null/empty values");
  assertNull(SlingFunctions.encode(null,"html"));
  assertEquals("",SlingFunctions.encode("","html"));
  log.info("Tests successful!");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.serviceusermapping.impl.MappingTest </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test_constructor_empty_service_info(){
  try {
    new Mapping("srv:=user");
    TestCase.fail("IllegalArgumentException expected");
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test_constructor_missing_user_name(){
  try {
    new Mapping("serviceName");
    TestCase.fail("IllegalArgumentException expected");
  }
 catch (  IllegalArgumentException iae) {
  }
  try {
    new Mapping("serviceName=");
    TestCase.fail("IllegalArgumentException expected");
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test_constructor_null(){
  try {
    new Mapping(null);
    TestCase.fail("NullPointerException expected");
  }
 catch (  NullPointerException npe) {
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test_constructor_empty(){
  try {
    new Mapping("");
    TestCase.fail("IllegalArgumentException expected");
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void test_constructor_missing_service_name(){
  try {
    new Mapping("=user");
    TestCase.fail("IllegalArgumentException expected");
  }
 catch (  IllegalArgumentException iae) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.jcr.MockNodeTest </h4><pre class="type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPrimaryType() throws RepositoryException {
  assertEquals("nt:unstructured",this.node1.getPrimaryNodeType().getName());
  assertEquals("nt:unstructured",this.node1.getProperty("jcr:primaryType").getString());
  final PropertyIterator properties=this.node1.getProperties();
  while (properties.hasNext()) {
    final Property property=properties.nextProperty();
    if (JcrConstants.JCR_PRIMARYTYPE.equals(property.getName())) {
      return;
    }
  }
  fail("Properties did not include jcr:primaryType");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.jcr.MockRepositoryTest </h4><pre class="type-6 type-9 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleSessions() throws RepositoryException {
  Session session1=repository.login();
  Session session2=repository.login();
  Node root=session1.getRootNode();
  root.addNode("test");
  session1.save();
  Node testNode2=session2.getNode("/test");
  assertNotNull(testNode2);
  testNode2.remove();
  session2.save();
  try {
    session1.getNode("/test");
    fail("Node was not removed");
  }
 catch (  PathNotFoundException ex) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.mock.jcr.ResourceUtilTest </h4><pre class="type-12 type-6 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetParentLevel() throws Exception {
  boolean caughtNullPointerException=false;
  try {
    ResourceUtil.getParent(null,4);
  }
 catch (  NullPointerException e) {
    caughtNullPointerException=true;
  }
catch (  Exception e) {
    fail("Expected NullPointerException, but caught " + e.getClass().getName() + " instead.");
  }
  if (!caughtNullPointerException) {
    fail("Expected NullPointerException, but no exception was thrown.");
  }
  boolean caughtIllegalArgumentException=false;
  try {
    ResourceUtil.getParent("/a/b",-2);
  }
 catch (  IllegalArgumentException e) {
    caughtIllegalArgumentException=true;
  }
catch (  Exception e) {
    fail("Expected IllegalArgumentException, but caught " + e.getClass().getName() + " instead.");
  }
  if (!caughtIllegalArgumentException) {
    fail("Expected IllegalArgumentException, but no exception was thrown.");
  }
  assertNull(ResourceUtil.getParent("/a",4));
  assertNull(ResourceUtil.getParent("/",1));
  assertNull(ResourceUtil.getParent("b/c",2));
  assertNull(ResourceUtil.getParent("/b/..",1));
  assertNull(ResourceUtil.getParent("b",1));
  assertNull(ResourceUtil.getParent("",3));
  assertNull(ResourceUtil.getParent("/..",1));
  assertNull(ResourceUtil.getParent("security:/b",2));
  assertNull(ResourceUtil.getParent("/b///",2));
  assertEquals("",ResourceUtil.getParent("",0));
  assertEquals("b",ResourceUtil.getParent("b",0));
  assertEquals("/",ResourceUtil.getParent("/",0));
  assertEquals("/a/b",ResourceUtil.getParent("/a/b",0));
  assertEquals("security:/b",ResourceUtil.getParent("security:/b",0));
  assertEquals("/",ResourceUtil.getParent("/b",1));
  assertEquals("b",ResourceUtil.getParent("b/c",1));
  assertEquals("b/c",ResourceUtil.getParent("b/c/d",1));
  assertEquals("/b/c",ResourceUtil.getParent("/b/c/d",1));
  assertEquals("security:/",ResourceUtil.getParent("security:/b",1));
  assertEquals("security:/b",ResourceUtil.getParent("security:/b/c",1));
  assertEquals("security:/b/c",ResourceUtil.getParent("security:/b/c/d",1));
  assertEquals("b",ResourceUtil.getParent("b/c/d",2));
  assertEquals("b/c",ResourceUtil.getParent("b/c/d/e",2));
  assertEquals("/",ResourceUtil.getParent("/b/c/d",3));
  assertEquals("/",ResourceUtil.getParent("/b///",1));
}

</code></pre>

<br>
<pre class="type-6 type-3 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveRelativeSegments(){
  assertEquals("/",ResourceUtil.normalize("/"));
  assertEquals("/",ResourceUtil.normalize("///"));
  assertEquals("/a/b/c",ResourceUtil.normalize("/a//b/c"));
  assertEquals("/a/b/c",ResourceUtil.normalize("/a/b//c"));
  assertEquals("/a/b/c",ResourceUtil.normalize("/a///b///c"));
  assertEquals("/a/b/c",ResourceUtil.normalize("/a/b/c/"));
  assertEquals("/a/b/c",ResourceUtil.normalize("/a/b/c//"));
  assertEquals("/a/b/c",ResourceUtil.normalize("/a/b/c///"));
  assertEquals("/az/bz/cz",ResourceUtil.normalize("/az//bz/cz"));
  assertEquals("/az/bz/cz",ResourceUtil.normalize("/az/bz//cz"));
  assertEquals("/az/bz/cz",ResourceUtil.normalize("/az///bz///cz"));
  assertEquals("/az/bz/cz",ResourceUtil.normalize("/az/bz/cz/"));
  assertEquals("/az/bz/cz",ResourceUtil.normalize("/az/bz/cz//"));
  assertEquals("/az/bz/cz",ResourceUtil.normalize("/az/bz/cz///"));
  assertEquals("/a",ResourceUtil.normalize("/a"));
  assertEquals("/a",ResourceUtil.normalize("//a"));
  assertEquals("/a",ResourceUtil.normalize("///a"));
  assertEquals("/az",ResourceUtil.normalize("/az"));
  assertEquals("/az",ResourceUtil.normalize("//az"));
  assertEquals("/az",ResourceUtil.normalize("///az"));
  assertEquals("/",ResourceUtil.normalize("/."));
  assertEquals("/a",ResourceUtil.normalize("/a/."));
  assertEquals("/a",ResourceUtil.normalize("/./a"));
  assertEquals("/a/b",ResourceUtil.normalize("/a/./b"));
  assertEquals("/a/b",ResourceUtil.normalize("/a/b/."));
  assertEquals("/a/b",ResourceUtil.normalize("/a/./b/."));
  assertEquals("/",ResourceUtil.normalize("/."));
  assertEquals("/az",ResourceUtil.normalize("/az/."));
  assertEquals("/az",ResourceUtil.normalize("/./az"));
  assertEquals("/az/bz",ResourceUtil.normalize("/az/./bz"));
  assertEquals("/az/bz",ResourceUtil.normalize("/az/bz/."));
  assertEquals("/az/bz",ResourceUtil.normalize("/az/./bz/."));
  assertNull(ResourceUtil.normalize("/.."));
  assertNull(ResourceUtil.normalize("/.."));
  assertEquals("/",ResourceUtil.normalize("/a/.."));
  assertEquals("/a",ResourceUtil.normalize("/a/b/.."));
  assertEquals("/",ResourceUtil.normalize("/a/b/../.."));
  assertNull(ResourceUtil.normalize("/a/b/../../.."));
  assertNull(ResourceUtil.normalize("/.."));
  assertNull(ResourceUtil.normalize("/.."));
  assertEquals("/",ResourceUtil.normalize("/az/.."));
  assertEquals("/az",ResourceUtil.normalize("/az/bz/.."));
  assertEquals("/",ResourceUtil.normalize("/az/bz/../.."));
  assertNull(ResourceUtil.normalize("/az/bz/../../.."));
  assertEquals("/b",ResourceUtil.normalize("/a/../b"));
  assertEquals("/a/c",ResourceUtil.normalize("/a/b/../c"));
  assertEquals("/c",ResourceUtil.normalize("/a/b/../../c"));
  assertNull(ResourceUtil.normalize("/a/b/../../../c"));
  assertEquals("/bz",ResourceUtil.normalize("/az/../bz"));
  assertEquals("/az/cz",ResourceUtil.normalize("/az/bz/../cz"));
  assertEquals("/cz",ResourceUtil.normalize("/az/bz/../../cz"));
  assertNull(ResourceUtil.normalize("/az/bz/../../../cz"));
  assertEquals("/...",ResourceUtil.normalize("/..."));
  assertEquals("/a/...",ResourceUtil.normalize("/a/..."));
  assertEquals("/a/b/...",ResourceUtil.normalize("/a/b/..."));
  assertEquals("/az/...",ResourceUtil.normalize("/az/..."));
  assertEquals("/az/bz/...",ResourceUtil.normalize("/az/bz/..."));
  try {
    ResourceUtil.normalize(null);
    fail("Resolving null expects NullPointerException");
  }
 catch (  NullPointerException npe) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.samples.failingtests.JUnit4FailingTest </h4><pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testFailsEveryTime(){
  fail("This JUnit4 test fails every time");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.samples.integrationtests.serverside.scriptable.ScriptableTestsTest </h4><pre class="type-12 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testScriptableTest() throws Exception {
  final RequestExecutor executor=testClient.runTests("org.apache.sling.junit.scriptable.ScriptableTestsProvider",null,"json");
  executor.assertContentType("application/json");
  final JSONArray json=new JSONArray(new JSONTokener((executor.getContent())));
  int testsCount=0;
  final List<String> failures=new ArrayList<String>();
  for (int i=0; i < json.length(); i++) {
    final JSONObject obj=json.getJSONObject(i);
    if ("test".equals(obj.getString("INFO_TYPE"))) {
      testsCount++;
      if (obj.has("failure")) {
        failures.add(obj.get("failure").toString());
      }
    }
  }
  final int expectedTests=1;
  assertEquals("Expecting " + expectedTests + " scriptable tests",expectedTests,testsCount);
  if (failures.size() != failureCount) {
    fail("Expected " + failureCount + " failing tests but got "+ failures.size()+ ": "+ failures);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.samples.integrationtests.serverside.sling.post.SlingPostChunkUploadTest </h4><pre class="type-11 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test upload on a existing node. Test that binary content doesn't get
 * updated until chunk upload finishes.
 */
@Test public void testChunkUploadOnExistingNode(){
  try {
    File file=createFile("helloworld",170);
    String nodeName=file.getName();
    InputStream fis=new FileInputStream(file);
    uploadMultiPart(parentPath,null,fis,file.getName());
    fis.close();
    HttpResponse response=httpGet(parentPath + "/" + nodeName);
    fis=new FileInputStream(file);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    File secondFile=createFile("helloearth",100);
    int chunkSize=200;
    uploadChunks(parentPath,secondFile,nodeName,0,chunkSize,3);
    JSONObject json=getChunkJson(parentPath + "/" + nodeName);
    validate(json,600,3);
    response=httpGet(parentPath + "/" + nodeName);
    fis=new FileInputStream(file);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    uploadChunks(parentPath,secondFile,nodeName,600,chunkSize,Integer.MAX_VALUE);
    response=httpGet(parentPath + "/" + nodeName);
    fis=new FileInputStream(secondFile);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    Map<String,String> reqParams=new HashMap<String,String>();
    reqParams.put(SlingPostConstants.RP_OPERATION,"delete");
    response=uploadMultiPart(parentPath + "/" + nodeName,reqParams,null,null);
    response=httpGet(parentPath + "/" + nodeName);
    Assert.assertEquals("status should be 404 not found ",404,response.getStatusLine().getStatusCode());
    file.delete();
    secondFile.delete();
  }
 catch (  Exception e) {
    log.error("error:",e);
    Assert.fail("exception caught: " + e.getMessage());
  }
 finally {
  }
}

</code></pre>

<br>
<pre class="type-11 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test two concurrent chunk upload. Second will fail. Test deletion of
 * incomplete upload and test new upload on the same path.
 */
@Test public void testConcurrentChunkUpload(){
  try {
    File file=createFile("helloworld",170);
    String nodeName=file.getName();
    int chunkSize=200;
    uploadChunks(parentPath,file,nodeName,0,chunkSize,3);
    JSONObject json=getChunkJson(parentPath + "/" + file.getName());
    validate(json,600,3);
    File secondFile=createFile("helloearth",100);
    chunkSize=300;
    try {
      uploadChunks(parentPath,secondFile,nodeName,0,chunkSize,1);
      Assert.fail("second upload should fail");
    }
 catch (    Exception ignore) {
    }
    try {
      uploadChunks(parentPath,secondFile,nodeName,200,chunkSize,2);
      Assert.fail("second upload should fail");
    }
 catch (    Exception ignore) {
    }
    Map<String,String> reqParams=new HashMap<String,String>();
    reqParams.put(SlingPostConstants.RP_OPERATION,"delete");
    reqParams.put(":applyToChunks","true");
    HttpResponse response=uploadMultiPart(parentPath + "/" + file.getName(),reqParams,null,null);
    Assert.assertEquals("status should be 200 OK ",200,response.getStatusLine().getStatusCode());
    chunkSize=200;
    uploadChunks(parentPath,secondFile,nodeName,0,chunkSize,Integer.MAX_VALUE);
    response=httpGet(parentPath + "/" + nodeName);
    InputStream fis=new FileInputStream(secondFile);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    reqParams=new HashMap<String,String>();
    reqParams.put(SlingPostConstants.RP_OPERATION,"delete");
    response=uploadMultiPart(parentPath + "/" + nodeName,reqParams,null,null);
    response=httpGet(parentPath + "/" + nodeName);
    Assert.assertEquals("status should be 404 not found ",404,response.getStatusLine().getStatusCode());
    file.delete();
    secondFile.delete();
  }
 catch (  Exception e) {
    log.error("error:",e);
    Assert.fail("exception caught: " + e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-11 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test use case where file size is not known in advance. File parameter
 * "@Completed" indicates file completion.
 */
@Test public void testChunkUploadOnStreaming(){
  try {
    File file=createFile("helloworld",170);
    String nodeName=file.getName();
    InputStream fis=new FileInputStream(file);
    int chunkSize=200;
    uploadPart(parentPath,file,file.getName(),0,0,chunkSize,false);
    uploadPart(parentPath,file,file.getName(),0,200,chunkSize,false);
    uploadPart(parentPath,file,file.getName(),0,400,chunkSize,true);
    fis.close();
    File secondFile=createFile("helloworld",60);
    HttpResponse response=httpGet(parentPath + "/" + nodeName);
    fis=new FileInputStream(secondFile);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    Map<String,String> reqParams=new HashMap<String,String>();
    reqParams.put(SlingPostConstants.RP_OPERATION,"delete");
    response=uploadMultiPart(parentPath + "/" + nodeName,reqParams,null,null);
    response=httpGet(parentPath + "/" + nodeName);
    Assert.assertEquals("status should be 404 not found ",404,response.getStatusLine().getStatusCode());
    file.delete();
    secondFile.delete();
  }
 catch (  Exception e) {
    log.error("error:",e);
    Assert.fail("exception caught: " + e.getMessage());
  }
 finally {
  }
}

</code></pre>

<br>
<pre class="type-11 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test chunk upload without interruption.
 */
@Test public void testChunkUpload(){
  try {
    File file=createFile("helloworld",100);
    int chunkSize=400;
    String nodeName=file.getName();
    uploadChunks(parentPath,file,nodeName,0,chunkSize,Integer.MAX_VALUE);
    HttpResponse response=httpGet(parentPath + "/" + nodeName);
    InputStream fis=new FileInputStream(file);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    Map<String,String> reqParams=new HashMap<String,String>();
    reqParams.put(SlingPostConstants.RP_OPERATION,"delete");
    response=uploadMultiPart(parentPath + "/" + nodeName,reqParams,null,null);
    response=httpGet(parentPath + "/" + nodeName);
    Assert.assertEquals("status should be 404 not found ",404,response.getStatusLine().getStatusCode());
    file.delete();
  }
 catch (  Exception e) {
    log.error("error:",e);
    Assert.fail("exception caught: " + e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-11 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test chunk upload after interruption. Test the use of variable chunk
 * size. After interruption, client retrieves chunk upload information and
 * resume upload with variable chunk size.
 */
@Test public void testInterruptedChunkUpload(){
  try {
    File file=createFile("helloworld",170);
    String nodeName=file.getName();
    int chunkSize=200;
    uploadChunks(parentPath,file,nodeName,0,chunkSize,1);
    JSONObject json=getChunkJson(parentPath + "/" + nodeName);
    validate(json,200,1);
    chunkSize=300;
    uploadChunks(parentPath,file,nodeName,200,chunkSize,2);
    json=getChunkJson(parentPath + "/" + nodeName);
    validate(json,800,3);
    chunkSize=400;
    uploadChunks(parentPath,file,nodeName,json.getInt(SlingPostConstants.NT_SLING_CHUNKS_LENGTH),chunkSize,2);
    json=getChunkJson(parentPath + "/" + nodeName);
    validate(json,1600,5);
    chunkSize=500;
    uploadChunks(parentPath,file,nodeName,json.getInt(SlingPostConstants.NT_SLING_CHUNKS_LENGTH),chunkSize,Integer.MAX_VALUE);
    HttpResponse response=httpGet(parentPath + "/" + nodeName);
    InputStream fis=new FileInputStream(file);
    Assert.assertEquals("content stream doesn't match",true,IOUtils.contentEquals(fis,new ByteArrayInputStream(getRequestExecutor().getContent().getBytes())));
    fis.close();
    Map<String,String> reqParams=new HashMap<String,String>();
    reqParams.put(SlingPostConstants.RP_OPERATION,"delete");
    response=uploadMultiPart(parentPath + "/" + nodeName,reqParams,null,null);
    response=httpGet(parentPath + "/" + nodeName);
    Assert.assertEquals("status should be 404 not found ",404,response.getStatusLine().getStatusCode());
    file.delete();
  }
 catch (  Exception e) {
    log.error("error:",e);
    Assert.fail("exception caught: " + e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * Test chunk upload from midway
 */
@Test public void testMidwayChunkUpload(){
  File file=null;
  try {
    file=createFile("helloworld",170);
    int chunkSize=200;
    try {
      uploadChunks(parentPath,file,file.getName(),200,chunkSize,1);
      Assert.fail("upload should fail");
    }
 catch (    Exception ignore) {
    }
  }
 catch (  Exception e) {
    log.error("error:",e);
    Assert.fail("exception caught: " + e.getMessage());
  }
 finally {
    file.delete();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.teleporter.client.TeleporterHttpClientTest </h4><pre class="type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void waitForStatusWithShortTimeout() throws MalformedURLException, IOException {
  final TeleporterHttpClient client=new TeleporterHttpClient(baseUrl,TEST_PATH);
  final String testUrl=baseUrl + TEST_PATH;
  assertEquals(404,client.getHttpGetStatus(baseUrl + TEST_PATH));
  activateLater(TEST_PATH,1000);
  try {
    client.waitForStatus(testUrl,200,100);
    fail("Expected waitForStatus to timeout");
  }
 catch (  IOException expected) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.testing.tools.test.ServerSetupSingletonTest </h4><pre class="type-15 type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailingStartup(){
  TestSetupPhase.failingPhases="two, five";
  for (int i=0; i < 3; i++) {
    try {
      serverSetup.setupTestServer();
      fail("startup should have failed");
    }
 catch (    Exception ignored) {
    }
    assertEquals("Expecting only one startup phase to have run","one",TestSetupPhase.executionLog.toString());
  }
}

</code></pre>

<br>
<pre class="type-6 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailingShutdown() throws Exception {
  TestSetupPhase.failingPhases="two, five";
  try {
    serverSetup.shutdown();
    fail("shutdown should have failed");
  }
 catch (  Exception ignored) {
  }
  assertEquals("Expecting only one startup phase to have run","four",TestSetupPhase.executionLog.toString());
  serverSetup.shutdown();
  assertEquals("Still expecting only one startup phase to have run","four",TestSetupPhase.executionLog.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.validation.impl.ValidationServiceImplTest </h4><pre class="type-11 type-12 type-6 type-13 type-9 type-17 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResourceWithValidatorLeveragingTheResource() throws Exception {
  Validator<String> extendedValidator=new Validator<String>(){
    @Override @Nonnull public ValidationResult validate(    @Nonnull String data,    @Nonnull ValidationContext context,    @Nonnull ValueMap arguments) throws SlingValidationException {
      Resource resource=context.getResource();
      if (resource == null) {
        Assert.fail("Resource must not be null");
      }
 else {
        Assert.assertThat(resource.getPath(),Matchers.equalTo("/content/validation/1/resource"));
      }
      return DefaultValidationResult.VALID;
    }
  }
;
  propertyBuilder.validator(extendedValidator);
  modelBuilder.resourceProperty(propertyBuilder.build("field1"));
  ValidationModel vm=modelBuilder.build("sometype");
  ResourceResolver rr=context.resourceResolver();
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put("field1","1");
  Resource testResource=ResourceUtil.getOrCreateResource(rr,"/content/validation/1/resource",properties,JcrConstants.NT_UNSTRUCTURED,true);
  ValidationResult vr=validationService.validate(testResource,vm);
  Assert.assertTrue(vr.isValid());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.sling.xss.impl.XSSAPIImplTest </h4><pre class="type-12 type-6 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetValidCSSColor(){
  String[][] testData={{null,RUBBISH},{"",RUBBISH},{"rgb(0,+0,-0)","rgb(0,+0,-0)"},{"rgba ( 0\f%, 0%,\t0%,\n100%\r)","rgba ( 0\f%, 0%,\t0%,\n100%\r)"},{"#ddd","#ddd"},{"#eeeeee","#eeeeee"},{"hsl(0,1,2)","hsl(0,1,2)"},{"hsla(0,1,2,3)","hsla(0,1,2,3)"},{"currentColor","currentColor"},{"transparent","transparent"},{"\f\r\n\t MenuText\f\r\n\t ","MenuText"},{"expression(99,99,99)",RUBBISH},{"blue;",RUBBISH},{"url(99,99,99)",RUBBISH}};
  for (  String[] aTestData : testData) {
    String source=aTestData[0];
    String expected=aTestData[1];
    String result=xssAPI.getValidCSSColor(source,RUBBISH);
    if (!result.equals(expected)) {
      fail("Validating CSS Color '" + source + "', expecting '"+ expected+ "', but got '"+ result+ "'");
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-6 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetValidJSON(){
  String[][] testData={{null,RUBBISH_JSON},{"",""},{"1]",RUBBISH_JSON},{"{}","{}"},{"{1}",RUBBISH_JSON},{"{test: 'test'}","{\"test\":\"test\"}"},{"{test:\"test}",RUBBISH_JSON},{"{test1:'test1', test2: {test21: 'test21', test22: 'test22'}}","{\"test1\":\"test1\",\"test2\":{\"test21\":\"test21\",\"test22\":\"test22\"}}"},{"[]","[]"},{"[1,2]","[1,2]"},{"[1",RUBBISH_JSON},{"[{test: 'test'}]","[{\"test\":\"test\"}]"}};
  for (  String[] aTestData : testData) {
    String source=aTestData[0];
    String expected=aTestData[1];
    String result=xssAPI.getValidJSON(source,RUBBISH_JSON);
    if (!result.equals(expected)) {
      fail("Validating JSON '" + source + "', expecting '"+ expected+ "', but got '"+ result+ "'");
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-6 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetValidMultiLineComment(){
  String[][] testData={{null,RUBBISH},{"blah */ hack",RUBBISH},{"Valid comment","Valid comment"}};
  for (  String[] aTestData : testData) {
    String source=aTestData[0];
    String expected=aTestData[1];
    String result=xssAPI.getValidMultiLineComment(source,RUBBISH);
    if (!result.equals(expected)) {
      fail("Validating multiline comment '" + source + "', expecting '"+ expected+ "', but got '"+ result+ "'");
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-6 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetValidStyleToken(){
  String[][] testData={{null,RUBBISH},{"",RUBBISH},{"}",RUBBISH},{"br\neak",RUBBISH},{"javascript:alert(1)",RUBBISH},{"'javascript:alert(1)'",RUBBISH},{"\"javascript:alert('XSS')\"",RUBBISH},{"url(javascript:alert(1))",RUBBISH},{"url('javascript:alert(1)')",RUBBISH},{"url(\"javascript:alert('XSS')\")",RUBBISH},{"expression(alert(1))",RUBBISH},{"expression  (alert(1))",RUBBISH},{"expression(this.location='a.co')",RUBBISH},{"</style><script>alert(1)</script>",RUBBISH},{"background-color","background-color"},{"-moz-box-sizing","-moz-box-sizing"},{".42%",".42%"},{"#fff","#fff"},{"'literal string'","'literal string'"},{"\"literal string\"","\"literal string\""},{"'it\\'s here'","'it\\'s here'"},{"\"it\\\"s here\"","\"it\\\"s here\""},{"\"bad string",RUBBISH},{"'it's here'",RUBBISH},{"\"it\"s here\"",RUBBISH},{"rgb(255, 255, 255)","rgb(255, 255, 255)"},{"rgb(255, 255, 255",RUBBISH},{"255, 255, 255)",RUBBISH},{"url(http://example.com/test.png)","url(http://example.com/test.png)"},{"url('image/test.png')","url('image/test.png')"},{"color: red",RUBBISH}};
  for (  String[] aTestData : testData) {
    String source=aTestData[0];
    String expected=aTestData[1];
    String result=xssAPI.getValidStyleToken(source,RUBBISH);
    if (!result.equals(expected)) {
      fail("Validating style token '" + source + "', expecting '"+ expected+ "', but got '"+ result+ "'");
    }
  }
}

</code></pre>

<br>
<pre class="type-12 type-6 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testGetValidXML(){
  String[][] testData={{null,RUBBISH_XML},{"",""},{"<t/>","<t/>"},{"<t>",RUBBISH_XML},{"<t>test</t>","<t>test</t>"},{"<t>test",RUBBISH_XML},{"<t t=\"t\">test</t>","<t t=\"t\">test</t>"},{"<t t=\"t>test</t>",RUBBISH_XML},{"<t><w>xyz</w></t>","<t><w>xyz</w></t>"},{"<t><w>xyz</t></w>",RUBBISH_XML}};
  for (  String[] aTestData : testData) {
    String source=aTestData[0];
    String expected=aTestData[1];
    String result=xssAPI.getValidXML(source,RUBBISH_XML);
    if (!result.equals(expected)) {
      fail("Validating XML '" + source + "', expecting '"+ expected+ "', but got '"+ result+ "'");
    }
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
