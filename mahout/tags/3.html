<h3><span class=" glyphicon glyphicon-tag"/>&nbspAPIUtilityVerifier</h3><kbd>Verifies values of objects/variables related to API calls (Java or TPL) </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.mahout.cf.taste.hadoop.TopItemsQueueTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void topK(){
  float[] ratings={0.5f,0.6f,0.7f,2.0f,0.0f};
  List<RecommendedItem> topItems=findTop(ratings,2);
  assertEquals(2,topItems.size());
  assertEquals(3L,topItems.get(0).getItemID());
  assertEquals(2.0f,topItems.get(0).getValue(),MahoutTestCase.EPSILON);
  assertEquals(2L,topItems.get(1).getItemID());
  assertEquals(0.7f,topItems.get(1).getValue(),MahoutTestCase.EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void topKInputSmallerThanK(){
  float[] ratings={0.7f,2.0f};
  List<RecommendedItem> topItems=findTop(ratings,3);
  assertEquals(2,topItems.size());
  assertEquals(1L,topItems.get(0).getItemID());
  assertEquals(2.0f,topItems.get(0).getValue(),MahoutTestCase.EPSILON);
  assertEquals(0L,topItems.get(1).getItemID());
  assertEquals(0.7f,topItems.get(1).getValue(),MahoutTestCase.EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.hadoop.als.ParallelALSFactorizationJobTest </h4><pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void exampleWithIDMapping() throws Exception {
  String[] preferencesWithLongIDs={"5568227754922264005,-4758971626494767444,5.0","5568227754922264005,3688396615879561990,5.0","5568227754922264005,4594226737871995304,2.0","550945997885173934,-4758971626494767444,2.0","550945997885173934,4594226737871995304,3.0","550945997885173934,706816485922781596,5.0","2448095297482319463,3688396615879561990,5.0","2448095297482319463,706816485922781596,3.0","6839920411763636962,-4758971626494767444,3.0","6839920411763636962,706816485922781596,5.0"};
  writeLines(inputFile,preferencesWithLongIDs);
  ParallelALSFactorizationJob alsFactorization=new ParallelALSFactorizationJob();
  alsFactorization.setConf(conf);
  int numFeatures=3;
  int numIterations=5;
  double lambda=0.065;
  alsFactorization.run(new String[]{"--input",inputFile.getAbsolutePath(),"--output",outputDir.getAbsolutePath(),"--tempDir",tmpDir.getAbsolutePath(),"--lambda",String.valueOf(lambda),"--numFeatures",String.valueOf(numFeatures),"--numIterations",String.valueOf(numIterations),"--numThreadsPerSolver",String.valueOf(1),"--usesLongIDs",String.valueOf(true)});
  OpenIntLongHashMap userIDIndex=TasteHadoopUtils.readIDIndexMap(outputDir.getAbsolutePath() + "/userIDIndex/part-r-00000",conf);
  assertEquals(4,userIDIndex.size());
  OpenIntLongHashMap itemIDIndex=TasteHadoopUtils.readIDIndexMap(outputDir.getAbsolutePath() + "/itemIDIndex/part-r-00000",conf);
  assertEquals(4,itemIDIndex.size());
  OpenIntObjectHashMap<Vector> u=MathHelper.readMatrixRows(conf,new Path(outputDir.getAbsolutePath(),"U/part-m-00000"));
  OpenIntObjectHashMap<Vector> m=MathHelper.readMatrixRows(conf,new Path(outputDir.getAbsolutePath(),"M/part-m-00000"));
  assertEquals(4,u.size());
  assertEquals(4,m.size());
  RunningAverage avg=new FullRunningAverage();
  for (  String line : preferencesWithLongIDs) {
    String[] tokens=TasteHadoopUtils.splitPrefTokens(line);
    long userID=Long.parseLong(tokens[TasteHadoopUtils.USER_ID_POS]);
    long itemID=Long.parseLong(tokens[TasteHadoopUtils.ITEM_ID_POS]);
    double rating=Double.parseDouble(tokens[2]);
    Vector userFeatures=u.get(TasteHadoopUtils.idToIndex(userID));
    Vector itemFeatures=m.get(TasteHadoopUtils.idToIndex(itemID));
    double estimate=userFeatures.dot(itemFeatures);
    double err=rating - estimate;
    avg.addDatum(err * err);
  }
  double rmse=Math.sqrt(avg.getAverage());
  log.info("RMSE: {}",rmse);
  assertTrue(rmse < 0.2);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void recommenderJobWithIDMapping() throws Exception {
  String[] preferencesWithLongIDs={"5568227754922264005,-4758971626494767444,5.0","5568227754922264005,3688396615879561990,5.0","5568227754922264005,4594226737871995304,2.0","550945997885173934,-4758971626494767444,2.0","550945997885173934,4594226737871995304,3.0","550945997885173934,706816485922781596,5.0","2448095297482319463,3688396615879561990,5.0","2448095297482319463,706816485922781596,3.0","6839920411763636962,-4758971626494767444,3.0","6839920411763636962,706816485922781596,5.0"};
  writeLines(inputFile,preferencesWithLongIDs);
  ParallelALSFactorizationJob alsFactorization=new ParallelALSFactorizationJob();
  alsFactorization.setConf(conf);
  int numFeatures=3;
  int numIterations=5;
  double lambda=0.065;
  Configuration conf=getConfiguration();
  int success=ToolRunner.run(alsFactorization,new String[]{"-Dhadoop.tmp.dir=" + conf.get("hadoop.tmp.dir"),"--input",inputFile.getAbsolutePath(),"--output",intermediateDir.getAbsolutePath(),"--tempDir",tmpDir.getAbsolutePath(),"--lambda",String.valueOf(lambda),"--numFeatures",String.valueOf(numFeatures),"--numIterations",String.valueOf(numIterations),"--numThreadsPerSolver",String.valueOf(1),"--usesLongIDs",String.valueOf(true)});
  assertEquals(0,success);
  SharingMapper.reset();
  RecommenderJob recommender=new RecommenderJob();
  success=ToolRunner.run(recommender,new String[]{"-Dhadoop.tmp.dir=" + conf.get("hadoop.tmp.dir"),"--input",intermediateDir.getAbsolutePath() + "/userRatings/","--userFeatures",intermediateDir.getAbsolutePath() + "/U/","--itemFeatures",intermediateDir.getAbsolutePath() + "/M/","--numRecommendations",String.valueOf(2),"--maxRating",String.valueOf(5.0),"--numThreads",String.valueOf(2),"--usesLongIDs",String.valueOf(true),"--userIDIndex",intermediateDir.getAbsolutePath() + "/userIDIndex/","--itemIDIndex",intermediateDir.getAbsolutePath() + "/itemIDIndex/","--output",outputDir.getAbsolutePath()});
  assertEquals(0,success);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.hadoop.item.IDReaderTest </h4><pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUserItemFilter() throws Exception {
  Configuration conf=getConfiguration();
  IDReader idReader=new IDReader(conf);
  Map<Long,FastIDSet> userItemFilter=Maps.newHashMap();
  long user1=1;
  long user2=2;
  idReader.addUserAndItemIdToUserItemFilter(userItemFilter,user1,100L);
  idReader.addUserAndItemIdToUserItemFilter(userItemFilter,user1,200L);
  idReader.addUserAndItemIdToUserItemFilter(userItemFilter,user2,300L);
  FastIDSet userIds=IDReader.extractAllUserIdsFromUserItemFilter(userItemFilter);
  assertEquals(2,userIds.size());
  assertTrue(userIds.contains(user1));
  assertTrue(userIds.contains(user1));
  setField(idReader,USER_ITEM_FILTER_FIELD,userItemFilter);
  FastIDSet itemsForUser1=idReader.getItemsToRecommendForUser(user1);
  assertEquals(2,itemsForUser1.size());
  assertTrue(itemsForUser1.contains(100L));
  assertTrue(itemsForUser1.contains(200L));
  FastIDSet itemsForUser2=idReader.getItemsToRecommendForUser(user2);
  assertEquals(1,itemsForUser2.size());
  assertTrue(itemsForUser2.contains(300L));
  FastIDSet itemsForNonExistingUser=idReader.getItemsToRecommendForUser(3L);
  assertTrue(itemsForNonExistingUser.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.hadoop.item.RecommenderJobTest </h4><pre class="type-3 type-8 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * small integration test that runs the full job
 * As a tribute to http://www.slideshare.net/srowen/collaborative-filtering-at-scale,
 * we recommend people food to animals in this test :)
 * <pre>
 * user-item-matrix
 * burger  hotdog  berries  icecream
 * dog       5       5        2        -
 * rabbit    2       -        3        5
 * cow       -       5        -        3
 * donkey    3       -        -        5
 * item-item-similarity-matrix (tanimoto-coefficient of the item-vectors of the user-item-matrix)
 * burger  hotdog  berries icecream
 * burger    -      0.25    0.66    0.5
 * hotdog   0.25     -      0.33    0.25
 * berries  0.66    0.33     -      0.25
 * icecream 0.5     0.25    0.25     -
 * Prediction(dog, icecream)   = (0.5 * 5 + 0.25 * 5 + 0.25 * 2 ) / (0.5 + 0.25 + 0.25)  ~ 4.3
 * Prediction(rabbit, hotdog)  = (0.25 * 2 + 0.33 * 3 + 0.25 * 5) / (0.25 + 0.33 + 0.25) ~ 3,3
 * Prediction(cow, burger)     = (0.25 * 5 + 0.5 * 3) / (0.25 + 0.5)                     ~ 3,7
 * Prediction(cow, berries)    = (0.33 * 5 + 0.25 * 3) / (0.33 + 0.25)                   ~ 4,1
 * Prediction(donkey, hotdog)  = (0.25 * 3 + 0.25 * 5) / (0.25 + 0.25)                   ~ 4
 * Prediction(donkey, berries) = (0.66 * 3 + 0.25 * 5) / (0.66 + 0.25)                   ~ 3,5
 * </pre>
 */
@Test public void testCompleteJob() throws Exception {
  File inputFile=getTestTempFile("prefs.txt");
  File outputDir=getTestTempDir("output");
  outputDir.delete();
  File similaritiesOutputDir=getTestTempDir("outputSimilarities");
  similaritiesOutputDir.delete();
  File tmpDir=getTestTempDir("tmp");
  writeLines(inputFile,"1,1,5","1,2,5","1,3,2","2,1,2","2,3,3","2,4,5","3,2,5","3,4,3","4,1,3","4,4,5");
  RecommenderJob recommenderJob=new RecommenderJob();
  Configuration conf=getConfiguration();
  conf.set("mapred.input.dir",inputFile.getAbsolutePath());
  conf.set("mapred.output.dir",outputDir.getAbsolutePath());
  conf.setBoolean("mapred.output.compress",false);
  recommenderJob.setConf(conf);
  recommenderJob.run(new String[]{"--tempDir",tmpDir.getAbsolutePath(),"--similarityClassname",TanimotoCoefficientSimilarity.class.getName(),"--numRecommendations","4","--outputPathForSimilarityMatrix",similaritiesOutputDir.getAbsolutePath()});
  Map<Long,List<RecommendedItem>> recommendations=readRecommendations(new File(outputDir,"part-r-00000"));
  assertEquals(4,recommendations.size());
  for (  Entry<Long,List<RecommendedItem>> entry : recommendations.entrySet()) {
    long userID=entry.getKey();
    List<RecommendedItem> items=entry.getValue();
    assertNotNull(items);
    RecommendedItem item1=items.get(0);
    if (userID == 1L) {
      assertEquals(1,items.size());
      assertEquals(4L,item1.getItemID());
      assertEquals(4.3,item1.getValue(),0.05);
    }
    if (userID == 2L) {
      assertEquals(1,items.size());
      assertEquals(2L,item1.getItemID());
      assertEquals(3.3,item1.getValue(),0.05);
    }
    if (userID == 3L) {
      assertEquals(2,items.size());
      assertEquals(3L,item1.getItemID());
      assertEquals(4.1,item1.getValue(),0.05);
      RecommendedItem item2=items.get(1);
      assertEquals(1L,item2.getItemID());
      assertEquals(3.7,item2.getValue(),0.05);
    }
    if (userID == 4L) {
      assertEquals(2,items.size());
      assertEquals(2L,item1.getItemID());
      assertEquals(4.0,item1.getValue(),0.05);
      RecommendedItem item2=items.get(1);
      assertEquals(3L,item2.getItemID());
      assertEquals(3.5,item2.getValue(),0.05);
    }
  }
  Map<Pair<Long,Long>,Double> similarities=readSimilarities(new File(similaritiesOutputDir,"part-r-00000"));
  assertEquals(6,similarities.size());
  assertEquals(0.25,similarities.get(new Pair<Long,Long>(1L,2L)),EPSILON);
  assertEquals(0.6666666666666666,similarities.get(new Pair<Long,Long>(1L,3L)),EPSILON);
  assertEquals(0.5,similarities.get(new Pair<Long,Long>(1L,4L)),EPSILON);
  assertEquals(0.3333333333333333,similarities.get(new Pair<Long,Long>(2L,3L)),EPSILON);
  assertEquals(0.25,similarities.get(new Pair<Long,Long>(2L,4L)),EPSILON);
  assertEquals(0.25,similarities.get(new Pair<Long,Long>(3L,4L)),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * small integration test for boolean data
 */
@Test public void testCompleteJobBoolean() throws Exception {
  File inputFile=getTestTempFile("prefs.txt");
  File outputDir=getTestTempDir("output");
  outputDir.delete();
  File tmpDir=getTestTempDir("tmp");
  File usersFile=getTestTempFile("users.txt");
  writeLines(usersFile,"3");
  writeLines(inputFile,"1,1","1,2","1,3","2,1","2,3","2,4","3,2","3,4","4,1","4,4");
  RecommenderJob recommenderJob=new RecommenderJob();
  Configuration conf=getConfiguration();
  conf.set("mapred.input.dir",inputFile.getAbsolutePath());
  conf.set("mapred.output.dir",outputDir.getAbsolutePath());
  conf.setBoolean("mapred.output.compress",false);
  recommenderJob.setConf(conf);
  recommenderJob.run(new String[]{"--tempDir",tmpDir.getAbsolutePath(),"--similarityClassname",CooccurrenceCountSimilarity.class.getName(),"--booleanData","true","--usersFile",usersFile.getAbsolutePath()});
  Map<Long,List<RecommendedItem>> recommendations=readRecommendations(new File(outputDir,"part-r-00000"));
  List<RecommendedItem> recommendedToCow=recommendations.get(3L);
  assertEquals(2,recommendedToCow.size());
  RecommendedItem item1=recommendedToCow.get(0);
  RecommendedItem item2=recommendedToCow.get(1);
  assertEquals(1L,item1.getItemID());
  assertEquals(3L,item2.getItemID());
  assertEquals(3,item1.getValue(),0.05);
  assertEquals(2,item2.getValue(),0.05);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * check whether the explicit user/item filter works
 */
@Test public void testCompleteJobWithFiltering() throws Exception {
  File inputFile=getTestTempFile("prefs.txt");
  File userFile=getTestTempFile("users.txt");
  File filterFile=getTestTempFile("filter.txt");
  File outputDir=getTestTempDir("output");
  outputDir.delete();
  File tmpDir=getTestTempDir("tmp");
  writeLines(inputFile,"1,1,5","1,2,5","1,3,2","2,1,2","2,3,3","2,4,5","3,2,5","3,4,3","4,1,3","4,4,5");
  writeLines(userFile,"4");
  writeLines(filterFile,"4,2");
  RecommenderJob recommenderJob=new RecommenderJob();
  Configuration conf=getConfiguration();
  conf.set("mapred.input.dir",inputFile.getAbsolutePath());
  conf.set("mapred.output.dir",outputDir.getAbsolutePath());
  conf.setBoolean("mapred.output.compress",false);
  recommenderJob.setConf(conf);
  recommenderJob.run(new String[]{"--tempDir",tmpDir.getAbsolutePath(),"--similarityClassname",TanimotoCoefficientSimilarity.class.getName(),"--numRecommendations","1","--usersFile",userFile.getAbsolutePath(),"--filterFile",filterFile.getAbsolutePath()});
  Map<Long,List<RecommendedItem>> recommendations=readRecommendations(new File(outputDir,"part-r-00000"));
  assertEquals(1,recommendations.size());
  assertTrue(recommendations.containsKey(4L));
  assertEquals(1,recommendations.get(4L).size());
  RecommendedItem recommendedItem=recommendations.get(4L).get(0);
  assertEquals(3L,recommendedItem.getItemID());
  assertEquals(3.5,recommendedItem.getValue(),0.05);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.hadoop.similarity.item.ItemSimilarityJobTest </h4><pre class="type-11 type-3 type-8 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Integration test with a tiny data set
 * <pre>
 * user-item-matrix
 * Game   Mouse   PC    Disk
 * Jane    -       1      2      -
 * Paul    1       -      1      -
 * Fred    -       -      -      1
 * </pre>
 */
@Test public void testCompleteJob() throws Exception {
  File inputFile=getTestTempFile("prefs.txt");
  File outputDir=getTestTempDir("output");
  outputDir.delete();
  File tmpDir=getTestTempDir("tmp");
  writeLines(inputFile,"2,1,1","1,2,1","3,4,1","1,3,2","2,3,1");
  ItemSimilarityJob similarityJob=new ItemSimilarityJob();
  Configuration conf=getConfiguration();
  conf.set("mapred.input.dir",inputFile.getAbsolutePath());
  conf.set("mapred.output.dir",outputDir.getAbsolutePath());
  conf.setBoolean("mapred.output.compress",false);
  similarityJob.setConf(conf);
  similarityJob.run(new String[]{"--tempDir",tmpDir.getAbsolutePath(),"--similarityClassname",CosineSimilarity.class.getName()});
  File outPart=outputDir.listFiles(new FilenameFilter(){
    @Override public boolean accept(    File dir,    String name){
      return name.startsWith("part-");
    }
  }
)[0];
  BufferedReader reader=Files.newReader(outPart,Charsets.UTF_8);
  String line;
  int currentLine=1;
  while ((line=reader.readLine()) != null) {
    String[] tokens=TAB.split(line);
    long itemAID=Long.parseLong(tokens[0]);
    long itemBID=Long.parseLong(tokens[1]);
    double similarity=Double.parseDouble(tokens[2]);
    if (currentLine == 1) {
      assertEquals(1L,itemAID);
      assertEquals(3L,itemBID);
      assertEquals(0.45,similarity,0.01);
    }
    if (currentLine == 2) {
      assertEquals(2L,itemAID);
      assertEquals(3L,itemBID);
      assertEquals(0.89,similarity,0.01);
    }
    currentLine++;
  }
  int linesWritten=currentLine - 1;
  assertEquals(2,linesWritten);
}

</code></pre>

<br>
<pre class="type-11 type-3 type-8 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * integration test for the limitation of the number of computed similarities
 * <pre>
 * user-item-matrix
 * i1  i2  i3
 * u1   1   0   1
 * u2   0   1   1
 * u3   1   1   0
 * u4   1   1   1
 * u5   0   1   0
 * u6   1   1   0
 * tanimoto(i1,i2) = 0.5
 * tanimoto(i2,i3) = 0.333
 * tanimoto(i3,i1) = 0.4
 * When we set maxSimilaritiesPerItem to 1 the following pairs should be found:
 * i1 --> i2
 * i2 --> i1
 * i3 --> i1
 * </pre>
 */
@Test public void testMaxSimilaritiesPerItem() throws Exception {
  File inputFile=getTestTempFile("prefsForMaxSimilarities.txt");
  File outputDir=getTestTempDir("output");
  outputDir.delete();
  File tmpDir=getTestTempDir("tmp");
  writeLines(inputFile,"1,1,1","1,3,1","2,2,1","2,3,1","3,1,1","3,2,1","4,1,1","4,2,1","4,3,1","5,2,1","6,1,1","6,2,1");
  ItemSimilarityJob similarityJob=new ItemSimilarityJob();
  Configuration conf=getConfiguration();
  conf.set("mapred.input.dir",inputFile.getAbsolutePath());
  conf.set("mapred.output.dir",outputDir.getAbsolutePath());
  conf.setBoolean("mapred.output.compress",false);
  similarityJob.setConf(conf);
  similarityJob.run(new String[]{"--tempDir",tmpDir.getAbsolutePath(),"--similarityClassname",TanimotoCoefficientSimilarity.class.getName(),"--maxSimilaritiesPerItem","1"});
  File outPart=outputDir.listFiles(new FilenameFilter(){
    @Override public boolean accept(    File dir,    String name){
      return name.startsWith("part-");
    }
  }
)[0];
  BufferedReader reader=Files.newReader(outPart,Charsets.UTF_8);
  String line;
  int currentLine=1;
  while ((line=reader.readLine()) != null) {
    String[] tokens=TAB.split(line);
    long itemAID=Long.parseLong(tokens[0]);
    long itemBID=Long.parseLong(tokens[1]);
    double similarity=Double.parseDouble(tokens[2]);
    if (currentLine == 1) {
      assertEquals(1L,itemAID);
      assertEquals(2L,itemBID);
      assertEquals(0.5,similarity,0.0001);
    }
    if (currentLine == 2) {
      assertEquals(1L,itemAID);
      assertEquals(3L,itemBID);
      assertEquals(0.4,similarity,0.0001);
    }
    currentLine++;
  }
  int linesWritten=currentLine - 1;
  assertEquals(2,linesWritten);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.common.FastByIDMapTest </h4><pre class="type-11 type-3 type-8 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testVersusHashMap(){
  FastByIDMap<String> actual=new FastByIDMap<String>();
  Map<Long,String> expected=Maps.newHashMapWithExpectedSize(1000000);
  Random r=RandomUtils.getRandom();
  for (int i=0; i < 1000000; i++) {
    double d=r.nextDouble();
    Long key=(long)r.nextInt(100);
    if (d < 0.4) {
      assertEquals(expected.get(key),actual.get(key));
    }
 else {
      if (d < 0.7) {
        assertEquals(expected.put(key,"bang"),actual.put(key,"bang"));
      }
 else {
        assertEquals(expected.remove(key),actual.remove(key));
      }
      assertEquals(expected.size(),actual.size());
      assertEquals(expected.isEmpty(),actual.isEmpty());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.common.FastIDSetTest </h4><pre class="type-11 type-3 type-8 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testVersusHashSet(){
  FastIDSet actual=new FastIDSet(1);
  Collection<Integer> expected=Sets.newHashSetWithExpectedSize(1000000);
  Random r=RandomUtils.getRandom();
  for (int i=0; i < 1000000; i++) {
    double d=r.nextDouble();
    Integer key=r.nextInt(100);
    if (d < 0.4) {
      assertEquals(expected.contains(key),actual.contains(key));
    }
 else {
      if (d < 0.7) {
        assertEquals(expected.add(key),actual.add(key));
      }
 else {
        assertEquals(expected.remove(key),actual.remove(key));
      }
      assertEquals(expected.size(),actual.size());
      assertEquals(expected.isEmpty(),actual.isEmpty());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.common.FastMapTest </h4><pre class="type-11 type-3 type-8 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testVersusHashMap(){
  Map<Integer,String> actual=new FastMap<Integer,String>(1,1000000);
  Map<Integer,String> expected=Maps.newHashMapWithExpectedSize(1000000);
  Random r=RandomUtils.getRandom();
  for (int i=0; i < 1000000; i++) {
    double d=r.nextDouble();
    Integer key=r.nextInt(100);
    if (d < 0.4) {
      assertEquals(expected.get(key),actual.get(key));
    }
 else {
      if (d < 0.7) {
        assertEquals(expected.put(key,"foo"),actual.put(key,"foo"));
      }
 else {
        assertEquals(expected.remove(key),actual.remove(key));
      }
      assertEquals(expected.size(),actual.size());
      assertEquals(expected.isEmpty(),actual.isEmpty());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.common.SamplingLongPrimitiveIteratorTest </h4><pre class="type-11 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSample(){
  double p=0.1;
  int n=1000;
  double sd=Math.sqrt(n * p * (1.0 - p));
  for (int i=0; i < 1000; i++) {
    SamplingLongPrimitiveIterator t=new SamplingLongPrimitiveIterator(countingIterator(n),p);
    int k=0;
    while (t.hasNext()) {
      long v=t.nextLong();
      k++;
      assertTrue(v >= 0L);
      assertTrue(v < 1000L);
    }
    assertTrue(k >= 100 - 5 * sd);
    assertTrue(k <= 100 + 5 * sd);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.eval.GenericRecommenderIRStatsEvaluatorImplTest </h4><pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBoolean() throws Exception {
  DataModel model=getBooleanDataModel();
  RecommenderBuilder builder=new RecommenderBuilder(){
    @Override public Recommender buildRecommender(    DataModel dataModel){
      return new GenericBooleanPrefItemBasedRecommender(dataModel,new LogLikelihoodSimilarity(dataModel));
    }
  }
;
  DataModelBuilder dataModelBuilder=new DataModelBuilder(){
    @Override public DataModel buildDataModel(    FastByIDMap<PreferenceArray> trainingData){
      return new GenericBooleanPrefDataModel(GenericBooleanPrefDataModel.toDataMap(trainingData));
    }
  }
;
  RecommenderIRStatsEvaluator evaluator=new GenericRecommenderIRStatsEvaluator();
  IRStatistics stats=evaluator.evaluate(builder,dataModelBuilder,model,null,1,GenericRecommenderIRStatsEvaluator.CHOOSE_THRESHOLD,1.0);
  assertNotNull(stats);
  assertEquals(0.666666666,stats.getPrecision(),EPSILON);
  assertEquals(0.666666666,stats.getRecall(),EPSILON);
  assertEquals(0.666666666,stats.getF1Measure(),EPSILON);
  assertEquals(0.666666666,stats.getFNMeasure(2.0),EPSILON);
  assertEquals(0.666666666,stats.getNormalizedDiscountedCumulativeGain(),EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.model.GenericDataModelTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSerialization() throws Exception {
  GenericDataModel model=(GenericDataModel)getDataModel();
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ObjectOutputStream out=new ObjectOutputStream(baos);
  out.writeObject(model);
  ByteArrayInputStream bais=new ByteArrayInputStream(baos.toByteArray());
  ObjectInputStream in=new ObjectInputStream(bais);
  GenericDataModel newModel=(GenericDataModel)in.readObject();
  assertEquals(model.getNumItems(),newModel.getNumItems());
  assertEquals(model.getNumUsers(),newModel.getNumUsers());
  assertEquals(model.getPreferencesFromUser(1L),newModel.getPreferencesFromUser(1L));
  assertEquals(model.getPreferencesForItem(1L),newModel.getPreferencesForItem(1L));
  assertEquals(model.getRawUserData(),newModel.getRawUserData());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.model.PlusAnonymousConcurrentUserDataModelTest </h4><pre class="type-3 type-2 type-5 type-13 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test retrieving the user IDs and verifying that anonymous ones are not included
 */
@Test public void testGetUserIDs() throws TasteException {
  PreferenceArray prefs=new GenericUserPreferenceArray(1);
  long sampleUserID=1;
  prefs.setUserID(0,sampleUserID);
  long sampleItemID=11;
  prefs.setItemID(0,sampleItemID);
  FastByIDMap<PreferenceArray> delegatePreferences=new FastByIDMap<PreferenceArray>();
  delegatePreferences.put(sampleUserID,prefs);
  PlusAnonymousConcurrentUserDataModel instance=getTestableWithDelegateData(10,delegatePreferences);
  Long anonymousUserID=instance.takeAvailableUser();
  PreferenceArray tempPrefs=new GenericUserPreferenceArray(1);
  tempPrefs.setUserID(0,anonymousUserID);
  tempPrefs.setItemID(0,22);
  instance.setTempPrefs(tempPrefs,anonymousUserID);
  Iterator<Long> userIDs=instance.getUserIDs();
  assertSame(sampleUserID,userIDs.next());
  assertFalse(userIDs.hasNext());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test getting preferences for an item.
 * @throws TasteException
 */
@Test public void testGetPreferencesForItem() throws TasteException {
  PreferenceArray prefs=new GenericUserPreferenceArray(2);
  long sampleUserID=4;
  prefs.setUserID(0,sampleUserID);
  long sampleItemID=11;
  prefs.setItemID(0,sampleItemID);
  prefs.setUserID(1,sampleUserID);
  long sampleItemID2=22;
  prefs.setItemID(1,sampleItemID2);
  FastByIDMap<PreferenceArray> delegatePreferences=new FastByIDMap<PreferenceArray>();
  delegatePreferences.put(sampleUserID,prefs);
  PlusAnonymousConcurrentUserDataModel instance=getTestableWithDelegateData(10,delegatePreferences);
  Long anonymousUserID=instance.takeAvailableUser();
  PreferenceArray tempPrefs=new GenericUserPreferenceArray(2);
  tempPrefs.setUserID(0,anonymousUserID);
  tempPrefs.setItemID(0,sampleItemID);
  tempPrefs.setUserID(1,anonymousUserID);
  long sampleItemID3=33;
  tempPrefs.setItemID(1,sampleItemID3);
  instance.setTempPrefs(tempPrefs,anonymousUserID);
  assertEquals(sampleUserID,instance.getPreferencesForItem(sampleItemID).get(0).getUserID());
  assertEquals(2,instance.getPreferencesForItem(sampleItemID).length());
  assertEquals(1,instance.getPreferencesForItem(sampleItemID2).length());
  assertEquals(1,instance.getPreferencesForItem(sampleItemID3).length());
  assertEquals(2,instance.getNumUsersWithPreferenceFor(sampleItemID));
  assertEquals(1,instance.getNumUsersWithPreferenceFor(sampleItemID,sampleItemID2));
  assertEquals(1,instance.getNumUsersWithPreferenceFor(sampleItemID,sampleItemID3));
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test retrieve preferences for existing non-anonymous user
 */
@Test public void testGetPreferencesForNonAnonymousUser() throws TasteException {
  PreferenceArray prefs=new GenericUserPreferenceArray(1);
  long sampleUserID=1;
  prefs.setUserID(0,sampleUserID);
  long sampleItemID=11;
  prefs.setItemID(0,sampleItemID);
  FastByIDMap<PreferenceArray> delegatePreferences=new FastByIDMap<PreferenceArray>();
  delegatePreferences.put(sampleUserID,prefs);
  PlusAnonymousConcurrentUserDataModel instance=getTestableWithDelegateData(10,delegatePreferences);
  assertEquals(prefs,instance.getPreferencesFromUser(sampleUserID));
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test counting the number of delegate users
 */
@Test public void testGetNumUsersWithDelegateUsersOnly() throws TasteException {
  PreferenceArray prefs=new GenericUserPreferenceArray(1);
  long sampleUserID=1;
  prefs.setUserID(0,sampleUserID);
  long sampleItemID=11;
  prefs.setItemID(0,sampleItemID);
  FastByIDMap<PreferenceArray> delegatePreferences=new FastByIDMap<PreferenceArray>();
  delegatePreferences.put(sampleUserID,prefs);
  PlusAnonymousConcurrentUserDataModel instance=getTestableWithDelegateData(10,delegatePreferences);
  assertEquals(1,instance.getNumUsers());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.recommender.GenericItemBasedRecommenderTest </h4><pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMostSimilarToMultipleDontExcludeIfNotSimilarToAll() throws Exception {
  ItemBasedRecommender recommender=buildRecommender2();
  List<RecommendedItem> similar=recommender.mostSimilarItems(new long[]{1,2,4},10,false);
  assertNotNull(similar);
  assertEquals(2,similar.size());
  RecommendedItem first=similar.get(0);
  RecommendedItem second=similar.get(1);
  assertEquals(0,first.getItemID());
  assertEquals(0.933333333f,first.getValue(),EPSILON);
  assertEquals(3,second.getItemID());
  assertEquals(-0.2f,second.getValue(),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMostSimilar() throws Exception {
  ItemBasedRecommender recommender=buildRecommender();
  List<RecommendedItem> similar=recommender.mostSimilarItems(0,2);
  assertNotNull(similar);
  assertEquals(2,similar.size());
  RecommendedItem first=similar.get(0);
  RecommendedItem second=similar.get(1);
  assertEquals(1,first.getItemID());
  assertEquals(1.0f,first.getValue(),EPSILON);
  assertEquals(2,second.getItemID());
  assertEquals(0.5f,second.getValue(),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecommendedBecause() throws Exception {
  ItemBasedRecommender recommender=buildRecommender2();
  List<RecommendedItem> recommendedBecause=recommender.recommendedBecause(1,4,3);
  assertNotNull(recommendedBecause);
  assertEquals(3,recommendedBecause.size());
  RecommendedItem first=recommendedBecause.get(0);
  RecommendedItem second=recommendedBecause.get(1);
  RecommendedItem third=recommendedBecause.get(2);
  assertEquals(2,first.getItemID());
  assertEquals(0.99f,first.getValue(),EPSILON);
  assertEquals(3,second.getItemID());
  assertEquals(0.4f,second.getValue(),EPSILON);
  assertEquals(0,third.getItemID());
  assertEquals(0.2f,third.getValue(),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMostSimilarToMultipleExcludeIfNotSimilarToAll() throws Exception {
  ItemBasedRecommender recommender=buildRecommender2();
  List<RecommendedItem> similar=recommender.mostSimilarItems(new long[]{3,4},2);
  assertNotNull(similar);
  assertEquals(1,similar.size());
  RecommendedItem first=similar.get(0);
  assertEquals(0,first.getItemID());
  assertEquals(0.2f,first.getValue(),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecommender() throws Exception {
  Recommender recommender=buildRecommender();
  List<RecommendedItem> recommended=recommender.recommend(1,1);
  assertNotNull(recommended);
  assertEquals(1,recommended.size());
  RecommendedItem firstRecommended=recommended.get(0);
  assertEquals(2,firstRecommended.getItemID());
  assertEquals(0.1f,firstRecommended.getValue(),EPSILON);
  recommender.refresh(null);
  recommended=recommender.recommend(1,1);
  firstRecommended=recommended.get(0);
  assertEquals(2,firstRecommended.getItemID());
  assertEquals(0.1f,firstRecommended.getValue(),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMostSimilarToMultiple() throws Exception {
  ItemBasedRecommender recommender=buildRecommender2();
  List<RecommendedItem> similar=recommender.mostSimilarItems(new long[]{0,1},2);
  assertNotNull(similar);
  assertEquals(2,similar.size());
  RecommendedItem first=similar.get(0);
  RecommendedItem second=similar.get(1);
  assertEquals(2,first.getItemID());
  assertEquals(0.85f,first.getValue(),EPSILON);
  assertEquals(3,second.getItemID());
  assertEquals(-0.3f,second.getValue(),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Contributed test case that verifies fix for bug
 * <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1396128&amp;group_id=138771&amp;atid=741665">
 * 1396128</a>.
 */
@Test public void testBestRating() throws Exception {
  Recommender recommender=buildRecommender();
  List<RecommendedItem> recommended=recommender.recommend(1,1);
  assertNotNull(recommended);
  assertEquals(1,recommended.size());
  RecommendedItem firstRecommended=recommended.get(0);
  assertEquals(2,firstRecommended.getItemID());
  assertEquals(0.1f,firstRecommended.getValue(),EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.recommender.GenericUserBasedRecommenderTest </h4><pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBestRating() throws Exception {
  Recommender recommender=buildRecommender();
  List<RecommendedItem> recommended=recommender.recommend(1,1);
  assertNotNull(recommended);
  assertEquals(1,recommended.size());
  RecommendedItem firstRecommended=recommended.get(0);
  assertEquals(2,firstRecommended.getItemID());
  assertEquals(0.1f,firstRecommended.getValue(),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecommender() throws Exception {
  Recommender recommender=buildRecommender();
  List<RecommendedItem> recommended=recommender.recommend(1,1);
  assertNotNull(recommended);
  assertEquals(1,recommended.size());
  RecommendedItem firstRecommended=recommended.get(0);
  assertEquals(2,firstRecommended.getItemID());
  assertEquals(0.1f,firstRecommended.getValue(),EPSILON);
  recommender.refresh(null);
  assertEquals(2,firstRecommended.getItemID());
  assertEquals(0.1f,firstRecommended.getValue(),EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.recommender.ItemAverageRecommenderTest </h4><pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecommender() throws Exception {
  Recommender recommender=new ItemAverageRecommender(getDataModel());
  List<RecommendedItem> recommended=recommender.recommend(1,1);
  assertNotNull(recommended);
  assertEquals(1,recommended.size());
  RecommendedItem firstRecommended=recommended.get(0);
  assertEquals(2,firstRecommended.getItemID());
  assertEquals(0.53333336f,firstRecommended.getValue(),EPSILON);
  recommender.refresh(null);
  assertEquals(2,firstRecommended.getItemID());
  assertEquals(0.53333336f,firstRecommended.getValue(),EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.recommender.ItemUserAverageRecommenderTest </h4><pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecommender() throws Exception {
  Recommender recommender=new ItemUserAverageRecommender(getDataModel());
  List<RecommendedItem> recommended=recommender.recommend(1,1);
  assertNotNull(recommended);
  assertEquals(1,recommended.size());
  RecommendedItem firstRecommended=recommended.get(0);
  assertEquals(2,firstRecommended.getItemID());
  assertEquals(0.35151517f,firstRecommended.getValue(),EPSILON);
  recommender.refresh(null);
  assertEquals(2,firstRecommended.getItemID());
  assertEquals(0.35151517f,firstRecommended.getValue(),EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.recommender.RandomRecommenderTest </h4><pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRecommender() throws Exception {
  Recommender recommender=new RandomRecommender(getDataModel());
  List<RecommendedItem> recommended=recommender.recommend(1,1);
  assertNotNull(recommended);
  assertEquals(1,recommended.size());
  RecommendedItem firstRecommended=recommended.get(0);
  assertEquals(2,firstRecommended.getItemID());
  recommender.refresh(null);
  assertEquals(2,firstRecommended.getItemID());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.recommender.TopItemsTest </h4><pre class="type-3 type-2 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTopItemsRandom() throws Exception {
  long[] ids=new long[100];
  for (int i=0; i < 100; i++) {
    ids[i]=i;
  }
  LongPrimitiveIterator possibleItemIds=new LongPrimitiveArrayIterator(ids);
  final Random random=RandomUtils.getRandom();
  TopItems.Estimator<Long> estimator=new TopItems.Estimator<Long>(){
    @Override public double estimate(    Long thing){
      return random.nextDouble();
    }
  }
;
  List<RecommendedItem> topItems=TopItems.getTopItems(10,possibleItemIds,null,estimator);
  assertEquals(10,topItems.size());
  double last=2.0;
  for (  RecommendedItem topItem : topItems) {
    assertTrue(topItem.getValue() <= last);
    last=topItem.getItemID();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.impl.recommender.svd.ALSWRFactorizerTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void ratingVector() throws Exception {
  PreferenceArray prefs=dataModel.getPreferencesFromUser(1);
  Vector ratingVector=ALSWRFactorizer.ratingVector(prefs);
  assertEquals(prefs.length(),ratingVector.getNumNondefaultElements());
  assertEquals(prefs.get(0).getValue(),ratingVector.get(0),EPSILON);
  assertEquals(prefs.get(1).getValue(),ratingVector.get(1),EPSILON);
  assertEquals(prefs.get(2).getValue(),ratingVector.get(2),EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.cf.taste.similarity.precompute.SimilarItemsTest </h4><pre class="type-3 type-5 type-4 type-14 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIterator(){
  List<RecommendedItem> recommendedItems=new ArrayList<>();
  for (long itemId=2; itemId < 10; itemId++) {
    recommendedItems.add(new GenericRecommendedItem(itemId,itemId));
  }
  SimilarItems similarItems=new SimilarItems(1,recommendedItems);
  assertThat(similarItems.getSimilarItems(),Matchers.<SimilarItem>iterableWithSize(recommendedItems.size()));
  int byHandIndex=0;
  for (  SimilarItem simItem : similarItems.getSimilarItems()) {
    RecommendedItem recItem=recommendedItems.get(byHandIndex++);
    assertEquals(simItem.getItemID(),recItem.getItemID());
    assertEquals(simItem.getSimilarity(),recItem.getValue(),EPSILON);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.ConfusionMatrixTest </h4><pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMatrix(){
  ConfusionMatrix confusionMatrix=fillConfusionMatrix(VALUES,LABELS,DEFAULT_LABEL);
  Matrix m=confusionMatrix.getMatrix();
  Map<String,Integer> rowLabels=m.getRowLabelBindings();
  assertEquals(confusionMatrix.getLabels().size(),m.numCols());
  assertTrue(rowLabels.keySet().contains(LABELS[0]));
  assertTrue(rowLabels.keySet().contains(LABELS[1]));
  assertTrue(rowLabels.keySet().contains(DEFAULT_LABEL));
  assertEquals(2,confusionMatrix.getCorrect(LABELS[0]));
  assertEquals(20,confusionMatrix.getCorrect(LABELS[1]));
  assertEquals(0,confusionMatrix.getCorrect(DEFAULT_LABEL));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.DecisionForestTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testClassify() throws DescriptorException {
  Data[] datas=generateTrainingDataA();
  DecisionForest forest=buildForest(datas);
  Dataset dataset=datas[0].getDataset();
  Data testData=DataLoader.loadData(dataset,TEST_DATA);
  double noValue=dataset.valueOf(4,"no");
  double yesValue=dataset.valueOf(4,"yes");
  assertEquals(noValue,forest.classify(testData.getDataset(),rng,testData.get(0)),EPSILON);
  assertEquals(noValue,forest.classify(testData.getDataset(),rng,testData.get(2)),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testClassifyData() throws DescriptorException {
  Data[] datas=generateTrainingDataA();
  DecisionForest forest=buildForest(datas);
  Dataset dataset=datas[0].getDataset();
  Data testData=DataLoader.loadData(dataset,TEST_DATA);
  double[][] predictions=new double[testData.size()][];
  forest.classify(testData,predictions);
  double noValue=dataset.valueOf(4,"no");
  double yesValue=dataset.valueOf(4,"yes");
  assertArrayEquals(new double[][]{{noValue,Double.NaN,Double.NaN},{noValue,yesValue,Double.NaN},{noValue,noValue,Double.NaN}},predictions);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.builder.DecisionTreeBuilderTest </h4><pre class="type-11 type-3 type-2 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * make sure that DecisionTreeBuilder.randomAttributes() returns the correct number of attributes, that have not been
 * selected yet
 */
@Test public void testRandomAttributes() throws Exception {
  Random rng=RandomUtils.getRandom();
  int nbAttributes=rng.nextInt(100) + 1;
  boolean[] selected=new boolean[nbAttributes];
  for (int nloop=0; nloop < 100; nloop++) {
    Arrays.fill(selected,false);
    int nbSelected=rng.nextInt(nbAttributes - 1);
    for (int index=0; index < nbSelected; index++) {
      int attr;
      do {
        attr=rng.nextInt(nbAttributes);
      }
 while (selected[attr]);
      selected[attr]=true;
    }
    int m=rng.nextInt(nbAttributes);
    Method randomAttributes=DecisionTreeBuilder.class.getDeclaredMethod("randomAttributes",Random.class,boolean[].class,int.class);
    randomAttributes.setAccessible(true);
    int[] attrs=(int[])randomAttributes.invoke(null,rng,selected,m);
    assertNotNull(attrs);
    assertEquals(Math.min(m,nbAttributes - nbSelected),attrs.length);
    for (    int attr : attrs) {
      assertFalse("an attribute has already been selected",selected[attr]);
      assertTrue(attr >= 0);
      assertTrue(attr < nbAttributes);
      assertEquals(ArrayUtils.indexOf(attrs,attr),ArrayUtils.lastIndexOf(attrs,attr));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.builder.DefaultTreeBuilderTest </h4><pre class="type-11 type-3 type-2 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * make sure that DefaultTreeBuilder.randomAttributes() returns the correct number of attributes, that have not been
 * selected yet
 */
@Test public void testRandomAttributes() throws Exception {
  Random rng=RandomUtils.getRandom();
  int nbAttributes=rng.nextInt(100) + 1;
  boolean[] selected=new boolean[nbAttributes];
  for (int nloop=0; nloop < 100; nloop++) {
    Arrays.fill(selected,false);
    int nbSelected=rng.nextInt(nbAttributes - 1);
    for (int index=0; index < nbSelected; index++) {
      int attr;
      do {
        attr=rng.nextInt(nbAttributes);
      }
 while (selected[attr]);
      selected[attr]=true;
    }
    int m=rng.nextInt(nbAttributes);
    int[] attrs=DefaultTreeBuilder.randomAttributes(rng,selected,m);
    assertNotNull(attrs);
    assertEquals(Math.min(m,nbAttributes - nbSelected),attrs.length);
    for (    int attr : attrs) {
      assertFalse("an attribute has already been selected",selected[attr]);
      assertTrue(attr >= 0);
      assertTrue(attr < nbAttributes);
      assertEquals(ArrayUtils.indexOf(attrs,attr),ArrayUtils.lastIndexOf(attrs,attr));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.data.DataConverterTest </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConvert() throws Exception {
  Random rng=RandomUtils.getRandom();
  String descriptor=Utils.randomDescriptor(rng,ATTRIBUTE_COUNT);
  double[][] source=Utils.randomDoubles(rng,descriptor,false,INSTANCE_COUNT);
  String[] sData=Utils.double2String(source);
  Dataset dataset=DataLoader.generateDataset(descriptor,false,sData);
  Data data=DataLoader.loadData(dataset,sData);
  DataConverter converter=new DataConverter(dataset);
  for (int index=0; index < data.size(); index++) {
    assertEquals(data.get(index),converter.convert(sData[index]));
  }
  source=Utils.randomDoubles(rng,descriptor,true,INSTANCE_COUNT);
  sData=Utils.double2String(source);
  dataset=DataLoader.generateDataset(descriptor,true,sData);
  data=DataLoader.loadData(dataset,sData);
  converter=new DataConverter(dataset);
  for (int index=0; index < data.size(); index++) {
    assertEquals(data.get(index),converter.convert(sData[index]));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.data.DataLoaderTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test method for{@link DataLoader#generateDataset(CharSequence,boolean,String[])}
 */
@Test public void testGenerateDataset() throws Exception {
  int nbAttributes=10;
  int datasize=100;
  String descriptor=Utils.randomDescriptor(rng,nbAttributes);
  Attribute[] attrs=DescriptorUtils.parseDescriptor(descriptor);
  double[][] data=Utils.randomDoubles(rng,descriptor,false,datasize);
  Collection<Integer> missings=Lists.newArrayList();
  String[] sData=prepareData(data,attrs,missings);
  Dataset expected=DataLoader.generateDataset(descriptor,false,sData);
  Dataset dataset=DataLoader.generateDataset(descriptor,false,sData);
  assertEquals(expected,dataset);
  data=Utils.randomDoubles(rng,descriptor,true,datasize);
  missings=Lists.newArrayList();
  sData=prepareData(data,attrs,missings);
  expected=DataLoader.generateDataset(descriptor,true,sData);
  dataset=DataLoader.generateDataset(descriptor,true,sData);
  assertEquals(expected,dataset);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test method for{@link DataLoader#generateDataset(CharSequence,boolean,FileSystem,Path)}
 */
@Test public void testGenerateDatasetFromFile() throws Exception {
  int nbAttributes=10;
  int datasize=100;
  String descriptor=Utils.randomDescriptor(rng,nbAttributes);
  Attribute[] attrs=DescriptorUtils.parseDescriptor(descriptor);
  double[][] source=Utils.randomDoubles(rng,descriptor,false,datasize);
  Collection<Integer> missings=Lists.newArrayList();
  String[] sData=prepareData(source,attrs,missings);
  Dataset expected=DataLoader.generateDataset(descriptor,false,sData);
  Path path=Utils.writeDataToTestFile(sData);
  FileSystem fs=path.getFileSystem(getConfiguration());
  Dataset dataset=DataLoader.generateDataset(descriptor,false,fs,path);
  assertEquals(expected,dataset);
  source=Utils.randomDoubles(rng,descriptor,false,datasize);
  missings=Lists.newArrayList();
  sData=prepareData(source,attrs,missings);
  expected=DataLoader.generateDataset(descriptor,false,sData);
  path=Utils.writeDataToTestFile(sData);
  fs=path.getFileSystem(getConfiguration());
  dataset=DataLoader.generateDataset(descriptor,false,fs,path);
  assertEquals(expected,dataset);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.data.DataTest </h4><pre class="type-11 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIdenticalFalse() throws Exception {
  int n=10;
  for (int nloop=0; nloop < n; nloop++) {
    Data data=Utils.randomData(rng,ATTRIBUTE_COUNT,false,DATA_SIZE);
    int index=rng.nextInt(DATA_SIZE);
    Instance instance=data.get(index);
    int attr=rng.nextInt(data.getDataset().nbAttributes());
    instance.set(attr,instance.get(attr) + 1);
    assertFalse(data.isIdentical());
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIdenticalTrue() throws Exception {
  Dataset dataset=Utils.randomData(rng,ATTRIBUTE_COUNT,false,1).getDataset();
  Data empty=new Data(dataset);
  assertTrue(empty.isIdentical());
  Data identical=Utils.randomData(rng,ATTRIBUTE_COUNT,false,DATA_SIZE);
  Instance model=identical.get(0);
  for (int index=1; index < DATA_SIZE; index++) {
    for (int attr=0; attr < identical.getDataset().nbAttributes(); attr++) {
      identical.get(index).set(attr,model.get(attr));
    }
  }
  assertTrue(identical.isIdentical());
}

</code></pre>

<br>
<pre class="type-11 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIdenticalLabelFalse() throws Exception {
  int n=10;
  for (int nloop=0; nloop < n; nloop++) {
    String descriptor=Utils.randomDescriptor(rng,ATTRIBUTE_COUNT);
    int label=Utils.findLabel(descriptor);
    double[][] source=Utils.randomDoublesWithSameLabel(rng,descriptor,false,DATA_SIZE,rng.nextInt());
    int index=rng.nextInt(DATA_SIZE);
    source[index][label]++;
    String[] sData=Utils.double2String(source);
    Dataset dataset=DataLoader.generateDataset(descriptor,false,sData);
    Data data=DataLoader.loadData(dataset,sData);
    assertFalse(data.identicalLabel());
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIdenticalLabelTrue() throws Exception {
  Dataset dataset=Utils.randomData(rng,ATTRIBUTE_COUNT,false,1).getDataset();
  Data empty=new Data(dataset);
  assertTrue(empty.identicalLabel());
  String descriptor=Utils.randomDescriptor(rng,ATTRIBUTE_COUNT);
  double[][] source=Utils.randomDoublesWithSameLabel(rng,descriptor,false,DATA_SIZE,rng.nextInt());
  String[] sData=Utils.double2String(source);
  dataset=DataLoader.generateDataset(descriptor,false,sData);
  Data data=DataLoader.loadData(dataset,sData);
  assertTrue(data.identicalLabel());
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for{@link org.apache.mahout.classifier.df.data.Data#rsplit(java.util.Random,int)}.
 */
@Test public void testRsplit(){
  Data source=classifierData.clone();
  Data subset=source.rsplit(rng,0);
  assertTrue("subset should be empty",subset.isEmpty());
  assertEquals("source.size is incorrect",DATA_SIZE,source.size());
  source=classifierData.clone();
  subset=source.rsplit(rng,DATA_SIZE);
  assertEquals("subset.size is incorrect",DATA_SIZE,subset.size());
  assertTrue("source should be empty",source.isEmpty());
  int subsize=rng.nextInt(DATA_SIZE);
  source=classifierData.clone();
  subset=source.rsplit(rng,subsize);
  assertEquals("subset.size is incorrect",subsize,subset.size());
  assertEquals("source.size is incorrect",DATA_SIZE - subsize,source.size());
  source=regressionData.clone();
  subset=source.rsplit(rng,0);
  assertTrue("subset should be empty",subset.isEmpty());
  assertEquals("source.size is incorrect",DATA_SIZE,source.size());
  source=regressionData.clone();
  subset=source.rsplit(rng,DATA_SIZE);
  assertEquals("subset.size is incorrect",DATA_SIZE,subset.size());
  assertTrue("source should be empty",source.isEmpty());
  subsize=rng.nextInt(DATA_SIZE);
  source=regressionData.clone();
  subset=source.rsplit(rng,subsize);
  assertEquals("subset.size is incorrect",subsize,subset.size());
  assertEquals("source.size is incorrect",DATA_SIZE - subsize,source.size());
}

</code></pre>

<br>
<pre class="type-11 type-3 type-8 type-2 type-5 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies values related to public fields.
"></span><br>
/** 
 * Test method for{@link org.apache.mahout.classifier.df.data.Data#subset(org.apache.mahout.classifier.df.data.conditions.Condition)}.
 */
@Test public void testSubset(){
  int n=10;
  for (int nloop=0; nloop < n; nloop++) {
    int attr=rng.nextInt(classifierData.getDataset().nbAttributes());
    double[] values=classifierData.values(attr);
    double value=values[rng.nextInt(values.length)];
    Data eSubset=classifierData.subset(Condition.equals(attr,value));
    Data lSubset=classifierData.subset(Condition.lesser(attr,value));
    Data gSubset=classifierData.subset(Condition.greaterOrEquals(attr,value));
    for (int index=0; index < DATA_SIZE; index++) {
      Instance instance=classifierData.get(index);
      if (instance.get(attr) < value) {
        assertTrue(lSubset.contains(instance));
        assertFalse(eSubset.contains(instance));
        assertFalse(gSubset.contains(instance));
      }
 else       if (instance.get(attr) == value) {
        assertFalse(lSubset.contains(instance));
        assertTrue(eSubset.contains(instance));
        assertTrue(gSubset.contains(instance));
      }
 else {
        assertFalse(lSubset.contains(instance));
        assertFalse(eSubset.contains(instance));
        assertTrue(gSubset.contains(instance));
      }
    }
    attr=rng.nextInt(regressionData.getDataset().nbAttributes());
    values=regressionData.values(attr);
    value=values[rng.nextInt(values.length)];
    eSubset=regressionData.subset(Condition.equals(attr,value));
    lSubset=regressionData.subset(Condition.lesser(attr,value));
    gSubset=regressionData.subset(Condition.greaterOrEquals(attr,value));
    for (int index=0; index < DATA_SIZE; index++) {
      Instance instance=regressionData.get(index);
      if (instance.get(attr) < value) {
        assertTrue(lSubset.contains(instance));
        assertFalse(eSubset.contains(instance));
        assertFalse(gSubset.contains(instance));
      }
 else       if (instance.get(attr) == value) {
        assertFalse(lSubset.contains(instance));
        assertTrue(eSubset.contains(instance));
        assertTrue(gSubset.contains(instance));
      }
 else {
        assertFalse(lSubset.contains(instance));
        assertFalse(eSubset.contains(instance));
        assertTrue(gSubset.contains(instance));
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMajorityLabel() throws Exception {
  String descriptor=Utils.randomDescriptor(rng,ATTRIBUTE_COUNT);
  int label=Utils.findLabel(descriptor);
  int label1=rng.nextInt();
  double[][] source=Utils.randomDoublesWithSameLabel(rng,descriptor,false,100,label1);
  String[] sData=Utils.double2String(source);
  Dataset dataset=DataLoader.generateDataset(descriptor,false,sData);
  Data data=DataLoader.loadData(dataset,sData);
  int code1=dataset.labelCode(Double.toString(label1));
  assertEquals(code1,data.majorityLabel(rng));
  int label2=label1 + 1;
  int nblabel2=51;
  while (nblabel2 > 0) {
    double[] vector=source[rng.nextInt(100)];
    if (vector[label] != label2) {
      vector[label]=label2;
      nblabel2--;
    }
  }
  sData=Utils.double2String(source);
  dataset=DataLoader.generateDataset(descriptor,false,sData);
  data=DataLoader.loadData(dataset,sData);
  int code2=dataset.labelCode(Double.toString(label2));
  assertEquals(code2,data.majorityLabel(rng));
  do {
    double[] vector=source[rng.nextInt(100)];
    if (vector[label] == label2) {
      vector[label]=label1;
      break;
    }
  }
 while (true);
  sData=Utils.double2String(source);
  data=DataLoader.loadData(dataset,sData);
  code1=dataset.labelCode(Double.toString(label1));
  code2=dataset.labelCode(Double.toString(label2));
  boolean found1=false;
  boolean found2=false;
  for (int index=0; index < 10 && (!found1 || !found2); index++) {
    int major=data.majorityLabel(rng);
    if (major == code1) {
      found1=true;
    }
    if (major == code2) {
      found2=true;
    }
  }
  assertTrue(found1 && found2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.data.DescriptorUtilsTest </h4><pre class="type-11 type-3 type-8 type-2 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for{@link org.apache.mahout.classifier.df.data.DescriptorUtils#parseDescriptor(java.lang.CharSequence)}.
 */
@Test public void testParseDescriptor() throws Exception {
  int n=10;
  int maxnbAttributes=100;
  Random rng=RandomUtils.getRandom();
  for (int nloop=0; nloop < n; nloop++) {
    int nbAttributes=rng.nextInt(maxnbAttributes) + 1;
    char[] tokens=Utils.randomTokens(rng,nbAttributes);
    Attribute[] attrs=DescriptorUtils.parseDescriptor(Utils.generateDescriptor(tokens));
    assertEquals("attributes size",nbAttributes,attrs.length);
    for (int attr=0; attr < nbAttributes; attr++) {
switch (tokens[attr]) {
case 'I':
        assertTrue(attrs[attr].isIgnored());
      break;
case 'N':
    assertTrue(attrs[attr].isNumerical());
  break;
case 'C':
assertTrue(attrs[attr].isCategorical());
break;
case 'L':
assertTrue(attrs[attr].isLabel());
break;
}
}
}
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.mapreduce.inmem.InMemInputFormatTest </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRecordReader() throws Exception {
  int n=1;
  int maxNumSplits=100;
  int maxNbTrees=1000;
  Random rng=RandomUtils.getRandom();
  for (int nloop=0; nloop < n; nloop++) {
    int numSplits=rng.nextInt(maxNumSplits) + 1;
    int nbTrees=rng.nextInt(maxNbTrees) + 1;
    Configuration conf=getConfiguration();
    Builder.setNbTrees(conf,nbTrees);
    InMemInputFormat inputFormat=new InMemInputFormat();
    List<InputSplit> splits=inputFormat.getSplits(conf,numSplits);
    for (int index=0; index < numSplits; index++) {
      InMemInputSplit split=(InMemInputSplit)splits.get(index);
      InMemRecordReader reader=new InMemRecordReader(split);
      reader.initialize(split,null);
      for (int tree=0; tree < split.getNbTrees(); tree++) {
        assertEquals(tree < split.getNbTrees(),reader.nextKeyValue());
        assertEquals(split.getFirstId() + tree,reader.getCurrentKey().get());
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-8 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplits() throws Exception {
  int n=1;
  int maxNumSplits=100;
  int maxNbTrees=1000;
  Random rng=RandomUtils.getRandom();
  for (int nloop=0; nloop < n; nloop++) {
    int numSplits=rng.nextInt(maxNumSplits) + 1;
    int nbTrees=rng.nextInt(maxNbTrees) + 1;
    Configuration conf=getConfiguration();
    Builder.setNbTrees(conf,nbTrees);
    InMemInputFormat inputFormat=new InMemInputFormat();
    List<InputSplit> splits=inputFormat.getSplits(conf,numSplits);
    assertEquals(numSplits,splits.size());
    int nbTreesPerSplit=nbTrees / numSplits;
    int totalTrees=0;
    int expectedId=0;
    for (int index=0; index < numSplits; index++) {
      assertTrue(splits.get(index) instanceof InMemInputSplit);
      InMemInputSplit split=(InMemInputSplit)splits.get(index);
      assertEquals(expectedId,split.getFirstId());
      if (index < numSplits - 1) {
        assertEquals(nbTreesPerSplit,split.getNbTrees());
      }
 else {
        assertEquals(nbTrees - totalTrees,split.getNbTrees());
      }
      totalTrees+=split.getNbTrees();
      expectedId+=split.getNbTrees();
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.mapreduce.inmem.InMemInputSplitTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Make sure that all the fields are processed correctly
 */
@Test public void testWritable() throws Exception {
  InMemInputSplit split=new InMemInputSplit(rng.nextInt(),rng.nextInt(1000),rng.nextLong());
  split.write(out);
  assertEquals(split,readSplit());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * test the case seed == null
 */
@Test public void testNullSeed() throws Exception {
  InMemInputSplit split=new InMemInputSplit(rng.nextInt(),rng.nextInt(1000),null);
  split.write(out);
  assertEquals(split,readSplit());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.mapreduce.partial.Step1MapperTest </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@SuppressWarnings({"rawtypes","unchecked"}) @Test public void testMapper() throws Exception {
  Random rng=RandomUtils.getRandom();
  String descriptor=Utils.randomDescriptor(rng,NUM_ATTRIBUTES);
  double[][] source=Utils.randomDoubles(rng,descriptor,false,NUM_INSTANCES);
  String[] sData=Utils.double2String(source);
  Dataset dataset=DataLoader.generateDataset(descriptor,false,sData);
  String[][] splits=Utils.splitData(sData,NUM_MAPPERS);
  MockTreeBuilder treeBuilder=new MockTreeBuilder();
  LongWritable key=new LongWritable();
  Text value=new Text();
  int treeIndex=0;
  for (int partition=0; partition < NUM_MAPPERS; partition++) {
    String[] split=splits[partition];
    treeBuilder.setExpected(DataLoader.loadData(dataset,split));
    int mapNbTrees=Step1Mapper.nbTrees(NUM_MAPPERS,NUM_TREES,partition);
    Mapper.Context context=EasyMock.createNiceMock(Mapper.Context.class);
    Capture<TreeID> capturedKeys=new TreeIDCapture();
    context.write(EasyMock.capture(capturedKeys),EasyMock.anyObject());
    EasyMock.expectLastCall().anyTimes();
    EasyMock.replay(context);
    MockStep1Mapper mapper=new MockStep1Mapper(treeBuilder,dataset,null,partition,NUM_MAPPERS,NUM_TREES);
    assertEquals(treeIndex,mapper.getFirstTreeId());
    for (int index=0; index < split.length; index++) {
      key.set(index);
      value.set(split[index]);
      mapper.map(key,value,context);
    }
    mapper.cleanup(context);
    EasyMock.verify(context);
    assertEquals(mapNbTrees,capturedKeys.getValues().size());
    for (    TreeID k : capturedKeys.getValues()) {
      assertEquals(partition,k.partition());
      assertEquals(treeIndex,k.treeId());
      treeIndex++;
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.mapreduce.partial.TreeIDTest </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTreeID(){
  Random rng=RandomUtils.getRandom();
  for (int nloop=0; nloop < 1000000; nloop++) {
    int partition=Math.abs(rng.nextInt());
    int treeId=rng.nextInt(TreeID.MAX_TREEID);
    TreeID t1=new TreeID(partition,treeId);
    assertEquals(partition,t1.partition());
    assertEquals(treeId,t1.treeId());
    TreeID t2=new TreeID();
    t2.set(partition,treeId);
    assertEquals(partition,t2.partition());
    assertEquals(treeId,t2.treeId());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.node.NodeTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test method for{@link org.apache.mahout.classifier.df.node.Node#read(java.io.DataInput)}.
 */
@Test public void testReadTree() throws Exception {
  Node node1=new CategoricalNode(rng.nextInt(),new double[]{rng.nextDouble(),rng.nextDouble()},new Node[]{new Leaf(rng.nextDouble()),new Leaf(rng.nextDouble())});
  Node node2=new NumericalNode(rng.nextInt(),rng.nextDouble(),new Leaf(rng.nextDouble()),new Leaf(rng.nextDouble()));
  Node root=new CategoricalNode(rng.nextInt(),new double[]{rng.nextDouble(),rng.nextDouble(),rng.nextDouble()},new Node[]{node1,node2,new Leaf(rng.nextDouble())});
  root.write(out);
  assertEquals(root,readNode());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCategoricalNode() throws Exception {
  Node node=new CategoricalNode(rng.nextInt(),new double[]{rng.nextDouble(),rng.nextDouble(),rng.nextDouble()},new Node[]{new Leaf(rng.nextDouble()),new Leaf(rng.nextDouble()),new Leaf(rng.nextDouble())});
  node.write(out);
  assertEquals(node,readNode());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testReadLeaf() throws Exception {
  Node leaf=new Leaf(rng.nextDouble());
  leaf.write(out);
  assertEquals(leaf,readNode());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testParseNumerical() throws Exception {
  Node node=new NumericalNode(rng.nextInt(),rng.nextDouble(),new Leaf(rng.nextInt()),new Leaf(rng.nextDouble()));
  node.write(out);
  assertEquals(node,readNode());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.split.DefaultIgSplitTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEntropy() throws Exception {
  Random rng=RandomUtils.getRandom();
  String descriptor=Utils.randomDescriptor(rng,NUM_ATTRIBUTES);
  int label=Utils.findLabel(descriptor);
  double[][] temp=Utils.randomDoublesWithSameLabel(rng,descriptor,false,100,0);
  String[] sData=Utils.double2String(temp);
  Dataset dataset=DataLoader.generateDataset(descriptor,false,sData);
  Data data=DataLoader.loadData(dataset,sData);
  DefaultIgSplit iG=new DefaultIgSplit();
  double expected=0.0 - 1.0 * Math.log(1.0) / Math.log(2.0);
  assertEquals(expected,iG.entropy(data),EPSILON);
  for (int index=0; index < 50; index++) {
    temp[index][label]=1.0;
  }
  sData=Utils.double2String(temp);
  dataset=DataLoader.generateDataset(descriptor,false,sData);
  data=DataLoader.loadData(dataset,sData);
  iG=new DefaultIgSplit();
  expected=2.0 * -0.5 * Math.log(0.5) / Math.log(2.0);
  assertEquals(expected,iG.entropy(data),EPSILON);
  for (int index=0; index < 15; index++) {
    temp[index][label]=2.0;
  }
  sData=Utils.double2String(temp);
  dataset=DataLoader.generateDataset(descriptor,false,sData);
  data=DataLoader.loadData(dataset,sData);
  iG=new DefaultIgSplit();
  expected=-0.15 * Math.log(0.15) / Math.log(2.0) - 0.35 * Math.log(0.35) / Math.log(2.0) - 0.5 * Math.log(0.5) / Math.log(2.0);
  assertEquals(expected,iG.entropy(data),EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.df.tools.VisualizerTest </h4><pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testForestVisualize() throws Exception {
  NumericalNode root=new NumericalNode(2,90,new Leaf(0),new CategoricalNode(0,new double[]{0,1,2},new Node[]{new NumericalNode(1,71,new Leaf(0),new Leaf(1)),new Leaf(1),new Leaf(0)}));
  List<Node> trees=new ArrayList<>();
  trees.add(root);
  DecisionForest forest=new DecisionForest(trees);
  String visualization=ForestVisualizer.toString(forest,trainingData.getDataset(),null);
  assertTrue(("Tree[1]:\n2 < 90 : yes\n2 >= 90\n" + "|   0 = rainy\n" + "|   |   1 < 71 : yes\n"+ "|   |   1 >= 71 : no\n"+ "|   0 = sunny : no\n"+ "|   0 = overcast : yes\n").equals(visualization) || ("Tree[1]:\n" + "2 < 90 : no\n" + "2 >= 90\n"+ "|   0 = rainy\n"+ "|   |   1 < 71 : no\n"+ "|   |   1 >= 71 : yes\n"+ "|   0 = overcast : yes\n"+ "|   0 = sunny : no\n").equals(visualization));
  visualization=ForestVisualizer.toString(forest,trainingData.getDataset(),ATTRIBUTE_NAMES);
  assertTrue(("Tree[1]:\n" + "humidity < 90 : yes\n" + "humidity >= 90\n"+ "|   outlook = rainy\n"+ "|   |   temperature < 71 : yes\n"+ "|   |   temperature >= 71 : no\n"+ "|   outlook = sunny : no\n"+ "|   outlook = overcast : yes\n").equals(visualization) || ("Tree[1]:\n" + "humidity < 90 : no\n" + "humidity >= 90\n"+ "|   outlook = rainy\n"+ "|   |   temperature < 71 : no\n"+ "|   |   temperature >= 71 : yes\n"+ "|   outlook = overcast : yes\n"+ "|   outlook = sunny : no\n").equals(visualization));
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPredictTrace() throws Exception {
  DecisionTreeBuilder builder=new DecisionTreeBuilder();
  builder.setM(trainingData.getDataset().nbAttributes() - 1);
  Node tree=builder.build(randomNumberGenerator,trainingData);
  String[] prediction=TreeVisualizer.predictTrace(tree,testData,ATTRIBUTE_NAMES);
  Assert.assertArrayEquals(new String[]{"outlook = rainy -> windy = TRUE -> no","outlook = overcast -> yes",String.format("outlook = sunny -> (humidity = 90) >= 77%s5 -> no",DECIMAL_SEPARATOR)},prediction);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testLeafless() throws Exception {
  List<Instance> instances=new ArrayList<>();
  for (int i=0; i < trainingData.size(); i++) {
    if (trainingData.get(i).get(0) != 0.0d) {
      instances.add(trainingData.get(i));
    }
  }
  Data lessData=new Data(trainingData.getDataset(),instances);
  DecisionTreeBuilder builder=new DecisionTreeBuilder();
  builder.setM(trainingData.getDataset().nbAttributes() - 1);
  builder.setMinSplitNum(0);
  builder.setComplemented(false);
  Node tree=builder.build(randomNumberGenerator,lessData);
  String visualization=TreeVisualizer.toString(tree,trainingData.getDataset(),ATTRIBUTE_NAMES);
  assertTrue((String.format("\noutlook = sunny\n" + "|   humidity < 77%s5 : yes\n" + "|   humidity >= 77%s5 : no\n"+ "outlook = overcast : yes",DECIMAL_SEPARATOR,DECIMAL_SEPARATOR)).equals(visualization) || (String.format("\noutlook = overcast : yes\n" + "outlook = sunny\n" + "|   humidity < 77%s5 : yes\n"+ "|   humidity >= 77%s5 : no",DECIMAL_SEPARATOR,DECIMAL_SEPARATOR)).equals(visualization));
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testTreeVisualize() throws Exception {
  DecisionTreeBuilder builder=new DecisionTreeBuilder();
  builder.setM(trainingData.getDataset().nbAttributes() - 1);
  Node tree=builder.build(randomNumberGenerator,trainingData);
  String visualization=TreeVisualizer.toString(tree,trainingData.getDataset(),ATTRIBUTE_NAMES);
  assertTrue((String.format("\n" + "outlook = rainy\n" + "|   windy = FALSE : yes\n"+ "|   windy = TRUE : no\n"+ "outlook = sunny\n"+ "|   humidity < 77%s5 : yes\n"+ "|   humidity >= 77%s5 : no\n"+ "outlook = overcast : yes",DECIMAL_SEPARATOR,DECIMAL_SEPARATOR)).equals(visualization) || (String.format("\n" + "outlook = rainy\n" + "|   windy = TRUE : no\n"+ "|   windy = FALSE : yes\n"+ "outlook = overcast : yes\n"+ "outlook = sunny\n"+ "|   humidity < 77%s5 : yes\n"+ "|   humidity >= 77%s5 : no",DECIMAL_SEPARATOR,DECIMAL_SEPARATOR)).equals(visualization));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.naivebayes.NaiveBayesTest </h4><pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void toyData() throws Exception {
  TrainNaiveBayesJob trainNaiveBayes=new TrainNaiveBayesJob();
  trainNaiveBayes.setConf(conf);
  trainNaiveBayes.run(new String[]{"--input",inputFile.getAbsolutePath(),"--output",outputDir.getAbsolutePath(),"--tempDir",tempDir.getAbsolutePath()});
  NaiveBayesModel naiveBayesModel=NaiveBayesModel.materialize(new Path(outputDir.getAbsolutePath()),conf);
  AbstractVectorClassifier classifier=new StandardNaiveBayesClassifier(naiveBayesModel);
  assertEquals(2,classifier.numCategories());
  Vector prediction=classifier.classifyFull(trainingInstance(COLOR_RED,TYPE_SUV,ORIGIN_DOMESTIC).get());
  assertTrue(prediction.get(0) < prediction.get(1));
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void toyDataComplementary() throws Exception {
  TrainNaiveBayesJob trainNaiveBayes=new TrainNaiveBayesJob();
  trainNaiveBayes.setConf(conf);
  trainNaiveBayes.run(new String[]{"--input",inputFile.getAbsolutePath(),"--output",outputDir.getAbsolutePath(),"--trainComplementary","--tempDir",tempDir.getAbsolutePath()});
  NaiveBayesModel naiveBayesModel=NaiveBayesModel.materialize(new Path(outputDir.getAbsolutePath()),conf);
  AbstractVectorClassifier classifier=new ComplementaryNaiveBayesClassifier(naiveBayesModel);
  assertEquals(2,classifier.numCategories());
  Vector prediction=classifier.classifyFull(trainingInstance(COLOR_RED,TYPE_SUV,ORIGIN_DOMESTIC).get());
  assertTrue(prediction.get(0) < prediction.get(1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.sequencelearning.hmm.HMMEvaluatorTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test to make sure the computed model likelihood ist valid. Included tests
 * are: a) forwad == backward likelihood b) model likelihood for test seqeunce
 * is the expected one from R reference
 */
@Test public void testScaledModelLikelihood(){
  Matrix alpha=HmmAlgorithms.forwardAlgorithm(getModel(),getSequence(),true);
  Matrix beta=HmmAlgorithms.backwardAlgorithm(getModel(),getSequence(),true);
  double forwardLikelihood=HmmEvaluator.modelLikelihood(alpha,true);
  double backwardLikelihood=HmmEvaluator.modelLikelihood(getModel(),getSequence(),beta,true);
  assertEquals(forwardLikelihood,backwardLikelihood,EPSILON);
  assertEquals(1.8425e-4,forwardLikelihood,EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test to make sure the computed model likelihood ist valid. Included tests
 * are: a) forwad == backward likelihood b) model likelihood for test seqeunce
 * is the expected one from R reference
 */
@Test public void testModelLikelihood(){
  Matrix alpha=HmmAlgorithms.forwardAlgorithm(getModel(),getSequence(),false);
  Matrix beta=HmmAlgorithms.backwardAlgorithm(getModel(),getSequence(),false);
  double forwardLikelihood=HmmEvaluator.modelLikelihood(alpha,false);
  double backwardLikelihood=HmmEvaluator.modelLikelihood(getModel(),getSequence(),beta,false);
  assertEquals(forwardLikelihood,backwardLikelihood,EPSILON);
  assertEquals(1.8425e-4,forwardLikelihood,EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.sequencelearning.hmm.HMMTrainerTest </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBaumWelchTraining(){
  int[] observed={1,0,2,2,0,0,1,1,1,0,2,0,1,0,0};
  double[] initialExpected={0,0,1.0,0};
  double[][] transitionExpected={{0.2319,0.0993,0.0005,0.6683},{0.0001,0.3345,0.6654,0},{0.5975,0,0.4025,0},{0.0024,0.6657,0,0.3319}};
  double[][] emissionExpected={{0.9995,0.0004,0.0001},{0.9943,0.0036,0.0021},{0.0059,0.9941,0},{0,0,1}};
  HmmModel trained=HmmTrainer.trainBaumWelch(getModel(),observed,0.1,10,false);
  Vector initialProbabilities=trained.getInitialProbabilities();
  Matrix emissionMatrix=trained.getEmissionMatrix();
  Matrix transitionMatrix=trained.getTransitionMatrix();
  for (int i=0; i < trained.getNrOfHiddenStates(); ++i) {
    assertEquals(initialProbabilities.get(i),initialExpected[i],0.0001);
    for (int j=0; j < trained.getNrOfHiddenStates(); ++j) {
      assertEquals(transitionMatrix.getQuick(i,j),transitionExpected[i][j],0.0001);
    }
    for (int j=0; j < trained.getNrOfOutputStates(); ++j) {
      assertEquals(emissionMatrix.getQuick(i,j),emissionExpected[i][j],0.0001);
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testScaledBaumWelchTraining(){
  int[] observed={1,0,2,2,0,0,1,1,1,0,2,0,1,0,0};
  double[] initialExpected={0,0,1.0,0};
  double[][] transitionExpected={{0.2319,0.0993,0.0005,0.6683},{0.0001,0.3345,0.6654,0},{0.5975,0,0.4025,0},{0.0024,0.6657,0,0.3319}};
  double[][] emissionExpected={{0.9995,0.0004,0.0001},{0.9943,0.0036,0.0021},{0.0059,0.9941,0},{0,0,1}};
  HmmModel trained=HmmTrainer.trainBaumWelch(getModel(),observed,0.1,10,true);
  Vector initialProbabilities=trained.getInitialProbabilities();
  Matrix emissionMatrix=trained.getEmissionMatrix();
  Matrix transitionMatrix=trained.getTransitionMatrix();
  for (int i=0; i < trained.getNrOfHiddenStates(); ++i) {
    assertEquals(initialProbabilities.get(i),initialExpected[i],0.0001);
    for (int j=0; j < trained.getNrOfHiddenStates(); ++j) {
      assertEquals(transitionMatrix.getQuick(i,j),transitionExpected[i][j],0.0001);
    }
    for (int j=0; j < trained.getNrOfOutputStates(); ++j) {
      assertEquals(emissionMatrix.getQuick(i,j),emissionExpected[i][j],0.0001);
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testScaledViterbiTraining(){
  double[][] transitionE={{0.3125,0.0625,0.3125,0.3125},{0.25,0.25,0.25,0.25},{0.5,0.071429,0.357143,0.071429},{0.5,0.1,0.1,0.3}};
  double[][] emissionE={{0.882353,0.058824,0.058824},{0.333333,0.333333,0.3333333},{0.076923,0.846154,0.076923},{0.111111,0.111111,0.777778}};
  int[] observed={1,0,2,2,0,0,1,1,1,0,2,0,1,0,0};
  HmmModel trained=HmmTrainer.trainViterbi(getModel(),observed,0.5,0.1,10,true);
  Matrix emissionMatrix=trained.getEmissionMatrix();
  Matrix transitionMatrix=trained.getTransitionMatrix();
  for (int i=0; i < trained.getNrOfHiddenStates(); ++i) {
    for (int j=0; j < trained.getNrOfHiddenStates(); ++j) {
      assertEquals(transitionMatrix.getQuick(i,j),transitionE[i][j],EPSILON);
    }
    for (int j=0; j < trained.getNrOfOutputStates(); ++j) {
      assertEquals(emissionMatrix.getQuick(i,j),emissionE[i][j],EPSILON);
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testViterbiTraining(){
  double[][] transitionE={{0.3125,0.0625,0.3125,0.3125},{0.25,0.25,0.25,0.25},{0.5,0.071429,0.357143,0.071429},{0.5,0.1,0.1,0.3}};
  double[][] emissionE={{0.882353,0.058824,0.058824},{0.333333,0.333333,0.3333333},{0.076923,0.846154,0.076923},{0.111111,0.111111,0.777778}};
  int[] observed={1,0,2,2,0,0,1,1,1,0,2,0,1,0,0};
  HmmModel trained=HmmTrainer.trainViterbi(getModel(),observed,0.5,0.1,10,false);
  Matrix emissionMatrix=trained.getEmissionMatrix();
  Matrix transitionMatrix=trained.getTransitionMatrix();
  for (int i=0; i < trained.getNrOfHiddenStates(); ++i) {
    for (int j=0; j < trained.getNrOfHiddenStates(); ++j) {
      assertEquals(transitionMatrix.getQuick(i,j),transitionE[i][j],EPSILON);
    }
    for (int j=0; j < trained.getNrOfOutputStates(); ++j) {
      assertEquals(emissionMatrix.getQuick(i,j),emissionE[i][j],EPSILON);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.sequencelearning.hmm.HMMUtilsTest </h4><pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDecodeStateSequence(){
  int[] hiddenSequence={1,2,0,3,10};
  int[] outputSequence={1,2,10,0};
  List<String> hiddenSequenceDec=HmmUtils.decodeStateSequence(getModel(),hiddenSequence,false,"unknown");
  List<String> outputSequenceDec=HmmUtils.decodeStateSequence(getModel(),outputSequence,true,"unknown");
  String[] hiddenSequenceExp={"H1","H2","H0","H3","unknown"};
  String[] outputSequenceExp={"O1","O2","unknown","O0"};
  for (int i=0; i < hiddenSequenceExp.length; ++i) {
    assertEquals(hiddenSequenceExp[i],hiddenSequenceDec.get(i));
  }
  for (int i=0; i < outputSequenceExp.length; ++i) {
    assertEquals(outputSequenceExp[i],outputSequenceDec.get(i));
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-8 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTruncateModel(){
  DenseVector ip=new DenseVector(new double[]{0.0001,0.0001,0.9998});
  DenseMatrix tr=new DenseMatrix(new double[][]{{0.9998,0.0001,0.0001},{0.0001,0.9998,0.0001},{0.0001,0.0001,0.9998}});
  DenseMatrix em=new DenseMatrix(new double[][]{{0.9998,0.0001,0.0001},{0.0001,0.9998,0.0001},{0.0001,0.0001,0.9998}});
  HmmModel model=new HmmModel(tr,em,ip);
  HmmModel sparseModel=HmmUtils.truncateModel(model,0.01);
  HmmUtils.validate(sparseModel);
  Vector sparse_ip=sparseModel.getInitialProbabilities();
  Matrix sparse_tr=sparseModel.getTransitionMatrix();
  Matrix sparse_em=sparseModel.getEmissionMatrix();
  for (int i=0; i < sparseModel.getNrOfHiddenStates(); ++i) {
    assertEquals(i == 2 ? 1.0 : 0.0,sparse_ip.getQuick(i),EPSILON);
    for (int j=0; j < sparseModel.getNrOfHiddenStates(); ++j) {
      if (i == j) {
        assertEquals(1.0,sparse_tr.getQuick(i,j),EPSILON);
        assertEquals(1.0,sparse_em.getQuick(i,j),EPSILON);
      }
 else {
        assertEquals(0.0,sparse_tr.getQuick(i,j),EPSILON);
        assertEquals(0.0,sparse_em.getQuick(i,j),EPSILON);
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEncodeStateSequence(){
  String[] hiddenSequence={"H1","H2","H0","H3","H4"};
  String[] outputSequence={"O1","O2","O4","O0"};
  int[] hiddenSequenceEnc=HmmUtils.encodeStateSequence(getModel(),Arrays.asList(hiddenSequence),false,-1);
  int[] outputSequenceEnc=HmmUtils.encodeStateSequence(getModel(),Arrays.asList(outputSequence),true,-1);
  int[] hiddenSequenceExp={1,2,0,3,-1};
  int[] outputSequenceExp={1,2,-1,0};
  for (int i=0; i < hiddenSequenceEnc.length; ++i) {
    assertEquals(hiddenSequenceExp[i],hiddenSequenceEnc[i]);
  }
  for (int i=0; i < outputSequenceEnc.length; ++i) {
    assertEquals(outputSequenceExp[i],outputSequenceEnc[i]);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.sgd.ModelSerializerTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void onlineAucRoundtrip() throws IOException {
  RandomUtils.useTestSeed();
  OnlineAuc auc1=new GlobalOnlineAuc();
  Random gen=RandomUtils.getRandom();
  for (int i=0; i < 10000; i++) {
    auc1.addSample(0,gen.nextGaussian());
    auc1.addSample(1,gen.nextGaussian() + 1);
  }
  assertEquals(0.76,auc1.auc(),0.01);
  OnlineAuc auc3=roundTrip(auc1,OnlineAuc.class);
  assertEquals(auc1.auc(),auc3.auc(),0);
  for (int i=0; i < 1000; i++) {
    auc1.addSample(0,gen.nextGaussian());
    auc1.addSample(1,gen.nextGaussian() + 1);
    auc3.addSample(0,gen.nextGaussian());
    auc3.addSample(1,gen.nextGaussian() + 1);
  }
  assertEquals(auc1.auc(),auc3.auc(),0.01);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@ThreadLeakLingering(linger=1000) @Test public void adaptiveLogisticRegressionRoundTrip() throws IOException {
  AdaptiveLogisticRegression learner=new AdaptiveLogisticRegression(2,5,new L1());
  learner.setInterval(200);
  train(learner,400);
  AdaptiveLogisticRegression olr3=roundTrip(learner,AdaptiveLogisticRegression.class);
  double auc1=learner.auc();
  assertTrue(auc1 > 0.85);
  assertEquals(auc1,learner.auc(),1.0e-6);
  assertEquals(auc1,olr3.auc(),1.0e-6);
  train(learner,1000);
  train(learner,1000);
  train(olr3,1000);
  assertEquals(learner.auc(),learner.auc(),0.005);
  assertEquals(learner.auc(),olr3.auc(),0.005);
  double auc2=learner.auc();
  assertTrue(String.format("%.3f > %.3f",auc2,auc1),auc2 > auc1);
  learner.close();
  olr3.close();
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void onlineLogisticRegressionRoundTrip() throws IOException {
  OnlineLogisticRegression olr=new OnlineLogisticRegression(2,5,new L1());
  train(olr,100);
  OnlineLogisticRegression olr3=roundTrip(olr,OnlineLogisticRegression.class);
  assertEquals(0,olr.getBeta().minus(olr3.getBeta()).aggregate(Functions.MAX,Functions.IDENTITY),1.0e-6);
  train(olr,100);
  train(olr3,100);
  assertEquals(0,olr.getBeta().minus(olr3.getBeta()).aggregate(Functions.MAX,Functions.IDENTITY),1.0e-6);
  olr.close();
  olr3.close();
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void crossFoldLearnerRoundTrip() throws IOException {
  CrossFoldLearner learner=new CrossFoldLearner(5,2,5,new L1());
  train(learner,100);
  CrossFoldLearner olr3=roundTrip(learner,CrossFoldLearner.class);
  double auc1=learner.auc();
  assertTrue(auc1 > 0.85);
  assertEquals(auc1,learner.auc(),1.0e-6);
  assertEquals(auc1,olr3.auc(),1.0e-6);
  train(learner,100);
  train(learner,100);
  train(olr3,100);
  assertEquals(learner.auc(),learner.auc(),0.02);
  assertEquals(learner.auc(),olr3.auc(),0.02);
  double auc2=learner.auc();
  assertTrue(auc2 > auc1);
  learner.close();
  olr3.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.sgd.OnlineLogisticRegressionTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test for Serialization/DeSerialization
 */
@Test public void testSerializationAndDeSerialization() throws Exception {
  OnlineLogisticRegression lr=new OnlineLogisticRegression(2,8,new L1()).lambda(1 * 1.0e-3).stepOffset(11).alpha(0.01).learningRate(50).decayExponent(-0.02);
  lr.close();
  byte[] output;
  try (ByteArrayOutputStream byteArrayOutputStream=new ByteArrayOutputStream();DataOutputStream dataOutputStream=new DataOutputStream(byteArrayOutputStream)){
    PolymorphicWritable.write(dataOutputStream,lr);
    output=byteArrayOutputStream.toByteArray();
  }
   OnlineLogisticRegression read;
  try (ByteArrayInputStream byteArrayInputStream=new ByteArrayInputStream(output);DataInputStream dataInputStream=new DataInputStream(byteArrayInputStream)){
    read=PolymorphicWritable.read(dataInputStream,OnlineLogisticRegression.class);
  }
   Assert.assertEquals((1.0e-3),read.getLambda(),1.0e-7);
  Field stepOffset=lr.getClass().getDeclaredField("stepOffset");
  stepOffset.setAccessible(true);
  int stepOffsetVal=(Integer)stepOffset.get(lr);
  Assert.assertEquals(11,stepOffsetVal);
  Field decayFactor=lr.getClass().getDeclaredField("decayFactor");
  decayFactor.setAccessible(true);
  double decayFactorVal=(Double)decayFactor.get(lr);
  Assert.assertEquals(0.01,decayFactorVal,1.0e-7);
  Field mu0=lr.getClass().getDeclaredField("mu0");
  mu0.setAccessible(true);
  double mu0Val=(Double)mu0.get(lr);
  Assert.assertEquals(50,mu0Val,1.0e-7);
  Field forgettingExponent=lr.getClass().getDeclaredField("forgettingExponent");
  forgettingExponent.setAccessible(true);
  double forgettingExponentVal=(Double)forgettingExponent.get(lr);
  Assert.assertEquals(-0.02,forgettingExponentVal,1.0e-7);
}

</code></pre>

<br>
<pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void iris() throws IOException {
  RandomUtils.useTestSeed();
  Splitter onComma=Splitter.on(",");
  List<String> raw=Resources.readLines(Resources.getResource("iris.csv"),Charsets.UTF_8);
  List<Vector> data=Lists.newArrayList();
  List<Integer> target=Lists.newArrayList();
  Dictionary dict=new Dictionary();
  List<Integer> order=Lists.newArrayList();
  for (  String line : raw.subList(1,raw.size())) {
    order.add(order.size());
    Vector v=new DenseVector(5);
    v.set(0,1);
    int i=1;
    Iterable<String> values=onComma.split(line);
    for (    String value : Iterables.limit(values,4)) {
      v.set(i++,Double.parseDouble(value));
    }
    data.add(v);
    target.add(dict.intern(Iterables.get(values,4)));
  }
  Random random=RandomUtils.getRandom();
  Collections.shuffle(order,random);
  List<Integer> train=order.subList(0,100);
  List<Integer> test=order.subList(100,150);
  logger.warn("Training set = {}",train);
  logger.warn("Test set = {}",test);
  int[] correct=new int[test.size() + 1];
  for (int run=0; run < 200; run++) {
    OnlineLogisticRegression lr=new OnlineLogisticRegression(3,5,new L2(1));
    for (int pass=0; pass < 30; pass++) {
      Collections.shuffle(train,random);
      for (      int k : train) {
        lr.train(target.get(k),data.get(k));
      }
    }
    int x=0;
    int[] count=new int[3];
    for (    Integer k : test) {
      int r=lr.classifyFull(data.get(k)).maxValueIndex();
      count[r]++;
      x+=r == target.get(k) ? 1 : 0;
    }
    correct[x]++;
  }
  for (int i=0; i < Math.floor(0.95 * test.size()); i++) {
    assertEquals(String.format("%d trials had unacceptable accuracy of only %.0f%%: ",correct[i],100.0 * i / test.size()),0,correct[i]);
  }
  assertEquals(String.format("%d trials had unrealistic accuracy of 100%%",correct[test.size() - 1]),0,correct[test.size()]);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.classifier.sgd.TrainLogisticTest </h4><pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void example132() throws Exception {
  String outputFile=getTestTempFile("model").getAbsolutePath();
  StringWriter sw=new StringWriter();
  PrintWriter pw=new PrintWriter(sw,true);
  TrainLogistic.mainToOutput(new String[]{"--input","donut.csv","--output",outputFile,"--target","color","--categories","2","--predictors","x","y","a","b","c","--types","numeric","--features","20","--passes","100","--rate","50"},pw);
  String trainOut=sw.toString();
  assertTrue(trainOut.contains("a 0."));
  assertTrue(trainOut.contains("b -1."));
  assertTrue(trainOut.contains("c -25."));
  sw=new StringWriter();
  pw=new PrintWriter(sw,true);
  RunLogistic.mainToOutput(new String[]{"--input","donut.csv","--model",outputFile,"--auc","--confusion"},pw);
  trainOut=sw.toString();
  assertTrue(trainOut.contains("AUC = 1.00"));
  sw=new StringWriter();
  pw=new PrintWriter(sw,true);
  RunLogistic.mainToOutput(new String[]{"--input","donut-test.csv","--model",outputFile,"--auc","--confusion"},pw);
  trainOut=sw.toString();
  assertTrue(trainOut.contains("AUC = 0.9"));
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void example131() throws Exception {
  String outputFile=getTestTempFile("model").getAbsolutePath();
  StringWriter sw=new StringWriter();
  PrintWriter pw=new PrintWriter(sw,true);
  TrainLogistic.mainToOutput(new String[]{"--input","donut.csv","--output",outputFile,"--target","color","--categories","2","--predictors","x","y","--types","numeric","--features","20","--passes","100","--rate","50"},pw);
  String trainOut=sw.toString();
  assertTrue(trainOut.contains("x -0.7"));
  assertTrue(trainOut.contains("y -0.4"));
  LogisticModelParameters lmp=TrainLogistic.getParameters();
  assertEquals(1.0e-4,lmp.getLambda(),1.0e-9);
  assertEquals(20,lmp.getNumFeatures());
  assertTrue(lmp.useBias());
  assertEquals("color",lmp.getTargetVariable());
  CsvRecordFactory csv=lmp.getCsvRecordFactory();
  assertEquals("[1, 2]",new TreeSet<>(csv.getTargetCategories()).toString());
  assertEquals("[Intercept Term, x, y]",Sets.newTreeSet(csv.getPredictors()).toString());
  AbstractVectorClassifier model=TrainLogistic.getModel();
  List<String> data=Resources.readLines(Resources.getResource("donut.csv"),Charsets.UTF_8);
  Map<String,Double> expectedValues=ImmutableMap.of("x",-0.7,"y",-0.43,"Intercept Term",-0.15);
  verifyModel(lmp,csv,data,model,expectedValues);
  try (InputStream in=new FileInputStream(new File(outputFile))){
    LogisticModelParameters lmpOut=LogisticModelParameters.loadFrom(in);
    CsvRecordFactory csvOut=lmpOut.getCsvRecordFactory();
    csvOut.firstLine(data.get(0));
    OnlineLogisticRegression lrOut=lmpOut.createRegression();
    verifyModel(lmpOut,csvOut,data,lrOut,expectedValues);
  }
   sw=new StringWriter();
  pw=new PrintWriter(sw,true);
  RunLogistic.mainToOutput(new String[]{"--input","donut.csv","--model",outputFile,"--auc","--confusion"},pw);
  trainOut=sw.toString();
  assertTrue(trainOut.contains("AUC = 0.57"));
  assertTrue(trainOut.contains("confusion: [[27.0, 13.0], [0.0, 0.0]]"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.canopy.TestCanopyCreation </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Story: User can produce final canopy centers using a
 * EuclideanDistanceMeasure and a CanopyReducer which clusters input centroid
 * points to produce an output set of final canopy centroid points.
 */
@Test public void testCanopyReducerEuclidean() throws Exception {
  CanopyReducer reducer=new CanopyReducer();
  Configuration conf=getConfiguration();
  conf.set(CanopyConfigKeys.DISTANCE_MEASURE_KEY,"org.apache.mahout.common.distance.EuclideanDistanceMeasure");
  conf.set(CanopyConfigKeys.T1_KEY,String.valueOf(3.1));
  conf.set(CanopyConfigKeys.T2_KEY,String.valueOf(2.1));
  conf.set(CanopyConfigKeys.CF_KEY,"0");
  DummyRecordWriter<Text,ClusterWritable> writer=new DummyRecordWriter<Text,ClusterWritable>();
  Reducer<Text,VectorWritable,Text,ClusterWritable>.Context context=DummyRecordWriter.build(reducer,conf,writer,Text.class,VectorWritable.class);
  reducer.setup(context);
  List<VectorWritable> points=getPointsWritable();
  reducer.reduce(new Text("centroid"),points,context);
  Iterable<Text> keys=writer.getKeysInInsertionOrder();
  assertEquals("Number of centroids",3,Iterables.size(keys));
  int i=0;
  for (  Text key : keys) {
    List<ClusterWritable> data=writer.getValue(key);
    ClusterWritable clusterWritable=data.get(0);
    Canopy canopy=(Canopy)clusterWritable.getValue();
    assertEquals(euclideanCentroids.get(i).asFormatString() + " is not equal to " + canopy.computeCentroid().asFormatString(),euclideanCentroids.get(i),canopy.computeCentroid());
    i++;
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Story: User can produce final canopy centers using a Hadoop map/reduce job
 * and a EuclideanDistanceMeasure.
 */
@Test public void testCanopyGenEuclideanMR() throws Exception {
  List<VectorWritable> points=getPointsWritable();
  Configuration config=getConfiguration();
  ClusteringTestUtils.writePointsToFile(points,getTestTempFilePath("testdata/file1"),fs,config);
  ClusteringTestUtils.writePointsToFile(points,getTestTempFilePath("testdata/file2"),fs,config);
  Path output=getTestTempDirPath("output");
  CanopyDriver.run(config,getTestTempDirPath("testdata"),output,euclideanDistanceMeasure,3.1,2.1,false,0.0,false);
  Path path=new Path(output,"clusters-0-final/part-r-00000");
  FileSystem fs=FileSystem.get(path.toUri(),config);
  SequenceFile.Reader reader=new SequenceFile.Reader(fs,path,config);
  try {
    Writable key=new Text();
    ClusterWritable clusterWritable=new ClusterWritable();
    assertTrue("more to come",reader.next(key,clusterWritable));
    assertEquals("1st key","C-0",key.toString());
    List<Pair<Double,Double>> refCenters=Lists.newArrayList();
    refCenters.add(new Pair<Double,Double>(1.8,1.8));
    refCenters.add(new Pair<Double,Double>(4.433333333333334,4.433333333333334));
    Pair<Double,Double> c=new Pair<Double,Double>(clusterWritable.getValue().getCenter().get(0),clusterWritable.getValue().getCenter().get(1));
    assertTrue("center " + c + " not found",findAndRemove(c,refCenters,EPSILON));
    assertTrue("more to come",reader.next(key,clusterWritable));
    assertEquals("2nd key","C-1",key.toString());
    c=new Pair<Double,Double>(clusterWritable.getValue().getCenter().get(0),clusterWritable.getValue().getCenter().get(1));
    assertTrue("center " + c + " not found",findAndRemove(c,refCenters,EPSILON));
    assertFalse("more to come",reader.next(key,clusterWritable));
  }
  finally {
    Closeables.close(reader,true);
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Story: User can cluster points using a ManhattanDistanceMeasure and a
 * reference implementation
 */
@Test public void testReferenceManhattan() throws Exception {
  printCanopies(referenceManhattan);
  assertEquals("number of canopies",3,referenceManhattan.size());
  for (int canopyIx=0; canopyIx < referenceManhattan.size(); canopyIx++) {
    Canopy testCanopy=referenceManhattan.get(canopyIx);
    int[] expectedNumPoints={4,4,3};
    double[][] expectedCentroids={{1.5,1.5},{4.0,4.0},{4.666666666666667,4.6666666666666667}};
    assertEquals("canopy points " + canopyIx,testCanopy.getNumObservations(),expectedNumPoints[canopyIx]);
    double[] refCentroid=expectedCentroids[canopyIx];
    Vector testCentroid=testCanopy.computeCentroid();
    for (int pointIx=0; pointIx < refCentroid.length; pointIx++) {
      assertEquals("canopy centroid " + canopyIx + '['+ pointIx+ ']',refCentroid[pointIx],testCentroid.get(pointIx),EPSILON);
    }
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Story: User can produce final point clustering using a Hadoop map/reduce
 * job and a EuclideanDistanceMeasure and outlier removal threshold.
 */
@Test public void testClusteringEuclideanWithOutlierRemovalMR() throws Exception {
  List<VectorWritable> points=getPointsWritable();
  Configuration conf=getConfiguration();
  ClusteringTestUtils.writePointsToFile(points,true,getTestTempFilePath("testdata/file1"),fs,conf);
  ClusteringTestUtils.writePointsToFile(points,true,getTestTempFilePath("testdata/file2"),fs,conf);
  Path output=getTestTempDirPath("output");
  String[] args={optKey(DefaultOptionCreator.INPUT_OPTION),getTestTempDirPath("testdata").toString(),optKey(DefaultOptionCreator.OUTPUT_OPTION),output.toString(),optKey(DefaultOptionCreator.DISTANCE_MEASURE_OPTION),EuclideanDistanceMeasure.class.getName(),optKey(DefaultOptionCreator.T1_OPTION),"3.1",optKey(DefaultOptionCreator.T2_OPTION),"2.1",optKey(DefaultOptionCreator.OUTLIER_THRESHOLD),"0.7",optKey(DefaultOptionCreator.CLUSTERING_OPTION),optKey(DefaultOptionCreator.OVERWRITE_OPTION)};
  ToolRunner.run(getConfiguration(),new CanopyDriver(),args);
  Path path=new Path(output,"clusteredPoints/part-m-00000");
  long count=HadoopUtil.countRecords(path,conf);
  int expectedPointsAfterOutlierRemoval=8;
  assertEquals("number of points",expectedPointsAfterOutlierRemoval,count);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Story: User can remove outliers while clustering points using sequential execution 
 */
@Test public void testClusteringEuclideanWithOutlierRemovalSeq() throws Exception {
  List<VectorWritable> points=getPointsWritable();
  Configuration config=getConfiguration();
  ClusteringTestUtils.writePointsToFile(points,getTestTempFilePath("testdata/file1"),fs,config);
  Path output=getTestTempDirPath("output");
  String[] args={optKey(DefaultOptionCreator.INPUT_OPTION),getTestTempDirPath("testdata").toString(),optKey(DefaultOptionCreator.OUTPUT_OPTION),output.toString(),optKey(DefaultOptionCreator.DISTANCE_MEASURE_OPTION),EuclideanDistanceMeasure.class.getName(),optKey(DefaultOptionCreator.T1_OPTION),"3.1",optKey(DefaultOptionCreator.T2_OPTION),"2.1",optKey(DefaultOptionCreator.OUTLIER_THRESHOLD),"0.5",optKey(DefaultOptionCreator.CLUSTERING_OPTION),optKey(DefaultOptionCreator.OVERWRITE_OPTION),optKey(DefaultOptionCreator.METHOD_OPTION),DefaultOptionCreator.SEQUENTIAL_METHOD};
  ToolRunner.run(config,new CanopyDriver(),args);
  Path path=new Path(output,"clusters-0-final/part-r-00000");
  int ix=0;
  for (  ClusterWritable clusterWritable : new SequenceFileValueIterable<ClusterWritable>(path,true,config)) {
    assertEquals("Center [" + ix + ']',euclideanCentroids.get(ix),clusterWritable.getValue().getCenter());
    ix++;
  }
  path=new Path(output,"clusteredPoints/part-m-0");
  long count=HadoopUtil.countRecords(path,config);
  int expectedPointsHavingPDFGreaterThanThreshold=6;
  assertEquals("number of points",expectedPointsHavingPDFGreaterThanThreshold,count);
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Story: User can cluster points using a EuclideanDistanceMeasure and a
 * reference implementation
 */
@Test public void testReferenceEuclidean() throws Exception {
  printCanopies(referenceEuclidean);
  assertEquals("number of canopies",3,referenceEuclidean.size());
  int[] expectedNumPoints={5,5,3};
  double[][] expectedCentroids={{1.8,1.8},{4.2,4.2},{4.666666666666667,4.666666666666667}};
  for (int canopyIx=0; canopyIx < referenceEuclidean.size(); canopyIx++) {
    Canopy testCanopy=referenceEuclidean.get(canopyIx);
    assertEquals("canopy points " + canopyIx,testCanopy.getNumObservations(),expectedNumPoints[canopyIx]);
    double[] refCentroid=expectedCentroids[canopyIx];
    Vector testCentroid=testCanopy.computeCentroid();
    for (int pointIx=0; pointIx < refCentroid.length; pointIx++) {
      assertEquals("canopy centroid " + canopyIx + '['+ pointIx+ ']',refCentroid[pointIx],testCentroid.get(pointIx),EPSILON);
    }
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Story: User can produce final canopy centers using a
 * ManhattanDistanceMeasure and a CanopyReducer which clusters input centroid
 * points to produce an output set of final canopy centroid points.
 */
@Test public void testCanopyReducerManhattan() throws Exception {
  CanopyReducer reducer=new CanopyReducer();
  Configuration conf=getConfiguration();
  conf.set(CanopyConfigKeys.DISTANCE_MEASURE_KEY,"org.apache.mahout.common.distance.ManhattanDistanceMeasure");
  conf.set(CanopyConfigKeys.T1_KEY,String.valueOf(3.1));
  conf.set(CanopyConfigKeys.T2_KEY,String.valueOf(2.1));
  conf.set(CanopyConfigKeys.CF_KEY,"0");
  DummyRecordWriter<Text,ClusterWritable> writer=new DummyRecordWriter<Text,ClusterWritable>();
  Reducer<Text,VectorWritable,Text,ClusterWritable>.Context context=DummyRecordWriter.build(reducer,conf,writer,Text.class,VectorWritable.class);
  reducer.setup(context);
  List<VectorWritable> points=getPointsWritable();
  reducer.reduce(new Text("centroid"),points,context);
  Iterable<Text> keys=writer.getKeysInInsertionOrder();
  assertEquals("Number of centroids",3,Iterables.size(keys));
  int i=0;
  for (  Text key : keys) {
    List<ClusterWritable> data=writer.getValue(key);
    ClusterWritable clusterWritable=data.get(0);
    Canopy canopy=(Canopy)clusterWritable.getValue();
    assertEquals(manhattanCentroids.get(i).asFormatString() + " is not equal to " + canopy.computeCentroid().asFormatString(),manhattanCentroids.get(i),canopy.computeCentroid());
    i++;
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Story: User can produce final point clustering using a Hadoop map/reduce
 * job and a ManhattanDistanceMeasure.
 */
@Test public void testClusteringManhattanMR() throws Exception {
  List<VectorWritable> points=getPointsWritable();
  Configuration conf=getConfiguration();
  ClusteringTestUtils.writePointsToFile(points,true,getTestTempFilePath("testdata/file1"),fs,conf);
  ClusteringTestUtils.writePointsToFile(points,true,getTestTempFilePath("testdata/file2"),fs,conf);
  Path output=getTestTempDirPath("output");
  CanopyDriver.run(conf,getTestTempDirPath("testdata"),output,manhattanDistanceMeasure,3.1,2.1,true,0.0,false);
  Path path=new Path(output,"clusteredPoints/part-m-00000");
  long count=HadoopUtil.countRecords(path,conf);
  assertEquals("number of points",points.size(),count);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Story: User can cluster points using sequential execution 
 */
@Test public void testClusteringManhattanSeq() throws Exception {
  List<VectorWritable> points=getPointsWritable();
  Configuration config=getConfiguration();
  ClusteringTestUtils.writePointsToFile(points,getTestTempFilePath("testdata/file1"),fs,config);
  Path output=getTestTempDirPath("output");
  CanopyDriver.run(config,getTestTempDirPath("testdata"),output,manhattanDistanceMeasure,3.1,2.1,true,0.0,true);
  Path path=new Path(output,"clusters-0-final/part-r-00000");
  int ix=0;
  for (  ClusterWritable clusterWritable : new SequenceFileValueIterable<ClusterWritable>(path,true,config)) {
    assertEquals("Center [" + ix + ']',manhattanCentroids.get(ix),clusterWritable.getValue().getCenter());
    ix++;
  }
  path=new Path(output,"clusteredPoints/part-m-0");
  long count=HadoopUtil.countRecords(path,config);
  assertEquals("number of points",points.size(),count);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Story: User can produce final point clustering using a Hadoop map/reduce
 * job and a EuclideanDistanceMeasure.
 */
@Test public void testClusteringEuclideanMR() throws Exception {
  List<VectorWritable> points=getPointsWritable();
  Configuration conf=getConfiguration();
  ClusteringTestUtils.writePointsToFile(points,true,getTestTempFilePath("testdata/file1"),fs,conf);
  ClusteringTestUtils.writePointsToFile(points,true,getTestTempFilePath("testdata/file2"),fs,conf);
  Path output=getTestTempDirPath("output");
  String[] args={optKey(DefaultOptionCreator.INPUT_OPTION),getTestTempDirPath("testdata").toString(),optKey(DefaultOptionCreator.OUTPUT_OPTION),output.toString(),optKey(DefaultOptionCreator.DISTANCE_MEASURE_OPTION),EuclideanDistanceMeasure.class.getName(),optKey(DefaultOptionCreator.T1_OPTION),"3.1",optKey(DefaultOptionCreator.T2_OPTION),"2.1",optKey(DefaultOptionCreator.CLUSTERING_OPTION),optKey(DefaultOptionCreator.OVERWRITE_OPTION)};
  ToolRunner.run(getConfiguration(),new CanopyDriver(),args);
  Path path=new Path(output,"clusteredPoints/part-m-00000");
  long count=HadoopUtil.countRecords(path,conf);
  assertEquals("number of points",points.size(),count);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Story: User can produce final canopy centers using a Hadoop map/reduce job
 * and a ManhattanDistanceMeasure.
 */
@Test public void testCanopyGenManhattanMR() throws Exception {
  List<VectorWritable> points=getPointsWritable();
  Configuration config=getConfiguration();
  ClusteringTestUtils.writePointsToFile(points,getTestTempFilePath("testdata/file1"),fs,config);
  ClusteringTestUtils.writePointsToFile(points,getTestTempFilePath("testdata/file2"),fs,config);
  Path output=getTestTempDirPath("output");
  CanopyDriver.run(config,getTestTempDirPath("testdata"),output,manhattanDistanceMeasure,3.1,2.1,false,0.0,false);
  Path path=new Path(output,"clusters-0-final/part-r-00000");
  FileSystem fs=FileSystem.get(path.toUri(),config);
  SequenceFile.Reader reader=new SequenceFile.Reader(fs,path,config);
  try {
    Writable key=new Text();
    ClusterWritable clusterWritable=new ClusterWritable();
    assertTrue("more to come",reader.next(key,clusterWritable));
    assertEquals("1st key","C-0",key.toString());
    List<Pair<Double,Double>> refCenters=Lists.newArrayList();
    refCenters.add(new Pair<Double,Double>(1.5,1.5));
    refCenters.add(new Pair<Double,Double>(4.333333333333334,4.333333333333334));
    Pair<Double,Double> c=new Pair<Double,Double>(clusterWritable.getValue().getCenter().get(0),clusterWritable.getValue().getCenter().get(1));
    assertTrue("center " + c + " not found",findAndRemove(c,refCenters,EPSILON));
    assertTrue("more to come",reader.next(key,clusterWritable));
    assertEquals("2nd key","C-1",key.toString());
    c=new Pair<Double,Double>(clusterWritable.getValue().getCenter().get(0),clusterWritable.getValue().getCenter().get(1));
    assertTrue("center " + c + " not found",findAndRemove(c,refCenters,EPSILON));
    assertFalse("more to come",reader.next(key,clusterWritable));
  }
  finally {
    Closeables.close(reader,true);
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Story: User can cluster points using sequential execution 
 */
@Test public void testClusteringEuclideanSeq() throws Exception {
  List<VectorWritable> points=getPointsWritable();
  Configuration config=getConfiguration();
  ClusteringTestUtils.writePointsToFile(points,getTestTempFilePath("testdata/file1"),fs,config);
  Path output=getTestTempDirPath("output");
  String[] args={optKey(DefaultOptionCreator.INPUT_OPTION),getTestTempDirPath("testdata").toString(),optKey(DefaultOptionCreator.OUTPUT_OPTION),output.toString(),optKey(DefaultOptionCreator.DISTANCE_MEASURE_OPTION),EuclideanDistanceMeasure.class.getName(),optKey(DefaultOptionCreator.T1_OPTION),"3.1",optKey(DefaultOptionCreator.T2_OPTION),"2.1",optKey(DefaultOptionCreator.CLUSTERING_OPTION),optKey(DefaultOptionCreator.OVERWRITE_OPTION),optKey(DefaultOptionCreator.METHOD_OPTION),DefaultOptionCreator.SEQUENTIAL_METHOD};
  ToolRunner.run(config,new CanopyDriver(),args);
  Path path=new Path(output,"clusters-0-final/part-r-00000");
  int ix=0;
  for (  ClusterWritable clusterWritable : new SequenceFileValueIterable<ClusterWritable>(path,true,config)) {
    assertEquals("Center [" + ix + ']',euclideanCentroids.get(ix),clusterWritable.getValue().getCenter());
    ix++;
  }
  path=new Path(output,"clusteredPoints/part-m-0");
  long count=HadoopUtil.countRecords(path,config);
  assertEquals("number of points",points.size(),count);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.fuzzykmeans.TestFuzzyKmeansClustering </h4><pre class="type-11 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFuzzyKMeansMRJob() throws Exception {
  List<VectorWritable> points=TestKmeansClustering.getPointsWritable(TestKmeansClustering.REFERENCE);
  Path pointsPath=getTestTempDirPath("points");
  Path clustersPath=getTestTempDirPath("clusters");
  Configuration conf=getConfiguration();
  ClusteringTestUtils.writePointsToFile(points,new Path(pointsPath,"file1"),fs,conf);
  for (int k=0; k < points.size(); k++) {
    System.out.println("testKFuzzyKMeansMRJob k= " + k);
    SequenceFile.Writer writer=new SequenceFile.Writer(fs,conf,new Path(clustersPath,"part-00000"),Text.class,SoftCluster.class);
    try {
      for (int i=0; i < k + 1; i++) {
        Vector vec=tweakValue(points.get(i).get());
        SoftCluster cluster=new SoftCluster(vec,i,measure);
        cluster.observe(cluster.getCenter(),1);
        writer.append(new Text(cluster.getIdentifier()),cluster);
      }
    }
  finally {
      Closeables.close(writer,false);
    }
    Path output=getTestTempDirPath("output" + k);
    String[] args={optKey(DefaultOptionCreator.INPUT_OPTION),pointsPath.toString(),optKey(DefaultOptionCreator.CLUSTERS_IN_OPTION),clustersPath.toString(),optKey(DefaultOptionCreator.OUTPUT_OPTION),output.toString(),optKey(DefaultOptionCreator.DISTANCE_MEASURE_OPTION),EuclideanDistanceMeasure.class.getName(),optKey(DefaultOptionCreator.CONVERGENCE_DELTA_OPTION),"0.001",optKey(DefaultOptionCreator.MAX_ITERATIONS_OPTION),"2",optKey(FuzzyKMeansDriver.M_OPTION),"2.0",optKey(DefaultOptionCreator.CLUSTERING_OPTION),optKey(DefaultOptionCreator.EMIT_MOST_LIKELY_OPTION),optKey(DefaultOptionCreator.OVERWRITE_OPTION)};
    ToolRunner.run(getConfiguration(),new FuzzyKMeansDriver(),args);
    long count=HadoopUtil.countRecords(new Path(output,"clusteredPoints/part-m-00000"),conf);
    assertTrue(count > 0);
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testFuzzyKMeansSeqJob() throws Exception {
  List<VectorWritable> points=TestKmeansClustering.getPointsWritable(TestKmeansClustering.REFERENCE);
  Path pointsPath=getTestTempDirPath("points");
  Path clustersPath=getTestTempDirPath("clusters");
  Configuration conf=getConfiguration();
  ClusteringTestUtils.writePointsToFile(points,new Path(pointsPath,"file1"),fs,conf);
  for (int k=0; k < points.size(); k++) {
    System.out.println("testKFuzzyKMeansMRJob k= " + k);
    SequenceFile.Writer writer=new SequenceFile.Writer(fs,conf,new Path(clustersPath,"part-00000"),Text.class,SoftCluster.class);
    try {
      for (int i=0; i < k + 1; i++) {
        Vector vec=tweakValue(points.get(i).get());
        SoftCluster cluster=new SoftCluster(vec,i,measure);
        cluster.observe(cluster.getCenter(),1);
        writer.append(new Text(cluster.getIdentifier()),cluster);
      }
    }
  finally {
      Closeables.close(writer,false);
    }
    Path output=getTestTempDirPath("output" + k);
    String[] args={optKey(DefaultOptionCreator.INPUT_OPTION),pointsPath.toString(),optKey(DefaultOptionCreator.CLUSTERS_IN_OPTION),clustersPath.toString(),optKey(DefaultOptionCreator.OUTPUT_OPTION),output.toString(),optKey(DefaultOptionCreator.DISTANCE_MEASURE_OPTION),EuclideanDistanceMeasure.class.getName(),optKey(DefaultOptionCreator.CONVERGENCE_DELTA_OPTION),"0.001",optKey(DefaultOptionCreator.MAX_ITERATIONS_OPTION),"2",optKey(FuzzyKMeansDriver.M_OPTION),"2.0",optKey(DefaultOptionCreator.CLUSTERING_OPTION),optKey(DefaultOptionCreator.EMIT_MOST_LIKELY_OPTION),optKey(DefaultOptionCreator.OVERWRITE_OPTION),optKey(DefaultOptionCreator.METHOD_OPTION),DefaultOptionCreator.SEQUENTIAL_METHOD};
    FuzzyKMeansDriver.main(args);
    long count=HadoopUtil.countRecords(new Path(output,"clusteredPoints/part-m-0"),conf);
    assertTrue(count > 0);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.iterator.TestClusterClassifier </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testClusterClassifierSerialization() throws Exception {
  ClusterClassifier classifier=newKlusterClassifier();
  ClusterClassifier classifierOut=writeAndRead(classifier);
  assertEquals(classifier.getModels().size(),classifierOut.getModels().size());
  assertEquals(classifier.getModels().get(0).getClass().getName(),classifierOut.getModels().get(0).getClass().getName());
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testClusterIteratorKMeans(){
  List<Vector> data=TestKmeansClustering.getPoints(TestKmeansClustering.REFERENCE);
  ClusterClassifier prior=newKlusterClassifier();
  ClusterClassifier posterior=ClusterIterator.iterate(data,prior,5);
  assertEquals(3,posterior.getModels().size());
  for (  Cluster cluster : posterior.getModels()) {
    System.out.println(cluster.asFormatString(null));
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSoftClusterClassifierSerialization() throws Exception {
  ClusterClassifier classifier=newSoftClusterClassifier();
  ClusterClassifier classifierOut=writeAndRead(classifier);
  assertEquals(classifier.getModels().size(),classifierOut.getModels().size());
  assertEquals(classifier.getModels().get(0).getClass().getName(),classifierOut.getModels().get(0).getClass().getName());
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testClusterIteratorDirichlet(){
  List<Vector> data=TestKmeansClustering.getPoints(TestKmeansClustering.REFERENCE);
  ClusterClassifier prior=newKlusterClassifier();
  ClusterClassifier posterior=ClusterIterator.iterate(data,prior,5);
  assertEquals(3,posterior.getModels().size());
  for (  Cluster cluster : posterior.getModels()) {
    System.out.println(cluster.asFormatString(null));
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDMClassifierSerialization() throws Exception {
  ClusterClassifier classifier=newDMClassifier();
  ClusterClassifier classifierOut=writeAndRead(classifier);
  assertEquals(classifier.getModels().size(),classifierOut.getModels().size());
  assertEquals(classifier.getModels().get(0).getClass().getName(),classifierOut.getModels().get(0).getClass().getName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.kmeans.TestKmeansClustering </h4><pre class="type-3 type-8 type-10 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Story: User wants to use canopy clustering to input the initial clusters
 * for kmeans job.
 */
@Test public void testKMeansWithCanopyClusterInput() throws Exception {
  List<VectorWritable> points=getPointsWritable(REFERENCE);
  Path pointsPath=getTestTempDirPath("points");
  Configuration conf=getConfiguration();
  ClusteringTestUtils.writePointsToFile(points,true,new Path(pointsPath,"file1"),fs,conf);
  ClusteringTestUtils.writePointsToFile(points,true,new Path(pointsPath,"file2"),fs,conf);
  Path outputPath=getTestTempDirPath("output");
  CanopyDriver.run(conf,pointsPath,outputPath,new ManhattanDistanceMeasure(),3.1,2.1,false,0.0,false);
  DummyOutputCollector<Text,ClusterWritable> collector1=new DummyOutputCollector<Text,ClusterWritable>();
  FileStatus[] outParts=FileSystem.get(conf).globStatus(new Path(outputPath,"clusters-0-final/*-0*"));
  for (  FileStatus outPartStat : outParts) {
    for (    Pair<Text,ClusterWritable> record : new SequenceFileIterable<Text,ClusterWritable>(outPartStat.getPath(),conf)) {
      collector1.collect(record.getFirst(),record.getSecond());
    }
  }
  boolean got15=false;
  boolean got43=false;
  int count=0;
  for (  Text k : collector1.getKeys()) {
    count++;
    List<ClusterWritable> vl=collector1.getValue(k);
    assertEquals("non-singleton centroid!",1,vl.size());
    ClusterWritable clusterWritable=vl.get(0);
    Vector v=clusterWritable.getValue().getCenter();
    assertEquals("cetriod vector is wrong length",2,v.size());
    if ((Math.abs(v.get(0) - 1.5) < EPSILON) && (Math.abs(v.get(1) - 1.5) < EPSILON) && !got15) {
      got15=true;
    }
 else     if ((Math.abs(v.get(0) - 4.333333333333334) < EPSILON) && (Math.abs(v.get(1) - 4.333333333333334) < EPSILON) && !got43) {
      got43=true;
    }
 else {
      fail("got unexpected center: " + v + " ["+ v.getClass().toString()+ ']');
    }
  }
  assertEquals("got unexpected number of centers",2,count);
  Path kmeansOutput=new Path(outputPath,"kmeans");
  KMeansDriver.run(getConfiguration(),pointsPath,new Path(outputPath,"clusters-0-final"),kmeansOutput,0.001,10,true,0.0,false);
  Path clusteredPointsPath=new Path(kmeansOutput,"clusteredPoints");
  DummyOutputCollector<IntWritable,WeightedPropertyVectorWritable> collector=new DummyOutputCollector<IntWritable,WeightedPropertyVectorWritable>();
  for (  Pair<IntWritable,WeightedPropertyVectorWritable> record : new SequenceFileIterable<IntWritable,WeightedPropertyVectorWritable>(new Path(clusteredPointsPath,"part-m-00000"),conf)) {
    collector.collect(record.getFirst(),record.getSecond());
  }
  for (  IntWritable k : collector.getKeys()) {
    List<WeightedPropertyVectorWritable> wpvList=collector.getValue(k);
    assertTrue("empty cluster!",!wpvList.isEmpty());
    if (wpvList.get(0).getVector().get(0) <= 2.0) {
      for (      WeightedPropertyVectorWritable wv : wpvList) {
        Vector v=wv.getVector();
        int idx=v.maxValueIndex();
        assertTrue("bad cluster!",v.get(idx) <= 2.0);
      }
      assertEquals("Wrong size cluster",4,wpvList.size());
    }
 else {
      for (      WeightedPropertyVectorWritable wv : wpvList) {
        Vector v=wv.getVector();
        int idx=v.minValueIndex();
        assertTrue("bad cluster!",v.get(idx) > 2.0);
      }
      assertEquals("Wrong size cluster",5,wpvList.size());
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.spectral.TestAffinityMatrixInputJob </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAffinityMatrixInputMapper() throws Exception {
  AffinityMatrixInputMapper mapper=new AffinityMatrixInputMapper();
  Configuration conf=getConfiguration();
  conf.setInt(Keys.AFFINITY_DIMENSIONS,RAW_DIMENSIONS);
  DummyRecordWriter<IntWritable,MatrixEntryWritable> writer=new DummyRecordWriter<IntWritable,MatrixEntryWritable>();
  Mapper<LongWritable,Text,IntWritable,MatrixEntryWritable>.Context context=DummyRecordWriter.build(mapper,conf,writer);
  for (  String s : RAW) {
    mapper.map(new LongWritable(),new Text(s),context);
  }
  assertEquals("Number of map results",RAW_DIMENSIONS,writer.getData().size());
  Set<IntWritable> keys=writer.getData().keySet();
  for (  IntWritable i : keys) {
    List<MatrixEntryWritable> row=writer.getData().get(i);
    assertEquals("Number of items in row",RAW_DIMENSIONS,row.size());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.spectral.TestMatrixDiagonalizeJob </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMatrixDiagonalizeReducer() throws Exception {
  MatrixDiagonalizeMapper mapper=new MatrixDiagonalizeMapper();
  Configuration conf=getConfiguration();
  conf.setInt(Keys.AFFINITY_DIMENSIONS,RAW_DIMENSIONS);
  DummyRecordWriter<NullWritable,IntDoublePairWritable> mapWriter=new DummyRecordWriter<NullWritable,IntDoublePairWritable>();
  Mapper<IntWritable,VectorWritable,NullWritable,IntDoublePairWritable>.Context mapContext=DummyRecordWriter.build(mapper,conf,mapWriter);
  for (int i=0; i < RAW_DIMENSIONS; i++) {
    RandomAccessSparseVector toAdd=new RandomAccessSparseVector(RAW_DIMENSIONS);
    toAdd.assign(RAW[i]);
    mapper.map(new IntWritable(i),new VectorWritable(toAdd),mapContext);
  }
  MatrixDiagonalizeReducer reducer=new MatrixDiagonalizeReducer();
  DummyRecordWriter<NullWritable,VectorWritable> redWriter=new DummyRecordWriter<NullWritable,VectorWritable>();
  Reducer<NullWritable,IntDoublePairWritable,NullWritable,VectorWritable>.Context redContext=DummyRecordWriter.build(reducer,conf,redWriter,NullWritable.class,IntDoublePairWritable.class);
  reducer.reduce(NullWritable.get(),mapWriter.getValue(NullWritable.get()),redContext);
  List<VectorWritable> list=redWriter.getValue(NullWritable.get());
  assertEquals("Only a single resulting vector",1,list.size());
  Vector v=list.get(0).get();
  for (int i=0; i < v.size(); i++) {
    assertEquals("Element sum is correct",rowSum(RAW[i]),v.get(i),0.01);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.spectral.TestUnitVectorizerJob </h4><pre class="type-11 type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnitVectorizerMapper() throws Exception {
  UnitVectorizerMapper mapper=new UnitVectorizerMapper();
  Configuration conf=getConfiguration();
  DummyRecordWriter<IntWritable,VectorWritable> writer=new DummyRecordWriter<IntWritable,VectorWritable>();
  Mapper<IntWritable,VectorWritable,IntWritable,VectorWritable>.Context context=DummyRecordWriter.build(mapper,conf,writer);
  for (int i=0; i < RAW.length; i++) {
    Vector vector=new RandomAccessSparseVector(RAW[i].length);
    vector.assign(RAW[i]);
    mapper.map(new IntWritable(i),new VectorWritable(vector),context);
  }
  assertEquals("Number of map results",RAW.length,writer.getData().size());
  for (int i=0; i < RAW.length; i++) {
    IntWritable key=new IntWritable(i);
    List<VectorWritable> list=writer.getValue(key);
    assertEquals("Only one element per row",1,list.size());
    Vector v=list.get(0).get();
    assertTrue("Unit vector sum is 1 or differs by 0.0001",Math.abs(v.norm(2) - 1) < 0.000001);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.spectral.TestVectorCache </h4><pre class="type-3 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAll() throws Exception {
  Configuration conf=getConfiguration();
  Vector v=new DenseVector(VECTOR);
  Path toSave=getTestTempDirPath("output");
  Writable key=new IntWritable(0);
  VectorCache.save(key,v,toSave,conf);
  Vector v2=VectorCache.load(conf);
  assertNotNull("Vector is null",v2);
  assertEquals("Vectors are not identical",v2,v);
}

</code></pre>

<br>
<pre class="type-3 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLoad() throws Exception {
  Configuration conf=getConfiguration();
  Writable key=new IntWritable(0);
  Vector value=new DenseVector(VECTOR);
  Path path=getTestTempDirPath("output");
  FileSystem fs=FileSystem.get(path.toUri(),conf);
  path=fs.makeQualified(path);
  fs.deleteOnExit(path);
  HadoopUtil.delete(conf,path);
  SequenceFile.Writer writer=new SequenceFile.Writer(fs,conf,path,IntWritable.class,VectorWritable.class);
  try {
    writer.append(key,new VectorWritable(value));
  }
  finally {
    Closeables.close(writer,false);
  }
  DistributedCache.setCacheFiles(new URI[]{path.toUri()},conf);
  Vector result=VectorCache.load(conf);
  assertNotNull("Vector is null",result);
  assertEquals("Loaded vector is not identical to original",result,value);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.spectral.TestVectorMatrixMultiplicationJob </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testVectorMatrixMultiplicationMapper() throws Exception {
  VectorMatrixMultiplicationMapper mapper=new VectorMatrixMultiplicationMapper();
  Configuration conf=getConfiguration();
  Vector toSave=new DenseVector(VECTOR);
  DummyRecordWriter<IntWritable,VectorWritable> writer=new DummyRecordWriter<IntWritable,VectorWritable>();
  Mapper<IntWritable,VectorWritable,IntWritable,VectorWritable>.Context context=DummyRecordWriter.build(mapper,conf,writer);
  mapper.setup(toSave);
  for (int i=0; i < MATRIX.length; i++) {
    Vector v=new RandomAccessSparseVector(MATRIX[i].length);
    v.assign(MATRIX[i]);
    mapper.map(new IntWritable(i),new VectorWritable(v),context);
  }
  assertEquals("Number of map results",MATRIX.length,writer.getData().size());
  for (int i=0; i < MATRIX.length; i++) {
    List<VectorWritable> list=writer.getValue(new IntWritable(i));
    assertEquals("Only one vector per key",1,list.size());
    Vector v=list.get(0).get();
    for (int j=0; j < MATRIX[i].length; j++) {
      double total=Math.sqrt(VECTOR[i]) * Math.sqrt(VECTOR[j]) * MATRIX[i][j];
      assertEquals("Product matrix elements",total,v.get(j),EPSILON);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.streaming.cluster.BallKMeansTest </h4><pre class="type-11 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testClusteringMultipleRuns(){
  for (int i=1; i <= 10; ++i) {
    BallKMeans clusterer=new BallKMeans(new BruteSearch(new SquaredEuclideanDistanceMeasure()),1 << NUM_DIMENSIONS,NUM_ITERATIONS,true,i);
    clusterer.cluster(syntheticData.getFirst());
    double costKMeansPlusPlus=ClusteringUtils.totalClusterCost(syntheticData.getFirst(),clusterer);
    clusterer=new BallKMeans(new BruteSearch(new SquaredEuclideanDistanceMeasure()),1 << NUM_DIMENSIONS,NUM_ITERATIONS,false,i);
    clusterer.cluster(syntheticData.getFirst());
    double costKMeansRandom=ClusteringUtils.totalClusterCost(syntheticData.getFirst(),clusterer);
    System.out.printf("%d runs; kmeans++: %f; random: %f\n",i,costKMeansPlusPlus,costKMeansRandom);
    assertTrue("kmeans++ cost should be less than random cost",costKMeansPlusPlus < costKMeansRandom);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.streaming.cluster.StreamingKMeansTest </h4><pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClustering(){
  searcher.clear();
  int numStreamingClusters=(int)Math.log(syntheticData.getFirst().size()) * (1 << NUM_DIMENSIONS);
  System.out.printf("k log n = %d\n",numStreamingClusters);
  double estimatedCutoff=ClusteringUtils.estimateDistanceCutoff(syntheticData.getFirst(),searcher.getDistanceMeasure(),100);
  StreamingKMeans clusterer=new StreamingKMeans(searcher,numStreamingClusters,estimatedCutoff);
  long startTime=System.currentTimeMillis();
  if (allAtOnce) {
    clusterer.cluster(syntheticData.getFirst());
  }
 else {
    for (    Centroid datapoint : syntheticData.getFirst()) {
      clusterer.cluster(datapoint);
    }
  }
  long endTime=System.currentTimeMillis();
  System.out.printf("%s %s\n",searcher.getClass().getName(),searcher.getDistanceMeasure().getClass().getName());
  System.out.printf("Total number of clusters %d\n",clusterer.getNumClusters());
  System.out.printf("Weights: %f %f\n",ClusteringUtils.totalWeight(syntheticData.getFirst()),ClusteringUtils.totalWeight(clusterer));
  assertEquals("Total weight not preserved",ClusteringUtils.totalWeight(syntheticData.getFirst()),ClusteringUtils.totalWeight(clusterer),1.0e-9);
  double maxWeight=0;
  for (  Vector mean : syntheticData.getSecond()) {
    WeightedThing<Vector> v=searcher.search(mean,1).get(0);
    maxWeight=Math.max(v.getWeight(),maxWeight);
  }
  assertTrue("Maximum weight too large " + maxWeight,maxWeight < 0.05);
  double clusterTime=(endTime - startTime) / 1000.0;
  System.out.printf("%s\n%.2f for clustering\n%.1f us per row\n\n",searcher.getClass().getName(),clusterTime,clusterTime / syntheticData.getFirst().size() * 1.0e6);
  double[] cornerWeights=new double[1 << NUM_DIMENSIONS];
  Searcher trueFinder=new BruteSearch(new EuclideanDistanceMeasure());
  for (  Vector trueCluster : syntheticData.getSecond()) {
    trueFinder.add(trueCluster);
  }
  for (  Centroid centroid : clusterer) {
    WeightedThing<Vector> closest=trueFinder.search(centroid,1).get(0);
    cornerWeights[((Centroid)closest.getValue()).getIndex()]+=centroid.getWeight();
  }
  int expectedNumPoints=NUM_DATA_POINTS / (1 << NUM_DIMENSIONS);
  for (  double v : cornerWeights) {
    System.out.printf("%f ",v);
  }
  System.out.println();
  for (  double v : cornerWeights) {
    assertEquals(expectedNumPoints,v,0);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.streaming.mapreduce.StreamingKMeansTestMR </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMapperVsLocal() throws IOException {
  MapDriver<Writable,VectorWritable,IntWritable,CentroidWritable> mapDriver=MapDriver.newMapDriver(new StreamingKMeansMapper());
  Configuration configuration=mapDriver.getConfiguration();
  configure(configuration);
  System.out.printf("%s mapper vs local test\n",mapDriver.getConfiguration().get(StreamingKMeansDriver.SEARCHER_CLASS_OPTION));
  for (  Centroid datapoint : syntheticData.getFirst()) {
    mapDriver.addInput(new IntWritable(0),new VectorWritable(datapoint));
  }
  List<Centroid> mapperCentroids=Lists.newArrayList();
  for (  org.apache.hadoop.mrunit.types.Pair<IntWritable,CentroidWritable> pair : mapDriver.run()) {
    mapperCentroids.add(pair.getSecond().getCentroid());
  }
  StreamingKMeans batchClusterer=new StreamingKMeans(StreamingKMeansUtilsMR.searcherFromConfiguration(configuration),mapDriver.getConfiguration().getInt("estimatedNumMapClusters",-1),DISTANCE_CUTOFF);
  batchClusterer.cluster(syntheticData.getFirst());
  List<Centroid> batchCentroids=Lists.newArrayList();
  for (  Vector v : batchClusterer) {
    batchCentroids.add((Centroid)v);
  }
  StreamingKMeans perPointClusterer=new StreamingKMeans(StreamingKMeansUtilsMR.searcherFromConfiguration(configuration),(1 << NUM_DIMENSIONS) * (int)Math.log(NUM_DATA_POINTS),DISTANCE_CUTOFF);
  for (  Centroid datapoint : syntheticData.getFirst()) {
    perPointClusterer.cluster(datapoint);
  }
  List<Centroid> perPointCentroids=Lists.newArrayList();
  for (  Vector v : perPointClusterer) {
    perPointCentroids.add((Centroid)v);
  }
  double mapperCost=ClusteringUtils.totalClusterCost(syntheticData.getFirst(),mapperCentroids);
  double localCost=ClusteringUtils.totalClusterCost(syntheticData.getFirst(),batchCentroids);
  double perPointCost=ClusteringUtils.totalClusterCost(syntheticData.getFirst(),perPointCentroids);
  System.out.printf("[Total cost] Mapper %f [%d] Local %f [%d] Perpoint local %f [%d];" + "[ratio m-vs-l %f] [ratio pp-vs-l %f]\n",mapperCost,mapperCentroids.size(),localCost,batchCentroids.size(),perPointCost,perPointCentroids.size(),mapperCost / localCost,perPointCost / localCost);
  assertEquals("Mapper StreamingKMeans / Batch local StreamingKMeans total cost ratio too far from 1",1.0,mapperCost / localCost,0.8);
  assertEquals("One by one local StreamingKMeans / Batch local StreamingKMeans total cost ratio too high",1.0,perPointCost / localCost,0.8);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.streaming.tools.ResplitSequenceFilesTest </h4><pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSplitting() throws Exception {
  Path inputFile=new Path(getTestTempDirPath("input"),"test.seq");
  Path output=getTestTempDirPath("output");
  Configuration conf=new Configuration();
  LocalFileSystem fs=FileSystem.getLocal(conf);
  SequenceFile.Writer writer=null;
  try {
    writer=SequenceFile.createWriter(fs,conf,inputFile,IntWritable.class,IntWritable.class);
    writer.append(new IntWritable(1),new IntWritable(1));
    writer.append(new IntWritable(2),new IntWritable(2));
    writer.append(new IntWritable(3),new IntWritable(3));
    writer.append(new IntWritable(4),new IntWritable(4));
    writer.append(new IntWritable(5),new IntWritable(5));
    writer.append(new IntWritable(6),new IntWritable(6));
    writer.append(new IntWritable(7),new IntWritable(7));
    writer.append(new IntWritable(8),new IntWritable(8));
  }
  finally {
    Closeables.close(writer,false);
  }
  String splitPattern="split";
  int numSplits=4;
  ResplitSequenceFiles.main(new String[]{"--input",inputFile.toString(),"--output",output.toString() + "/" + splitPattern,"--numSplits",String.valueOf(numSplits)});
  FileStatus[] statuses=HadoopUtil.getFileStatus(output,PathType.LIST,PathFilters.logsCRCFilter(),null,conf);
  for (  FileStatus status : statuses) {
    String name=status.getPath().getName();
    assertTrue(name.startsWith(splitPattern));
    assertEquals(2,numEntries(status,conf));
  }
  assertEquals(numSplits,statuses.length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.topdown.PathDirectoryTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void shouldReturnClusterPathForClusterId(){
  Path expectedPath=new Path(PathDirectory.getClusterPostProcessorOutputDirectory(output),new Path("1"));
  assertEquals(expectedPath,PathDirectory.getClusterPathForClusterId(PathDirectory.getClusterPostProcessorOutputDirectory(output),"1"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.clustering.topdown.postprocessor.ClusterCountReaderTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Story: User wants to use cluster post processor after canopy clustering and then run clustering on the
 * output clusters
 */
@Test public void testGetNumberOfClusters() throws Exception {
  List<VectorWritable> points=getPointsWritable(REFERENCE);
  Path pointsPath=getTestTempDirPath("points");
  Configuration conf=getConfiguration();
  ClusteringTestUtils.writePointsToFile(points,new Path(pointsPath,"file1"),fs,conf);
  ClusteringTestUtils.writePointsToFile(points,new Path(pointsPath,"file2"),fs,conf);
  outputPathForCanopy=getTestTempDirPath("canopy");
  outputPathForKMeans=getTestTempDirPath("kmeans");
  topLevelClustering(pointsPath,conf);
  int numberOfClusters=ClusterCountReader.getNumberOfClusters(outputPathForKMeans,conf);
  Assert.assertEquals(2,numberOfClusters);
  verifyThatNumberOfClustersIsCorrect(conf,new Path(outputPathForKMeans,new Path("clusteredPoints")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.common.AbstractJobTest </h4><pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInputOutputPaths() throws Exception {
  AbstractJobFactory fact=new AbstractJobFactory(){
    @Override public AbstractJob getJob(){
      return new AbstractJob(){
        @Override public int run(        String[] args) throws IOException {
          addInputOption();
          addOutputOption();
          Map<String,List<String>> argMap=parseArguments(args);
          if (argMap == null) {
            return -1;
          }
          Path inputPath=getInputPath();
          assertNotNull("getInputPath() returns non-null",inputPath);
          Path outputPath=getInputPath();
          assertNotNull("getOutputPath() returns non-null",outputPath);
          return 0;
        }
      }
;
    }
  }
;
  int ret=ToolRunner.run(fact.getJob(),new String[0]);
  assertEquals("-1 for missing input option",-1,ret);
  String testInputPath="testInputPath";
  AbstractJob job=fact.getJob();
  ret=ToolRunner.run(job,new String[]{"--input",testInputPath});
  assertEquals("-1 for missing output option",-1,ret);
  assertEquals("input path is correct",testInputPath,job.getInputPath().toString());
  job=fact.getJob();
  String testOutputPath="testOutputPath";
  ret=ToolRunner.run(job,new String[]{"--output",testOutputPath});
  assertEquals("-1 for missing input option",-1,ret);
  assertEquals("output path is correct",testOutputPath,job.getOutputPath().toString());
  job=fact.getJob();
  ret=ToolRunner.run(job,new String[]{"--input",testInputPath,"--output",testOutputPath});
  assertEquals("0 for complete options",0,ret);
  assertEquals("input path is correct",testInputPath,job.getInputPath().toString());
  assertEquals("output path is correct",testOutputPath,job.getOutputPath().toString());
  job=fact.getJob();
  ret=ToolRunner.run(job,new String[]{"--input",testInputPath,"--output",testOutputPath});
  assertEquals("0 for complete options",0,ret);
  assertEquals("input path is correct",testInputPath,job.getInputPath().toString());
  assertEquals("output path is correct",testOutputPath,job.getOutputPath().toString());
  job=fact.getJob();
  String testInputPropertyPath="testInputPropertyPath";
  String testOutputPropertyPath="testOutputPropertyPath";
  ret=ToolRunner.run(job,new String[]{"-Dmapred.input.dir=" + testInputPropertyPath,"-Dmapred.output.dir=" + testOutputPropertyPath});
  assertEquals("0 for complete options",0,ret);
  assertEquals("input path from property is correct",testInputPropertyPath,job.getInputPath().toString());
  assertEquals("output path from property is correct",testOutputPropertyPath,job.getOutputPath().toString());
  job=fact.getJob();
  ret=ToolRunner.run(job,new String[]{"-Dmapred.input.dir=" + testInputPropertyPath,"-Dmapred.output.dir=" + testOutputPropertyPath,"--input",testInputPath,"--output",testOutputPath});
  assertEquals("0 for complete options",0,ret);
  assertEquals("input command-line option precedes property",testInputPath,job.getInputPath().toString());
  assertEquals("output command-line option precedes property",testOutputPath,job.getOutputPath().toString());
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOptions() throws Exception {
  final Map<String,List<String>> testMap=Maps.newHashMap();
  AbstractJobFactory fact=new AbstractJobFactory(){
    @Override public AbstractJob getJob(){
      return new AbstractJob(){
        @Override public int run(        String[] args) throws IOException {
          this.addOption(DefaultOptionCreator.overwriteOption().create());
          this.addOption("option","o","option");
          this.addOption("required","r","required",true);
          this.addOption("notRequired","nr","not required",false);
          this.addOption("hasDefault","hd","option w/ default","defaultValue");
          Map<String,List<String>> argMap=parseArguments(args);
          if (argMap == null) {
            return -1;
          }
          testMap.clear();
          testMap.putAll(argMap);
          return 0;
        }
      }
;
    }
  }
;
  int ret=ToolRunner.run(fact.getJob(),new String[0]);
  assertEquals("-1 for missing required options",-1,ret);
  ret=ToolRunner.run(fact.getJob(),new String[]{"--required","requiredArg"});
  assertEquals("0 for no missing required options",0,ret);
  assertEquals(Collections.singletonList("requiredArg"),testMap.get("--required"));
  assertEquals(Collections.singletonList("defaultValue"),testMap.get("--hasDefault"));
  assertNull(testMap.get("--option"));
  assertNull(testMap.get("--notRequired"));
  assertFalse(testMap.containsKey("--overwrite"));
  ret=ToolRunner.run(fact.getJob(),new String[]{"--required","requiredArg","--unknownArg"});
  assertEquals("-1 for including unknown options",-1,ret);
  ret=ToolRunner.run(fact.getJob(),new String[]{"--required","requiredArg","--required","requiredArg2"});
  assertEquals("-1 for including duplicate options",-1,ret);
  ret=ToolRunner.run(fact.getJob(),new String[]{"--required","requiredArg","--overwrite","--hasDefault","nonDefault","--option","optionValue","--notRequired","notRequired"});
  assertEquals("0 for no missing required options",0,ret);
  assertEquals(Collections.singletonList("requiredArg"),testMap.get("--required"));
  assertEquals(Collections.singletonList("nonDefault"),testMap.get("--hasDefault"));
  assertEquals(Collections.singletonList("optionValue"),testMap.get("--option"));
  assertEquals(Collections.singletonList("notRequired"),testMap.get("--notRequired"));
  assertTrue(testMap.containsKey("--overwrite"));
  ret=ToolRunner.run(fact.getJob(),new String[]{"-r","requiredArg","-ow","-hd","nonDefault","-o","optionValue","-nr","notRequired"});
  assertEquals("0 for no missing required options",0,ret);
  assertEquals(Collections.singletonList("requiredArg"),testMap.get("--required"));
  assertEquals(Collections.singletonList("nonDefault"),testMap.get("--hasDefault"));
  assertEquals(Collections.singletonList("optionValue"),testMap.get("--option"));
  assertEquals(Collections.singletonList("notRequired"),testMap.get("--notRequired"));
  assertTrue(testMap.containsKey("--overwrite"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.common.DistributedCacheFileLocationTest </h4><pre class="type-3 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void existingFile(){
  Path path=HadoopUtil.findInCacheByPartOfFilename("want_to_find",DISTRIBUTED_CACHE_FILES);
  assertNotNull(path);
  assertEquals(FILE_I_WANT_TO_FIND.getName(),path.getName());
}

</code></pre>

<br>
<pre class="type-3 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void nonExistingFile(){
  Path path=HadoopUtil.findInCacheByPartOfFilename("no such file",DISTRIBUTED_CACHE_FILES);
  assertNull(path);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.common.RandomUtilsTest </h4><pre class="type-3 type-2 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetSeed(){
  Random rTest0=RandomUtils.getRandom();
  Random rTest1=RandomUtils.getRandom();
  Random r0=RandomUtils.getRandom(0);
  Random r1=RandomUtils.getRandom(1);
  long lTest0=rTest0.nextLong();
  long lTest1=rTest1.nextLong();
  long l0=r0.nextLong();
  long l1=r1.nextLong();
  assertEquals("getRandom() must match getRandom() in unit tests",lTest0,lTest1);
  assertTrue("getRandom() must differ from getRandom(0)",lTest0 != l1);
  assertTrue("getRandom(0) must differ from getRandom(1)",l0 != l1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.common.distance.TestMahalanobisDistanceMeasure </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMeasure(){
  double[][] invCovValues={{2.2,0.4},{0.4,2.8}};
  double[] meanValues={-2.3,-0.9};
  Matrix invCov=new DenseMatrix(invCovValues);
  Vector meanVector=new DenseVector(meanValues);
  MahalanobisDistanceMeasure distanceMeasure=new MahalanobisDistanceMeasure();
  distanceMeasure.setInverseCovarianceMatrix(invCov);
  distanceMeasure.setMeanVector(meanVector);
  double[] v1={-1.9,-2.3};
  double[] v2={-2.9,-1.3};
  double dist=distanceMeasure.distance(new DenseVector(v1),new DenseVector(v2));
  assertEquals(2.0493901531919194,dist,EPSILON);
  distanceMeasure.setCovarianceMatrix(invCov);
  Matrix identity=distanceMeasure.getInverseCovarianceMatrix().times(invCov);
  assertEquals(1,identity.get(0,0),EPSILON);
  assertEquals(1,identity.get(1,1),EPSILON);
  assertEquals(0,identity.get(1,0),EPSILON);
  assertEquals(0,identity.get(0,1),EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.common.iterator.SamplerCase </h4><pre class="type-11 type-3 type-8 type-2 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSample(){
  Iterator<Integer> source=new CountingIterator(100);
  Iterator<Integer> t=createSampler(15,source);
  List<Integer> expectedValues=Arrays.asList(52,28,2,60,50,32,65,79,78,9,40,33,96,25,48);
  if (isSorted()) {
    Collections.sort(expectedValues);
  }
  Iterator<Integer> expected=expectedValues.iterator();
  int last=Integer.MIN_VALUE;
  for (int i=0; i < 15; i++) {
    assertTrue(t.hasNext());
    int actual=t.next();
    if (isSorted()) {
      assertTrue(actual >= last);
      last=actual;
    }
 else {
      if (actual < 15) {
        assertEquals(i,actual);
      }
    }
    assertTrue(actual >= 0 && actual < 100);
    assertEquals(expected.next().intValue(),actual);
    assertFalse(source.hasNext());
  }
  assertFalse(t.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.common.iterator.TestSamplingIterator </h4><pre class="type-11 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testSample(){
  for (int i=0; i < 1000; i++) {
    Iterator<Integer> t=new SamplingIterator<Integer>(new CountingIterator(1000),0.1);
    int k=0;
    while (t.hasNext()) {
      int v=t.next();
      k++;
      assertTrue(v >= 0);
      assertTrue(v < 1000);
    }
    double sd=Math.sqrt(0.9 * 0.1 * 1000);
    assertTrue(k >= 100 - 4 * sd);
    assertTrue(k <= 100 + 4 * sd);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.AbstractVectorTest </h4><pre class="type-3 type-2 type-5 type-13 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimpleOps(){
  T v0=vectorToTest(20);
  Random gen=RandomUtils.getRandom();
  Vector v1=v0.assign(new Normal(0,1,gen));
  assertEquals(v0.get(12),v1.get(12),0);
  v0.set(12,gen.nextDouble());
  assertEquals(v0.get(12),v1.get(12),0);
  assertSame(v0,v1);
  Vector v2=vectorToTest(20).assign(new Normal(0,1,gen));
  Vector dv1=new DenseVector(v1);
  Vector dv2=new DenseVector(v2);
  Vector sv1=new RandomAccessSparseVector(v1);
  Vector sv2=new RandomAccessSparseVector(v2);
  assertEquals(0,dv1.plus(dv2).getDistanceSquared(v1.plus(v2)),FUZZ);
  assertEquals(0,dv1.plus(dv2).getDistanceSquared(v1.plus(dv2)),FUZZ);
  assertEquals(0,dv1.plus(dv2).getDistanceSquared(v1.plus(sv2)),FUZZ);
  assertEquals(0,dv1.plus(dv2).getDistanceSquared(sv1.plus(v2)),FUZZ);
  assertEquals(0,dv1.times(dv2).getDistanceSquared(v1.times(v2)),FUZZ);
  assertEquals(0,dv1.times(dv2).getDistanceSquared(v1.times(dv2)),FUZZ);
  assertEquals(0,dv1.times(dv2).getDistanceSquared(v1.times(sv2)),FUZZ);
  assertEquals(0,dv1.times(dv2).getDistanceSquared(sv1.times(v2)),FUZZ);
  assertEquals(0,dv1.minus(dv2).getDistanceSquared(v1.minus(v2)),FUZZ);
  assertEquals(0,dv1.minus(dv2).getDistanceSquared(v1.minus(dv2)),FUZZ);
  assertEquals(0,dv1.minus(dv2).getDistanceSquared(v1.minus(sv2)),FUZZ);
  assertEquals(0,dv1.minus(dv2).getDistanceSquared(sv1.minus(v2)),FUZZ);
  double z=gen.nextDouble();
  assertEquals(0,dv1.divide(z).getDistanceSquared(v1.divide(z)),1.0e-12);
  assertEquals(0,dv1.times(z).getDistanceSquared(v1.times(z)),1.0e-12);
  assertEquals(0,dv1.plus(z).getDistanceSquared(v1.plus(z)),1.0e-12);
  assertEquals(dv1.dot(dv2),v1.dot(v2),FUZZ);
  assertEquals(dv1.dot(dv2),v1.dot(dv2),FUZZ);
  assertEquals(dv1.dot(dv2),v1.dot(sv2),FUZZ);
  assertEquals(dv1.dot(dv2),sv1.dot(v2),FUZZ);
  assertEquals(dv1.dot(dv2),dv1.dot(v2),FUZZ);
  assertEquals(dv1.getDistanceSquared(dv2),v1.getDistanceSquared(v2),FUZZ);
  assertEquals(dv1.getDistanceSquared(dv2),dv1.getDistanceSquared(v2),FUZZ);
  assertEquals(dv1.getDistanceSquared(dv2),sv1.getDistanceSquared(v2),FUZZ);
  assertEquals(dv1.getDistanceSquared(dv2),v1.getDistanceSquared(dv2),FUZZ);
  assertEquals(dv1.getDistanceSquared(dv2),v1.getDistanceSquared(sv2),FUZZ);
  assertEquals(dv1.getLengthSquared(),v1.getLengthSquared(),FUZZ);
  assertEquals(dv1.getDistanceSquared(dv2),v1.getDistanceSquared(v2),FUZZ);
  assertEquals(dv1.getDistanceSquared(dv2),dv1.getDistanceSquared(v2),FUZZ);
  assertEquals(dv1.getDistanceSquared(dv2),sv1.getDistanceSquared(v2),FUZZ);
  assertEquals(dv1.getDistanceSquared(dv2),v1.getDistanceSquared(dv2),FUZZ);
  assertEquals(dv1.getDistanceSquared(dv2),v1.getDistanceSquared(sv2),FUZZ);
  assertEquals(dv1.minValue(),v1.minValue(),FUZZ);
  assertEquals(dv1.minValueIndex(),v1.minValueIndex());
  assertEquals(dv1.maxValue(),v1.maxValue(),FUZZ);
  assertEquals(dv1.maxValueIndex(),v1.maxValueIndex());
  Vector nv1=v1.normalize();
  assertEquals(0,dv1.getDistanceSquared(v1),FUZZ);
  assertEquals(1,nv1.norm(2),FUZZ);
  assertEquals(0,dv1.normalize().getDistanceSquared(nv1),FUZZ);
  nv1=v1.normalize(1);
  assertEquals(0,dv1.getDistanceSquared(v1),FUZZ);
  assertEquals(1,nv1.norm(1),FUZZ);
  assertEquals(0,dv1.normalize(1).getDistanceSquared(nv1),FUZZ);
  assertEquals(dv1.norm(0),v1.norm(0),FUZZ);
  assertEquals(dv1.norm(1),v1.norm(1),FUZZ);
  assertEquals(dv1.norm(1.5),v1.norm(1.5),FUZZ);
  assertEquals(dv1.norm(2),v1.norm(2),FUZZ);
  assertEquals(dv1.zSum(),v1.zSum(),FUZZ);
  assertEquals(3.1 * v1.size(),v1.assign(3.1).zSum(),FUZZ);
  assertEquals(0,v1.plus(-3.1).norm(1),FUZZ);
  v1.assign(dv1);
  assertEquals(0,v1.getDistanceSquared(dv1),FUZZ);
  assertEquals(dv1.zSum() - dv1.size() * 3.4,v1.assign(Functions.minus(3.4)).zSum(),FUZZ);
  assertEquals(dv1.zSum() - dv1.size() * 4.5,v1.assign(Functions.MINUS,1.1).zSum(),FUZZ);
  v1.assign(dv1);
  assertEquals(0,dv1.minus(dv2).getDistanceSquared(v1.assign(v2,Functions.MINUS)),FUZZ);
  v1.assign(dv1);
  assertEquals(dv1.norm(2),Math.sqrt(v1.aggregate(Functions.PLUS,Functions.pow(2))),FUZZ);
  assertEquals(dv1.dot(dv2),v1.aggregate(v2,Functions.PLUS,Functions.MULT),FUZZ);
  assertEquals(dv1.viewPart(5,10).zSum(),v1.viewPart(5,10).zSum(),FUZZ);
  Vector v3=v1.clone();
  assertTrue(v0.getClass().isAssignableFrom(v3.getClass()));
  assertTrue(v3.getClass().isAssignableFrom(v0.getClass()));
  assertEquals(0,v1.getDistanceSquared(v3),FUZZ);
  assertNotSame(v1,v3);
  v3.assign(0);
  assertEquals(0,dv1.getDistanceSquared(v1),FUZZ);
  assertEquals(0,v3.getLengthSquared(),FUZZ);
  dv1.assign(Functions.ABS);
  v1.assign(Functions.ABS);
  assertEquals(0,dv1.logNormalize().getDistanceSquared(v1.logNormalize()),FUZZ);
  assertEquals(0,dv1.logNormalize(1.5).getDistanceSquared(v1.logNormalize(1.5)),FUZZ);
  for (  Vector.Element element : v1.all()) {
    assertEquals(dv1.get(element.index()),element.get(),0);
    assertEquals(dv1.get(element.index()),v1.get(element.index()),0);
    assertEquals(dv1.get(element.index()),v1.getQuick(element.index()),0);
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-8 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testSmallDistances(){
  for (  double fuzz : new double[]{1.0e-5,1.0e-6,1.0e-7,1.0e-8,1.0e-9,1.0e-10}) {
    MultiNormal x=new MultiNormal(fuzz,new ConstantVector(0,20));
    for (int i=0; i < 10000; i++) {
      final T v1=vectorToTest(20);
      Vector v2=v1.plus(x.sample());
      if (1 + fuzz * fuzz > 1) {
        String msg=String.format("fuzz = %.1g, >",fuzz);
        assertTrue(msg,v1.getDistanceSquared(v2) > 0);
        assertTrue(msg,v2.getDistanceSquared(v1) > 0);
      }
 else {
        String msg=String.format("fuzz = %.1g, >=",fuzz);
        assertTrue(msg,v1.getDistanceSquared(v2) >= 0);
        assertTrue(msg,v2.getDistanceSquared(v1) >= 0);
      }
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMinus(){
  Vector val=test.minus(test);
  assertEquals("size",test.size(),val.size());
  for (int i=0; i < test.size(); i++) {
    assertEquals("get [" + i + ']',0.0,val.get(i),EPSILON);
  }
  val=test.minus(test).minus(test);
  assertEquals("cardinality",test.size(),val.size());
  for (int i=0; i < test.size(); i++) {
    assertEquals("get [" + i + ']',0.0,val.get(i) + test.get(i),EPSILON);
  }
  Vector val1=test.plus(1);
  val=val1.minus(test);
  for (int i=0; i < test.size(); i++) {
    assertEquals("get [" + i + ']',1.0,val.get(i),EPSILON);
  }
  val1=test.plus(-1);
  val=val1.minus(test);
  for (int i=0; i < test.size(); i++) {
    assertEquals("get [" + i + ']',-1.0,val.get(i),EPSILON);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.CentroidTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUpdate(){
  MultiNormal f=new MultiNormal(20);
  Vector a=f.sample();
  Vector b=f.sample();
  Vector c=f.sample();
  DenseVector x=new DenseVector(a);
  Centroid x1=new Centroid(1,x);
  x1.update(new Centroid(2,new DenseVector(b)));
  Centroid x2=new Centroid(x1);
  x1.update(c);
  Vector mean=a.plus(b).plus(c).assign(Functions.div(3));
  assertEquals(0,x1.getVector().minus(mean).norm(1),1.0e-8);
  assertEquals(3,x1.getWeight(),0);
  assertEquals(0,x2.minus(a.plus(b).divide(2)).norm(1),1.0e-8);
  assertEquals(2,x2.getWeight(),0);
  assertEquals(0,new Centroid(x1.getIndex(),x1,x1.getWeight()).minus(x1).norm(1),1.0e-8);
  assertEquals(0,x.minus(x1).norm(1),0);
  assertEquals(3,x1.getWeight(),1.0e-8);
  assertEquals(1,x1.getIndex());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.CholeskyDecompositionTest </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test1(){
  final Random rand=RandomUtils.getRandom();
  Matrix z=new DenseMatrix(100,100);
  z.assign(new DoubleFunction(){
    @Override public double apply(    double arg1){
      return rand.nextDouble();
    }
  }
);
  Matrix A=z.times(z.transpose());
  for (boolean type=false; !type; type=true) {
    CholeskyDecomposition cd=new CholeskyDecomposition(A,type);
    Matrix L=cd.getL();
    Matrix Abar=L.times(L.transpose());
    double error=A.minus(Abar).aggregate(Functions.MAX,Functions.ABS);
    Assert.assertEquals("type = " + type,0,error,1.0e-10);
    Matrix q=cd.solveLeft(z);
    Matrix id=q.times(q.transpose());
    for (int i=0; i < id.columnSize(); i++) {
      Assert.assertEquals("type = " + type,1,id.get(i,i),1.0e-9);
      Assert.assertEquals("type = " + type,1,id.viewRow(i).norm(1),1.0e-9);
    }
    q=cd.solveRight(z.transpose());
    id=q.transpose().times(q);
    for (int i=0; i < id.columnSize(); i++) {
      Assert.assertEquals("type = " + type,1,id.get(i,i),1.0e-9);
      Assert.assertEquals("type = " + type,1,id.viewRow(i).norm(1),1.0e-9);
    }
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void rank1(){
  Matrix x=new DenseMatrix(3,3);
  x.viewRow(0).assign(new double[]{1,2,3});
  x.viewRow(1).assign(new double[]{2,4,6});
  x.viewRow(2).assign(new double[]{3,6,9});
  CholeskyDecomposition rr=new CholeskyDecomposition(x.transpose().times(x),false);
  assertEquals(0,new DenseVector(new double[]{3.741657,7.483315,11.22497}).aggregate(rr.getL().transpose().viewRow(0),Functions.PLUS,new DoubleDoubleFunction(){
    @Override public double apply(    double arg1,    double arg2){
      return Math.abs(arg1) - Math.abs(arg2);
    }
  }
),1.0e-5);
  assertEquals(0,rr.getL().viewPart(0,3,1,2).aggregate(Functions.PLUS,Functions.ABS),1.0e-9);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.DiagonalMatrixTest </h4><pre class="type-11 type-3 type-8 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSparsity(){
  Vector d=new DenseVector(10);
  for (int i=0; i < 10; i++) {
    d.set(i,i * i);
  }
  DiagonalMatrix m=new DiagonalMatrix(d);
  Assert.assertFalse(m.viewRow(0).isDense());
  Assert.assertFalse(m.viewColumn(0).isDense());
  for (int i=0; i < 10; i++) {
    assertEquals(i * i,m.viewRow(i).zSum(),0);
    assertEquals(i * i,m.viewRow(i).get(i),0);
    assertEquals(i * i,m.viewColumn(i).zSum(),0);
    assertEquals(i * i,m.viewColumn(i).get(i),0);
  }
  Iterator<Vector.Element> ix=m.viewRow(7).nonZeroes().iterator();
  assertTrue(ix.hasNext());
  Vector.Element r=ix.next();
  assertEquals(7,r.index());
  assertEquals(49,r.get(),0);
  assertFalse(ix.hasNext());
  assertEquals(0,m.viewRow(5).get(3),0);
  assertEquals(0,m.viewColumn(8).get(3),0);
  m.viewRow(3).set(3,1);
  assertEquals(1,m.get(3,3),0);
  for (  Vector.Element element : m.viewRow(6).all()) {
    if (element.index() == 6) {
      assertEquals(36,element.get(),0);
    }
 else {
      assertEquals(0,element.get(),0);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.FunctionTest </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIsLikeLeftMult(){
  if (!function.isLikeLeftMult()) {
    return;
  }
  for (int i=0; i < NUM_POINTS; ++i) {
    double y=random.nextDouble();
    assertEquals(functionName,0,function.apply(0,y),0);
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIsLikeRightPlus(){
  if (!function.isLikeRightPlus()) {
    return;
  }
  for (int i=0; i < NUM_POINTS; ++i) {
    double x=random.nextDouble();
    assertEquals(functionName,x,function.apply(x,0),0);
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIsCommutative(){
  if (!function.isCommutative()) {
    return;
  }
  for (int i=0; i < NUM_POINTS; ++i) {
    double x=random.nextDouble();
    double y=random.nextDouble();
    assertEquals(functionName,function.apply(x,y),function.apply(y,x),Constants.EPSILON);
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIsLikeRightMult(){
  if (!function.isLikeRightMult()) {
    return;
  }
  for (int i=0; i < NUM_POINTS; ++i) {
    double x=random.nextDouble();
    assertEquals(functionName,0,function.apply(x,0),0);
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIsAssociative(){
  if (!function.isAssociative()) {
    return;
  }
  for (int i=0; i < NUM_POINTS; ++i) {
    double x=random.nextDouble();
    double y=random.nextDouble();
    double z=random.nextDouble();
    assertEquals(functionName,function.apply(x,function.apply(y,z)),function.apply(function.apply(x,y),z),Constants.EPSILON);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.MatricesTest </h4><pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testViewDenseSparseReporting(){
  Matrix m=new SparseMatrix(1000,1000);
  m.set(1,1,33.0);
  Matrix mt=Matrices.transposedView(m);
  assertTrue(mt.viewColumn(0).isDense() == m.viewRow(0).isDense());
  assertTrue(mt.viewRow(0).isDense() == m.viewColumn(0).isDense());
  m=new DenseMatrix(10,10);
  m.set(1,1,33.0);
  mt=Matrices.transposedView(m);
  assertTrue(mt.viewColumn(0).isDense());
  assertTrue(mt.viewRow(0).isDense());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTransposeView(){
  Matrix m=Matrices.gaussianView(5,6,1234L);
  Matrix controlM=new DenseMatrix(5,6).assign(m);
  System.out.printf("M=\n%s\n",m);
  System.out.printf("controlM=\n%s\n",controlM);
  Matrix mtm=Matrices.transposedView(m).times(m);
  Matrix controlMtm=controlM.transpose().times(controlM);
  System.out.printf("M'M=\n%s\n",mtm);
  Matrix diff=mtm.minus(controlMtm);
  assertEquals(0,diff.aggregate(Functions.PLUS,Functions.ABS),1e-10);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.MatrixTest </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testRowView(){
  assertEquals(test.columnSize(),test.viewRow(1).size());
  assertEquals(test.columnSize(),test.viewRow(2).size());
  Random gen=RandomUtils.getRandom();
  for (int row=0; row < test.rowSize(); row++) {
    int j=gen.nextInt(test.columnSize());
    double old=test.get(row,j);
    double v=gen.nextGaussian();
    test.viewRow(row).set(j,v);
    assertEquals(v,test.get(row,j),0);
    assertEquals(v,test.viewRow(row).get(j),0);
    test.set(row,j,old);
    assertEquals(old,test.get(row,j),0);
    assertEquals(old,test.viewRow(row).get(j),0);
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testColumnView(){
  assertEquals(test.rowSize(),test.viewColumn(0).size());
  assertEquals(test.rowSize(),test.viewColumn(1).size());
  Random gen=RandomUtils.getRandom();
  for (int col=0; col < test.columnSize(); col++) {
    int j=gen.nextInt(test.columnSize());
    double old=test.get(col,j);
    double v=gen.nextGaussian();
    test.viewColumn(col).set(j,v);
    assertEquals(v,test.get(j,col),0);
    assertEquals(v,test.viewColumn(col).get(j),0);
    test.set(j,col,old);
    assertEquals(old,test.get(j,col),0);
    assertEquals(old,test.viewColumn(col).get(j),0);
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIterate(){
  Iterator<MatrixSlice> it=test.iterator();
  MatrixSlice m;
  while (it.hasNext() && (m=it.next()) != null) {
    Vector v=m.vector();
    Vector w=test instanceof SparseColumnMatrix ? test.viewColumn(m.index()) : test.viewRow(m.index());
    assertEquals("iterator: " + v + ", randomAccess: "+ w,v,w);
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testClone(){
  double oldValue=1.23;
  double newValue=2.34;
  double[][] values={{oldValue,3},{3,5},{7,9}};
  Matrix matrix=matrixFactory(values);
  Matrix clone=matrix.clone();
  clone.set(0,0,newValue);
  assertEquals("Matrix clone is not independent of the original",oldValue,matrix.get(0,0),EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.MurmurHash3Test </h4><pre class="type-11 type-3 type-4 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testCorrectValues() throws Exception {
  byte[] bytes="Now is the time for all good men to come to the aid of their country".getBytes("UTF-8");
  int hash=0;
  for (int i=0; i < bytes.length; i++) {
    hash=hash * 31 + (bytes[i] & 0xff);
    bytes[i]=(byte)hash;
  }
  for (int offset=0; offset < 10; offset++) {
    byte[] arr=new byte[bytes.length + offset];
    System.arraycopy(bytes,0,arr,offset,bytes.length);
    for (int len=0; len < bytes.length; len++) {
      int h=MurmurHash3.murmurhash3x8632(arr,offset,len,len);
      assertEquals(ANSWERS[len],h);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.MurmurHashTest </h4><pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChangingKey(){
  byte[] key=new byte[133];
  int[] expected={0xd743ae0b,0xf1b461c6,0xa45a6ceb,0xdb15e003,0x877721a4,0xc30465f1,0xfb658ba4,0x1adf93b2,0xe40a7931,0x3da52db0,0xbf523511,0x1efaf273,0xe628c1dd,0x9a0344df,0x901c99fc,0x5ae1aa44};
  for (int i=0; i < 16; i++) {
    setKey(key,i);
    int expectedHash=expected[i];
    int hash=MurmurHash.hash(key,0x1234ABCD);
    Assert.assertEquals("i = " + i,expectedHash,hash);
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChangingKeyLength(){
  int[] expected={0xa0c72f8e,0x29c2f97e,0x00ca8bba,0x88387876,0xe203ce49,0x58d75952,0xab84febe,0x98153c65,0xcbb38375,0x6ea1a28b,0x9afa8f55,0xfb890eb6,0x9516cc49,0x6408a8eb,0xbb12d3e6,0x00fb7519};
  for (int i=0; i < 16; i++) {
    byte[] key=new byte[i];
    setKey(key,i);
    int expectedHash=expected[i];
    int hash=MurmurHash.hash(key,0x7870AAFF);
    Assert.assertEquals("i = " + i,expectedHash,hash);
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testChangingSeed(){
  byte[] key={0x4E,(byte)0xE3,(byte)0x91,0x00,0x10,(byte)0x8F,(byte)0xFF};
  int[] expected={0xeef8be32,0x8109dec6,0x9aaf4192,0xc1bcaf1c,0x821d2ce4,0xd45ed1df,0x6c0357a7,0x21d4e845,0xfa97db50,0x2f1985c8,0x5d69782a,0x0d6e4b85,0xe7d9cf6b,0x337e6b49,0xe1606944,0xccc18ae8};
  for (int i=0; i < expected.length; i++) {
    int expectedHash=expected[i];
    int hash=MurmurHash.hash(key,i);
    Assert.assertEquals("i = " + i,expectedHash,hash);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.PermutedVectorViewTest </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testIterators(){
  int[] pivot=pivot();
  int[] unpivot=unpivot();
  Vector v=randomVector();
  PermutedVectorView pvv=new PermutedVectorView(v,pivot);
  assertEquals(v.zSum(),pvv.zSum(),0);
  assertEquals(v.getNumNondefaultElements(),pvv.getNumNondefaultElements());
  v.set(11,0);
  assertEquals(v.getNumNondefaultElements(),pvv.getNumNondefaultElements());
  Iterator<Vector.Element> vi=pvv.iterator();
  int i=0;
  while (vi.hasNext()) {
    Vector.Element e=vi.next();
    assertEquals("Index " + i,i,pivot[e.index()]);
    assertEquals("Reverse Index " + i,unpivot[i],e.index());
    assertEquals("Self-value " + i,e.get(),pvv.get(e.index()),0);
    assertEquals("Value " + i,v.get(i),e.get(),0);
    i++;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.QRDecompositionTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void randomMatrix(){
  Matrix a=new DenseMatrix(60,60).assign(Functions.random());
  QRDecomposition qr=new QRDecomposition(a);
  double maxIdent=qr.getQ().transpose().times(qr.getQ()).viewDiagonal().assign(Functions.plus(-1)).norm(1);
  assertEquals(0,maxIdent,1.0e-13);
  Matrix z=qr.getQ().times(qr.getR()).minus(a);
  double maxError=z.aggregate(Functions.MIN,Functions.ABS);
  assertEquals(0,maxError,1.0e-13);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.TestRandomAccessSparseVector </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Override @Test public void testToString(){
  Vector w;
  w=generateTestVector(20);
  w.set(0,1.1);
  w.set(13,100500.);
  w.set(19,3.141592);
  for (  String token : Splitter.on(',').split(w.toString().substring(1,w.toString().length() - 2))) {
    String[] tokens=token.split(":");
    assertEquals(Double.parseDouble(tokens[1]),w.get(Integer.parseInt(tokens[0])),0.0);
  }
  w=generateTestVector(12);
  w.set(10,0.1);
  assertEquals("{10:0.1}",w.toString());
  w=generateTestVector(12);
  assertEquals("{}",w.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.TestSingularValueDecomposition </h4><pre class="type-11 type-3 type-5 type-4 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testMoreColumns(){
  double[] singularValues={123.456,2.3,1.001,0.999};
  int rows=singularValues.length;
  int columns=singularValues.length + 2;
  Random r=RandomUtils.getRandom();
  SingularValueDecomposition svd=new SingularValueDecomposition(createTestMatrix(r,rows,columns,singularValues));
  double[] computedSV=svd.getSingularValues();
  assertEquals(singularValues.length,computedSV.length);
  for (int i=0; i < singularValues.length; ++i) {
    assertEquals(singularValues[i],computedSV[i],1.0e-10);
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-5 type-4 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void testMoreRows(){
  double[] singularValues={123.456,2.3,1.001,0.999};
  int rows=singularValues.length + 2;
  int columns=singularValues.length;
  Random r=RandomUtils.getRandom();
  SingularValueDecomposition svd=new SingularValueDecomposition(createTestMatrix(r,rows,columns,singularValues));
  double[] computedSV=svd.getSingularValues();
  assertEquals(singularValues.length,computedSV.length);
  for (int i=0; i < singularValues.length; ++i) {
    assertEquals(singularValues[i],computedSV[i],1.0e-10);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.TestSparseMatrix </h4><pre class="type-11 type-3 type-5 type-13 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test copy method of sparse matrices which have empty non-initialized rows 
 */
@Test public void testSparseCopy(){
  SparseMatrix matrix=createSparseMatrixWithEmptyRow();
  Matrix copy=matrix.clone();
  assertSame("wrong class",copy.getClass(),matrix.getClass());
  SparseMatrix castedCopy=(SparseMatrix)copy;
  Iterator<MatrixSlice> originalSlices=matrix.iterator();
  Iterator<MatrixSlice> copySlices=castedCopy.iterator();
  while (originalSlices.hasNext() && copySlices.hasNext()) {
    MatrixSlice originalSlice=originalSlices.next();
    MatrixSlice copySlice=copySlices.next();
    assertEquals("Wrong row indices.",originalSlice.index(),copySlice.index());
    assertEquals("Slices are not equal.",originalSlice,copySlice);
  }
  assertSame("Number of rows of original and copy are not equal.",originalSlices.hasNext(),copySlices.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.TestSparseRowMatrix </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=50000) public void testTimesSparseEfficiency(){
  Random raw=RandomUtils.getRandom();
  Gamma gen=new Gamma(0.1,0.1,raw);
  Matrix x=new SparseRowMatrix(1000,2000,false);
  for (int i=0; i < 1000; i++) {
    int[] values=new int[1000];
    for (int k=0; k < 1000; k++) {
      int j=(int)Math.min(1000,gen.nextDouble());
      values[j]++;
    }
    for (int j=0; j < 1000; j++) {
      if (values[j] > 0) {
        x.set(i,j,values[j]);
      }
    }
  }
  Matrix y=new SparseRowMatrix(2000,1000,false);
  for (int i=0; i < 2000; i++) {
    int[] values=new int[1000];
    for (int k=0; k < 1000; k++) {
      int j=(int)Math.min(1000,gen.nextDouble());
      values[j]++;
    }
    for (int j=0; j < 1000; j++) {
      if (values[j] > 0) {
        y.set(i,j,values[j]);
      }
    }
  }
  long t0=System.nanoTime();
  Matrix z=x.times(y);
  double elapsedTime=(System.nanoTime() - t0) * 1e-6;
  System.out.printf("done in %.1f ms\n",elapsedTime);
  for (int k=0; k < 1000; k++) {
    int i=(int)(-10 * Math.log(raw.nextDouble()));
    int j=(int)(-10 * Math.log(raw.nextDouble()));
    Assert.assertEquals(x.viewRow(i).dot(y.viewColumn(j)),z.get(i,j),1e-12);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.VarintTest </h4><pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnsignedLong() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutput out=new DataOutputStream(baos);
  Varint.writeUnsignedVarLong(0L,out);
  for (long i=1L; i > 0L && i <= (1L << 62); i<<=1) {
    Varint.writeUnsignedVarLong(i - 1,out);
    Varint.writeUnsignedVarLong(i,out);
  }
  Varint.writeUnsignedVarLong(Long.MAX_VALUE,out);
  DataInput in=new DataInputStream(new ByteArrayInputStream(baos.toByteArray()));
  assertEquals(0L,Varint.readUnsignedVarLong(in));
  for (long i=1L; i > 0L && i <= (1L << 62); i<<=1) {
    assertEquals(i - 1,Varint.readUnsignedVarLong(in));
    assertEquals(i,Varint.readUnsignedVarLong(in));
  }
  assertEquals(Long.MAX_VALUE,Varint.readUnsignedVarLong(in));
}

</code></pre>

<br>
<pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSignedPositiveLong() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutput out=new DataOutputStream(baos);
  Varint.writeSignedVarLong(0L,out);
  for (long i=1L; i <= (1L << 61); i<<=1) {
    Varint.writeSignedVarLong(i - 1,out);
    Varint.writeSignedVarLong(i,out);
  }
  Varint.writeSignedVarLong((1L << 62) - 1,out);
  Varint.writeSignedVarLong((1L << 62),out);
  Varint.writeSignedVarLong(Long.MAX_VALUE,out);
  DataInput in=new DataInputStream(new ByteArrayInputStream(baos.toByteArray()));
  assertEquals(0L,Varint.readSignedVarLong(in));
  for (long i=1L; i <= (1L << 61); i<<=1) {
    assertEquals(i - 1,Varint.readSignedVarLong(in));
    assertEquals(i,Varint.readSignedVarLong(in));
  }
  assertEquals((1L << 62) - 1,Varint.readSignedVarLong(in));
  assertEquals((1L << 62),Varint.readSignedVarLong(in));
  assertEquals(Long.MAX_VALUE,Varint.readSignedVarLong(in));
}

</code></pre>

<br>
<pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSignedPositiveInt() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutput out=new DataOutputStream(baos);
  Varint.writeSignedVarInt(0,out);
  for (int i=1; i <= (1 << 29); i<<=1) {
    Varint.writeSignedVarLong(i - 1,out);
    Varint.writeSignedVarLong(i,out);
  }
  Varint.writeSignedVarInt((1 << 30) - 1,out);
  Varint.writeSignedVarInt((1 << 30),out);
  Varint.writeSignedVarInt(Integer.MAX_VALUE,out);
  DataInput in=new DataInputStream(new ByteArrayInputStream(baos.toByteArray()));
  assertEquals(0,Varint.readSignedVarInt(in));
  for (int i=1; i <= (1 << 29); i<<=1) {
    assertEquals(i - 1,Varint.readSignedVarInt(in));
    assertEquals(i,Varint.readSignedVarInt(in));
  }
  assertEquals((1L << 30) - 1,Varint.readSignedVarInt(in));
  assertEquals((1L << 30),Varint.readSignedVarInt(in));
  assertEquals(Integer.MAX_VALUE,Varint.readSignedVarInt(in));
}

</code></pre>

<br>
<pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUnsignedInt() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutput out=new DataOutputStream(baos);
  Varint.writeUnsignedVarInt(0,out);
  for (int i=1; i > 0 && i <= (1 << 30); i<<=1) {
    Varint.writeUnsignedVarLong(i - 1,out);
    Varint.writeUnsignedVarLong(i,out);
  }
  Varint.writeUnsignedVarLong(Integer.MAX_VALUE,out);
  DataInput in=new DataInputStream(new ByteArrayInputStream(baos.toByteArray()));
  assertEquals(0,Varint.readUnsignedVarInt(in));
  for (int i=1; i > 0 && i <= (1 << 30); i<<=1) {
    assertEquals(i - 1,Varint.readUnsignedVarInt(in));
    assertEquals(i,Varint.readUnsignedVarInt(in));
  }
  assertEquals(Integer.MAX_VALUE,Varint.readUnsignedVarInt(in));
}

</code></pre>

<br>
<pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSignedNegativeInt() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutput out=new DataOutputStream(baos);
  for (int i=-1; i >= -(1 << 30); i<<=1) {
    Varint.writeSignedVarInt(i,out);
    Varint.writeSignedVarInt(i + 1,out);
  }
  Varint.writeSignedVarInt(Integer.MIN_VALUE,out);
  Varint.writeSignedVarInt(Integer.MIN_VALUE + 1,out);
  DataInput in=new DataInputStream(new ByteArrayInputStream(baos.toByteArray()));
  for (int i=-1; i >= -(1 << 30); i<<=1) {
    assertEquals(i,Varint.readSignedVarInt(in));
    assertEquals(i + 1,Varint.readSignedVarInt(in));
  }
  assertEquals(Integer.MIN_VALUE,Varint.readSignedVarInt(in));
  assertEquals(Integer.MIN_VALUE + 1,Varint.readSignedVarInt(in));
}

</code></pre>

<br>
<pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSignedNegativeLong() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  DataOutput out=new DataOutputStream(baos);
  for (long i=-1L; i >= -(1L << 62); i<<=1) {
    Varint.writeSignedVarLong(i,out);
    Varint.writeSignedVarLong(i + 1,out);
  }
  Varint.writeSignedVarLong(Long.MIN_VALUE,out);
  Varint.writeSignedVarLong(Long.MIN_VALUE + 1,out);
  DataInput in=new DataInputStream(new ByteArrayInputStream(baos.toByteArray()));
  for (long i=-1L; i >= -(1L << 62); i<<=1) {
    assertEquals(i,Varint.readSignedVarLong(in));
    assertEquals(i + 1,Varint.readSignedVarLong(in));
  }
  assertEquals(Long.MIN_VALUE,Varint.readSignedVarLong(in));
  assertEquals(Long.MIN_VALUE + 1,Varint.readSignedVarLong(in));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.VectorBinaryAggregateTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSelf(){
  Vector x=first.like();
  Vector xBase=new DenseVector(CARDINALITY);
  List<Double> items=Lists.newArrayList();
  for (int i=0; i < x.size(); ++i) {
    items.add(r.nextDouble());
  }
  for (int i=1; i < x.size(); ++i) {
    x.setQuick(i,items.get(i));
    xBase.setQuick(i,items.get(i));
  }
  Vector y=second.like().assign(x);
  Vector yBase=new DenseVector(x);
  System.out.printf("aggregator %s; combiner %s; operation %s\n",aggregator,combiner,operation);
  double expectedResult=combiner.apply(0,0);
  for (int i=1; i < x.size(); ++i) {
    expectedResult=aggregator.apply(expectedResult,combiner.apply(items.get(i),items.get(i)));
  }
  double result=operation.aggregate(x,y,aggregator,combiner);
  double resultBase=operation.aggregate(xBase,yBase,aggregator,combiner);
  assertEquals(expectedResult,result,0.0);
  assertEquals(resultBase,result,0.0);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSeparate(){
  List<Double> items1=Lists.newArrayList();
  List<Double> items2=Lists.newArrayList();
  for (int i=0; i < CARDINALITY; ++i) {
    items1.add(r.nextDouble());
    items2.add(r.nextDouble());
  }
  Vector x=first.like();
  Vector xBase=new DenseVector(CARDINALITY);
  for (int i=0; i < x.size(); ++i) {
    x.setQuick(i,items1.get(i));
    xBase.setQuick(i,items1.get(i));
  }
  Vector y=second.like();
  Vector yBase=new DenseVector(CARDINALITY);
  for (int i=0; i < y.size(); ++i) {
    y.setQuick(i,items2.get(i));
    yBase.setQuick(i,items2.get(i));
  }
  System.out.printf("aggregator %s; combiner %s; operation %s\n",aggregator,combiner,operation);
  double expectedResult=combiner.apply(items1.get(0),items2.get(0));
  for (int i=1; i < x.size(); ++i) {
    expectedResult=aggregator.apply(expectedResult,combiner.apply(items1.get(i),items2.get(i)));
  }
  double result=operation.aggregate(x,y,aggregator,combiner);
  double resultBase=operation.aggregate(xBase,yBase,aggregator,combiner);
  assertEquals(expectedResult,result,0.0);
  assertEquals(resultBase,result,0.0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.WeightedVectorTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProjection(){
  Vector v1=new DenseVector(10).assign(Functions.random());
  WeightedVector v2=new WeightedVector(v1,v1,31);
  assertEquals(v1.dot(v1),v2.getWeight(),1.0e-13);
  assertEquals(31,v2.getIndex());
  Matrix y=new DenseMatrix(10,4).assign(Functions.random());
  Matrix q=new QRDecomposition(y.viewPart(0,10,0,3)).getQ();
  Vector nullSpace=y.viewColumn(3).minus(q.times(q.transpose().times(y.viewColumn(3))));
  WeightedVector v3=new WeightedVector(q.viewColumn(0).plus(q.viewColumn(1)),nullSpace,1);
  assertEquals(0,v3.getWeight(),1.0e-13);
  Vector qx=q.viewColumn(0).plus(q.viewColumn(1)).normalize();
  WeightedVector v4=new WeightedVector(qx,q.viewColumn(0),2);
  assertEquals(Math.sqrt(0.5),v4.getWeight(),1.0e-13);
  WeightedVector v5=WeightedVector.project(q.viewColumn(0),qx);
  assertEquals(Math.sqrt(0.5),v5.getWeight(),1.0e-13);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.als.AlternatingLeastSquaresSolverTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void createRiIiMaybeTransposed(){
  Vector ratings=new SequentialAccessSparseVector(3);
  ratings.setQuick(1,1.0);
  ratings.setQuick(3,3.0);
  ratings.setQuick(5,5.0);
  Matrix riIiMaybeTransposed=AlternatingLeastSquaresSolver.createRiIiMaybeTransposed(ratings);
  assertEquals(1,riIiMaybeTransposed.numCols(),1);
  assertEquals(3,riIiMaybeTransposed.numRows(),3);
  assertEquals(1.0,riIiMaybeTransposed.getQuick(0,0),EPSILON);
  assertEquals(3.0,riIiMaybeTransposed.getQuick(1,0),EPSILON);
  assertEquals(5.0,riIiMaybeTransposed.getQuick(2,0),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void createMiIi(){
  Vector f1=new DenseVector(new double[]{1,2,3});
  Vector f2=new DenseVector(new double[]{4,5,6});
  Matrix miIi=AlternatingLeastSquaresSolver.createMiIi(Arrays.asList(f1,f2),3);
  assertEquals(1.0,miIi.getQuick(0,0),EPSILON);
  assertEquals(2.0,miIi.getQuick(1,0),EPSILON);
  assertEquals(3.0,miIi.getQuick(2,0),EPSILON);
  assertEquals(4.0,miIi.getQuick(0,1),EPSILON);
  assertEquals(5.0,miIi.getQuick(1,1),EPSILON);
  assertEquals(6.0,miIi.getQuick(2,1),EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.decomposer.lanczos.TestLanczosSolver </h4><pre class="type-11 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testEigenvalueCheck() throws Exception {
  int size=100;
  Matrix m=randomHierarchicalSymmetricMatrix(size);
  Vector initialVector=new DenseVector(size);
  initialVector.assign(1.0 / Math.sqrt(size));
  LanczosSolver solver=new LanczosSolver();
  int desiredRank=80;
  LanczosState state=new LanczosState(m,desiredRank,initialVector);
  solver.solve(state,desiredRank,true);
  EigenDecomposition decomposition=new EigenDecomposition(m);
  Vector eigenvalues=decomposition.getRealEigenvalues();
  float fractionOfEigensExpectedGood=0.6f;
  for (int i=0; i < fractionOfEigensExpectedGood * desiredRank; i++) {
    double s=state.getSingularValue(i);
    double e=eigenvalues.get(i);
    log.info("{} : L = {}, E = {}",i,s,e);
    assertTrue("Singular value differs from eigenvalue",Math.abs((s - e) / e) < ERROR_TOLERANCE);
    Vector v=state.getRightSingularVector(i);
    Vector v2=decomposition.getV().viewColumn(i);
    double error=1 - Math.abs(v.dot(v2) / (v.norm(2) * v2.norm(2)));
    log.info("error: {}",error);
    assertTrue(i + ": 1 - cosAngle = " + error,error < ERROR_TOLERANCE);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.hadoop.TestDistributedRowMatrix </h4><pre class="type-3 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTransposeJobConfBuilder() throws Exception {
  Configuration initialConf=createInitialConf();
  Path baseTmpDirPath=getTestTempDirPath("testpaths");
  Path inputPath=new Path(baseTmpDirPath,"input");
  Path outputPath=new Path(baseTmpDirPath,"output");
  Configuration transposeJobConf=TransposeJob.buildTransposeJob(inputPath,outputPath,10).getConfiguration();
  Configuration transposeCustomJobConf=TransposeJob.buildTransposeJob(initialConf,inputPath,outputPath,10).getConfiguration();
  assertNull(transposeJobConf.get(TEST_PROPERTY_KEY));
  assertEquals(TEST_PROPERTY_VALUE,transposeCustomJobConf.get(TEST_PROPERTY_KEY));
}

</code></pre>

<br>
<pre class="type-3 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMatrixMultiplactionJobConfBuilder() throws Exception {
  Configuration initialConf=createInitialConf();
  Path baseTmpDirPath=getTestTempDirPath("testpaths");
  Path aPath=new Path(baseTmpDirPath,"a");
  Path bPath=new Path(baseTmpDirPath,"b");
  Path outPath=new Path(baseTmpDirPath,"out");
  Configuration mmJobConf=MatrixMultiplicationJob.createMatrixMultiplyJobConf(aPath,bPath,outPath,10);
  Configuration mmCustomJobConf=MatrixMultiplicationJob.createMatrixMultiplyJobConf(initialConf,aPath,bPath,outPath,10);
  assertNull(mmJobConf.get(TEST_PROPERTY_KEY));
  assertEquals(TEST_PROPERTY_VALUE,mmCustomJobConf.get(TEST_PROPERTY_KEY));
}

</code></pre>

<br>
<pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimesSquaredJobConfBuilders() throws Exception {
  Configuration initialConf=createInitialConf();
  Path baseTmpDirPath=getTestTempDirPath("testpaths");
  Path inputPath=new Path(baseTmpDirPath,"input");
  Path outputPath=new Path(baseTmpDirPath,"output");
  Vector v=new RandomAccessSparseVector(50);
  v.assign(1.0);
  Job timesSquaredJob1=TimesSquaredJob.createTimesSquaredJob(v,inputPath,outputPath);
  Job customTimesSquaredJob1=TimesSquaredJob.createTimesSquaredJob(initialConf,v,inputPath,outputPath);
  assertNull(timesSquaredJob1.getConfiguration().get(TEST_PROPERTY_KEY));
  assertEquals(TEST_PROPERTY_VALUE,customTimesSquaredJob1.getConfiguration().get(TEST_PROPERTY_KEY));
  Job timesJob=TimesSquaredJob.createTimesJob(v,50,inputPath,outputPath);
  Job customTimesJob=TimesSquaredJob.createTimesJob(initialConf,v,50,inputPath,outputPath);
  assertNull(timesJob.getConfiguration().get(TEST_PROPERTY_KEY));
  assertEquals(TEST_PROPERTY_VALUE,customTimesJob.getConfiguration().get(TEST_PROPERTY_KEY));
  Job timesSquaredJob2=TimesSquaredJob.createTimesSquaredJob(v,inputPath,outputPath,TimesSquaredJob.TimesSquaredMapper.class,TimesSquaredJob.VectorSummingReducer.class);
  Job customTimesSquaredJob2=TimesSquaredJob.createTimesSquaredJob(initialConf,v,inputPath,outputPath,TimesSquaredJob.TimesSquaredMapper.class,TimesSquaredJob.VectorSummingReducer.class);
  assertNull(timesSquaredJob2.getConfiguration().get(TEST_PROPERTY_KEY));
  assertEquals(TEST_PROPERTY_VALUE,customTimesSquaredJob2.getConfiguration().get(TEST_PROPERTY_KEY));
  Job timesSquaredJob3=TimesSquaredJob.createTimesSquaredJob(v,50,inputPath,outputPath,TimesSquaredJob.TimesSquaredMapper.class,TimesSquaredJob.VectorSummingReducer.class);
  Job customTimesSquaredJob3=TimesSquaredJob.createTimesSquaredJob(initialConf,v,50,inputPath,outputPath,TimesSquaredJob.TimesSquaredMapper.class,TimesSquaredJob.VectorSummingReducer.class);
  assertNull(timesSquaredJob3.getConfiguration().get(TEST_PROPERTY_KEY));
  assertEquals(TEST_PROPERTY_VALUE,customTimesSquaredJob3.getConfiguration().get(TEST_PROPERTY_KEY));
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testMatrixTimesMatrix() throws Exception {
  Matrix inputA=SolverTest.randomSequentialAccessSparseMatrix(20,19,15,5,10.0);
  Matrix inputB=SolverTest.randomSequentialAccessSparseMatrix(20,13,25,10,5.0);
  Matrix expected=inputA.transpose().times(inputB);
  DistributedRowMatrix distA=randomDistributedMatrix(20,19,15,5,10.0,false,"distA");
  distA.setConf(getConfiguration());
  DistributedRowMatrix distB=randomDistributedMatrix(20,13,25,10,5.0,false,"distB");
  distB.setConf(getConfiguration());
  DistributedRowMatrix product=distA.times(distB);
  assertEquals(expected,product,EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.hadoop.similarity.cooccurrence.RowSimilarityJobTest </h4><pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void toyIntegrationMaxSimilaritiesPerRow() throws Exception {
  File inputFile=getTestTempFile("rows");
  File outputDir=getTestTempDir("output");
  outputDir.delete();
  File tmpDir=getTestTempDir("tmp");
  Configuration conf=getConfiguration();
  Path inputPath=new Path(inputFile.getAbsolutePath());
  FileSystem fs=FileSystem.get(inputPath.toUri(),conf);
  MathHelper.writeDistributedRowMatrix(new double[][]{new double[]{1,0,1,1,0,1},new double[]{0,1,1,1,1,1},new double[]{1,1,0,1,0,0}},fs,conf,inputPath);
  RowSimilarityJob rowSimilarityJob=new RowSimilarityJob();
  rowSimilarityJob.setConf(conf);
  rowSimilarityJob.run(new String[]{"--input",inputFile.getAbsolutePath(),"--output",outputDir.getAbsolutePath(),"--numberOfColumns",String.valueOf(6),"--similarityClassname",TanimotoCoefficientSimilarity.class.getName(),"--maxSimilaritiesPerRow",String.valueOf(1),"--excludeSelfSimilarity",String.valueOf(true),"--tempDir",tmpDir.getAbsolutePath()});
  Matrix similarityMatrix=MathHelper.readMatrix(conf,new Path(outputDir.getAbsolutePath(),"part-r-00000"),3,3);
  assertNotNull(similarityMatrix);
  assertEquals(3,similarityMatrix.numCols());
  assertEquals(3,similarityMatrix.numRows());
  assertEquals(0.0,similarityMatrix.get(0,0),EPSILON);
  assertEquals(0.5,similarityMatrix.get(0,1),EPSILON);
  assertEquals(0.0,similarityMatrix.get(0,2),EPSILON);
  assertEquals(0.5,similarityMatrix.get(1,0),EPSILON);
  assertEquals(0.0,similarityMatrix.get(1,1),EPSILON);
  assertEquals(0.0,similarityMatrix.get(1,2),EPSILON);
  assertEquals(0.4,similarityMatrix.get(2,0),EPSILON);
  assertEquals(0.0,similarityMatrix.get(2,1),EPSILON);
  assertEquals(0.0,similarityMatrix.get(2,2),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void toyIntegrationWithThreshold() throws Exception {
  File inputFile=getTestTempFile("rows");
  File outputDir=getTestTempDir("output");
  outputDir.delete();
  File tmpDir=getTestTempDir("tmp");
  Configuration conf=getConfiguration();
  Path inputPath=new Path(inputFile.getAbsolutePath());
  FileSystem fs=FileSystem.get(inputPath.toUri(),conf);
  MathHelper.writeDistributedRowMatrix(new double[][]{new double[]{1,0,1,1,0,1},new double[]{0,1,1,1,1,1},new double[]{1,1,0,1,0,0}},fs,conf,inputPath);
  RowSimilarityJob rowSimilarityJob=new RowSimilarityJob();
  rowSimilarityJob.setConf(conf);
  rowSimilarityJob.run(new String[]{"--input",inputFile.getAbsolutePath(),"--output",outputDir.getAbsolutePath(),"--numberOfColumns",String.valueOf(6),"--similarityClassname",TanimotoCoefficientSimilarity.class.getName(),"--excludeSelfSimilarity",String.valueOf(true),"--threshold",String.valueOf(0.5),"--tempDir",tmpDir.getAbsolutePath()});
  Matrix similarityMatrix=MathHelper.readMatrix(conf,new Path(outputDir.getAbsolutePath(),"part-r-00000"),3,3);
  assertNotNull(similarityMatrix);
  assertEquals(3,similarityMatrix.numCols());
  assertEquals(3,similarityMatrix.numRows());
  assertEquals(0.0,similarityMatrix.get(0,0),EPSILON);
  assertEquals(0.5,similarityMatrix.get(0,1),EPSILON);
  assertEquals(0.0,similarityMatrix.get(0,2),EPSILON);
  assertEquals(0.5,similarityMatrix.get(1,0),EPSILON);
  assertEquals(0.0,similarityMatrix.get(1,1),EPSILON);
  assertEquals(0.0,similarityMatrix.get(1,2),EPSILON);
  assertEquals(0.0,similarityMatrix.get(2,0),EPSILON);
  assertEquals(0.0,similarityMatrix.get(2,1),EPSILON);
  assertEquals(0.0,similarityMatrix.get(2,2),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * integration test with a tiny data set
 * <pre>
 * input matrix:
 * 1, 0, 1, 1, 0
 * 0, 0, 1, 1, 0
 * 0, 0, 0, 0, 1
 * similarity matrix (via tanimoto):
 * 1,     0.666, 0
 * 0.666, 1,     0
 * 0,     0,     1
 * </pre>
 * @throws Exception
 */
@Test public void toyIntegration() throws Exception {
  File inputFile=getTestTempFile("rows");
  File outputDir=getTestTempDir("output");
  outputDir.delete();
  File tmpDir=getTestTempDir("tmp");
  Configuration conf=getConfiguration();
  Path inputPath=new Path(inputFile.getAbsolutePath());
  FileSystem fs=FileSystem.get(inputPath.toUri(),conf);
  MathHelper.writeDistributedRowMatrix(new double[][]{new double[]{1,0,1,1,0},new double[]{0,0,1,1,0},new double[]{0,0,0,0,1}},fs,conf,inputPath);
  RowSimilarityJob rowSimilarityJob=new RowSimilarityJob();
  rowSimilarityJob.setConf(conf);
  rowSimilarityJob.run(new String[]{"--input",inputFile.getAbsolutePath(),"--output",outputDir.getAbsolutePath(),"--numberOfColumns",String.valueOf(5),"--similarityClassname",TanimotoCoefficientSimilarity.class.getName(),"--tempDir",tmpDir.getAbsolutePath()});
  OpenIntIntHashMap observationsPerColumn=Vectors.readAsIntMap(new Path(tmpDir.getAbsolutePath(),"observationsPerColumn.bin"),conf);
  assertEquals(4,observationsPerColumn.size());
  assertEquals(1,observationsPerColumn.get(0));
  assertEquals(2,observationsPerColumn.get(2));
  assertEquals(2,observationsPerColumn.get(3));
  assertEquals(1,observationsPerColumn.get(4));
  Matrix similarityMatrix=MathHelper.readMatrix(conf,new Path(outputDir.getAbsolutePath(),"part-r-00000"),3,3);
  assertNotNull(similarityMatrix);
  assertEquals(3,similarityMatrix.numCols());
  assertEquals(3,similarityMatrix.numRows());
  assertEquals(1.0,similarityMatrix.get(0,0),EPSILON);
  assertEquals(1.0,similarityMatrix.get(1,1),EPSILON);
  assertEquals(1.0,similarityMatrix.get(2,2),EPSILON);
  assertEquals(0.0,similarityMatrix.get(2,0),EPSILON);
  assertEquals(0.0,similarityMatrix.get(2,1),EPSILON);
  assertEquals(0.0,similarityMatrix.get(0,2),EPSILON);
  assertEquals(0.0,similarityMatrix.get(1,2),EPSILON);
  assertEquals(0.666666,similarityMatrix.get(0,1),EPSILON);
  assertEquals(0.666666,similarityMatrix.get(1,0),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testVectorDimensions() throws Exception {
  File inputFile=getTestTempFile("rows");
  Configuration conf=getConfiguration();
  Path inputPath=new Path(inputFile.getAbsolutePath());
  FileSystem fs=FileSystem.get(inputPath.toUri(),conf);
  MathHelper.writeDistributedRowMatrix(new double[][]{new double[]{1,0,1,1,0,1},new double[]{0,1,1,1,1,1},new double[]{1,1,0,1,0,0}},fs,conf,inputPath);
  RowSimilarityJob rowSimilarityJob=new RowSimilarityJob();
  rowSimilarityJob.setConf(conf);
  int numberOfColumns=rowSimilarityJob.getDimensions(inputPath);
  assertEquals(6,numberOfColumns);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.hadoop.solver.TestDistributedConjugateGradientSolver </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSolver() throws Exception {
  File testData=getTestTempDir("testdata");
  DistributedRowMatrix matrix=new TestDistributedRowMatrix().randomDistributedMatrix(10,10,10,10,10.0,true,testData.getAbsolutePath());
  matrix.setConf(getConfiguration());
  Vector vector=randomVector(matrix.numCols(),10.0);
  DistributedConjugateGradientSolver solver=new DistributedConjugateGradientSolver();
  Vector x=solver.solve(matrix,vector);
  Vector solvedVector=matrix.times(x);
  double distance=Math.sqrt(vector.getDistanceSquared(solvedVector));
  assertEquals(0.0,distance,EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.hadoop.solver.TestDistributedConjugateGradientSolverCLI </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSolver() throws Exception {
  Configuration conf=getConfiguration();
  Path testData=getTestTempDirPath("testdata");
  DistributedRowMatrix matrix=new TestDistributedRowMatrix().randomDistributedMatrix(10,10,10,10,10.0,true,testData.toString());
  matrix.setConf(conf);
  Path output=getTestTempFilePath("output");
  Path vectorPath=getTestTempFilePath("vector");
  Path tempPath=getTestTempDirPath("tmp");
  Vector vector=randomVector(matrix.numCols(),10.0);
  saveVector(conf,vectorPath,vector);
  String[] args={"-i",matrix.getRowPath().toString(),"-o",output.toString(),"--tempDir",tempPath.toString(),"--vector",vectorPath.toString(),"--numRows","10","--numCols","10","--symmetric","true"};
  DistributedConjugateGradientSolver solver=new DistributedConjugateGradientSolver();
  ToolRunner.run(getConfiguration(),solver.job(),args);
  Vector x=loadVector(conf,output);
  Vector solvedVector=matrix.times(x);
  double distance=Math.sqrt(vector.getDistanceSquared(solvedVector));
  assertEquals(0.0,distance,EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.hadoop.stats.BasicStatsTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStdDev() throws Exception {
  Path input=getTestTempFilePath("stdDev/counts.file");
  Path output=getTestTempFilePath("stdDev/output.file");
  produceTestData(input);
  double v=BasicStats.stdDev(input,output,conf);
  assertEquals(1.56,v,0.01);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testVar() throws Exception {
  Path input=getTestTempFilePath("stdDev/counts.file");
  Path output=getTestTempFilePath("stdDev/output.file");
  produceTestData(input);
  double v=BasicStats.variance(input,output,conf);
  assertEquals(2.44,v,0.01);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStdDev2() throws Exception {
  Path input=getTestTempFilePath("stdDev/counts.file");
  Path output=getTestTempFilePath("stdDev/output.file");
  FileSystem fs=FileSystem.get(input.toUri(),conf);
  SequenceFile.Writer writer=new SequenceFile.Writer(fs,conf,input,IntWritable.class,DoubleWritable.class);
  Random random=RandomUtils.getRandom();
  Normal normal=new Normal(5,3,random);
  for (int i=0; i < 1000000; i++) {
    writer.append(new IntWritable(i),new DoubleWritable((long)normal.nextInt()));
  }
  writer.close();
  double v=BasicStats.stdDev(input,output,conf);
  assertEquals(3,v,0.02);
}

</code></pre>

<br>
<pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStdDevForGivenMean() throws Exception {
  Path input=getTestTempFilePath("stdDev/counts.file");
  Path output=getTestTempFilePath("stdDev/output.file");
  produceTestData(input);
  double v=BasicStats.stdDevForGivenMean(input,output,0.0D,conf);
  assertEquals(10.65,v,0.01);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.hadoop.stochasticsvd.LocalSSVDPCASparseTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOmegaTRightMultiply(){
  final Random rnd=RandomUtils.getRandom();
  final long seed=rnd.nextLong();
  final int n=2000;
  final int kp=100;
  final Omega omega=new Omega(seed,kp);
  final Matrix materializedOmega=new DenseMatrix(n,kp);
  for (int i=0; i < n; i++)   for (int j=0; j < kp; j++)   materializedOmega.setQuick(i,j,omega.getQuick(i,j));
  Vector xi=new DenseVector(n);
  xi.assign(new DoubleFunction(){
    @Override public double apply(    double x){
      return rnd.nextDouble() * 100;
    }
  }
);
  Vector s_o=omega.mutlithreadedTRightMultiply(xi);
  Matrix xiVector=new DenseMatrix(n,1);
  xiVector.assignColumn(0,xi);
  Vector s_o_control=materializedOmega.transpose().times(xiVector).viewColumn(0);
  assertEquals(0,s_o.minus(s_o_control).aggregate(Functions.PLUS,Functions.ABS),1e-10);
  System.out.printf("s_omega=\n%s\n",s_o);
  System.out.printf("s_omega_control=\n%s\n",s_o_control);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.jet.random.GammaTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPdf(){
  Random gen=RandomUtils.getRandom();
  for (  double alpha : new double[]{0.01,0.1,1,2,10,100}) {
    for (    double beta : new double[]{0.1,1,2,100}) {
      Gamma g1=new Gamma(alpha,beta,gen);
      for (      double x : seq(0,0.99,0.1)) {
        double p=Math.pow(beta,alpha) * Math.pow(x,alpha - 1) * Math.exp(-beta * x - org.apache.mahout.math.jet.stat.Gamma.logGamma(alpha));
        assertEquals(String.format(Locale.ENGLISH,"alpha=%.2f, beta=%.2f, x=%.2f\n",alpha,beta,x),p,g1.pdf(x),1.0e-9);
      }
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.jet.random.NegativeBinomialTest </h4><pre class="type-3 type-8 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDistributionFunctions() throws Exception {
  InputSupplier<InputStreamReader> input=Resources.newReaderSupplier(Resources.getResource("negative-binomial-test-data.csv"),Charsets.UTF_8);
  boolean header=true;
  for (  String line : CharStreams.readLines(input)) {
    if (header) {
      header=false;
    }
 else {
      Iterable<String> values=onComma.split(line);
      int k=Integer.parseInt(Iterables.get(values,0));
      double p=Double.parseDouble(Iterables.get(values,1));
      int r=Integer.parseInt(Iterables.get(values,2));
      double density=Double.parseDouble(Iterables.get(values,3));
      double cume=Double.parseDouble(Iterables.get(values,4));
      NegativeBinomial nb=new NegativeBinomial(r,p,RandomUtils.getRandom());
      assertEquals("cumulative " + k + ','+ p+ ','+ r,cume,nb.cdf(k),cume * 1.0e-5);
      assertEquals("density " + k + ','+ p+ ','+ r,density,nb.pdf(k),density * 1.0e-5);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.jet.stat.GammaTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBigX(){
  assertEquals(factorial(4),4 * 3 * 2,0);
  assertEquals(factorial(4),Gamma.gamma(5),0);
  assertEquals(factorial(14),Gamma.gamma(15),0);
  assertEquals(factorial(34),Gamma.gamma(35),1.0e-15 * factorial(34));
  assertEquals(factorial(44),Gamma.gamma(45),1.0e-15 * factorial(44));
  assertEquals(-6.884137e-40 + 3.508309e-47,Gamma.gamma(-35.1),1.0e-52);
  assertEquals(-3.915646e-41 - 3.526813e-48 - 1.172516e-55,Gamma.gamma(-35.9),1.0e-52);
  assertEquals(-2000000000.577215,Gamma.gamma(-0.5e-9),1.0e-15 * 2000000000.577215);
  assertEquals(1999999999.422784,Gamma.gamma(0.5e-9),1.0e-15 * 1999999999.422784);
  assertEquals(1.324296658017984e+252,Gamma.gamma(146.1),1.0e-10 * 1.324296658017984e+252);
  for (  double x : new double[]{5,15,35,45,-35.1,-35.9,-0.5e-9,0.5e-9,146.1}) {
    double ref=Math.log(Math.abs(Gamma.gamma(x)));
    double actual=Gamma.logGamma(x);
    double diff=Math.abs(ref - actual) / ref;
    assertEquals("gamma versus logGamma at " + x + " (diff = "+ diff+ ')',0,(ref - actual) / ref,1.0e-8);
  }
}

</code></pre>

<br>
<pre class="type-3 type-8 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void incompleteBeta() throws IOException {
  Splitter onComma=Splitter.on(",").trimResults();
  InputSupplier<InputStreamReader> input=Resources.newReaderSupplier(Resources.getResource("beta-test-data.csv"),Charsets.UTF_8);
  boolean header=true;
  for (  String line : CharStreams.readLines(input)) {
    if (header) {
      header=false;
    }
 else {
      Iterable<String> values=onComma.split(line);
      double alpha=Double.parseDouble(Iterables.get(values,0));
      double beta=Double.parseDouble(Iterables.get(values,1));
      double x=Double.parseDouble(Iterables.get(values,2));
      double ref=Double.parseDouble(Iterables.get(values,3));
      double actual=Gamma.incompleteBeta(alpha,beta,x);
      assertEquals(alpha + "," + beta+ ','+ x,ref,actual,ref * 1.0e-5);
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void beta(){
  Random r=RandomUtils.getRandom();
  for (int i=0; i < 200; i++) {
    double alpha=-50 * Math.log1p(-r.nextDouble());
    double beta=-50 * Math.log1p(-r.nextDouble());
    double ref=Math.exp(Gamma.logGamma(alpha) + Gamma.logGamma(beta) - Gamma.logGamma(alpha + beta));
    double actual=Gamma.beta(alpha,beta);
    double err=(ref - actual) / ref;
    assertEquals("beta at (" + alpha + ", "+ beta+ ") relative error = "+ err,0,err,1.0e-10);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.jet.stat.ProbabilityTest </h4><pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testBetaCdf(){
  double[][] ref=new double[5][];
  ref[0]=new double[]{0.00000000,0.01010101,0.02020202,0.03030303,0.04040404,0.05050505,0.06060606,0.07070707,0.08080808,0.09090909,0.10101010,0.11111111,0.12121212,0.13131313,0.14141414,0.15151515,0.16161616,0.17171717,0.18181818,0.19191919,0.20202020,0.21212121,0.22222222,0.23232323,0.24242424,0.25252525,0.26262626,0.27272727,0.28282828,0.29292929,0.30303030,0.31313131,0.32323232,0.33333333,0.34343434,0.35353535,0.36363636,0.37373737,0.38383838,0.39393939,0.40404040,0.41414141,0.42424242,0.43434343,0.44444444,0.45454545,0.46464646,0.47474747,0.48484848,0.49494949,0.50505051,0.51515152,0.52525253,0.53535354,0.54545455,0.55555556,0.56565657,0.57575758,0.58585859,0.59595960,0.60606061,0.61616162,0.62626263,0.63636364,0.64646465,0.65656566,0.66666667,0.67676768,0.68686869,0.69696970,0.70707071,0.71717172,0.72727273,0.73737374,0.74747475,0.75757576,0.76767677,0.77777778,0.78787879,0.79797980,0.80808081,0.81818182,0.82828283,0.83838384,0.84848485,0.85858586,0.86868687,0.87878788,0.88888889,0.89898990,0.90909091,0.91919192,0.92929293,0.93939394,0.94949495,0.95959596,0.96969697,0.97979798,0.98989899,1.00000000};
  ref[1]=new double[]{0.0000000000,0.0001020304,0.0004081216,0.0009182736,0.0016324865,0.0025507601,0.0036730946,0.0049994898,0.0065299459,0.0082644628,0.0102030405,0.0123456790,0.0146923783,0.0172431385,0.0199979594,0.0229568411,0.0261197837,0.0294867871,0.0330578512,0.0368329762,0.0408121620,0.0449954086,0.0493827160,0.0539740843,0.0587695133,0.0637690032,0.0689725538,0.0743801653,0.0799918376,0.0858075707,0.0918273646,0.0980512193,0.1044791348,0.1111111111,0.1179471483,0.1249872462,0.1322314050,0.1396796245,0.1473319049,0.1551882461,0.1632486481,0.1715131109,0.1799816345,0.1886542190,0.1975308642,0.2066115702,0.2158963371,0.2253851648,0.2350780533,0.2449750026,0.2550760127,0.2653810836,0.2758902153,0.2866034078,0.2975206612,0.3086419753,0.3199673503,0.3314967860,0.3432302826,0.3551678400,0.3673094582,0.3796551372,0.3922048771,0.4049586777,0.4179165391,0.4310784614,0.4444444444,0.4580144883,0.4717885930,0.4857667585,0.4999489848,0.5143352719,0.5289256198,0.5437200286,0.5587184981,0.5739210285,0.5893276196,0.6049382716,0.6207529844,0.6367717580,0.6529945924,0.6694214876,0.6860524436,0.7028874605,0.7199265381,0.7371696766,0.7546168758,0.7722681359,0.7901234568,0.8081828385,0.8264462810,0.8449137843,0.8635853484,0.8824609734,0.9015406591,0.9208244057,0.9403122130,0.9600040812,0.9799000102,1.0000000000};
  ref[2]=new double[]{0.000000000,0.001489698,0.005799444,0.012698382,0.021966298,0.033393335,0.046779694,0.061935356,0.078679798,0.096841712,0.116258735,0.136777178,0.158251755,0.180545326,0.203528637,0.227080061,0.251085352,0.275437393,0.300035957,0.324787463,0.349604743,0.374406809,0.399118623,0.423670875,0.447999763,0.472046772,0.495758466,0.519086275,0.541986291,0.564419069,0.586349424,0.607746242,0.628582288,0.648834019,0.668481403,0.687507740,0.705899486,0.723646086,0.740739801,0.757175549,0.772950746,0.788065147,0.802520695,0.816321377,0.829473074,0.841983426,0.853861691,0.865118615,0.875766302,0.885818092,0.895288433,0.904192771,0.912547431,0.920369513,0.927676778,0.934487554,0.940820632,0.946695177,0.952130629,0.957146627,0.961762916,0.965999275,0.969875437,0.973411020,0.976625460,0.979537944,0.982167353,0.984532203,0.986650598,0.988540173,0.990218056,0.991700827,0.993004475,0.994144371,0.995135237,0.995991117,0.996725360,0.997350600,0.997878739,0.998320942,0.998687627,0.998988463,0.999232371,0.999427531,0.999581387,0.999700663,0.999791377,0.999858864,0.999907798,0.999942219,0.999965567,0.999980718,0.999990021,0.999995342,0.999998111,0.999999376,0.999999851,0.999999980,0.999999999,1.000000000};
  ref[3]=new double[]{0.0000000,0.5858072,0.6684658,0.7201859,0.7578936,0.7873991,0.8114552,0.8316029,0.8487998,0.8636849,0.8767081,0.8881993,0.8984080,0.9075280,0.9157131,0.9230876,0.9297536,0.9357958,0.9412856,0.9462835,0.9508414,0.9550044,0.9588113,0.9622963,0.9654896,0.9684178,0.9711044,0.9735707,0.9758356,0.9779161,0.9798276,0.9815839,0.9831977,0.9846805,0.9860426,0.9872936,0.9884422,0.9894965,0.9904638,0.9913509,0.9921638,0.9929085,0.9935900,0.9942134,0.9947832,0.9953034,0.9957779,0.9962104,0.9966041,0.9969621,0.9972872,0.9975821,0.9978492,0.9980907,0.9983088,0.9985055,0.9986824,0.9988414,0.9989839,0.9991113,0.9992251,0.9993265,0.9994165,0.9994963,0.9995668,0.9996288,0.9996834,0.9997311,0.9997727,0.9998089,0.9998401,0.9998671,0.9998901,0.9999098,0.9999265,0.9999406,0.9999524,0.9999622,0.9999703,0.9999769,0.9999823,0.9999866,0.9999900,0.9999927,0.9999947,0.9999963,0.9999975,0.9999983,0.9999989,0.9999993,0.9999996,0.9999998,0.9999999,0.9999999,1.0000000,1.0000000,1.0000000,1.0000000,1.0000000,1.0000000};
  ref[4]=new double[]{0.00000000,0.01908202,0.02195656,0.02385194,0.02530810,0.02650923,0.02754205,0.02845484,0.02927741,0.03002959,0.03072522,0.03137444,0.03198487,0.03256240,0.03311171,0.03363655,0.03414001,0.03462464,0.03509259,0.03554568,0.03598550,0.03641339,0.03683054,0.03723799,0.03763667,0.03802739,0.03841091,0.03878787,0.03915890,0.03952453,0.03988529,0.04024162,0.04059396,0.04094272,0.04128827,0.04163096,0.04197113,0.04230909,0.04264515,0.04297958,0.04331268,0.04364471,0.04397592,0.04430658,0.04463693,0.04496722,0.04529770,0.04562860,0.04596017,0.04629265,0.04662629,0.04696134,0.04729804,0.04763666,0.04797747,0.04832073,0.04866673,0.04901578,0.04936816,0.04972422,0.05008428,0.05044871,0.05081789,0.05119222,0.05157213,0.05195809,0.05235059,0.05275018,0.05315743,0.05357298,0.05399753,0.05443184,0.05487673,0.05533315,0.05580212,0.05628480,0.05678247,0.05729660,0.05782885,0.05838111,0.05895557,0.05955475,0.06018161,0.06083965,0.06153300,0.06226670,0.06304685,0.06388102,0.06477877,0.06575235,0.06681788,0.06799717,0.06932077,0.07083331,0.07260394,0.07474824,0.07748243,0.08129056,0.08771055,1.00000000};
  double[] alpha={1.0,2.0,2.0,0.2,0.2};
  double[] beta={1.0,1.0,5.0,5.0,0.01};
  for (int j=0; j < 4; j++) {
    for (int i=0; i < 100; i++) {
      double x=i / 99.0;
      String p=String.format(Locale.ENGLISH,"pbeta(q=%6.4f, shape1=%5.3f shape2=%5.3f) = %.8f",x,alpha[j],beta[j],ref[j][i]);
      assertEquals(p,ref[j][i],Probability.beta(alpha[j],beta[j],x),1.0e-7);
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.neighborhood.LocalitySensitiveHashSearchTest </h4><pre class="type-11 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testNormal(){
  Matrix testData=new DenseMatrix(100000,10);
  final Normal gen=new Normal();
  testData.assign(gen);
  final EuclideanDistanceMeasure distance=new EuclideanDistanceMeasure();
  BruteSearch ref=new BruteSearch(distance);
  ref.addAllMatrixSlicesAsWeightedVectors(testData);
  LocalitySensitiveHashSearch cut=new LocalitySensitiveHashSearch(distance,10);
  cut.addAllMatrixSlicesAsWeightedVectors(testData);
  cut.setSearchSize(200);
  cut.resetEvaluationCount();
  System.out.printf("speedup,q1,q2,q3\n");
  for (int i=0; i < 12; i++) {
    double strategy=(i - 1.0) / 10.0;
    cut.setRaiseHashLimitStrategy(strategy);
    OnlineSummarizer t1=evaluateStrategy(testData,ref,cut);
    int evals=cut.resetEvaluationCount();
    final double speedup=10.0e6 / evals;
    System.out.printf("%.1f,%.2f,%.2f,%.2f\n",speedup,t1.getQuartile(1),t1.getQuartile(2),t1.getQuartile(3));
    assertTrue(t1.getQuartile(2) > 0.45);
    assertTrue(speedup > 4 || t1.getQuartile(2) > 0.9);
    assertTrue(speedup > 15 || t1.getQuartile(2) > 0.8);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.neighborhood.SearchQualityTest </h4><pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOverlapAndRuntime(){
  searcher.clear();
  searcher.addAll(dataPoints);
  Pair<List<List<WeightedThing<Vector>>>,Long> results=getResultsAndRuntime(searcher,queries);
  int numFirstMatches=0;
  int numMatches=0;
  StripWeight stripWeight=new StripWeight();
  for (int i=0; i < queries.numRows(); ++i) {
    List<WeightedThing<Vector>> referenceVectors=reference.getFirst().get(i);
    List<WeightedThing<Vector>> resultVectors=results.getFirst().get(i);
    if (referenceVectors.get(0).getValue().equals(resultVectors.get(0).getValue())) {
      ++numFirstMatches;
    }
    for (    Vector v : Iterables.transform(referenceVectors,stripWeight)) {
      for (      Vector w : Iterables.transform(resultVectors,stripWeight)) {
        if (v.equals(w)) {
          ++numMatches;
        }
      }
    }
  }
  double bruteSearchAvgTime=reference.getSecond() / (queries.numRows() * 1.0);
  double searcherAvgTime=results.getSecond() / (queries.numRows() * 1.0);
  System.out.printf("%s: first matches %d [%d]; total matches %d [%d]; avg_time(1 query) %f(s) [%f]\n",searcher.getClass().getName(),numFirstMatches,queries.numRows(),numMatches,queries.numRows() * NUM_RESULTS,searcherAvgTime,bruteSearchAvgTime);
  assertEquals("Closest vector returned doesn't match",queries.numRows(),numFirstMatches);
  assertTrue("Searcher " + searcher.getClass().getName() + " slower than brute",bruteSearchAvgTime > searcherAvgTime);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOverlapAndRuntimeSearchFirst(){
  searcher.clear();
  searcher.addAll(dataPoints);
  Pair<List<WeightedThing<Vector>>,Long> results=getResultsAndRuntimeSearchFirst(searcher,queries);
  int numFirstMatches=0;
  for (int i=0; i < queries.numRows(); ++i) {
    WeightedThing<Vector> referenceVector=referenceSearchFirst.getFirst().get(i);
    WeightedThing<Vector> resultVector=results.getFirst().get(i);
    if (referenceVector.getValue().equals(resultVector.getValue())) {
      ++numFirstMatches;
    }
  }
  double bruteSearchAvgTime=reference.getSecond() / (queries.numRows() * 1.0);
  double searcherAvgTime=results.getSecond() / (queries.numRows() * 1.0);
  System.out.printf("%s: first matches %d [%d]; avg_time(1 query) %f(s) [%f]\n",searcher.getClass().getName(),numFirstMatches,queries.numRows(),searcherAvgTime,bruteSearchAvgTime);
  assertEquals("Closest vector returned doesn't match",queries.numRows(),numFirstMatches);
  assertTrue("Searcher " + searcher.getClass().getName() + " slower than brute",bruteSearchAvgTime > searcherAvgTime);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.neighborhood.SearchSanityTest </h4><pre class="type-3 type-8 type-10 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoval(){
  searcher.clear();
  searcher.addAllMatrixSlices(dataPoints);
  if (searcher instanceof UpdatableSearcher) {
    List<Vector> x=Lists.newArrayList(Iterables.limit(searcher,2));
    int size0=searcher.size();
    List<WeightedThing<Vector>> r0=searcher.search(x.get(0),2);
    searcher.remove(x.get(0),1.0e-7);
    assertEquals(size0 - 1,searcher.size());
    List<WeightedThing<Vector>> r=searcher.search(x.get(0),1);
    assertTrue("Vector should be gone",r.get(0).getWeight() > 0);
    assertEquals("Previous second neighbor should be first",0,r.get(0).getValue().minus(r0.get(1).getValue()).norm(1),1.0e-8);
    searcher.remove(x.get(1),1.0e-7);
    assertEquals(size0 - 2,searcher.size());
    r=searcher.search(x.get(1),1);
    assertTrue("Vector should be gone",r.get(0).getWeight() > 0);
    for (    Vector v : searcher) {
      assertTrue(x.get(0).minus(v).norm(1) > 1.0e-6);
      assertTrue(x.get(1).minus(v).norm(1) > 1.0e-6);
    }
  }
 else {
    try {
      List<Vector> x=Lists.newArrayList(Iterables.limit(searcher,2));
      searcher.remove(x.get(0),1.0e-7);
      fail("Shouldn't be able to delete from " + searcher.getClass().getName());
    }
 catch (    UnsupportedOperationException e) {
    }
  }
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExactMatch(){
  searcher.clear();
  Iterable<MatrixSlice> data=dataPoints;
  final Iterable<MatrixSlice> batch1=Iterables.limit(data,300);
  List<MatrixSlice> queries=Lists.newArrayList(Iterables.limit(batch1,100));
  searcher.addAllMatrixSlices(batch1);
  assertEquals(300,searcher.size());
  Vector q=Iterables.get(data,0).vector();
  List<WeightedThing<Vector>> r=searcher.search(q,2);
  assertEquals(0,r.get(0).getValue().minus(q).norm(1),1.0e-8);
  final Iterable<MatrixSlice> batch2=Iterables.limit(Iterables.skip(data,300),10);
  searcher.addAllMatrixSlices(batch2);
  assertEquals(310,searcher.size());
  q=Iterables.get(data,302).vector();
  r=searcher.search(q,2);
  assertEquals(0,r.get(0).getValue().minus(q).norm(1),1.0e-8);
  searcher.addAllMatrixSlices(Iterables.skip(data,310));
  assertEquals(dataPoints.numRows(),searcher.size());
  for (  MatrixSlice query : queries) {
    r=searcher.search(query.vector(),2);
    assertEquals("Distance has to be about zero",0,r.get(0).getWeight(),1.0e-6);
    assertEquals("Answer must be substantially the same as query",0,r.get(0).getValue().minus(query.vector()).norm(1),1.0e-8);
    assertTrue("Wrong answer must have non-zero distance",r.get(1).getWeight() > r.get(0).getWeight());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.random.ChineseRestaurantTest </h4><pre class="type-11 type-3 type-8 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGrowth(){
  ChineseRestaurant s0=new ChineseRestaurant(10,0.0);
  ChineseRestaurant s5=new ChineseRestaurant(10,0.5);
  ChineseRestaurant s9=new ChineseRestaurant(10,0.9);
  Set<Double> splits=ImmutableSet.of(1.0,1.5,2.0,3.0,5.0,8.0);
  double offset0=0;
  int k=0;
  int i=0;
  Matrix m5=new DenseMatrix(20,3);
  Matrix m9=new DenseMatrix(20,3);
  while (i <= 200000) {
    double n=i / Math.pow(10,Math.floor(Math.log10(i)));
    if (splits.contains(n)) {
      if (i > 900) {
        double predict5=predictSize(m5.viewPart(0,k,0,3),i,0.5);
        assertEquals(predict5,Math.log(s5.size()),1);
        double predict9=predictSize(m9.viewPart(0,k,0,3),i,0.9);
        assertEquals(predict9,Math.log(s9.size()),1);
      }
 else       if (i > 50) {
        double x=10.5 * Math.log(i) - s0.size();
        m5.viewRow(k).assign(new double[]{Math.log(s5.size()),Math.log(i),1});
        m9.viewRow(k).assign(new double[]{Math.log(s9.size()),Math.log(i),1});
        k++;
        offset0+=(x - offset0) / k;
      }
      if (i > 10000) {
        assertEquals(0.0,(double)hapaxCount(s0) / s0.size(),0.25);
        assertEquals(0.5,(double)hapaxCount(s5) / s5.size(),0.1);
        assertEquals(0.9,(double)hapaxCount(s9) / s9.size(),0.05);
      }
    }
    s0.sample();
    s5.sample();
    s9.sample();
    i++;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.random.MultinomialTest </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeleteAndUpdate(){
  Random rand=RandomUtils.getRandom();
  Multinomial<Integer> table=new Multinomial<Integer>();
  assertEquals(0,table.getWeight(),1.0e-9);
  double total=0;
  double[] p=new double[10];
  for (int i=0; i < 10; i++) {
    p[i]=rand.nextDouble();
    table.add(i,p[i]);
    total+=p[i];
    assertEquals(total,table.getWeight(),1.0e-9);
  }
  assertEquals(total,table.getWeight(),1.0e-9);
  checkSelfConsistent(table);
  double delta=p[7] + p[8];
  table.delete(7);
  p[7]=0;
  table.set(8,0);
  p[8]=0;
  total-=delta;
  checkSelfConsistent(table);
  assertEquals(total,table.getWeight(),1.0e-9);
  for (int i=0; i < 10; i++) {
    assertEquals(p[i],table.getWeight(i),0);
    assertEquals(p[i] / total,table.getProbability(i),1.0e-10);
  }
  table.set(9,5.1);
  total-=p[9];
  p[9]=5.1;
  total+=5.1;
  assertEquals(total,table.getWeight(),1.0e-9);
  for (int i=0; i < 10; i++) {
    assertEquals(p[i],table.getWeight(i),0);
    assertEquals(p[i] / total,table.getProbability(i),1.0e-10);
  }
  checkSelfConsistent(table);
  for (int i=0; i < 10; i++) {
    assertEquals(p[i],table.getWeight(i),0);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.randomized.RandomBlasting </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 */
@Test public void testClearTable() throws Exception {
  OpenObjectIntHashMap<Integer> m=new OpenObjectIntHashMap<Integer>();
  m.clear();
  m.put(1,2);
  m.clear();
  Field tableField=m.getClass().getDeclaredField("table");
  tableField.setAccessible(true);
  Object[] table=(Object[])tableField.get(m);
  assertEquals(Sets.newHashSet(Arrays.asList(new Object[]{null})),Sets.newHashSet(Arrays.asList(table)));
}

</code></pre>

<br>
<pre class="type-11 type-3 type-8 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test @Repeat(iterations=20) public void testAgainstReferenceOpenIntIntHashMap(){
  OpenIntIntHashMap base=new OpenIntIntHashMap();
  HashMap<Integer,Integer> reference=new HashMap<Integer,Integer>();
  List<Operation> ops=Lists.newArrayList();
  addOp(ops,Operation.ADD,60);
  addOp(ops,Operation.REMOVE,30);
  addOp(ops,Operation.INDEXOF,30);
  addOp(ops,Operation.CLEAR,5);
  addOp(ops,Operation.ISEMPTY,2);
  addOp(ops,Operation.SIZE,2);
  int max=randomIntBetween(1000,20000);
  for (int reps=0; reps < max; reps++) {
    int k=randomIntBetween(0,max / 4);
    int v=randomInt();
switch (randomFrom(ops)) {
case ADD:
      Integer prevValue=reference.put(k,v);
    if (prevValue == null) {
      assertEquals(true,base.put(k,v));
    }
 else {
      assertEquals(prevValue.intValue(),base.get(k));
      assertEquals(false,base.put(k,v));
    }
  break;
case REMOVE:
assertEquals(reference.containsKey(k),base.containsKey(k));
Integer removed=reference.remove(k);
if (removed == null) {
assertEquals(false,base.removeKey(k));
}
 else {
assertEquals(removed.intValue(),base.get(k));
assertEquals(true,base.removeKey(k));
}
break;
case INDEXOF:
assertEquals(reference.containsKey(k),base.containsKey(k));
break;
case CLEAR:
reference.clear();
base.clear();
break;
case ISEMPTY:
assertEquals(reference.isEmpty(),base.isEmpty());
break;
case SIZE:
assertEquals(reference.size(),base.size());
break;
default :
throw new RuntimeException();
}
}
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.solver.EigenDecompositionTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDeficientRank(){
  Matrix a=new DenseMatrix(10,3).assign(new DoubleFunction(){
    private final Random gen=RandomUtils.getRandom();
    @Override public double apply(    double arg1){
      return gen.nextGaussian();
    }
  }
);
  a=a.transpose().times(a);
  EigenDecomposition eig=new EigenDecomposition(a);
  Matrix d=eig.getD();
  Matrix v=eig.getV();
  check("EigenvalueDecomposition (rank deficient)...",a.times(v),v.times(d));
  Assert.assertEquals(0,eig.getImagEigenvalues().norm(1),1.0e-10);
  Assert.assertEquals(3,eig.getRealEigenvalues().norm(0),1.0e-10);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.solver.LSMRTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void random(){
  Matrix m=new DenseMatrix(200,30).assign(Functions.random());
  Vector b=new DenseVector(200).assign(1);
  LSMR r=new LSMR();
  Vector x1=r.solve(m,b);
  double norm=new SingularValueDecomposition(m).getS().viewDiagonal().norm(2);
  double actual=m.transpose().times(m).times(x1).minus(m.transpose().times(b)).norm(2);
  System.out.printf("%.4f\n",actual / norm * 1.0e6);
  assertEquals(0,actual,norm * 1.0e-5);
  assertEquals(m.times(x1).minus(b).norm(2),r.getResidualNorm(),1.0e-5);
  assertEquals(actual,r.getNormalEquationResidual(),1.0e-9);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.solver.TestConjugateGradientSolver </h4><pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEarlyStop(){
  Matrix a=getA();
  Vector b=getB();
  ConjugateGradientSolver solver=new ConjugateGradientSolver();
  Vector x=solver.solve(a,b,null,10,0.1);
  double distance=Math.sqrt(a.times(x).getDistanceSquared(b));
  assertTrue(distance > EPSILON);
  assertEquals(0.0,distance,0.1);
  assertEquals(7,solver.getIterations());
  x=solver.solve(a,b,null,7,ConjugateGradientSolver.DEFAULT_MAX_ERROR);
  distance=Math.sqrt(a.times(x).getDistanceSquared(b));
  assertTrue(distance > EPSILON);
  assertEquals(0.0,distance,0.1);
  assertEquals(7,solver.getIterations());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConditionedConjugateGradientSolver(){
  Matrix a=getIllConditionedMatrix();
  Vector b=getB();
  Preconditioner conditioner=new JacobiConditioner(a);
  ConjugateGradientSolver solver=new ConjugateGradientSolver();
  Vector x=solver.solve(a,b,null,100,ConjugateGradientSolver.DEFAULT_MAX_ERROR);
  double distance=Math.sqrt(a.times(x).getDistanceSquared(b));
  assertEquals(0.0,distance,EPSILON);
  assertEquals(0.0,solver.getResidualNorm(),ConjugateGradientSolver.DEFAULT_MAX_ERROR);
  assertEquals(16,solver.getIterations());
  Vector x2=solver.solve(a,b,conditioner,100,ConjugateGradientSolver.DEFAULT_MAX_ERROR);
  distance=Math.sqrt(a.times(x2).getDistanceSquared(b));
  assertEquals(0.0,distance,EPSILON);
  assertEquals(0.0,solver.getResidualNorm(),ConjugateGradientSolver.DEFAULT_MAX_ERROR);
  assertEquals(15,solver.getIterations());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.math.ssvd.SequentialOutOfCoreSvdTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSingularValues() throws IOException {
  Matrix A=lowRankMatrix(tmpDir,"A",200,970,1020);
  List<File> partsOfA=Arrays.asList(tmpDir.listFiles(new FilenameFilter(){
    @Override public boolean accept(    File file,    String fileName){
      return fileName.matches("A-.*");
    }
  }
));
  partsOfA=Lists.reverse(partsOfA);
  SequentialOutOfCoreSvd s=new SequentialOutOfCoreSvd(partsOfA,tmpDir,100,210);
  SequentialBigSvd svd=new SequentialBigSvd(A,100);
  Vector reference=new DenseVector(svd.getSingularValues()).viewPart(0,6);
  Vector actual=s.getSingularValues().viewPart(0,6);
  assertEquals(0,reference.minus(actual).maxValue(),1.0e-9);
  s.computeU(partsOfA,tmpDir);
  Matrix u=readBlockMatrix(Arrays.asList(tmpDir.listFiles(new FilenameFilter(){
    @Override public boolean accept(    File file,    String fileName){
      return fileName.matches("U-.*");
    }
  }
)));
  s.computeV(tmpDir,A.columnSize());
  Matrix v=readBlockMatrix(Arrays.asList(tmpDir.listFiles(new FilenameFilter(){
    @Override public boolean accept(    File file,    String fileName){
      return fileName.matches("V-.*");
    }
  }
)));
  assertEquals(0,A.minus(u.times(new DiagonalMatrix(s.getSingularValues())).times(v.transpose())).aggregate(Functions.PLUS,Functions.ABS),1.0e-7);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.text.SequenceFilesFromMailArchivesTest </h4><pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMapReduce() throws Exception {
  Path tmpDir=getTestTempDirPath();
  Path mrOutputDir=new Path(tmpDir,"mail-archives-out-mr");
  Configuration configuration=getConfiguration();
  FileSystem fs=FileSystem.get(configuration);
  File expectedInputFile=new File(inputDir.toString());
  String[] args={"-Dhadoop.tmp.dir=" + configuration.get("hadoop.tmp.dir"),"--input",expectedInputFile.getAbsolutePath(),"--output",mrOutputDir.toString(),"--charset","UTF-8","--keyPrefix","TEST","--method","mapreduce","--body","--subject","--separator",""};
  SequenceFilesFromMailArchives.main(args);
  FileStatus[] fileStatuses=fs.listStatus(mrOutputDir.suffix("/part-m-00000"));
  assertEquals(1,fileStatuses.length);
  assertEquals("part-m-00000",fileStatuses[0].getPath().getName());
  SequenceFileIterator<Text,Text> iterator=new SequenceFileIterator<>(mrOutputDir.suffix("/part-m-00000"),true,configuration);
  Assert.assertTrue("First key/value pair not found!",iterator.hasNext());
  Pair<Text,Text> record=iterator.next();
  File parentFileSubSubDir=new File(new File(new File(new File("TEST"),"subdir"),"subsubdir"),"mail-messages-2.gz");
  String expected=record.getFirst().toString();
  if (SystemUtils.IS_OS_WINDOWS) {
    expected=expected.replace("/","\\");
  }
  Assert.assertEquals(new File(parentFileSubSubDir,testVars[0][0]).toString(),expected);
  Assert.assertEquals(testVars[0][1] + testVars[0][2],record.getSecond().toString());
  Assert.assertTrue("Second key/value pair not found!",iterator.hasNext());
  record=iterator.next();
  expected=record.getFirst().toString();
  if (SystemUtils.IS_OS_WINDOWS) {
    expected=expected.replace("/","\\");
  }
  Assert.assertEquals(new File(parentFileSubSubDir,testVars[1][0]).toString(),expected);
  Assert.assertEquals(testVars[1][1] + testVars[1][2],record.getSecond().toString());
  File parentFile=new File(new File(new File("TEST"),"subdir"),"mail-messages.gz");
  record=iterator.next();
  expected=record.getFirst().toString();
  if (SystemUtils.IS_OS_WINDOWS) {
    expected=expected.replace("/","\\");
  }
  Assert.assertEquals(new File(parentFile,testVars[0][0]).toString(),expected);
  Assert.assertEquals(testVars[0][1] + testVars[0][2],record.getSecond().toString());
  Assert.assertTrue("Second key/value pair not found!",iterator.hasNext());
  record=iterator.next();
  expected=record.getFirst().toString();
  if (SystemUtils.IS_OS_WINDOWS) {
    expected=expected.replace("/","\\");
  }
  Assert.assertEquals(new File(parentFile,testVars[1][0]).toString(),expected);
  Assert.assertEquals(testVars[1][1] + testVars[1][2],record.getSecond().toString());
  Assert.assertFalse("Only four key/value pairs expected!",iterator.hasNext());
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSequential() throws Exception {
  File outputDir=this.getTestTempDir("mail-archives-out");
  String[] args={"--input",inputDir.getAbsolutePath(),"--output",outputDir.getAbsolutePath(),"--charset","UTF-8","--keyPrefix","TEST","--method","sequential","--body","--subject","--separator",""};
  SequenceFilesFromMailArchives.main(args);
  File expectedChunkFile=new File(outputDir,"chunk-0");
  String expectedChunkPath=expectedChunkFile.getAbsolutePath();
  Assert.assertTrue("Expected chunk file " + expectedChunkPath + " not found!",expectedChunkFile.isFile());
  Configuration conf=getConfiguration();
  SequenceFileIterator<Text,Text> iterator=new SequenceFileIterator<>(new Path(expectedChunkPath),true,conf);
  Assert.assertTrue("First key/value pair not found!",iterator.hasNext());
  Pair<Text,Text> record=iterator.next();
  File parentFile=new File(new File(new File("TEST"),"subdir"),"mail-messages.gz");
  Assert.assertEquals(new File(parentFile,testVars[0][0]).toString(),record.getFirst().toString());
  Assert.assertEquals(testVars[0][1] + testVars[0][2],record.getSecond().toString());
  Assert.assertTrue("Second key/value pair not found!",iterator.hasNext());
  record=iterator.next();
  Assert.assertEquals(new File(parentFile,testVars[1][0]).toString(),record.getFirst().toString());
  Assert.assertEquals(testVars[1][1] + testVars[1][2],record.getSecond().toString());
  record=iterator.next();
  File parentFileSubSubDir=new File(new File(new File(new File("TEST"),"subdir"),"subsubdir"),"mail-messages-2.gz");
  Assert.assertEquals(new File(parentFileSubSubDir,testVars[0][0]).toString(),record.getFirst().toString());
  Assert.assertEquals(testVars[0][1] + testVars[0][2],record.getSecond().toString());
  Assert.assertTrue("Second key/value pair not found!",iterator.hasNext());
  record=iterator.next();
  Assert.assertEquals(new File(parentFileSubSubDir,testVars[1][0]).toString(),record.getFirst().toString());
  Assert.assertEquals(testVars[1][1] + testVars[1][2],record.getSecond().toString());
  Assert.assertFalse("Only two key/value pairs expected!",iterator.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.utils.email.MailProcessorTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLabel() throws Exception {
  StringWriter writer=new StringWriter();
  MailOptions options=new MailOptions();
  options.setSeparator(":::");
  options.setCharset(Charsets.UTF_8);
  options.setPatternsToMatch(new Pattern[]{MailProcessor.FROM_PREFIX,MailProcessor.SUBJECT_PREFIX,MailProcessor.TO_PREFIX});
  options.setInput(new File(System.getProperty("user.dir")));
  MailProcessor proc=new MailProcessor(options,"",writer);
  URL url=MailProcessorTest.class.getClassLoader().getResource("test.mbox");
  File file=new File(url.toURI());
  long count=proc.parseMboxLineByLine(file);
  assertEquals(7,count);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStripQuoted() throws Exception {
  StringWriter writer=new StringWriter();
  MailOptions options=new MailOptions();
  options.setSeparator(":::");
  options.setCharset(Charsets.UTF_8);
  options.setPatternsToMatch(new Pattern[]{MailProcessor.SUBJECT_PREFIX});
  options.setInput(new File(System.getProperty("user.dir")));
  options.setIncludeBody(true);
  MailProcessor proc=new MailProcessor(options,"",writer);
  URL url=MailProcessorTest.class.getClassLoader().getResource("test.mbox");
  File file=new File(url.toURI());
  long count=proc.parseMboxLineByLine(file);
  assertEquals(7,count);
  assertTrue(writer.getBuffer().toString().contains("> Cocoon Cron Block Configurable Clustering"));
  writer=new StringWriter();
  proc=new MailProcessor(options,"",writer);
  options.setStripQuotedText(true);
  count=proc.parseMboxLineByLine(file);
  assertEquals(7,count);
  assertFalse(writer.getBuffer().toString().contains("> Cocoon Cron Block Configurable Clustering"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.utils.nlp.collocations.llr.BloomTokenFilterTest </h4><pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * test standalone filter without tokenfilter wrapping 
 */
@Test public void testFilter() throws IOException {
  Filter filter=getFilter(filterTokens);
  Key k=new Key();
  for (  String s : filterTokens) {
    setKey(k,s);
    assertTrue("Key for string " + s + " should be filter member",filter.membershipTest(k));
  }
  for (  String s : notFilterTokens) {
    setKey(k,s);
    assertFalse("Key for string " + s + " should not be filter member",filter.membershipTest(k));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.utils.regex.RegexUtilsTest </h4><pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExtract() throws Exception {
  Pattern pattern=Pattern.compile("(?<=(\\?|&)q=).*?(?=&|$)");
  String line="127.0.0.1 -  -  [24/05/2010:01:19:22 +0000] \"GET /solr/select?q=import statement&start=1 HTTP/1.1\" 200 37571";
  String res=RegexUtils.extract(line,pattern,Collections.<Integer>emptyList()," ",RegexUtils.IDENTITY_TRANSFORMER);
  assertEquals(res,"import statement",res);
  for (int i=0; i < TEST_STRS.length; i++) {
    String testStr=TEST_STRS[i];
    res=RegexUtils.extract(testStr,pattern,Collections.<Integer>emptyList()," ",new URLDecodeTransformer());
    assertEquals(GOLD[i],res);
  }
  pattern=Pattern.compile("((?<=(\\?|&)q=)(.*?)(?=(&|$))|(?<=((\\?|&)start=))(\\d+))");
  res=RegexUtils.extract(line,pattern,Collections.<Integer>emptyList()," ",RegexUtils.IDENTITY_TRANSFORMER);
  assertEquals(res,"import statement 1",res);
  pattern=Pattern.compile("(start=1) HTTP");
  Collection<Integer> groupsToKeep=new ArrayList<>();
  groupsToKeep.add(1);
  res=RegexUtils.extract(line,pattern,groupsToKeep," ",RegexUtils.IDENTITY_TRANSFORMER);
  assertEquals(res,"start=1",res);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.utils.vectors.arff.ARFFVectorIterableTest </h4><pre class="type-3 type-2 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleNoms() throws Exception {
  MapBackedARFFModel model=new MapBackedARFFModel();
  ARFFVectorIterable iterable=getVectors("non-numeric-1.arff",model);
  int count=0;
  for (  Vector vector : iterable) {
    assertTrue("Vector is not dense",vector instanceof RandomAccessSparseVector);
    count++;
  }
  assertEquals(10,count);
  Map<String,Map<String,Integer>> nominalMap=iterable.getModel().getNominalMap();
  assertNotNull(nominalMap);
  assertEquals(1,nominalMap.size());
  Map<String,Integer> noms=nominalMap.get("bar");
  assertNotNull("nominals for bar are null",noms);
  assertEquals(5,noms.size());
  Map<Integer,ARFFType> integerARFFTypeMap=model.getTypeMap();
  assertNotNull("Type map null",integerARFFTypeMap);
  assertEquals(5,integerARFFTypeMap.size());
  Map<String,Long> words=model.getWords();
  assertNotNull("words null",words);
  assertEquals(10,words.size());
  Map<Integer,DateFormat> integerDateFormatMap=model.getDateMap();
  assertNotNull("date format null",integerDateFormatMap);
  assertEquals(1,integerDateFormatMap.size());
  iterable=getVectors("non-numeric-2.arff",model);
  count=0;
  for (  Vector vector : iterable) {
    assertTrue("Vector is not dense",vector instanceof RandomAccessSparseVector);
    count++;
  }
  nominalMap=model.getNominalMap();
  assertNotNull(nominalMap);
  assertEquals(2,nominalMap.size());
  noms=nominalMap.get("test");
  assertNotNull("nominals for bar are null",noms);
  assertEquals(2,noms.size());
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDense() throws Exception {
  Iterable<Vector> iterable=readModelFromResource("sample-dense.arff");
  Vector firstVector=iterable.iterator().next();
  assertEquals(1.0,firstVector.get(0),0);
  assertEquals(65.0,firstVector.get(1),0);
  assertEquals(1.0,firstVector.get(3),0);
  assertEquals(1.0,firstVector.get(4),0);
  int count=0;
  for (  Vector vector : iterable) {
    assertTrue("Vector is not dense",vector instanceof DenseVector);
    count++;
  }
  assertEquals(5,count);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonNumeric() throws Exception {
  MapBackedARFFModel model=new MapBackedARFFModel();
  ARFFVectorIterable iterable=getVectors("non-numeric-1.arff",model);
  int count=0;
  for (  Vector vector : iterable) {
    assertTrue("Vector is not dense",vector instanceof RandomAccessSparseVector);
    count++;
  }
  iterable=getVectors("non-numeric-1.arff",model);
  Iterator<Vector> iter=iterable.iterator();
  Vector firstVector=iter.next();
  assertEquals(1.0,firstVector.get(2),0);
  assertEquals(10,count);
  Map<String,Map<String,Integer>> nominalMap=iterable.getModel().getNominalMap();
  assertNotNull(nominalMap);
  assertEquals(1,nominalMap.size());
  Map<String,Integer> noms=nominalMap.get("bar");
  assertNotNull("nominals for bar are null",noms);
  assertEquals(5,noms.size());
  Map<Integer,ARFFType> integerARFFTypeMap=model.getTypeMap();
  assertNotNull("Type map null",integerARFFTypeMap);
  assertEquals(5,integerARFFTypeMap.size());
  Map<String,Long> words=model.getWords();
  assertNotNull("words null",words);
  assertEquals(10,words.size());
  Map<Integer,DateFormat> integerDateFormatMap=model.getDateMap();
  assertNotNull("date format null",integerDateFormatMap);
  assertEquals(1,integerDateFormatMap.size());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDate() throws Exception {
  ARFFVectorIterable iterable=readModelFromResource("date.arff");
  Iterator<Vector> iter=iterable.iterator();
  Vector firstVector=iter.next();
  DateFormat format=new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss",Locale.ENGLISH);
  Date date=format.parse("2001-07-04T12:08:56");
  long result=date.getTime();
  assertEquals(result,firstVector.get(1),0);
  format=new SimpleDateFormat("yyyy.MM.dd G 'at' HH:mm:ss z",Locale.ENGLISH);
  date=format.parse("2001.07.04 AD at 12:08:56 PDT");
  result=date.getTime();
  assertEquals(result,firstVector.get(2),0);
  format=new SimpleDateFormat("EEE, MMM d, ''yy",Locale.ENGLISH);
  date=format.parse("Wed, Jul 4, '01,4 0:08 PM, PDT");
  result=date.getTime();
  assertEquals(result,firstVector.get(3),0);
  format=new SimpleDateFormat("K:mm a, z",Locale.ENGLISH);
  date=format.parse("0:08 PM, PDT");
  result=date.getTime();
  assertEquals(result,firstVector.get(4),0);
  format=new SimpleDateFormat("yyyyy.MMMMM.dd GGG hh:mm aaa",Locale.ENGLISH);
  date=format.parse("02001.July.04 AD 12:08 PM");
  result=date.getTime();
  assertEquals(result,firstVector.get(5),0);
  format=new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss Z",Locale.ENGLISH);
  date=format.parse("Wed, 4 Jul 2001 12:08:56 -0700");
  result=date.getTime();
  assertEquals(result,firstVector.get(6),0);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValues() throws Exception {
  ARFFVectorIterable iterable=readModelFromResource("sample.arff");
  assertEquals("Mahout",iterable.getModel().getRelation());
  Map<String,Integer> bindings=iterable.getModel().getLabelBindings();
  assertNotNull(bindings);
  assertEquals(5,bindings.size());
  Iterator<Vector> iter=iterable.iterator();
  assertTrue(iter.hasNext());
  Vector next=iter.next();
  assertNotNull(next);
  assertTrue("Wrong instanceof",next instanceof DenseVector);
  assertEquals(1.0,next.get(0),EPSILON);
  assertEquals(2.0,next.get(1),EPSILON);
  assertTrue(iter.hasNext());
  next=iter.next();
  assertNotNull(next);
  assertTrue("Wrong instanceof",next instanceof DenseVector);
  assertEquals(2.0,next.get(0),EPSILON);
  assertEquals(3.0,next.get(1),EPSILON);
  assertTrue(iter.hasNext());
  next=iter.next();
  assertNotNull(next);
  assertTrue("Wrong instanceof",next instanceof RandomAccessSparseVector);
  assertEquals(5.0,next.get(0),EPSILON);
  assertEquals(23.0,next.get(1),EPSILON);
  assertFalse(iter.hasNext());
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSparse() throws Exception {
  Iterable<Vector> iterable=readModelFromResource("sample-sparse.arff");
  Vector firstVector=iterable.iterator().next();
  assertEquals(23.1,firstVector.get(1),0);
  assertEquals(3.23,firstVector.get(2),0);
  assertEquals(1.2,firstVector.get(3),0);
  int count=0;
  for (  Vector vector : iterable) {
    assertTrue("Vector is not dense",vector instanceof RandomAccessSparseVector);
    count++;
  }
  assertEquals(9,count);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNumerics() throws Exception {
  String arff="@RELATION numerics\n" + "@ATTRIBUTE theNumeric NUMERIC\n" + "@ATTRIBUTE theInteger INTEGER\n"+ "@ATTRIBUTE theReal REAL\n"+ "@DATA\n"+ "1.0,2,3.0";
  ARFFModel model=new MapBackedARFFModel();
  ARFFVectorIterable iterable=new ARFFVectorIterable(arff,model);
  model=iterable.getModel();
  assertNotNull(model);
  assertEquals(3,model.getLabelSize());
  assertEquals(ARFFType.NUMERIC,model.getARFFType(0));
  assertEquals(ARFFType.INTEGER,model.getARFFType(1));
  assertEquals(ARFFType.REAL,model.getARFFType(2));
  Iterator<Vector> it=iterable.iterator();
  Vector vector=it.next();
  assertEquals(1.0,vector.get(0),EPSILON);
  assertEquals(2.0,vector.get(1),EPSILON);
  assertEquals(3.0,vector.get(2),EPSILON);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuotes() throws Exception {
  ARFFModel model=new MapBackedARFFModel();
  ARFFVectorIterable iterable=getVectors("quoted-id.arff",model);
  model=iterable.getModel();
  assertNotNull(model);
  assertEquals("quotes",model.getRelation());
  assertEquals(4,model.getLabelSize());
  assertEquals(ARFFType.NUMERIC,model.getARFFType(0));
  assertEquals(ARFFType.INTEGER,model.getARFFType(1));
  assertEquals(ARFFType.REAL,model.getARFFType(2));
  assertEquals(ARFFType.NOMINAL,model.getARFFType(3));
  Map<String,Integer> labelBindings=model.getLabelBindings();
  assertTrue(labelBindings.keySet().contains("thenumeric"));
  assertTrue(labelBindings.keySet().contains("theinteger"));
  assertTrue(labelBindings.keySet().contains("thereal"));
  assertTrue(labelBindings.keySet().contains("thenominal"));
  Map<String,Integer> nominalMap=model.getNominalMap().get("thenominal");
  assertNotNull(nominalMap);
  assertEquals(3,nominalMap.size());
  assertTrue(nominalMap.keySet().contains("double-quote"));
  assertTrue(nominalMap.keySet().contains("single-quote"));
  assertTrue(nominalMap.keySet().contains("no-quote"));
  Iterator<Vector> it=iterable.iterator();
  Vector vector=it.next();
  assertEquals(nominalMap.get("no-quote"),vector.get(3),EPSILON);
  assertEquals(nominalMap.get("single-quote"),it.next().get(3),EPSILON);
  assertEquals(nominalMap.get("double-quote"),it.next().get(3),EPSILON);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.utils.vectors.arff.MapBackedARFFModelTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void processNominal(){
  String windy="windy";
  String breezy="breezy";
  ARFFModel model=new MapBackedARFFModel();
  model.addNominal(windy,breezy,77);
  model.addNominal(windy,"strong",23);
  model.addNominal(windy,"nuking",55);
  Map<String,Map<String,Integer>> nominalMap=model.getNominalMap();
  assertEquals(1,nominalMap.size());
  Map<String,Integer> windyValues=nominalMap.get(windy);
  assertEquals(77,windyValues.get(breezy).intValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.utils.vectors.io.VectorWriterTest </h4><pre class="type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSFVW() throws Exception {
  Path path=getTestTempFilePath("sfvw");
  Configuration conf=getConfiguration();
  FileSystem fs=FileSystem.get(conf);
  SequenceFile.Writer seqWriter=new SequenceFile.Writer(fs,conf,path,LongWritable.class,VectorWritable.class);
  try (SequenceFileVectorWriter writer=new SequenceFileVectorWriter(seqWriter)){
    writer.write(new RandomVectorIterable(50));
  }
   long count=HadoopUtil.countRecords(path,conf);
  assertEquals(50,count);
}

</code></pre>

<br>
<pre class="type-3 type-2 type-9 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTextOutputSize() throws Exception {
  StringWriter strWriter=new StringWriter();
  try (VectorWriter writer=new TextualVectorWriter(strWriter)){
    Collection<Vector> vectors=new ArrayList<>();
    vectors.add(new DenseVector(new double[]{0.3,1.5,4.5}));
    vectors.add(new DenseVector(new double[]{1.3,1.5,3.5}));
    writer.write(vectors);
  }
   String buffer=strWriter.toString();
  assertNotNull(buffer);
  assertFalse(buffer.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.utils.vectors.lucene.CachedTermInfoTest </h4><pre class="type-3 type-5 type-9 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  IndexReader reader=DirectoryReader.open(directory);
  CachedTermInfo cti=new CachedTermInfo(reader,"content",0,100);
  assertEquals(3,cti.totalTerms("content"));
  assertNotNull(cti.getTermEntry("content","a"));
  assertNull(cti.getTermEntry("content","e"));
  cti=new CachedTermInfo(reader,"content",3,100);
  assertEquals(2,cti.totalTerms("content"));
  assertNotNull(cti.getTermEntry("content","a"));
  assertNull(cti.getTermEntry("content","c"));
  cti=new CachedTermInfo(reader,"content",0,85);
  assertEquals(2,cti.totalTerms("content"));
  assertNotNull(cti.getTermEntry("content","b"));
  assertNotNull(cti.getTermEntry("content","c"));
  assertNull(cti.getTermEntry("content","a"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.vectorizer.DocumentProcessorTest </h4><pre class="type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTokenizeDocuments() throws Exception {
  Configuration configuration=getConfiguration();
  Path input=new Path(getTestTempDirPath(),"inputDir");
  Path output=new Path(getTestTempDirPath(),"outputDir");
  FileSystem fs=FileSystem.get(input.toUri(),configuration);
  String documentId1="123";
  String documentId2="456";
  SequenceFile.Writer writer=new SequenceFile.Writer(fs,configuration,input,Text.class,Text.class);
  try {
    String text1="A test for the document processor";
    writer.append(new Text(documentId1),new Text(text1));
    String text2="and another one";
    writer.append(new Text(documentId2),new Text(text2));
  }
  finally {
    Closeables.close(writer,false);
  }
  DocumentProcessor.tokenizeDocuments(input,StandardAnalyzer.class,output,configuration);
  FileStatus[] statuses=fs.listStatus(output,PathFilters.logsCRCFilter());
  assertEquals(1,statuses.length);
  Path filePath=statuses[0].getPath();
  SequenceFile.Reader reader=new SequenceFile.Reader(fs,filePath,configuration);
  Text key=ClassUtils.instantiateAs((Class<? extends Text>)reader.getKeyClass(),Text.class);
  StringTuple value=ClassUtils.instantiateAs((Class<? extends StringTuple>)reader.getValueClass(),StringTuple.class);
  reader.next(key,value);
  assertEquals(documentId1,key.toString());
  assertEquals(Arrays.asList("test","document","processor"),value.getEntries());
  reader.next(key,value);
  assertEquals(documentId2,key.toString());
  assertEquals(Arrays.asList("another","one"),value.getEntries());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.mahout.vectorizer.encoders.WordLikeValueEncoderTest </h4><pre class="type-11 type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStaticWeights(){
  StaticWordValueEncoder enc=new StaticWordValueEncoder("word");
  enc.setDictionary(ImmutableMap.<String,Double>of("word1",3.0,"word2",1.5));
  Vector v=new DenseVector(200);
  enc.addToVector("word1",v);
  enc.addToVector("word2",v);
  enc.addToVector("word3",v);
  Iterator<Vector.Element> i=v.nonZeroes().iterator();
  Iterator<Integer> j=ImmutableList.of(7,101,118,119,152,199).iterator();
  Iterator<Double> k=ImmutableList.of(3.0,0.75,1.5,1.5,0.75,3.0).iterator();
  while (i.hasNext()) {
    Vector.Element element=i.next();
    assertEquals(j.next().intValue(),element.index());
  }
  i=v.nonZeroes().iterator();
  while (i.hasNext()) {
    Vector.Element element=i.next();
    assertEquals(String.format("checking v[%d]",element.index()),k.next(),element.get(),0);
  }
  assertFalse(j.hasNext());
}

</code></pre>

<br>
<pre class="type-11 type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDynamicWeights(){
  FeatureVectorEncoder enc=new AdaptiveWordValueEncoder("word");
  Vector v=new DenseVector(200);
  enc.addToVector("word1",v);
  enc.addToVector("word2",v);
  enc.addToVector("word1",v);
  enc.addToVector("word3",v);
  Iterator<Vector.Element> i=v.nonZeroes().iterator();
  Iterator<Integer> j=ImmutableList.of(7,101,118,119,152,199).iterator();
  Iterator<Double> k=ImmutableList.of(Math.log(2 / 1.5) + Math.log(4.5 / 2.5),Math.log(6 / 1.5),Math.log(3.5 / 1.5),Math.log(3.5 / 1.5),Math.log(6 / 1.5),Math.log(2 / 1.5) + Math.log(4.5 / 2.5)).iterator();
  while (i.hasNext()) {
    Vector.Element element=i.next();
    assertEquals(j.next().intValue(),element.index());
    assertEquals(k.next(),element.get(),1.0e-6);
  }
  assertFalse(j.hasNext());
}

</code></pre>

<br>
<pre class="type-11 type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddToVector(){
  FeatureVectorEncoder enc=new StaticWordValueEncoder("word");
  Vector v=new DenseVector(200);
  enc.addToVector("word1",v);
  enc.addToVector("word2",v);
  Iterator<Vector.Element> i=v.nonZeroes().iterator();
  Iterator<Integer> j=ImmutableList.of(7,118,119,199).iterator();
  while (i.hasNext()) {
    Vector.Element element=i.next();
    assertEquals(j.next().intValue(),element.index());
    assertEquals(1,element.get(),0);
  }
  assertFalse(j.hasNext());
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
