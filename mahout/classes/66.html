<h3 style="margin:0px">Class: org.apache.mahout.classifier.df.data.DataTest (10 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies assertions in iterations"><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >IterativeVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies assertions inside branch conditions"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >BranchVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="15"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('15')" data-toggle="tooltip" title="Verifies values related to public fields."><kbd id="tag-15"class="label-info"style="display: inline-block;font-size:7pt" >PublicFieldVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-11 type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIdenticalFalse() throws Exception {
  int n=10;
  for (int nloop=0; nloop < n; nloop++) {
    Data data=Utils.randomData(rng,ATTRIBUTE_COUNT,false,DATA_SIZE);
    int index=rng.nextInt(DATA_SIZE);
    Instance instance=data.get(index);
    int attr=rng.nextInt(data.getDataset().nbAttributes());
    instance.set(attr,instance.get(attr) + 1);
    assertFalse(data.isIdentical());
  }
}

</code></pre>

<pre class="type-11 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testValues() throws Exception {
  for (int attr=0; attr < classifierData.getDataset().nbAttributes(); attr++) {
    double[] values=classifierData.values(attr);
    for (int index=0; index < DATA_SIZE; index++) {
      assertEquals(1,count(values,classifierData.get(index).get(attr)));
    }
  }
  for (int attr=0; attr < regressionData.getDataset().nbAttributes(); attr++) {
    double[] values=regressionData.values(attr);
    for (int index=0; index < DATA_SIZE; index++) {
      assertEquals(1,count(values,regressionData.get(index).get(attr)));
    }
  }
}

</code></pre>

<pre class="type-3 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
"></span><br>
@Test public void testIdenticalTrue() throws Exception {
  Dataset dataset=Utils.randomData(rng,ATTRIBUTE_COUNT,false,1).getDataset();
  Data empty=new Data(dataset);
  assertTrue(empty.isIdentical());
  Data identical=Utils.randomData(rng,ATTRIBUTE_COUNT,false,DATA_SIZE);
  Instance model=identical.get(0);
  for (int index=1; index < DATA_SIZE; index++) {
    for (int attr=0; attr < identical.getDataset().nbAttributes(); attr++) {
      identical.get(index).set(attr,model.get(attr));
    }
  }
  assertTrue(identical.isIdentical());
}

</code></pre>

<pre class="type-11 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIdenticalLabelFalse() throws Exception {
  int n=10;
  for (int nloop=0; nloop < n; nloop++) {
    String descriptor=Utils.randomDescriptor(rng,ATTRIBUTE_COUNT);
    int label=Utils.findLabel(descriptor);
    double[][] source=Utils.randomDoublesWithSameLabel(rng,descriptor,false,DATA_SIZE,rng.nextInt());
    int index=rng.nextInt(DATA_SIZE);
    source[index][label]++;
    String[] sData=Utils.double2String(source);
    Dataset dataset=DataLoader.generateDataset(descriptor,false,sData);
    Data data=DataLoader.loadData(dataset,sData);
    assertFalse(data.identicalLabel());
  }
}

</code></pre>

<pre class="type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for{@link org.apache.mahout.classifier.df.data.Data#bagging(java.util.Random)}.
 */
@Test public void testBagging(){
  Data bag=classifierData.bagging(rng);
  assertEquals(classifierData.size(),bag.size());
  boolean found=false;
  for (int index=0; index < classifierData.size() && !found; index++) {
    found=!bag.contains(classifierData.get(index));
  }
  assertTrue("some instances from data should not be in the bag",found);
  bag=regressionData.bagging(rng);
  assertEquals(regressionData.size(),bag.size());
  found=false;
  for (int index=0; index < regressionData.size() && !found; index++) {
    found=!bag.contains(regressionData.get(index));
  }
  assertTrue("some instances from data should not be in the bag",found);
}

</code></pre>

<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
"></span><br>
@Test public void testIdenticalLabelTrue() throws Exception {
  Dataset dataset=Utils.randomData(rng,ATTRIBUTE_COUNT,false,1).getDataset();
  Data empty=new Data(dataset);
  assertTrue(empty.identicalLabel());
  String descriptor=Utils.randomDescriptor(rng,ATTRIBUTE_COUNT);
  double[][] source=Utils.randomDoublesWithSameLabel(rng,descriptor,false,DATA_SIZE,rng.nextInt());
  String[] sData=Utils.double2String(source);
  dataset=DataLoader.generateDataset(descriptor,false,sData);
  Data data=DataLoader.loadData(dataset,sData);
  assertTrue(data.identicalLabel());
}

</code></pre>

<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for{@link org.apache.mahout.classifier.df.data.Data#rsplit(java.util.Random,int)}.
 */
@Test public void testRsplit(){
  Data source=classifierData.clone();
  Data subset=source.rsplit(rng,0);
  assertTrue("subset should be empty",subset.isEmpty());
  assertEquals("source.size is incorrect",DATA_SIZE,source.size());
  source=classifierData.clone();
  subset=source.rsplit(rng,DATA_SIZE);
  assertEquals("subset.size is incorrect",DATA_SIZE,subset.size());
  assertTrue("source should be empty",source.isEmpty());
  int subsize=rng.nextInt(DATA_SIZE);
  source=classifierData.clone();
  subset=source.rsplit(rng,subsize);
  assertEquals("subset.size is incorrect",subsize,subset.size());
  assertEquals("source.size is incorrect",DATA_SIZE - subsize,source.size());
  source=regressionData.clone();
  subset=source.rsplit(rng,0);
  assertTrue("subset should be empty",subset.isEmpty());
  assertEquals("source.size is incorrect",DATA_SIZE,source.size());
  source=regressionData.clone();
  subset=source.rsplit(rng,DATA_SIZE);
  assertEquals("subset.size is incorrect",DATA_SIZE,subset.size());
  assertTrue("source should be empty",source.isEmpty());
  subsize=rng.nextInt(DATA_SIZE);
  source=regressionData.clone();
  subset=source.rsplit(rng,subsize);
  assertEquals("subset.size is incorrect",subsize,subset.size());
  assertEquals("source.size is incorrect",DATA_SIZE - subsize,source.size());
}

</code></pre>

<pre class="type-11 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCountLabel() throws Exception {
  Dataset dataset=classifierData.getDataset();
  int[] counts=new int[dataset.nblabels()];
  int n=10;
  for (int nloop=0; nloop < n; nloop++) {
    Arrays.fill(counts,0);
    classifierData.countLabels(counts);
    for (int index=0; index < classifierData.size(); index++) {
      counts[(int)dataset.getLabel(classifierData.get(index))]--;
    }
    for (int label=0; label < classifierData.getDataset().nblabels(); label++) {
      assertEquals("Wrong label 'equals' count",0,counts[0]);
    }
  }
}

</code></pre>

<pre class="type-11 type-3 type-8 type-2 type-5 type-15 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies values related to public fields.
"></span><br>
/** 
 * Test method for{@link org.apache.mahout.classifier.df.data.Data#subset(org.apache.mahout.classifier.df.data.conditions.Condition)}.
 */
@Test public void testSubset(){
  int n=10;
  for (int nloop=0; nloop < n; nloop++) {
    int attr=rng.nextInt(classifierData.getDataset().nbAttributes());
    double[] values=classifierData.values(attr);
    double value=values[rng.nextInt(values.length)];
    Data eSubset=classifierData.subset(Condition.equals(attr,value));
    Data lSubset=classifierData.subset(Condition.lesser(attr,value));
    Data gSubset=classifierData.subset(Condition.greaterOrEquals(attr,value));
    for (int index=0; index < DATA_SIZE; index++) {
      Instance instance=classifierData.get(index);
      if (instance.get(attr) < value) {
        assertTrue(lSubset.contains(instance));
        assertFalse(eSubset.contains(instance));
        assertFalse(gSubset.contains(instance));
      }
 else       if (instance.get(attr) == value) {
        assertFalse(lSubset.contains(instance));
        assertTrue(eSubset.contains(instance));
        assertTrue(gSubset.contains(instance));
      }
 else {
        assertFalse(lSubset.contains(instance));
        assertFalse(eSubset.contains(instance));
        assertTrue(gSubset.contains(instance));
      }
    }
    attr=rng.nextInt(regressionData.getDataset().nbAttributes());
    values=regressionData.values(attr);
    value=values[rng.nextInt(values.length)];
    eSubset=regressionData.subset(Condition.equals(attr,value));
    lSubset=regressionData.subset(Condition.lesser(attr,value));
    gSubset=regressionData.subset(Condition.greaterOrEquals(attr,value));
    for (int index=0; index < DATA_SIZE; index++) {
      Instance instance=regressionData.get(index);
      if (instance.get(attr) < value) {
        assertTrue(lSubset.contains(instance));
        assertFalse(eSubset.contains(instance));
        assertFalse(gSubset.contains(instance));
      }
 else       if (instance.get(attr) == value) {
        assertFalse(lSubset.contains(instance));
        assertTrue(eSubset.contains(instance));
        assertTrue(gSubset.contains(instance));
      }
 else {
        assertFalse(lSubset.contains(instance));
        assertFalse(eSubset.contains(instance));
        assertTrue(gSubset.contains(instance));
      }
    }
  }
}

</code></pre>

<pre class="type-3 type-2 type-5 type-4 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMajorityLabel() throws Exception {
  String descriptor=Utils.randomDescriptor(rng,ATTRIBUTE_COUNT);
  int label=Utils.findLabel(descriptor);
  int label1=rng.nextInt();
  double[][] source=Utils.randomDoublesWithSameLabel(rng,descriptor,false,100,label1);
  String[] sData=Utils.double2String(source);
  Dataset dataset=DataLoader.generateDataset(descriptor,false,sData);
  Data data=DataLoader.loadData(dataset,sData);
  int code1=dataset.labelCode(Double.toString(label1));
  assertEquals(code1,data.majorityLabel(rng));
  int label2=label1 + 1;
  int nblabel2=51;
  while (nblabel2 > 0) {
    double[] vector=source[rng.nextInt(100)];
    if (vector[label] != label2) {
      vector[label]=label2;
      nblabel2--;
    }
  }
  sData=Utils.double2String(source);
  dataset=DataLoader.generateDataset(descriptor,false,sData);
  data=DataLoader.loadData(dataset,sData);
  int code2=dataset.labelCode(Double.toString(label2));
  assertEquals(code2,data.majorityLabel(rng));
  do {
    double[] vector=source[rng.nextInt(100)];
    if (vector[label] == label2) {
      vector[label]=label1;
      break;
    }
  }
 while (true);
  sData=Utils.double2String(source);
  data=DataLoader.loadData(dataset,sData);
  code1=dataset.labelCode(Double.toString(label1));
  code2=dataset.labelCode(Double.toString(label2));
  boolean found1=false;
  boolean found2=false;
  for (int index=0; index < 10 && (!found1 || !found2); index++) {
    int major=data.majorityLabel(rng);
    if (major == code1) {
      found1=true;
    }
    if (major == code2) {
      found2=true;
    }
  }
  assertTrue(found1 && found2);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
