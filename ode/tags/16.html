<h3><span class=" glyphicon glyphicon-tag"/>&nbspBranchVerifier</h3><kbd>Verifies assertions inside branch conditions</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.ode.bpel.elang.xpath20.compiler.XPath20ExpressionCompilerImplTest </h4><pre class="type-11 type-2 type-16 type-6 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testresolvedFunctionsTimeStamp() throws Exception {
  XPath20ExpressionCompilerImpl xp20Exp=new XPath20ExpressionCompilerImpl(TEST_NAMESPACE);
  final Method[] methods=xp20Exp.getClass().getDeclaredMethods();
  for (int i=0; i < methods.length; ++i) {
    if (methods[i].getName().equals(EXTRACT_FUNCTION_EXPRS)) {
      String multipleFunctions="concat(current-date() + xs:dayTimeDuration(concat(\"P\", $DAYS_TO_NEXT_REMINDER, \"D\")), \"T\", \"08:30:00.000+08:00\")";
      final Object params[]={multipleFunctions};
      methods[i].setAccessible(true);
      Object ret=methods[i].invoke(xp20Exp,params);
      List<?> values=(List<?>)ret;
      Assert.assertEquals(1,values.size());
      Assert.assertEquals("Unexpected Function value",multipleFunctions,(String)values.get(0));
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-2 type-16 type-6 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testresolvedFunctionsExpr() throws Exception {
  XPath20ExpressionCompilerImpl xp20Exp=new XPath20ExpressionCompilerImpl(TEST_NAMESPACE);
  final Method[] methods=xp20Exp.getClass().getDeclaredMethods();
  for (int i=0; i < methods.length; ++i) {
    if (methods[i].getName().equals(EXTRACT_FUNCTION_EXPRS)) {
      final Object params[]={"count(count(1))"};
      methods[i].setAccessible(true);
      Object ret=methods[i].invoke(xp20Exp,params);
      List<?> values=(List<?>)ret;
      Assert.assertEquals(1,values.size());
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-2 type-16 type-6 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTimeStampInFunction() throws Exception {
  XPath20ExpressionCompilerImpl xp20Exp=new XPath20ExpressionCompilerImpl(TEST_NAMESPACE);
  final Method[] methods=xp20Exp.getClass().getDeclaredMethods();
  for (int i=0; i < methods.length; ++i) {
    if (methods[i].getName().equals(EXTRACT_FUNCTION_EXPRS)) {
      final Object params[]={"concat(xs:concat(\"P\", \"08:30:00.000+08:00\"))"};
      methods[i].setAccessible(true);
      Object ret=methods[i].invoke(xp20Exp,params);
      List<?> values=(List<?>)ret;
      Assert.assertEquals(1,values.size());
    }
  }
}

</code></pre>

<br>
<pre class="type-11 type-2 type-16 type-6 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testExtractFunctionsExprs() throws Exception {
  XPath20ExpressionCompilerImpl xp20Exp=new XPath20ExpressionCompilerImpl(TEST_NAMESPACE);
  final Method[] methods=xp20Exp.getClass().getDeclaredMethods();
  String ODE_840="bpel:doXslTransform(\"1.0.1/some.xsl\", $Variable.body, \"someParameter\", $OtherVariable.body, \"someParameter2\", $SwsHeaderRQ, \"someParameter3\", true(), \"someXpathParameter\", $XPath)";
  for (int i=0; i < methods.length; ++i) {
    if (methods[i].getName().equals(EXTRACT_FUNCTION_EXPRS)) {
      final Object params[]={ODE_840};
      methods[i].setAccessible(true);
      Object ret=methods[i].invoke(xp20Exp,params);
      List<?> values=(List<?>)ret;
      Assert.assertEquals(1,values.size());
      Assert.assertEquals("Unexpected Function value",ODE_840,(String)values.get(0));
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.ode.bpel.elang.xpath20.runtime.XPath20ExpressionRuntimeTest </h4><pre class="type-16 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testVariableInsertMissingData() throws Exception {
  String insertElementName="InsertedNode";
  OXPath20ExpressionBPEL20 exp=compile("$reallyEmptyVar/" + insertElementName);
  exp.setInsertMissingData(true);
  _rootNode=DOMUtils.stringToDOM("<tns:ApplicationData xmlns:tns=\"http://foobar\"/>");
  java.util.List<?> list=_runtime.evaluate(exp,this);
  if (list == null || list.size() != 0) {
    fail("List should have no elements");
  }
  if (((Element)_rootNode).getElementsByTagName(insertElementName).getLength() != 1) {
    fail("Missing '" + insertElementName + "' element has not been inserted");
  }
}

</code></pre>

<br>
<pre class="type-16 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testMessageInsertMissingData() throws Exception {
  String insertElementName="InsertedNode";
  OXPath20ExpressionBPEL20 exp=compile("$messageVar.parameters/" + insertElementName);
  exp.setInsertMissingData(true);
  _rootNode=DOMUtils.stringToDOM("<message><parameters>" + "<tns:ApplicationData xmlns:tns=\"http://foobar\"/></parameters></message>");
  java.util.List<?> list=_runtime.evaluate(exp,this);
  if (list == null || list.size() != 0) {
    fail("List should have no elements");
  }
  if (((Element)_rootNode).getElementsByTagName(insertElementName).getLength() != 1) {
    fail("Missing '" + insertElementName + "' element has not been inserted");
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
