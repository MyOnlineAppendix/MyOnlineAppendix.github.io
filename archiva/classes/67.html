<h3 style="margin:0px">Class: org.apache.archiva.proxy.MetadataTransferTest (34 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(33)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetGroupMetadataNotProxiedOnLocal() throws Exception {
  String requestedResource="org/apache/maven/test/groups/get-project-metadata/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  assertResourceExists(requestedResource);
  assertFetchProjectOrGroup(requestedResource);
  assertGroupMetadataContents(requestedResource,new String[]{"plugin1"});
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetGroupMetadataNotProxiedNotLocal() throws Exception {
  String requestedResource="org/apache/maven/test/groups/get-default-metadata-nonexistant/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  assertResourceNotFound(requestedResource);
  assertFetchProjectOrGroupFailed(requestedResource);
  assertResourceNotFound(requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetSnapshotMetadataProxiedOnLocalOnRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-present-metadata-snapshot/1.0-SNAPSHOT/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertSnapshotMetadataContents(requestedResource,"20050831","101112",1);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertFetchVersioned(requestedResource);
  assertSnapshotMetadataContents(requestedResource,"20050831","101112",1);
  assertRepoSnapshotMetadataContents(ID_PROXIED1,requestedResource,"20050831","101112",1);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetSnapshotMetadataProxiedNotLocalNotRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-default-metadata-nonexistant/1.0-SNAPSHOT/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertNoMetadata(requestedResource);
  assertFetchVersionedFailed(requestedResource);
  assertNoMetadata(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetGroupMetadataProxiedNotLocalMultipleRemotes() throws Exception {
  String requestedResource="org/apache/maven/test/groups/get-default-layout/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchProjectOrGroup(requestedResource);
  assertGroupMetadataContents(requestedResource,new String[]{"plugin2","plugin1"});
  assertRepoGroupMetadataContents(ID_PROXIED1,requestedResource,new String[]{"plugin1"});
  assertRepoGroupMetadataContents(ID_PROXIED2,requestedResource,new String[]{"plugin2"});
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A request for a maven-metadata.xml file that exists in the managed repository, and on one
 * remote repository.
 * <p/>
 * Expected result: the maven-metadata.xml file on the remote proxied repository is downloaded
 * and merged into the contents of the existing managed repository copy of
 * the maven-metadata.xml file.
 */
@Test public void testGetReleaseMetadataProxiedOnLocalOnRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-on-local-on-remote/1.0.22/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertReleaseMetadataContents(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertFetchVersioned(requestedResource);
  assertReleaseMetadataContents(requestedResource);
  assertRepoReleaseMetadataContents(ID_PROXIED1,requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A request for a maven-metadata.xml file that does exist locally, and the managed
 * repository has no proxied repositories set up.
 * <p/>
 * Expected result: the maven-metadata.xml file is updated locally, based off of the managed repository
 * information, and then returned to the client.
 */
@Test public void testGetReleaseMetadataNotProxiedOnLocal() throws Exception {
  String requestedResource="org/apache/maven/test/get-default-metadata/1.0/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  assertResourceExists(requestedResource);
  assertFetchVersioned(requestedResource);
  assertReleaseMetadataContents(requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetGroupsMetadataProxiedNotLocalNotRemote() throws Exception {
  String requestedResource="org/apache/maven/test/groups/get-bogus-artifact/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchProjectOrGroupFailed(requestedResource);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetSnapshotMetadataNotProxiedNotLocal() throws Exception {
  String requestedResource="org/apache/maven/test/get-default-metadata-nonexistant/1.0-SNAPSHOT/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  assertNoMetadata(requestedResource);
  assertFetchVersionedFailed(requestedResource);
  assertNoMetadata(requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetProjectMetadataProxiedOnLocalMultipleRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-on-multiple-repos/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertProjectMetadataContents(requestedResource,new String[]{"1.0"},null,null);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchProjectOrGroup(requestedResource);
  assertProjectMetadataContents(requestedResource,new String[]{"1.0","1.0.1","2.0"},"2.0","2.0");
  assertRepoProjectMetadata(ID_PROXIED1,requestedResource,new String[]{"1.0","2.0"});
  assertRepoProjectMetadata(ID_PROXIED2,requestedResource,new String[]{"1.0","1.0.1"});
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A request for a maven-metadata.xml file that exists in the managed repository, but
 * not on any remote repository.
 * <p/>
 * Expected result: the maven-metadata.xml file does not exist on the remote proxied repository and
 * is not downloaded.  There is no repository specific metadata file on the managed
 * repository.  The managed repository maven-metadata.xml is returned to the
 * client as-is.
 */
@Test public void testGetReleaseMetadataProxiedOnLocalNotRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-not-on-remotes/1.0-beta-2/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertReleaseMetadataContents(requestedResource);
  assertFetchVersioned(requestedResource);
  assertReleaseMetadataContents(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Attempt to get the project metadata for non-existant artifact.
 * <p/>
 * Expected result: the maven-metadata.xml file is not created on the managed repository, nor returned
 * to the requesting client.
 */
@Test public void testGetProjectMetadataNotProxiedNotLocal() throws Exception {
  String requestedResource="org/apache/maven/test/get-default-metadata-nonexistant/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  config.getConfiguration().setProxyConnectors(new ArrayList<ProxyConnectorConfiguration>());
  assertResourceNotFound(requestedResource);
  assertFetchProjectOrGroupFailed(requestedResource);
  assertResourceNotFound(requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetGroupMetadataProxiedNotLocalOnRemote() throws Exception {
  String requestedResource="org/apache/maven/test/groups/get-found-in-proxy/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertFetchProjectOrGroup(requestedResource);
  assertGroupMetadataContents(requestedResource,new String[]{"plugin3"});
  assertRepoGroupMetadataContents(ID_PROXIED1,requestedResource,new String[]{"plugin3"});
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A request for a release maven-metadata.xml file that does not exist locally, and the managed
 * repository has no proxied repositories set up.
 * <p/>
 * Expected result: the maven-metadata.xml file is not created on the managed repository, nor returned
 * to the requesting client.
 */
@Test public void testGetReleaseMetadataNotProxiedNotLocal() throws Exception {
  String requestedResource="org/apache/maven/test/get-default-metadata-nonexistant/1.0/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  assertNoMetadata(requestedResource);
  assertFetchVersionedFailed(requestedResource);
  assertNoMetadata(requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetSnapshotMetadataProxiedNotLocalMultipleRemotes() throws Exception {
  String requestedResource="org/apache/maven/test/get-timestamped-snapshot-in-both/1.0-SNAPSHOT/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchVersioned(requestedResource);
  assertSnapshotMetadataContents(requestedResource,"20070101","000103",2);
  assertRepoSnapshotMetadataContents(ID_PROXIED1,requestedResource,"20061227","112101",2);
  assertRepoSnapshotMetadataContents(ID_PROXIED2,requestedResource,"20070101","000103",2);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetSnapshotMetadataNotProxiedOnLocal() throws Exception {
  String requestedResource="org/apache/maven/test/get-snapshot-on-local-not-remote/2.0-alpha-2-SNAPSHOT/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  assertResourceExists(requestedResource);
  assertFetchVersioned(requestedResource);
  assertSnapshotMetadataContents(requestedResource,"20070821","220304",2);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetGroupMetadataProxiedOnLocalOnRemote() throws Exception {
  String requestedResource="org/apache/maven/test/groups/get-on-local-on-remote/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertGroupMetadataContents(requestedResource,new String[]{"plugin6","plugin7"});
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertFetchProjectOrGroup(requestedResource);
  assertGroupMetadataContents(requestedResource,new String[]{"plugin6","plugin7","plugin4"});
  assertRepoGroupMetadataContents(ID_PROXIED1,requestedResource,new String[]{"plugin7","plugin4"});
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testFetchFromTwoProxiesWhenFirstConnectionFails() throws Exception {
  String requestedResource="org/apache/maven/test/get-default-layout/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveRemoteRepositoryConfig("badproxied1","Bad Proxied 1","test://bad.machine.com/repo/","default");
  saveConnector(ID_DEFAULT_MANAGED,"badproxied1",ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata("badproxied1",requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  File expectedFile=new File(managedDefaultDir.getAbsoluteFile(),metadataTools.getRepositorySpecificName("badproxied1",requestedResource));
  wagonMock.get(EasyMock.eq(requestedResource),EasyMock.anyObject(File.class));
  EasyMock.expectLastCall().andThrow(new TransferFailedException("can't connect"));
  wagonMockControl.replay();
  assertFetchProjectOrGroup(requestedResource);
  wagonMockControl.verify();
  assertProjectMetadataContents(requestedResource,new String[]{"1.0.1"},"1.0.1","1.0.1");
  assertNoRepoMetadata("badproxied1",requestedResource);
  assertRepoProjectMetadata(ID_PROXIED2,requestedResource,new String[]{"1.0.1"});
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetGroupMetadataProxiedOnLocalMultipleRemote() throws Exception {
  String requestedResource="org/apache/maven/test/groups/get-on-multiple-repos/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertGroupMetadataContents(requestedResource,new String[]{"plugin1"});
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchProjectOrGroup(requestedResource);
  assertGroupMetadataContents(requestedResource,new String[]{"plugin1","plugin2","plugin4"});
  assertRepoGroupMetadataContents(ID_PROXIED1,requestedResource,new String[]{"plugin1","plugin4"});
  assertRepoGroupMetadataContents(ID_PROXIED2,requestedResource,new String[]{"plugin1","plugin2"});
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A request for a release maven-metadata.xml file that does not exist on the managed repository, but
 * exists on multiple remote repositories.
 * <p/>
 * Expected result: the maven-metadata.xml file is downloaded from the remote into the repository specific
 * file location on the managed repository, a merge of the contents to the requested
 * maven-metadata.xml is performed, and then the merged maven-metadata.xml file is
 * returned to the client.
 */
@Test public void testGetReleaseMetadataProxiedNotLocalMultipleRemotes() throws Exception {
  String requestedResource="org/apache/maven/test/get-default-layout/1.0/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchVersioned(requestedResource);
  assertReleaseMetadataContents(requestedResource);
  assertRepoReleaseMetadataContents(ID_PROXIED1,requestedResource);
  assertRepoReleaseMetadataContents(ID_PROXIED2,requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetProjectMetadataProxiedOnLocalNotRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-not-on-remotes/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  config.getConfiguration().setProxyConnectors(new ArrayList<ProxyConnectorConfiguration>());
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertProjectMetadataContents(requestedResource,new String[]{"1.0-beta-2"},null,null);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchProjectOrGroup(requestedResource);
  assertProjectMetadataContents(requestedResource,new String[]{"1.0-beta-2"},null,null);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A request for a maven-metadata.xml file that does not exist on the managed repository, but
 * exists on 1 remote repository.
 * <p/>
 * Expected result: the maven-metadata.xml file is downloaded from the remote into the repository specific
 * file location on the managed repository, a merge of the contents to the requested
 * maven-metadata.xml is performed, and then the merged maven-metadata.xml file is
 * returned to the client.
 */
@Test public void testGetReleaseMetadataProxiedNotLocalOnRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-default-layout/1.0/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertFetchVersioned(requestedResource);
  assertReleaseMetadataContents(requestedResource);
  assertRepoReleaseMetadataContents(ID_PROXIED1,requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetProjectMetadataNotProxiedOnLocal() throws Exception {
  String requestedResource="org/apache/maven/test/get-project-metadata/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  config.getConfiguration().setProxyConnectors(new ArrayList<ProxyConnectorConfiguration>());
  assertResourceExists(requestedResource);
  assertFetchProjectOrGroup(requestedResource);
  assertProjectMetadataContents(requestedResource,new String[]{"1.0"},null,null);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetProjectMetadataProxiedNotLocalNotRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-bogus-artifact/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchProjectOrGroupFailed(requestedResource);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A request for a maven-metadata.xml file that does not exist locally, nor does it exist in a remote
 * proxied repository.
 * <p/>
 * Expected result: the maven-metadata.xml file is created locally, based off of managed repository
 * information, and then return to the client.
 */
@Test public void testGetReleaseMetadataProxiedNotLocalNotRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-bad-metadata/1.0/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertResourceNotFound(requestedResource);
  assertFetchProjectOrGroupFailed(requestedResource);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetProjectMetadataProxiedNotLocalOnRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-found-in-proxy/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertFetchProjectOrGroup(requestedResource);
  assertProjectMetadataContents(requestedResource,new String[]{"1.0.5"},"1.0.5","1.0.5");
  assertRepoProjectMetadata(ID_PROXIED1,requestedResource,new String[]{"1.0.5"});
}

</code></pre>

<pre class="type-9 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void testGetProjectMetadataProxiedNotLocalOnRemoteConnectoDisabled() throws Exception {
  String requestedResource="org/apache/maven/test/get-found-in-proxy/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,true);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  File expectedFile=new File(managedDefaultDir,requestedResource);
  ProjectReference metadata=createProjectReference(requestedResource);
  File downloadedFile=proxyHandler.fetchMetadataFromProxies(managedDefaultRepository,managedDefaultRepository.toMetadataPath(metadata)).getFile();
  assertNull("Should not have downloaded a file.",downloadedFile);
  assertNoTempFiles(expectedFile);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetProjectMetadataProxiedNotLocalMultipleRemotes() throws Exception {
  String requestedResource="org/apache/maven/test/get-default-layout/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertResourceNotFound(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchProjectOrGroup(requestedResource);
  assertProjectMetadataContents(requestedResource,new String[]{"1.0","1.0.1"},"1.0.1","1.0.1");
  assertRepoProjectMetadata(ID_PROXIED1,requestedResource,new String[]{"1.0"});
  assertRepoProjectMetadata(ID_PROXIED2,requestedResource,new String[]{"1.0.1"});
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetProjectMetadataProxiedOnLocalOnRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-on-local-on-remote/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertProjectMetadataContents(requestedResource,new String[]{"1.0.8","1.0.22"},null,null);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertFetchProjectOrGroup(requestedResource);
  assertProjectMetadataContents(requestedResource,new String[]{"1.0.8","1.0.22","2.0"},"2.0","2.0");
  assertRepoProjectMetadata(ID_PROXIED1,requestedResource,new String[]{"1.0.22","2.0"});
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetSnapshotMetadataProxiedNotLocalOnRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-metadata-snapshot/1.0-SNAPSHOT/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertResourceNotFound(requestedResource);
  assertFetchVersioned(requestedResource);
  assertSnapshotMetadataContents(requestedResource,"20050831","101112",1);
  assertRepoSnapshotMetadataContents(ID_PROXIED1,requestedResource,"20050831","101112",1);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * A request for a maven-metadata.xml file that exists in the managed repository, and on multiple
 * remote repositories.
 * <p/>
 * Expected result: the maven-metadata.xml file on the remote proxied repository is downloaded
 * and merged into the contents of the existing managed repository copy of
 * the maven-metadata.xml file.
 */
@Test public void testGetReleaseMetadataProxiedOnLocalMultipleRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-on-multiple-repos/1.0/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertReleaseMetadataContents(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchVersioned(requestedResource);
  assertReleaseMetadataContents(requestedResource);
  assertRepoReleaseMetadataContents(ID_PROXIED1,requestedResource);
  assertRepoReleaseMetadataContents(ID_PROXIED2,requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetSnapshotMetadataProxiedOnLocalMultipleRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-snapshot-popular/2.0-SNAPSHOT/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertSnapshotMetadataContents(requestedResource,"20070822","021008",3);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchVersioned(requestedResource);
  assertSnapshotMetadataContents(requestedResource,"20070823","212711",6);
  assertRepoSnapshotMetadataContents(ID_PROXIED1,requestedResource,"20070822","145534",9);
  assertRepoSnapshotMetadataContents(ID_PROXIED2,requestedResource,"20070823","212711",6);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetGroupMetadataProxiedOnLocalNotRemote() throws Exception {
  String requestedResource="org/apache/maven/test/groups/get-not-on-remotes/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertGroupMetadataContents(requestedResource,new String[]{"plugin5"});
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchProjectOrGroup(requestedResource);
  assertGroupMetadataContents(requestedResource,new String[]{"plugin5"});
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testGetSnapshotMetadataProxiedOnLocalNotRemote() throws Exception {
  String requestedResource="org/apache/maven/test/get-snapshot-on-local-not-remote/2.0-alpha-2-SNAPSHOT/maven-metadata.xml";
  setupTestableManagedRepository(requestedResource);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED1,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  saveConnector(ID_DEFAULT_MANAGED,ID_PROXIED2,ChecksumPolicy.FIX,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,false);
  assertResourceExists(requestedResource);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
  assertFetchVersioned(requestedResource);
  assertSnapshotMetadataContents(requestedResource,"20070821","220304",2);
  assertNoRepoMetadata(ID_PROXIED1,requestedResource);
  assertNoRepoMetadata(ID_PROXIED2,requestedResource);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
