<h3><span class=" glyphicon glyphicon-tag"/>&nbspHybridVerifier</h3><kbd>Contains more than 2 JUnit-based stereotypes</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.archiva.RuntimeInfoServiceTest </h4><pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void runtimeInfoService() throws Exception {
  RuntimeInfoService service=JAXRSClientFactory.create(getBaseUrl() + "/" + getRestServicesPath()+ "/archivaUiServices/",RuntimeInfoService.class,Collections.singletonList(new JacksonJaxbJsonProvider()));
  ApplicationRuntimeInfo applicationRuntimeInfo=service.getApplicationRuntimeInfo("en");
  assertEquals(System.getProperty("expectedVersion"),applicationRuntimeInfo.getVersion());
  assertFalse(applicationRuntimeInfo.isJavascriptLog());
  assertTrue(applicationRuntimeInfo.isLogMissingI18n());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.admin.repository.admin.ArchivaAdministrationTest </h4><pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllLegacyPaths() throws Exception {
  assertNotNull(archivaAdministration.getLegacyArtifactPaths());
  assertFalse(archivaAdministration.getLegacyArtifactPaths().isEmpty());
  assertEquals(1,archivaAdministration.getLegacyArtifactPaths().size());
  log.info("all legacy paths {}",archivaAdministration.getLegacyArtifactPaths());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void uiConfiguration() throws Exception {
  UiConfiguration oldUi=archivaAdministration.getUiConfiguration();
  assertNotNull(oldUi);
  assertFalse(oldUi.isDisableEasterEggs());
  assertTrue(oldUi.isAppletFindEnabled());
  assertTrue(oldUi.isShowFindArtifacts());
  assertFalse(oldUi.isDisableRegistration());
  UiConfiguration ui=archivaAdministration.getUiConfiguration();
  ui.setAppletFindEnabled(false);
  ui.setShowFindArtifacts(false);
  ui.setDisableEasterEggs(true);
  ui.setDisableRegistration(true);
  archivaAdministration.updateUiConfiguration(ui);
  ui=archivaAdministration.getUiConfiguration();
  assertTrue(ui.isDisableEasterEggs());
  assertFalse(ui.isAppletFindEnabled());
  assertFalse(ui.isShowFindArtifacts());
  assertTrue(ui.isDisableRegistration());
  archivaAdministration.updateUiConfiguration(oldUi);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void knownContentConsumersTest() throws Exception {
  int initialSize=archivaAdministration.getKnownContentConsumers().size();
  archivaAdministration.addKnownContentConsumer("foo",getFakeAuditInformation());
  assertEquals(initialSize + 1,archivaAdministration.getKnownContentConsumers().size());
  assertTrue(archivaAdministration.getKnownContentConsumers().contains("foo"));
  archivaAdministration.addKnownContentConsumer("foo",getFakeAuditInformation());
  assertEquals(initialSize + 1,archivaAdministration.getKnownContentConsumers().size());
  assertTrue(archivaAdministration.getKnownContentConsumers().contains("foo"));
  archivaAdministration.removeKnownContentConsumer("foo",getFakeAuditInformation());
  assertEquals(initialSize,archivaAdministration.getKnownContentConsumers().size());
  assertFalse(archivaAdministration.getKnownContentConsumers().contains("foo"));
  assertEquals(2,mockAuditListener.getAuditEvents().size());
  assertEquals(AuditEvent.ENABLE_REPO_CONSUMER,mockAuditListener.getAuditEvents().get(0).getAction());
  assertEquals(AuditEvent.DISABLE_REPO_CONSUMER,mockAuditListener.getAuditEvents().get(1).getAction());
  mockAuditListener.clearEvents();
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void networkConfiguration() throws Exception {
  NetworkConfiguration networkConfiguration=archivaAdministration.getNetworkConfiguration();
  assertNotNull(networkConfiguration);
  assertTrue(networkConfiguration.isUsePooling());
  assertEquals(30,networkConfiguration.getMaxTotal());
  assertEquals(30,networkConfiguration.getMaxTotalPerHost());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void organisationInfoUpdate() throws Exception {
  OrganisationInformation oldOrganisationInformation=archivaAdministration.getOrganisationInformation();
  assertNotNull(oldOrganisationInformation);
  assertNull(oldOrganisationInformation.getLogoLocation());
  assertNull(oldOrganisationInformation.getName());
  assertNull(oldOrganisationInformation.getUrl());
  OrganisationInformation newOrganisationInformation=new OrganisationInformation();
  newOrganisationInformation.setLogoLocation("http://foo.com/bar.png");
  newOrganisationInformation.setName("foo org");
  newOrganisationInformation.setUrl("http://foo.com");
  archivaAdministration.setOrganisationInformation(newOrganisationInformation);
  newOrganisationInformation=archivaAdministration.getOrganisationInformation();
  assertNotNull(newOrganisationInformation);
  assertEquals("http://foo.com/bar.png",newOrganisationInformation.getLogoLocation());
  assertEquals("foo org",newOrganisationInformation.getName());
  assertEquals("http://foo.com",newOrganisationInformation.getUrl());
  archivaAdministration.setOrganisationInformation(oldOrganisationInformation);
}

</code></pre>

<br>
<pre class="type-6 type-8 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=RepositoryAdminException.class) public void addFileTypePatternAgain() throws RepositoryAdminException {
  try {
    archivaAdministration.addFileTypePattern("artifacts","**/*.jar",getFakeAuditInformation());
  }
 catch (  RepositoryAdminException e) {
    assertEquals("File type [artifacts] already contains pattern [**/*.jar]",e.getMessage());
    throw e;
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void invalidContentConsumersTest() throws Exception {
  int initialSize=archivaAdministration.getInvalidContentConsumers().size();
  archivaAdministration.addInvalidContentConsumer("foo",getFakeAuditInformation());
  assertEquals(initialSize + 1,archivaAdministration.getInvalidContentConsumers().size());
  assertTrue(archivaAdministration.getInvalidContentConsumers().contains("foo"));
  archivaAdministration.addInvalidContentConsumer("foo",getFakeAuditInformation());
  assertEquals(initialSize + 1,archivaAdministration.getInvalidContentConsumers().size());
  assertTrue(archivaAdministration.getInvalidContentConsumers().contains("foo"));
  archivaAdministration.removeInvalidContentConsumer("foo",getFakeAuditInformation());
  assertEquals(initialSize,archivaAdministration.getInvalidContentConsumers().size());
  assertFalse(archivaAdministration.getInvalidContentConsumers().contains("foo"));
  assertEquals(2,mockAuditListener.getAuditEvents().size());
  assertEquals(AuditEvent.ENABLE_REPO_CONSUMER,mockAuditListener.getAuditEvents().get(0).getAction());
  assertEquals(AuditEvent.DISABLE_REPO_CONSUMER,mockAuditListener.getAuditEvents().get(1).getAction());
  mockAuditListener.clearEvents();
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndUpdateAndDeleteFileType() throws RepositoryAdminException {
  int initialSize=archivaAdministration.getFileTypes().size();
  FileType fileType=new FileType();
  fileType.setId("foo");
  fileType.setPatterns(Arrays.asList("bar","toto"));
  archivaAdministration.addFileType(fileType,getFakeAuditInformation());
  assertEquals(initialSize + 1,archivaAdministration.getFileTypes().size());
  archivaAdministration.addFileTypePattern("foo","zorro",getFakeAuditInformation());
  assertEquals(initialSize + 1,archivaAdministration.getFileTypes().size());
  assertEquals(3,archivaAdministration.getFileType("foo").getPatterns().size());
  assertTrue(archivaAdministration.getFileType("foo").getPatterns().contains("bar"));
  assertTrue(archivaAdministration.getFileType("foo").getPatterns().contains("toto"));
  assertTrue(archivaAdministration.getFileType("foo").getPatterns().contains("zorro"));
  archivaAdministration.removeFileTypePattern("foo","zorro",getFakeAuditInformation());
  assertEquals(initialSize + 1,archivaAdministration.getFileTypes().size());
  assertEquals(2,archivaAdministration.getFileType("foo").getPatterns().size());
  assertTrue(archivaAdministration.getFileType("foo").getPatterns().contains("bar"));
  assertTrue(archivaAdministration.getFileType("foo").getPatterns().contains("toto"));
  assertFalse(archivaAdministration.getFileType("foo").getPatterns().contains("zorro"));
  archivaAdministration.removeFileType("foo",getFakeAuditInformation());
  assertEquals(initialSize,archivaAdministration.getFileTypes().size());
  assertNull(archivaAdministration.getFileType("foo"));
  mockAuditListener.clearEvents();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.admin.repository.group.RepositoryGroupAdminTest </h4><pre class="type-5 type-7 type-6 type-8 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=RepositoryAdminException.class) public void testAddAndUpdateGroupWithInvalidMergedIndexTtl() throws Exception {
  try {
    ManagedRepository managedRepositoryOne=getTestManagedRepository("test-new-one",APPSERVER_BASE_PATH + File.separator + "test-new-one");
    ManagedRepository managedRepositoryTwo=getTestManagedRepository("test-new-two",APPSERVER_BASE_PATH + File.separator + "test-new-two");
    managedRepositoryAdmin.addManagedRepository(managedRepositoryOne,false,getFakeAuditInformation());
    managedRepositoryAdmin.addManagedRepository(managedRepositoryTwo,false,getFakeAuditInformation());
    RepositoryGroup repositoryGroup=new RepositoryGroup("repo-group-one",Arrays.asList("test-new-one","test-new-two"));
    mockAuditListener.clearEvents();
    repositoryGroupAdmin.addRepositoryGroup(repositoryGroup,getFakeAuditInformation());
    assertEquals(1,repositoryGroupAdmin.getRepositoriesGroups().size());
    assertEquals("repo-group-one",repositoryGroupAdmin.getRepositoriesGroups().get(0).getId());
    assertEquals(2,repositoryGroupAdmin.getRepositoriesGroups().get(0).getRepositories().size());
    assertEquals(Arrays.asList("test-new-one","test-new-two"),repositoryGroupAdmin.getRepositoriesGroups().get(0).getRepositories());
    assertEquals(30,repositoryGroupAdmin.getRepositoriesGroups().get(0).getMergedIndexTtl());
    assertEquals("/.indexer",repositoryGroupAdmin.getRepositoriesGroups().get(0).getMergedIndexPath());
    repositoryGroup=repositoryGroupAdmin.getRepositoryGroup("repo-group-one");
    assertNotNull(repositoryGroup);
    repositoryGroup.mergedIndexTtl(-1);
    repositoryGroupAdmin.updateRepositoryGroup(repositoryGroup,getFakeAuditInformation());
  }
  finally {
    mockAuditListener.clearEvents();
    managedRepositoryAdmin.deleteManagedRepository("test-new-one",getFakeAuditInformation(),true);
    managedRepositoryAdmin.deleteManagedRepository("test-new-two",getFakeAuditInformation(),true);
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndUpdateAndDeleteGroup() throws Exception {
  try {
    ManagedRepository managedRepositoryOne=getTestManagedRepository("test-new-one",APPSERVER_BASE_PATH + File.separator + "test-new-one");
    ManagedRepository managedRepositoryTwo=getTestManagedRepository("test-new-two",APPSERVER_BASE_PATH + File.separator + "test-new-two");
    managedRepositoryAdmin.addManagedRepository(managedRepositoryOne,false,getFakeAuditInformation());
    managedRepositoryAdmin.addManagedRepository(managedRepositoryTwo,false,getFakeAuditInformation());
    RepositoryGroup repositoryGroup=new RepositoryGroup("repo-group-one",Arrays.asList("test-new-one")).mergedIndexTtl(20).mergedIndexPath("/.nonDefaultPath");
    mockAuditListener.clearEvents();
    repositoryGroupAdmin.addRepositoryGroup(repositoryGroup,getFakeAuditInformation());
    assertEquals(1,repositoryGroupAdmin.getRepositoriesGroups().size());
    assertEquals("repo-group-one",repositoryGroupAdmin.getRepositoriesGroups().get(0).getId());
    assertEquals(1,repositoryGroupAdmin.getRepositoriesGroups().get(0).getRepositories().size());
    assertEquals(Arrays.asList("test-new-one"),repositoryGroupAdmin.getRepositoriesGroups().get(0).getRepositories());
    assertEquals(20,repositoryGroupAdmin.getRepositoriesGroups().get(0).getMergedIndexTtl());
    assertEquals("/.nonDefaultPath",repositoryGroupAdmin.getRepositoriesGroups().get(0).getMergedIndexPath());
    repositoryGroup=repositoryGroupAdmin.getRepositoryGroup("repo-group-one");
    assertNotNull(repositoryGroup);
    repositoryGroup.addRepository(managedRepositoryTwo.getId());
    repositoryGroupAdmin.updateRepositoryGroup(repositoryGroup,getFakeAuditInformation());
    assertEquals(1,repositoryGroupAdmin.getRepositoriesGroups().size());
    assertEquals("repo-group-one",repositoryGroupAdmin.getRepositoriesGroups().get(0).getId());
    assertEquals(2,repositoryGroupAdmin.getRepositoriesGroups().get(0).getRepositories().size());
    assertEquals(Arrays.asList("test-new-one","test-new-two"),repositoryGroupAdmin.getRepositoriesGroups().get(0).getRepositories());
    repositoryGroupAdmin.deleteRepositoryGroup("repo-group-one",getFakeAuditInformation());
    assertEquals(0,repositoryGroupAdmin.getRepositoriesGroups().size());
    assertEquals(3,mockAuditListener.getAuditEvents().size());
    assertEquals(AuditEvent.ADD_REPO_GROUP,mockAuditListener.getAuditEvents().get(0).getAction());
    assertEquals(AuditEvent.MODIFY_REPO_GROUP,mockAuditListener.getAuditEvents().get(1).getAction());
    assertEquals(AuditEvent.DELETE_REPO_GROUP,mockAuditListener.getAuditEvents().get(2).getAction());
  }
  finally {
    mockAuditListener.clearEvents();
    managedRepositoryAdmin.deleteManagedRepository("test-new-one",getFakeAuditInformation(),true);
    managedRepositoryAdmin.deleteManagedRepository("test-new-two",getFakeAuditInformation(),true);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.admin.repository.managed.ManagedRepositoryAdminTest </h4><pre class="type-9 type-3 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addDeleteManagedRepoWithStaged() throws Exception {
  File repoDir=clearRepoLocation(repoLocation);
  mockAuditListener.clearEvents();
  List<ManagedRepository> repos=managedRepositoryAdmin.getManagedRepositories();
  assertNotNull(repos);
  int initialSize=repos.size();
  assertTrue(initialSize > 0);
  ManagedRepository repo=new ManagedRepository();
  repo.setId(repoId);
  repo.setName("test repo");
  repo.setLocation(repoLocation);
  repo.setCronExpression("0 0 * * * ?");
  managedRepositoryAdmin.addManagedRepository(repo,true,getFakeAuditInformation());
  repos=managedRepositoryAdmin.getManagedRepositories();
  assertNotNull(repos);
  assertEquals(initialSize + 2,repos.size());
  assertNotNull(managedRepositoryAdmin.getManagedRepository(repoId));
  assertTemplateRoleExists(repoId);
  assertTrue(repoDir.exists());
  assertNotNull(managedRepositoryAdmin.getManagedRepository(repoId + STAGE_REPO_ID_END));
  assertTemplateRoleExists(repoId + STAGE_REPO_ID_END);
  assertTrue(new File(repoLocation + STAGE_REPO_ID_END).exists());
  managedRepositoryAdmin.deleteManagedRepository(repoId,getFakeAuditInformation(),true);
  assertFalse(repoDir.exists());
  assertFalse(new File(repoLocation + STAGE_REPO_ID_END).exists());
  assertTemplateRoleNotExists(repoId + STAGE_REPO_ID_END);
  repos=managedRepositoryAdmin.getManagedRepositories();
  assertNotNull(repos);
  assertEquals(initialSize,repos.size());
  assertTemplateRoleNotExists(repoId);
  assertTemplateRoleNotExists(repoId + STAGE_REPO_ID_END);
  mockAuditListener.clearEvents();
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addDeleteManagedRepo() throws Exception {
  mockAuditListener.clearEvents();
  File repoDir=clearRepoLocation(repoLocation);
  List<ManagedRepository> repos=managedRepositoryAdmin.getManagedRepositories();
  assertNotNull(repos);
  int initialSize=repos.size();
  assertTrue(initialSize > 0);
  ManagedRepository repo=new ManagedRepository();
  repo.setId(repoId);
  repo.setName("test repo");
  repo.setLocation(repoLocation);
  repo.setCronExpression("0 0 * * * ?");
  repo.setDescription("cool repo");
  managedRepositoryAdmin.addManagedRepository(repo,false,getFakeAuditInformation());
  repos=managedRepositoryAdmin.getManagedRepositories();
  assertNotNull(repos);
  assertEquals(initialSize + 1,repos.size());
  ManagedRepository managedRepository=managedRepositoryAdmin.getManagedRepository(repoId);
  assertNotNull(managedRepository);
  assertEquals("test repo",managedRepository.getName());
  assertEquals("cool repo",managedRepository.getDescription());
  assertTemplateRoleExists(repoId);
  managedRepositoryAdmin.deleteManagedRepository(repoId,getFakeAuditInformation(),false);
  assertTrue(repoDir.exists());
  repos=managedRepositoryAdmin.getManagedRepositories();
  assertNotNull(repos);
  assertEquals(initialSize,repos.size());
  assertTemplateRoleNotExists(repoId);
  assertEquals(2,mockAuditListener.getAuditEvents().size());
  assertAuditListenerCallAddAndDelete();
  mockAuditListener.clearEvents();
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void updateDeleteManagedRepoWithStagedRepo() throws Exception {
  String stageRepoLocation=APPSERVER_BASE_PATH + File.separator + repoId;
  File repoDir=clearRepoLocation(repoLocation);
  mockAuditListener.clearEvents();
  List<ManagedRepository> repos=managedRepositoryAdmin.getManagedRepositories();
  assertNotNull(repos);
  int initialSize=repos.size();
  assertTrue(initialSize > 0);
  ManagedRepository repo=getTestManagedRepository(repoId,repoLocation);
  managedRepositoryAdmin.addManagedRepository(repo,false,getFakeAuditInformation());
  assertTemplateRoleExists(repoId);
  assertFalse(new File(repoLocation + STAGE_REPO_ID_END).exists());
  assertTemplateRoleNotExists(repoId + STAGE_REPO_ID_END);
  repos=managedRepositoryAdmin.getManagedRepositories();
  assertNotNull(repos);
  assertEquals(initialSize + 1,repos.size());
  repo=managedRepositoryAdmin.getManagedRepository(repoId);
  assertEquals(getTestManagedRepository(repoId,repoLocation).getIndexDirectory(),repo.getIndexDirectory());
  String newName="test repo update";
  repo.setName(newName);
  repo.setLocation(repoLocation);
  managedRepositoryAdmin.updateManagedRepository(repo,true,getFakeAuditInformation(),false);
  repo=managedRepositoryAdmin.getManagedRepository(repoId);
  assertNotNull(repo);
  assertEquals(newName,repo.getName());
  assertEquals(new File(repoLocation).getCanonicalPath(),new File(repo.getLocation()).getCanonicalPath());
  assertTrue(new File(repoLocation).exists());
  assertEquals(getTestManagedRepository(repoId,repoLocation).getCronExpression(),repo.getCronExpression());
  assertEquals(getTestManagedRepository(repoId,repoLocation).getLayout(),repo.getLayout());
  assertEquals(getTestManagedRepository(repoId,repoLocation).getId(),repo.getId());
  assertEquals(getTestManagedRepository(repoId,repoLocation).getIndexDirectory(),repo.getIndexDirectory());
  assertEquals(getTestManagedRepository(repoId,repoLocation).getDaysOlder(),repo.getDaysOlder());
  assertEquals(getTestManagedRepository(repoId,repoLocation).getRetentionCount(),repo.getRetentionCount());
  assertEquals(getTestManagedRepository(repoId,repoLocation).isDeleteReleasedSnapshots(),repo.isDeleteReleasedSnapshots());
  assertTemplateRoleExists(repoId);
  assertTrue(new File(stageRepoLocation + STAGE_REPO_ID_END).exists());
  assertTemplateRoleExists(repoId + STAGE_REPO_ID_END);
  managedRepositoryAdmin.deleteManagedRepository(repo.getId(),getFakeAuditInformation(),false);
  assertTrue(repoDir.exists());
  assertTemplateRoleNotExists(repoId);
  assertTrue(new File(stageRepoLocation + STAGE_REPO_ID_END).exists());
  assertTemplateRoleNotExists(repoId + STAGE_REPO_ID_END);
  assertAuditListenerCallAndUpdateAddAndDelete(true);
  mockAuditListener.clearEvents();
  new File(repoLocation + STAGE_REPO_ID_END).delete();
  assertFalse(new File(repoLocation + STAGE_REPO_ID_END).exists());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllManagedRepos() throws Exception {
  mockAuditListener.clearEvents();
  List<ManagedRepository> repos=managedRepositoryAdmin.getManagedRepositories();
  assertNotNull(repos);
  assertTrue(repos.size() > 0);
  log.info("repos {}",repos);
  ManagedRepository internal=findManagedRepoById(repos,"internal");
  assertNotNull(internal);
  assertTrue(internal.isReleases());
  assertFalse(internal.isSnapshots());
  mockAuditListener.clearEvents();
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void updateDeleteManagedRepo() throws Exception {
  File repoDir=clearRepoLocation(repoLocation);
  mockAuditListener.clearEvents();
  List<ManagedRepository> repos=managedRepositoryAdmin.getManagedRepositories();
  assertNotNull(repos);
  int initialSize=repos.size();
  assertTrue(initialSize > 0);
  ManagedRepository repo=new ManagedRepository();
  repo.setId(repoId);
  repo.setName("test repo");
  repo.setLocation(repoLocation);
  repo.setCronExpression("0 0 * * * ?");
  managedRepositoryAdmin.addManagedRepository(repo,false,getFakeAuditInformation());
  assertTemplateRoleExists(repoId);
  repos=managedRepositoryAdmin.getManagedRepositories();
  assertNotNull(repos);
  assertEquals(initialSize + 1,repos.size());
  String newName="test repo update";
  repo.setName(newName);
  String description="so great repository";
  repo.setDescription(description);
  repo.setLocation(repoLocation);
  repo.setCronExpression("0 0 * * * ?");
  repo.setSkipPackedIndexCreation(true);
  managedRepositoryAdmin.updateManagedRepository(repo,false,getFakeAuditInformation(),false);
  repo=managedRepositoryAdmin.getManagedRepository(repoId);
  assertNotNull(repo);
  assertEquals(newName,repo.getName());
  assertEquals(new File(repoLocation).getCanonicalPath(),new File(repo.getLocation()).getCanonicalPath());
  assertTrue(new File(repoLocation).exists());
  assertEquals(description,repo.getDescription());
  assertTrue(repo.isSkipPackedIndexCreation());
  assertTemplateRoleExists(repoId);
  managedRepositoryAdmin.deleteManagedRepository(repo.getId(),getFakeAuditInformation(),false);
  assertTrue(repoDir.exists());
  assertTemplateRoleNotExists(repoId);
  assertAuditListenerCallAndUpdateAddAndDelete(false);
  mockAuditListener.clearEvents();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.admin.repository.networkproxy.NetworkProxyAdminTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndUpdateAndDelete() throws Exception {
  mockAuditListener.clearEvents();
  int initialSize=networkProxyAdmin.getNetworkProxies().size();
  NetworkProxy networkProxy=getNetworkProxyTest("foo");
  networkProxyAdmin.addNetworkProxy(networkProxy,getFakeAuditInformation());
  assertEquals(initialSize + 1,networkProxyAdmin.getNetworkProxies().size());
  networkProxy=networkProxyAdmin.getNetworkProxy("foo");
  assertNotNull(networkProxy);
  assertEquals(getNetworkProxyTest("foo").getId(),networkProxy.getId());
  assertEquals(getNetworkProxyTest("foo").getHost(),networkProxy.getHost());
  assertEquals(getNetworkProxyTest("foo").getPassword(),networkProxy.getPassword());
  assertEquals(getNetworkProxyTest("foo").getPort(),networkProxy.getPort());
  assertEquals(getNetworkProxyTest("foo").getUsername(),networkProxy.getUsername());
  assertEquals(getNetworkProxyTest("foo").getProtocol(),networkProxy.getProtocol());
  networkProxy.setHost("https://toto.com");
  networkProxy.setPassword("newpasswd");
  networkProxy.setPort(9191);
  networkProxy.setProtocol("http");
  networkProxy.setUsername("newusername");
  networkProxyAdmin.updateNetworkProxy(networkProxy,getFakeAuditInformation());
  NetworkProxy updatedNetworkProxy=networkProxyAdmin.getNetworkProxy("foo");
  assertNotNull(updatedNetworkProxy);
  assertEquals(networkProxy.getId(),updatedNetworkProxy.getId());
  assertEquals(networkProxy.getHost(),updatedNetworkProxy.getHost());
  assertEquals(networkProxy.getPassword(),updatedNetworkProxy.getPassword());
  assertEquals(networkProxy.getPort(),updatedNetworkProxy.getPort());
  assertEquals(networkProxy.getUsername(),updatedNetworkProxy.getUsername());
  assertEquals(networkProxy.getProtocol(),updatedNetworkProxy.getProtocol());
  networkProxyAdmin.deleteNetworkProxy("foo",getFakeAuditInformation());
  assertEquals(3,mockAuditListener.getAuditEvents().size());
  assertEquals(AuditEvent.ADD_NETWORK_PROXY,mockAuditListener.getAuditEvents().get(0).getAction());
  assertEquals(AuditEvent.MODIFY_NETWORK_PROXY,mockAuditListener.getAuditEvents().get(1).getAction());
  assertEquals(AuditEvent.DELETE_NETWORK_PROXY,mockAuditListener.getAuditEvents().get(2).getAction());
  mockAuditListener.clearEvents();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndDelete() throws Exception {
  mockAuditListener.clearEvents();
  int initialSize=networkProxyAdmin.getNetworkProxies().size();
  NetworkProxy networkProxy=getNetworkProxyTest("foo");
  networkProxyAdmin.addNetworkProxy(networkProxy,getFakeAuditInformation());
  assertEquals(initialSize + 1,networkProxyAdmin.getNetworkProxies().size());
  networkProxy=networkProxyAdmin.getNetworkProxy("foo");
  assertNotNull(networkProxy);
  assertEquals(getNetworkProxyTest("foo").getId(),networkProxy.getId());
  assertEquals(getNetworkProxyTest("foo").getHost(),networkProxy.getHost());
  assertEquals(getNetworkProxyTest("foo").getPassword(),networkProxy.getPassword());
  assertEquals(getNetworkProxyTest("foo").getPort(),networkProxy.getPort());
  assertEquals(getNetworkProxyTest("foo").getUsername(),networkProxy.getUsername());
  assertEquals(getNetworkProxyTest("foo").getProtocol(),networkProxy.getProtocol());
  networkProxyAdmin.deleteNetworkProxy("foo",getFakeAuditInformation());
  assertNull(networkProxyAdmin.getNetworkProxy("foo"));
  assertEquals(2,mockAuditListener.getAuditEvents().size());
  assertEquals(AuditEvent.ADD_NETWORK_PROXY,mockAuditListener.getAuditEvents().get(0).getAction());
  assertEquals(AuditEvent.DELETE_NETWORK_PROXY,mockAuditListener.getAuditEvents().get(1).getAction());
  mockAuditListener.clearEvents();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * ensure we cleanup remote repos linked to a network proxy
 */
@Test public void addAndDeleteWithRemoteRepoLinked() throws Exception {
  mockAuditListener.clearEvents();
  int initialSize=networkProxyAdmin.getNetworkProxies().size();
  NetworkProxy networkProxy=getNetworkProxyTest("foo");
  networkProxyAdmin.addNetworkProxy(networkProxy,getFakeAuditInformation());
  assertEquals(initialSize + 1,networkProxyAdmin.getNetworkProxies().size());
  networkProxy=networkProxyAdmin.getNetworkProxy("foo");
  assertNotNull(networkProxy);
  RemoteRepository remoteRepository=getRemoteRepository();
  remoteRepository.setRemoteDownloadNetworkProxyId(networkProxy.getId());
  remoteRepositoryAdmin.addRemoteRepository(remoteRepository,getFakeAuditInformation());
  networkProxyAdmin.deleteNetworkProxy("foo",getFakeAuditInformation());
  remoteRepository=remoteRepositoryAdmin.getRemoteRepository(getRemoteRepository().getId());
  assertNull(remoteRepository.getRemoteDownloadNetworkProxyId());
  remoteRepositoryAdmin.deleteRemoteRepository(getRemoteRepository().getId(),getFakeAuditInformation());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.admin.repository.proxyconnector.ProxyConnectorAdminTest </h4><pre class="type-3 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndDelete() throws Exception {
  mockAuditListener.clearEvents();
  assertEquals("not proxyConnectors 1 " + proxyConnectorAdmin.getProxyConnectors(),1,proxyConnectorAdmin.getProxyConnectors().size());
  assertFalse(proxyConnectorAdmin.getProxyConnectors().isEmpty());
  ProxyConnector proxyConnector=new ProxyConnector();
  proxyConnector.setSourceRepoId("snapshots");
  proxyConnector.setTargetRepoId("central");
  proxyConnectorAdmin.addProxyConnector(proxyConnector,getFakeAuditInformation());
  assertFalse(proxyConnectorAdmin.getProxyConnectors().isEmpty());
  assertEquals(2,proxyConnectorAdmin.getProxyConnectors().size());
  assertNotNull(proxyConnectorAdmin.getProxyConnector("snapshots","central"));
  proxyConnectorAdmin.deleteProxyConnector(proxyConnector,getFakeAuditInformation());
  assertEquals(1,proxyConnectorAdmin.getProxyConnectors().size());
  assertFalse(proxyConnectorAdmin.getProxyConnectors().isEmpty());
  assertEquals(2,mockAuditListener.getAuditEvents().size());
  assertEquals(AuditEvent.ADD_PROXY_CONNECTOR,mockAuditListener.getAuditEvents().get(0).getAction());
  assertEquals("root",mockAuditListener.getAuditEvents().get(0).getUserId());
  assertEquals("archiva-localhost",mockAuditListener.getAuditEvents().get(0).getRemoteIP());
  assertEquals(AuditEvent.DELETE_PROXY_CONNECTOR,mockAuditListener.getAuditEvents().get(1).getAction());
  assertEquals("root",mockAuditListener.getAuditEvents().get(1).getUserId());
  assertNull(proxyConnectorAdmin.getProxyConnector("snapshots","central"));
  mockAuditListener.clearEvents();
}

</code></pre>

<br>
<pre class="type-3 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void updateProxyConnector() throws Exception {
  mockAuditListener.clearEvents();
  ProxyConnector proxyConnector=proxyConnectorAdmin.getProxyConnector("internal","central");
  assertNotNull(proxyConnector);
  proxyConnector.setDisabled(false);
  proxyConnectorAdmin.updateProxyConnector(proxyConnector,getFakeAuditInformation());
  proxyConnector=proxyConnectorAdmin.getProxyConnector("internal","central");
  assertFalse(proxyConnector.isDisabled());
  proxyConnector.setDisabled(true);
  proxyConnectorAdmin.updateProxyConnector(proxyConnector,getFakeAuditInformation());
  proxyConnector=proxyConnectorAdmin.getProxyConnector("internal","central");
  assertTrue(proxyConnector.isDisabled());
  proxyConnector.setOrder(4);
  proxyConnectorAdmin.updateProxyConnector(proxyConnector,getFakeAuditInformation());
  proxyConnector=proxyConnectorAdmin.getProxyConnector("internal","central");
  assertEquals(4,proxyConnector.getOrder());
  mockAuditListener.clearEvents();
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndUpdateAndDelete() throws Exception {
  mockAuditListener.clearEvents();
  RemoteRepository remoteRepository=getRemoteRepository("test-new-one");
  remoteRepositoryAdmin.addRemoteRepository(remoteRepository,getFakeAuditInformation());
  assertEquals("not proxyConnectors 1 " + proxyConnectorAdmin.getProxyConnectors(),1,proxyConnectorAdmin.getProxyConnectors().size());
  assertFalse(proxyConnectorAdmin.getProxyConnectors().isEmpty());
  ProxyConnector proxyConnector=new ProxyConnector();
  proxyConnector.setSourceRepoId("snapshots");
  proxyConnector.setTargetRepoId("central");
  proxyConnector.setWhiteListPatterns(Arrays.asList("foo","bar"));
  proxyConnectorAdmin.addProxyConnector(proxyConnector,getFakeAuditInformation());
  assertFalse(proxyConnectorAdmin.getProxyConnectors().isEmpty());
  assertEquals(2,proxyConnectorAdmin.getProxyConnectors().size());
  assertNotNull(proxyConnectorAdmin.getProxyConnector("snapshots","central"));
  assertEquals(Arrays.asList("foo","bar"),proxyConnectorAdmin.getProxyConnector("snapshots","central").getWhiteListPatterns());
  proxyConnectorAdmin.deleteProxyConnector(proxyConnector,getFakeAuditInformation());
  proxyConnector.setTargetRepoId(remoteRepository.getId());
  proxyConnectorAdmin.addProxyConnector(proxyConnector,getFakeAuditInformation());
  assertNull(proxyConnectorAdmin.getProxyConnector("snapshots","central"));
  assertNotNull(remoteRepository.getId(),proxyConnectorAdmin.getProxyConnector("snapshots",remoteRepository.getId()));
  proxyConnectorAdmin.deleteProxyConnector(proxyConnector,getFakeAuditInformation());
  assertNull(proxyConnectorAdmin.getProxyConnector("snapshots","central"));
  assertEquals(1,proxyConnectorAdmin.getProxyConnectors().size());
  assertFalse(proxyConnectorAdmin.getProxyConnectors().isEmpty());
  assertEquals(5,mockAuditListener.getAuditEvents().size());
  assertEquals(AuditEvent.ADD_REMOTE_REPO,mockAuditListener.getAuditEvents().get(0).getAction());
  assertEquals(AuditEvent.ADD_PROXY_CONNECTOR,mockAuditListener.getAuditEvents().get(1).getAction());
  assertEquals("root",mockAuditListener.getAuditEvents().get(2).getUserId());
  assertEquals("archiva-localhost",mockAuditListener.getAuditEvents().get(2).getRemoteIP());
  assertEquals(AuditEvent.DELETE_PROXY_CONNECTOR,mockAuditListener.getAuditEvents().get(2).getAction());
  assertEquals(AuditEvent.ADD_PROXY_CONNECTOR,mockAuditListener.getAuditEvents().get(3).getAction());
  assertEquals(AuditEvent.DELETE_PROXY_CONNECTOR,mockAuditListener.getAuditEvents().get(4).getAction());
  assertEquals("root",mockAuditListener.getAuditEvents().get(4).getUserId());
  remoteRepositoryAdmin.deleteRemoteRepository(remoteRepository.getId(),getFakeAuditInformation());
  mockAuditListener.clearEvents();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.admin.repository.remote.RemoteRepositoryAdminTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndUpdateAndDelete() throws Exception {
  mockAuditListener.clearEvents();
  int initialSize=remoteRepositoryAdmin.getRemoteRepositories().size();
  RemoteRepository remoteRepository=getRemoteRepository();
  remoteRepositoryAdmin.addRemoteRepository(remoteRepository,getFakeAuditInformation());
  assertEquals(initialSize + 1,remoteRepositoryAdmin.getRemoteRepositories().size());
  RemoteRepository repo=remoteRepositoryAdmin.getRemoteRepository("foo");
  assertNotNull(repo);
  assertEquals(getRemoteRepository().getPassword(),repo.getPassword());
  assertEquals(getRemoteRepository().getUrl(),repo.getUrl());
  assertEquals(getRemoteRepository().getUserName(),repo.getUserName());
  assertEquals(getRemoteRepository().getName(),repo.getName());
  assertEquals(getRemoteRepository().getTimeout(),repo.getTimeout());
  assertEquals(getRemoteRepository().getRemoteDownloadNetworkProxyId(),repo.getRemoteDownloadNetworkProxyId());
  repo.setUserName("foo-name-changed");
  repo.setPassword("titi");
  repo.setUrl("http://foo.com/maven-really-rocks");
  repo.setRemoteDownloadNetworkProxyId("toto");
  repo.setDescription("archiva rocks!");
  remoteRepositoryAdmin.updateRemoteRepository(repo,getFakeAuditInformation());
  repo=remoteRepositoryAdmin.getRemoteRepository("foo");
  assertEquals("foo-name-changed",repo.getUserName());
  assertEquals("titi",repo.getPassword());
  assertEquals("http://foo.com/maven-really-rocks",repo.getUrl());
  assertEquals("toto",repo.getRemoteDownloadNetworkProxyId());
  assertEquals("archiva rocks!",repo.getDescription());
  remoteRepositoryAdmin.deleteRemoteRepository("foo",getFakeAuditInformation());
  assertEquals(initialSize,remoteRepositoryAdmin.getRemoteRepositories().size());
  repo=remoteRepositoryAdmin.getRemoteRepository("foo");
  assertNull(repo);
  assertEquals(3,mockAuditListener.getAuditEvents().size());
  assertEquals(AuditEvent.ADD_REMOTE_REPO,mockAuditListener.getAuditEvents().get(0).getAction());
  assertEquals("root",mockAuditListener.getAuditEvents().get(0).getUserId());
  assertEquals("archiva-localhost",mockAuditListener.getAuditEvents().get(0).getRemoteIP());
  assertEquals(AuditEvent.MODIFY_REMOTE_REPO,mockAuditListener.getAuditEvents().get(1).getAction());
  assertEquals("root",mockAuditListener.getAuditEvents().get(1).getUserId());
  assertEquals("archiva-localhost",mockAuditListener.getAuditEvents().get(1).getRemoteIP());
  assertEquals(AuditEvent.DELETE_REMOTE_REPO,mockAuditListener.getAuditEvents().get(2).getAction());
  assertEquals("root",mockAuditListener.getAuditEvents().get(2).getUserId());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getById() throws Exception {
  RemoteRepository central=remoteRepositoryAdmin.getRemoteRepository("central");
  assertNotNull(central);
  assertEquals("https://repo.maven.apache.org/maven2",central.getUrl());
  assertEquals(60,central.getTimeout());
  assertNull(central.getUserName());
  assertNull(central.getPassword());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAll() throws Exception {
  List<RemoteRepository> remoteRepositories=remoteRepositoryAdmin.getRemoteRepositories();
  assertNotNull(remoteRepositories);
  assertTrue(remoteRepositories.size() > 0);
  log.info("remote {}",remoteRepositories);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndDelete() throws Exception {
  mockAuditListener.clearEvents();
  int initialSize=remoteRepositoryAdmin.getRemoteRepositories().size();
  RemoteRepository remoteRepository=getRemoteRepository();
  remoteRepositoryAdmin.addRemoteRepository(remoteRepository,getFakeAuditInformation());
  assertEquals(initialSize + 1,remoteRepositoryAdmin.getRemoteRepositories().size());
  RemoteRepository repo=remoteRepositoryAdmin.getRemoteRepository("foo");
  assertNotNull(repo);
  assertEquals(getRemoteRepository().getPassword(),repo.getPassword());
  assertEquals(getRemoteRepository().getUrl(),repo.getUrl());
  assertEquals(getRemoteRepository().getUserName(),repo.getUserName());
  assertEquals(getRemoteRepository().getName(),repo.getName());
  assertEquals(getRemoteRepository().getTimeout(),repo.getTimeout());
  assertEquals(getRemoteRepository().getDescription(),repo.getDescription());
  assertEquals(1,remoteRepository.getExtraHeaders().size());
  assertEquals("wine",remoteRepository.getExtraHeaders().get("beer"));
  assertEquals(1,remoteRepository.getExtraParameters().size());
  assertEquals("bar",remoteRepository.getExtraParameters().get("foo"));
  remoteRepositoryAdmin.deleteRemoteRepository("foo",getFakeAuditInformation());
  assertEquals(initialSize,remoteRepositoryAdmin.getRemoteRepositories().size());
  repo=remoteRepositoryAdmin.getRemoteRepository("foo");
  assertNull(repo);
  assertEquals(2,mockAuditListener.getAuditEvents().size());
  assertEquals(AuditEvent.ADD_REMOTE_REPO,mockAuditListener.getAuditEvents().get(0).getAction());
  assertEquals("root",mockAuditListener.getAuditEvents().get(0).getUserId());
  assertEquals("archiva-localhost",mockAuditListener.getAuditEvents().get(0).getRemoteIP());
  assertEquals(AuditEvent.DELETE_REMOTE_REPO,mockAuditListener.getAuditEvents().get(1).getAction());
  assertEquals("root",mockAuditListener.getAuditEvents().get(1).getUserId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.audit.AuditManagerTest </h4><pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMostRecentEventsLessThan10() throws Exception {
  int numEvents=5;
  List<AuditEvent> expectedEvents=new ArrayList<>(numEvents);
  for (int i=0; i < numEvents; i++) {
    expectedEvents.add(createEvent(AUDIT_EVENT_BASE + MILLIS_FORMAT.format(i)));
  }
  EasyMock.expect(metadataRepository.getMetadataFacets(TEST_REPO_ID,AuditEvent.FACET_ID)).andReturn(getEventNames(expectedEvents));
  for (  AuditEvent event : expectedEvents) {
    EasyMock.expect(metadataRepository.getMetadataFacet(TEST_REPO_ID,AuditEvent.FACET_ID,event.getName())).andReturn(event);
  }
  metadataRepositoryControl.replay();
  List<AuditEvent> events=auditManager.getMostRecentAuditEvents(metadataRepository,Collections.singletonList(TEST_REPO_ID));
  assertNotNull(events);
  assertEquals(numEvents,events.size());
  int expectedTimestampCounter=numEvents - 1;
  for (  AuditEvent event : events) {
    String num=MILLIS_FORMAT.format(expectedTimestampCounter);
    assertTestEvent(event,AUDIT_EVENT_BASE + num,getDefaultTestResourceName(num));
    expectedTimestampCounter--;
  }
  metadataRepositoryControl.verify();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMostRecentEventsInterleavedRepositories() throws Exception {
  int numEvents=11;
  Map<String,List<String>> eventNames=new LinkedHashMap<String,List<String>>();
  List<AuditEvent> events=new ArrayList<>();
  eventNames.put(TEST_REPO_ID,new ArrayList<String>());
  eventNames.put(TEST_REPO_ID_2,new ArrayList<String>());
  for (int i=0; i < numEvents; i++) {
    String repositoryId=i % 2 == 0 ? TEST_REPO_ID : TEST_REPO_ID_2;
    String num=MILLIS_FORMAT.format(i);
    AuditEvent event=createEvent(repositoryId,AUDIT_EVENT_BASE + num,getDefaultTestResourceName(num));
    events.add(event);
    eventNames.get(repositoryId).add(event.getName());
  }
  EasyMock.expect(metadataRepository.getMetadataFacets(TEST_REPO_ID,AuditEvent.FACET_ID)).andReturn(eventNames.get(TEST_REPO_ID));
  EasyMock.expect(metadataRepository.getMetadataFacets(TEST_REPO_ID_2,AuditEvent.FACET_ID)).andReturn(eventNames.get(TEST_REPO_ID_2));
  for (  AuditEvent event : events.subList(1,events.size())) {
    EasyMock.expect(metadataRepository.getMetadataFacet(event.getRepositoryId(),AuditEvent.FACET_ID,event.getName())).andReturn(event);
  }
  metadataRepositoryControl.replay();
  events=auditManager.getMostRecentAuditEvents(metadataRepository,Arrays.asList(TEST_REPO_ID,TEST_REPO_ID_2));
  assertNotNull(events);
  assertEquals(numEvents - 1,events.size());
  int expectedTimestampCounter=numEvents - 1;
  for (  AuditEvent event : events) {
    String num=MILLIS_FORMAT.format(expectedTimestampCounter);
    String expectedRepoId=expectedTimestampCounter % 2 == 0 ? TEST_REPO_ID : TEST_REPO_ID_2;
    assertTestEvent(event,expectedRepoId,AUDIT_EVENT_BASE + num,getDefaultTestResourceName(num));
    expectedTimestampCounter--;
  }
  metadataRepositoryControl.verify();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMostRecentEvents() throws Exception {
  int numEvents=11;
  List<AuditEvent> expectedEvents=new ArrayList<>(numEvents);
  for (int i=0; i < numEvents; i++) {
    AuditEvent event=createEvent(AUDIT_EVENT_BASE + MILLIS_FORMAT.format(i));
    expectedEvents.add(event);
  }
  EasyMock.expect(metadataRepository.getMetadataFacets(TEST_REPO_ID,AuditEvent.FACET_ID)).andReturn(getEventNames(expectedEvents));
  for (  AuditEvent event : expectedEvents.subList(1,expectedEvents.size())) {
    EasyMock.expect(metadataRepository.getMetadataFacet(TEST_REPO_ID,AuditEvent.FACET_ID,event.getName())).andReturn(event);
  }
  metadataRepositoryControl.replay();
  List<AuditEvent> events=auditManager.getMostRecentAuditEvents(metadataRepository,Collections.singletonList(TEST_REPO_ID));
  assertNotNull(events);
  assertEquals(numEvents - 1,events.size());
  int expectedTimestampCounter=numEvents - 1;
  for (  AuditEvent event : events) {
    String num=MILLIS_FORMAT.format(expectedTimestampCounter);
    assertTestEvent(event,AUDIT_EVENT_BASE + num,getDefaultTestResourceName(num));
    expectedTimestampCounter--;
  }
  metadataRepositoryControl.verify();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.checksum.ChecksummedFileTest </h4><pre class="type-10 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoteMetadataChecksumFilePathMd5() throws IOException {
  String expected=REMOTE_METADATA_MD5 + "  ./examples/metadata/maven-metadata.xml";
  File testfile=getTestResource("examples/metadata/maven-metadata-remote.xml");
  ChecksummedFile checksummedFile=new ChecksummedFile(testfile);
  try {
    String s=checksummedFile.parseChecksum(expected,ChecksumAlgorithm.MD5,"maven-metadata-remote.xml");
    assertEquals("Checksum doesn't match",REMOTE_METADATA_MD5,s);
  }
 catch (  IOException e) {
    e.printStackTrace();
    fail("IOException should not occur.");
  }
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateChecksum() throws IOException {
  File testableJar=createTestableJar("examples/redback-authz-open.jar");
  ChecksummedFile checksummedFile=new ChecksummedFile(testableJar);
  checksummedFile.createChecksum(ChecksumAlgorithm.SHA1);
  File hashFile=checksummedFile.getChecksumFile(ChecksumAlgorithm.SHA1);
  assertTrue("ChecksumAlgorithm file should exist.",hashFile.exists());
  String hashContents=FileUtils.readFileToString(hashFile);
  hashContents=StringUtils.trim(hashContents);
  assertEquals("2bb14b388973351b0a4dfe11d171965f59cc61a1  redback-authz-open.jar",hashContents);
}

</code></pre>

<br>
<pre class="type-10 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoteMetadataChecksumFilePathSha1() throws IOException {
  String expected=REMOTE_METADATA_SHA1 + "  /home/test/repository/examples/metadata/maven-metadata.xml";
  File testfile=getTestResource("examples/metadata/maven-metadata-remote.xml");
  ChecksummedFile checksummedFile=new ChecksummedFile(testfile);
  try {
    String s=checksummedFile.parseChecksum(expected,ChecksumAlgorithm.SHA1,"maven-metadata-remote.xml");
    assertEquals("Checksum doesn't match",REMOTE_METADATA_SHA1,s);
  }
 catch (  IOException e) {
    e.printStackTrace();
    fail("IOException should not occur.");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.configuration.ArchivaConfigurationTest </h4><pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetConfigurationFromRegistryWithTwoConfigurationResources() throws Exception {
  ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-configuration-both");
  Configuration configuration=archivaConfiguration.getConfiguration();
  assertEquals("check repositories",2,configuration.getManagedRepositories().size());
  assertEquals("check repositories",2,configuration.getRemoteRepositories().size());
  assertEquals("check proxy connectors",2,configuration.getProxyConnectors().size());
  WebappConfiguration webapp=configuration.getWebapp();
  assertNotNull("check webapp",webapp);
  UserInterfaceOptions ui=webapp.getUi();
  assertNotNull("check webapp ui",ui);
  assertFalse("check showFindArtifacts",ui.isShowFindArtifacts());
  assertFalse("check appletFindEnabled",ui.isAppletFindEnabled());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testArchivaV1() throws Exception {
  ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-archiva-v1");
  Configuration configuration=archivaConfiguration.getConfiguration();
  assertConfiguration(configuration,2,2,2);
  assertEquals("check network proxies",1,configuration.getNetworkProxies().size());
  assertEquals("check managed repositories",2,configuration.getManagedRepositories().size());
  assertEquals("check v1 repositories size.",0,configuration.getRepositories().size());
  Map<String,ManagedRepositoryConfiguration> map=configuration.getManagedRepositoriesAsMap();
  ManagedRepositoryConfiguration repository=map.get("internal");
  assertEquals("check managed repositories","${appserver.base}/repositories/internal",repository.getLocation());
  assertEquals("check managed repositories","Archiva Managed Internal Repository",repository.getName());
  assertEquals("check managed repositories","internal",repository.getId());
  assertEquals("check managed repositories","default",repository.getLayout());
  assertTrue("check managed repositories",repository.isScanned());
  assertFalse("check managed repositories",repository.isSnapshots());
  repository=map.get("snapshots");
  assertEquals("check managed repositories","${appserver.base}/repositories/snapshots",repository.getLocation());
  assertEquals("check managed repositories","Archiva Managed Snapshot Repository",repository.getName());
  assertEquals("check managed repositories","snapshots",repository.getId());
  assertEquals("check managed repositories","default",repository.getLayout());
  assertFalse("check managed repositories",repository.isScanned());
  assertTrue("check managed repositories",repository.isSnapshots());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStoreConfigurationFailsWhenReadFromBothLocationsNoLists() throws Exception {
  File baseFile=getTestFile("target/test/test-file.xml");
  baseFile.delete();
  assertFalse(baseFile.exists());
  File userFile=getTestFile("target/test/test-file-user.xml");
  userFile.delete();
  assertFalse(userFile.exists());
  baseFile.getParentFile().mkdirs();
  FileUtils.writeStringToFile(baseFile,"<configuration/>",Charset.forName("UTF-8"));
  userFile.getParentFile().mkdirs();
  FileUtils.writeStringToFile(userFile,"<configuration/>",Charset.forName("UTF-8"));
  ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-save-user");
  archivaConfiguration.reload();
  Configuration configuration=archivaConfiguration.getConfiguration();
  assertTrue("check value",configuration.getWebapp().getUi().isAppletFindEnabled());
  configuration.getWebapp().getUi().setAppletFindEnabled(false);
  archivaConfiguration.save(configuration);
  assertTrue("Check file exists",baseFile.exists());
  assertEquals("Check base file is unchanged","<configuration/>",FileUtils.readFileToString(baseFile,Charset.forName("UTF-8")));
  assertTrue("Check file exists",userFile.exists());
  assertFalse("Check base file is changed","<configuration/>".equals(FileUtils.readFileToString(userFile,Charset.forName("UTF-8"))));
  configuration=archivaConfiguration.getConfiguration();
  assertFalse("check value",configuration.getWebapp().getUi().isAppletFindEnabled());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * [MRM-582] Remote Repositories with empty <username> and <password> fields shouldn't be created in configuration.
 */
@Test public void testGetConfigurationFixEmptyRemoteRepoUsernamePassword() throws Exception {
  ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-configuration");
  archivaConfiguration.reload();
  Configuration configuration=archivaConfiguration.getConfiguration();
  assertConfiguration(configuration,2,2,2);
  assertEquals("check remote repositories",2,configuration.getRemoteRepositories().size());
  RemoteRepositoryConfiguration repository=configuration.getRemoteRepositoriesAsMap().get("maven2-repository.dev.java.net");
  assertEquals("remote repository.url","https://maven2-repository.dev.java.net/nonav/repository",repository.getUrl());
  assertEquals("remote repository.name","Java.net Repository for Maven 2",repository.getName());
  assertEquals("remote repository.id","maven2-repository.dev.java.net",repository.getId());
  assertEquals("remote repository.layout","default",repository.getLayout());
  assertNull("remote repository.username == null",repository.getUsername());
  assertNull("remote repository.password == null",repository.getPassword());
}

</code></pre>

<br>
<pre class="type-10 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStoreConfigurationFailsWhenReadFromBothLocationsAppserverHasLists() throws Exception {
  File baseFile=getTestFile("target/test/test-file.xml");
  baseFile.delete();
  assertFalse(baseFile.exists());
  File userFile=getTestFile("target/test/test-file-user.xml");
  userFile.delete();
  assertFalse(userFile.exists());
  baseFile.getParentFile().mkdirs();
  FileUtils.copyFile(getTestFile("src/test/conf/conf-base.xml"),baseFile);
  userFile.getParentFile().mkdirs();
  FileUtils.writeStringToFile(userFile,"<configuration/>",Charset.forName("UTF-8"));
  ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-save-user");
  archivaConfiguration.reload();
  Configuration configuration=archivaConfiguration.getConfiguration();
  assertTrue("check value",configuration.getWebapp().getUi().isAppletFindEnabled());
  configuration.getWebapp().getUi().setAppletFindEnabled(false);
  try {
    archivaConfiguration.save(configuration);
    fail("Configuration saving should not succeed if it was loaded from two locations");
  }
 catch (  IndeterminateConfigurationException e) {
    configuration=archivaConfiguration.getConfiguration();
    assertTrue("check value",configuration.getWebapp().getUi().isAppletFindEnabled());
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAutoDetectV1() throws Exception {
  File userFile=getTestFile("target/test-autodetect-v1/archiva-user.xml");
  userFile.delete();
  assertFalse(userFile.exists());
  userFile.getParentFile().mkdirs();
  FileUtils.copyFile(getTestFile("src/test/conf/autodetect-v1.xml"),userFile);
  ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-autodetect-v1");
  archivaConfiguration.reload();
  Configuration configuration=archivaConfiguration.getConfiguration();
  assertConfiguration(configuration,2,2,2);
  assertEquals("check network proxies",1,configuration.getNetworkProxies().size());
  ManagedRepositoryConfiguration repository=configuration.getManagedRepositories().get(0);
  assertEquals("check managed repositories","${appserver.base}/repositories/internal",repository.getLocation());
  assertEquals("check managed repositories","Archiva Managed Internal Repository",repository.getName());
  assertEquals("check managed repositories","internal",repository.getId());
  assertEquals("check managed repositories","default",repository.getLayout());
  assertTrue("check managed repositories",repository.isScanned());
  assertEquals("check managed repositories size.",2,configuration.getManagedRepositories().size());
  assertEquals("check remote repositories size.",2,configuration.getRemoteRepositories().size());
  assertEquals("check v1 repositories size.",0,configuration.getRepositories().size());
  archivaConfiguration.save(configuration);
  archivaConfiguration=lookup(ArchivaConfiguration.class,"test-autodetect-v1");
  configuration=archivaConfiguration.getConfiguration();
  assertEquals("check managed repositories size.",2,configuration.getManagedRepositories().size());
  assertEquals("check managed repositories size.",2,configuration.getManagedRepositoriesAsMap().size());
  assertEquals("check remote repositories size.",2,configuration.getRemoteRepositories().size());
  assertEquals("check remote repositories size.",2,configuration.getRemoteRepositoriesAsMap().size());
  assertEquals("check v1 repositories size.",0,configuration.getRepositories().size());
  String actualXML=FileUtils.readFileToString(userFile,Charset.forName("UTF-8"));
  XMLAssert.assertXpathNotExists("//configuration/repositories/repository",actualXML);
  XMLAssert.assertXpathNotExists("//configuration/repositories",actualXML);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetConfigurationFromDefaults() throws Exception {
  ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-defaults");
  Configuration configuration=archivaConfiguration.getConfiguration();
  assertConfiguration(configuration,2,1,1);
  assertEquals("check network proxies",0,configuration.getNetworkProxies().size());
  ManagedRepositoryConfiguration repository=configuration.getManagedRepositories().get(0);
  assertEquals("check managed repositories","${appserver.base}/repositories/internal",repository.getLocation());
  assertEquals("check managed repositories","Archiva Managed Internal Repository",repository.getName());
  assertEquals("check managed repositories","internal",repository.getId());
  assertEquals("check managed repositories","default",repository.getLayout());
  assertTrue("check managed repositories",repository.isScanned());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfigurationUpgradeFrom09() throws Exception {
  ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-upgrade-09");
  Configuration configuration=archivaConfiguration.getConfiguration();
  assertConfiguration(configuration,3,1,1);
  assertEquals("check network proxies",0,configuration.getNetworkProxies().size());
  ManagedRepositoryConfiguration repository=configuration.getManagedRepositories().get(0);
  assertEquals("check managed repositories","${appserver.base}/repositories/internal",repository.getLocation());
  assertEquals("check managed repositories","Archiva Managed Internal Repository",repository.getName());
  assertEquals("check managed repositories","internal",repository.getId());
  assertEquals("check managed repositories","default",repository.getLayout());
  assertTrue("check managed repositories",repository.isScanned());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCronExpressionsWithComma() throws Exception {
  File baseFile=getTestFile("target/test/test-file.xml");
  baseFile.delete();
  assertFalse(baseFile.exists());
  File userFile=getTestFile("target/test/test-file-user.xml");
  userFile.delete();
  assertFalse(userFile.exists());
  baseFile.getParentFile().mkdirs();
  FileUtils.copyFile(getTestFile("src/test/conf/escape-cron-expressions.xml"),baseFile);
  userFile.getParentFile().mkdirs();
  FileUtils.writeStringToFile(userFile,"<configuration/>",Charset.defaultCharset());
  final ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-cron-expressions");
  archivaConfiguration.reload();
  Configuration configuration=archivaConfiguration.getConfiguration();
  ManagedRepositoryConfiguration repository=configuration.getManagedRepositories().get(0);
  assertEquals("check cron expression","0 0,30 * * * ?",repository.getRefreshCronExpression().trim());
  archivaConfiguration.addListener(new ConfigurationListener(){
    @Override public void configurationEvent(    ConfigurationEvent event){
      assertEquals(ConfigurationEvent.SAVED,event.getType());
    }
  }
);
  archivaConfiguration.save(configuration);
  configuration=archivaConfiguration.getConfiguration();
  repository.setRefreshCronExpression("0 0,20 0 * * ?");
  archivaConfiguration.save(configuration);
  repository=archivaConfiguration.getConfiguration().findManagedRepositoryById("snapshots");
  assertEquals("check cron expression","0 0,20 0 * * ?",repository.getRefreshCronExpression());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConfigurationUpgradeFrom13() throws Exception {
  ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-upgrade-1.3");
  Configuration configuration=archivaConfiguration.getConfiguration();
  assertConfiguration(configuration,2,2,2);
  assertEquals("check network proxies",0,configuration.getNetworkProxies().size());
  ManagedRepositoryConfiguration repository=configuration.getManagedRepositories().get(0);
  assertEquals("check managed repositories","${appserver.base}/data/repositories/internal",repository.getLocation());
  assertEquals("check managed repositories","Archiva Managed Internal Repository",repository.getName());
  assertEquals("check managed repositories","internal",repository.getId());
  assertEquals("check managed repositories","default",repository.getLayout());
  assertTrue("check managed repositories",repository.isScanned());
  log.info("knowContentConsumers {}",configuration.getRepositoryScanning().getKnownContentConsumers());
  assertFalse(configuration.getRepositoryScanning().getKnownContentConsumers().contains("update-db-artifact"));
  assertFalse(configuration.getRepositoryScanning().getKnownContentConsumers().contains("update-db-repository-metadata"));
  assertTrue(configuration.getRepositoryScanning().getKnownContentConsumers().contains("create-archiva-metadata"));
  assertTrue(configuration.getRepositoryScanning().getKnownContentConsumers().contains("duplicate-artifacts"));
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveLastElements() throws Exception {
  File baseFile=getTestFile("target/test/test-file.xml");
  baseFile.delete();
  assertFalse(baseFile.exists());
  File userFile=getTestFile("target/test/test-file-user.xml");
  userFile.delete();
  assertFalse(userFile.exists());
  baseFile.getParentFile().mkdirs();
  FileUtils.copyFile(getTestFile("src/test/conf/conf-single-list-elements.xml"),baseFile);
  userFile.getParentFile().mkdirs();
  FileUtils.writeStringToFile(userFile,"<configuration/>",Charset.forName("UTF-8"));
  ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-remove-central");
  archivaConfiguration.reload();
  Configuration configuration=archivaConfiguration.getConfiguration();
  RepositoryGroupConfiguration repositoryGroup=configuration.getRepositoryGroups().get(0);
  assertNotNull(repositoryGroup);
  configuration.removeRepositoryGroup(repositoryGroup);
  assertTrue(configuration.getRepositoryGroups().isEmpty());
  RemoteRepositoryConfiguration repository=configuration.getRemoteRepositoriesAsMap().get("central");
  assertNotNull(repository);
  configuration.removeRemoteRepository(repository);
  assertTrue(configuration.getRemoteRepositories().isEmpty());
  ManagedRepositoryConfiguration managedRepository=configuration.getManagedRepositoriesAsMap().get("snapshots");
  assertNotNull(managedRepository);
  configuration.removeManagedRepository(managedRepository);
  assertTrue(configuration.getManagedRepositories().isEmpty());
  ProxyConnectorConfiguration proxyConnector=configuration.getProxyConnectors().get(0);
  assertNotNull(proxyConnector);
  configuration.removeProxyConnector(proxyConnector);
  assertTrue(configuration.getProxyConnectors().isEmpty());
  NetworkProxyConfiguration networkProxy=configuration.getNetworkProxiesAsMap().get("proxy");
  assertNotNull(networkProxy);
  configuration.removeNetworkProxy(networkProxy);
  assertTrue(configuration.getNetworkProxies().isEmpty());
  LegacyArtifactPath path=configuration.getLegacyArtifactPaths().get(0);
  assertNotNull(path);
  configuration.removeLegacyArtifactPath(path);
  assertTrue(configuration.getLegacyArtifactPaths().isEmpty());
  RepositoryScanningConfiguration scanning=configuration.getRepositoryScanning();
  String consumer=scanning.getKnownContentConsumers().get(0);
  assertNotNull(consumer);
  scanning.removeKnownContentConsumer(consumer);
  assertFalse(scanning.getKnownContentConsumers().isEmpty());
  consumer=scanning.getInvalidContentConsumers().get(0);
  assertNotNull(consumer);
  scanning.removeInvalidContentConsumer(consumer);
  assertTrue(scanning.getInvalidContentConsumers().isEmpty());
  archivaConfiguration.save(configuration);
  archivaConfiguration=lookup(ArchivaConfiguration.class,"test-read-saved");
  configuration=archivaConfiguration.getConfiguration();
  assertNull(configuration.getRemoteRepositoriesAsMap().get("central"));
  assertTrue(configuration.getRepositoryGroups().isEmpty());
  assertNull(configuration.getManagedRepositoriesAsMap().get("snapshots"));
  assertTrue(configuration.getProxyConnectors().isEmpty());
  assertNull(configuration.getNetworkProxiesAsMap().get("proxy"));
  assertTrue(configuration.getLegacyArtifactPaths().isEmpty());
  scanning=configuration.getRepositoryScanning();
  assertFalse(scanning.getKnownContentConsumers().isEmpty());
  assertTrue(scanning.getInvalidContentConsumers().isEmpty());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStoreConfigurationFailsWhenReadFromBothLocationsUserHasLists() throws Exception {
  File baseFile=getTestFile("target/test/test-file.xml");
  baseFile.delete();
  assertFalse(baseFile.exists());
  File userFile=getTestFile("target/test/test-file-user.xml");
  userFile.delete();
  assertFalse(userFile.exists());
  userFile.getParentFile().mkdirs();
  FileUtils.copyFile(getTestFile("src/test/conf/conf-user.xml"),userFile);
  baseFile.getParentFile().mkdirs();
  FileUtils.writeStringToFile(baseFile,"<configuration/>",Charset.forName("UTF-8"));
  ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-save-user");
  archivaConfiguration.reload();
  Configuration configuration=archivaConfiguration.getConfiguration();
  assertTrue("check value",configuration.getWebapp().getUi().isShowFindArtifacts());
  configuration.getWebapp().getUi().setShowFindArtifacts(false);
  archivaConfiguration.save(configuration);
  assertTrue("Check file exists",baseFile.exists());
  assertEquals("Check base file is unchanged","<configuration/>",FileUtils.readFileToString(baseFile,Charset.forName("UTF-8")));
  assertTrue("Check file exists",userFile.exists());
  assertFalse("Check base file is changed","<configuration/>".equals(FileUtils.readFileToString(userFile,Charset.forName("UTF-8"))));
  configuration=archivaConfiguration.getConfiguration();
  assertFalse("check value",configuration.getWebapp().getUi().isShowFindArtifacts());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetConfigurationFromRegistryWithASingleNamedConfigurationResource() throws Exception {
  ArchivaConfiguration archivaConfiguration=lookup(ArchivaConfiguration.class,"test-configuration");
  Configuration configuration=archivaConfiguration.getConfiguration();
  assertConfiguration(configuration,2,2,2);
  assertEquals("check network proxies",1,configuration.getNetworkProxies().size());
  ManagedRepositoryConfiguration repository=configuration.getManagedRepositories().get(0);
  assertEquals("check managed repositories","${appserver.base}/repositories/internal",repository.getLocation());
  assertEquals("check managed repositories","Archiva Managed Internal Repository",repository.getName());
  assertEquals("check managed repositories","internal",repository.getId());
  assertEquals("check managed repositories","default",repository.getLayout());
  assertTrue("check managed repositories",repository.isScanned());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.configuration.ConfigurationTest </h4><pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManagedRepositoryRetrievalWhenEmpty(){
  Map<String,ManagedRepositoryConfiguration> map=configuration.getManagedRepositoriesAsMap();
  assertNotNull(map);
  assertTrue(map.isEmpty());
  assertNull(configuration.findManagedRepositoryById("id"));
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNetworkProxyRetrievalWhenEmpty(){
  Map<String,NetworkProxyConfiguration> map=configuration.getNetworkProxiesAsMap();
  assertNotNull(map);
  assertTrue(map.isEmpty());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoteRepositoryRetrievalWhenEmpty(){
  Map<String,RemoteRepositoryConfiguration> map=configuration.getRemoteRepositoriesAsMap();
  assertNotNull(map);
  assertTrue(map.isEmpty());
  assertNull(configuration.findRemoteRepositoryById("id"));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNetworkProxyRetrieval(){
  NetworkProxyConfiguration proxy1=createNetworkProxy("id1","host1",8080);
  configuration.addNetworkProxy(proxy1);
  NetworkProxyConfiguration proxy2=createNetworkProxy("id2","host2",9090);
  configuration.addNetworkProxy(proxy2);
  Map<String,NetworkProxyConfiguration> map=configuration.getNetworkProxiesAsMap();
  assertNotNull(map);
  assertEquals(2,map.size());
  assertEquals(new HashSet<String>(Arrays.asList("id1","id2")),map.keySet());
  assertEquals(new HashSet<NetworkProxyConfiguration>(Arrays.asList(proxy1,proxy2)),new HashSet<NetworkProxyConfiguration>(map.values()));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoteRepositoryRetrieval(){
  RemoteRepositoryConfiguration repo1=createRemoteRepository("id1","name 1","url 1");
  configuration.addRemoteRepository(repo1);
  RemoteRepositoryConfiguration repo2=createRemoteRepository("id2","name 2","url 2");
  configuration.addRemoteRepository(repo2);
  Map<String,RemoteRepositoryConfiguration> map=configuration.getRemoteRepositoriesAsMap();
  assertNotNull(map);
  assertEquals(2,map.size());
  assertEquals(new HashSet<String>(Arrays.asList("id1","id2")),map.keySet());
  assertEquals(new HashSet<RemoteRepositoryConfiguration>(Arrays.asList(repo1,repo2)),new HashSet<RemoteRepositoryConfiguration>(map.values()));
  assertEquals(repo1,configuration.findRemoteRepositoryById("id1"));
  assertEquals(repo2,configuration.findRemoteRepositoryById("id2"));
  assertNull(configuration.findRemoteRepositoryById("id3"));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManagedRepositoryRetrieval(){
  ManagedRepositoryConfiguration repo1=createManagedRepository("id1","name 1","path 1",false);
  configuration.addManagedRepository(repo1);
  ManagedRepositoryConfiguration repo2=createManagedRepository("id2","name 2","path 2",true);
  configuration.addManagedRepository(repo2);
  Map<String,ManagedRepositoryConfiguration> map=configuration.getManagedRepositoriesAsMap();
  assertNotNull(map);
  assertEquals(2,map.size());
  assertEquals(new HashSet<String>(Arrays.asList("id1","id2")),map.keySet());
  assertEquals(new HashSet<ManagedRepositoryConfiguration>(Arrays.asList(repo1,repo2)),new HashSet<ManagedRepositoryConfiguration>(map.values()));
  assertEquals(repo1,configuration.findManagedRepositoryById("id1"));
  assertEquals(repo2,configuration.findManagedRepositoryById("id2"));
  assertNull(configuration.findManagedRepositoryById("id3"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.configuration.LegacyArtifactPathTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLegacyArtifactPathWithoutClassifierResolution(){
  legacyArtifactPath.setArtifact("groupId:artifactId:version::type");
  assertEquals("groupId",legacyArtifactPath.getGroupId());
  assertEquals("artifactId",legacyArtifactPath.getArtifactId());
  assertEquals("version",legacyArtifactPath.getVersion());
  assertNull(legacyArtifactPath.getClassifier());
  assertEquals("type",legacyArtifactPath.getType());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.consumers.core.AbstractArtifactConsumerTest </h4><pre class="type-1 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws Exception {
  FileType fileType=(FileType)archivaConfiguration.getConfiguration().getRepositoryScanning().getFileTypes().get(0);
  assertEquals(FileTypes.ARTIFACTS,fileType.getId());
  fileType.addPattern("**/*.xml");
  repoLocation=new File("target/test-" + getName() + "/test-repo");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.consumers.lucene.NexusIndexerConsumerTest </h4><pre class="type-11 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @After public void tearDown() throws Exception {
  File indexDir=new File(repositoryConfig.getLocation(),".indexer");
  FileUtils.deleteDirectory(indexDir);
  assertFalse(indexDir.exists());
  indexDir=new File(repositoryConfig.getLocation(),".index");
  FileUtils.deleteDirectory(indexDir);
  assertFalse(indexDir.exists());
  super.tearDown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.converter.artifact.LegacyToDefaultConverterTest </h4><pre class="type-9 type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testModifedArtifactFails() throws Exception {
  Artifact artifact=createArtifact("test","modified-artifact","1.0.0");
  Artifact pomArtifact=createPomArtifact(artifact);
  File sourceFile=new File(sourceRepository.getBasedir(),sourceRepository.pathOf(artifact));
  File sourcePomFile=new File(sourceRepository.getBasedir(),sourceRepository.pathOf(pomArtifact));
  File targetFile=new File(targetRepository.getBasedir(),targetRepository.pathOf(artifact));
  File targetPomFile=new File(targetRepository.getBasedir(),targetRepository.pathOf(pomArtifact));
  assertTrue("Check target file exists",targetFile.exists());
  assertTrue("Check target POM exists",targetPomFile.exists());
  sourceFile.setLastModified(System.currentTimeMillis());
  sourcePomFile.setLastModified(System.currentTimeMillis());
  long origTime=targetFile.lastModified();
  long origPomTime=targetPomFile.lastModified();
  Thread.sleep(SLEEP_MILLIS);
  artifactConverter.convert(artifact,targetRepository);
  checkWarnings(artifactConverter,2);
  assertHasWarningReason(artifactConverter,Messages.getString("failure.target.already.exists"));
  assertEquals("Check unmodified",origTime,targetFile.lastModified());
  assertEquals("Check unmodified",origPomTime,targetPomFile.lastModified());
  ArtifactRepositoryMetadata metadata=new ArtifactRepositoryMetadata(artifact);
  File metadataFile=new File(targetRepository.getBasedir(),targetRepository.pathOfRemoteRepositoryMetadata(metadata));
  assertFalse("Check metadata not created",metadataFile.exists());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDryRunFailure() throws Exception {
  artifactConverter=applicationContext.getBean("artifactConverter#dryrun-repository-converter",ArtifactConverter.class);
  Artifact artifact=createArtifact("test","modified-artifact","1.0.0");
  Artifact pomArtifact=createPomArtifact(artifact);
  File sourceFile=new File(sourceRepository.getBasedir(),sourceRepository.pathOf(artifact));
  File sourcePomFile=new File(sourceRepository.getBasedir(),sourceRepository.pathOf(pomArtifact));
  File targetFile=new File(targetRepository.getBasedir(),targetRepository.pathOf(artifact));
  File targetPomFile=new File(targetRepository.getBasedir(),targetRepository.pathOf(pomArtifact));
  assertTrue("Check target file exists",targetFile.exists());
  assertTrue("Check target POM exists",targetPomFile.exists());
  sourceFile.setLastModified(System.currentTimeMillis());
  sourcePomFile.setLastModified(System.currentTimeMillis());
  long origTime=targetFile.lastModified();
  long origPomTime=targetPomFile.lastModified();
  Thread.sleep(SLEEP_MILLIS);
  artifactConverter.clearWarnings();
  artifactConverter.convert(artifact,targetRepository);
  checkWarnings(artifactConverter,2);
  assertHasWarningReason(artifactConverter,Messages.getString("failure.target.already.exists"));
  assertEquals("Check unmodified",origTime,targetFile.lastModified());
  assertEquals("Check unmodified",origPomTime,targetPomFile.lastModified());
  ArtifactRepositoryMetadata metadata=new ArtifactRepositoryMetadata(artifact);
  File metadataFile=new File(targetRepository.getBasedir(),targetRepository.pathOfRemoteRepositoryMetadata(metadata));
  assertFalse("Check metadata not created",metadataFile.exists());
}

</code></pre>

<br>
<pre class="type-10 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSourceAndTargetRepositoriesMatch() throws Exception {
  ArtifactRepositoryFactory factory=plexusSisuBridge.lookup(ArtifactRepositoryFactory.class);
  sourceRepository=factory.createArtifactRepository("source",targetRepository.getUrl(),targetRepository.getLayout(),null,null);
  Artifact artifact=createArtifact("test","repository-artifact","1.0");
  try {
    artifactConverter.convert(artifact,targetRepository);
    fail("Should have failed trying to convert within the same repository");
  }
 catch (  ArtifactConversionException e) {
    assertEquals("check message",Messages.getString("exception.repositories.match"),e.getMessage());
    assertNull("Check no additional cause",e.getCause());
  }
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnmodifiedArtifact() throws Exception, InterruptedException {
  Artifact artifact=createArtifact("test","unmodified-artifact","1.0.0");
  Artifact pomArtifact=createPomArtifact(artifact);
  File sourceFile=new File(sourceRepository.getBasedir(),sourceRepository.pathOf(artifact));
  File sourcePomFile=new File(sourceRepository.getBasedir(),sourceRepository.pathOf(pomArtifact));
  File targetFile=new File(targetRepository.getBasedir(),targetRepository.pathOf(artifact));
  File targetPomFile=new File(targetRepository.getBasedir(),targetRepository.pathOf(pomArtifact));
  assertTrue("Check target file exists",targetFile.exists());
  assertTrue("Check target POM exists",targetPomFile.exists());
  sourceFile.setLastModified(System.currentTimeMillis());
  sourcePomFile.setLastModified(System.currentTimeMillis());
  long origTime=targetFile.lastModified();
  long origPomTime=targetPomFile.lastModified();
  Thread.sleep(SLEEP_MILLIS);
  artifactConverter.convert(artifact,targetRepository);
  checkSuccess(artifactConverter);
  compareFiles(sourceFile,targetFile);
  compareFiles(sourcePomFile,targetPomFile);
  assertEquals("Check artifact unmodified",origTime,targetFile.lastModified());
  assertEquals("Check POM unmodified",origPomTime,targetPomFile.lastModified());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.indexer.search.AbstractMavenRepositorySearch </h4><pre class="type-1 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before @Override public void setUp() throws Exception {
  super.setUp();
  FileUtils.deleteDirectory(new File(FileUtil.getBasedir(),"/target/repos/" + TEST_REPO_1 + "/.indexer"));
  assertFalse(new File(FileUtil.getBasedir(),"/target/repos/" + TEST_REPO_1 + "/.indexer").exists());
  FileUtils.deleteDirectory(new File(FileUtil.getBasedir(),"/target/repos/" + TEST_REPO_2 + "/.indexer"));
  assertFalse(new File(FileUtil.getBasedir(),"/target/repos/" + TEST_REPO_2 + "/.indexer").exists());
  archivaConfigControl=EasyMock.createControl();
  archivaConfig=archivaConfigControl.createMock(ArchivaConfiguration.class);
  DefaultManagedRepositoryAdmin defaultManagedRepositoryAdmin=new DefaultManagedRepositoryAdmin();
  defaultManagedRepositoryAdmin.setArchivaConfiguration(archivaConfig);
  DefaultProxyConnectorAdmin defaultProxyConnectorAdmin=new DefaultProxyConnectorAdmin();
  defaultProxyConnectorAdmin.setArchivaConfiguration(archivaConfig);
  search=new MavenRepositorySearch(plexusSisuBridge,defaultManagedRepositoryAdmin,mavenIndexerUtils,defaultProxyConnectorAdmin);
  nexusIndexer=plexusSisuBridge.lookup(NexusIndexer.class);
  artifactContextProducer=plexusSisuBridge.lookup(ArtifactContextProducer.class);
  defaultManagedRepositoryAdmin.setMavenIndexerUtils(mavenIndexerUtils);
  defaultManagedRepositoryAdmin.setIndexer(nexusIndexer);
  defaultManagedRepositoryAdmin.setIndexCreators(mavenIndexerUtils.getAllIndexCreators());
  config=new Configuration();
  config.addManagedRepository(createRepositoryConfig(TEST_REPO_1));
  config.addManagedRepository(createRepositoryConfig(TEST_REPO_2));
  config.addManagedRepository(createRepositoryConfig(REPO_RELEASE));
}

</code></pre>

<br>
<pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@After @Override public void tearDown() throws Exception {
  for (  IndexingContext indexingContext : nexusIndexer.getIndexingContexts().values()) {
    nexusIndexer.removeIndexingContext(indexingContext,true);
  }
  FileUtils.deleteDirectory(new File(FileUtil.getBasedir(),"/target/repos/" + TEST_REPO_1));
  assertFalse(new File(FileUtil.getBasedir(),"/target/repos/" + TEST_REPO_1).exists());
  FileUtils.deleteDirectory(new File(FileUtil.getBasedir(),"/target/repos/" + TEST_REPO_2));
  assertFalse(new File(FileUtil.getBasedir(),"/target/repos/" + TEST_REPO_2).exists());
  super.tearDown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.indexer.search.MavenRepositorySearchOSGITest </h4><pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void searchFelixWithSymbolicName() throws Exception {
  createIndex(TEST_REPO_1,Collections.<File>emptyList(),true);
  List<String> selectedRepos=Arrays.asList(TEST_REPO_1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchFields searchFields=new SearchFields();
  searchFields.setBundleSymbolicName("org.apache.felix.bundlerepository");
  searchFields.setBundleVersion("1.6.6");
  searchFields.setRepositories(selectedRepos);
  SearchResults results=search.search("user",searchFields,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(1,results.getTotalHits());
  SearchResultHit hit=results.getHits().get(0);
  assertEquals("org.apache.felix",hit.getGroupId());
  assertEquals("org.apache.felix.bundlerepository",hit.getArtifactId());
  assertEquals("1.6.6",hit.getVersions().get(0));
  assertEquals("org.apache.felix.bundlerepository;uses:=\"org.osgi.framework\";version=\"2.0\"",hit.getBundleExportPackage());
  assertEquals("org.apache.felix.bundlerepository.RepositoryAdmin,org.osgi.service.obr.RepositoryAdmin",hit.getBundleExportService());
  assertEquals("org.apache.felix.bundlerepository",hit.getBundleSymbolicName());
  assertEquals("1.6.6",hit.getBundleVersion());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.indexer.search.MavenRepositorySearchTest </h4><pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdvancedSearchSearchFieldsAreNull() throws Exception {
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  SearchFields searchFields=new SearchFields();
  searchFields.setRepositories(selectedRepos);
  try {
    EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
    archivaConfigControl.replay();
    search.search("user",searchFields,null);
    archivaConfigControl.verify();
    fail("A RepositorySearchExcecption should have been thrown.");
  }
 catch (  RepositorySearchException e) {
    assertEquals("No search fields set.",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuickSearchWithMultipleKeywords() throws Exception {
  createSimpleIndex(false);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",selectedRepos,"archiva search",null,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(1,results.getTotalHits());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdvancedSearch() throws Exception {
  List<File> files=new ArrayList<>();
  files.add(new File(FileUtil.getBasedir(),"src/test/" + TEST_REPO_2 + "/org/apache/archiva/archiva-search/1.0/archiva-search-1.0.jar"));
  files.add(new File(FileUtil.getBasedir(),"src/test/" + TEST_REPO_2 + "/org/apache/archiva/archiva-search/1.1/archiva-search-1.1.jar"));
  createIndex(TEST_REPO_2,files,false);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_2);
  SearchFields searchFields=new SearchFields();
  searchFields.setGroupId("org.apache.archiva");
  searchFields.setVersion("1.0");
  searchFields.setRepositories(selectedRepos);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",searchFields,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(1,results.getTotalHits());
  SearchResultHit hit=results.getHits().get(0);
  assertEquals("org.apache.archiva",hit.getGroupId());
  assertEquals("archiva-search",hit.getArtifactId());
  assertEquals("1.0",hit.getVersions().get(0));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdvancedSearchClassname() throws Exception {
  createIndexContainingMoreArtifacts(true);
  List<String> selectedRepos=Arrays.asList(TEST_REPO_1);
  SearchFields searchFields=new SearchFields();
  searchFields.setClassName("com.classname.search.App");
  searchFields.setRepositories(selectedRepos);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",searchFields,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals("totalHits not 1 results " + results,1,results.getTotalHits());
  SearchResultHit hit=results.getHits().get(0);
  assertEquals("groupId not com","com",hit.getGroupId());
  assertEquals("arttifactId not classname-search","classname-search",hit.getArtifactId());
  assertEquals(" hits.version(0) not 1.0","1.0",hit.getVersions().get(0));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuickSearchNotWithClassifier() throws Exception {
  createSimpleIndex(true);
  List<String> selectedRepos=Arrays.asList(TEST_REPO_1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",selectedRepos,"archiva-search",null,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  SearchResultHit hit=results.getSearchResultHit(SearchUtil.getHitId("org.apache.archiva","archiva-search",null,"jar"));
  assertNotNull("hit null in result " + results.getHits(),hit);
  assertEquals("org.apache.archiva",hit.getGroupId());
  assertEquals("archiva-search",hit.getArtifactId());
  assertEquals("1.0",hit.getVersions().get(0));
  archivaConfigControl.reset();
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  results=search.search("user",selectedRepos,"archiva-search",null,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals("total hints not 3 hits " + results.getHits(),3,results.getTotalHits());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdvancedSearchJarArtifacts() throws Exception {
  createIndexContainingMoreArtifacts(true);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  SearchFields searchFields=new SearchFields();
  searchFields.setPackaging("jar");
  searchFields.setRepositories(selectedRepos);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",searchFields,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals("not 8 but " + results.getTotalHits() + ":"+ niceDisplay(results),8,results.getTotalHits());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuickSearchMultipleArtifactsSameVersion() throws Exception {
  createIndexContainingMultipleArtifactsSameVersion(false);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",selectedRepos,"archiva-search",null,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(3,results.getTotalHits());
  SearchResultHit hit=results.getHits().get(0);
  assertEquals("org.apache.archiva",hit.getGroupId());
  assertEquals("archiva-search",hit.getArtifactId());
  assertEquals("1.0",hit.getVersions().get(0));
  assertEquals(1,hit.getVersions().size());
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdvancedSearchNoRepositoriesConfigured() throws Exception {
  SearchFields searchFields=new SearchFields();
  searchFields.setArtifactId("archiva");
  searchFields.setRepositories(null);
  try {
    search.search("user",searchFields,null);
    fail("A RepositorySearchExcecption should have been thrown.");
  }
 catch (  RepositorySearchException e) {
    assertEquals("Repositories cannot be null.",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdvancedSearchNoIndexFound() throws Exception {
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  SearchFields searchFields=new SearchFields();
  searchFields.setGroupId("org.apache.archiva");
  searchFields.setRepositories(selectedRepos);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",searchFields,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(0,results.getTotalHits());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSearchWithinSearchResults() throws Exception {
  createSimpleIndex(true);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  List<String> previousSearchTerms=new ArrayList<>();
  previousSearchTerms.add("archiva-test");
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",selectedRepos,"1.0",null,previousSearchTerms);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals("total hints not 1",1,results.getTotalHits());
  SearchResultHit hit=results.getHits().get(0);
  assertEquals("org.apache.archiva",hit.getGroupId());
  assertEquals("archiva-test",hit.getArtifactId());
  assertEquals("versions not 1",1,hit.getVersions().size());
  assertEquals("1.0",hit.getVersions().get(0));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleArtifactsSameVersionWithClassifier() throws Exception {
  createIndexContainingMultipleArtifactsSameVersion(true);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchFields searchFields=new SearchFields();
  searchFields.setGroupId("org.apache.archiva");
  searchFields.setArtifactId("archiva-search");
  searchFields.setClassifier("sources");
  searchFields.setRepositories(selectedRepos);
  SearchResults results=search.search("user",searchFields,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(1,results.getTotalHits());
  SearchResultHit hit=results.getHits().get(0);
  assertEquals("org.apache.archiva",hit.getGroupId());
  assertEquals("archiva-search",hit.getArtifactId());
  assertEquals("1.0",hit.getVersions().get(0));
  assertEquals(1,hit.getVersions().size());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuickSearch() throws Exception {
  createSimpleIndex(false);
  List<String> selectedRepos=Arrays.asList(TEST_REPO_1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",selectedRepos,"archiva-search",null,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  SearchResultHit hit=results.getSearchResultHit(SearchUtil.getHitId("org.apache.archiva","archiva-search",null,"jar"));
  assertNotNull("hit null in result " + results.getHits(),hit);
  assertEquals("org.apache.archiva",hit.getGroupId());
  assertEquals("archiva-search",hit.getArtifactId());
  assertEquals("1.0",hit.getVersions().get(0));
  archivaConfigControl.reset();
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  results=search.search("user",selectedRepos,"org.apache.archiva",null,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals("total hints not 3",3,results.getTotalHits());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllGroupIds() throws Exception {
  createIndexContainingMoreArtifacts(true);
  List<String> selectedRepos=Arrays.asList(TEST_REPO_1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(0,2);
  archivaConfigControl.replay();
  Collection<String> groupIds=search.getAllGroupIds("user",selectedRepos);
  archivaConfigControl.verify();
  log.info("groupIds: {}",groupIds);
  assertEquals(3,groupIds.size());
  assertTrue(groupIds.contains("com"));
  assertTrue(groupIds.contains("org.apache.felix"));
  assertTrue(groupIds.contains("org.apache.archiva"));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoIndexFound() throws Exception {
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",selectedRepos,"org.apache.archiva",null,null);
  assertNotNull(results);
  assertEquals(0,results.getTotalHits());
  archivaConfigControl.verify();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdvancedSearchArtifactIdHasNumericChar() throws Exception {
  List<File> files=new ArrayList<>();
  files.add(new File(FileUtil.getBasedir(),"src/test/" + TEST_REPO_1 + "/com/artifactid-numeric/1.0/artifactid-numeric-1.0.jar"));
  files.add(new File(FileUtil.getBasedir(),"src/test/" + TEST_REPO_1 + "/com/artifactid-numeric123/1.0/artifactid-numeric123-1.0.jar"));
  createIndex(TEST_REPO_1,files,true);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  SearchFields searchFields=new SearchFields();
  searchFields.setArtifactId("artifactid-numeric");
  searchFields.setRepositories(selectedRepos);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",searchFields,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(2,results.getTotalHits());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdvancedSearchWithPagination() throws Exception {
  createIndexContainingMoreArtifacts(false);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  SearchFields searchFields=new SearchFields();
  searchFields.setGroupId("org.apache.archiva");
  searchFields.setRepositories(selectedRepos);
  SearchResultLimits limits=new SearchResultLimits(0);
  limits.setPageSize(1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",searchFields,limits);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(4,results.getTotalHits());
  assertEquals(1,results.getHits().size());
  archivaConfigControl.reset();
  limits=new SearchResultLimits(1);
  limits.setPageSize(1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  results=search.search("user",searchFields,limits);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(4,results.getTotalHits());
  assertEquals(1,results.getHits().size());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testArtifactFoundInMultipleRepositories() throws Exception {
  createSimpleIndex(true);
  List<File> files=new ArrayList<>();
  files.add(new File(FileUtil.getBasedir(),"src/test/" + TEST_REPO_2 + "/org/apache/archiva/archiva-search/1.0/archiva-search-1.0.jar"));
  files.add(new File(FileUtil.getBasedir(),"src/test/" + TEST_REPO_2 + "/org/apache/archiva/archiva-search/1.1/archiva-search-1.1.jar"));
  createIndex(TEST_REPO_2,files,false);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  selectedRepos.add(TEST_REPO_2);
  config.addManagedRepository(createRepositoryConfig(TEST_REPO_2));
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,5);
  archivaConfigControl.replay();
  Thread.sleep(2000);
  SearchResults results=search.search("user",selectedRepos,"archiva-search",null,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  SearchResultHit hit=results.getSearchResultHit(SearchUtil.getHitId("org.apache.archiva","archiva-search",null,"jar"));
  assertEquals("org.apache.archiva",hit.getGroupId());
  assertEquals("archiva-search",hit.getArtifactId());
  assertEquals("not 2 version for hit " + hit + "::"+ niceDisplay(results),2,hit.getVersions().size());
  assertTrue(hit.getVersions().contains("1.0"));
  assertTrue(hit.getVersions().contains("1.1"));
  archivaConfigControl.reset();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdvancedSearchAllSearchCriteriaSpecified() throws Exception {
  createSimpleIndex(true);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  SearchFields searchFields=new SearchFields();
  searchFields.setGroupId("org.apache.archiva");
  searchFields.setArtifactId("archiva-test");
  searchFields.setVersion("2.0");
  searchFields.setPackaging("jar");
  searchFields.setClassName("org.apache.archiva.test.App");
  searchFields.setRepositories(selectedRepos);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",searchFields,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals("total hints not 1" + results,1,results.getTotalHits());
  SearchResultHit hit=results.getHits().get(0);
  assertEquals("org.apache.archiva",hit.getGroupId());
  assertEquals("archiva-test",hit.getArtifactId());
  assertEquals("version not 2.0","2.0",hit.getVersions().get(0));
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepositoryNotFound() throws Exception {
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add("non-existing-repo");
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",selectedRepos,"org.apache.archiva",null,null);
  assertNotNull(results);
  assertEquals(0,results.getTotalHits());
  archivaConfigControl.verify();
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testQuickSearchWithPagination() throws Exception {
  createSimpleIndex(true);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  SearchResultLimits limits=new SearchResultLimits(0);
  limits.setPageSize(1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",selectedRepos,"org",limits,Collections.<String>emptyList());
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(1,results.getHits().size());
  assertEquals("total hits not 8 for page1 " + results,8,results.getTotalHits());
  assertEquals("returned hits not 1 for page1 " + results,1,results.getReturnedHitsCount());
  assertEquals(limits,results.getLimits());
  archivaConfigControl.reset();
  limits=new SearchResultLimits(1);
  limits.setPageSize(1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  results=search.search("user",selectedRepos,"org",limits,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals("hits not 1",1,results.getHits().size());
  assertEquals("total hits not 8 for page 2 " + results,8,results.getTotalHits());
  assertEquals("returned hits not 1 for page2 " + results,1,results.getReturnedHitsCount());
  assertEquals(limits,results.getLimits());
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdvancedSearchSearchFieldsAreBlank() throws Exception {
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  SearchFields searchFields=new SearchFields();
  searchFields.setGroupId("");
  searchFields.setArtifactId("");
  searchFields.setVersion("");
  searchFields.setPackaging("");
  searchFields.setClassName("");
  searchFields.setRepositories(selectedRepos);
  try {
    EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
    archivaConfigControl.replay();
    search.search("user",searchFields,null);
    archivaConfigControl.verify();
    fail("A RepositorySearchExcecption should have been thrown.");
  }
 catch (  RepositorySearchException e) {
    assertEquals("No search fields set.",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdvancedSearchWithIncorrectPackaging() throws Exception {
  createSimpleIndex(true);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  SearchFields searchFields=new SearchFields();
  searchFields.setGroupId("org.apache.archiva");
  searchFields.setArtifactId("archiva-test");
  searchFields.setVersion("2.0");
  searchFields.setPackaging("war");
  searchFields.setRepositories(selectedRepos);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",searchFields,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(0,results.getTotalHits());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAdvancedSearchClassNameInWar() throws Exception {
  createIndexContainingMoreArtifacts(true);
  List<String> selectedRepos=Arrays.asList(TEST_REPO_1);
  SearchFields searchFields=new SearchFields();
  searchFields.setClassName("SomeClass");
  searchFields.setRepositories(selectedRepos);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",searchFields,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(1,results.getHits().size());
  assertEquals("test-webapp",results.getHits().get(0).getArtifactId());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSearchWithUnknownRepo() throws Exception {
  createIndexContainingMoreArtifacts(true);
  List<String> selectedRepos=Arrays.asList("foo");
  SearchFields searchFields=new SearchFields();
  searchFields.setClassName("SomeClass");
  searchFields.setRepositories(selectedRepos);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",searchFields,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(0,results.getHits().size());
}

</code></pre>

<br>
<pre class="type-9 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoMatchFound() throws Exception {
  createSimpleIndex(false);
  List<String> selectedRepos=new ArrayList<>();
  selectedRepos.add(TEST_REPO_1);
  EasyMock.expect(archivaConfig.getConfiguration()).andReturn(config).times(1,2);
  archivaConfigControl.replay();
  SearchResults results=search.search("user",selectedRepos,"dfghdfkweriuasndsaie",null,null);
  archivaConfigControl.verify();
  assertNotNull(results);
  assertEquals(0,results.getTotalHits());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.metadata.repository.AbstractMetadataRepositoryTest </h4><pre class="type-5 type-6 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteProject() throws Exception {
  ArtifactMetadata artifact=createArtifact();
  artifact.addFacet(new TestMetadataFacet("value"));
  repository.updateArtifact(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION,artifact);
  repository.updateArtifact(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION,artifact);
  assertEquals(1,repository.getProjectVersions(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT).size());
  repository.removeProject(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT);
  Collection<String> versions=repository.getProjectVersions(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT);
  assertThat(versions).isNotNull().isEmpty();
}

</code></pre>

<br>
<pre class="type-3 type-5 type-6 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateProjectVersionMetadataWithAllElements() throws Exception {
  ProjectVersionMetadata metadata=new ProjectVersionMetadata();
  metadata.setId(TEST_PROJECT_VERSION);
  metadata.setName("project name");
  metadata.setDescription("project description");
  metadata.setUrl("the url");
  MailingList mailingList=new MailingList();
  mailingList.setName("Foo List");
  mailingList.setUnsubscribeAddress("UnsubscribeAddress");
  mailingList.setSubscribeAddress("SubscribeAddress");
  mailingList.setPostAddress("PostAddress");
  mailingList.setMainArchiveUrl("MainArchiveUrl");
  mailingList.setOtherArchives(Arrays.asList("other archive"));
  metadata.setMailingLists(Arrays.asList(mailingList));
  Scm scm=new Scm();
  scm.setConnection("connection");
  scm.setDeveloperConnection("dev conn");
  scm.setUrl("url");
  metadata.setScm(scm);
  CiManagement ci=new CiManagement();
  ci.setSystem("system");
  ci.setUrl("ci url");
  metadata.setCiManagement(ci);
  IssueManagement tracker=new IssueManagement();
  tracker.setSystem("system");
  tracker.setUrl("issue tracker url");
  metadata.setIssueManagement(tracker);
  metadata.setOrganization(TEST_ORGANIZATION);
  License l=new License();
  l.setName("license name");
  l.setUrl("license url");
  metadata.addLicense(l);
  Dependency d=new Dependency();
  d.setArtifactId("artifactId");
  d.setClassifier("classifier");
  d.setGroupId("groupId");
  d.setScope("scope");
  d.setSystemPath("system path");
  d.setType("type");
  d.setVersion("version");
  d.setOptional(true);
  metadata.addDependency(d);
  repository.updateProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,metadata);
  metadata=repository.getProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION);
  assertEquals(TEST_PROJECT_VERSION,metadata.getId());
  assertEquals(TEST_PROJECT_VERSION,metadata.getVersion());
  assertEquals("project name",metadata.getName());
  assertEquals("project description",metadata.getDescription());
  assertEquals("the url",metadata.getUrl());
  assertEquals("connection",metadata.getScm().getConnection());
  assertEquals("dev conn",metadata.getScm().getDeveloperConnection());
  assertEquals("url",metadata.getScm().getUrl());
  assertEquals("system",metadata.getCiManagement().getSystem());
  assertEquals("ci url",metadata.getCiManagement().getUrl());
  assertEquals("system",metadata.getIssueManagement().getSystem());
  assertEquals("issue tracker url",metadata.getIssueManagement().getUrl());
  assertEquals(TEST_ORGANIZATION.getName(),metadata.getOrganization().getName());
  assertEquals(TEST_ORGANIZATION.getUrl(),metadata.getOrganization().getUrl());
  assertEquals(1,metadata.getMailingLists().size());
  MailingList retrievedMailingList=metadata.getMailingLists().get(0);
  assertEquals(mailingList.getName(),retrievedMailingList.getName());
  assertEquals(mailingList.getMainArchiveUrl(),retrievedMailingList.getMainArchiveUrl());
  assertEquals(mailingList.getPostAddress(),retrievedMailingList.getPostAddress());
  assertEquals(mailingList.getSubscribeAddress(),retrievedMailingList.getSubscribeAddress());
  assertEquals(mailingList.getUnsubscribeAddress(),retrievedMailingList.getUnsubscribeAddress());
  assertThat(retrievedMailingList.getOtherArchives()).isNotNull().isNotEmpty().hasSize(1).contains("other archive");
  assertEquals(1,metadata.getLicenses().size());
  l=metadata.getLicenses().get(0);
  assertEquals("license name",l.getName());
  assertEquals("license url",l.getUrl());
  assertEquals(1,metadata.getDependencies().size());
  d=metadata.getDependencies().get(0);
  assertEquals("artifactId",d.getArtifactId());
  assertEquals("classifier",d.getClassifier());
  assertEquals("groupId",d.getGroupId());
  assertEquals("scope",d.getScope());
  assertEquals("system path",d.getSystemPath());
  assertEquals("type",d.getType());
  assertEquals("version",d.getVersion());
  assertTrue(d.isOptional());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void hasMetadataFacet() throws Exception {
  assertFalse(repository.hasMetadataFacet(TEST_REPO_ID,KindOfRepositoryStatistics.class.getName()));
  Calendar cal=Calendar.getInstance();
  repository.addMetadataFacet(TEST_REPO_ID,new KindOfRepositoryStatistics("first",cal.getTime()));
  assertTrue(repository.hasMetadataFacet(TEST_REPO_ID,KindOfRepositoryStatistics.class.getName()));
  cal.add(Calendar.MINUTE,2);
  repository.addMetadataFacet(TEST_REPO_ID,new KindOfRepositoryStatistics("second",cal.getTime()));
  cal.add(Calendar.MINUTE,2);
  repository.addMetadataFacet(TEST_REPO_ID,new KindOfRepositoryStatistics("third",cal.getTime()));
  List<String> facets=repository.getMetadataFacets(TEST_REPO_ID,KindOfRepositoryStatistics.class.getName());
  assertThat(facets).isNotNull().isNotEmpty().hasSize(3);
  assertTrue(repository.hasMetadataFacet(TEST_REPO_ID,KindOfRepositoryStatistics.class.getName()));
  repository.removeMetadataFacets(TEST_REPO_ID,KindOfRepositoryStatistics.class.getName());
  assertFalse(repository.hasMetadataFacet(TEST_REPO_ID,KindOfRepositoryStatistics.class.getName()));
  facets=repository.getMetadataFacets(TEST_REPO_ID,KindOfRepositoryStatistics.class.getName());
  assertThat(facets).isNotNull().isEmpty();
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateProjectVersionMetadataIncomplete() throws Exception {
  ProjectVersionMetadata metadata=new ProjectVersionMetadata();
  metadata.setId(TEST_PROJECT_VERSION);
  metadata.setIncomplete(true);
  repository.updateProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,metadata);
  metadata=repository.getProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION);
  assertEquals(true,metadata.isIncomplete());
  assertNull(metadata.getCiManagement());
  assertNull(metadata.getScm());
  assertNull(metadata.getIssueManagement());
  assertNull(metadata.getOrganization());
  assertNull(metadata.getDescription());
  assertNull(metadata.getName());
  assertEquals(TEST_PROJECT_VERSION,metadata.getId());
  assertEquals(TEST_PROJECT_VERSION,metadata.getVersion());
  assertTrue(metadata.getMailingLists().isEmpty());
  assertTrue(metadata.getLicenses().isEmpty());
  assertTrue(metadata.getDependencies().isEmpty());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetArtifactOnly() throws Exception {
  assertThat(new ArrayList<>(repository.getArtifacts(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION))).isNotNull().isEmpty();
  assertThat(repository.getProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION)).isNull();
  assertThat(repository.getProject(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT)).isNull();
  assertThat(repository.getRootNamespaces(TEST_REPO_ID)).isNotNull().isEmpty();
  ArtifactMetadata metadata=createArtifact();
  repository.updateArtifact(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION,metadata);
  Collection<ArtifactMetadata> artifacts=repository.getArtifacts(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION);
  assertThat(artifacts).containsExactly(metadata);
  assertThat(repository.getRootNamespaces(TEST_REPO_ID)).isNotNull().isNotEmpty().contains(TEST_NAMESPACE).hasSize(1);
  ProjectMetadata projectMetadata=repository.getProject(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT);
  assertEquals(TEST_PROJECT,projectMetadata.getId());
  assertEquals(TEST_NAMESPACE,projectMetadata.getNamespace());
  ProjectVersionMetadata projectVersionMetadata=repository.getProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION);
  assertEquals(TEST_PROJECT_VERSION,projectVersionMetadata.getId());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-6 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateArtifactMetadataWithExistingFacetsFacetPropertyWasRemoved() throws Exception {
  ArtifactMetadata metadata=createArtifact();
  Map<String,String> additionalProps=new HashMap<>();
  additionalProps.put("deleteKey","deleteValue");
  MetadataFacet facet=new TestMetadataFacet(TEST_FACET_ID,"baz",additionalProps);
  metadata.addFacet(facet);
  repository.updateArtifact(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION,metadata);
  Collection<ArtifactMetadata> artifacts=repository.getArtifacts(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION);
  assertThat(artifacts).isNotNull().isNotEmpty().hasSize(1);
  metadata=artifacts.iterator().next();
  Collection<String> ids=metadata.getFacetIds();
  assertThat(ids).isNotNull().isNotEmpty().hasSize(1).contains(TEST_FACET_ID);
  TestMetadataFacet testFacet=(TestMetadataFacet)metadata.getFacet(TEST_FACET_ID);
  Map<String,String> facetProperties=testFacet.toProperties();
  assertEquals("deleteValue",facetProperties.get("deleteKey"));
  facetProperties.remove("deleteKey");
  TestMetadataFacet newTestFacet=new TestMetadataFacet(TEST_FACET_ID,testFacet.getValue(),facetProperties);
  metadata.addFacet(newTestFacet);
  repository.updateArtifact(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION,metadata);
  artifacts=repository.getArtifacts(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION);
  assertThat(artifacts).isNotNull().isNotEmpty().hasSize(1);
  metadata=artifacts.iterator().next();
  ids=metadata.getFacetIds();
  assertThat(ids).isNotNull().isNotEmpty().hasSize(1).contains(TEST_FACET_ID);
  testFacet=(TestMetadataFacet)metadata.getFacet(TEST_FACET_ID);
  Map<String,String> props=testFacet.toProperties();
  assertThat(props).isNotNull().doesNotContainKey("deleteKey");
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteRepository() throws Exception {
  repository.updateNamespace(TEST_REPO_ID,TEST_NAMESPACE);
  ProjectMetadata project1=new ProjectMetadata();
  project1.setNamespace(TEST_NAMESPACE);
  project1.setId("project1");
  repository.updateProject(TEST_REPO_ID,project1);
  ProjectMetadata project2=new ProjectMetadata();
  project2.setNamespace(TEST_NAMESPACE);
  project2.setId("project2");
  repository.updateProject(TEST_REPO_ID,project2);
  ArtifactMetadata artifact1=createArtifact();
  artifact1.setProject("project1");
  repository.updateArtifact(TEST_REPO_ID,TEST_NAMESPACE,"project1",TEST_PROJECT_VERSION,artifact1);
  ArtifactMetadata artifact2=createArtifact();
  artifact2.setProject("project2");
  repository.updateArtifact(TEST_REPO_ID,TEST_NAMESPACE,"project2",TEST_PROJECT_VERSION,artifact2);
  repository.save();
  List<ArtifactMetadata> expected=Arrays.asList(artifact1,artifact2);
  Collections.sort(expected,new ArtifactMetadataComparator());
  List<ArtifactMetadata> actual=new ArrayList<>(repository.getArtifactsByDateRange(TEST_REPO_ID,null,null));
  Collections.sort(actual,new ArtifactMetadataComparator());
  assertEquals(expected,actual);
  repository.removeRepository(TEST_REPO_ID);
  assertTrue(repository.getArtifacts(TEST_REPO_ID).isEmpty());
  assertTrue(repository.getRootNamespaces(TEST_REPO_ID).isEmpty());
}

</code></pre>

<br>
<pre class="type-5 type-6 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteArtifact() throws Exception {
  ArtifactMetadata artifact=createArtifact();
  artifact.addFacet(new TestMetadataFacet("value"));
  repository.updateArtifact(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION,artifact);
  repository.updateArtifact(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION,artifact);
  Collection<ArtifactMetadata> artifacts=repository.getArtifacts(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION);
  assertEquals(Collections.singletonList(artifact),new ArrayList<>(artifacts));
  repository.removeArtifact(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION,artifact.getId());
  artifacts=repository.getArtifacts(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION);
  assertThat(artifacts).isNotNull().isEmpty();
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveFacet() throws Exception {
  TestMetadataFacet metadataFacet=new TestMetadataFacet(TEST_VALUE);
  repository.addMetadataFacet(TEST_REPO_ID,metadataFacet);
  assertEquals(metadataFacet,repository.getMetadataFacet(TEST_REPO_ID,TEST_FACET_ID,TEST_NAME));
  List<String> facets=repository.getMetadataFacets(TEST_REPO_ID,TEST_FACET_ID);
  assertFalse(facets.isEmpty());
  repository.removeMetadataFacet(TEST_REPO_ID,TEST_FACET_ID,TEST_NAME);
  assertNull(repository.getMetadataFacet(TEST_REPO_ID,TEST_FACET_ID,TEST_NAME));
  facets=repository.getMetadataFacets(TEST_REPO_ID,TEST_FACET_ID);
  assertTrue(facets.isEmpty());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-6 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateProjectVersionMetadataWithExistingFacetsFacetPropertyWasRemoved() throws Exception {
  ProjectVersionMetadata metadata=new ProjectVersionMetadata();
  metadata.setId(TEST_PROJECT_VERSION);
  Map<String,String> additionalProps=new HashMap<>();
  additionalProps.put("deleteKey","deleteValue");
  MetadataFacet facet=new TestMetadataFacet(TEST_FACET_ID,"baz",additionalProps);
  metadata.addFacet(facet);
  repository.updateProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,metadata);
  metadata=repository.getProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION);
  assertThat(metadata.getFacetIds()).isNotNull().isNotEmpty().hasSize(1).contains(TEST_FACET_ID);
  TestMetadataFacet testFacet=(TestMetadataFacet)metadata.getFacet(TEST_FACET_ID);
  Map<String,String> facetProperties=testFacet.toProperties();
  assertEquals("deleteValue",facetProperties.get("deleteKey"));
  facetProperties.remove("deleteKey");
  TestMetadataFacet newTestFacet=new TestMetadataFacet(TEST_FACET_ID,testFacet.getValue(),facetProperties);
  metadata.addFacet(newTestFacet);
  repository.updateProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,metadata);
  metadata=repository.getProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION);
  assertThat(metadata.getFacetIds()).isNotNull().isNotEmpty().hasSize(1).contains(TEST_FACET_ID);
  testFacet=(TestMetadataFacet)metadata.getFacet(TEST_FACET_ID);
  assertFalse(testFacet.toProperties().containsKey("deleteKey"));
}

</code></pre>

<br>
<pre class="type-5 type-6 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateProjectVersionMetadataWithNoOtherArchives() throws Exception {
  ProjectVersionMetadata metadata=new ProjectVersionMetadata();
  metadata.setId(TEST_PROJECT_VERSION);
  MailingList mailingList=new MailingList();
  mailingList.setName("Foo List");
  mailingList.setOtherArchives(Collections.<String>emptyList());
  metadata.setMailingLists(Arrays.asList(mailingList));
  repository.updateProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,metadata);
  metadata=repository.getProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION);
  assertEquals(TEST_PROJECT_VERSION,metadata.getId());
  List<MailingList> mailingLists=metadata.getMailingLists();
  assertThat(mailingLists).isNotNull().isNotEmpty().hasSize(1);
  mailingList=metadata.getMailingLists().get(0);
  assertEquals("Foo List",mailingList.getName());
  List<String> others=mailingList.getOtherArchives();
  assertThat(others).isNotNull().isEmpty();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectOnly() throws Exception {
  assertNull(repository.getProject(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT));
  assertThat(repository.getRootNamespaces(TEST_REPO_ID)).isNotNull().isEmpty();
  ProjectMetadata project=new ProjectMetadata();
  project.setId(TEST_PROJECT);
  project.setNamespace(TEST_NAMESPACE);
  repository.updateProject(TEST_REPO_ID,project);
  project=repository.getProject(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT);
  assertEquals(TEST_PROJECT,project.getId());
  assertEquals(TEST_NAMESPACE,project.getNamespace());
  Collection<String> namespaces=repository.getRootNamespaces(TEST_REPO_ID);
  assertThat(namespaces).isNotNull().isNotEmpty().contains(TEST_NAMESPACE).hasSize(1);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionOnly() throws Exception {
  assertNull(repository.getProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION));
  assertNull(repository.getProject(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT));
  assertThat(repository.getRootNamespaces(TEST_REPO_ID)).isNotNull().isEmpty();
  ProjectVersionMetadata metadata=new ProjectVersionMetadata();
  metadata.setId(TEST_PROJECT_VERSION);
  repository.updateProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,metadata);
  metadata=repository.getProjectVersion(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT,TEST_PROJECT_VERSION);
  assertEquals(TEST_PROJECT_VERSION,metadata.getId());
  Collection<String> namespaces=repository.getRootNamespaces(TEST_REPO_ID);
  assertThat(namespaces).isNotNull().isNotEmpty().hasSize(1).contains(TEST_NAMESPACE);
  ProjectMetadata projectMetadata=repository.getProject(TEST_REPO_ID,TEST_NAMESPACE,TEST_PROJECT);
  assertNotNull(projectMetadata);
  assertEquals(TEST_PROJECT,projectMetadata.getId());
  assertEquals(TEST_NAMESPACE,projectMetadata.getNamespace());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.metadata.repository.stats.JcrRepositoryStatisticsGatheringTest </h4><pre class="type-1 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  File confFile=new File("src/test/repository.xml");
  File dir=new File("target/jcr");
  FileUtils.deleteDirectory(dir);
  assertTrue(confFile.exists());
  assertFalse(dir.exists());
  TransientRepository repository=new TransientRepository(confFile,dir);
  session=repository.login(new SimpleCredentials("username","password".toCharArray()));
  Workspace workspace=session.getWorkspace();
  NamespaceRegistry registry=workspace.getNamespaceRegistry();
  registry.registerNamespace("archiva","http://archiva.apache.org/jcr/");
  NodeTypeManager nodeTypeManager=workspace.getNodeTypeManager();
  registerMixinNodeType(nodeTypeManager,"archiva:namespace");
  registerMixinNodeType(nodeTypeManager,"archiva:project");
  registerMixinNodeType(nodeTypeManager,"archiva:projectVersion");
  registerMixinNodeType(nodeTypeManager,"archiva:artifact");
  registerMixinNodeType(nodeTypeManager,"archiva:facet");
  metadataRepository=mock(MetadataRepository.class);
  when(metadataRepository.canObtainAccess(Session.class)).thenReturn(true);
  when(metadataRepository.obtainAccess(Session.class)).thenReturn(session);
  repositoryStatisticsManager=new DefaultRepositoryStatisticsManager();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.metadata.repository.stats.RepositoryStatisticsManagerTest </h4><pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetLatestStats() throws Exception {
  Date startTime=TIMESTAMP_FORMAT.parse(SECOND_TEST_SCAN);
  Date endTime=new Date(startTime.getTime() + 60000);
  RepositoryStatistics stats=new RepositoryStatistics();
  stats.setScanStartTime(startTime);
  stats.setScanEndTime(endTime);
  stats.setTotalArtifactFileSize(1314527915L);
  stats.setNewFileCount(123);
  stats.setTotalArtifactCount(10386);
  stats.setTotalProjectCount(2031);
  stats.setTotalGroupCount(529);
  stats.setTotalFileCount(56229);
  expect(metadataRepository.getMetadataFacets(TEST_REPO_ID,RepositoryStatistics.FACET_ID)).andReturn(Arrays.asList(FIRST_TEST_SCAN,SECOND_TEST_SCAN));
  expect(metadataRepository.getMetadataFacet(TEST_REPO_ID,RepositoryStatistics.FACET_ID,SECOND_TEST_SCAN)).andReturn(stats);
  metadataRepositoryControl.replay();
  stats=repositoryStatisticsManager.getLastStatistics(metadataRepository,TEST_REPO_ID);
  assertNotNull(stats);
  assertEquals(1314527915L,stats.getTotalArtifactFileSize());
  assertEquals(123,stats.getNewFileCount());
  assertEquals(10386,stats.getTotalArtifactCount());
  assertEquals(2031,stats.getTotalProjectCount());
  assertEquals(529,stats.getTotalGroupCount());
  assertEquals(56229,stats.getTotalFileCount());
  assertEquals(SECOND_TEST_SCAN,TIMESTAMP_FORMAT.format(stats.getScanStartTime()));
  assertEquals(SECOND_TEST_SCAN,stats.getName());
  assertEquals(endTime,stats.getScanEndTime());
  metadataRepositoryControl.verify();
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddNewStats() throws Exception {
  Date current=new Date();
  Date startTime=new Date(current.getTime() - 12345);
  RepositoryStatistics stats=createTestStats(startTime,current);
  walkRepository(1);
  metadataRepository.addMetadataFacet(TEST_REPO_ID,stats);
  expect(metadataRepository.getMetadataFacets(TEST_REPO_ID,RepositoryStatistics.FACET_ID)).andReturn(Arrays.asList(stats.getName()));
  expect(metadataRepository.getMetadataFacet(TEST_REPO_ID,RepositoryStatistics.FACET_ID,stats.getName())).andReturn(stats);
  expect(metadataRepository.canObtainAccess(Session.class)).andReturn(false);
  metadataRepositoryControl.replay();
  repositoryStatisticsManager.addStatisticsAfterScan(metadataRepository,TEST_REPO_ID,startTime,current,56345,45);
  stats=repositoryStatisticsManager.getLastStatistics(metadataRepository,TEST_REPO_ID);
  assertNotNull(stats);
  assertEquals(246900,stats.getTotalArtifactFileSize());
  assertEquals(45,stats.getNewFileCount());
  assertEquals(20,stats.getTotalArtifactCount());
  assertEquals(5,stats.getTotalProjectCount());
  assertEquals(4,stats.getTotalGroupCount());
  assertEquals(56345,stats.getTotalFileCount());
  assertEquals(current.getTime() - 12345,stats.getScanStartTime().getTime());
  assertEquals(current,stats.getScanEndTime());
  metadataRepositoryControl.verify();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.metadata.repository.storage.maven2.ManagedDefaultRepositoryContentTest </h4><pre class="type-1 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws Exception {
  File repoDir=new File("src/test/repositories/default-repository");
  ManagedRepository repository=createRepository("testRepo","Unit Test Repo",repoDir);
  FileType fileType=archivaConfiguration.getConfiguration().getRepositoryScanning().getFileTypes().get(0);
  fileType.addPattern("**/*.xml");
  assertEquals(FileTypes.ARTIFACTS,fileType.getId());
  fileTypes.afterConfigurationChange(null,"fileType",null);
  repoContent.setRepository(repository);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.metadata.repository.storage.maven2.Maven2RepositoryMetadataResolverMRM1411RepoGroupTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataWithParentNotInAnyRemoteRepo() throws Exception {
  copyTestArtifactWithParent("target/test-classes/com/example/test/test-artifact-module-a","target/test-repository/com/example/test/test-artifact-module-a");
  ReadMetadataRequest readMetadataRequest=new ReadMetadataRequest().repositoryId(TEST_REPO_ID).namespace("com.example.test").projectId("missing-parent").projectVersion("1.1");
  ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(readMetadataRequest);
  assertEquals("1.1",metadata.getId());
  MavenProjectFacet facet=(MavenProjectFacet)metadata.getFacet(MavenProjectFacet.FACET_ID);
  assertNotNull(facet);
  assertEquals("com.example.test",facet.getGroupId());
  assertEquals("missing-parent",facet.getArtifactId());
  assertEquals("jar",facet.getPackaging());
  List<String> paths=new ArrayList<>();
  paths.add("target/test-repository/com/example/test/test-artifact-module-a");
  paths.add("target/test-repository/com/example/test/test-artifact-parent");
  paths.add("target/test-repository/com/example/test/test-artifact-root");
  deleteTestArtifactWithParent(paths);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataWithParentSnapshotVersionAndSnapNotAllowed() throws Exception {
  copyTestArtifactWithParent("target/test-classes/com/example/test/test-snapshot-artifact-module-a","target/test-repositorys/com/example/test/test-snapshot-artifact-module-a");
  ReadMetadataRequest readMetadataRequest=new ReadMetadataRequest().repositoryId(TEST_SNAP_REPO_ID).namespace("com.example.test").projectId("test-snapshot-artifact-module-a").projectVersion("1.1-SNAPSHOT");
  ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(readMetadataRequest);
  MavenProjectFacet facet=(MavenProjectFacet)metadata.getFacet(MavenProjectFacet.FACET_ID);
  assertEquals("jar",facet.getPackaging());
  assertEquals("com.example.test",facet.getParent().getGroupId());
  assertEquals("test-snapshot-artifact-root",facet.getParent().getArtifactId());
  assertEquals("1.1-SNAPSHOT",facet.getParent().getVersion());
  assertEquals("test-snapshot-artifact-module-a",facet.getArtifactId());
  assertEquals("com.example.test",facet.getGroupId());
  assertNull(metadata.getCiManagement());
  assertNotNull(metadata.getDescription());
  checkApacheLicense(metadata);
  assertEquals("1.1-SNAPSHOT",metadata.getId());
  assertEquals("Test Snapshot Artifact :: Module A",metadata.getName());
  String path="test-snapshot-artifact/trunk/test-snapshot-artifact-module-a";
  assertEquals(TEST_SCM_CONN_BASE + path,metadata.getScm().getConnection());
  assertEquals(TEST_SCM_DEV_CONN_BASE + path,metadata.getScm().getDeveloperConnection());
  assertEquals(TEST_SCM_URL_BASE + path,metadata.getScm().getUrl());
  List<Dependency> dependencies=metadata.getDependencies();
  assertEquals(2,dependencies.size());
  assertDependency(dependencies.get(0),"commons-io","commons-io","1.4");
  assertDependency(dependencies.get(1),"junit","junit","3.8.1","test");
  List<String> paths=new ArrayList<>();
  paths.add("target/test-repositorys/com/example/test/test-snapshot-artifact-module-a");
  paths.add("target/test-repositorys/com/example/test/test-snapshot-artifact-root");
  deleteTestArtifactWithParent(paths);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataWithParentSnapshotVersionAndSnapNotAllowed2() throws Exception {
  copyTestArtifactWithParent("target/test-classes/com/example/test/test-artifact-module-b","target/test-repository/com/example/test/test-artifact-module-b");
  ReadMetadataRequest readMetadataRequest=new ReadMetadataRequest().repositoryId(TEST_REPO_ID).namespace("com.example.test").projectId("test-artifact-module-b").projectVersion("1.0");
  ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(readMetadataRequest);
  MavenProjectFacet facet=(MavenProjectFacet)metadata.getFacet(MavenProjectFacet.FACET_ID);
  assertEquals("jar",facet.getPackaging());
  assertEquals("com.example.test",facet.getParent().getGroupId());
  assertEquals("test-snapshot-artifact-root",facet.getParent().getArtifactId());
  assertEquals("1.1-SNAPSHOT",facet.getParent().getVersion());
  assertEquals("test-artifact-module-b",facet.getArtifactId());
  assertEquals("com.example.test",facet.getGroupId());
  assertNull(metadata.getCiManagement());
  assertNotNull(metadata.getDescription());
  checkApacheLicense(metadata);
  assertEquals("1.0",metadata.getId());
  assertEquals("Test Artifact :: Module B",metadata.getName());
  String path="test-snapshot-artifact/trunk/test-artifact-module-b";
  assertEquals(TEST_SCM_CONN_BASE + path,metadata.getScm().getConnection());
  assertEquals(TEST_SCM_DEV_CONN_BASE + path,metadata.getScm().getDeveloperConnection());
  assertEquals(TEST_SCM_URL_BASE + path,metadata.getScm().getUrl());
  List<Dependency> dependencies=metadata.getDependencies();
  assertEquals(2,dependencies.size());
  assertDependency(dependencies.get(0),"commons-io","commons-io","1.4");
  assertDependency(dependencies.get(1),"junit","junit","3.8.1","test");
  List<String> paths=new ArrayList<>();
  paths.add("target/test-repository/com/example/test/test-artifact-module-b");
  paths.add("target/test-repository/com/example/test/test-snapshot-artifact-root");
  deleteTestArtifactWithParent(paths);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataWithParentNoRemoteReposConfigured() throws Exception {
  Configuration config=configuration.getConfiguration();
  RemoteRepositoryConfiguration remoteRepo=config.findRemoteRepositoryById(TEST_REMOTE_REPO_ID);
  config.removeRemoteRepository(remoteRepo);
  configuration.save(config);
  copyTestArtifactWithParent("target/test-classes/com/example/test/test-artifact-module-a","target/test-repository/com/example/test/test-artifact-module-a");
  ReadMetadataRequest readMetadataRequest=new ReadMetadataRequest().repositoryId(TEST_REPO_ID).namespace("com.example.test").projectId("test-artifact-module-a").projectVersion("1.0");
  ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(readMetadataRequest);
  assertEquals("1.0",metadata.getId());
  MavenProjectFacet facet=(MavenProjectFacet)metadata.getFacet(MavenProjectFacet.FACET_ID);
  assertNotNull(facet);
  assertEquals("com.example.test",facet.getGroupId());
  assertEquals("test-artifact-module-a",facet.getArtifactId());
  assertEquals("jar",facet.getPackaging());
  List<String> paths=new ArrayList<>();
  paths.add("target/test-repository/com/example/test/test-artifact-module-a");
  paths.add("target/test-repository/com/example/test/test-artifact-parent");
  paths.add("target/test-repository/com/example/test/test-artifact-root");
  deleteTestArtifactWithParent(paths);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataWithParentSnapshotVersion() throws Exception {
  copyTestArtifactWithParent("target/test-classes/com/example/test/test-snapshot-artifact-module-a","target/test-repositorys/com/example/test/test-snapshot-artifact-module-a");
  copyTestArtifactWithParent("target/test-classes/com/example/test/test-snapshot-artifact-root","target/test-repositorys/com/example/test/test-snapshot-artifact-root");
  ReadMetadataRequest readMetadataRequest=new ReadMetadataRequest(TEST_SNAP_REPO_ID,"com.example.test","test-snapshot-artifact-module-a","1.1-SNAPSHOT");
  ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(readMetadataRequest);
  MavenProjectFacet facet=(MavenProjectFacet)metadata.getFacet(MavenProjectFacet.FACET_ID);
  assertEquals("jar",facet.getPackaging());
  assertEquals("com.example.test",facet.getParent().getGroupId());
  assertEquals("test-snapshot-artifact-root",facet.getParent().getArtifactId());
  assertEquals("1.1-SNAPSHOT",facet.getParent().getVersion());
  assertEquals("test-snapshot-artifact-module-a",facet.getArtifactId());
  assertEquals("com.example.test",facet.getGroupId());
  assertNull(metadata.getCiManagement());
  assertNotNull(metadata.getDescription());
  checkApacheLicense(metadata);
  assertEquals("1.1-SNAPSHOT",metadata.getId());
  assertEquals("Test Snapshot Artifact :: Module A",metadata.getName());
  String path="test-snapshot-artifact/trunk/test-snapshot-artifact-module-a";
  assertEquals(TEST_SCM_CONN_BASE + path,metadata.getScm().getConnection());
  assertEquals(TEST_SCM_DEV_CONN_BASE + path,metadata.getScm().getDeveloperConnection());
  assertEquals(TEST_SCM_URL_BASE + path,metadata.getScm().getUrl());
  List<Dependency> dependencies=metadata.getDependencies();
  assertEquals(2,dependencies.size());
  assertDependency(dependencies.get(0),"commons-io","commons-io","1.4");
  assertDependency(dependencies.get(1),"junit","junit","3.8.1","test");
  List<String> paths=new ArrayList<>();
  paths.add("target/test-repositorys/com/example/test/test-snapshot-artifact-module-a");
  paths.add("target/test-repositorys/com/example/test/test-snapshot-artifact-root");
  deleteTestArtifactWithParent(paths);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before @Override public void setUp() throws Exception {
  super.setUp();
  c=new Configuration();
  testRepo=new ManagedRepositoryConfiguration();
  testRepo.setId(TEST_REPO_ID);
  testRepo.setLocation(new File("target/test-repository").getAbsolutePath());
  testRepo.setReleases(true);
  testRepo.setSnapshots(false);
  c.addManagedRepository(testRepo);
  testRepoS=new ManagedRepositoryConfiguration();
  testRepoS.setId(TEST_SNAP_REPO_ID);
  testRepoS.setLocation(new File("target/test-repositorys").getAbsolutePath());
  testRepoS.setReleases(false);
  testRepoS.setSnapshots(true);
  c.addManagedRepository(testRepoS);
  RemoteRepositoryConfiguration testRemoteRepo=new RemoteRepositoryConfiguration();
  testRemoteRepo.setId(TEST_REMOTE_REPO_ID);
  testRemoteRepo.setLayout("default");
  testRemoteRepo.setName("Central Repository");
  testRemoteRepo.setUrl("http://central.repo.com/maven2");
  testRemoteRepo.setTimeout(10);
  c.addRemoteRepository(testRemoteRepo);
  ProxyConnectorConfiguration proxyConnector=new ProxyConnectorConfiguration();
  proxyConnector.setSourceRepoId(TEST_REPO_ID);
  proxyConnector.setTargetRepoId(TEST_REMOTE_REPO_ID);
  proxyConnector.setDisabled(false);
  c.addProxyConnector(proxyConnector);
  ProxyConnectorConfiguration proxyConnectors=new ProxyConnectorConfiguration();
  proxyConnectors.setSourceRepoId(TEST_SNAP_REPO_ID);
  proxyConnectors.setTargetRepoId(TEST_REMOTE_REPO_ID);
  proxyConnectors.setDisabled(false);
  c.addProxyConnector(proxyConnectors);
  List<String> repos=new ArrayList<>();
  repos.add(TEST_REPO_ID);
  repos.add(TEST_SNAP_REPO_ID);
  RepositoryGroupConfiguration repoGroup=new RepositoryGroupConfiguration();
  repoGroup.setId(TEST_REPO_GROUP_ID);
  repoGroup.setRepositories(repos);
  c.addRepositoryGroup(repoGroup);
  configuration.save(c);
  assertFalse(c.getManagedRepositories().get(0).isSnapshots());
  assertTrue(c.getManagedRepositories().get(0).isReleases());
  assertTrue(c.getManagedRepositories().get(1).isSnapshots());
  assertFalse(c.getManagedRepositories().get(1).isReleases());
  wagonFactory=mock(WagonFactory.class);
  storage.setWagonFactory(wagonFactory);
  Wagon wagon=new MockWagon();
  when(wagonFactory.getWagon(new WagonFactoryRequest().protocol("wagon#http"))).thenReturn(wagon);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataWithParentSuccessful() throws Exception {
  copyTestArtifactWithParent("target/test-classes/com/example/test/test-artifact-module-a","target/test-repository/com/example/test/test-artifact-module-a");
  ReadMetadataRequest readMetadataRequest=new ReadMetadataRequest().repositoryId(TEST_REPO_ID).namespace("com.example.test").projectId("test-artifact-module-a").projectVersion("1.0");
  ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(readMetadataRequest);
  MavenProjectFacet facet=(MavenProjectFacet)metadata.getFacet(MavenProjectFacet.FACET_ID);
  assertEquals("jar",facet.getPackaging());
  assertEquals("http://maven.apache.org",metadata.getUrl());
  assertEquals("com.example.test",facet.getParent().getGroupId());
  assertEquals("test-artifact-root",facet.getParent().getArtifactId());
  assertEquals("1.0",facet.getParent().getVersion());
  assertEquals("test-artifact-module-a",facet.getArtifactId());
  assertEquals("com.example.test",facet.getGroupId());
  assertNull(metadata.getCiManagement());
  assertNotNull(metadata.getDescription());
  checkApacheLicense(metadata);
  assertEquals("1.0",metadata.getId());
  assertEquals("Test Artifact :: Module A",metadata.getName());
  String path="test-artifact/trunk/test-artifact-module-a";
  assertEquals(TEST_SCM_CONN_BASE + path,metadata.getScm().getConnection());
  assertEquals(TEST_SCM_DEV_CONN_BASE + path,metadata.getScm().getDeveloperConnection());
  assertEquals(TEST_SCM_URL_BASE + path,metadata.getScm().getUrl());
  List<Dependency> dependencies=metadata.getDependencies();
  assertEquals(2,dependencies.size());
  assertDependency(dependencies.get(0),"commons-io","commons-io","1.4");
  assertDependency(dependencies.get(1),"junit","junit","3.8.1","test");
  List<String> paths=new ArrayList<>();
  paths.add("target/test-repository/com/example/test/test-artifact-module-a");
  paths.add("target/test-repository/com/example/test/test-artifact-parent");
  paths.add("target/test-repository/com/example/test/test-artifact-root");
  deleteTestArtifactWithParent(paths);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.metadata.repository.storage.maven2.Maven2RepositoryMetadataResolverMRM1411Test </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataWithParentNotInAnyRemoteRepo() throws Exception {
  copyTestArtifactWithParent("target/test-classes/com/example/test/test-artifact-module-a","target/test-repository/com/example/test/test-artifact-module-a");
  ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"com.example.test","missing-parent","1.1"));
  assertEquals("1.1",metadata.getId());
  MavenProjectFacet facet=(MavenProjectFacet)metadata.getFacet(MavenProjectFacet.FACET_ID);
  assertNotNull(facet);
  assertEquals("com.example.test",facet.getGroupId());
  assertEquals("missing-parent",facet.getArtifactId());
  assertEquals("jar",facet.getPackaging());
  List<String> paths=new ArrayList<>();
  paths.add("target/test-repository/com/example/test/test-artifact-module-a");
  paths.add("target/test-repository/com/example/test/test-artifact-parent");
  paths.add("target/test-repository/com/example/test/test-artifact-root");
  deleteTestArtifactWithParent(paths);
}

</code></pre>

<br>
<pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataWithParentSnapshotVersionAndSnapNotAllowed() throws Exception {
  testRepo.setSnapshots(false);
  configuration.save(c);
  assertFalse(c.getManagedRepositories().get(0).isSnapshots());
  copyTestArtifactWithParent("target/test-classes/com/example/test/test-snapshot-artifact-module-a","target/test-repository/com/example/test/test-snapshot-artifact-module-a");
  try {
    ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"com.example.test","test-snapshot-artifact-module-a","1.1-SNAPSHOT"));
    fail("Should not be found");
  }
 catch (  RepositoryStorageRuntimeException e) {
  }
  List<String> paths=new ArrayList<>();
  paths.add("target/test-repository/com/example/test/test-snapshot-artifact-module-a");
  paths.add("target/test-repository/com/example/test/test-snapshot-artifact-root");
  deleteTestArtifactWithParent(paths);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataWithParentSnapshotVersion() throws Exception {
  copyTestArtifactWithParent("target/test-classes/com/example/test/test-snapshot-artifact-module-a","target/test-repository/com/example/test/test-snapshot-artifact-module-a");
  ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"com.example.test","test-snapshot-artifact-module-a","1.1-SNAPSHOT"));
  MavenProjectFacet facet=(MavenProjectFacet)metadata.getFacet(MavenProjectFacet.FACET_ID);
  assertEquals("jar",facet.getPackaging());
  assertEquals("com.example.test",facet.getParent().getGroupId());
  assertEquals("test-snapshot-artifact-root",facet.getParent().getArtifactId());
  assertEquals("1.1-SNAPSHOT",facet.getParent().getVersion());
  assertEquals("test-snapshot-artifact-module-a",facet.getArtifactId());
  assertEquals("com.example.test",facet.getGroupId());
  assertNull(metadata.getCiManagement());
  assertNotNull(metadata.getDescription());
  checkApacheLicense(metadata);
  assertEquals("1.1-SNAPSHOT",metadata.getId());
  assertEquals("Test Snapshot Artifact :: Module A",metadata.getName());
  String path="test-snapshot-artifact/trunk/test-snapshot-artifact-module-a";
  assertEquals(TEST_SCM_CONN_BASE + path,metadata.getScm().getConnection());
  assertEquals(TEST_SCM_DEV_CONN_BASE + path,metadata.getScm().getDeveloperConnection());
  assertEquals(TEST_SCM_URL_BASE + path,metadata.getScm().getUrl());
  List<Dependency> dependencies=metadata.getDependencies();
  assertEquals(2,dependencies.size());
  assertDependency(dependencies.get(0),"commons-io","commons-io","1.4");
  assertDependency(dependencies.get(1),"junit","junit","3.8.1","test");
  List<String> paths=new ArrayList<>();
  paths.add("target/test-repository/com/example/test/test-snapshot-artifact-module-a");
  paths.add("target/test-repository/com/example/test/test-snapshot-artifact-root");
  deleteTestArtifactWithParent(paths);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataWithParentSuccessful() throws Exception {
  copyTestArtifactWithParent("target/test-classes/com/example/test/test-artifact-module-a","target/test-repository/com/example/test/test-artifact-module-a");
  ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"com.example.test","test-artifact-module-a","1.0"));
  MavenProjectFacet facet=(MavenProjectFacet)metadata.getFacet(MavenProjectFacet.FACET_ID);
  assertEquals("jar",facet.getPackaging());
  assertEquals("http://maven.apache.org",metadata.getUrl());
  assertEquals("com.example.test",facet.getParent().getGroupId());
  assertEquals("test-artifact-root",facet.getParent().getArtifactId());
  assertEquals("1.0",facet.getParent().getVersion());
  assertEquals("test-artifact-module-a",facet.getArtifactId());
  assertEquals("com.example.test",facet.getGroupId());
  assertNull(metadata.getCiManagement());
  assertNotNull(metadata.getDescription());
  checkApacheLicense(metadata);
  assertEquals("1.0",metadata.getId());
  assertEquals("Test Artifact :: Module A",metadata.getName());
  String path="test-artifact/trunk/test-artifact-module-a";
  assertEquals(TEST_SCM_CONN_BASE + path,metadata.getScm().getConnection());
  assertEquals(TEST_SCM_DEV_CONN_BASE + path,metadata.getScm().getDeveloperConnection());
  assertEquals(TEST_SCM_URL_BASE + path,metadata.getScm().getUrl());
  List<Dependency> dependencies=metadata.getDependencies();
  assertEquals(2,dependencies.size());
  assertDependency(dependencies.get(0),"commons-io","commons-io","1.4");
  assertDependency(dependencies.get(1),"junit","junit","3.8.1","test");
  List<String> paths=new ArrayList<>();
  paths.add("target/test-repository/com/example/test/test-artifact-module-a");
  paths.add("target/test-repository/com/example/test/test-artifact-parent");
  paths.add("target/test-repository/com/example/test/test-artifact-root");
  deleteTestArtifactWithParent(paths);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataWithParentNoRemoteReposConfigured() throws Exception {
  Configuration config=configuration.getConfiguration();
  RemoteRepositoryConfiguration remoteRepo=config.findRemoteRepositoryById(TEST_REMOTE_REPO_ID);
  config.removeRemoteRepository(remoteRepo);
  configuration.save(config);
  copyTestArtifactWithParent("target/test-classes/com/example/test/test-artifact-module-a","target/test-repository/com/example/test/test-artifact-module-a");
  ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"com.example.test","test-artifact-module-a","1.0"));
  assertEquals("1.0",metadata.getId());
  MavenProjectFacet facet=(MavenProjectFacet)metadata.getFacet(MavenProjectFacet.FACET_ID);
  assertNotNull(facet);
  assertEquals("com.example.test",facet.getGroupId());
  assertEquals("test-artifact-module-a",facet.getArtifactId());
  assertEquals("jar",facet.getPackaging());
  List<String> paths=new ArrayList<>();
  paths.add("target/test-repository/com/example/test/test-artifact-module-a");
  paths.add("target/test-repository/com/example/test/test-artifact-parent");
  paths.add("target/test-repository/com/example/test/test-artifact-root");
  deleteTestArtifactWithParent(paths);
}

</code></pre>

<br>
<pre class="type-1 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before @Override public void setUp() throws Exception {
  super.setUp();
  c=new Configuration();
  testRepo=new ManagedRepositoryConfiguration();
  testRepo.setId(TEST_REPO_ID);
  testRepo.setLocation(new File("target/test-repository").getAbsolutePath());
  testRepo.setReleases(true);
  testRepo.setSnapshots(true);
  c.addManagedRepository(testRepo);
  RemoteRepositoryConfiguration testRemoteRepo=new RemoteRepositoryConfiguration();
  testRemoteRepo.setId(TEST_REMOTE_REPO_ID);
  testRemoteRepo.setLayout("default");
  testRemoteRepo.setName("Central Repository");
  testRemoteRepo.setUrl("http://central.repo.com/maven2");
  testRemoteRepo.setTimeout(10);
  c.addRemoteRepository(testRemoteRepo);
  ProxyConnectorConfiguration proxyConnector=new ProxyConnectorConfiguration();
  proxyConnector.setSourceRepoId(TEST_REPO_ID);
  proxyConnector.setTargetRepoId(TEST_REMOTE_REPO_ID);
  proxyConnector.setDisabled(false);
  c.addProxyConnector(proxyConnector);
  configuration.save(c);
  assertTrue(c.getManagedRepositories().get(0).isSnapshots());
  assertTrue(c.getManagedRepositories().get(0).isReleases());
  wagonFactory=mock(WagonFactory.class);
  storage.setWagonFactory(wagonFactory);
  Wagon wagon=new MockWagon();
  when(wagonFactory.getWagon(new WagonFactoryRequest("wagon#http",new HashMap<String,String>()))).thenReturn(wagon);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.metadata.repository.storage.maven2.Maven2RepositoryMetadataResolverManagedReleaseTest </h4><pre class="type-1 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before @Override public void setUp() throws Exception {
  super.setUp();
  testRepo.setReleases(true);
  testRepo.setSnapshots(false);
  configuration.save(c);
  assertFalse(c.getManagedRepositories().get(0).isSnapshots());
  assertTrue(c.getManagedRepositories().get(0).isReleases());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.metadata.repository.storage.maven2.Maven2RepositoryMetadataResolverManagedSnapshotTest </h4><pre class="type-1 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before @Override public void setUp() throws Exception {
  super.setUp();
  testRepo.setReleases(false);
  testRepo.setSnapshots(true);
  configuration.save(c);
  assertTrue(c.getManagedRepositories().get(0).isSnapshots());
  assertFalse(c.getManagedRepositories().get(0).isReleases());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.metadata.repository.storage.maven2.Maven2RepositoryMetadataResolverTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadata() throws Exception {
  ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"org.apache.archiva","archiva-common","1.2.1"));
  MavenProjectFacet facet=(MavenProjectFacet)metadata.getFacet(MavenProjectFacet.FACET_ID);
  assertEquals("jar",facet.getPackaging());
  assertEquals("http://archiva.apache.org/ref/1.2.1/archiva-base/archiva-common",metadata.getUrl());
  assertEquals("org.apache.archiva",facet.getParent().getGroupId());
  assertEquals("archiva-base",facet.getParent().getArtifactId());
  assertEquals("1.2.1",facet.getParent().getVersion());
  assertEquals("archiva-common",facet.getArtifactId());
  assertEquals("org.apache.archiva",facet.getGroupId());
  assertEquals("continuum",metadata.getCiManagement().getSystem());
  assertEquals("http://vmbuild.apache.org/continuum",metadata.getCiManagement().getUrl());
  assertNotNull(metadata.getDescription());
  assertEquals("1.2.1",metadata.getId());
  assertEquals("jira",metadata.getIssueManagement().getSystem());
  assertEquals("http://jira.codehaus.org/browse/MRM",metadata.getIssueManagement().getUrl());
  checkApacheLicense(metadata);
  assertEquals("Archiva Base :: Common",metadata.getName());
  String path="archiva/tags/archiva-1.2.1/archiva-modules/archiva-base/archiva-common";
  assertEquals(ASF_SCM_CONN_BASE + path,metadata.getScm().getConnection());
  assertEquals(ASF_SCM_DEV_CONN_BASE + path,metadata.getScm().getDeveloperConnection());
  assertEquals(ASF_SCM_VIEWVC_BASE + path,metadata.getScm().getUrl());
  checkOrganizationApache(metadata);
  assertEquals(4,metadata.getMailingLists().size());
  assertMailingList("users",metadata.getMailingLists().get(0),"Archiva User List",true,"http://www.nabble.com/archiva-users-f16426.html");
  assertMailingList("dev",metadata.getMailingLists().get(1),"Archiva Developer List",true,"http://www.nabble.com/archiva-dev-f16427.html");
  assertMailingList("commits",metadata.getMailingLists().get(2),"Archiva Commits List",false,null);
  assertMailingList("issues",metadata.getMailingLists().get(3),"Archiva Issues List",false,"http://www.nabble.com/Archiva---Issues-f29617.html");
  List<Dependency> dependencies=metadata.getDependencies();
  assertEquals(10,dependencies.size());
  assertDependency(dependencies.get(0),"commons-lang","commons-lang","2.2");
  assertDependency(dependencies.get(1),"commons-io","commons-io","1.4");
  assertDependency(dependencies.get(2),"org.slf4j","slf4j-api","1.5.0");
  assertDependency(dependencies.get(3),"org.codehaus.plexus","plexus-component-api","1.0-alpha-22");
  assertDependency(dependencies.get(4),"org.codehaus.plexus","plexus-spring","1.2","test");
  assertDependency(dependencies.get(5),"xalan","xalan","2.7.0");
  assertDependency(dependencies.get(6),"dom4j","dom4j","1.6.1","test");
  assertDependency(dependencies.get(7),"junit","junit","3.8.1","test");
  assertDependency(dependencies.get(8),"easymock","easymock","1.2_Java1.3","test");
  assertDependency(dependencies.get(9),"easymock","easymockclassextension","1.2","test");
  assertEquals(8,metadata.getProperties().size());
  assertEquals("http://www.apache.org/images/asf_logo_wide.gif",metadata.getProperties().get("organization.logo"));
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetArtifactMetadata() throws Exception {
  Collection<ArtifactMetadata> springArtifacts=storage.readArtifactsMetadata(new ReadMetadataRequest(TEST_REPO_ID,"org.codehaus.plexus","plexus-spring","1.2",ALL));
  List<ArtifactMetadata> artifacts=new ArrayList<>(springArtifacts);
  Collections.sort(artifacts,new Comparator<ArtifactMetadata>(){
    @Override public int compare(    ArtifactMetadata o1,    ArtifactMetadata o2){
      return o1.getId().compareTo(o2.getId());
    }
  }
);
  assertEquals(3,artifacts.size());
  ArtifactMetadata artifactMetadata=artifacts.get(0);
  assertEquals("plexus-spring-1.2-sources.jar",artifactMetadata.getId());
  MavenArtifactFacet facet=(MavenArtifactFacet)artifactMetadata.getFacet(MavenArtifactFacet.FACET_ID);
  assertEquals(0,facet.getBuildNumber());
  assertNull(facet.getTimestamp());
  assertEquals("sources",facet.getClassifier());
  assertEquals("java-source",facet.getType());
  artifactMetadata=artifacts.get(1);
  assertEquals("plexus-spring-1.2.jar",artifactMetadata.getId());
  facet=(MavenArtifactFacet)artifactMetadata.getFacet(MavenArtifactFacet.FACET_ID);
  assertEquals(0,facet.getBuildNumber());
  assertNull(facet.getTimestamp());
  assertNull(facet.getClassifier());
  assertEquals("jar",facet.getType());
  artifactMetadata=artifacts.get(2);
  assertEquals("plexus-spring-1.2.pom",artifactMetadata.getId());
  facet=(MavenArtifactFacet)artifactMetadata.getFacet(MavenArtifactFacet.FACET_ID);
  assertEquals(0,facet.getBuildNumber());
  assertNull(facet.getTimestamp());
  assertNull(facet.getClassifier());
  assertEquals("pom",facet.getType());
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataForTimestampedSnapshotMissingMetadata() throws Exception {
  try {
    storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"com.example.test","missing-metadata","1.0-SNAPSHOT"));
    fail("Should not be found");
  }
 catch (  RepositoryStorageMetadataNotFoundException e) {
    assertEquals("missing-pom",e.getId());
  }
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataForMissingPom() throws Exception {
  try {
    storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"com.example.test","missing-pom","1.0"));
    fail("Should not be found");
  }
 catch (  RepositoryStorageMetadataNotFoundException e) {
    assertEquals("missing-pom",e.getId());
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetArtifactMetadataSnapshots() throws Exception {
  Collection<ArtifactMetadata> testArtifacts=storage.readArtifactsMetadata(new ReadMetadataRequest(TEST_REPO_ID,"com.example.test","test-artifact","1.0-SNAPSHOT",ALL));
  List<ArtifactMetadata> artifacts=new ArrayList<>(testArtifacts);
  Collections.sort(artifacts,new Comparator<ArtifactMetadata>(){
    @Override public int compare(    ArtifactMetadata o1,    ArtifactMetadata o2){
      return o1.getId().compareTo(o2.getId());
    }
  }
);
  assertEquals(6,artifacts.size());
  ArtifactMetadata artifactMetadata=artifacts.get(0);
  assertEquals("test-artifact-1.0-20100308.230825-1.jar",artifactMetadata.getId());
  MavenArtifactFacet facet=(MavenArtifactFacet)artifactMetadata.getFacet(MavenArtifactFacet.FACET_ID);
  assertEquals(1,facet.getBuildNumber());
  assertEquals("20100308.230825",facet.getTimestamp());
  assertNull(facet.getClassifier());
  assertEquals("jar",facet.getType());
  artifactMetadata=artifacts.get(1);
  assertEquals("test-artifact-1.0-20100308.230825-1.pom",artifactMetadata.getId());
  facet=(MavenArtifactFacet)artifactMetadata.getFacet(MavenArtifactFacet.FACET_ID);
  assertEquals(1,facet.getBuildNumber());
  assertEquals("20100308.230825",facet.getTimestamp());
  assertNull(facet.getClassifier());
  assertEquals("pom",facet.getType());
  artifactMetadata=artifacts.get(2);
  assertEquals("test-artifact-1.0-20100310.014828-2-javadoc.jar",artifactMetadata.getId());
  facet=(MavenArtifactFacet)artifactMetadata.getFacet(MavenArtifactFacet.FACET_ID);
  assertEquals(2,facet.getBuildNumber());
  assertEquals("20100310.014828",facet.getTimestamp());
  assertEquals("javadoc",facet.getClassifier());
  assertEquals("javadoc",facet.getType());
  artifactMetadata=artifacts.get(3);
  assertEquals("test-artifact-1.0-20100310.014828-2-sources.jar",artifactMetadata.getId());
  facet=(MavenArtifactFacet)artifactMetadata.getFacet(MavenArtifactFacet.FACET_ID);
  assertEquals(2,facet.getBuildNumber());
  assertEquals("20100310.014828",facet.getTimestamp());
  assertEquals("sources",facet.getClassifier());
  assertEquals("java-source",facet.getType());
  artifactMetadata=artifacts.get(4);
  assertEquals("test-artifact-1.0-20100310.014828-2.jar",artifactMetadata.getId());
  facet=(MavenArtifactFacet)artifactMetadata.getFacet(MavenArtifactFacet.FACET_ID);
  assertEquals(2,facet.getBuildNumber());
  assertEquals("20100310.014828",facet.getTimestamp());
  assertNull(facet.getClassifier());
  assertEquals("jar",facet.getType());
  artifactMetadata=artifacts.get(5);
  assertEquals("test-artifact-1.0-20100310.014828-2.pom",artifactMetadata.getId());
  facet=(MavenArtifactFacet)artifactMetadata.getFacet(MavenArtifactFacet.FACET_ID);
  assertEquals(2,facet.getBuildNumber());
  assertEquals("20100310.014828",facet.getTimestamp());
  assertNull(facet.getClassifier());
  assertEquals("pom",facet.getType());
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataForTimestampedSnapshotIncompleteMetadata() throws Exception {
  try {
    storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"com.example.test","incomplete-metadata","1.0-SNAPSHOT"));
    fail("Should not be found");
  }
 catch (  RepositoryStorageMetadataNotFoundException e) {
    assertEquals("missing-pom",e.getId());
  }
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataForInvalidPom() throws Exception {
  try {
    storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"com.example.test","invalid-pom","1.0"));
    fail("Should have received an exception due to invalid POM");
  }
 catch (  RepositoryStorageMetadataInvalidException e) {
    assertEquals("invalid-pom",e.getId());
  }
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataForMislocatedPom() throws Exception {
  try {
    storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"com.example.test","mislocated-pom","1.0"));
    fail("Should have received an exception due to mislocated POM");
  }
 catch (  RepositoryStorageMetadataInvalidException e) {
    assertEquals("mislocated-pom",e.getId());
  }
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataForTimestampedSnapshotMalformedMetadata() throws Exception {
  try {
    storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"com.example.test","malformed-metadata","1.0-SNAPSHOT"));
    fail("Should not be found");
  }
 catch (  RepositoryStorageMetadataNotFoundException e) {
    assertEquals("missing-pom",e.getId());
  }
}

</code></pre>

<br>
<pre class="type-1 type-3 type-5 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before @Override public void setUp() throws Exception {
  super.setUp();
  c=new Configuration();
  testRepo=new ManagedRepositoryConfiguration();
  testRepo.setId(TEST_REPO_ID);
  testRepo.setLocation(new File("target/test-repository").getAbsolutePath());
  testRepo.setReleases(true);
  testRepo.setSnapshots(true);
  c.addManagedRepository(testRepo);
  RemoteRepositoryConfiguration testRemoteRepo=new RemoteRepositoryConfiguration();
  testRemoteRepo.setId(TEST_REMOTE_REPO_ID);
  testRemoteRepo.setLayout("default");
  testRemoteRepo.setName("Central Repository");
  testRemoteRepo.setUrl("http://central.repo.com/maven2");
  testRemoteRepo.setTimeout(10);
  c.addRemoteRepository(testRemoteRepo);
  ProxyConnectorConfiguration proxyConnector=new ProxyConnectorConfiguration();
  proxyConnector.setSourceRepoId(TEST_REPO_ID);
  proxyConnector.setTargetRepoId(TEST_REMOTE_REPO_ID);
  proxyConnector.setDisabled(false);
  c.addProxyConnector(proxyConnector);
  configuration.save(c);
  assertTrue(c.getManagedRepositories().get(0).isSnapshots());
  assertTrue(c.getManagedRepositories().get(0).isReleases());
  wagonFactory=mock(WagonFactory.class);
  storage.setWagonFactory(wagonFactory);
  Wagon wagon=new MockWagon();
  when(wagonFactory.getWagon(new WagonFactoryRequest().protocol("wagon#http"))).thenReturn(wagon);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProjectVersionMetadataForTimestampedSnapshot() throws Exception {
  ProjectVersionMetadata metadata=storage.readProjectVersionMetadata(new ReadMetadataRequest(TEST_REPO_ID,"org.apache","apache","5-SNAPSHOT"));
  MavenProjectFacet facet=MavenProjectFacet.class.cast(metadata.getFacet(MavenProjectFacet.FACET_ID));
  assertEquals("pom",facet.getPackaging());
  assertEquals("http://www.apache.org/",metadata.getUrl());
  assertNull(facet.getParent());
  assertEquals("org.apache",facet.getGroupId());
  assertEquals("apache",facet.getArtifactId());
  assertNull(metadata.getCiManagement());
  assertNotNull(metadata.getDescription());
  assertEquals("5-SNAPSHOT",metadata.getId());
  assertNull(metadata.getIssueManagement());
  checkApacheLicense(metadata);
  assertEquals("The Apache Software Foundation",metadata.getName());
  String path="maven/pom/trunk/asf";
  assertEquals(ASF_SCM_CONN_BASE + path,metadata.getScm().getConnection());
  assertEquals(ASF_SCM_DEV_CONN_BASE + path,metadata.getScm().getDeveloperConnection());
  assertEquals(ASF_SCM_VIEWVC_BASE + path,metadata.getScm().getUrl());
  checkOrganizationApache(metadata);
  assertEquals(1,metadata.getMailingLists().size());
  assertMailingList(metadata.getMailingLists().get(0),"Apache Announce List","http://mail-archives.apache.org/mod_mbox/www-announce/","announce@apache.org","announce-subscribe@apache.org","announce-unsubscribe@apache.org",Collections.<String>emptyList(),true);
  assertEquals(Collections.<Dependency>emptyList(),metadata.getDependencies());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.metadata.repository.storage.maven2.MavenRepositoryMetadataReaderTest </h4><pre class="type-9 type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGroupMetadata() throws XMLException {
  File metadataFile=new File(defaultRepoDir,"org/apache/maven/plugins/maven-metadata.xml");
  ArchivaRepositoryMetadata metadata=MavenMetadataReader.read(metadataFile);
  assertNotNull(metadata);
  assertEquals("org.apache.maven.plugins",metadata.getGroupId());
  assertNull(metadata.getArtifactId());
  assertNull(metadata.getReleasedVersion());
  assertNull(metadata.getLatestVersion());
  assertTrue(metadata.getAvailableVersions().isEmpty());
  assertNull(metadata.getSnapshotVersion());
  assertNull(metadata.getLastUpdated());
  Plugin cleanPlugin=new Plugin();
  cleanPlugin.setPrefix("clean");
  cleanPlugin.setArtifactId("maven-clean-plugin");
  cleanPlugin.setName("Maven Clean Plugin");
  Plugin compilerPlugin=new Plugin();
  compilerPlugin.setPrefix("compiler");
  compilerPlugin.setArtifactId("maven-compiler-plugin");
  compilerPlugin.setName("Maven Compiler Plugin");
  Plugin surefirePlugin=new Plugin();
  surefirePlugin.setPrefix("surefire");
  surefirePlugin.setArtifactId("maven-surefire-plugin");
  surefirePlugin.setName("Maven Surefire Plugin");
  assertEquals(Arrays.asList(cleanPlugin,compilerPlugin,surefirePlugin),metadata.getPlugins());
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProjectVersionMetadata() throws XMLException {
  File metadataFile=new File(defaultRepoDir,"org/apache/apache/5-SNAPSHOT/maven-metadata.xml");
  ArchivaRepositoryMetadata metadata=MavenMetadataReader.read(metadataFile);
  assertNotNull(metadata);
  assertEquals("org.apache",metadata.getGroupId());
  assertEquals("apache",metadata.getArtifactId());
  assertNull(metadata.getReleasedVersion());
  assertNull(metadata.getLatestVersion());
  assertTrue(metadata.getAvailableVersions().isEmpty());
  assertNotNull(metadata.getSnapshotVersion());
  assertEquals("20080801.151215",metadata.getSnapshotVersion().getTimestamp());
  assertEquals(1,metadata.getSnapshotVersion().getBuildNumber());
  assertEquals("20080801151215",metadata.getLastUpdated());
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProjectMetadata() throws XMLException {
  File metadataFile=new File(defaultRepoDir,"org/apache/maven/shared/maven-downloader/maven-metadata.xml");
  ArchivaRepositoryMetadata metadata=MavenMetadataReader.read(metadataFile);
  assertNotNull(metadata);
  assertEquals("org.apache.maven.shared",metadata.getGroupId());
  assertEquals("maven-downloader",metadata.getArtifactId());
  assertEquals("1.1",metadata.getReleasedVersion());
  assertNull(metadata.getLatestVersion());
  assertEquals(Arrays.asList("1.0","1.1"),metadata.getAvailableVersions());
  assertNull(metadata.getSnapshotVersion());
  assertEquals("20061212214311",metadata.getLastUpdated());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.proxy.ChecksumTransferTest </h4><pre class="type-9 type-3 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetChecksumWhenConnectorIsDisabled() throws Exception {
  String path="org/apache/maven/test/get-checksum-both-right/1.0/get-checksum-both-right-1.0.jar";
  setupTestableManagedRepository(path);
  File expectedFile=new File(managedDefaultDir,path);
  ArtifactReference artifact=managedDefaultRepository.toArtifactReference(path);
  FileUtils.deleteDirectory(expectedFile.getParentFile());
  assertFalse(expectedFile.exists());
  saveConnector(ID_DEFAULT_MANAGED,"proxied1",ChecksumPolicy.IGNORE,ReleasesPolicy.ALWAYS,SnapshotsPolicy.ALWAYS,CachedFailuresPolicy.NO,true);
  File downloadedFile=proxyHandler.fetchFromProxies(managedDefaultRepository,artifact);
  assertNull(downloadedFile);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.proxy.HttpProxyTransferTest </h4><pre class="type-1 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws Exception {
  proxyHandler=applicationContext.getBean("repositoryProxyConnectors#test",RepositoryProxyConnectors.class);
  config=applicationContext.getBean("archivaConfiguration#mock",ArchivaConfiguration.class);
  config.getConfiguration().getProxyConnectors().clear();
  String repoPath="target/test-repository/managed/" + getClass().getSimpleName();
  File destRepoDir=new File(repoPath);
  if (destRepoDir.exists()) {
    FileUtils.deleteDirectory(destRepoDir);
  }
  destRepoDir.mkdirs();
  ManagedRepository repo=new ManagedRepository();
  repo.setId(MANAGED_ID);
  repo.setName("Default Managed Repository");
  repo.setLocation(repoPath);
  repo.setLayout("default");
  ManagedRepositoryContent repoContent=applicationContext.getBean("managedRepositoryContent#default",ManagedRepositoryContent.class);
  repoContent.setRepository(repo);
  managedDefaultRepository=repoContent;
  ((DefaultManagedRepositoryAdmin)applicationContext.getBean(ManagedRepositoryAdmin.class)).setArchivaConfiguration(config);
  ManagedRepositoryAdmin managedRepositoryAdmin=applicationContext.getBean(ManagedRepositoryAdmin.class);
  if (managedRepositoryAdmin.getManagedRepository(repo.getId()) == null) {
    managedRepositoryAdmin.addManagedRepository(repo,false,null);
  }
  Handler handler=new AbstractHandler(){
    @Override public void handle(    String s,    Request request,    HttpServletRequest httpServletRequest,    HttpServletResponse response) throws IOException, ServletException {
      response.setContentType("text/plain");
      response.setStatus(HttpServletResponse.SC_OK);
      response.getWriter().print("get-default-layout-1.0.jar\n\n");
      assertNotNull(request.getHeader("Proxy-Connection"));
      ((Request)request).setHandled(true);
    }
    public void handle(    String target,    HttpServletRequest request,    HttpServletResponse response,    int dispatch) throws IOException, ServletException {
      response.setContentType("text/plain");
      response.setStatus(HttpServletResponse.SC_OK);
      response.getWriter().print("get-default-layout-1.0.jar\n\n");
      assertNotNull(request.getHeader("Proxy-Connection"));
      ((Request)request).setHandled(true);
    }
  }
;
  server=new Server(0);
  server.setHandler(handler);
  server.start();
  int port=server.getConnectors()[0].getLocalPort();
  NetworkProxyConfiguration proxyConfig=new NetworkProxyConfiguration();
  proxyConfig.setHost("localhost");
  proxyConfig.setPort(port);
  proxyConfig.setProtocol("http");
  proxyConfig.setId(PROXY_ID);
  config.getConfiguration().addNetworkProxy(proxyConfig);
  RemoteRepositoryConfiguration repoConfig=new RemoteRepositoryConfiguration();
  repoConfig.setId(PROXIED_ID);
  repoConfig.setName("Proxied Repository 1");
  repoConfig.setLayout("default");
  repoConfig.setUrl("http://www.example.com/");
  config.getConfiguration().addRemoteRepository(repoConfig);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-7 type-6 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetOverHttpProxy() throws Exception {
  Assertions.assertThat(System.getProperty("http.proxyHost")).isEmpty();
  Assertions.assertThat(System.getProperty("http.proxyPort")).isEmpty();
  String path="org/apache/maven/test/get-default-layout/1.0/get-default-layout-1.0.jar";
  addConnector();
  File expectedFile=new File(new File(managedDefaultRepository.getRepoRoot()),path);
  ArtifactReference artifact=managedDefaultRepository.toArtifactReference(path);
  File downloadedFile=proxyHandler.fetchFromProxies(managedDefaultRepository,artifact);
  File sourceFile=new File(PROXIED_BASEDIR,path);
  assertNotNull("Expected File should not be null.",expectedFile);
  assertNotNull("Actual File should not be null.",downloadedFile);
  assertTrue("Check actual file exists.",downloadedFile.exists());
  assertEquals("Check filename path is appropriate.",expectedFile.getCanonicalPath(),downloadedFile.getCanonicalPath());
  assertEquals("Check file path matches.",expectedFile.getAbsolutePath(),downloadedFile.getAbsolutePath());
  String expectedContents=FileUtils.readFileToString(sourceFile,Charset.defaultCharset());
  String actualContents=FileUtils.readFileToString(downloadedFile,Charset.defaultCharset());
  assertEquals("Check file contents.",expectedContents,actualContents);
  Assertions.assertThat(System.getProperty("http.proxyHost")).isEmpty();
  Assertions.assertThat(System.getProperty("http.proxyPort")).isEmpty();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.remotedownload.DownloadArtifactFromQueryTest </h4><pre class="type-8 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=RedirectionException.class) public void downloadFixedVersion() throws Exception {
  String id=createAndScanRepo();
  try {
    Response response=getSearchService().redirectToArtifactFile(null,"org.apache.archiva","archiva-test","1.0",null,null);
  }
 catch (  RedirectionException e) {
    Assertions.assertThat(e.getLocation().compareTo(new URI("http://localhost:" + port + "/repository/"+ id+ "/org/apache/archiva/archiva-test/1.0/archiva-test-1.0.jar"))).isEqualTo(0);
    throw e;
  }
 finally {
    getManagedRepositoriesService().deleteManagedRepository(id,false);
  }
}

</code></pre>

<br>
<pre class="type-8 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=RedirectionException.class) public void downloadLatestVersion() throws Exception {
  String id=createAndScanRepo();
  try {
    Response response=getSearchService().redirectToArtifactFile(null,"org.apache.archiva","archiva-test","LATEST",null,null);
  }
 catch (  RedirectionException e) {
    Assertions.assertThat(e.getLocation().compareTo(new URI("http://localhost:" + port + "/repository/"+ id+ "/org/apache/archiva/archiva-test/2.0/archiva-test-2.0.jar"))).isEqualTo(0);
    throw e;
  }
 finally {
    getManagedRepositoriesService().deleteManagedRepository(id,false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.reports.consumers.DuplicateArtifactsConsumerTest </h4><pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConsumerArtifactFileNotExist() throws Exception {
  consumer.beginScan(config,new Date());
  try {
    consumer.processFile("com/example/test/test-artifact/2.0/test-artifact-2.0.jar");
    fail("Should have failed to find file");
  }
 catch (  ConsumerException e) {
    assertTrue(e.getCause() instanceof NoSuchFileException);
  }
 finally {
    consumer.completeScan();
  }
  verify(metadataRepository,never()).addMetadataFacet(eq(TEST_REPO),Matchers.<MetadataFacet>anyObject());
}

</code></pre>

<br>
<pre class="type-1 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before @Override public void setUp() throws Exception {
  super.setUp();
  assertNotNull(consumer);
  config=new ManagedRepository();
  config.setId(TEST_REPO);
  config.setLocation(new File("target/test-repository").getAbsolutePath());
  metadataRepository=mock(MetadataRepository.class);
  RepositorySession session=mock(RepositorySession.class);
  when(session.getRepository()).thenReturn(metadataRepository);
  RepositorySessionFactory factory=applicationContext.getBean(RepositorySessionFactory.class);
  when(factory.createSession()).thenReturn(session);
  when(pathTranslator.getArtifactForPath(TEST_REPO,TEST_FILE)).thenReturn(TEST_METADATA);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.repository.content.maven2.FilenameParserTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNext(){
  FilenameParser parser=new FilenameParser("maven-test-plugin-1.8.3.jar");
  assertEquals("maven-test-plugin-1.8.3",parser.getName());
  assertEquals("jar",parser.getExtension());
  assertEquals("maven",parser.next());
  assertEquals("test",parser.next());
  assertEquals("plugin",parser.next());
  assertEquals("1.8.3",parser.next());
  assertNull(parser.next());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInterveningVersion(){
  FilenameParser parser=new FilenameParser("artifact-id-1.0-abc-1.1-20080221.062205-9.pom");
  assertEquals("artifact-id",parser.nextNonVersion());
  assertEquals("1.0-abc-1.1-20080221.062205-9",parser.expect("1.0-abc-1.1-SNAPSHOT"));
  assertNull(null,parser.remaining());
  assertEquals("artifact-id-1.0-abc-1.1-20080221.062205-9",parser.getName());
  assertEquals("pom",parser.getExtension());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExpectWrongSnapshot(){
  FilenameParser parser=new FilenameParser("artifact-id-1.0-20080221.062205-9.pom");
  assertEquals("artifact-id",parser.nextNonVersion());
  assertNull(parser.expect("2.0-SNAPSHOT"));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExpectWithRemaining(){
  FilenameParser parser=new FilenameParser("ganymede-ssh2-build250-sources.jar");
  assertEquals("ganymede-ssh2-build250-sources",parser.getName());
  assertEquals("jar",parser.getExtension());
  assertEquals("ganymede-ssh2",parser.expect("ganymede-ssh2"));
  assertEquals("build250",parser.expect("build250"));
  assertEquals('-',parser.seperator());
  assertEquals("sources",parser.remaining());
  assertNull(parser.expect("jar"));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExpectWrongSnapshot2(){
  FilenameParser parser=new FilenameParser("axiom-20080221.062205-9.pom");
  assertEquals("axiom",parser.nextNonVersion());
  assertNull(parser.expect("SNAPSHOT"));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExpect(){
  FilenameParser parser=new FilenameParser("maven-test-plugin-1.8.3.jar");
  assertEquals("maven-test-plugin-1.8.3",parser.getName());
  assertEquals("jar",parser.getExtension());
  assertEquals("maven-test-plugin",parser.expect("maven-test-plugin"));
  assertEquals("1.8.3",parser.expect("1.8.3"));
  assertNull(parser.expect("jar"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.repository.metadata.RepositoryMetadataReaderTest </h4><pre class="type-9 type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLoadSimple() throws XMLException {
  File defaultRepoDir=new File("src/test/repositories/default-repository");
  File metadataFile=new File(defaultRepoDir,"org/apache/maven/shared/maven-downloader/maven-metadata.xml");
  ArchivaRepositoryMetadata metadata=MavenMetadataReader.read(metadataFile);
  assertNotNull(metadata);
  assertEquals("Group Id","org.apache.maven.shared",metadata.getGroupId());
  assertEquals("Artifact Id","maven-downloader",metadata.getArtifactId());
  assertEquals("Released Version","1.1",metadata.getReleasedVersion());
  assertEquals("List of Available Versions",2,metadata.getAvailableVersions().size());
  assertTrue("Available version 1.0",metadata.getAvailableVersions().contains("1.0"));
  assertTrue("Available version 1.1",metadata.getAvailableVersions().contains("1.1"));
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLoadComplex() throws XMLException {
  File defaultRepoDir=new File("src/test/repositories/default-repository");
  File metadataFile=new File(defaultRepoDir,"org/apache/maven/samplejar/maven-metadata.xml");
  ArchivaRepositoryMetadata metadata=MavenMetadataReader.read(metadataFile);
  assertNotNull(metadata);
  assertEquals("Group Id","org.apache.maven",metadata.getGroupId());
  assertEquals("Artifact Id","samplejar",metadata.getArtifactId());
  assertEquals("Released Version","2.0",metadata.getReleasedVersion());
  assertEquals("Latest Version","6.0-SNAPSHOT",metadata.getLatestVersion());
  assertEquals("List of Available Versions",18,metadata.getAvailableVersions().size());
  assertTrue("Available version 6.0-20060311.183228-10",metadata.getAvailableVersions().contains("6.0-20060311.183228-10"));
  assertTrue("Available version 6.0-SNAPSHOT",metadata.getAvailableVersions().contains("6.0-SNAPSHOT"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.repository.scanner.RepositoryContentConsumersTest </h4><pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSelectedInvalidIds() throws Exception {
  RepositoryContentConsumers consumerutil=lookupRepositoryConsumers();
  String expectedInvalidIds[]=new String[]{"update-db-bad-content"};
  List<String> invalidConsumers=consumerutil.getSelectedInvalidConsumerIds();
  assertNotNull("Invalid Consumer IDs should not be null",invalidConsumers);
  assertEquals("Invalid Consumer IDs.size",expectedInvalidIds.length,invalidConsumers.size());
  for (  String expectedId : expectedInvalidIds) {
    assertTrue("Invalid id [" + expectedId + "] exists.",invalidConsumers.contains(expectedId));
  }
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAvailableInvalidList() throws Exception {
  RepositoryContentConsumers consumerutil=lookupRepositoryConsumers();
  String expectedInvalidIds[]=new String[]{"update-db-bad-content","move-to-trash-then-notify"};
  List<InvalidRepositoryContentConsumer> invalidConsumers=consumerutil.getAvailableInvalidConsumers();
  assertNotNull("invalid consumers should not be null.",invalidConsumers);
  assertEquals("invalid consumers",expectedInvalidIds.length,invalidConsumers.size());
  List<String> expectedIds=Arrays.asList(expectedInvalidIds);
  for (  InvalidRepositoryContentConsumer consumer : invalidConsumers) {
    assertTrue("Consumer [" + consumer.getId() + "] returned by .getAvailableInvalidConsumers() is unexpected.",expectedIds.contains(consumer.getId()));
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSelectedInvalidConsumerMap() throws Exception {
  RepositoryContentConsumers consumerutil=lookupRepositoryConsumers();
  String expectedSelectedInvalidIds[]=new String[]{"update-db-bad-content"};
  Map<String,InvalidRepositoryContentConsumer> invalidConsumerMap=consumerutil.getSelectedInvalidConsumersMap();
  assertNotNull("Invalid Consumer Map should not be null",invalidConsumerMap);
  assertEquals("Invalid Consumer Map.size",expectedSelectedInvalidIds.length,invalidConsumerMap.size());
  for (  String expectedId : expectedSelectedInvalidIds) {
    InvalidRepositoryContentConsumer consumer=invalidConsumerMap.get(expectedId);
    assertNotNull("Known[" + expectedId + "] should not be null.",consumer);
    assertEquals("Known[" + expectedId + "].id",expectedId,consumer.getId());
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSelectedKnownIds() throws Exception {
  RepositoryContentConsumers consumerutil=lookupRepositoryConsumers();
  String expectedKnownIds[]=new String[]{"create-missing-checksums","validate-checksum","validate-signature","index-content","auto-remove","auto-rename","create-archiva-metadata","duplicate-artifacts"};
  List<String> knownConsumers=consumerutil.getSelectedKnownConsumerIds();
  assertNotNull("Known Consumer IDs should not be null",knownConsumers);
  assertEquals("Known Consumer IDs.size " + knownConsumers,expectedKnownIds.length,knownConsumers.size());
  for (  String expectedId : expectedKnownIds) {
    assertTrue("Known id [" + expectedId + "] exists.",knownConsumers.contains(expectedId));
  }
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetAvailableKnownList() throws Exception {
  RepositoryContentConsumers consumerutil=lookupRepositoryConsumers();
  String expectedKnownIds[]=new String[]{"update-db-artifact","create-missing-checksums","update-db-repository-metadata","validate-checksum","index-content","auto-remove","auto-rename","available-but-unselected"};
  List<KnownRepositoryContentConsumer> knownConsumers=consumerutil.getAvailableKnownConsumers();
  assertNotNull("known consumers should not be null.",knownConsumers);
  assertEquals("known consumers",expectedKnownIds.length,knownConsumers.size());
  List<String> expectedIds=Arrays.asList(expectedKnownIds);
  for (  KnownRepositoryContentConsumer consumer : knownConsumers) {
    assertTrue("Consumer [" + consumer.getId() + "] returned by .getAvailableKnownConsumers() is unexpected.",expectedIds.contains(consumer.getId()));
  }
}

</code></pre>

<br>
<pre class="type-9 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetSelectedKnownConsumerMap() throws Exception {
  RepositoryContentConsumers consumerutil=lookupRepositoryConsumers();
  String expectedSelectedKnownIds[]=new String[]{"create-missing-checksums","validate-checksum","index-content","auto-remove","auto-rename"};
  Map<String,KnownRepositoryContentConsumer> knownConsumerMap=consumerutil.getSelectedKnownConsumersMap();
  assertNotNull("Known Consumer Map should not be null",knownConsumerMap);
  assertEquals("Known Consumer Map.size but " + knownConsumerMap,expectedSelectedKnownIds.length,knownConsumerMap.size());
  for (  String expectedId : expectedSelectedKnownIds) {
    KnownRepositoryContentConsumer consumer=knownConsumerMap.get(expectedId);
    assertNotNull("Known[" + expectedId + "] should not be null.",consumer);
    assertEquals("Known[" + expectedId + "].id",expectedId,consumer.getId());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.repository.scanner.RepositoryScannerTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimestampRepositoryScannerProcessUnmodified() throws Exception {
  ManagedRepository repository=createSimpleRepository();
  List<KnownRepositoryContentConsumer> knownConsumers=new ArrayList<>();
  KnownScanConsumer consumer=new KnownScanConsumer();
  consumer.setProcessUnmodified(true);
  consumer.setIncludes(ARTIFACT_PATTERNS);
  knownConsumers.add(consumer);
  List<InvalidRepositoryContentConsumer> invalidConsumers=new ArrayList<>();
  InvalidScanConsumer badconsumer=new InvalidScanConsumer();
  invalidConsumers.add(badconsumer);
  RepositoryScanner scanner=lookupRepositoryScanner();
  RepositoryScanStatistics stats=scanner.scan(repository,knownConsumers,invalidConsumers,getIgnoreList(),getTimestampAsMillis("20061101.000000"));
  assertNotNull("Stats should not be null.",stats);
  assertEquals("Stats.totalFileCount",4,stats.getTotalFileCount());
  assertEquals("Stats.newFileCount",3,stats.getNewFileCount());
  assertEquals("Processed Count",3,consumer.getProcessCount());
  assertEquals("Processed Count (of invalid items)",1,badconsumer.getProcessCount());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimestampRepositoryScanner() throws Exception {
  ManagedRepository repository=createSimpleRepository();
  List<KnownRepositoryContentConsumer> knownConsumers=new ArrayList<>();
  KnownScanConsumer consumer=new KnownScanConsumer();
  consumer.setIncludes(ARTIFACT_PATTERNS);
  knownConsumers.add(consumer);
  List<InvalidRepositoryContentConsumer> invalidConsumers=new ArrayList<>();
  InvalidScanConsumer badconsumer=new InvalidScanConsumer();
  invalidConsumers.add(badconsumer);
  RepositoryScanner scanner=lookupRepositoryScanner();
  RepositoryScanStatistics stats=scanner.scan(repository,knownConsumers,invalidConsumers,getIgnoreList(),getTimestampAsMillis("20061101.000000"));
  assertNotNull("Stats should not be null.",stats);
  assertEquals("Stats.totalFileCount",4,stats.getTotalFileCount());
  assertEquals("Stats.newFileCount",3,stats.getNewFileCount());
  assertEquals("Processed Count",2,consumer.getProcessCount());
  assertEquals("Processed Count (of invalid items)",1,badconsumer.getProcessCount());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultRepositoryScanner() throws Exception {
  ManagedRepository repository=createDefaultRepository();
  List<KnownRepositoryContentConsumer> knownConsumers=new ArrayList<>();
  KnownScanConsumer consumer=new KnownScanConsumer();
  consumer.setIncludes(new String[]{"**/*.jar","**/*.war","**/*.pom","**/maven-metadata.xml","**/*-site.xml","**/*.zip","**/*.tar.gz","**/*.sha1","**/*.md5"});
  knownConsumers.add(consumer);
  List<InvalidRepositoryContentConsumer> invalidConsumers=new ArrayList<>();
  InvalidScanConsumer badconsumer=new InvalidScanConsumer();
  invalidConsumers.add(badconsumer);
  RepositoryScanner scanner=lookupRepositoryScanner();
  RepositoryScanStatistics stats=scanner.scan(repository,knownConsumers,invalidConsumers,getIgnoreList(),RepositoryScanner.FRESH_SCAN);
  assertNotNull("Stats should not be null.",stats);
  assertMinimumHits("Stats.totalFileCount",17,stats.getTotalFileCount());
  assertMinimumHits("Processed Count",17,consumer.getProcessCount());
  assertEquals("Processed Count (of invalid items):" + badconsumer.getPaths(),6,badconsumer.getProcessCount());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimestampRepositoryScannerFreshScan() throws Exception {
  ManagedRepository repository=createSimpleRepository();
  List<KnownRepositoryContentConsumer> knownConsumers=new ArrayList<>();
  KnownScanConsumer consumer=new KnownScanConsumer();
  consumer.setIncludes(ARTIFACT_PATTERNS);
  knownConsumers.add(consumer);
  List<InvalidRepositoryContentConsumer> invalidConsumers=new ArrayList<>();
  InvalidScanConsumer badconsumer=new InvalidScanConsumer();
  invalidConsumers.add(badconsumer);
  RepositoryScanner scanner=lookupRepositoryScanner();
  RepositoryScanStatistics stats=scanner.scan(repository,knownConsumers,invalidConsumers,getIgnoreList(),RepositoryScanner.FRESH_SCAN);
  assertNotNull("Stats should not be null.",stats);
  assertEquals("Stats.totalFileCount",4,stats.getTotalFileCount());
  assertEquals("Stats.newFileCount",4,stats.getNewFileCount());
  assertEquals("Processed Count",3,consumer.getProcessCount());
  assertEquals("Processed Count (of invalid items)",1,badconsumer.getProcessCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.rest.services.ArchivaAdministrationServiceTest </h4><pre class="type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void uiConfigurationUpdate_ApplicationUrlHasTrailingSlash() throws Exception {
  UiConfiguration ui=getArchivaAdministrationService().getUiConfiguration();
  assertNotNull(ui);
  assertNull(ui.getApplicationUrl());
  String url="http://foo.fr/bar/";
  ui.setApplicationUrl(url);
  getArchivaAdministrationService().setUiConfiguration(ui);
  ui=getArchivaAdministrationService().getUiConfiguration();
  assertEquals("http://foo.fr/bar",ui.getApplicationUrl());
  url="http://foo.fr/bar//";
  ui.setApplicationUrl(url);
  getArchivaAdministrationService().setUiConfiguration(ui);
  ui=getArchivaAdministrationService().getUiConfiguration();
  assertEquals("http://foo.fr/bar",ui.getApplicationUrl());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void uiConfigurationReadUpdate() throws Exception {
  UiConfiguration ui=getArchivaAdministrationService().getUiConfiguration();
  assertNotNull(ui);
  assertFalse(ui.isDisableEasterEggs());
  assertFalse(ui.isDisableRegistration());
  assertTrue(ui.isAppletFindEnabled());
  assertTrue(ui.isShowFindArtifacts());
  assertNull(ui.getApplicationUrl());
  ui.setAppletFindEnabled(false);
  ui.setShowFindArtifacts(false);
  ui.setDisableEasterEggs(true);
  ui.setDisableRegistration(true);
  String url="http://foo.fr/bar";
  ui.setApplicationUrl(url);
  getArchivaAdministrationService().setUiConfiguration(ui);
  ui=getArchivaAdministrationService().getUiConfiguration();
  assertTrue(ui.isDisableEasterEggs());
  assertTrue(ui.isDisableRegistration());
  assertFalse(ui.isAppletFindEnabled());
  assertFalse(ui.isShowFindArtifacts());
  assertEquals(url,ui.getApplicationUrl());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void organisationInformationUpdate() throws Exception {
  OrganisationInformation organisationInformation=getArchivaAdministrationService().getOrganisationInformation();
  assertNotNull(organisationInformation);
  assertTrue(StringUtils.isBlank(organisationInformation.getLogoLocation()));
  assertTrue(StringUtils.isBlank(organisationInformation.getName()));
  assertTrue(StringUtils.isBlank(organisationInformation.getUrl()));
  organisationInformation=new OrganisationInformation();
  organisationInformation.setLogoLocation("http://foo.com/bar.png");
  organisationInformation.setName("foo org");
  organisationInformation.setUrl("http://foo.com");
  getArchivaAdministrationService().setOrganisationInformation(organisationInformation);
  organisationInformation=getArchivaAdministrationService().getOrganisationInformation();
  assertNotNull(organisationInformation);
  assertEquals("http://foo.com/bar.png",organisationInformation.getLogoLocation());
  assertEquals("foo org",organisationInformation.getName());
  assertEquals("http://foo.com",organisationInformation.getUrl());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndDeleteFileType() throws Exception {
  int initialSize=getArchivaAdministrationService().getFileTypes().size();
  FileType fileType=new FileType();
  fileType.setId("footwo");
  fileType.setPatterns(Arrays.asList("foo","bar"));
  getArchivaAdministrationService().addFileType(fileType);
  assertEquals(initialSize + 1,getArchivaAdministrationService().getFileTypes().size());
  assertNotNull(getArchivaAdministrationService().getFileType("footwo"));
  assertEquals(Arrays.asList("foo","bar"),getArchivaAdministrationService().getFileType("footwo").getPatterns());
  getArchivaAdministrationService().removeFileType("footwo");
  assertEquals(initialSize,getArchivaAdministrationService().getFileTypes().size());
  assertNull(getArchivaAdministrationService().getFileType("footwo"));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getAllLegacyPaths() throws Exception {
  assertNotNull(getArchivaAdministrationService().getLegacyArtifactPaths());
  assertFalse(getArchivaAdministrationService().getLegacyArtifactPaths().isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.rest.services.BrowseServiceTest </h4><pre class="type-16 type-1 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void initialiseTestRepo() throws RedbackServiceException, ArchivaRestServiceException, IOException, InterruptedException {
  if (getUserService(authorizationHeader).getGuestUser() == null) {
    assertNotNull(getUserService(authorizationHeader).createGuestUser());
  }
  createAndIndexRepo(TEST_REPO_ID,new File(getBasedir(),"src/test/repo-with-osgi").getAbsolutePath(),false);
  waitForScanToComplete(TEST_REPO_ID);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.rest.services.ManagedRepositoriesServiceTest </h4><pre class="type-16 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getManagedRepositoryStatistics() throws Exception {
  String testRepoId="test-repo";
  if (getUserService(authorizationHeader).getGuestUser() == null) {
    assertNotNull(getUserService(authorizationHeader).createGuestUser());
  }
  RepositoriesService repositoriesService=getRepositoriesService(authorizationHeader);
  createAndIndexRepo(testRepoId,new File(System.getProperty("basedir"),"src/test/repo-with-osgi").getAbsolutePath());
  repositoriesService.scanRepositoryDirectoriesNow(testRepoId);
  int timeout=20000;
  while (timeout > 0 && repositoriesService.alreadyScanning(testRepoId)) {
    Thread.sleep(500);
    timeout-=500;
  }
  ManagedRepositoriesService service=getManagedRepositoriesService(authorizationHeader);
  ArchivaRepositoryStatistics archivaRepositoryStatistics=service.getManagedRepositoryStatistics(testRepoId,"en");
  assertNotNull(archivaRepositoryStatistics);
  log.info("archivaRepositoryStatistics: {}",archivaRepositoryStatistics.toString());
  assertEquals(92,archivaRepositoryStatistics.getNewFileCount());
  assertEquals(92,archivaRepositoryStatistics.getTotalFileCount());
  deleteTestRepo(testRepoId);
}

</code></pre>

<br>
<pre class="type-16 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addManagedRepo() throws Exception {
  ManagedRepositoriesService service=getManagedRepositoriesService(authorizationHeader);
  ManagedRepository repo=getTestManagedRepository();
  if (service.getManagedRepository(repo.getId()) != null) {
    service.deleteManagedRepository(repo.getId(),true);
    assertNull(service.getManagedRepository(repo.getId()));
  }
  service.addManagedRepository(repo);
  repo=service.getManagedRepository(repo.getId());
  assertNotNull(repo);
  assertEquals(getTestManagedRepository().getDescription(),repo.getDescription());
  RepositoriesService repositoriesService=getRepositoriesService(authorizationHeader);
  int timeout=20000;
  while (timeout > 0 && repositoriesService.alreadyScanning(repo.getId())) {
    Thread.sleep(500);
    timeout-=500;
  }
  service.deleteManagedRepository(repo.getId(),true);
  assertNull(service.getManagedRepository(repo.getId()));
}

</code></pre>

<br>
<pre class="type-16 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void updateManagedRepo() throws Exception {
  ManagedRepositoriesService service=getManagedRepositoriesService(authorizationHeader);
  ManagedRepository repo=getTestManagedRepository();
  if (service.getManagedRepository(repo.getId()) != null) {
    service.deleteManagedRepository(repo.getId(),true);
    assertNull(service.getManagedRepository(repo.getId()));
  }
  service.addManagedRepository(repo);
  RepositoriesService repositoriesService=getRepositoriesService(authorizationHeader);
  int timeout=20000;
  while (timeout > 0 && repositoriesService.alreadyScanning(repo.getId())) {
    Thread.sleep(500);
    timeout-=500;
  }
  repo=service.getManagedRepository(repo.getId());
  assertNotNull(repo);
  assertEquals("test",repo.getName());
  repo.setName("toto");
  service.updateManagedRepository(repo);
  repo=service.getManagedRepository(repo.getId());
  assertNotNull(repo);
  assertEquals("toto",repo.getName());
  timeout=20000;
  while (timeout > 0 && repositoriesService.alreadyScanning(repo.getId())) {
    Thread.sleep(500);
    timeout-=500;
  }
  service.deleteManagedRepository(repo.getId(),true);
  assertNull(service.getManagedRepository(repo.getId()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.rest.services.NetworkProxyServiceTest </h4><pre class="type-3 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndDelete() throws Exception {
  assertNotNull(getNetworkProxyService().getNetworkProxies());
  assertTrue(getNetworkProxyService().getNetworkProxies().isEmpty());
  getNetworkProxyService().addNetworkProxy(getNetworkProxy("foo"));
  assertNotNull(getNetworkProxyService().getNetworkProxies());
  assertFalse(getNetworkProxyService().getNetworkProxies().isEmpty());
  assertEquals(1,getNetworkProxyService().getNetworkProxies().size());
  getNetworkProxyService().deleteNetworkProxy("foo");
  assertNotNull(getNetworkProxyService().getNetworkProxies());
  assertTrue(getNetworkProxyService().getNetworkProxies().isEmpty());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndUpdateAndDelete() throws Exception {
  assertNotNull(getNetworkProxyService().getNetworkProxies());
  assertTrue(getNetworkProxyService().getNetworkProxies().isEmpty());
  getNetworkProxyService().addNetworkProxy(getNetworkProxy("foo"));
  assertNotNull(getNetworkProxyService().getNetworkProxies());
  assertFalse(getNetworkProxyService().getNetworkProxies().isEmpty());
  assertEquals(1,getNetworkProxyService().getNetworkProxies().size());
  NetworkProxy networkProxy=getNetworkProxy("foo");
  networkProxy.setHost("http://toto.com");
  networkProxy.setPassword("newpasswd");
  networkProxy.setUsername("newusername");
  networkProxy.setPort(9191);
  getNetworkProxyService().updateNetworkProxy(networkProxy);
  assertEquals(networkProxy.getHost(),getNetworkProxyService().getNetworkProxy("foo").getHost());
  assertEquals(networkProxy.getPassword(),getNetworkProxyService().getNetworkProxy("foo").getPassword());
  assertEquals(networkProxy.getUsername(),getNetworkProxyService().getNetworkProxy("foo").getUsername());
  assertEquals(networkProxy.getPort(),getNetworkProxyService().getNetworkProxy("foo").getPort());
  getNetworkProxyService().deleteNetworkProxy("foo");
  assertNotNull(getNetworkProxyService().getNetworkProxies());
  assertTrue(getNetworkProxyService().getNetworkProxies().isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.rest.services.PingServiceTest </h4><pre class="type-10 type-6 type-8 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ForbiddenException.class) public void pingWithAuthzFailed() throws Exception {
  try {
    String res=getPingService().pingWithAuthz();
    fail("not in exception");
  }
 catch (  ForbiddenException e) {
    assertEquals(403,e.getResponse().getStatus());
    throw e;
  }
}

</code></pre>

<br>
<pre class="type-5 type-6 type-4 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("FIXME guest failed ???") public void pingWithAuthzGuest() throws Exception {
  PingService service=getPingService();
  WebClient.getConfig(service).getHttpConduit().getClient().setReceiveTimeout(300000);
  WebClient.client(service).header("Authorization",guestAuthzHeader);
  String res=service.pingWithAuthz();
  assertEquals("Yeah Baby It rocks!",res);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.rest.services.RemoteRepositoriesServiceTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndDeleteRemoteRepository() throws Exception {
  RemoteRepositoriesService service=getRemoteRepositoriesService();
  WebClient.client(service).header("Authorization",authorizationHeader);
  int initialSize=service.getRemoteRepositories().size();
  service.addRemoteRepository(getRemoteRepository());
  assertNotNull(service.getRemoteRepository("id-new"));
  assertEquals(getRemoteRepository().getName(),service.getRemoteRepository("id-new").getName());
  assertEquals(getRemoteRepository().getUrl(),service.getRemoteRepository("id-new").getUrl());
  assertEquals(getRemoteRepository().getLayout(),service.getRemoteRepository("id-new").getLayout());
  assertEquals(getRemoteRepository().getUserName(),service.getRemoteRepository("id-new").getUserName());
  assertEquals(getRemoteRepository().getPassword(),service.getRemoteRepository("id-new").getPassword());
  assertEquals(getRemoteRepository().getTimeout(),service.getRemoteRepository("id-new").getTimeout());
  assertEquals(getRemoteRepository().getDescription(),service.getRemoteRepository("id-new").getDescription());
  assertEquals(initialSize + 1,service.getRemoteRepositories().size());
  service.deleteRemoteRepository("id-new");
  assertNull(service.getRemoteRepository("id-new"));
  assertEquals(initialSize,service.getRemoteRepositories().size());
}

</code></pre>

<br>
<pre class="type-3 type-6 type-8 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ForbiddenException.class) public void listRemoteRepositoriesKarmaFailed() throws Exception {
  RemoteRepositoriesService service=getRemoteRepositoriesService();
  try {
    assertFalse(service.getRemoteRepositories().isEmpty());
  }
 catch (  ForbiddenException e) {
    assertEquals(403,e.getResponse().getStatus());
    throw e;
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndUpdateAndDeleteRemoteRepository() throws Exception {
  RemoteRepositoriesService service=getRemoteRepositoriesService();
  WebClient.client(service).header("Authorization",authorizationHeader);
  int initialSize=service.getRemoteRepositories().size();
  service.addRemoteRepository(getRemoteRepository());
  assertNotNull(service.getRemoteRepository("id-new"));
  assertEquals(getRemoteRepository().getName(),service.getRemoteRepository("id-new").getName());
  assertEquals(getRemoteRepository().getUrl(),service.getRemoteRepository("id-new").getUrl());
  assertEquals(getRemoteRepository().getLayout(),service.getRemoteRepository("id-new").getLayout());
  assertEquals(getRemoteRepository().getUserName(),service.getRemoteRepository("id-new").getUserName());
  assertEquals(getRemoteRepository().getPassword(),service.getRemoteRepository("id-new").getPassword());
  assertEquals(getRemoteRepository().getTimeout(),service.getRemoteRepository("id-new").getTimeout());
  assertEquals(initialSize + 1,service.getRemoteRepositories().size());
  RemoteRepository repo=getRemoteRepository();
  repo.setName("name changed");
  repo.setPassword("new password");
  repo.setUserName("new username");
  repo.setUrl("http://foo.new.org");
  repo.setDescription("foo bar");
  service.updateRemoteRepository(repo);
  assertEquals(repo.getName(),service.getRemoteRepository("id-new").getName());
  assertEquals(repo.getUrl(),service.getRemoteRepository("id-new").getUrl());
  assertEquals(repo.getLayout(),service.getRemoteRepository("id-new").getLayout());
  assertEquals(repo.getUserName(),service.getRemoteRepository("id-new").getUserName());
  assertEquals(repo.getPassword(),service.getRemoteRepository("id-new").getPassword());
  assertEquals(repo.getTimeout(),service.getRemoteRepository("id-new").getTimeout());
  assertEquals(repo.getDescription(),service.getRemoteRepository("id-new").getDescription());
  service.deleteRemoteRepository("id-new");
  assertNull(service.getRemoteRepository("id-new"));
  assertEquals(initialSize,service.getRemoteRepositories().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.rest.services.RepositoriesServiceTest </h4><pre class="type-6 type-8 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ForbiddenException.class) public void deleteArtifactKarmaFailed() throws Exception {
  try {
    Artifact artifact=new Artifact();
    artifact.setGroupId("commons-logging");
    artifact.setArtifactId("commons-logging");
    artifact.setVersion("1.0.1");
    artifact.setPackaging("jar");
    artifact.setContext(SOURCE_REPO_ID);
    RepositoriesService repositoriesService=getRepositoriesService(null);
    repositoriesService.deleteArtifact(artifact);
  }
 catch (  ForbiddenException e) {
    assertEquals(403,e.getResponse().getStatus());
    throw e;
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=ForbiddenException.class) public void scanRepoKarmaFailed() throws Exception {
  RepositoriesService service=getRepositoriesService();
  try {
    service.scanRepository("id",true);
  }
 catch (  ForbiddenException e) {
    assertEquals(403,e.getResponse().getStatus());
    throw e;
  }
}

</code></pre>

<br>
<pre class="type-6 type-8 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=BadRequestException.class) public void deleteWithRepoNull() throws Exception {
  try {
    RepositoriesService repositoriesService=getRepositoriesService(authorizationHeader);
    Artifact artifact=new Artifact();
    artifact.setGroupId("commons-logging");
    artifact.setArtifactId("commons-logging");
    artifact.setVersion("1.0.1");
    artifact.setPackaging("jar");
    repositoriesService.deleteArtifact(artifact);
  }
 catch (  BadRequestException e) {
    assertEquals("not http " + Response.Status.BAD_REQUEST.getStatusCode() + " status",Response.Status.BAD_REQUEST.getStatusCode(),e.getResponse().getStatus());
    throw e;
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteArtifact() throws Exception {
  initSourceTargetRepo();
  BrowseService browseService=getBrowseService(authorizationHeader,false);
  List<Artifact> artifacts=browseService.getArtifactDownloadInfos("org.apache.karaf.features","org.apache.karaf.features.core","2.2.2",SOURCE_REPO_ID);
  log.info("artifacts: {}",artifacts);
  assertThat(artifacts).isNotNull().isNotEmpty().hasSize(2);
  VersionsList versionsList=browseService.getVersionsList("org.apache.karaf.features","org.apache.karaf.features.core",SOURCE_REPO_ID);
  assertThat(versionsList.getVersions()).isNotNull().isNotEmpty().hasSize(2);
  log.info("artifacts.size: {}",artifacts.size());
  try {
    File artifactFile=new File("target/test-origin-repo/org/apache/karaf/features/org.apache.karaf.features.core/2.2.2/org.apache.karaf.features.core-2.2.2.jar");
    assertTrue("artifact not exists:" + artifactFile.getPath(),artifactFile.exists());
    Artifact artifact=new Artifact();
    artifact.setGroupId("org.apache.karaf.features");
    artifact.setArtifactId("org.apache.karaf.features.core");
    artifact.setVersion("2.2.2");
    artifact.setPackaging("jar");
    artifact.setContext(SOURCE_REPO_ID);
    RepositoriesService repositoriesService=getRepositoriesService(authorizationHeader);
    repositoriesService.deleteArtifact(artifact);
    assertFalse("artifact not deleted exists:" + artifactFile.getPath(),artifactFile.exists());
    artifacts=browseService.getArtifactDownloadInfos("org.apache.karaf.features","org.apache.karaf.features.core","2.2.2",SOURCE_REPO_ID);
    assertThat(artifacts).isNotNull().isEmpty();
    versionsList=browseService.getVersionsList("org.apache.karaf.features","org.apache.karaf.features.core",SOURCE_REPO_ID);
    assertThat(versionsList.getVersions()).isNotNull().isNotEmpty().hasSize(1);
  }
  finally {
    cleanRepos();
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteArtifactWithClassifier() throws Exception {
  initSourceTargetRepo();
  BrowseService browseService=getBrowseService(authorizationHeader,false);
  List<Artifact> artifacts=browseService.getArtifactDownloadInfos("commons-logging","commons-logging","1.0.1",SOURCE_REPO_ID);
  assertThat(artifacts).isNotNull().isNotEmpty().hasSize(3);
  VersionsList versionsList=browseService.getVersionsList("commons-logging","commons-logging",SOURCE_REPO_ID);
  assertThat(versionsList.getVersions()).isNotNull().isNotEmpty().hasSize(6);
  log.info("artifacts.size: {}",artifacts.size());
  try {
    File artifactFile=new File("target/test-origin-repo/commons-logging/commons-logging/1.0.1/commons-logging-1.0.1-javadoc.jar");
    File artifactFilemd5=new File("target/test-origin-repo/commons-logging/commons-logging/1.0.1/commons-logging-1.0.1-javadoc.jar.md5");
    File artifactFilesha1=new File("target/test-origin-repo/commons-logging/commons-logging/1.0.1/commons-logging-1.0.1-javadoc.jar.sha1");
    assertTrue("artifact not exists:" + artifactFile.getPath(),artifactFile.exists());
    assertTrue("md5 not exists:" + artifactFilemd5.getPath(),artifactFilemd5.exists());
    assertTrue("sha1 not exists:" + artifactFilesha1.getPath(),artifactFilesha1.exists());
    Artifact artifact=new Artifact();
    artifact.setGroupId("commons-logging");
    artifact.setArtifactId("commons-logging");
    artifact.setVersion("1.0.1");
    artifact.setClassifier("javadoc");
    artifact.setPackaging("jar");
    artifact.setContext(SOURCE_REPO_ID);
    RepositoriesService repositoriesService=getRepositoriesService(authorizationHeader);
    repositoriesService.deleteArtifact(artifact);
    assertFalse("artifact not deleted exists:" + artifactFile.getPath(),artifactFile.exists());
    assertFalse("md5 still exists:" + artifactFilemd5.getPath(),artifactFilemd5.exists());
    assertFalse("sha1 still exists:" + artifactFilesha1.getPath(),artifactFilesha1.exists());
    artifacts=browseService.getArtifactDownloadInfos("commons-logging","commons-logging","1.0.1",SOURCE_REPO_ID);
    log.info("artifact: {}",artifacts);
    assertThat(artifacts).isNotNull().isNotEmpty().hasSize(2);
    versionsList=browseService.getVersionsList("commons-logging","commons-logging",SOURCE_REPO_ID);
    log.info("versionsList: {}",versionsList);
    assertThat(versionsList.getVersions()).isNotNull().isNotEmpty().hasSize(6);
  }
  finally {
    cleanRepos();
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * delete a version of an artifact without packaging
 * @throws Exception
 */
@Test public void deleteArtifactVersion() throws Exception {
  initSourceTargetRepo();
  BrowseService browseService=getBrowseService(authorizationHeader,false);
  List<Artifact> artifacts=browseService.getArtifactDownloadInfos("org.apache.karaf.features","org.apache.karaf.features.core","2.2.2",SOURCE_REPO_ID);
  log.info("artifacts: {}",artifacts);
  assertThat(artifacts).isNotNull().isNotEmpty().hasSize(2);
  VersionsList versionsList=browseService.getVersionsList("org.apache.karaf.features","org.apache.karaf.features.core",SOURCE_REPO_ID);
  assertThat(versionsList.getVersions()).isNotNull().isNotEmpty().hasSize(2);
  log.info("artifacts.size: {}",artifacts.size());
  try {
    File artifactFile=new File("target/test-origin-repo/org/apache/karaf/features/org.apache.karaf.features.core/2.2.2/org.apache.karaf.features.core-2.2.2.jar");
    assertTrue("artifact not exists:" + artifactFile.getPath(),artifactFile.exists());
    Artifact artifact=new Artifact();
    artifact.setGroupId("org.apache.karaf.features");
    artifact.setArtifactId("org.apache.karaf.features.core");
    artifact.setVersion("2.2.2");
    artifact.setContext(SOURCE_REPO_ID);
    RepositoriesService repositoriesService=getRepositoriesService(authorizationHeader);
    repositoriesService.deleteArtifact(artifact);
    assertFalse("artifact not deleted exists:" + artifactFile.getPath(),artifactFile.exists());
    artifacts=browseService.getArtifactDownloadInfos("org.apache.karaf.features","org.apache.karaf.features.core","2.2.2",SOURCE_REPO_ID);
    assertThat(artifacts).isNotNull().isEmpty();
    versionsList=browseService.getVersionsList("org.apache.karaf.features","org.apache.karaf.features.core",SOURCE_REPO_ID);
    assertThat(versionsList.getVersions()).isNotNull().isNotEmpty().hasSize(1);
  }
  finally {
    cleanRepos();
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void deleteGroupId() throws Exception {
  initSourceTargetRepo();
  try {
    BrowseService browseService=getBrowseService(authorizationHeader,false);
    BrowseResult browseResult=browseService.browseGroupId("org.apache.karaf.features",SOURCE_REPO_ID);
    assertNotNull(browseResult);
    log.info("browseResult: {}",browseResult);
    assertThat(browseResult.getBrowseResultEntries()).isNotNull().isNotEmpty().contains(new BrowseResultEntry("org.apache.karaf.features.org.apache.karaf.features.command",true),new BrowseResultEntry("org.apache.karaf.features.org.apache.karaf.features.core",true));
    File directory=new File("target/test-origin-repo/org/apache/karaf/features/org.apache.karaf.features.command");
    assertTrue("directory not exists",directory.exists());
    RepositoriesService repositoriesService=getRepositoriesService(authorizationHeader);
    repositoriesService.deleteGroupId("org.apache.karaf",SOURCE_REPO_ID);
    assertFalse("directory not exists",directory.exists());
    browseResult=browseService.browseGroupId("org.apache.karaf.features",SOURCE_REPO_ID);
    assertNotNull(browseResult);
    assertThat(browseResult.getBrowseResultEntries()).isNotNull().isEmpty();
    browseResult=browseService.browseGroupId("org.apache.karaf",SOURCE_REPO_ID);
    assertNotNull(browseResult);
    assertThat(browseResult.getBrowseResultEntries()).isNotNull().isEmpty();
    log.info("browseResult empty: {}",browseResult);
  }
  finally {
    cleanRepos();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.rest.services.RepositoryGroupServiceTest </h4><pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void addAndDelete() throws Exception {
  RepositoryGroupService service=getRepositoryGroupService();
  WebClient.client(service).header("Authorization",authorizationHeader);
  WebClient.getConfig(service).getHttpConduit().getClient().setReceiveTimeout(300000);
  assertTrue(service.getRepositoriesGroups().isEmpty());
  ManagedRepositoriesService managedRepositoriesService=getManagedRepositoriesService(authorizationHeader);
  WebClient.getConfig(service).getHttpConduit().getClient().setReceiveTimeout(300000);
  ManagedRepository managedRepository=getTestManagedRepository();
  managedRepositoriesService.addManagedRepository(managedRepository);
  RepositoryGroup repositoryGroup=new RepositoryGroup("one",Arrays.asList(managedRepository.getId())).mergedIndexTtl(40);
  service.addRepositoryGroup(repositoryGroup);
  assertFalse(service.getRepositoriesGroups().isEmpty());
  assertEquals(1,service.getRepositoriesGroups().size());
  assertEquals(40,service.getRepositoriesGroups().get(0).getMergedIndexTtl());
  service.deleteRepositoryGroup("one");
  assertTrue(service.getRepositoriesGroups().isEmpty());
  assertEquals(0,service.getRepositoriesGroups().size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.rest.services.SearchServiceTest </h4><pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void searchWithSearchRequestExportPackageOneVersion() throws Exception {
  SearchService searchService=getSearchService(authorizationHeader);
  SearchRequest searchRequest=new SearchRequest();
  searchRequest.setBundleExportPackage("org.apache.karaf.features.command.completers");
  searchRequest.setRepositories(Arrays.asList(TEST_REPO));
  List<Artifact> artifacts=searchService.searchArtifacts(searchRequest);
  assertNotNull(artifacts);
  assertTrue(" not 1 results for Bundle ExportPackage org.apache.karaf.features.command.completers but " + artifacts.size() + ":"+ artifacts,artifacts.size() == 1);
  log.info("artifact url {}",artifacts.get(0).getUrl());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void searchWithSearchNoRepos() throws Exception {
  SearchService searchService=getSearchService(authorizationHeader);
  SearchRequest searchRequest=new SearchRequest();
  searchRequest.setBundleExportPackage("org.apache.karaf.features.command.completers");
  List<Artifact> artifacts=searchService.searchArtifacts(searchRequest);
  assertNotNull(artifacts);
  assertTrue(" not 0 results for Bundle ExportPackage org.apache.karaf.features.command.completers but " + artifacts.size() + ":"+ artifacts,artifacts.size() == 1);
  log.info("artifact url {}",artifacts.get(0).getUrl());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void searchWithSearchRequestBundleSymbolicNameOneVersion() throws Exception {
  SearchService searchService=getSearchService(authorizationHeader);
  SearchRequest searchRequest=new SearchRequest();
  searchRequest.setBundleSymbolicName("org.apache.karaf.features.command");
  List<Artifact> artifacts=searchService.searchArtifacts(searchRequest);
  assertNotNull(artifacts);
  assertTrue(" not 1 results for Bundle Symbolic Name org.apache.karaf.features.command but " + artifacts.size() + ":"+ artifacts,artifacts.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void searchWithSearchRequestGroupIdAndArtifactIdAndClassifier() throws Exception {
  SearchService searchService=getSearchService(authorizationHeader);
  SearchRequest searchRequest=new SearchRequest();
  searchRequest.setGroupId("commons-logging");
  searchRequest.setArtifactId("commons-logging");
  searchRequest.setClassifier("sources");
  List<Artifact> artifacts=searchService.searchArtifacts(searchRequest);
  assertNotNull(artifacts);
  assertTrue(" not 2 results for commons-logging search but " + artifacts.size() + ":"+ artifacts,artifacts.size() == 2);
  log.info("artifacts for commons-logging size {} search {}",artifacts.size(),artifacts);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void quickSearchOnArtifactId() throws Exception {
  SearchService searchService=getSearchService(authorizationHeader);
  List<Artifact> artifacts=searchService.quickSearch("commons-logging");
  assertNotNull(artifacts);
  assertTrue(" not 6 results for commons-logging search but " + artifacts.size() + ":"+ artifacts,artifacts.size() == 6);
  log.info("artifacts for commons-logging size {} search {}",artifacts.size(),artifacts);
}

</code></pre>

<br>
<pre class="type-16 type-1 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void createRepo() throws Exception {
  if (getUserService(authorizationHeader).getGuestUser() == null) {
    assertNotNull(getUserService(authorizationHeader).createGuestUser());
  }
  createAndIndexRepo(TEST_REPO,"src/test/repo-with-osgi");
  waitForScanToComplete(TEST_REPO);
}

</code></pre>

<br>
<pre class="type-9 type-16 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getSearchArtifactsWithOnlyClassifier() throws Exception {
  if (getUserService(authorizationHeader).getGuestUser() == null) {
    assertNotNull(getUserService(authorizationHeader).createGuestUser());
  }
  createAndIndexRepo(TEST_REPO,"src/test/repo-with-classifier-only");
  SearchService searchService=getSearchService(authorizationHeader);
  SearchRequest searchRequest=new SearchRequest("org.foo","studio-all-update-site",null,null,null,Arrays.asList(TEST_REPO));
  List<Artifact> artifacts=searchService.searchArtifacts(searchRequest);
  log.info("artifacts: {}",artifacts);
  assertEquals(1,artifacts.size());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void searchWithSearchUnknwownRepoId() throws Exception {
  SearchService searchService=getSearchService(authorizationHeader);
  SearchRequest searchRequest=new SearchRequest();
  searchRequest.setBundleExportPackage("org.apache.karaf.features.command.completers");
  searchRequest.setRepositories(Arrays.asList("tototititata"));
  List<Artifact> artifacts=searchService.searchArtifacts(searchRequest);
  assertNotNull(artifacts);
  assertTrue(" not 0 results for Bundle ExportPackage org.apache.karaf.features.command.completers but " + artifacts.size() + ":"+ artifacts,artifacts.size() == 0);
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void searchArtifactVersions() throws Exception {
  SearchService searchService=getSearchService(authorizationHeader);
  List<Artifact> artifacts=searchService.getArtifactVersions("commons-logging","commons-logging","jar");
  assertNotNull(artifacts);
  assertTrue(" not 13 results for commons-logging search but " + artifacts.size() + ":"+ artifacts,artifacts.size() == 13);
  log.info("artifacts for commons-logging size {} search {}",artifacts.size(),artifacts);
  for (  Artifact artifact : artifacts) {
    log.info("url: {}",artifact.getUrl());
    String version=artifact.getVersion();
    assertTrue(artifact.getUrl().contains(version));
  }
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * same search but with Guest user
 * @throws Exception
 */
@Test public void quickSearchOnArtifactIdGuest() throws Exception {
  SearchService searchService=getSearchService(null);
  List<Artifact> artifacts=searchService.quickSearch("commons-logging");
  assertNotNull(artifacts);
  assertTrue(" not 6 results for commons-logging search but " + artifacts.size() + ":"+ artifacts,artifacts.size() == 6);
  log.info("artifacts for commons-logging size {} search {}",artifacts.size(),artifacts);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.rss.processor.NewArtifactsRssFeedProcessorTest </h4><pre class="type-9 type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testProcess() throws Exception {
  List<ArtifactMetadata> newArtifacts=new ArrayList<>();
  Date whenGathered=Calendar.getInstance().getTime();
  newArtifacts.add(createArtifact("artifact-one","1.0",whenGathered));
  newArtifacts.add(createArtifact("artifact-one","1.1",whenGathered));
  newArtifacts.add(createArtifact("artifact-one","2.0",whenGathered));
  newArtifacts.add(createArtifact("artifact-two","1.0.1",whenGathered));
  newArtifacts.add(createArtifact("artifact-two","1.0.2",whenGathered));
  newArtifacts.add(createArtifact("artifact-two","1.0.3-SNAPSHOT",whenGathered));
  newArtifacts.add(createArtifact("artifact-three","2.0-SNAPSHOT",whenGathered));
  newArtifacts.add(createArtifact("artifact-four","1.1-beta-2",whenGathered));
  metadataRepository.setArtifactsByDateRange(newArtifacts);
  Map<String,String> reqParams=new HashMap<>();
  reqParams.put(RssFeedProcessor.KEY_REPO_ID,TEST_REPO);
  SyndFeed feed=newArtifactsProcessor.process(reqParams,metadataRepository);
  Calendar cal=Calendar.getInstance(TimeZone.getTimeZone("GMT"));
  cal.add(Calendar.DATE,-30);
  assertTrue((metadataRepository.getFrom().getTime() - cal.getTimeInMillis()) < 1000 * 5);
  assertEquals(null,metadataRepository.getTo());
  assertEquals(TEST_REPO,metadataRepository.getRepoId());
  assertTrue(feed.getTitle().equals("New Artifacts in Repository 'test-repo'"));
  assertTrue(feed.getDescription().equals("New artifacts found in repository 'test-repo' during repository scan."));
  assertTrue(feed.getLanguage().equals("en-us"));
  assertTrue(feed.getPublishedDate().equals(whenGathered));
  List<SyndEntry> entries=feed.getEntries();
  assertEquals(entries.size(),1);
  assertTrue(entries.get(0).getTitle().equals("New Artifacts in Repository 'test-repo' as of " + whenGathered));
  assertTrue(entries.get(0).getPublishedDate().equals(whenGathered));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.scheduler.indexing.ArchivaIndexingTaskExecutorTest </h4><pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateArtifactInIndex() throws Exception {
  File artifactFile=new File(repositoryConfig.getLocation(),"org/apache/archiva/archiva-index-methods-jar-test/1.0/archiva-index-methods-jar-test-1.0.jar");
  ArtifactIndexingTask task=new ArtifactIndexingTask(repositoryConfig,artifactFile,ArtifactIndexingTask.Action.ADD,getIndexingContext());
  indexingExecutor.executeTask(task);
  indexingExecutor.executeTask(task);
  BooleanQuery q=new BooleanQuery();
  q.add(indexer.constructQuery(MAVEN.GROUP_ID,new StringSearchExpression("org.apache.archiva")),Occur.SHOULD);
  q.add(indexer.constructQuery(MAVEN.ARTIFACT_ID,new StringSearchExpression("archiva-index-methods-jar-test")),Occur.SHOULD);
  IndexingContext ctx=indexer.getIndexingContexts().get(repositoryConfig.getId());
  IndexSearcher searcher=ctx.acquireIndexSearcher();
  TopDocs topDocs=searcher.search(q,null,10);
  ctx.releaseIndexSearcher(searcher);
  assertTrue(new File(repositoryConfig.getLocation(),".indexer").exists());
  assertFalse(new File(repositoryConfig.getLocation(),".index").exists());
  assertEquals(1,topDocs.totalHits);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddArtifactToIndex() throws Exception {
  File artifactFile=new File(repositoryConfig.getLocation(),"org/apache/archiva/archiva-index-methods-jar-test/1.0/archiva-index-methods-jar-test-1.0.jar");
  ArtifactIndexingTask task=new ArtifactIndexingTask(repositoryConfig,artifactFile,ArtifactIndexingTask.Action.ADD,getIndexingContext());
  indexingExecutor.executeTask(task);
  BooleanQuery q=new BooleanQuery();
  q.add(indexer.constructQuery(MAVEN.GROUP_ID,new StringSearchExpression("org.apache.archiva")),Occur.SHOULD);
  q.add(indexer.constructQuery(MAVEN.ARTIFACT_ID,new StringSearchExpression("archiva-index-methods-jar-test")),Occur.SHOULD);
  if (!indexer.getIndexingContexts().containsKey(repositoryConfig.getId())) {
    IndexingContext context=indexer.addIndexingContext(repositoryConfig.getId(),repositoryConfig.getId(),new File(repositoryConfig.getLocation()),new File(repositoryConfig.getLocation(),".indexer"),null,null,mavenIndexerUtils.getAllIndexCreators());
    context.setSearchable(true);
  }
  FlatSearchRequest request=new FlatSearchRequest(q);
  FlatSearchResponse response=indexer.searchFlat(request);
  assertTrue(new File(repositoryConfig.getLocation(),".indexer").exists());
  assertFalse(new File(repositoryConfig.getLocation(),".index").exists());
  assertEquals(1,response.getTotalHits());
  Set<ArtifactInfo> results=response.getResults();
  ArtifactInfo artifactInfo=results.iterator().next();
  assertEquals("org.apache.archiva",artifactInfo.groupId);
  assertEquals("archiva-index-methods-jar-test",artifactInfo.artifactId);
  assertEquals("test-repo",artifactInfo.repository);
}

</code></pre>

<br>
<pre class="type-9 type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPackagedIndex() throws Exception {
  File indexerDirectory=new File(repositoryConfig.getLocation(),".indexer");
  indexerDirectory.listFiles(new FilenameFilter(){
    @Override public boolean accept(    File file,    String s){
      if (s.startsWith("nexus-maven-repository-index")) {
        new File(file,s).delete();
      }
      return false;
    }
  }
);
  File artifactFile=new File(repositoryConfig.getLocation(),"org/apache/archiva/archiva-index-methods-jar-test/1.0/archiva-index-methods-jar-test-1.0.jar");
  ArtifactIndexingTask task=new ArtifactIndexingTask(repositoryConfig,artifactFile,ArtifactIndexingTask.Action.ADD,getIndexingContext());
  task.setExecuteOnEntireRepo(false);
  indexingExecutor.executeTask(task);
  task=new ArtifactIndexingTask(repositoryConfig,null,ArtifactIndexingTask.Action.FINISH,getIndexingContext());
  task.setExecuteOnEntireRepo(false);
  indexingExecutor.executeTask(task);
  assertTrue(indexerDirectory.exists());
  assertTrue(new File(indexerDirectory,"nexus-maven-repository-index.zip").exists());
  assertTrue(new File(indexerDirectory,"nexus-maven-repository-index.properties").exists());
  assertTrue(new File(indexerDirectory,"nexus-maven-repository-index.gz").exists());
  File destDir=new File(repositoryConfig.getLocation(),".indexer/tmp");
  unzipIndex(indexerDirectory.getPath(),destDir.getPath());
  BooleanQuery q=new BooleanQuery();
  q.add(indexer.constructQuery(MAVEN.GROUP_ID,new StringSearchExpression("org.apache.archiva")),Occur.SHOULD);
  q.add(indexer.constructQuery(MAVEN.ARTIFACT_ID,new StringSearchExpression("archiva-index-methods-jar-test")),Occur.SHOULD);
  FlatSearchRequest request=new FlatSearchRequest(q,getIndexingContext());
  FlatSearchResponse response=indexer.searchFlat(request);
  Set<ArtifactInfo> results=response.getResults();
  ArtifactInfo artifactInfo=results.iterator().next();
  assertEquals("org.apache.archiva",artifactInfo.groupId);
  assertEquals("archiva-index-methods-jar-test",artifactInfo.artifactId);
  assertEquals("test-repo",artifactInfo.repository);
  assertEquals(1,response.getTotalHits());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveArtifactFromIndex() throws Exception {
  File artifactFile=new File(repositoryConfig.getLocation(),"org/apache/archiva/archiva-index-methods-jar-test/1.0/archiva-index-methods-jar-test-1.0.jar");
  ArtifactIndexingTask task=new ArtifactIndexingTask(repositoryConfig,artifactFile,ArtifactIndexingTask.Action.ADD,getIndexingContext());
  indexingExecutor.executeTask(task);
  BooleanQuery q=new BooleanQuery();
  q.add(indexer.constructQuery(MAVEN.GROUP_ID,new SourcedSearchExpression("org.apache.archiva")),Occur.SHOULD);
  FlatSearchRequest flatSearchRequest=new FlatSearchRequest(q,indexer.getIndexingContexts().get(repositoryConfig.getId()));
  FlatSearchResponse response=indexer.searchFlat(flatSearchRequest);
  assertTrue(new File(repositoryConfig.getLocation(),".indexer").exists());
  assertFalse(new File(repositoryConfig.getLocation(),".index").exists());
  assertEquals(1,response.getTotalHitsCount());
  task=new ArtifactIndexingTask(repositoryConfig,artifactFile,ArtifactIndexingTask.Action.DELETE,getIndexingContext());
  indexingExecutor.executeTask(task);
  task=new ArtifactIndexingTask(repositoryConfig,artifactFile,ArtifactIndexingTask.Action.FINISH,getIndexingContext());
  indexingExecutor.executeTask(task);
  q=new BooleanQuery();
  q.add(indexer.constructQuery(MAVEN.GROUP_ID,new SourcedSearchExpression("org.apache.archiva")),Occur.SHOULD);
  q.add(indexer.constructQuery(MAVEN.ARTIFACT_ID,new SourcedSearchExpression("archiva-index-methods-jar-test")),Occur.SHOULD);
  assertTrue(new File(repositoryConfig.getLocation(),".indexer").exists());
  assertFalse(new File(repositoryConfig.getLocation(),".index").exists());
  flatSearchRequest=new FlatSearchRequest(q,getIndexingContext());
  response=indexer.searchFlat(flatSearchRequest);
  assertEquals(0,response.getTotalHitsCount());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.scheduler.repository.ArchivaRepositoryScanningTaskExecutorAbstractTest </h4><pre class="type-1 type-3 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before @Override public void setUp() throws Exception {
  super.setUp();
  File sourceRepoDir=new File("./src/test/repositories/default-repository");
  repoDir=new File("./target/default-repository");
  FileUtils.deleteDirectory(repoDir);
  assertFalse("Default Test Repository should not exist.",repoDir.exists());
  repoDir.mkdir();
  FileUtils.copyDirectoryStructure(sourceRepoDir,repoDir);
  Calendar cal=Calendar.getInstance();
  cal.add(Calendar.YEAR,-1);
  for (  File f : (List<File>)FileUtils.getFiles(repoDir,"**",null)) {
    f.setLastModified(cal.getTimeInMillis());
  }
  for (  String dir : (List<String>)FileUtils.getDirectoryNames(repoDir,"**/.svn",null,false)) {
    FileUtils.deleteDirectory(new File(repoDir,dir));
  }
  assertTrue("Default Test Repository should exist.",repoDir.exists() && repoDir.isDirectory());
  assertNotNull(archivaConfig);
  ManagedRepositoryConfiguration repositoryConfiguration=new ManagedRepositoryConfiguration();
  repositoryConfiguration.setId(TEST_REPO_ID);
  repositoryConfiguration.setName("Test Repository");
  repositoryConfiguration.setLocation(repoDir.getAbsolutePath());
  archivaConfig.getConfiguration().getManagedRepositories().clear();
  archivaConfig.getConfiguration().addManagedRepository(repositoryConfiguration);
  metadataRepository=mock(MetadataRepository.class);
  factory.setRepository(metadataRepository);
}

</code></pre>

<br>
<pre class="type-11 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@After @Override public void tearDown() throws Exception {
  FileUtils.deleteDirectory(repoDir);
  assertFalse(repoDir.exists());
  super.tearDown();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.scheduler.repository.ArchivaRepositoryScanningTaskExecutorPhase1Test </h4><pre class="type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExecutor() throws Exception {
  RepositoryTask repoTask=new RepositoryTask();
  repoTask.setRepositoryId(TEST_REPO_ID);
  taskExecutor.executeTask(repoTask);
  Collection<ArtifactReference> unprocessedResultList=testConsumer.getConsumed();
  assertNotNull(unprocessedResultList);
  assertEquals("Incorrect number of unprocessed artifacts detected.",8,unprocessedResultList.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.scheduler.repository.ArchivaRepositoryScanningTaskExecutorPhase2Test </h4><pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExecutorScanOnlyNewArtifacts() throws Exception {
  RepositoryTask repoTask=new RepositoryTask();
  repoTask.setRepositoryId(TEST_REPO_ID);
  repoTask.setScanAll(false);
  createAndSaveTestStats();
  taskExecutor.executeTask(repoTask);
  Collection<ArtifactReference> unprocessedResultList=testConsumer.getConsumed();
  assertNotNull(unprocessedResultList);
  assertEquals("Incorrect number of unprocessed artifacts detected. No new artifacts should have been found.",0,unprocessedResultList.size());
  RepositoryStatistics newStats=repositoryStatisticsManager.getLastStatistics(metadataRepository,TEST_REPO_ID);
  assertEquals(0,newStats.getNewFileCount());
  assertEquals(31,newStats.getTotalFileCount());
  File newArtifactGroup=new File(repoDir,"org/apache/archiva");
  assertFalse("newArtifactGroup should not exist.",newArtifactGroup.exists());
  FileUtils.copyDirectoryStructure(new File("target/test-classes/test-repo/org/apache/archiva"),newArtifactGroup);
  new File(newArtifactGroup,"archiva-index-methods-jar-test/1.0/pom.xml").setLastModified(Calendar.getInstance().getTimeInMillis() + 1000);
  new File(newArtifactGroup,"archiva-index-methods-jar-test/1.0/archiva-index-methods-jar-test-1.0.jar").setLastModified(Calendar.getInstance().getTimeInMillis() + 1000);
  assertTrue(newArtifactGroup.exists());
  taskExecutor.executeTask(repoTask);
  unprocessedResultList=testConsumer.getConsumed();
  assertNotNull(unprocessedResultList);
  assertEquals("Incorrect number of unprocessed artifacts detected. One new artifact should have been found.",1,unprocessedResultList.size());
  RepositoryStatistics updatedStats=repositoryStatisticsManager.getLastStatistics(metadataRepository,TEST_REPO_ID);
  assertEquals(2,updatedStats.getNewFileCount());
  assertEquals(33,updatedStats.getTotalFileCount());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExecutorScanOnlyNewArtifactsMidScan() throws Exception {
  RepositoryTask repoTask=new RepositoryTask();
  repoTask.setRepositoryId(TEST_REPO_ID);
  repoTask.setScanAll(false);
  createAndSaveTestStats();
  File newArtifactGroup=new File(repoDir,"org/apache/archiva");
  assertFalse("newArtifactGroup should not exist.",newArtifactGroup.exists());
  FileUtils.copyDirectoryStructure(new File("target/test-classes/test-repo/org/apache/archiva"),newArtifactGroup);
  new File(newArtifactGroup,"archiva-index-methods-jar-test/1.0/pom.xml").setLastModified(Calendar.getInstance().getTimeInMillis() - 50000);
  new File(newArtifactGroup,"archiva-index-methods-jar-test/1.0/archiva-index-methods-jar-test-1.0.jar").setLastModified(Calendar.getInstance().getTimeInMillis() - 50000);
  assertTrue(newArtifactGroup.exists());
  taskExecutor.executeTask(repoTask);
  Collection<ArtifactReference> unprocessedResultList=testConsumer.getConsumed();
  assertNotNull(unprocessedResultList);
  assertEquals("Incorrect number of unprocessed artifacts detected. One new artifact should have been found.",1,unprocessedResultList.size());
  RepositoryStatistics newStats=repositoryStatisticsManager.getLastStatistics(metadataRepository,TEST_REPO_ID);
  assertEquals(2,newStats.getNewFileCount());
  assertEquals(33,newStats.getTotalFileCount());
}

</code></pre>

<br>
<pre class="type-3 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExecutorScanOnlyNewArtifactsChangeTimes() throws Exception {
  RepositoryTask repoTask=new RepositoryTask();
  repoTask.setRepositoryId(TEST_REPO_ID);
  repoTask.setScanAll(false);
  createAndSaveTestStats();
  File newArtifactGroup=new File(repoDir,"org/apache/archiva");
  assertFalse("newArtifactGroup should not exist.",newArtifactGroup.exists());
  FileUtils.copyDirectoryStructure(new File("target/test-classes/test-repo/org/apache/archiva"),newArtifactGroup);
  new File(newArtifactGroup,"archiva-index-methods-jar-test/1.0/pom.xml").setLastModified(Calendar.getInstance().getTimeInMillis() + 1000);
  new File(newArtifactGroup,"archiva-index-methods-jar-test/1.0/archiva-index-methods-jar-test-1.0.jar").setLastModified(Calendar.getInstance().getTimeInMillis() + 1000);
  assertTrue(newArtifactGroup.exists());
  taskExecutor.executeTask(repoTask);
  Collection<ArtifactReference> unprocessedResultList=testConsumer.getConsumed();
  assertNotNull(unprocessedResultList);
  assertEquals("Incorrect number of unprocessed artifacts detected. One new artifact should have been found.",1,unprocessedResultList.size());
  RepositoryStatistics newStats=repositoryStatisticsManager.getLastStatistics(metadataRepository,TEST_REPO_ID);
  assertEquals(2,newStats.getNewFileCount());
  assertEquals(33,newStats.getTotalFileCount());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExecutorForceScanAll() throws Exception {
  RepositoryTask repoTask=new RepositoryTask();
  repoTask.setRepositoryId(TEST_REPO_ID);
  repoTask.setScanAll(true);
  Date date=Calendar.getInstance().getTime();
  repositoryStatisticsManager.addStatisticsAfterScan(metadataRepository,TEST_REPO_ID,new Date(date.getTime() - 1234567),date,8,8);
  taskExecutor.executeTask(repoTask);
  Collection<ArtifactReference> unprocessedResultList=testConsumer.getConsumed();
  assertNotNull(unprocessedResultList);
  assertEquals("Incorrect number of unprocessed artifacts detected.",8,unprocessedResultList.size());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.security.AbstractSecurityTest </h4><pre class="type-1 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  File srcConfig=new File("./src/test/resources/repository-archiva.xml");
  File destConfig=new File("./target/test-conf/archiva.xml");
  destConfig.getParentFile().mkdirs();
  destConfig.delete();
  FileUtils.copyFile(srcConfig,destConfig);
  assertNotNull(securitySystem);
  assertNotNull(rbacManager);
  assertNotNull(roleManager);
  assertNotNull(userRepos);
  assertNotNull(archivaConfiguration);
  User adminUser=createUser(USER_ADMIN,"Admin User");
  roleManager.assignRole(ArchivaRoleConstants.TEMPLATE_SYSTEM_ADMIN,adminUser.getUsername());
  User guestUser=createUser(USER_GUEST,"Guest User");
  roleManager.assignRole(ArchivaRoleConstants.TEMPLATE_GUEST,guestUser.getUsername());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.security.ArchivaServletAuthenticatorTest </h4><pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsAuthenticatedUserDoesNotExist() throws Exception {
  AuthenticationResult result=new AuthenticationResult(false,"non-existing-user",null);
  try {
    servletAuth.isAuthenticated(request,result);
    fail("Authentication exception should have been thrown.");
  }
 catch (  AuthenticationException e) {
    assertEquals("User Credentials Invalid",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsAuthorizedUserHasNoWriteAccess() throws Exception {
  createUser(USER_ALPACA,"Al 'Archiva' Paca");
  assignRepositoryObserverRole(USER_ALPACA,"corporate");
  EasyMock.expect(request.getRemoteAddr()).andReturn("192.168.111.111");
  UserManager userManager=securitySystem.getUserManager();
  User user=userManager.findUser(USER_ALPACA);
  AuthenticationResult result=new AuthenticationResult(true,USER_ALPACA,null);
  SecuritySession session=new DefaultSecuritySession(result,user);
  httpServletRequestControl.replay();
  try {
    servletAuth.isAuthorized(request,session,"corporate",ArchivaRoleConstants.OPERATION_REPOSITORY_UPLOAD);
    fail("UnauthorizedException should have been thrown.");
  }
 catch (  UnauthorizedException e) {
    assertEquals("Access denied for repository corporate",e.getMessage());
  }
  httpServletRequestControl.verify();
  restoreGuestInitialValues(USER_ALPACA);
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIsAuthorizedUserHasNoReadAccess() throws Exception {
  createUser(USER_ALPACA,"Al 'Archiva' Paca");
  UserManager userManager=securitySystem.getUserManager();
  User user=userManager.findUser(USER_ALPACA);
  AuthenticationResult result=new AuthenticationResult(true,USER_ALPACA,null);
  SecuritySession session=new DefaultSecuritySession(result,user);
  try {
    servletAuth.isAuthorized(request,session,"corporate",ArchivaRoleConstants.OPERATION_REPOSITORY_ACCESS);
    fail("UnauthorizedException should have been thrown.");
  }
 catch (  UnauthorizedException e) {
    assertEquals("Access denied for repository corporate",e.getMessage());
  }
  restoreGuestInitialValues(USER_ALPACA);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.security.RoleManagerTest </h4><pre class="type-3 type-5 type-7 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExpectedRoles() throws Exception {
  assertNotNull(roleManager);
  assertTrue(roleManager.roleExists("system-administrator"));
  assertTrue(roleManager.roleExists("user-administrator"));
  assertTrue(roleManager.roleExists("archiva-global-repository-observer"));
  assertTrue(roleManager.roleExists("archiva-guest"));
  assertTrue(roleManager.roleExists("guest"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.transaction.CopyFileEventTest </h4><pre class="type-9 type-1 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  testSource.getParentFile().mkdirs();
  testSource.createNewFile();
  writeFile(testSource,"source contents");
  testDestChecksum=new File(testDest.getPath() + ".sha1");
  testDestChecksum.getParentFile().mkdirs();
  testDestChecksum.createNewFile();
  writeFile(testDestChecksum,"this is the checksum");
  assertTrue("Test if the source exists",testSource.exists());
  assertTrue("Test if the destination checksum exists",testDestChecksum.exists());
  source=readFile(testSource);
  oldChecksum=readFile(testDestChecksum);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.web.rss.RssFeedServletTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequestNewArtifactsInRepo() throws Exception {
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setRequestURI("/feeds/test-repo");
  request.addHeader("User-Agent","Apache Archiva unit test");
  request.setMethod("GET");
  Base64 encoder=new Base64(0,new byte[0]);
  String userPass="user1:password1";
  String encodedUserPass=encoder.encodeToString(userPass.getBytes());
  request.addHeader("Authorization","BASIC " + encodedUserPass);
  MockHttpServletResponse mockHttpServletResponse=new MockHttpServletResponse();
  rssFeedServlet.doGet(request,mockHttpServletResponse);
  assertEquals(RssFeedServlet.MIME_TYPE,mockHttpServletResponse.getHeader("CONTENT-TYPE"));
  assertNotNull("Should have recieved a response",mockHttpServletResponse.getContentAsString());
  assertEquals("Should have been an OK response code.",HttpServletResponse.SC_OK,mockHttpServletResponse.getStatus());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequestNewVersionsOfArtifact() throws Exception {
  MockHttpServletRequest request=new MockHttpServletRequest();
  request.setRequestURI("/feeds/org/apache/archiva/artifact-two");
  request.addHeader("User-Agent","Apache Archiva unit test");
  request.setMethod("GET");
  Base64 encoder=new Base64(0,new byte[0]);
  String userPass="user1:password1";
  String encodedUserPass=encoder.encodeToString(userPass.getBytes());
  request.addHeader("Authorization","BASIC " + encodedUserPass);
  MockHttpServletResponse mockHttpServletResponse=new MockHttpServletResponse();
  rssFeedServlet.doGet(request,mockHttpServletResponse);
  assertEquals(RssFeedServlet.MIME_TYPE,mockHttpServletResponse.getHeader("CONTENT-TYPE"));
  assertNotNull("Should have recieved a response",mockHttpServletResponse.getContentAsString());
  assertEquals("Should have been an OK response code.",HttpServletResponse.SC_OK,mockHttpServletResponse.getStatus());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.web.test.WebDriverBrowseTest </h4><pre class="type-16 type-5 type-6 type-12 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void simpletest() throws Exception {
  Properties p=new Properties();
  p.load(this.getClass().getClassLoader().getResourceAsStream("test.properties"));
  Properties tomcatPortProperties=new Properties();
  tomcatPortProperties.load(new FileInputStream(new File(System.getProperty("tomcat.propertiesPortFilePath"))));
  int tomcatPort=Integer.parseInt(tomcatPortProperties.getProperty("tomcat.maven.http.port"));
  goTo("http://localhost:" + tomcatPort + "/archiva/index.html?request_lang=en");
  await().atMost(5,TimeUnit.SECONDS).until("#topbar-menu").isPresent();
  FluentList<FluentWebElement> elements=find("#create-admin-link-a");
  if (!elements.isEmpty() && elements.get(0).isDisplayed()) {
    WebElement webElement=elements.get(0).getElement();
    Assert.assertEquals("Create Admin User",webElement.getText());
    webElement.click();
    await().atMost(2,TimeUnit.SECONDS).until("#user-create").isPresent();
    assertThat(find("#username").getValue().equals("admin"));
    assertThat(find("#password").getValue().isEmpty());
    assertThat(find("#confirmPassword").getValue().isEmpty());
    assertThat(find("#email").getValue().isEmpty());
    fill("#fullname").with(p.getProperty("ADMIN_FULLNAME"));
    fill("#email").with(p.getProperty("ADMIN_EMAIL"));
    fill("#password").with(p.getProperty("ADMIN_PASSWORD"));
    fill("#confirmPassword").with(p.getProperty("ADMIN_PASSWORD"));
    find("#user-create-form-register-button").click();
    await().atMost(2,TimeUnit.SECONDS).until("#logout-link").isPresent();
    FluentList<FluentWebElement> elementss=find("#menu-find-browse-a");
    WebElement webElsement=elementss.get(0).getElement();
    webElsement.click();
    await().atMost(2,TimeUnit.SECONDS).until("#main_browse_result").isPresent();
    takeScreenShot("search.png");
    goTo("http://localhost:" + tomcatPort + "/archiva/index.html#browse?request_lang=en");
    takeScreenShot("browse.png");
  }
 else {
    elements=find("#login-link-a");
    WebElement webElement=elements.get(0).getElement();
    Assert.assertEquals("LOGIN",webElement.getText());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.webdav.ArchivaDavResourceFactoryTest </h4><pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequestMetadataRepoIsLegacy() throws Exception {
  defaultManagedRepositoryAdmin.addManagedRepository(createManagedRepository(LEGACY_REPO,new File("target/test-classes/" + LEGACY_REPO).getPath(),"legacy"),false,null);
  DavResourceLocator locator=new ArchivaDavResourceLocator("","/repository/" + LEGACY_REPO + "/eclipse/maven-metadata.xml",LEGACY_REPO,new ArchivaDavLocatorFactory());
  ManagedRepositoryContent legacyRepo=createManagedRepositoryContent(LEGACY_REPO);
  RepositoryRequest repoRequest=new RepositoryRequest();
  resourceFactory.setRepositoryRequest(repoRequest);
  try {
    archivaConfigurationControl.reset();
    expect(archivaConfiguration.getConfiguration()).andReturn(config).times(2);
    expect(repoFactory.getManagedRepositoryContent(LEGACY_REPO)).andReturn(legacyRepo);
    expect(request.getMethod()).andReturn("GET").times(3);
    expect(request.getRemoteAddr()).andReturn("http://localhost:8080").times(3);
    expect(request.getDavSession()).andReturn(new ArchivaDavSession()).times(2);
    expect(request.getContextPath()).andReturn("").times(2);
    archivaConfigurationControl.replay();
    repoContentFactoryControl.replay();
    requestControl.replay();
    resourceFactory.createResource(locator,request,response);
    archivaConfigurationControl.verify();
    repoContentFactoryControl.verify();
    requestControl.verify();
    fail("A 404 error should have been thrown!");
  }
 catch (  DavException e) {
    assertEquals(404,e.getErrorCode());
  }
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequestArtifactMetadataTwoPartsRepoHasDefaultLayout() throws Exception {
  DavResourceLocator locator=new ArchivaDavResourceLocator("","/repository/" + INTERNAL_REPO + "/eclipse/maven-metadata.xml",INTERNAL_REPO,new ArchivaDavLocatorFactory());
  ManagedRepositoryContent internalRepo=createManagedRepositoryContent(INTERNAL_REPO);
  RepositoryRequest repoRequest=new RepositoryRequest();
  resourceFactory.setRepositoryRequest(repoRequest);
  try {
    archivaConfigurationControl.reset();
    expect(archivaConfiguration.getConfiguration()).andReturn(config).times(2);
    expect(repoFactory.getManagedRepositoryContent(INTERNAL_REPO)).andReturn(internalRepo);
    expect(request.getMethod()).andReturn("GET").times(3);
    expect(request.getRemoteAddr()).andReturn("http://localhost:8080").times(3);
    expect(request.getDavSession()).andReturn(new ArchivaDavSession()).times(2);
    expect(request.getContextPath()).andReturn("").times(2);
    archivaConfigurationControl.replay();
    repoContentFactoryControl.replay();
    requestControl.replay();
    resourceFactory.createResource(locator,request,response);
    archivaConfigurationControl.verify();
    repoContentFactoryControl.verify();
    requestControl.verify();
    fail("A 404 error should have been thrown!");
  }
 catch (  DavException e) {
    assertEquals(404,e.getErrorCode());
  }
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepositoryGroupArtifactDoesNotExistInAnyOfTheReposAuthenticationDisabled() throws Exception {
  DavResourceLocator locator=new ArchivaDavResourceLocator("","/repository/" + LOCAL_REPO_GROUP + "/org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar",LOCAL_REPO_GROUP,new ArchivaDavLocatorFactory());
  defaultManagedRepositoryAdmin.addManagedRepository(createManagedRepository(LOCAL_MIRROR_REPO,new File("target/test-classes/local-mirror").getPath(),"default"),false,null);
  List<RepositoryGroupConfiguration> repoGroups=new ArrayList<>();
  RepositoryGroupConfiguration repoGroup=new RepositoryGroupConfiguration();
  repoGroup.setId(LOCAL_REPO_GROUP);
  repoGroup.addRepository(INTERNAL_REPO);
  repoGroup.addRepository(LOCAL_MIRROR_REPO);
  repoGroups.add(repoGroup);
  config.setRepositoryGroups(repoGroups);
  ManagedRepositoryContent internalRepo=createManagedRepositoryContent(INTERNAL_REPO);
  ManagedRepositoryContent localMirrorRepo=createManagedRepositoryContent(LOCAL_MIRROR_REPO);
  try {
    archivaConfigurationControl.reset();
    expect(archivaConfiguration.getConfiguration()).andReturn(config).times(3);
    expect(request.getMethod()).andReturn("GET").times(5);
    expect(request.getPathInfo()).andReturn("org/apache/archiva").times(0,2);
    expect(repoFactory.getManagedRepositoryContent(INTERNAL_REPO)).andReturn(internalRepo);
    expect(repoFactory.getManagedRepositoryContent(LOCAL_MIRROR_REPO)).andReturn(localMirrorRepo);
    expect(request.getRemoteAddr()).andReturn("http://localhost:8080").times(4);
    expect(request.getDavSession()).andReturn(new ArchivaDavSession()).times(4);
    expect(request.getContextPath()).andReturn("").times(2);
    expect(repoRequest.isSupportFile("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar")).andReturn(false).times(2);
    expect(repoRequest.isDefault("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar")).andReturn(false).times(2);
    expect(repoRequest.toArtifactReference("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar")).andReturn(null).times(2);
    expect(repoRequest.toNativePath("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar",internalRepo)).andReturn(new File(config.findManagedRepositoryById(INTERNAL_REPO).getLocation(),"target/test-classes/internal/org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar").getPath());
    expect(repoRequest.toNativePath("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar",localMirrorRepo)).andReturn(new File(config.findManagedRepositoryById(LOCAL_MIRROR_REPO).getLocation(),"target/test-classes/internal/org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar").getPath());
    expect(repoRequest.isArchetypeCatalog("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar")).andReturn(false).times(2);
    archivaConfigurationControl.replay();
    requestControl.replay();
    repoContentFactoryControl.replay();
    repoRequestControl.replay();
    resourceFactory.createResource(locator,request,response);
    archivaConfigurationControl.verify();
    requestControl.verify();
    repoContentFactoryControl.verify();
    repoRequestControl.verify();
    fail("A DavException with 404 error code should have been thrown.");
  }
 catch (  DavException e) {
    assertEquals(404,e.getErrorCode());
  }
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepositoryGroupLastRepositoryRequiresAuthentication() throws Exception {
  DavResourceLocator locator=new ArchivaDavResourceLocator("","/repository/" + LOCAL_REPO_GROUP + "/org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar",LOCAL_REPO_GROUP,new ArchivaDavLocatorFactory());
  List<RepositoryGroupConfiguration> repoGroups=new ArrayList<>();
  RepositoryGroupConfiguration repoGroup=new RepositoryGroupConfiguration();
  repoGroup.setId(LOCAL_REPO_GROUP);
  repoGroup.addRepository(INTERNAL_REPO);
  repoGroup.addRepository(RELEASES_REPO);
  repoGroups.add(repoGroup);
  config.setRepositoryGroups(repoGroups);
  ManagedRepositoryContent internalRepo=createManagedRepositoryContent(INTERNAL_REPO);
  ManagedRepositoryContent releasesRepo=createManagedRepositoryContent(RELEASES_REPO);
  try {
    archivaConfigurationControl.reset();
    expect(archivaConfiguration.getConfiguration()).andReturn(config).times(3);
    expect(request.getMethod()).andReturn("GET").times(3);
    expect(request.getPathInfo()).andReturn("org/apache/archiva").times(0,2);
    expect(repoFactory.getManagedRepositoryContent(INTERNAL_REPO)).andReturn(internalRepo);
    expect(repoFactory.getManagedRepositoryContent(RELEASES_REPO)).andReturn(releasesRepo);
    expect(request.getRemoteAddr()).andReturn("http://localhost:8080").times(2);
    expect(request.getDavSession()).andReturn(new ArchivaDavSession()).times(2);
    expect(request.getContextPath()).andReturn("").times(2);
    expect(repoRequest.isSupportFile("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar")).andReturn(false);
    expect(repoRequest.isDefault("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar")).andReturn(false);
    expect(repoRequest.toArtifactReference("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar")).andReturn(null);
    expect(repoRequest.toNativePath("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar",internalRepo)).andReturn(new File(config.findManagedRepositoryById(INTERNAL_REPO).getLocation(),"target/test-classes/internal/org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar").getPath());
    expect(repoRequest.isArchetypeCatalog("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar")).andReturn(false);
    archivaConfigurationControl.replay();
    requestControl.replay();
    repoContentFactoryControl.replay();
    repoRequestControl.replay();
    resourceFactory.createResource(locator,request,response);
    archivaConfigurationControl.verify();
    requestControl.verify();
    repoContentFactoryControl.verify();
    repoRequestControl.verify();
    fail("A DavException with 401 error code should have been thrown.");
  }
 catch (  DavException e) {
    assertEquals(401,e.getErrorCode());
  }
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepositoryGroupFirstRepositoryRequiresAuthentication() throws Exception {
  DavResourceLocator locator=new ArchivaDavResourceLocator("","/repository/" + LOCAL_REPO_GROUP + "/org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar",LOCAL_REPO_GROUP,new ArchivaDavLocatorFactory());
  ManagedRepositoryContent internalRepo=createManagedRepositoryContent(INTERNAL_REPO);
  ManagedRepositoryContent releasesRepo=createManagedRepositoryContent(RELEASES_REPO);
  try {
    archivaConfigurationControl.reset();
    expect(archivaConfiguration.getConfiguration()).andReturn(config).times(3);
    expect(request.getMethod()).andReturn("GET").times(3);
    expect(request.getPathInfo()).andReturn("org/apache/archiva").times(0,2);
    expect(repoFactory.getManagedRepositoryContent(RELEASES_REPO)).andReturn(releasesRepo);
    expect(request.getRemoteAddr()).andReturn("http://localhost:8080").times(2);
    expect(request.getDavSession()).andReturn(new ArchivaDavSession()).times(2);
    expect(request.getContextPath()).andReturn("").times(2);
    expect(repoRequest.isSupportFile("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar")).andReturn(true);
    expect(repoRequest.isDefault("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar")).andReturn(false);
    expect(repoRequest.toArtifactReference("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar")).andReturn(null);
    expect(repoRequest.toNativePath("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar",internalRepo)).andReturn(new File(config.findManagedRepositoryById(INTERNAL_REPO).getLocation(),"target/test-classes/internal/org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar").getPath());
    expect(repoFactory.getManagedRepositoryContent(INTERNAL_REPO)).andReturn(internalRepo);
    expect(repoRequest.isArchetypeCatalog("org/apache/archiva/archiva/1.2-SNAPSHOT/archiva-1.2-SNAPSHOT.jar")).andReturn(false);
    archivaConfigurationControl.replay();
    requestControl.replay();
    repoContentFactoryControl.replay();
    repoRequestControl.replay();
    resourceFactory.createResource(locator,request,response);
    archivaConfigurationControl.verify();
    requestControl.verify();
    repoContentFactoryControl.verify();
    repoRequestControl.verify();
    fail("A DavException with 401 error code should have been thrown.");
  }
 catch (  DavException e) {
    assertEquals(401,e.getErrorCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.webdav.ArchivaDavSessionTest </h4><pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddReferencesThrowsUnsupportedOperationException(){
  ArchivaDavSession session=new ArchivaDavSession();
  try {
    session.addReference(new Object());
    fail("Did not throw UnsupportedOperationException");
  }
 catch (  UnsupportedOperationException e) {
    assertTrue(true);
  }
}

</code></pre>

<br>
<pre class="type-10 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRemoveReferencesThrowsUnsupportedOperationException(){
  ArchivaDavSession session=new ArchivaDavSession();
  try {
    session.removeReference(new Object());
    fail("Did not throw UnsupportedOperationException");
  }
 catch (  UnsupportedOperationException e) {
    assertTrue(true);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.webdav.DavResourceTest </h4><pre class="type-10 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefreshLockThrowsExceptionIfNoLockIsPresent() throws Exception {
  LockInfo info=new LockInfo(Scope.EXCLUSIVE,Type.WRITE,"/",0,false);
  assertEquals(0,resource.getLocks().length);
  try {
    lockManager.refreshLock(info,"notoken",resource);
    fail("Did not throw dav exception");
  }
 catch (  DavException e) {
    assertEquals(DavServletResponse.SC_PRECONDITION_FAILED,e.getErrorCode());
  }
  assertEquals(0,resource.getLocks().length);
}

</code></pre>

<br>
<pre class="type-10 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteNonExistantResourceShould404() throws Exception {
  File dir=new File(baseDir,"testdir");
  try {
    DavResource directoryResource=getDavResource("/testdir",dir);
    directoryResource.getCollection().removeMember(directoryResource);
    fail("Did not throw DavException");
  }
 catch (  DavException e) {
    assertEquals(DavServletResponse.SC_NOT_FOUND,e.getErrorCode());
  }
}

</code></pre>

<br>
<pre class="type-1 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Override @Before public void setUp() throws Exception {
  super.setUp();
  session=new ArchivaDavSession();
  baseDir=new File("target/DavResourceTest");
  baseDir.mkdirs();
  myResource=new File(baseDir,"myresource.jar");
  assertTrue("Could not create " + myResource.getAbsolutePath(),myResource.createNewFile());
  resourceFactory=new RootContextDavResourceFactory();
  resourceLocator=(ArchivaDavResourceLocator)new ArchivaDavLocatorFactory().createResourceLocator("/",REPOPATH);
  resource=getDavResource(resourceLocator.getHref(false),myResource);
  lockManager=new SimpleLockManager();
  resource.addLockManager(lockManager);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetLock() throws Exception {
  LockInfo info=new LockInfo(Scope.EXCLUSIVE,Type.WRITE,"/",0,false);
  lockManager.createLock(info,resource);
  assertEquals(1,resource.getLocks().length);
  assertNotNull(resource.getLock(Type.WRITE,Scope.EXCLUSIVE));
  assertNull(resource.getLock(Type.WRITE,Scope.SHARED));
}

</code></pre>

<br>
<pre class="type-10 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnlockThrowsDavExceptionIfNotLocked() throws Exception {
  LockInfo info=new LockInfo(Scope.EXCLUSIVE,Type.WRITE,"/",0,false);
  assertEquals(0,resource.getLocks().length);
  lockManager.createLock(info,resource);
  assertEquals(1,resource.getLocks().length);
  try {
    lockManager.releaseLock("BLAH",resource);
    fail("Did not throw DavException");
  }
 catch (  DavException e) {
    assertEquals(DavServletResponse.SC_LOCKED,e.getErrorCode());
  }
  assertEquals(1,resource.getLocks().length);
}

</code></pre>

<br>
<pre class="type-10 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLockIfResourceUnlockable() throws Exception {
  assertEquals(0,resource.getLocks().length);
  LockInfo info=new LockInfo(Scope.SHARED,Type.WRITE,"/",0,false);
  try {
    lockManager.createLock(info,resource);
    fail("Did not throw dav exception");
  }
 catch (  Exception e) {
  }
  assertEquals(0,resource.getLocks().length);
}

</code></pre>

<br>
<pre class="type-10 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnlockThrowsDavExceptionIfResourceNotLocked() throws Exception {
  assertEquals(0,resource.getLocks().length);
  try {
    lockManager.releaseLock("BLAH",resource);
    fail("Did not throw DavException");
  }
 catch (  DavException e) {
    assertEquals(DavServletResponse.SC_PRECONDITION_FAILED,e.getErrorCode());
  }
  assertEquals(0,resource.getLocks().length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.webdav.MimeTypesLoaderTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testArchivaTypes() throws Exception {
  assertNotNull(mimeTypes);
  assertEquals("sha1","text/plain",mimeTypes.getMimeType("foo.sha1"));
  assertEquals("md5","text/plain",mimeTypes.getMimeType("foo.md5"));
  assertEquals("pgp","application/pgp-encrypted",mimeTypes.getMimeType("foo.pgp"));
  assertEquals("jar","application/java-archive",mimeTypes.getMimeType("foo.jar"));
  assertEquals("Default","application/octet-stream",mimeTypes.getMimeType(".SomeUnknownExtension"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.webdav.RepositoryServletDeployTest </h4><pre class="type-9 type-3 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMkColWithMissingParentCollectionFails() throws Exception {
  setupCleanRepo(repoRootInternal);
  String putUrl="http://machine.com/repository/internal/path/to/";
  WebRequest request=new MkColMethodWebRequest(putUrl);
  WebResponse response=getServletUnitClient().getResponse(request);
  assertEquals(HttpServletResponse.SC_CONFLICT,response.getStatusCode());
  File mkColLocalPath=new File(repoRootInternal,"path/to/");
  assertFalse(mkColLocalPath.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.webdav.RepositoryServletSecurityTest </h4><pre class="type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutWithValidUserWithNoWriteAccess() throws Exception {
  servlet.setDavSessionProvider(davSessionProvider);
  ArchivaDavResourceFactory archivaDavResourceFactory=(ArchivaDavResourceFactory)servlet.getResourceFactory();
  archivaDavResourceFactory.setHttpAuth(httpAuth);
  archivaDavResourceFactory.setServletAuth(servletAuth);
  servlet.setResourceFactory(archivaDavResourceFactory);
  AuthenticationResult result=new AuthenticationResult();
  EasyMock.expect(httpAuth.getAuthenticationResult(anyObject(HttpServletRequest.class),anyObject(HttpServletResponse.class))).andReturn(result);
  EasyMock.expect(servletAuth.isAuthenticated(anyObject(HttpServletRequest.class),anyObject(AuthenticationResult.class))).andReturn(true);
  SecuritySession session=new DefaultSecuritySession();
  EasyMock.expect(httpAuth.getAuthenticationResult(anyObject(HttpServletRequest.class),anyObject(HttpServletResponse.class))).andReturn(result);
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest();
  EasyMock.expect(httpAuth.getSecuritySession(mockHttpServletRequest.getSession(true))).andReturn(session);
  EasyMock.expect(httpAuth.getSessionUser(mockHttpServletRequest.getSession())).andReturn(new SimpleUser());
  EasyMock.expect(servletAuth.isAuthenticated(anyObject(HttpServletRequest.class),eq(result))).andReturn(true);
  EasyMock.expect(servletAuth.isAuthorized(anyObject(HttpServletRequest.class),eq(session),eq("internal"),eq(ArchivaRoleConstants.OPERATION_REPOSITORY_UPLOAD))).andThrow(new UnauthorizedException("User not authorized"));
  httpAuthControl.replay();
  servletAuthControl.replay();
  InputStream is=getClass().getResourceAsStream("/artifact.jar");
  assertNotNull("artifact.jar inputstream",is);
  mockHttpServletRequest.addHeader("User-Agent","foo");
  mockHttpServletRequest.setMethod("PUT");
  mockHttpServletRequest.setRequestURI("/repository/internal/path/to/artifact.jar");
  mockHttpServletRequest.setContent(IOUtils.toByteArray(is));
  mockHttpServletRequest.setContentType("application/octet-stream");
  MockHttpServletResponse mockHttpServletResponse=new MockHttpServletResponse();
  servlet.service(mockHttpServletRequest,mockHttpServletResponse);
  httpAuthControl.verify();
  servletAuthControl.verify();
  assertEquals(HttpServletResponse.SC_UNAUTHORIZED,mockHttpServletResponse.getStatus());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutWithValidUserWithWriteAccess() throws Exception {
  assertTrue(repoRootInternal.getRoot().exists());
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest();
  String putUrl="http://machine.com/repository/internal/path/to/artifact.jar";
  InputStream is=getClass().getResourceAsStream("/artifact.jar");
  assertNotNull("artifact.jar inputstream",is);
  servlet.setDavSessionProvider(davSessionProvider);
  ArchivaDavResourceFactory archivaDavResourceFactory=(ArchivaDavResourceFactory)servlet.getResourceFactory();
  archivaDavResourceFactory.setHttpAuth(httpAuth);
  archivaDavResourceFactory.setServletAuth(servletAuth);
  TestAuditListener listener=new TestAuditListener();
  archivaDavResourceFactory.addAuditListener(listener);
  servlet.setResourceFactory(archivaDavResourceFactory);
  AuthenticationResult result=new AuthenticationResult();
  EasyMock.expect(httpAuth.getAuthenticationResult(anyObject(HttpServletRequest.class),anyObject(HttpServletResponse.class))).andReturn(result);
  EasyMock.expect(servletAuth.isAuthenticated(anyObject(HttpServletRequest.class),anyObject(AuthenticationResult.class))).andReturn(true);
  User user=new SimpleUser();
  user.setUsername("admin");
  SecuritySession session=new DefaultSecuritySession();
  EasyMock.expect(httpAuth.getAuthenticationResult(anyObject(HttpServletRequest.class),anyObject(HttpServletResponse.class))).andReturn(result);
  EasyMock.expect(httpAuth.getSecuritySession(mockHttpServletRequest.getSession())).andReturn(session);
  EasyMock.expect(httpAuth.getSessionUser(mockHttpServletRequest.getSession())).andReturn(user);
  EasyMock.expect(servletAuth.isAuthenticated(anyObject(HttpServletRequest.class),eq(result))).andReturn(true);
  EasyMock.expect(servletAuth.isAuthorized(anyObject(HttpServletRequest.class),eq(session),eq("internal"),eq(ArchivaRoleConstants.OPERATION_REPOSITORY_UPLOAD))).andReturn(true);
  httpAuthControl.replay();
  servletAuthControl.replay();
  mockHttpServletRequest.addHeader("User-Agent","foo");
  mockHttpServletRequest.setMethod("PUT");
  mockHttpServletRequest.setRequestURI("/repository/internal/path/to/artifact.jar");
  mockHttpServletRequest.setContent(IOUtils.toByteArray(is));
  mockHttpServletRequest.setContentType("application/octet-stream");
  MockHttpServletResponse mockHttpServletResponse=new MockHttpServletResponse();
  servlet.service(mockHttpServletRequest,mockHttpServletResponse);
  httpAuthControl.verify();
  servletAuthControl.verify();
  assertEquals(HttpServletResponse.SC_CREATED,mockHttpServletResponse.getStatus());
  assertEquals("admin",listener.getEvents().get(0).getUserId());
}

</code></pre>

<br>
<pre class="type-1 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before @Override public void setUp() throws Exception {
  super.setUp();
  String appserverBase=System.getProperty("appserver.base",new File("target/appserver-base").getAbsolutePath());
  File testConf=new File("src/test/resources/repository-archiva.xml");
  File testConfDest=new File(appserverBase,"conf/archiva.xml");
  FileUtils.copyFile(testConf,testConfDest);
  Configuration config=archivaConfiguration.getConfiguration();
  List<ManagedRepositoryConfiguration> f1=new ArrayList<>(config.getManagedRepositories());
  for (  ManagedRepositoryConfiguration f : f1) {
    config.removeManagedRepository(f);
  }
  assertEquals(0,config.getManagedRepositories().size());
  config.addManagedRepository(createManagedRepository(REPOID_INTERNAL,"Internal Test Repo",repoRootInternal.getRoot()));
  saveConfiguration(archivaConfiguration);
  CacheManager.getInstance().clearAll();
  servletAuthControl=EasyMock.createControl();
  servletAuth=servletAuthControl.createMock(ServletAuthenticator.class);
  httpAuthControl=EasyMock.createControl();
  httpAuth=httpAuthControl.createMock(HttpAuthenticator.class);
  davSessionProvider=new ArchivaDavSessionProvider(servletAuth,httpAuth);
  final MockServletContext mockServletContext=new MockServletContext();
  WebApplicationContext webApplicationContext=new AbstractRepositoryServletTestCase.TestWebapplicationContext(applicationContext,mockServletContext);
  mockServletContext.setAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE,webApplicationContext);
  MockServletConfig mockServletConfig=new MockServletConfig(){
    @Override public ServletContext getServletContext(){
      return mockServletContext;
    }
  }
;
  servlet=new RepositoryServlet();
  servlet.init(mockServletConfig);
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutWithInvalidUserAndGuestHasNoWriteAccess() throws Exception {
  InputStream is=getClass().getResourceAsStream("/artifact.jar");
  assertNotNull("artifact.jar inputstream",is);
  servlet.setDavSessionProvider(davSessionProvider);
  AuthenticationResult result=new AuthenticationResult();
  EasyMock.expect(httpAuth.getAuthenticationResult(anyObject(HttpServletRequest.class),anyObject(HttpServletResponse.class))).andReturn(result);
  servletAuth.isAuthenticated(EasyMock.anyObject(HttpServletRequest.class),EasyMock.anyObject(AuthenticationResult.class));
  EasyMock.expectLastCall().andThrow(new AuthenticationException("Authentication error"));
  servletAuth.isAuthorized("guest","internal",ArchivaRoleConstants.OPERATION_REPOSITORY_UPLOAD);
  EasyMock.expectLastCall().andThrow(new UnauthorizedException("'guest' has no write access to repository"));
  httpAuthControl.replay();
  servletAuthControl.replay();
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest();
  mockHttpServletRequest.addHeader("User-Agent","foo");
  mockHttpServletRequest.setMethod("PUT");
  mockHttpServletRequest.setRequestURI("/repository/internal/path/to/artifact.jar");
  mockHttpServletRequest.setContent(IOUtils.toByteArray(is));
  mockHttpServletRequest.setContentType("application/octet-stream");
  MockHttpServletResponse mockHttpServletResponse=new MockHttpServletResponse();
  servlet.service(mockHttpServletRequest,mockHttpServletResponse);
  httpAuthControl.verify();
  servletAuthControl.verify();
  assertEquals(HttpServletResponse.SC_UNAUTHORIZED,mockHttpServletResponse.getStatus());
}

</code></pre>

<br>
<pre class="type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPutWithInvalidUserAndGuestHasWriteAccess() throws Exception {
  servlet.setDavSessionProvider(davSessionProvider);
  ArchivaDavResourceFactory archivaDavResourceFactory=(ArchivaDavResourceFactory)servlet.getResourceFactory();
  archivaDavResourceFactory.setHttpAuth(httpAuth);
  archivaDavResourceFactory.setServletAuth(servletAuth);
  servlet.setResourceFactory(archivaDavResourceFactory);
  AuthenticationResult result=new AuthenticationResult();
  EasyMock.expect(httpAuth.getAuthenticationResult(anyObject(HttpServletRequest.class),anyObject(HttpServletResponse.class))).andReturn(result);
  EasyMock.expect(servletAuth.isAuthenticated(anyObject(HttpServletRequest.class),anyObject(AuthenticationResult.class))).andThrow(new AuthenticationException("Authentication error"));
  EasyMock.expect(servletAuth.isAuthorized("guest","internal",ArchivaRoleConstants.OPERATION_REPOSITORY_UPLOAD)).andReturn(true);
  SecuritySession session=new DefaultSecuritySession();
  EasyMock.expect(httpAuth.getAuthenticationResult(anyObject(HttpServletRequest.class),anyObject(HttpServletResponse.class))).andReturn(result);
  EasyMock.expect(httpAuth.getSecuritySession(anyObject(HttpSession.class))).andReturn(session);
  EasyMock.expect(servletAuth.isAuthenticated(anyObject(HttpServletRequest.class),eq(result))).andThrow(new AuthenticationException("Authentication error"));
  EasyMock.expect(httpAuth.getSessionUser(anyObject(HttpSession.class))).andReturn(null);
  EasyMock.expect(servletAuth.isAuthorized("guest","internal",ArchivaRoleConstants.OPERATION_REPOSITORY_UPLOAD)).andReturn(true);
  httpAuthControl.replay();
  servletAuthControl.replay();
  InputStream is=getClass().getResourceAsStream("/artifact.jar");
  assertNotNull("artifact.jar inputstream",is);
  MockHttpServletRequest mockHttpServletRequest=new MockHttpServletRequest();
  mockHttpServletRequest.addHeader("User-Agent","foo");
  mockHttpServletRequest.setMethod("PUT");
  mockHttpServletRequest.setRequestURI("/repository/internal/path/to/artifact.jar");
  mockHttpServletRequest.setContent(IOUtils.toByteArray(is));
  mockHttpServletRequest.setContentType("application/octet-stream");
  MockHttpServletResponse mockHttpServletResponse=new MockHttpServletResponse();
  servlet.service(mockHttpServletRequest,mockHttpServletResponse);
  httpAuthControl.verify();
  servletAuthControl.verify();
  assertEquals(HttpServletResponse.SC_CREATED,mockHttpServletResponse.getStatus());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.webdav.RepositoryServletTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRepositoryAfterAdd() throws Exception {
  RepositoryServlet servlet=RepositoryServlet.class.cast(findServlet("repository"));
  assertNotNull(servlet);
  ArchivaConfiguration archivaConfiguration=servlet.getConfiguration();
  Configuration c=archivaConfiguration.getConfiguration();
  ManagedRepositoryConfiguration repo=new ManagedRepositoryConfiguration();
  repo.setId(NEW_REPOSITORY_ID);
  repo.setName(NEW_REPOSITORY_NAME);
  File repoRoot=new File("target/test-repository-root");
  if (!repoRoot.exists()) {
    repoRoot.mkdirs();
  }
  repo.setLocation(repoRoot.getAbsolutePath());
  c.addManagedRepository(repo);
  saveConfiguration(archivaConfiguration);
  ManagedRepository repository=servlet.getRepository(NEW_REPOSITORY_ID);
  assertNotNull(repository);
  assertEquals(NEW_REPOSITORY_NAME,repository.getName());
  assertRepositoryValid(servlet,REPOID_INTERNAL);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.webdav.util.MimeTypesTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMimeType() throws Exception {
  assertNotNull("MimeTypes should not be null.",mime);
  assertEquals("application/pdf",mime.getMimeType("big-book.pdf"));
  assertEquals("application/octet-stream",mime.getMimeType("BookMaker.class"));
  assertEquals("application/vnd.ms-powerpoint",mime.getMimeType("TypeSetting.ppt"));
  assertEquals("application/java-archive",mime.getMimeType("BookViewer.jar"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.archiva.xml.XMLReaderTest </h4><pre class="type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProxiedMetadataRead() throws XMLException {
  File xmlFile=getExampleXml("maven-metadata-codehaus-snapshots.xml");
  XMLReader reader=new XMLReader("metadata",xmlFile);
  reader.removeNamespaces();
  Element groupId=reader.getElement("//metadata/groupId");
  assertNotNull(groupId);
  assertEquals("org.codehaus.mojo",groupId.getTextTrim());
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
