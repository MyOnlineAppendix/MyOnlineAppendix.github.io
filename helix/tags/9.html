<h3><span class=" glyphicon glyphicon-tag"/>&nbspExecutionTester</h3><kbd>Executes methods or other tests from the same test unit</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.helix.TestRoutingTable </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testNullAndEmpty(){
  RoutingTableProvider routingTable=new RoutingTableProvider();
  routingTable.onExternalViewChange(null,changeContext);
  List<ExternalView> list=Collections.emptyList();
  routingTable.onExternalViewChange(list,changeContext);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.TestZKRoutingInfoProvider </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testInvocation() throws Exception {
  String[] dbNames=new String[3];
  for (int i=0; i < dbNames.length; i++) {
    dbNames[i]="DB_" + i;
  }
  String[] nodeNames=new String[6];
  for (int i=0; i < nodeNames.length; i++) {
    nodeNames[i]="LOCALHOST_100" + i;
  }
  int[] partitions=new int[dbNames.length];
  for (int i=0; i < partitions.length; i++) {
    partitions[i]=(i + 1) * 10;
  }
  int[] replicas=new int[dbNames.length];
  for (int i=0; i < replicas.length; i++) {
    replicas[i]=3;
  }
  Map<String,List<ZNRecord>> currentStates=createCurrentStates(dbNames,nodeNames,partitions,replicas);
  ExternalViewGenerator provider=new ExternalViewGenerator();
  List<ZNRecord> mockIdealStates=new ArrayList<ZNRecord>();
  for (  String dbName : dbNames) {
    ZNRecord rec=new ZNRecord(dbName);
    mockIdealStates.add(rec);
  }
  List<ZNRecord> externalView=provider.computeExternalView(currentStates,mockIdealStates);
  Map<String,Map<String,Set<String>>> routingMap=provider.getRouterMapFromExternalView(externalView);
  verify(currentStates,routingMap);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.TestZkClientWrapper </h4><pre class="type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test() void testSessioExpire() throws Exception {
  IZkStateListener listener=new IZkStateListener(){
    @Override public void handleStateChanged(    KeeperState state) throws Exception {
      System.out.println("In Old connection New state " + state);
    }
    @Override public void handleNewSession() throws Exception {
      System.out.println("In Old connection New session");
    }
  }
;
  _zkClient.subscribeStateChanges(listener);
  ZkConnection connection=((ZkConnection)_zkClient.getConnection());
  ZooKeeper zookeeper=connection.getZookeeper();
  System.out.println("old sessionId= " + zookeeper.getSessionId());
  Watcher watcher=new Watcher(){
    @Override public void process(    WatchedEvent event){
      System.out.println("In New connection In process event:" + event);
    }
  }
;
  ZooKeeper newZookeeper=new ZooKeeper(connection.getServers(),zookeeper.getSessionTimeout(),watcher,zookeeper.getSessionId(),zookeeper.getSessionPasswd());
  Thread.sleep(3000);
  System.out.println("New sessionId= " + newZookeeper.getSessionId());
  Thread.sleep(3000);
  newZookeeper.close();
  Thread.sleep(10000);
  connection=((ZkConnection)_zkClient.getConnection());
  zookeeper=connection.getZookeeper();
  System.out.println("After session expiry sessionId= " + zookeeper.getSessionId());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.controller.stages.TestStagesWithLogicalAccessors </h4><pre class="type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testClusterRebalancers(){
  String className=TestHelper.getTestClassName();
  String methodName=TestHelper.getTestMethodName();
  String testName=className + "_" + methodName;
  System.out.println("START " + testName + " at "+ new Date(System.currentTimeMillis()));
  ClusterAccessor clusterAccessor=new ClusterAccessor(_clusterId,_dataAccessor);
  Cluster cluster=clusterAccessor.readCluster();
  ResourceId resourceId=ResourceId.from("TestDB0");
  Resource resource=cluster.getResource(resourceId);
  ResourceCurrentState currentStateOutput=new ResourceCurrentState();
  ResourceAssignment semiAutoResult=resource.getIdealState().getRebalancerRef().getRebalancer().computeResourceMapping(resource.getIdealState(),resource.getRebalancerConfig(),null,cluster,currentStateOutput);
  verifySemiAutoRebalance(resource,semiAutoResult);
  System.out.println("END " + testName + " at "+ new Date(System.currentTimeMillis()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.controller.strategy.TestAutoRebalanceStrategy </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Sanity test for a basic Master-Slave model
 */
@Test public void simpleMasterSlaveTest(){
  final int NUM_ITERATIONS=10;
  final int NUM_PARTITIONS=10;
  final int NUM_LIVE_NODES=12;
  final int NUM_TOTAL_NODES=20;
  final int MAX_PER_NODE=5;
  final String[] STATE_NAMES={"MASTER","SLAVE"};
  final int[] STATE_COUNTS={1,2};
  runTest("BasicMasterSlave",NUM_ITERATIONS,NUM_PARTITIONS,NUM_LIVE_NODES,NUM_TOTAL_NODES,MAX_PER_NODE,STATE_NAMES,STATE_COUNTS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.controller.strategy.TestEspressoRelayStrategy </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testEspressoStorageClusterIdealState() throws Exception {
  testEspressoStorageClusterIdealState(15,9,3);
  testEspressoStorageClusterIdealState(15,6,3);
  testEspressoStorageClusterIdealState(15,6,2);
  testEspressoStorageClusterIdealState(6,4,2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.controller.strategy.TestNewAutoRebalanceStrategy </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Sanity test for a basic Master-Slave model
 */
@Test public void simpleMasterSlaveTest(){
  final int NUM_ITERATIONS=10;
  final int NUM_PARTITIONS=10;
  final int NUM_LIVE_NODES=12;
  final int NUM_TOTAL_NODES=20;
  final int MAX_PER_NODE=5;
  final String[] STATE_NAMES={"MASTER","SLAVE"};
  final int[] STATE_COUNTS={1,2};
  runTest("BasicMasterSlave",NUM_ITERATIONS,NUM_PARTITIONS,NUM_LIVE_NODES,NUM_TOTAL_NODES,MAX_PER_NODE,STATE_NAMES,STATE_COUNTS);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.integration.TestCMWithFailParticipant </h4><pre class="type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testCMWithFailParticipant() throws Exception {
  int numResources=1;
  int numPartitionsPerResource=10;
  int numInstance=5;
  int replica=3;
  String uniqClusterName="TestFail_" + "rg" + numResources + "_p"+ numPartitionsPerResource+ "_n"+ numInstance+ "_r"+ replica;
  System.out.println("START " + uniqClusterName + " at "+ new Date(System.currentTimeMillis()));
  TestDriver.setupCluster(uniqClusterName,_zkaddr,numResources,numPartitionsPerResource,numInstance,replica);
  for (int i=0; i < numInstance; i++) {
    TestDriver.startDummyParticipant(_zkaddr,uniqClusterName,i);
  }
  TestDriver.startController(_zkaddr,uniqClusterName);
  TestDriver.stopDummyParticipant(uniqClusterName,2000,0);
  TestDriver.verifyCluster(_zkaddr,uniqClusterName,3000,50 * 1000);
  TestDriver.stopCluster(uniqClusterName);
  System.out.println("END " + uniqClusterName + " at "+ new Date(System.currentTimeMillis()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.integration.TestCustomIdealState </h4><pre class="type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testDrop() throws Exception {
  int numResources=2;
  int numPartitionsPerResource=50;
  int numInstance=5;
  int replica=3;
  String uniqClusterName="TestCustomIS_" + "rg" + numResources + "_p"+ numPartitionsPerResource+ "_n"+ numInstance+ "_r"+ replica+ "_drop";
  System.out.println("START " + uniqClusterName + " at "+ new Date(System.currentTimeMillis()));
  TestDriver.setupClusterWithoutRebalance(uniqClusterName,_zkaddr,numResources,numPartitionsPerResource,numInstance,replica);
  for (int i=0; i < numInstance; i++) {
    TestDriver.startDummyParticipant(_zkaddr,uniqClusterName,i);
  }
  TestDriver.startController(_zkaddr,uniqClusterName);
  TestDriver.setIdealState(_zkaddr,uniqClusterName,2000,50);
  TestDriver.verifyCluster(_zkaddr,uniqClusterName,3000,50 * 1000);
  _setupTool.dropResourceFromCluster(uniqClusterName,"TestDB0");
  TestHelper.verifyWithTimeout("verifyEmptyCurStateAndExtView",30 * 1000,uniqClusterName,"TestDB0",TestHelper.<String>setOf("localhost_12918","localhost_12919","localhost_12920","localhost_12921","localhost_12922"),_zkaddr);
  TestDriver.stopCluster(uniqClusterName);
  System.out.println("STOP " + uniqClusterName + " at "+ new Date(System.currentTimeMillis()));
}

</code></pre>

<br>
<pre class="type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testBasic() throws Exception {
  int numResources=2;
  int numPartitionsPerResource=100;
  int numInstance=5;
  int replica=3;
  String uniqClusterName="TestCustomIS_" + "rg" + numResources + "_p"+ numPartitionsPerResource+ "_n"+ numInstance+ "_r"+ replica+ "_basic";
  System.out.println("START " + uniqClusterName + " at "+ new Date(System.currentTimeMillis()));
  TestDriver.setupClusterWithoutRebalance(uniqClusterName,_zkaddr,numResources,numPartitionsPerResource,numInstance,replica);
  for (int i=0; i < numInstance; i++) {
    TestDriver.startDummyParticipant(_zkaddr,uniqClusterName,i);
  }
  TestDriver.startController(_zkaddr,uniqClusterName);
  TestDriver.setIdealState(_zkaddr,uniqClusterName,2000,50);
  TestDriver.verifyCluster(_zkaddr,uniqClusterName,3000,50 * 1000);
  TestDriver.stopCluster(uniqClusterName);
  System.out.println("STOP " + uniqClusterName + " at "+ new Date(System.currentTimeMillis()));
}

</code></pre>

<br>
<pre class="type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNonAliveInstances() throws Exception {
  int numResources=2;
  int numPartitionsPerResource=50;
  int numInstance=5;
  int replica=3;
  String uniqClusterName="TestCustomIS_" + "rg" + numResources + "_p"+ numPartitionsPerResource+ "_n"+ numInstance+ "_r"+ replica+ "_nonalive";
  System.out.println("START " + uniqClusterName + " at "+ new Date(System.currentTimeMillis()));
  TestDriver.setupClusterWithoutRebalance(uniqClusterName,_zkaddr,numResources,numPartitionsPerResource,numInstance,replica);
  for (int i=0; i < numInstance / 2; i++) {
    TestDriver.startDummyParticipant(_zkaddr,uniqClusterName,i);
  }
  TestDriver.startController(_zkaddr,uniqClusterName);
  TestDriver.setIdealState(_zkaddr,uniqClusterName,0,100);
  Thread.sleep(1000);
  for (int i=numInstance / 2; i < numInstance; i++) {
    TestDriver.startDummyParticipant(_zkaddr,uniqClusterName,i);
  }
  TestDriver.verifyCluster(_zkaddr,uniqClusterName,4000,50 * 1000);
  TestDriver.stopCluster(uniqClusterName);
  System.out.println("STOP " + uniqClusterName + " at "+ new Date(System.currentTimeMillis()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.integration.TestHelixUsingDifferentParams </h4><pre class="type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testCMUsingDifferentParams() throws Exception {
  String testName=TestUtil.getTestName();
  System.out.println("START " + testName + " at "+ new Date(System.currentTimeMillis()));
  int numResourceArray[]=new int[]{1};
  int numPartitionsPerResourceArray[]=new int[]{10};
  int numInstances[]=new int[]{5};
  int replicas[]=new int[]{2};
  for (  int numResources : numResourceArray) {
    for (    int numPartitionsPerResource : numPartitionsPerResourceArray) {
      for (      int numInstance : numInstances) {
        for (        int replica : replicas) {
          String uniqClusterName="TestDiffParam_" + "rg" + numResources + "_p"+ numPartitionsPerResource+ "_n"+ numInstance+ "_r"+ replica;
          System.out.println("START " + uniqClusterName + " at "+ new Date(System.currentTimeMillis()));
          TestDriver.setupCluster(uniqClusterName,_zkaddr,numResources,numPartitionsPerResource,numInstance,replica);
          for (int i=0; i < numInstance; i++) {
            TestDriver.startDummyParticipant(_zkaddr,uniqClusterName,i);
          }
          TestDriver.startController(_zkaddr,uniqClusterName);
          TestDriver.verifyCluster(_zkaddr,uniqClusterName,1000,50 * 1000);
          TestDriver.stopCluster(uniqClusterName);
          System.out.println("END " + uniqClusterName + " at "+ new Date(System.currentTimeMillis()));
        }
      }
    }
  }
  System.out.println("END " + testName + " at "+ new Date(System.currentTimeMillis()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.integration.TestParticipantNameCollision </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testParticiptantNameCollision() throws Exception {
  logger.info("RUN TestParticipantNameCollision() at " + new Date(System.currentTimeMillis()));
  MockParticipant newParticipant=null;
  for (int i=0; i < 1; i++) {
    String instanceName="localhost_" + (START_PORT + i);
    try {
      newParticipant=new MockParticipant(_zkaddr,CLUSTER_NAME,instanceName);
      newParticipant.syncStart();
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
  Thread.sleep(30000);
  TestHelper.verifyWithTimeout("verifyNotConnected",30 * 1000,newParticipant);
  logger.info("STOP TestParticipantNameCollision() at " + new Date(System.currentTimeMillis()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.integration.TestPreferenceListAsQueue </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test ensures successful creation when the state model has OFFLINE --> deprioritized and
 * a partition-level constraint enforces parallelism
 * @throws Exception
 */
@Test public void testReprioritizedWithConstraint() throws Exception {
  _stateModel="OnlineOfflineReprioritized";
  _setupTool.addStateModelDef(_clusterName,_stateModel,createReprioritizedStateModelDef(_stateModel));
  ConstraintItemBuilder constraintItemBuilder=new ConstraintItemBuilder();
  constraintItemBuilder.addConstraintAttribute(ConstraintAttribute.MESSAGE_TYPE.toString(),"STATE_TRANSITION").addConstraintAttribute(ConstraintAttribute.PARTITION.toString(),".*").addConstraintAttribute(ConstraintAttribute.CONSTRAINT_VALUE.toString(),String.valueOf(PARALLELISM));
  _admin.setConstraint(_clusterName,ConstraintType.MESSAGE_CONSTRAINT,"constraint_1",constraintItemBuilder.build());
  runTest();
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * This test directly embeds the parallelism per partition directly into the upper bound for the
 * ONLINE state. This does not require the controller to support partition-level constraints.
 * @throws Exception
 */
@Test public void testParallelismInStateModel() throws Exception {
  _stateModel="OnlineOfflineBounded";
  _setupTool.addStateModelDef(_clusterName,_stateModel,createEnforcedParallelismStateModelDef(_stateModel,PARALLELISM));
  runTest();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.integration.task.TestTaskRebalancer </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRepeatedWorkflow() throws Exception {
  String workflowName="SomeWorkflow";
  Workflow flow=WorkflowGenerator.generateDefaultRepeatedJobWorkflowBuilder(workflowName).build();
  new TaskDriver(_manager).start(flow);
  TestUtil.pollForWorkflowState(_manager,workflowName,TaskState.COMPLETED);
  for (  String task : flow.getJobConfigs().keySet()) {
    TestUtil.pollForJobState(_manager,workflowName,task,TaskState.COMPLETED);
  }
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void basic() throws Exception {
  basic(100);
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void zeroTaskCompletionTime() throws Exception {
  basic(0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.integration.task.TestTaskRebalancerStopResume </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void stopAndResume() throws Exception {
  Map<String,String> commandConfig=ImmutableMap.of(TIMEOUT_CONFIG,String.valueOf(100));
  Workflow flow=WorkflowGenerator.generateDefaultSingleJobWorkflowBuilderWithExtraConfigs(JOB_RESOURCE,commandConfig).build();
  LOG.info("Starting flow " + flow.getName());
  _driver.start(flow);
  TestUtil.pollForWorkflowState(_manager,JOB_RESOURCE,TaskState.IN_PROGRESS);
  LOG.info("Pausing job");
  _driver.stop(JOB_RESOURCE);
  TestUtil.pollForWorkflowState(_manager,JOB_RESOURCE,TaskState.STOPPED);
  LOG.info("Resuming job");
  _driver.resume(JOB_RESOURCE);
  TestUtil.pollForWorkflowState(_manager,JOB_RESOURCE,TaskState.COMPLETED);
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void stopAndResumeWorkflow() throws Exception {
  String workflow="SomeWorkflow";
  Workflow flow=WorkflowGenerator.generateDefaultRepeatedJobWorkflowBuilder(workflow).build();
  LOG.info("Starting flow " + workflow);
  _driver.start(flow);
  TestUtil.pollForWorkflowState(_manager,workflow,TaskState.IN_PROGRESS);
  LOG.info("Pausing workflow");
  _driver.stop(workflow);
  TestUtil.pollForWorkflowState(_manager,workflow,TaskState.STOPPED);
  LOG.info("Resuming workflow");
  _driver.resume(workflow);
  TestUtil.pollForWorkflowState(_manager,workflow,TaskState.COMPLETED);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.manager.zk.TestZKUtil </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testNullChildren(){
  String path=PropertyPathConfig.getPath(PropertyType.CONFIGS,clusterName,ConfigScopeProperty.PARTICIPANT.toString(),"id6");
  ZKUtil.createChildren(_zkClient,path,(List<ZNRecord>)null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.participant.TestMultiClusterControllerStateModel </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testReset(){
  Message message=new Message(MessageType.STATE_TRANSITION,MessageId.from("0"));
  message.setPartitionId(PartitionId.from(clusterName));
  message.setTgtName("controller_0");
  try {
    stateModel.onBecomeLeaderFromStandby(message,new NotificationContext(null));
  }
 catch (  Exception e) {
    LOG.error("Exception becoming leader from standby",e);
  }
  stateModel.reset();
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testOnBecomeDroppedFromOffline(){
  stateModel.onBecomeDroppedFromOffline(null,null);
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testOnBecomeOfflineFromStandby(){
  Message message=new Message(MessageType.STATE_TRANSITION,MessageId.from("0"));
  message.setPartitionId(PartitionId.from(clusterName));
  message.setTgtName("controller_0");
  stateModel.onBecomeOfflineFromStandby(message,null);
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testRollbackOnError(){
  Message message=new Message(MessageType.STATE_TRANSITION,MessageId.from("0"));
  message.setPartitionId(PartitionId.from(clusterName));
  message.setTgtName("controller_0");
  try {
    stateModel.onBecomeLeaderFromStandby(message,new NotificationContext(null));
  }
 catch (  Exception e) {
    LOG.error("Exception becoming leader from standby",e);
  }
  stateModel.rollbackOnError(message,new NotificationContext(null),null);
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testOnBecomeOfflineFromDropped(){
  stateModel.onBecomeOfflineFromDropped(null,null);
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testOnBecomeLeaderFromStandby(){
  Message message=new Message(MessageType.STATE_TRANSITION,MessageId.from("0"));
  message.setPartitionId(PartitionId.from(clusterName));
  message.setTgtName("controller_0");
  try {
    stateModel.onBecomeLeaderFromStandby(message,new NotificationContext(null));
  }
 catch (  Exception e) {
    LOG.error("Exception becoming leader from standby",e);
  }
  stateModel.onBecomeStandbyFromLeader(message,new NotificationContext(null));
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testOnBecomeStandbyFromLeader(){
  Message message=new Message(MessageType.STATE_TRANSITION,MessageId.from("0"));
  message.setPartitionId(PartitionId.from(clusterName));
  message.setTgtName("controller_0");
  stateModel.onBecomeStandbyFromLeader(message,new NotificationContext(null));
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testOnBecomeStandbyFromOffline(){
  stateModel.onBecomeStandbyFromOffline(null,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.participant.TestMultiClusterControllerStateModelFactory </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void test(){
  MultiClusterControllerTransitionHandlerFactory factory=new MultiClusterControllerTransitionHandlerFactory("localhost:2181");
  MultiClusterControllerTransitionHandler stateModel=factory.createStateTransitionHandler(ResourceId.from("name"),PartitionId.from("key"));
  stateModel.onBecomeStandbyFromOffline(null,null);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.tools.TestClusterSetup </h4><pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testAddResource() throws Exception {
  try {
    _setupTool.addResourceToCluster(CLUSTER_NAME,TEST_DB,16,STATE_MODEL);
  }
 catch (  Exception e) {
  }
  verifyResource(_zkclient,CLUSTER_NAME,TEST_DB,true);
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testParseCommandLinesArgs() throws Exception {
  _zkclient.deleteRecursive("/" + CLUSTER_NAME);
  ClusterSetup.processCommandLineArgs(createArgs("-zkSvr " + _zkaddr + " --addCluster "+ CLUSTER_NAME));
  _zkclient.deleteRecursive("/" + CLUSTER_NAME);
  _setupTool.setupTestCluster(CLUSTER_NAME);
  ClusterSetup.processCommandLineArgs(createArgs("-zkSvr " + _zkaddr + " --addNode "+ CLUSTER_NAME+ " "+ TEST_NODE));
  verifyInstance(_zkclient,CLUSTER_NAME,TEST_NODE,true);
  try {
    ClusterSetup.processCommandLineArgs(createArgs("-zkSvr " + _zkaddr + " --addResource "+ CLUSTER_NAME+ " "+ TEST_DB+ " 4 "+ STATE_MODEL));
  }
 catch (  Exception e) {
  }
  verifyResource(_zkclient,CLUSTER_NAME,TEST_DB,true);
  ClusterSetup.processCommandLineArgs(createArgs("-zkSvr " + _zkaddr + " --enableInstance "+ CLUSTER_NAME+ " "+ TEST_NODE+ " true"));
  verifyEnabled(_zkclient,CLUSTER_NAME,TEST_NODE,true);
  ClusterSetup.processCommandLineArgs(createArgs("-zkSvr " + _zkaddr + " --enableInstance "+ CLUSTER_NAME+ " "+ TEST_NODE+ " false"));
  verifyEnabled(_zkclient,CLUSTER_NAME,TEST_NODE,false);
  ClusterSetup.processCommandLineArgs(createArgs("-zkSvr " + _zkaddr + " --dropNode "+ CLUSTER_NAME+ " "+ TEST_NODE));
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testRemoveResource() throws Exception {
  _setupTool.setupTestCluster(CLUSTER_NAME);
  verifyResource(_zkclient,CLUSTER_NAME,TEST_DB,true);
  _setupTool.dropResourceFromCluster(CLUSTER_NAME,TEST_DB);
  verifyResource(_zkclient,CLUSTER_NAME,TEST_DB,false);
}

</code></pre>

<br>
<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test() public void testRebalanceCluster() throws Exception {
  _setupTool.setupTestCluster(CLUSTER_NAME);
  testAddResource();
  _setupTool.rebalanceStorageCluster(CLUSTER_NAME,TEST_DB,4);
  verifyReplication(_zkclient,CLUSTER_NAME,TEST_DB,4);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.tools.TestHelixAdminCli </h4><pre class="type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRebalanceResource() throws Exception {
  String className=TestHelper.getTestClassName();
  String methodName=TestHelper.getTestMethodName();
  String clusterName=className + "_" + methodName;
  System.out.println("START " + clusterName + " at "+ new Date(System.currentTimeMillis()));
  String command="-zkSvr localhost:2183 -addCluster " + clusterName;
  ClusterSetup.processCommandLineArgs(command.split("\\s+"));
  command="-zkSvr localhost:2183 -addResource " + clusterName + " db_11 12 MasterSlave";
  ClusterSetup.processCommandLineArgs(command.split("\\s+"));
  for (int i=0; i < 6; i++) {
    command="-zkSvr localhost:2183 -addNode " + clusterName + " localhost:123"+ i;
    ClusterSetup.processCommandLineArgs(command.split("\\s+"));
  }
  command="-zkSvr localhost:2183 -rebalance " + clusterName + " db_11 3";
  ClusterSetup.processCommandLineArgs(command.split("\\s+"));
  command="-zkSvr localhost:2183 -dropResource " + clusterName + " db_11 ";
  ClusterSetup.processCommandLineArgs(command.split("\\s+"));
  command="-zkSvr localhost:2183 -addResource " + clusterName + " db_11 48 MasterSlave";
  ClusterSetup.processCommandLineArgs(command.split("\\s+"));
  command="-zkSvr localhost:2183 -rebalance " + clusterName + " db_11 3";
  ClusterSetup.processCommandLineArgs(command.split("\\s+"));
  command="-zkSvr localhost:2183 -rebalance " + clusterName + " db_11 2 -key alias";
  ClusterSetup.processCommandLineArgs(command.split("\\s+"));
  System.out.println("END " + clusterName + " at "+ new Date(System.currentTimeMillis()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.helix.webapp.TestClusterManagementWebapp </h4><pre class="type-13 type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Invokes logging operations">Logger</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Invokes logging operations
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testInvocation() throws Exception {
  verifyAddCluster();
  verifyAddStateModel();
  verifyAddHostedEntity();
  verifyAddInstance();
  verifyRebalance();
  verifyEnableInstance();
  verifyAlterIdealState();
  verifyConfigAccessor();
  verifyEnableCluster();
  System.out.println("Test passed!!");
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
