<h3 style="margin:0px">Class: org.apache.commons.configuration2.tree.TestInMemoryNodeModel (39 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(27)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(16)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(14)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(12)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(12)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies whether two objects/variables are the same"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >IdentityVerifier&nbsp;(11)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(8)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(8)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >ExceptionVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="12"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('12')" data-toggle="tooltip" title="Verifies assertions in iterations"><kbd id="tag-12"class="label-info"style="display: inline-block;font-size:7pt" >IterativeVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
/** 
 * Tests a clearTree() operation which should yield an empty tree structure.
 */
@Test public void testClearTreeResultIsEmpty(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  ImmutableNode child=new ImmutableNode.Builder().name("child").value("test").create();
  ImmutableNode root=new ImmutableNode.Builder(1).addChild(child).create();
  InMemoryNodeModel model=new InMemoryNodeModel(root);
  EasyMock.expect(resolver.resolveKey(root,KEY,model.getNodeHandler())).andReturn(Collections.singletonList(QueryResult.createNodeResult(child)));
  EasyMock.replay(resolver);
  model.clearTree(KEY,resolver);
  assertFalse("Root node still defined",model.getNodeHandler().isDefined(model.getRootNode()));
}

</code></pre>

<pre class="type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
/** 
 * Tests whether clearTree() handles the root node in a special way.
 */
@Test public void testClearTreeRootNode(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  List<QueryResult<ImmutableNode>> results=new ArrayList<QueryResult<ImmutableNode>>(2);
  results.add(QueryResult.createNodeResult(nodeForKey(model,NodeStructureHelper.author(0))));
  results.add(QueryResult.createNodeResult(ROOT_AUTHORS_TREE));
  EasyMock.expect(resolver.resolveKey(ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(results);
  EasyMock.replay(resolver);
  model.clearTree(KEY,resolver);
  assertFalse("Got still data",model.getNodeHandler().isDefined(model.getRootNode()));
}

</code></pre>

<pre class="type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
/** 
 * Tests an addProperty() operation if no values are provided.
 */
@Test public void testAddPropertyNoValues(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  EasyMock.replay(resolver);
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  model.addProperty(KEY,Collections.emptySet(),resolver);
  assertSame("Root node was changed",ROOT_AUTHORS_TREE,model.getRootNode());
}

</code></pre>

<pre class="type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
/** 
 * Tests a set property operation which is a no-op.
 */
@Test public void testSetPropertyNoChanges(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_PERSONAE_TREE);
  EasyMock.expect(resolver.resolveUpdateKey(NodeStructureHelper.ROOT_PERSONAE_TREE,KEY,this,model.getNodeHandler())).andReturn(new NodeUpdateData<ImmutableNode>(null,null,null,null));
  EasyMock.replay(resolver);
  model.setProperty(KEY,this,resolver);
  assertSame("Model was changed",NodeStructureHelper.ROOT_PERSONAE_TREE,model.getRootNode());
}

</code></pre>

<pre class="type-2 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests clearProperty() for a non existing property.
 */
@Test public void testClearPropertyNonExisting(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_PERSONAE_TREE);
  EasyMock.expect(resolver.resolveKey(model.getRootNode(),KEY,model.getNodeHandler())).andReturn(Collections.<QueryResult<ImmutableNode>>emptyList());
  EasyMock.replay(resolver);
  TreeData treeDataOld=model.getTreeData();
  model.clearProperty(KEY,resolver);
  assertNotNull("No root node",model.getNodeHandler().getRootNode());
  assertSame("Data was changed",treeDataOld,model.getTreeData());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
"></span><br>
/** 
 * Tests whether the model's data can be represented as immutable node
 * objects (which is trivial in this case).
 */
@Test public void testGetInMemoryRepresentation(){
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_AUTHORS_TREE);
  assertSame("Wrong in-memory representation",NodeStructureHelper.ROOT_AUTHORS_TREE,model.getInMemoryRepresentation());
}

</code></pre>

<pre class="type-11 type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests whether an attribute can be added if there are some path nodes.
 */
@Test public void testAddPropertyAttributeWithPathNodes(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  NodeAddData<ImmutableNode> addData=new NodeAddData<ImmutableNode>(nodeForKey(ROOT_AUTHORS_TREE,"Homer/Ilias"),"number",true,Arrays.asList("scenes","scene"));
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  EasyMock.expect(resolver.resolveAddKey(ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(addData);
  EasyMock.replay(resolver);
  model.addProperty(KEY,Collections.singleton(1),resolver);
  ImmutableNode node=nodeForKey(model,"Homer/Ilias/scenes/scene");
  assertEquals("Attribute not set",1,node.getAttributes().get("number"));
}

</code></pre>

<pre class="type-11 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
/** 
 * Tests whether a property value stored as an attribute can be cleared.
 */
@Test public void testClearPropertyAttribute(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_PERSONAE_TREE);
  final String nodeKey="Prospero/The Tempest/" + NodeStructureHelper.ELEM_ORG_VALUE;
  EasyMock.expect(resolver.resolveKey(model.getRootNode(),KEY,model.getNodeHandler())).andReturn(Collections.singletonList(QueryResult.createAttributeResult(nodeForKey(model,nodeKey),NodeStructureHelper.ATTR_TESTED)));
  EasyMock.replay(resolver);
  model.clearProperty(KEY,resolver);
  ImmutableNode node=nodeForKey(model,nodeKey);
  assertTrue("Attribute not removed",node.getAttributes().isEmpty());
}

</code></pre>

<pre class="type-11 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Tests whether a property value can be cleared on a node.
 */
@Test public void testClearPropertyNode(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_PERSONAE_TREE);
  final String nodeKey="Ariel/The Tempest/" + NodeStructureHelper.ELEM_ORG_VALUE;
  EasyMock.expect(resolver.resolveKey(model.getRootNode(),KEY,model.getNodeHandler())).andReturn(Collections.singletonList(QueryResult.createNodeResult(nodeForKey(model,nodeKey))));
  EasyMock.replay(resolver);
  model.clearProperty(KEY,resolver);
  ImmutableNode node=nodeForKey(model,nodeKey);
  assertNull("Value not cleared",node.getValue());
}

</code></pre>

<pre class="type-11 type-2 type-5 type-6 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests whether a property can be added to the node model if there are some
 * additional path nodes to be created.
 */
@Test public void testAddPropertyWithPathNodes(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  NodeAddData<ImmutableNode> addData=new NodeAddData<ImmutableNode>(nodeForKey(ROOT_AUTHORS_TREE,"Homer/Ilias"),"location",false,Collections.singleton("locations"));
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  EasyMock.expect(resolver.resolveAddKey(ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(addData);
  EasyMock.replay(resolver);
  String[] locations={"Troja","Beach","Olympos"};
  model.addProperty(KEY,Arrays.asList(locations),resolver);
  ImmutableNode nodeLocs=nodeForKey(model,"Homer/Ilias/locations");
  assertEquals("Wrong number of children",locations.length,nodeLocs.getChildren().size());
  int idx=0;
  for (  ImmutableNode c : nodeLocs.getChildren()) {
    assertEquals("Wrong node name","location",c.getNodeName());
    assertEquals("Wrong value",locations[idx],c.getValue());
    assertTrue("Got children",c.getChildren().isEmpty());
    assertTrue("Got attributes",c.getAttributes().isEmpty());
    idx++;
  }
  assertNotNull("Could not find other nodes",nodeForKey(model,"Homer/Ilias/Hektor"));
}

</code></pre>

<pre class="type-11 type-2 type-6 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests whether setProperty() can handle newly added values.
 */
@Test public void testSetPropertyNewValues(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  NodeAddData<ImmutableNode> addData=new NodeAddData<ImmutableNode>(nodeForKey(ROOT_AUTHORS_TREE,"Homer"),"work",false,null);
  NodeUpdateData<ImmutableNode> updateData=new NodeUpdateData<ImmutableNode>(null,Collections.singleton("Odyssee"),null,KEY);
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  EasyMock.expect(resolver.resolveUpdateKey(ROOT_AUTHORS_TREE,KEY,this,model.getNodeHandler())).andReturn(updateData);
  EasyMock.expect(resolver.resolveAddKey(ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(addData);
  EasyMock.replay(resolver);
  model.setProperty(KEY,this,resolver);
  ImmutableNode node=nodeForKey(model,"Homer/work");
  assertEquals("Wrong node value","Odyssee",node.getValue());
  assertNotNull("Could not find other nodes",nodeForKey(model,"Homer/Ilias/Hektor"));
}

</code></pre>

<pre class="type-11 type-12 type-2 type-5 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests whether concurrent updates of the model are handled correctly. This
 * test adds a number of authors in parallel. Then it is checked whether all
 * authors have been added correctly.
 */
@Test public void testConcurrentUpdate() throws InterruptedException {
  final NodeKeyResolver<ImmutableNode> resolver=createResolver();
  final InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_AUTHORS_TREE);
  EasyMock.expect(resolver.resolveAddKey(EasyMock.anyObject(ImmutableNode.class),EasyMock.eq(KEY),EasyMock.anyObject(TreeData.class))).andAnswer(new IAnswer<NodeAddData<ImmutableNode>>(){
    @Override public NodeAddData<ImmutableNode> answer() throws Throwable {
      ImmutableNode addParent=(ImmutableNode)EasyMock.getCurrentArguments()[0];
      return new NodeAddData<ImmutableNode>(addParent,"name",false,Collections.singleton("author"));
    }
  }
).anyTimes();
  EasyMock.replay(resolver);
  final CountDownLatch latch=new CountDownLatch(1);
  final String authorPrefix="newAuthor";
  final int threadCount=32;
  Thread[] threads=new Thread[threadCount];
  for (int i=0; i < threadCount; i++) {
    final String authorName=authorPrefix + i;
    threads[i]=new Thread(){
      @Override public void run(){
        try {
          latch.await();
          model.addProperty(KEY,Collections.singleton(authorName),resolver);
        }
 catch (        InterruptedException iex) {
        }
      }
    }
;
    threads[i].start();
  }
  latch.countDown();
  for (  Thread t : threads) {
    t.join();
  }
  Pattern patternAuthorName=Pattern.compile(Pattern.quote(authorPrefix) + "(\\d+)");
  Set<Integer> indices=new HashSet<Integer>();
  for (int i=0; i < threadCount; i++) {
    ImmutableNode node=nodeForKey(model,"author(" + i + ")/name");
    Matcher m=patternAuthorName.matcher(String.valueOf(node.getValue()));
    assertTrue("Wrong value: " + node.getValue(),m.matches());
    int idx=Integer.parseInt(m.group(1));
    assertTrue("Invalid index: " + idx,idx >= 0 && idx < threadCount);
    indices.add(idx);
  }
  assertEquals("Not all authors were created",threadCount,indices.size());
}

</code></pre>

<pre class="type-11 type-2 type-7 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests whether a new root node can be set.
 */
@Test public void testSetRoot(){
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_PERSONAE_TREE);
  model.setRootNode(NodeStructureHelper.ROOT_AUTHORS_TREE);
  assertSame("Root node not changed",NodeStructureHelper.ROOT_AUTHORS_TREE,model.getRootNode());
  ImmutableNode node=nodeForKey(model,"Homer/Ilias");
  assertEquals("Wrong parent mapping",nodeForKey(model,"Homer"),model.getNodeHandler().getParent(node));
}

</code></pre>

<pre class="type-11 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
/** 
 * Tests whether new nodes can be added to an existing node in the model.
 */
@Test public void testAddNodesToExistingNode(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_AUTHORS_TREE);
  final String key=NodeStructureHelper.author(0);
  ImmutableNode newWork1=new ImmutableNode.Builder().name("King Lear").create();
  ImmutableNode newWork2=new ImmutableNode.Builder().name("The Taming of the Shrew").create();
  EasyMock.expect(resolver.resolveKey(NodeStructureHelper.ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(Collections.singletonList(QueryResult.createNodeResult(nodeForKey(model,key))));
  EasyMock.replay(resolver);
  model.addNodes(KEY,Arrays.asList(newWork1,newWork2),resolver);
  ImmutableNode node=nodeForKey(model,key);
  int size=node.getChildren().size();
  assertSame("New child 1 not added",newWork1,node.getChildren().get(size - 2));
  assertSame("New child 2 not added",newWork2,node.getChildren().get(size - 1));
}

</code></pre>

<pre class="type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tries to add new nodes to an non-existing key pointing to an attribute.
 */
@Test(expected=IllegalArgumentException.class) public void testAddNodesToNewAttributeKey(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_AUTHORS_TREE);
  EasyMock.expect(resolver.resolveKey(NodeStructureHelper.ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(Collections.<QueryResult<ImmutableNode>>emptyList());
  EasyMock.expect(resolver.resolveAddKey(NodeStructureHelper.ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(new NodeAddData<ImmutableNode>(NodeStructureHelper.ROOT_AUTHORS_TREE,"test",true,null));
  EasyMock.replay(resolver);
  ImmutableNode newNode=new ImmutableNode.Builder().name("newNode").create();
  model.addNodes(KEY,Collections.singleton(newNode),resolver);
}

</code></pre>

<pre class="type-11 type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests whether an attribute property can be added if there are no path
 * nodes.
 */
@Test public void testAddPropertyAttributeNoPathNodes(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  NodeAddData<ImmutableNode> addData=new NodeAddData<ImmutableNode>(nodeForKey(ROOT_AUTHORS_TREE,"Shakespeare/The Tempest"),"year",true,null);
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  EasyMock.expect(resolver.resolveAddKey(ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(addData);
  EasyMock.replay(resolver);
  model.addProperty(KEY,Collections.singleton(1611),resolver);
  ImmutableNode node=nodeForKey(model,"Shakespeare/The Tempest");
  assertEquals("Attribute not set",1611,node.getAttributes().get("year"));
}

</code></pre>

<pre class="type-11 type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests whether setProperty() can handle changes in node values.
 */
@Test public void testSetPropertyChangedValues(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_PERSONAE_TREE);
  final String nodeKey="Ariel/The Tempest/" + NodeStructureHelper.ELEM_ORG_VALUE;
  Map<QueryResult<ImmutableNode>,Object> changedValues=new HashMap<QueryResult<ImmutableNode>,Object>();
  final String newValue="of course";
  ImmutableNode changedNode=nodeForKey(model,nodeKey);
  changedValues.put(QueryResult.createAttributeResult(changedNode,NodeStructureHelper.ATTR_TESTED),newValue);
  changedValues.put(QueryResult.createNodeResult(changedNode),newValue);
  NodeUpdateData<ImmutableNode> updateData=new NodeUpdateData<ImmutableNode>(changedValues,null,null,null);
  EasyMock.expect(resolver.resolveUpdateKey(NodeStructureHelper.ROOT_PERSONAE_TREE,KEY,this,model.getNodeHandler())).andReturn(updateData);
  EasyMock.replay(resolver);
  model.setProperty(KEY,this,resolver);
  ImmutableNode node=nodeForKey(model,nodeKey);
  assertEquals("Attribute value not changed",newValue,node.getAttributes().get(NodeStructureHelper.ATTR_TESTED));
  assertEquals("Node value not changed",newValue,node.getValue());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
"></span><br>
/** 
 * Tests whether the correct node handler is returned.
 */
@Test public void testGetNodeHandler(){
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_PERSONAE_TREE);
  assertSame("Wrong node handler",model.getTreeData(),model.getNodeHandler());
}

</code></pre>

<pre class="type-11 type-2 type-5 type-7 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests whether the replacement mapping is automatically compacted if it
 * gets too large.
 */
@Test public void testCompactReplacementMapping(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  final InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  final int numberOfOperations=200;
  final String key="Homer/Ilias";
  for (int i=0; i < numberOfOperations; i++) {
    final int index=i;
    EasyMock.expect(resolver.resolveAddKey(EasyMock.anyObject(ImmutableNode.class),EasyMock.eq(KEY),EasyMock.anyObject(TreeData.class))).andAnswer(new IAnswer<NodeAddData<ImmutableNode>>(){
      @Override public NodeAddData<ImmutableNode> answer() throws Throwable {
        assertSame("Wrong root node",model.getRootNode(),EasyMock.getCurrentArguments()[0]);
        ImmutableNode addParent=nodeForKey(model,key);
        return new NodeAddData<ImmutableNode>(addParent,"Warrior" + index,false,null);
      }
    }
);
  }
  EasyMock.replay(resolver);
  for (int i=0; i < numberOfOperations; i++) {
    model.addProperty(KEY,Collections.singleton(i),resolver);
  }
  ImmutableNode orgNode=nodeForKey(ROOT_AUTHORS_TREE,key);
  ImmutableNode changedNode=nodeForKey(model,key);
  assertEquals("Wrong number of children",orgNode.getChildren().size() + numberOfOperations,changedNode.getChildren().size());
  Map<ImmutableNode,ImmutableNode> replacementMapping=model.getTreeData().copyReplacementMapping();
  assertTrue("Replacement mapping too big: " + replacementMapping.size(),replacementMapping.size() < numberOfOperations);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * Tests whether both nodes and attributes can be removed by a clearTree()
 * operation. We remove all attributes and children from a node. The node
 * becomes undefined and should be removed.
 */
@Test public void testClearTreeNodesAndAttributes(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_PERSONAE_TREE);
  final String nodeName="Puck";
  ImmutableNode orgNode=nodeForKey(model,nodeName);
  List<QueryResult<ImmutableNode>> results=new ArrayList<QueryResult<ImmutableNode>>(2);
  results.add(QueryResult.createAttributeResult(orgNode,NodeStructureHelper.ATTR_AUTHOR));
  results.add(QueryResult.createNodeResult(orgNode.getChildren().get(0)));
  EasyMock.expect(resolver.resolveKey(ROOT_PERSONAE_TREE,KEY,model.getNodeHandler())).andReturn(results);
  EasyMock.replay(resolver);
  model.clearTree(KEY,resolver);
  try {
    nodeForKey(model,nodeName);
    fail("Node still present!");
  }
 catch (  NoSuchElementException nex) {
  }
}

</code></pre>

<pre class="type-2 type-5 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests whether an undefined default root node is created if none is
 * specified.
 */
@Test public void testInitDefaultRoot(){
  InMemoryNodeModel model=new InMemoryNodeModel();
  ImmutableNode root=model.getRootNode();
  assertNull("Got a name",root.getNodeName());
  assertNull("Got a value",root.getValue());
  assertTrue("Got children",root.getChildren().isEmpty());
  assertTrue("Got attributes",root.getAttributes().isEmpty());
}

</code></pre>

<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests whether the children of removed nodes are also removed from the
 * parent mapping.
 */
@Test public void testClearTreeChildrenRemovedFromParentMapping(){
  String path="Homer/Ilias";
  checkClearTreeUpdatedParentMapping(path,nodeForKey(ROOT_AUTHORS_TREE,path + "/Achilles"));
}

</code></pre>

<pre class="type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
/** 
 * Tests whether the root node can be set to null.
 */
@Test public void testSetRootNull(){
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_PERSONAE_TREE);
  model.setRootNode(null);
  ImmutableNode rootNode=model.getRootNode();
  assertTrue("Got children",rootNode.getChildren().isEmpty());
}

</code></pre>

<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests whether the parent node references are updated when nodes are
 * added.
 */
@Test public void testAddPropertyUpdateParentReferences(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  NodeAddData<ImmutableNode> addData=new NodeAddData<ImmutableNode>(nodeForKey(ROOT_AUTHORS_TREE,"Homer/Ilias"),"location",false,Collections.singleton("locations"));
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  EasyMock.expect(resolver.resolveAddKey(ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(addData);
  EasyMock.replay(resolver);
  String[] locations={"Troja","Beach","Olympos"};
  model.addProperty(KEY,Arrays.asList(locations),resolver);
  String[] path={"Homer","Ilias","locations"};
  ImmutableNode node=nodeForKey(model,nodePathWithEndNode("location(1)",path));
  checkPathToRoot(model,node,path);
}

</code></pre>

<pre class="type-11 type-2 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
/** 
 * Tests whether setProperty() can handle nodes to be cleared.
 */
@Test public void testSetPropertyClearValues(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_PERSONAE_TREE);
  final String nodeKey="Ariel/The Tempest/" + NodeStructureHelper.ELEM_ORG_VALUE;
  NodeUpdateData<ImmutableNode> updateData=new NodeUpdateData<ImmutableNode>(null,null,Collections.singletonList(QueryResult.createNodeResult(nodeForKey(model,nodeKey))),null);
  EasyMock.expect(resolver.resolveUpdateKey(NodeStructureHelper.ROOT_PERSONAE_TREE,KEY,this,model.getNodeHandler())).andReturn(updateData);
  EasyMock.replay(resolver);
  model.setProperty(KEY,this,resolver);
  ImmutableNode node=nodeForKey(model,nodeKey);
  assertNull("Value not cleared",node.getValue());
}

</code></pre>

<pre class="type-10 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tries to add new nodes if the key references an attribute.
 */
@Test(expected=IllegalArgumentException.class) public void testAddNodesToAttribute(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_AUTHORS_TREE);
  EasyMock.expect(resolver.resolveKey(NodeStructureHelper.ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(Collections.singletonList(QueryResult.createAttributeResult(nodeForKey(model,NodeStructureHelper.author(1)),"test")));
  EasyMock.replay(resolver);
  ImmutableNode newNode=new ImmutableNode.Builder().name("newNode").create();
  model.addNodes(KEY,Collections.singleton(newNode),resolver);
}

</code></pre>

<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests an add nodes operation if a null collection is passed in.
 */
@Test public void testAddNodesNullCollection(){
  checkAddNodesNoNodes(null);
}

</code></pre>

<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests whether a removed node can no longer be passed to getParent().
 */
@Test public void testClearTreeNodeRemovedFromParentMapping(){
  String path="Homer/Ilias/Achilles";
  checkClearTreeUpdatedParentMapping(path,nodeForKey(ROOT_AUTHORS_TREE,path));
}

</code></pre>

<pre class="type-11 type-2 type-5 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests whether a clearTree() operation can be performed if only nodes are
 * involved.
 */
@Test public void testClearTreeNodes(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  QueryResult<ImmutableNode> result=QueryResult.createNodeResult(nodeForKey(model,"Homer/Ilias/Achilles"));
  EasyMock.expect(resolver.resolveKey(ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(Collections.singletonList(result));
  EasyMock.replay(resolver);
  List<QueryResult<ImmutableNode>> removed=model.clearTree(KEY,resolver);
  ImmutableNode node=nodeForKey(model,"Homer/Ilias");
  assertEquals("Wrong number of children",2,node.getChildren().size());
  for (  ImmutableNode c : node.getChildren()) {
    assertNotEquals("Node still found",result.getNode().getNodeName(),c.getNodeName());
  }
  assertEquals("Wrong number of removed elements",1,removed.size());
  assertTrue("Wrong removed element",removed.contains(result));
}

</code></pre>

<pre class="type-11 type-2 type-6 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests whether a property can be added if there are no intermediate path
 * nodes.
 */
@Test public void testAddPropertyNoPathNodes(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  NodeAddData<ImmutableNode> addData=new NodeAddData<ImmutableNode>(nodeForKey(ROOT_AUTHORS_TREE,"Homer"),"work",false,null);
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  EasyMock.expect(resolver.resolveAddKey(ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(addData);
  EasyMock.replay(resolver);
  model.addProperty(KEY,Collections.singleton("Odyssee"),resolver);
  ImmutableNode node=nodeForKey(model,"Homer/work");
  assertEquals("Wrong node value","Odyssee",node.getValue());
  assertNotNull("Could not find other nodes",nodeForKey(model,"Homer/Ilias/Hektor"));
}

</code></pre>

<pre class="type-2 type-5 type-7 type-6 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests clearTree() if the passed in key does not exist.
 */
@Test public void testClearTreeNonExistingKey(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_PERSONAE_TREE);
  EasyMock.expect(resolver.resolveKey(ROOT_PERSONAE_TREE,KEY,model.getNodeHandler())).andReturn(Collections.<QueryResult<ImmutableNode>>emptyList());
  EasyMock.replay(resolver);
  TreeData treeDataOld=model.getTreeData();
  assertTrue("Elements removed",model.clearTree(KEY,resolver).isEmpty());
  assertNotNull("No root node",model.getNodeHandler().getRootNode());
  assertSame("Data was changed",treeDataOld,model.getTreeData());
}

</code></pre>

<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests an add nodes operation if an empty collection is passed in.
 */
@Test public void testAddNodesEmptyCollection(){
  checkAddNodesNoNodes(Collections.<ImmutableNode>emptySet());
}

</code></pre>

<pre class="type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
"></span><br>
/** 
 * Tests whether nodes can be added to a node which has to be created.
 */
@Test public void testAddNodesToNewNode(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(NodeStructureHelper.ROOT_AUTHORS_TREE);
  final String newAuthor="Goethe";
  final String newWork="Faust";
  final String newPersona="Mephisto";
  EasyMock.expect(resolver.resolveKey(NodeStructureHelper.ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(new ArrayList<QueryResult<ImmutableNode>>(0));
  EasyMock.expect(resolver.resolveAddKey(NodeStructureHelper.ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(new NodeAddData<ImmutableNode>(NodeStructureHelper.ROOT_AUTHORS_TREE,newWork,false,Arrays.asList(newAuthor)));
  EasyMock.replay(resolver);
  ImmutableNode personaNode=new ImmutableNode.Builder().name(newPersona).create();
  model.addNodes(KEY,Collections.singleton(personaNode),resolver);
  assertSame("Wrong added node",personaNode,nodeForKey(model,newAuthor + "/" + newWork+ "/"+ newPersona));
}

</code></pre>

<pre class="type-11 type-2 type-5 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests whether attributes can be cleared with clearTree().
 */
@Test public void testClearTreeAttribute(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_PERSONAE_TREE);
  final String nodeName="Puck";
  QueryResult<ImmutableNode> result=QueryResult.createAttributeResult(nodeForKey(model,nodeName),NodeStructureHelper.ATTR_AUTHOR);
  EasyMock.expect(resolver.resolveKey(ROOT_PERSONAE_TREE,KEY,model.getNodeHandler())).andReturn(Collections.singletonList(result));
  EasyMock.replay(resolver);
  List<QueryResult<ImmutableNode>> removed=model.clearTree(KEY,resolver);
  ImmutableNode node=nodeForKey(model,nodeName);
  assertTrue("Got still attributes",node.getAttributes().isEmpty());
  assertEquals("Wrong number of removed elements",1,removed.size());
  assertTrue("Wrong removed element",removed.contains(result));
}

</code></pre>

<pre class="type-11 type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests the special case that an attribute is added with a single path
 * node.
 */
@Test public void testAddPropertyAttributeWithSinglePathNode(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  NodeAddData<ImmutableNode> addData=new NodeAddData<ImmutableNode>(nodeForKey(ROOT_AUTHORS_TREE,NodeStructureHelper.author(0)),"year",true,Arrays.asList("dateOfBirth"));
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  EasyMock.expect(resolver.resolveAddKey(ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(addData);
  EasyMock.replay(resolver);
  final Integer year=1564;
  model.addProperty(KEY,Collections.singleton(year),resolver);
  ImmutableNode node=nodeForKey(model,"Shakespeare/dateOfBirth");
  assertEquals("Attribute not set",year,node.getAttributes().get("year"));
}

</code></pre>

<pre class="type-2 type-5 type-1 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests whether the whole node structure can be cleared.
 */
@Test public void testClear(){
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  model.clear(createResolver());
  assertFalse("Got still data",model.getNodeHandler().isDefined(model.getRootNode()));
  assertEquals("Root name was changed",ROOT_AUTHORS_TREE.getNodeName(),model.getRootNode().getNodeName());
}

</code></pre>

<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests whether references to parent nodes are updated correctly when
 * clearing properties.
 */
@Test public void testClearTreeUpdateParentReferences(){
  String[] path={"Homer","Ilias"};
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  QueryResult<ImmutableNode> result=QueryResult.createNodeResult(nodeForKey(model,nodePathWithEndNode("Achilles",path)));
  EasyMock.expect(resolver.resolveKey(ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(Collections.singletonList(result));
  EasyMock.replay(resolver);
  model.clearTree(KEY,resolver);
  checkPathToRoot(model,nodeForKey(model,nodePathWithEndNode("Hektor",path)),path);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
"></span><br>
/** 
 * Tests whether the correct root node is returned if a tree was passed at
 * construction time.
 */
@Test public void testGetRootNodeFromConstructor(){
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  assertSame("Wrong root node",ROOT_AUTHORS_TREE,model.getRootNode());
}

</code></pre>

<pre class="type-2 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests whether undefined nodes are removed from the hierarchy when
 * clearing properties.
 */
@Test public void testClearTreeRemoveUndefinedNodes(){
  NodeKeyResolver<ImmutableNode> resolver=createResolver();
  InMemoryNodeModel model=new InMemoryNodeModel(ROOT_AUTHORS_TREE);
  ImmutableNode node=nodeForKey(model,"Homer/Ilias");
  List<QueryResult<ImmutableNode>> results=new ArrayList<QueryResult<ImmutableNode>>(node.getChildren().size());
  for (  ImmutableNode child : node.getChildren()) {
    results.add(QueryResult.createNodeResult(child));
  }
  EasyMock.expect(resolver.resolveKey(ROOT_AUTHORS_TREE,KEY,model.getNodeHandler())).andReturn(results);
  EasyMock.replay(resolver);
  model.clearTree(KEY,resolver);
  assertEquals("Child of root not removed",NodeStructureHelper.authorsLength() - 1,model.getRootNode().getChildren().size());
  for (  ImmutableNode child : model.getRootNode().getChildren()) {
    assertNotEquals("Child still found","Homer",child.getNodeName());
  }
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
