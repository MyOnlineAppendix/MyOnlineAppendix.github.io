<h3 style="margin:0px">Class: org.apache.tiles.definition.dao.ResolvingLocaleUrlDefinitionDAOTest (9 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(1)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >ExceptionVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests {@link LocaleUrlDefinitionDAO#setSources(List)}.
 */
@Test public void testSetSourceURLs(){
  List<ApplicationResource> sourceURLs=new ArrayList<ApplicationResource>();
  sourceURLs.add(url1);
  sourceURLs.add(url2);
  sourceURLs.add(url3);
  definitionDao.setSources(sourceURLs);
  assertEquals("The source URLs are not set correctly",sourceURLs,definitionDao.sources);
}

</code></pre>

<pre class="type-4 type-2 type-3 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests wildcard mappings.
 */
@Test public void testWildcardMapping(){
  List<ApplicationResource> urls=new ArrayList<ApplicationResource>();
  urls.add(urlWildcard);
  definitionDao.setSources(urls);
  definitionDao.setReader(new DigesterDefinitionsReader());
  Definition definition=definitionDao.getDefinition("test.defName.subLayered",Locale.ITALY);
  assertEquals("The template is not correct","/testName.jsp",definition.getTemplateAttribute().getValue());
  assertEquals("The header attribute is not correct","/common/headerLayered.jsp",definition.getAttribute("header").getValue());
  definition=definitionDao.getDefinition("test.defName.subLayered",Locale.ITALIAN);
  assertEquals("The template is not correct","/testName.jsp",definition.getTemplateAttribute().getValue());
  assertEquals("The header attribute is not correct","/common/headerLayered.jsp",definition.getAttribute("header").getValue());
  definition=definitionDao.getDefinition("test.defName.subLayered",null);
  assertEquals("The template is not correct","/testName.jsp",definition.getTemplateAttribute().getValue());
  assertEquals("The header attribute is not correct","/common/headerLayered.jsp",definition.getAttribute("header").getValue());
  definition=definitionDao.getDefinition("test.defName.noAttribute",null);
  assertEquals("/testName.jsp",definition.getTemplateAttribute().getValue());
  assertEquals(null,definition.getLocalAttributeNames());
  definition=definitionDao.getDefinition("test.def3",null);
  assertNotNull("The simple definition is null",definition);
  definition=definitionDao.getDefinition("test.extended.defName.subLayered",null);
  assertEquals("test.defName.subLayered",definition.getExtends());
  assertEquals(ATTRIBUTE_NAMES_COUNT,definition.getLocalAttributeNames().size());
  assertEquals("The template is not correct","/testName.jsp",definition.getTemplateAttribute().getValue());
  assertEquals("Overridden Title",definition.getAttribute("title").getValue());
  assertEquals("The header attribute is not correct","/common/headerLayered.jsp",definition.getAttribute("header").getValue());
}

</code></pre>

<pre class="type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests{@link ResolvingLocaleUrlDefinitionDAO#getDefinition(String,Locale)}when loading multiple files for a locale.
 */
@Test public void testListAttributeLocaleInheritance(){
  List<ApplicationResource> urls=new ArrayList<ApplicationResource>();
  urls.add(url21);
  definitionDao.setSources(urls);
  ApplicationContext applicationContext=createMock(ApplicationContext.class);
  definitionDao.setReader(new DigesterDefinitionsReader());
  replay(applicationContext);
  Definition definition=definitionDao.getDefinition("test.inherit.list",Locale.ITALIAN);
  ListAttribute listAttribute=(ListAttribute)definition.getAttribute("list");
  List<Attribute> attributes=listAttribute.getValue();
  assertEquals(2,attributes.size());
  verify(applicationContext);
}

</code></pre>

<pre class="type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests {@link LocaleUrlDefinitionDAO#setReader(DefinitionsReader)}.
 */
@Test public void testSetReader(){
  DefinitionsReader reader=createMock(DefinitionsReader.class);
  definitionDao.setReader(reader);
  assertEquals("There reader has not been set correctly",reader,definitionDao.reader);
}

</code></pre>

<pre class="type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Tests execution.
 * @throws IOException If something goes wrong.
 */
@Test public void testInit() throws IOException {
  ApplicationContext applicationContext=createMock(ApplicationContext.class);
  Set<ApplicationResource> urlSet=new HashSet<ApplicationResource>();
  urlSet.add(url1);
  expect(applicationContext.getResources("/WEB-INF/tiles.xml")).andReturn(urlSet);
  replay(applicationContext);
  DefinitionsReader reader=new DigesterDefinitionsReader();
  definitionDao.setReader(reader);
  List<ApplicationResource> sourceURLs=new ArrayList<ApplicationResource>();
  sourceURLs.add(url1);
  definitionDao.setSources(sourceURLs);
  assertEquals("The reader is not of the correct class",DigesterDefinitionsReader.class,definitionDao.reader.getClass());
  assertEquals("The source URLs are not correct",sourceURLs,definitionDao.sources);
  reset(applicationContext);
  applicationContext=createMock(ApplicationContext.class);
  replay(applicationContext);
  definitionDao.setReader(new MockDefinitionsReader());
  assertEquals("The reader is not of the correct class",MockDefinitionsReader.class,definitionDao.reader.getClass());
  sourceURLs=new ArrayList<ApplicationResource>();
  sourceURLs.add(url1);
  sourceURLs.add(url2);
  sourceURLs.add(url3);
  definitionDao.setSources(sourceURLs);
  assertEquals("The source URLs are not correct",sourceURLs,definitionDao.sources);
  verify(applicationContext);
}

</code></pre>

<pre class="type-4 type-2 type-3 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests {@link LocaleUrlDefinitionDAO#getDefinitions(Locale)}.
 */
@Test public void testGetDefinitions(){
  List<ApplicationResource> sourceURLs=new ArrayList<ApplicationResource>();
  sourceURLs.add(url1);
  sourceURLs.add(url2);
  sourceURLs.add(url3);
  definitionDao.setSources(sourceURLs);
  DefinitionsReader reader=new DigesterDefinitionsReader();
  definitionDao.setReader(reader);
  Map<String,Definition> defaultDefinitions=definitionDao.getDefinitions(null);
  Map<String,Definition> usDefinitions=definitionDao.getDefinitions(Locale.US);
  Map<String,Definition> frenchDefinitions=definitionDao.getDefinitions(Locale.FRENCH);
  Map<String,Definition> chinaDefinitions=definitionDao.getDefinitions(Locale.CHINA);
  Map<String,Definition> canadaFrendDefinitions=definitionDao.getDefinitions(Locale.CANADA_FRENCH);
  assertNotNull("test.def1 definition not found.",defaultDefinitions.get("test.def1"));
  assertNotNull("test.def2 definition not found.",defaultDefinitions.get("test.def2"));
  assertNotNull("test.def3 definition not found.",defaultDefinitions.get("test.def3"));
  assertNotNull("test.common definition not found.",defaultDefinitions.get("test.common"));
  assertNotNull("test.common definition in US locale not found.",usDefinitions.get("test.common"));
  assertNotNull("test.common definition in FRENCH locale not found.",frenchDefinitions.get("test.common"));
  assertNotNull("test.common definition in CHINA locale not found.",chinaDefinitions.get("test.common"));
  assertNotNull("test.common.french definition in FRENCH locale not found.",canadaFrendDefinitions.get("test.common.french"));
  assertNotNull("test.common.french definition in CANADA_FRENCH locale not found.",canadaFrendDefinitions.get("test.common.french"));
  assertNotNull("test.def.toextend definition not found.",defaultDefinitions.get("test.def.toextend"));
  assertNotNull("test.def.overridden definition not found.",defaultDefinitions.get("test.def.overridden"));
  assertNotNull("test.def.overridden definition in FRENCH locale not found.",frenchDefinitions.get("test.def.overridden"));
  assertEquals("Incorrect default country value","default",defaultDefinitions.get("test.def1").getAttribute("country").getValue());
  assertEquals("Incorrect US country value","US",usDefinitions.get("test.def1").getAttribute("country").getValue());
  assertEquals("Incorrect France country value","France",frenchDefinitions.get("test.def1").getAttribute("country").getValue());
  assertEquals("Incorrect Chinese country value (should be default)","default",chinaDefinitions.get("test.def1").getAttribute("country").getValue());
  assertEquals("Incorrect default country value","default",defaultDefinitions.get("test.def.overridden").getAttribute("country").getValue());
  assertEquals("Incorrect default title value","Definition to be overridden",defaultDefinitions.get("test.def.overridden").getAttribute("title").getValue());
  assertEquals("Incorrect France country value","France",frenchDefinitions.get("test.def.overridden").getAttribute("country").getValue());
  assertEquals("Incorrect France title value","Definition to be extended",frenchDefinitions.get("test.def.overridden").getAttribute("title").getValue());
}

</code></pre>

<pre class="type-7 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests {@link ResolvingLocaleUrlDefinitionDAO#resolveInheritance(Definition,Map,Locale,Set)}.
 */
@Test(expected=NoSuchDefinitionException.class) public void testResolveInheritanceNoParent(){
  Definition definition=new Definition("mydef",null,null);
  definition.setExtends("otherDef");
  definitionDao.resolveInheritance(definition,new HashMap<String,Definition>(),Locale.ITALY,new HashSet<String>());
}

</code></pre>

<pre class="type-4 type-2 type-3 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests {@link LocaleUrlDefinitionDAO#getDefinition(String,Locale)}.
 */
@Test public void testGetDefinition(){
  List<ApplicationResource> sourceURLs=new ArrayList<ApplicationResource>();
  sourceURLs.add(url1);
  sourceURLs.add(url2);
  sourceURLs.add(url3);
  definitionDao.setSources(sourceURLs);
  DefinitionsReader reader=new DigesterDefinitionsReader();
  definitionDao.setReader(reader);
  assertNotNull("test.def1 definition not found.",definitionDao.getDefinition("test.def1",null));
  assertNotNull("test.def2 definition not found.",definitionDao.getDefinition("test.def2",null));
  assertNotNull("test.def3 definition not found.",definitionDao.getDefinition("test.def3",null));
  assertNotNull("test.common definition not found.",definitionDao.getDefinition("test.common",null));
  assertNotNull("test.common definition in US locale not found.",definitionDao.getDefinition("test.common",Locale.US));
  assertNotNull("test.common definition in FRENCH locale not found.",definitionDao.getDefinition("test.common",Locale.FRENCH));
  assertNotNull("test.common definition in CHINA locale not found.",definitionDao.getDefinition("test.common",Locale.CHINA));
  assertNotNull("test.common.french definition in FRENCH locale not found.",definitionDao.getDefinition("test.common.french",Locale.FRENCH));
  assertNotNull("test.common.french definition in CANADA_FRENCH locale not found.",definitionDao.getDefinition("test.common.french",Locale.CANADA_FRENCH));
  assertNotNull("test.def.toextend definition not found.",definitionDao.getDefinition("test.def.toextend",null));
  assertNotNull("test.def.overridden definition not found.",definitionDao.getDefinition("test.def.overridden",null));
  assertNotNull("test.def.overridden definition in FRENCH locale not found.",definitionDao.getDefinition("test.def.overridden",Locale.FRENCH));
  assertEquals("Incorrect default country value","default",definitionDao.getDefinition("test.def1",null).getAttribute("country").getValue());
  assertEquals("Incorrect US country value","US",definitionDao.getDefinition("test.def1",Locale.US).getAttribute("country").getValue());
  assertEquals("Incorrect France country value","France",definitionDao.getDefinition("test.def1",Locale.FRENCH).getAttribute("country").getValue());
  assertEquals("Incorrect Chinese country value (should be default)","default",definitionDao.getDefinition("test.def1",Locale.CHINA).getAttribute("country").getValue());
  assertEquals("Incorrect default country value","default",definitionDao.getDefinition("test.def.overridden",null).getAttribute("country").getValue());
  assertEquals("Incorrect default title value","Definition to be overridden",definitionDao.getDefinition("test.def.overridden",null).getAttribute("title").getValue());
  assertEquals("Incorrect France country value","France",definitionDao.getDefinition("test.def.overridden",Locale.FRENCH).getAttribute("country").getValue());
  assertEquals("Incorrect France title value","Definition to be extended",definitionDao.getDefinition("test.def.overridden",Locale.FRENCH).getAttribute("title").getValue());
}

</code></pre>

<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
/** 
 * {@inheritDoc} 
 */
@Before public void setUp() throws IOException {
  applicationContext=createMock(ApplicationContext.class);
  url1=setupUrl("defs1",Locale.FRENCH,Locale.CANADA_FRENCH,Locale.US);
  url2=setupUrl("defs2");
  url3=setupUrl("defs3");
  urlWildcard=setupUrl("defs-wildcard");
  url21=setupUrl("tiles-defs-2.1",Locale.ITALIAN);
  url513=setupUrl("defs-tiles-513");
  replay(applicationContext);
  definitionDao=new ResolvingLocaleUrlDefinitionDAO(applicationContext);
  WildcardDefinitionPatternMatcherFactory definitionPatternMatcherFactory=new WildcardDefinitionPatternMatcherFactory();
  PatternDefinitionResolver<Locale> definitionResolver=new BasicPatternDefinitionResolver<Locale>(definitionPatternMatcherFactory,definitionPatternMatcherFactory);
  definitionDao.setPatternDefinitionResolver(definitionResolver);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
