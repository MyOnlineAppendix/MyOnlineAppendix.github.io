<h3><span class=" glyphicon glyphicon-tag"/>&nbspUtilityVerifier</h3><kbd>Verifies (un)successful execution of the test case by reporting explicitly a failure</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.shindig.auth.BlobCrypterSecurityTokenCodecTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testChangingContainers() throws Exception {
  String newContainer="newcontainer";
  Map<String,String> values=new HashMap<String,String>();
  values.put(Keys.APP_URL.getKey(),"http://www.example.com/gadget.xml");
  values.put(Keys.MODULE_ID.getKey(),Long.toString(12345L,10));
  values.put(Keys.OWNER.getKey(),"owner");
  values.put(Keys.VIEWER.getKey(),"viewer");
  values.put(Keys.TRUSTED_JSON.getKey(),"trusted");
  BlobCrypterSecurityToken t=new BlobCrypterSecurityToken(newContainer,null,null,values);
  String encrypted=t.getContainer() + ":" + getBlobCrypter(getContainerKey(newContainer)).wrap(t.toMap());
  try {
    codec.createToken(ImmutableMap.of(SecurityTokenCodec.SECURITY_TOKEN_NAME,encrypted));
    fail("Should have thrown a SecurityTokenException");
  }
 catch (  SecurityTokenException e) {
  }
  config.newTransaction().addContainer(makeContainer(newContainer)).commit();
  codec.createToken(ImmutableMap.of(SecurityTokenCodec.SECURITY_TOKEN_NAME,encrypted));
  config.newTransaction().removeContainer(newContainer).commit();
  try {
    codec.createToken(ImmutableMap.of(SecurityTokenCodec.SECURITY_TOKEN_NAME,encrypted));
    fail("Should have thrown a SecurityTokenException");
  }
 catch (  SecurityTokenException e) {
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMalformed() throws Exception {
  try {
    codec.createToken(ImmutableMap.of(SecurityTokenCodec.SECURITY_TOKEN_NAME,"foo"));
    fail("should have tried to decrypt with wrong key");
  }
 catch (  SecurityTokenException e) {
    assertTrue(e.getMessage(),e.getMessage().contains("Invalid security token foo"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWrongContainer() throws Exception {
  Map<String,String> values=new HashMap<String,String>();
  values.put(Keys.APP_URL.getKey(),"http://www.example.com/gadget.xml");
  values.put(Keys.MODULE_ID.getKey(),Long.toString(12345L,10));
  values.put(Keys.OWNER.getKey(),"owner");
  values.put(Keys.VIEWER.getKey(),"viewer");
  values.put(Keys.TRUSTED_JSON.getKey(),"trusted");
  BlobCrypterSecurityToken t=new BlobCrypterSecurityToken("container",null,null,values);
  String encrypted=t.getContainer() + ":" + getBlobCrypter(getContainerKey("container")).wrap(t.toMap());
  encrypted=encrypted.replace("container:","example:");
  try {
    codec.createToken(ImmutableMap.of(SecurityTokenCodec.SECURITY_TOKEN_NAME,encrypted));
    fail("should have tried to decrypt with wrong key");
  }
 catch (  SecurityTokenException e) {
    assertTrue(e.getMessage(),e.getMessage().contains("Invalid token signature"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExpired() throws Exception {
  Map<String,String> values=new HashMap<String,String>();
  values.put(Keys.APP_URL.getKey(),"http://www.example.com/gadget.xml");
  values.put(Keys.MODULE_ID.getKey(),Long.toString(12345L,10));
  values.put(Keys.OWNER.getKey(),"owner");
  values.put(Keys.VIEWER.getKey(),"viewer");
  values.put(Keys.TRUSTED_JSON.getKey(),"trusted");
  BlobCrypterSecurityToken token=new BlobCrypterSecurityToken("container",null,null,values);
  token.setTimeSource(timeSource);
  timeSource.incrementSeconds(-1 * (codec.getTokenTimeToLive("container") + 181));
  String encrypted=codec.encodeToken(token);
  try {
    codec.createToken(ImmutableMap.of(SecurityTokenCodec.SECURITY_TOKEN_NAME,encrypted));
    fail("should have expired");
  }
 catch (  SecurityTokenException e) {
    assertTrue(e.getMessage(),e.getMessage().contains("Blob expired"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnknownContainer() throws Exception {
  Map<String,String> values=new HashMap<String,String>();
  values.put(Keys.APP_URL.getKey(),"http://www.example.com/gadget.xml");
  values.put(Keys.MODULE_ID.getKey(),Long.toString(12345L,10));
  values.put(Keys.OWNER.getKey(),"owner");
  values.put(Keys.VIEWER.getKey(),"viewer");
  values.put(Keys.TRUSTED_JSON.getKey(),"trusted");
  BlobCrypterSecurityToken t=new BlobCrypterSecurityToken("container",null,null,values);
  String encrypted=t.getContainer() + ":" + getBlobCrypter(getContainerKey("container")).wrap(t.toMap());
  encrypted=encrypted.replace("container:","other:");
  try {
    codec.createToken(ImmutableMap.of(SecurityTokenCodec.SECURITY_TOKEN_NAME,encrypted));
    fail("should have reported that container was unknown");
  }
 catch (  SecurityTokenException e) {
    assertTrue(e.getMessage(),e.getMessage().contains("Unknown container"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.auth.DefaultSecurityTokenCodecTest </h4><pre class="type-7 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNullDecoder() throws Exception {
  try {
    new DefaultSecurityTokenCodec(new FakeContainerConfig(null));
    fail("Should have thrown");
  }
 catch (  RuntimeException e) {
    assertTrue("exception should contain null: " + e,e.getMessage().contains("null"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInvalidDecoder() throws Exception {
  try {
    new DefaultSecurityTokenCodec(new FakeContainerConfig("garbage"));
    fail("Should have thrown");
  }
 catch (  RuntimeException e) {
    assertTrue("exception should contain garbage: " + e,e.getMessage().contains("garbage"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.features.FeatureRegistryTest </h4><pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void missingFileResultsInException() throws Exception {
  try {
    registry=TestFeatureRegistry.newBuilder().build(new UriBuilder().setScheme("file").setPath("/is/not/there.foo.xml").toUri().toString());
    fail("Should have thrown missing .xml file exception");
  }
 catch (  GadgetException e) {
    assertEquals(GadgetException.Code.INVALID_CONFIG,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void loopIsDetectedAndCrashes() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  String type="gadget";
  Uri loopAUri=builder.expectResource(xml(LOOP_A_TPL,type,null,"loop_a"));
  Uri loopBUri=builder.expectResource(xml(LOOP_B_TPL,type,null,"loop_b"));
  Uri loopCUri=builder.expectResource(xml(LOOP_C_TPL,type,null,"loop_c"));
  Uri txtFile=builder.expectResource(loopAUri.toString() + '\n' + loopBUri.toString()+ '\n'+ loopCUri.toString(),".txt");
  try {
    registry=builder.build(txtFile.toString());
    fail("Should have thrown a loop-detected exception");
  }
 catch (  GadgetException e) {
    assertEquals(GadgetException.Code.INVALID_CONFIG,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void missingIndexResultsInException() throws Exception {
  try {
    registry=TestFeatureRegistry.newBuilder().build(makeResourceUri(".txt").toString());
    fail("Should have thrown an exception for missing .txt file");
  }
 catch (  GadgetException e) {
    assertEquals(GadgetException.Code.INVALID_PATH,e.getCode());
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testCheckDependencyLoopWithNormalDependency(){
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  Uri featureA, featureB, featureC, featureD, txtFile;
  featureA=builder.expectResource("<feature>" + "<name>featureA</name>" + "<dependency>featureB</dependency>"+ "<gadget>"+ "  <script>top();gadget();</script>"+ "</gadget>"+ "<all>"+ "  <script>top();all();</script>"+ "</all>"+ "</feature>");
  featureB=builder.expectResource("<feature>" + "<name>featureB</name>" + "<dependency>featureC</dependency>"+ "<container>"+ "  <script>mid_a();container();</script>"+ "</container>"+ "<all>"+ "  <script>mid_a();all();</script>"+ "</all>"+ "</feature>");
  featureC=builder.expectResource("<feature>" + "<name>featureC</name>" + "<dependency>featureD</dependency>"+ "<container>"+ "  <script>mid_b();container();</script>"+ "</container>"+ "<gadget>"+ "  <script>mid_b();gadget();</script>"+ "</gadget>"+ "</feature>");
  featureD=builder.expectResource("<feature>" + "<name>featureD</name>" + "<all>"+ "  <script>bottom();all();</script>"+ "</all>"+ "</feature>");
  txtFile=builder.expectResource(featureA.toString() + '\n' + featureB.toString()+ '\n'+ featureC.toString()+ '\n'+ featureD.toString(),".txt");
  try {
    registry=builder.build(txtFile.toString());
  }
 catch (  GadgetException e) {
    fail("Shouldn't throw a GadgetException.");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.features.FeatureResourceLoaderTest </h4><pre class="type-7 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalArgumentException.class) public void loadFileNothingAvailable() throws Exception {
  Uri nilUri=new UriBuilder().setScheme("file").setPath("/does/not/exist.js").toUri();
  loader.load(nilUri,null);
  fail("Should have failed indicating could not find: " + nilUri.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.http.AbstractHttpFetcherTest </h4><pre class="type-7 type-5 type-6 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHttpBadPort() throws Exception {
  Uri uri=Uri.parse("http://a:b/");
  HttpRequest request=new HttpRequest(uri);
  try {
    fetcher.fetch(request);
    fail("Expected GadgetException");
  }
 catch (  GadgetException e) {
    assertEquals(400,e.getHttpStatusCode());
    assertTrue(e.getMessage().contains("Bad port number in request"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-5 type-6 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHttpBadHost() throws Exception {
  Uri uri=Uri.parse("http://a:b:c/");
  HttpRequest request=new HttpRequest(uri);
  try {
    fetcher.fetch(request);
    fail("Expected GadgetException");
  }
 catch (  GadgetException e) {
    assertEquals(400,e.getHttpStatusCode());
    assertTrue(e.getMessage().contains("Bad host name in request"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-5 type-6 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHttpNoSchema() throws Exception {
  Uri uri=Uri.parse("//host/data");
  HttpRequest request=new HttpRequest(uri);
  try {
    fetcher.fetch(request);
    fail("Expected GadgetException");
  }
 catch (  GadgetException e) {
    assertEquals(400,e.getHttpStatusCode());
    assertTrue(e.getMessage().contains("Missing schema for request"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-5 type-6 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHttpBadUrl() throws Exception {
  Uri uri=Uri.parse("host/data");
  HttpRequest request=new HttpRequest(uri);
  try {
    fetcher.fetch(request);
    fail("Expected GadgetException");
  }
 catch (  GadgetException e) {
    assertEquals(400,e.getHttpStatusCode());
    assertTrue(e.getMessage().contains("Missing domain name for request"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.http.BasicHttpFetcherTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testToByteArraySafeHandlesExceptionWithNoMessage() throws Exception {
  EOFException e=new EOFException();
  EasyMock.expect(mockInputStream.read(EasyMock.isA(byte[].class))).andThrow(e).anyTimes();
  EasyMock.replay(mockEntity,mockInputStream);
  try {
    fetcher.toByteArraySafe(mockEntity);
  }
 catch (  EOFException eofe) {
    fail("Exception Should have been caught");
  }
  EasyMock.verify(mockEntity,mockInputStream);
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testToByteArraySafeHandleException() throws Exception {
  String exceptionMessage="Unexpected end of ZLIB input stream";
  EOFException e=new EOFException(exceptionMessage);
  EasyMock.expect(mockInputStream.read(EasyMock.isA(byte[].class))).andThrow(e).anyTimes();
  EasyMock.replay(mockEntity,mockInputStream);
  try {
    fetcher.toByteArraySafe(mockEntity);
  }
 catch (  EOFException eofe) {
    fail("Exception Should have been caught");
  }
  EasyMock.verify(mockEntity,mockInputStream);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.http.InvalidationHandlerTest </h4><pre class="type-7 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailInvalidateNoApp() throws Exception {
  String path="/cache/invalidate";
  RestHandler operation=registry.getRestHandler(path,"POST");
  params.put(InvalidationHandler.KEYS_PARAM,new String[]{"http://www.example.org/gadget.xml"});
  try {
    token.setAppId("");
    token.setAppUrl("");
    operation.execute(params,null,token,converter).get();
    fail("Expected error");
  }
 catch (  ExecutionException ee) {
    assertTrue(ee.getCause() instanceof ProtocolException);
  }
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailTokenAuthInvalidateAppResource() throws Exception {
  String path="/cache/invalidate";
  RestHandler operation=registry.getRestHandler(path,"POST");
  params.put(InvalidationHandler.KEYS_PARAM,new String[]{"http://www.example.org/gadget.xml"});
  try {
    operation.execute(params,null,token,converter).get();
    fail("Expected error");
  }
 catch (  ExecutionException ee) {
    assertTrue(ee.getCause() instanceof ProtocolException);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.js.AddOnloadFunctionProcessorTest </h4><pre class="type-7 type-5 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailsWithInvalidFunctionName() throws Exception {
  EasyMock.expect(jsUri.getOnload()).andReturn("!!%%!!%%");
  control.replay();
  try {
    processor.process(request,response);
    fail("A JsException should have been thrown by the processor.");
  }
 catch (  JsException e) {
    assertEquals(HttpServletResponse.SC_BAD_REQUEST,e.getStatusCode());
    assertEquals(AddOnloadFunctionProcessor.ONLOAD_FUNCTION_NAME_ERROR,e.getMessage());
  }
  control.verify();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.js.JsLoadProcessorTest </h4><pre class="type-7 type-5 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailsWhenNoOnloadIsSpecified() throws Exception {
  EasyMock.expect(jsUri.isJsload()).andReturn(true);
  EasyMock.expect(jsUri.getOnload()).andReturn(null);
  control.replay();
  try {
    processor.process(request,response);
    fail("A JsException should have been thrown by the processor.");
  }
 catch (  JsException e) {
    assertEquals(HttpServletResponse.SC_BAD_REQUEST,e.getStatusCode());
    assertEquals(JsLoadProcessor.JSLOAD_ONLOAD_ERROR,e.getMessage());
  }
  control.verify();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.js.JsRequestBuilderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testCreateRequestThrowsExceptionOnParseError() throws Exception {
  EasyMock.expect(jsUriManager.processExternJsUri(EasyMock.isA(Uri.class))).andThrow(new GadgetException(Code.INVALID_PARAMETER));
  control.replay();
  try {
    builder.build(request);
    fail("Should have thrown a GadgetException.");
  }
 catch (  GadgetException e) {
  }
  control.verify();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.oauth.BasicOAuthStoreTest </h4><pre class="type-7 type-5 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultKey() throws Exception {
  FakeGadgetToken t=new FakeGadgetToken();
  t.setAppUrl("http://localhost:8080/not-in-store.xml");
  OAuthServiceProvider provider=new OAuthServiceProvider("req","authorize","access");
  try {
    store.getConsumerKeyAndSecret(t,"",provider);
    fail();
  }
 catch (  GadgetException e) {
  }
  BasicOAuthStoreConsumerKeyAndSecret cks=new BasicOAuthStoreConsumerKeyAndSecret("somekey","default",KeyType.RSA_PRIVATE,"keyname",null);
  store.setDefaultKey(cks);
  ConsumerInfo consumer=store.getConsumerKeyAndSecret(t,"",provider);
  assertEquals("somekey",consumer.getConsumer().consumerKey);
  assertNull(consumer.getConsumer().consumerSecret);
  assertEquals("RSA-SHA1",consumer.getConsumer().getProperty("oauth_signature_method"));
  assertEquals("default",consumer.getConsumer().getProperty(RSA_SHA1.PRIVATE_KEY));
  assertEquals(provider,consumer.getConsumer().serviceProvider);
  assertEquals("keyname",consumer.getKeyName());
  assertEquals("default callback",consumer.getCallbackUrl());
  cks=new BasicOAuthStoreConsumerKeyAndSecret("somekey","default",KeyType.RSA_PRIVATE,"keyname","callback");
  store.setDefaultKey(cks);
  consumer=store.getConsumerKeyAndSecret(t,"",provider);
  assertEquals("callback",consumer.getCallbackUrl());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.oauth.GadgetOAuthCallbackGeneratorTest </h4><pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBadGadget() throws Exception {
  HttpRequest request=new HttpRequest(DEST_URL);
  request.setSecurityToken(securityToken);
  request.setOAuthArguments(new OAuthArguments());
  expect(processor.process(eqContext(securityToken,request.getOAuthArguments()))).andThrow(new ProcessingException("doh",HttpServletResponse.SC_BAD_REQUEST));
  control.replay();
  try {
    getGenerator().generateCallback(fetcherConfig,"base",request,responseParams);
    fail("Should have thrown");
  }
 catch (  OAuthRequestException e) {
    assertEquals(OAuthError.UNKNOWN_PROBLEM.name(),e.getError());
  }
  control.verify();
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWrongDomain() throws Exception {
  HttpRequest request=new HttpRequest(DEST_URL);
  request.setSecurityToken(securityToken);
  request.setOAuthArguments(new OAuthArguments());
  expect(processor.process(eqContext(securityToken,request.getOAuthArguments()))).andReturn(gadget);
  expect(lockedDomainService.isGadgetValidForHost("renderinghost",gadget,"default")).andReturn(false);
  control.replay();
  try {
    getGenerator().generateCallback(fetcherConfig,"base",request,responseParams);
    fail("Should have thrown");
  }
 catch (  OAuthRequestException e) {
    assertEquals(OAuthError.UNKNOWN_PROBLEM.name(),e.getError());
  }
  control.verify();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.oauth.GadgetTokenStoreTest </h4><pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetOAuthAccessor_useToken_noOAuthInSpec() throws Exception {
  OAuthArguments arguments=new OAuthArguments();
  arguments.setUseToken(UseToken.IF_AVAILABLE);
  try {
    store.getOAuthAccessor(socialToken,arguments,clientState,responseParams,fetcherConfig);
    fail();
  }
 catch (  OAuthRequestException e) {
    assertEquals("BAD_OAUTH_CONFIGURATION",e.getError());
  }
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetOAuthAccessor_serviceNotFound() throws Exception {
  OAuthArguments arguments=new OAuthArguments();
  arguments.setServiceName("no such service");
  arguments.setUseToken(UseToken.ALWAYS);
  try {
    store.getOAuthAccessor(socialToken,arguments,clientState,responseParams,fetcherConfig);
    fail();
  }
 catch (  OAuthRequestException e) {
    assertEquals("BAD_OAUTH_CONFIGURATION",e.getError());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.oauth.OAuthArgumentsTest </h4><pre class="type-7 type-5 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseUseToken() throws Exception {
  FakeHttpServletRequest req=new FakeHttpServletRequest();
  req.setParameter("OAUTH_USE_TOKEN","ALWAYS");
  OAuthArguments args=new OAuthArguments(AuthType.SIGNED,req);
  assertEquals(UseToken.ALWAYS,args.getUseToken());
  req.setParameter("OAUTH_USE_TOKEN","if_available");
  args=new OAuthArguments(AuthType.SIGNED,req);
  assertEquals(UseToken.IF_AVAILABLE,args.getUseToken());
  req.setParameter("OAUTH_USE_TOKEN","never");
  args=new OAuthArguments(AuthType.SIGNED,req);
  assertEquals(UseToken.NEVER,args.getUseToken());
  req.setParameter("OAUTH_USE_TOKEN","");
  args=new OAuthArguments(AuthType.SIGNED,req);
  assertEquals(UseToken.NEVER,args.getUseToken());
  req.setParameter("OAUTH_USE_TOKEN","");
  args=new OAuthArguments(AuthType.OAUTH,req);
  assertEquals(UseToken.ALWAYS,args.getUseToken());
  try {
    req.setParameter("OAUTH_USE_TOKEN","stuff");
    new OAuthArguments(AuthType.OAUTH,req);
    fail("Should have thrown");
  }
 catch (  GadgetException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.oauth.OAuthRequestTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testNextFetchThrowsRuntimeException() throws Exception {
  serviceProvider.setThrow(new RuntimeException("very, very wrong"));
  MakeRequestClient client=makeNonSocialClient("owner","owner",GADGET_URL);
  try {
    client.sendGet(FakeOAuthServiceProvider.ACCESS_TOKEN_URL);
    fail("Should have thrown");
  }
 catch (  RuntimeException e) {
  }
  checkLogContains("GET /request?param=foo&opensocial_owner_id=owner");
  checkLogContains("OAuth error [very, very wrong] for " + "application http://www.example.com/gadget.xml");
  checkLogContains("RuntimeException");
  checkLogContains("very, very wrong");
}

</code></pre>

<br>
<pre class="type-7 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=RuntimeException.class) public void testGetTamperedFormContent() throws Exception {
  MakeRequestClient client=makeSignedFetchClient("o","v","http://www.example.com/app");
  client.setNextFetcher(new HttpFetcher(){
    public HttpResponse fetch(    HttpRequest request) throws GadgetException {
      request.setPostBody("foo=quux".getBytes());
      return serviceProvider.fetch(request);
    }
  }
);
  client.sendGetWithBody(FakeOAuthServiceProvider.RESOURCE_URL,OAuth.FORM_ENCODED,"foo=bar".getBytes());
  fail("Should have thrown with oauth signature mismatch");
}

</code></pre>

<br>
<pre class="type-7 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=RuntimeException.class) public void testPostTamperedFormContent() throws Exception {
  MakeRequestClient client=makeSignedFetchClient("o","v","http://www.example.com/app");
  client.setNextFetcher(new HttpFetcher(){
    public HttpResponse fetch(    HttpRequest request) throws GadgetException {
      request.setPostBody("foo=quux".getBytes());
      return serviceProvider.fetch(request);
    }
  }
);
  client.sendFormPost(FakeOAuthServiceProvider.RESOURCE_URL,"foo=bar");
  fail("Should have thrown with oauth signature mismatch");
}

</code></pre>

<br>
<pre class="type-7 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=RuntimeException.class) public void testPostTamperedRemoveRawContent() throws Exception {
  byte[] raw={0,1,2,3,4,5};
  MakeRequestClient client=makeSignedFetchClient("o","v","http://www.example.com/app");
  client.setNextFetcher(new HttpFetcher(){
    public HttpResponse fetch(    HttpRequest request) throws GadgetException {
      request.setPostBody(ArrayUtils.EMPTY_BYTE_ARRAY);
      request.setHeader("Content-Type","application/x-www-form-urlencoded");
      return serviceProvider.fetch(request);
    }
  }
);
  client.sendRawPost(FakeOAuthServiceProvider.RESOURCE_URL,"funky-content",raw);
  fail("Should have thrown with body hash in form encoded request");
}

</code></pre>

<br>
<pre class="type-7 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=RuntimeException.class) public void testGetTamperedRemoveRawContent() throws Exception {
  byte[] raw={0,1,2,3,4,5};
  MakeRequestClient client=makeSignedFetchClient("o","v","http://www.example.com/app");
  client.setNextFetcher(new HttpFetcher(){
    public HttpResponse fetch(    HttpRequest request) throws GadgetException {
      request.setPostBody(ArrayUtils.EMPTY_BYTE_ARRAY);
      request.setHeader("Content-Type","application/x-www-form-urlencoded");
      return serviceProvider.fetch(request);
    }
  }
);
  client.sendGetWithBody(FakeOAuthServiceProvider.RESOURCE_URL,"funky-content",raw);
  fail("Should have thrown with body hash in form encoded request");
}

</code></pre>

<br>
<pre class="type-7 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=RuntimeException.class) public void testPostTamperedRawContent() throws Exception {
  byte[] raw={0,1,2,3,4,5};
  MakeRequestClient client=makeSignedFetchClient("o","v","http://www.example.com/app");
  client.setNextFetcher(new HttpFetcher(){
    public HttpResponse fetch(    HttpRequest request) throws GadgetException {
      request.setPostBody("yo momma".getBytes());
      return serviceProvider.fetch(request);
    }
  }
);
  client.sendRawPost(FakeOAuthServiceProvider.RESOURCE_URL,"funky-content",raw);
  fail("Should have thrown with oauth_body_hash mismatch");
}

</code></pre>

<br>
<pre class="type-9 type-7 type-5 type-1 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=RuntimeException.class) public void testAccessTokenData_noDirectRequest() throws Exception {
  serviceProvider.setReturnAccessTokenData(true);
  MakeRequestClient client=makeNonSocialClient("owner","owner",GADGET_URL);
  HttpResponse response=client.sendGet(FakeOAuthServiceProvider.ACCESS_TOKEN_URL);
  assertEquals("",response.getResponseAsString());
  client.approveToken("user_data=hello-oauth");
  response=client.sendGet(FakeOAuthServiceProvider.RESOURCE_URL);
  assertEquals("User data is hello-oauth",response.getResponseAsString());
  client.sendGet(FakeOAuthServiceProvider.ACCESS_TOKEN_URL);
  fail("Service provider should have rejected bogus request to access token URL");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testGetTamperedRawContent() throws Exception {
  byte[] raw={0,1,2,3,4,5};
  MakeRequestClient client=makeSignedFetchClient("o","v","http://www.example.com/app");
  client.setNextFetcher(new HttpFetcher(){
    public HttpResponse fetch(    HttpRequest request) throws GadgetException {
      request.setPostBody("yo momma".getBytes());
      return serviceProvider.fetch(request);
    }
  }
);
  try {
    client.sendGetWithBody(FakeOAuthServiceProvider.RESOURCE_URL,"funky-content",raw);
    fail("Should have thrown with oauth_body_hash mismatch");
  }
 catch (  RuntimeException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.preload.ConcurrentPreloaderServiceTest </h4><pre class="type-17 type-7 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiplePreloadsFiresJustOneInCurrentThread() throws Exception {
  TestPreloadCallable first=new TestPreloadCallable(new DataPreload(PRELOAD_STRING_KEY,PRELOAD_STRING_VALUE));
  TestPreloadCallable second=new TestPreloadCallable(new DataPreload(PRELOAD_NUMERIC_KEY,PRELOAD_MAP_VALUE));
  TestPreloadCallable third=new TestPreloadCallable(new DataPreload(PRELOAD_MAP_KEY,PRELOAD_NUMERIC_VALUE));
  preloader.tasks.add(first);
  preloader.tasks.add(second);
  preloader.tasks.add(third);
  PreloaderService service=new ConcurrentPreloaderService(Executors.newFixedThreadPool(5),preloader);
  service.preload((Gadget)null);
  TestPreloadCallable ranInSameThread=null;
  for (  TestPreloadCallable preloadCallable : Lists.newArrayList(first,second,third)) {
    if (preloadCallable.executedThread == Thread.currentThread()) {
      if (ranInSameThread != null) {
        fail("More than one request ran in the current thread.");
      }
      ranInSameThread=preloadCallable;
    }
  }
  assertNotNull("No preloads executed in the current thread. ",ranInSameThread);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.preload.ConcurrentPreloadsTest </h4><pre class="type-7 type-5 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getDataWithPreloadException() throws Exception {
  ConcurrentPreloads preloads=new ConcurrentPreloads();
  preloads.add(TestFuture.throwsExecutionWrapped());
  preloads.add(TestFuture.returnsNormal("foo"));
  assertEquals(2,preloads.size());
  Iterator<PreloadedData> iterator=preloads.iterator();
  PreloadedData withError=iterator.next();
  try {
    withError.toJson();
    fail();
  }
 catch (  PreloadException pe) {
    assertNull(pe.getCause());
  }
  assertEquals(TestFuture.expectedResult("foo"),iterator.next().toJson());
}

</code></pre>

<br>
<pre class="type-7 type-5 type-12 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getDataWithRuntimeException() throws Exception {
  ConcurrentPreloads preloads=new ConcurrentPreloads();
  preloads.add(TestFuture.throwsExecution());
  preloads.add(TestFuture.returnsNormal("foo"));
  assertEquals(2,preloads.size());
  Iterator<PreloadedData> iterator=preloads.iterator();
  PreloadedData withError=iterator.next();
  try {
    withError.toJson();
    fail();
  }
 catch (  PreloadException pe) {
    assertSame(pe.getCause().getClass(),RuntimeException.class);
  }
  assertEquals(TestFuture.expectedResult("foo"),iterator.next().toJson());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.process.ProcessorTest </h4><pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nonHttpOrHttpsThrows() throws Exception {
  try {
    processor.process(makeContext("html",Uri.parse("file://foo"),false));
    fail("expected ProcessingException");
  }
 catch (  ProcessingException e) {
    assertEquals(HttpServletResponse.SC_FORBIDDEN,e.getHttpStatusCode());
  }
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void nullUrlThrows() throws Exception {
  try {
    processor.process(makeContext("html",null,false));
    fail("expected ProcessingException");
  }
 catch (  ProcessingException e) {
    assertEquals(HttpServletResponse.SC_BAD_REQUEST,e.getHttpStatusCode());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.rewrite.image.BMPOptimizerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testEvilImage2() throws Exception {
  try {
    HttpResponse resp=createResponse("org/apache/shindig/gadgets/rewrite/image/evil2.bmp","image/bmp");
    rewrite(resp);
    fail("Evil image should not be readable");
  }
 catch (  RuntimeException re) {
    log.log(Level.INFO,"Good failure while reading evil image",re);
  }
}

</code></pre>

<br>
<pre class="type-7 type-13 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Is not executed with the test suite
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @Ignore("Kills some VMs") public void testEvilImages() throws Exception {
  try {
    HttpResponse resp=createResponse("org/apache/shindig/gadgets/rewrite/image/evil.bmp","image/bmp");
    rewrite(resp);
    fail("Evil image should not be readable");
  }
 catch (  RuntimeException re) {
    log.log(Level.INFO,"Good failure while reading evil image",re);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.rewrite.image.JPEGOptimizerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testBadICC4() throws Exception {
  HttpResponse resp=createResponse("org/apache/shindig/gadgets/rewrite/image/badicc4.jpg","image/jpeg");
  try {
    rewrite(resp);
    fail("Should have failed with OutOfMemory exception");
  }
 catch (  OutOfMemoryError oome) {
  }
catch (  NullPointerException npe) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.rewrite.image.PNGOptimizerTest </h4><pre class="type-7 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IOException.class) public void testEvil() throws Exception {
  HttpResponse resp=createResponse("org/apache/shindig/gadgets/rewrite/image/evil.png","image/png");
  rewrite(resp);
  fail("Should have failed to read image");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.servlet.ETagFilterTest </h4><pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTagContentOnException() throws Exception {
  chain.write(RESPONSE_BODY_BYTES);
  chain.throwException();
  control.replay();
  try {
    filter.doFilter(request,response,chain);
    fail("Should have thrown an IOException");
  }
 catch (  IOException e) {
  }
  assertArrayEquals(RESPONSE_BODY_BYTES,stream.getBuffer());
  control.verify();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.servlet.GadgetsHandlerTest </h4><pre class="type-7 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMetadataNoContainerRequest() throws Exception {
  registerGadgetsHandler(null);
  JSONObject request=makeMetadataNoContainerRequest(GADGET1_URL);
  RpcHandler operation=registry.getRpcHandler(request);
  try {
    operation.execute(emptyFormItems,authContext,converter).get();
    fail("Missing container");
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("Missing container"));
  }
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRenderingType() throws Exception {
  assertEquals(GadgetsHandlerApi.RenderingType.DEFAULT,GadgetsHandler.getRenderingType(null));
  assertEquals(GadgetsHandlerApi.RenderingType.SANITIZED,GadgetsHandler.getRenderingType("sanitized"));
  assertEquals(GadgetsHandlerApi.RenderingType.INLINE_CAJOLED,GadgetsHandler.getRenderingType("inline_cajoled"));
  try {
    GadgetsHandler.getRenderingType("unknown");
    fail("Should have failed");
  }
 catch (  ProcessingException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.servlet.HttpRequestHandlerTest </h4><pre class="type-7 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSignedGetRequestNoSecurityToken() throws Exception {
  JSONObject request=new JSONObject("{method:http.get, id:req1, params : {" + "href:'http://www.example.org/somecontent'," + "authz : 'signed'}"+ "}}");
  HttpRequest httpRequest=new HttpRequest(Uri.parse("http://www.example.org/somecontent"));
  httpRequest.setMethod("GET");
  httpRequest.setAuthType(AuthType.SIGNED);
  expect(pipeline.execute(eqRequest(httpRequest))).andReturn(builder.create()).anyTimes();
  replay();
  RpcHandler operation=registry.getRpcHandler(request);
  try {
    operation.execute(emptyFormItems,null,converter).get();
    fail("Cannot execute a request without a security token");
  }
 catch (  ExecutionException ee) {
    assertTrue(ee.getCause() instanceof ProtocolException);
  }
  verify();
}

</code></pre>

<br>
<pre class="type-7 type-6 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailGetWithBodyGet() throws Exception {
  JSONObject request=new JSONObject("{method:http.get, id:req1, params : {" + "href:'http://www.example.org/somecontent'," + "body:'POSTBODY'"+ "}}");
  HttpRequest httpRequest=new HttpRequest(Uri.parse("http://www.example.org/somecontent"));
  httpRequest.setMethod("GET");
  RpcHandler operation=registry.getRpcHandler(request);
  try {
    operation.execute(emptyFormItems,token,converter).get();
    fail("Body should not be allowed in GET request");
  }
 catch (  ExecutionException ee) {
    assertTrue(ee.getCause() instanceof ProtocolException);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.servlet.ProxyHandlerTest </h4><pre class="type-7 type-3 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=GadgetException.class) public void testNoUrl() throws Exception {
  setupNoArgsProxyRequestMock("www.example.com",null);
  replay();
  proxyHandler.fetch(request);
  fail("Proxy should raise exception if there is no url");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.gadgets.spec.OAuthServiceTest </h4><pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseEndPoint_badlocation() throws Exception {
  try {
    String xml="<Request url='http://www.example.com' method='GET' param_location='body'/>";
    service.parseEndPoint("Request",XmlUtil.parse(xml),SPEC_URL);
    fail("Should have thrown");
  }
 catch (  SpecParserException e) {
    assertEquals("Unknown OAuth param_location: body",e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseAuthorizeUrl_notHttp() throws Exception {
  OAuthService service=new OAuthService();
  String xml="<Authorization url='ftp://www.example.com'/>";
  try {
    service.parseAuthorizationUrl(XmlUtil.parse(xml),SPEC_URL);
    fail("Should have rejected malformed Authorization element");
  }
 catch (  SpecParserException e) {
    assertEquals("OAuth/Service/Authorization @url is not valid: ftp://www.example.com",e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.protocol.BaseRequestItemTest </h4><pre class="type-7 type-5 type-6 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetParameters() throws Exception {
  request.setParameter("anykey","{name: 'Bob', id: '1234'}");
  Map<String,Object> params=request.getParameters();
  assertEquals(1,params.size());
  assertTrue(params.containsKey("anykey"));
  try {
    params.put("this","is bad");
    fail("Params should be immutable");
  }
 catch (  UnsupportedOperationException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.protocol.DefaultHandlerRegistryTest </h4><pre class="type-7 type-12 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRestHandler_serviceDoesntExist(){
  RestHandler restHandler=registry.getRestHandler("/makebelieve","GET");
  try {
    Future<?> future=restHandler.execute(Maps.<String,String[]>newHashMap(),null,null,null);
    future.get();
    fail("Expect exception for missing method");
  }
 catch (  ExecutionException t) {
    assertSame(t.getCause().getClass(),ProtocolException.class);
    Assert.assertEquals(HttpServletResponse.SC_NOT_IMPLEMENTED,((ProtocolException)t.getCause()).getCode());
  }
catch (  Throwable t) {
    fail("Unexpected exception " + t.toString());
  }
}

</code></pre>

<br>
<pre class="type-7 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonFutureException() throws Exception {
  JSONObject rpc=new JSONObject("{ method : test.exception }");
  RpcHandler handler=registry.getRpcHandler(rpc);
  Future<?> future=handler.execute(null,null,null);
  try {
    future.get();
    fail("Service method did not produce NullPointerException from Future");
  }
 catch (  ExecutionException ee) {
    assertSame(ee.getCause().getClass(),NullPointerException.class);
  }
}

</code></pre>

<br>
<pre class="type-7 type-12 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFutureException() throws Exception {
  JSONObject rpc=new JSONObject("{ method : test.futureException }");
  RpcHandler handler=registry.getRpcHandler(rpc);
  Future<?> future=handler.execute(null,null,null);
  try {
    future.get();
    fail("Service method did not produce ExecutionException from Future");
  }
 catch (  ExecutionException ee) {
    assertSame(ee.getCause().getClass(),ProtocolException.class);
  }
}

</code></pre>

<br>
<pre class="type-7 type-12 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRpcHandler_serviceDoesntExist() throws Exception {
  JSONObject rpc=new JSONObject("{method : makebelieve.get}");
  RpcHandler rpcHandler=registry.getRpcHandler(rpc);
  try {
    Future<?> future=rpcHandler.execute(null,null,null);
    future.get();
    fail("Expect exception for missing method");
  }
 catch (  ExecutionException t) {
    assertSame(t.getCause().getClass(),ProtocolException.class);
    Assert.assertEquals(HttpServletResponse.SC_NOT_IMPLEMENTED,((ProtocolException)t.getCause()).getCode());
  }
catch (  Throwable t) {
    fail("Unexpected exception " + t.toString());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.social.core.oauth.OAuth2AuthCodeFlowTest </h4><pre class="type-9 type-7 type-5 type-6 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test attempting to re-use an authorization code to get a new access token.
 */
@Test public void testReuseAuthorizationCode() throws Exception {
  FakeHttpServletRequest req=new FakeHttpServletRequest("http://localhost:8080","/oauth2","client_id=" + CONF_CLIENT_ID + "&client_secret="+ CONF_CLIENT_SECRET+ "&response_type=code&redirect_uri="+ URLEncoder.encode(REDIRECT_URI,"UTF-8"));
  req.setMethod("GET");
  req.setServletPath("/oauth2");
  req.setPathInfo("/authorize");
  HttpServletResponse resp=mock(HttpServletResponse.class);
  Capture<String> redirectURI=new Capture<String>();
  resp.setHeader(EasyMock.eq("Location"),EasyMock.capture(redirectURI));
  resp.setStatus(EasyMock.eq(HttpServletResponse.SC_FOUND));
  MockServletOutputStream outputStream=new MockServletOutputStream();
  EasyMock.expect(resp.getOutputStream()).andReturn(outputStream).anyTimes();
  PrintWriter writer=new PrintWriter(outputStream);
  EasyMock.expect(resp.getWriter()).andReturn(writer).anyTimes();
  replay();
  servlet.service(req,resp);
  writer.flush();
  String response=new String(outputStream.getBuffer(),"UTF-8");
  assertTrue(response == null || response.equals(""));
  verify();
  assertTrue(redirectURI.getValue().startsWith(REDIRECT_URI + "?code="));
  String code=redirectURI.getValue().substring(redirectURI.getValue().indexOf("=") + 1);
  UUID id=UUID.fromString(code);
  assertTrue(id != null);
  System.out.println("Retrieved authorization code: " + code);
  reset();
  req=new FakeHttpServletRequest("http://localhost:8080","/oauth2","client_id=" + CONF_CLIENT_ID + "&grant_type=authorization_code&redirect_uri="+ URLEncoder.encode(REDIRECT_URI,"UTF-8")+ "&code="+ code+ "&client_secret="+ CONF_CLIENT_SECRET);
  req.setMethod("POST");
  req.setServletPath("/oauth2");
  req.setPathInfo("/access_token");
  resp=mock(HttpServletResponse.class);
  resp.setStatus(HttpServletResponse.SC_OK);
  outputStream=new MockServletOutputStream();
  EasyMock.expect(resp.getOutputStream()).andReturn(outputStream).anyTimes();
  writer=new PrintWriter(outputStream);
  EasyMock.expect(resp.getWriter()).andReturn(writer).anyTimes();
  replay();
  servlet.service(req,resp);
  writer.flush();
  JSONObject tokenResponse=new JSONObject(new String(outputStream.getBuffer(),"UTF-8"));
  assertEquals("bearer",tokenResponse.getString("token_type"));
  assertNotNull(tokenResponse.getString("access_token"));
  assertTrue(tokenResponse.getLong("expires_in") > 0);
  verify();
  String accessToken=tokenResponse.getString("access_token");
  System.out.println("Retrieved access token: " + accessToken);
  reset();
  OAuth2AuthenticationHandler handler=injector.getInstance(OAuth2AuthenticationHandler.class);
  req=new FakeHttpServletRequest("http://localhost:8080","/social/rest/activitystreams/john.doe/@self/1/object1","access_token=" + accessToken);
  req.setMethod("GET");
  SecurityToken token=handler.getSecurityTokenFromRequest(req);
  assertNotNull(token);
  reset();
  req=new FakeHttpServletRequest("http://localhost:8080","/oauth2","client_id=" + CONF_CLIENT_ID + "&grant_type=authorization_code&redirect_uri="+ URLEncoder.encode(REDIRECT_URI,"UTF-8")+ "&code="+ code+ "&client_secret="+ CONF_CLIENT_SECRET);
  req.setMethod("POST");
  req.setServletPath("/oauth2");
  req.setPathInfo("/access_token");
  resp=mock(HttpServletResponse.class);
  resp.setStatus(HttpServletResponse.SC_FORBIDDEN);
  outputStream=new MockServletOutputStream();
  EasyMock.expect(resp.getOutputStream()).andReturn(outputStream).anyTimes();
  writer=new PrintWriter(outputStream);
  EasyMock.expect(resp.getWriter()).andReturn(writer).anyTimes();
  replay();
  servlet.service(req,resp);
  writer.flush();
  tokenResponse=new JSONObject(new String(outputStream.getBuffer(),"UTF-8"));
  System.out.println("Rejection response: " + tokenResponse.toString());
  assertEquals("invalid_grant",tokenResponse.getString("error"));
  verify();
  req=new FakeHttpServletRequest("http://localhost:8080","/social/rest/activitystreams/john.doe/@self/1/object1","access_token=" + accessToken);
  req.setMethod("GET");
  try {
    handler.getSecurityTokenFromRequest(req);
  }
 catch (  InvalidAuthenticationException ist) {
    return;
  }
  fail("Should have thrown InvalidAuthenticationException");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.social.core.oauth.OAuth2AuthenticationHandlerTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testInvalidAccessTokenViaHeader(){
  replay();
  FakeHttpServletRequest req=new FakeHttpServletRequest("http://localhost:8080/oauth2","/some_protected_uri","");
  req.setHeader("Authorization","Bearer BADVALUEK");
  try {
    handler.getSecurityTokenFromRequest(req);
  }
 catch (  InvalidAuthenticationException ex) {
    return;
  }
  fail("Handler allowed invalid token without throwing exception");
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testInvalidAccessTokenViaURL(){
  replay();
  try {
    handler.getSecurityTokenFromRequest(new FakeHttpServletRequest("http://localhost:8080/oauth2","/some_protected_uri","access_token=BADTOKEN"));
  }
 catch (  InvalidAuthenticationException ex) {
    return;
  }
  fail("Handler allowed invalid token without throwing exception");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.social.core.oauth.OAuthAuthenticationHanderTest </h4><pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testFailBodySigningWithFormEncoded() throws Exception {
  FakeHttpServletRequest req=new FakeHttpServletRequest();
  req.setContentType(OAuth.FORM_ENCODED);
  String body="BODY";
  req.setPostData(CharsetUtil.getUtf8Bytes(body));
  String hash=new String(Base64.encodeBase64(GenericDigestUtils.digest(CharsetUtil.getUtf8Bytes(body))),"UTF-8");
  req.setParameter(OAuthConstants.OAUTH_BODY_HASH,hash);
  try {
    OAuthAuthenticationHandler.verifyBodyHash(req,hash);
    fail("Body verification should fail");
  }
 catch (  AuthenticationHandler.InvalidAuthenticationException iae) {
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testVerifyFailTokenIsExpired() throws Exception {
  OAuthEntry authEntry=createOAuthEntry();
  authEntry.setIssueTime(new Date(System.currentTimeMillis() - (OAuthEntry.ONE_YEAR + 1)));
  authEntry.setType(OAuthEntry.Type.REQUEST);
  expectTokenEntry(authEntry);
  expectConsumer();
  replay();
  HttpServletRequest request=formEncodedPost.sign(TOKEN,FakeOAuthRequest.OAuthParamLocation.URI_QUERY,FakeOAuthRequest.BodySigning.NONE);
  try {
    reqHandler.getSecurityTokenFromRequest(request);
    fail("Expect failure as token is expired");
  }
 catch (  AuthenticationHandler.InvalidAuthenticationException iae) {
  }
  verify();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testFailBodySigning() throws Exception {
  FakeHttpServletRequest req=new FakeHttpServletRequest();
  req.setContentType("text/plain");
  String body="BODY";
  req.setPostData(CharsetUtil.getUtf8Bytes(body));
  String hash=new String(Base64.encodeBase64(GenericDigestUtils.digest(CharsetUtil.getUtf8Bytes("NOTBODY"))),"UTF-8");
  req.setParameter(OAuthConstants.OAUTH_BODY_HASH,hash);
  try {
    OAuthAuthenticationHandler.verifyBodyHash(req,hash);
    fail("Body verification should fail");
  }
 catch (  AuthenticationHandler.InvalidAuthenticationException iae) {
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testVerifyFailTokenIsRequest() throws Exception {
  OAuthEntry authEntry=createOAuthEntry();
  authEntry.setType(OAuthEntry.Type.REQUEST);
  expectTokenEntry(authEntry);
  expectConsumer();
  replay();
  HttpServletRequest request=formEncodedPost.sign(TOKEN,FakeOAuthRequest.OAuthParamLocation.URI_QUERY,FakeOAuthRequest.BodySigning.NONE);
  try {
    reqHandler.getSecurityTokenFromRequest(request);
    fail("Expect failure as token is a request token not an access token");
  }
 catch (  AuthenticationHandler.InvalidAuthenticationException iae) {
  }
  verify();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testConsumerFailBodyHashSigningWithFormEncoding() throws Exception {
  replay();
  FakeOAuthRequest bodyHashPost=new FakeOAuthRequest("POST",TEST_URL,"a=b&c=d&oauth_body_hash=hash",OAuth.FORM_ENCODED);
  FakeHttpServletRequest request=bodyHashPost.sign(null,FakeOAuthRequest.OAuthParamLocation.URI_QUERY,FakeOAuthRequest.BodySigning.NONE);
  try {
    reqHandler.getSecurityTokenFromRequest(request);
    fail("Cant have body signing with form-encoded post bodies");
  }
 catch (  AuthenticationHandler.InvalidAuthenticationException iae) {
  }
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testVerifyFailTokenSecretMismatch() throws Exception {
  OAuthEntry authEntry=createOAuthEntry();
  authEntry.setTokenSecret("badsecret");
  expectTokenEntry(authEntry);
  expectConsumer();
  replay();
  HttpServletRequest request=formEncodedPost.sign(TOKEN,FakeOAuthRequest.OAuthParamLocation.URI_QUERY,FakeOAuthRequest.BodySigning.NONE);
  try {
    reqHandler.getSecurityTokenFromRequest(request);
    fail("Expect failure as token secrets mismatch");
  }
 catch (  AuthenticationHandler.InvalidAuthenticationException iae) {
  }
  verify();
}

</code></pre>

<br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testVerifyFailNoTokenEntry() throws Exception {
  expectTokenEntry(null);
  expectConsumer();
  replay();
  HttpServletRequest request=formEncodedPost.sign(TOKEN,FakeOAuthRequest.OAuthParamLocation.URI_QUERY,FakeOAuthRequest.BodySigning.NONE);
  try {
    reqHandler.getSecurityTokenFromRequest(request);
    fail("Expect failure as no token entry in store");
  }
 catch (  AuthenticationHandler.InvalidAuthenticationException iae) {
  }
  verify();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.social.opensocial.service.AppDataHandlerTest </h4><pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that the handler correctly recognizes null keys in the data.
 * @throws Exception if the test fails
 */
@Test public void testHandleNullPostDataKeys() throws Exception {
  String path="/appdata/john.doe/@self/appId";
  RestHandler operation=registry.getRestHandler(path,"POST");
  String jsonAppData="{pandas: 'are fuzzy'}";
  Map<String,String[]> params=Maps.newHashMap();
  params.put("fields",new String[]{"pandas"});
  HashMap<String,String> values=Maps.newHashMap();
  values.put("Aokkey","an ok key");
  values.put("","an empty value");
  org.easymock.EasyMock.expect(converter.convertToObject(eq(jsonAppData),eq(Map.class))).andReturn(values);
  replay();
  try {
    operation.execute(params,new StringReader(jsonAppData),token,converter).get();
    fail();
  }
 catch (  ExecutionException ee) {
    assertEquals(HttpServletResponse.SC_BAD_REQUEST,((ProtocolException)ee.getCause()).getCode());
  }
  verify();
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that the handler correctly recognizes invalid keys in the data.
 * @throws Exception if the test fails
 */
@Test public void testHandleInvalidPostDataKeys() throws Exception {
  String path="/appdata/john.doe/@self/appId";
  RestHandler operation=registry.getRestHandler(path,"POST");
  String jsonAppData="{pandas: 'are fuzzy'}";
  Map<String,String[]> params=Maps.newHashMap();
  params.put("fields",new String[]{"pandas"});
  HashMap<String,String> values=Maps.newHashMap();
  values.put("Aokkey","an ok key");
  values.put("a bad key","a good value");
  org.easymock.EasyMock.expect(converter.convertToObject(eq(jsonAppData),eq(Map.class))).andReturn(values);
  replay();
  try {
    operation.execute(params,new StringReader(jsonAppData),token,converter).get();
    fail();
  }
 catch (  ExecutionException ee) {
    assertEquals(HttpServletResponse.SC_BAD_REQUEST,((ProtocolException)ee.getCause()).getCode());
  }
  verify();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.shindig.social.sample.spi.JsonDbOpensocialServiceTest </h4><pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteExpectedActivityEntry() throws Exception {
  db.deleteActivityEntries(JOHN_DOE,SELF_GROUP,APP_ID,ImmutableSet.of(APP_ID),new FakeGadgetToken());
  try {
    db.getActivityEntry(JOHN_DOE,SELF_GROUP,APP_ID,ImmutableSet.of("body"),APP_ID,new FakeGadgetToken()).get();
    fail();
  }
 catch (  ProtocolException sse) {
    assertEquals(HttpServletResponse.SC_BAD_REQUEST,sse.getCode());
  }
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testViewerNotAllowedUpdatePerson() throws Exception {
  JSONArray people=db.getDb().getJSONArray("people");
  JSONObject jsonPerson=new JSONObject();
  jsonPerson.put("id","updatePerson");
  people.put(people.length(),jsonPerson);
  SecurityToken updateToken=new FakeGadgetToken("appId","appUrl","domain","viewer","trustedJson","viewer","20");
  UserId userId=new UserId(UserId.Type.userId,"updatePerson");
  Person person=db.getPerson(userId,Person.Field.ALL_FIELDS,token).get();
  person.setThumbnailUrl("http://newthumbnail.url");
  try {
    db.updatePerson(userId,person,updateToken);
    fail();
  }
 catch (  ProtocolException sse) {
    assertEquals(HttpServletResponse.SC_FORBIDDEN,sse.getCode());
  }
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeleteExpectedActivity() throws Exception {
  db.deleteActivities(CANON_USER,SELF_GROUP,APP_ID,ImmutableSet.of(APP_ID),new FakeGadgetToken());
  try {
    db.getActivity(CANON_USER,SELF_GROUP,APP_ID,ImmutableSet.of("appId","body","mediaItems"),APP_ID,new FakeGadgetToken()).get();
    fail();
  }
 catch (  ProtocolException sse) {
    assertEquals(HttpServletResponse.SC_BAD_REQUEST,sse.getCode());
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
