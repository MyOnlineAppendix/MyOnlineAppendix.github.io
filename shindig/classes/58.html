<h3 style="margin:0px">Class: org.apache.shindig.gadgets.features.FeatureRegistryTest (35 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(24)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(20)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(10)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(9)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(4)</kbd></button>&nbsp;<button id="12"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('12')" data-toggle="tooltip" title="Verifies whether two objects/variables are the same"><kbd id="tag-12"class="label-info"style="display: inline-block;font-size:7pt" >IdentityVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >ExceptionVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void registerFromFileFeatureXmlFileScheme() throws Exception {
  checkRegisterFromFileFeatureXml(true);
}

</code></pre>

<pre class="type-9 type-5 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void resourceGetsMergedAttribs() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  String content1="content1()";
  Uri content1Uri=builder.expectResource(content1);
  Map<String,String> attribs=Maps.newHashMap();
  String theContainer="the-container";
  attribs.put("container",theContainer);
  attribs.put("one","bundle-one");
  attribs.put("two","bundle-two");
  Map<String,String> resourceAttribs=Maps.newHashMap();
  attribs.put("two","attrib-two");
  attribs.put("three","attrib-three");
  Uri feature1Uri=builder.expectResource(xml(BOTTOM_TPL,"gadget",content1Uri.getPath(),null,attribs,resourceAttribs));
  registry=builder.build(feature1Uri.toString());
  List<String> needed=Lists.newArrayList("bottom");
  List<String> unsupported=Lists.newArrayList();
  List<FeatureResource> resources=registry.getFeatureResources(getCtx(RenderingContext.GADGET,theContainer),needed,unsupported).getResources();
  assertEquals(1,resources.size());
  Map<String,String> lastAttribs=registry.getLastAttribs();
  assertNotNull(lastAttribs);
  assertEquals(4,lastAttribs.size());
  assertEquals(theContainer,lastAttribs.get("container"));
  assertEquals("bundle-one",lastAttribs.get("one"));
  assertEquals("attrib-two",lastAttribs.get("two"));
  assertEquals("attrib-three",lastAttribs.get("three"));
}

</code></pre>

<pre class="type-9 type-5 type-12 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void registerOverrideFeature() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  String content1="content1()";
  Uri content1Uri=builder.expectResource(content1);
  Uri feature1Uri=builder.expectResource(xml(BOTTOM_TPL,"gadget",content1Uri.getPath(),null));
  String content2="content_two()";
  Uri content2Uri=builder.expectResource(content2);
  Uri feature2Uri=builder.expectResource(xml(BOTTOM_TPL,"gadget",content2Uri.getPath(),null));
  registry=builder.build(feature1Uri.toString());
  List<FeatureResource> resources1=registry.getAllFeatures().getResources();
  assertEquals(1,resources1.size());
  assertEquals(content1,resources1.get(0).getContent());
  registry=builder.build(feature2Uri.toString());
  List<FeatureResource> resources2=registry.getAllFeatures().getResources();
  assertEquals(1,resources2.size());
  assertEquals(content2,resources2.get(0).getContent());
  List<FeatureResource> resourcesAgain=registry.getAllFeatures().getResources();
  assertSame(resources2,resourcesAgain);
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void unsupportedFeaturesPopulated() throws Exception {
  setupFullRegistry("gadget",null);
  GadgetContext ctx=getCtx(RenderingContext.GADGET,null);
  List<String> needed=Lists.newArrayList("nodep","does-not-exist");
  List<String> unsupported=Lists.newLinkedList();
  List<FeatureResource> resources=registry.getFeatureResources(ctx,needed,unsupported).getResources();
  assertEquals(1,resources.size());
  assertEquals("nodep",resources.get(0).getContent());
  assertEquals(1,unsupported.size());
  assertEquals("does-not-exist",unsupported.get(0));
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTransitiveFeatureResourcesContainer() throws Exception {
  checkTransitiveFeatureResources("container",RenderingContext.CONTAINER);
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getAllFeatures() throws Exception {
  setupFullRegistry("gadget",null);
  List<FeatureResource> resources=registry.getAllFeatures().getResources();
  assertEquals(5,resources.size());
}

</code></pre>

<pre class="type-9 type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void registerFromResourceFeatureXmlRelativeContent() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  String content="resource-content-relative()";
  Uri contentUri=builder.expectResource(content);
  String relativePath=contentUri.getPath().substring(contentUri.getPath().lastIndexOf('/') + 1);
  Uri featureUri=builder.expectResource(xml(NODEP_TPL,"gadget",relativePath,null));
  registry=builder.build(featureUri.toString());
  List<FeatureResource> resources=registry.getAllFeatures().getResources();
  assertEquals(1,resources.size());
  assertEquals(content,resources.get(0).getContent());
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetConfiguredGadgetFromMixedRegistry() throws Exception {
  setupMixedFullRegistry();
  GadgetContext ctx=getCtx(RenderingContext.CONFIGURED_GADGET,null);
  List<String> needed=Lists.newArrayList("top");
  List<String> unsupported=Lists.newLinkedList();
  List<FeatureResource> resources=registry.getFeatureResources(ctx,needed,unsupported).getResources();
  assertEquals(4,resources.size());
  assertEquals("bottom();all();",resources.get(0).getContent());
  assertEquals("mid_b();gadget();",resources.get(1).getContent());
  assertEquals("mid_a();all();",resources.get(2).getContent());
  assertEquals("top();gadget();",resources.get(3).getContent());
}

</code></pre>

<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=GadgetException.class) public void testCheckDependencyLoopWithLoopDependencyError() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  Uri featureA, featureB, featureC, featureD, txtFile;
  featureA=builder.expectResource("<feature>" + "<name>featureA</name>" + "<dependency>featureB</dependency>"+ "<gadget>"+ "  <script>top();gadget();</script>"+ "</gadget>"+ "<all>"+ "  <script>top();all();</script>"+ "</all>"+ "</feature>");
  featureB=builder.expectResource("<feature>" + "<name>featureB</name>" + "<dependency>featureC</dependency>"+ "<container>"+ "  <script>mid_a();container();</script>"+ "</container>"+ "<all>"+ "  <script>mid_a();all();</script>"+ "</all>"+ "</feature>");
  featureC=builder.expectResource("<feature>" + "<name>featureC</name>" + "<dependency>featureD</dependency>"+ "<container>"+ "  <script>mid_b();container();</script>"+ "</container>"+ "<gadget>"+ "  <script>mid_b();gadget();</script>"+ "</gadget>"+ "</feature>");
  featureD=builder.expectResource("<feature>" + "<name>featureD</name>" + "<dependency>featureA</dependency>"+ "<all>"+ "  <script>bottom();all();</script>"+ "</all>"+ "</feature>");
  txtFile=builder.expectResource(featureA.toString() + '\n' + featureB.toString()+ '\n'+ featureC.toString()+ '\n'+ featureD.toString(),".txt");
  registry=builder.build(txtFile.toString());
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetContainerFromMixedRegistry() throws Exception {
  setupMixedFullRegistry();
  GadgetContext ctx=getCtx(RenderingContext.CONTAINER,null);
  List<String> needed=Lists.newArrayList("top");
  List<String> unsupported=Lists.newLinkedList();
  List<FeatureResource> resources=registry.getFeatureResources(ctx,needed,unsupported).getResources();
  assertEquals(4,resources.size());
  assertEquals("bottom();all();",resources.get(0).getContent());
  assertEquals("mid_b();container();",resources.get(1).getContent());
  assertEquals("mid_a();container();",resources.get(2).getContent());
  assertEquals("top();all();",resources.get(3).getContent());
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void filterFeaturesByContainerNoMatch() throws Exception {
  setupFullRegistry("gadget","one, two, three");
  GadgetContext ctx=getCtx(RenderingContext.GADGET,"four");
  List<String> needed=Lists.newArrayList("nodep","bottom");
  List<String> unsupported=Lists.newLinkedList();
  List<FeatureResource> resources=registry.getFeatureResources(ctx,needed,unsupported).getResources();
  assertEquals(0,resources.size());
  assertEquals(0,unsupported.size());
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testTransitiveFeatureResourcesGadget() throws Exception {
  checkTransitiveFeatureResources("gadget",RenderingContext.GADGET);
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void registerFromFileFeatureXmlNoScheme() throws Exception {
  checkRegisterFromFileFeatureXml(false);
}

</code></pre>

<pre class="type-9 type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void registerFromFileInNestedDirectoryFeatureXmlFile() throws Exception {
  File tmpFile=File.createTempFile("dummy",".dat");
  tmpFile.deleteOnExit();
  File parentDir=tmpFile.getParentFile();
  String childDirName=String.valueOf(Math.random());
  File childDir=new File(parentDir,childDirName);
  childDir.mkdirs();
  childDir.deleteOnExit();
  File featureDir=new File(childDir,"thefeature");
  featureDir.mkdirs();
  featureDir.deleteOnExit();
  File resFile=File.createTempFile("content",".js",featureDir);
  resFile.deleteOnExit();
  String content="content-foo";
  BufferedWriter out=new BufferedWriter(new FileWriter(resFile));
  out.write(content);
  out.close();
  File featureFile=File.createTempFile("feature",".xml",featureDir);
  featureFile.deleteOnExit();
  out=new BufferedWriter(new FileWriter(featureFile));
  out.write(xml(NODEP_TPL,"gadget",resFile.toURI().toString(),null));
  out.close();
  registry=TestFeatureRegistry.newBuilder().build(childDir.toURI().toString());
  List<FeatureResource> resources=registry.getAllFeatures().getResources();
  assertEquals(1,resources.size());
  assertEquals(content,resources.get(0).getContent());
}

</code></pre>

<pre class="type-9 type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void registerFromResourceIndex() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  String content1="content1()";
  Uri content1Uri=builder.expectResource(content1);
  Uri feature1Uri=builder.expectResource(xml(MID_A_TPL,"gadget",content1Uri.getPath(),null));
  String content2="inline()";
  Uri feature2Uri=builder.expectResource(xml(BOTTOM_TPL,"gadget",null,content2));
  Uri txtFile=builder.expectResource(feature1Uri.toString() + '\n' + feature2Uri.toString(),".txt");
  registry=builder.build(txtFile.toString());
  List<FeatureResource> resources=registry.getAllFeatures().getResources();
  assertEquals(2,resources.size());
  assertEquals(content2,resources.get(0).getContent());
  assertEquals(content1,resources.get(1).getContent());
}

</code></pre>

<pre class="type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies that exceptions are thrown during the test case execution
- Executes methods or other tests from the same test unit
"></span><br>
@Test(expected=GadgetException.class) public void testCheckDependencyLoopWithPartialLoopDependencyError() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  Uri featureA, featureB, featureC, featureD, txtFile;
  featureA=builder.expectResource("<feature>" + "<name>featureA</name>" + "<dependency>featureB</dependency>"+ "<gadget>"+ "  <script>top();gadget();</script>"+ "</gadget>"+ "<all>"+ "  <script>top();all();</script>"+ "</all>"+ "</feature>");
  featureB=builder.expectResource("<feature>" + "<name>featureB</name>" + "<dependency>featureC</dependency>"+ "<container>"+ "  <script>mid_a();container();</script>"+ "</container>"+ "<all>"+ "  <script>mid_a();all();</script>"+ "</all>"+ "</feature>");
  featureC=builder.expectResource("<feature>" + "<name>featureC</name>" + "<dependency>featureD</dependency>"+ "<container>"+ "  <script>mid_b();container();</script>"+ "</container>"+ "<gadget>"+ "  <script>mid_b();gadget();</script>"+ "</gadget>"+ "</feature>");
  featureD=builder.expectResource("<feature>" + "<name>featureD</name>" + "<dependency>featureC</dependency>"+ "<all>"+ "  <script>bottom();all();</script>"+ "</all>"+ "</feature>");
  txtFile=builder.expectResource(featureA.toString() + '\n' + featureB.toString()+ '\n'+ featureC.toString()+ '\n'+ featureD.toString(),".txt");
  registry=builder.build(txtFile.toString());
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void unavailableFeatureCrashes() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  Uri featUri=builder.expectResource(xml(BAD_DEP_TPL,"gadget",null,"content"));
  try {
    registry=builder.build(featUri.toString());
  }
 catch (  GadgetException e) {
    assertEquals(GadgetException.Code.INVALID_CONFIG,e.getCode());
  }
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void selectNoContentValidFeatureResourcesContainer() throws Exception {
  checkNoContentValidFeatureResources("container",RenderingContext.GADGET);
}

</code></pre>

<pre class="type-9 type-5 type-12 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cacheAccountsForContext() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  String content1="content1()";
  Uri content1Uri=builder.expectResource(content1);
  Map<String,String> attribs=Maps.newHashMap();
  String theContainer="the-container";
  attribs.put("container",theContainer);
  Uri feature1Uri=builder.expectResource(xml(BOTTOM_TPL,"gadget",content1Uri.getPath(),null,attribs));
  registry=builder.build(feature1Uri.toString());
  List<String> needed=Lists.newArrayList("bottom");
  List<String> unsupported=Lists.newArrayList();
  List<FeatureResource> resources=registry.getFeatureResources(getCtx(RenderingContext.GADGET,theContainer),needed,unsupported).getResources();
  List<FeatureResource> resourcesNoMatch=registry.getFeatureResources(getCtx(RenderingContext.GADGET,"foo"),needed,unsupported).getResources();
  List<FeatureResource> ctxMismatch=registry.getFeatureResources(getCtx(RenderingContext.CONTAINER,theContainer),needed,unsupported).getResources();
  assertNotSame(resources,resourcesNoMatch);
  assertNotSame(resources,ctxMismatch);
  assertEquals(1,resources.size());
  assertEquals(content1,resources.get(0).getContent());
  assertEquals(0,resourcesNoMatch.size());
  assertEquals(0,ctxMismatch.size());
  List<FeatureResource> resources2=registry.getFeatureResources(getCtx(RenderingContext.GADGET,theContainer),needed,unsupported).getResources();
  assertSame(resources,resources2);
  List<FeatureResource> resourcesNoMatch2=registry.getFeatureResources(getCtx(RenderingContext.GADGET,"foo"),needed,unsupported).getResources();
  assertSame(resourcesNoMatch,resourcesNoMatch2);
  List<FeatureResource> ctxMismatch2=registry.getFeatureResources(getCtx(RenderingContext.CONTAINER,theContainer),needed,unsupported).getResources();
  assertSame(ctxMismatch,ctxMismatch2);
  List<FeatureResource> resourcesIC=registry.getFeatureResources(getCtx(RenderingContext.GADGET,theContainer,true),needed,unsupported).getResources();
  assertNotSame(resources,resourcesIC);
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getFeaturesStringsNoTransitive() throws Exception {
  setupFullRegistry("gadget",null);
  List<String> needed=Lists.newArrayList("nodep","bottom");
  List<String> featureNames=registry.getFeatures(needed);
  assertEquals(2,featureNames.size());
  assertEquals("nodep",featureNames.get(0));
  assertEquals("bottom",featureNames.get(1));
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getFeaturesStringsTransitive() throws Exception {
  setupFullRegistry("gadget",null);
  List<String> needed=Lists.newArrayList("top","nodep");
  List<String> featureNames=registry.getFeatures(needed);
  assertEquals(5,featureNames.size());
  assertEquals("bottom",featureNames.get(0));
  assertEquals("mid_a",featureNames.get(1));
  assertEquals("mid_b",featureNames.get(2));
  assertEquals("top",featureNames.get(3));
  assertEquals("nodep",featureNames.get(4));
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void getFeatureResourcesNoTransitiveSingle() throws Exception {
  setupFullRegistry("gadget",null);
  GadgetContext ctx=getCtx(RenderingContext.GADGET,null);
  List<String> needed=Lists.newArrayList("top","bottom");
  List<String> unsupported=Lists.newLinkedList();
  List<FeatureResource> resources=registry.getFeatureResources(ctx,needed,unsupported,false).getResources();
  assertEquals(2,resources.size());
  assertEquals("top",resources.get(0).getContent());
  assertEquals("bottom",resources.get(1).getContent());
  assertEquals(0,unsupported.size());
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void selectExactFeatureResourcesGadget() throws Exception {
  checkExactFeatureResources("gadget",RenderingContext.GADGET);
}

</code></pre>

<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void missingFileResultsInException() throws Exception {
  try {
    registry=TestFeatureRegistry.newBuilder().build(new UriBuilder().setScheme("file").setPath("/is/not/there.foo.xml").toUri().toString());
    fail("Should have thrown missing .xml file exception");
  }
 catch (  GadgetException e) {
    assertEquals(GadgetException.Code.INVALID_CONFIG,e.getCode());
  }
}

</code></pre>

<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void loopIsDetectedAndCrashes() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  String type="gadget";
  Uri loopAUri=builder.expectResource(xml(LOOP_A_TPL,type,null,"loop_a"));
  Uri loopBUri=builder.expectResource(xml(LOOP_B_TPL,type,null,"loop_b"));
  Uri loopCUri=builder.expectResource(xml(LOOP_C_TPL,type,null,"loop_c"));
  Uri txtFile=builder.expectResource(loopAUri.toString() + '\n' + loopBUri.toString()+ '\n'+ loopCUri.toString(),".txt");
  try {
    registry=builder.build(txtFile.toString());
    fail("Should have thrown a loop-detected exception");
  }
 catch (  GadgetException e) {
    assertEquals(GadgetException.Code.INVALID_CONFIG,e.getCode());
  }
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testGetGadgetFromMixedRegistry() throws Exception {
  setupMixedFullRegistry();
  GadgetContext ctx=getCtx(RenderingContext.GADGET,null);
  List<String> needed=Lists.newArrayList("top");
  List<String> unsupported=Lists.newLinkedList();
  List<FeatureResource> resources=registry.getFeatureResources(ctx,needed,unsupported).getResources();
  assertEquals(4,resources.size());
  assertEquals("bottom();all();",resources.get(0).getContent());
  assertEquals("mid_b();gadget();",resources.get(1).getContent());
  assertEquals("mid_a();all();",resources.get(2).getContent());
  assertEquals("top();gadget();",resources.get(3).getContent());
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void registerFromResourceFeatureXml() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  String content="resource-content()";
  Uri contentUri=builder.expectResource(content);
  Uri featureUri=builder.expectResource(xml(NODEP_TPL,"gadget",contentUri.getPath(),null));
  builder.addFeatureFile(featureUri.toString());
  registry=builder.build();
  List<FeatureResource> resources=registry.getAllFeatures().getResources();
  assertEquals(1,resources.size());
  assertEquals(content,resources.get(0).getContent());
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void selectNoContentValidFeatureResourcesGadget() throws Exception {
  checkNoContentValidFeatureResources("gadget",RenderingContext.CONTAINER);
}

</code></pre>

<pre class="type-7 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void missingIndexResultsInException() throws Exception {
  try {
    registry=TestFeatureRegistry.newBuilder().build(makeResourceUri(".txt").toString());
    fail("Should have thrown an exception for missing .txt file");
  }
 catch (  GadgetException e) {
    assertEquals(GadgetException.Code.INVALID_PATH,e.getCode());
  }
}

</code></pre>

<pre class="type-9 type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void returnOnlyContainerFilteredJs() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  String feature="thefeature";
  String container="foo";
  String containerContent="content1();";
  String defaultContent="content2();";
  Uri featureUri=builder.expectResource(getContainerAndDefaultTpl(feature,container,containerContent,defaultContent));
  registry=builder.build(featureUri.toString());
  List<String> needed=Lists.newArrayList(feature);
  List<String> unsupported=Lists.newLinkedList();
  List<FeatureResource> resources=registry.getFeatureResources(getCtx(RenderingContext.GADGET,container),needed,unsupported).getResources();
  assertEquals(1,resources.size());
  assertEquals(containerContent,resources.get(0).getContent());
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void selectExactFeatureResourcesContainer() throws Exception {
  checkExactFeatureResources("container",RenderingContext.CONTAINER);
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void filterFeaturesByContainerMatch() throws Exception {
  setupFullRegistry("gadget","one, two , three");
  GadgetContext ctx=getCtx(RenderingContext.GADGET,"two");
  List<String> needed=Lists.newArrayList("nodep","bottom");
  List<String> unsupported=Lists.newLinkedList();
  List<FeatureResource> resources=registry.getFeatureResources(ctx,needed,unsupported).getResources();
  assertEquals(2,resources.size());
  assertEquals("nodep",resources.get(0).getContent());
  assertEquals("bottom",resources.get(1).getContent());
  assertEquals(0,unsupported.size());
}

</code></pre>

<pre class="type-9 type-5 type-12 type-1 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void cacheAccountsForUnsupportedState() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  String content1="content1()";
  Uri content1Uri=builder.expectResource(content1);
  Map<String,String> attribs=Maps.newHashMap();
  String theContainer="the-container";
  attribs.put("container",theContainer);
  Uri feature1Uri=builder.expectResource(xml(BOTTOM_TPL,"gadget",content1Uri.getPath(),null,attribs));
  registry=builder.build(feature1Uri.toString());
  List<String> needed=Lists.newArrayList("bottom");
  List<String> unsupported=Lists.newArrayList();
  List<FeatureResource> resources=registry.getFeatureResources(getCtx(RenderingContext.GADGET,theContainer),needed,unsupported).getResources();
  List<FeatureResource> resourcesUnsup=registry.getFeatureResources(getCtx(RenderingContext.GADGET,theContainer),needed,null).getResources();
  assertNotSame(resources,resourcesUnsup);
  assertEquals(resources,resourcesUnsup);
  assertEquals(1,resources.size());
  assertEquals(content1,resources.get(0).getContent());
  List<FeatureResource> resources2=registry.getFeatureResources(getCtx(RenderingContext.GADGET,theContainer),needed,unsupported).getResources();
  assertSame(resources,resources2);
  List<FeatureResource> resourcesUnsup2=registry.getFeatureResources(getCtx(RenderingContext.GADGET,theContainer),needed,null).getResources();
  assertSame(resourcesUnsup,resourcesUnsup2);
  List<FeatureResource> resourcesIgnoreCache=registry.getFeatureResources(getCtx(RenderingContext.GADGET,theContainer,true),needed,unsupported).getResources();
  assertNotSame(resources,resourcesIgnoreCache);
  assertEquals(1,resourcesIgnoreCache.size());
  assertEquals(content1,resourcesIgnoreCache.get(0).getContent());
}

</code></pre>

<pre class="type-9 type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void returnDefaultMatchJs() throws Exception {
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  String feature="thefeature";
  String container="foo";
  String containerContent="content1();";
  String defaultContent="content2();";
  Uri featureUri=builder.expectResource(getContainerAndDefaultTpl(feature,container,containerContent,defaultContent));
  registry=builder.build(featureUri.toString());
  List<String> needed=Lists.newArrayList(feature);
  List<String> unsupported=Lists.newLinkedList();
  List<FeatureResource> resources=registry.getFeatureResources(getCtx(RenderingContext.GADGET,"othercontainer"),needed,unsupported).getResources();
  assertEquals(1,resources.size());
  assertEquals(defaultContent,resources.get(0).getContent());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testCheckDependencyLoopWithNormalDependency(){
  TestFeatureRegistry.Builder builder=TestFeatureRegistry.newBuilder();
  Uri featureA, featureB, featureC, featureD, txtFile;
  featureA=builder.expectResource("<feature>" + "<name>featureA</name>" + "<dependency>featureB</dependency>"+ "<gadget>"+ "  <script>top();gadget();</script>"+ "</gadget>"+ "<all>"+ "  <script>top();all();</script>"+ "</all>"+ "</feature>");
  featureB=builder.expectResource("<feature>" + "<name>featureB</name>" + "<dependency>featureC</dependency>"+ "<container>"+ "  <script>mid_a();container();</script>"+ "</container>"+ "<all>"+ "  <script>mid_a();all();</script>"+ "</all>"+ "</feature>");
  featureC=builder.expectResource("<feature>" + "<name>featureC</name>" + "<dependency>featureD</dependency>"+ "<container>"+ "  <script>mid_b();container();</script>"+ "</container>"+ "<gadget>"+ "  <script>mid_b();gadget();</script>"+ "</gadget>"+ "</feature>");
  featureD=builder.expectResource("<feature>" + "<name>featureD</name>" + "<all>"+ "  <script>bottom();all();</script>"+ "</all>"+ "</feature>");
  txtFile=builder.expectResource(featureA.toString() + '\n' + featureB.toString()+ '\n'+ featureC.toString()+ '\n'+ featureD.toString(),".txt");
  try {
    registry=builder.build(txtFile.toString());
  }
 catch (  GadgetException e) {
    fail("Shouldn't throw a GadgetException.");
  }
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
