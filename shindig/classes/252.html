<h3 style="margin:0px">Class: org.apache.shindig.gadgets.uri.DefaultIframeUriManagerTest (22 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(22)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(21)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(16)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(16)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(16)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(9)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-9 type-5 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void ldAddedForcedAlways() throws Exception {
  Gadget gadget=mockGadget();
  TestDefaultIframeUriManager manager=makeManager(false,true);
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals("",uri.getScheme());
  assertEquals(LD_PREFIX + LD_SUFFIX,uri.getAuthority());
  assertEquals(IFRAME_PATH,uri.getPath());
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,uri.getQueryParameters().size());
  assertEquals(0,uri.getFragmentParameters().size());
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals("",htmlGadgetUri.getScheme());
  assertEquals(LD_PREFIX + LD_SUFFIX,htmlGadgetUri.getAuthority());
  assertEquals(IFRAME_PATH,htmlGadgetUri.getPath());
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,htmlGadgetUri.getQueryParameters().size());
  assertEquals(0,htmlGadgetUri.getFragmentParameters().size());
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals("http",urlGadgetUri.getScheme());
  assertEquals("example.com",urlGadgetUri.getAuthority());
  assertEquals("/gadget.xml",urlGadgetUri.getPath());
  assertEquals(TYPE_URL_NUM_BASE_PARAMS,urlGadgetUri.getQueryParameters().size());
  assertEquals(0,urlGadgetUri.getFragmentParameters().size());
}

</code></pre>

<pre class="type-9 type-5 type-6 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void typeUrlDefaultOptions() throws Exception {
  String gadgetSite="http://example.com/gadget";
  String prefKey="prefKey";
  String prefVal="prefVal";
  Map<String,String> prefs=Maps.newHashMap();
  prefs.put(prefKey,prefVal);
  List<String> features=Lists.newArrayList("rpc","setprefs");
  Gadget gadget=mockGadget(gadgetSite,true,true,true,true,false,prefs,prefs,false,features);
  TestDefaultIframeUriManager manager=makeManager(false,false);
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals("http",uri.getScheme());
  assertEquals("example.com",uri.getAuthority());
  assertEquals("/gadget",uri.getPath());
  assertEquals(CONTAINER,uri.getQueryParameter(Param.CONTAINER.getKey()));
  assertEquals(VIEW,uri.getQueryParameter(Param.VIEW.getKey()));
  assertEquals(LANG,uri.getQueryParameter(Param.LANG.getKey()));
  assertEquals(COUNTRY,uri.getQueryParameter(Param.COUNTRY.getKey()));
  assertEquals(JS_HOST + JS_PATH + "/rpc:setprefs"+ DefaultJsUriManager.JS_SUFFIX,uri.getQueryParameter(Param.LIBS.getKey()));
  assertEquals("1",uri.getQueryParameter(Param.DEBUG.getKey()));
  assertEquals("1",uri.getQueryParameter(Param.NO_CACHE.getKey()));
  assertEquals("1",uri.getQueryParameter(Param.SANITIZE.getKey()));
  assertEquals(prefVal,uri.getFragmentParameter("up_" + prefKey));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS,uri.getQueryParameters().size());
  assertEquals(1,uri.getFragmentParameters().size());
  assertFalse(manager.tokenForRenderingCalled());
  assertFalse(manager.schemeCalled());
  assertTrue(manager.addExtrasCalled());
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals("http",urlGadgetUri.getScheme());
  assertEquals("example.com",urlGadgetUri.getAuthority());
  assertEquals("/gadget",urlGadgetUri.getPath());
  assertEquals(CONTAINER,urlGadgetUri.getQueryParameter(Param.CONTAINER.getKey()));
  assertEquals(VIEW,urlGadgetUri.getQueryParameter(Param.VIEW.getKey()));
  assertEquals(LANG,urlGadgetUri.getQueryParameter(Param.LANG.getKey()));
  assertEquals(COUNTRY,urlGadgetUri.getQueryParameter(Param.COUNTRY.getKey()));
  assertEquals(JS_HOST + JS_PATH + "/rpc:setprefs"+ DefaultJsUriManager.JS_SUFFIX,urlGadgetUri.getQueryParameter(Param.LIBS.getKey()));
  assertEquals("1",urlGadgetUri.getQueryParameter(Param.DEBUG.getKey()));
  assertEquals("1",urlGadgetUri.getQueryParameter(Param.NO_CACHE.getKey()));
  assertEquals("1",urlGadgetUri.getQueryParameter(Param.SANITIZE.getKey()));
  assertEquals(prefVal,urlGadgetUri.getFragmentParameter("up_" + prefKey));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS,urlGadgetUri.getQueryParameters().size());
  assertEquals(1,urlGadgetUri.getFragmentParameters().size());
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals("",htmlGadgetUri.getScheme());
  assertEquals(UNLOCKED_DOMAIN,htmlGadgetUri.getAuthority());
  assertEquals(IFRAME_PATH,htmlGadgetUri.getPath());
  assertEquals(CONTAINER,htmlGadgetUri.getQueryParameter(Param.CONTAINER.getKey()));
  assertEquals(ANOTHER_VIEW,htmlGadgetUri.getQueryParameter(Param.VIEW.getKey()));
  assertEquals(LANG,htmlGadgetUri.getQueryParameter(Param.LANG.getKey()));
  assertEquals(COUNTRY,htmlGadgetUri.getQueryParameter(Param.COUNTRY.getKey()));
  assertNull(htmlGadgetUri.getQueryParameter(Param.LIBS.getKey()));
  assertEquals("1",htmlGadgetUri.getQueryParameter(Param.DEBUG.getKey()));
  assertEquals("1",htmlGadgetUri.getQueryParameter(Param.NO_CACHE.getKey()));
  assertEquals("1",htmlGadgetUri.getQueryParameter(Param.SANITIZE.getKey()));
  assertEquals(prefVal,htmlGadgetUri.getQueryParameter("up_" + prefKey));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS + 1,htmlGadgetUri.getQueryParameters().size());
  assertEquals(0,htmlGadgetUri.getFragmentParameters().size());
  assertFalse(manager.tokenForRenderingCalled());
  assertTrue(manager.schemeCalled());
  assertTrue(manager.addExtrasCalled());
}

</code></pre>

<pre class="type-9 type-5 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void versionAddedWithVersioner() throws Exception {
  String version="abcdlkjwef";
  Gadget gadget=mockGadget();
  TestDefaultIframeUriManager manager=makeManager(false,false);
  manager.setVersioner(this.mockVersioner(version,true));
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS + 1,uri.getQueryParameters().size());
  assertEquals(version,uri.getQueryParameter(Param.VERSION.getKey()));
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS + 1,htmlGadgetUri.getQueryParameters().size());
  assertEquals(version,htmlGadgetUri.getQueryParameter(Param.VERSION.getKey()));
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS + 1,urlGadgetUri.getQueryParameters().size());
  assertEquals(version,urlGadgetUri.getQueryParameter(Param.VERSION.getKey()));
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void badUriValidatingUri() throws Exception {
  Uri uri=new UriBuilder().addQueryParameter(Param.URL.getKey(),"^':   bad:").toUri();
  TestDefaultIframeUriManager manager=makeManager(false,false);
  UriStatus status=manager.validateRenderingUri(uri);
  assertEquals(UriStatus.BAD_URI,status);
}

</code></pre>

<pre class="type-5 type-6 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void honorSchemeOverride() throws Exception {
  String scheme="file";
  Gadget gadget=mockGadget();
  TestDefaultIframeUriManager manager=makeManager(false,false);
  manager.setScheme(scheme);
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals(scheme,uri.getScheme());
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  assertEquals(scheme,new UriBuilder(uris.get(VIEW)).getScheme());
  assertFalse(scheme.equalsIgnoreCase(new UriBuilder(uris.get(ANOTHER_VIEW)).getScheme()));
}

</code></pre>

<pre class="type-9 type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionerVersionMatch() throws Exception {
  String version="abcdefg";
  Uri uri=makeValidationTestUri(LD_PREFIX + LD_SUFFIX,version);
  DefaultIframeUriManager manager=makeManager(false,false);
  manager.setVersioner(mockVersioner(version,true));
  assertEquals(UriStatus.VALID_VERSIONED,manager.validateRenderingUri(uri));
}

</code></pre>

<pre class="type-9 type-5 type-6 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void securityTokenAddedWhenGadgetNeedsItFragment() throws Exception {
  Gadget gadget=mockGadget(SECURITY_TOKEN_FEATURE_NAME);
  TestDefaultIframeUriManager manager=makeManager(false,false);
  manager.setTokenForRendering(false);
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,uri.getQueryParameters().size());
  assertEquals(1,uri.getFragmentParameters().size());
  assertEquals(tplKey(Param.SECURITY_TOKEN.getKey()),uri.getFragmentParameter(Param.SECURITY_TOKEN.getKey()));
  assertTrue(manager.tokenForRenderingCalled());
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,htmlGadgetUri.getQueryParameters().size());
  assertEquals(1,htmlGadgetUri.getFragmentParameters().size());
  assertEquals(tplKey(Param.SECURITY_TOKEN.getKey()),htmlGadgetUri.getFragmentParameter(Param.SECURITY_TOKEN.getKey()));
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS,urlGadgetUri.getQueryParameters().size());
  assertEquals(1,urlGadgetUri.getFragmentParameters().size());
  assertEquals(tplKey(Param.SECURITY_TOKEN.getKey()),urlGadgetUri.getFragmentParameter(Param.SECURITY_TOKEN.getKey()));
  assertTrue(manager.tokenForRenderingCalled());
}

</code></pre>

<pre class="type-9 type-5 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userPrefsAddedFragment() throws Exception {
  Map<String,String> specPrefs=Maps.newHashMap();
  specPrefs.put("specKey1","specDefault1");
  specPrefs.put("specKey2","specDefault2");
  Map<String,String> inPrefs=Maps.newHashMap();
  inPrefs.put("specKey1","inVal1");
  inPrefs.put("otherKey1","inVal2");
  Gadget gadget=mockGadget(false,specPrefs,inPrefs);
  TestDefaultIframeUriManager manager=makeManager(false,false);
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,uri.getQueryParameters().size());
  assertEquals(2,uri.getFragmentParameters().size());
  assertEquals("inVal1",uri.getFragmentParameter("up_specKey1"));
  assertEquals("specDefault2",uri.getFragmentParameter("up_specKey2"));
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,htmlGadgetUri.getQueryParameters().size());
  assertEquals(2,htmlGadgetUri.getFragmentParameters().size());
  assertEquals("inVal1",htmlGadgetUri.getFragmentParameter("up_specKey1"));
  assertEquals("specDefault2",htmlGadgetUri.getFragmentParameter("up_specKey2"));
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS + 2,urlGadgetUri.getQueryParameters().size());
  assertEquals(0,urlGadgetUri.getFragmentParameters().size());
  assertEquals("inVal1",urlGadgetUri.getQueryParameter("up_specKey1"));
  assertEquals("specDefault2",urlGadgetUri.getQueryParameter("up_specKey2"));
}

</code></pre>

<pre class="type-9 type-5 type-6 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void securityTokenAddedWhenGadgetNeedsItQuery() throws Exception {
  Gadget gadget=mockGadget(SECURITY_TOKEN_FEATURE_NAME);
  TestDefaultIframeUriManager manager=makeManager(false,false);
  manager.setTokenForRendering(true);
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS + 1,uri.getQueryParameters().size());
  assertEquals(0,uri.getFragmentParameters().size());
  assertEquals(tplKey(Param.SECURITY_TOKEN.getKey()),uri.getQueryParameter(Param.SECURITY_TOKEN.getKey()));
  assertTrue(manager.tokenForRenderingCalled());
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS + 1,htmlGadgetUri.getQueryParameters().size());
  assertEquals(0,htmlGadgetUri.getFragmentParameters().size());
  assertEquals(tplKey(Param.SECURITY_TOKEN.getKey()),htmlGadgetUri.getQueryParameter(Param.SECURITY_TOKEN.getKey()));
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS + 1,urlGadgetUri.getQueryParameters().size());
  assertEquals(0,urlGadgetUri.getFragmentParameters().size());
  assertEquals(tplKey(Param.SECURITY_TOKEN.getKey()),urlGadgetUri.getQueryParameter(Param.SECURITY_TOKEN.getKey()));
  assertTrue(manager.tokenForRenderingCalled());
}

</code></pre>

<pre class="type-9 type-5 type-6 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void typeHtmlBasicOptions() throws Exception {
  String prefKey="prefKey";
  String prefVal="prefVal";
  Map<String,String> prefs=Maps.newHashMap();
  prefs.put(prefKey,prefVal);
  List<String> features=Lists.newArrayList();
  Gadget gadget=mockGadget(SPEC_URI.toString(),false,false,false,false,false,prefs,prefs,false,features);
  TestDefaultIframeUriManager manager=makeManager(false,false);
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals("",uri.getScheme());
  assertEquals(UNLOCKED_DOMAIN,uri.getAuthority());
  assertEquals(IFRAME_PATH,uri.getPath());
  assertEquals(SPEC_URI.toString(),uri.getQueryParameter(Param.URL.getKey()));
  assertEquals(CONTAINER,uri.getQueryParameter(Param.CONTAINER.getKey()));
  assertEquals(VIEW,uri.getQueryParameter(Param.VIEW.getKey()));
  assertEquals(LANG,uri.getQueryParameter(Param.LANG.getKey()));
  assertEquals(COUNTRY,uri.getQueryParameter(Param.COUNTRY.getKey()));
  assertEquals("0",uri.getQueryParameter(Param.DEBUG.getKey()));
  assertEquals("0",uri.getQueryParameter(Param.NO_CACHE.getKey()));
  assertEquals("0",uri.getQueryParameter(Param.SANITIZE.getKey()));
  assertEquals(prefVal,uri.getFragmentParameter("up_" + prefKey));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,uri.getQueryParameters().size());
  assertEquals(1,uri.getFragmentParameters().size());
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals("",htmlGadgetUri.getScheme());
  assertEquals(UNLOCKED_DOMAIN,htmlGadgetUri.getAuthority());
  assertEquals(IFRAME_PATH,htmlGadgetUri.getPath());
  assertEquals(SPEC_URI.toString(),htmlGadgetUri.getQueryParameter(Param.URL.getKey()));
  assertEquals(CONTAINER,htmlGadgetUri.getQueryParameter(Param.CONTAINER.getKey()));
  assertEquals(VIEW,htmlGadgetUri.getQueryParameter(Param.VIEW.getKey()));
  assertEquals(LANG,htmlGadgetUri.getQueryParameter(Param.LANG.getKey()));
  assertEquals(COUNTRY,htmlGadgetUri.getQueryParameter(Param.COUNTRY.getKey()));
  assertEquals("0",htmlGadgetUri.getQueryParameter(Param.DEBUG.getKey()));
  assertEquals("0",htmlGadgetUri.getQueryParameter(Param.NO_CACHE.getKey()));
  assertEquals("0",htmlGadgetUri.getQueryParameter(Param.SANITIZE.getKey()));
  assertEquals(prefVal,htmlGadgetUri.getFragmentParameter("up_" + prefKey));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,htmlGadgetUri.getQueryParameters().size());
  assertEquals(1,htmlGadgetUri.getFragmentParameters().size());
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals("http",urlGadgetUri.getScheme());
  assertEquals("example.com",urlGadgetUri.getAuthority());
  assertEquals("/gadget.xml",urlGadgetUri.getPath());
  assertNull(urlGadgetUri.getQueryParameter(Param.URL.getKey()));
  assertEquals(CONTAINER,urlGadgetUri.getQueryParameter(Param.CONTAINER.getKey()));
  assertEquals(ANOTHER_VIEW,urlGadgetUri.getQueryParameter(Param.VIEW.getKey()));
  assertEquals(LANG,urlGadgetUri.getQueryParameter(Param.LANG.getKey()));
  assertEquals(COUNTRY,urlGadgetUri.getQueryParameter(Param.COUNTRY.getKey()));
  assertEquals("0",urlGadgetUri.getQueryParameter(Param.DEBUG.getKey()));
  assertEquals("0",urlGadgetUri.getQueryParameter(Param.NO_CACHE.getKey()));
  assertEquals("0",urlGadgetUri.getQueryParameter(Param.SANITIZE.getKey()));
  assertEquals(prefVal,urlGadgetUri.getQueryParameter("up_" + prefKey));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS + 1,urlGadgetUri.getQueryParameters().size());
  assertEquals(0,urlGadgetUri.getFragmentParameters().size());
  assertFalse(manager.tokenForRenderingCalled());
  assertTrue(manager.schemeCalled());
  assertTrue(manager.addExtrasCalled());
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void validUnversionedNoVersion() throws Exception {
  Uri uri=makeValidationTestUri(LD_PREFIX + LD_SUFFIX,null);
  DefaultIframeUriManager manager=makeManager(false,false);
  manager.setVersioner(this.mockVersioner("version",false));
  assertEquals(UriStatus.VALID_UNVERSIONED,manager.validateRenderingUri(uri));
}

</code></pre>

<pre class="type-9 type-5 type-6 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void typeHtmlCajoled() throws Exception {
  String prefKey="prefKey";
  String prefVal="prefVal";
  Map<String,String> prefs=Maps.newHashMap();
  prefs.put(prefKey,prefVal);
  List<String> features=Lists.newArrayList();
  Gadget gadget=mockGadget(SPEC_URI.toString(),false,false,false,false,true,prefs,prefs,false,features);
  TestDefaultIframeUriManager manager=makeManager(false,false);
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals("0",uri.getQueryParameter(Param.SANITIZE.getKey()));
  assertEquals("1",uri.getQueryParameter(Param.CAJOLE.getKey()));
  assertEquals(prefVal,uri.getFragmentParameter("up_" + prefKey));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS + 1,uri.getQueryParameters().size());
  assertEquals(1,uri.getFragmentParameters().size());
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals("0",htmlGadgetUri.getQueryParameter(Param.SANITIZE.getKey()));
  assertEquals("1",htmlGadgetUri.getQueryParameter(Param.CAJOLE.getKey()));
  assertEquals(prefVal,htmlGadgetUri.getFragmentParameter("up_" + prefKey));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS + 1,htmlGadgetUri.getQueryParameters().size());
  assertEquals(1,htmlGadgetUri.getFragmentParameters().size());
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals("0",urlGadgetUri.getQueryParameter(Param.SANITIZE.getKey()));
  assertEquals("1",urlGadgetUri.getQueryParameter(Param.CAJOLE.getKey()));
  assertEquals(prefVal,urlGadgetUri.getQueryParameter("up_" + prefKey));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS + 2,urlGadgetUri.getQueryParameters().size());
  assertEquals(0,urlGadgetUri.getFragmentParameters().size());
  assertFalse(manager.tokenForRenderingCalled());
  assertTrue(manager.schemeCalled());
  assertTrue(manager.addExtrasCalled());
}

</code></pre>

<pre class="type-9 type-5 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void ldAddedGadgetRequests() throws Exception {
  Gadget gadget=mockGadget(LOCKED_DOMAIN_FEATURE_NAME);
  TestDefaultIframeUriManager manager=makeManager(false,false,true);
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals("",uri.getScheme());
  assertEquals(LD_PREFIX + LD_SUFFIX,uri.getAuthority());
  assertEquals(IFRAME_PATH,uri.getPath());
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,uri.getQueryParameters().size());
  assertEquals(0,uri.getFragmentParameters().size());
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals("",htmlGadgetUri.getScheme());
  assertEquals(LD_PREFIX + LD_SUFFIX,htmlGadgetUri.getAuthority());
  assertEquals(IFRAME_PATH,htmlGadgetUri.getPath());
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,htmlGadgetUri.getQueryParameters().size());
  assertEquals(0,htmlGadgetUri.getFragmentParameters().size());
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals("http",urlGadgetUri.getScheme());
  assertEquals("example.com",urlGadgetUri.getAuthority());
  assertEquals("/gadget.xml",urlGadgetUri.getPath());
  assertEquals(TYPE_URL_NUM_BASE_PARAMS,urlGadgetUri.getQueryParameters().size());
  assertEquals(0,urlGadgetUri.getFragmentParameters().size());
}

</code></pre>

<pre class="type-9 type-5 type-6 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void typeUrlDefaultOptionsTpl() throws Exception {
  String gadgetSite="http://example.com/gadget";
  String prefKey="prefKey";
  String prefVal="prefVal";
  Map<String,String> prefs=Maps.newHashMap();
  prefs.put(prefKey,prefVal);
  List<String> features=Lists.newArrayList();
  Gadget gadget=mockGadget(gadgetSite,true,true,true,true,false,prefs,prefs,false,features);
  TestDefaultIframeUriManager managerTpl=makeManager(false,false);
  managerTpl.setTemplatingSignal(tplSignal(true));
  Uri resultTpl=managerTpl.makeRenderingUri(gadget);
  assertNotNull(resultTpl);
  UriBuilder uriTpl=new UriBuilder(resultTpl);
  assertEquals("http",uriTpl.getScheme());
  assertEquals("example.com",uriTpl.getAuthority());
  assertEquals("/gadget",uriTpl.getPath());
  assertEquals(CONTAINER,uriTpl.getQueryParameter(Param.CONTAINER.getKey()));
  assertEquals("",uriTpl.getQueryParameter(Param.LIBS.getKey()));
  assertEquals(tplKey(Param.VIEW.getKey()),uriTpl.getQueryParameter(Param.VIEW.getKey()));
  assertEquals(tplKey(Param.LANG.getKey()),uriTpl.getQueryParameter(Param.LANG.getKey()));
  assertEquals(tplKey(Param.COUNTRY.getKey()),uriTpl.getQueryParameter(Param.COUNTRY.getKey()));
  assertEquals(tplKey(Param.DEBUG.getKey()),uriTpl.getQueryParameter(Param.DEBUG.getKey()));
  assertEquals(tplKey(Param.NO_CACHE.getKey()),uriTpl.getQueryParameter(Param.NO_CACHE.getKey()));
  assertEquals(tplKey("up_" + prefKey),uriTpl.getFragmentParameter("up_" + prefKey));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS,uriTpl.getQueryParameters().size());
  assertEquals(1,uriTpl.getFragmentParameters().size());
  assertFalse(managerTpl.tokenForRenderingCalled());
  assertFalse(managerTpl.schemeCalled());
  assertTrue(managerTpl.addExtrasCalled());
  Map<String,Uri> uris=managerTpl.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals("http",urlGadgetUri.getScheme());
  assertEquals("example.com",urlGadgetUri.getAuthority());
  assertEquals("/gadget",urlGadgetUri.getPath());
  assertEquals(CONTAINER,urlGadgetUri.getQueryParameter(Param.CONTAINER.getKey()));
  assertEquals("",urlGadgetUri.getQueryParameter(Param.LIBS.getKey()));
  assertEquals(tplKey(Param.VIEW.getKey()),urlGadgetUri.getQueryParameter(Param.VIEW.getKey()));
  assertEquals(tplKey(Param.LANG.getKey()),urlGadgetUri.getQueryParameter(Param.LANG.getKey()));
  assertEquals(tplKey(Param.COUNTRY.getKey()),urlGadgetUri.getQueryParameter(Param.COUNTRY.getKey()));
  assertEquals(tplKey(Param.DEBUG.getKey()),urlGadgetUri.getQueryParameter(Param.DEBUG.getKey()));
  assertEquals(tplKey(Param.NO_CACHE.getKey()),urlGadgetUri.getQueryParameter(Param.NO_CACHE.getKey()));
  assertEquals(tplKey("up_" + prefKey),urlGadgetUri.getFragmentParameter("up_" + prefKey));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS,urlGadgetUri.getQueryParameters().size());
  assertEquals(1,urlGadgetUri.getFragmentParameters().size());
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals("",htmlGadgetUri.getScheme());
  assertEquals(UNLOCKED_DOMAIN,htmlGadgetUri.getAuthority());
  assertEquals(IFRAME_PATH,htmlGadgetUri.getPath());
  assertEquals(CONTAINER,htmlGadgetUri.getQueryParameter(Param.CONTAINER.getKey()));
  assertNull(htmlGadgetUri.getQueryParameter(Param.LIBS.getKey()));
  assertEquals(tplKey(Param.VIEW.getKey()),htmlGadgetUri.getQueryParameter(Param.VIEW.getKey()));
  assertEquals(tplKey(Param.LANG.getKey()),htmlGadgetUri.getQueryParameter(Param.LANG.getKey()));
  assertEquals(tplKey(Param.COUNTRY.getKey()),htmlGadgetUri.getQueryParameter(Param.COUNTRY.getKey()));
  assertEquals(tplKey(Param.DEBUG.getKey()),htmlGadgetUri.getQueryParameter(Param.DEBUG.getKey()));
  assertEquals(tplKey(Param.NO_CACHE.getKey()),htmlGadgetUri.getQueryParameter(Param.NO_CACHE.getKey()));
  assertEquals(tplKey("up_" + prefKey),htmlGadgetUri.getQueryParameter("up_" + prefKey));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS + 1,htmlGadgetUri.getQueryParameters().size());
  assertEquals(0,htmlGadgetUri.getFragmentParameters().size());
  assertFalse(managerTpl.tokenForRenderingCalled());
  assertTrue(managerTpl.schemeCalled());
  assertTrue(managerTpl.addExtrasCalled());
}

</code></pre>

<pre class="type-9 type-5 type-6 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void securityTokenAddedWhenForced() throws Exception {
  Gadget gadget=mockGadget("foo","bar");
  TestDefaultIframeUriManager manager=makeManager(true,false);
  manager.setTokenForRendering(false);
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,uri.getQueryParameters().size());
  assertEquals(1,uri.getFragmentParameters().size());
  assertEquals(tplKey(Param.SECURITY_TOKEN.getKey()),uri.getFragmentParameter(Param.SECURITY_TOKEN.getKey()));
  assertTrue(manager.tokenForRenderingCalled());
  manager.setTokenForRendering(false);
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,htmlGadgetUri.getQueryParameters().size());
  assertEquals(1,htmlGadgetUri.getFragmentParameters().size());
  assertEquals(tplKey(Param.SECURITY_TOKEN.getKey()),htmlGadgetUri.getFragmentParameter(Param.SECURITY_TOKEN.getKey()));
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS,urlGadgetUri.getQueryParameters().size());
  assertEquals(1,urlGadgetUri.getFragmentParameters().size());
  assertEquals(tplKey(Param.SECURITY_TOKEN.getKey()),urlGadgetUri.getFragmentParameter(Param.SECURITY_TOKEN.getKey()));
  assertTrue(manager.tokenForRenderingCalled());
}

</code></pre>

<pre class="type-9 type-5 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void userPrefsAddedQuery() throws Exception {
  Map<String,String> specPrefs=Maps.newHashMap();
  specPrefs.put("specKey1","specDefault1");
  specPrefs.put("specKey2","specDefault2");
  Map<String,String> inPrefs=Maps.newHashMap();
  inPrefs.put("specKey1","inVal1");
  inPrefs.put("otherKey1","inVal2");
  Gadget gadget=mockGadget(true,specPrefs,inPrefs);
  TestDefaultIframeUriManager manager=makeManager(false,false);
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS + 2,uri.getQueryParameters().size());
  assertEquals(0,uri.getFragmentParameters().size());
  assertEquals("inVal1",uri.getQueryParameter("up_specKey1"));
  assertEquals("specDefault2",uri.getQueryParameter("up_specKey2"));
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS + 2,htmlGadgetUri.getQueryParameters().size());
  assertEquals(0,htmlGadgetUri.getFragmentParameters().size());
  assertEquals("inVal1",htmlGadgetUri.getQueryParameter("up_specKey1"));
  assertEquals("specDefault2",htmlGadgetUri.getQueryParameter("up_specKey2"));
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS,urlGadgetUri.getQueryParameters().size());
  assertEquals(2,urlGadgetUri.getFragmentParameters().size());
  assertEquals("inVal1",urlGadgetUri.getFragmentParameter("up_specKey1"));
  assertEquals("specDefault2",urlGadgetUri.getFragmentParameter("up_specKey2"));
}

</code></pre>

<pre class="type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void validUnversionedNoVersioner() throws Exception {
  Uri uri=makeValidationTestUri(LD_PREFIX + LD_SUFFIX,"version");
  DefaultIframeUriManager manager=makeManager(false,false);
  assertEquals(UriStatus.VALID_UNVERSIONED,manager.validateRenderingUri(uri));
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void containerConfigurationChanges() throws Exception {
  ContainerConfig config=new BasicContainerConfig();
  config.newTransaction().addContainer(ImmutableMap.<String,Object>builder().put(ContainerConfig.CONTAINER_KEY,ContainerConfig.DEFAULT_CONTAINER).put(LOCKED_DOMAIN_SUFFIX_KEY,LD_SUFFIX).put(IFRAME_BASE_PATH_KEY,IFRAME_PATH).put(LOCKED_DOMAIN_REQUIRED_KEY,true).build()).commit();
  LockedDomainService ldService=new HashLockedDomainService(config,true,prefixGen);
  TestDefaultIframeUriManager manager=new TestDefaultIframeUriManager(config,ldService);
  Uri testUri=Uri.parse("http://foobar" + LD_SUFFIX + "/?url=http://example.com");
  config.newTransaction().addContainer(ImmutableMap.<String,Object>builder().put(ContainerConfig.CONTAINER_KEY,ContainerConfig.DEFAULT_CONTAINER).put(LOCKED_DOMAIN_SUFFIX_KEY,LD_SUFFIX_ALT).build()).commit();
  assertEquals(UriStatus.VALID_UNVERSIONED,manager.validateRenderingUri(testUri));
}

</code></pre>

<pre class="type-9 type-5 type-6 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void typeHtmlBasicOptionsTpl() throws Exception {
  String prefKey="prefKey";
  String prefVal="prefVal";
  Map<String,String> prefs=Maps.newHashMap();
  prefs.put(prefKey,prefVal);
  List<String> features=Lists.newArrayList();
  Gadget gadget=mockGadget(SPEC_URI.toString(),false,false,false,false,false,prefs,prefs,false,features);
  TestDefaultIframeUriManager managerTpl=makeManager(false,false);
  managerTpl.setTemplatingSignal(tplSignal(true));
  Uri resultTpl=managerTpl.makeRenderingUri(gadget);
  assertNotNull(resultTpl);
  UriBuilder uriTpl=new UriBuilder(resultTpl);
  assertEquals("",uriTpl.getScheme());
  assertEquals(UNLOCKED_DOMAIN,uriTpl.getAuthority());
  assertEquals(IFRAME_PATH,uriTpl.getPath());
  assertEquals(SPEC_URI.toString(),uriTpl.getQueryParameter(Param.URL.getKey()));
  assertEquals(CONTAINER,uriTpl.getQueryParameter(Param.CONTAINER.getKey()));
  assertEquals(tplKey(Param.VIEW.getKey()),uriTpl.getQueryParameter(Param.VIEW.getKey()));
  assertEquals(tplKey(Param.LANG.getKey()),uriTpl.getQueryParameter(Param.LANG.getKey()));
  assertEquals(tplKey(Param.COUNTRY.getKey()),uriTpl.getQueryParameter(Param.COUNTRY.getKey()));
  assertEquals(tplKey(Param.DEBUG.getKey()),uriTpl.getQueryParameter(Param.DEBUG.getKey()));
  assertEquals(tplKey(Param.NO_CACHE.getKey()),uriTpl.getQueryParameter(Param.NO_CACHE.getKey()));
  assertEquals(tplKey(Param.SANITIZE.getKey()),uriTpl.getQueryParameter(Param.SANITIZE.getKey()));
  assertEquals(tplKey("up_" + prefKey),uriTpl.getFragmentParameter("up_" + prefKey));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,uriTpl.getQueryParameters().size());
  assertEquals(1,uriTpl.getFragmentParameters().size());
  Map<String,Uri> uris=managerTpl.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals("",htmlGadgetUri.getScheme());
  assertEquals(UNLOCKED_DOMAIN,htmlGadgetUri.getAuthority());
  assertEquals(IFRAME_PATH,htmlGadgetUri.getPath());
  assertEquals(SPEC_URI.toString(),htmlGadgetUri.getQueryParameter(Param.URL.getKey()));
  assertEquals(CONTAINER,htmlGadgetUri.getQueryParameter(Param.CONTAINER.getKey()));
  assertEquals(tplKey(Param.VIEW.getKey()),htmlGadgetUri.getQueryParameter(Param.VIEW.getKey()));
  assertEquals(tplKey(Param.LANG.getKey()),htmlGadgetUri.getQueryParameter(Param.LANG.getKey()));
  assertEquals(tplKey(Param.COUNTRY.getKey()),htmlGadgetUri.getQueryParameter(Param.COUNTRY.getKey()));
  assertEquals(tplKey(Param.DEBUG.getKey()),htmlGadgetUri.getQueryParameter(Param.DEBUG.getKey()));
  assertEquals(tplKey(Param.NO_CACHE.getKey()),htmlGadgetUri.getQueryParameter(Param.NO_CACHE.getKey()));
  assertEquals(tplKey(Param.SANITIZE.getKey()),htmlGadgetUri.getQueryParameter(Param.SANITIZE.getKey()));
  assertEquals(tplKey("up_" + prefKey),htmlGadgetUri.getFragmentParameter("up_" + prefKey));
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,htmlGadgetUri.getQueryParameters().size());
  assertEquals(1,htmlGadgetUri.getFragmentParameters().size());
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals("http",urlGadgetUri.getScheme());
  assertEquals("example.com",urlGadgetUri.getAuthority());
  assertEquals("/gadget.xml",urlGadgetUri.getPath());
  assertNull(urlGadgetUri.getQueryParameter(Param.URL.getKey()));
  assertEquals(CONTAINER,urlGadgetUri.getQueryParameter(Param.CONTAINER.getKey()));
  assertEquals(tplKey(Param.VIEW.getKey()),urlGadgetUri.getQueryParameter(Param.VIEW.getKey()));
  assertEquals(tplKey(Param.LANG.getKey()),urlGadgetUri.getQueryParameter(Param.LANG.getKey()));
  assertEquals(tplKey(Param.COUNTRY.getKey()),urlGadgetUri.getQueryParameter(Param.COUNTRY.getKey()));
  assertEquals(tplKey(Param.DEBUG.getKey()),urlGadgetUri.getQueryParameter(Param.DEBUG.getKey()));
  assertEquals(tplKey(Param.NO_CACHE.getKey()),urlGadgetUri.getQueryParameter(Param.NO_CACHE.getKey()));
  assertEquals(tplKey(Param.SANITIZE.getKey()),urlGadgetUri.getQueryParameter(Param.SANITIZE.getKey()));
  assertEquals(tplKey("up_" + prefKey),urlGadgetUri.getQueryParameter("up_" + prefKey));
  assertEquals(TYPE_URL_NUM_BASE_PARAMS + 1,urlGadgetUri.getQueryParameters().size());
  assertEquals(0,urlGadgetUri.getFragmentParameters().size());
  assertFalse(managerTpl.tokenForRenderingCalled());
  assertTrue(managerTpl.schemeCalled());
  assertTrue(managerTpl.addExtrasCalled());
}

</code></pre>

<pre class="type-9 type-5 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void schemeLessUnlockedDomain() throws Exception {
  Gadget gadget=mockGadget();
  ContainerConfig config=new BasicContainerConfig();
  config.newTransaction().addContainer(ImmutableMap.<String,Object>builder().put(ContainerConfig.CONTAINER_KEY,ContainerConfig.DEFAULT_CONTAINER).put(LOCKED_DOMAIN_SUFFIX_KEY,LD_SUFFIX).build()).addContainer(ImmutableMap.<String,Object>builder().put(ContainerConfig.CONTAINER_KEY,CONTAINER).put(IFRAME_BASE_PATH_KEY,IFRAME_PATH).put(UNLOCKED_DOMAIN_KEY,UNLOCKED_DOMAIN).put(DefaultJsUriManager.JS_HOST_PARAM,JS_HOST).put(DefaultJsUriManager.JS_PATH_PARAM,JS_PATH).build()).commit();
  LockedDomainService ldService=new HashLockedDomainService(config,false,prefixGen);
  TestDefaultIframeUriManager manager=new TestDefaultIframeUriManager(config,ldService);
  Uri renderingUri=manager.makeRenderingUri(gadget);
  assertNotNull(renderingUri);
  UriBuilder uri=new UriBuilder(renderingUri);
  assertEquals("",uri.getScheme());
  assertEquals(UNLOCKED_DOMAIN,uri.getAuthority());
  assertEquals(IFRAME_PATH,uri.getPath());
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,uri.getQueryParameters().size());
  assertEquals(0,uri.getFragmentParameters().size());
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals("",htmlGadgetUri.getScheme());
  assertEquals(UNLOCKED_DOMAIN,htmlGadgetUri.getAuthority());
  assertEquals(IFRAME_PATH,htmlGadgetUri.getPath());
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,htmlGadgetUri.getQueryParameters().size());
  assertEquals(0,htmlGadgetUri.getFragmentParameters().size());
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals("http",urlGadgetUri.getScheme());
  assertEquals("example.com",urlGadgetUri.getAuthority());
  assertEquals("/gadget.xml",urlGadgetUri.getPath());
  assertEquals(TYPE_URL_NUM_BASE_PARAMS,urlGadgetUri.getQueryParameters().size());
  assertEquals(0,urlGadgetUri.getFragmentParameters().size());
}

</code></pre>

<pre class="type-5 type-1 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void versionerVersionInvalid() throws Exception {
  Uri uri=makeValidationTestUri(LD_PREFIX + LD_SUFFIX,"in-version");
  DefaultIframeUriManager manager=makeManager(false,false);
  manager.setVersioner(mockVersioner("test-version",false));
  assertEquals(UriStatus.INVALID_VERSION,manager.validateRenderingUri(uri));
}

</code></pre>

<pre class="type-9 type-5 type-1 type-10 type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void ldNotAddedIfDisabled() throws Exception {
  Gadget gadget=mockGadget(LOCKED_DOMAIN_FEATURE_NAME);
  TestDefaultIframeUriManager manager=makeManager(false,false);
  Uri result=manager.makeRenderingUri(gadget);
  assertNotNull(result);
  UriBuilder uri=new UriBuilder(result);
  assertEquals("",uri.getScheme());
  assertEquals(UNLOCKED_DOMAIN,uri.getAuthority());
  assertEquals(IFRAME_PATH,uri.getPath());
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,uri.getQueryParameters().size());
  assertEquals(0,uri.getFragmentParameters().size());
  Map<String,Uri> uris=manager.makeAllRenderingUris(gadget);
  assertNotNull(uris);
  UriBuilder htmlGadgetUri=new UriBuilder(uris.get(VIEW));
  assertEquals("",htmlGadgetUri.getScheme());
  assertEquals(UNLOCKED_DOMAIN,htmlGadgetUri.getAuthority());
  assertEquals(IFRAME_PATH,htmlGadgetUri.getPath());
  assertEquals(TYPE_HTML_NUM_BASE_PARAMS,htmlGadgetUri.getQueryParameters().size());
  assertEquals(0,htmlGadgetUri.getFragmentParameters().size());
  UriBuilder urlGadgetUri=new UriBuilder(uris.get(ANOTHER_VIEW));
  assertEquals("http",urlGadgetUri.getScheme());
  assertEquals("example.com",urlGadgetUri.getAuthority());
  assertEquals("/gadget.xml",urlGadgetUri.getPath());
  assertEquals(TYPE_URL_NUM_BASE_PARAMS,urlGadgetUri.getQueryParameters().size());
  assertEquals(0,urlGadgetUri.getFragmentParameters().size());
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
