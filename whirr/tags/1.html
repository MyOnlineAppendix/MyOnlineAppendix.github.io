<h3><span class=" glyphicon glyphicon-tag"/>&nbspInternalCallVerifier</h3><kbd>Verifies values of objects/variables related to AUT calls</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.whirr.ByonClusterControllerTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testSpecifyByonCache() throws Exception {
  Map<String,Node> byonNodes=new HashMap<String,Node>();
  byonNodes.put("foo",Node.builder().id("foo-1234").name("foo-node").hostname("1.2.3.4").osFamily("ubuntu").osVersion("12.04").osDescription("foo OS").description("foo node").build());
  ClusterSpec tempSpec=ClusterSpec.withTemporaryKeys();
  tempSpec.setClusterName("test-cluster-for-byon-cache");
  tempSpec.setProvider("byon");
  tempSpec.setServiceName("byon");
  tempSpec.setIdentity("dummy");
  tempSpec.setStateStore("none");
  tempSpec.setByonNodes(byonNodes);
  ClusterControllerFactory factory=new ClusterControllerFactory();
  ClusterController controller=factory.create(tempSpec.getServiceName());
  assertThat(controller.getInstances(tempSpec).size(),is(1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.ClusterControllerFactoryTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testServiceFactoryIsCreatedFromWhirrProperties() throws IOException {
  ClusterControllerFactory factory=new ClusterControllerFactory();
  ClusterController controller=factory.create("test-service");
  assertThat(controller,instanceOf(TestClusterController.class));
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testServiceFactoryWithNullServiceName() throws IOException {
  ClusterControllerFactory factory=new ClusterControllerFactory();
  ClusterController controller=factory.create(null);
  assertThat(controller,instanceOf(ClusterController.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.ClusterSpecTest </h4><pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAutoHostnameForProvider() throws Exception {
  Configuration cloudServersConfig=new PropertiesConfiguration();
  cloudServersConfig.addProperty("whirr.provider","cloudservers-us");
  ClusterSpec cloudServersSpec=ClusterSpec.withTemporaryKeys(cloudServersConfig);
  assertEquals(cloudServersSpec.getAutoHostnamePrefix(),null);
  assertEquals(cloudServersSpec.getAutoHostnameSuffix(),".static.cloud-ips.com");
  Configuration cloudServersUkConfig=new PropertiesConfiguration();
  cloudServersUkConfig.addProperty("whirr.provider","cloudservers-uk");
  ClusterSpec cloudServersUkSpec=ClusterSpec.withTemporaryKeys(cloudServersUkConfig);
  assertEquals(cloudServersUkSpec.getAutoHostnamePrefix(),null);
  assertEquals(cloudServersUkSpec.getAutoHostnameSuffix(),".static.cloud-ips.co.uk");
  Configuration ec2Config=new PropertiesConfiguration();
  ec2Config.addProperty("whirr.provider","aws-ec2");
  ClusterSpec ec2Spec=ClusterSpec.withTemporaryKeys(ec2Config);
  assertEquals(null,ec2Spec.getAutoHostnamePrefix());
  assertEquals(null,ec2Spec.getAutoHostnameSuffix());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testKerberosRealm() throws Exception {
  Configuration cloudServersConfig=new PropertiesConfiguration();
  ClusterSpec cloudServersSpec=ClusterSpec.withTemporaryKeys(cloudServersConfig);
  assertEquals(null,cloudServersSpec.getKerberosRealm());
  cloudServersConfig=new PropertiesConfiguration();
  cloudServersConfig.addProperty("whirr.kerberos-realm","CDHCLUSTER.COM");
  cloudServersSpec=ClusterSpec.withTemporaryKeys(cloudServersConfig);
  assertEquals("CDHCLUSTER.COM",cloudServersSpec.getKerberosRealm());
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testCopySpec() throws Exception {
  ClusterSpec spec=ClusterSpec.withTemporaryKeys(new PropertiesConfiguration("whirr-core-test.properties"));
  spec.setTemplate(TemplateBuilderSpec.parse("locationId=random-location"));
  assertThat(spec.copy(),is(spec));
  assertThat(spec.copy().hashCode(),is(spec.hashCode()));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJdkInstallUrl() throws Exception {
  Configuration cloudServersConfig=new PropertiesConfiguration();
  ClusterSpec cloudServersSpec=ClusterSpec.withTemporaryKeys(cloudServersConfig);
  assertEquals(null,cloudServersSpec.getJdkInstallUrl());
  cloudServersConfig=new PropertiesConfiguration();
  cloudServersConfig.addProperty("whirr.jdk-install-url","http://whirr-third-party.s3.amazonaws.com/jdk-6u21-linux-i586-rpm.bin");
  cloudServersSpec=ClusterSpec.withTemporaryKeys(cloudServersConfig);
  assertEquals("http://whirr-third-party.s3.amazonaws.com/jdk-6u21-linux-i586-rpm.bin",cloudServersSpec.getJdkInstallUrl());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testApplySubroleAliases() throws ConfigurationException {
  CompositeConfiguration c=new CompositeConfiguration();
  Configuration config=new PropertiesConfiguration();
  config.addProperty("whirr.instance-templates","1 puppet:somepup::pet+something-else, 1 something-else-only");
  c.addConfiguration(config);
  InstanceTemplate template=InstanceTemplate.parse(c).get(0);
  Set<String> expected=Sets.newLinkedHashSet(Arrays.asList(new String[]{"puppet:somepup::pet","something-else"}));
  assertThat(template.getRoles(),is(expected));
  InstanceTemplate template2=InstanceTemplate.parse(c).get(1);
  Set<String> expected2=Sets.newLinkedHashSet(Arrays.asList(new String[]{"something-else-only"}));
  assertThat(template2.getRoles(),is(expected2));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testFirewallRules() throws Exception {
  PropertiesConfiguration conf=new PropertiesConfiguration("whirr-core-test.properties");
  conf.setProperty("whirr.firewall-rules","8000,8001");
  conf.setProperty("whirr.firewall-rules.serviceA","9000,9001");
  ClusterSpec spec=ClusterSpec.withTemporaryKeys(conf);
  Map<String,List<String>> firewallRules=spec.getFirewallRules();
  assertThat(firewallRules.get(null).equals(Lists.<String>newArrayList("8000","8001")),is(true));
  assertThat(firewallRules.get("serviceA").equals(Lists.<String>newArrayList("9000","9001")),is(true));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see ConfigToTemplateBuilderSpecTest for more
 */
@Test public void testTemplateOverrides() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  ClusterSpec spec=ClusterSpec.withNoDefaults(conf);
  assertEquals(spec.getTemplate(),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testEndpoint() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.ENDPOINT.getConfigName(),"http://compute");
  conf.setProperty(ClusterSpec.Property.BLOBSTORE_ENDPOINT.getConfigName(),"http://blobstore");
  ClusterSpec spec=ClusterSpec.withNoDefaults(conf);
  assertThat(spec.getEndpoint(),is("http://compute"));
  assertThat(spec.getBlobStoreEndpoint(),is("http://blobstore"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testNumberOfInstancesPerTemplate() throws Exception {
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.instance-templates","1 hadoop-namenode+hadoop-jobtracker,3 hadoop-datanode+hadoop-tasktracker");
  conf.addProperty("whirr.instance-templates-max-percent-failures","100 hadoop-namenode+hadoop-jobtracker,60 hadoop-datanode+hadoop-tasktracker");
  ClusterSpec expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  List<InstanceTemplate> templates=expectedClusterSpec.getInstanceTemplates();
  InstanceTemplate t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  InstanceTemplate t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(2));
  conf.setProperty("whirr.instance-templates-max-percent-failures","60 hadoop-datanode+hadoop-tasktracker");
  expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  templates=expectedClusterSpec.getInstanceTemplates();
  t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(2));
  conf.addProperty("whirr.instance-templates-minumum-number-of-instances","1 hadoop-datanode+hadoop-tasktracker");
  expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  templates=expectedClusterSpec.getInstanceTemplates();
  t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(2));
  conf.setProperty("whirr.instance-templates-minimum-number-of-instances","3 hadoop-datanode+hadoop-tasktracker");
  expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  templates=expectedClusterSpec.getInstanceTemplates();
  t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(3));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultPublicKey() throws ConfigurationException, JSchException, IOException {
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("whirr.private-key-file",keys.get("private").getAbsolutePath());
  ClusterSpec spec=ClusterSpec.withNoDefaults(conf);
  Assert.assertEquals(IOUtils.toString(new FileReader(keys.get("public"))),spec.getPublicKey());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-5 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testIllegalArgumentExceptionOnInstancesTemplates() throws Exception {
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.instance-templates","1 hadoop-namenode+hadoop-jobtracker,3 hadoop-datanode+hadoop-tasktracker");
  conf.addProperty("whirr.instance-templates-max-percent-failures","60 % hadoop-datanode+hadoop-tasktracker");
  ClusterSpec expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  List<InstanceTemplate> templates=expectedClusterSpec.getInstanceTemplates();
  InstanceTemplate t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  InstanceTemplate t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(2));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-5 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=NumberFormatException.class) public void testNumberFormatExceptionOnInstancesTemplates() throws Exception {
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.instance-templates","1 hadoop-namenode+hadoop-jobtracker,3 hadoop-datanode+hadoop-tasktracker");
  conf.addProperty("whirr.instance-templates-max-percent-failures","60% hadoop-datanode+hadoop-tasktracker");
  ClusterSpec expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  List<InstanceTemplate> templates=expectedClusterSpec.getInstanceTemplates();
  InstanceTemplate t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  InstanceTemplate t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(2));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDefaultsCanBeOverridden() throws ConfigurationException, JSchException, IOException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.RUN_URL_BASE.getConfigName(),"http://example.org");
  ClusterSpec spec=ClusterSpec.withNoDefaults(conf);
  assertThat(spec.getRunUrlBase(),is("http://example.org"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHardwareIdPerInstanceTemplate() throws Exception {
  PropertiesConfiguration conf=new PropertiesConfiguration("whirr-core-test.properties");
  conf.setProperty("whirr.instance-templates","2 noop, 1 role1+role2, 1 role1, 3 spots, 1 spec");
  conf.setProperty("whirr.hardware-id","c1.xlarge");
  conf.setProperty("whirr.templates.noop.hardware-id","m1.large");
  conf.setProperty("whirr.templates.role1+role2.hardware-id","t1.micro");
  conf.setProperty("whirr.templates.role1+role2.image-id","us-east-1/ami-123324");
  conf.setProperty("whirr.templates.spots.aws-ec2-spot-price",0.5f);
  conf.setProperty("whirr.templates.spec.template","osFamily=UBUNTU,os64Bit=true,minRam=2048");
  ClusterSpec spec=ClusterSpec.withTemporaryKeys(conf);
  List<InstanceTemplate> templates=spec.getInstanceTemplates();
  InstanceTemplate noops=get(templates,0);
  assert noops.getRoles().contains("noop");
  assertEquals(noops.getTemplate().getHardwareId(),"m1.large");
  assertEquals(noops.getTemplate().getImageId(),null);
  assertEquals(noops.getAwsEc2SpotPrice(),null);
  InstanceTemplate second=get(templates,1);
  assertEquals(second.getTemplate().getHardwareId(),"t1.micro");
  assertEquals(second.getTemplate().getImageId(),"us-east-1/ami-123324");
  assertEquals(second.getAwsEc2SpotPrice(),null);
  InstanceTemplate third=get(templates,2);
  assertEquals(third.getTemplate(),null);
  assertEquals(third.getAwsEc2SpotPrice(),null);
  InstanceTemplate spots=get(templates,3);
  assertEquals(spots.getAwsEc2SpotPrice(),new Float(0.5f),0.001);
  InstanceTemplate template=get(templates,4);
  assertEquals(template.getTemplate(),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048"));
  assertEquals(template.getAwsEc2SpotPrice(),null);
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAwsEc2SpotPrice() throws ConfigurationException {
  assertEquals(ClusterSpec.withNoDefaults(new PropertiesConfiguration()).getAwsEc2SpotPrice(),null);
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.AWS_EC2_SPOT_PRICE.getConfigName(),"0.30");
  ClusterSpec spec=ClusterSpec.withNoDefaults(conf);
  assertEquals(spec.getAwsEc2SpotPrice(),new Float(0.3));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testEnvVariableInterpolation(){
  Map<String,String> envMap=System.getenv();
  assertThat(envMap.isEmpty(),is(false));
  String undefinedEnvVar="UNDEFINED_ENV_VAR";
  assertThat(envMap.containsKey(undefinedEnvVar),is(false));
  Entry<String,String> firstEntry=Iterables.get(envMap.entrySet(),0);
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("a",String.format("${env:%s}",firstEntry.getKey()));
  conf.setProperty("b",String.format("${env:%s}",undefinedEnvVar));
  assertThat(conf.getString("a"),is(firstEntry.getValue()));
  assertThat(conf.getString("b"),is(String.format("${env:%s}",undefinedEnvVar)));
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDefaultsAreSet() throws ConfigurationException, JSchException, IOException {
  ClusterSpec spec=ClusterSpec.withTemporaryKeys();
  assertThat(spec.getClusterUser(),is(System.getProperty("user.name")));
  assertThat(spec.getMaxStartupRetries(),is(1));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDefaultBlobStoreforComputeProvider() throws Exception {
  for (  String pair : new String[]{"ec2:aws-s3","aws-ec2:aws-s3","cloudservers:cloudfiles-us","cloudservers-us:cloudfiles-us","cloudservers-uk:cloudfiles-uk"}) {
    String[] parts=pair.split(":");
    Configuration config=new PropertiesConfiguration();
    config.addProperty("whirr.provider",parts[0]);
    ClusterSpec spec=ClusterSpec.withTemporaryKeys(config);
    assertThat(spec.getBlobStoreProvider(),is(parts[1]));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.ClusterTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getInstanceById(){
  Cluster.Instance instance=cluster.getInstanceMatching(withIds("id-0"));
  assertThat(instance.getRoles().contains("role-0"),is(true));
}

</code></pre>

<br>
<pre class="type-8 type-1 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void remoteInstanceById(){
  cluster.removeInstancesMatching(withIds("id-0"));
  try {
    cluster.getInstanceMatching(withIds("id-0"));
    fail("Element not remnoved");
  }
 catch (  NoSuchElementException e) {
  }
  assertThat(cluster.getInstances().size(),is(NUMBER_OF_INSTANCES - 1));
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getInstanceByRole(){
  Cluster.Instance instance=cluster.getInstanceMatching(role("role-0"));
  assertThat(instance.getId(),is("id-0"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.actions.ScriptBasedClusterActionTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testActionIsExecutedOnAllRelevantNodes() throws Exception {
  T action=newClusterActionInstance(EMPTYSET,EMPTYSET);
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(2));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterScriptExecutionByInstanceId() throws Exception {
  String instanceId=getInstaceForRole(cluster,"noop3").getId();
  T action=newClusterActionInstance(EMPTYSET,newHashSet(instanceId));
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(1));
  assertHasRole(executions.get(0),cluster,"noop3");
  assertEquals(executions.get(0).getNode().getId(),instanceId);
  assertAnyStatementContains(dryRun,"noop1-" + getActionName(),"noop3-" + getActionName());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterScriptExecutionByRoleAndInstanceId() throws Exception {
  String instanceId=getInstaceForRole(cluster,"noop1").getId();
  T action=newClusterActionInstance(newHashSet("noop1"),newHashSet(instanceId));
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(1));
  assertHasRole(executions.get(0),cluster,"noop1");
  assertEquals(executions.get(0).getNode().getId(),instanceId);
  assertAnyStatementContains(dryRun,"noop1-" + getActionName());
  assertNoStatementContains(dryRun,"noop2-" + getActionName(),"noop3-" + getActionName());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testNoScriptExecutionsForNoop() throws Exception {
  T action=newClusterActionInstance(ImmutableSet.of("noop"),EMPTYSET);
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(0));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterScriptExecutionByRole() throws Exception {
  String instanceId=getInstaceForRole(cluster,"noop2").getId();
  T action=newClusterActionInstance(ImmutableSet.of("noop2"),EMPTYSET);
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(1));
  assertHasRole(executions.get(0),cluster,"noop2");
  assertEquals(executions.get(0).getNode().getId(),instanceId);
  assertAnyStatementContains(dryRun,"noop2-" + getActionName());
  assertNoStatementContains(dryRun,"noop1-" + getActionName(),"noop3-" + getActionName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.actions.integration.PhaseExecutionBarrierTest </h4><pre class="type-4 type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void testNoRemoteExecutionOverlap() throws Exception {
  ClusterSpec spec=getTestClusterSpec();
  ClusterController controller=(new ClusterControllerFactory()).create(spec.getServiceName());
  try {
    controller.launchCluster(spec);
    Map<? extends NodeMetadata,ExecResponse> responseMap=controller.runScriptOnNodesMatching(spec,Predicates.<NodeMetadata>alwaysTrue(),exec("cat /tmp/bootstrap-start /tmp/bootstrap-end /tmp/configure-start"));
    ExecResponse response=Iterables.get(responseMap.values(),0);
    LOG.info("Got response: {}",response);
    String[] parts=Strings.split(response.getOutput(),'\n');
    int bootstrapStart=parseInt(deleteWhitespace(parts[0]));
    int bootstrapEnd=parseInt(deleteWhitespace(parts[1]));
    int configureStart=parseInt(deleteWhitespace(parts[2]));
    assertTrue(bootstrapStart < bootstrapEnd);
    assertTrue(bootstrapEnd < configureStart);
  }
  finally {
    controller.destroyCluster(spec);
  }
  assertNoOverlapOnLocalMachine();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.MainTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testUnrecognizedCommand() throws Exception {
  Main main=new Main(new TestCommand());
  ByteArrayOutputStream bytes=new ByteArrayOutputStream();
  PrintStream err=new PrintStream(bytes);
  int rc=main.run(null,null,err,Lists.newArrayList("bogus-command"));
  assertThat(rc,is(-1));
  assertThat(bytes.toString(),containsString("Unrecognized command 'bogus-command'"));
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testNoArgs() throws Exception {
  Main main=new Main(new TestCommand());
  ByteArrayOutputStream bytes=new ByteArrayOutputStream();
  PrintStream out=new PrintStream(bytes);
  int rc=main.run(null,out,null,Collections.<String>emptyList());
  assertThat(rc,is(-1));
  assertThat(bytes.toString(),containsString("Usage: whirr COMMAND"));
  assertThat(bytes.toString(),containsString("test-command  test description"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.command.DestroyClusterCommandTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testAllOptions() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  when(factory.create((String)any())).thenReturn(controller);
  DestroyClusterCommand command=new DestroyClusterCommand(factory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,null,Lists.newArrayList("--instance-templates","1 noop","--service-name","test-service","--cluster-name","test-cluster","--provider","rackspace","--identity","myusername","--credential","mypassword","--private-key-file",keys.get("private").getAbsolutePath(),"--version","version-string"));
  assertThat(rc,is(0));
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.version","version-string");
  conf.addProperty("whirr.instance-templates","1 noop");
  ClusterSpec expectedClusterSpec=ClusterSpec.withTemporaryKeys(conf);
  expectedClusterSpec.setServiceName("test-service");
  expectedClusterSpec.setProvider("rackspace");
  expectedClusterSpec.setIdentity("myusername");
  expectedClusterSpec.setCredential("mypassword");
  expectedClusterSpec.setClusterName("test-cluster");
  expectedClusterSpec.setPrivateKey(keys.get("private"));
  expectedClusterSpec.setPublicKey(keys.get("public"));
  verify(factory).create("test-service");
  verify(controller).destroyCluster(expectedClusterSpec);
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testInsufficientOptions() throws Exception {
  DestroyClusterCommand command=new DestroyClusterCommand();
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,null,err,Lists.<String>newArrayList("--private-key-file",keys.get("private").getAbsolutePath()));
  assertThat(rc,is(-1));
  assertThat(errBytes.toString(),containsString("Option 'cluster-name' not set"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.command.DestroyInstanceCommandTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDestroyInstanceById() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  when(factory.create((String)any())).thenReturn(controller);
  DestroyInstanceCommand command=new DestroyInstanceCommand(factory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,null,Lists.newArrayList("--instance-templates","1 noop","--instance-id","region/instanceid","--service-name","test-service","--cluster-name","test-cluster","--provider","rackspace","--identity","myusername","--credential","mypassword","--private-key-file",keys.get("private").getAbsolutePath(),"--version","version-string"));
  assertThat(rc,is(0));
  verify(controller).destroyInstance((ClusterSpec)any(),eq("region/instanceid"));
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testInstanceIdMandatory() throws Exception {
  DestroyInstanceCommand command=new DestroyInstanceCommand();
  int rc=command.run(null,out,err,Collections.<String>emptyList());
  assertThat(rc,is(-1));
  String errOutput=errBytes.toString();
  assertThat(errOutput,containsString("--instance-id is a mandatory argument"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.command.LaunchClusterCommandTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testLaunchClusterUsingDryRun() throws Exception {
  ClusterControllerFactory factory=new ClusterControllerFactory();
  TestLaunchClusterCommand launchCluster=new TestLaunchClusterCommand(factory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=launchCluster.run(null,out,err,Lists.<String>newArrayList("--cluster-name","test-cluster-launch","--state-store","none","--instance-templates","1 zookeeper+cassandra, 1 zookeeper+elasticsearch","--provider","stub","--identity","dummy","--private-key-file",keys.get("private").getAbsolutePath()));
  MatcherAssert.assertThat(rc,is(0));
  assertExecutedPhases(launchCluster.dryRun,"bootstrap","configure","start");
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testInsufficientArgs() throws Exception {
  LaunchClusterCommand command=new LaunchClusterCommand();
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,null,err,Lists.<String>newArrayList("--private-key-file",keys.get("private").getAbsolutePath()));
  assertThat(rc,is(-1));
  assertThat(errBytes.toString(),containsString("Option 'cluster-name' not set."));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testMaxPercentFailure() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  Cluster cluster=mock(Cluster.class);
  when(factory.create((String)any())).thenReturn(controller);
  when(controller.launchCluster((ClusterSpec)any())).thenReturn(cluster);
  LaunchClusterCommand command=new LaunchClusterCommand(factory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,null,Lists.newArrayList("--service-name","hadoop","--cluster-name","test-cluster","--instance-templates","1 hadoop-namenode+hadoop-jobtracker,3 hadoop-datanode+hadoop-tasktracker","--instance-templates-max-percent-failures","60 hadoop-datanode+hadoop-tasktracker","--provider","aws-ec2","--identity","myusername","--credential","mypassword","--private-key-file",keys.get("private").getAbsolutePath(),"--version","version-string"));
  assertThat(rc,is(0));
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.provider","aws-ec2");
  conf.addProperty("whirr.version","version-string");
  conf.addProperty("whirr.instance-templates-max-percent-failure","60 hadoop-datanode+hadoop-tasktracker");
  ClusterSpec expectedClusterSpec=ClusterSpec.withTemporaryKeys(conf);
  expectedClusterSpec.setInstanceTemplates(Lists.newArrayList(InstanceTemplate.builder().numberOfInstance(1).minNumberOfInstances(1).roles("hadoop-namenode","hadoop-jobtracker").build(),InstanceTemplate.builder().numberOfInstance(3).minNumberOfInstances(2).roles("hadoop-datanode","hadoop-tasktracker").build()));
  expectedClusterSpec.setServiceName("hadoop");
  expectedClusterSpec.setIdentity("myusername");
  expectedClusterSpec.setCredential("mypassword");
  expectedClusterSpec.setClusterName("test-cluster");
  expectedClusterSpec.setPrivateKey(keys.get("private"));
  expectedClusterSpec.setPublicKey(keys.get("public"));
  verify(factory).create("hadoop");
  verify(controller).launchCluster(expectedClusterSpec);
  assertThat(outBytes.toString(),containsString("Started cluster of 0 instances"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testAllOptions() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  Cluster cluster=mock(Cluster.class);
  when(factory.create((String)any())).thenReturn(controller);
  when(controller.launchCluster((ClusterSpec)any())).thenReturn(cluster);
  LaunchClusterCommand command=new LaunchClusterCommand(factory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,null,Lists.newArrayList("--service-name","test-service","--cluster-name","test-cluster","--instance-templates","1 role1+role2,2 role3","--provider","rackspace","--endpoint","http://endpoint","--blobstore-endpoint","http://blobstore-endpoint","--identity","myusername","--credential","mypassword","--private-key-file",keys.get("private").getAbsolutePath(),"--version","version-string"));
  assertThat(rc,is(0));
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.version","version-string");
  ClusterSpec expectedClusterSpec=ClusterSpec.withTemporaryKeys(conf);
  expectedClusterSpec.setInstanceTemplates(Lists.newArrayList(InstanceTemplate.builder().numberOfInstance(1).roles("role1","role2").build(),InstanceTemplate.builder().numberOfInstance(2).roles("role3").build()));
  expectedClusterSpec.setServiceName("test-service");
  expectedClusterSpec.setProvider("rackspace");
  expectedClusterSpec.setEndpoint("http://endpoint");
  expectedClusterSpec.setIdentity("myusername");
  expectedClusterSpec.setCredential("mypassword");
  expectedClusterSpec.setBlobStoreEndpoint("http://blobstore-endpoint");
  expectedClusterSpec.setClusterName("test-cluster");
  expectedClusterSpec.setPrivateKey(keys.get("private"));
  expectedClusterSpec.setPublicKey(keys.get("public"));
  verify(factory).create("test-service");
  verify(controller).launchCluster(expectedClusterSpec);
  assertThat(outBytes.toString(),containsString("Started cluster of 0 instances"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.command.ListClusterCommandTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testInsufficientOptions() throws Exception {
  ListClusterCommand command=new ListClusterCommand();
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,null,err,Lists.<String>newArrayList("--private-key-file",keys.get("private").getAbsolutePath()));
  assertThat(rc,is(-1));
  assertThat(errBytes.toString(),containsString("Option 'cluster-name' not set."));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testAllOptions() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  when(factory.create((String)any())).thenReturn(controller);
  NodeMetadata node1=new NodeMetadataBuilder().name("name1").ids("id1").location(new LocationBuilder().scope(LocationScope.PROVIDER).id("location-id1").description("location-desc1").build()).imageId("image-id").status(NodeMetadata.Status.RUNNING).publicAddresses(Lists.newArrayList("127.0.0.1")).privateAddresses(Lists.newArrayList("127.0.0.1")).build();
  NodeMetadata node2=new NodeMetadataBuilder().name("name2").ids("id2").location(new LocationBuilder().scope(LocationScope.PROVIDER).id("location-id2").description("location-desc2").build()).imageId("image-id").status(NodeMetadata.Status.RUNNING).publicAddresses(Lists.newArrayList("127.0.0.2")).privateAddresses(Lists.newArrayList("127.0.0.2")).build();
  when(controller.getNodes((ClusterSpec)any())).thenReturn((Set)Sets.newLinkedHashSet(Lists.newArrayList(node1,node2)));
  when(controller.getInstances((ClusterSpec)any(),(ClusterStateStore)any())).thenCallRealMethod();
  ClusterStateStore memStore=new MemoryClusterStateStore();
  memStore.save(createTestCluster(new String[]{"id1","id2"},new String[]{"role1","role2"}));
  ClusterStateStoreFactory stateStoreFactory=mock(ClusterStateStoreFactory.class);
  when(stateStoreFactory.create((ClusterSpec)any())).thenReturn(memStore);
  ListClusterCommand command=new ListClusterCommand(factory,stateStoreFactory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,null,Lists.newArrayList("--instance-templates","1 noop","--service-name","test-service","--cluster-name","test-cluster","--identity","myusername","--quiet","--private-key-file",keys.get("private").getAbsolutePath()));
  assertThat(rc,is(0));
  assertThat(outBytes.toString(),is("id1\timage-id\t127.0.0.1\t127.0.0.1\tRUNNING\tlocation-id1\trole1\n" + "id2\timage-id\t127.0.0.2\t127.0.0.2\tRUNNING\tlocation-id2\trole2\n"));
  verify(factory).create("test-service");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.command.RunScriptCommandTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testScriptPathIsMandatory() throws Exception {
  RunScriptCommand command=new RunScriptCommand();
  int rc=command.run(null,out,err,Lists.<String>newArrayList());
  assertThat(rc,is(-1));
  assertThat(errBytes.toString(),containsString("Please specify a script file to be executed."));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testRunScriptByRole() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  when(factory.create((String)any())).thenReturn(controller);
  ClusterStateStore memStore=new MemoryClusterStateStore();
  memStore.save(createTestCluster(new String[]{"reg/A","reg/B"},new String[]{"A","B"}));
  ClusterStateStoreFactory stateStoreFactory=mock(ClusterStateStoreFactory.class);
  when(stateStoreFactory.create((ClusterSpec)any())).thenReturn(memStore);
  RunScriptCommand command=new RunScriptCommand(factory,stateStoreFactory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,System.err,Lists.newArrayList("--instance-templates","1 noop","--script","/dev/null","--roles","A","--cluster-name","test-cluster","--provider","provider","--identity","myusername","--credential","mypassword","--private-key-file",keys.get("private").getAbsolutePath()));
  assertThat(rc,is(0));
  ArgumentCaptor<Predicate> predicate=ArgumentCaptor.forClass(Predicate.class);
  verify(controller).runScriptOnNodesMatching((ClusterSpec)any(),predicate.capture(),(Statement)any());
  Predicate<NodeMetadata> expected=Predicates.and(Predicates.<NodeMetadata>alwaysTrue(),withIds("reg/A"));
  assertThat(predicate.getValue().toString(),is(expected.toString()));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testRunScriptByInstanceId() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  when(factory.create((String)any())).thenReturn(controller);
  RunScriptCommand command=new RunScriptCommand(factory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,System.err,Lists.newArrayList("--script","/dev/null","--instance-templates","1 noop","--instances","A,B","--cluster-name","test-cluster","--provider","provider","--identity","myusername","--credential","mypassword","--private-key-file",keys.get("private").getAbsolutePath()));
  assertThat(rc,is(0));
  ArgumentCaptor<Predicate> predicate=ArgumentCaptor.forClass(Predicate.class);
  verify(controller).runScriptOnNodesMatching((ClusterSpec)any(),predicate.capture(),(Statement)any());
  Predicate<NodeMetadata> expected=Predicates.and(Predicates.<NodeMetadata>alwaysTrue(),withIds("A","B"));
  assertThat(predicate.getValue().toString(),is(expected.toString()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.command.VersionCommandTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testOverrides() throws Exception {
  VersionCommand command=new VersionCommand();
  int rc=command.run(null,out,null,Collections.<String>emptyList());
  assertThat(rc,is(0));
  assertThat(outBytes.toString(),startsWith("Apache Whirr "));
  assertThat(outBytes.toString(),containsString("jclouds"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.command.AbstractClusterCommandTest </h4><pre class="type-4 type-1 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Verifies values related to public fields.
"></span><br>
@Test public void testOverrides() throws Exception {
  AbstractClusterCommand clusterCommand=new AbstractClusterCommand("name","description",new ClusterControllerFactory()){
    @Override public int run(    InputStream in,    PrintStream out,    PrintStream err,    List<String> args) throws Exception {
      return 0;
    }
  }
;
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  OptionSet optionSet=clusterCommand.parser.parse("--quiet","--service-name","overridden-test-service","--config","whirr-override-test.properties","--private-key-file",keys.get("private").getAbsolutePath());
  ClusterSpec clusterSpec=clusterCommand.getClusterSpec(optionSet);
  assertThat(optionSet.has("quiet"),is(true));
  assertThat(clusterSpec.isQuiet(),is(true));
  assertThat(clusterSpec.getServiceName(),is("overridden-test-service"));
  assertThat(clusterSpec.getClusterName(),is("test-cluster"));
  optionSet=clusterCommand.parser.parse("--quiet","true","--service-name","overridden-test-service","--config","whirr-override-test.properties","--private-key-file",keys.get("private").getAbsolutePath());
  clusterSpec=clusterCommand.getClusterSpec(optionSet);
  assertThat(optionSet.has("quiet"),is(true));
  assertThat(clusterSpec.isQuiet(),is(true));
  assertThat(clusterSpec.getServiceName(),is("overridden-test-service"));
  assertThat(clusterSpec.getClusterName(),is("test-cluster"));
  optionSet=clusterCommand.parser.parse("--quiet","false","--service-name","overridden-test-service","--config","whirr-override-test.properties","--private-key-file",keys.get("private").getAbsolutePath());
  clusterSpec=clusterCommand.getClusterSpec(optionSet);
  assertThat(optionSet.has("quiet"),is(true));
  assertThat(clusterSpec.isQuiet(),is(false));
  assertThat(clusterSpec.getServiceName(),is("overridden-test-service"));
  assertThat(clusterSpec.getClusterName(),is("test-cluster"));
  optionSet=clusterCommand.parser.parse("--quiet","some-value","--service-name","overridden-test-service","--config","whirr-override-test.properties","--private-key-file",keys.get("private").getAbsolutePath());
  clusterSpec=clusterCommand.getClusterSpec(optionSet);
  assertThat(optionSet.has("quiet"),is(true));
  assertThat(clusterSpec.isQuiet(),is(false));
  assertThat(clusterSpec.getServiceName(),is("overridden-test-service"));
  assertThat(clusterSpec.getClusterName(),is("test-cluster"));
  optionSet=clusterCommand.parser.parse("--service-name","overridden-test-service","--config","whirr-override-test.properties","--private-key-file",keys.get("private").getAbsolutePath());
  clusterSpec=clusterCommand.getClusterSpec(optionSet);
  assertThat(optionSet.has("quiet"),is(false));
  assertThat(clusterSpec.isQuiet(),is(false));
  assertThat(clusterSpec.getServiceName(),is("overridden-test-service"));
  assertThat(clusterSpec.getClusterName(),is("test-cluster"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.internal.ConfigToTemplateBuilderSpecTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutLocationSpecsAcceptsLocationId() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  conf.setProperty(ClusterSpec.Property.LOCATION_ID.getConfigName(),"eu-west-1");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048,locationId=eu-west-1"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutImageSpecsDefaultsToUbuntu1004() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"minRam=2048");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("minRam=2048,osFamily=UBUNTU,osVersionMatches=10.04"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithLoginSpecsOverridesBootstrapUser() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048,loginUser=foo");
  conf.setProperty(ClusterSpec.Property.BOOTSTRAP_USER.getConfigName(),"user:pass");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048,loginUser=foo"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutHardwareSpecsDefaultsTo1GB() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=1024"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithImageSpecsOverridesImageId() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  conf.setProperty(ClusterSpec.Property.IMAGE_ID.getConfigName(),"ami-fooo");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplate() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutImageSpecsAcceptsImageId() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"minRam=2048");
  conf.setProperty(ClusterSpec.Property.IMAGE_ID.getConfigName(),"ami-fooo");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("minRam=2048,imageId=ami-fooo"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithHardwareSpecsOverridesHardwareId() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  conf.setProperty(ClusterSpec.Property.HARDWARE_ID.getConfigName(),"m1.small");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutHardwareSpecsAcceptsHardwareId() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true");
  conf.setProperty(ClusterSpec.Property.HARDWARE_ID.getConfigName(),"m1.small");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,hardwareId=m1.small"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutLoginSpecsAcceptsBootstrapUser() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  conf.setProperty(ClusterSpec.Property.BOOTSTRAP_USER.getConfigName(),"user:pass");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048,loginUser=user:pass"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutImageSpecsDefaultsToUbuntu1004AndAWSPatternOnEC2() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.PROVIDER.getConfigName(),"aws-ec2");
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"minRam=2048");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("minRam=2048,osFamily=UBUNTU,osVersionMatches=10.04,osDescriptionMatches=^(?!.*(daily|testing)).*ubuntu-images.*$"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithLocationSpecsOverridesLocationId() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048,locationId=us-west-2");
  conf.setProperty(ClusterSpec.Property.LOCATION_ID.getConfigName(),"eu-west-1");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048,locationId=us-west-2"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithDeprecatedLoginUser() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("whirr.login-user","user:pass");
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048,loginUser=user:pass"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.karaf.itest.WhirrFunctionLoaderTest </h4><pre class="type-1 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testServices() throws InterruptedException {
  ServiceFunctionLoader loader=new ServiceFunctionLoader(bundleContext);
  executeCommand("features:install whirr-cassandra");
  executeCommand("features:install whirr-chef");
  executeCommand("features:install whirr-elasticsearch");
  executeCommand("features:install whirr-ganglia");
  executeCommand("features:install whirr-hadoop");
  executeCommand("features:install whirr-hama");
  executeCommand("features:install whirr-hbase");
  executeCommand("features:install whirr-puppet");
  executeCommand("features:install whirr-pig");
  executeCommand("features:install whirr-solr");
  executeCommand("features:install whirr-mahout");
  executeCommand("features:install whirr-yarn");
  executeCommand("features:install whirr-zookeeper");
  System.err.println(executeCommand("osgi:list"));
  getOsgiService("org.apache.whirr.ClusterController","(name=default)",SERVICE_TIMEOUT);
  String function=loader.loadFunction("cleanup_cassandra",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_cassandra",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_cassandra",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_cassandra",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("stop_cassandra",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_chef",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("cleanup_elasticsearch",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_elasticsearch",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_elasticsearch",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_elasticsearch",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("stop_elasticsearch",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_ganglia",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_ganglia",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_hadoop",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_hadoop",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_hama",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_hama",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_hama",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_hbase",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_hbase",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_mahout_client",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_pig_client",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_puppet",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_solr",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_solr",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_solr",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("stop_solr",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_hadoop_mr2",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_hadoop_mr2",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_mr_jobhistory",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_yarn",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_yarn",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("cleanup_zookeeper",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_zookeeper",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_zookeeper",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_zookeeper",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("stop_zookeeper",OsFamily.UNIX);
  Assert.assertNotNull(function);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cassandra.CassandraClusterActionHandlerTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test() public void testGetSeeds() throws UnknownHostException {
  Instance one=getInstance("1");
  Instance two=getInstance("2");
  Set<Instance> instances=Sets.newLinkedHashSet();
  instances.add(one);
  CassandraClusterActionHandler handler=new CassandraClusterActionHandler();
  List<Instance> seeds1=handler.getSeeds(instances);
  assertEquals(1,seeds1.size());
  assertEquals(one,seeds1.get(0));
  instances.add(two);
  for (int i=3; i < 10; i++) {
    instances.add(getInstance(Integer.toString(i)));
  }
  List<Instance> seeds2=handler.getSeeds(instances);
  assertEquals(2,seeds2.size());
  assertEquals(one,seeds2.get(0));
  assertEquals(two,seeds2.get(1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cassandra.integration.CassandraServiceTest </h4><pre class="type-1 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void testInstances() throws Exception {
  Set<String> endPoints=Sets.newLinkedHashSet();
  for (  Instance instance : cluster.getInstances()) {
    Cassandra.Client client=client(instance);
    Map<String,List<String>> tr=client.describe_schema_versions();
    for (    List<String> version : tr.values()) {
      endPoints.addAll(version);
    }
    client.getOutputProtocol().getTransport().close();
  }
  LOG.info("List of endpoints: " + endPoints);
  for (  Instance instance : cluster.getInstances()) {
    String address=instance.getPrivateAddress().getHostAddress();
    assertTrue(address + " not in cluster!",endPoints.remove(address));
  }
  assertTrue("Unknown node returned: " + endPoints.toString(),endPoints.isEmpty());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cdh.integration.Cdh3HBaseServiceTest </h4><pre class="type-4 type-1 type-10 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  ArrayList<ColumnDescriptor> columns=new ArrayList<ColumnDescriptor>();
  ColumnDescriptor cd=new ColumnDescriptor();
  cd.name=FAMILY1;
  columns.add(cd);
  cd=new ColumnDescriptor();
  cd.name=FAMILY2;
  columns.add(cd);
  Hbase.Client client=controller.getThriftClient();
  client.createTable(TABLE,columns);
  ArrayList<Mutation> mutations=new ArrayList<Mutation>();
  mutations.add(new Mutation(false,COLUMN,VALUE));
  client.mutateRow(TABLE,ROW,mutations);
  int scan1=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY1));
  List<TRowResult> rows=client.scannerGet(scan1);
  assertThat(rows.size(),is(1));
  assertThat(Bytes.toString(rows.get(0).getRow()),is("testRow"));
  assertTrue("No more rows",client.scannerGet(scan1).isEmpty());
  client.scannerClose(scan1);
  int scan2=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY2));
  assertTrue("No more rows",client.scannerGet(scan2).isEmpty());
  client.scannerClose(scan2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cdh.integration.Cdh3ZooKeeperServiceTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
class ConnectionWatcher implements Watcher {
    private ZooKeeper zk;
    private CountDownLatch latch=new CountDownLatch(1);
    public void connect(    String hosts) throws IOException, InterruptedException {
      zk=new ZooKeeper(hosts,5000,this);
      latch.await();
    }
    public ZooKeeper getZooKeeper(){
      return zk;
    }
    @Override public void process(    WatchedEvent event){
      if (event.getState() == KeeperState.SyncConnected) {
        latch.countDown();
      }
    }
    public void close() throws InterruptedException {
      if (zk != null) {
        zk.close();
      }
    }
  }
  String path="/data";
  String data="Hello";
  ConnectionWatcher watcher=new ConnectionWatcher();
  watcher.connect(hosts);
  watcher.getZooKeeper().create(path,data.getBytes(),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  watcher.close();
  watcher=new ConnectionWatcher();
  watcher.connect(hosts);
  byte[] actualData=watcher.getZooKeeper().getData(path,false,null);
  assertEquals(data,new String(actualData));
  watcher.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cdh.integration.CdhHBaseServiceTest </h4><pre class="type-4 type-1 type-10 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  ArrayList<ColumnDescriptor> columns=new ArrayList<ColumnDescriptor>();
  ColumnDescriptor cd=new ColumnDescriptor();
  cd.name=FAMILY1;
  columns.add(cd);
  cd=new ColumnDescriptor();
  cd.name=FAMILY2;
  columns.add(cd);
  Hbase.Client client=controller.getThriftClient();
  client.createTable(TABLE,columns);
  ArrayList<Mutation> mutations=new ArrayList<Mutation>();
  mutations.add(new Mutation(false,COLUMN,VALUE));
  client.mutateRow(TABLE,ROW,mutations);
  int scan1=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY1));
  List<TRowResult> rows=client.scannerGet(scan1);
  assertThat(rows.size(),is(1));
  assertThat(Bytes.toString(rows.get(0).getRow()),is("testRow"));
  assertTrue("No more rows",client.scannerGet(scan1).isEmpty());
  client.scannerClose(scan1);
  int scan2=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY2));
  assertTrue("No more rows",client.scannerGet(scan2).isEmpty());
  client.scannerClose(scan2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cdh.integration.CdhZooKeeperServiceTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
class ConnectionWatcher implements Watcher {
    private ZooKeeper zk;
    private CountDownLatch latch=new CountDownLatch(1);
    public void connect(    String hosts) throws IOException, InterruptedException {
      zk=new ZooKeeper(hosts,5000,this);
      latch.await();
    }
    public ZooKeeper getZooKeeper(){
      return zk;
    }
    @Override public void process(    WatchedEvent event){
      if (event.getState() == KeeperState.SyncConnected) {
        latch.countDown();
      }
    }
    public void close() throws InterruptedException {
      if (zk != null) {
        zk.close();
      }
    }
  }
  String path="/data";
  String data="Hello";
  ConnectionWatcher watcher=new ConnectionWatcher();
  watcher.connect(hosts);
  watcher.getZooKeeper().create(path,data.getBytes(),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  watcher.close();
  watcher=new ConnectionWatcher();
  watcher.connect(hosts);
  byte[] actualData=watcher.getZooKeeper().getData(path,false,null);
  assertEquals(data,new String(actualData));
  watcher.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.chef.integration.ChefServiceTest </h4><pre class="type-4 type-1 type-10 type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void testChefRunRecipeFromURL() throws Exception {
  Recipe nginx=new Recipe("nginx",null,"http://s3.amazonaws.com/opscode-community/cookbook_versions/tarballs/529/original/nginx.tgz");
  Map<? extends NodeMetadata,ExecResponse> responses=runRecipe(nginx);
  printResponses(nginx,responses);
  HttpClient client=new HttpClient();
  final GetMethod getIndex=new GetMethod(String.format("http://%s",responses.keySet().iterator().next().getPublicAddresses().iterator().next()));
  assertTrue("Could not connect with nginx server",retry(new Predicate<HttpClient>(){
    @Override public boolean apply(    HttpClient input){
      try {
        int statusCode=input.executeMethod(getIndex);
        assertEquals("Status code should be 200",HttpStatus.SC_OK,statusCode);
        return true;
      }
 catch (      Exception e) {
        return false;
      }
    }
  }
,10,1,TimeUnit.SECONDS).apply(client));
  String indexPageHTML=getIndex.getResponseBodyAsString();
  assertTrue("The string 'nginx' should appear on the index page",indexPageHTML.contains("nginx"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.elasticsearch.ElasticSearchConfigurationBuilderTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testOverrideDefaults() throws Exception {
  Configuration baseConfig=new PropertiesConfiguration();
  baseConfig.addProperty("whirr.provider","aws-ec2");
  baseConfig.addProperty("es.index.store.type","fs");
  ClusterSpec spec=ClusterSpec.withTemporaryKeys(baseConfig);
  Configuration config=ElasticSearchConfigurationBuilder.buildConfig(spec,null);
  assertThat(config.getString("es.index.store.type"),is("fs"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDefaultConfigAwsEC2() throws Exception {
  Configuration baseConfig=new PropertiesConfiguration();
  baseConfig.addProperty("whirr.provider","aws-ec2");
  baseConfig.addProperty("es.plugins","lang-javascript, lang-python");
  ClusterSpec spec=ClusterSpec.withTemporaryKeys(baseConfig);
  Configuration config=ElasticSearchConfigurationBuilder.buildConfig(spec,null);
  assertThat(config.getStringArray("es.plugins"),is(new String[]{"lang-javascript","lang-python","elasticsearch/elasticsearch-cloud-aws/1.5.0"}));
  assertThat(config.getString("es.discovery.type"),is("ec2"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDefaultUnicastConfig() throws Exception {
  Configuration baseConfig=new PropertiesConfiguration();
  baseConfig.addProperty("whirr.provider","cloudservers-us");
  ClusterSpec spec=ClusterSpec.withTemporaryKeys(baseConfig);
  Cluster cluster=mock(Cluster.class);
  Set<Cluster.Instance> instances=Sets.newLinkedHashSet();
  for (  String host : Lists.newArrayList("10.0.0.1","10.0.0.2")) {
    Cluster.Instance instance=mock(Cluster.Instance.class);
    when(instance.getPrivateIp()).thenReturn(host);
    instances.add(instance);
  }
  when(cluster.getInstancesMatching((Predicate<Cluster.Instance>)any())).thenReturn(instances);
  Configuration config=ElasticSearchConfigurationBuilder.buildConfig(spec,cluster);
  String content=StringUtils.join(ElasticSearchConfigurationBuilder.asYamlLines(config.subset(ElasticSearchConfigurationBuilder.ES_PREFIX)),"\n");
  assertThat(content,is("index:\n" + "  store:\n" + "    type: memory\n"+ "gateway:\n"+ "  type: none\n"+ "discovery:\n"+ "  zen:\n"+ "    ping:\n"+ "      multicast:\n"+ "        enabled: false\n"+ "      unicast:\n"+ "        hosts: [\"10.0.0.1:9300\", \"10.0.0.2:9300\"]"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testGenerateYamlConfig(){
  Configuration defaults=new PropertiesConfiguration();
  defaults.addProperty("cloud.aws.id","a");
  defaults.addProperty("cloud.aws.key","b");
  defaults.addProperty("index.store.type","memory");
  String content=StringUtils.join(ElasticSearchConfigurationBuilder.asYamlLines(defaults),"\n");
  assertThat(content,is("cloud:\n" + "  aws:\n" + "    id: a\n"+ "    key: b\n"+ "index:\n"+ "  store:\n"+ "    type: memory"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.ganglia.integration.GangliaServiceTest </h4><pre class="type-4 type-1 type-10 type-3 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  Instance metad=cluster.getInstanceMatching(RolePredicates.role(GangliaMetadClusterActionHandler.GANGLIA_METAD_ROLE));
  String metadHostname=metad.getPublicHostName();
  assertNotNull(metadHostname);
  HttpClient client=new HttpClient();
  GetMethod getIndex=new GetMethod(String.format("http://%s/ganglia/",metadHostname));
  int statusCode=client.executeMethod(getIndex);
  assertEquals("Status code should be 200",HttpStatus.SC_OK,statusCode);
  String indexPageHTML=getIndex.getResponseBodyAsString();
  assertTrue("The string 'Ganglia' should appear on the index page",indexPageHTML.contains("Ganglia"));
  assertTrue("The string 'WhirrGrid' should appear on the index page",indexPageHTML.contains("WhirrGrid"));
  for (  Instance instance : cluster.getInstancesMatching(anyRoleIn(Sets.<String>newHashSet(GANGLIA_METAD_ROLE,GANGLIA_MONITOR_ROLE)))) {
    testMonitorResponse(instance);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hadoop.HadoopConfigurationBuilderTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testOverridesNumberOfReducers() throws Exception {
  Configuration overrides=new PropertiesConfiguration();
  overrides.addProperty("hadoop-mapreduce.mapred.reduce.tasks","7");
  clusterSpec=ClusterSpec.withNoDefaults(overrides);
  Configuration conf=HadoopConfigurationBuilder.buildMapReduceConfiguration(clusterSpec,cluster,defaults,Sets.newLinkedHashSet(Lists.newArrayList("/data0","/data1")));
  assertThat(conf.getString("mapred.reduce.tasks"),is("7"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testMapReduce() throws Exception {
  Cluster cluster=newCluster(5);
  Configuration conf=HadoopConfigurationBuilder.buildMapReduceConfiguration(clusterSpec,cluster,defaults,Sets.newLinkedHashSet(Lists.newArrayList("/data0","/data1")));
  assertThat(conf.getString("p1"),is("mapred1"));
  assertThat(conf.getString("mapred.job.tracker"),matches(".+:8021"));
  assertThat(conf.getString("mapred.tasktracker.map.tasks.maximum"),is("4"));
  assertThat(conf.getString("mapred.tasktracker.reduce.tasks.maximum"),is("3"));
  assertThat(conf.getString("mapred.reduce.tasks"),is("15"));
  assertThat(conf.getString("mapred.local.dir"),is("/data0/hadoop/mapred/local,/data1/hadoop/mapred/local"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testOverrides() throws Exception {
  Configuration overrides=new PropertiesConfiguration();
  overrides.addProperty("hadoop-common.p1","overridden1");
  overrides.addProperty("hadoop-common.p2","overridden2");
  overrides.addProperty("hadoop-common.fs.default.name","not-overridden");
  clusterSpec=ClusterSpec.withNoDefaults(overrides);
  Configuration conf=HadoopConfigurationBuilder.buildCommonConfiguration(clusterSpec,cluster,defaults);
  assertThat(Iterators.size(conf.getKeys()),is(3));
  assertThat(conf.getString("p1"),is("overridden1"));
  assertThat(conf.getString("p2"),is("overridden2"));
  assertThat("Can't override dynamically set properties",conf.getString("fs.default.name"),matches("hdfs://.+:8020/"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testCommon() throws Exception {
  Configuration conf=HadoopConfigurationBuilder.buildCommonConfiguration(clusterSpec,cluster,defaults);
  assertThat(Iterators.size(conf.getKeys()),is(3));
  assertThat(conf.getString("p1"),is("common1"));
  assertThat(conf.getString("p2"),is("common2"));
  assertThat(conf.getString("fs.default.name"),matches("hdfs://.+:8020/"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testHdfs() throws Exception {
  Configuration conf=HadoopConfigurationBuilder.buildHdfsConfiguration(clusterSpec,cluster,defaults,Sets.newLinkedHashSet(Lists.newArrayList("/data0","/data1")));
  assertThat(Iterators.size(conf.getKeys()),is(4));
  assertThat(conf.getString("p1"),is("hdfs1"));
  assertThat(conf.getString("dfs.data.dir"),is("/data0/hadoop/hdfs/data,/data1/hadoop/hdfs/data"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testOverridesNumberOfMappers() throws Exception {
  Configuration overrides=new PropertiesConfiguration();
  overrides.addProperty("hadoop-mapreduce.mapred.tasktracker.map.tasks.maximum","70");
  clusterSpec=ClusterSpec.withNoDefaults(overrides);
  Configuration conf=HadoopConfigurationBuilder.buildMapReduceConfiguration(clusterSpec,cluster,defaults,Sets.newLinkedHashSet(Lists.newArrayList("/data0","/data1")));
  assertThat(conf.getString("mapred.tasktracker.map.tasks.maximum"),is("70"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hadoop.HadoopConfigurationConverterTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testConversion(){
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("p1","v1,v2");
  conf.setProperty("p2","v3");
  List<String> lines=HadoopConfigurationConverter.asXmlConfigurationLines(conf);
  assertThat(lines,is((List<String>)Lists.newArrayList("<configuration>","  <property>","    <name>p1</name>","    <value>v1,v2</value>","  </property>","  <property>","    <name>p2</name>","    <value>v3</value>","  </property>","</configuration>")));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testFinal(){
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("p1","v1");
  conf.setProperty("p2","v2");
  conf.setProperty("p2.final","true");
  List<String> lines=HadoopConfigurationConverter.asXmlConfigurationLines(conf);
  assertThat(lines,is((List<String>)Lists.newArrayList("<configuration>","  <property>","    <name>p1</name>","    <value>v1</value>","  </property>","  <property>","    <name>p2</name>","    <value>v2</value>","    <final>true</final>","  </property>","</configuration>")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hadoop.integration.AbstractHadoopServiceTest </h4><pre class="type-4 type-1 type-3 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  Configuration conf=controller.getConfiguration();
  JobConf job=new JobConf(conf,HadoopServiceTest.class);
  FileSystem fs=FileSystem.get(conf);
  OutputStream os=fs.create(new Path("input"));
  Writer wr=new OutputStreamWriter(os);
  wr.write("b a\n");
  wr.close();
  job.setMapperClass(TokenCountMapper.class);
  job.setReducerClass(LongSumReducer.class);
  job.setOutputKeyClass(Text.class);
  job.setOutputValueClass(LongWritable.class);
  FileInputFormat.setInputPaths(job,new Path("input"));
  FileOutputFormat.setOutputPath(job,new Path("output"));
  JobClient.runJob(job);
  FSDataInputStream in=fs.open(new Path("output/part-00000"));
  BufferedReader reader=new BufferedReader(new InputStreamReader(in));
  assertEquals("a\t1",reader.readLine());
  assertEquals("b\t1",reader.readLine());
  assertNull(reader.readLine());
  reader.close();
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void testExistsTemporaryFolderAndHiveWarehouse() throws Exception {
  Configuration conf=controller.getConfiguration();
  FileSystem fs=FileSystem.get(conf);
  assertThat(fs.exists(new Path("/tmp")),is(true));
  assertThat(fs.exists(new Path("/user/hive/warehouse")),is(true));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hama.integration.HamaServiceTest </h4><pre class="type-1 type-10 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  HamaConfiguration jobConf=controller.getConfiguration();
  jobConf.set("hadoop.rpc.socket.factory.class.default","org.apache.hadoop.net.StandardSocketFactory");
  BSPJob bsp=new BSPJob(jobConf,new BSPJobID());
  LOG.info("Job conf: " + bsp.getConf().get("hadoop.rpc.socket.factory.class.default") + ", "+ bsp.getJobID().toString());
  bsp.setJarByClass(MyEstimator.class);
  bsp.setBspClass(MyEstimator.class);
  bsp.setInputFormat(NullInputFormat.class);
  bsp.setOutputKeyClass(Text.class);
  bsp.setOutputValueClass(DoubleWritable.class);
  bsp.setOutputFormat(TextOutputFormat.class);
  bsp.set("bsp.working.dir","/tmp");
  FileOutputFormat.setOutputPath(bsp,TMP_OUTPUT);
  LOG.info("Client configuration start ..");
  HamaConfiguration clientConf=controller.getConfiguration();
  BSPJobClient jobClient=new BSPJobClient(clientConf);
  ClusterStatus cluster=jobClient.getClusterStatus(true);
  assertNotNull(cluster);
  assertTrue(cluster.getGroomServers() > 0);
  assertTrue(cluster.getMaxTasks() > 1);
  bsp.setNumBspTask(cluster.getMaxTasks());
  LOG.info("Client conf: " + clientConf.get("hadoop.rpc.socket.factory.class.default"));
  RunningJob rJob=jobClient.submitJob(bsp);
  rJob.waitForCompletion();
  LOG.info("finished");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hbase.integration.AbstractHBaseServiceTest </h4><pre class="type-4 type-1 type-10 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  ArrayList<ColumnDescriptor> columns=new ArrayList<ColumnDescriptor>();
  ColumnDescriptor cd=new ColumnDescriptor();
  cd.name=FAMILY1;
  columns.add(cd);
  cd=new ColumnDescriptor();
  cd.name=FAMILY2;
  columns.add(cd);
  Hbase.Client client=controller.getThriftClient();
  client.createTable(TABLE,columns);
  ArrayList<Mutation> mutations=new ArrayList<Mutation>();
  mutations.add(new Mutation(false,COLUMN,VALUE,true));
  client.mutateRow(TABLE,ROW,mutations,null);
  int scan1=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY1),null);
  List<TRowResult> rows=client.scannerGet(scan1);
  assertThat(rows.size(),is(1));
  assertThat(Bytes.toString(rows.get(0).getRow()),is("testRow"));
  assertTrue("No more rows",client.scannerGet(scan1).isEmpty());
  client.scannerClose(scan1);
  int scan2=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY2),null);
  assertTrue("No more rows",client.scannerGet(scan2).isEmpty());
  client.scannerClose(scan2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hbase.integration.HBaseOldServiceTest </h4><pre class="type-4 type-1 type-10 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  ArrayList<ColumnDescriptor> columns=new ArrayList<ColumnDescriptor>();
  ColumnDescriptor cd=new ColumnDescriptor();
  cd.name=FAMILY1;
  columns.add(cd);
  cd=new ColumnDescriptor();
  cd.name=FAMILY2;
  columns.add(cd);
  Hbase.Client client=controller.getThriftClient();
  client.createTable(TABLE,columns);
  ArrayList<Mutation> mutations=new ArrayList<Mutation>();
  mutations.add(new Mutation(false,COLUMN,VALUE));
  client.mutateRow(TABLE,ROW,mutations);
  int scan1=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY1));
  List<TRowResult> rows=client.scannerGet(scan1);
  assertThat(rows.size(),is(1));
  assertThat(Bytes.toString(rows.get(0).getRow()),is("testRow"));
  assertTrue("No more rows",client.scannerGet(scan1).isEmpty());
  client.scannerClose(scan1);
  int scan2=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY2));
  assertTrue("No more rows",client.scannerGet(scan2).isEmpty());
  client.scannerClose(scan2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.jclouds.StatementBuilderTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExplicitExports() throws Exception {
  ClusterSpec clusterSpec=ClusterSpec.withTemporaryKeys();
  clusterSpec.setClusterName("test-cluster");
  clusterSpec.setProvider("test-provider");
  StatementBuilder builder=new StatementBuilder();
  builder.addExport("FOO_BAR","my_value");
  builder.addStatement(Statements.exec("echo $FOO_BAR"));
  String script=builder.name("foo").build(clusterSpec).render(OsFamily.UNIX);
  assertThat(script,containsString("export FOO_BAR="));
  assertThat(script,containsString("my_value"));
  assertThat(script,containsString("echo $FOO_BAR"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDeduplication() throws Exception {
  ClusterSpec clusterSpec=ClusterSpec.withTemporaryKeys();
  clusterSpec.setClusterName("test-cluster");
  clusterSpec.setProvider("test-provider");
  StatementBuilder builder=new StatementBuilder();
  builder.addStatement(new RunUrlStatement(false,"http://example.org/","a/b","c"));
  builder.addStatement(new RunUrlStatement(false,"http://example.org/","d/e","f"));
  builder.addStatement(new RunUrlStatement(false,"http://example.org/","a/b","c"));
  String script=builder.name("foo").build(clusterSpec).render(OsFamily.UNIX);
  int first=script.indexOf("runurl http://example.org/a/b c");
  assertThat(first,greaterThan(-1));
  int second=script.indexOf("runurl http://example.org/a/b c",first + 1);
  assertThat("No second occurrence",second,is(-1));
  assertThat(script,containsString("runurl http://example.org/d/e f"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testClusterSpecExports() throws Exception {
  PropertiesConfiguration conf=new PropertiesConfiguration();
  conf.addProperty("ignored","ignored_value");
  conf.addProperty("whirr.env.FOO_BAR","my_value");
  ClusterSpec clusterSpec=ClusterSpec.withTemporaryKeys(conf);
  clusterSpec.setClusterName("test-cluster");
  clusterSpec.setProvider("test-provider");
  StatementBuilder builder=new StatementBuilder();
  builder.addStatement(Statements.exec("echo $FOO_BAR"));
  String script=builder.name("foo").build(clusterSpec).render(OsFamily.UNIX);
  assertThat(script,containsString("export FOO_BAR="));
  assertThat(script,containsString("my_value"));
  assertThat(script,containsString("echo $FOO_BAR"));
  assertThat(script,not(containsString("ignored")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.puppet.functions.ModulePropertiesFromConfigurationTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWhenMatches(){
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("puppet.nginx.module","git://github.com/puppetlabs/puppetlabs-nginx.git");
  conf.setProperty("puppet.nginx.module.branch","notmaster");
  conf.setProperty("puppet.foox.module",null);
  conf.setProperty("puppet.module","foo");
  assertEquals(ImmutableMap.of("puppet.nginx.module.branch","notmaster","puppet.nginx.module","git://github.com/puppetlabs/puppetlabs-nginx.git"),ModulePropertiesFromConfiguration.INSTANCE.apply(conf));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.puppet.statements.CreateSitePpAndApplyRolesTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWithAttribs() throws IOException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("puppet.nginx.module","git://github.com/puppetlabs/puppetlabs-nginx.git");
  conf.setProperty("nginx.server.hostname","foohost");
  CreateSitePpAndApplyRoles nginx=new CreateSitePpAndApplyRoles(ImmutableSet.of("nginx::server"),ImmutableSet.of(new Cluster.Instance(new Credentials("dummy","dummy"),Sets.newHashSet("puppet:nginx::server"),"127.0.0.1","127.0.0.1","id-1",null)),conf);
  assertEquals(CharStreams.toString(Resources.newReaderSupplier(Resources.getResource("nginx-with-attribs.txt"),Charsets.UTF_8)),nginx.render(OsFamily.UNIX));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.solr.integration.SolrServiceTest </h4><pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSolr() throws IOException, SolrServerException {
  Set<Cluster.Instance> instances=cluster.getInstancesMatching(role(SOLR_ROLE));
  for (  Cluster.Instance instance : instances) {
    String publicIp=instance.getPublicIp();
    LOG.info("Adding a document to instance " + instance.getId() + " @ "+ publicIp);
    CommonsHttpSolrServer solrServer=new CommonsHttpSolrServer(String.format("http://%s:%s/solr/core0",instance.getPublicHostName(),SOLR_PORT));
    SolrInputDocument doc=new SolrInputDocument();
    doc.addField("name","Apache Whirr");
    doc.addField("inceptionYear","2010");
    solrServer.add(doc);
    solrServer.commit();
    LOG.info("Committed document to instance " + instance.getId() + " @ "+ publicIp);
    LOG.info("Performing a search on instance " + instance.getId() + " @ "+ publicIp);
    SolrQuery query=new SolrQuery("name:whirr");
    QueryResponse response=solrServer.query(query);
    SolrDocumentList results=response.getResults();
    assertEquals("Search on instance " + instance.getId() + " did NOT return a document!",1,results.size());
    SolrDocument resultDoc=results.get(0);
    assertEquals("name field on document of instance " + instance.getId() + " is incorrect","Apache Whirr",resultDoc.get("name"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.yarn.integration.AbstractHadoopServiceTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExistsTemporaryFolderAndHiveWarehouse() throws Exception {
  Configuration conf=controller.getConfiguration();
  FileSystem fs=FileSystem.get(conf);
  assertThat(fs.exists(new Path("/tmp")),is(true));
  assertThat(fs.exists(new Path("/user/hive/warehouse")),is(true));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Configuration conf=controller.getConfiguration();
  JobConf job=new JobConf(conf,AbstractHadoopServiceTest.class);
  FileSystem fs=FileSystem.get(conf);
  OutputStream os=fs.create(new Path("input"));
  Writer wr=new OutputStreamWriter(os);
  wr.write("b a\n");
  wr.close();
  job.setMapperClass(TokenCountMapper.class);
  job.setReducerClass(LongSumReducer.class);
  job.setOutputKeyClass(Text.class);
  job.setOutputValueClass(LongWritable.class);
  FileInputFormat.setInputPaths(job,new Path("input"));
  FileOutputFormat.setOutputPath(job,new Path("output"));
  JobClient.runJob(job);
  FSDataInputStream in=fs.open(new Path("output/part-00000"));
  BufferedReader reader=new BufferedReader(new InputStreamReader(in));
  assertEquals("a\t1",reader.readLine());
  assertEquals("b\t1",reader.readLine());
  assertNull(reader.readLine());
  reader.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.zookeeper.integration.ZooKeeperServiceTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
class ConnectionWatcher implements Watcher {
    private ZooKeeper zk;
    private CountDownLatch latch=new CountDownLatch(1);
    public void connect(    String hosts) throws IOException, InterruptedException {
      zk=new ZooKeeper(hosts,5000,this);
      latch.await();
    }
    public ZooKeeper getZooKeeper(){
      return zk;
    }
    @Override public void process(    WatchedEvent event){
      if (event.getState() == KeeperState.SyncConnected) {
        latch.countDown();
      }
    }
    public void close() throws InterruptedException {
      if (zk != null) {
        zk.close();
      }
    }
  }
  String path="/data";
  String data="Hello";
  ConnectionWatcher watcher=new ConnectionWatcher();
  watcher.connect(hosts);
  watcher.getZooKeeper().create(path,data.getBytes(),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  watcher.close();
  watcher=new ConnectionWatcher();
  watcher.connect(hosts);
  byte[] actualData=watcher.getZooKeeper().getData(path,false,null);
  assertEquals(data,new String(actualData));
  watcher.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.state.integration.BlobClusterStateStoreTest </h4><pre class="type-1 type-12 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void testStoreAndLoadState() throws Exception {
  ClusterSpec spec=getTestClusterSpec();
  BlobStoreContext context=BlobStoreContextBuilder.build(spec);
  String container=generateRandomContainerName(context);
  try {
    spec.setStateStore("blob");
    spec.setStateStoreContainer(container);
    Cluster expected=createTestCluster(new String[]{"region/id1","region/id2"},new String[]{"role1","role2"});
    BlobClusterStateStore store=new BlobClusterStateStore(spec);
    store.save(expected);
    Cluster stored=store.load();
    Cluster.Instance first=Iterables.getFirst(stored.getInstances(),null);
    assertNotNull(first);
    assertThat(first.getId(),is("region/id1"));
    assertThat(first.getRoles().contains("role1"),is(true));
    assertThat(stored.getInstances().size(),is(2));
    store.destroy();
    expected=store.load();
    assertNull(expected);
  }
  finally {
    LOG.info("Removing temporary container '{}'",container);
    context.getBlobStore().deleteContainer(container);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.util.integration.BlobCacheTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testSelectBestLocation() throws Exception {
  ClusterSpec spec=getTestClusterSpec();
  if (!spec.getProvider().equals("aws") && !spec.getProvider().equals("aws-ec2")) {
    return;
  }
  spec.setTemplate(TemplateBuilderSpec.parse("locationId=eu-west-1"));
  BlobCache cache=BlobCache.getInstance(ComputeCache.INSTANCE,spec);
  assertThat(cache.getLocation().getId(),is("EU"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testSpecifyCacheContainerInConfig() throws Exception {
  ClusterSpec spec=getTestClusterSpec();
  BlobStoreContext context=BlobStoreContextBuilder.build(spec);
  String container=generateRandomContainerName(context);
  LOG.info("Created temporary container '{}'",container);
  try {
    spec.setBlobStoreCacheContainer(container);
    BlobCache cache=BlobCache.getInstance(ComputeCache.INSTANCE,spec);
    assertThat(cache.getContainer(),is(container));
    cache.dropAndClose();
    assertThat(context.getBlobStore().containerExists(container),is(true));
  }
  finally {
    LOG.info("Removing temporary container '{}'",container);
    context.getBlobStore().deleteContainer(container);
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
