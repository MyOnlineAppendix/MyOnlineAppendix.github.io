<h3><span class=" glyphicon glyphicon-tag"/>&nbspConditionMatcher</h3><kbd>Verifies logic rules using matcher-style statements</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.whirr.ByonClusterControllerTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testSpecifyByonCache() throws Exception {
  Map<String,Node> byonNodes=new HashMap<String,Node>();
  byonNodes.put("foo",Node.builder().id("foo-1234").name("foo-node").hostname("1.2.3.4").osFamily("ubuntu").osVersion("12.04").osDescription("foo OS").description("foo node").build());
  ClusterSpec tempSpec=ClusterSpec.withTemporaryKeys();
  tempSpec.setClusterName("test-cluster-for-byon-cache");
  tempSpec.setProvider("byon");
  tempSpec.setServiceName("byon");
  tempSpec.setIdentity("dummy");
  tempSpec.setStateStore("none");
  tempSpec.setByonNodes(byonNodes);
  ClusterControllerFactory factory=new ClusterControllerFactory();
  ClusterController controller=factory.create(tempSpec.getServiceName());
  assertThat(controller.getInstances(tempSpec).size(),is(1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.ClusterControllerFactoryTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testServiceFactoryIsCreatedFromWhirrProperties() throws IOException {
  ClusterControllerFactory factory=new ClusterControllerFactory();
  ClusterController controller=factory.create("test-service");
  assertThat(controller,instanceOf(TestClusterController.class));
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testServiceFactoryWithNullServiceName() throws IOException {
  ClusterControllerFactory factory=new ClusterControllerFactory();
  ClusterController controller=factory.create(null);
  assertThat(controller,instanceOf(ClusterController.class));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.ClusterSpecTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testCopySpec() throws Exception {
  ClusterSpec spec=ClusterSpec.withTemporaryKeys(new PropertiesConfiguration("whirr-core-test.properties"));
  spec.setTemplate(TemplateBuilderSpec.parse("locationId=random-location"));
  assertThat(spec.copy(),is(spec));
  assertThat(spec.copy().hashCode(),is(spec.hashCode()));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testApplySubroleAliases() throws ConfigurationException {
  CompositeConfiguration c=new CompositeConfiguration();
  Configuration config=new PropertiesConfiguration();
  config.addProperty("whirr.instance-templates","1 puppet:somepup::pet+something-else, 1 something-else-only");
  c.addConfiguration(config);
  InstanceTemplate template=InstanceTemplate.parse(c).get(0);
  Set<String> expected=Sets.newLinkedHashSet(Arrays.asList(new String[]{"puppet:somepup::pet","something-else"}));
  assertThat(template.getRoles(),is(expected));
  InstanceTemplate template2=InstanceTemplate.parse(c).get(1);
  Set<String> expected2=Sets.newLinkedHashSet(Arrays.asList(new String[]{"something-else-only"}));
  assertThat(template2.getRoles(),is(expected2));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testFirewallRules() throws Exception {
  PropertiesConfiguration conf=new PropertiesConfiguration("whirr-core-test.properties");
  conf.setProperty("whirr.firewall-rules","8000,8001");
  conf.setProperty("whirr.firewall-rules.serviceA","9000,9001");
  ClusterSpec spec=ClusterSpec.withTemporaryKeys(conf);
  Map<String,List<String>> firewallRules=spec.getFirewallRules();
  assertThat(firewallRules.get(null).equals(Lists.<String>newArrayList("8000","8001")),is(true));
  assertThat(firewallRules.get("serviceA").equals(Lists.<String>newArrayList("9000","9001")),is(true));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testClusterUserShouldBeCurrentUser() throws Exception {
  ClusterSpec spec=ClusterSpec.withTemporaryKeys();
  assertThat(spec.getClusterUser(),is(System.getProperty("user.name")));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testEndpoint() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.ENDPOINT.getConfigName(),"http://compute");
  conf.setProperty(ClusterSpec.Property.BLOBSTORE_ENDPOINT.getConfigName(),"http://blobstore");
  ClusterSpec spec=ClusterSpec.withNoDefaults(conf);
  assertThat(spec.getEndpoint(),is("http://compute"));
  assertThat(spec.getBlobStoreEndpoint(),is("http://blobstore"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testNumberOfInstancesPerTemplate() throws Exception {
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.instance-templates","1 hadoop-namenode+hadoop-jobtracker,3 hadoop-datanode+hadoop-tasktracker");
  conf.addProperty("whirr.instance-templates-max-percent-failures","100 hadoop-namenode+hadoop-jobtracker,60 hadoop-datanode+hadoop-tasktracker");
  ClusterSpec expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  List<InstanceTemplate> templates=expectedClusterSpec.getInstanceTemplates();
  InstanceTemplate t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  InstanceTemplate t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(2));
  conf.setProperty("whirr.instance-templates-max-percent-failures","60 hadoop-datanode+hadoop-tasktracker");
  expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  templates=expectedClusterSpec.getInstanceTemplates();
  t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(2));
  conf.addProperty("whirr.instance-templates-minumum-number-of-instances","1 hadoop-datanode+hadoop-tasktracker");
  expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  templates=expectedClusterSpec.getInstanceTemplates();
  t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(2));
  conf.setProperty("whirr.instance-templates-minimum-number-of-instances","3 hadoop-datanode+hadoop-tasktracker");
  expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  templates=expectedClusterSpec.getInstanceTemplates();
  t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(3));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-5 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testIllegalArgumentExceptionOnInstancesTemplates() throws Exception {
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.instance-templates","1 hadoop-namenode+hadoop-jobtracker,3 hadoop-datanode+hadoop-tasktracker");
  conf.addProperty("whirr.instance-templates-max-percent-failures","60 % hadoop-datanode+hadoop-tasktracker");
  ClusterSpec expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  List<InstanceTemplate> templates=expectedClusterSpec.getInstanceTemplates();
  InstanceTemplate t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  InstanceTemplate t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(2));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-5 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=NumberFormatException.class) public void testNumberFormatExceptionOnInstancesTemplates() throws Exception {
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.instance-templates","1 hadoop-namenode+hadoop-jobtracker,3 hadoop-datanode+hadoop-tasktracker");
  conf.addProperty("whirr.instance-templates-max-percent-failures","60% hadoop-datanode+hadoop-tasktracker");
  ClusterSpec expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  List<InstanceTemplate> templates=expectedClusterSpec.getInstanceTemplates();
  InstanceTemplate t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  InstanceTemplate t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(2));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDefaultsCanBeOverridden() throws ConfigurationException, JSchException, IOException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.RUN_URL_BASE.getConfigName(),"http://example.org");
  ClusterSpec spec=ClusterSpec.withNoDefaults(conf);
  assertThat(spec.getRunUrlBase(),is("http://example.org"));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testGetConfigurationForKeysWithPrefix() throws ConfigurationException, JSchException, IOException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("a.b",1);
  conf.setProperty("b.a",2);
  conf.setProperty("a.c",3);
  ClusterSpec spec=ClusterSpec.withNoDefaults(conf);
  Configuration prefixConf=spec.getConfigurationForKeysWithPrefix("a");
  List<String> prefixKeys=Lists.newArrayList();
  Iterators.addAll(prefixKeys,prefixConf.getKeys());
  assertThat(prefixKeys.size(),is(2));
  assertThat(prefixKeys.get(0),is("a.b"));
  assertThat(prefixKeys.get(1),is("a.c"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testEnvVariableInterpolation(){
  Map<String,String> envMap=System.getenv();
  assertThat(envMap.isEmpty(),is(false));
  String undefinedEnvVar="UNDEFINED_ENV_VAR";
  assertThat(envMap.containsKey(undefinedEnvVar),is(false));
  Entry<String,String> firstEntry=Iterables.get(envMap.entrySet(),0);
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("a",String.format("${env:%s}",firstEntry.getKey()));
  conf.setProperty("b",String.format("${env:%s}",undefinedEnvVar));
  assertThat(conf.getString("a"),is(firstEntry.getValue()));
  assertThat(conf.getString("b"),is(String.format("${env:%s}",undefinedEnvVar)));
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDefaultsAreSet() throws ConfigurationException, JSchException, IOException {
  ClusterSpec spec=ClusterSpec.withTemporaryKeys();
  assertThat(spec.getClusterUser(),is(System.getProperty("user.name")));
  assertThat(spec.getMaxStartupRetries(),is(1));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDefaultBlobStoreforComputeProvider() throws Exception {
  for (  String pair : new String[]{"ec2:aws-s3","aws-ec2:aws-s3","cloudservers:cloudfiles-us","cloudservers-us:cloudfiles-us","cloudservers-uk:cloudfiles-uk"}) {
    String[] parts=pair.split(":");
    Configuration config=new PropertiesConfiguration();
    config.addProperty("whirr.provider",parts[0]);
    ClusterSpec spec=ClusterSpec.withTemporaryKeys(config);
    assertThat(spec.getBlobStoreProvider(),is(parts[1]));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.ClusterTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getInstanceById(){
  Cluster.Instance instance=cluster.getInstanceMatching(withIds("id-0"));
  assertThat(instance.getRoles().contains("role-0"),is(true));
}

</code></pre>

<br>
<pre class="type-8 type-1 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void remoteInstanceById(){
  cluster.removeInstancesMatching(withIds("id-0"));
  try {
    cluster.getInstanceMatching(withIds("id-0"));
    fail("Element not remnoved");
  }
 catch (  NoSuchElementException e) {
  }
  assertThat(cluster.getInstances().size(),is(NUMBER_OF_INSTANCES - 1));
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void getInstanceByRole(){
  Cluster.Instance instance=cluster.getInstanceMatching(role("role-0"));
  assertThat(instance.getId(),is("id-0"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.actions.ScriptBasedClusterActionTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testActionIsExecutedOnAllRelevantNodes() throws Exception {
  T action=newClusterActionInstance(EMPTYSET,EMPTYSET);
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(2));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterScriptExecutionByInstanceId() throws Exception {
  String instanceId=getInstaceForRole(cluster,"noop3").getId();
  T action=newClusterActionInstance(EMPTYSET,newHashSet(instanceId));
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(1));
  assertHasRole(executions.get(0),cluster,"noop3");
  assertEquals(executions.get(0).getNode().getId(),instanceId);
  assertAnyStatementContains(dryRun,"noop1-" + getActionName(),"noop3-" + getActionName());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterScriptExecutionByRoleAndInstanceId() throws Exception {
  String instanceId=getInstaceForRole(cluster,"noop1").getId();
  T action=newClusterActionInstance(newHashSet("noop1"),newHashSet(instanceId));
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(1));
  assertHasRole(executions.get(0),cluster,"noop1");
  assertEquals(executions.get(0).getNode().getId(),instanceId);
  assertAnyStatementContains(dryRun,"noop1-" + getActionName());
  assertNoStatementContains(dryRun,"noop2-" + getActionName(),"noop3-" + getActionName());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testNoScriptExecutionsForNoop() throws Exception {
  T action=newClusterActionInstance(ImmutableSet.of("noop"),EMPTYSET);
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(0));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterScriptExecutionByRole() throws Exception {
  String instanceId=getInstaceForRole(cluster,"noop2").getId();
  T action=newClusterActionInstance(ImmutableSet.of("noop2"),EMPTYSET);
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(1));
  assertHasRole(executions.get(0),cluster,"noop2");
  assertEquals(executions.get(0).getNode().getId(),instanceId);
  assertAnyStatementContains(dryRun,"noop2-" + getActionName());
  assertNoStatementContains(dryRun,"noop1-" + getActionName(),"noop3-" + getActionName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.MainTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testUnrecognizedCommand() throws Exception {
  Main main=new Main(new TestCommand());
  ByteArrayOutputStream bytes=new ByteArrayOutputStream();
  PrintStream err=new PrintStream(bytes);
  int rc=main.run(null,null,err,Lists.newArrayList("bogus-command"));
  assertThat(rc,is(-1));
  assertThat(bytes.toString(),containsString("Unrecognized command 'bogus-command'"));
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testNoArgs() throws Exception {
  Main main=new Main(new TestCommand());
  ByteArrayOutputStream bytes=new ByteArrayOutputStream();
  PrintStream out=new PrintStream(bytes);
  int rc=main.run(null,out,null,Collections.<String>emptyList());
  assertThat(rc,is(-1));
  assertThat(bytes.toString(),containsString("Usage: whirr COMMAND"));
  assertThat(bytes.toString(),containsString("test-command  test description"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.command.DestroyClusterCommandTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testAllOptions() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  when(factory.create((String)any())).thenReturn(controller);
  DestroyClusterCommand command=new DestroyClusterCommand(factory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,null,Lists.newArrayList("--instance-templates","1 noop","--service-name","test-service","--cluster-name","test-cluster","--provider","rackspace","--identity","myusername","--credential","mypassword","--private-key-file",keys.get("private").getAbsolutePath(),"--version","version-string"));
  assertThat(rc,is(0));
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.version","version-string");
  conf.addProperty("whirr.instance-templates","1 noop");
  ClusterSpec expectedClusterSpec=ClusterSpec.withTemporaryKeys(conf);
  expectedClusterSpec.setServiceName("test-service");
  expectedClusterSpec.setProvider("rackspace");
  expectedClusterSpec.setIdentity("myusername");
  expectedClusterSpec.setCredential("mypassword");
  expectedClusterSpec.setClusterName("test-cluster");
  expectedClusterSpec.setPrivateKey(keys.get("private"));
  expectedClusterSpec.setPublicKey(keys.get("public"));
  verify(factory).create("test-service");
  verify(controller).destroyCluster(expectedClusterSpec);
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testInsufficientOptions() throws Exception {
  DestroyClusterCommand command=new DestroyClusterCommand();
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,null,err,Lists.<String>newArrayList("--private-key-file",keys.get("private").getAbsolutePath()));
  assertThat(rc,is(-1));
  assertThat(errBytes.toString(),containsString("Option 'cluster-name' not set"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.command.DestroyInstanceCommandTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDestroyInstanceById() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  when(factory.create((String)any())).thenReturn(controller);
  DestroyInstanceCommand command=new DestroyInstanceCommand(factory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,null,Lists.newArrayList("--instance-templates","1 noop","--instance-id","region/instanceid","--service-name","test-service","--cluster-name","test-cluster","--provider","rackspace","--identity","myusername","--credential","mypassword","--private-key-file",keys.get("private").getAbsolutePath(),"--version","version-string"));
  assertThat(rc,is(0));
  verify(controller).destroyInstance((ClusterSpec)any(),eq("region/instanceid"));
}

</code></pre>

<br>
<pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testInstanceIdMandatory() throws Exception {
  DestroyInstanceCommand command=new DestroyInstanceCommand();
  int rc=command.run(null,out,err,Collections.<String>emptyList());
  assertThat(rc,is(-1));
  String errOutput=errBytes.toString();
  assertThat(errOutput,containsString("--instance-id is a mandatory argument"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.command.LaunchClusterCommandTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testLaunchClusterUsingDryRun() throws Exception {
  ClusterControllerFactory factory=new ClusterControllerFactory();
  TestLaunchClusterCommand launchCluster=new TestLaunchClusterCommand(factory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=launchCluster.run(null,out,err,Lists.<String>newArrayList("--cluster-name","test-cluster-launch","--state-store","none","--instance-templates","1 zookeeper+cassandra, 1 zookeeper+elasticsearch","--provider","stub","--identity","dummy","--private-key-file",keys.get("private").getAbsolutePath()));
  MatcherAssert.assertThat(rc,is(0));
  assertExecutedPhases(launchCluster.dryRun,"bootstrap","configure","start");
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testInsufficientArgs() throws Exception {
  LaunchClusterCommand command=new LaunchClusterCommand();
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,null,err,Lists.<String>newArrayList("--private-key-file",keys.get("private").getAbsolutePath()));
  assertThat(rc,is(-1));
  assertThat(errBytes.toString(),containsString("Option 'cluster-name' not set."));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testMaxPercentFailure() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  Cluster cluster=mock(Cluster.class);
  when(factory.create((String)any())).thenReturn(controller);
  when(controller.launchCluster((ClusterSpec)any())).thenReturn(cluster);
  LaunchClusterCommand command=new LaunchClusterCommand(factory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,null,Lists.newArrayList("--service-name","hadoop","--cluster-name","test-cluster","--instance-templates","1 hadoop-namenode+hadoop-jobtracker,3 hadoop-datanode+hadoop-tasktracker","--instance-templates-max-percent-failures","60 hadoop-datanode+hadoop-tasktracker","--provider","aws-ec2","--identity","myusername","--credential","mypassword","--private-key-file",keys.get("private").getAbsolutePath(),"--version","version-string"));
  assertThat(rc,is(0));
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.provider","aws-ec2");
  conf.addProperty("whirr.version","version-string");
  conf.addProperty("whirr.instance-templates-max-percent-failure","60 hadoop-datanode+hadoop-tasktracker");
  ClusterSpec expectedClusterSpec=ClusterSpec.withTemporaryKeys(conf);
  expectedClusterSpec.setInstanceTemplates(Lists.newArrayList(InstanceTemplate.builder().numberOfInstance(1).minNumberOfInstances(1).roles("hadoop-namenode","hadoop-jobtracker").build(),InstanceTemplate.builder().numberOfInstance(3).minNumberOfInstances(2).roles("hadoop-datanode","hadoop-tasktracker").build()));
  expectedClusterSpec.setServiceName("hadoop");
  expectedClusterSpec.setIdentity("myusername");
  expectedClusterSpec.setCredential("mypassword");
  expectedClusterSpec.setClusterName("test-cluster");
  expectedClusterSpec.setPrivateKey(keys.get("private"));
  expectedClusterSpec.setPublicKey(keys.get("public"));
  verify(factory).create("hadoop");
  verify(controller).launchCluster(expectedClusterSpec);
  assertThat(outBytes.toString(),containsString("Started cluster of 0 instances"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testAllOptions() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  Cluster cluster=mock(Cluster.class);
  when(factory.create((String)any())).thenReturn(controller);
  when(controller.launchCluster((ClusterSpec)any())).thenReturn(cluster);
  LaunchClusterCommand command=new LaunchClusterCommand(factory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,null,Lists.newArrayList("--service-name","test-service","--cluster-name","test-cluster","--instance-templates","1 role1+role2,2 role3","--provider","rackspace","--endpoint","http://endpoint","--blobstore-endpoint","http://blobstore-endpoint","--identity","myusername","--credential","mypassword","--private-key-file",keys.get("private").getAbsolutePath(),"--version","version-string"));
  assertThat(rc,is(0));
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.version","version-string");
  ClusterSpec expectedClusterSpec=ClusterSpec.withTemporaryKeys(conf);
  expectedClusterSpec.setInstanceTemplates(Lists.newArrayList(InstanceTemplate.builder().numberOfInstance(1).roles("role1","role2").build(),InstanceTemplate.builder().numberOfInstance(2).roles("role3").build()));
  expectedClusterSpec.setServiceName("test-service");
  expectedClusterSpec.setProvider("rackspace");
  expectedClusterSpec.setEndpoint("http://endpoint");
  expectedClusterSpec.setIdentity("myusername");
  expectedClusterSpec.setCredential("mypassword");
  expectedClusterSpec.setBlobStoreEndpoint("http://blobstore-endpoint");
  expectedClusterSpec.setClusterName("test-cluster");
  expectedClusterSpec.setPrivateKey(keys.get("private"));
  expectedClusterSpec.setPublicKey(keys.get("public"));
  verify(factory).create("test-service");
  verify(controller).launchCluster(expectedClusterSpec);
  assertThat(outBytes.toString(),containsString("Started cluster of 0 instances"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.command.ListClusterCommandTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testInsufficientOptions() throws Exception {
  ListClusterCommand command=new ListClusterCommand();
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,null,err,Lists.<String>newArrayList("--private-key-file",keys.get("private").getAbsolutePath()));
  assertThat(rc,is(-1));
  assertThat(errBytes.toString(),containsString("Option 'cluster-name' not set."));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testAllOptions() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  when(factory.create((String)any())).thenReturn(controller);
  NodeMetadata node1=new NodeMetadataBuilder().name("name1").ids("id1").location(new LocationBuilder().scope(LocationScope.PROVIDER).id("location-id1").description("location-desc1").build()).imageId("image-id").status(NodeMetadata.Status.RUNNING).publicAddresses(Lists.newArrayList("127.0.0.1")).privateAddresses(Lists.newArrayList("127.0.0.1")).build();
  NodeMetadata node2=new NodeMetadataBuilder().name("name2").ids("id2").location(new LocationBuilder().scope(LocationScope.PROVIDER).id("location-id2").description("location-desc2").build()).imageId("image-id").status(NodeMetadata.Status.RUNNING).publicAddresses(Lists.newArrayList("127.0.0.2")).privateAddresses(Lists.newArrayList("127.0.0.2")).build();
  when(controller.getNodes((ClusterSpec)any())).thenReturn((Set)Sets.newLinkedHashSet(Lists.newArrayList(node1,node2)));
  when(controller.getInstances((ClusterSpec)any(),(ClusterStateStore)any())).thenCallRealMethod();
  ClusterStateStore memStore=new MemoryClusterStateStore();
  memStore.save(createTestCluster(new String[]{"id1","id2"},new String[]{"role1","role2"}));
  ClusterStateStoreFactory stateStoreFactory=mock(ClusterStateStoreFactory.class);
  when(stateStoreFactory.create((ClusterSpec)any())).thenReturn(memStore);
  ListClusterCommand command=new ListClusterCommand(factory,stateStoreFactory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,null,Lists.newArrayList("--instance-templates","1 noop","--service-name","test-service","--cluster-name","test-cluster","--identity","myusername","--quiet","--private-key-file",keys.get("private").getAbsolutePath()));
  assertThat(rc,is(0));
  assertThat(outBytes.toString(),is("id1\timage-id\t127.0.0.1\t127.0.0.1\tRUNNING\tlocation-id1\trole1\n" + "id2\timage-id\t127.0.0.2\t127.0.0.2\tRUNNING\tlocation-id2\trole2\n"));
  verify(factory).create("test-service");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.command.RunScriptCommandTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testScriptPathIsMandatory() throws Exception {
  RunScriptCommand command=new RunScriptCommand();
  int rc=command.run(null,out,err,Lists.<String>newArrayList());
  assertThat(rc,is(-1));
  assertThat(errBytes.toString(),containsString("Please specify a script file to be executed."));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testRunScriptByRole() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  when(factory.create((String)any())).thenReturn(controller);
  ClusterStateStore memStore=new MemoryClusterStateStore();
  memStore.save(createTestCluster(new String[]{"reg/A","reg/B"},new String[]{"A","B"}));
  ClusterStateStoreFactory stateStoreFactory=mock(ClusterStateStoreFactory.class);
  when(stateStoreFactory.create((ClusterSpec)any())).thenReturn(memStore);
  RunScriptCommand command=new RunScriptCommand(factory,stateStoreFactory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,System.err,Lists.newArrayList("--instance-templates","1 noop","--script","/dev/null","--roles","A","--cluster-name","test-cluster","--provider","provider","--identity","myusername","--credential","mypassword","--private-key-file",keys.get("private").getAbsolutePath()));
  assertThat(rc,is(0));
  ArgumentCaptor<Predicate> predicate=ArgumentCaptor.forClass(Predicate.class);
  verify(controller).runScriptOnNodesMatching((ClusterSpec)any(),predicate.capture(),(Statement)any());
  Predicate<NodeMetadata> expected=Predicates.and(Predicates.<NodeMetadata>alwaysTrue(),withIds("reg/A"));
  assertThat(predicate.getValue().toString(),is(expected.toString()));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testRunScriptByInstanceId() throws Exception {
  ClusterControllerFactory factory=mock(ClusterControllerFactory.class);
  ClusterController controller=mock(ClusterController.class);
  when(factory.create((String)any())).thenReturn(controller);
  RunScriptCommand command=new RunScriptCommand(factory);
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  int rc=command.run(null,out,System.err,Lists.newArrayList("--script","/dev/null","--instance-templates","1 noop","--instances","A,B","--cluster-name","test-cluster","--provider","provider","--identity","myusername","--credential","mypassword","--private-key-file",keys.get("private").getAbsolutePath()));
  assertThat(rc,is(0));
  ArgumentCaptor<Predicate> predicate=ArgumentCaptor.forClass(Predicate.class);
  verify(controller).runScriptOnNodesMatching((ClusterSpec)any(),predicate.capture(),(Statement)any());
  Predicate<NodeMetadata> expected=Predicates.and(Predicates.<NodeMetadata>alwaysTrue(),withIds("A","B"));
  assertThat(predicate.getValue().toString(),is(expected.toString()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.cli.command.VersionCommandTest </h4><pre class="type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testOverrides() throws Exception {
  VersionCommand command=new VersionCommand();
  int rc=command.run(null,out,null,Collections.<String>emptyList());
  assertThat(rc,is(0));
  assertThat(outBytes.toString(),startsWith("Apache Whirr "));
  assertThat(outBytes.toString(),containsString("jclouds"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.command.AbstractClusterCommandTest </h4><pre class="type-4 type-1 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Verifies values related to public fields.
"></span><br>
@Test public void testOverrides() throws Exception {
  AbstractClusterCommand clusterCommand=new AbstractClusterCommand("name","description",new ClusterControllerFactory()){
    @Override public int run(    InputStream in,    PrintStream out,    PrintStream err,    List<String> args) throws Exception {
      return 0;
    }
  }
;
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  OptionSet optionSet=clusterCommand.parser.parse("--quiet","--service-name","overridden-test-service","--config","whirr-override-test.properties","--private-key-file",keys.get("private").getAbsolutePath());
  ClusterSpec clusterSpec=clusterCommand.getClusterSpec(optionSet);
  assertThat(optionSet.has("quiet"),is(true));
  assertThat(clusterSpec.isQuiet(),is(true));
  assertThat(clusterSpec.getServiceName(),is("overridden-test-service"));
  assertThat(clusterSpec.getClusterName(),is("test-cluster"));
  optionSet=clusterCommand.parser.parse("--quiet","true","--service-name","overridden-test-service","--config","whirr-override-test.properties","--private-key-file",keys.get("private").getAbsolutePath());
  clusterSpec=clusterCommand.getClusterSpec(optionSet);
  assertThat(optionSet.has("quiet"),is(true));
  assertThat(clusterSpec.isQuiet(),is(true));
  assertThat(clusterSpec.getServiceName(),is("overridden-test-service"));
  assertThat(clusterSpec.getClusterName(),is("test-cluster"));
  optionSet=clusterCommand.parser.parse("--quiet","false","--service-name","overridden-test-service","--config","whirr-override-test.properties","--private-key-file",keys.get("private").getAbsolutePath());
  clusterSpec=clusterCommand.getClusterSpec(optionSet);
  assertThat(optionSet.has("quiet"),is(true));
  assertThat(clusterSpec.isQuiet(),is(false));
  assertThat(clusterSpec.getServiceName(),is("overridden-test-service"));
  assertThat(clusterSpec.getClusterName(),is("test-cluster"));
  optionSet=clusterCommand.parser.parse("--quiet","some-value","--service-name","overridden-test-service","--config","whirr-override-test.properties","--private-key-file",keys.get("private").getAbsolutePath());
  clusterSpec=clusterCommand.getClusterSpec(optionSet);
  assertThat(optionSet.has("quiet"),is(true));
  assertThat(clusterSpec.isQuiet(),is(false));
  assertThat(clusterSpec.getServiceName(),is("overridden-test-service"));
  assertThat(clusterSpec.getClusterName(),is("test-cluster"));
  optionSet=clusterCommand.parser.parse("--service-name","overridden-test-service","--config","whirr-override-test.properties","--private-key-file",keys.get("private").getAbsolutePath());
  clusterSpec=clusterCommand.getClusterSpec(optionSet);
  assertThat(optionSet.has("quiet"),is(false));
  assertThat(clusterSpec.isQuiet(),is(false));
  assertThat(clusterSpec.getServiceName(),is("overridden-test-service"));
  assertThat(clusterSpec.getClusterName(),is("test-cluster"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cdh.integration.Cdh3HBaseServiceTest </h4><pre class="type-4 type-1 type-10 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  ArrayList<ColumnDescriptor> columns=new ArrayList<ColumnDescriptor>();
  ColumnDescriptor cd=new ColumnDescriptor();
  cd.name=FAMILY1;
  columns.add(cd);
  cd=new ColumnDescriptor();
  cd.name=FAMILY2;
  columns.add(cd);
  Hbase.Client client=controller.getThriftClient();
  client.createTable(TABLE,columns);
  ArrayList<Mutation> mutations=new ArrayList<Mutation>();
  mutations.add(new Mutation(false,COLUMN,VALUE));
  client.mutateRow(TABLE,ROW,mutations);
  int scan1=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY1));
  List<TRowResult> rows=client.scannerGet(scan1);
  assertThat(rows.size(),is(1));
  assertThat(Bytes.toString(rows.get(0).getRow()),is("testRow"));
  assertTrue("No more rows",client.scannerGet(scan1).isEmpty());
  client.scannerClose(scan1);
  int scan2=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY2));
  assertTrue("No more rows",client.scannerGet(scan2).isEmpty());
  client.scannerClose(scan2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cdh.integration.CdhHBaseServiceTest </h4><pre class="type-4 type-1 type-10 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  ArrayList<ColumnDescriptor> columns=new ArrayList<ColumnDescriptor>();
  ColumnDescriptor cd=new ColumnDescriptor();
  cd.name=FAMILY1;
  columns.add(cd);
  cd=new ColumnDescriptor();
  cd.name=FAMILY2;
  columns.add(cd);
  Hbase.Client client=controller.getThriftClient();
  client.createTable(TABLE,columns);
  ArrayList<Mutation> mutations=new ArrayList<Mutation>();
  mutations.add(new Mutation(false,COLUMN,VALUE));
  client.mutateRow(TABLE,ROW,mutations);
  int scan1=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY1));
  List<TRowResult> rows=client.scannerGet(scan1);
  assertThat(rows.size(),is(1));
  assertThat(Bytes.toString(rows.get(0).getRow()),is("testRow"));
  assertTrue("No more rows",client.scannerGet(scan1).isEmpty());
  client.scannerClose(scan1);
  int scan2=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY2));
  assertTrue("No more rows",client.scannerGet(scan2).isEmpty());
  client.scannerClose(scan2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.elasticsearch.ElasticSearchConfigurationBuilderTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testOverrideDefaults() throws Exception {
  Configuration baseConfig=new PropertiesConfiguration();
  baseConfig.addProperty("whirr.provider","aws-ec2");
  baseConfig.addProperty("es.index.store.type","fs");
  ClusterSpec spec=ClusterSpec.withTemporaryKeys(baseConfig);
  Configuration config=ElasticSearchConfigurationBuilder.buildConfig(spec,null);
  assertThat(config.getString("es.index.store.type"),is("fs"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDefaultConfigAwsEC2() throws Exception {
  Configuration baseConfig=new PropertiesConfiguration();
  baseConfig.addProperty("whirr.provider","aws-ec2");
  baseConfig.addProperty("es.plugins","lang-javascript, lang-python");
  ClusterSpec spec=ClusterSpec.withTemporaryKeys(baseConfig);
  Configuration config=ElasticSearchConfigurationBuilder.buildConfig(spec,null);
  assertThat(config.getStringArray("es.plugins"),is(new String[]{"lang-javascript","lang-python","elasticsearch/elasticsearch-cloud-aws/1.5.0"}));
  assertThat(config.getString("es.discovery.type"),is("ec2"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDefaultUnicastConfig() throws Exception {
  Configuration baseConfig=new PropertiesConfiguration();
  baseConfig.addProperty("whirr.provider","cloudservers-us");
  ClusterSpec spec=ClusterSpec.withTemporaryKeys(baseConfig);
  Cluster cluster=mock(Cluster.class);
  Set<Cluster.Instance> instances=Sets.newLinkedHashSet();
  for (  String host : Lists.newArrayList("10.0.0.1","10.0.0.2")) {
    Cluster.Instance instance=mock(Cluster.Instance.class);
    when(instance.getPrivateIp()).thenReturn(host);
    instances.add(instance);
  }
  when(cluster.getInstancesMatching((Predicate<Cluster.Instance>)any())).thenReturn(instances);
  Configuration config=ElasticSearchConfigurationBuilder.buildConfig(spec,cluster);
  String content=StringUtils.join(ElasticSearchConfigurationBuilder.asYamlLines(config.subset(ElasticSearchConfigurationBuilder.ES_PREFIX)),"\n");
  assertThat(content,is("index:\n" + "  store:\n" + "    type: memory\n"+ "gateway:\n"+ "  type: none\n"+ "discovery:\n"+ "  zen:\n"+ "    ping:\n"+ "      multicast:\n"+ "        enabled: false\n"+ "      unicast:\n"+ "        hosts: [\"10.0.0.1:9300\", \"10.0.0.2:9300\"]"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testGenerateYamlConfig(){
  Configuration defaults=new PropertiesConfiguration();
  defaults.addProperty("cloud.aws.id","a");
  defaults.addProperty("cloud.aws.key","b");
  defaults.addProperty("index.store.type","memory");
  String content=StringUtils.join(ElasticSearchConfigurationBuilder.asYamlLines(defaults),"\n");
  assertThat(content,is("cloud:\n" + "  aws:\n" + "    id: a\n"+ "    key: b\n"+ "index:\n"+ "  store:\n"+ "    type: memory"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hadoop.HadoopConfigurationBuilderTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testOverridesNumberOfReducers() throws Exception {
  Configuration overrides=new PropertiesConfiguration();
  overrides.addProperty("hadoop-mapreduce.mapred.reduce.tasks","7");
  clusterSpec=ClusterSpec.withNoDefaults(overrides);
  Configuration conf=HadoopConfigurationBuilder.buildMapReduceConfiguration(clusterSpec,cluster,defaults,Sets.newLinkedHashSet(Lists.newArrayList("/data0","/data1")));
  assertThat(conf.getString("mapred.reduce.tasks"),is("7"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testMapReduce() throws Exception {
  Cluster cluster=newCluster(5);
  Configuration conf=HadoopConfigurationBuilder.buildMapReduceConfiguration(clusterSpec,cluster,defaults,Sets.newLinkedHashSet(Lists.newArrayList("/data0","/data1")));
  assertThat(conf.getString("p1"),is("mapred1"));
  assertThat(conf.getString("mapred.job.tracker"),matches(".+:8021"));
  assertThat(conf.getString("mapred.tasktracker.map.tasks.maximum"),is("4"));
  assertThat(conf.getString("mapred.tasktracker.reduce.tasks.maximum"),is("3"));
  assertThat(conf.getString("mapred.reduce.tasks"),is("15"));
  assertThat(conf.getString("mapred.local.dir"),is("/data0/hadoop/mapred/local,/data1/hadoop/mapred/local"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testOverrides() throws Exception {
  Configuration overrides=new PropertiesConfiguration();
  overrides.addProperty("hadoop-common.p1","overridden1");
  overrides.addProperty("hadoop-common.p2","overridden2");
  overrides.addProperty("hadoop-common.fs.default.name","not-overridden");
  clusterSpec=ClusterSpec.withNoDefaults(overrides);
  Configuration conf=HadoopConfigurationBuilder.buildCommonConfiguration(clusterSpec,cluster,defaults);
  assertThat(Iterators.size(conf.getKeys()),is(3));
  assertThat(conf.getString("p1"),is("overridden1"));
  assertThat(conf.getString("p2"),is("overridden2"));
  assertThat("Can't override dynamically set properties",conf.getString("fs.default.name"),matches("hdfs://.+:8020/"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testCommon() throws Exception {
  Configuration conf=HadoopConfigurationBuilder.buildCommonConfiguration(clusterSpec,cluster,defaults);
  assertThat(Iterators.size(conf.getKeys()),is(3));
  assertThat(conf.getString("p1"),is("common1"));
  assertThat(conf.getString("p2"),is("common2"));
  assertThat(conf.getString("fs.default.name"),matches("hdfs://.+:8020/"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testHdfs() throws Exception {
  Configuration conf=HadoopConfigurationBuilder.buildHdfsConfiguration(clusterSpec,cluster,defaults,Sets.newLinkedHashSet(Lists.newArrayList("/data0","/data1")));
  assertThat(Iterators.size(conf.getKeys()),is(4));
  assertThat(conf.getString("p1"),is("hdfs1"));
  assertThat(conf.getString("dfs.data.dir"),is("/data0/hadoop/hdfs/data,/data1/hadoop/hdfs/data"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testOverridesNumberOfMappers() throws Exception {
  Configuration overrides=new PropertiesConfiguration();
  overrides.addProperty("hadoop-mapreduce.mapred.tasktracker.map.tasks.maximum","70");
  clusterSpec=ClusterSpec.withNoDefaults(overrides);
  Configuration conf=HadoopConfigurationBuilder.buildMapReduceConfiguration(clusterSpec,cluster,defaults,Sets.newLinkedHashSet(Lists.newArrayList("/data0","/data1")));
  assertThat(conf.getString("mapred.tasktracker.map.tasks.maximum"),is("70"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hadoop.HadoopConfigurationConverterTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testConversion(){
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("p1","v1,v2");
  conf.setProperty("p2","v3");
  List<String> lines=HadoopConfigurationConverter.asXmlConfigurationLines(conf);
  assertThat(lines,is((List<String>)Lists.newArrayList("<configuration>","  <property>","    <name>p1</name>","    <value>v1,v2</value>","  </property>","  <property>","    <name>p2</name>","    <value>v3</value>","  </property>","</configuration>")));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testFinal(){
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("p1","v1");
  conf.setProperty("p2","v2");
  conf.setProperty("p2.final","true");
  List<String> lines=HadoopConfigurationConverter.asXmlConfigurationLines(conf);
  assertThat(lines,is((List<String>)Lists.newArrayList("<configuration>","  <property>","    <name>p1</name>","    <value>v1</value>","  </property>","  <property>","    <name>p2</name>","    <value>v2</value>","    <final>true</final>","  </property>","</configuration>")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hadoop.integration.AbstractHadoopServiceTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void testExistsTemporaryFolderAndHiveWarehouse() throws Exception {
  Configuration conf=controller.getConfiguration();
  FileSystem fs=FileSystem.get(conf);
  assertThat(fs.exists(new Path("/tmp")),is(true));
  assertThat(fs.exists(new Path("/user/hive/warehouse")),is(true));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hbase.integration.AbstractHBaseServiceTest </h4><pre class="type-4 type-1 type-10 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  ArrayList<ColumnDescriptor> columns=new ArrayList<ColumnDescriptor>();
  ColumnDescriptor cd=new ColumnDescriptor();
  cd.name=FAMILY1;
  columns.add(cd);
  cd=new ColumnDescriptor();
  cd.name=FAMILY2;
  columns.add(cd);
  Hbase.Client client=controller.getThriftClient();
  client.createTable(TABLE,columns);
  ArrayList<Mutation> mutations=new ArrayList<Mutation>();
  mutations.add(new Mutation(false,COLUMN,VALUE,true));
  client.mutateRow(TABLE,ROW,mutations,null);
  int scan1=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY1),null);
  List<TRowResult> rows=client.scannerGet(scan1);
  assertThat(rows.size(),is(1));
  assertThat(Bytes.toString(rows.get(0).getRow()),is("testRow"));
  assertTrue("No more rows",client.scannerGet(scan1).isEmpty());
  client.scannerClose(scan1);
  int scan2=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY2),null);
  assertTrue("No more rows",client.scannerGet(scan2).isEmpty());
  client.scannerClose(scan2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hbase.integration.HBaseOldServiceTest </h4><pre class="type-4 type-1 type-10 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  ArrayList<ColumnDescriptor> columns=new ArrayList<ColumnDescriptor>();
  ColumnDescriptor cd=new ColumnDescriptor();
  cd.name=FAMILY1;
  columns.add(cd);
  cd=new ColumnDescriptor();
  cd.name=FAMILY2;
  columns.add(cd);
  Hbase.Client client=controller.getThriftClient();
  client.createTable(TABLE,columns);
  ArrayList<Mutation> mutations=new ArrayList<Mutation>();
  mutations.add(new Mutation(false,COLUMN,VALUE));
  client.mutateRow(TABLE,ROW,mutations);
  int scan1=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY1));
  List<TRowResult> rows=client.scannerGet(scan1);
  assertThat(rows.size(),is(1));
  assertThat(Bytes.toString(rows.get(0).getRow()),is("testRow"));
  assertTrue("No more rows",client.scannerGet(scan1).isEmpty());
  client.scannerClose(scan1);
  int scan2=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY2));
  assertTrue("No more rows",client.scannerGet(scan2).isEmpty());
  client.scannerClose(scan2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.jclouds.RunUrlStatementTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testWithArgs() throws IOException {
  assertThat(new RunUrlStatement(false,"http://example.org/","a/b","x","y").render(OsFamily.UNIX),is("runurl http://example.org/a/b x y" + NL));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testBaseWithTrailingSlash() throws IOException {
  assertThat(new RunUrlStatement(false,"http://example.org/","a/b").render(OsFamily.UNIX),is("runurl http://example.org/a/b" + NL));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testAbsolutePath() throws IOException {
  assertThat(new RunUrlStatement(false,"http://example.org/","http://example2.org/a/b").render(OsFamily.UNIX),is("runurl http://example2.org/a/b" + NL));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testBaseWithoutTrailingSlash() throws IOException {
  assertThat(new RunUrlStatement(false,"http://example.org","a/b").render(OsFamily.UNIX),is("runurl http://example.org/a/b" + NL));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.jclouds.StatementBuilderTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExplicitExports() throws Exception {
  ClusterSpec clusterSpec=ClusterSpec.withTemporaryKeys();
  clusterSpec.setClusterName("test-cluster");
  clusterSpec.setProvider("test-provider");
  StatementBuilder builder=new StatementBuilder();
  builder.addExport("FOO_BAR","my_value");
  builder.addStatement(Statements.exec("echo $FOO_BAR"));
  String script=builder.name("foo").build(clusterSpec).render(OsFamily.UNIX);
  assertThat(script,containsString("export FOO_BAR="));
  assertThat(script,containsString("my_value"));
  assertThat(script,containsString("echo $FOO_BAR"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDeduplication() throws Exception {
  ClusterSpec clusterSpec=ClusterSpec.withTemporaryKeys();
  clusterSpec.setClusterName("test-cluster");
  clusterSpec.setProvider("test-provider");
  StatementBuilder builder=new StatementBuilder();
  builder.addStatement(new RunUrlStatement(false,"http://example.org/","a/b","c"));
  builder.addStatement(new RunUrlStatement(false,"http://example.org/","d/e","f"));
  builder.addStatement(new RunUrlStatement(false,"http://example.org/","a/b","c"));
  String script=builder.name("foo").build(clusterSpec).render(OsFamily.UNIX);
  int first=script.indexOf("runurl http://example.org/a/b c");
  assertThat(first,greaterThan(-1));
  int second=script.indexOf("runurl http://example.org/a/b c",first + 1);
  assertThat("No second occurrence",second,is(-1));
  assertThat(script,containsString("runurl http://example.org/d/e f"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testClusterSpecExports() throws Exception {
  PropertiesConfiguration conf=new PropertiesConfiguration();
  conf.addProperty("ignored","ignored_value");
  conf.addProperty("whirr.env.FOO_BAR","my_value");
  ClusterSpec clusterSpec=ClusterSpec.withTemporaryKeys(conf);
  clusterSpec.setClusterName("test-cluster");
  clusterSpec.setProvider("test-provider");
  StatementBuilder builder=new StatementBuilder();
  builder.addStatement(Statements.exec("echo $FOO_BAR"));
  String script=builder.name("foo").build(clusterSpec).render(OsFamily.UNIX);
  assertThat(script,containsString("export FOO_BAR="));
  assertThat(script,containsString("my_value"));
  assertThat(script,containsString("echo $FOO_BAR"));
  assertThat(script,not(containsString("ignored")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.yarn.integration.AbstractHadoopServiceTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExistsTemporaryFolderAndHiveWarehouse() throws Exception {
  Configuration conf=controller.getConfiguration();
  FileSystem fs=FileSystem.get(conf);
  assertThat(fs.exists(new Path("/tmp")),is(true));
  assertThat(fs.exists(new Path("/user/hive/warehouse")),is(true));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.state.integration.BlobClusterStateStoreTest </h4><pre class="type-1 type-12 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void testStoreAndLoadState() throws Exception {
  ClusterSpec spec=getTestClusterSpec();
  BlobStoreContext context=BlobStoreContextBuilder.build(spec);
  String container=generateRandomContainerName(context);
  try {
    spec.setStateStore("blob");
    spec.setStateStoreContainer(container);
    Cluster expected=createTestCluster(new String[]{"region/id1","region/id2"},new String[]{"role1","role2"});
    BlobClusterStateStore store=new BlobClusterStateStore(spec);
    store.save(expected);
    Cluster stored=store.load();
    Cluster.Instance first=Iterables.getFirst(stored.getInstances(),null);
    assertNotNull(first);
    assertThat(first.getId(),is("region/id1"));
    assertThat(first.getRoles().contains("role1"),is(true));
    assertThat(stored.getInstances().size(),is(2));
    store.destroy();
    expected=store.load();
    assertNull(expected);
  }
  finally {
    LOG.info("Removing temporary container '{}'",container);
    context.getBlobStore().deleteContainer(container);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.util.KeyPairTest </h4><pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testGenerate() throws JSchException {
  Map<String,String> pair=generate();
  assertThat(pair.get("public"),containsString("ssh-rsa "));
  assertThat(pair.get("private"),containsString("-----BEGIN RSA PRIVATE KEY-----\n"));
}

</code></pre>

<br>
<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testNotFromSamePair() throws JSchException, IOException {
  Map<String,File> keys=generateTemporaryFiles();
  assertThat(sameKeyPair(keys.get("private"),keys.get("public")),is(true));
  Map<String,File> other=generateTemporaryFiles();
  assertThat(sameKeyPair(other.get("private"),other.get("public")),is(true));
  assertThat(sameKeyPair(keys.get("private"),other.get("public")),is(false));
  assertThat(sameKeyPair(other.get("private"),keys.get("public")),is(false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.util.integration.BlobCacheTest </h4><pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testSelectBestLocation() throws Exception {
  ClusterSpec spec=getTestClusterSpec();
  if (!spec.getProvider().equals("aws") && !spec.getProvider().equals("aws-ec2")) {
    return;
  }
  spec.setTemplate(TemplateBuilderSpec.parse("locationId=eu-west-1"));
  BlobCache cache=BlobCache.getInstance(ComputeCache.INSTANCE,spec);
  assertThat(cache.getLocation().getId(),is("EU"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testSpecifyCacheContainerInConfig() throws Exception {
  ClusterSpec spec=getTestClusterSpec();
  BlobStoreContext context=BlobStoreContextBuilder.build(spec);
  String container=generateRandomContainerName(context);
  LOG.info("Created temporary container '{}'",container);
  try {
    spec.setBlobStoreCacheContainer(container);
    BlobCache cache=BlobCache.getInstance(ComputeCache.INSTANCE,spec);
    assertThat(cache.getContainer(),is(container));
    cache.dropAndClose();
    assertThat(context.getBlobStore().containerExists(container),is(true));
  }
  finally {
    LOG.info("Removing temporary container '{}'",container);
    context.getBlobStore().deleteContainer(container);
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
