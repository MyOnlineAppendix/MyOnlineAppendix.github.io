<h3><span class=" glyphicon glyphicon-tag"/>&nbspHybridVerifier</h3><kbd>Contains more than 2 JUnit-based stereotypes</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.whirr.ClusterSpecTest </h4><pre class="type-4 type-1 type-5 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalArgumentException.class) public void testIllegalArgumentExceptionOnInstancesTemplates() throws Exception {
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.instance-templates","1 hadoop-namenode+hadoop-jobtracker,3 hadoop-datanode+hadoop-tasktracker");
  conf.addProperty("whirr.instance-templates-max-percent-failures","60 % hadoop-datanode+hadoop-tasktracker");
  ClusterSpec expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  List<InstanceTemplate> templates=expectedClusterSpec.getInstanceTemplates();
  InstanceTemplate t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  InstanceTemplate t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(2));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-5 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies that exceptions are thrown during the test case execution
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=NumberFormatException.class) public void testNumberFormatExceptionOnInstancesTemplates() throws Exception {
  Configuration conf=new PropertiesConfiguration();
  conf.addProperty("whirr.instance-templates","1 hadoop-namenode+hadoop-jobtracker,3 hadoop-datanode+hadoop-tasktracker");
  conf.addProperty("whirr.instance-templates-max-percent-failures","60% hadoop-datanode+hadoop-tasktracker");
  ClusterSpec expectedClusterSpec=ClusterSpec.withNoDefaults(conf);
  List<InstanceTemplate> templates=expectedClusterSpec.getInstanceTemplates();
  InstanceTemplate t1=templates.get(0);
  assertThat(t1.getMinNumberOfInstances(),is(1));
  InstanceTemplate t2=templates.get(1);
  assertThat(t2.getMinNumberOfInstances(),is(2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.ClusterTest </h4><pre class="type-8 type-1 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void remoteInstanceById(){
  cluster.removeInstancesMatching(withIds("id-0"));
  try {
    cluster.getInstanceMatching(withIds("id-0"));
    fail("Element not remnoved");
  }
 catch (  NoSuchElementException e) {
  }
  assertThat(cluster.getInstances().size(),is(NUMBER_OF_INSTANCES - 1));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.actions.ScriptBasedClusterActionTest </h4><pre class="type-4 type-1 type-3 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterScriptExecutionByInstanceId() throws Exception {
  String instanceId=getInstaceForRole(cluster,"noop3").getId();
  T action=newClusterActionInstance(EMPTYSET,newHashSet(instanceId));
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(1));
  assertHasRole(executions.get(0),cluster,"noop3");
  assertEquals(executions.get(0).getNode().getId(),instanceId);
  assertAnyStatementContains(dryRun,"noop1-" + getActionName(),"noop3-" + getActionName());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterScriptExecutionByRoleAndInstanceId() throws Exception {
  String instanceId=getInstaceForRole(cluster,"noop1").getId();
  T action=newClusterActionInstance(newHashSet("noop1"),newHashSet(instanceId));
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(1));
  assertHasRole(executions.get(0),cluster,"noop1");
  assertEquals(executions.get(0).getNode().getId(),instanceId);
  assertAnyStatementContains(dryRun,"noop1-" + getActionName());
  assertNoStatementContains(dryRun,"noop2-" + getActionName(),"noop3-" + getActionName());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterScriptExecutionByRole() throws Exception {
  String instanceId=getInstaceForRole(cluster,"noop2").getId();
  T action=newClusterActionInstance(ImmutableSet.of("noop2"),EMPTYSET);
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(1));
  assertHasRole(executions.get(0),cluster,"noop2");
  assertEquals(executions.get(0).getNode().getId(),instanceId);
  assertAnyStatementContains(dryRun,"noop2-" + getActionName());
  assertNoStatementContains(dryRun,"noop1-" + getActionName(),"noop3-" + getActionName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.DryRunModuleTest </h4><pre class="type-4 type-10 type-17 type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Simple test that tests dry run module and at the same time enforces clear
 * separation of script execution phases.
 */
@Test public void testNoInitScriptsAfterConfigurationStartedAndNoConfigScriptsAfterDestroy() throws ConfigurationException, JSchException, IOException, InterruptedException {
  final List<String> expectedExecutionOrder=ImmutableList.of("bootstrap","configure","start","destroy");
  CompositeConfiguration config=new CompositeConfiguration();
  config.setProperty("whirr.provider","stub");
  config.setProperty("whirr.cluster-name","stub-test");
  config.setProperty("whirr.instance-templates","10 noop+noop3,10 noop2+noop,10 noop3+noop2");
  config.setProperty("whirr.state-store","memory");
  ClusterSpec clusterSpec=ClusterSpec.withTemporaryKeys(config);
  ClusterController controller=new ClusterController();
  DryRun dryRun=getDryRunInControllerForCluster(controller,clusterSpec);
  dryRun.reset();
  controller.launchCluster(clusterSpec);
  controller.destroyCluster(clusterSpec);
  ListMultimap<NodeMetadata,Statement> perNodeExecutions=dryRun.getExecutions();
  List<StatementOnNode> totalExecutions=dryRun.getTotallyOrderedExecutions();
  for (  Entry<NodeMetadata,Collection<Statement>> entry : perNodeExecutions.asMap().entrySet()) {
    assertSame("An incorrect number of scripts was executed in the node: " + entry.getValue(),entry.getValue().size(),expectedExecutionOrder.size());
    List<Statement> asList=Lists.newArrayList(entry.getValue());
    int count=0;
    for (    String phase : expectedExecutionOrder) {
      String scriptName=getScriptName(asList.get(count));
      assertTrue("The '" + phase + "' script was executed in the wrong order, found: "+ scriptName,scriptName.startsWith(phase));
      count+=1;
    }
  }
  Stack<String> executedPhases=new Stack<String>();
  for (  StatementOnNode script : totalExecutions) {
    String[] parts=getScriptName(script.getStatement()).split("-");
    if ((!executedPhases.empty() && !executedPhases.peek().equals(parts[0])) || executedPhases.empty()) {
      executedPhases.push(parts[0]);
    }
  }
  assertEquals(expectedExecutionOrder.size(),executedPhases.size());
  for (  String phaseName : Lists.reverse(expectedExecutionOrder)) {
    assertEquals(executedPhases.pop(),phaseName);
  }
}

</code></pre>

<br>
<pre class="type-17 type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExecuteOnlyBootstrapForNoopWithListener() throws Exception {
  CompositeConfiguration config=new CompositeConfiguration();
  config.setProperty("whirr.provider","stub");
  config.setProperty("whirr.cluster-name","stub-test");
  config.setProperty("whirr.instance-templates","1 noop");
  config.setProperty("whirr.state-store","memory");
  ClusterSpec clusterSpec=ClusterSpec.withTemporaryKeys(config);
  MockClusterActionHandlerListener listener=new MockClusterActionHandlerListener();
  clusterSpec.setHandlerListener(listener);
  ClusterController controller=new ClusterController();
  DryRun dryRun=getDryRunInControllerForCluster(controller,clusterSpec);
  dryRun.reset();
  controller.launchCluster(clusterSpec);
  controller.destroyCluster(clusterSpec);
  ListMultimap<NodeMetadata,Statement> perNodeExecutions=dryRun.getExecutions();
  for (  Entry<NodeMetadata,Collection<Statement>> entry : perNodeExecutions.asMap().entrySet()) {
    assertSame("An incorrect number of scripts was executed in the node " + entry,entry.getValue().size(),1);
  }
  assertEquals("beforeCalls should be 4",listener.beforeCalls,4);
  assertEquals("afterCalls should be 4",listener.afterCalls,4);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cdh.integration.Cdh3HBaseServiceTest </h4><pre class="type-4 type-1 type-10 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  ArrayList<ColumnDescriptor> columns=new ArrayList<ColumnDescriptor>();
  ColumnDescriptor cd=new ColumnDescriptor();
  cd.name=FAMILY1;
  columns.add(cd);
  cd=new ColumnDescriptor();
  cd.name=FAMILY2;
  columns.add(cd);
  Hbase.Client client=controller.getThriftClient();
  client.createTable(TABLE,columns);
  ArrayList<Mutation> mutations=new ArrayList<Mutation>();
  mutations.add(new Mutation(false,COLUMN,VALUE));
  client.mutateRow(TABLE,ROW,mutations);
  int scan1=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY1));
  List<TRowResult> rows=client.scannerGet(scan1);
  assertThat(rows.size(),is(1));
  assertThat(Bytes.toString(rows.get(0).getRow()),is("testRow"));
  assertTrue("No more rows",client.scannerGet(scan1).isEmpty());
  client.scannerClose(scan1);
  int scan2=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY2));
  assertTrue("No more rows",client.scannerGet(scan2).isEmpty());
  client.scannerClose(scan2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cdh.integration.CdhHBaseServiceTest </h4><pre class="type-4 type-1 type-10 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  ArrayList<ColumnDescriptor> columns=new ArrayList<ColumnDescriptor>();
  ColumnDescriptor cd=new ColumnDescriptor();
  cd.name=FAMILY1;
  columns.add(cd);
  cd=new ColumnDescriptor();
  cd.name=FAMILY2;
  columns.add(cd);
  Hbase.Client client=controller.getThriftClient();
  client.createTable(TABLE,columns);
  ArrayList<Mutation> mutations=new ArrayList<Mutation>();
  mutations.add(new Mutation(false,COLUMN,VALUE));
  client.mutateRow(TABLE,ROW,mutations);
  int scan1=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY1));
  List<TRowResult> rows=client.scannerGet(scan1);
  assertThat(rows.size(),is(1));
  assertThat(Bytes.toString(rows.get(0).getRow()),is("testRow"));
  assertTrue("No more rows",client.scannerGet(scan1).isEmpty());
  client.scannerClose(scan1);
  int scan2=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY2));
  assertTrue("No more rows",client.scannerGet(scan2).isEmpty());
  client.scannerClose(scan2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.chef.integration.ChefServiceTest </h4><pre class="type-4 type-1 type-10 type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void testChefRunRecipeFromURL() throws Exception {
  Recipe nginx=new Recipe("nginx",null,"http://s3.amazonaws.com/opscode-community/cookbook_versions/tarballs/529/original/nginx.tgz");
  Map<? extends NodeMetadata,ExecResponse> responses=runRecipe(nginx);
  printResponses(nginx,responses);
  HttpClient client=new HttpClient();
  final GetMethod getIndex=new GetMethod(String.format("http://%s",responses.keySet().iterator().next().getPublicAddresses().iterator().next()));
  assertTrue("Could not connect with nginx server",retry(new Predicate<HttpClient>(){
    @Override public boolean apply(    HttpClient input){
      try {
        int statusCode=input.executeMethod(getIndex);
        assertEquals("Status code should be 200",HttpStatus.SC_OK,statusCode);
        return true;
      }
 catch (      Exception e) {
        return false;
      }
    }
  }
,10,1,TimeUnit.SECONDS).apply(client));
  String indexPageHTML=getIndex.getResponseBodyAsString();
  assertTrue("The string 'nginx' should appear on the index page",indexPageHTML.contains("nginx"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.ganglia.integration.GangliaServiceTest </h4><pre class="type-4 type-1 type-10 type-3 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  Instance metad=cluster.getInstanceMatching(RolePredicates.role(GangliaMetadClusterActionHandler.GANGLIA_METAD_ROLE));
  String metadHostname=metad.getPublicHostName();
  assertNotNull(metadHostname);
  HttpClient client=new HttpClient();
  GetMethod getIndex=new GetMethod(String.format("http://%s/ganglia/",metadHostname));
  int statusCode=client.executeMethod(getIndex);
  assertEquals("Status code should be 200",HttpStatus.SC_OK,statusCode);
  String indexPageHTML=getIndex.getResponseBodyAsString();
  assertTrue("The string 'Ganglia' should appear on the index page",indexPageHTML.contains("Ganglia"));
  assertTrue("The string 'WhirrGrid' should appear on the index page",indexPageHTML.contains("WhirrGrid"));
  for (  Instance instance : cluster.getInstancesMatching(anyRoleIn(Sets.<String>newHashSet(GANGLIA_METAD_ROLE,GANGLIA_MONITOR_ROLE)))) {
    testMonitorResponse(instance);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hadoop.integration.AbstractHadoopServiceTest </h4><pre class="type-4 type-1 type-3 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  Configuration conf=controller.getConfiguration();
  JobConf job=new JobConf(conf,HadoopServiceTest.class);
  FileSystem fs=FileSystem.get(conf);
  OutputStream os=fs.create(new Path("input"));
  Writer wr=new OutputStreamWriter(os);
  wr.write("b a\n");
  wr.close();
  job.setMapperClass(TokenCountMapper.class);
  job.setReducerClass(LongSumReducer.class);
  job.setOutputKeyClass(Text.class);
  job.setOutputValueClass(LongWritable.class);
  FileInputFormat.setInputPaths(job,new Path("input"));
  FileOutputFormat.setOutputPath(job,new Path("output"));
  JobClient.runJob(job);
  FSDataInputStream in=fs.open(new Path("output/part-00000"));
  BufferedReader reader=new BufferedReader(new InputStreamReader(in));
  assertEquals("a\t1",reader.readLine());
  assertEquals("b\t1",reader.readLine());
  assertNull(reader.readLine());
  reader.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hama.integration.HamaServiceTest </h4><pre class="type-1 type-10 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  HamaConfiguration jobConf=controller.getConfiguration();
  jobConf.set("hadoop.rpc.socket.factory.class.default","org.apache.hadoop.net.StandardSocketFactory");
  BSPJob bsp=new BSPJob(jobConf,new BSPJobID());
  LOG.info("Job conf: " + bsp.getConf().get("hadoop.rpc.socket.factory.class.default") + ", "+ bsp.getJobID().toString());
  bsp.setJarByClass(MyEstimator.class);
  bsp.setBspClass(MyEstimator.class);
  bsp.setInputFormat(NullInputFormat.class);
  bsp.setOutputKeyClass(Text.class);
  bsp.setOutputValueClass(DoubleWritable.class);
  bsp.setOutputFormat(TextOutputFormat.class);
  bsp.set("bsp.working.dir","/tmp");
  FileOutputFormat.setOutputPath(bsp,TMP_OUTPUT);
  LOG.info("Client configuration start ..");
  HamaConfiguration clientConf=controller.getConfiguration();
  BSPJobClient jobClient=new BSPJobClient(clientConf);
  ClusterStatus cluster=jobClient.getClusterStatus(true);
  assertNotNull(cluster);
  assertTrue(cluster.getGroomServers() > 0);
  assertTrue(cluster.getMaxTasks() > 1);
  bsp.setNumBspTask(cluster.getMaxTasks());
  LOG.info("Client conf: " + clientConf.get("hadoop.rpc.socket.factory.class.default"));
  RunningJob rJob=jobClient.submitJob(bsp);
  rJob.waitForCompletion();
  LOG.info("finished");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hbase.integration.AbstractHBaseServiceTest </h4><pre class="type-4 type-1 type-10 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  ArrayList<ColumnDescriptor> columns=new ArrayList<ColumnDescriptor>();
  ColumnDescriptor cd=new ColumnDescriptor();
  cd.name=FAMILY1;
  columns.add(cd);
  cd=new ColumnDescriptor();
  cd.name=FAMILY2;
  columns.add(cd);
  Hbase.Client client=controller.getThriftClient();
  client.createTable(TABLE,columns);
  ArrayList<Mutation> mutations=new ArrayList<Mutation>();
  mutations.add(new Mutation(false,COLUMN,VALUE,true));
  client.mutateRow(TABLE,ROW,mutations,null);
  int scan1=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY1),null);
  List<TRowResult> rows=client.scannerGet(scan1);
  assertThat(rows.size(),is(1));
  assertThat(Bytes.toString(rows.get(0).getRow()),is("testRow"));
  assertTrue("No more rows",client.scannerGet(scan1).isEmpty());
  client.scannerClose(scan1);
  int scan2=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY2),null);
  assertTrue("No more rows",client.scannerGet(scan2).isEmpty());
  client.scannerClose(scan2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hbase.integration.HBaseOldServiceTest </h4><pre class="type-4 type-1 type-10 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  ArrayList<ColumnDescriptor> columns=new ArrayList<ColumnDescriptor>();
  ColumnDescriptor cd=new ColumnDescriptor();
  cd.name=FAMILY1;
  columns.add(cd);
  cd=new ColumnDescriptor();
  cd.name=FAMILY2;
  columns.add(cd);
  Hbase.Client client=controller.getThriftClient();
  client.createTable(TABLE,columns);
  ArrayList<Mutation> mutations=new ArrayList<Mutation>();
  mutations.add(new Mutation(false,COLUMN,VALUE));
  client.mutateRow(TABLE,ROW,mutations);
  int scan1=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY1));
  List<TRowResult> rows=client.scannerGet(scan1);
  assertThat(rows.size(),is(1));
  assertThat(Bytes.toString(rows.get(0).getRow()),is("testRow"));
  assertTrue("No more rows",client.scannerGet(scan1).isEmpty());
  client.scannerClose(scan1);
  int scan2=client.scannerOpen(TABLE,FIRST,Lists.newArrayList(FAMILY2));
  assertTrue("No more rows",client.scannerGet(scan2).isEmpty());
  client.scannerClose(scan2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.yarn.integration.AbstractHadoopServiceTest </h4><pre class="type-4 type-1 type-3 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Configuration conf=controller.getConfiguration();
  JobConf job=new JobConf(conf,AbstractHadoopServiceTest.class);
  FileSystem fs=FileSystem.get(conf);
  OutputStream os=fs.create(new Path("input"));
  Writer wr=new OutputStreamWriter(os);
  wr.write("b a\n");
  wr.close();
  job.setMapperClass(TokenCountMapper.class);
  job.setReducerClass(LongSumReducer.class);
  job.setOutputKeyClass(Text.class);
  job.setOutputValueClass(LongWritable.class);
  FileInputFormat.setInputPaths(job,new Path("input"));
  FileOutputFormat.setOutputPath(job,new Path("output"));
  JobClient.runJob(job);
  FSDataInputStream in=fs.open(new Path("output/part-00000"));
  BufferedReader reader=new BufferedReader(new InputStreamReader(in));
  assertEquals("a\t1",reader.readLine());
  assertEquals("b\t1",reader.readLine());
  assertNull(reader.readLine());
  reader.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.state.integration.BlobClusterStateStoreTest </h4><pre class="type-1 type-12 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void testStoreAndLoadState() throws Exception {
  ClusterSpec spec=getTestClusterSpec();
  BlobStoreContext context=BlobStoreContextBuilder.build(spec);
  String container=generateRandomContainerName(context);
  try {
    spec.setStateStore("blob");
    spec.setStateStoreContainer(container);
    Cluster expected=createTestCluster(new String[]{"region/id1","region/id2"},new String[]{"role1","role2"});
    BlobClusterStateStore store=new BlobClusterStateStore(spec);
    store.save(expected);
    Cluster stored=store.load();
    Cluster.Instance first=Iterables.getFirst(stored.getInstances(),null);
    assertNotNull(first);
    assertThat(first.getId(),is("region/id1"));
    assertThat(first.getRoles().contains("role1"),is(true));
    assertThat(stored.getInstances().size(),is(2));
    store.destroy();
    expected=store.load();
    assertNull(expected);
  }
  finally {
    LOG.info("Removing temporary container '{}'",container);
    context.getBlobStore().deleteContainer(container);
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
