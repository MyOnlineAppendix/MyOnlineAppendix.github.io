<h3><span class=" glyphicon glyphicon-tag"/>&nbspEqualityVerifier</h3><kbd>Verifies whether objects/variable are equal to an expected value </kbd><br><br><br><h4 style="margin:0px">Class: org.apache.whirr.ClusterSpecTest </h4><pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAutoHostnameForProvider() throws Exception {
  Configuration cloudServersConfig=new PropertiesConfiguration();
  cloudServersConfig.addProperty("whirr.provider","cloudservers-us");
  ClusterSpec cloudServersSpec=ClusterSpec.withTemporaryKeys(cloudServersConfig);
  assertEquals(cloudServersSpec.getAutoHostnamePrefix(),null);
  assertEquals(cloudServersSpec.getAutoHostnameSuffix(),".static.cloud-ips.com");
  Configuration cloudServersUkConfig=new PropertiesConfiguration();
  cloudServersUkConfig.addProperty("whirr.provider","cloudservers-uk");
  ClusterSpec cloudServersUkSpec=ClusterSpec.withTemporaryKeys(cloudServersUkConfig);
  assertEquals(cloudServersUkSpec.getAutoHostnamePrefix(),null);
  assertEquals(cloudServersUkSpec.getAutoHostnameSuffix(),".static.cloud-ips.co.uk");
  Configuration ec2Config=new PropertiesConfiguration();
  ec2Config.addProperty("whirr.provider","aws-ec2");
  ClusterSpec ec2Spec=ClusterSpec.withTemporaryKeys(ec2Config);
  assertEquals(null,ec2Spec.getAutoHostnamePrefix());
  assertEquals(null,ec2Spec.getAutoHostnameSuffix());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testKerberosRealm() throws Exception {
  Configuration cloudServersConfig=new PropertiesConfiguration();
  ClusterSpec cloudServersSpec=ClusterSpec.withTemporaryKeys(cloudServersConfig);
  assertEquals(null,cloudServersSpec.getKerberosRealm());
  cloudServersConfig=new PropertiesConfiguration();
  cloudServersConfig.addProperty("whirr.kerberos-realm","CDHCLUSTER.COM");
  cloudServersSpec=ClusterSpec.withTemporaryKeys(cloudServersConfig);
  assertEquals("CDHCLUSTER.COM",cloudServersSpec.getKerberosRealm());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJdkInstallUrl() throws Exception {
  Configuration cloudServersConfig=new PropertiesConfiguration();
  ClusterSpec cloudServersSpec=ClusterSpec.withTemporaryKeys(cloudServersConfig);
  assertEquals(null,cloudServersSpec.getJdkInstallUrl());
  cloudServersConfig=new PropertiesConfiguration();
  cloudServersConfig.addProperty("whirr.jdk-install-url","http://whirr-third-party.s3.amazonaws.com/jdk-6u21-linux-i586-rpm.bin");
  cloudServersSpec=ClusterSpec.withTemporaryKeys(cloudServersConfig);
  assertEquals("http://whirr-third-party.s3.amazonaws.com/jdk-6u21-linux-i586-rpm.bin",cloudServersSpec.getJdkInstallUrl());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see ConfigToTemplateBuilderSpecTest for more
 */
@Test public void testTemplateOverrides() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  ClusterSpec spec=ClusterSpec.withNoDefaults(conf);
  assertEquals(spec.getTemplate(),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048"));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDefaultPublicKey() throws ConfigurationException, JSchException, IOException {
  Map<String,File> keys=KeyPair.generateTemporaryFiles();
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("whirr.private-key-file",keys.get("private").getAbsolutePath());
  ClusterSpec spec=ClusterSpec.withNoDefaults(conf);
  Assert.assertEquals(IOUtils.toString(new FileReader(keys.get("public"))),spec.getPublicKey());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testHardwareIdPerInstanceTemplate() throws Exception {
  PropertiesConfiguration conf=new PropertiesConfiguration("whirr-core-test.properties");
  conf.setProperty("whirr.instance-templates","2 noop, 1 role1+role2, 1 role1, 3 spots, 1 spec");
  conf.setProperty("whirr.hardware-id","c1.xlarge");
  conf.setProperty("whirr.templates.noop.hardware-id","m1.large");
  conf.setProperty("whirr.templates.role1+role2.hardware-id","t1.micro");
  conf.setProperty("whirr.templates.role1+role2.image-id","us-east-1/ami-123324");
  conf.setProperty("whirr.templates.spots.aws-ec2-spot-price",0.5f);
  conf.setProperty("whirr.templates.spec.template","osFamily=UBUNTU,os64Bit=true,minRam=2048");
  ClusterSpec spec=ClusterSpec.withTemporaryKeys(conf);
  List<InstanceTemplate> templates=spec.getInstanceTemplates();
  InstanceTemplate noops=get(templates,0);
  assert noops.getRoles().contains("noop");
  assertEquals(noops.getTemplate().getHardwareId(),"m1.large");
  assertEquals(noops.getTemplate().getImageId(),null);
  assertEquals(noops.getAwsEc2SpotPrice(),null);
  InstanceTemplate second=get(templates,1);
  assertEquals(second.getTemplate().getHardwareId(),"t1.micro");
  assertEquals(second.getTemplate().getImageId(),"us-east-1/ami-123324");
  assertEquals(second.getAwsEc2SpotPrice(),null);
  InstanceTemplate third=get(templates,2);
  assertEquals(third.getTemplate(),null);
  assertEquals(third.getAwsEc2SpotPrice(),null);
  InstanceTemplate spots=get(templates,3);
  assertEquals(spots.getAwsEc2SpotPrice(),new Float(0.5f),0.001);
  InstanceTemplate template=get(templates,4);
  assertEquals(template.getTemplate(),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048"));
  assertEquals(template.getAwsEc2SpotPrice(),null);
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testAwsEc2SpotPrice() throws ConfigurationException {
  assertEquals(ClusterSpec.withNoDefaults(new PropertiesConfiguration()).getAwsEc2SpotPrice(),null);
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.AWS_EC2_SPOT_PRICE.getConfigName(),"0.30");
  ClusterSpec spec=ClusterSpec.withNoDefaults(conf);
  assertEquals(spec.getAwsEc2SpotPrice(),new Float(0.3));
}

</code></pre>

<br>
<pre class="type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * @see ConfigToTemplateBuilderSpecTest for more
 */
@Test public void testNoTemplateSetsUbuntu1004With1GB() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  ClusterSpec spec=ClusterSpec.withNoDefaults(conf);
  assertEquals(spec.getTemplate(),TemplateBuilderSpec.parse("osFamily=UBUNTU,osVersionMatches=10.04,minRam=1024"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.actions.ScriptBasedClusterActionTest </h4><pre class="type-4 type-1 type-3 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterScriptExecutionByInstanceId() throws Exception {
  String instanceId=getInstaceForRole(cluster,"noop3").getId();
  T action=newClusterActionInstance(EMPTYSET,newHashSet(instanceId));
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(1));
  assertHasRole(executions.get(0),cluster,"noop3");
  assertEquals(executions.get(0).getNode().getId(),instanceId);
  assertAnyStatementContains(dryRun,"noop1-" + getActionName(),"noop3-" + getActionName());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterScriptExecutionByRoleAndInstanceId() throws Exception {
  String instanceId=getInstaceForRole(cluster,"noop1").getId();
  T action=newClusterActionInstance(newHashSet("noop1"),newHashSet(instanceId));
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(1));
  assertHasRole(executions.get(0),cluster,"noop1");
  assertEquals(executions.get(0).getNode().getId(),instanceId);
  assertAnyStatementContains(dryRun,"noop1-" + getActionName());
  assertNoStatementContains(dryRun,"noop2-" + getActionName(),"noop3-" + getActionName());
}

</code></pre>

<br>
<pre class="type-4 type-1 type-3 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilterScriptExecutionByRole() throws Exception {
  String instanceId=getInstaceForRole(cluster,"noop2").getId();
  T action=newClusterActionInstance(ImmutableSet.of("noop2"),EMPTYSET);
  DryRun dryRun=getDryRunForAction(action).reset();
  action.execute(clusterSpec,cluster);
  List<StatementOnNode> executions=dryRun.getTotallyOrderedExecutions();
  assertThat(executions.size(),is(1));
  assertHasRole(executions.get(0),cluster,"noop2");
  assertEquals(executions.get(0).getNode().getId(),instanceId);
  assertAnyStatementContains(dryRun,"noop2-" + getActionName());
  assertNoStatementContains(dryRun,"noop1-" + getActionName(),"noop3-" + getActionName());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.internal.ConfigToTemplateBuilderSpecTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutLocationSpecsAcceptsLocationId() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  conf.setProperty(ClusterSpec.Property.LOCATION_ID.getConfigName(),"eu-west-1");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048,locationId=eu-west-1"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutImageSpecsDefaultsToUbuntu1004() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"minRam=2048");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("minRam=2048,osFamily=UBUNTU,osVersionMatches=10.04"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithLoginSpecsOverridesBootstrapUser() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048,loginUser=foo");
  conf.setProperty(ClusterSpec.Property.BOOTSTRAP_USER.getConfigName(),"user:pass");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048,loginUser=foo"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutHardwareSpecsDefaultsTo1GB() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=1024"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithImageSpecsOverridesImageId() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  conf.setProperty(ClusterSpec.Property.IMAGE_ID.getConfigName(),"ami-fooo");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplate() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutImageSpecsAcceptsImageId() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"minRam=2048");
  conf.setProperty(ClusterSpec.Property.IMAGE_ID.getConfigName(),"ami-fooo");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("minRam=2048,imageId=ami-fooo"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithHardwareSpecsOverridesHardwareId() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  conf.setProperty(ClusterSpec.Property.HARDWARE_ID.getConfigName(),"m1.small");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutHardwareSpecsAcceptsHardwareId() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true");
  conf.setProperty(ClusterSpec.Property.HARDWARE_ID.getConfigName(),"m1.small");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,hardwareId=m1.small"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutLoginSpecsAcceptsBootstrapUser() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  conf.setProperty(ClusterSpec.Property.BOOTSTRAP_USER.getConfigName(),"user:pass");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048,loginUser=user:pass"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithoutImageSpecsDefaultsToUbuntu1004AndAWSPatternOnEC2() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.PROVIDER.getConfigName(),"aws-ec2");
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"minRam=2048");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("minRam=2048,osFamily=UBUNTU,osVersionMatches=10.04,osDescriptionMatches=^(?!.*(daily|testing)).*ubuntu-images.*$"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithLocationSpecsOverridesLocationId() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048,locationId=us-west-2");
  conf.setProperty(ClusterSpec.Property.LOCATION_ID.getConfigName(),"eu-west-1");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048,locationId=us-west-2"));
}

</code></pre>

<br>
<pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testTemplateWithDeprecatedLoginUser() throws ConfigurationException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("whirr.login-user","user:pass");
  conf.setProperty(ClusterSpec.Property.TEMPLATE.getConfigName(),"osFamily=UBUNTU,os64Bit=true,minRam=2048");
  assertEquals(ConfigToTemplateBuilderSpec.INSTANCE.apply(conf),TemplateBuilderSpec.parse("osFamily=UBUNTU,os64Bit=true,minRam=2048,loginUser=user:pass"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.karaf.itest.WhirrInstallationTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInstallation() throws InterruptedException {
  System.err.println(executeCommand("osgi:list"));
  Bundle commandsBundle=getInstalledBundle("org.apache.whirr.karaf.commands");
  Assert.assertEquals("Expected bundle to be started",Bundle.ACTIVE,commandsBundle.getState());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.DryRunModuleTest </h4><pre class="type-4 type-10 type-17 type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Simple test that tests dry run module and at the same time enforces clear
 * separation of script execution phases.
 */
@Test public void testNoInitScriptsAfterConfigurationStartedAndNoConfigScriptsAfterDestroy() throws ConfigurationException, JSchException, IOException, InterruptedException {
  final List<String> expectedExecutionOrder=ImmutableList.of("bootstrap","configure","start","destroy");
  CompositeConfiguration config=new CompositeConfiguration();
  config.setProperty("whirr.provider","stub");
  config.setProperty("whirr.cluster-name","stub-test");
  config.setProperty("whirr.instance-templates","10 noop+noop3,10 noop2+noop,10 noop3+noop2");
  config.setProperty("whirr.state-store","memory");
  ClusterSpec clusterSpec=ClusterSpec.withTemporaryKeys(config);
  ClusterController controller=new ClusterController();
  DryRun dryRun=getDryRunInControllerForCluster(controller,clusterSpec);
  dryRun.reset();
  controller.launchCluster(clusterSpec);
  controller.destroyCluster(clusterSpec);
  ListMultimap<NodeMetadata,Statement> perNodeExecutions=dryRun.getExecutions();
  List<StatementOnNode> totalExecutions=dryRun.getTotallyOrderedExecutions();
  for (  Entry<NodeMetadata,Collection<Statement>> entry : perNodeExecutions.asMap().entrySet()) {
    assertSame("An incorrect number of scripts was executed in the node: " + entry.getValue(),entry.getValue().size(),expectedExecutionOrder.size());
    List<Statement> asList=Lists.newArrayList(entry.getValue());
    int count=0;
    for (    String phase : expectedExecutionOrder) {
      String scriptName=getScriptName(asList.get(count));
      assertTrue("The '" + phase + "' script was executed in the wrong order, found: "+ scriptName,scriptName.startsWith(phase));
      count+=1;
    }
  }
  Stack<String> executedPhases=new Stack<String>();
  for (  StatementOnNode script : totalExecutions) {
    String[] parts=getScriptName(script.getStatement()).split("-");
    if ((!executedPhases.empty() && !executedPhases.peek().equals(parts[0])) || executedPhases.empty()) {
      executedPhases.push(parts[0]);
    }
  }
  assertEquals(expectedExecutionOrder.size(),executedPhases.size());
  for (  String phaseName : Lists.reverse(expectedExecutionOrder)) {
    assertEquals(executedPhases.pop(),phaseName);
  }
}

</code></pre>

<br>
<pre class="type-17 type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExecuteOnlyBootstrapForNoopWithListener() throws Exception {
  CompositeConfiguration config=new CompositeConfiguration();
  config.setProperty("whirr.provider","stub");
  config.setProperty("whirr.cluster-name","stub-test");
  config.setProperty("whirr.instance-templates","1 noop");
  config.setProperty("whirr.state-store","memory");
  ClusterSpec clusterSpec=ClusterSpec.withTemporaryKeys(config);
  MockClusterActionHandlerListener listener=new MockClusterActionHandlerListener();
  clusterSpec.setHandlerListener(listener);
  ClusterController controller=new ClusterController();
  DryRun dryRun=getDryRunInControllerForCluster(controller,clusterSpec);
  dryRun.reset();
  controller.launchCluster(clusterSpec);
  controller.destroyCluster(clusterSpec);
  ListMultimap<NodeMetadata,Statement> perNodeExecutions=dryRun.getExecutions();
  for (  Entry<NodeMetadata,Collection<Statement>> entry : perNodeExecutions.asMap().entrySet()) {
    assertSame("An incorrect number of scripts was executed in the node " + entry,entry.getValue().size(),1);
  }
  assertEquals("beforeCalls should be 4",listener.beforeCalls,4);
  assertEquals("afterCalls should be 4",listener.afterCalls,4);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cassandra.CassandraClusterActionHandlerTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test() public void testGetSeeds() throws UnknownHostException {
  Instance one=getInstance("1");
  Instance two=getInstance("2");
  Set<Instance> instances=Sets.newLinkedHashSet();
  instances.add(one);
  CassandraClusterActionHandler handler=new CassandraClusterActionHandler();
  List<Instance> seeds1=handler.getSeeds(instances);
  assertEquals(1,seeds1.size());
  assertEquals(one,seeds1.get(0));
  instances.add(two);
  for (int i=3; i < 10; i++) {
    instances.add(getInstance(Integer.toString(i)));
  }
  List<Instance> seeds2=handler.getSeeds(instances);
  assertEquals(2,seeds2.size());
  assertEquals(one,seeds2.get(0));
  assertEquals(two,seeds2.get(1));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testComputeInitialTokens(){
  List<String> result=new CassandraClusterActionHandler().computeInitialTokens(5);
  assertEquals(result,ImmutableList.of("0","34028236692093846346337460743176821145","68056473384187692692674921486353642290","102084710076281539039012382229530463435","136112946768375385385349842972707284580"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cdh.integration.Cdh3ZooKeeperServiceTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test() throws Exception {
class ConnectionWatcher implements Watcher {
    private ZooKeeper zk;
    private CountDownLatch latch=new CountDownLatch(1);
    public void connect(    String hosts) throws IOException, InterruptedException {
      zk=new ZooKeeper(hosts,5000,this);
      latch.await();
    }
    public ZooKeeper getZooKeeper(){
      return zk;
    }
    @Override public void process(    WatchedEvent event){
      if (event.getState() == KeeperState.SyncConnected) {
        latch.countDown();
      }
    }
    public void close() throws InterruptedException {
      if (zk != null) {
        zk.close();
      }
    }
  }
  String path="/data";
  String data="Hello";
  ConnectionWatcher watcher=new ConnectionWatcher();
  watcher.connect(hosts);
  watcher.getZooKeeper().create(path,data.getBytes(),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  watcher.close();
  watcher=new ConnectionWatcher();
  watcher.connect(hosts);
  byte[] actualData=watcher.getZooKeeper().getData(path,false,null);
  assertEquals(data,new String(actualData));
  watcher.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.cdh.integration.CdhZooKeeperServiceTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
class ConnectionWatcher implements Watcher {
    private ZooKeeper zk;
    private CountDownLatch latch=new CountDownLatch(1);
    public void connect(    String hosts) throws IOException, InterruptedException {
      zk=new ZooKeeper(hosts,5000,this);
      latch.await();
    }
    public ZooKeeper getZooKeeper(){
      return zk;
    }
    @Override public void process(    WatchedEvent event){
      if (event.getState() == KeeperState.SyncConnected) {
        latch.countDown();
      }
    }
    public void close() throws InterruptedException {
      if (zk != null) {
        zk.close();
      }
    }
  }
  String path="/data";
  String data="Hello";
  ConnectionWatcher watcher=new ConnectionWatcher();
  watcher.connect(hosts);
  watcher.getZooKeeper().create(path,data.getBytes(),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  watcher.close();
  watcher=new ConnectionWatcher();
  watcher.connect(hosts);
  byte[] actualData=watcher.getZooKeeper().getData(path,false,null);
  assertEquals(data,new String(actualData));
  watcher.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.chef.RecipeTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJSONConversionWithSpecificRecipe(){
  Recipe postgresql=new Recipe("postgresql","server");
  assertEquals("JSON representation is incorrect.",POSTGRES_JSON,postgresql.toJSON());
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testStatementGeneration(){
  Recipe recipe=new Recipe("nginx",null,"http://myurl");
  recipe.attribs.put("webport","90");
  recipe.fileName="test";
  assertEquals("Statement representation incorrect",CHEF_COMMAND,recipe.render(OsFamily.UNIX));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJSONConversion(){
  Recipe nginx=new Recipe("nginx");
  assertEquals("JSON representation is incorrect.",NGINX_JSON,nginx.toJSON());
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testJSONConversionWithAttribs(){
  Recipe resolver=new Recipe("resolver");
  resolver.attribs.put("nameservers",new String[]{"10.0.0.1"});
  resolver.attribs.put("search","int.example.com");
  assertEquals("JSON representation is incorrect.",RESOLVER_JSON,resolver.toJSON());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.chef.integration.ChefServiceTest </h4><pre class="type-4 type-1 type-10 type-3 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void testChefRunRecipeFromURL() throws Exception {
  Recipe nginx=new Recipe("nginx",null,"http://s3.amazonaws.com/opscode-community/cookbook_versions/tarballs/529/original/nginx.tgz");
  Map<? extends NodeMetadata,ExecResponse> responses=runRecipe(nginx);
  printResponses(nginx,responses);
  HttpClient client=new HttpClient();
  final GetMethod getIndex=new GetMethod(String.format("http://%s",responses.keySet().iterator().next().getPublicAddresses().iterator().next()));
  assertTrue("Could not connect with nginx server",retry(new Predicate<HttpClient>(){
    @Override public boolean apply(    HttpClient input){
      try {
        int statusCode=input.executeMethod(getIndex);
        assertEquals("Status code should be 200",HttpStatus.SC_OK,statusCode);
        return true;
      }
 catch (      Exception e) {
        return false;
      }
    }
  }
,10,1,TimeUnit.SECONDS).apply(client));
  String indexPageHTML=getIndex.getResponseBodyAsString();
  assertTrue("The string 'nginx' should appear on the index page",indexPageHTML.contains("nginx"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.ganglia.integration.GangliaServiceTest </h4><pre class="type-4 type-1 type-10 type-3 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  Instance metad=cluster.getInstanceMatching(RolePredicates.role(GangliaMetadClusterActionHandler.GANGLIA_METAD_ROLE));
  String metadHostname=metad.getPublicHostName();
  assertNotNull(metadHostname);
  HttpClient client=new HttpClient();
  GetMethod getIndex=new GetMethod(String.format("http://%s/ganglia/",metadHostname));
  int statusCode=client.executeMethod(getIndex);
  assertEquals("Status code should be 200",HttpStatus.SC_OK,statusCode);
  String indexPageHTML=getIndex.getResponseBodyAsString();
  assertTrue("The string 'Ganglia' should appear on the index page",indexPageHTML.contains("Ganglia"));
  assertTrue("The string 'WhirrGrid' should appear on the index page",indexPageHTML.contains("WhirrGrid"));
  for (  Instance instance : cluster.getInstancesMatching(anyRoleIn(Sets.<String>newHashSet(GANGLIA_METAD_ROLE,GANGLIA_MONITOR_ROLE)))) {
    testMonitorResponse(instance);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hadoop.integration.AbstractHadoopServiceTest </h4><pre class="type-4 type-1 type-3 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  Configuration conf=controller.getConfiguration();
  JobConf job=new JobConf(conf,HadoopServiceTest.class);
  FileSystem fs=FileSystem.get(conf);
  OutputStream os=fs.create(new Path("input"));
  Writer wr=new OutputStreamWriter(os);
  wr.write("b a\n");
  wr.close();
  job.setMapperClass(TokenCountMapper.class);
  job.setReducerClass(LongSumReducer.class);
  job.setOutputKeyClass(Text.class);
  job.setOutputValueClass(LongWritable.class);
  FileInputFormat.setInputPaths(job,new Path("input"));
  FileOutputFormat.setOutputPath(job,new Path("output"));
  JobClient.runJob(job);
  FSDataInputStream in=fs.open(new Path("output/part-00000"));
  BufferedReader reader=new BufferedReader(new InputStreamReader(in));
  assertEquals("a\t1",reader.readLine());
  assertEquals("b\t1",reader.readLine());
  assertNull(reader.readLine());
  reader.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.puppet.ManifestTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPuppetConversionWithAttribsHiera(){
  Manifest ntp=new Manifest("ntp");
  ntp.attribs.put("servers","\"10.0.0.1\"");
  assertEquals("Puppet/Hiera representation is incorrect.",NTP_PUPPET_HIERA,ntp.getHiera());
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPuppetConversionHiera(){
  Manifest postgress=new Manifest("postgresql","server");
  assertEquals("Puppet/Name representation is incorrect.",POSTGRES_PUPPET_NAME,postgress.getName());
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPuppetConversion(){
  Manifest nginx=new Manifest("nginx",null);
  assertEquals("Puppet representation is incorrect.",NGINX_PUPPET,nginx.toString());
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPuppetConversionWithAttribs(){
  Manifest ntp=new Manifest("ntp");
  ntp.attribs.put("servers","\"10.0.0.1\"");
  assertEquals("Puppet representation is incorrect.",NTP_PUPPET,ntp.toString());
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPuppetConversionWithSpecificClass(){
  Manifest postgresql=new Manifest("postgresql","server");
  assertEquals("PUPPET representation is incorrect.",POSTGRES_PUPPET,postgresql.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.puppet.PuppetClusterActionHandlerFactoryTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPuppetFactoryIsRegisteredAndWorksWithManifests(){
  assertEquals(new HandlerMapFactory().create().getUnchecked("puppet:postgresql::server"),new PuppetClusterActionHandler("postgresql::server"));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPuppetFactoryIsRegisteredAndWorksWithModules(){
  assertEquals(new HandlerMapFactory().create().getUnchecked("puppet:nginx"),new PuppetClusterActionHandler("nginx"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.puppet.functions.InstallAllModulesStatementFromPropertiesTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWhenMultiple(){
  assertEquals("git clone git://github.com/puppetlabs/puppetlabs-nginx.git /etc/puppet/modules/nginx\n" + "git clone git://github.com/puppetlabs/puppetlabs-http.git /etc/puppet/modules/http\n",getStatement.apply(ImmutableMap.of("puppet.nginx.module","git://github.com/puppetlabs/puppetlabs-nginx.git","puppet.http.module","git://github.com/puppetlabs/puppetlabs-http.git")).render(OsFamily.UNIX));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.puppet.functions.KeyToModuleNameOrNullTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSimple(){
  assertEquals("nginx",KeyToModuleNameOrNull.INSTANCE.apply("puppet.nginx.module"));
  assertEquals(null,KeyToModuleNameOrNull.INSTANCE.apply("puppet.nginx.module.branch"));
  assertEquals(null,KeyToModuleNameOrNull.INSTANCE.apply("nginx.server"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.puppet.functions.ModulePropertiesFromConfigurationTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWhenMatches(){
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("puppet.nginx.module","git://github.com/puppetlabs/puppetlabs-nginx.git");
  conf.setProperty("puppet.nginx.module.branch","notmaster");
  conf.setProperty("puppet.foox.module",null);
  conf.setProperty("puppet.module","foo");
  assertEquals(ImmutableMap.of("puppet.nginx.module.branch","notmaster","puppet.nginx.module","git://github.com/puppetlabs/puppetlabs-nginx.git"),ModulePropertiesFromConfiguration.INSTANCE.apply(conf));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.puppet.functions.RolesManagedByPuppetTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test(){
  assertEquals(ImmutableSet.of("http").toString(),RolesManagedByPuppet.INSTANCE.apply(ImmutableSet.of("hadoop","puppet:http")).toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.puppet.functions.StatementToInstallModuleTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWhenFile(){
  assertEquals("install_tarball file://path/to/tgz /etc/puppet/modules/nginx || return 1\n",getStatement.apply(ImmutableMap.of("puppet.nginx.module","file://path/to/tgz")).render(OsFamily.UNIX));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWhenGitAndBranch(){
  assertEquals("git clone -b notmaster git://github.com/puppetlabs/puppetlabs-nginx.git /etc/puppet/modules/nginx\n",getStatement.apply(ImmutableMap.of("puppet.nginx.module.branch","notmaster","puppet.nginx.module","git://github.com/puppetlabs/puppetlabs-nginx.git")).render(OsFamily.UNIX));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWhenRemote(){
  assertEquals("install_tarball remote://path/to/tgz /etc/puppet/modules/nginx || return 1\n",getStatement.apply(ImmutableMap.of("puppet.nginx.module","remote://path/to/tgz")).render(OsFamily.UNIX));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWhenGit(){
  assertEquals("git clone git://github.com/puppetlabs/puppetlabs-nginx.git /etc/puppet/modules/nginx\n",getStatement.apply(ImmutableMap.of("puppet.nginx.module","git://github.com/puppetlabs/puppetlabs-nginx.git")).render(OsFamily.UNIX));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.puppet.statements.CreateSitePpAndApplyRolesTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWithAttribs() throws IOException {
  Configuration conf=new PropertiesConfiguration();
  conf.setProperty("puppet.nginx.module","git://github.com/puppetlabs/puppetlabs-nginx.git");
  conf.setProperty("nginx.server.hostname","foohost");
  CreateSitePpAndApplyRoles nginx=new CreateSitePpAndApplyRoles(ImmutableSet.of("nginx::server"),ImmutableSet.of(new Cluster.Instance(new Credentials("dummy","dummy"),Sets.newHashSet("puppet:nginx::server"),"127.0.0.1","127.0.0.1","id-1",null)),conf);
  assertEquals(CharStreams.toString(Resources.newReaderSupplier(Resources.getResource("nginx-with-attribs.txt"),Charsets.UTF_8)),nginx.render(OsFamily.UNIX));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.puppet.statements.InstallModuleFromGitTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWhenModuleAndURIAndBranchValid(){
  InstallModuleFromGit nginx=new InstallModuleFromGit("nginx",URI.create("git://github.com/puppetlabs/puppetlabs-nginx.git"),"WHIRR-385");
  assertEquals("git clone -b WHIRR-385 git://github.com/puppetlabs/puppetlabs-nginx.git /etc/puppet/modules/nginx\n",nginx.render(OsFamily.UNIX));
}

</code></pre>

<br>
<pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testWhenModuleAndURIValid(){
  InstallModuleFromGit nginx=new InstallModuleFromGit("nginx",URI.create("git://github.com/puppetlabs/puppetlabs-nginx.git"));
  assertEquals("git clone git://github.com/puppetlabs/puppetlabs-nginx.git /etc/puppet/modules/nginx\n",nginx.render(OsFamily.UNIX));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.solr.integration.SolrServiceTest </h4><pre class="type-4 type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testSolr() throws IOException, SolrServerException {
  Set<Cluster.Instance> instances=cluster.getInstancesMatching(role(SOLR_ROLE));
  for (  Cluster.Instance instance : instances) {
    String publicIp=instance.getPublicIp();
    LOG.info("Adding a document to instance " + instance.getId() + " @ "+ publicIp);
    CommonsHttpSolrServer solrServer=new CommonsHttpSolrServer(String.format("http://%s:%s/solr/core0",instance.getPublicHostName(),SOLR_PORT));
    SolrInputDocument doc=new SolrInputDocument();
    doc.addField("name","Apache Whirr");
    doc.addField("inceptionYear","2010");
    solrServer.add(doc);
    solrServer.commit();
    LOG.info("Committed document to instance " + instance.getId() + " @ "+ publicIp);
    LOG.info("Performing a search on instance " + instance.getId() + " @ "+ publicIp);
    SolrQuery query=new SolrQuery("name:whirr");
    QueryResponse response=solrServer.query(query);
    SolrDocumentList results=response.getResults();
    assertEquals("Search on instance " + instance.getId() + " did NOT return a document!",1,results.size());
    SolrDocument resultDoc=results.get(0);
    assertEquals("name field on document of instance " + instance.getId() + " is incorrect","Apache Whirr",resultDoc.get("name"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.voldemort.integration.VoldemortServiceTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void testInstances() throws Exception {
  Set<Instance> instances=cluster.getInstances();
  String url="tcp://" + instances.iterator().next().getPublicAddress().getHostAddress() + ":"+ ADMIN_PORT;
  AdminClient client=new AdminClient(url,new AdminClientConfig());
  voldemort.cluster.Cluster c=client.getAdminClientCluster();
  List<String> voldemortBasedHosts=new ArrayList<String>();
  for (  Node node : c.getNodes())   voldemortBasedHosts.add(node.getHost());
  List<String> whirrBasedHosts=new ArrayList<String>();
  for (  Instance instance : instances)   whirrBasedHosts.add(instance.getPrivateAddress().getHostAddress());
  Collections.sort(voldemortBasedHosts);
  Collections.sort(whirrBasedHosts);
  Assert.assertEquals(whirrBasedHosts,voldemortBasedHosts);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.yarn.integration.AbstractHadoopServiceTest </h4><pre class="type-4 type-1 type-3 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Configuration conf=controller.getConfiguration();
  JobConf job=new JobConf(conf,AbstractHadoopServiceTest.class);
  FileSystem fs=FileSystem.get(conf);
  OutputStream os=fs.create(new Path("input"));
  Writer wr=new OutputStreamWriter(os);
  wr.write("b a\n");
  wr.close();
  job.setMapperClass(TokenCountMapper.class);
  job.setReducerClass(LongSumReducer.class);
  job.setOutputKeyClass(Text.class);
  job.setOutputValueClass(LongWritable.class);
  FileInputFormat.setInputPaths(job,new Path("input"));
  FileOutputFormat.setOutputPath(job,new Path("output"));
  JobClient.runJob(job);
  FSDataInputStream in=fs.open(new Path("output/part-00000"));
  BufferedReader reader=new BufferedReader(new InputStreamReader(in));
  assertEquals("a\t1",reader.readLine());
  assertEquals("b\t1",reader.readLine());
  assertNull(reader.readLine());
  reader.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.zookeeper.integration.ZooKeeperServiceTest </h4><pre class="type-1 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
class ConnectionWatcher implements Watcher {
    private ZooKeeper zk;
    private CountDownLatch latch=new CountDownLatch(1);
    public void connect(    String hosts) throws IOException, InterruptedException {
      zk=new ZooKeeper(hosts,5000,this);
      latch.await();
    }
    public ZooKeeper getZooKeeper(){
      return zk;
    }
    @Override public void process(    WatchedEvent event){
      if (event.getState() == KeeperState.SyncConnected) {
        latch.countDown();
      }
    }
    public void close() throws InterruptedException {
      if (zk != null) {
        zk.close();
      }
    }
  }
  String path="/data";
  String data="Hello";
  ConnectionWatcher watcher=new ConnectionWatcher();
  watcher.connect(hosts);
  watcher.getZooKeeper().create(path,data.getBytes(),Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT);
  watcher.close();
  watcher=new ConnectionWatcher();
  watcher.connect(hosts);
  byte[] actualData=watcher.getZooKeeper().getData(path,false,null);
  assertEquals(data,new String(actualData));
  watcher.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.template.TemplateUtilsTest </h4><pre class="type-4 type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testProcessTemplate() throws Exception {
  Credentials credentials=new Credentials("dummy","dummy");
  Cluster.Instance instance=new Cluster.Instance(credentials,Sets.newHashSet("foo"),"127.0.0.1","127.0.0.1","id-0",null);
  ClusterSpec clusterSpec=ClusterSpec.withTemporaryKeys(new PropertiesConfiguration("whirr-core-test.properties"));
  Cluster cluster=new Cluster(Sets.newHashSet(instance));
  VelocityEngine ve=TemplateUtils.newVelocityEngine();
  String result=TemplateUtils.processTemplate(ve,"template-test.txt.vm",clusterSpec,cluster);
  Assert.assertEquals("instance ip: 127.0.0.1",result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.util.UtilsTest </h4><pre class="type-3 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testPrintAccess(){
  final Instance instance=mock(Instance.class);
  when(instance.getPublicIp()).thenReturn("test-public-ip");
  when(instance.getRoles()).thenReturn(ImmutableSet.of("test-role"));
  Cluster cluster=mock(Cluster.class);
  when(cluster.getInstances()).thenReturn(ImmutableSet.<Cluster.Instance>of(instance));
  ClusterSpec spec=mock(ClusterSpec.class);
  when(spec.getClusterUser()).thenReturn("test-identity");
  when(spec.getPrivateKeyFile()).thenReturn(new File("/test/key/path"));
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  PrintStream ps=new PrintStream(baos);
  Utils.printSSHConnectionDetails(ps,spec,cluster,20);
  assertEquals("The ssh command did not match",EXPECTED_SSH_COMMAND,new String(baos.toByteArray()));
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
