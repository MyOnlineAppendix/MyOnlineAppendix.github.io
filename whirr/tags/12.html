<h3><span class=" glyphicon glyphicon-tag"/>&nbspNullVerifier</h3><kbd>Verifies whether objects are null</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.whirr.karaf.itest.WhirrFunctionLoaderTest </h4><pre class="type-1 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
"></span><br>
@Test public void testServices() throws InterruptedException {
  ServiceFunctionLoader loader=new ServiceFunctionLoader(bundleContext);
  executeCommand("features:install whirr-cassandra");
  executeCommand("features:install whirr-chef");
  executeCommand("features:install whirr-elasticsearch");
  executeCommand("features:install whirr-ganglia");
  executeCommand("features:install whirr-hadoop");
  executeCommand("features:install whirr-hama");
  executeCommand("features:install whirr-hbase");
  executeCommand("features:install whirr-puppet");
  executeCommand("features:install whirr-pig");
  executeCommand("features:install whirr-solr");
  executeCommand("features:install whirr-mahout");
  executeCommand("features:install whirr-yarn");
  executeCommand("features:install whirr-zookeeper");
  System.err.println(executeCommand("osgi:list"));
  getOsgiService("org.apache.whirr.ClusterController","(name=default)",SERVICE_TIMEOUT);
  String function=loader.loadFunction("cleanup_cassandra",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_cassandra",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_cassandra",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_cassandra",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("stop_cassandra",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_chef",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("cleanup_elasticsearch",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_elasticsearch",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_elasticsearch",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_elasticsearch",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("stop_elasticsearch",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_ganglia",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_ganglia",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_hadoop",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_hadoop",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_hama",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_hama",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_hama",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_hbase",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_hbase",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_mahout_client",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_pig_client",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_puppet",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_solr",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_solr",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_solr",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("stop_solr",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_hadoop_mr2",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_hadoop_mr2",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_mr_jobhistory",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_yarn",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_yarn",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("cleanup_zookeeper",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("configure_zookeeper",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("install_zookeeper",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("start_zookeeper",OsFamily.UNIX);
  Assert.assertNotNull(function);
  function=loader.loadFunction("stop_zookeeper",OsFamily.UNIX);
  Assert.assertNotNull(function);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.ganglia.integration.GangliaServiceTest </h4><pre class="type-4 type-1 type-10 type-3 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  Instance metad=cluster.getInstanceMatching(RolePredicates.role(GangliaMetadClusterActionHandler.GANGLIA_METAD_ROLE));
  String metadHostname=metad.getPublicHostName();
  assertNotNull(metadHostname);
  HttpClient client=new HttpClient();
  GetMethod getIndex=new GetMethod(String.format("http://%s/ganglia/",metadHostname));
  int statusCode=client.executeMethod(getIndex);
  assertEquals("Status code should be 200",HttpStatus.SC_OK,statusCode);
  String indexPageHTML=getIndex.getResponseBodyAsString();
  assertTrue("The string 'Ganglia' should appear on the index page",indexPageHTML.contains("Ganglia"));
  assertTrue("The string 'WhirrGrid' should appear on the index page",indexPageHTML.contains("WhirrGrid"));
  for (  Instance instance : cluster.getInstancesMatching(anyRoleIn(Sets.<String>newHashSet(GANGLIA_METAD_ROLE,GANGLIA_MONITOR_ROLE)))) {
    testMonitorResponse(instance);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hadoop.integration.AbstractHadoopServiceTest </h4><pre class="type-4 type-1 type-3 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  Configuration conf=controller.getConfiguration();
  JobConf job=new JobConf(conf,HadoopServiceTest.class);
  FileSystem fs=FileSystem.get(conf);
  OutputStream os=fs.create(new Path("input"));
  Writer wr=new OutputStreamWriter(os);
  wr.write("b a\n");
  wr.close();
  job.setMapperClass(TokenCountMapper.class);
  job.setReducerClass(LongSumReducer.class);
  job.setOutputKeyClass(Text.class);
  job.setOutputValueClass(LongWritable.class);
  FileInputFormat.setInputPaths(job,new Path("input"));
  FileOutputFormat.setOutputPath(job,new Path("output"));
  JobClient.runJob(job);
  FSDataInputStream in=fs.open(new Path("output/part-00000"));
  BufferedReader reader=new BufferedReader(new InputStreamReader(in));
  assertEquals("a\t1",reader.readLine());
  assertEquals("b\t1",reader.readLine());
  assertNull(reader.readLine());
  reader.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.hama.integration.HamaServiceTest </h4><pre class="type-1 type-10 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void test() throws Exception {
  HamaConfiguration jobConf=controller.getConfiguration();
  jobConf.set("hadoop.rpc.socket.factory.class.default","org.apache.hadoop.net.StandardSocketFactory");
  BSPJob bsp=new BSPJob(jobConf,new BSPJobID());
  LOG.info("Job conf: " + bsp.getConf().get("hadoop.rpc.socket.factory.class.default") + ", "+ bsp.getJobID().toString());
  bsp.setJarByClass(MyEstimator.class);
  bsp.setBspClass(MyEstimator.class);
  bsp.setInputFormat(NullInputFormat.class);
  bsp.setOutputKeyClass(Text.class);
  bsp.setOutputValueClass(DoubleWritable.class);
  bsp.setOutputFormat(TextOutputFormat.class);
  bsp.set("bsp.working.dir","/tmp");
  FileOutputFormat.setOutputPath(bsp,TMP_OUTPUT);
  LOG.info("Client configuration start ..");
  HamaConfiguration clientConf=controller.getConfiguration();
  BSPJobClient jobClient=new BSPJobClient(clientConf);
  ClusterStatus cluster=jobClient.getClusterStatus(true);
  assertNotNull(cluster);
  assertTrue(cluster.getGroomServers() > 0);
  assertTrue(cluster.getMaxTasks() > 1);
  bsp.setNumBspTask(cluster.getMaxTasks());
  LOG.info("Client conf: " + clientConf.get("hadoop.rpc.socket.factory.class.default"));
  RunningJob rJob=jobClient.submitJob(bsp);
  rJob.waitForCompletion();
  LOG.info("finished");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.service.yarn.integration.AbstractHadoopServiceTest </h4><pre class="type-4 type-1 type-3 type-12 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Configuration conf=controller.getConfiguration();
  JobConf job=new JobConf(conf,AbstractHadoopServiceTest.class);
  FileSystem fs=FileSystem.get(conf);
  OutputStream os=fs.create(new Path("input"));
  Writer wr=new OutputStreamWriter(os);
  wr.write("b a\n");
  wr.close();
  job.setMapperClass(TokenCountMapper.class);
  job.setReducerClass(LongSumReducer.class);
  job.setOutputKeyClass(Text.class);
  job.setOutputValueClass(LongWritable.class);
  FileInputFormat.setInputPaths(job,new Path("input"));
  FileOutputFormat.setOutputPath(job,new Path("output"));
  JobClient.runJob(job);
  FSDataInputStream in=fs.open(new Path("output/part-00000"));
  BufferedReader reader=new BufferedReader(new InputStreamReader(in));
  assertEquals("a\t1",reader.readLine());
  assertEquals("b\t1",reader.readLine());
  assertNull(reader.readLine());
  reader.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.whirr.state.integration.BlobClusterStateStoreTest </h4><pre class="type-1 type-12 type-2 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(timeout=TestConstants.ITEST_TIMEOUT) public void testStoreAndLoadState() throws Exception {
  ClusterSpec spec=getTestClusterSpec();
  BlobStoreContext context=BlobStoreContextBuilder.build(spec);
  String container=generateRandomContainerName(context);
  try {
    spec.setStateStore("blob");
    spec.setStateStoreContainer(container);
    Cluster expected=createTestCluster(new String[]{"region/id1","region/id2"},new String[]{"role1","role2"});
    BlobClusterStateStore store=new BlobClusterStateStore(spec);
    store.save(expected);
    Cluster stored=store.load();
    Cluster.Instance first=Iterables.getFirst(stored.getInstances(),null);
    assertNotNull(first);
    assertThat(first.getId(),is("region/id1"));
    assertThat(first.getRoles().contains("role1"),is(true));
    assertThat(stored.getInstances().size(),is(2));
    store.destroy();
    expected=store.load();
    assertNull(expected);
  }
  finally {
    LOG.info("Removing temporary container '{}'",container);
    context.getBlobStore().deleteContainer(container);
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
