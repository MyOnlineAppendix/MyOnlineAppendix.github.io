<h3 style="margin:0px">Class: org.apache.commons.math4.stat.correlation.PearsonsCorrelationTest (8 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies assertions in iterations"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >IterativeVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-9 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Verify that creating correlation from covariance gives same results as
 * direct computation from the original matrix
 */
@Test public void testCovarianceConsistency(){
  RealMatrix matrix=createRealMatrix(longleyData,16,7);
  PearsonsCorrelation corrInstance=new PearsonsCorrelation(matrix);
  Covariance covInstance=new Covariance(matrix);
  PearsonsCorrelation corrFromCovInstance=new PearsonsCorrelation(covInstance);
  TestUtils.assertEquals("correlation values",corrInstance.getCorrelationMatrix(),corrFromCovInstance.getCorrelationMatrix(),10E-15);
  TestUtils.assertEquals("p values",corrInstance.getCorrelationPValues(),corrFromCovInstance.getCorrelationPValues(),10E-15);
  TestUtils.assertEquals("standard errors",corrInstance.getCorrelationStandardErrors(),corrFromCovInstance.getCorrelationStandardErrors(),10E-15);
  PearsonsCorrelation corrFromCovInstance2=new PearsonsCorrelation(covInstance.getCovarianceMatrix(),16);
  TestUtils.assertEquals("correlation values",corrInstance.getCorrelationMatrix(),corrFromCovInstance2.getCorrelationMatrix(),10E-15);
  TestUtils.assertEquals("p values",corrInstance.getCorrelationPValues(),corrFromCovInstance2.getCorrelationPValues(),10E-15);
  TestUtils.assertEquals("standard errors",corrInstance.getCorrelationStandardErrors(),corrFromCovInstance2.getCorrelationStandardErrors(),10E-15);
}

</code></pre>

<pre class="type-5 type-9 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Verify that direct t-tests using standard error estimates are consistent
 * with reported p-values
 */
@Test public void testStdErrorConsistency(){
  TDistribution tDistribution=new TDistribution(45);
  RealMatrix matrix=createRealMatrix(swissData,47,5);
  PearsonsCorrelation corrInstance=new PearsonsCorrelation(matrix);
  RealMatrix rValues=corrInstance.getCorrelationMatrix();
  RealMatrix pValues=corrInstance.getCorrelationPValues();
  RealMatrix stdErrors=corrInstance.getCorrelationStandardErrors();
  for (int i=0; i < 5; i++) {
    for (int j=0; j < i; j++) {
      double t=FastMath.abs(rValues.getEntry(i,j)) / stdErrors.getEntry(i,j);
      double p=2 * (1 - tDistribution.cumulativeProbability(t));
      Assert.assertEquals(p,pValues.getEntry(i,j),10E-15);
    }
  }
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * Constant column
 */
@Test public void testConstant(){
  double[] noVariance=new double[]{1,1,1,1};
  double[] values=new double[]{1,2,3,4};
  Assert.assertTrue(Double.isNaN(new PearsonsCorrelation().correlation(noVariance,values)));
  Assert.assertTrue(Double.isNaN(new PearsonsCorrelation().correlation(values,noVariance)));
}

</code></pre>

<pre class="type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
"></span><br>
/** 
 * Test p-value near 0. JIRA: MATH-371
 */
@Test public void testPValueNearZero(){
  int dimension=120;
  double[][] data=new double[dimension][2];
  for (int i=0; i < dimension; i++) {
    data[i][0]=i;
    data[i][1]=i + 1 / ((double)i + 1);
  }
  PearsonsCorrelation corrInstance=new PearsonsCorrelation(data);
  Assert.assertTrue(corrInstance.getCorrelationPValues().getEntry(0,1) > 0);
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
/** 
 * Insufficient data
 */
@Test public void testInsufficientData(){
  double[] one=new double[]{1};
  double[] two=new double[]{2};
  try {
    new PearsonsCorrelation().correlation(one,two);
    Assert.fail("Expecting MathIllegalArgumentException");
  }
 catch (  MathIllegalArgumentException ex) {
  }
  RealMatrix matrix=new BlockRealMatrix(new double[][]{{0},{1}});
  try {
    new PearsonsCorrelation(matrix);
    Assert.fail("Expecting MathIllegalArgumentException");
  }
 catch (  MathIllegalArgumentException ex) {
  }
}

</code></pre>

<pre class="type-9 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testConsistency(){
  RealMatrix matrix=createRealMatrix(longleyData,16,7);
  PearsonsCorrelation corrInstance=new PearsonsCorrelation(matrix);
  double[][] data=matrix.getData();
  double[] x=matrix.getColumn(0);
  double[] y=matrix.getColumn(1);
  Assert.assertEquals(new PearsonsCorrelation().correlation(x,y),corrInstance.getCorrelationMatrix().getEntry(0,1),Double.MIN_VALUE);
  TestUtils.assertEquals("Correlation matrix",corrInstance.getCorrelationMatrix(),new PearsonsCorrelation().computeCorrelationMatrix(data),Double.MIN_VALUE);
}

</code></pre>

<pre class="type-9 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test Longley dataset against R.
 */
@Test public void testLongly(){
  RealMatrix matrix=createRealMatrix(longleyData,16,7);
  PearsonsCorrelation corrInstance=new PearsonsCorrelation(matrix);
  RealMatrix correlationMatrix=corrInstance.getCorrelationMatrix();
  double[] rData=new double[]{1.000000000000000,0.9708985250610560,0.9835516111796693,0.5024980838759942,0.4573073999764817,0.960390571594376,0.9713294591921188,0.970898525061056,1.0000000000000000,0.9915891780247822,0.6206333925590966,0.4647441876006747,0.979163432977498,0.9911491900672053,0.983551611179669,0.9915891780247822,1.0000000000000000,0.6042609398895580,0.4464367918926265,0.991090069458478,0.9952734837647849,0.502498083875994,0.6206333925590966,0.6042609398895580,1.0000000000000000,-0.1774206295018783,0.686551516365312,0.6682566045621746,0.457307399976482,0.4647441876006747,0.4464367918926265,-0.1774206295018783,1.0000000000000000,0.364416267189032,0.4172451498349454,0.960390571594376,0.9791634329774981,0.9910900694584777,0.6865515163653120,0.3644162671890320,1.000000000000000,0.9939528462329257,0.971329459192119,0.9911491900672053,0.9952734837647849,0.6682566045621746,0.4172451498349454,0.993952846232926,1.0000000000000000};
  TestUtils.assertEquals("correlation matrix",createRealMatrix(rData,7,7),correlationMatrix,10E-15);
  double[] rPvalues=new double[]{4.38904690369668e-10,8.36353208910623e-12,7.8159700933611e-14,0.0472894097790304,0.01030636128354301,0.01316878049026582,0.0749178049642416,0.06971758330341182,0.0830166169296545,0.510948586323452,3.693245043123738e-09,4.327782576751815e-11,1.167954621905665e-13,0.00331028281967516,0.1652293725106684,3.95834476307755e-10,1.114663916723657e-13,1.332267629550188e-15,0.00466039138541463,0.1078477071581498,7.771561172376096e-15};
  RealMatrix rPMatrix=createLowerTriangularRealMatrix(rPvalues,7);
  fillUpper(rPMatrix,0d);
  TestUtils.assertEquals("correlation p values",rPMatrix,corrInstance.getCorrelationPValues(),10E-15);
}

</code></pre>

<pre class="type-9 type-3 type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
/** 
 * Test R Swiss fertility dataset against R.
 */
@Test public void testSwissFertility(){
  RealMatrix matrix=createRealMatrix(swissData,47,5);
  PearsonsCorrelation corrInstance=new PearsonsCorrelation(matrix);
  RealMatrix correlationMatrix=corrInstance.getCorrelationMatrix();
  double[] rData=new double[]{1.0000000000000000,0.3530791836199747,-0.6458827064572875,-0.6637888570350691,0.4636847006517939,0.3530791836199747,1.0000000000000000,-0.6865422086171366,-0.6395225189483201,0.4010950530487398,-0.6458827064572875,-0.6865422086171366,1.0000000000000000,0.6984152962884830,-0.5727418060641666,-0.6637888570350691,-0.6395225189483201,0.6984152962884830,1.0000000000000000,-0.1538589170909148,0.4636847006517939,0.4010950530487398,-0.5727418060641666,-0.1538589170909148,1.0000000000000000};
  TestUtils.assertEquals("correlation matrix",createRealMatrix(rData,5,5),correlationMatrix,10E-15);
  double[] rPvalues=new double[]{0.01491720061472623,9.45043734069043e-07,9.95151527133974e-08,3.658616965962355e-07,1.304590105694471e-06,4.811397236181847e-08,0.001028523190118147,0.005204433539191644,2.588307925380906e-05,0.301807756132683};
  RealMatrix rPMatrix=createLowerTriangularRealMatrix(rPvalues,5);
  fillUpper(rPMatrix,0d);
  TestUtils.assertEquals("correlation p values",rPMatrix,corrInstance.getCorrelationPValues(),10E-15);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
