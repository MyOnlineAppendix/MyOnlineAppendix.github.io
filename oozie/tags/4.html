<h3><span class=" glyphicon glyphicon-tag"/>&nbspUtilityVerifier</h3><kbd>Verifies (un)successful execution of the test case by reporting explicitly a failure</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.oozie.action.hadoop.TestFSPrepareActions </h4><pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testForInvalidScheme() throws Exception {
  Path actionDir=getFsTestCaseDir();
  Path newDir=new Path("hftp:/" + actionDir.toString().substring(5) + "/delete");
  String prepareXML="<prepare>" + "<delete path='" + newDir + "'/>"+ "</prepare>";
  Document doc=PrepareActionsDriver.getDocumentFromXML(prepareXML);
  Node n=doc.getDocumentElement().getChildNodes().item(0);
  try {
    JobConf conf=createJobConf();
    LauncherMapperHelper.setupLauncherURIHandlerConf(conf);
    PrepareActionsDriver.doOperations(prepareXML,conf);
    fail("Expected to catch an exception but did not encounter any");
  }
 catch (  LauncherException le) {
    Path path=new Path(n.getAttributes().getNamedItem("path").getNodeValue().trim());
    assertEquals("Scheme hftp not supported in uri " + path,le.getMessage());
  }
catch (  Exception ex) {
    fail("Expected a LauncherException but received an Exception");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.action.hadoop.TestJavaActionExecutor </h4><pre class="type-3 type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddActionShareLib() throws Exception {
  WorkflowAppService wps=Services.get().get(WorkflowAppService.class);
  Path systemLibPath=new Path(wps.getSystemLibPath(),ShareLibService.SHARE_LIB_PREFIX + new SimpleDateFormat("yyyyMMddHHmmss").format(new Date()).toString());
  Path javaShareLibPath=new Path(systemLibPath,"java");
  getFileSystem().mkdirs(javaShareLibPath);
  Path jar1Path=new Path(javaShareLibPath,"jar1.jar");
  getFileSystem().create(jar1Path).close();
  Path jar2Path=new Path(javaShareLibPath,"jar2.jar");
  getFileSystem().create(jar2Path).close();
  Path hcatShareLibPath=new Path(systemLibPath,"hcat");
  getFileSystem().mkdirs(hcatShareLibPath);
  Path jar3Path=new Path(hcatShareLibPath,"jar3.jar");
  getFileSystem().create(jar3Path).close();
  Path jar4Path=new Path(hcatShareLibPath,"jar4.jar");
  getFileSystem().create(jar4Path).close();
  Path otherShareLibPath=new Path(systemLibPath,"other");
  getFileSystem().mkdirs(otherShareLibPath);
  Path jar5Path=new Path(otherShareLibPath,"jar5.jar");
  getFileSystem().create(jar5Path).close();
  String actionXml="<java>" + "<job-tracker>" + getJobTrackerUri() + "</job-tracker>"+ "<name-node>"+ getNameNodeUri()+ "</name-node>"+ "<job-xml>job.xml</job-xml>"+ "<job-xml>job2.xml</job-xml>"+ "<main-class>MAIN-CLASS</main-class>"+ "</java>";
  Element eActionXml=XmlUtils.parseXml(actionXml);
  Context context=createContext(actionXml,null);
  Services.get().setService(ShareLibService.class);
  WorkflowJobBean workflow=(WorkflowJobBean)context.getWorkflow();
  XConfiguration wfConf=new XConfiguration();
  wfConf.set(WorkflowAppService.HADOOP_USER,getTestUser());
  wfConf.set(OozieClient.APP_PATH,new Path(getAppPath(),"workflow.xml").toString());
  wfConf.setBoolean(OozieClient.USE_SYSTEM_LIBPATH,true);
  workflow.setConf(XmlUtils.prettyPrint(wfConf).toString());
  ConfigurationService.set("oozie.action.sharelib.for.java","java,hcat");
  JavaActionExecutor ae=new JavaActionExecutor();
  Configuration jobConf=ae.createBaseHadoopConf(context,eActionXml);
  ae.setupLauncherConf(jobConf,eActionXml,getAppPath(),context);
  try {
    ae.setLibFilesArchives(context,eActionXml,getAppPath(),jobConf);
    fail();
  }
 catch (  ActionExecutorException aee) {
    assertEquals("EJ001",aee.getErrorCode());
    assertEquals("Could not locate Oozie sharelib",aee.getMessage());
  }
  Path launcherPath=new Path(systemLibPath,"oozie");
  getFileSystem().mkdirs(launcherPath);
  Path jar6Path=new Path(launcherPath,"jar6.jar");
  getFileSystem().create(jar6Path).close();
  Services.get().get(ShareLibService.class).updateShareLib();
  ae.setLibFilesArchives(context,eActionXml,getAppPath(),jobConf);
  URI[] cacheFiles=DistributedCache.getCacheFiles(jobConf);
  String cacheFilesStr=Arrays.toString(cacheFiles);
  assertTrue(cacheFilesStr.contains(jar1Path.toString()));
  assertTrue(cacheFilesStr.contains(jar2Path.toString()));
  assertTrue(cacheFilesStr.contains(jar3Path.toString()));
  assertTrue(cacheFilesStr.contains(jar4Path.toString()));
  assertFalse(cacheFilesStr.contains(jar5Path.toString()));
  assertTrue(cacheFilesStr.contains(jar6Path.toString()));
  workflow=(WorkflowJobBean)context.getWorkflow();
  wfConf=new XConfiguration();
  wfConf.set(WorkflowAppService.HADOOP_USER,getTestUser());
  wfConf.set(OozieClient.APP_PATH,new Path(getAppPath(),"workflow.xml").toString());
  wfConf.setBoolean(OozieClient.USE_SYSTEM_LIBPATH,true);
  wfConf.set("oozie.action.sharelib.for.java","other,hcat");
  workflow.setConf(XmlUtils.prettyPrint(wfConf).toString());
  ConfigurationService.set("oozie.action.sharelib.for.java","java");
  ae=new JavaActionExecutor();
  jobConf=ae.createBaseHadoopConf(context,eActionXml);
  ae.setupLauncherConf(jobConf,eActionXml,getAppPath(),context);
  ae.setLibFilesArchives(context,eActionXml,getAppPath(),jobConf);
  cacheFiles=DistributedCache.getCacheFiles(jobConf);
  cacheFilesStr=Arrays.toString(cacheFiles);
  assertFalse(cacheFilesStr.contains(jar1Path.toString()));
  assertFalse(cacheFilesStr.contains(jar2Path.toString()));
  assertTrue(cacheFilesStr.contains(jar3Path.toString()));
  assertTrue(cacheFilesStr.contains(jar4Path.toString()));
  assertTrue(cacheFilesStr.contains(jar5Path.toString()));
  assertTrue(cacheFilesStr.contains(jar6Path.toString()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.cli.TestCLIParser </h4><pre class="type-4 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
"></span><br>
@Test public void testEmptyParser() throws Exception {
  try {
    CLIParser parser=new CLIParser("oozie",new String[]{});
    CLIParser.Command c=parser.parse(new String[]{"a"});
    fail();
  }
 catch (  ParseException ex) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCommandParser() throws Exception {
  try {
    CLIParser parser=new CLIParser("oozie",new String[]{});
    parser.addCommand("a","<A>","AAAAA",new Options(),false);
    CLIParser.Command c=parser.parse(new String[]{"a","b"});
    assertEquals("a",c.getName());
    assertEquals("b",c.getCommandLine().getArgs()[0]);
  }
 catch (  ParseException ex) {
    fail();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.command.coord.TestCoordActionInputCheckXCommand </h4><pre class="type-4 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimeoutWithException() throws Exception {
  String missingDeps="nofs:///dirx/filex";
  String actionId=addInitRecords(missingDeps,null,TZ);
  try {
    new CoordActionInputCheckXCommand(actionId,actionId.substring(0,actionId.indexOf("@"))).call();
    fail();
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("No FileSystem for scheme"));
  }
  long timeOutCreationTime=System.currentTimeMillis() - (12 * 60 * 1000);
  setCoordActionCreationTime(actionId,timeOutCreationTime);
  try {
    new CoordActionInputCheckXCommand(actionId,actionId.substring(0,actionId.indexOf("@"))).call();
    fail();
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("No FileSystem for scheme"));
  }
  Thread.sleep(100);
  checkCoordAction(actionId,missingDeps,CoordinatorAction.Status.TIMEDOUT);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.command.coord.TestCoordCommandUtils </h4><pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDryRunPullDeps(){
  try {
    CoordinatorJobBean job=addRecordToCoordJobTableForWaiting("coord-job-for-matd-hcat.xml",CoordinatorJob.Status.RUNNING,false,true);
    Path appPath=new Path(getFsTestCaseDir(),"coord");
    String actionXml=getCoordActionXml(appPath,"coord-action-for-action-input-check.xml");
    CoordinatorActionBean actionBean=createCoordinatorActionBean(job);
    String testDir=getTestCaseDir();
    String missDeps=getPullMissingDependencies(testDir);
    actionBean.setMissingDependencies(missDeps);
    Element eAction=createActionElement(actionXml);
    String newactionXml=CoordCommandUtils.dryRunCoord(eAction,actionBean);
    eAction=XmlUtils.parseXml(newactionXml);
    Element configElem=eAction.getChild("action",eAction.getNamespace()).getChild("workflow",eAction.getNamespace()).getChild("configuration",eAction.getNamespace());
    List<?> elementList=configElem.getChildren("property",configElem.getNamespace());
    Element e1=(Element)elementList.get(0);
    Element e2=(Element)elementList.get(1);
    assertEquals("${coord:dataIn('A')}",e1.getChild("value",e1.getNamespace()).getValue());
    assertEquals("${coord:dataOut('LOCAL_A')}",e2.getChild("value",e2.getNamespace()).getValue());
    createDir(testDir + "/2009/29/");
    createDir(testDir + "/2009/22/");
    createDir(testDir + "/2009/15/");
    createDir(testDir + "/2009/08/");
    sleep(1000);
    newactionXml=CoordCommandUtils.dryRunCoord(eAction,actionBean);
    eAction=XmlUtils.parseXml(newactionXml);
    configElem=eAction.getChild("action",eAction.getNamespace()).getChild("workflow",eAction.getNamespace()).getChild("configuration",eAction.getNamespace());
    elementList=configElem.getChildren("property",configElem.getNamespace());
    e1=(Element)elementList.get(0);
    e2=(Element)elementList.get(1);
    assertEquals("file://,testDir/2009/29,file://,testDir/2009/22,file://,testDir/2009/15,file://,testDir/2009/08",e1.getChild("value",e1.getNamespace()).getValue());
    assertEquals("file://,testDir/2009/29",e2.getChild("value",e1.getNamespace()).getValue());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDryRunPushDependencies(){
  try {
    CoordinatorJobBean job=addRecordToCoordJobTableForWaiting("coord-job-for-action-input-check.xml",CoordinatorJob.Status.RUNNING,false,true);
    Path appPath=new Path(getFsTestCaseDir(),"coord");
    String actionXml=getCoordActionXml(appPath,"coord-action-for-action-input-check.xml");
    CoordinatorActionBean actionBean=createCoordinatorActionBean(job);
    String db="default";
    String table="tablename";
    String hcatDependency=getPushMissingDependencies(db,table);
    actionBean.setPushMissingDependencies(hcatDependency);
    Element eAction=createActionElement(actionXml);
    String newactionXml=CoordCommandUtils.dryRunCoord(eAction,actionBean);
    eAction=XmlUtils.parseXml(newactionXml);
    Element configElem=eAction.getChild("action",eAction.getNamespace()).getChild("workflow",eAction.getNamespace()).getChild("configuration",eAction.getNamespace());
    List<?> elementList=configElem.getChildren("property",configElem.getNamespace());
    Element e1=(Element)elementList.get(0);
    Element e2=(Element)elementList.get(1);
    assertEquals("${coord:dataIn('A')}",e1.getChild("value",e1.getNamespace()).getValue());
    assertEquals("${coord:dataOut('LOCAL_A')}",e2.getChild("value",e2.getNamespace()).getValue());
    populateTable(db,table);
    newactionXml=CoordCommandUtils.dryRunCoord(eAction,actionBean);
    eAction=XmlUtils.parseXml(newactionXml);
    configElem=eAction.getChild("action",eAction.getNamespace()).getChild("workflow",eAction.getNamespace()).getChild("configuration",eAction.getNamespace());
    elementList=configElem.getChildren("property",configElem.getNamespace());
    e1=(Element)elementList.get(0);
    e2=(Element)elementList.get(1);
    assertEquals("file://,testDir/2009/29,file://,testDir/2009/22,file://,testDir/2009/15,file://,testDir/2009/08",e1.getChild("value",e1.getNamespace()).getValue());
    assertEquals("file://,testDir/2009/29",e2.getChild("value",e1.getNamespace()).getValue());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDryRunPullAndPushDeps(){
  try {
    CoordinatorJobBean job=addRecordToCoordJobTableForWaiting("coord-job-for-matd-hcat.xml",CoordinatorJob.Status.RUNNING,false,true);
    Path appPath=new Path(getFsTestCaseDir(),"coord");
    String actionXml=getCoordActionXml(appPath,"coord-action-for-action-input-check.xml");
    CoordinatorActionBean actionBean=createCoordinatorActionBean(job);
    String testDir=getTestCaseDir();
    String missDeps=getPullMissingDependencies(testDir);
    actionBean.setMissingDependencies(missDeps);
    String db="default";
    String table="tablename";
    String hcatDependency=getPushMissingDependencies(db,table);
    actionBean.setPushMissingDependencies(hcatDependency);
    createDir(getTestCaseDir() + "/2009/29/");
    createDir(getTestCaseDir() + "/2009/22/");
    createDir(getTestCaseDir() + "/2009/15/");
    createDir(getTestCaseDir() + "/2009/08/");
    sleep(1000);
    Element eAction=createActionElement(actionXml);
    String newactionXml=CoordCommandUtils.dryRunCoord(eAction,actionBean);
    eAction=XmlUtils.parseXml(newactionXml);
    Element configElem=eAction.getChild("action",eAction.getNamespace()).getChild("workflow",eAction.getNamespace()).getChild("configuration",eAction.getNamespace());
    List<?> elementList=configElem.getChildren("property",configElem.getNamespace());
    Element e1=(Element)elementList.get(0);
    Element e2=(Element)elementList.get(1);
    assertEquals("${coord:dataIn('A')}",e1.getChild("value",e1.getNamespace()).getValue());
    assertEquals("${coord:dataOut('LOCAL_A')}",e2.getChild("value",e2.getNamespace()).getValue());
    populateTable(db,table);
    newactionXml=CoordCommandUtils.dryRunCoord(eAction,actionBean);
    eAction=XmlUtils.parseXml(newactionXml);
    configElem=eAction.getChild("action",eAction.getNamespace()).getChild("workflow",eAction.getNamespace()).getChild("configuration",eAction.getNamespace());
    elementList=configElem.getChildren("property",configElem.getNamespace());
    e1=(Element)elementList.get(0);
    e2=(Element)elementList.get(1);
    assertEquals("file://,testDir/2009/29,file://,testDir/2009/22,file://,testDir/2009/15,file://,testDir/2009/08",e1.getChild("value",e1.getNamespace()).getValue());
    assertEquals("file://,testDir/2009/29",e2.getChild("value",e1.getNamespace()).getValue());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCoordAbsolute() throws Exception {
  CoordinatorJobBean job=addRecordToCoordJobTableForWaiting("coord-dataset-absolute.xml",CoordinatorJob.Status.RUNNING,false,true);
  Path appPath=new Path(getFsTestCaseDir(),"coord");
  String actionXml=getCoordActionXml(appPath,"coord-dataset-absolute.xml");
  CoordinatorActionBean actionBean=createCoordinatorActionBean(job);
  Configuration jobConf=new XConfiguration(new StringReader(job.getConf()));
  Element eAction=createActionElement(actionXml);
  jobConf.set("startInstance","coord:absolute(2009-08-20T01:00Z)");
  jobConf.set("endInstance","coord:current(2)");
  String output=CoordCommandUtils.materializeOneInstance("jobId",true,eAction,DateUtils.parseDateOozieTZ("2009-08-20T01:00Z"),DateUtils.parseDateOozieTZ("2009-08-20T01:00Z"),1,jobConf,actionBean);
  eAction=XmlUtils.parseXml(output);
  List<?> elementList=((Element)eAction.getChildren("input-events",eAction.getNamespace()).get(0)).getChildren();
  Element e1=(Element)elementList.get(0);
  Element e2=(Element)elementList.get(1);
  assertEquals(e1.getChild("uris",e1.getNamespace()).getTextTrim(),"hdfs:///tmp/workflows/2009/09/03;region=us#hdfs:///tmp/workflows/2009/08/27;" + "region=us#hdfs:///tmp/workflows/2009/08/20;region=us");
  assertEquals(e2.getChild("uris",e1.getNamespace()).getTextTrim(),"hdfs:///tmp/workflows/2009/09/03;region=us#hdfs:///tmp/workflows/2009/08/27;" + "region=us#hdfs:///tmp/workflows/2009/08/20;region=us");
  jobConf.set("startInstance","coord:absolute(2009-08-20T01:00Z)");
  jobConf.set("endInstance","coord:current(2)");
  eAction=createActionElement(actionXml);
  output=CoordCommandUtils.materializeOneInstance("jobId",true,eAction,DateUtils.parseDateOozieTZ("2009-09-10T01:00Z"),DateUtils.parseDateOozieTZ("2009-09-08T01:00Z"),1,jobConf,actionBean);
  eAction=XmlUtils.parseXml(output);
  elementList=((Element)eAction.getChildren("input-events",eAction.getNamespace()).get(0)).getChildren();
  e1=(Element)elementList.get(1);
  assertEquals(e1.getChild("uris",e1.getNamespace()).getTextTrim(),"hdfs:///tmp/workflows/2009/09/24;region=us#hdfs:///tmp/workflows/2009/09/17;region=us#" + "hdfs:///tmp/workflows/2009/09/10;region=us#hdfs:///tmp/workflows/2009/09/03;region=us#" + "hdfs:///tmp/workflows/2009/08/27;region=us#hdfs:///tmp/workflows/2009/08/20;region=us");
  jobConf.set("startInstance","coord:absolute(2009-08-20T01:00Z)");
  jobConf.set("endInstance","coord:current(2)");
  eAction=createActionElement(actionXml);
  output=CoordCommandUtils.materializeOneInstance("jobId",true,eAction,DateUtils.parseDateOozieTZ("2009-08-14T01:00Z"),DateUtils.parseDateOozieTZ("2009-08-14T01:00Z"),1,jobConf,actionBean);
  eAction=XmlUtils.parseXml(output);
  elementList=((Element)eAction.getChildren("input-events",eAction.getNamespace()).get(0)).getChildren();
  e1=(Element)elementList.get(1);
  assertEquals(e1.getChild("uris",e1.getNamespace()).getTextTrim(),"hdfs:///tmp/workflows/2009/08/27;region=us#hdfs:///tmp/workflows/2009/08/20;region=us");
  try {
    jobConf.set("startInstance","coord:absolute(2009-08-27T01:00Z)");
    jobConf.set("endInstance","coord:current(2)");
    eAction=createActionElement(actionXml);
    output=CoordCommandUtils.materializeOneInstance("jobId",true,eAction,DateUtils.parseDateOozieTZ("2009-08-06T01:00Z"),DateUtils.parseDateOozieTZ("2009-08-16T01:00Z"),1,jobConf,actionBean);
    eAction=XmlUtils.parseXml(output);
    fail("Should throw exception. Start-instance > end-instance ");
  }
 catch (  Exception e) {
    assertTrue(e.getCause().getMessage().contains("start-instance should be equal or earlier than the end-instance"));
  }
  try {
    jobConf.set("startInstance","coord:absolute(2009-07-01T01:00Z)");
    jobConf.set("endInstance","coord:current(2)");
    eAction=createActionElement(actionXml);
    output=CoordCommandUtils.materializeOneInstance("jobId",true,eAction,DateUtils.parseDateOozieTZ("2009-08-06T01:00Z"),DateUtils.parseDateOozieTZ("2009-08-16T01:00Z"),1,jobConf,actionBean);
    eAction=XmlUtils.parseXml(output);
    fail("Should throw exception. Start-instance > end-instance ");
  }
 catch (  Exception e) {
    assertTrue(e.getCause().getMessage().contains("intial-instance should be equal or earlier than the start-instance"));
  }
  try {
    jobConf.set("startInstance","coord:absolute(2009-08-20T01:00Z)");
    jobConf.set("endInstance","coord:latest(2)");
    eAction=createActionElement(actionXml);
    output=CoordCommandUtils.materializeOneInstance("jobId",true,eAction,DateUtils.parseDateOozieTZ("2009-08-20T01:00Z"),DateUtils.parseDateOozieTZ("2009-08-20T01:00Z"),1,jobConf,actionBean);
    eAction=XmlUtils.parseXml(output);
    fail("Should throw exception. Start-instance is absolute and end-instance is latest");
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("Only start-instance as absolute and end-instance as current is supported"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.command.coord.TestCoordPushDependencyCheckXCommand </h4><pre class="type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequeueOnException() throws Exception {
  Services.get().getConf().setInt(RecoveryService.CONF_SERVICE_INTERVAL,6000);
  String newHCatDependency1="hcat://" + server + "/nodb/notable/dt=20120430;country=brazil";
  String newHCatDependency2="hcat://" + server + "/nodb/notable/dt=20120430;country=usa";
  String newHCatDependency=newHCatDependency1 + CoordELFunctions.INSTANCE_SEPARATOR + newHCatDependency2;
  CoordinatorJobBean job=addRecordToCoordJobTableForWaiting("coord-job-for-action-input-check.xml",CoordinatorJob.Status.RUNNING,false,true);
  CoordinatorActionBean action=addRecordToCoordActionTableForWaiting(job.getId(),1,CoordinatorAction.Status.WAITING,"coord-action-for-action-input-check.xml",null,newHCatDependency,"Z");
  String actionId=action.getId();
  checkCoordAction(actionId,newHCatDependency,CoordinatorAction.Status.WAITING);
  try {
    new CoordPushDependencyCheckXCommand(actionId,true).call();
    fail();
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("NoSuchObjectException"));
  }
  CallableQueueService callableQueueService=Services.get().get(CallableQueueService.class);
  assertEquals(0,callableQueueService.getQueueDump().size());
  new CoordActionInputCheckXCommand(actionId,job.getId()).call();
  callableQueueService=Services.get().get(CallableQueueService.class);
  assertEquals(0,callableQueueService.getQueueDump().size());
  setMissingDependencies(actionId,newHCatDependency1);
  try {
    new CoordPushDependencyCheckXCommand(actionId,true).call();
    fail();
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("NoSuchObjectException"));
  }
  final List<String> queueDump=callableQueueService.getQueueDump();
  assertEquals(1,callableQueueService.getQueueDump().size());
  assertTrue(queueDump.get(0).contains("coord_push_dep_check"));
  log.info("Queue dump is " + queueDump.toString());
  assertTrue(queueDump.get(0).matches(".* delay=(599[0-9]{3}|600000)"));
}

</code></pre>

<br>
<pre class="type-3 type-4 type-1 type-2 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimeOutWithException2() throws Exception {
  String db="default";
  String table="tablename";
  String newHCatDependency1="hcat://" + server + "/"+ db+ "/"+ table+ "/dt=20120430;country=brazil";
  String newHCatDependency2="hcat://" + server + "/"+ db+ "/"+ table+ "/dt=20120430;country=usa";
  String newHCatDependency=newHCatDependency1 + CoordELFunctions.INSTANCE_SEPARATOR + newHCatDependency2;
  populateTable(db,table);
  String actionId=addInitRecords(newHCatDependency);
  checkCoordAction(actionId,newHCatDependency,CoordinatorAction.Status.WAITING);
  new CoordPushDependencyCheckXCommand(actionId,true).call();
  checkCoordAction(actionId,newHCatDependency1,CoordinatorAction.Status.WAITING);
  PartitionDependencyManagerService pdms=Services.get().get(PartitionDependencyManagerService.class);
  HCatAccessorService hcatService=Services.get().get(HCatAccessorService.class);
  assertTrue(pdms.getWaitingActions(new HCatURI(newHCatDependency1)).contains(actionId));
  assertTrue(hcatService.isRegisteredForNotification(new HCatURI(newHCatDependency1)));
  long timeOutCreationTime=System.currentTimeMillis() - (12 * 60 * 1000);
  setCoordActionCreationTime(actionId,timeOutCreationTime);
  dropTable(db,table,true);
  try {
    new CoordPushDependencyCheckXCommand(actionId).call();
    fail();
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("NoSuchObjectException"));
  }
  Thread.sleep(100);
  checkCoordAction(actionId,newHCatDependency1,CoordinatorAction.Status.TIMEDOUT);
  assertNull(pdms.getWaitingActions(new HCatURI(newHCatDependency1)));
  assertFalse(hcatService.isRegisteredForNotification(new HCatURI(newHCatDependency1)));
}

</code></pre>

<br>
<pre class="type-4 type-1 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTimeOutWithException1() throws Exception {
  String newHCatDependency1="hcat://" + server + "/nodb/notable/dt=20120430;country=brazil";
  String newHCatDependency2="hcat://" + server + "/nodb/notable/dt=20120430;country=usa";
  String newHCatDependency=newHCatDependency1 + CoordELFunctions.INSTANCE_SEPARATOR + newHCatDependency2;
  String actionId=addInitRecords(newHCatDependency);
  checkCoordAction(actionId,newHCatDependency,CoordinatorAction.Status.WAITING);
  try {
    new CoordPushDependencyCheckXCommand(actionId,true).call();
    fail();
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("NoSuchObjectException"));
  }
  checkCoordAction(actionId,newHCatDependency,CoordinatorAction.Status.WAITING);
  PartitionDependencyManagerService pdms=Services.get().get(PartitionDependencyManagerService.class);
  HCatAccessorService hcatService=Services.get().get(HCatAccessorService.class);
  assertNull(pdms.getWaitingActions(new HCatURI(newHCatDependency1)));
  assertFalse(hcatService.isRegisteredForNotification(new HCatURI(newHCatDependency1)));
  long timeOutCreationTime=System.currentTimeMillis() - (12 * 60 * 1000);
  setCoordActionCreationTime(actionId,timeOutCreationTime);
  try {
    new CoordPushDependencyCheckXCommand(actionId).call();
    fail();
  }
 catch (  Exception e) {
    assertTrue(e.getMessage().contains("NoSuchObjectException"));
  }
  Thread.sleep(100);
  checkCoordAction(actionId,newHCatDependency,CoordinatorAction.Status.TIMEDOUT);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.coord.TestHCatELFunctions </h4><pre class="type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test HCat dataInPartitionPigFilter EL function (phase 1) which echo back
 * the EL function itself
 * @throws Exception
 */
@Test public void testdataInPartitionFilterPh1() throws Exception {
  init("coord-job-submit-data");
  String expr="${coord:dataInPartitionFilter('ABC', 'pig')}";
  eval.setVariable("oozie.dataname.ABC","data-in");
  assertEquals("${coord:dataInPartitionFilter('ABC', 'pig')}",CoordELFunctions.evalAndWrap(eval,expr));
  expr="${coord:dataInPartitionFilter('ABCD')}";
  eval.setVariable("oozie.dataname.ABCD","data-in");
  try {
    assertEquals("${coord:dataInPartitionFilter('ABCD')}",CoordELFunctions.evalAndWrap(eval,expr));
    fail("should throw exception because dataInPartitionFilter() requires 2 parameters");
  }
 catch (  Exception ex) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test HCat tableIn and tableOut EL functions (phase 1) which echo back the
 * EL function itself
 * @throws Exception
 */
@Test public void testTablePh1() throws Exception {
  init("coord-job-submit-data");
  String expr="${coord:tableIn('ABC')}";
  eval.setVariable("oozie.dataname.ABC","data-in");
  assertEquals("${coord:tableIn('ABC')}",CoordELFunctions.evalAndWrap(eval,expr));
  expr="${coord:tableIn('ABCD')}";
  try {
    assertEquals("${coord:tableIn('ABCD')}",CoordELFunctions.evalAndWrap(eval,expr));
    fail("should throw exception because Data-in ABCD is not defiend");
  }
 catch (  Exception ex) {
  }
  expr="${coord:tableOut('ABC')}";
  eval.setVariable("oozie.dataname.ABC","data-out");
  assertEquals("${coord:tableOut('ABC')}",CoordELFunctions.evalAndWrap(eval,expr));
  expr="${coord:tableOut('ABCD')}";
  try {
    assertEquals("${coord:tableOut('ABCD')}",CoordELFunctions.evalAndWrap(eval,expr));
    fail("should throw exception because Data-out ABCD is not defiend");
  }
 catch (  Exception ex) {
  }
  init("coord-sla-submit");
  expr="${coord:tableOut('ABC')}";
  eval.setVariable("oozie.dataname.ABC","data-out");
  assertEquals("${coord:tableOut('ABC')}",CoordELFunctions.evalAndWrap(eval,expr));
}

</code></pre>

<br>
<pre class="type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test HCat dataOutPartitionValue EL function (phase 1) which echo back the
 * EL function itself
 * @throws Exception
 */
@Test public void testDataOutPartitionValuePh1() throws Exception {
  init("coord-job-submit-data");
  String expr="${coord:dataOutPartitionValue('ABC', 'mypartition')}";
  eval.setVariable("oozie.dataname.ABC","data-out");
  assertEquals("${coord:dataOutPartitionValue('ABC', 'mypartition')}",CoordELFunctions.evalAndWrap(eval,expr));
  expr="${coord:dataOutPartitionValue('ABCD')}";
  eval.setVariable("oozie.dataname.ABCD","data-out");
  try {
    assertEquals("${coord:dataOutPartitionValue('ABCD')}",CoordELFunctions.evalAndWrap(eval,expr));
    fail("should throw exception because EL function requires 2 parameters");
  }
 catch (  Exception ex) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test HCat dataInPartition EL function (phase 1) which echo back the EL
 * function itself
 * @throws Exception
 */
@Test public void testDataInPartitionsPh1() throws Exception {
  init("coord-job-submit-data");
  String expr="${coord:dataInPartitions('ABC', 'hive-export')}";
  eval.setVariable("oozie.dataname.ABC","data-in");
  assertEquals("${coord:dataInPartitions('ABC', 'hive-export')}",CoordELFunctions.evalAndWrap(eval,expr));
  expr="${coord:dataInPartitions('ABCD', 'hive-export')}";
  try {
    CoordELFunctions.evalAndWrap(eval,expr);
    fail("should throw exception because Data-in is not defined");
  }
 catch (  Exception ex) {
  }
  expr="${coord:dataInPartitions('ABCD')}";
  eval.setVariable("oozie.dataname.ABCD","data-in");
  try {
    CoordELFunctions.evalAndWrap(eval,expr);
    fail("should throw exception because EL function requires 2 parameters");
  }
 catch (  Exception ex) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test HCat dataInPartitionMin EL function (phase 1) which echo back the EL
 * function itself
 * @throws Exception
 */
@Test public void testDataInPartitionMinPh1() throws Exception {
  init("coord-job-submit-data");
  String expr="${coord:dataInPartitionMin('ABC', 'mypartition')}";
  eval.setVariable("oozie.dataname.ABC","data-in");
  assertEquals("${coord:dataInPartitionMin('ABC', 'mypartition')}",CoordELFunctions.evalAndWrap(eval,expr));
  expr="${coord:dataInPartitionMin('ABCD')}";
  eval.setVariable("oozie.dataname.ABCD","data-in");
  try {
    assertEquals("${coord:dataInPartitionMin('ABCD')}",CoordELFunctions.evalAndWrap(eval,expr));
    fail("should throw exception because EL function requires 2 parameters");
  }
 catch (  Exception ex) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test HCat dataInPartitionMax EL function (phase 1) which echo back the EL
 * function itself
 * @throws Exception
 */
@Test public void testDataInPartitionMaxPh1() throws Exception {
  init("coord-job-submit-data");
  String expr="${coord:dataInPartitionMax('ABC', 'mypartition')}";
  eval.setVariable("oozie.dataname.ABC","data-in");
  assertEquals("${coord:dataInPartitionMax('ABC', 'mypartition')}",CoordELFunctions.evalAndWrap(eval,expr));
  expr="${coord:dataInPartitionMax('ABCD')}";
  eval.setVariable("oozie.dataname.ABCD","data-in");
  try {
    assertEquals("${coord:dataInPartitionMax('ABCD')}",CoordELFunctions.evalAndWrap(eval,expr));
    fail("should throw exception because EL function requires 2 parameters");
  }
 catch (  Exception ex) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test HCat databaseIn and databaseOut EL functions (phase 1) which echo
 * back the EL function itself
 * @throws Exception
 */
@Test public void testDatabasePh1() throws Exception {
  init("coord-job-submit-data");
  String expr="${coord:databaseIn('ABC')}";
  eval.setVariable("oozie.dataname.ABC","data-in");
  assertEquals("${coord:databaseIn('ABC')}",CoordELFunctions.evalAndWrap(eval,expr));
  expr="${coord:databaseIn('ABCD')}";
  try {
    assertEquals("${coord:databaseIn('ABCD')}",CoordELFunctions.evalAndWrap(eval,expr));
    fail("should throw exception because Data-in ABCD is not defiend");
  }
 catch (  Exception ex) {
  }
  expr="${coord:databaseOut('ABC')}";
  eval.setVariable("oozie.dataname.ABC","data-out");
  assertEquals("${coord:databaseOut('ABC')}",CoordELFunctions.evalAndWrap(eval,expr));
  expr="${coord:databaseOut('ABCD')}";
  try {
    assertEquals("${coord:databaseOut('ABCD')}",CoordELFunctions.evalAndWrap(eval,expr));
    fail("should throw exception because Data-out ABCD is not defiend");
  }
 catch (  Exception ex) {
  }
  init("coord-sla-submit");
  eval.setVariable("oozie.dataname.ABCD","data-out");
  assertEquals("${coord:databaseOut('ABCD')}",CoordELFunctions.evalAndWrap(eval,expr));
}

</code></pre>

<br>
<pre class="type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test HCat dataOutPartition EL function (phase 1) which echo back the EL
 * function itself
 * @throws Exception
 */
@Test public void testDataOutPartitionsPh1() throws Exception {
  init("coord-job-submit-data");
  String expr="${coord:dataOutPartitions('ABC')}";
  eval.setVariable("oozie.dataname.ABC","data-out");
  assertEquals("${coord:dataOutPartitions('ABC')}",CoordELFunctions.evalAndWrap(eval,expr));
  expr="${coord:dataOutPartitions('ABCD')}";
  try {
    assertEquals("${coord:dataOutPartitions('ABCD')}",CoordELFunctions.evalAndWrap(eval,expr));
    fail("should throw exception because Data-in is not defiend");
  }
 catch (  Exception ex) {
  }
  init("coord-sla-submit");
  eval.setVariable("oozie.dataname.ABCD","data-out");
  assertEquals("${coord:dataOutPartitions('ABCD')}",CoordELFunctions.evalAndWrap(eval,expr));
}

</code></pre>

<br>
<pre class="type-3 type-4 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test dataInPartitions EL function (phase 3) which returns the complete partition value string of a single partition
 * in case of hive-export type.
 * @throws Exception
 */
@Test public void testDataInPartitions() throws Exception {
  init("coord-action-start");
  String expr="${coord:dataInPartitions('ABC', 'hive-export')}";
  eval.setVariable(".datain.ABC","hcat://hcat.server.com:5080/mydb/clicks/datastamp=20120230;region=us");
  eval.setVariable(".datain.ABC.unresolved",Boolean.FALSE);
  String res=CoordELFunctions.evalAndWrap(eval,expr);
  assertTrue(res.equals("datastamp='20120230',region='us'") || res.equals("region='us',datastamp='20120230'"));
  try {
    expr="${coord:dataInPartitions('ABC', 'invalid-type')}";
    eval.setVariable(".datain.ABC","hcat://hcat.server.com:5080/mydb/clicks/datastamp=20120230;region=us");
    eval.setVariable(".datain.ABC.unresolved",Boolean.FALSE);
    res=CoordELFunctions.evalAndWrap(eval,expr);
    fail("EL function should throw exception because of invalid type");
  }
 catch (  Exception e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.coord.input.logic.TestCoordinatorInputLogic </h4><pre class="type-4 type-6 type-11 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=CommandException.class) public void testValidateRange() throws Exception {
  Configuration conf=getConf();
  String inputLogic="<combine name=\"test\">" + "<data-in dataset=\"A\" />" + "<data-in dataset=\"b\" />"+ "</combine>";
  String inputEvent="<data-in name=\"A\" dataset=\"a\">" + "<start-instance>${coord:current(-5)}</start-instance>" + "<end-instance>${coord:current(0)}</end-instance>"+ "</data-in>"+ "<data-in name=\"B\" dataset=\"b\">"+ "<start-instance>${coord:current(-4)}</start-instance>"+ "<end-instance>${coord:current(0)}</end-instance>"+ "</data-in>";
  conf.set("partitionName","test");
  try {
    _testCoordSubmit("coord-inputlogic.xml",conf,inputLogic,inputEvent,true);
    fail();
  }
 catch (  CommandException e) {
    assertEquals(e.getErrorCode(),ErrorCode.E0803);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.jms.TestHCatMessageHandler </h4><pre class="type-4 type-1 type-2 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that message is processed to update the dependency map and mark
 * partition as available
 */
@Test public void testCacheUpdateByMessage(){
  try {
    String actionId1="1234465451";
    String actionId2="1234465452";
    String actionId3="1234465453";
    String actionId4="1234465454";
    HCatURI dep1=new HCatURI("hcat://hcat.server.com:5080/mydb/mytbl/dt=20120101;country=us");
    HCatURI dep2=new HCatURI("hcat://hcat.server.com:5080/mydb/mytbl/country=us;dt=20120101");
    HCatURI dep3=new HCatURI("hcat://hcat.server.com:5080/mydb/mytbl/dt=20120102;country=us");
    HCatURI dep4=new HCatURI("hcat://hcat.server.com:5080/mydb/mytbl/dt=20120102;country=us;state=CA");
    PartitionDependencyManagerService pdms=Services.get().get(PartitionDependencyManagerService.class);
    pdms.addMissingDependency(dep1,actionId1);
    pdms.addMissingDependency(dep2,actionId2);
    pdms.addMissingDependency(dep3,actionId3);
    pdms.addMissingDependency(dep4,actionId4);
    assertTrue(pdms.getWaitingActions(dep1).contains(actionId1));
    assertTrue(pdms.getWaitingActions(dep2).contains(actionId2));
    assertTrue(pdms.getWaitingActions(dep3).contains(actionId3));
    assertTrue(pdms.getWaitingActions(dep4).contains(actionId4));
    List<Map<String,String>> partitionsList=new ArrayList<Map<String,String>>();
    partitionsList.add(getPartitionMap("dt=20120101;country=us;state=CA"));
    partitionsList.add(getPartitionMap("dt=20120101;country=us;state=NY"));
    JSONAddPartitionMessage jsonMsg=new JSONAddPartitionMessage("thrift://" + dep1.getServer(),"",dep1.getDb(),dep1.getTable(),partitionsList,System.currentTimeMillis());
    Message msg=session.createTextMessage(jsonMsg.toString());
    msg.setStringProperty(HCatConstants.HCAT_EVENT,HCatEventMessage.EventType.ADD_PARTITION.toString());
    HCatMessageHandler hcatHandler=new HCatMessageHandler("hcat.server.com:5080");
    hcatHandler.process(msg);
    assertNull(pdms.getWaitingActions(dep1));
    assertNull(pdms.getWaitingActions(dep2));
    assertTrue(pdms.getWaitingActions(dep3).contains(actionId3));
    assertTrue(pdms.getWaitingActions(dep4).contains(actionId4));
    partitionsList.clear();
    partitionsList.add(getPartitionMap("dt=20120102;country=us;state=CA"));
    partitionsList.add(getPartitionMap("dt=20120102;country=us;state=NY"));
    jsonMsg=new JSONAddPartitionMessage("thrift://" + dep1.getServer(),"",dep1.getDb(),dep1.getTable(),partitionsList,System.currentTimeMillis());
    msg=session.createTextMessage(jsonMsg.toString());
    msg.setStringProperty(HCatConstants.HCAT_EVENT,HCatEventMessage.EventType.ADD_PARTITION.toString());
    HCatAccessorService hcatService=Services.get().get(HCatAccessorService.class);
    hcatService.registerForNotification(dep1,"hcat.topic1",hcatHandler);
    Topic topic=session.createTopic("hcat.topic1");
    MessageProducer producer=session.createProducer(topic);
    producer.send(msg);
    Thread.sleep(500);
    assertNull(pdms.getWaitingActions(dep3));
    assertNull(pdms.getWaitingActions(dep4));
    assertTrue(pdms.getAvailableDependencyURIs(actionId1).contains(dep1.getURI().toString()));
    assertTrue(pdms.getAvailableDependencyURIs(actionId2).contains(dep2.getURI().toString()));
    assertTrue(pdms.getAvailableDependencyURIs(actionId3).contains(dep3.getURI().toString()));
    assertTrue(pdms.getAvailableDependencyURIs(actionId4).contains(dep4.getURI().toString()));
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Exception: " + e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.jms.TestJMSJobEventListener </h4><pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWorkflowJobSelectorsOr(){
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.FAILED,"user1","wf-app-name1",new Date(),new Date());
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    String selector=JMSHeaderConstants.USER + "='Non_matching_user' OR " + JMSHeaderConstants.APP_NAME+ "='wf-app-name1'";
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe),selector);
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    WorkflowJobMessage wfFailMessage=JMSMessagingUtils.getEventMessage(message);
    Assert.assertEquals(WorkflowJob.Status.FAILED,wfFailMessage.getStatus());
    assertEquals("user1",wfFailMessage.getUser());
    assertEquals(MessageType.JOB,wfFailMessage.getMessageType());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnWorkflowJobSuccessEvent() throws ParseException {
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date endDate=new Date();
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.SUCCEEDED,"user1","wf-app-name1",startDate,endDate);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe));
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    WorkflowJobMessage wfSuccMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(WorkflowJob.Status.SUCCEEDED,wfSuccMessage.getStatus());
    assertEquals(startDate,wfSuccMessage.getStartTime());
    assertEquals(endDate,wfSuccMessage.getEndTime());
    assertEquals("wfId1",wfSuccMessage.getId());
    assertEquals("caId1",wfSuccMessage.getParentId());
    assertEquals(MessageType.JOB,wfSuccMessage.getMessageType());
    assertEquals(AppType.WORKFLOW_JOB,wfSuccMessage.getAppType());
    assertEquals(EventStatus.SUCCESS,wfSuccMessage.getEventStatus());
    assertEquals("user1",wfSuccMessage.getUser());
    assertEquals("wf-app-name1",wfSuccMessage.getAppName());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-1 type-2 type-8 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnWorkflowJobSuspendEvent() throws ParseException {
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.SUSPENDED,"user1","wf-app-name1",startDate,null);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe));
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertFalse(message.getText().contains("endTime"));
    WorkflowJobMessage wfFailMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(WorkflowJob.Status.SUSPENDED,wfFailMessage.getStatus());
    assertEquals(startDate,wfFailMessage.getStartTime());
    assertEquals("wfId1",wfFailMessage.getId());
    assertEquals("caId1",wfFailMessage.getParentId());
    assertEquals(MessageType.JOB,wfFailMessage.getMessageType());
    assertEquals(AppType.WORKFLOW_JOB,wfFailMessage.getAppType());
    assertEquals(EventStatus.SUSPEND,wfFailMessage.getEventStatus());
    assertEquals("user1",wfFailMessage.getUser());
    assertEquals("wf-app-name1",wfFailMessage.getAppName());
    assertNull(wfFailMessage.getErrorCode());
    assertNull(wfFailMessage.getErrorMessage());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectionDrop(){
  Random random=new Random();
  try {
    services.destroy();
    services=new Services();
    Configuration conf=services.getConf();
    conf.set(Services.CONF_SERVICE_EXT_CLASSES,JMSAccessorService.class.getName() + "," + JMSTopicService.class.getName());
    int randomPort=30000 + random.nextInt(10000);
    String brokerURl="tcp://localhost:" + randomPort;
    conf.set(JMSJobEventListener.JMS_CONNECTION_PROPERTIES,"java.naming.factory.initial#" + ActiveMQConnFactory + ";"+ "java.naming.provider.url#"+ brokerURl+ ";connectionFactoryNames#"+ "ConnectionFactory");
    services.init();
    JMSJobEventListener wfEventListener=new JMSJobEventListener();
    wfEventListener.init(conf);
    BrokerService broker=new BrokerService();
    broker.addConnector(brokerURl);
    broker.start();
    ConnectionContext jmsContext=getConnectionContext();
    assertNotNull(jmsContext);
    broker.stop();
    jmsContext=getConnectionContext();
    assertNull(jmsContext);
    broker=new BrokerService();
    broker.addConnector(brokerURl);
    broker.start();
    WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.FAILED,"user1","wf-app-name1",new Date(),new Date());
    jmsContext=getConnectionContext();
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe));
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertNotNull(message);
    broker.stop();
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnWorkflowJobFailureEvent() throws ParseException {
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date endDate=new Date();
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.FAILED,"user1","wf-app-name1",startDate,endDate);
  wfe.setErrorCode("dummyErrorCode");
  wfe.setErrorMessage("dummyErrorMessage");
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe));
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    WorkflowJobMessage wfFailMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(WorkflowJob.Status.FAILED,wfFailMessage.getStatus());
    assertEquals(startDate,wfFailMessage.getStartTime());
    assertEquals(endDate,wfFailMessage.getEndTime());
    assertEquals("wfId1",wfFailMessage.getId());
    assertEquals("caId1",wfFailMessage.getParentId());
    assertEquals(MessageType.JOB,wfFailMessage.getMessageType());
    assertEquals(AppType.WORKFLOW_JOB,wfFailMessage.getAppType());
    assertEquals(EventStatus.FAILURE,wfFailMessage.getEventStatus());
    assertEquals("user1",wfFailMessage.getUser());
    assertEquals("wf-app-name1",wfFailMessage.getAppName());
    assertEquals("dummyErrorCode",wfFailMessage.getErrorCode());
    assertEquals("dummyErrorMessage",wfFailMessage.getErrorMessage());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnCoordinatorActionStartEvent() throws ParseException {
  JMSJobEventListener coordEventListener=new JMSJobEventListener();
  coordEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date nominalTime=DateUtils.parseDateUTC("2011-07-11T00:00Z");
  CoordinatorActionEvent cae=new CoordinatorActionEvent("caId1","caJobId1",CoordinatorAction.Status.RUNNING,"user1","wf-app-name1",nominalTime,startDate,null);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,coordEventListener.getTopic(cae));
    coordEventListener.onCoordinatorActionEvent(cae);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertFalse(message.getText().contains("endTime"));
    assertFalse(message.getText().contains("errorCode"));
    assertFalse(message.getText().contains("errorMessage"));
    assertFalse(message.getText().contains("missingDependency"));
    CoordinatorActionMessage coordActionStartMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(CoordinatorAction.Status.RUNNING,coordActionStartMessage.getStatus());
    assertEquals(startDate,coordActionStartMessage.getStartTime());
    assertEquals("caJobId1",coordActionStartMessage.getParentId());
    assertEquals("caId1",coordActionStartMessage.getId());
    assertEquals(MessageType.JOB,coordActionStartMessage.getMessageType());
    assertEquals(AppType.COORDINATOR_ACTION,coordActionStartMessage.getAppType());
    assertEquals(EventStatus.STARTED,coordActionStartMessage.getEventStatus());
    assertEquals("user1",coordActionStartMessage.getUser());
    assertEquals("wf-app-name1",coordActionStartMessage.getAppName());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWorkflowJobSelectorsNegative(){
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.FAILED,"user1","wf-app-name1",new Date(),new Date());
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    String selector=JMSHeaderConstants.USER + "='Non_matching_user'";
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe),selector);
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertNull(message);
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWorkflowJobSelectorsAnd(){
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.FAILED,"user1","wf-app-name1",new Date(),new Date());
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    String selector=JMSHeaderConstants.EVENT_STATUS + "='FAILURE' AND " + JMSHeaderConstants.APP_TYPE+ "='WORKFLOW_JOB' AND "+ JMSHeaderConstants.MESSAGE_TYPE+ "='JOB'";
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe),selector);
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    WorkflowJobMessage wfFailMessage=JMSMessagingUtils.getEventMessage(message);
    Assert.assertEquals(WorkflowJob.Status.FAILED,wfFailMessage.getStatus());
    assertEquals("user1",wfFailMessage.getUser());
    assertEquals(MessageType.JOB,wfFailMessage.getMessageType());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCoordinatorActionSelectors() throws ParseException {
  JMSJobEventListener coordEventListener=new JMSJobEventListener();
  coordEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date nominalTime=DateUtils.parseDateUTC("2011-07-11T00:00Z");
  CoordinatorActionEvent cae=new CoordinatorActionEvent("caId1","caJobId1",CoordinatorAction.Status.FAILED,"user1","wf-app-name1",nominalTime,startDate,null);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    String selector=JMSHeaderConstants.USER + "='user1'";
    MessageConsumer consumer=jmsContext.createConsumer(session,coordEventListener.getTopic(cae),selector);
    coordEventListener.onCoordinatorActionEvent(cae);
    TextMessage message=(TextMessage)consumer.receive(5000);
    CoordinatorActionMessage coordActionFailMessage=JMSMessagingUtils.getEventMessage(message);
    Assert.assertEquals(CoordinatorAction.Status.FAILED,coordActionFailMessage.getStatus());
    assertEquals("user1",coordActionFailMessage.getUser());
    assertEquals(MessageType.JOB,coordActionFailMessage.getMessageType());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWorkflowJobSelectors() throws ParseException {
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.FAILED,"user_1","wf-app-name1",new Date(),new Date());
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    String selector=JMSHeaderConstants.USER + "='user_1'";
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe),selector);
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    WorkflowJobMessage wfFailMessage=JMSMessagingUtils.getEventMessage(message);
    Assert.assertEquals(WorkflowJob.Status.FAILED,wfFailMessage.getStatus());
    assertEquals("user_1",wfFailMessage.getUser());
    assertEquals(MessageType.JOB,wfFailMessage.getMessageType());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnWorkflowJobStartedEvent() throws ParseException {
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.RUNNING,"user1","wf-app-name1",startDate,null);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe));
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertFalse(message.getText().contains("endTime"));
    WorkflowJobMessage wfStartMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(WorkflowJob.Status.RUNNING,wfStartMessage.getStatus());
    assertEquals(startDate,wfStartMessage.getStartTime());
    assertEquals("wfId1",wfStartMessage.getId());
    assertEquals("caId1",wfStartMessage.getParentId());
    assertEquals(MessageType.JOB,wfStartMessage.getMessageType());
    assertEquals(AppType.WORKFLOW_JOB,wfStartMessage.getAppType());
    assertEquals(EventStatus.STARTED,wfStartMessage.getEventStatus());
    assertEquals("user1",wfStartMessage.getUser());
    assertEquals("wf-app-name1",wfStartMessage.getAppName());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnCoordinatorJobSuccessEvent() throws ParseException {
  JMSJobEventListener coordEventListener=new JMSJobEventListener();
  coordEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date nominalTime=DateUtils.parseDateUTC("2011-07-11T00:00Z");
  Date endDate=new Date();
  CoordinatorActionEvent cae=new CoordinatorActionEvent("caId1","caJobId1",CoordinatorAction.Status.SUCCEEDED,"user1","wf-app-name1",nominalTime,startDate,null);
  cae.setEndTime(endDate);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,coordEventListener.getTopic(cae));
    coordEventListener.onCoordinatorActionEvent(cae);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertFalse(message.getText().contains("errorCode"));
    assertFalse(message.getText().contains("errorMessage"));
    assertFalse(message.getText().contains("missingDependency"));
    CoordinatorActionMessage coordActionSuccessMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(CoordinatorAction.Status.SUCCEEDED,coordActionSuccessMessage.getStatus());
    assertEquals(startDate,coordActionSuccessMessage.getStartTime());
    assertEquals(endDate,coordActionSuccessMessage.getEndTime());
    assertEquals("caJobId1",coordActionSuccessMessage.getParentId());
    assertEquals("caId1",coordActionSuccessMessage.getId());
    assertEquals(MessageType.JOB,coordActionSuccessMessage.getMessageType());
    assertEquals(AppType.COORDINATOR_ACTION,coordActionSuccessMessage.getAppType());
    assertEquals(EventStatus.SUCCESS,coordActionSuccessMessage.getEventStatus());
    assertEquals("user1",coordActionSuccessMessage.getUser());
    assertEquals("wf-app-name1",coordActionSuccessMessage.getAppName());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCoordinatorActionSelectorsNegative() throws ParseException {
  JMSJobEventListener coordEventListener=new JMSJobEventListener();
  coordEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date nominalTime=DateUtils.parseDateUTC("2011-07-11T00:00Z");
  CoordinatorActionEvent cae=new CoordinatorActionEvent("caId1","caJobId1",CoordinatorAction.Status.FAILED,"user1","wf-app-name1",nominalTime,startDate,null);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    String selector=JMSHeaderConstants.USER + "='Non_matching_user'";
    MessageConsumer consumer=jmsContext.createConsumer(session,coordEventListener.getTopic(cae),selector);
    coordEventListener.onCoordinatorActionEvent(cae);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertNull(message);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnCoordinatorActionWaitingEvent() throws ParseException {
  JMSJobEventListener wfEventListner=new JMSJobEventListener();
  wfEventListner.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date nominalTime=DateUtils.parseDateUTC("2011-07-11T00:00Z");
  CoordinatorActionEvent cae=new CoordinatorActionEvent("caId1","caJobId1",CoordinatorAction.Status.WAITING,"user1","wf-app-name1",nominalTime,startDate,"missingDep1");
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListner.getTopic(cae));
    wfEventListner.onCoordinatorActionEvent(cae);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertFalse(message.getText().contains("endTime"));
    assertFalse(message.getText().contains("errorCode"));
    assertFalse(message.getText().contains("errorMessage"));
    CoordinatorActionMessage coordActionWaitingMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(CoordinatorAction.Status.WAITING,coordActionWaitingMessage.getStatus());
    assertEquals(startDate,coordActionWaitingMessage.getStartTime());
    assertEquals(nominalTime,coordActionWaitingMessage.getNominalTime());
    assertEquals("caJobId1",coordActionWaitingMessage.getParentId());
    assertEquals("caId1",coordActionWaitingMessage.getId());
    assertEquals(MessageType.JOB,coordActionWaitingMessage.getMessageType());
    assertEquals(AppType.COORDINATOR_ACTION,coordActionWaitingMessage.getAppType());
    assertEquals(EventStatus.WAITING,coordActionWaitingMessage.getEventStatus());
    assertEquals("user1",coordActionWaitingMessage.getUser());
    assertEquals("wf-app-name1",coordActionWaitingMessage.getAppName());
    assertEquals("missingDep1",coordActionWaitingMessage.getMissingDependency());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-3 type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnCoordinatorJobFailureEvent() throws ParseException {
  JMSJobEventListener coordEventListener=new JMSJobEventListener();
  coordEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date nominalTime=DateUtils.parseDateUTC("2011-07-11T00:00Z");
  Date endDate=new Date();
  CoordinatorActionEvent cae=new CoordinatorActionEvent("caId1","caJobId1",CoordinatorAction.Status.FAILED,"user1","wf-app-name1",nominalTime,startDate,null);
  cae.setEndTime(endDate);
  cae.setErrorCode("E0101");
  cae.setErrorMessage("dummyError");
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,coordEventListener.getTopic(cae));
    coordEventListener.onCoordinatorActionEvent(cae);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertFalse(message.getText().contains("missingDependency"));
    CoordinatorActionMessage coordActionFailMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(CoordinatorAction.Status.FAILED,coordActionFailMessage.getStatus());
    assertEquals(startDate,coordActionFailMessage.getStartTime());
    assertEquals(endDate,coordActionFailMessage.getEndTime());
    assertEquals("caJobId1",coordActionFailMessage.getParentId());
    assertEquals("caId1",coordActionFailMessage.getId());
    assertEquals(MessageType.JOB,coordActionFailMessage.getMessageType());
    assertEquals(AppType.COORDINATOR_ACTION,coordActionFailMessage.getAppType());
    assertEquals(EventStatus.FAILURE,coordActionFailMessage.getEventStatus());
    assertEquals("user1",coordActionFailMessage.getUser());
    assertEquals("wf-app-name1",coordActionFailMessage.getAppName());
    assertEquals("E0101",coordActionFailMessage.getErrorCode());
    assertEquals("dummyError",coordActionFailMessage.getErrorMessage());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.service.TestJMSAccessorService </h4><pre class="type-4 type-2 type-8 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnRegisterTopic(){
  try {
    HCatAccessorService hcatService=services.get(HCatAccessorService.class);
    JMSAccessorService jmsService=services.get(JMSAccessorService.class);
    String server="hcat.server.com:5080";
    String topic="hcatalog.mydb.mytable";
    JMSConnectionInfo connInfo=hcatService.getJMSConnectionInfo(new URI("hcat://hcat.server.com:8020"));
    jmsService.registerForNotification(connInfo,topic,new HCatMessageHandler(server));
    MessageReceiver receiver1=jmsService.getMessageReceiver(connInfo,topic);
    assertNotNull(receiver1);
    jmsService.unregisterFromNotification(connInfo,topic);
    receiver1=jmsService.getMessageReceiver(connInfo,topic);
    assertEquals(null,receiver1);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Exception encountered : " + e);
  }
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectionRetryExceptionListener() throws Exception {
  services.destroy();
  services=super.setupServicesForHCatalog();
  int randomPort=30000 + random.nextInt(10000);
  String brokerURL="tcp://localhost:" + randomPort;
  String jndiPropertiesString="java.naming.factory.initial#" + ActiveMQConnFactory + ";"+ "java.naming.provider.url#"+ brokerURL+ ";"+ "connectionFactoryNames#"+ "ConnectionFactory";
  Configuration servicesConf=services.getConf();
  servicesConf.set(JMSAccessorService.CONF_RETRY_INITIAL_DELAY,"1");
  servicesConf.set(JMSAccessorService.CONF_RETRY_MAX_ATTEMPTS,"3");
  servicesConf.set(HCatAccessorService.JMS_CONNECTIONS_PROPERTIES,"default=" + jndiPropertiesString);
  services.init();
  HCatAccessorService hcatService=Services.get().get(HCatAccessorService.class);
  JMSAccessorService jmsService=Services.get().get(JMSAccessorService.class);
  String publisherAuthority="hcat.server.com:5080";
  String topic="topic.topic1";
  BrokerService broker=new BrokerService();
  broker.addConnector(brokerURL);
  broker.start();
  JMSConnectionInfo connInfo=hcatService.getJMSConnectionInfo(new URI("hcat://hcat.server.com:8020"));
  jmsService.registerForNotification(connInfo,topic,new HCatMessageHandler(publisherAuthority));
  assertTrue(jmsService.isListeningToTopic(connInfo,topic));
  assertFalse(jmsService.isConnectionInRetryList(connInfo));
  assertFalse(jmsService.isTopicInRetryList(connInfo,topic));
  ConnectionContext connCtxt=jmsService.createConnectionContext(connInfo);
  broker.stop();
  try {
    connCtxt.createSession(Session.AUTO_ACKNOWLEDGE);
    fail("Exception expected");
  }
 catch (  Exception e) {
    Thread.sleep(100);
    assertFalse(jmsService.isListeningToTopic(connInfo,topic));
    assertTrue(jmsService.isConnectionInRetryList(connInfo));
    assertTrue(jmsService.isTopicInRetryList(connInfo,topic));
  }
  broker=new BrokerService();
  broker.addConnector(brokerURL);
  broker.start();
  Thread.sleep(1000);
  assertTrue(jmsService.isListeningToTopic(connInfo,topic));
  assertFalse(jmsService.isConnectionInRetryList(connInfo));
  assertFalse(jmsService.isTopicInRetryList(connInfo,topic));
  broker.stop();
  jmsService.destroy();
}

</code></pre>

<br>
<pre class="type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectionContext() throws ServiceException {
  try {
    services.destroy();
    services=super.setupServicesForHCatalog();
    Configuration conf=services.getConf();
    String jmsURL="hcat://${1}.${2}.server.com:8020=java.naming.factory.initial#" + "org.apache.activemq.jndi.ActiveMQInitialContextFactory" + ";java.naming.provider.url#vm://localhost?broker.persistent=false;"+ "connectionFactoryNames#dynamicFactories/hcat.prod.${1}";
    conf.set(HCatAccessorService.JMS_CONNECTIONS_PROPERTIES,jmsURL);
    services.init();
    HCatAccessorService hcatService=services.get(HCatAccessorService.class);
    JMSConnectionInfo connInfo=hcatService.getJMSConnectionInfo(new URI("hcat://hcatserver.blue.server.com:8020"));
    assertEquals("java.naming.factory.initial#org.apache.activemq.jndi.ActiveMQInitialContextFactory;java.naming.provider.url#" + "vm://localhost?broker.persistent=false;connectionFactoryNames#dynamicFactories/hcat.prod.hcatserver",connInfo.getJNDIPropertiesString());
    ConnectionContext ctx1=new DefaultConnectionContext();
    ctx1.createConnection(connInfo.getJNDIProperties());
    BrokerService broker=new BrokerService();
    broker.stop();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Unexpected exception " + e);
  }
}

</code></pre>

<br>
<pre class="type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegisterSingleConsumerPerTopic(){
  try {
    HCatAccessorService hcatService=services.get(HCatAccessorService.class);
    JMSAccessorService jmsService=services.get(JMSAccessorService.class);
    String server="hcat.server.com:5080";
    String topic="hcat.mydb.mytable";
    JMSConnectionInfo connInfo=hcatService.getJMSConnectionInfo(new URI("hcat://hcat.server.com:8020"));
    jmsService.registerForNotification(connInfo,topic,new HCatMessageHandler(server));
    MessageReceiver receiver1=jmsService.getMessageReceiver(connInfo,topic);
    jmsService.registerForNotification(connInfo,topic,new HCatMessageHandler(server));
    MessageReceiver receiver2=jmsService.getMessageReceiver(connInfo,topic);
    assertEquals(receiver1,receiver2);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Exception encountered : " + e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.service.TestJMSTopicService </h4><pre class="type-4 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIncorrectConfigurationDefault(){
  try {
    services=setupServicesForTopic();
    services.getConf().set(JMSTopicService.TOPIC_NAME,"default=" + "invalidvalue");
    services.init();
    fail("Expected Service Exception");
  }
 catch (  ServiceException se) {
    assertTrue(se.getMessage().contains("not allowed in default"));
  }
}

</code></pre>

<br>
<pre class="type-4 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIncorrectConfigurationJobType(){
  try {
    services=setupServicesForTopic();
    services.getConf().set(JMSTopicService.TOPIC_NAME,"InvalidJobType" + " = workflow," + JMSTopicService.JobType.COORDINATOR.getValue() + "=coord");
    services.init();
    fail("Expected Service Exception");
  }
 catch (  ServiceException se) {
    assertTrue(se.getMessage().contains("Incorrect job type"));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.service.TestShareLibService </h4><pre class="type-4 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testfailFast() throws Exception {
  services=new Services();
  setSystemProps();
  Configuration conf=services.get(ConfigurationService.class).getConf();
  conf.set(ShareLibService.FAIL_FAST_ON_STARTUP,"true");
  conf.set(ShareLibService.SHARELIB_MAPPING_FILE,String.valueOf(new Date().getTime()));
  try {
    services.init();
    fail("Should throw exception");
  }
 catch (  Throwable e) {
    assertTrue(e.getMessage().contains("E0104: Could not fully initialize service"));
  }
 finally {
    services.destroy();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.sla.TestSLACalculationJPAExecutor </h4><pre class="type-3 type-4 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test inserts and updates rollback
 * @throws Exception
 */
@Test public void testRollback() throws Exception {
  JPAService jpaService=Services.get().get(JPAService.class);
  assertNotNull(jpaService);
  String wfId1="workflow-1";
  String wfId2="workflow-2";
  SLASummaryBean bean1=_createSLASummaryBean(wfId1,"RUNNING",EventStatus.START_MISS,new Date(),new Date(),1000,null,null,2000,0,null);
  List<JsonBean> list=new ArrayList<JsonBean>();
  list.add(bean1);
  BatchQueryExecutor.getInstance().executeBatchInsertUpdateDelete(list,null,null);
  Date newDate=new Date();
  bean1=new SLASummaryBean();
  bean1.setId(wfId1);
  bean1.setActualEnd(newDate);
  List<UpdateEntry> updateList=new ArrayList<UpdateEntry>();
  updateList.add(new UpdateEntry<SLASummaryQuery>(SLASummaryQuery.UPDATE_SLA_SUMMARY_ALL,bean1));
  SLASummaryBean bean2=_createSLASummaryBean(wfId2,"RUNNING",EventStatus.END_MISS,new Date(),new Date(),1000,null,null,2000,0,null);
  List<JsonBean> insertList=new ArrayList<JsonBean>();
  insertList.add(bean2);
  setSystemProperty(FaultInjection.FAULT_INJECTION,"true");
  setSystemProperty(SkipCommitFaultInjection.ACTION_FAILOVER_FAULT_INJECTION,"true");
  try {
    BatchQueryExecutor.getInstance().executeBatchInsertUpdateDelete(insertList,updateList,null);
    fail("Expected exception due to commit failure but didn't get any");
  }
 catch (  Exception e) {
  }
  FaultInjection.deactivate("org.apache.oozie.command.SkipCommitFaultInjection");
  SLASummaryBean sBean=SLASummaryQueryExecutor.getInstance().get(SLASummaryQuery.GET_SLA_SUMMARY,wfId1);
  assertNull(sBean.getActualEnd());
  sBean=SLASummaryQueryExecutor.getInstance().get(SLASummaryQuery.GET_SLA_SUMMARY,wfId2);
  assertNull(sBean);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.sla.TestSLAEventGeneration </h4><pre class="type-13 type-4 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
"></span><br>
/** 
 * Test coord rerun with no SLA config works as before
 * @throws Exception
 */
@Test public void testCoordRerunNoSLA() throws Exception {
  CoordinatorJobBean job=this.addRecordToCoordJobTable(CoordinatorJob.Status.SUCCEEDED,false,false);
  addRecordToCoordActionTable(job.getId(),1,CoordinatorAction.Status.FAILED,"coord-rerun-action1.xml",0);
  try {
    new CoordRerunXCommand(job.getId(),RestConstants.JOB_COORD_SCOPE_DATE,"2009-12-15T01:00Z",false,true,false,null).call();
  }
 catch (  CommandException ce) {
    if (ce.getErrorCode() == ErrorCode.E0604) {
      fail("Coord Rerun with no SLA should not throw " + ce.getMessage() + " exception");
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.oozie.util.TestHCatURI </h4><pre class="type-4 type-1 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testToFilter(){
  String hcatURI="hcat://hcat.server.com:5080/mydb/clicks/datastamp=20120230;region=us";
  String filter="";
  try {
    filter=new HCatURI(hcatURI).toPartitionFilter("java");
  }
 catch (  URISyntaxException e) {
    fail(e.getMessage());
  }
  assertTrue(filter.equals("(datastamp='20120230' AND region='us')") || filter.equals("(region='us' AND datastamp='20120230')"));
}

</code></pre>

<br>
<pre class="type-4 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEqualsPositive(){
  HCatURI uri1=null;
  HCatURI uri2=null;
  try {
    uri1=new HCatURI("hcat://hcat.server.com:5080/mydb/clicks/datastamp=12;region=us;timestamp=1201");
    uri2=new HCatURI("hcat://hcat.server.com:5080/mydb/clicks/datastamp=12;region=us;timestamp=1201");
  }
 catch (  URISyntaxException e) {
    fail(e.getMessage());
  }
  assertEquals(uri1,uri2);
}

</code></pre>

<br>
<pre class="type-4 type-1 type-2 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEqualsNegative(){
  HCatURI uri1=null;
  HCatURI uri2=null;
  HCatURI uri3=null;
  HCatURI uri4=null;
  HCatURI uri5=null;
  try {
    uri1=new HCatURI("hcat://hcat.server.com:5080/mydb/clicks/datastamp=12;region=us;timestamp=1201");
    uri2=new HCatURI("hcat://hcat.server.com:5080/mydb2/clicks/region=us;timestamp=1201;datastamp=12");
    uri3=new HCatURI("hcat://hcat.server.com:5080/mydb/clicks2/region=us;timestamp=1201;datastamp=12");
    uri4=new HCatURI("hcat://hcat.server.com:5080/mydb/clicks/region=uk;timestamp=1201;datastamp=12");
    uri5=new HCatURI("hcat://hcat.server.com:5080/mydb/clicks/region=us;timestamp=1201");
  }
 catch (  URISyntaxException e) {
    fail(e.getMessage());
  }
  assertFalse(uri1.equals(uri2));
  assertFalse(uri2.equals(uri1));
  assertFalse(uri1.equals(uri3));
  assertFalse(uri3.equals(uri1));
  assertFalse(uri1.equals(uri4));
  assertFalse(uri4.equals(uri1));
  assertFalse(uri1.equals(uri5));
  assertFalse(uri5.equals(uri1));
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
