<h3 style="margin:0px">Class: org.apache.oozie.jms.TestJMSJobEventListener (17 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(15)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(15)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(15)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(12)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(12)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(4)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Releases resources used by the test cases"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >TestCleaner&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWorkflowJobSelectorsOr(){
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.FAILED,"user1","wf-app-name1",new Date(),new Date());
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    String selector=JMSHeaderConstants.USER + "='Non_matching_user' OR " + JMSHeaderConstants.APP_NAME+ "='wf-app-name1'";
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe),selector);
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    WorkflowJobMessage wfFailMessage=JMSMessagingUtils.getEventMessage(message);
    Assert.assertEquals(WorkflowJob.Status.FAILED,wfFailMessage.getStatus());
    assertEquals("user1",wfFailMessage.getUser());
    assertEquals(MessageType.JOB,wfFailMessage.getMessageType());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnWorkflowJobSuccessEvent() throws ParseException {
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date endDate=new Date();
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.SUCCEEDED,"user1","wf-app-name1",startDate,endDate);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe));
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    WorkflowJobMessage wfSuccMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(WorkflowJob.Status.SUCCEEDED,wfSuccMessage.getStatus());
    assertEquals(startDate,wfSuccMessage.getStartTime());
    assertEquals(endDate,wfSuccMessage.getEndTime());
    assertEquals("wfId1",wfSuccMessage.getId());
    assertEquals("caId1",wfSuccMessage.getParentId());
    assertEquals(MessageType.JOB,wfSuccMessage.getMessageType());
    assertEquals(AppType.WORKFLOW_JOB,wfSuccMessage.getAppType());
    assertEquals(EventStatus.SUCCESS,wfSuccMessage.getEventStatus());
    assertEquals("user1",wfSuccMessage.getUser());
    assertEquals("wf-app-name1",wfSuccMessage.getAppName());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-3 type-4 type-1 type-2 type-8 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnWorkflowJobSuspendEvent() throws ParseException {
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.SUSPENDED,"user1","wf-app-name1",startDate,null);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe));
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertFalse(message.getText().contains("endTime"));
    WorkflowJobMessage wfFailMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(WorkflowJob.Status.SUSPENDED,wfFailMessage.getStatus());
    assertEquals(startDate,wfFailMessage.getStartTime());
    assertEquals("wfId1",wfFailMessage.getId());
    assertEquals("caId1",wfFailMessage.getParentId());
    assertEquals(MessageType.JOB,wfFailMessage.getMessageType());
    assertEquals(AppType.WORKFLOW_JOB,wfFailMessage.getAppType());
    assertEquals(EventStatus.SUSPEND,wfFailMessage.getEventStatus());
    assertEquals("user1",wfFailMessage.getUser());
    assertEquals("wf-app-name1",wfFailMessage.getAppName());
    assertNull(wfFailMessage.getErrorCode());
    assertNull(wfFailMessage.getErrorMessage());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@After @Override protected void tearDown() throws Exception {
  services.destroy();
  super.tearDown();
}

</code></pre>

<pre class="type-4 type-2 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConnectionDrop(){
  Random random=new Random();
  try {
    services.destroy();
    services=new Services();
    Configuration conf=services.getConf();
    conf.set(Services.CONF_SERVICE_EXT_CLASSES,JMSAccessorService.class.getName() + "," + JMSTopicService.class.getName());
    int randomPort=30000 + random.nextInt(10000);
    String brokerURl="tcp://localhost:" + randomPort;
    conf.set(JMSJobEventListener.JMS_CONNECTION_PROPERTIES,"java.naming.factory.initial#" + ActiveMQConnFactory + ";"+ "java.naming.provider.url#"+ brokerURl+ ";connectionFactoryNames#"+ "ConnectionFactory");
    services.init();
    JMSJobEventListener wfEventListener=new JMSJobEventListener();
    wfEventListener.init(conf);
    BrokerService broker=new BrokerService();
    broker.addConnector(brokerURl);
    broker.start();
    ConnectionContext jmsContext=getConnectionContext();
    assertNotNull(jmsContext);
    broker.stop();
    jmsContext=getConnectionContext();
    assertNull(jmsContext);
    broker=new BrokerService();
    broker.addConnector(brokerURl);
    broker.start();
    WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.FAILED,"user1","wf-app-name1",new Date(),new Date());
    jmsContext=getConnectionContext();
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe));
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertNotNull(message);
    broker.stop();
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnWorkflowJobFailureEvent() throws ParseException {
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date endDate=new Date();
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.FAILED,"user1","wf-app-name1",startDate,endDate);
  wfe.setErrorCode("dummyErrorCode");
  wfe.setErrorMessage("dummyErrorMessage");
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe));
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    WorkflowJobMessage wfFailMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(WorkflowJob.Status.FAILED,wfFailMessage.getStatus());
    assertEquals(startDate,wfFailMessage.getStartTime());
    assertEquals(endDate,wfFailMessage.getEndTime());
    assertEquals("wfId1",wfFailMessage.getId());
    assertEquals("caId1",wfFailMessage.getParentId());
    assertEquals(MessageType.JOB,wfFailMessage.getMessageType());
    assertEquals(AppType.WORKFLOW_JOB,wfFailMessage.getAppType());
    assertEquals(EventStatus.FAILURE,wfFailMessage.getEventStatus());
    assertEquals("user1",wfFailMessage.getUser());
    assertEquals("wf-app-name1",wfFailMessage.getAppName());
    assertEquals("dummyErrorCode",wfFailMessage.getErrorCode());
    assertEquals("dummyErrorMessage",wfFailMessage.getErrorMessage());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-3 type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnCoordinatorActionStartEvent() throws ParseException {
  JMSJobEventListener coordEventListener=new JMSJobEventListener();
  coordEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date nominalTime=DateUtils.parseDateUTC("2011-07-11T00:00Z");
  CoordinatorActionEvent cae=new CoordinatorActionEvent("caId1","caJobId1",CoordinatorAction.Status.RUNNING,"user1","wf-app-name1",nominalTime,startDate,null);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,coordEventListener.getTopic(cae));
    coordEventListener.onCoordinatorActionEvent(cae);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertFalse(message.getText().contains("endTime"));
    assertFalse(message.getText().contains("errorCode"));
    assertFalse(message.getText().contains("errorMessage"));
    assertFalse(message.getText().contains("missingDependency"));
    CoordinatorActionMessage coordActionStartMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(CoordinatorAction.Status.RUNNING,coordActionStartMessage.getStatus());
    assertEquals(startDate,coordActionStartMessage.getStartTime());
    assertEquals("caJobId1",coordActionStartMessage.getParentId());
    assertEquals("caId1",coordActionStartMessage.getId());
    assertEquals(MessageType.JOB,coordActionStartMessage.getMessageType());
    assertEquals(AppType.COORDINATOR_ACTION,coordActionStartMessage.getAppType());
    assertEquals(EventStatus.STARTED,coordActionStartMessage.getEventStatus());
    assertEquals("user1",coordActionStartMessage.getUser());
    assertEquals("wf-app-name1",coordActionStartMessage.getAppName());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-4 type-2 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWorkflowJobSelectorsNegative(){
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.FAILED,"user1","wf-app-name1",new Date(),new Date());
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    String selector=JMSHeaderConstants.USER + "='Non_matching_user'";
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe),selector);
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertNull(message);
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWorkflowJobSelectorsAnd(){
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.FAILED,"user1","wf-app-name1",new Date(),new Date());
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    String selector=JMSHeaderConstants.EVENT_STATUS + "='FAILURE' AND " + JMSHeaderConstants.APP_TYPE+ "='WORKFLOW_JOB' AND "+ JMSHeaderConstants.MESSAGE_TYPE+ "='JOB'";
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe),selector);
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    WorkflowJobMessage wfFailMessage=JMSMessagingUtils.getEventMessage(message);
    Assert.assertEquals(WorkflowJob.Status.FAILED,wfFailMessage.getStatus());
    assertEquals("user1",wfFailMessage.getUser());
    assertEquals(MessageType.JOB,wfFailMessage.getMessageType());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCoordinatorActionSelectors() throws ParseException {
  JMSJobEventListener coordEventListener=new JMSJobEventListener();
  coordEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date nominalTime=DateUtils.parseDateUTC("2011-07-11T00:00Z");
  CoordinatorActionEvent cae=new CoordinatorActionEvent("caId1","caJobId1",CoordinatorAction.Status.FAILED,"user1","wf-app-name1",nominalTime,startDate,null);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    String selector=JMSHeaderConstants.USER + "='user1'";
    MessageConsumer consumer=jmsContext.createConsumer(session,coordEventListener.getTopic(cae),selector);
    coordEventListener.onCoordinatorActionEvent(cae);
    TextMessage message=(TextMessage)consumer.receive(5000);
    CoordinatorActionMessage coordActionFailMessage=JMSMessagingUtils.getEventMessage(message);
    Assert.assertEquals(CoordinatorAction.Status.FAILED,coordActionFailMessage.getStatus());
    assertEquals("user1",coordActionFailMessage.getUser());
    assertEquals(MessageType.JOB,coordActionFailMessage.getMessageType());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-3 type-4 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWorkflowJobSelectors() throws ParseException {
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.FAILED,"user_1","wf-app-name1",new Date(),new Date());
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    String selector=JMSHeaderConstants.USER + "='user_1'";
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe),selector);
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    WorkflowJobMessage wfFailMessage=JMSMessagingUtils.getEventMessage(message);
    Assert.assertEquals(WorkflowJob.Status.FAILED,wfFailMessage.getStatus());
    assertEquals("user_1",wfFailMessage.getUser());
    assertEquals(MessageType.JOB,wfFailMessage.getMessageType());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-3 type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnWorkflowJobStartedEvent() throws ParseException {
  JMSJobEventListener wfEventListener=new JMSJobEventListener();
  wfEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  WorkflowJobEvent wfe=new WorkflowJobEvent("wfId1","caId1",WorkflowJob.Status.RUNNING,"user1","wf-app-name1",startDate,null);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListener.getTopic(wfe));
    wfEventListener.onWorkflowJobEvent(wfe);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertFalse(message.getText().contains("endTime"));
    WorkflowJobMessage wfStartMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(WorkflowJob.Status.RUNNING,wfStartMessage.getStatus());
    assertEquals(startDate,wfStartMessage.getStartTime());
    assertEquals("wfId1",wfStartMessage.getId());
    assertEquals("caId1",wfStartMessage.getParentId());
    assertEquals(MessageType.JOB,wfStartMessage.getMessageType());
    assertEquals(AppType.WORKFLOW_JOB,wfStartMessage.getAppType());
    assertEquals(EventStatus.STARTED,wfStartMessage.getEventStatus());
    assertEquals("user1",wfStartMessage.getUser());
    assertEquals("wf-app-name1",wfStartMessage.getAppName());
    wfEventListener.destroy();
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-3 type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnCoordinatorJobSuccessEvent() throws ParseException {
  JMSJobEventListener coordEventListener=new JMSJobEventListener();
  coordEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date nominalTime=DateUtils.parseDateUTC("2011-07-11T00:00Z");
  Date endDate=new Date();
  CoordinatorActionEvent cae=new CoordinatorActionEvent("caId1","caJobId1",CoordinatorAction.Status.SUCCEEDED,"user1","wf-app-name1",nominalTime,startDate,null);
  cae.setEndTime(endDate);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,coordEventListener.getTopic(cae));
    coordEventListener.onCoordinatorActionEvent(cae);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertFalse(message.getText().contains("errorCode"));
    assertFalse(message.getText().contains("errorMessage"));
    assertFalse(message.getText().contains("missingDependency"));
    CoordinatorActionMessage coordActionSuccessMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(CoordinatorAction.Status.SUCCEEDED,coordActionSuccessMessage.getStatus());
    assertEquals(startDate,coordActionSuccessMessage.getStartTime());
    assertEquals(endDate,coordActionSuccessMessage.getEndTime());
    assertEquals("caJobId1",coordActionSuccessMessage.getParentId());
    assertEquals("caId1",coordActionSuccessMessage.getId());
    assertEquals(MessageType.JOB,coordActionSuccessMessage.getMessageType());
    assertEquals(AppType.COORDINATOR_ACTION,coordActionSuccessMessage.getAppType());
    assertEquals(EventStatus.SUCCESS,coordActionSuccessMessage.getEventStatus());
    assertEquals("user1",coordActionSuccessMessage.getUser());
    assertEquals("wf-app-name1",coordActionSuccessMessage.getAppName());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-4 type-2 type-8 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCoordinatorActionSelectorsNegative() throws ParseException {
  JMSJobEventListener coordEventListener=new JMSJobEventListener();
  coordEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date nominalTime=DateUtils.parseDateUTC("2011-07-11T00:00Z");
  CoordinatorActionEvent cae=new CoordinatorActionEvent("caId1","caJobId1",CoordinatorAction.Status.FAILED,"user1","wf-app-name1",nominalTime,startDate,null);
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    String selector=JMSHeaderConstants.USER + "='Non_matching_user'";
    MessageConsumer consumer=jmsContext.createConsumer(session,coordEventListener.getTopic(cae),selector);
    coordEventListener.onCoordinatorActionEvent(cae);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertNull(message);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before @Override protected void setUp() throws Exception {
  super.setUp();
  services=new Services();
  conf=services.getConf();
  conf.set(Services.CONF_SERVICE_EXT_CLASSES,JMSAccessorService.class.getName() + "," + JMSTopicService.class.getName());
  conf.set(JMSJobEventListener.JMS_CONNECTION_PROPERTIES,"java.naming.factory.initial#" + ActiveMQConnFactory + ";"+ "java.naming.provider.url#"+ localActiveMQBroker+ ";connectionFactoryNames#"+ "ConnectionFactory");
  services.init();
}

</code></pre>

<pre class="type-3 type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnCoordinatorActionWaitingEvent() throws ParseException {
  JMSJobEventListener wfEventListner=new JMSJobEventListener();
  wfEventListner.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date nominalTime=DateUtils.parseDateUTC("2011-07-11T00:00Z");
  CoordinatorActionEvent cae=new CoordinatorActionEvent("caId1","caJobId1",CoordinatorAction.Status.WAITING,"user1","wf-app-name1",nominalTime,startDate,"missingDep1");
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,wfEventListner.getTopic(cae));
    wfEventListner.onCoordinatorActionEvent(cae);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertFalse(message.getText().contains("endTime"));
    assertFalse(message.getText().contains("errorCode"));
    assertFalse(message.getText().contains("errorMessage"));
    CoordinatorActionMessage coordActionWaitingMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(CoordinatorAction.Status.WAITING,coordActionWaitingMessage.getStatus());
    assertEquals(startDate,coordActionWaitingMessage.getStartTime());
    assertEquals(nominalTime,coordActionWaitingMessage.getNominalTime());
    assertEquals("caJobId1",coordActionWaitingMessage.getParentId());
    assertEquals("caId1",coordActionWaitingMessage.getId());
    assertEquals(MessageType.JOB,coordActionWaitingMessage.getMessageType());
    assertEquals(AppType.COORDINATOR_ACTION,coordActionWaitingMessage.getAppType());
    assertEquals(EventStatus.WAITING,coordActionWaitingMessage.getEventStatus());
    assertEquals("user1",coordActionWaitingMessage.getUser());
    assertEquals("wf-app-name1",coordActionWaitingMessage.getAppName());
    assertEquals("missingDep1",coordActionWaitingMessage.getMissingDependency());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<pre class="type-3 type-4 type-1 type-2 type-6 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOnCoordinatorJobFailureEvent() throws ParseException {
  JMSJobEventListener coordEventListener=new JMSJobEventListener();
  coordEventListener.init(conf);
  Date startDate=DateUtils.parseDateUTC("2012-07-22T00:00Z");
  Date nominalTime=DateUtils.parseDateUTC("2011-07-11T00:00Z");
  Date endDate=new Date();
  CoordinatorActionEvent cae=new CoordinatorActionEvent("caId1","caJobId1",CoordinatorAction.Status.FAILED,"user1","wf-app-name1",nominalTime,startDate,null);
  cae.setEndTime(endDate);
  cae.setErrorCode("E0101");
  cae.setErrorMessage("dummyError");
  ConnectionContext jmsContext=getConnectionContext();
  try {
    Session session=jmsContext.createSession(Session.AUTO_ACKNOWLEDGE);
    MessageConsumer consumer=jmsContext.createConsumer(session,coordEventListener.getTopic(cae));
    coordEventListener.onCoordinatorActionEvent(cae);
    TextMessage message=(TextMessage)consumer.receive(5000);
    assertFalse(message.getText().contains("missingDependency"));
    CoordinatorActionMessage coordActionFailMessage=JMSMessagingUtils.getEventMessage(message);
    assertEquals(CoordinatorAction.Status.FAILED,coordActionFailMessage.getStatus());
    assertEquals(startDate,coordActionFailMessage.getStartTime());
    assertEquals(endDate,coordActionFailMessage.getEndTime());
    assertEquals("caJobId1",coordActionFailMessage.getParentId());
    assertEquals("caId1",coordActionFailMessage.getId());
    assertEquals(MessageType.JOB,coordActionFailMessage.getMessageType());
    assertEquals(AppType.COORDINATOR_ACTION,coordActionFailMessage.getAppType());
    assertEquals(EventStatus.FAILURE,coordActionFailMessage.getEventStatus());
    assertEquals("user1",coordActionFailMessage.getUser());
    assertEquals("wf-app-name1",coordActionFailMessage.getAppName());
    assertEquals("E0101",coordActionFailMessage.getErrorCode());
    assertEquals("dummyError",coordActionFailMessage.getErrorMessage());
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail(e.getMessage());
  }
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
