<h3 style="margin:0px">Class: org.apache.poi.hssf.record.common.TestUnicodeString (10 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(5)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="16"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('16')" data-toggle="tooltip" title="Verifies values related to public fields."><kbd id="tag-16"class="label-info"style="display: inline-block;font-size:7pt" >PublicFieldVerifier&nbsp;(3)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(2)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void perfectStringSize(){
  UnicodeString s=makeUnicodeString(MAX_DATA_SIZE - 2 - 1);
  confirmSize(MAX_DATA_SIZE,s);
  s=makeUnicodeString((MAX_DATA_SIZE - 2 - 1) / 2,true);
  s.setOptionFlags((byte)0x1);
  confirmSize(MAX_DATA_SIZE - 1,s);
}

</code></pre>

<pre class="type-1 type-6 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void corruptExtRstDetection() throws Exception {
  byte[] data=new byte[]{0x79,0x79,0x11,0x11,0x22,0x22,0x33,0x33};
  assertEquals(8,data.length);
  LittleEndianInputStream inp=new LittleEndianInputStream(new ByteArrayInputStream(data));
  ExtRst ext=new ExtRst(inp,data.length);
  assertEquals(ext,new ExtRst());
  assertEquals(10,ext.getDataSize());
  assertEquals(0,ext.getNumberOfRuns());
  assertEquals(0,ext.getFormattingOptions());
  assertEquals(0,ext.getFormattingFontIndex());
  assertEquals("",ext.getPhoneticText());
  assertEquals(0,ext.getPhRuns().length);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void perfectRichStringSize(){
  UnicodeString s=makeUnicodeString(MAX_DATA_SIZE - 2 - 1- 8- 2);
  s.addFormatRun(new UnicodeString.FormatRun((short)1,(short)0));
  s.addFormatRun(new UnicodeString.FormatRun((short)2,(short)1));
  s.setOptionFlags((byte)0x8);
  confirmSize(MAX_DATA_SIZE,s);
  s=makeUnicodeString((MAX_DATA_SIZE - 2 - 1- 8- 2) / 2,true);
  s.addFormatRun(new UnicodeString.FormatRun((short)1,(short)0));
  s.addFormatRun(new UnicodeString.FormatRun((short)2,(short)1));
  s.setOptionFlags((byte)0x9);
  confirmSize(MAX_DATA_SIZE - 1,s);
}

</code></pre>

<pre class="type-2 type-1 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void formatRun() throws Exception {
  FormatRun fr=new FormatRun((short)4,(short)0x15c);
  assertEquals(4,fr.getCharacterPos());
  assertEquals(0x15c,fr.getFontIndex());
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  LittleEndianOutputStream out=new LittleEndianOutputStream(baos);
  fr.serialize(out);
  byte[] b=baos.toByteArray();
  assertEquals(4,b.length);
  assertEquals(4,b[0]);
  assertEquals(0,b[1]);
  assertEquals(0x5c,b[2]);
  assertEquals(0x01,b[3]);
  LittleEndianInputStream inp=new LittleEndianInputStream(new ByteArrayInputStream(b));
  fr=new FormatRun(inp);
  assertEquals(4,fr.getCharacterPos());
  assertEquals(0x15c,fr.getFontIndex());
}

</code></pre>

<pre class="type-1 type-6 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void extRstEqualsAndHashCode(){
  byte buf[]=new byte[200];
  LittleEndianByteArrayOutputStream bos=new LittleEndianByteArrayOutputStream(buf,0);
  String str="\u1d02\u1d12\u1d22";
  bos.writeShort(1);
  bos.writeShort(5 * LittleEndianConsts.SHORT_SIZE + str.length() * 2 + 3 * LittleEndianConsts.SHORT_SIZE + 2);
  bos.writeShort(0x4711);
  bos.writeShort(0x0815);
  bos.writeShort(1);
  bos.writeShort(str.length());
  bos.writeShort(str.length());
  StringUtil.putUnicodeLE(str,bos);
  bos.writeShort(1);
  bos.writeShort(1);
  bos.writeShort(3);
  bos.writeShort(42);
  LittleEndianInput in=new LittleEndianByteArrayInputStream(buf,0,bos.getWriteIndex());
  UnicodeString.ExtRst extRst1=new UnicodeString.ExtRst(in,bos.getWriteIndex());
  in=new LittleEndianByteArrayInputStream(buf,0,bos.getWriteIndex());
  UnicodeString.ExtRst extRst2=new UnicodeString.ExtRst(in,bos.getWriteIndex());
  assertEquals(extRst1,extRst2);
  assertEquals(extRst1.hashCode(),extRst2.hashCode());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
/** 
 * Tests that a string size calculation that fits neatly in two records, the second being a continue
 */
@Test public void perfectContinuedStringSize(){
  int strSize=MAX_DATA_SIZE * 2;
  strSize-=3;
  strSize-=4;
  strSize-=1;
  UnicodeString s=makeUnicodeString(strSize);
  confirmSize(MAX_DATA_SIZE * 2,s);
}

</code></pre>

<pre class="type-1 type-6 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void extRstFromData() throws Exception {
  byte[] data=new byte[]{01,00,0x0C,00,00,00,0x37,00,00,00,00,00,00,00,00,00};
  assertEquals(16,data.length);
  LittleEndianInputStream inp=new LittleEndianInputStream(new ByteArrayInputStream(data));
  ExtRst ext=new ExtRst(inp,data.length);
  assertEquals(0x0c,ext.getDataSize());
  assertEquals(0,ext.getNumberOfRuns());
  assertEquals(0x37,ext.getFormattingOptions());
  assertEquals(0,ext.getFormattingFontIndex());
  assertEquals("",ext.getPhoneticText());
  assertEquals(0,ext.getPhRuns().length);
}

</code></pre>

<pre class="type-2 type-1 type-6 type-16 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
"></span><br>
@Test public void extRstFromEmpty() throws Exception {
  ExtRst ext=new ExtRst();
  assertEquals(0,ext.getNumberOfRuns());
  assertEquals(0,ext.getFormattingFontIndex());
  assertEquals(0,ext.getFormattingOptions());
  assertEquals("",ext.getPhoneticText());
  assertEquals(0,ext.getPhRuns().length);
  assertEquals(10,ext.getDataSize());
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  LittleEndianOutputStream out=new LittleEndianOutputStream(baos);
  ContinuableRecordOutput cout=new ContinuableRecordOutput(out,0xffff);
  ext.serialize(cout);
  cout.writeContinue();
  byte[] b=baos.toByteArray();
  assertEquals(20,b.length);
  assertEquals(-1,b[0]);
  assertEquals(-1,b[1]);
  assertEquals(14,b[2]);
  assertEquals(00,b[3]);
  assertEquals(1,b[4]);
  assertEquals(0,b[5]);
  assertEquals(10,b[6]);
  assertEquals(00,b[7]);
  assertEquals(0,b[8]);
  assertEquals(0,b[9]);
  assertEquals(0,b[10]);
  assertEquals(0,b[11]);
  assertEquals(0,b[12]);
  assertEquals(0,b[13]);
  assertEquals(0,b[14]);
  assertEquals(0,b[15]);
  assertEquals(0,b[16]);
  assertEquals(0,b[17]);
  assertEquals(ContinueRecord.sid,b[18]);
  assertEquals(0,b[19]);
  byte[] data=new byte[14];
  System.arraycopy(b,4,data,0,data.length);
  LittleEndianInputStream inp=new LittleEndianInputStream(new ByteArrayInputStream(data));
  ext=new ExtRst(inp,data.length);
  assertEquals(0,ext.getNumberOfRuns());
  assertEquals(0,ext.getFormattingFontIndex());
  assertEquals(0,ext.getFormattingOptions());
  assertEquals("",ext.getPhoneticText());
  assertEquals(0,ext.getPhRuns().length);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void smallStringSize(){
  UnicodeString s=makeUnicodeString("Test");
  confirmSize(7,s);
  s=makeUnicodeString(STR_16_BIT);
  s.setOptionFlags((byte)0x01);
  confirmSize(11,s);
  s.setString("Test");
  s.setOptionFlags((byte)0x8);
  UnicodeString.FormatRun r=new UnicodeString.FormatRun((short)0,(short)1);
  s.addFormatRun(r);
  UnicodeString.FormatRun r2=new UnicodeString.FormatRun((short)2,(short)2);
  s.addFormatRun(r2);
  confirmSize(17,s);
  s.setString(STR_16_BIT);
  s.setOptionFlags((byte)0x9);
  confirmSize(21,s);
  s.setString("Test");
  s.setOptionFlags((byte)0xC);
  confirmSize(17,s);
  s.setExtendedRst(new ExtRst());
  confirmSize(35,s);
  s.setString(STR_16_BIT);
  s.setOptionFlags((byte)0xD);
  confirmSize(39,s);
  s.setExtendedRst(null);
  confirmSize(21,s);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void continuedStringSize(){
  UnicodeString s=makeUnicodeString(MAX_DATA_SIZE - 2 - 1 + 20);
  confirmSize(MAX_DATA_SIZE + 4 + 1+ 20,s);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
