<h3><span class=" glyphicon glyphicon-tag"/>&nbspConditionMatcher</h3><kbd>Verifies logic rules using matcher-style statements</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.felix.ipojo.InstanceManagerTest </h4><pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testConcurrencyOfMethodId() throws InterruptedException, ConfigurationException, ClassNotFoundException {
  ExecutorService executor=Executors.newFixedThreadPool(CALLERS);
  final AtomicInteger counter=new AtomicInteger();
  final AtomicInteger error=new AtomicInteger();
  ComponentFactory factory=mock(ComponentFactory.class);
  when(factory.loadClass(anyString())).thenReturn(MyComponent.class);
  when(factory.getClassName()).thenReturn(MyComponent.class.getName());
  Bundle bundle=mock(Bundle.class);
  when(bundle.getHeaders()).thenReturn(new Hashtable<String,String>());
  BundleContext context=mock(BundleContext.class);
  when(context.getBundle()).thenReturn(bundle);
  InstanceManager manager=new InstanceManager(factory,context,new HandlerManager[0]);
  Element method1=new Element("method","");
  method1.addAttribute(new Attribute("name","foo"));
  method1.addAttribute(new Attribute("arguments","{java.lang.String}"));
  method1.addAttribute(new Attribute("names","{name}"));
  Element method2=new Element("method","");
  method2.addAttribute(new Attribute("name","bar"));
  method2.addAttribute(new Attribute("arguments","{java.lang.String}"));
  method2.addAttribute(new Attribute("names","{name}"));
  Element method3=new Element("method","");
  method3.addAttribute(new Attribute("name","baz"));
  method3.addAttribute(new Attribute("arguments","{java.lang.String}"));
  method3.addAttribute(new Attribute("names","{name}"));
  final MethodMetadata metadata1=new MethodMetadata(method1);
  final MethodInterceptor interceptor=new MethodInterceptor(){
    public void onEntry(    Object pojo,    Member method,    Object[] args){
      if (method != null) {
        counter.getAndIncrement();
      }
 else {
        System.out.println("No method object for " + args[0]);
        error.incrementAndGet();
      }
    }
    public void onExit(    Object pojo,    Member method,    Object returnedObj){
      if (method != null) {
        counter.getAndDecrement();
      }
 else {
        System.out.println("No method object");
        error.incrementAndGet();
      }
    }
    public void onError(    Object pojo,    Member method,    Throwable throwable){
    }
    public void onFinally(    Object pojo,    Member method){
    }
  }
;
  manager.register(metadata1,interceptor);
  final MethodMetadata metadata2=new MethodMetadata(method2);
  manager.register(metadata2,interceptor);
  final MethodMetadata metadata3=new MethodMetadata(method3);
  manager.register(metadata3,interceptor);
  MyComponent component=new MyComponent();
  manager.start();
  manager.load();
  CountDownLatch startSignal=new CountDownLatch(1);
  CountDownLatch doneSignal=new CountDownLatch(CALLERS);
  for (int i=1; i < CALLERS + 1; ++i) {
    executor.execute(new Caller(manager,component,metadata1.getMethodIdentifier(),startSignal,doneSignal,i));
    executor.execute(new Caller(manager,component,metadata2.getMethodIdentifier(),startSignal,doneSignal,i));
    executor.execute(new Caller(manager,component,metadata3.getMethodIdentifier(),startSignal,doneSignal,i));
  }
  startSignal.countDown();
  assertThat(doneSignal.await(1,TimeUnit.MINUTES)).isTrue();
  assertThat(error.get()).isEqualTo(0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.dependency.impl.DependencyPropertiesTest </h4><pre class="type-4 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDependencyCreation(){
  Dictionary<String,?> dictionary=DependencyProperties.getDependencyProperties(dependency);
  assertThat(dictionary.get("dependency.id")).isEqualTo("foo");
  assertThat(dictionary.get("dependency.specification")).isEqualTo(List.class.getName());
  assertThat(dictionary.get("bundle.symbolicName")).isEqualTo("test-bundle");
}

</code></pre>

<br>
<pre class="type-4 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void matchByDependencyId() throws InvalidSyntaxException {
  Dictionary<String,?> dictionary=DependencyProperties.getDependencyProperties(dependency);
  Filter filter=new FilterImpl("(dependency.id=foo)");
  assertThat(filter.match(dictionary));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.dependency.interceptors.TransformedServiceReferenceTest </h4><pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void list(){
  ServiceReference<List> reference=mock(ServiceReference.class);
  when(reference.getPropertyKeys()).thenReturn(new String[]{"service.id","foo"});
  when(reference.getProperty("service.id")).thenReturn(42);
  when(reference.getProperty("foo")).thenReturn("test");
  ServiceReference newReference1=new TransformedServiceReferenceImpl<List>(reference).removeProperty("foo");
  ServiceReference newReference2=new TransformedServiceReferenceImpl<List>(reference).removeProperty("foo");
  List<ServiceReference> references=new ArrayList<ServiceReference>();
  references.add(newReference1);
  assertThat(references.contains(newReference1));
  assertThat(references.contains(reference));
  assertThat(references.contains(newReference2));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void addPropertyToReference(){
  ServiceReference reference=mock(ServiceReference.class);
  when(reference.getPropertyKeys()).thenReturn(new String[]{"service.id","foo"});
  when(reference.getProperty("service.id")).thenReturn(42);
  when(reference.getProperty("foo")).thenReturn("test");
  ServiceReference newReference=new TransformedServiceReferenceImpl(reference).addProperty("location","kitchen");
  assertThat(newReference.getPropertyKeys()).contains("location");
  assertThat(newReference.getProperty("location")).isEqualTo("kitchen");
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void removePropertyToReference(){
  ServiceReference<List> reference=mock(ServiceReference.class);
  when(reference.getPropertyKeys()).thenReturn(new String[]{"service.id","foo"});
  when(reference.getProperty("service.id")).thenReturn(42l);
  when(reference.getProperty("foo")).thenReturn("test");
  ServiceReference newReference=new TransformedServiceReferenceImpl<List>(reference).removeProperty("foo");
  assertThat(newReference.getPropertyKeys()).containsOnly("service.id");
  assertThat(newReference.getProperty("foo")).isNull();
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void equals(){
  ServiceReference<List> reference=mock(ServiceReference.class);
  when(reference.getPropertyKeys()).thenReturn(new String[]{"service.id","foo"});
  when(reference.getProperty("service.id")).thenReturn((long)42);
  when(reference.getProperty("foo")).thenReturn("test");
  ServiceReference newReference1=new TransformedServiceReferenceImpl<List>(reference).removeProperty("foo");
  ServiceReference newReference2=new TransformedServiceReferenceImpl<List>(reference).removeProperty("foo");
  assertThat(newReference1).isEqualTo(newReference2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.handlers.dependency.DependencyIdentifierTest </h4><pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDependencyWithNothing(){
  Dependency dependency=Mockito.mock(Dependency.class);
  Mockito.when(dependency.getField()).thenReturn(null);
  Mockito.when(dependency.getId()).thenReturn(null);
  Mockito.when(dependency.getCallbacks()).thenReturn(null);
  Mockito.when(dependency.getSpecification()).thenReturn(null);
  String identifier=DependencyHandler.getDependencyIdentifier(dependency);
  assertThat(identifier).isEqualTo("{}");
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDependencyWithFieldAndMethod(){
  Dependency dependency=Mockito.mock(Dependency.class);
  Mockito.when(dependency.getField()).thenReturn("fs");
  Mockito.when(dependency.getId()).thenReturn(null);
  DependencyCallback[] callbacks=new DependencyCallback[2];
  callbacks[0]=Mockito.mock(DependencyCallback.class);
  Mockito.when(callbacks[0].getMethodName()).thenReturn("bindFooService");
  callbacks[1]=Mockito.mock(DependencyCallback.class);
  Mockito.when(callbacks[1].getMethodName()).thenReturn("unbindFooService");
  Mockito.when(dependency.getCallbacks()).thenReturn(callbacks);
  Mockito.when(dependency.getSpecification()).thenReturn(null);
  String identifier=DependencyHandler.getDependencyIdentifier(dependency);
  assertThat(identifier).isEqualTo("{field=fs, method=bindFooService}");
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDependencyWithCallbackOnly(){
  Dependency dependency=Mockito.mock(Dependency.class);
  Mockito.when(dependency.getField()).thenReturn(null);
  Mockito.when(dependency.getId()).thenReturn(null);
  Mockito.when(dependency.getSpecification()).thenReturn(null);
  DependencyCallback[] callbacks=new DependencyCallback[2];
  callbacks[0]=Mockito.mock(DependencyCallback.class);
  Mockito.when(callbacks[0].getMethodName()).thenReturn("bindFooService");
  callbacks[1]=Mockito.mock(DependencyCallback.class);
  Mockito.when(callbacks[1].getMethodName()).thenReturn("unbindFooService");
  Mockito.when(dependency.getCallbacks()).thenReturn(callbacks);
  String identifier=DependencyHandler.getDependencyIdentifier(dependency);
  assertThat(identifier).isEqualTo("{method=bindFooService}");
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDependencyWithAllInformation(){
  Dependency dependency=Mockito.mock(Dependency.class);
  Mockito.when(dependency.getId()).thenReturn("id1");
  Mockito.when(dependency.getField()).thenReturn("fs");
  DependencyCallback[] callbacks=new DependencyCallback[2];
  callbacks[0]=Mockito.mock(DependencyCallback.class);
  Mockito.when(callbacks[0].getMethodName()).thenReturn("bindFooService");
  callbacks[1]=Mockito.mock(DependencyCallback.class);
  Mockito.when(callbacks[1].getMethodName()).thenReturn("unbindFooService");
  Mockito.when(dependency.getCallbacks()).thenReturn(callbacks);
  Mockito.when(dependency.getSpecification()).thenReturn(List.class);
  String identifier=DependencyHandler.getDependencyIdentifier(dependency);
  assertThat(identifier).startsWith("{");
  assertThat(identifier).endsWith("}");
  assertThat(identifier).contains("id=" + "id1");
  assertThat(identifier).contains("field=" + "fs");
  assertThat(identifier).contains("specification=" + List.class.getName());
  assertThat(identifier).contains("method=" + "bindFooService");
  System.out.println(identifier);
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDependencyWithFieldOnly(){
  Dependency dependency=Mockito.mock(Dependency.class);
  Mockito.when(dependency.getField()).thenReturn("fs");
  Mockito.when(dependency.getId()).thenReturn(null);
  Mockito.when(dependency.getCallbacks()).thenReturn(null);
  Mockito.when(dependency.getSpecification()).thenReturn(null);
  String identifier=DependencyHandler.getDependencyIdentifier(dependency);
  assertThat(identifier).isEqualTo("{field=" + "fs}");
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDependencyWithIdAndField(){
  Dependency dependency=Mockito.mock(Dependency.class);
  Mockito.when(dependency.getField()).thenReturn("fs");
  Mockito.when(dependency.getId()).thenReturn("id1");
  Mockito.when(dependency.getCallbacks()).thenReturn(null);
  Mockito.when(dependency.getSpecification()).thenReturn(null);
  String identifier=DependencyHandler.getDependencyIdentifier(dependency);
  assertThat(identifier).isEqualTo("{id=id1, field=fs}");
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDependencyWithIdOnly(){
  Dependency dependency=Mockito.mock(Dependency.class);
  Mockito.when(dependency.getId()).thenReturn("id1");
  Mockito.when(dependency.getField()).thenReturn(null);
  Mockito.when(dependency.getCallbacks()).thenReturn(null);
  Mockito.when(dependency.getSpecification()).thenReturn(null);
  String identifier=DependencyHandler.getDependencyIdentifier(dependency);
  assertThat(identifier).startsWith("{");
  assertThat(identifier).endsWith("}");
  assertThat(identifier).contains("id=" + "id1");
  assertThat(identifier).isEqualTo("{id=" + "id1}");
  assertThat(identifier).doesNotContain("field");
  assertThat(identifier).doesNotContain("specification");
  assertThat(identifier).doesNotContain("method");
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDependencyWithSpecificationOnly(){
  Dependency dependency=Mockito.mock(Dependency.class);
  Mockito.when(dependency.getField()).thenReturn(null);
  Mockito.when(dependency.getId()).thenReturn(null);
  Mockito.when(dependency.getCallbacks()).thenReturn(null);
  Mockito.when(dependency.getSpecification()).thenReturn(List.class);
  String identifier=DependencyHandler.getDependencyIdentifier(dependency);
  assertThat(identifier).isEqualTo("{specification=" + List.class.getName() + "}");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.manipulation.InnerClassAdapterTest </h4><pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testThatTheClassContainsTheFlagsForTheInnerMethods() throws IOException, ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException, NoSuchFieldException {
  Manipulator manipulator=new Manipulator(this.getClass().getClassLoader());
  String className="test.inner.ComponentWithInnerClasses";
  ManipulatedClassLoader classLoader=manipulate(className,manipulator);
  Class clazz=classLoader.findClass(className);
  String flag="__M" + "MyInnerWithANativeMethod" + "___"+ "foo";
  assertThat(clazz.getDeclaredField(flag)).isNotNull();
  flag="__M" + "MyInnerClass" + "___"+ "foo";
  assertThat(clazz.getDeclaredField(flag)).isNotNull();
  flag="__M" + "1" + "___"+ "compute"+ "$java_lang_String";
  assertThat(clazz.getDeclaredField(flag)).isNotNull();
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testThatAnonymousClassDeclaredInStaticFieldsAreNotManipulated() throws Exception {
  Manipulator manipulator=new Manipulator(this.getClass().getClassLoader());
  String className="test.inner.ComponentWithInnerClasses";
  ManipulatedClassLoader classLoader=manipulate(className,manipulator);
  Class clazz=classLoader.findClass(className);
  Method method=clazz.getMethod("call");
  assertThat(method).isNotNull();
  assertThat(method.invoke(null)).isEqualTo(1);
}

</code></pre>

<br>
<pre class="type-4 type-2 type-1 type-10 type-11 type-17 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDoubleManipulation() throws IOException, ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {
  Manipulator manipulator=new Manipulator(this.getClass().getClassLoader());
  String className="test.inner.ComponentWithInnerClasses";
  ManipulatedClassLoader classloader=manipulate(className,manipulator);
  manipulator=new Manipulator(this.getClass().getClassLoader());
  classloader=manipulate(className,manipulator,classloader);
  Class clazz=classloader.findClass(className);
  Assert.assertNotNull(clazz);
  Assert.assertNotNull(manipulator.getManipulationMetadata());
  Assert.assertFalse(manipulator.getInnerClasses().isEmpty());
  assertThat(manipulator.getInnerClasses().size()).isEqualTo(3);
  InstanceManager im=Mockito.mock(InstanceManager.class);
  Constructor constructor=clazz.getDeclaredConstructor(InstanceManager.class);
  constructor.setAccessible(true);
  Object pojo=constructor.newInstance(im);
  Assert.assertNotNull(pojo);
  Assert.assertTrue(pojo instanceof Pojo);
  Method method=clazz.getMethod("doSomething",new Class[0]);
  String result=(String)method.invoke(pojo);
  assertEquals(result,"foofoofoofoo");
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testThatManipulationMetadataContainsTheInnerClasses() throws IOException, ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {
  Manipulator manipulator=new Manipulator(this.getClass().getClassLoader());
  String className="test.inner.ComponentWithInnerClasses";
  manipulate(className,manipulator);
  assertThat(manipulator.getInnerClasses().size()).isEqualTo(3);
  Element manipulation=manipulator.getManipulationMetadata();
  System.out.println(manipulation);
  Element[] inners=manipulation.getElements("inner");
  assertThat(inners.length).isEqualTo(3);
  Element inner=getInnerClassMetadataByName(inners,"MyInnerWithANativeMethod");
  assertThat(inner).isNotNull();
  assertThat(getMethodByName(inner.getElements("method"),"foo")).isNotNull();
  inner=getInnerClassMetadataByName(inners,"MyInnerClass");
  assertThat(inner).isNotNull();
  assertThat(getMethodByName(inner.getElements("method"),"foo")).isNotNull();
  inner=getInnerClassMetadataByName(inners,"1");
  assertThat(inner).isNotNull();
  assertThat(getMethodByName(inner.getElements("method"),"compute")).isNotNull();
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testThatStaticInnerClassesAreNotManipulated() throws Exception {
  Manipulator manipulator=new Manipulator(this.getClass().getClassLoader());
  String className="test.inner.ComponentWithInnerClasses";
  ManipulatedClassLoader classLoader=manipulate(className,manipulator);
  Class clazz=classLoader.findClass(className);
  Class inner=findInnerClass(clazz.getClasses(),"MyStaticInnerClass");
  assertThat(inner).isNotNull();
  Method bar=inner.getMethod("bar");
  Object o=inner.newInstance();
  bar.setAccessible(true);
  assertThat(bar).isNotNull();
  assertThat((String)bar.invoke(o)).isEqualTo("bar");
}

</code></pre>

<br>
<pre class="type-4 type-2 type-1 type-10 type-11 type-17 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInnerClasses() throws IOException, ClassNotFoundException, NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException {
  Manipulator manipulator=new Manipulator(this.getClass().getClassLoader());
  String className="test.inner.ComponentWithInnerClasses";
  ManipulatedClassLoader classloader=manipulate(className,manipulator);
  Class clazz=classloader.findClass(className);
  Assert.assertNotNull(clazz);
  Assert.assertNotNull(manipulator.getManipulationMetadata());
  Assert.assertFalse(manipulator.getInnerClasses().isEmpty());
  assertThat(manipulator.getInnerClasses().size()).isEqualTo(3);
  InstanceManager im=Mockito.mock(InstanceManager.class);
  Constructor constructor=clazz.getDeclaredConstructor(InstanceManager.class);
  constructor.setAccessible(true);
  Object pojo=constructor.newInstance(im);
  Assert.assertNotNull(pojo);
  Assert.assertTrue(pojo instanceof Pojo);
  Method method=clazz.getMethod("doSomething",new Class[0]);
  String result=(String)method.invoke(pojo);
  assertEquals(result,"foofoofoofoo");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.TestUnacceptableConfiguration </h4><pre class="type-6 type-2 type-17 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check instance name unicity.
 */
@Test public void testUnicity1(){
  Factory f=ipojoHelper.getFactory("Factories-FooProviderType-2");
  ComponentInstance ci1, ci2, ci3;
  try {
    ci1=f.createComponentInstance(null);
    ci2=f.createComponentInstance(null);
    ci3=f.createComponentInstance(null);
    assertThat("Check name ci1, ci2",ci1.getInstanceName(),not(ci2.getInstanceName()));
    assertThat("Check name ci1, ci3",ci1.getInstanceName(),not(ci3.getInstanceName()));
    assertThat("Check name ci3, ci2",ci3.getInstanceName(),not(ci2.getInstanceName()));
    ci1.dispose();
    ci2.dispose();
    ci3.dispose();
  }
 catch (  Exception e) {
    fail("An acceptable configuration is refused");
  }
}

</code></pre>

<br>
<pre class="type-6 type-2 type-17 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check instance name unicity.
 */
@Test public void testUnicity2(){
  Factory f=ipojoHelper.getFactory("Factories-FooProviderType-2");
  ComponentInstance ci1, ci2, ci3;
  try {
    Properties p1=new Properties();
    p1.put("instance.name","name1");
    ci1=f.createComponentInstance(p1);
    Properties p2=new Properties();
    p2.put("instance.name","name2");
    ci2=f.createComponentInstance(p2);
    Properties p3=new Properties();
    p3.put("instance.name","name3");
    ci3=f.createComponentInstance(p3);
    assertThat("Check name ci1, ci2",ci1.getInstanceName(),not(ci2.getInstanceName()));
    assertThat("Check name ci1, ci3",ci1.getInstanceName(),not(ci3.getInstanceName()));
    assertThat("Check name ci3, ci2",ci3.getInstanceName(),not(ci2.getInstanceName()));
    ci1.dispose();
    ci2.dispose();
    ci3.dispose();
  }
 catch (  Exception e) {
    fail("An acceptable configuration is refused");
  }
}

</code></pre>

<br>
<pre class="type-6 type-2 type-17 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check instance name unicity.
 */
@Test public void testUnicity3(){
  Factory f=ipojoHelper.getFactory("Factories-FooProviderType-2");
  ComponentInstance ci1=null, ci2;
  try {
    Properties p1=new Properties();
    p1.put("instance.name","name1");
    ci1=f.createComponentInstance(p1);
    Properties p2=new Properties();
    p2.put("instance.name","name1");
    ci2=f.createComponentInstance(p2);
    assertThat("Check name ci1, ci2",ci1.getInstanceName(),not(ci2.getInstanceName()));
    ci1.dispose();
    ci2.dispose();
  }
 catch (  Exception e) {
    if (ci1 != null) {
      ci1.dispose();
    }
    return;
  }
  fail("An unacceptable configuration is acceptable");
}

</code></pre>

<br>
<pre class="type-6 type-2 type-17 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check instance name unicity.
 */
@Test public void testUnicity4(){
  Factory f=ipojoHelper.getFactory("Factories-FooProviderType-2");
  Factory f2=ipojoHelper.getFactory("Factories-FooProviderType-1");
  ComponentInstance ci1=null, ci2;
  try {
    Properties p1=new Properties();
    p1.put("instance.name","name1");
    ci1=f.createComponentInstance(p1);
    Properties p2=new Properties();
    p2.put("instance.name","name1");
    ci2=f2.createComponentInstance(p2);
    assertThat("Check name ci1, ci2",ci1.getInstanceName(),not(ci2.getInstanceName()));
    ci1.dispose();
    ci2.dispose();
  }
 catch (  Exception e) {
    if (ci1 != null) {
      ci1.dispose();
    }
    return;
  }
  fail("An unacceptable configuration is acceptable");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.api.CompositeTest </h4><pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createACompositeWithExportingAService() throws UnacceptableConfiguration, MissingHandlerException, ConfigurationException {
  PrimitiveComponentType prov=createAProvider();
  prov.start();
  PrimitiveComponentType cons=createAConsumer();
  ComponentInstance c=cons.createInstance();
  CompositeComponentType type=new CompositeComponentType().setBundleContext(context).setComponentTypeName("compExport").addSubService(new InstantiatedService().setSpecification(Foo.class.getName())).addService(new ExportedService().setSpecification(Foo.class.getName()));
  ComponentInstance ci=type.createInstance();
  assertThat("ci is valid",ci.getState(),is(ComponentInstance.VALID));
  assertThat("c is valid",c.getState(),is(ComponentInstance.VALID));
  prov.stop();
  assertThat("ci is invalid",ci.getState(),is(ComponentInstance.INVALID));
  assertThat("c is invalid",c.getState(),is(ComponentInstance.INVALID));
  prov.start();
  assertThat("ci is valid - 2",ci.getState(),is(ComponentInstance.VALID));
  assertThat("c is valid - 2",c.getState(),is(ComponentInstance.VALID));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createACompositeWithAnImportedService() throws UnacceptableConfiguration, MissingHandlerException, ConfigurationException {
  PrimitiveComponentType prov=createAProvider();
  prov.createInstance();
  PrimitiveComponentType cons=createAConsumer();
  ServiceReference[] refs=osgiHelper.getServiceReferences(Factory.class.getName(),"(component.providedServiceSpecifications=" + Foo.class.getName() + ")");
  assertThat(refs.length,is(not(0)));
  CompositeComponentType type=new CompositeComponentType().setBundleContext(context).setComponentTypeName("comp2").addSubService(new ImportedService().setSpecification(Foo.class.getName())).addInstance(new Instance(cons.getFactory().getName()));
  ComponentInstance ci=type.createInstance();
  System.out.println(ci.getInstanceDescription().getDescription());
  assertThat("ci is valid",ci.getState(),is(ComponentInstance.VALID));
  prov.stop();
  assertThat("ci is invalid",ci.getState(),is(ComponentInstance.INVALID));
  prov.start();
  prov.createInstance();
  assertThat("ci is valid - 2",ci.getState(),is(ComponentInstance.VALID));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createACompositeWithAnInstantiatedService() throws UnacceptableConfiguration, MissingHandlerException, ConfigurationException {
  PrimitiveComponentType prov=createAProvider();
  prov.start();
  PrimitiveComponentType cons=createAConsumer();
  ServiceReference[] refs=osgiHelper.getServiceReferences(Factory.class.getName(),"(component.providedServiceSpecifications=" + Foo.class.getName() + ")");
  assertThat(refs.length,is(not(0)));
  Factory factory=(Factory)osgiHelper.getRawServiceObject(refs[0]);
  System.out.println(factory.getComponentDescription().getDescription());
  CompositeComponentType type=new CompositeComponentType().setBundleContext(context).setComponentTypeName("comp2").addSubService(new InstantiatedService().setSpecification(Foo.class.getName())).addInstance(new Instance(cons.getFactory().getName()));
  ComponentInstance ci=type.createInstance();
  System.out.println(ci.getInstanceDescription().getDescription());
  assertThat("ci is valid",ci.getState(),is(ComponentInstance.VALID));
  prov.stop();
  assertThat("ci is invalid",ci.getState(),is(ComponentInstance.INVALID));
  prov.start();
  assertThat("ci is valid - 2",ci.getState(),is(ComponentInstance.VALID));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createACompositeWithcontainedInstance() throws UnacceptableConfiguration, MissingHandlerException, ConfigurationException {
  PrimitiveComponentType prov=createAProvider();
  PrimitiveComponentType cons=createAConsumer();
  CompositeComponentType type=new CompositeComponentType().setBundleContext(context).setComponentTypeName("comp1").addInstance(new Instance(prov.getFactory().getName())).addInstance(new Instance(cons.getFactory().getName()));
  ComponentInstance ci=type.createInstance();
  assertThat("ci is valid",ci.getState(),is(ComponentInstance.VALID));
  cons.stop();
  assertThat("ci is invalid",ci.getState(),is(ComponentInstance.INVALID));
  cons.start();
  assertThat("ci is valid - 2",ci.getState(),is(ComponentInstance.VALID));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createACompositeWithAnOptionalImportedService() throws UnacceptableConfiguration, MissingHandlerException, ConfigurationException {
  PrimitiveComponentType prov=createAProvider();
  prov.createInstance();
  CompositeComponentType type=new CompositeComponentType().setBundleContext(context).setComponentTypeName("comp3").addSubService(new ImportedService().setSpecification(Foo.class.getName()).setOptional(true));
  ComponentInstance ci=type.createInstance();
  assertThat("ci is valid",ci.getState(),is(ComponentInstance.VALID));
  prov.stop();
  assertThat("ci is valid - 1",ci.getState(),is(ComponentInstance.VALID));
  prov.start();
  prov.createInstance();
  assertThat("ci is valid - 2",ci.getState(),is(ComponentInstance.VALID));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createACompositeWithAnOptionalInstantiatedService() throws UnacceptableConfiguration, MissingHandlerException, ConfigurationException {
  PrimitiveComponentType prov=createAProvider();
  prov.start();
  CompositeComponentType type=new CompositeComponentType().setBundleContext(context).setComponentTypeName("comp3").addSubService(new InstantiatedService().setSpecification(Foo.class.getName()).setOptional(true));
  ComponentInstance ci=type.createInstance();
  assertThat("ci is valid",ci.getState(),is(ComponentInstance.VALID));
  prov.stop();
  assertThat("ci is valid - 1",ci.getState(),is(ComponentInstance.VALID));
  prov.start();
  assertThat("ci is valid - 2",ci.getState(),is(ComponentInstance.VALID));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.api.ExternalHandlerTest </h4><pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createAHost() throws Exception {
  PrimitiveComponentType type=createAWhiteboardHost();
  ComponentInstance ci=type.createInstance();
  assertThat(ci.getState(),is(ComponentInstance.VALID));
  HandlerDescription hd=ci.getInstanceDescription().getHandlerDescription(Whiteboard.NAMESPACE + ":" + Whiteboard.NAME);
  assertThat(hd,is(notNullValue()));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createDoubleHost() throws Exception {
  PrimitiveComponentType type=createASecondWhiteboardHost();
  ComponentInstance ci=type.createInstance();
  assertThat(ci.getState(),is(ComponentInstance.VALID));
  HandlerDescription hd=ci.getInstanceDescription().getHandlerDescription(Whiteboard.NAMESPACE + ":" + Whiteboard.NAME);
  assertThat(hd,is(notNullValue()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.api.PrimitiveComponentTest </h4><pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createAServiceProvider() throws Exception {
  assertThat(context,is(notNullValue()));
  ComponentInstance ci;
  PrimitiveComponentType type=createAProvider();
  ci=type.createInstance();
  assertThat("Ci is valid",ci.getState(),is(ComponentInstance.VALID));
  ServiceReference ref=ipojoHelper.getServiceReferenceByName(Foo.class.getName(),ci.getInstanceName());
  assertThat(ref,is(notNullValue()));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void killTheFactory() throws UnacceptableConfiguration, MissingHandlerException, ConfigurationException {
  assertThat(context,is(notNullValue()));
  ComponentInstance ci=null;
  PrimitiveComponentType type=createAProvider();
  ci=type.createInstance();
  assertThat("Ci is valid",ci.getState(),is(ComponentInstance.VALID));
  assertThat(ipojoHelper.isServiceAvailableByName(Foo.class.getName(),ci.getInstanceName()),is(true));
  type.stop();
  assertThat("Ci is disposed",ci.getState(),is(ComponentInstance.DISPOSED));
  assertThat(ipojoHelper.isServiceAvailableByName(Foo.class.getName(),ci.getInstanceName()),is(false));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createTwoCons() throws Exception {
  ComponentInstance cons1=createAConsumer().createInstance();
  assertThat("cons is invalid",cons1.getState(),is(ComponentInstance.INVALID));
  ComponentInstance prov=createAProvider().createInstance();
  assertThat("prov is valid",prov.getState(),is(ComponentInstance.VALID));
  assertThat("cons is valid",cons1.getState(),is(ComponentInstance.VALID));
  ComponentInstance cons2=createAnOptionalConsumer().createInstance();
  assertThat("cons2 is valid",cons2.getState(),is(ComponentInstance.VALID));
  prov.stop();
  assertThat("cons is invalid",cons1.getState(),is(ComponentInstance.INVALID));
  assertThat("cons2 is valid",cons2.getState(),is(ComponentInstance.VALID));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createBoth() throws Exception {
  ComponentInstance cons=createAConsumer().createInstance();
  assertThat("cons is invalid",cons.getState(),is(ComponentInstance.INVALID));
  ComponentInstance prov=createAProvider().createInstance();
  assertThat("prov is valid",prov.getState(),is(ComponentInstance.VALID));
  assertThat("cons is valid",cons.getState(),is(ComponentInstance.VALID));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void notManipulatedComponent() throws Exception {
  assertThat(context,is(notNullValue()));
  ComponentInstance ci;
  PrimitiveComponentType x=new PrimitiveComponentType().setBundleContext(context).setClassName(PlainHelloImpl.class.getName()).setValidateMethod("start").setInvalidateMethod("stop");
  x.start();
  assertThat(x,is(notNullValue()));
  assertThat(x.getFactory().getState(),is(Factory.VALID));
  ci=x.createInstance();
  ci.start();
  assertThat(ci.getState(),is(ComponentInstance.VALID));
  x.stop();
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createAServiceCons() throws Exception {
  assertThat(context,is(notNullValue()));
  ComponentInstance ci=null;
  PrimitiveComponentType type=createAConsumer();
  ci=type.createInstance();
  assertThat("Ci is invalid",ci.getState(),is(ComponentInstance.INVALID));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.api.SingletonComponentTest </h4><pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void setObject() throws Exception {
  ComponentInstance cons=createAConsumer().setObject(new MyComponentImpl(5)).create();
  assertThat("cons is invalid",cons.getState(),is(ComponentInstance.INVALID));
  ComponentInstance prov=createAProvider().create();
  assertThat("prov is valid",prov.getState(),is(ComponentInstance.VALID));
  assertThat("cons is valid",cons.getState(),is(ComponentInstance.VALID));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createBoth() throws Exception {
  SingletonComponentType consFactory=createAConsumer();
  ComponentInstance cons=consFactory.create();
  assertThat("cons is invalid",cons.getState(),is(ComponentInstance.INVALID));
  SingletonComponentType provFactory=createAProvider();
  ComponentInstance prov=provFactory.create();
  assertThat("prov is valid",prov.getState(),is(ComponentInstance.VALID));
  assertThat("cons is valid",cons.getState(),is(ComponentInstance.VALID));
  consFactory.stop();
  provFactory.stop();
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createAServiceProvider() throws UnacceptableConfiguration, MissingHandlerException, ConfigurationException {
  assertThat(context,is(notNullValue()));
  ComponentInstance ci=null;
  SingletonComponentType type=createAProvider();
  ci=type.create();
  assertThat("Ci is valid",ci.getState(),is(ComponentInstance.VALID));
  ServiceReference ref=ipojoHelper.getServiceReferenceByName(Foo.class.getName(),ci.getInstanceName());
  assertThat(ref,is(notNullValue()));
  type.disposeInstance(ci);
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createAServiceCons() throws Exception {
  assertThat(context,is(notNullValue()));
  ComponentInstance ci=null;
  SingletonComponentType type=createAConsumer();
  ci=type.create();
  assertThat("Ci is invalid",ci.getState(),is(ComponentInstance.INVALID));
  type.stop();
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void createTwoCons() throws Exception {
  SingletonComponentType consFactory=createAConsumer();
  ComponentInstance cons1=createAConsumer().create();
  assertThat("cons is invalid",cons1.getState(),is(ComponentInstance.INVALID));
  ComponentInstance prov=createAProvider().create();
  assertThat("prov is valid",prov.getState(),is(ComponentInstance.VALID));
  assertThat("cons is valid",cons1.getState(),is(ComponentInstance.VALID));
  ComponentInstance cons2=createAnOptionalConsumer().create();
  assertThat("cons2 is valid",cons2.getState(),is(ComponentInstance.VALID));
  prov.stop();
  assertThat("cons is invalid",cons1.getState(),is(ComponentInstance.INVALID));
  assertThat("cons2 is valid",cons2.getState(),is(ComponentInstance.VALID));
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void killTheFactory() throws Exception {
  assertThat(context,is(notNullValue()));
  ComponentInstance ci=null;
  SingletonComponentType type=createAProvider();
  ci=type.create();
  assertThat("Ci is valid",ci.getState(),is(ComponentInstance.VALID));
  ServiceReference ref=ipojoHelper.getServiceReferenceByName(Foo.class.getName(),ci.getInstanceName());
  assertThat(ref,is(notNullValue()));
  type.stop();
  assertThat("Ci is disposed",ci.getState(),is(ComponentInstance.DISPOSED));
  assertThat(ipojoHelper.isServiceAvailableByName(Foo.class.getName(),ci.getInstanceName()),is(false));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.test.annotations.TestContext </h4><pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testFieldInjection(){
  Element tested=null;
  for (  Element element : contexts) {
    if (element.containsAttribute("field")) {
      tested=element;
    }
  }
  assertThat(tested).isNotNull();
  assertThat(tested.getAttribute("field")).isEqualToIgnoringCase("field");
  assertThat(tested.getAttribute("constructor-parameter")).isNull();
  assertThat(tested.getAttribute("method")).isNull();
  assertThat(tested.getAttribute("value")).isNull();
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testConstructorInjection(){
  Element tested=null;
  for (  Element element : contexts) {
    if (element.containsAttribute("constructor-parameter")) {
      tested=element;
    }
  }
  assertThat(tested).isNotNull();
  assertThat(tested.getAttribute("field")).isNull();
  assertThat(tested.getAttribute("method")).isNull();
  assertThat(tested.getAttribute("constructor-parameter")).isEqualToIgnoringCase("1");
  assertThat(tested.getAttribute("value")).isEqualToIgnoringCase("COMPONENT");
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testMethodInjection(){
  Element tested=null;
  for (  Element element : contexts) {
    if (element.containsAttribute("method")) {
      tested=element;
    }
  }
  assertThat(tested).isNotNull();
  assertThat(tested.getAttribute("field")).isNull();
  assertThat(tested.getAttribute("parameter-index")).isNull();
  assertThat(tested.getAttribute("method")).isEqualToIgnoringCase("setContext");
  assertThat(tested.getAttribute("value")).isEqualToIgnoringCase("INSTANCE");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.test.dependencies.TestBindingInterceptors </h4><pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Checks that two interceptors are called sequentially.
 */
@Test public void testWithTwoInterceptors(){
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".ProxyBindingInterceptor",configuration);
  ComponentInstance instance=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components" + ".FooConsumer");
  ServiceReference ref=osgiHelper.waitForService(CheckService.class.getName(),"(instance.name=" + instance.getInstanceName() + ")",1000,true);
  CheckService check=(CheckService)osgiHelper.getRawServiceObject(ref);
  assertThat(check.check());
  configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".EnhancingBindingInterceptor",configuration);
  assertThat(check.getProps().get("enhanced")).isNull();
  CheckService checkService=osgiHelper.getServiceObject(CheckService.class,"(factory.name=org.apache.felix.ipojo.runtime.core.test.interceptors.ProxyBindingInterceptor)");
  assertThat(checkService).isNotNull();
  assertThat(checkService.getProps().get("bound")).isEqualTo(1);
  assertThat(checkService.getProps().get("foo")).isEqualTo(1);
  provider.stop();
  provider.start();
  assertThat(check.getProps().get("enhanced")).isNotNull();
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testArchitecture(){
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ComponentInstance interceptor=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".interceptors.ProxyBindingInterceptor",configuration);
  ComponentInstance instance=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components.FooConsumer");
  osgiHelper.waitForService(CheckService.class.getName(),"(instance.name=" + instance.getInstanceName() + ")",1000,true);
  assertThat(instance.getInstanceDescription().getDescription().toString()).contains("servicebindinginterceptor");
  assertThat(instance.getInstanceDescription().getDescription().toString()).contains("target=\"(dependency.id=foo)\"");
  assertThat(instance.getInstanceDescription().getDescription().toString()).contains("instance.name=\"" + interceptor.getInstanceName() + "\"");
  assertThat(instance.getInstanceDescription().getDescription().toString()).contains("bundle.id=\"" + getTestBundle().getBundleId() + "\"");
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Same as previous but the interceptor arrives after the instance.
 */
@Test public void testProxyBindingInterceptorAfterInstanceCreation(){
  ComponentInstance instance=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components" + ".FooConsumer");
  ServiceReference ref=osgiHelper.waitForService(CheckService.class.getName(),"(instance.name=" + instance.getInstanceName() + ")",1000,true);
  CheckService check=(CheckService)osgiHelper.getRawServiceObject(ref);
  assertThat(check.check());
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".ProxyBindingInterceptor",configuration);
  CheckService checkService=osgiHelper.getServiceObject(CheckService.class,"(factory.name=org.apache.felix.ipojo.runtime.core.test.interceptors.ProxyBindingInterceptor)");
  assertThat(checkService).isNotNull();
  assertThat(checkService.getProps().get("bound")).isNull();
  assertThat(checkService.getProps().get("foo")).isNull();
  provider.stop();
  provider.start();
  check.check();
  assertThat(checkService).isNotNull();
  assertThat(checkService.getProps().get("bound")).isEqualTo(1);
  assertThat(checkService.getProps().get("foo")).isEqualTo(1);
  provider.dispose();
  assertThat(checkService.getProps().get("unbound")).isEqualTo(2);
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testProxyBindingInterceptorBeforeInstanceCreation(){
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".ProxyBindingInterceptor",configuration);
  ComponentInstance instance=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components" + ".FooConsumer");
  ServiceReference ref=osgiHelper.waitForService(CheckService.class.getName(),"(instance.name=" + instance.getInstanceName() + ")",1000,true);
  CheckService check=(CheckService)osgiHelper.getRawServiceObject(ref);
  assertThat(check.check());
  CheckService checkService=osgiHelper.getServiceObject(CheckService.class,"(factory.name=org.apache.felix.ipojo.runtime.core.test.interceptors.ProxyBindingInterceptor)");
  assertThat(checkService).isNotNull();
  assertThat(checkService.getProps().get("bound")).isEqualTo(1);
  assertThat(checkService.getProps().get("foo")).isEqualTo(1);
  provider.dispose();
  assertThat(checkService.getProps().get("bound")).isEqualTo(1);
  assertThat(checkService.getProps().get("unbound")).isEqualTo(1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.test.dependencies.TestCombinationOfInterceptors </h4><pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testAdvanced(){
  provider1=provider(0);
  provider2=provider(0);
  provider3=provider(1);
  provider4=provider(1);
  provider5=provider(2);
  provider6=provider(2);
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".AdvancedTrackerAndRankerInterceptor",configuration);
  ComponentInstance instance=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components.AdvancedFooConsumer");
  osgiHelper.waitForService(CheckService.class.getName(),null,1000,true);
  CheckService check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.getProps().get("grade")).isEqualTo(0);
  Dictionary conf=new Hashtable();
  conf.put("grade","1");
  instance.reconfigure(conf);
  assertThat(check.getProps().get("grade")).isEqualTo(1);
  conf.put("grade","2");
  instance.reconfigure(conf);
  assertThat(check.getProps().get("grade")).isEqualTo(2);
  conf.put("grade","3");
  instance.reconfigure(conf);
  assertThat(check.getProps().get("grade")).isNull();
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testCombination(){
  provider1=provider(0);
  provider2=provider(1);
  provider3=provider(2);
  provider4=provider(3);
  provider5=provider(4);
  provider6=provider(5);
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".TrackerAndRankerInterceptor",configuration);
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.components.FooConsumer");
  osgiHelper.waitForService(CheckService.class.getName(),null,1000,true);
  CheckService check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.getProps().get("grade")).isEqualTo(5);
  provider6.dispose();
  assertThat(check.getProps().get("grade")).isEqualTo(4);
  Setter setter=osgiHelper.getServiceObject(Setter.class);
  setter.set("LOW REVERSE");
  assertThat(check.getProps().get("grade")).isEqualTo(0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.test.dependencies.TestHidingServices </h4><pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testArchitecture(){
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ComponentInstance instance=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components.FooConsumer");
  assertThat(instance.getState()).isEqualTo(ComponentInstance.VALID);
  ComponentInstance interceptor=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".interceptors.HidingTrackingInterceptor",configuration);
  assertThat(instance.getInstanceDescription().getDescription().toString()).contains("servicetrackinginterceptor");
  assertThat(instance.getInstanceDescription().getDescription().toString()).contains("target=\"(dependency.id=foo)\"");
  assertThat(instance.getInstanceDescription().getDescription().toString()).contains("instance.name=\"" + interceptor.getInstanceName() + "\"");
  assertThat(instance.getInstanceDescription().getDescription().toString()).contains("bundle.id=\"" + getTestBundle().getBundleId() + "\"");
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testHidingServiceAndReconfiguration(){
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".HidingTrackingInterceptor",configuration);
  ComponentInstance instance=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components.FooConsumer");
  assertThat(instance.getState()).isEqualTo(ComponentInstance.INVALID);
  Setter setter=osgiHelper.getServiceObject(Setter.class,null);
  setter.set("toto");
  assertThat(instance.getState()).isEqualTo(ComponentInstance.VALID);
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Same as previous but the interceptor arrives after the instance.
 */
@Test public void testHidingAServiceAfterItsBinding(){
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ComponentInstance instance=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components.FooConsumer");
  assertThat(instance.getState()).isEqualTo(ComponentInstance.VALID);
  ComponentInstance interceptor=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".interceptors.HidingTrackingInterceptor",configuration);
  assertThat(instance.getState()).isEqualTo(ComponentInstance.INVALID);
  Setter setter=osgiHelper.getServiceObject(Setter.class,null);
  setter.set("toto");
  assertThat(instance.getState()).isEqualTo(ComponentInstance.VALID);
  setter.set("hidden");
  assertThat(instance.getState()).isEqualTo(ComponentInstance.INVALID);
  interceptor.dispose();
  assertThat(instance.getState()).isEqualTo(ComponentInstance.VALID);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.test.dependencies.TestInterceptorsOnSeveralDependencies </h4><pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testBeingBoundToSeveralDependencies(){
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ComponentInstance interceptor=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".interceptors.PropertyTrackingInterceptor",configuration);
  ComponentInstance instance1=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components.FooConsumer");
  ComponentInstance instance2=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components.FooConsumer");
  assertThat(instance1.getState()).isEqualTo(ComponentInstance.VALID);
  assertThat(instance2.getState()).isEqualTo(ComponentInstance.VALID);
  final ServiceReference ref1=ipojoHelper.getServiceReferenceByName(CheckService.class.getName(),instance1.getInstanceName());
  final ServiceReference ref2=ipojoHelper.getServiceReferenceByName(CheckService.class.getName(),instance2.getInstanceName());
  CheckService cs1=(CheckService)osgiHelper.getRawServiceObject(ref1);
  CheckService cs2=(CheckService)osgiHelper.getRawServiceObject(ref2);
  @SuppressWarnings("unchecked") Map<String,?> props1=(Map<String,?>)cs1.getProps().get("props");
  @SuppressWarnings("unchecked") Map<String,?> props2=(Map<String,?>)cs2.getProps().get("props");
  assertThat(props1.get("location")).isEqualTo("kitchen");
  assertThat(props2.get("location")).isEqualTo("kitchen");
  Setter setter=osgiHelper.getServiceObject(Setter.class,null);
  setter.set("bedroom");
  props1=(Map<String,?>)cs1.getProps().get("props");
  props2=(Map<String,?>)cs2.getProps().get("props");
  assertThat(props1.get("location")).isEqualTo("bedroom");
  assertThat(props2.get("location")).isEqualTo("bedroom");
  interceptor.dispose();
  props1=(Map<String,?>)cs1.getProps().get("props");
  props2=(Map<String,?>)cs2.getProps().get("props");
  assertThat(props1.get("location")).isNull();
  assertThat(props2.get("location")).isNull();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.test.dependencies.TestRankingServices </h4><pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testRanking(){
  provider1=provider(0);
  provider2=provider(1);
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".FilterRankingInterceptor",configuration);
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.components.FooConsumer");
  osgiHelper.waitForService(CheckService.class.getName(),null,1000,true);
  CheckService check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.getProps().get("grade")).isEqualTo(1);
  provider2.dispose();
  assertThat(check.getProps().get("grade")).isEqualTo(0);
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testRankingChanges(){
  provider1=provider(0);
  provider2=provider(1);
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".FilterRankingInterceptor",configuration);
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.components.FooConsumer");
  osgiHelper.waitForService(CheckService.class.getName(),null,1000,true);
  CheckService check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.getProps().get("grade")).isEqualTo(1);
  Setter setter=osgiHelper.getServiceObject(Setter.class);
  setter.set("true");
  assertThat(check.getProps().get("grade")).isEqualTo(0);
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testRankingWhenInterceptorIsComingAfterTheBattle(){
  provider1=provider(0);
  provider2=provider(1);
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.components.FooConsumer");
  osgiHelper.waitForService(CheckService.class.getName(),null,1000,true);
  CheckService check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.getProps().get("grade")).isEqualTo(0);
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".FilterRankingInterceptor",configuration);
  assertThat(check.getProps().get("grade")).isEqualTo(1);
  provider2.dispose();
  assertThat(check.getProps().get("grade")).isEqualTo(0);
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testArchitecture(){
  provider1=provider(0);
  provider2=provider(1);
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ComponentInstance interceptor=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core" + ".test.interceptors.FilterRankingInterceptor",configuration);
  ComponentInstance instance=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components.FooConsumer");
  osgiHelper.waitForService(CheckService.class.getName(),null,1000,true);
  assertThat(instance.getInstanceDescription().getDescription().toString()).contains("servicerankinginterceptor");
  assertThat(instance.getInstanceDescription().getDescription().toString()).contains("target=\"(dependency.id=foo)\"");
  assertThat(instance.getInstanceDescription().getDescription().toString()).contains("instance.name=\"" + interceptor.getInstanceName() + "\"");
  assertThat(instance.getInstanceDescription().getDescription().toString()).contains("bundle.id=\"" + getTestBundle().getBundleId() + "\"");
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testDynamicServices(){
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".FilterRankingInterceptor",configuration);
  ComponentInstance consumer=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components.FooConsumer");
  assertThat(consumer.getState()).isEqualTo(ComponentInstance.INVALID);
  provider1=provider(0);
  assertThat(consumer.getState()).isEqualTo(ComponentInstance.VALID);
  CheckService check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.getProps().get("grade")).isEqualTo(0);
  provider2=provider(1);
  assertThat(consumer.getState()).isEqualTo(ComponentInstance.VALID);
  check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.getProps().get("grade")).isEqualTo(1);
  provider2.dispose();
  assertThat(consumer.getState()).isEqualTo(ComponentInstance.VALID);
  check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.getProps().get("grade")).isEqualTo(0);
  provider1.dispose();
  assertThat(consumer.getState()).isEqualTo(ComponentInstance.INVALID);
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testRestorationOfTheComparatorWhenTheInterceptorLeaves(){
  provider1=provider(0);
  provider2=provider(1);
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ComponentInstance interceptor=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core" + ".test.interceptors.FilterRankingInterceptor",configuration);
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.components.FooConsumer");
  osgiHelper.waitForService(CheckService.class.getName(),null,1000,true);
  CheckService check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.getProps().get("grade")).isEqualTo(1);
  interceptor.dispose();
  assertThat(check.getProps().get("grade")).isEqualTo(0);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.test.dependencies.TestTransformingServices </h4><pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Same as previous but the interceptor arrives after the instance.
 */
@Test public void testDelayedTransformationOfFoo(){
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.components" + ".FooConsumer");
  osgiHelper.waitForService(CheckService.class.getName(),null,1000,true);
  CheckService check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.check());
  @SuppressWarnings("unchecked") Map<String,?> props=(Map<String,?>)check.getProps().get("props");
  assertThat(props.get("location")).isNull();
  assertThat(props.get("hidden")).isNotNull();
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".AddLocationTrackingInterceptor",configuration);
  assertThat(check.check());
  props=(Map<String,?>)check.getProps().get("props");
  assertThat(props.get("location")).isEqualTo("kitchen");
  assertThat(props.get("hidden")).isNull();
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * Checks the behavior when services arrives and leaves.
 */
@Test public void testTransformationOfDynamicFoo(){
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".AddLocationTrackingInterceptor",configuration);
  ComponentInstance consumer=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components.FooConsumer");
  osgiHelper.waitForService(CheckService.class.getName(),null,1000,true);
  CheckService check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.check());
  @SuppressWarnings("unchecked") Map<String,?> props=(Map<String,?>)check.getProps().get("props");
  assertThat(props.get("location")).isEqualTo("kitchen");
  assertThat(props.get("hidden")).isNull();
  ComponentInstance provider2=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components.FooProvider");
  check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.check());
  props=(Map<String,?>)check.getProps().get("props");
  assertThat(props.get("location")).isEqualTo("kitchen");
  assertThat(props.get("hidden")).isNull();
  provider.dispose();
  check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.check());
  props=(Map<String,?>)check.getProps().get("props");
  assertThat(props.get("location")).isEqualTo("kitchen");
  assertThat(props.get("hidden")).isNull();
  provider2.dispose();
  System.out.println(consumer.getInstanceDescription().getDescription());
  assertThat(consumer.getState()).isEqualTo(ComponentInstance.INVALID);
}

</code></pre>

<br>
<pre class="type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testTransformationOfFoo(){
  Properties configuration=new Properties();
  configuration.put("target","(dependency.id=foo)");
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.interceptors" + ".AddLocationTrackingInterceptor",configuration);
  ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test.components.FooConsumer");
  osgiHelper.waitForService(CheckService.class.getName(),null,1000,true);
  CheckService check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.check());
  @SuppressWarnings("unchecked") Map<String,?> props=(Map<String,?>)check.getProps().get("props");
  assertThat(props.get("location")).isEqualTo("kitchen");
  assertThat(props.get("hidden")).isNull();
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * The interceptor makes the instance valid.
 */
@Test public void testTransformationMakingFilterMatch(){
  Properties configuration=new Properties();
  Properties filters=new Properties();
  filters.put("foo","(location=kitchen)");
  configuration.put("requires.filters",filters);
  ComponentInstance consumer=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".components.FooConsumer",configuration);
  assertThat(consumer.getInstanceDescription().getState()).isEqualTo(ComponentInstance.INVALID);
  Properties config=new Properties();
  config.put("target","(dependency.id=foo)");
  ComponentInstance interceptor=ipojoHelper.createComponentInstance("org.apache.felix.ipojo.runtime.core.test" + ".interceptors.AddLocationTrackingInterceptor",config);
  assertThat(consumer.getInstanceDescription().getState()).isEqualTo(ComponentInstance.VALID);
  CheckService check=osgiHelper.getServiceObject(CheckService.class);
  assertThat(check.check());
  Map<String,?> props=(Map<String,?>)check.getProps().get("props");
  assertThat(props.get("location")).isEqualTo("kitchen");
  assertThat(props.get("hidden")).isNull();
  interceptor.dispose();
  System.out.println(consumer.getInstanceDescription().getDescription());
  assertThat(consumer.getInstanceDescription().getState()).isEqualTo(ComponentInstance.INVALID);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.test.dependencies.identification.TestDependencyIdDetection </h4><pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testAddAndRemoveMethods(){
  ComponentInstance instance=ipojoHelper.createComponentInstance(factory);
  DependencyHandlerDescription dh=(DependencyHandlerDescription)instance.getInstanceDescription().getHandlerDescription("org.apache.felix.ipojo:requires");
  DependencyDescription dd=findDependencyById(dh,"MyService");
  assertThat(dd).isNotNull();
  DependencyCallback[] callbacks=dd.getDependency().getDependencyCallbacks();
  assertThat(callbacks).isNotNull();
  DependencyCallback bind=getBindCallback(callbacks);
  DependencyCallback unbind=getUnbindCallback(callbacks);
  assertThat(bind).isNotNull();
  assertThat(unbind).isNotNull();
  assertThat(bind.getMethodName()).isEqualTo("addMyService");
  assertThat(unbind.getMethodName()).isEqualTo("removeMyService");
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testSetAndUnSetMethods(){
  ComponentInstance instance=ipojoHelper.createComponentInstance(factory);
  DependencyHandlerDescription dh=(DependencyHandlerDescription)instance.getInstanceDescription().getHandlerDescription("org.apache.felix.ipojo:requires");
  DependencyDescription dd=findDependencyById(dh,"MyOtherService");
  assertThat(dd).isNotNull();
  DependencyCallback[] callbacks=dd.getDependency().getDependencyCallbacks();
  assertThat(callbacks).isNotNull();
  DependencyCallback bind=getBindCallback(callbacks);
  DependencyCallback unbind=getUnbindCallback(callbacks);
  assertThat(bind).isNotNull();
  assertThat(unbind).isNotNull();
  assertThat(bind.getMethodName()).isEqualTo("setMyOtherService");
  assertThat(unbind.getMethodName()).isEqualTo("unsetMyOtherService");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.runtime.core.test.dependencies.leak.ListenerStyleLeakTest </h4><pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * This test do use the listener-style.
 * <ol>
 * <li>Gets the listener object provided by the leaking instance</li>
 * <li>Gets the hello message from this listener. As the hello service is bound,
 * it relies on the hello instance</li>
 * <li>Stops the hello instance</li>
 * <li>Get the hello message again, must be {@code null}</li>
 * </ol>
 */
@Test public void testListenerStyle(){
  ComponentInstance hello=ipojoHelper.createComponentInstance(DEFAULT_HELLO_SERVICE);
  ComponentInstance leaking=ipojoHelper.createComponentInstance(DEFAULT_LEAKING_SERVICE);
  assertThat(hello.getState()).isEqualTo(ComponentInstance.VALID);
  assertThat(leaking.getState()).isEqualTo(ComponentInstance.VALID);
  LeakingService service=osgiHelper.waitForService(LeakingService.class,"(instance.name=" + leaking.getInstanceName() + ")",1000);
  osgiHelper.waitForService(HelloService.class,"(instance.name=" + hello.getInstanceName() + ")",1000);
  Listener listener=service.getListener();
  String result=listener.doSomething();
  assertThat(result).isEqualToIgnoringCase("hello iPOJO");
  hello.stop();
  result=listener.doSomething();
  assertThat(result).isNull();
}

</code></pre>

<br>
<pre class="type-4 type-2 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies logic rules using matcher-style statements
"></span><br>
/** 
 * This test does not use the listener-style.
 * <ol>
 * <li>Gets the hello message from the leaking instance using the hello instance</li>
 * <li>Stops the hello instance</li>
 * <li>Get the hello message again, must be {@code null}</li>
 * </ol>
 */
@Test public void testNormalStyle(){
  ComponentInstance hello=ipojoHelper.createComponentInstance(DEFAULT_HELLO_SERVICE);
  ComponentInstance leaking=ipojoHelper.createComponentInstance(DEFAULT_LEAKING_SERVICE);
  assertThat(hello.getState()).isEqualTo(ComponentInstance.VALID);
  assertThat(leaking.getState()).isEqualTo(ComponentInstance.VALID);
  LeakingService service=osgiHelper.waitForService(LeakingService.class,"(instance.name=" + leaking.getInstanceName() + ")",1000);
  osgiHelper.waitForService(HelloService.class,"(instance.name=" + hello.getInstanceName() + ")",1000);
  String result=service.executeListener();
  assertThat(result).isEqualToIgnoringCase("hello iPOJO");
  hello.stop();
  result=service.executeListener();
  assertThat(result).isNull();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.test.compatibility.TestBeingConsumedByAriesBlueprint1_1_0 </h4><pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void test(){
  CheckService checker=osgiHelper.waitForService(CheckService.class,null,5000,false);
  assertThat(checker).isNotNull();
  assertThat(checker.data().get("result")).isEqualTo("hello john doe");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.test.compatibility.TestBeingConsumedByEquinoxSCR1_4_100 </h4><pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void test(){
  if (!isEquinox()) {
    System.out.println("Test executed on Equinox only");
    return;
  }
  CheckService checker=osgiHelper.waitForService(CheckService.class,null,1000);
  assertThat(checker).isNotNull();
  assertThat(checker.data().get("result")).isEqualTo("hello john doe");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.test.compatibility.TestBeingConsumedByFelixSCR1_6_2 </h4><pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void test(){
  CheckService checker=osgiHelper.waitForService(CheckService.class,null,1000);
  assertThat(checker).isNotNull();
  assertThat(checker.data().get("result")).isEqualTo("hello john doe");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.test.compatibility.TestBeingConsumedByKnopflerfishSCR4_0_2 </h4><pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void test(){
  if (!isKnopflerfish()) {
    System.out.println("Test ignored - running only on Knopflerfish");
    return;
  }
  CheckService checker=osgiHelper.getServiceObject(CheckService.class);
  assertThat(checker).isNotNull();
  assertThat(checker.data().get("result")).isEqualTo("hello john doe");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.test.compatibility.TestConsumingProviderUsingAriesBlueprint1_1_0 </h4><pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void test(){
  osgiHelper.waitForService(CheckService.class,null,10000);
  CheckService checker=osgiHelper.getServiceObject(CheckService.class);
  assertThat(checker).isNotNull();
  assertThat(checker.data().get("result")).isEqualTo("hello john doe");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.test.compatibility.TestConsumingProviderUsingEquinoxSCR1_4_100 </h4><pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void test(){
  if (!isEquinox()) {
    System.out.println("Test executed on Equinox only");
    return;
  }
  CheckService checker=osgiHelper.waitForService(CheckService.class,null,1000);
  assertThat(checker).isNotNull();
  assertThat(checker.data().get("result")).isEqualTo("hello john doe");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.test.compatibility.TestConsumingProviderUsingFelixSCR1_6_2 </h4><pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void test(){
  CheckService checker=osgiHelper.getServiceObject(CheckService.class);
  assertThat(checker).isNotNull();
  assertThat(checker.data().get("result")).isEqualTo("hello john doe");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.test.compatibility.TestConsumingProviderUsingKnopflerfishSCR4_0_2 </h4><pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void test(){
  if (!isKnopflerfish()) {
    System.out.println("Test ignored - running only on Knopflerfish");
    return;
  }
  CheckService checker=osgiHelper.getServiceObject(CheckService.class);
  assertThat(checker).isNotNull();
  assertThat(checker.data().get("result")).isEqualTo("hello john doe");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.test.compatibility.TestiPOJOOnly </h4><pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void test(){
  CheckService checker=osgiHelper.getServiceObject(CheckService.class);
  assertThat(checker).isNotNull();
  assertThat(checker.data().get("result")).isEqualTo("hello john doe");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.felix.ipojo.util.ContextSourceManagerTest </h4><pre class="type-4 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testSubstitute() throws Exception {
  String filter_with_one_var="(id=${id})";
  String filter_with_two_vars="(&(id=${id})(count=${system.count}))";
  Hashtable<String,Object> context=new Hashtable<String,Object>();
  context.put("id","my.id");
  context.put("system.count",1);
  String filter=ContextSourceManager.substitute(filter_with_one_var,context);
  assertThat(filter).isEqualTo("(id=my.id)");
  filter=ContextSourceManager.substitute(filter_with_two_vars,context);
  assertThat(filter).isEqualTo("(&(id=my.id)(count=1))");
}

</code></pre>

<br>
<pre class="type-4 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testEmptySubstitution(){
  String filter_with_two_vars="(&(id=${id})(count=${system.count}))";
  Hashtable<String,Object> context=new Hashtable<String,Object>();
  String filter=ContextSourceManager.substitute(filter_with_two_vars,context);
  assertThat(filter).isEqualTo(filter_with_two_vars);
}

</code></pre>

<br>
<pre class="type-4 type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testTwoStepsSubstitution(){
  String filter_with_vars_equality="(${attr}=${var})";
  Hashtable<String,Object> context1=new Hashtable<String,Object>();
  context1.put("var","value");
  Hashtable<String,Object> context2=new Hashtable<String,Object>();
  context2.put("attr","prop");
  String filter=ContextSourceManager.substitute(filter_with_vars_equality,context1);
  assertThat(filter).isEqualTo("(${attr}=value)");
  filter=ContextSourceManager.substitute(filter,context2);
  assertThat(filter).isEqualTo("(prop=value)");
}

</code></pre>

<br>
<pre class="type-17 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies logic rules using matcher-style statements">ConditionMatcher</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies logic rules using matcher-style statements
"></span><br>
@Test public void testExtractVariablesFromFilter() throws Exception {
  String filter_with_one_var="(id=${id})";
  String filter_with_two_vars="(&(id=${id})(count=${system.count}))";
  String filter_with_vars_equality="(${attr}=${var})";
  assertThat(ContextSourceManager.extractVariablesFromFilter(filter_with_one_var)).containsExactly("id");
  assertThat(ContextSourceManager.extractVariablesFromFilter(filter_with_two_vars)).contains("id","system.count");
  assertThat(ContextSourceManager.extractVariablesFromFilter(filter_with_vars_equality)).contains("attr","var");
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
