<h3 style="margin:0px">Class: org.apache.felix.cm.integration.ConfigurationBindingTest (18 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(18)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(17)</kbd></button>&nbsp;<button id="12"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('12')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-12"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(17)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(17)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(16)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_statically_bound() throws BundleException {
  final String pid="test_statically_bound";
  bundle=installBundle(pid);
  final String location=bundle.getLocation();
  configure(pid);
  final Configuration config=getConfiguration(pid);
  TestCase.assertEquals(pid,config.getPid());
  TestCase.assertNull(config.getBundleLocation());
  config.setBundleLocation(location);
  TestCase.assertEquals(location,config.getBundleLocation());
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_UPDATED,1);
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
  bundle.start();
  delay();
  final ManagedServiceTestActivator tester=ManagedServiceTestActivator.INSTANCE;
  TestCase.assertNotNull("Activator not started !!",tester);
  TestCase.assertNotNull("Expect Properties after Service Registration",tester.props);
  TestCase.assertEquals("Expect a single update call",1,tester.numManagedServiceUpdatedCalls);
  TestCase.assertEquals(location,config.getBundleLocation());
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,0);
  bundle.uninstall();
  bundle=null;
  delay();
  TestCase.assertEquals(location,config.getBundleLocation());
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,0);
  deleteConfig(pid);
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_DELETED,1);
  configListener.assertEvents(ConfigurationEvent.CM_UPDATED,0);
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,0);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_switch_static_binding_factory() throws BundleException, IOException {
  final String factoryPid="test_switch_static_binding_factory";
  final String locationA="test:location/A/" + factoryPid;
  final Configuration config=createFactoryConfiguration(factoryPid,locationA,true);
  final String pid=config.getPid();
  final Bundle bundleA=installBundle(factoryPid,ManagedServiceFactoryTestActivator.class,locationA);
  bundleA.start();
  delay();
  final ManagedServiceFactoryTestActivator testerA1=ManagedServiceFactoryTestActivator.INSTANCE;
  TestCase.assertNotNull(testerA1.configs.get(pid));
  TestCase.assertEquals(1,testerA1.numManagedServiceFactoryUpdatedCalls);
  final String locationB="test:location/B/" + factoryPid;
  final Bundle bundleB=installBundle(factoryPid,ManagedServiceFactoryTestActivator2.class,locationB);
  bundleB.start();
  delay();
  final ManagedServiceFactoryTestActivator2 testerB1=ManagedServiceFactoryTestActivator2.INSTANCE;
  TestCase.assertNull(testerB1.configs.get(pid));
  TestCase.assertEquals(0,testerB1.numManagedServiceFactoryUpdatedCalls);
  config.setBundleLocation(locationB);
  delay();
  TestCase.assertEquals(locationB,config.getBundleLocation());
  TestCase.assertNull(testerA1.configs.get(pid));
  TestCase.assertEquals(1,testerA1.numManagedServiceFactoryUpdatedCalls);
  TestCase.assertEquals(1,testerA1.numManagedServiceFactoryDeleteCalls);
  TestCase.assertNotNull(testerB1.configs.get(pid));
  TestCase.assertEquals(1,testerB1.numManagedServiceFactoryUpdatedCalls);
  config.update();
  delay();
  TestCase.assertNotNull(testerB1.configs.get(pid));
  TestCase.assertEquals(2,testerB1.numManagedServiceFactoryUpdatedCalls);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_static_binding() throws BundleException {
  final String pid="test_static_binding";
  bundle=installBundle(pid);
  final String location=bundle.getLocation();
  configure(pid);
  final Configuration config=getConfiguration(pid);
  TestCase.assertEquals(pid,config.getPid());
  TestCase.assertNull(config.getBundleLocation());
  config.setBundleLocation(location);
  TestCase.assertEquals(location,config.getBundleLocation());
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_UPDATED,1);
  bundle.start();
  delay();
  TestCase.assertEquals(location,config.getBundleLocation());
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
  final ManagedServiceTestActivator tester=ManagedServiceTestActivator.INSTANCE;
  TestCase.assertNotNull("Activator not started !!",tester);
  TestCase.assertNotNull("Expect Properties after Service Registration",tester.props);
  TestCase.assertEquals("Expect a single update call",1,tester.numManagedServiceUpdatedCalls);
  config.setBundleLocation(null);
  delay();
  TestCase.assertEquals(location,config.getBundleLocation());
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,2);
  bundle.uninstall();
  bundle=null;
  delay();
  TestCase.assertNull(config.getBundleLocation());
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
}

</code></pre>

<pre class="type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_two_bundles_one_pid() throws BundleException, IOException {
  final String pid="test_two_bundles_one_pid";
  final Bundle bundleA=installBundle(pid,ManagedServiceTestActivator.class);
  final String locationA=bundleA.getLocation();
  bundleA.start();
  delay();
  final ManagedServiceTestActivator tester=ManagedServiceTestActivator.INSTANCE;
  TestCase.assertNull(tester.props);
  TestCase.assertEquals(1,tester.numManagedServiceUpdatedCalls);
  final Configuration config=configure(pid,locationA,false);
  delay();
  TestCase.assertNull(tester.props);
  TestCase.assertEquals(1,tester.numManagedServiceUpdatedCalls);
  config.update(theConfig);
  delay();
  TestCase.assertNotNull(tester.props);
  TestCase.assertEquals(2,tester.numManagedServiceUpdatedCalls);
  bundleA.stop();
  delay();
  bundleA.start();
  delay();
  final ManagedServiceTestActivator tester2=ManagedServiceTestActivator.INSTANCE;
  TestCase.assertNotNull(tester2.props);
  TestCase.assertEquals(1,tester2.numManagedServiceUpdatedCalls);
  config.delete();
  delay();
  TestCase.assertNull(tester2.props);
  TestCase.assertEquals(2,tester2.numManagedServiceUpdatedCalls);
  bundleA.uninstall();
  delay();
  final Bundle bundleA2=installBundle(pid,ManagedServiceTestActivator.class);
  final String locationA2=bundleA.getLocation();
  bundleA2.start();
  delay();
  final ManagedServiceTestActivator tester21=ManagedServiceTestActivator.INSTANCE;
  TestCase.assertNull(tester21.props);
  TestCase.assertEquals(1,tester21.numManagedServiceUpdatedCalls);
  final String locationB="test:locationB/" + pid;
  final Configuration configB=configure(pid,locationB,false);
  delay();
  TestCase.assertNull(tester21.props);
  TestCase.assertEquals(1,tester21.numManagedServiceUpdatedCalls);
  configB.update(theConfig);
  delay();
  TestCase.assertNull(tester21.props);
  TestCase.assertEquals(1,tester21.numManagedServiceUpdatedCalls);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_not_updated_new_configuration_not_bound_after_bundle_uninstall() throws IOException, BundleException {
  final String pid="test_not_updated_new_configuration_not_bound_after_bundle_uninstall";
  final Configuration newConfig=configure(pid,null,false);
  TestCase.assertNull(newConfig.getProperties());
  TestCase.assertNull(newConfig.getBundleLocation());
  bundle=installBundle(pid);
  bundle.start();
  delay();
  final ManagedServiceTestActivator tester=ManagedServiceTestActivator.INSTANCE;
  TestCase.assertNotNull("Activator not started !!",tester);
  TestCase.assertNull("Expect no properties after Service Registration",tester.props);
  TestCase.assertEquals("Expect a single update call",1,tester.numManagedServiceUpdatedCalls);
  TestCase.assertNull(newConfig.getProperties());
  TestCase.assertEquals(bundle.getLocation(),newConfig.getBundleLocation());
  bundle.uninstall();
  bundle=null;
  delay();
  TestCase.assertNull(newConfig.getProperties());
  TestCase.assertNull(newConfig.getBundleLocation());
  deleteConfig(pid);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_switch_dynamic_binding_after_uninstall() throws BundleException, IOException {
  final String pid="test_switch_dynamic_binding";
  final String locationA="test:location/A/" + pid;
  final Configuration config=configure(pid,null,true);
  TestCase.assertNull(config.getBundleLocation());
  final Bundle bundleA=installBundle(pid,ManagedServiceTestActivator.class,locationA);
  bundleA.start();
  delay();
  final ManagedServiceTestActivator testerA1=ManagedServiceTestActivator.INSTANCE;
  TestCase.assertNotNull(testerA1.props);
  TestCase.assertEquals(1,testerA1.numManagedServiceUpdatedCalls);
  TestCase.assertEquals(locationA,config.getBundleLocation());
  final String locationB="test:location/B/" + pid;
  final Bundle bundleB=installBundle(pid,ManagedServiceTestActivator2.class,locationB);
  bundleB.start();
  delay();
  final ManagedServiceTestActivator2 testerB1=ManagedServiceTestActivator2.INSTANCE;
  TestCase.assertNull(testerB1.props);
  TestCase.assertEquals(1,testerB1.numManagedServiceUpdatedCalls);
  bundleA.uninstall();
  delay();
  TestCase.assertEquals(locationB,config.getBundleLocation());
  TestCase.assertNotNull(testerB1.props);
  TestCase.assertEquals(2,testerB1.numManagedServiceUpdatedCalls);
  config.update();
  delay();
  TestCase.assertNotNull(testerB1.props);
  TestCase.assertEquals(3,testerB1.numManagedServiceUpdatedCalls);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_switch_dynamic_binding_factory() throws BundleException, IOException {
  final String factoryPid="test_switch_static_binding_factory";
  final String locationA="test:location/A/" + factoryPid;
  final Configuration config=createFactoryConfiguration(factoryPid,null,true);
  final String pid=config.getPid();
  TestCase.assertNull(config.getBundleLocation());
  final Bundle bundleA=installBundle(factoryPid,ManagedServiceFactoryTestActivator.class,locationA);
  bundleA.start();
  delay();
  final ManagedServiceFactoryTestActivator testerA1=ManagedServiceFactoryTestActivator.INSTANCE;
  TestCase.assertNotNull(testerA1.configs.get(pid));
  TestCase.assertEquals(1,testerA1.numManagedServiceFactoryUpdatedCalls);
  TestCase.assertEquals(locationA,config.getBundleLocation());
  final String locationB="test:location/B/" + factoryPid;
  final Bundle bundleB=installBundle(factoryPid,ManagedServiceFactoryTestActivator2.class,locationB);
  bundleB.start();
  delay();
  final ManagedServiceFactoryTestActivator2 testerB1=ManagedServiceFactoryTestActivator2.INSTANCE;
  TestCase.assertNull(testerB1.configs.get(pid));
  TestCase.assertEquals(0,testerB1.numManagedServiceFactoryUpdatedCalls);
  TestCase.assertEquals(locationA,config.getBundleLocation());
  config.setBundleLocation(locationB);
  delay();
  TestCase.assertEquals(locationB,config.getBundleLocation());
  TestCase.assertNull(testerA1.configs.get(pid));
  TestCase.assertEquals(1,testerA1.numManagedServiceFactoryUpdatedCalls);
  TestCase.assertEquals(1,testerA1.numManagedServiceFactoryDeleteCalls);
  TestCase.assertNotNull(testerB1.configs.get(pid));
  TestCase.assertEquals(1,testerB1.numManagedServiceFactoryUpdatedCalls);
  config.update();
  delay();
  TestCase.assertNotNull(testerB1.configs.get(pid));
  TestCase.assertEquals(2,testerB1.numManagedServiceFactoryUpdatedCalls);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_dynamic_binding_and_unbinding() throws BundleException {
  final String pid="test_dynamic_binding_and_unbinding";
  configure(pid);
  final Configuration config=getConfiguration(pid);
  TestCase.assertEquals(pid,config.getPid());
  TestCase.assertNull(config.getBundleLocation());
  bundle=installBundle(pid);
  final String location=bundle.getLocation();
  bundle.start();
  delay();
  TestCase.assertEquals(location,config.getBundleLocation());
  final Bundle cmBundle=getCmBundle();
  cmBundle.stop();
  delay();
  cmBundle.start();
  final Configuration configAfterRestart=getConfiguration(pid);
  TestCase.assertEquals(pid,configAfterRestart.getPid());
  TestCase.assertEquals(location,configAfterRestart.getBundleLocation());
  bundle.stop();
  delay();
  TestCase.assertEquals(location,configAfterRestart.getBundleLocation());
  cmBundle.stop();
  delay();
  cmBundle.start();
  final Configuration configBoundAfterRestart=getConfiguration(pid);
  TestCase.assertEquals(pid,configBoundAfterRestart.getPid());
  TestCase.assertEquals(location,configBoundAfterRestart.getBundleLocation());
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_switch_dynamic_binding() throws BundleException, IOException {
  final String pid="test_switch_dynamic_binding";
  final String locationA="test:location/A/" + pid;
  final Configuration config=configure(pid,null,true);
  final Bundle bundleA=installBundle(pid,ManagedServiceTestActivator.class,locationA);
  bundleA.start();
  delay();
  final ManagedServiceTestActivator testerA1=ManagedServiceTestActivator.INSTANCE;
  TestCase.assertNotNull(testerA1.props);
  TestCase.assertEquals(1,testerA1.numManagedServiceUpdatedCalls);
  TestCase.assertEquals(locationA,config.getBundleLocation());
  final String locationB="test:location/B/" + pid;
  final Bundle bundleB=installBundle(pid,ManagedServiceTestActivator2.class,locationB);
  bundleB.start();
  delay();
  final ManagedServiceTestActivator2 testerB1=ManagedServiceTestActivator2.INSTANCE;
  TestCase.assertNull(testerB1.props);
  TestCase.assertEquals(1,testerB1.numManagedServiceUpdatedCalls);
  config.setBundleLocation(locationB);
  delay();
  TestCase.assertEquals(locationB,config.getBundleLocation());
  TestCase.assertNull(testerA1.props);
  TestCase.assertEquals(2,testerA1.numManagedServiceUpdatedCalls);
  TestCase.assertNotNull(testerB1.props);
  TestCase.assertEquals(2,testerB1.numManagedServiceUpdatedCalls);
  config.update();
  delay();
  TestCase.assertNotNull(testerB1.props);
  TestCase.assertEquals(3,testerB1.numManagedServiceUpdatedCalls);
}

</code></pre>

<pre class="type-4 type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
"></span><br>
@Test public void test_location_changed_events() throws BundleException, IOException {
  String pid="test_location_changed_events";
  configure(pid);
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_UPDATED,1);
  final Configuration config=getConfiguration(pid);
  TestCase.assertNull(config.getBundleLocation());
  bundle=installBundle(pid);
  bundle.start();
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
  bundle.uninstall();
  bundle=null;
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
  config.setBundleLocation("some_location_1");
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
  config.setBundleLocation("some_location_2");
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
  config.delete();
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_DELETED,1);
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_DELETED,0);
  configListener.assertEvents(ConfigurationEvent.CM_UPDATED,0);
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,0);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_configuration_unbound_on_uninstall_with_cm_restart() throws BundleException {
  final String pid="test_configuration_unbound_on_uninstall_with_cm_restart";
  configure(pid);
  final Bundle cmBundle=getCmBundle();
  final Configuration beforeInstall=getConfiguration(pid);
  TestCase.assertNull(beforeInstall.getBundleLocation());
  bundle=installBundle(pid);
  final Configuration beforeStart=getConfiguration(pid);
  TestCase.assertNull(beforeInstall.getBundleLocation());
  TestCase.assertNull(beforeStart.getBundleLocation());
  bundle.start();
  final ManagedServiceTestActivator tester=ManagedServiceTestActivator.INSTANCE;
  TestCase.assertNotNull("IOActivator not started !!",tester);
  delay();
  TestCase.assertNotNull("Expect Properties after Service Registration",tester.props);
  TestCase.assertEquals("Expect a single update call",1,tester.numManagedServiceUpdatedCalls);
  final Configuration beforeStop=getConfiguration(pid);
  TestCase.assertEquals(beforeStop.getBundleLocation(),bundle.getLocation());
  TestCase.assertEquals(beforeInstall.getBundleLocation(),bundle.getLocation());
  TestCase.assertEquals(beforeStart.getBundleLocation(),bundle.getLocation());
  bundle.stop();
  TestCase.assertEquals(beforeInstall.getBundleLocation(),bundle.getLocation());
  TestCase.assertEquals(beforeStart.getBundleLocation(),bundle.getLocation());
  TestCase.assertEquals(beforeStop.getBundleLocation(),bundle.getLocation());
  final Configuration beforeUninstall=getConfiguration(pid);
  TestCase.assertEquals(beforeUninstall.getBundleLocation(),bundle.getLocation());
  cmBundle.stop();
  delay();
  TestCase.assertNull(configAdminTracker.getService());
  bundle.uninstall();
  bundle=null;
  cmBundle.start();
  delay();
  final Configuration atEnd=getConfiguration(pid);
  TestCase.assertNull(atEnd.getBundleLocation());
  deleteConfig(pid);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_configuration_unbound_on_uninstall() throws BundleException {
  String pid="test_configuration_unbound_on_uninstall";
  configure(pid);
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_UPDATED,1);
  final Configuration beforeInstall=getConfiguration(pid);
  TestCase.assertNull(beforeInstall.getBundleLocation());
  bundle=installBundle(pid);
  final Configuration beforeStart=getConfiguration(pid);
  TestCase.assertNull(beforeInstall.getBundleLocation());
  TestCase.assertNull(beforeStart.getBundleLocation());
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,0);
  bundle.start();
  final ManagedServiceTestActivator tester=ManagedServiceTestActivator.INSTANCE;
  TestCase.assertNotNull("Activator not started !!",tester);
  delay();
  TestCase.assertNotNull("Expect Properties after Service Registration",tester.props);
  TestCase.assertEquals("Expect a single update call",1,tester.numManagedServiceUpdatedCalls);
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
  final Configuration beforeStop=getConfiguration(pid);
  TestCase.assertEquals(beforeStop.getBundleLocation(),bundle.getLocation());
  TestCase.assertEquals(beforeInstall.getBundleLocation(),bundle.getLocation());
  TestCase.assertEquals(beforeStart.getBundleLocation(),bundle.getLocation());
  bundle.stop();
  delay();
  TestCase.assertEquals(beforeInstall.getBundleLocation(),bundle.getLocation());
  TestCase.assertEquals(beforeStart.getBundleLocation(),bundle.getLocation());
  TestCase.assertEquals(beforeStop.getBundleLocation(),bundle.getLocation());
  final Configuration beforeUninstall=getConfiguration(pid);
  TestCase.assertEquals(beforeUninstall.getBundleLocation(),bundle.getLocation());
  bundle.uninstall();
  bundle=null;
  delay();
  TestCase.assertNull(beforeInstall.getBundleLocation());
  TestCase.assertNull(beforeStart.getBundleLocation());
  TestCase.assertNull(beforeStop.getBundleLocation());
  TestCase.assertNull(beforeUninstall.getBundleLocation());
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
  final Configuration atEnd=getConfiguration(pid);
  TestCase.assertNull(atEnd.getBundleLocation());
  deleteConfig(pid);
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_DELETED,1);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_switch_dynamic_binding_factory_after_uninstall() throws BundleException, IOException {
  final String factoryPid="test_switch_static_binding_factory";
  final String locationA="test:location/A/" + factoryPid;
  final Configuration config=createFactoryConfiguration(factoryPid,null,true);
  final String pid=config.getPid();
  TestCase.assertNull(config.getBundleLocation());
  final Bundle bundleA=installBundle(factoryPid,ManagedServiceFactoryTestActivator.class,locationA);
  bundleA.start();
  delay();
  final ManagedServiceFactoryTestActivator testerA1=ManagedServiceFactoryTestActivator.INSTANCE;
  TestCase.assertNotNull(testerA1.configs.get(pid));
  TestCase.assertEquals(1,testerA1.numManagedServiceFactoryUpdatedCalls);
  TestCase.assertEquals(locationA,config.getBundleLocation());
  final String locationB="test:location/B/" + factoryPid;
  final Bundle bundleB=installBundle(factoryPid,ManagedServiceFactoryTestActivator2.class,locationB);
  bundleB.start();
  delay();
  final ManagedServiceFactoryTestActivator2 testerB1=ManagedServiceFactoryTestActivator2.INSTANCE;
  TestCase.assertNull(testerB1.configs.get(pid));
  TestCase.assertEquals(0,testerB1.numManagedServiceFactoryUpdatedCalls);
  TestCase.assertEquals(locationA,config.getBundleLocation());
  bundleA.uninstall();
  delay();
  TestCase.assertEquals(locationB,config.getBundleLocation());
  TestCase.assertNotNull(testerB1.configs.get(pid));
  TestCase.assertEquals(1,testerB1.numManagedServiceFactoryUpdatedCalls);
  config.update();
  delay();
  TestCase.assertNotNull(testerB1.configs.get(pid));
  TestCase.assertEquals(2,testerB1.numManagedServiceFactoryUpdatedCalls);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_create_with_location_unbind_before_service_supply() throws BundleException, IOException {
  final String pid="test_create_with_location_unbind_before_service_supply";
  final String dummyLocation="http://some/dummy/location";
  final Configuration config=configure(pid,dummyLocation,false);
  TestCase.assertEquals(pid,config.getPid());
  TestCase.assertEquals(dummyLocation,config.getBundleLocation());
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put(PROP_NAME,PROP_NAME);
  config.update(props);
  TestCase.assertEquals(PROP_NAME,config.getProperties().get(PROP_NAME));
  TestCase.assertEquals(pid,config.getPid());
  TestCase.assertEquals(dummyLocation,config.getBundleLocation());
  config.setBundleLocation(null);
  TestCase.assertNull(config.getBundleLocation());
  bundle=installBundle(pid);
  bundle.start();
  delay();
  final ManagedServiceTestActivator tester=ManagedServiceTestActivator.INSTANCE;
  TestCase.assertNotNull("Activator not started !!",tester);
  TestCase.assertNotNull("Expect Properties after Service Registration",tester.props);
  TestCase.assertEquals("Expect a single update call",1,tester.numManagedServiceUpdatedCalls);
  TestCase.assertEquals(bundle.getLocation(),config.getBundleLocation());
  bundle.uninstall();
  bundle=null;
  delay();
  TestCase.assertNull(config.getBundleLocation());
  deleteConfig(pid);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_switch_static_binding() throws BundleException {
  final String pid="test_switch_static_binding";
  final String locationA="test:location/A/" + pid;
  final Configuration config=configure(pid,locationA,true);
  final Bundle bundleA=installBundle(pid,ManagedServiceTestActivator.class,locationA);
  bundleA.start();
  delay();
  final ManagedServiceTestActivator testerA1=ManagedServiceTestActivator.INSTANCE;
  TestCase.assertNotNull(testerA1.props);
  TestCase.assertEquals(1,testerA1.numManagedServiceUpdatedCalls);
  final String locationB="test:location/B/" + pid;
  final Bundle bundleB=installBundle(pid,ManagedServiceTestActivator2.class,locationB);
  bundleB.start();
  delay();
  final ManagedServiceTestActivator2 testerB1=ManagedServiceTestActivator2.INSTANCE;
  TestCase.assertNull(testerB1.props);
  TestCase.assertEquals(1,testerB1.numManagedServiceUpdatedCalls);
  config.setBundleLocation(locationB);
  delay();
  TestCase.assertEquals(locationB,config.getBundleLocation());
  TestCase.assertNull(testerA1.props);
  TestCase.assertEquals(2,testerA1.numManagedServiceUpdatedCalls);
  TestCase.assertNotNull(testerB1.props);
  TestCase.assertEquals(2,testerB1.numManagedServiceUpdatedCalls);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests factory configuration dynamic binding. See FELIX-3360.
 */
@SuppressWarnings({"javadoc","serial"}) @Test public void test_dynamic_binding_createFactoryConfiguration_pid() throws BundleException, IOException {
  String ignoredPid="test_dynamic_binding_createFactoryConfiguration_pid_ignored";
  String pid1=null;
  String pid2=null;
  String factoryPid1="test_dynamic_binding_createFactoryConfiguration_pid_1";
  String factoryPid2="test_dynamic_binding_createFactoryConfiguration_pid_2";
  pid1=createFactoryConfiguration(factoryPid1).getPid();
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_UPDATED,1);
  bundle=installBundle(ignoredPid);
  bundle.start();
  delay();
  Configuration config1=getConfiguration(pid1);
  TestCase.assertNull(config1.getBundleLocation());
  ServiceReference<ConfigurationAdmin> sr=bundle.getBundleContext().getServiceReference(ConfigurationAdmin.class);
  ConfigurationAdmin bundleCa=bundle.getBundleContext().getService(sr);
  Configuration bundleConfig1=bundleCa.getConfiguration(pid1);
  TestCase.assertEquals(bundle.getLocation(),bundleConfig1.getBundleLocation());
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
  Configuration bundleConfig2=bundleCa.createFactoryConfiguration(factoryPid2);
  pid2=bundleConfig2.getPid();
  TestCase.assertNull(bundleConfig2.getProperties());
  TestCase.assertEquals(bundle.getLocation(),bundleConfig2.getBundleLocation());
  bundleConfig2.update(new Hashtable<String,String>(){
{
      put("key","value");
    }
  }
);
  bundle.uninstall();
  bundle=null;
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,2);
  bundleConfig1=getConfiguration(pid1);
  TestCase.assertNull(bundleConfig1.getBundleLocation());
  bundleConfig2=getConfiguration(pid2);
  TestCase.assertNull(bundleConfig2.getBundleLocation());
  bundleConfig1.delete();
  bundleConfig2.delete();
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Tests configuration dynamic binding. See FELIX-3360.
 */
@SuppressWarnings({"serial","javadoc"}) @Test public void test_dynamic_binding_getConfiguration_pid() throws BundleException, IOException {
  String ignoredPid="test_dynamic_binding_getConfiguration_pid_ignored";
  String pid1="test_dynamic_binding_getConfiguration_pid_1";
  String pid2="test_dynamic_binding_getConfiguration_pid_2";
  configure(pid1);
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_UPDATED,1);
  bundle=installBundle(ignoredPid);
  bundle.start();
  delay();
  Configuration config1=getConfiguration(pid1);
  TestCase.assertNull(config1.getBundleLocation());
  ServiceReference<ConfigurationAdmin> sr=bundle.getBundleContext().getServiceReference(ConfigurationAdmin.class);
  ConfigurationAdmin bundleCa=bundle.getBundleContext().getService(sr);
  Configuration bundleConfig1=bundleCa.getConfiguration(pid1);
  TestCase.assertEquals(bundle.getLocation(),bundleConfig1.getBundleLocation());
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
  Configuration bundleConfig2=bundleCa.getConfiguration(pid2);
  TestCase.assertNull(bundleConfig2.getProperties());
  TestCase.assertEquals(bundle.getLocation(),bundleConfig2.getBundleLocation());
  bundleConfig2.update(new Hashtable<String,String>(){
{
      put("key","value");
    }
  }
);
  bundle.uninstall();
  bundle=null;
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,2);
  bundleConfig1=getConfiguration(pid1);
  TestCase.assertNull(bundleConfig1.getBundleLocation());
  bundleConfig2=getConfiguration(pid2);
  TestCase.assertNull(bundleConfig2.getBundleLocation());
  bundleConfig1.delete();
  bundleConfig2.delete();
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_static_binding_and_unbinding() throws BundleException {
  final String pid="test_static_binding_and_unbinding";
  final String location=bundleContext.getBundle().getLocation();
  configure(pid);
  final Configuration config=getConfiguration(pid);
  TestCase.assertEquals(pid,config.getPid());
  TestCase.assertNull(config.getBundleLocation());
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_UPDATED,1);
  config.setBundleLocation(location);
  TestCase.assertEquals(location,config.getBundleLocation());
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
  final Bundle cmBundle=getCmBundle();
  cmBundle.stop();
  delay();
  cmBundle.start();
  final Configuration configAfterRestart=getConfiguration(pid);
  TestCase.assertEquals(pid,configAfterRestart.getPid());
  TestCase.assertEquals(location,configAfterRestart.getBundleLocation());
  configAfterRestart.setBundleLocation(null);
  TestCase.assertNull(configAfterRestart.getBundleLocation());
  delay();
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,1);
  cmBundle.stop();
  delay();
  cmBundle.start();
  final Configuration configUnboundAfterRestart=getConfiguration(pid);
  TestCase.assertEquals(pid,configUnboundAfterRestart.getPid());
  TestCase.assertNull(configUnboundAfterRestart.getBundleLocation());
  configListener.assertEvents(ConfigurationEvent.CM_DELETED,0);
  configListener.assertEvents(ConfigurationEvent.CM_UPDATED,0);
  configListener.assertEvents(ConfigurationEvent.CM_LOCATION_CHANGED,0);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
