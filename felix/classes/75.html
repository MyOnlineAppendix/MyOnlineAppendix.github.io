<h3 style="margin:0px">Class: org.apache.felix.http.whiteboard.internal.manager.HttpContextManagerTest (8 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="12"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('12')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-12"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="14"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('14')" data-toggle="tooltip" title="Verifies whether two objects/variables are the same"><kbd id="tag-14"class="label-info"style="display: inline-block;font-size:7pt" >IdentityVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(4)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-2 type-1 type-14 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_HttpContextHolder(){
  TestCase.assertNotNull(sampleContext);
  final HttpContextHolder h1=new HttpContextHolder(sampleContext);
  TestCase.assertSame(sampleContext,h1.getContext());
  TestCase.assertTrue(h1.getMappings().isEmpty());
  ServletMapping sm=new ServletMapping(bundle1,null,"");
  h1.addMapping(sm);
  TestCase.assertSame(sampleContext,sm.getContext());
  TestCase.assertEquals(1,h1.getMappings().size());
  TestCase.assertTrue(h1.getMappings().contains(sm));
  h1.removeMapping(sm);
  TestCase.assertNull(sm.getContext());
  TestCase.assertTrue(h1.getMappings().isEmpty());
}

</code></pre>

<pre class="type-4 type-2 type-1 type-14 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_get_unget_HttpContext_per_bundle_same_bundle(){
  final HttpContextManager hcm=new HttpContextManager();
  final String id=createId(bundle1,SAMPLE_CONTEXT_ID);
  hcm.addHttpContext(bundle1,SAMPLE_CONTEXT_ID,sampleContext);
  final ServletMapping bundle1Servlet=new ServletMapping(bundle1,null,BUNDLE_1_ALIAS);
  HttpContext ctx1=hcm.getHttpContext(bundle1,SAMPLE_CONTEXT_ID,bundle1Servlet);
  TestCase.assertNotNull(ctx1);
  TestCase.assertSame(ctx1,bundle1Servlet.getContext());
  TestCase.assertSame(sampleContext,ctx1);
  TestCase.assertTrue(hcm.getHttpContexts().get(id).getMappings().contains(bundle1Servlet));
  Map<String,Set<AbstractMapping>> orphans1=hcm.getOrphanMappings();
  TestCase.assertTrue(orphans1.isEmpty());
  hcm.ungetHttpContext(bundle1,SAMPLE_CONTEXT_ID,bundle1Servlet);
  TestCase.assertNull(bundle1Servlet.getContext());
  TestCase.assertTrue(hcm.getHttpContexts().get(id).getMappings().isEmpty());
  TestCase.assertTrue(hcm.getOrphanMappings().isEmpty());
  hcm.getHttpContext(bundle1,SAMPLE_CONTEXT_ID,bundle1Servlet);
  hcm.removeHttpContext(sampleContext);
  TestCase.assertNull(bundle1Servlet.getContext());
  TestCase.assertTrue(hcm.getHttpContexts().isEmpty());
  TestCase.assertEquals(1,hcm.getOrphanMappings().size());
  TestCase.assertEquals(1,hcm.getOrphanMappings().get(SAMPLE_CONTEXT_ID).size());
  TestCase.assertTrue(hcm.getOrphanMappings().get(SAMPLE_CONTEXT_ID).contains(bundle1Servlet));
  hcm.ungetHttpContext(bundle1,SAMPLE_CONTEXT_ID,bundle1Servlet);
  TestCase.assertNull(bundle1Servlet.getContext());
  TestCase.assertTrue(hcm.getHttpContexts().isEmpty());
  TestCase.assertTrue(hcm.getOrphanMappings().isEmpty());
}

</code></pre>

<pre class="type-4 type-2 type-1 type-14 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_get_unget_HttpContext_shared(){
  final HttpContextManager hcm=new HttpContextManager();
  final String id=createId(SAMPLE_CONTEXT_ID);
  hcm.addHttpContext(null,SAMPLE_CONTEXT_ID,sampleContext);
  final ServletMapping bundle1Servlet=new ServletMapping(bundle1,null,BUNDLE_1_ALIAS);
  HttpContext ctx1=hcm.getHttpContext(bundle1,SAMPLE_CONTEXT_ID,bundle1Servlet);
  TestCase.assertNotNull(ctx1);
  TestCase.assertSame(ctx1,bundle1Servlet.getContext());
  TestCase.assertSame(sampleContext,ctx1);
  TestCase.assertEquals(1,hcm.getHttpContexts().get(id).getMappings().size());
  TestCase.assertTrue(hcm.getHttpContexts().get(id).getMappings().contains(bundle1Servlet));
  Map<String,Set<AbstractMapping>> orphans1=hcm.getOrphanMappings();
  TestCase.assertTrue(orphans1.isEmpty());
  hcm.ungetHttpContext(bundle1,SAMPLE_CONTEXT_ID,bundle1Servlet);
  TestCase.assertNull(bundle1Servlet.getContext());
  TestCase.assertTrue(hcm.getHttpContexts().get(id).getMappings().isEmpty());
  TestCase.assertTrue(hcm.getOrphanMappings().isEmpty());
  final ServletMapping bundle2Servlet=new ServletMapping(bundle2,null,BUNDLE_2_ALIAS);
  HttpContext ctx2=hcm.getHttpContext(bundle2,SAMPLE_CONTEXT_ID,bundle2Servlet);
  TestCase.assertNotNull(ctx2);
  TestCase.assertSame(ctx2,bundle2Servlet.getContext());
  TestCase.assertSame(sampleContext,ctx2);
  TestCase.assertEquals(1,hcm.getHttpContexts().get(id).getMappings().size());
  TestCase.assertTrue(hcm.getHttpContexts().get(id).getMappings().contains(bundle2Servlet));
  TestCase.assertTrue(hcm.getOrphanMappings().isEmpty());
  hcm.getHttpContext(bundle1,SAMPLE_CONTEXT_ID,bundle1Servlet);
  HttpContext ctx3=hcm.getHttpContext(bundle1,SAMPLE_CONTEXT_ID,bundle1Servlet);
  TestCase.assertNotNull(ctx3);
  TestCase.assertSame(ctx3,bundle1Servlet.getContext());
  TestCase.assertSame(sampleContext,ctx3);
  TestCase.assertEquals(2,hcm.getHttpContexts().get(id).getMappings().size());
  TestCase.assertTrue(hcm.getHttpContexts().get(id).getMappings().contains(bundle1Servlet));
  TestCase.assertTrue(hcm.getOrphanMappings().isEmpty());
  hcm.removeHttpContext(sampleContext);
  TestCase.assertNull(bundle1Servlet.getContext());
  TestCase.assertNull(bundle2Servlet.getContext());
  TestCase.assertTrue(hcm.getHttpContexts().isEmpty());
  TestCase.assertEquals(1,hcm.getOrphanMappings().size());
  TestCase.assertEquals(2,hcm.getOrphanMappings().get(SAMPLE_CONTEXT_ID).size());
  TestCase.assertTrue(hcm.getOrphanMappings().get(SAMPLE_CONTEXT_ID).contains(bundle1Servlet));
  TestCase.assertTrue(hcm.getOrphanMappings().get(SAMPLE_CONTEXT_ID).contains(bundle2Servlet));
  hcm.addHttpContext(null,SAMPLE_CONTEXT_ID,sampleContext);
  TestCase.assertSame(sampleContext,bundle1Servlet.getContext());
  TestCase.assertSame(sampleContext,bundle2Servlet.getContext());
  TestCase.assertEquals(2,hcm.getHttpContexts().get(id).getMappings().size());
  TestCase.assertTrue(hcm.getHttpContexts().get(id).getMappings().contains(bundle1Servlet));
  TestCase.assertTrue(hcm.getHttpContexts().get(id).getMappings().contains(bundle2Servlet));
  TestCase.assertTrue(hcm.getOrphanMappings().isEmpty());
  hcm.removeHttpContext(sampleContext);
  hcm.ungetHttpContext(bundle1,SAMPLE_CONTEXT_ID,bundle1Servlet);
  hcm.ungetHttpContext(bundle2,SAMPLE_CONTEXT_ID,bundle2Servlet);
  TestCase.assertNull(bundle1Servlet.getContext());
  TestCase.assertNull(bundle2Servlet.getContext());
  TestCase.assertTrue(hcm.getHttpContexts().isEmpty());
  TestCase.assertTrue(hcm.getOrphanMappings().isEmpty());
}

</code></pre>

<pre class="type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_createId_String(){
  TestCase.assertEquals("shared-",createId(null));
  TestCase.assertEquals("shared-",createId(""));
  TestCase.assertEquals("shared-" + SAMPLE_CONTEXT_ID,createId(SAMPLE_CONTEXT_ID));
}

</code></pre>

<pre class="type-4 type-2 type-1 type-14 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_add_remove_HttpContext_shared(){
  final HttpContextManager hcm=new HttpContextManager();
  TestCase.assertTrue(hcm.getHttpContexts().isEmpty());
  Collection<AbstractMapping> mappings=hcm.addHttpContext(null,SAMPLE_CONTEXT_ID,sampleContext);
  TestCase.assertNotNull(mappings);
  TestCase.assertTrue(mappings.isEmpty());
  String holderId=createId(SAMPLE_CONTEXT_ID);
  Map<String,HttpContextHolder> holders=hcm.getHttpContexts();
  TestCase.assertEquals(1,holders.size());
  TestCase.assertSame(sampleContext,holders.get(holderId).getContext());
  TestCase.assertEquals(mappings,holders.get(holderId).getMappings());
  Collection<AbstractMapping> removedMappings=hcm.removeHttpContext(sampleContext);
  TestCase.assertNotNull(removedMappings);
  TestCase.assertTrue(removedMappings.isEmpty());
  TestCase.assertTrue(hcm.getHttpContexts().isEmpty());
}

</code></pre>

<pre class="type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void test_createId_Bundle_String(){
  TestCase.assertEquals(BUNDLE_1_ID + "-",createId(bundle1,null));
  TestCase.assertEquals(BUNDLE_1_ID + "-",createId(bundle1,""));
  TestCase.assertEquals(BUNDLE_1_ID + "-" + SAMPLE_CONTEXT_ID,createId(bundle1,SAMPLE_CONTEXT_ID));
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setup(){
  when(bundle1.getBundleId()).thenReturn(BUNDLE_1_ID);
  when(bundle2.getBundleId()).thenReturn(BUNDLE_2_ID);
}

</code></pre>

<pre class="type-4 type-2 type-1 type-14 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_add_remove_HttpContext_per_Bundle(){
  final HttpContextManager hcm=new HttpContextManager();
  TestCase.assertTrue(hcm.getHttpContexts().isEmpty());
  Collection<AbstractMapping> mappings=hcm.addHttpContext(bundle1,SAMPLE_CONTEXT_ID,sampleContext);
  TestCase.assertNotNull(mappings);
  TestCase.assertTrue(mappings.isEmpty());
  String holderId=createId(bundle1,SAMPLE_CONTEXT_ID);
  Map<String,HttpContextHolder> holders=hcm.getHttpContexts();
  TestCase.assertEquals(1,holders.size());
  TestCase.assertSame(sampleContext,holders.get(holderId).getContext());
  TestCase.assertEquals(mappings,holders.get(holderId).getMappings());
  Collection<AbstractMapping> removedMappings=hcm.removeHttpContext(sampleContext);
  TestCase.assertNotNull(removedMappings);
  TestCase.assertTrue(removedMappings.isEmpty());
  TestCase.assertTrue(hcm.getHttpContexts().isEmpty());
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
