<h3 style="margin:0px">Class: org.apache.felix.http.itest.HttpServiceRuntimeTest (37 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(30)</kbd></button>&nbsp;<button id="12"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('12')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-12"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(30)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(30)</kbd></button>&nbsp;<button id="11"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('11')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-11"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(29)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(15)</kbd></button>&nbsp;<button id="13"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('13')" data-toggle="tooltip" title="Verifies values related to public fields."><kbd id="tag-13"class="label-info"style="display: inline-block;font-size:7pt" >PublicFieldVerifier&nbsp;(6)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(5)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(4)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Verifies assertions inside branch conditions"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >BranchVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Releases resources used by the test cases"><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >TestCleaner&nbsp;(1)</kbd></button>&nbsp;<button id="14"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('14')" data-toggle="tooltip" title="Verifies whether two objects/variables are the same"><kbd id="tag-14"class="label-info"style="display: inline-block;font-size:7pt" >IdentityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-4 type-2 type-10 type-11 type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multipleServletsForSamePatternChoosenByServiceRankingRules() throws InterruptedException {
  registerServlet("servlet 1","/pathcollision");
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTO.failedServletDTOs.length);
  ServletContextDTO defaultContext=assertDefaultContext(runtimeDTO);
  assertEquals(1,defaultContext.servletDTOs.length);
  Dictionary<String,?> properties=createDictionary(HTTP_WHITEBOARD_SERVLET_PATTERN,"/pathcollision",HTTP_WHITEBOARD_SERVLET_NAME,"servlet 2",SERVICE_RANKING,Integer.MAX_VALUE);
  CountDownLatch initLatch=new CountDownLatch(1);
  CountDownLatch destroyLatch=new CountDownLatch(1);
  TestServlet testServlet=new TestServlet(initLatch,destroyLatch);
  ServiceRegistration<?> higherRankingServlet=m_context.registerService(Servlet.class.getName(),testServlet,properties);
  registrations.add(higherRankingServlet);
  RuntimeDTO runtimeWithShadowedServlet=serviceRuntime.getRuntimeDTO();
  awaitServiceRegistration(initLatch);
  defaultContext=assertDefaultContext(runtimeWithShadowedServlet);
  assertEquals(1,defaultContext.servletDTOs.length);
  assertEquals(1,runtimeWithShadowedServlet.failedServletDTOs.length);
  FailedServletDTO failedServletDTO=runtimeWithShadowedServlet.failedServletDTOs[0];
  assertEquals("servlet 1",failedServletDTO.name);
  assertEquals(FAILURE_REASON_SHADOWED_BY_OTHER_SERVICE,failedServletDTO.failureReason);
  higherRankingServlet.unregister();
  awaitServiceRegistration(destroyLatch);
  runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTO.failedServletDTOs.length);
  defaultContext=assertDefaultContext(runtimeDTO);
  assertEquals(1,defaultContext.servletDTOs.length);
  assertEquals("servlet 1",defaultContext.servletDTOs[0].name);
}

</code></pre>

<pre class="type-1 type-10 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void serviceEndpointPropertyIsSet(){
  final String[] endpoint=(String[])m_context.getServiceReference(HttpServiceRuntime.class).getProperty(HTTP_SERVICE_ENDPOINT);
  assertNotNull(endpoint);
  assertTrue(Arrays.toString(endpoint),endpoint.length > 0);
  assertTrue(endpoint[0].startsWith("http://"));
  assertTrue(endpoint[0].endsWith(":8080/"));
}

</code></pre>

<pre class="type-4 type-2 type-1 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dtosForSuccesfullyRegisteredServlets() throws Exception {
  registerServlet("testServlet 1","/servlet_1");
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTOWithFirstSerlvet=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTOWithFirstSerlvet.failedServletDTOs.length);
  ServletContextDTO contextDTO=assertDefaultContext(runtimeDTOWithFirstSerlvet);
  assertEquals(1,contextDTO.servletDTOs.length);
  assertEquals("testServlet 1",contextDTO.servletDTOs[0].name);
  registerServlet("testServlet 2","/servlet_2");
  RuntimeDTO runtimeDTOWithBothSerlvets=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTOWithBothSerlvets.failedServletDTOs.length);
  contextDTO=assertDefaultContext(runtimeDTOWithBothSerlvets);
  assertEquals(2,contextDTO.servletDTOs.length);
  final Set<String> names=new HashSet<String>();
  names.add(contextDTO.servletDTOs[0].name);
  names.add(contextDTO.servletDTOs[1].name);
  assertTrue(names.contains("testServlet 1"));
  assertTrue(names.contains("testServlet 2"));
}

</code></pre>

<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void dtosForSuccesfullyRegisteredErrorPageForServerErrorCodes() throws Exception {
  dtosForSuccesfullyRegisteredErrorPageWithWildcardErrorCode("5xx",500);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void patternAndErrorPageSpecified() throws InterruptedException {
  Dictionary<String,?> properties=createDictionary(HTTP_WHITEBOARD_SERVLET_PATTERN,"/servlet",HTTP_WHITEBOARD_SERVLET_NAME,"servlet",HTTP_WHITEBOARD_SERVLET_ERROR_PAGE,asList("400"));
  registrations.add(m_context.registerService(Servlet.class.getName(),new TestServlet(),properties));
  awaitServiceRegistration();
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  ServletContextDTO defaultContext=assertDefaultContext(runtimeDTO);
  assertEquals(0,runtimeDTO.failedErrorPageDTOs.length);
  assertEquals(0,runtimeDTO.failedServletDTOs.length);
  assertEquals(1,defaultContext.servletDTOs.length);
  assertEquals(1,defaultContext.errorPageDTOs.length);
  assertEquals("servlet",defaultContext.servletDTOs[0].name);
  assertEquals("servlet",defaultContext.errorPageDTOs[0].name);
  assertArrayEquals(new String[]{"/servlet"},defaultContext.servletDTOs[0].patterns);
  assertArrayEquals(new long[]{400},defaultContext.errorPageDTOs[0].errorCodes);
}

</code></pre>

<pre class="type-4 type-2 type-11 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void httpServiceIdIsSet(){
  ServiceReference<?> httpServiceRef=m_context.getServiceReference(HttpService.class.getName());
  ServiceReference<?> httpServiceRuntimeRef=m_context.getServiceReference(HttpServiceRuntime.class.getName());
  Long expectedId=(Long)httpServiceRef.getProperty(Constants.SERVICE_ID);
  Collection col=(Collection)httpServiceRuntimeRef.getProperty(HTTP_SERVICE_ID);
  Long actualId=(Long)col.iterator().next();
  assertEquals(expectedId,actualId);
}

</code></pre>

<pre class="type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void invalidContextHelperNameAppearsAsFailure() throws InterruptedException {
  registerContext("context A","");
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(1,runtimeDTO.failedServletContextDTOs.length);
  assertEquals("context A",runtimeDTO.failedServletContextDTOs[0].name);
  assertEquals(FAILURE_REASON_VALIDATION_FAILED,runtimeDTO.failedServletContextDTOs[0].failureReason);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multipleErrorPagesForSameErrorCodeChoosenByServiceRankingRules() throws InterruptedException {
  registerErrorPage("error page 1",asList(NullPointerException.class.getName(),"500"));
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  ServletContextDTO defaultContext=assertDefaultContext(runtimeDTO);
  assertEquals(0,runtimeDTO.failedErrorPageDTOs.length);
  assertEquals(1,defaultContext.errorPageDTOs.length);
  Dictionary<String,?> properties=createDictionary(HTTP_WHITEBOARD_SERVLET_ERROR_PAGE,asList("500",IllegalArgumentException.class.getName()),HTTP_WHITEBOARD_SERVLET_NAME,"error page 2",SERVICE_RANKING,Integer.MAX_VALUE);
  CountDownLatch initLatch=new CountDownLatch(1);
  CountDownLatch destroyLatch=new CountDownLatch(1);
  TestServlet testServlet=new TestServlet(initLatch,destroyLatch);
  ServiceRegistration<?> higherRankingServlet=m_context.registerService(Servlet.class.getName(),testServlet,properties);
  registrations.add(higherRankingServlet);
  awaitServiceRegistration(initLatch);
  RuntimeDTO runtimeWithShadowedErrorPage=serviceRuntime.getRuntimeDTO();
  defaultContext=assertDefaultContext(runtimeWithShadowedErrorPage);
  assertEquals(2,defaultContext.errorPageDTOs.length);
  assertEquals("error page 2",defaultContext.errorPageDTOs[0].name);
  assertArrayEquals(new long[]{500},defaultContext.errorPageDTOs[0].errorCodes);
  assertArrayEquals(new String[]{IllegalArgumentException.class.getName()},defaultContext.errorPageDTOs[0].exceptions);
  assertEquals("error page 1",defaultContext.errorPageDTOs[1].name);
  assertEquals(0,defaultContext.errorPageDTOs[1].errorCodes.length);
  assertArrayEquals(new String[]{NullPointerException.class.getName()},defaultContext.errorPageDTOs[1].exceptions);
  assertEquals(1,runtimeWithShadowedErrorPage.failedErrorPageDTOs.length);
  FailedErrorPageDTO failedErrorPageDTO=runtimeWithShadowedErrorPage.failedErrorPageDTOs[0];
  assertEquals("error page 1",failedErrorPageDTO.name);
  assertArrayEquals(new long[]{500},failedErrorPageDTO.errorCodes);
  assertEquals(0,failedErrorPageDTO.exceptions.length);
  assertEquals(FAILURE_REASON_SHADOWED_BY_OTHER_SERVICE,failedErrorPageDTO.failureReason);
  higherRankingServlet.unregister();
  awaitServiceRegistration(destroyLatch);
  runtimeDTO=serviceRuntime.getRuntimeDTO();
  defaultContext=assertDefaultContext(runtimeDTO);
  assertEquals(0,runtimeDTO.failedErrorPageDTOs.length);
  assertEquals(1,defaultContext.errorPageDTOs.length);
  assertEquals("error page 1",defaultContext.errorPageDTOs[0].name);
}

</code></pre>

<pre class="type-8 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Releases resources used by the test cases">TestCleaner</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Releases resources used by the test cases
"></span><br>
@After public void unregisterServices() throws Exception {
  for (  ServiceRegistration<?> serviceRegistration : registrations) {
    try {
      serviceRegistration.unregister();
    }
 catch (    Exception e) {
    }
  }
  registrations.clear();
  Thread.sleep(100);
}

</code></pre>

<pre class="type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void servletWithoutNameGetsFullyQualifiedName() throws InterruptedException {
  Dictionary<String,?> properties=createDictionary(HTTP_WHITEBOARD_SERVLET_PATTERN,"/servlet");
  CountDownLatch initLatch=new CountDownLatch(1);
  registrations.add(m_context.registerService(Servlet.class.getName(),new TestServlet(initLatch,null),properties));
  awaitServiceRegistration(initLatch);
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTO.failedServletDTOs.length);
  ServletContextDTO defaultContext=assertDefaultContext(serviceRuntime.getRuntimeDTO());
  assertEquals(1,defaultContext.servletDTOs.length);
  assertEquals(TestServlet.class.getName(),defaultContext.servletDTOs[0].name);
}

</code></pre>

<pre class="type-2 type-10 type-11 type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void successfulSetup() throws InterruptedException {
  CountDownLatch initLatch=new CountDownLatch(6);
  registerContext("test-context","/test-context");
  registerServlet("default servlet","/default",initLatch);
  registerFilter("default filter","/default",initLatch);
  registerErrorPage("default error page",asList(Exception.class.getName()),initLatch);
  registerResource("/","/default/resource");
  registerListener(ServletRequestListener.class,true);
  registerServlet("context servlet","/default","(" + HTTP_WHITEBOARD_CONTEXT_NAME + "=test-context)",initLatch);
  registerFilter("context filter","/default","(" + HTTP_WHITEBOARD_CONTEXT_NAME + "=test-context)",initLatch);
  registerErrorPage("context error page",asList("500"),"(" + HTTP_WHITEBOARD_CONTEXT_NAME + "=test-context)",initLatch);
  registerResource("/","/test-contextd/resource","(" + HTTP_WHITEBOARD_CONTEXT_NAME + "=test-context)");
  registerListener(ServletRequestListener.class,true,"(" + HTTP_WHITEBOARD_CONTEXT_NAME + "=test-context)");
  awaitServiceRegistration(initLatch);
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTO.failedErrorPageDTOs.length);
  assertEquals(0,runtimeDTO.failedFilterDTOs.length);
  assertEquals(0,runtimeDTO.failedListenerDTOs.length);
  assertEquals(0,runtimeDTO.failedResourceDTOs.length);
  assertEquals(0,runtimeDTO.failedServletContextDTOs.length);
  assertEquals(0,runtimeDTO.failedServletDTOs.length);
  assertEquals(3,runtimeDTO.servletContextDTOs.length);
  assertEquals(HTTP_CONTEXT_NAME,runtimeDTO.servletContextDTOs[0].name);
  assertEquals("test-context",runtimeDTO.servletContextDTOs[1].name);
  assertEquals("default",runtimeDTO.servletContextDTOs[2].name);
  ServletContextDTO defaultContextDTO=runtimeDTO.servletContextDTOs[2];
  long contextServiceId=defaultContextDTO.serviceId;
  assertEquals(1,defaultContextDTO.servletDTOs.length);
  assertEquals("default servlet",defaultContextDTO.servletDTOs[0].name);
  assertEquals(contextServiceId,defaultContextDTO.servletDTOs[0].servletContextId);
  assertEquals(1,defaultContextDTO.filterDTOs.length);
  assertEquals("default filter",defaultContextDTO.filterDTOs[0].name);
  assertEquals(contextServiceId,defaultContextDTO.filterDTOs[0].servletContextId);
  assertEquals(1,defaultContextDTO.errorPageDTOs.length);
  assertEquals(Exception.class.getName(),defaultContextDTO.errorPageDTOs[0].exceptions[0]);
  assertEquals(contextServiceId,defaultContextDTO.errorPageDTOs[0].servletContextId);
  assertEquals(1,defaultContextDTO.listenerDTOs.length);
  assertEquals(ServletRequestListener.class.getName(),defaultContextDTO.listenerDTOs[0].types[0]);
  assertEquals(contextServiceId,defaultContextDTO.listenerDTOs[0].servletContextId);
  ServletContextDTO testContextDTO=runtimeDTO.servletContextDTOs[1];
  contextServiceId=testContextDTO.serviceId;
  assertEquals(1,testContextDTO.servletDTOs.length);
  assertEquals("context servlet",testContextDTO.servletDTOs[0].name);
  assertEquals(contextServiceId,testContextDTO.servletDTOs[0].servletContextId);
  assertEquals(1,testContextDTO.filterDTOs.length);
  assertEquals("context filter",testContextDTO.filterDTOs[0].name);
  assertEquals(contextServiceId,testContextDTO.filterDTOs[0].servletContextId);
  assertEquals(1,testContextDTO.errorPageDTOs.length);
  assertEquals(500L,testContextDTO.errorPageDTOs[0].errorCodes[0]);
  assertEquals(contextServiceId,testContextDTO.errorPageDTOs[0].servletContextId);
  assertEquals(1,testContextDTO.listenerDTOs.length);
  assertEquals(ServletRequestListener.class.getName(),testContextDTO.listenerDTOs[0].types[0]);
  assertEquals(contextServiceId,testContextDTO.listenerDTOs[0].servletContextId);
}

</code></pre>

<pre class="type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void exceptionInServletInitDuringServletRemovalAppearsAsFailure() throws ServletException, InterruptedException {
  Dictionary<String,?> properties1=createDictionary(HTTP_WHITEBOARD_SERVLET_PATTERN,"/servlet1",HTTP_WHITEBOARD_SERVLET_NAME,"servlet1");
  final CountDownLatch initLatch1=new CountDownLatch(1);
  @SuppressWarnings("serial") Servlet failingServlet1=new TestServlet(initLatch1,null){
    @Override public void init() throws ServletException {
      if (initLatch1.getCount() == 0) {
        throw new ServletException();
      }
      super.init();
    }
  }
;
  Dictionary<String,?> properties2=createDictionary(HTTP_WHITEBOARD_SERVLET_PATTERN,"/servlet2",HTTP_WHITEBOARD_SERVLET_NAME,"servlet2");
  final CountDownLatch initLatch2=new CountDownLatch(1);
  @SuppressWarnings("serial") Servlet failingServlet2=new TestServlet(initLatch2,null){
    @Override public void init() throws ServletException {
      if (initLatch2.getCount() == 0) {
        throw new ServletException();
      }
      super.init();
    }
  }
;
  Dictionary<String,?> propertiesShadowing=createDictionary(HTTP_WHITEBOARD_SERVLET_PATTERN,asList("/servlet1","/servlet2"),HTTP_WHITEBOARD_SERVLET_NAME,"servletShadowing",SERVICE_RANKING,Integer.MAX_VALUE);
  CountDownLatch initLatchShadowing=new CountDownLatch(1);
  Servlet servletShadowing=new TestServlet(initLatchShadowing,null);
  registrations.add(m_context.registerService(Servlet.class.getName(),failingServlet1,properties1));
  registrations.add(m_context.registerService(Servlet.class.getName(),failingServlet2,properties2));
  awaitServiceRegistration(initLatch1);
  awaitServiceRegistration(initLatch2);
  ServiceRegistration<?> shadowingRegistration=m_context.registerService(Servlet.class.getName(),servletShadowing,propertiesShadowing);
  registrations.add(shadowingRegistration);
  awaitServiceRegistration(initLatchShadowing);
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(2,runtimeDTO.failedServletDTOs.length);
  assertEquals(FAILURE_REASON_SHADOWED_BY_OTHER_SERVICE,runtimeDTO.failedServletDTOs[0].failureReason);
  assertEquals(FAILURE_REASON_SHADOWED_BY_OTHER_SERVICE,runtimeDTO.failedServletDTOs[1].failureReason);
  shadowingRegistration.unregister();
  runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(2,runtimeDTO.failedServletDTOs.length);
  assertEquals(FAILURE_REASON_EXCEPTION_ON_INIT,runtimeDTO.failedServletDTOs[0].failureReason);
  assertEquals(FAILURE_REASON_EXCEPTION_ON_INIT,runtimeDTO.failedServletDTOs[1].failureReason);
}

</code></pre>

<pre class="type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dtosForSuccesfullyRegisteredContexts() throws Exception {
  registerContext("contextA","/contextA");
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTOWithAdditionalContext=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTOWithAdditionalContext.failedServletContextDTOs.length);
  assertEquals(3,runtimeDTOWithAdditionalContext.servletContextDTOs.length);
  assertEquals(HTTP_CONTEXT_NAME,runtimeDTOWithAdditionalContext.servletContextDTOs[0].name);
  assertEquals("",runtimeDTOWithAdditionalContext.servletContextDTOs[0].contextPath);
  assertEquals("contextA",runtimeDTOWithAdditionalContext.servletContextDTOs[1].name);
  assertEquals("/contextA",runtimeDTOWithAdditionalContext.servletContextDTOs[1].contextPath);
  assertEquals("default",runtimeDTOWithAdditionalContext.servletContextDTOs[2].name);
  assertEquals("",runtimeDTOWithAdditionalContext.servletContextDTOs[2].contextPath);
  registerContext("contextB","/contextB");
  RuntimeDTO runtimeDTOWithAllContexts=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTOWithAllContexts.failedServletContextDTOs.length);
  assertEquals(4,runtimeDTOWithAllContexts.servletContextDTOs.length);
  assertEquals(HTTP_CONTEXT_NAME,runtimeDTOWithAdditionalContext.servletContextDTOs[0].name);
  assertEquals("",runtimeDTOWithAdditionalContext.servletContextDTOs[0].contextPath);
  assertEquals("contextA",runtimeDTOWithAllContexts.servletContextDTOs[1].name);
  assertEquals("/contextA",runtimeDTOWithAllContexts.servletContextDTOs[1].contextPath);
  assertEquals("contextB",runtimeDTOWithAllContexts.servletContextDTOs[2].name);
  assertEquals("/contextB",runtimeDTOWithAllContexts.servletContextDTOs[2].contextPath);
  assertEquals("default",runtimeDTOWithAllContexts.servletContextDTOs[3].name);
  assertEquals("",runtimeDTOWithAllContexts.servletContextDTOs[3].contextPath);
}

</code></pre>

<pre class="type-2 type-1 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void serviceRegisteredWithHttpServiceHasNegativeServiceId() throws Exception {
  CountDownLatch initLatch=new CountDownLatch(1);
  register("/test",new TestServlet(initLatch,null));
  awaitServiceRegistration(initLatch);
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(2,runtimeDTO.servletContextDTOs.length);
  assertEquals(1,runtimeDTO.servletContextDTOs[0].servletDTOs.length);
  assertTrue(0 > runtimeDTO.servletContextDTOs[0].servletDTOs[0].serviceId);
}

</code></pre>

<pre class="type-4 type-2 type-1 type-10 type-11 type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void httpRuntimeServiceIsAvailableAfterBundleActivation() throws Exception {
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  ServiceReferenceDTO serviceDTO=runtimeDTO.serviceDTO;
  assertNotNull(serviceDTO);
  assertNotNull(serviceDTO.properties);
  assertTrue(serviceDTO.properties.containsKey(HTTP_SERVICE_ID));
  assertTrue(serviceDTO.properties.containsKey(HTTP_SERVICE_ENDPOINT));
  assertTrue(serviceDTO.properties.get(HTTP_SERVICE_ID) instanceof Collection);
  final Collection ids=(Collection)serviceDTO.properties.get(HTTP_SERVICE_ID);
  assertTrue(ids.size() == 1);
  assertTrue(ids.iterator().next() instanceof Long);
  assertTrue(0 < (Long)ids.iterator().next());
  assertEquals(0,runtimeDTO.failedErrorPageDTOs.length);
  assertEquals(0,runtimeDTO.failedFilterDTOs.length);
  assertEquals(0,runtimeDTO.failedListenerDTOs.length);
  assertEquals(0,runtimeDTO.failedResourceDTOs.length);
  assertEquals(0,runtimeDTO.failedServletContextDTOs.length);
  assertEquals(0,runtimeDTO.failedServletDTOs.length);
  ServletContextDTO defaultContext=assertDefaultContext(runtimeDTO);
  assertEquals(0,defaultContext.attributes.size());
  assertEquals("",defaultContext.contextPath);
  assertEquals(0,defaultContext.initParams.size());
  assertEquals(0,defaultContext.filterDTOs.length);
  assertEquals(0,defaultContext.servletDTOs.length);
  assertEquals(0,defaultContext.resourceDTOs.length);
  assertEquals(0,defaultContext.errorPageDTOs.length);
  assertEquals(0,defaultContext.listenerDTOs.length);
}

</code></pre>

<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void dtosForSuccesfullyRegisteredErrorPageForClientErrorCodes() throws Exception {
  dtosForSuccesfullyRegisteredErrorPageWithWildcardErrorCode("4xx",400);
}

</code></pre>

<pre class="type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void selectionOfNonExistingContextHelperAppearsAsFailure() throws InterruptedException {
  registerServlet("servlet 1","/","(" + HTTP_WHITEBOARD_CONTEXT_NAME + "=contextA)",null);
  awaitServiceRegistration();
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(1,runtimeDTO.failedServletDTOs.length);
  assertEquals("servlet 1",runtimeDTO.failedServletDTOs[0].name);
  assertEquals(FAILURE_REASON_NO_SERVLET_CONTEXT_MATCHING,runtimeDTO.failedServletDTOs[0].failureReason);
  registerContext("contextA","/contextA");
  runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTO.failedServletDTOs.length);
  assertEquals(3,runtimeDTO.servletContextDTOs.length);
  assertEquals("contextA",runtimeDTO.servletContextDTOs[1].name);
  assertEquals(1,runtimeDTO.servletContextDTOs[1].servletDTOs.length);
  assertEquals("servlet 1",runtimeDTO.servletContextDTOs[1].servletDTOs[0].name);
}

</code></pre>

<pre class="type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void invalidContextHelperPathAppearsAsFailure() throws InterruptedException {
  registerContext("contextA","#");
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(1,runtimeDTO.failedServletContextDTOs.length);
  assertEquals("#",runtimeDTO.failedServletContextDTOs[0].contextPath);
  assertEquals(FAILURE_REASON_VALIDATION_FAILED,runtimeDTO.failedServletContextDTOs[0].failureReason);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dtosForSuccesfullyRegisteredFilters() throws Exception {
  registerFilter("testFilter 1","/servlet_1");
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTOWithFirstFilter=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTOWithFirstFilter.failedFilterDTOs.length);
  ServletContextDTO contextDTO=assertDefaultContext(runtimeDTOWithFirstFilter);
  assertEquals(1,contextDTO.filterDTOs.length);
  assertEquals("testFilter 1",contextDTO.filterDTOs[0].name);
  registerFilter("testFilter 2","/servlet_1");
  RuntimeDTO runtimeDTOWithBothFilters=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTOWithBothFilters.failedFilterDTOs.length);
  contextDTO=assertDefaultContext(runtimeDTOWithBothFilters);
  assertEquals(2,contextDTO.filterDTOs.length);
  assertEquals("testFilter 1",contextDTO.filterDTOs[0].name);
  assertEquals("testFilter 2",contextDTO.filterDTOs[1].name);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dtosForSuccesfullyRegisteredListeners() throws Exception {
  registerListener(ServletContextListener.class,true);
  awaitService(ServletContextListener.class.getName());
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTOWithFirstListener=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTOWithFirstListener.failedListenerDTOs.length);
  ServletContextDTO contextDTO=assertDefaultContext(runtimeDTOWithFirstListener);
  assertEquals(1,contextDTO.listenerDTOs.length);
  assertEquals(ServletContextListener.class.getName(),contextDTO.listenerDTOs[0].types[0]);
  registerListener(ServletContextAttributeListener.class,true);
  registerListener(ServletRequestListener.class,true);
  registerListener(ServletRequestAttributeListener.class,true);
  registerListener(HttpSessionListener.class,true);
  registerListener(HttpSessionAttributeListener.class,true);
  awaitService(ServletContextAttributeListener.class.getName());
  awaitService(ServletRequestListener.class.getName());
  awaitService(ServletRequestAttributeListener.class.getName());
  awaitService(HttpSessionListener.class.getName());
  awaitService(HttpSessionAttributeListener.class.getName());
  RuntimeDTO runtimeDTOWithAllListeners=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTOWithAllListeners.failedListenerDTOs.length);
  contextDTO=assertDefaultContext(runtimeDTOWithAllListeners);
  assertEquals(6,contextDTO.listenerDTOs.length);
  assertEquals(ServletContextListener.class.getName(),contextDTO.listenerDTOs[0].types[0]);
  assertEquals(ServletContextAttributeListener.class.getName(),contextDTO.listenerDTOs[1].types[0]);
  assertEquals(ServletRequestListener.class.getName(),contextDTO.listenerDTOs[2].types[0]);
  assertEquals(ServletRequestAttributeListener.class.getName(),contextDTO.listenerDTOs[3].types[0]);
  assertEquals(HttpSessionListener.class.getName(),contextDTO.listenerDTOs[4].types[0]);
  assertEquals(HttpSessionAttributeListener.class.getName(),contextDTO.listenerDTOs[5].types[0]);
}

</code></pre>

<pre class="type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void hiddenDefaultContextAppearsAsFailure() throws InterruptedException {
  registerContext("default","");
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(1,runtimeDTO.failedServletContextDTOs.length);
  assertEquals("default",runtimeDTO.failedServletContextDTOs[0].name);
  assertDefaultContext(runtimeDTO);
}

</code></pre>

<pre class="type-4 type-2 type-1 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dtosForSuccesfullyRegisteredResources() throws Exception {
  registerResource("/resources","/resource_1/*");
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTOWithFirstResource=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTOWithFirstResource.failedResourceDTOs.length);
  ServletContextDTO contextDTO=assertDefaultContext(runtimeDTOWithFirstResource);
  assertEquals(1,contextDTO.resourceDTOs.length);
  assertEquals("/resources",contextDTO.resourceDTOs[0].prefix);
  assertArrayEquals(new String[]{"/resource_1/*"},contextDTO.resourceDTOs[0].patterns);
  registerResource("/resources","/resource_2/*");
  RuntimeDTO runtimeDTOWithBothResources=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTOWithBothResources.failedResourceDTOs.length);
  contextDTO=assertDefaultContext(runtimeDTOWithBothResources);
  assertEquals(2,contextDTO.resourceDTOs.length);
  assertEquals("/resources",contextDTO.resourceDTOs[0].prefix);
  assertEquals(1,contextDTO.resourceDTOs[0].patterns.length);
  assertEquals(1,contextDTO.resourceDTOs[1].patterns.length);
  final Set<String> patterns=new HashSet<String>();
  patterns.add(contextDTO.resourceDTOs[0].patterns[0]);
  patterns.add(contextDTO.resourceDTOs[1].patterns[0]);
  assertTrue(patterns.contains("/resource_1/*"));
  assertTrue(patterns.contains("/resource_2/*"));
}

</code></pre>

<pre class="type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void missingContextHelperNameAppearsAsFailure(){
  Dictionary<String,?> properties=createDictionary(HTTP_WHITEBOARD_CONTEXT_PATH,"");
  registrations.add(m_context.registerService(ServletContextHelper.class.getName(),mock(ServletContextHelper.class),properties));
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(1,runtimeDTO.failedServletContextDTOs.length);
  assertEquals(null,runtimeDTO.failedServletContextDTOs[0].name);
  assertEquals(FAILURE_REASON_VALIDATION_FAILED,runtimeDTO.failedServletContextDTOs[0].failureReason);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void contextReplacedWithHigherRankingContext() throws Exception {
  ServiceRegistration<?> firstContext=registerContext("test-context","/first");
  Long firstContextId=(Long)firstContext.getReference().getProperty(Constants.SERVICE_ID);
  CountDownLatch initLatch=new CountDownLatch(1);
  registerServlet("servlet","/servlet","(" + HTTP_WHITEBOARD_CONTEXT_NAME + "=test-context)",initLatch);
  awaitServiceRegistration(initLatch);
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTO.failedServletContextDTOs.length);
  assertEquals(3,runtimeDTO.servletContextDTOs.length);
  assertEquals(firstContextId.longValue(),runtimeDTO.servletContextDTOs[1].serviceId);
  assertEquals("test-context",runtimeDTO.servletContextDTOs[1].name);
  assertEquals("/first",runtimeDTO.servletContextDTOs[1].contextPath);
  assertEquals("default",runtimeDTO.servletContextDTOs[2].name);
  assertEquals(HTTP_CONTEXT_NAME,runtimeDTO.servletContextDTOs[0].name);
  assertEquals(1,runtimeDTO.servletContextDTOs[1].servletDTOs.length);
  assertEquals("servlet",runtimeDTO.servletContextDTOs[1].servletDTOs[0].name);
  Dictionary<String,?> properties=createDictionary(HTTP_WHITEBOARD_CONTEXT_NAME,"test-context",HTTP_WHITEBOARD_CONTEXT_PATH,"/second",SERVICE_RANKING,Integer.MAX_VALUE);
  ServiceRegistration<?> secondContext=m_context.registerService(ServletContextHelper.class.getName(),mock(ServletContextHelper.class),properties);
  registrations.add(secondContext);
  Long secondContextId=(Long)secondContext.getReference().getProperty(Constants.SERVICE_ID);
  runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(1,runtimeDTO.failedServletContextDTOs.length);
  assertEquals(firstContextId.longValue(),runtimeDTO.failedServletContextDTOs[0].serviceId);
  assertEquals("test-context",runtimeDTO.failedServletContextDTOs[0].name);
  assertEquals("/first",runtimeDTO.failedServletContextDTOs[0].contextPath);
  assertEquals(3,runtimeDTO.servletContextDTOs.length);
  final List<String> names=new ArrayList<String>();
  for (  final ServletContextDTO dto : runtimeDTO.servletContextDTOs) {
    names.add(dto.name);
  }
  final int httpContextIndex=names.indexOf(HTTP_CONTEXT_NAME);
  final int secondContextIndex=names.indexOf("test-context");
  final int defaultContextIndex=names.indexOf("default");
  assertEquals(secondContextId.longValue(),runtimeDTO.servletContextDTOs[secondContextIndex].serviceId);
  assertEquals("test-context",runtimeDTO.servletContextDTOs[secondContextIndex].name);
  assertEquals("/second",runtimeDTO.servletContextDTOs[secondContextIndex].contextPath);
  assertEquals("default",runtimeDTO.servletContextDTOs[defaultContextIndex].name);
  assertEquals(HTTP_CONTEXT_NAME,runtimeDTO.servletContextDTOs[httpContextIndex].name);
  assertEquals(1,runtimeDTO.servletContextDTOs[secondContextIndex].servletDTOs.length);
  assertEquals("servlet",runtimeDTO.servletContextDTOs[secondContextIndex].servletDTOs[0].name);
  secondContext.unregister();
  runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTO.failedServletContextDTOs.length);
  assertEquals(3,runtimeDTO.servletContextDTOs.length);
  assertEquals(firstContextId.longValue(),runtimeDTO.servletContextDTOs[1].serviceId);
  assertEquals("test-context",runtimeDTO.servletContextDTOs[1].name);
  assertEquals("/first",runtimeDTO.servletContextDTOs[1].contextPath);
  assertEquals("default",runtimeDTO.servletContextDTOs[2].name);
  assertEquals(HTTP_CONTEXT_NAME,runtimeDTO.servletContextDTOs[0].name);
  assertEquals(1,runtimeDTO.servletContextDTOs[1].servletDTOs.length);
  assertEquals("servlet",runtimeDTO.servletContextDTOs[1].servletDTOs[0].name);
}

</code></pre>

<pre class="type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void contextHelperWithDuplicateNameAppearsAsFailure() throws InterruptedException {
  ServiceRegistration<?> firstContextReg=registerContext("contextA","/first");
  registerContext("contextA","/second");
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(1,runtimeDTO.failedServletContextDTOs.length);
  assertEquals("contextA",runtimeDTO.failedServletContextDTOs[0].name);
  assertEquals("/second",runtimeDTO.failedServletContextDTOs[0].contextPath);
  assertEquals(FAILURE_REASON_SHADOWED_BY_OTHER_SERVICE,runtimeDTO.failedServletContextDTOs[0].failureReason);
  assertEquals(3,runtimeDTO.servletContextDTOs.length);
  assertEquals(HTTP_CONTEXT_NAME,runtimeDTO.servletContextDTOs[0].name);
  assertEquals("default",runtimeDTO.servletContextDTOs[2].name);
  assertEquals("contextA",runtimeDTO.servletContextDTOs[1].name);
  assertEquals("/first",runtimeDTO.servletContextDTOs[1].contextPath);
  firstContextReg.unregister();
  runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTO.failedServletContextDTOs.length);
  assertEquals(3,runtimeDTO.servletContextDTOs.length);
  assertEquals(HTTP_CONTEXT_NAME,runtimeDTO.servletContextDTOs[0].name);
  assertEquals("default",runtimeDTO.servletContextDTOs[2].name);
  assertEquals("contextA",runtimeDTO.servletContextDTOs[1].name);
  assertEquals("/second",runtimeDTO.servletContextDTOs[1].contextPath);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void differentTargetIsIgnored() throws InterruptedException {
  Dictionary<String,?> properties=createDictionary(HTTP_WHITEBOARD_SERVLET_PATTERN,"/servlet",HTTP_WHITEBOARD_SERVLET_NAME,"servlet",HTTP_WHITEBOARD_TARGET,"(org.osgi.service.http.port=8282)");
  registrations.add(m_context.registerService(Servlet.class.getName(),new TestServlet(),properties));
  awaitServiceRegistration();
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTO.failedServletDTOs.length);
  ServletContextDTO defaultContext=assertDefaultContext(runtimeDTO);
  assertEquals(0,defaultContext.servletDTOs.length);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dtosForSuccesfullyRegisteredErrorPages() throws Exception {
  registerErrorPage("error page 1",asList("404",NoSuchElementException.class.getName()));
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTOWithFirstErrorPage=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTOWithFirstErrorPage.failedServletDTOs.length);
  assertEquals(0,runtimeDTOWithFirstErrorPage.failedErrorPageDTOs.length);
  ServletContextDTO contextDTO=assertDefaultContext(runtimeDTOWithFirstErrorPage);
  assertEquals(1,contextDTO.errorPageDTOs.length);
  assertEquals("error page 1",contextDTO.errorPageDTOs[0].name);
  assertArrayEquals(new String[]{NoSuchElementException.class.getName()},contextDTO.errorPageDTOs[0].exceptions);
  assertArrayEquals(new long[]{404},contextDTO.errorPageDTOs[0].errorCodes);
  registerErrorPage("error page 2",asList("500",ServletException.class.getName()));
  RuntimeDTO runtimeDTOWithBothErrorPages=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTOWithBothErrorPages.failedServletDTOs.length);
  assertEquals(0,runtimeDTOWithBothErrorPages.failedErrorPageDTOs.length);
  contextDTO=assertDefaultContext(runtimeDTOWithBothErrorPages);
  assertEquals(2,contextDTO.errorPageDTOs.length);
  assertEquals("error page 1",contextDTO.errorPageDTOs[0].name);
  assertEquals("error page 2",contextDTO.errorPageDTOs[1].name);
  assertArrayEquals(new String[]{ServletException.class.getName()},contextDTO.errorPageDTOs[1].exceptions);
  assertArrayEquals(new long[]{500},contextDTO.errorPageDTOs[1].errorCodes);
}

</code></pre>

<pre class="type-4 type-5 type-2 type-14 type-10 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void dtosAreIndependentCopies() throws Exception {
  Dictionary<String,?> properties=createDictionary(HTTP_WHITEBOARD_SERVLET_PATTERN,"/test",HTTP_WHITEBOARD_SERVLET_NAME,"servlet 1",HTTP_WHITEBOARD_SERVLET_INIT_PARAM_PREFIX + "test","testValue");
  CountDownLatch initLatch=new CountDownLatch(1);
  registrations.add(m_context.registerService(Servlet.class.getName(),new TestServlet(initLatch,null),properties));
  awaitServiceRegistration(initLatch);
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTOWithFirstSerlvet=serviceRuntime.getRuntimeDTO();
  registerServlet("testServlet 2","/servlet_2");
  RuntimeDTO runtimeDTOWithTwoSerlvets=serviceRuntime.getRuntimeDTO();
  assertNotSame(runtimeDTOWithFirstSerlvet,runtimeDTOWithTwoSerlvets);
  ServletContextDTO defaultContextFirstServlet=assertDefaultContext(runtimeDTOWithFirstSerlvet);
  ServletContextDTO defaultContextTwoServlets=assertDefaultContext(runtimeDTOWithTwoSerlvets);
  assertNotSame(defaultContextFirstServlet.servletDTOs[0].patterns,defaultContextTwoServlets.servletDTOs[0].patterns);
  boolean mapsModifiable=true;
  try {
    defaultContextTwoServlets.servletDTOs[0].initParams.clear();
  }
 catch (  UnsupportedOperationException e) {
    mapsModifiable=false;
  }
  if (mapsModifiable) {
    assertNotSame(defaultContextFirstServlet.servletDTOs[0].initParams,defaultContextTwoServlets.servletDTOs[0].initParams);
  }
}

</code></pre>

<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void dtosForSuccesfullyRegisteredErrorPageForServerErrorCodesCaseInsensitive() throws Exception {
  dtosForSuccesfullyRegisteredErrorPageWithWildcardErrorCode("5XX",500);
}

</code></pre>

<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void dtosForSuccesfullyRegisteredErrorPageForClientErrorCodesCaseInsensitive() throws Exception {
  dtosForSuccesfullyRegisteredErrorPageWithWildcardErrorCode("4xX",400);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void serviceWithoutRequiredPropertiesIsIgnored() throws InterruptedException {
  Dictionary<String,?> properties=createDictionary(HTTP_WHITEBOARD_SERVLET_NAME,"servlet");
  registrations.add(m_context.registerService(Servlet.class.getName(),new TestServlet(),properties));
  awaitServiceRegistration();
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTO.failedServletContextDTOs.length);
  ServletContextDTO defaultContext=assertDefaultContext(runtimeDTO);
  assertEquals(0,defaultContext.servletDTOs.length);
}

</code></pre>

<pre class="type-4 type-2 type-10 type-11 type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void mulitpleServletsWithSamePatternHttpServiceRegistrationWins() throws Exception {
  registerServlet("servlet 1","/pathcollision");
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTO.failedServletDTOs.length);
  ServletContextDTO defaultContext=assertDefaultContext(runtimeDTO);
  assertEquals(1,defaultContext.servletDTOs.length);
  CountDownLatch initLatch=new CountDownLatch(1);
  CountDownLatch destroyLatch=new CountDownLatch(1);
  TestServlet testServlet=new TestServlet(initLatch,destroyLatch);
  register("/pathcollision",testServlet);
  RuntimeDTO runtimeWithShadowedServlet=serviceRuntime.getRuntimeDTO();
  awaitServiceRegistration(initLatch);
  defaultContext=assertDefaultContext(runtimeWithShadowedServlet);
  ServletContextDTO httpServiceContext=runtimeWithShadowedServlet.servletContextDTOs[0];
  assertEquals(HTTP_CONTEXT_NAME,httpServiceContext.name);
  assertEquals(1,httpServiceContext.servletDTOs.length);
  assertArrayEquals(new String[]{"/pathcollision"},httpServiceContext.servletDTOs[0].patterns);
  assertEquals(1,defaultContext.servletDTOs.length);
  ServletDTO servletDTO=defaultContext.servletDTOs[0];
  assertEquals("servlet 1",servletDTO.name);
  final RequestInfoDTO infoDTO=serviceRuntime.calculateRequestInfoDTO("/pathcollision");
  assertEquals(httpServiceContext.serviceId,infoDTO.servletDTO.servletContextId);
  unregister(testServlet);
  awaitServiceRegistration(destroyLatch);
  runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(0,runtimeDTO.failedServletDTOs.length);
  defaultContext=assertDefaultContext(runtimeDTO);
  assertEquals(1,defaultContext.servletDTOs.length);
  assertEquals("servlet 1",defaultContext.servletDTOs[0].name);
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void awaitServiceRuntime() throws Exception {
  awaitService(HttpServiceRuntime.class.getName());
}

</code></pre>

<pre class="type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void exceptionInFilterInitAppearsAsFailure() throws ServletException, InterruptedException {
  Dictionary<String,?> properties=createDictionary(HTTP_WHITEBOARD_FILTER_PATTERN,"/filter",HTTP_WHITEBOARD_FILTER_NAME,"filter");
  CountDownLatch initLatch=new CountDownLatch(1);
  Filter failingFilter=new TestFilter(initLatch,null){
    @Override public void init(    FilterConfig config) throws ServletException {
      super.init(config);
      throw new ServletException();
    }
  }
;
  registrations.add(m_context.registerService(Filter.class.getName(),failingFilter,properties));
  awaitServiceRegistration(initLatch);
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(1,runtimeDTO.failedFilterDTOs.length);
  assertEquals("filter",runtimeDTO.failedFilterDTOs[0].name);
  assertEquals(FAILURE_REASON_EXCEPTION_ON_INIT,runtimeDTO.failedFilterDTOs[0].failureReason);
}

</code></pre>

<pre class="type-2 type-10 type-11 type-13 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void requestInfoDTO() throws Exception {
  registerServlet("servlet","/default");
  registerFilter("filter1","/default");
  registerFilter("filter2","/default");
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  ServletContextDTO defaultContext=assertDefaultContext(serviceRuntime.getRuntimeDTO());
  long defaultContextId=defaultContext.serviceId;
  RequestInfoDTO requestInfoDTO=serviceRuntime.calculateRequestInfoDTO("/default");
  assertEquals("/default",requestInfoDTO.path);
  assertEquals(defaultContextId,requestInfoDTO.servletContextId);
  assertEquals("servlet",requestInfoDTO.servletDTO.name);
  assertEquals(2,requestInfoDTO.filterDTOs.length);
  assertEquals("filter1",requestInfoDTO.filterDTOs[0].name);
  assertEquals("filter2",requestInfoDTO.filterDTOs[1].name);
}

</code></pre>

<pre class="type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void invalidListenerPopertyValueAppearsAsFailure() throws Exception {
  Dictionary<String,?> properties=createDictionary(HTTP_WHITEBOARD_LISTENER,"invalid");
  registrations.add(m_context.registerService(ServletRequestListener.class.getName(),mock(ServletRequestListener.class),properties));
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(1,runtimeDTO.failedListenerDTOs.length);
  assertEquals(FAILURE_REASON_VALIDATION_FAILED,runtimeDTO.failedListenerDTOs[0].failureReason);
}

</code></pre>

<pre class="type-2 type-10 type-11 type-12 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void exceptionInServletInitAppearsAsFailure() throws ServletException, InterruptedException {
  Dictionary<String,?> properties=createDictionary(HTTP_WHITEBOARD_SERVLET_PATTERN,"/servlet",HTTP_WHITEBOARD_SERVLET_NAME,"servlet");
  CountDownLatch initLatch=new CountDownLatch(1);
  @SuppressWarnings("serial") Servlet failingServlet=new TestServlet(initLatch,null){
    @Override public void init() throws ServletException {
      super.init();
      throw new ServletException();
    }
  }
;
  registrations.add(m_context.registerService(Servlet.class.getName(),failingServlet,properties));
  awaitServiceRegistration(initLatch);
  HttpServiceRuntime serviceRuntime=(HttpServiceRuntime)getService(HttpServiceRuntime.class.getName());
  assertNotNull("HttpServiceRuntime unavailable",serviceRuntime);
  RuntimeDTO runtimeDTO=serviceRuntime.getRuntimeDTO();
  assertEquals(1,runtimeDTO.failedServletDTOs.length);
  assertEquals("servlet",runtimeDTO.failedServletDTOs[0].name);
  assertEquals(FAILURE_REASON_EXCEPTION_ON_INIT,runtimeDTO.failedServletDTOs[0].failureReason);
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
