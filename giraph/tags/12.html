<h3><span class=" glyphicon glyphicon-tag"/>&nbspBranchVerifier</h3><kbd>Verifies assertions inside branch conditions</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.giraph.TestBspBasic </h4><pre class="type-3 type-12 type-4 type-5 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Run a sample BSP job locally and test MasterCompute.
 * @throws IOException
 * @throws ClassNotFoundException
 * @throws InterruptedException
 */
@Test public void testBspMasterCompute() throws IOException, InterruptedException, ClassNotFoundException {
  GiraphConfiguration conf=new GiraphConfiguration();
  conf.setComputationClass(SimpleMasterComputeComputation.class);
  conf.setVertexInputFormatClass(SimplePageRankVertexInputFormat.class);
  conf.setMasterComputeClass(SimpleMasterComputeComputation.SimpleMasterCompute.class);
  conf.setWorkerContextClass(SimpleMasterComputeComputation.SimpleMasterComputeWorkerContext.class);
  GiraphJob job=prepareJob(getCallingMethodName(),conf);
  assertTrue(job.run(true));
  if (!runningInDistributedMode()) {
    double finalSum=SimpleMasterComputeComputation.SimpleMasterComputeWorkerContext.getFinalSum();
    System.out.println("testBspMasterCompute: finalSum=" + finalSum);
    assertEquals(32.5,finalSum,0d);
  }
}

</code></pre>

<br>
<pre class="type-3 type-12 type-4 type-5 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Run a sample BSP job locally and test supersteps.
 * @throws IOException
 * @throws ClassNotFoundException
 * @throws InterruptedException
 */
@Test public void testBspSuperStep() throws IOException, InterruptedException, ClassNotFoundException {
  String callingMethod=getCallingMethodName();
  Path outputPath=getTempPath(callingMethod);
  GiraphConfiguration conf=new GiraphConfiguration();
  conf.setComputationClass(SimpleSuperstepComputation.class);
  conf.setVertexInputFormatClass(SimpleSuperstepVertexInputFormat.class);
  conf.setVertexOutputFormatClass(SimpleSuperstepVertexOutputFormat.class);
  GiraphJob job=prepareJob(callingMethod,conf,outputPath);
  Configuration configuration=job.getConfiguration();
  GeneratedVertexReader.READER_VERTICES.set(configuration,10);
  assertTrue(job.run(true));
  if (!runningInDistributedMode()) {
    FileStatus fileStatus=getSinglePartFileStatus(configuration,outputPath);
    assertEquals(49l,fileStatus.getLen());
  }
}

</code></pre>

<br>
<pre class="type-3 type-12 type-4 type-5 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Run a sample BSP job locally and test PageRank with AggregatorWriter.
 * @throws IOException
 * @throws ClassNotFoundException
 * @throws InterruptedException
 */
@Test public void testBspPageRankWithAggregatorWriter() throws IOException, InterruptedException, ClassNotFoundException {
  Path outputPath=getTempPath(getCallingMethodName());
  GiraphConfiguration conf=new GiraphConfiguration();
  conf.setComputationClass(SimplePageRankComputation.class);
  conf.setAggregatorWriterClass(TextAggregatorWriter.class);
  conf.setMasterComputeClass(SimplePageRankComputation.SimplePageRankMasterCompute.class);
  conf.setVertexInputFormatClass(SimplePageRankVertexInputFormat.class);
  conf.setVertexOutputFormatClass(SimplePageRankComputation.SimplePageRankVertexOutputFormat.class);
  conf.setWorkerContextClass(SimplePageRankComputation.SimplePageRankWorkerContext.class);
  GiraphJob job=prepareJob(getCallingMethodName(),conf,outputPath);
  GiraphConfiguration configuration=job.getConfiguration();
  Path aggregatorValues=getTempPath("aggregatorValues");
  configuration.setInt(TextAggregatorWriter.FREQUENCY,TextAggregatorWriter.ALWAYS);
  configuration.set(TextAggregatorWriter.FILENAME,aggregatorValues.toString());
  assertTrue(job.run(true));
  FileSystem fs=FileSystem.get(configuration);
  Path valuesFile=new Path(aggregatorValues.toString() + "_0");
  try {
    if (!runningInDistributedMode()) {
      double maxPageRank=SimplePageRankComputation.SimplePageRankWorkerContext.getFinalMax();
      double minPageRank=SimplePageRankComputation.SimplePageRankWorkerContext.getFinalMin();
      long numVertices=SimplePageRankComputation.SimplePageRankWorkerContext.getFinalSum();
      System.out.println("testBspPageRank: maxPageRank=" + maxPageRank + " minPageRank="+ minPageRank+ " numVertices="+ numVertices);
      FSDataInputStream in=null;
      BufferedReader reader=null;
      try {
        Map<Integer,Double> minValues=Maps.newHashMap();
        Map<Integer,Double> maxValues=Maps.newHashMap();
        Map<Integer,Long> vertexCounts=Maps.newHashMap();
        in=fs.open(valuesFile);
        reader=new BufferedReader(new InputStreamReader(in,Charsets.UTF_8));
        String line;
        while ((line=reader.readLine()) != null) {
          String[] tokens=line.split("\t");
          int superstep=Integer.parseInt(tokens[0].split("=")[1]);
          String value=(tokens[1].split("=")[1]);
          String aggregatorName=(tokens[1].split("=")[0]);
          if ("min".equals(aggregatorName)) {
            minValues.put(superstep,Double.parseDouble(value));
          }
          if ("max".equals(aggregatorName)) {
            maxValues.put(superstep,Double.parseDouble(value));
          }
          if ("sum".equals(aggregatorName)) {
            vertexCounts.put(superstep,Long.parseLong(value));
          }
        }
        int maxSuperstep=SimplePageRankComputation.MAX_SUPERSTEPS;
        assertEquals(maxSuperstep + 2,minValues.size());
        assertEquals(maxSuperstep + 2,maxValues.size());
        assertEquals(maxSuperstep + 2,vertexCounts.size());
        assertEquals(maxPageRank,maxValues.get(maxSuperstep),0d);
        assertEquals(minPageRank,minValues.get(maxSuperstep),0d);
        assertEquals(numVertices,(long)vertexCounts.get(maxSuperstep));
      }
  finally {
        Closeables.close(in,true);
        Closeables.close(reader,true);
      }
    }
  }
  finally {
    fs.delete(valuesFile,false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.giraph.TestManualCheckpoint </h4><pre class="type-3 type-12 type-4 type-5 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Run a sample BSP job locally and test checkpointing.
 * @throws IOException
 * @throws ClassNotFoundException
 * @throws InterruptedException
 */
@Test public void testBspCheckpoint() throws IOException, InterruptedException, ClassNotFoundException {
  Path checkpointsDir=getTempPath("checkPointsForTesting");
  Path outputPath=getTempPath(getCallingMethodName());
  GiraphConfiguration conf=new GiraphConfiguration();
  conf.setComputationClass(SimpleCheckpoint.SimpleCheckpointComputation.class);
  conf.setWorkerContextClass(SimpleCheckpoint.SimpleCheckpointVertexWorkerContext.class);
  conf.setMasterComputeClass(SimpleCheckpoint.SimpleCheckpointVertexMasterCompute.class);
  conf.setVertexInputFormatClass(SimpleSuperstepVertexInputFormat.class);
  conf.setVertexOutputFormatClass(SimpleSuperstepVertexOutputFormat.class);
  GiraphJob job=prepareJob(getCallingMethodName(),conf,outputPath);
  GiraphConfiguration configuration=job.getConfiguration();
  GiraphConstants.CHECKPOINT_DIRECTORY.set(configuration,checkpointsDir.toString());
  GiraphConstants.CLEANUP_CHECKPOINTS_AFTER_SUCCESS.set(configuration,false);
  configuration.setCheckpointFrequency(2);
  assertTrue(job.run(true));
  long idSum=0;
  if (!runningInDistributedMode()) {
    FileStatus fileStatus=getSinglePartFileStatus(job.getConfiguration(),outputPath);
    idSum=SimpleCheckpoint.SimpleCheckpointVertexWorkerContext.getFinalSum();
    System.out.println("testBspCheckpoint: idSum = " + idSum + " fileLen = "+ fileStatus.getLen());
  }
  System.out.println("testBspCheckpoint: Restarting from superstep 2" + " with checkpoint path = " + checkpointsDir);
  outputPath=getTempPath(getCallingMethodName() + "Restarted");
  conf=new GiraphConfiguration();
  conf.setComputationClass(SimpleCheckpoint.SimpleCheckpointComputation.class);
  conf.setWorkerContextClass(SimpleCheckpoint.SimpleCheckpointVertexWorkerContext.class);
  conf.setMasterComputeClass(SimpleCheckpoint.SimpleCheckpointVertexMasterCompute.class);
  conf.setVertexInputFormatClass(SimpleSuperstepVertexInputFormat.class);
  conf.setVertexOutputFormatClass(SimpleSuperstepVertexOutputFormat.class);
  GiraphJob restartedJob=prepareJob(getCallingMethodName() + "Restarted",conf,outputPath);
  configuration.setMasterComputeClass(SimpleCheckpoint.SimpleCheckpointVertexMasterCompute.class);
  GiraphConstants.CHECKPOINT_DIRECTORY.set(restartedJob.getConfiguration(),checkpointsDir.toString());
  assertTrue(restartedJob.run(true));
  if (!runningInDistributedMode()) {
    long idSumRestarted=SimpleCheckpoint.SimpleCheckpointVertexWorkerContext.getFinalSum();
    System.out.println("testBspCheckpoint: idSumRestarted = " + idSumRestarted);
    assertEquals(idSum,idSumRestarted);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.giraph.TestMaxSuperstep </h4><pre class="type-3 type-12 type-4 type-5 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Run a job that tests that this job completes in the desired number of
 * supersteps
 * @throws java.io.IOException
 * @throws ClassNotFoundException
 * @throws InterruptedException
 */
@Test public void testMaxSuperstep() throws IOException, InterruptedException, ClassNotFoundException {
  GiraphConfiguration conf=new GiraphConfiguration();
  conf.setComputationClass(InfiniteLoopComputation.class);
  conf.setVertexInputFormatClass(SimplePageRankVertexInputFormat.class);
  conf.setVertexOutputFormatClass(SimplePageRankVertexOutputFormat.class);
  GiraphJob job=prepareJob(getCallingMethodName(),conf,getTempPath(getCallingMethodName()));
  job.getConfiguration().setMaxNumberOfSupersteps(3);
  assertTrue(job.run(true));
  if (!runningInDistributedMode()) {
    GiraphHadoopCounter superstepCounter=GiraphStats.getInstance().getSuperstepCounter();
    assertEquals(superstepCounter.getValue(),3L);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.giraph.TestOutOfCore </h4><pre class="type-3 type-12 type-4 type-5 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Run a job that tests the adaptive out-of-core mechanism
 * @throws IOException
 * @throws ClassNotFoundException
 * @throws InterruptedException
 */
@Test public void testOutOfCore() throws IOException, InterruptedException, ClassNotFoundException {
  GiraphConfiguration conf=new GiraphConfiguration();
  conf.setComputationClass(SimplePageRankComputation.class);
  conf.setVertexInputFormatClass(SimplePageRankVertexInputFormat.class);
  conf.setVertexOutputFormatClass(SimplePageRankVertexOutputFormat.class);
  conf.setWorkerContextClass(SimplePageRankComputation.SimplePageRankWorkerContext.class);
  conf.setMasterComputeClass(SimplePageRankComputation.SimplePageRankMasterCompute.class);
  GiraphConstants.USER_PARTITION_COUNT.set(conf,NUM_PARTITIONS);
  GiraphConstants.USE_OUT_OF_CORE_GRAPH.set(conf,true);
  GiraphConstants.OUT_OF_CORE_MEM_ESTIMATOR.set(conf,TestMemoryEstimator.class);
  CheckMemoryCallable.CHECK_MEMORY_INTERVAL.set(conf,5);
  GiraphConstants.NUM_COMPUTE_THREADS.set(conf,8);
  GiraphConstants.NUM_INPUT_THREADS.set(conf,8);
  GiraphConstants.NUM_OOC_THREADS.set(conf,4);
  GiraphConstants.NUM_OUTPUT_THREADS.set(conf,8);
  GiraphJob job=prepareJob(getCallingMethodName(),conf,getTempPath(getCallingMethodName()));
  GeneratedVertexReader.READER_VERTICES.set(conf,200);
  assertTrue(job.run(true));
  if (!runningInDistributedMode()) {
    double maxPageRank=SimplePageRankComputation.SimplePageRankWorkerContext.getFinalMax();
    double minPageRank=SimplePageRankComputation.SimplePageRankWorkerContext.getFinalMin();
    long numVertices=SimplePageRankComputation.SimplePageRankWorkerContext.getFinalSum();
    System.out.println(getCallingMethodName() + ": maxPageRank=" + maxPageRank+ " minPageRank="+ minPageRank+ " numVertices="+ numVertices);
    assertEquals(13591.5,maxPageRank,0.01);
    assertEquals(9.375e-5,minPageRank,0.000000001);
    assertEquals(8 * 200L,numVertices);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.giraph.examples.block_app.TestMigrationBspBasic </h4><pre class="type-3 type-12 type-4 type-5 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Run a sample BSP job locally and test using migration
 * library for Blocks Framework, as an drop-in replacement.
 */
@Test public void testBspMigrationToBlocksFramework() throws Exception {
  GiraphConfiguration conf=new GiraphConfiguration();
  conf.setVertexInputFormatClass(SimplePageRankVertexInputFormat.class);
  BlockUtils.setAndInitBlockFactoryClass(conf,SimpleMigrationMasterBlockFactory.class);
  GiraphJob job=prepareJob(getCallingMethodName(),conf);
  assertTrue(job.run(true));
  if (!runningInDistributedMode()) {
    double finalSum=SimpleMigrationMasterBlockFactory.SimpleMigrationMasterWorkerContext.getFinalSum();
    System.out.println("testBspMasterCompute: finalSum=" + finalSum);
    assertEquals(32.5,finalSum,0d);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.giraph.io.accumulo.TestAccumuloVertexFormat </h4><pre class="type-3 type-12 type-9 type-4 type-5 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAccumuloInputOutput() throws Exception {
  if (System.getProperty("prop.mapred.job.tracker") != null) {
    if (log.isInfoEnabled())     log.info("testAccumuloInputOutput: " + "Ignore this test if not local mode.");
    return;
  }
  File jarTest=new File(System.getProperty("prop.jarLocation"));
  if (!jarTest.exists()) {
    fail("Could not find Giraph jar at " + "location specified by 'prop.jarLocation'. " + "Make sure you built the main Giraph artifact?.");
  }
  MockInstance mockInstance=new MockInstance(INSTANCE_NAME);
  Connector c=mockInstance.getConnector("root",new byte[]{});
  c.tableOperations().create(TABLE_NAME);
  BatchWriter bw=c.createBatchWriter(TABLE_NAME,10000L,1000L,4);
  Mutation m1=new Mutation(new Text("0001"));
  m1.put(FAMILY,CHILDREN,new Value("0002".getBytes()));
  bw.addMutation(m1);
  Mutation m2=new Mutation(new Text("0002"));
  m2.put(FAMILY,CHILDREN,new Value("0003".getBytes()));
  bw.addMutation(m2);
  if (log.isInfoEnabled())   log.info("Writing mutations to Accumulo table");
  bw.close();
  Configuration conf=new Configuration();
  conf.set(AccumuloVertexOutputFormat.OUTPUT_TABLE,TABLE_NAME);
  AccumuloInputFormat.setInputInfo(conf,USER,"".getBytes(),TABLE_NAME,new Authorizations());
  AccumuloInputFormat.setMockInstance(conf,INSTANCE_NAME);
  AccumuloOutputFormat.setOutputInfo(conf,USER,PASSWORD,true,null);
  AccumuloOutputFormat.setMockInstance(conf,INSTANCE_NAME);
  GiraphJob job=new GiraphJob(conf,getCallingMethodName());
  setupConfiguration(job);
  GiraphConfiguration giraphConf=job.getConfiguration();
  giraphConf.setComputationClass(EdgeNotification.class);
  giraphConf.setVertexInputFormatClass(AccumuloEdgeInputFormat.class);
  giraphConf.setVertexOutputFormatClass(AccumuloEdgeOutputFormat.class);
  HashSet<Pair<Text,Text>> columnsToFetch=new HashSet<Pair<Text,Text>>();
  columnsToFetch.add(new Pair<Text,Text>(FAMILY,CHILDREN));
  AccumuloInputFormat.fetchColumns(job.getConfiguration(),columnsToFetch);
  if (log.isInfoEnabled())   log.info("Running edge notification job using Accumulo input");
  assertTrue(job.run(true));
  Scanner scanner=c.createScanner(TABLE_NAME,new Authorizations());
  scanner.setRange(new Range("0002","0002"));
  scanner.fetchColumn(FAMILY,OUTPUT_FIELD);
  boolean foundColumn=false;
  if (log.isInfoEnabled())   log.info("Verify job output persisted correctly.");
  assertTrue(scanner.iterator().hasNext());
  for (  Map.Entry<Key,Value> entry : scanner) {
    Text row=entry.getKey().getRow();
    assertEquals("0002",row.toString());
    Value value=entry.getValue();
    assertEquals("0001",ByteBufferUtil.toString(ByteBuffer.wrap(value.get())));
    foundColumn=true;
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.giraph.io.gora.TestGoraEdgeInputFormat </h4><pre class="type-3 type-12 type-4 type-13 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getTestDb() throws Exception {
  Iterable<String> results;
  GiraphConfiguration conf=new GiraphConfiguration();
  GIRAPH_GORA_DATASTORE_CLASS.set(conf,"org.apache.gora.memory.store.MemStore");
  GIRAPH_GORA_KEYS_FACTORY_CLASS.set(conf,"org.apache.giraph.io.gora.utils.DefaultKeyFactory");
  GIRAPH_GORA_KEY_CLASS.set(conf,"java.lang.String");
  GIRAPH_GORA_PERSISTENT_CLASS.set(conf,"org.apache.giraph.io.gora.generated.GEdge");
  GIRAPH_GORA_START_KEY.set(conf,"1");
  GIRAPH_GORA_END_KEY.set(conf,"4");
  conf.set("io.serializations","org.apache.hadoop.io.serializer.WritableSerialization," + "org.apache.hadoop.io.serializer.JavaSerialization");
  conf.setComputationClass(EmptyComputation.class);
  conf.setEdgeInputFormatClass(GoraTestEdgeInputFormat.class);
  conf.setVertexOutputFormatClass(IdWithValueTextOutputFormat.class);
  results=InternalVertexRunner.run(conf,new String[0],new String[0]);
  Assert.assertNotNull(results);
  Assert.assertEquals(3,((ArrayList<?>)results).size());
  if (results instanceof Collection<?> & (((Collection<?>)results).size() == 2)) {
    Assert.assertEquals("33\t0.0",((ArrayList<?>)results).get(0).toString());
    Assert.assertEquals("22\t0.0",((ArrayList<?>)results).get(1).toString());
    Assert.assertEquals("11\t0.0",((ArrayList<?>)results).get(2).toString());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.giraph.io.gora.TestGoraVertexInputFormat </h4><pre class="type-3 type-12 type-4 type-13 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getTestDb() throws Exception {
  Iterable<String> results;
  GiraphConfiguration conf=new GiraphConfiguration();
  GIRAPH_GORA_DATASTORE_CLASS.set(conf,"org.apache.gora.memory.store.MemStore");
  GIRAPH_GORA_KEYS_FACTORY_CLASS.set(conf,"org.apache.giraph.io.gora.utils.DefaultKeyFactory");
  GIRAPH_GORA_KEY_CLASS.set(conf,"java.lang.String");
  GIRAPH_GORA_PERSISTENT_CLASS.set(conf,"org.apache.giraph.io.gora.generated.GVertex");
  GIRAPH_GORA_START_KEY.set(conf,"1");
  GIRAPH_GORA_END_KEY.set(conf,"100");
  conf.set("io.serializations","org.apache.hadoop.io.serializer.WritableSerialization," + "org.apache.hadoop.io.serializer.JavaSerialization");
  conf.setComputationClass(EmptyComputation.class);
  conf.setVertexInputFormatClass(GoraTestVertexInputFormat.class);
  conf.setVertexOutputFormatClass(IdWithValueTextOutputFormat.class);
  results=InternalVertexRunner.run(conf,new String[0],new String[0]);
  Assert.assertNotNull(results);
  Assert.assertEquals(3,((ArrayList<?>)results).size());
  if (results instanceof Collection<?> & (((Collection<?>)results).size() == 3)) {
    Assert.assertEquals("10\t0.0",((ArrayList<?>)results).get(0).toString());
    Assert.assertEquals("1\t0.0",((ArrayList<?>)results).get(1).toString());
    Assert.assertEquals("100\t0.0",((ArrayList<?>)results).get(2).toString());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.giraph.io.hbase.TestHBaseRootMarkerVertextFormat </h4><pre class="type-3 type-12 type-9 type-4 type-5 type-13 type-8 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHBaseInputOutput() throws Exception {
  if (System.getProperty("prop.mapred.job.tracker") != null) {
    if (log.isInfoEnabled())     log.info("testHBaseInputOutput: Ignore this test if not local mode.");
    return;
  }
  File jarTest=new File(System.getProperty("prop.jarLocation"));
  if (!jarTest.exists()) {
    fail("Could not find Giraph jar at " + "location specified by 'prop.jarLocation'. " + "Make sure you built the main Giraph artifact?.");
  }
  FileSystem fs=null;
  Path hbaseRootdir=null;
  try {
    MiniHBaseCluster cluster=testUtil.startMiniCluster(1);
    cluster.waitForActiveAndReadyMaster();
    testUtil.startMiniMapReduceCluster();
    Configuration conf=testUtil.getConfiguration();
    try {
      fs=testUtil.getTestFileSystem();
      String randomStr=UUID.randomUUID().toString();
      String tmpdir=System.getProperty("java.io.tmpdir") + "/" + randomStr+ "/";
      hbaseRootdir=fs.makeQualified(new Path(tmpdir));
      conf.set(HConstants.HBASE_DIR,hbaseRootdir.toString());
      fs.mkdirs(hbaseRootdir);
    }
 catch (    IOException ioe) {
      fail("Could not create hbase root directory.");
    }
    String INPUT_FILE=hbaseRootdir.toString() + "/graph.csv";
    String[] args=new String[]{"-Dimporttsv.columns=HBASE_ROW_KEY,cf:" + QUALIFER,"-Dimporttsv.separator=" + "\u002c",TABLE_NAME,INPUT_FILE};
    GenericOptionsParser opts=new GenericOptionsParser(testUtil.getConfiguration(),args);
    args=opts.getRemainingArgs();
    fs=FileSystem.get(conf);
    fs.setConf(conf);
    Path inputPath=fs.makeQualified(new Path(hbaseRootdir,"graph.csv"));
    FSDataOutputStream op=fs.create(inputPath,true);
    String line1="0001,0002\n";
    String line2="0002,0004\n";
    String line3="0003,0005\n";
    String line4="0004,-1\n";
    String line5="0005,-1\n";
    op.write(line1.getBytes());
    op.write(line2.getBytes());
    op.write(line3.getBytes());
    op.write(line4.getBytes());
    op.write(line5.getBytes());
    op.close();
    final byte[] FAM=Bytes.toBytes(FAMILY);
    final byte[] TAB=Bytes.toBytes(TABLE_NAME);
    HTableDescriptor desc=new HTableDescriptor(TAB);
    desc.addFamily(new HColumnDescriptor(FAM));
    HBaseAdmin hbaseAdmin=new HBaseAdmin(conf);
    if (hbaseAdmin.isTableAvailable(TABLE_NAME)) {
      hbaseAdmin.disableTable(TABLE_NAME);
      hbaseAdmin.deleteTable(TABLE_NAME);
    }
    hbaseAdmin.createTable(desc);
    Job job=ImportTsv.createSubmittableJob(conf,args);
    job.waitForCompletion(false);
    assertTrue(job.isSuccessful());
    if (log.isInfoEnabled())     log.info("ImportTsv successful. Running HBase Giraph job.");
    conf.set(TableInputFormat.INPUT_TABLE,TABLE_NAME);
    conf.set(TableOutputFormat.OUTPUT_TABLE,TABLE_NAME);
    GiraphJob giraphJob=new GiraphJob(conf,BspCase.getCallingMethodName());
    GiraphConfiguration giraphConf=giraphJob.getConfiguration();
    setupConfiguration(giraphJob);
    giraphConf.setComputationClass(EdgeNotification.class);
    giraphConf.setVertexInputFormatClass(TableEdgeInputFormat.class);
    giraphConf.setVertexOutputFormatClass(TableEdgeOutputFormat.class);
    assertTrue(giraphJob.run(true));
    if (log.isInfoEnabled())     log.info("Giraph job successful. Checking output qualifier.");
    HTable table=new HTable(conf,TABLE_NAME);
    Result result=table.get(new Get("0002".getBytes()));
    byte[] parentBytes=result.getValue(FAMILY.getBytes(),OUTPUT_FIELD.getBytes());
    assertNotNull(parentBytes);
    assertTrue(parentBytes.length > 0);
    assertEquals("0001",Bytes.toString(parentBytes));
  }
  finally {
    testUtil.shutdownMiniMapReduceCluster();
    testUtil.shutdownMiniCluster();
  }
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
