<h3 style="margin:0px">Class: org.apache.cayenne.query.EJBQLQueryIT (30 methods) </h3><br><pre style="padding:0"><code class="html"><div id="tags"><button id="7"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('7')" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value "><kbd id="tag-7"class="label-info"style="display: inline-block;font-size:7pt" >EqualityVerifier&nbsp;(22)</kbd></button>&nbsp;<button id="1"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('1')" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls"><kbd id="tag-1"class="label-info"style="display: inline-block;font-size:7pt" >InternalCallVerifier&nbsp;(20)</kbd></button>&nbsp;<button id="5"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('5')" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes"><kbd id="tag-5"class="label-info"style="display: inline-block;font-size:7pt" >HybridVerifier&nbsp;(7)</kbd></button>&nbsp;<button id="10"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('10')" data-toggle="tooltip" title="Executes methods or other tests from the same test unit"><kbd id="tag-10"class="label-info"style="display: inline-block;font-size:7pt" >ExecutionTester&nbsp;(7)</kbd></button>&nbsp;<button id="4"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('4')" data-toggle="tooltip" title="Verifies whether objects are null"><kbd id="tag-4"class="label-info"style="display: inline-block;font-size:7pt" >NullVerifier&nbsp;(4)</kbd></button>&nbsp;<button id="3"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('3')" data-toggle="tooltip" title="Verifies boolean conditions"><kbd id="tag-3"class="label-info"style="display: inline-block;font-size:7pt" >BooleanVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="2"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('2')" data-toggle="tooltip" title="Verifies whether two objects/variables are the same"><kbd id="tag-2"class="label-info"style="display: inline-block;font-size:7pt" >IdentityVerifier&nbsp;(2)</kbd></button>&nbsp;<button id="8"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('8')" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) "><kbd id="tag-8"class="label-info"style="display: inline-block;font-size:7pt" >APIUtilityVerifier&nbsp;(1)</kbd></button>&nbsp;<button id="9"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('9')" data-toggle="tooltip" title="Allocates resources before the execution of the test cases"><kbd id="tag-9"class="label-info"style="display: inline-block;font-size:7pt" >TestInitializer&nbsp;(1)</kbd></button>&nbsp;<button id="6"style="border-width:0;padding:0;background:#282B2E"  onclick="filter('6')" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure"><kbd id="tag-6"class="label-info"style="display: inline-block;font-size:7pt" >UtilityVerifier&nbsp;(1)</kbd></button>&nbsp;</div></code></pre><center><button onclick="showBlocks()" style="margin:6px">Update filter <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> </button></center><br>
<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNullNotEqualsParameter(){
  EJBQLQuery query=new EJBQLQuery("select p from Painting p WHERE p.toArtist<>:x");
  query.setParameter("x",null);
  context.performQuery(query);
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCacheStrategy() throws Exception {
  createArtistsDataSet();
  final String ejbql="select a FROM Artist a";
  EJBQLQuery query=new EJBQLQuery(ejbql);
  query.setCacheStrategy(QueryCacheStrategy.LOCAL_CACHE);
  final List<Artist> artist1=context.performQuery(query);
  queryInterceptor.runWithQueriesBlocked(new UnitTestClosure(){
    public void execute(){
      List<Artist> artist2;
      EJBQLQuery query1=new EJBQLQuery(ejbql);
      query1.setCacheStrategy(QueryCacheStrategy.LOCAL_CACHE);
      artist2=context.performQuery(query1);
      assertEquals(artist1.get(0).getArtistName(),artist2.get(0).getArtistName());
    }
  }
);
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNullParameter(){
  EJBQLQuery query=new EJBQLQuery("select p from Painting p WHERE p.toArtist=:x");
  query.setParameter("x",null);
  context.performQuery(query);
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testUniqueKeyEntity(){
  EntityResolver resolver=runtime.getDataDomain().getEntityResolver();
  String ejbql="select a FROM Artist a";
  EJBQLQuery q1=new EJBQLQuery(ejbql);
  q1.setCacheStrategy(QueryCacheStrategy.LOCAL_CACHE);
  EJBQLQuery q2=new EJBQLQuery(ejbql);
  q2.setCacheStrategy(QueryCacheStrategy.LOCAL_CACHE);
  assertEquals(q1.getMetaData(resolver).getCacheKey(),q2.getMetaData(resolver).getCacheKey());
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testLikeWithExplicitEscape() throws Exception {
  createPaintingsDataSet();
  EJBQLQuery query=new EJBQLQuery("SELECT p FROM Painting p WHERE p.paintingTitle LIKE '|%|%?|_title|%|%|_' ESCAPE '|'");
  List<Painting> paintings=context.performQuery(query);
  assertEquals(1,paintings.size());
  assertEquals("%%?_title%%_",paintings.get(0).getPaintingTitle());
}

</code></pre>

<pre class="type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testEncodeAsXML(){
  String ejbql="select a FROM Artist a";
  String name="Test";
  StringWriter w=new StringWriter();
  XMLEncoder e=new XMLEncoder(new PrintWriter(w));
  String separator=System.getProperty("line.separator");
  StringBuffer s=new StringBuffer("<query name=\"");
  s.append(name);
  s.append("\" factory=\"");
  s.append("org.apache.cayenne.map.EjbqlBuilder");
  s.append("\">");
  s.append(separator);
  EJBQLQuery query=new EJBQLQuery(ejbql);
  if (query.getEjbqlStatement() != null) {
    s.append("<ejbql><![CDATA[");
    s.append(query.getEjbqlStatement());
    s.append("]]></ejbql>");
  }
  s.append(separator);
  s.append("</query>");
  s.append(separator);
  query.setName(name);
  query.encodeAsXML(e);
  assertEquals(w.getBuffer().toString(),s.toString());
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testCacheParameters(){
  String ejbql1="select a FROM Artist a WHERE a.artistName = ?1 OR a.artistName = :name";
  EJBQLQuery q1=new EJBQLQuery(ejbql1);
  q1.setParameter(1,"X");
  q1.setParameter("name","Y");
  q1.setFetchOffset(1);
  q1.setFetchLimit(5);
  q1.setCacheStrategy(QueryCacheStrategy.LOCAL_CACHE);
  String ejbql2="select a FROM Artist a WHERE a.artistName = ?1 OR a.artistName = :name";
  EJBQLQuery q2=new EJBQLQuery(ejbql2);
  q2.setParameter(1,"X");
  q2.setParameter("name","Y");
  q2.setFetchOffset(1);
  q2.setFetchLimit(5);
  q2.setCacheStrategy(QueryCacheStrategy.LOCAL_CACHE);
  EntityResolver resolver=runtime.getDataDomain().getEntityResolver();
  assertEquals(q1.getMetaData(resolver).getCacheKey(),q2.getMetaData(resolver).getCacheKey());
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testRelationshipWhereClause2() throws Exception {
  Expression exp=ExpressionFactory.matchExp(Painting.TO_GALLERY_PROPERTY,null);
  EJBQLQuery query=new EJBQLQuery("select p.toArtist from Painting p where " + exp.toEJBQL("p"));
  context.performQuery(query);
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNullPositionalParameter(){
  EJBQLQuery query=new EJBQLQuery("select p from Painting p WHERE p.toArtist=?1");
  query.setParameter(1,null);
  context.performQuery(query);
}

</code></pre>

<pre class="type-1 type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetName(){
  String ejbql="select a FROM Artist a";
  EJBQLQuery query=new EJBQLQuery(ejbql);
  assertNull(query.getName());
  query.setName("XYZ");
  assertEquals("XYZ",query.getName());
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInWithMultipleStringPositionalParameters_withBrackets() throws Exception {
  createPaintingsDataSet();
  EJBQLQuery query=new EJBQLQuery("select p from Painting p where p.paintingTitle in (?1,?2,?3)");
  query.setParameter(1,"title0");
  query.setParameter(2,"title1");
  query.setParameter(3,"title2");
  List<Painting> paintings=context.performQuery(query);
  assertEquals(2,paintings.size());
}

</code></pre>

<pre class="type-1 type-2 type-7 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRelationshipWhereClause() throws Exception {
  Artist a=context.newObject(Artist.class);
  a.setArtistName("a");
  Painting p=context.newObject(Painting.class);
  p.setPaintingTitle("p");
  p.setToArtist(a);
  context.commitChanges();
  EJBQLQuery query=new EJBQLQuery("select p from Painting p where p.toArtist=:a");
  query.setParameter("a",a);
  List<Painting> paintings=context.performQuery(query);
  assertEquals(1,paintings.size());
  assertSame(p,paintings.get(0));
}

</code></pre>

<pre class="type-1 type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetExpression(){
  String ejbql="select a FROM Artist a";
  EJBQLQuery query=new EJBQLQuery(ejbql);
  EJBQLCompiledExpression parsed=query.getExpression(runtime.getDataDomain().getEntityResolver());
  assertNotNull(parsed);
  assertEquals(ejbql,parsed.getSource());
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOrderBy_Aggregates() throws Exception {
  tArtist.insert(1,"a0");
  tArtist.insert(2,"a1");
  tPainting.insert(3,1,"title0");
  tPainting.insert(2,1,"title1");
  tPainting.insert(1,2,"title2");
  EJBQLQuery asc=new EJBQLQuery("select a, count(p) from Artist a INNER JOIN a.paintingArray p GROUP BY a order by count(p)");
  List<Object[]> artistAsc=context.performQuery(asc);
  assertEquals(2,artistAsc.size());
  assertEquals("a1",((Artist)artistAsc.get(0)[0]).getArtistName());
  assertEquals("a0",((Artist)artistAsc.get(1)[0]).getArtistName());
  EJBQLQuery desc=new EJBQLQuery("select a, count(p) from Artist a INNER JOIN a.paintingArray p GROUP BY a order by count(p) DESC");
  List<Object[]> artistDesc=context.performQuery(desc);
  assertEquals(2,artistDesc.size());
  assertEquals("a0",((Artist)artistDesc.get(0)[0]).getArtistName());
  assertEquals("a1",((Artist)artistDesc.get(1)[0]).getArtistName());
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInWithSingleStringPositionalParameter_withoutBrackets() throws Exception {
  createPaintingsDataSet();
  EJBQLQuery query=new EJBQLQuery("select p from Painting p where p.paintingTitle in ?1");
  query.setParameter(1,"title0");
  List<Painting> paintings=context.performQuery(query);
  assertEquals(1,paintings.size());
}

</code></pre>

<pre class="type-1 type-3 type-7 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOrBrackets() throws Exception {
  Artist a=context.newObject(Artist.class);
  a.setArtistName("testOrBrackets");
  context.commitChanges();
  EJBQLQuery query=new EJBQLQuery("select a from Artist a " + "where a.artistName <> a.artistName and " + "(a.artistName <> a.artistName or a.artistName = a.artistName)");
  assertEquals(context.performQuery(query).size(),0);
  query=new EJBQLQuery("select a from Artist a " + "where a.artistName <> a.artistName and " + "a.artistName <> a.artistName or a.artistName = a.artistName");
  assertTrue(context.performQuery(query).size() > 0);
  query=new EJBQLQuery("select a from Artist a " + "where not(a.artistName <> a.artistName and " + "a.artistName <> a.artistName or a.artistName = a.artistName)");
  assertEquals(context.performQuery(query).size(),0);
  query=new EJBQLQuery("select a from Artist a " + "where not a.artistName <> a.artistName or " + "a.artistName = a.artistName");
  assertTrue(context.performQuery(query).size() > 0);
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJoinAndCount(){
  EJBQLQuery query=new EJBQLQuery("select count(p) from Painting p where p.toGallery.galleryName LIKE '%a%' AND (" + "p.paintingTitle like '%a%' or " + "p.toArtist.artistName like '%a%'"+ ")");
  context.performQuery(query);
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInWithSingleCollectionNamedParameter_withBrackets() throws Exception {
  createPaintingsDataSet();
  EJBQLQuery query=new EJBQLQuery("select p from Painting p where p.toArtist in (:artists)");
  query.setParameter("artists",context.performQuery(new SelectQuery<Artist>(Artist.class)));
  List<Painting> paintings=context.performQuery(query);
  assertEquals(3,paintings.size());
}

</code></pre>

<pre class="type-8 type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testDataRows() throws Exception {
  createArtistsDataSet();
  String ejbql="select a FROM Artist a";
  EJBQLQuery query=new EJBQLQuery(ejbql);
  query.setFetchingDataRows(true);
  List<?> artists=context.performQuery(query);
  DataRow row=(DataRow)artists.get(0);
  String artistName=(String)row.get("ARTIST_NAME");
  Artist artist=(Artist)context.objectFromDataRow("Artist",row);
  assertEquals(artistName,artist.getArtistName());
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInWithSingleCollectionPositionalParameter_withoutBrackets() throws Exception {
  createPaintingsDataSet();
  EJBQLQuery query=new EJBQLQuery("select p from Painting p where p.toArtist in ?1");
  query.setParameter(1,context.performQuery(new SelectQuery<Artist>(Artist.class)));
  List<Painting> paintings=context.performQuery(query);
  assertEquals(3,paintings.size());
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testOrderBy() throws Exception {
  tPainting.insert(3,null,"title0");
  tPainting.insert(2,null,"title1");
  tPainting.insert(1,null,"title2");
  EJBQLQuery asc=new EJBQLQuery("select p from Painting p order by p.paintingTitle");
  List<Painting> paintingsAsc=context.performQuery(asc);
  assertEquals(3,paintingsAsc.size());
  assertEquals("title0",paintingsAsc.get(0).getPaintingTitle());
  assertEquals("title1",paintingsAsc.get(1).getPaintingTitle());
  assertEquals("title2",paintingsAsc.get(2).getPaintingTitle());
  EJBQLQuery desc=new EJBQLQuery("select p from Painting p order by p.paintingTitle desc");
  List<Painting> paintingsDesc=context.performQuery(desc);
  assertEquals(3,paintingsDesc.size());
  assertEquals("title2",paintingsDesc.get(0).getPaintingTitle());
  assertEquals("title1",paintingsDesc.get(1).getPaintingTitle());
  assertEquals("title0",paintingsDesc.get(2).getPaintingTitle());
}

</code></pre>

<pre class="type-9 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
"></span><br>
@Before public void setUp() throws Exception {
  tArtist=new TableHelper(dbHelper,"ARTIST");
  tArtist.setColumns("ARTIST_ID","ARTIST_NAME");
  tPainting=new TableHelper(dbHelper,"PAINTING");
  tPainting.setColumns("PAINTING_ID","ARTIST_ID","PAINTING_TITLE");
}

</code></pre>

<pre class="type-1 type-3 type-2 type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies boolean conditions
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetMetadata(){
  EntityResolver resolver=runtime.getDataDomain().getEntityResolver();
  String ejbql="select a FROM Artist a";
  EJBQLQuery query=new EJBQLQuery(ejbql);
  QueryMetadata md=query.getMetaData(resolver);
  assertNotNull(md);
  assertNotNull(md.getClassDescriptor());
  assertSame(resolver.getClassDescriptor("Artist"),md.getClassDescriptor());
  assertNotNull(md.getObjEntity());
  assertSame(resolver.getObjEntity("Artist"),md.getObjEntity());
  assertFalse(md.isFetchingDataRows());
  assertTrue(md.isRefreshingObjects());
  assertEquals(QueryCacheStrategy.NO_CACHE,md.getCacheStrategy());
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testNullAndNotNullParameter(){
  EJBQLQuery query=new EJBQLQuery("select p from Painting p WHERE p.toArtist=:x OR p.toArtist.artistName=:b");
  query.setParameter("x",null);
  query.setParameter("b","Y");
  context.performQuery(query);
}

</code></pre>

<pre class="type-1 type-7 type-4 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSelectRelationship() throws Exception {
  createPaintingsDataSet();
  String ejbql="SELECT p.toArtist FROM Painting p";
  EJBQLQuery query=new EJBQLQuery(ejbql);
  List<?> result=context.performQuery(query);
  assertNotNull(result);
  assertEquals(3,result.size());
  assertEquals(Artist.class,result.get(0).getClass());
  String ejbql2="SELECT p.toArtist, p FROM Painting p";
  EJBQLQuery query2=new EJBQLQuery(ejbql2);
  List<?> result2=context.performQuery(query2);
  assertNotNull(result2);
  assertEquals(3,result2.size());
  assertEquals(2,((Object[])result2.get(0)).length);
  assertEquals(Artist.class,((Object[])result2.get(0))[0].getClass());
  assertEquals(Painting.class,((Object[])result2.get(0))[1].getClass());
  String ejbql3="SELECT p.toArtist, p.paintingTitle FROM Painting p";
  EJBQLQuery query3=new EJBQLQuery(ejbql3);
  List<?> result3=context.performQuery(query3);
  assertNotNull(result3);
  assertEquals(3,result3.size());
  assertEquals(2,((Object[])result3.get(0)).length);
  assertEquals(Artist.class,((Object[])result3.get(0))[0].getClass());
  assertEquals(String.class,((Object[])result3.get(0))[1].getClass());
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInWithSingleCollectionNamedParameter_withoutBrackets() throws Exception {
  createPaintingsDataSet();
  EJBQLQuery query=new EJBQLQuery("select p from Painting p where p.toArtist in :artists");
  query.setParameter("artists",context.performQuery(new SelectQuery<Artist>(Artist.class)));
  List<Painting> paintings=context.performQuery(query);
  assertEquals(3,paintings.size());
}

</code></pre>

<pre class="type-10 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
"></span><br>
@Test public void testJoinToJoined(){
  EJBQLQuery query=new EJBQLQuery("select g from Gallery g inner join g.paintingArray p where p.toArtist.artistName like '%a%'");
  context.performQuery(query);
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testInWithSingleCollectionPositionalParameter_withBrackets() throws Exception {
  createPaintingsDataSet();
  EJBQLQuery query=new EJBQLQuery("select p from Painting p where p.toArtist in (?1)");
  query.setParameter(1,context.performQuery(new SelectQuery<Artist>(Artist.class)));
  List<Painting> paintings=context.performQuery(query);
  assertEquals(3,paintings.size());
}

</code></pre>

<pre class="type-1 type-7 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
"></span><br>
@Test public void testParameters(){
  String ejbql="select a FROM Artist a WHERE a.artistName = ?1 OR a.artistName = :name";
  EJBQLQuery query=new EJBQLQuery(ejbql);
  query.setParameter(1,"X");
  query.setParameter("name","Y");
  Map<String,Object> parameters=query.getNamedParameters();
  Map<Integer,Object> parameters1=query.getPositionalParameters();
  assertEquals(1,parameters.size());
  assertEquals(1,parameters1.size());
  assertEquals("X",parameters1.get(new Integer(1)));
  assertEquals("Y",parameters.get("name"));
}

</code></pre>

<pre class="type-6 type-7 type-5 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * <p>If an expression has an 'entity variable' used in the SELECT clause then there should be a
 * corresponding definition for the 'entity variable' in the FROM clause.  This did, at some
 * point throw an NPE.</p>
 */
@Test public void testMissingEntityBeanVariable(){
  String ejbql="SELECT b FROM Artist a";
  EJBQLQuery query=new EJBQLQuery(ejbql);
  try {
    context.performQuery(query);
    fail("expected an instance of " + EJBQLException.class.getSimpleName() + " to have been thrown.");
  }
 catch (  EJBQLException e) {
    assertEquals("the entity variable 'b' does not refer to any entity in the FROM clause",e.getUnlabeledMessage());
  }
catch (  Throwable th) {
    fail("expected an instance of " + EJBQLException.class.getSimpleName() + " to have been thrown.");
  }
}

</code></pre>

<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
