<h3><span class=" glyphicon glyphicon-tag"/>&nbspIgnoredMethod</h3><kbd>Is not executed with the test suite</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.IsolatedCfgAdminRuntimeTest </h4><pre class="type-11 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
/** 
 * The purpose of this test is to make sure an application that contains an config admin bundle
 * can be used by Blueprint. The following steps are performed:
 * <p/>
 * - install the application
 * - start the application
 * - assert we have the following services in the isolated service registry (ConfigurationAdmin, ManagedService, HelloWorld)
 * - assert no configuration existed when the CM-PPH was invoked by BP (default message will be the token i.e. ${message})
 * - update the configuration (the message) for the PID (using a primitive boundary proxy), this will cause the blueprint container to reload
 * - check that the re-registered HelloWorld service contains the updated message
 * - clean up
 * @throws Exception
 */
@Test @Ignore public void testIsolatedCfgAdminBPReload() throws Exception {
  validateApplicationConfiguration(APP_HWBP,"org.apache.aries.helloworldbpapp","helloworld-bp","${message}","blueprint");
}

</code></pre>

<br>
<pre class="type-11 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
/** 
 * The purpose of this test is to make sure an application that contains an config admin bundle
 * can be used by manually. The following steps are performed:
 * <p/>
 * - install the application
 * - start the application
 * - assert we have the following services in the isolated service registry (ConfigurationAdmin, ManagedService, HelloWorld)
 * - assert no configuration existed when the CM-PPH was invoked by BP (default message will be the token i.e. ${message})
 * - update the configuration (the message) for the PID (using a primitive boundary proxy), this will cause the HW service to be re-registered ({@link org.apache.aries.isolated.config.HelloWorldManagedServiceImpl}- check that the re-registered HelloWorld service contains the updated message
 * - clean up
 * @throws Exception
 */
@Test @Ignore public void testIsolatedCfgAdminManualReload() throws Exception {
  validateApplicationConfiguration(APP_HWMN,"org.apache.aries.helloworldmnapp","helloworld-mn",(new HelloWorldImpl()).getMessage(),"manual");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.IsolatedRuntimeTest </h4><pre class="type-11 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testAppWithFragment() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("withFragment.eba")));
  AriesApplicationContext ctx=manager.install(app);
  ctx.start();
  assertHelloWorldService("withFragment.eba");
  manager.uninstall(ctx);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testFrameworkResolvedBeforeInnerBundlesStart() throws Exception {
  final AtomicBoolean loadedClass=new AtomicBoolean(false);
  context().addBundleListener(new SynchronousBundleListener(){
    public void bundleChanged(    BundleEvent event){
      Bundle b=event.getBundle();
      if (event.getType() == BundleEvent.STARTING || event.getType() == BundleEvent.LAZY_ACTIVATION) {
        if (b.getEntry("org/apache/aries/isolated/sample/SharedImpl.class") != null) {
          try {
            Class<?> cl=b.loadClass("org.apache.aries.isolated.sample.SharedImpl");
            cl.newInstance();
            loadedClass.set(true);
          }
 catch (          Exception e) {
            e.printStackTrace();
            throw new RuntimeException(e);
          }
        }
      }
 else       if (event.getType() == BundleEvent.INSTALLED && b instanceof CompositeBundle) {
        ((CompositeBundle)b).getCompositeFramework().getBundleContext().addBundleListener(this);
      }
    }
  }
);
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("test2.eba")));
  AriesApplicationContext ctx=manager.install(app);
  try {
    ctx.start();
    app=ctx.getApplication();
    assertEquals(1,app.getDeploymentMetadata().getApplicationDeploymentContents().size());
    assertEquals(1,app.getDeploymentMetadata().getApplicationProvisionBundles().size());
    assertTrue(loadedClass.get());
  }
  finally {
    manager.uninstall(ctx);
  }
}

</code></pre>

<br>
<pre class="type-11 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testAppWithApplicationManifest() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("test2.eba")));
  AriesApplicationContext ctx=manager.install(app);
  ctx.start();
  assertHelloWorldService("org.apache.aries.sample2");
  manager.uninstall(ctx);
}

</code></pre>

<br>
<pre class="type-11 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testAppWithGlobalRepositoryBundle() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("test2.eba")));
  IsolationTestUtils.prepareSampleBundleV2(bundleContext,context().getService(RepositoryGenerator.class),context().getService(RepositoryAdmin.class),context().getService(ModellingManager.class));
  AriesApplication newApp=manager.resolve(app,new ResolveConstraint(){
    @Override public String getBundleName(){
      return "org.apache.aries.isolated.sample";
    }
    @Override public VersionRange getVersionRange(){
      return ManifestHeaderProcessor.parseVersionRange("[2.0.0,2.0.0]",true);
    }
  }
);
  AriesApplicationContext ctx=manager.install(newApp);
  ctx.start();
  assertHelloWorldService("org.apache.aries.sample2","hello brave new world");
  manager.uninstall(ctx);
}

</code></pre>

<br>
<pre class="type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testUninstallReinstall() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("test2.eba")));
  AriesApplicationContext ctx=manager.install(app);
  app=ctx.getApplication();
  ctx.start();
  assertHelloWorldService("org.apache.aries.sample2");
  ctx.stop();
  manager.uninstall(ctx);
  assertNull(IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,"org.apache.aries.sample2"));
  ctx=manager.install(app);
  ctx.start();
  assertHelloWorldService("org.apache.aries.sample2");
  manager.uninstall(ctx);
}

</code></pre>

<br>
<pre class="type-11 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testAppWithoutApplicationManifest() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("test.eba")));
  AriesApplicationContext ctx=manager.install(app);
  ctx.start();
  assertHelloWorldService("test.eba");
  manager.uninstall(ctx);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.UpdateAppTest </h4><pre class="type-11 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testFullUpdate() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=setupApp();
  updateApp(manager,app);
  assertAppMessage("hello brave new world");
}

</code></pre>

<br>
<pre class="type-4 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testFineUpdate() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=setupApp();
  BundleContext oldCtx=IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,SAMPLE_APP_NAME);
  installMockUpdateStrategy();
  updateApp(manager,app);
  BundleContext newCtx=IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,SAMPLE_APP_NAME);
  assertAppMessage("hello brave new world");
  assertTrue("We bounced the app where the update was supposed to do an update in place",oldCtx == newCtx);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testUpdateThenStart() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("test.eba")));
  AriesApplicationContext ctx=manager.install(app);
  app=ctx.getApplication();
  BundleContext oldCtx=IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,SAMPLE_APP_NAME);
  installMockUpdateStrategy();
  ctx=updateApp(manager,app);
  BundleContext newCtx=IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,SAMPLE_APP_NAME);
  assertNull("App is not started yet but HelloWorld service is already there",IsolationTestUtils.findHelloWorldService(bundleContext,SAMPLE_APP_NAME));
  ctx.start();
  assertAppMessage("hello brave new world");
  assertTrue("We bounced the app where the update was supposed to do an update in place",oldCtx == newCtx);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.ASMMultiBundleTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void multiBundleTest() throws Exception {
  Bundle bundlea=context().getBundleByName("org.apache.aries.blueprint.testbundlea");
  assertNotNull(bundlea);
  bundlea.start();
  Bundle bundleb=context().getBundleByName("org.apache.aries.blueprint.testbundleb");
  assertNotNull(bundleb);
  bundleb.start();
  BlueprintContainer beanContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.testbundleb");
  assertNotNull(beanContainer);
  Object obj1=beanContainer.getComponentInstance("TestBeanA");
  assertTrue(obj1 instanceof TestBean);
  TestBean testBeanA=(TestBean)obj1;
  org.junit.Assert.assertEquals("RED",testBeanA.getRed());
  org.junit.Assert.assertEquals("GREEN",testBeanA.getGreen());
  org.junit.Assert.assertEquals("BLUE",testBeanA.getBlue());
  Object obj2=beanContainer.getComponentInstance("TestBeanB");
  assertTrue(obj2 instanceof TestBean);
  TestBean testBeanB=(TestBean)obj2;
  org.junit.Assert.assertEquals("ONE_VALUE",testBeanB.getRed());
  org.junit.Assert.assertEquals("GREEN",testBeanB.getGreen());
  org.junit.Assert.assertEquals("BLUE",testBeanB.getBlue());
  Object obj3=beanContainer.getComponentInstance("TestBeanC");
  assertTrue(obj3 instanceof TestBean);
  TestBean testBeanC=(TestBean)obj3;
  BlueprintContainer handlerContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.testbundlea");
  assertNotNull(handlerContainer);
  Object ns1=handlerContainer.getComponentInstance("NSHandlerOne");
  assertTrue(ns1 instanceof NSHandlerOne);
  Object ns2=handlerContainer.getComponentInstance("NSHandlerTwo");
  assertTrue(ns2 instanceof NSHandlerTwo);
  NSHandlerTwo nstwo=(NSHandlerTwo)ns2;
  List<String> log=nstwo.getLog();
  checkInterceptorLog(new String[]{"PRECALL:TestBeanC:methodToInvoke:[RED]:","POSTCALL[true]:TestBeanC:methodToInvoke:[RED]:","PRECALL:TestBeanC:methodToInvoke:[BLUE]:","POSTCALL[false]:TestBeanC:methodToInvoke:[BLUE]:"},log);
  RuntimeException re=null;
  try {
    testBeanC.methodToInvoke("GREEN");
  }
 catch (  RuntimeException e) {
    re=e;
  }
  assertNotNull("invocation of Green did not cause an exception as expected",re);
  log=nstwo.getLog();
  checkInterceptorLog(new String[]{"PRECALL:TestBeanC:methodToInvoke:[RED]:","POSTCALL[true]:TestBeanC:methodToInvoke:[RED]:","PRECALL:TestBeanC:methodToInvoke:[BLUE]:","POSTCALL[false]:TestBeanC:methodToInvoke:[BLUE]:","PRECALL:TestBeanC:methodToInvoke:[GREEN]:","POSTCALLEXCEPTION[java.lang.RuntimeException: MATCHED ON GREEN (GREEN)]:TestBeanC:methodToInvoke:[GREEN]:"},log);
  Object obj4=beanContainer.getComponentInstance("ProcessedBean");
  assertTrue(obj4 instanceof ProcessableBean);
  ProcessableBean pb=(ProcessableBean)obj4;
  Object bp=beanContainer.getComponentInstance("http://ns.handler.three/BeanProcessor");
  assertNotNull(bp);
  assertTrue(bp instanceof BeanProcessor);
  assertEquals(1,pb.getProcessedBy().size());
  assertEquals(pb.getProcessedBy().get(0),bp);
  assertEquals(pb.getProcessedBy(Phase.BEFORE_INIT).get(0),bp);
  assertEquals(pb.getProcessedBy(Phase.AFTER_INIT).get(0),bp);
  Object objOther=beanContainer.getComponentInstance("PlaceHolderTestBean");
  assertTrue(objOther instanceof OtherBean);
  assertEquals("test1value",((OtherBean)objOther).getTestValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.BlueprintContainer2BTCustomizerTest </h4><pre class="type-11 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void test() throws Exception {
  CompositeBundle cb=createCompositeBundle();
  BundleContext compositeBundleContext=cb.getCompositeFramework().getBundleContext();
  Bundle testBundle=installBundle(compositeBundleContext,sampleBundleOption().getURL());
  Bundle configAdminBundle=installBundle(compositeBundleContext,configAdminOption().getURL());
  cb.start();
  configAdminBundle.start();
  applyCommonConfiguration(compositeBundleContext);
  testBundle.start();
  startBlueprintBundles();
  Helper.testBlueprintContainer(new RichBundleContext(compositeBundleContext),testBundle);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.ejb.openejb.extender.itest.AdvancedEJBBundleTest </h4><pre class="type-4 type-7 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testJPAContextSharing() throws Exception {
  System.setProperty("openejb.validation.output.level","VERBOSE");
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"JPA_MANIFEST.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"persistence.xml","META-INF/persistence.xml");
  addToZip(zos,"beans/integration/impl/JPASingleton.class");
  addToZip(zos,"beans/jpa/Laptop.class");
  zos.close();
  Bundle test=context().installBundle("",new ByteArrayInputStream(baos.toByteArray()));
  try {
    test.start();
    PersistenceContextProvider provider=context().getService(PersistenceContextProvider.class);
    HashMap<String,Object> props=new HashMap<String,Object>();
    props.put(PersistenceContextProvider.PERSISTENCE_CONTEXT_TYPE,PersistenceContextType.TRANSACTION);
    provider.registerContext("ejb-test",context().getBundle(),props);
    Object bean=context().getService(context().getServiceReference(JPASingleton.class.getName()));
    UserTransaction ut=context().getService(UserTransaction.class);
    Method m=bean.getClass().getMethod("editEntity",String.class);
    EntityManager em=context().getService(EntityManagerFactory.class,"(&(osgi.unit.name=ejb-test)(" + PersistenceUnitConstants.CONTAINER_MANAGED_PERSISTENCE_UNIT + "=true)"+ "("+ PersistenceContextProvider.PROXY_FACTORY_EMF_ATTRIBUTE+ "=*))").createEntityManager();
    ut.begin();
    try {
      Object e=test.loadClass(Laptop.class.getName()).newInstance();
      e.getClass().getMethod("setSerialNumber",String.class).invoke(e,"ABC123");
      e.getClass().getMethod("setNumberOfCores",int.class).invoke(e,1);
      em.persist(e);
      m.invoke(bean,"ABC123");
      assertEquals(4,e.getClass().getMethod("getNumberOfCores").invoke(e));
      assertEquals(Integer.MAX_VALUE,e.getClass().getMethod("getHardDiskSize").invoke(e));
    }
  finally {
      ut.commit();
    }
    test.stop();
  }
  finally {
    test.uninstall();
  }
}

</code></pre>

<br>
<pre class="type-4 type-13 type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testTransactionalEJB() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"TX_MANIFEST.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"beans/integration/impl/TxSingleton.class");
  addToZip(zos,"beans/integration/Tx.class");
  zos.close();
  Bundle test=context().installBundle("",new ByteArrayInputStream(baos.toByteArray()));
  try {
    test.start();
    Object bean=context().getService(context().getServiceReference(Tx.class.getName()));
    UserTransaction ut=context().getService(UserTransaction.class);
    Method no=bean.getClass().getMethod("getNoTransactionId");
    Method maybe=bean.getClass().getMethod("getMaybeTransactionId");
    Method tx=bean.getClass().getMethod("getTransactionId");
    Method newTx=bean.getClass().getMethod("getNewTransactionId");
    assertNull(no.invoke(bean));
    assertNull(maybe.invoke(bean));
    assertNotNull(tx.invoke(bean));
    assertNotNull(newTx.invoke(bean));
    ut.begin();
    try {
      Object key=context().getService(TransactionSynchronizationRegistry.class).getTransactionKey();
      assertNotNull(key);
      assertNull(no.invoke(bean));
      assertSame(key,maybe.invoke(bean));
      assertSame(key,tx.invoke(bean));
      Object o=newTx.invoke(bean);
      assertNotNull(o);
      assertNotSame(key,o);
    }
  finally {
      ut.commit();
    }
    test.stop();
  }
  finally {
    test.uninstall();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.cm.ConfigurationAdminMBeanTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("ManagedServiceFactory tests failing.. " + "Some issues surrounding creating a factory configuration and then retrieving by pid to update.. Needs investigation") @Test @SuppressWarnings("unchecked") public void testMBeanInterface() throws Exception {
  Bundle a=getBundleByName("org.apache.aries.jmx.test.bundlea");
  assertNull(managedServiceA.getConfig());
  TabularData data=mbean.getProperties("org.apache.aries.jmx.test.ServiceA");
  assertEquals(0,data.size());
  PropertyData<String> p1=PropertyData.newInstance("A1","first");
  data.put(p1.toCompositeData());
  PropertyData<Integer> p2=PropertyData.newInstance("A2",2);
  data.put(p2.toCompositeData());
  mbean.update("org.apache.aries.jmx.test.ServiceA",data);
  Thread.sleep(1000);
  Dictionary<String,Object> config=managedServiceA.getConfig();
  assertNotNull(config);
  assertEquals(3,config.size());
  assertEquals("org.apache.aries.jmx.test.ServiceA",config.get(Constants.SERVICE_PID));
  assertEquals("first",config.get("A1"));
  assertEquals(2,config.get("A2"));
  mbean.deleteForLocation("org.apache.aries.jmx.test.ServiceA",a.getLocation());
  Thread.sleep(1000);
  assertNull(managedServiceA.getConfig());
  String cpid=mbean.createFactoryConfiguration("jmx.test.B.factory");
  assertNotNull(cpid);
  assertTrue(cpid.contains("jmx.test.B.factory"));
  TabularData fConfig=mbean.getProperties(cpid);
  assertNotNull(fConfig);
  assertEquals(0,fConfig.values().size());
  PropertyData<String> prop1=PropertyData.newInstance("B1","value1");
  fConfig.put(prop1.toCompositeData());
  PropertyData<Boolean> prop2=PropertyData.newInstance("B2",true);
  fConfig.put(prop2.toCompositeData());
  mbean.update(cpid,fConfig);
  Thread.sleep(1000);
  InterfaceB configured=managedFactory.getConfigured(cpid);
  assertNotNull(configured);
  config=configured.getConfig();
  assertNotNull(config);
  assertTrue(config.size() >= 4);
  assertEquals("jmx.test.B.factory",config.get(ConfigurationAdmin.SERVICE_FACTORYPID));
  assertEquals(cpid,config.get(Constants.SERVICE_PID));
  assertEquals("value1",config.get("B1"));
  assertEquals("true",config.get("B2"));
  assertEquals("jmx.test.B.factory",mbean.getFactoryPid(cpid));
  mbean.delete(cpid);
  Thread.sleep(1000);
  assertNull(managedFactory.getConfigured(cpid));
  data=mbean.getProperties("org.apache.aries.jmx.test.ServiceA");
  assertEquals(0,data.size());
  p1=PropertyData.newInstance("A1","a1Value");
  data.put(p1.toCompositeData());
  mbean.update("org.apache.aries.jmx.test.ServiceA",data);
  Thread.sleep(1000);
  config=managedServiceA.getConfig();
  assertNotNull(config);
  assertEquals(2,config.size());
  assertEquals("org.apache.aries.jmx.test.ServiceA",config.get(Constants.SERVICE_PID));
  assertEquals("a1Value",config.get("A1"));
  String[][] configurations=mbean.getConfigurations("(A1=a1Value)");
  assertNotNull(configurations);
  assertEquals(1,configurations.length);
  assertEquals("org.apache.aries.jmx.test.ServiceA",configurations[0][0]);
  assertEquals(a.getLocation(),configurations[0][1]);
  mbean.deleteConfigurations("(A1=a1Value)");
  Thread.sleep(1000);
  assertNull(managedServiceA.getConfig());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.provisioning.ProvisioningServiceMBeanTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("For now.. Cannot find public repo for org.eclipse.equinox.ip") @Test @SuppressWarnings({"unchecked"}) public void testMBeanInterface() throws Exception {
  ProvisioningServiceMBean mbean=getMBean(ProvisioningServiceMBean.OBJECTNAME,ProvisioningServiceMBean.class);
  Dictionary<String,Object> info;
  File provZip=createProvAgentConfigZip();
  mbean.addInformationFromZip(provZip.toURI().toURL().toExternalForm());
  info=ps.getInformation();
  assertNotNull(info);
  assertTrue(info.size() >= 1);
  assertProvAgentConfigCorrect(info);
  TabularData data=mbean.listInformation();
  assertNotNull(data);
  assertEquals(JmxConstants.PROPERTIES_TYPE,data.getTabularType());
  assertTrue(data.values().size() >= 1);
  PropertyData<byte[]> configEntry=PropertyData.from(data.get(new Object[]{PROVISIONING_AGENT_CONFIG}));
  assertNotNull(configEntry);
  assertArrayEquals(new byte[]{10,20,30},configEntry.getValue());
  PropertyData<String> reference=PropertyData.newInstance(PROVISIONING_REFERENCE,"rsh://0.0.0.0/provX");
  data.put(reference.toCompositeData());
  mbean.addInformation(data);
  info=ps.getInformation();
  assertNotNull(info);
  assertTrue(info.size() >= 2);
  assertProvAgentConfigCorrect(info);
  String ref=(String)info.get(PROVISIONING_REFERENCE);
  assertNotNull(ref);
  assertEquals("rsh://0.0.0.0/provX",ref);
  data.clear();
  PropertyData<String> newRef=PropertyData.newInstance(PROVISIONING_REFERENCE,"rsh://0.0.0.0/newProvRef");
  data.put(newRef.toCompositeData());
  mbean.setInformation(data);
  info=ps.getInformation();
  assertNotNull(info);
  assertTrue(info.size() >= 1);
  assertNull(info.get(PROVISIONING_AGENT_CONFIG));
  ref=(String)info.get(PROVISIONING_REFERENCE);
  assertNotNull(ref);
  assertEquals("rsh://0.0.0.0/newProvRef",ref);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jpa.itest.karaf.DSTest </h4><pre class="type-4 type-7 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test currently does not work as data source config is not deployed for unknown reason
 */
@Ignore @Test public void test() throws BundleException {
  resolveBundles();
  Assert.assertEquals(0,taskService.getTasks().size());
  Task task=new Task();
  task.setId(1);
  task.setDescription("My task");
  taskService.addTask(task);
  Collection<Task> tasks=taskService.getTasks();
  Assert.assertEquals(1,tasks.size());
  Task task1=tasks.iterator().next();
  Assert.assertEquals(1,task1.getId().intValue());
  Assert.assertEquals("My task",task1.getDescription());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.CustomContentHandlerTest </h4><pre class="type-12 type-5 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("This test exposes a problem that needs to be fixed, namely that the previous test leaves stuff behind and that " + "customContent1.esa cannot be installed again. Currently ignored until someone finds the time to fix it.") public void testCustomContentInstallationSecondTime() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleB".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler();
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  try {
    Subsystem subsystem=installSubsystemFromFile("customContent1.esa");
    subsystem.uninstall();
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("This test currently doesn't pass, the bundle moves to the active state, while it shouldn't") public void testCustomContentStartException() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleC".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler(true,"start");
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  assertEquals("Precondition",0,handler.calls.size());
  Subsystem subsystem=installSubsystemFromFile("customContent2.esa");
  try {
    assertEquals(Arrays.asList("install:customContent3 sausages = 3"),handler.calls);
    try {
      Bundle theBundle=null;
      for (      Bundle b : bundleContext.getBundles()) {
        if ("org.apache.aries.subsystem.itests.customcontent.bundleC".equals(b.getSymbolicName())) {
          assertEquals(Bundle.INSTALLED,b.getState());
          theBundle=b;
        }
      }
      assertNotNull(theBundle);
      try {
        subsystem.start();
      }
 catch (      Exception ex) {
      }
      assertEquals("There was an exception during start, so the bundle should not be started",Bundle.INSTALLED,theBundle.getState());
    }
  finally {
      subsystem.uninstall();
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("This test currently doesn't pass, the bundle moves to the active state, while it shouldn't") public void testCustomContentStartFailCoordination() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleD".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler(false,"start");
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  assertEquals("Precondition",0,handler.calls.size());
  Subsystem subsystem=installSubsystemFromFile("customContent3.esa");
  try {
    assertEquals(Arrays.asList("install:customContent4 sausages = 4"),handler.calls);
    try {
      Bundle theBundle=null;
      for (      Bundle b : bundleContext.getBundles()) {
        if ("org.apache.aries.subsystem.itests.customcontent.bundleD".equals(b.getSymbolicName())) {
          assertEquals(Bundle.INSTALLED,b.getState());
          theBundle=b;
        }
      }
      assertNotNull(theBundle);
      try {
        subsystem.start();
      }
 catch (      Exception ex) {
      }
      assertEquals("The coordination failued during start, so the bundle should not be started",Bundle.INSTALLED,theBundle.getState());
    }
  finally {
      subsystem.uninstall();
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.MoveBundleTest </h4><pre class="type-3 type-7 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Create two scopes off of the root scope with the following structure.
 * R
 * / \
 * S1   S2
 * Install a bundle using the test bundle's bundle context. This should add
 * the bundle to R since the test bundle is in R. Next, move the bundle 
 * into S1. Finally, move the bundle into S2.
 * @throws Exception
 */
@Test @Ignore public void test1() throws Exception {
  Bundle tb2=installBundle("tb-2.jar");
  Scope root=getScope();
  ScopeUpdate rootUpdate=root.newScopeUpdate();
  ScopeUpdate s1Update=rootUpdate.newChild("S1");
  ScopeUpdate s2Update=rootUpdate.newChild("S2");
  rootUpdate.getChildren().add(s1Update);
  rootUpdate.getChildren().add(s2Update);
  rootUpdate.commit();
  Scope s1=s1Update.getScope();
  Scope s2=s2Update.getScope();
  assertTrue(root.getBundles().contains(tb2));
  assertFalse(s1.getBundles().contains(tb2));
  assertFalse(s2.getBundles().contains(tb2));
  rootUpdate=root.newScopeUpdate();
  rootUpdate.getBundles().remove(tb2);
  s1Update=findChildUpdate("S1",rootUpdate);
  s1Update.getBundles().add(tb2);
  rootUpdate.commit();
  assertFalse(root.getBundles().contains(tb2));
  assertTrue(s1.getBundles().contains(tb2));
  assertFalse(s2.getBundles().contains(tb2));
  rootUpdate=root.newScopeUpdate();
  s1Update=findChildUpdate("S1",rootUpdate);
  s1Update.getBundles().remove(tb2);
  s2Update=findChildUpdate("S2",rootUpdate);
  s2Update.getBundles().add(tb2);
  rootUpdate.commit();
  assertFalse(root.getBundles().contains(tb2));
  assertFalse(s1.getBundles().contains(tb2));
  assertTrue(s2.getBundles().contains(tb2));
  tb2.uninstall();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.PersistenceTest </h4><pre class="type-4 type-3 type-7 type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * A scope's persisted bundle data will become stale if bundles are 
 * installed or uninstalled while Scope Admin is not connected to the 
 * environment. This should be detected and dealt with.
 * @throws Exception
 */
@Test @Ignore public void test3() throws Exception {
  Scope scope=getScope();
  Bundle tb1=findBundle("org.apache.aries.subsystem.scope.itests.tb1",scope);
  assertNull(tb1);
  tb1=installBundle("tb-1.jar");
  assertTrue(scope.getBundles().contains(tb1));
  Bundle scopeAdmin=findBundle("org.apache.aries.subsystem.scope.impl");
  assertNotNull(scopeAdmin);
  scopeAdmin.stop();
  scopeAdmin.start();
  scope=getScope();
  assertTrue(scope.getBundles().contains(tb1));
  scopeAdmin.stop();
  tb1.uninstall();
  Bundle tb2=findBundle("org.apache.aries.subsystem.scope.itests.tb2",scope);
  assertNull(tb2);
  tb2=installBundle("tb-2.jar");
  scopeAdmin.start();
  scope=getScope();
  assertFalse(scope.getBundles().contains(tb1));
  assertTrue(scope.getBundles().contains(tb2));
  tb2.uninstall();
  assertFalse(scope.getBundles().contains(tb2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.ScopeAdminTest </h4><pre class="type-4 type-5 type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testPackageSharingFromTestScope() throws Exception {
  assertNotNull("scope admin should not be null",scope);
  System.out.println("able to get scope admin service");
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  addPackageImportPolicy("org.osgi.util.tracker",childScopeUpdate);
  Map<String,List<SharePolicy>> sharePolicies=childScopeUpdate.getSharePolicies(SharePolicy.TYPE_EXPORT);
  final Filter filter1=FrameworkUtil.createFilter("(&" + "(osgi.wiring.package=org.apache.aries.subsystem.example.helloIsolation)" + ")");
  final Filter filter2=FrameworkUtil.createFilter("(&" + "(scope.share.service=org.apache.aries.subsystem.example.helloIsolation.HelloIsolation)" + ")");
  List<SharePolicy> packagePolicies=sharePolicies.get(BundleRevision.PACKAGE_NAMESPACE);
  if (packagePolicies == null) {
    packagePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put(BundleRevision.PACKAGE_NAMESPACE,packagePolicies);
  }
  packagePolicies.add(new SharePolicy(SharePolicy.TYPE_EXPORT,BundleRevision.PACKAGE_NAMESPACE,filter1));
  List<SharePolicy> servicePolicies=sharePolicies.get("scope.share.service");
  if (servicePolicies == null) {
    servicePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put("scope.share.service",servicePolicies);
  }
  servicePolicies.add(new SharePolicy(SharePolicy.TYPE_EXPORT,"scope.share.service",filter2));
  InstallInfo info1=new InstallInfo("helloIsolation",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT"));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info1);
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    b.start();
  }
  URL url1=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT");
  Bundle helloIsolationRef=bundleContext.installBundle("helloIsolationRef1-rootScope",url1.openStream());
  try {
    helloIsolationRef.start();
  }
 catch (  Exception ex) {
    fail("should be able to start helloIsolationRef by import packages from scope_test1");
  }
  helloIsolationRef.uninstall();
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testScopeAffinity() throws Exception {
  Scope scope1=createScope(scope,"scope_test1","mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT","0.3");
  Scope scope2=createScope(scope,"scope_test2","mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT","2.0");
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test3");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  Scope scope3=childScopeUpdate.getScope();
  Map<String,List<SharePolicy>> sharePolicies=childScopeUpdate.getSharePolicies(SharePolicy.TYPE_IMPORT);
  final Filter filter1=FrameworkUtil.createFilter("(&" + "(osgi.wiring.package=org.apache.aries.subsystem.example.helloIsolation)" + ")");
  final Filter filter2=FrameworkUtil.createFilter("(&" + "(scope.share.service=org.apache.aries.subsystem.example.helloIsolation.HelloIsolation)" + ")");
  List<SharePolicy> packagePolicies=sharePolicies.get(BundleRevision.PACKAGE_NAMESPACE);
  if (packagePolicies == null) {
    packagePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put(BundleRevision.PACKAGE_NAMESPACE,packagePolicies);
  }
  packagePolicies.add(new SharePolicy(SharePolicy.TYPE_IMPORT,BundleRevision.PACKAGE_NAMESPACE,filter1));
  List<SharePolicy> servicePolicies=sharePolicies.get("scope.share.service");
  if (servicePolicies == null) {
    servicePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put("scope.share.service",servicePolicies);
  }
  servicePolicies.add(new SharePolicy(SharePolicy.TYPE_IMPORT,"scope.share.service",filter2));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    try {
      b.start();
    }
 catch (    Exception ex) {
      ex.printStackTrace();
      fail("should be able to start helloIsolationRef in scope_test1");
    }
  }
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  scopes.clear();
  su.commit();
  assertTrue(scope.getChildren().isEmpty());
  assertTrue(scope.newScopeUpdate().getChildren().isEmpty());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testPackageIsolation() throws Exception {
  assertNotNull("scope admin should not be null",scope);
  System.out.println("able to get scope admin service");
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  addPackageImportPolicy("org.osgi.util.tracker",childScopeUpdate);
  InstallInfo info1=new InstallInfo("helloIsolation",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT"));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info1);
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    b.start();
  }
  URL url1=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT");
  Bundle helloIsolationRef=bundleContext.installBundle("helloIsolationRef1-rootScope",url1.openStream());
  try {
    helloIsolationRef.start();
    fail("should not be able to start helloIsolationRef since missing import packages");
  }
 catch (  Exception ex) {
  }
  URL url2=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT");
  Bundle helloIsolation=bundleContext.installBundle("helloIsolation1-rootScope",url2.openStream());
  helloIsolation.start();
  helloIsolationRef.start();
  helloIsolationRef.uninstall();
  helloIsolation.uninstall();
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.transaction.internal.LogTest </h4><pre class="type-11 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Executes methods or other tests from the same test unit">ExecutionTester</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Executes methods or other tests from the same test unit
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testGeronimo() throws Exception {
  System.err.println("Geronimo");
  XidFactory xidFactory=new XidFactoryImpl("hi".getBytes());
  HOWLLog txLog=new HOWLLog("org.objectweb.howl.log.BlockLogBuffer",4,true,true,50,new File(".").getAbsolutePath(),"log","geronimo",512,0,2,4,-1,true,xidFactory,null);
  txLog.doStart();
  GeronimoTransactionManager tm=new GeronimoTransactionManager(600,xidFactory,txLog);
  XAResource xar1=new TestXAResource("res1");
  XAResource xar2=new TestXAResource("res2");
  tm.registerNamedXAResourceFactory(new TestXAResourceFactory("res1"));
  tm.registerNamedXAResourceFactory(new TestXAResourceFactory("res2"));
  for (int i=minThreads; i <= maxThreads; i*=10) {
    for (int j=minTxPerThread; j <= maxTxPerThread; j*=10) {
      long ms=testThroughput(tm,xar1,xar2,i,j);
      System.err.println("TPS (" + i + " threads, "+ j+ " tx) = "+ ((i * j) / (ms / 1000.0)));
    }
  }
  txLog.doStop();
  System.err.println();
  System.err.flush();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
