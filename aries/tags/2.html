<h3><span class=" glyphicon glyphicon-tag"/>&nbspHybridVerifier</h3><kbd>Contains more than 2 JUnit-based stereotypes</kbd><br><br><br><h4 style="margin:0px">Class: org.apache.aries.ant.taskdefs.EsaTaskTest </h4><pre class="type-4 type-5 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void generateArchiveNoManifest(){
  File srcDir=new File("../src/test/resources");
  File destfile=new File("target/esa-test1.esa");
  if (destfile.exists()) {
    destfile.delete();
  }
  assertFalse(destfile.exists());
  EsaTask esaTask=new EsaTask();
  Project testProject=new Project();
  esaTask.setProject(testProject);
  FileSet fileSet=new FileSet();
  fileSet.setDir(srcDir);
  fileSet.setIncludes("*.jar");
  esaTask.addFileset(fileSet);
  esaTask.setDestFile(destfile);
  esaTask.setSymbolicName("esatask-test");
  esaTask.setVersion("1.0.0");
  esaTask.execute();
  assertTrue(destfile.exists());
  try {
    ZipFile esaArchive=new ZipFile(destfile);
    assertNotNull(esaArchive);
    ZipEntry subsystemManifest=esaArchive.getEntry("OSGI-INF/SUBSYSTEM.MF");
    assertNull(subsystemManifest);
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void generateArchiveWithFileManifest(){
  File srcDir=new File("../src/test/resources");
  File destfile=new File("target/esa-test2.esa");
  if (destfile.exists()) {
    destfile.delete();
  }
  assertFalse(destfile.exists());
  EsaTask esaTask=new EsaTask();
  Project testProject=new Project();
  esaTask.setProject(testProject);
  FileSet fileSet=new FileSet();
  fileSet.setDir(srcDir);
  fileSet.setIncludes("*.jar");
  esaTask.addFileset(fileSet);
  esaTask.setDestFile(destfile);
  esaTask.setSymbolicName("esatask-test");
  esaTask.setVersion("1.0.0");
  esaTask.setManifest(new File(srcDir,"SUBSYSTEM.MF"));
  esaTask.execute();
  assertTrue(destfile.exists());
  try {
    ZipFile esaArchive=new ZipFile(destfile);
    assertNotNull(esaArchive);
    ZipEntry subsystemManifest=esaArchive.getEntry("OSGI-INF/SUBSYSTEM.MF");
    assertNotNull(subsystemManifest);
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void generateArchiveWithNewManifest(){
  File srcDir=new File("../src/test/resources");
  assertTrue(srcDir.exists());
  File destfile=new File("target/esa-test.esa");
  if (destfile.exists()) {
    destfile.delete();
  }
  assertFalse(destfile.exists());
  EsaTask esaTask=new EsaTask();
  Project testProject=new Project();
  esaTask.setProject(testProject);
  FileSet fileSet=new FileSet();
  fileSet.setDir(srcDir);
  fileSet.setIncludes("*.jar");
  esaTask.addFileset(fileSet);
  esaTask.setDestFile(destfile);
  esaTask.setSymbolicName("esatask-test");
  esaTask.setName("ESA Test Task");
  esaTask.setVersion("1.0.0");
  esaTask.setGenerateManifest(true);
  esaTask.execute();
  assertTrue(destfile.exists());
  try {
    ZipFile esaArchive=new ZipFile(destfile);
    assertNotNull(esaArchive);
    ZipEntry subsystemManifest=esaArchive.getEntry("OSGI-INF/SUBSYSTEM.MF");
    assertNotNull(subsystemManifest);
  }
 catch (  IOException e) {
    fail(e.getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.deployment.management.DeploymentGeneratorTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This method checks that the a more complicated circular dependency issues the correct error message
 * and checks that the details listed in the exception are correct. 
 * @throws Exception
 */
@Test public void checkMultipleCircularDependenciesDetected() throws Exception {
  Collection<ModelledResource> cmr=new ArrayList<ModelledResource>();
  ExportedPackage testIsolated1=createExportedPackage("test.isolated1","1.0.0",new String[]{"test.isolated1","test.isolated2"},new String[]{"test.shared1","test.shared2"});
  cmr.add(testIsolated1.getBundle());
  ExportedPackage testIsolated2=createExportedPackage("test.isolated2","1.0.0",new String[]{"test.isolated1","test.isolated2"},new String[]{"test.shared1","test.shared2"});
  cmr.add(testIsolated2.getBundle());
  ExportedPackage testShared1=createExportedPackage("test.shared1","1.0.0",new String[]{"test.shared1","test.shared2"},new String[]{"test.isolated1","test.isolated2"});
  cmr.add(testShared1.getBundle());
  ExportedPackage testShared2=createExportedPackage("test.shared2","1.0.0",new String[]{"test.shared1","test.shared2"},new String[]{"test.isolated1","test.isolated2"});
  cmr.add(testShared2.getBundle());
  _resolver.addResult(cmr);
  _resolver.addResult(cmr);
  Skeleton.getSkeleton(appMetadata).setReturnValue(new MethodCall(ApplicationMetadata.class,"getApplicationContents"),Arrays.asList(mockContent("test.isolated1","1.0.0"),mockContent("test.isolated2","1.0.0")));
  app=Skeleton.newMock(AriesApplication.class);
  Skeleton.getSkeleton(app).setReturnValue(new MethodCall(AriesApplication.class,"getApplicationMetadata"),appMetadata);
  try {
    DeployedBundles deployedBundles=deplMFMgr.generateDeployedBundles(appMetadata,Arrays.asList(new ModelledResource[]{testIsolated1.getBundle(),testIsolated2.getBundle()}),new ArrayList<Content>());
    deplMFMgr.generateDeploymentManifest(appMetadata.getApplicationSymbolicName(),appMetadata.getApplicationVersion().toString(),deployedBundles);
  }
 catch (  ResolverException rx) {
    List<String> unsatisfiedReqs=rx.getUnsatisfiedRequirements();
    assertEquals("4 unsatisfied requirements expected, but got " + Arrays.toString(unsatisfiedReqs.toArray()),4,unsatisfiedReqs.size());
    List<String> checkMessages=new ArrayList<String>();
    checkMessages.add("Shared bundle test.shared1_1.0.0 has a dependency for package test.isolated1 which " + "is exported from application bundles [test.isolated1_1.0.0, test.isolated2_1.0.0]");
    checkMessages.add("Shared bundle test.shared1_1.0.0 has a dependency for package test.isolated2 which " + "is exported from application bundles [test.isolated1_1.0.0, test.isolated2_1.0.0]");
    checkMessages.add("Shared bundle test.shared2_1.0.0 has a dependency for package test.isolated1 which " + "is exported from application bundles [test.isolated1_1.0.0, test.isolated2_1.0.0]");
    checkMessages.add("Shared bundle test.shared2_1.0.0 has a dependency for package test.isolated2 which " + "is exported from application bundles [test.isolated1_1.0.0, test.isolated2_1.0.0]");
    for (    String unsatisfiedReq : unsatisfiedReqs) {
      assertTrue(unsatisfiedReq + " is not an expected msg",checkMessages.contains(unsatisfiedReq.trim()));
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkBasicCircularDependenciesDetected() throws Exception {
  Collection<ModelledResource> cmr=new ArrayList<ModelledResource>();
  ExportedPackage testIsolatedPkg=createExportedPackage("test.isolated","1.0.0",new String[]{"test.shared"},new String[]{"test.isolated.pkg"});
  cmr.add(testIsolatedPkg.getBundle());
  ExportedPackage testSharedPkg=createExportedPackage("test.shared","1.0.0",new String[]{"test.isolated.pkg"},new String[]{"test.shared"});
  cmr.add(testSharedPkg.getBundle());
  _resolver.addResult(cmr);
  _resolver.addResult(cmr);
  Skeleton.getSkeleton(appMetadata).setReturnValue(new MethodCall(ApplicationMetadata.class,"getApplicationContents"),Arrays.asList(mockContent("test.isolated","1.0.0")));
  try {
    DeployedBundles deployedBundles=deplMFMgr.generateDeployedBundles(appMetadata,new ArrayList<ModelledResource>(),new ArrayList<Content>());
    deplMFMgr.generateDeploymentManifest(appMetadata.getApplicationSymbolicName(),appMetadata.getApplicationVersion().toString(),deployedBundles);
  }
 catch (  ResolverException rx) {
    List<String> usr=rx.getUnsatisfiedRequirements();
    assertEquals("One unsatisfied requirement expected, not " + usr.size(),usr.size(),1);
    String chkMsg="Shared bundle test.shared_1.0.0 has a dependency for package " + "test.shared which is exported from application bundle [test.isolated_1.0.0]";
    assertTrue(chkMsg + " expected, not " + usr,usr.contains(chkMsg));
    return;
  }
  fail("ResolverException expected");
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolve() throws Exception {
  Skeleton.getSkeleton(appMetadata).setReturnValue(new MethodCall(ApplicationMetadata.class,"getApplicationContents"),Arrays.asList(mockContent("aries.test.a","1.0.0"),mockContent("aries.test.b","[1.0.0, 2.0.0)")));
  Skeleton.getSkeleton(appMetadata).setReturnValue(new MethodCall(ApplicationMetadata.class,"getUseBundles"),Arrays.asList(BUNDLE_C,BUNDLE_D));
  DeployedBundles deployedBundles=deplMFMgr.generateDeployedBundles(appMetadata,new ArrayList<ModelledResource>(),Collections.<Content>emptyList());
  Manifest man=deplMFMgr.generateDeploymentManifest(appMetadata.getApplicationSymbolicName(),appMetadata.getApplicationVersion().toString(),deployedBundles);
  Attributes attrs=man.getMainAttributes();
  assertEquals("aries.test",attrs.getValue(AppConstants.APPLICATION_SYMBOLIC_NAME));
  assertEquals("1.0.0",attrs.getValue(AppConstants.APPLICATION_VERSION));
  String content=attrs.getValue(AppConstants.DEPLOYMENT_CONTENT);
  String useBundle=attrs.getValue(AppConstants.DEPLOYMENT_USE_BUNDLE);
  String provisioned=attrs.getValue(AppConstants.DEPLOYMENT_PROVISION_BUNDLE);
  assertTrue(content.contains("aries.test.a;deployed-version=1.0.0"));
  assertTrue(content.contains("aries.test.b;deployed-version=1.1.0"));
  assertTrue(useBundle.contains("aries.test.c;deployed-version=1.0.5"));
  assertFalse(useBundle.contains("aries.test.d"));
  assertTrue(provisioned.contains("aries.test.e;deployed-version=1.0.0"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.impl.ApplicationMetadataImplTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMetadataCreation() throws Exception {
  ApplicationMetadataFactory manager=new ApplicationMetadataFactoryImpl();
  ApplicationMetadata app=manager.parseApplicationMetadata(getClass().getResourceAsStream("/META-INF/APPLICATION4.MF"));
  assertEquals("Travel Reservation",app.getApplicationName());
  assertEquals("com.travel.reservation",app.getApplicationSymbolicName());
  assertEquals(Version.parseVersion("1.2.0"),app.getApplicationVersion());
  List<Content> appContents=app.getApplicationContents();
  assertEquals(2,appContents.size());
  Content appContent1=new ContentImpl("com.travel.reservation.business");
  Map<String,String> attrs=new HashMap<String,String>();
  attrs.put("version","\"[1.1.0,1.2.0)\"");
  Content appContent2=new ContentImpl("com.travel.reservation.web",attrs);
  assertTrue(appContents.contains(appContent2));
  assertTrue(appContents.contains(appContent1));
  List<ServiceDeclaration> importedService=app.getApplicationImportServices();
  assertEquals(2,importedService.size());
  assertTrue(importedService.contains(new ServiceDeclarationImpl("com.travel.flight.api")));
  assertTrue(importedService.contains(new ServiceDeclarationImpl("com.travel.rail.api")));
  List<ServiceDeclaration> exportedService=app.getApplicationExportServices();
  assertTrue(exportedService.contains(new ServiceDeclarationImpl("com.travel.reservation")));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.impl.DeploymentContentImplTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeploymentContent002() throws Exception {
  DeploymentContentImpl dc=new DeploymentContentImpl("com.travel.reservation.business;deployed-version=2.0");
  assertEquals("2.0",dc.getAttribute("deployed-version"));
  VersionRange vi=dc.getVersion();
  assertTrue(vi.isExactVersion());
  assertEquals(new Version("2.0"),dc.getExactVersion());
  assertEquals("com.travel.reservation.business",dc.getContentName());
  assertEquals("{deployed-version=2.0}",dc.getNameValueMap().toString());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeploymentContent003() throws Exception {
  DeploymentContentImpl dc=new DeploymentContentImpl("com.travel.reservation.data;deployed-version=2.1.1");
  assertEquals("2.1.1",dc.getAttribute("deployed-version"));
  VersionRange vi=dc.getVersion();
  assertTrue(vi.isExactVersion());
  assertEquals(new Version("2.1.1"),dc.getExactVersion());
  assertEquals("com.travel.reservation.data",dc.getContentName());
  assertEquals("{deployed-version=2.1.1}",dc.getNameValueMap().toString());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeploymentContent001() throws Exception {
  DeploymentContentImpl dc=new DeploymentContentImpl("com.travel.reservation.web;deployed-version=\"1.1.0\"");
  assertEquals("1.1.0",dc.getAttribute("deployed-version"));
  VersionRange vi=dc.getVersion();
  assertTrue(vi.isExactVersion());
  assertEquals(new Version("1.1.0"),dc.getExactVersion());
  assertEquals("com.travel.reservation.web",dc.getContentName());
  assertEquals("{deployed-version=1.1.0}",dc.getNameValueMap().toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.management.impl.AriesApplicationManagerImplTest </h4><pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreate() throws Exception {
  AriesApplication app=createApplication(TEST_EBA);
  ApplicationMetadata appMeta=app.getApplicationMetadata();
  assertEquals(appMeta.getApplicationName(),"Test application");
  assertEquals(appMeta.getApplicationSymbolicName(),"org.apache.aries.application.management.test");
  assertEquals(appMeta.getApplicationVersion(),new Version("1.0"));
  List<Content> appContent=appMeta.getApplicationContents();
  assertEquals(appContent.size(),2);
  Content fbw=new ContentImpl("foo.bar.widgets;version=1.0.0");
  Content mbl=new ContentImpl("my.business.logic;version=1.0.0");
  assertTrue(appContent.contains(fbw));
  assertTrue(appContent.contains(mbl));
  DeploymentMetadata dm=app.getDeploymentMetadata();
  List<DeploymentContent> dcList=dm.getApplicationDeploymentContents();
  assertEquals(2,dcList.size());
  DeploymentContent dc1=new DeploymentContentImpl("foo.bar.widgets;deployed-version=1.1.0");
  DeploymentContent dc2=new DeploymentContentImpl("my.business.logic;deployed-version=1.1.0");
  DeploymentContent dc3=new DeploymentContentImpl("a.handy.persistence.library;deployed-version=1.1.0");
  assertTrue(dcList.contains(dc1));
  assertTrue(dcList.contains(dc2));
  dcList=dm.getApplicationProvisionBundles();
  assertEquals(1,dcList.size());
  assertTrue(dcList.contains(dc3));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateAndConversion() throws Exception {
  AriesApplication app=createApplication(CONVERSION_EBA);
  ApplicationMetadata appMeta=app.getApplicationMetadata();
  assertEquals(appMeta.getApplicationName(),"conversion.eba");
  assertEquals(appMeta.getApplicationSymbolicName(),"conversion.eba");
  assertEquals(appMeta.getApplicationVersion(),new Version("0.0"));
  List<Content> appContent=appMeta.getApplicationContents();
  assertEquals(2,appContent.size());
  Content fbw=new ContentImpl("hello.world.jar;version=\"[1.1.0, 1.1.0]\"");
  Content mbl=new ContentImpl("helloWorld.war;version=\"[0.0.0, 0.0.0]\"");
  assertTrue(appContent.contains(fbw));
  assertTrue(appContent.contains(mbl));
  DeploymentMetadata dm=app.getDeploymentMetadata();
  List<DeploymentContent> dcList=dm.getApplicationDeploymentContents();
  assertEquals(2,dcList.size());
  DeploymentContent dc1=new DeploymentContentImpl("hello.world.jar;deployed-version=1.1.0");
  DeploymentContent dc2=new DeploymentContentImpl("helloWorld.war;deployed-version=0.0.0");
  DeploymentContent dc3=new DeploymentContentImpl("a.handy.persistence.library;deployed-version=1.1.0");
  assertTrue(dcList.contains(dc1));
  assertTrue(dcList.contains(dc2));
  dcList=dm.getApplicationProvisionBundles();
  assertEquals(1,dcList.size());
  assertTrue(dcList.contains(dc3));
  assertEquals(2,app.getBundleInfo().size());
  BundleInfo info;
  info=findBundleInfo(app.getBundleInfo(),"hello.world.jar");
  assertNotNull(info);
  assertEquals("HelloWorldJar",info.getHeaders().get(Constants.BUNDLE_NAME));
  info=findBundleInfo(app.getBundleInfo(),"helloWorld.war");
  assertNotNull(info);
  assertEquals("helloWorld.war",info.getHeaders().get(Constants.BUNDLE_NAME));
  assertEquals("/test",info.getHeaders().get("Bundle-ContextPath"));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailedUpdate() throws Exception {
  AriesApplication app=createApplication(TEST_EBA);
  DeploymentMetadata depMf=createUpdateDepMf();
  AriesApplicationContext ctx=Skeleton.newMock(AriesApplicationContext.class);
  Skeleton.getSkeleton(ctx).setReturnValue(new MethodCall(AriesApplicationContext.class,"getApplication"),app);
  AriesApplicationContextManager ctxMgr=Skeleton.newMock(AriesApplicationContextManager.class);
  Skeleton.getSkeleton(ctxMgr).setReturnValue(new MethodCall(AriesApplicationContextManager.class,"getApplicationContexts"),Collections.singleton(ctx));
  Skeleton.getSkeleton(ctxMgr).setThrows(new MethodCall(AriesApplicationContextManager.class,"update",AriesApplication.class,DeploymentMetadata.class),new UpdateException("",null,false,null));
  _appMgr.setApplicationContextManager(ctxMgr);
  try {
    _appMgr.update(app,depMf);
    fail("Update should have failed.");
  }
 catch (  UpdateException e) {
    assertTrue("Deployment.mf should have been updated",app.getDeploymentMetadata() == depMf);
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRolledbackUpdate() throws Exception {
  AriesApplication app=createApplication(TEST_EBA);
  DeploymentMetadata depMf=createUpdateDepMf();
  DeploymentMetadata oldMf=app.getDeploymentMetadata();
  AriesApplicationContext ctx=Skeleton.newMock(AriesApplicationContext.class);
  Skeleton.getSkeleton(ctx).setReturnValue(new MethodCall(AriesApplicationContext.class,"getApplication"),app);
  AriesApplicationContextManager ctxMgr=Skeleton.newMock(AriesApplicationContextManager.class);
  Skeleton.getSkeleton(ctxMgr).setReturnValue(new MethodCall(AriesApplicationContextManager.class,"getApplicationContexts"),Collections.singleton(ctx));
  Skeleton.getSkeleton(ctxMgr).setThrows(new MethodCall(AriesApplicationContextManager.class,"update",AriesApplication.class,DeploymentMetadata.class),new UpdateException("",null,true,null));
  _appMgr.setApplicationContextManager(ctxMgr);
  try {
    _appMgr.update(app,depMf);
    fail("Update should have failed.");
  }
 catch (  UpdateException e) {
    assertTrue("Deployment.mf should have been rolled back to the old",app.getDeploymentMetadata() == oldMf);
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStoreAndReload() throws Exception {
  AriesApplication app=createApplication(TEST_EBA);
  File dest=new File("ariesApplicationManagerImplTest/stored.eba");
  app.store(dest);
  IDirectory storedEba=FileSystem.getFSRoot(dest);
  assertNotNull(storedEba);
  assertEquals(storedEba.listFiles().size(),3);
  IFile ifile=storedEba.getFile("META-INF/APPLICATION.MF");
  assertNotNull(ifile);
  ifile=storedEba.getFile("META-INF/DEPLOYMENT.MF");
  assertNotNull(ifile);
  ifile=storedEba.getFile("foo.bar.widgets.jar");
  assertNotNull(ifile);
  ifile=storedEba.getFile("my.business.logic.jar");
  assertNotNull(ifile);
  AriesApplication newApp=_appMgr.createApplication(storedEba);
  DeploymentMetadata dm=newApp.getDeploymentMetadata();
  assertEquals(2,dm.getApplicationDeploymentContents().size());
  assertEquals(1,dm.getApplicationProvisionBundles().size());
  assertEquals(dm.getApplicationSymbolicName(),app.getApplicationMetadata().getApplicationSymbolicName());
  assertEquals(dm.getApplicationVersion(),app.getApplicationMetadata().getApplicationVersion());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.modelling.impl.ParserProxyTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void basicTest1() throws Exception {
  File bpXml=new File(resourceDir,"appModeller/test1.eba/bundle1.jar/OSGI-INF/blueprint/bp.xml");
  File bp2Xml=new File(resourceDir,"appModeller/test1.eba/bundle1.jar/OSGI-INF/blueprint/bp2.xml");
  List<URL> urls=new ArrayList<URL>();
  urls.add((bpXml.toURI()).toURL());
  urls.add((bp2Xml.toURI()).toURL());
  List<? extends WrappedServiceMetadata> results=_parserProxy.parse(urls);
  assertTrue("Four results expected, not " + results.size(),results.size() == 4);
  Set<WrappedServiceMetadata> resultSet=new HashSet<WrappedServiceMetadata>(results);
  Set<WrappedServiceMetadata> expectedResults=getTest1ExpectedResults();
  assertEquals("Blueprint parsed xml is not as expected: " + resultSet.toString() + " != "+ expectedResults,resultSet,expectedResults);
}

</code></pre>

<br>
<pre class="type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseAllServiceElements() throws Exception {
  File bpXml=new File(resourceDir,"appModeller/test1.eba/bundle1.jar/OSGI-INF/blueprint/bp.xml");
  File bp2Xml=new File(resourceDir,"appModeller/test1.eba/bundle1.jar/OSGI-INF/blueprint/bp2.xml");
  List<WrappedServiceMetadata> services=new ArrayList<WrappedServiceMetadata>();
  List<WrappedReferenceMetadata> references=new ArrayList<WrappedReferenceMetadata>();
  FileInputStream fis=new FileInputStream(bpXml);
  ParsedServiceElements bpelem=_parserProxy.parseAllServiceElements(fis);
  services.addAll(bpelem.getServices());
  references.addAll(bpelem.getReferences());
  fis=new FileInputStream(bp2Xml);
  bpelem=_parserProxy.parseAllServiceElements(fis);
  services.addAll(bpelem.getServices());
  references.addAll(bpelem.getReferences());
  assertTrue("Six services expected, not " + services.size(),services.size() == 6);
  assertTrue("Three references expected, not " + references.size(),references.size() == 3);
  Set<WrappedServiceMetadata> expectedServices=getTest2ExpectedServices();
  int serviceMatchesFound=0;
  for (  WrappedServiceMetadata result : services) {
    Iterator<WrappedServiceMetadata> it=expectedServices.iterator();
    while (it.hasNext()) {
      WrappedServiceMetadata next=it.next();
      if (result.equals(next) || result.identicalOrDiffersOnlyByName(next)) {
        serviceMatchesFound++;
        it.remove();
      }
    }
  }
  assertEquals("Parsed services are wrong: " + expectedServices + " unmatched ",6,serviceMatchesFound);
  Set<WrappedReferenceMetadata> expectedReferences=getTest2ExpectedReferences();
  Set<WrappedReferenceMetadata> results=new HashSet<WrappedReferenceMetadata>(references);
  assertTrue("Parsed references are not as we'd expected: " + results.toString() + " != "+ expectedReferences,results.equals(expectedReferences));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.modelling.utils.AbstractBundleResourceTest </h4><pre class="type-4 type-12 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleResource() throws Exception {
  assertEquals("The bundle symbolic name is wrong.","test.bundle1",bundleResource.getSymbolicName());
  assertEquals("The bundle version is wrong.","2.0.0.build-121",bundleResource.getVersion().toString());
  assertEquals("The bundle presentation name is wrong.","Test Bundle",bundleResource.getExportedBundle().getAttributes().get(ModellingConstants.OBR_PRESENTATION_NAME));
  int count=0;
  for (  ImportedPackage ip : bundleResource.getImportedPackages()) {
    String filter=ip.getAttributeFilter();
    Map<String,String> parsedFilterElements=ManifestHeaderProcessor.parseFilter(filter);
    if (ip.getPackageName().equals("org.osgi.framework")) {
      count++;
      assertEquals("Wrong package",parsedFilterElements.get("package"),"org.osgi.framework");
      assertEquals("Wrong package version",parsedFilterElements.get("version"),"1.3.0");
    }
 else     if (ip.getPackageName().equals("aries.ws.kernel.file")) {
      count++;
      assertEquals("Wrong package",parsedFilterElements.get("package"),"aries.ws.kernel.file");
      assertEquals("Wrong package version",parsedFilterElements.get("version"),"0.0.0");
    }
 else     if (ip.getPackageName().equals("aries.wsspi.application.aries")) {
      count++;
      assertEquals("Wrong package",parsedFilterElements.get("package"),"aries.wsspi.application.aries");
      assertEquals("Wrong package version",parsedFilterElements.get("version"),"0.0.0");
      assertEquals("Company wrong",parsedFilterElements.get("company"),"yang");
      assertTrue("mandatory filter missing",filter.contains("(mandatory:<*company)"));
    }
 else     if (ip.getPackageName().equals("aries.ws.ffdc")) {
      count++;
      assertEquals("The filter is wrong.","(&(package=aries.ws.ffdc)(version>=0.0.0))",ip.getAttributeFilter());
      assertTrue("Optional import not correctly represented",ip.isOptional());
    }
 else     if (ip.getPackageName().equals("aries.ws.app.framework.plugin")) {
      count++;
      assertEquals("Wrong package",parsedFilterElements.get("package"),"aries.ws.app.framework.plugin");
      assertEquals("Wrong package version",parsedFilterElements.get("version"),"[1.0.0,2.0.0)");
    }
 else     if (ip.getPackageName().equals("aries.ejs.ras")) {
      count++;
      assertEquals("Wrong package",parsedFilterElements.get("package"),"aries.ejs.ras");
      assertEquals("Wrong package version",parsedFilterElements.get("version"),"0.0.0");
    }
 else     if (ip.getPackageName().equals("aries.ws.event")) {
      count++;
      assertEquals("Wrong package",parsedFilterElements.get("package"),"aries.ws.event");
      assertEquals("Wrong package version",parsedFilterElements.get("version"),"1.0.0");
    }
 else     if (ip.getPackageName().equals("aries.wsspi.app.container.aries")) {
      count++;
      assertEquals("Wrong package",parsedFilterElements.get("package"),"aries.wsspi.app.container.aries");
      assertEquals("Wrong package version",parsedFilterElements.get("version"),"0.0.0");
      assertEquals("Wrong bundle symbolic name",parsedFilterElements.get("bundle-symbolic-name"),"B");
      assertEquals("Wrong bundle version",parsedFilterElements.get("bundle-version"),"[1.2.0,2.2.0)");
    }
 else     if (ip.getPackageName().equals("aries.ws.eba.bla")) {
      count++;
      assertEquals("Wrong package",parsedFilterElements.get("package"),"aries.ws.eba.bla");
      assertEquals("Wrong package version",parsedFilterElements.get("version"),"0.0.0");
    }
 else     if (ip.getPackageName().equals("aries.ws.eba.launcher")) {
      count++;
      assertEquals("Wrong package",parsedFilterElements.get("package"),"aries.ws.eba.launcher");
      assertEquals("Wrong package version",parsedFilterElements.get("version"),"[1.0.0,2.0.0]");
      assertTrue("Dynamic-ImportPackage should be optional",ip.isOptional());
    }
 else     if (ip.getPackageName().equals("aries.ws.eba.bundle4")) {
      count++;
      assertEquals("Wrong package",parsedFilterElements.get("package"),"aries.ws.eba.bundle4");
      assertEquals("Wrong package version",parsedFilterElements.get("version"),"3.0.0");
    }
 else     if (ip.getPackageName().equals("aries.ws.eba.bundle5")) {
      count++;
      assertEquals("Wrong package",parsedFilterElements.get("package"),"aries.ws.eba.bundle5");
      assertEquals("Wrong package version",parsedFilterElements.get("version"),"3.0.0");
    }
 else     if (ip.getPackageName().equals("aries.ws.eba.bundle6")) {
      count++;
      assertEquals("Wrong package",parsedFilterElements.get("package"),"aries.ws.eba.bundle6");
      assertEquals("The filter is wrong.","(&(package=aries.ws.eba.bundle6)(version>=0.0.0))",ip.getAttributeFilter());
    }
 else     if (ip.getPackageName().equals("aries.ws.eba.bundle7")) {
      count++;
      assertEquals("The filter is wrong.","(&(package=aries.ws.eba.bundle7)(version>=0.0.0))",ip.getAttributeFilter());
    }
  }
  for (  ImportedBundle ib : bundleResource.getRequiredBundles()) {
    String filter=ib.getAttributeFilter();
    Map<String,String> parsedFilterElements=ManifestHeaderProcessor.parseFilter(filter);
    if (ib.getSymbolicName().equals("com.acme.facade")) {
      count++;
      assertEquals("Wrong bundle symbolic name",parsedFilterElements.get("symbolicname"),"com.acme.facade");
      assertEquals("Wrong bundle version",parsedFilterElements.get("version"),"3.0.0");
    }
 else     if (ib.getSymbolicName().equals("com.acme.bar")) {
      count++;
      assertEquals("Wrong bundle symbolic name",parsedFilterElements.get("symbolicname"),"com.acme.bar");
    }
 else     if (ib.getSymbolicName().equals("aries.ws.eba.framework")) {
      count++;
      assertEquals("Wrong bundle symbolic name",parsedFilterElements.get("symbolicname"),"aries.ws.eba.framework");
      assertEquals("Wrong bundle version",parsedFilterElements.get("version"),"(3.0.0,4.0.0)");
    }
 else     if (ib.getSymbolicName().equals("com.de.ba")) {
      count++;
      assertEquals("Wrong bundle symbolic name",parsedFilterElements.get("symbolicname"),"com.de.ba");
    }
 else     if (ib.getSymbolicName().equals("com.ab.de")) {
      count++;
      assertEquals("Wrong bundle symbolic name",parsedFilterElements.get("symbolicname"),"com.ab.de");
    }
  }
  for (  ImportedService svc : bundleResource.getImportedServices()) {
    if (svc.getInterface().equals("aries.ws.eba.import")) {
      count++;
      String filter=svc.getAttributeFilter();
      Map<String,String> parsedFilterElements=ManifestHeaderProcessor.parseFilter(filter);
      assertEquals("Wrong object class",parsedFilterElements.get("objectClass"),"aries.ws.eba.import");
      assertTrue("(service=service) should be present",svc.getAttributeFilter().contains("(service=service)"));
      assertTrue("(mandatory:<*service) should be present",svc.getAttributeFilter().contains("(mandatory:<*service)"));
    }
  }
  assertEquals("Not all requirements are listed.",bundleResource.getImportedPackages().size() + bundleResource.getImportedServices().size() + bundleResource.getRequiredBundles().size(),count);
  int verifiedExport=0;
  for (  ExportedPackage cap : bundleResource.getExportedPackages()) {
    if (cap.getPackageName().equals("aries.ws.eba.bundle1")) {
      verifiedExport++;
      assertEquals("The export package is not expected.","2.2.0",cap.getVersion());
      assertEquals("The export package is not expected.","test.bundle1",cap.getAttributes().get("bundle-symbolic-name"));
      assertEquals("The export package is not expected.","2.0.0.build-121",cap.getAttributes().get("bundle-version").toString());
    }
 else     if (cap.getPackageName().equals("aries.ws.eba.bundle2")) {
      verifiedExport++;
      assertEquals("The export package is not expected.","3",cap.getVersion());
    }
 else     if (cap.getPackageName().equals("aries.ws.eba.bundle3")) {
      verifiedExport++;
      assertEquals("The export package is not expected.","3",cap.getVersion());
    }
  }
  assertEquals("The number of exports are not expected.",bundleResource.getExportedPackages().size(),verifiedExport);
  assertEquals("The bundle resource is wrong.","Test Bundle",bundleResource.getExportedBundle().getAttributes().get(ModellingConstants.OBR_PRESENTATION_NAME));
  assertEquals("The bundle resource is wrong.","2.0.0.build-121",bundleResource.getExportedBundle().getVersion());
  assertEquals("The bundle resource is wrong.","test.bundle1",bundleResource.getExportedBundle().getSymbolicName());
  for (  ExportedService svc : bundleResource.getExportedServices()) {
    assertEquals("The export service is wrong","aries.ws.eba.export",svc.getInterfaces().iterator().next());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.modelling.utils.DeployedBundlesTest </h4><pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRequiredUseBundle_Valid() throws Exception {
  DeployedBundles deployedBundles=validDeployedBundles();
  packagesResolve(deployedBundles);
  Collection<ModelledResource> requiredUseBundle=null;
  try {
    requiredUseBundle=deployedBundles.getRequiredUseBundle();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  Assert.assertTrue("RequiredUseBundle=" + requiredUseBundle,requiredUseBundle.size() == 2);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetImportPackage_ValidResolutionAttribute() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.CONTENT,ternary.NONE);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.c;version=1.0.0;resolution:=optional"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",Arrays.asList("package.c;version=1.0.0"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.c","1.0.0",new ArrayList<String>(),Arrays.asList("package.c;version=1.0.0")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  String expectedResult="package.c;version=1.0.0";
  Assert.assertTrue("ImportPackage=" + importPackageEntry,isEqual(importPackageEntry,expectedResult));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetImportPackage_ValidDuplicatesWithAttributes() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.CONTENT,ternary.NONE);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.c;version=1.0.0;was_internal=true"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",Arrays.asList("package.c;version=2.0.0;was_internal=true"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.c","1.0.0",new ArrayList<String>(),Arrays.asList("package.c;version=2.0.0;was_internal=true")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  String expectedResult="package.c;was_internal=\"true\";version=\"2.0.0\"";
  Assert.assertTrue("ImportPackage=" + importPackageEntry,isEqual(importPackageEntry,expectedResult));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetImportPackage_Valid() throws Exception {
  String importPackageEntry=null;
  try {
    DeployedBundles deployedBundles=validDeployedBundles();
    packagesResolve(deployedBundles);
    importPackageEntry=deployedBundles.getImportPackage();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  String expectedResult="package.c;version=\"1.0.0\";bundle-symbolic-name=\"bundle.c\";bundle-version=\"[1.0.0,1.0.0]\"," + "package.d;version=\"1.0.0\";bundle-symbolic-name=\"bundle.d\";bundle-version=\"[1.0.0,1.0.0]\"," + "package.e;version=\"[1.0.0,2.0.0)\","+ "package.g;version=\"0.0.0\"";
  Assert.assertTrue("ImportPackage=" + importPackageEntry,isEqual(importPackageEntry,expectedResult));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetImportPackage_bundleSymbolicNameOK() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.CONTENT,ternary.NONE);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.b;version=1.0.0;bundle-symbolic-name=bundle.b;bundle-version=\"[1.0.0,2.0.0)\""),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",new ArrayList<String>(),Arrays.asList("package.b;version=2.0.0")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  String expectedResult="";
  Assert.assertTrue("ImportPackage=" + importPackageEntry,isEqual(importPackageEntry,expectedResult));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetImportPackage_ValidDuplicates() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.CONTENT,ternary.CONTENT);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.d;version=\"[1.0.0,3.0.0)\""),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",Arrays.asList("package.d;version=\"2.0.0\""),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.c","1.0.0",Arrays.asList("package.d;version=\"1.0.0\""),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.d","1.0.0",new ArrayList<String>(),Arrays.asList("package.d;version=2.0.1")));
  String importPackageEntry=null;
  try {
    importPackageEntry=deployedBundles.getImportPackage();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  String expectedResult="package.d;version=\"[2.0.0,3.0.0)\"";
  Assert.assertTrue("ImportPackage=" + importPackageEntry,isEqual(importPackageEntry,expectedResult));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetRequiredUseBundle_RedundantEntry() throws Exception {
  DeployedBundles deployedBundles=getSimpleDeployedBundles(ternary.CONTENT,ternary.USES,ternary.USES);
  deployedBundles.addBundle(createModelledResource("bundle.a","1.0.0",Arrays.asList("package.b"),new ArrayList<String>()));
  deployedBundles.addBundle(createModelledResource("bundle.b","1.0.0",Arrays.asList("package.c"),Arrays.asList("package.b;version=1.0.0")));
  deployedBundles.addBundle(createModelledResource("bundle.c","1.0.0",Arrays.asList("package.b;version=1.0.0"),Arrays.asList("package.c;version=1.0.0")));
  Collection<ModelledResource> requiredUseBundle=null;
  try {
    requiredUseBundle=deployedBundles.getRequiredUseBundle();
  }
 catch (  ResolverException e) {
    e.printStackTrace();
    Assert.fail(e.toString());
  }
  Assert.assertTrue("RequiredUseBundle=" + requiredUseBundle,requiredUseBundle.size() == 1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.modelling.utils.PackageRequirementMergerTest </h4><pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMergeInvalid() throws Exception {
  Collection<ImportedPackage> reqs=new ArrayList<ImportedPackage>();
  reqs.add(newImportedPackage("a","[1.0.0,2.0.0]"));
  reqs.add(newImportedPackage("a","[3.0.0,3.0.0]"));
  reqs.add(newImportedPackage("b","1.0.0"));
  reqs.add(newImportedPackage("b","2.0.0"));
  reqs.add(newImportedPackage("c","[1.0.0,2.0.0)"));
  reqs.add(newImportedPackage("c","2.0.0"));
  PackageRequirementMerger merger=new PackageRequirementMerger(reqs);
  Assert.assertFalse(merger.isMergeSuccessful());
  try {
    merger.getMergedRequirements();
    Assert.fail("getMergedRequirements should throw IllegalStateException.");
  }
 catch (  IllegalStateException e) {
  }
  Set<String> result=merger.getInvalidRequirements();
  Set<String> expected=new HashSet<String>();
  expected.add("a");
  expected.add("c");
  Assert.assertEquals(expected,result);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMergeInvalidAdditionalAttributes() throws Exception {
  Collection<ImportedPackage> reqs=new ArrayList<ImportedPackage>();
  reqs.add(newImportedPackage("a","1.0.0","foo=bar"));
  reqs.add(newImportedPackage("a","2.0.0","foo=blah"));
  reqs.add(newImportedPackage("b","1.0.0"));
  PackageRequirementMerger merger=new PackageRequirementMerger(reqs);
  Assert.assertFalse(merger.isMergeSuccessful());
  try {
    merger.getMergedRequirements();
    Assert.fail("getMergedRequirements should throw IllegalStateException.");
  }
 catch (  IllegalStateException e) {
  }
  Set<String> result=merger.getInvalidRequirements();
  Set<String> expected=new HashSet<String>();
  expected.add("a");
  Assert.assertEquals(expected,result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.resolve.transform.cm.itest.ConfigurationPostResolverTest </h4><pre class="type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test validates that the transformer is correctly detecting the config admin package. Checks
 * are performed to validate that an existing import package is still honored etc.
 * @throws Exception
 */
@Test public void validatePostResolveTransform() throws Exception {
  RichBundleContext ctx=new RichBundleContext(bundleContext);
  PostResolveTransformer transformer=ctx.getService(PostResolveTransformer.class);
  Assert.assertNotNull("Unable to locate transformer",transformer);
  ApplicationMetadata mockApplicationMetadata=Skeleton.newMock(ApplicationMetadata.class);
  MockDeployedBundles originalDeployedBundles=new MockDeployedBundles();
  originalDeployedBundles.setDeployedContent(getNonConfigModelledResources());
  DeployedBundles transformedDeployedBundles=transformer.postResolveProcess(mockApplicationMetadata,originalDeployedBundles);
  Assert.assertNotNull("An instance should have been returned",transformedDeployedBundles);
  Assert.assertEquals(originalDeployedBundles.getImportPackage(),transformedDeployedBundles.getImportPackage());
  originalDeployedBundles=new MockDeployedBundles();
  originalDeployedBundles.setDeployedContent(getConfigModelledResources());
  transformedDeployedBundles=transformer.postResolveProcess(mockApplicationMetadata,originalDeployedBundles);
  Assert.assertNotNull("An instance should have been returned",transformedDeployedBundles);
  Assert.assertNotSame("Missing config package",originalDeployedBundles.getImportPackage(),transformedDeployedBundles.getImportPackage());
  Assert.assertEquals("Missing config package","org.osgi.service.cm;version=\"1.2.0\"",transformedDeployedBundles.getImportPackage());
  originalDeployedBundles=new MockDeployedBundles();
  originalDeployedBundles.setDeployedContent(getConfigModelledResources());
  originalDeployedBundles.setImportPackage("org.foo.bar;version=\1.0.0\",org.bar.foo;version=\"1.0.0\"");
  transformedDeployedBundles=transformer.postResolveProcess(mockApplicationMetadata,originalDeployedBundles);
  Assert.assertNotNull("An instance should have been returned",transformedDeployedBundles);
  Assert.assertNotSame("Missing config package",originalDeployedBundles.getImportPackage(),transformedDeployedBundles.getImportPackage());
  Assert.assertEquals("Missing config package","org.foo.bar;version=\1.0.0\",org.bar.foo;version=\"1.0.0\",org.osgi.service.cm;version=\"1.2.0\"",transformedDeployedBundles.getImportPackage());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.IsolatedCfgAdminRuntimeTest </h4><pre class="type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Creates two applications, as follows:
 * <p/>
 * - helloworld-bp.eba ------
 * |
 * | This application contains a helloworld bundle which contains an interface and impl for HelloWorld. Upon being started
 * | blueprint will create a new container for this bundle and register the HelloWorld service. The service will be injected
 * | with a message coming from the ConfigurationAdmin service using the PID: helloworld-bp. As a CM property placeholder is
 * | used, a ManagedService will also be registered on the bundles behalf so that further updates can be captured. Note that
 * | the blueprint configuration is wired to reload the container on a configuration update (to allow easier tracking of when
 * | to test service contents etc).
 * |
 * | The application also contains a configuration admin bundle (pulled from Maven).
 * ---------------------------
 * <p/>
 * - helloworld-mn.eba -------
 * |
 * | This application contains a helloworld bundle containing an activator that will register itself as a ManagedService for the
 * | PID: helloworld-mn. The activator will also expose out a HelloWorld service. Upon recieving an update from the packaged
 * | Configuration Admin service, the HelloWorld service will be re-registered using the latest configuration, namely the "message".
 * |
 * | The application also contains a configuration admin bundle (pulled from Maven).
 * ---------------------------
 * @throws Exception
 */
@Before public void constructApplications() throws Exception {
  Assert.assertNotNull("Could not find Maven URL handler",(new RichBundleContext(context())).getService(URLStreamHandlerService.class,"url.handler.protocol=mvn",300000));
  MavenArtifactProvisionOption configAdminProvisionOption=mavenBundleInTest(getClass().getClassLoader(),"org.apache.felix","org.apache.felix.configadmin");
  Assert.assertNotNull("Unable to lookup config admin maven bundle",configAdminProvisionOption);
  URL configAdminUrl=new URL(configAdminProvisionOption.getURL());
  ZipFixture helloWorldBluePrintEba=ArchiveFixture.newZip().binary("META-INF/APPLICATION.MF",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("isolated/config/APPLICATION-BP.MF")).binary("org.apache.felix.configadmin.jar",configAdminUrl.openStream()).jar("helloworld-bundle.jar").manifest().symbolicName("org.apache.aries.isolated.helloworldbp").attribute("Bundle-Version","1.0.0").attribute("Import-Package","org.osgi.service.cm").end().binary("org/apache/aries/isolated/sample/HelloWorld.class",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("org/apache/aries/isolated/sample/HelloWorld.class")).binary("org/apache/aries/isolated/sample/HelloWorldImpl.class",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("org/apache/aries/isolated/sample/HelloWorldImpl.class")).binary("OSGI-INF/blueprint/blueprint.xml",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("isolated/config/blueprint.xml")).end();
  ZipFixture helloWorldManualEba=ArchiveFixture.newZip().binary("META-INF/APPLICATION.MF",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("isolated/config/APPLICATION-MN.MF")).binary("org.apache.felix.configadmin.jar",configAdminUrl.openStream()).jar("helloworld-bundle.jar").manifest().symbolicName("org.apache.aries.isolated.helloworldmn").attribute("Bundle-Version","1.0.0").attribute("Bundle-Activator","org.apache.aries.isolated.config.HelloWorldManagedServiceImpl").attribute("Import-Package","org.osgi.framework,org.osgi.service.cm").end().binary("org/apache/aries/isolated/sample/HelloWorld.class",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("org/apache/aries/isolated/sample/HelloWorld.class")).binary("org/apache/aries/isolated/sample/HelloWorldImpl.class",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("org/apache/aries/isolated/sample/HelloWorldImpl.class")).binary("org/apache/aries/isolated/config/HelloWorldManagedServiceImpl.class",IsolatedCfgAdminRuntimeTest.class.getClassLoader().getResourceAsStream("org/apache/aries/isolated/config/HelloWorldManagedServiceImpl.class")).end();
  FileOutputStream fout=new FileOutputStream(APP_HWBP);
  helloWorldBluePrintEba.writeOut(fout);
  fout.close();
  fout=new FileOutputStream(APP_HWMN);
  helloWorldManualEba.writeOut(fout);
  fout.close();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.IsolatedRuntimeTest </h4><pre class="type-3 type-7 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testFrameworkResolvedBeforeInnerBundlesStart() throws Exception {
  final AtomicBoolean loadedClass=new AtomicBoolean(false);
  context().addBundleListener(new SynchronousBundleListener(){
    public void bundleChanged(    BundleEvent event){
      Bundle b=event.getBundle();
      if (event.getType() == BundleEvent.STARTING || event.getType() == BundleEvent.LAZY_ACTIVATION) {
        if (b.getEntry("org/apache/aries/isolated/sample/SharedImpl.class") != null) {
          try {
            Class<?> cl=b.loadClass("org.apache.aries.isolated.sample.SharedImpl");
            cl.newInstance();
            loadedClass.set(true);
          }
 catch (          Exception e) {
            e.printStackTrace();
            throw new RuntimeException(e);
          }
        }
      }
 else       if (event.getType() == BundleEvent.INSTALLED && b instanceof CompositeBundle) {
        ((CompositeBundle)b).getCompositeFramework().getBundleContext().addBundleListener(this);
      }
    }
  }
);
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("test2.eba")));
  AriesApplicationContext ctx=manager.install(app);
  try {
    ctx.start();
    app=ctx.getApplication();
    assertEquals(1,app.getDeploymentMetadata().getApplicationDeploymentContents().size());
    assertEquals(1,app.getDeploymentMetadata().getApplicationProvisionBundles().size());
    assertTrue(loadedClass.get());
  }
  finally {
    manager.uninstall(ctx);
  }
}

</code></pre>

<br>
<pre class="type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testUninstallReinstall() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("test2.eba")));
  AriesApplicationContext ctx=manager.install(app);
  app=ctx.getApplication();
  ctx.start();
  assertHelloWorldService("org.apache.aries.sample2");
  ctx.stop();
  manager.uninstall(ctx);
  assertNull(IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,"org.apache.aries.sample2"));
  ctx=manager.install(app);
  ctx.start();
  assertHelloWorldService("org.apache.aries.sample2");
  manager.uninstall(ctx);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.MinimumImportsTest </h4><pre class="type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAppUsingAriesApplicationManager() throws Exception {
  AppMgrClientBlueprintListener acbl=new AppMgrClientBlueprintListener();
  ServiceRegistration sr=bundleContext.registerService("org.osgi.service.blueprint.container.BlueprintListener",acbl,null);
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("appmgrclienttest.eba")));
  RepositoryAdmin repositoryAdmin=context().getService(RepositoryAdmin.class);
  Repository[] repos=repositoryAdmin.listRepositories();
  for (  Repository repo : repos) {
    repositoryAdmin.removeRepository(repo.getURI());
  }
  repositoryAdmin.addRepository(new File("repository.xml").toURI().toURL());
  AriesApplicationContext ctx=manager.install(app);
  ctx.start();
  int sleepfor=3000;
  while ((acbl.success == null || acbl.success == false) && sleepfor > 0) {
    Thread.sleep(100);
    sleepfor-=100;
  }
  assertNotNull("Timed out - didn't receive Blueprint CREATED or FAILURE event",acbl.success);
  assertTrue("Received Blueprint FAILURE event",acbl.success);
  ctx.stop();
  manager.uninstall(ctx);
  sr.unregister();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.OBRResolverAdvancedTest </h4><pre class="type-15 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRepoAgain() throws Exception {
  System.setProperty(AppConstants.PROVISON_EXCLUDE_LOCAL_REPO_SYSPROP,"true");
  RepositoryGenerator repositoryGenerator=context().getService(RepositoryGenerator.class);
  String fileURI=new File(REPO_BUNDLE + ".jar").toURI().toString();
  File repoXml=new File("repository.xml");
  if (repoXml.exists()) {
    repoXml.delete();
  }
  repositoryGenerator.generateRepository(new String[]{fileURI},new FileOutputStream(repoXml));
  BufferedReader reader=new BufferedReader(new FileReader(new File("repository.xml")));
  String line;
  while ((line=reader.readLine()) != null) {
    System.out.println(line);
  }
  Document real_doc=DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new File("repository.xml"));
  Document expected_doc=DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(OBRResolverAdvancedTest.class.getClassLoader().getResourceAsStream("/obr/aries.bundle1/expectedRepository.xml"));
  Element element_real=real_doc.getDocumentElement();
  Element element_expected=expected_doc.getDocumentElement();
  NodeList nodes_real=element_real.getElementsByTagName("capability");
  NodeList nodes_expected=element_expected.getElementsByTagName("capability");
  assertEquals("The number of capability is not expected. ",nodes_expected.getLength(),nodes_real.getLength());
  nodes_real=element_real.getElementsByTagName("require");
  nodes_expected=element_expected.getElementsByTagName("require");
  assertEquals("The number of require elements is not expected. ",nodes_expected.getLength(),nodes_real.getLength());
  nodes_real=element_real.getElementsByTagName("p");
  nodes_expected=element_expected.getElementsByTagName("p");
  assertEquals("The number of properties is not expected. ",nodes_expected.getLength(),nodes_real.getLength());
  for (int index=0; index < nodes_expected.getLength(); index++) {
    Node node=nodes_expected.item(index);
    boolean contains=false;
    for (int i=0; i < nodes_real.getLength(); i++) {
      Node real_node=nodes_real.item(i);
      if (node.isEqualNode(real_node)) {
        contains=true;
        break;
      }
    }
    assertTrue("The node " + node.toString() + "should exist.",contains);
  }
}

</code></pre>

<br>
<pre class="type-15 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test just verifies whether every entry in the MANIFEST.MF was fed into the repository generator.
 * Since the IBM JRE generates a slightly different repository file from the Sun JRE as far as the order of xml elements is concerned. It is not feasible
 * to perform a file comparison.
 * @throws Exception
 */
@Test public void testRepo() throws Exception {
  System.setProperty(AppConstants.PROVISON_EXCLUDE_LOCAL_REPO_SYSPROP,"true");
  generateOBRRepoXML(true,REPO_BUNDLE + ".jar");
  BufferedReader reader=new BufferedReader(new FileReader(new File("repository.xml")));
  String line;
  while ((line=reader.readLine()) != null) {
    System.out.println(line);
  }
  Document real_doc=DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new File("repository.xml"));
  Document expected_doc=DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(OBRResolverAdvancedTest.class.getClassLoader().getResourceAsStream("/obr/aries.bundle1/expectedRepository.xml"));
  Element element_real=real_doc.getDocumentElement();
  Element element_expected=expected_doc.getDocumentElement();
  NodeList nodes_real=element_real.getElementsByTagName("capability");
  NodeList nodes_expected=element_expected.getElementsByTagName("capability");
  assertEquals("The number of capability is not expected. ",nodes_expected.getLength(),nodes_real.getLength());
  nodes_real=element_real.getElementsByTagName("require");
  nodes_expected=element_expected.getElementsByTagName("require");
  assertEquals("The number of require elements is not expected. ",nodes_expected.getLength(),nodes_real.getLength());
  nodes_real=element_real.getElementsByTagName("p");
  nodes_expected=element_expected.getElementsByTagName("p");
  assertEquals("The number of properties is not expected. ",nodes_expected.getLength(),nodes_real.getLength());
  for (int index=0; index < nodes_expected.getLength(); index++) {
    Node node=nodes_expected.item(index);
    boolean contains=false;
    for (int i=0; i < nodes_real.getLength(); i++) {
      Node real_node=nodes_real.item(i);
      if (node.isEqualNode(real_node)) {
        contains=true;
        break;
      }
    }
    assertTrue("The node " + node.toString() + "should exist.",contains);
  }
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDemoApp() throws Exception {
  System.setProperty(AppConstants.PROVISON_EXCLUDE_LOCAL_REPO_SYSPROP,"true");
  generateOBRRepoXML(false,TRANSITIVE_BUNDLE_BY_REFERENCE + ".jar",CORE_BUNDLE_BY_REFERENCE + ".jar",USE_BUNDLE_BY_REFERENCE + ".jar");
  RepositoryAdmin repositoryAdmin=context().getService(RepositoryAdmin.class);
  Repository[] repos=repositoryAdmin.listRepositories();
  for (  Repository repo : repos) {
    repositoryAdmin.removeRepository(repo.getURI());
  }
  repositoryAdmin.addRepository(new File("repository.xml").toURI().toURL());
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("demo.eba")));
  app=manager.resolve(app);
  DeploymentMetadata depMeta=app.getDeploymentMetadata();
  List<DeploymentContent> provision=depMeta.getApplicationProvisionBundles();
  Collection<DeploymentContent> useBundles=depMeta.getDeployedUseBundle();
  Collection<Content> importPackages=depMeta.getImportPackage();
  assertEquals(provision.toString(),2,provision.size());
  assertEquals(useBundles.toString(),1,useBundles.size());
  assertEquals(importPackages.toString(),4,importPackages.size());
  List<String> bundleSymbolicNames=new ArrayList<String>();
  for (  DeploymentContent dep : provision) {
    bundleSymbolicNames.add(dep.getContentName());
  }
  assertTrue("Bundle " + TRANSITIVE_BUNDLE_BY_REFERENCE + " not found.",bundleSymbolicNames.contains(TRANSITIVE_BUNDLE_BY_REFERENCE));
  assertTrue("Bundle " + TRANSITIVE_BUNDLE_BY_VALUE + " not found.",bundleSymbolicNames.contains(TRANSITIVE_BUNDLE_BY_VALUE));
  bundleSymbolicNames.clear();
  for (  DeploymentContent dep : useBundles) {
    bundleSymbolicNames.add(dep.getContentName());
  }
  assertTrue("Bundle " + USE_BUNDLE_BY_REFERENCE + " not found.",bundleSymbolicNames.contains(USE_BUNDLE_BY_REFERENCE));
  Collection<String> packages=new ArrayList<String>();
  Map<String,String> maps=new HashMap<String,String>();
  maps.put("version","0.0.0");
  maps.put("bundle-symbolic-name","use.bundle.by.reference");
  maps.put("bundle-version","[1.0.0,1.0.0]");
  Content useContent=ContentFactory.parseContent("a.b.c",maps);
  assertTrue("Use Bundle not found in import packags",importPackages.contains(useContent));
  for (  Content c : importPackages) {
    packages.add(c.getContentName());
  }
  assertTrue("package javax.naming not found",packages.contains("javax.naming"));
  assertTrue("package p.q.r not found",packages.contains("p.q.r"));
  assertTrue("package x.y.z not found",packages.contains("x.y.z"));
  assertTrue("package a.b.c not found",packages.contains("a.b.c"));
  AriesApplicationContext ctx=manager.install(app);
  ctx.start();
  Set<Bundle> bundles=ctx.getApplicationContent();
  assertEquals("Number of bundles provisioned in the app",5,bundles.size());
  ctx.stop();
  manager.uninstall(ctx);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.OBRResolverTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBlogApp() throws Exception {
  System.setProperty(AppConstants.PROVISON_EXCLUDE_LOCAL_REPO_SYSPROP,"false");
  generateOBRRepoXML(TRANSITIVE_BUNDLE_BY_REFERENCE + ".jar",CORE_BUNDLE_BY_REFERENCE + ".jar");
  RepositoryAdmin repositoryAdmin=context().getService(RepositoryAdmin.class);
  Repository[] repos=repositoryAdmin.listRepositories();
  for (  Repository repo : repos) {
    repositoryAdmin.removeRepository(repo.getURI());
  }
  repositoryAdmin.addRepository(new File("repository.xml").toURI().toURL());
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("blog.eba")));
  app=manager.resolve(app);
  DeploymentMetadata depMeta=app.getDeploymentMetadata();
  List<DeploymentContent> provision=depMeta.getApplicationProvisionBundles();
  assertEquals(provision.toString(),3,provision.size());
  List<String> bundleSymbolicNames=new ArrayList<String>();
  for (  DeploymentContent dep : provision) {
    bundleSymbolicNames.add(dep.getContentName());
  }
  assertTrue("Bundle " + TRANSITIVE_BUNDLE_BY_REFERENCE + " not found.",bundleSymbolicNames.contains(TRANSITIVE_BUNDLE_BY_REFERENCE));
  assertTrue("Bundle " + TRANSITIVE_BUNDLE_BY_VALUE + " not found.",bundleSymbolicNames.contains(TRANSITIVE_BUNDLE_BY_VALUE));
  assertTrue("Bundle " + BUNDLE_IN_FRAMEWORK + " not found.",bundleSymbolicNames.contains(BUNDLE_IN_FRAMEWORK));
  AriesApplicationContext ctx=manager.install(app);
  ctx.start();
  Set<Bundle> bundles=ctx.getApplicationContent();
  assertEquals("Number of bundles provisioned in the app",4,bundles.size());
  ctx.stop();
  manager.uninstall(ctx);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.runtime.itests.UpdateAppTest </h4><pre class="type-4 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testFineUpdate() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=setupApp();
  BundleContext oldCtx=IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,SAMPLE_APP_NAME);
  installMockUpdateStrategy();
  updateApp(manager,app);
  BundleContext newCtx=IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,SAMPLE_APP_NAME);
  assertAppMessage("hello brave new world");
  assertTrue("We bounced the app where the update was supposed to do an update in place",oldCtx == newCtx);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testUpdateThenStart() throws Exception {
  AriesApplicationManager manager=context().getService(AriesApplicationManager.class);
  AriesApplication app=manager.createApplication(FileSystem.getFSRoot(new File("test.eba")));
  AriesApplicationContext ctx=manager.install(app);
  app=ctx.getApplication();
  BundleContext oldCtx=IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,SAMPLE_APP_NAME);
  installMockUpdateStrategy();
  ctx=updateApp(manager,app);
  BundleContext newCtx=IsolationTestUtils.findIsolatedAppBundleContext(bundleContext,SAMPLE_APP_NAME);
  assertNull("App is not started yet but HelloWorld service is already there",IsolationTestUtils.findHelloWorldService(bundleContext,SAMPLE_APP_NAME));
  ctx.start();
  assertAppMessage("hello brave new world");
  assertTrue("We bounced the app where the update was supposed to do an update in place",oldCtx == newCtx);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.application.utils.manifest.ManifestProcessorTest </h4><pre class="type-4 type-3 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check a simple manifest can be read.
 * @throws Exception
 */
@Test public void testSimpleManifest() throws Exception {
  Map<String,String> pairs=new HashMap<String,String>();
  pairs.put("Manifest-Version","1.0");
  pairs.put("Application-ManifestVersion","1.0");
  pairs.put("Application-Name",appName);
  pairs.put("Application-SymbolicName","com.travel.reservation");
  pairs.put("Application-Version","1.2");
  pairs.put("Application-Content","com.travel.reservation.web;version=\"[1.1.0,1.2.0)\",com.travel.reservation.business");
  pairs.put("Export-Package","com.travel.reservation.api;version=1.2");
  pairs.put("Import-Package","com.travel.flight.api;version=\"[2.1.1,3.0.0)\",com.travel.rail.api;version=\"[1.0.0,2.0.0)\"");
  pairs.put("Application-Services","services.xml");
  InputStream in=getClass().getClassLoader().getResourceAsStream("META-INF/APPLICATION.MF");
  Manifest mf=new Manifest(in);
  Map<String,String> map=ManifestProcessor.readManifestIntoMap(mf);
  assertNotNull(map);
  for (  String key : pairs.keySet()) {
    assertTrue("Key: " + key + " was not found",map.containsKey(key));
    String value=map.get(key);
    assertNotNull("Value was not present for key: " + key,value);
    assertEquals("Value was not correct for key: " + key,pairs.get(key),value);
  }
  assertEquals("The maps did not match",pairs,map);
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check metadata can be extracted from a simple manifest.
 */
@Test public void testManifestMetadata() throws Exception {
  ApplicationMetadataFactoryImpl manager=new ApplicationMetadataFactoryImpl();
  InputStream in=getClass().getClassLoader().getResourceAsStream("META-INF/APPLICATION.MF");
  ApplicationMetadata am=manager.parseApplicationMetadata(in);
  assertNotNull(am);
  assertEquals(am.getApplicationName(),appName);
  List<Content> contents=am.getApplicationContents();
  for (  Content content : contents) {
    if ("com.travel.reservation.web".equals(content.getContentName())) {
      VersionRange vr=content.getVersion();
      assertEquals(vr.getMinimumVersion(),new Version("1.1.0"));
      assertEquals(vr.getMaximumVersion(),new Version("1.2.0"));
    }
 else     if ("com.travel.reservation.business".equals(content.getContentName())) {
      VersionRange vr=content.getVersion();
      assertEquals(new Version(0,0,0),vr.getMinimumVersion());
    }
 else     fail("Unexepcted content name " + content.getContentName());
  }
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testManifestWithoutEndingInNewLine() throws Exception {
  ApplicationMetadataFactoryImpl manager=new ApplicationMetadataFactoryImpl();
  InputStream in=getClass().getClassLoader().getResourceAsStream("META-INF/APPLICATION3.MF");
  ApplicationMetadata am=manager.parseApplicationMetadata(in);
  assertNotNull(am);
  assertEquals("Wrong number of bundles are in the application",1,am.getApplicationContents().size());
  assertEquals("Wrong bundle name","org.apache.aries.applications.test.bundle",am.getApplicationContents().get(0).getContentName());
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check metadata can be extracted from a manifest that uses multiple lines
 * for a single manifest attribute.
 */
@Test public void testManifestMetadataWithMultiLineEntries() throws Exception {
  ApplicationMetadataFactoryImpl manager=new ApplicationMetadataFactoryImpl();
  InputStream in=getClass().getClassLoader().getResourceAsStream("META-INF/APPLICATION2.MF");
  ApplicationMetadata am=manager.parseApplicationMetadata(in);
  assertNotNull(am);
  assertEquals(am.getApplicationName(),appName);
  List<Content> contents=am.getApplicationContents();
  for (  Content content : contents) {
    if ("com.travel.reservation.web".equals(content.getContentName())) {
      VersionRange vr=content.getVersion();
      assertEquals(vr.getMinimumVersion(),new Version("1.1.0"));
      assertEquals(vr.getMaximumVersion(),new Version("1.2.0"));
    }
 else     if ("com.travel.reservation.business".equals(content.getContentName())) {
      VersionRange vr=content.getVersion();
      assertEquals(new Version(0,0,0),vr.getMinimumVersion());
    }
 else     fail("Unexepcted content name " + content.getContentName());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.async.promise.test.CallbackTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCallbacks() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Promise<String> promise=def.getPromise();
  Callback cb1=new Callback(promise,"Hello");
  assertEquals("onResolve returns promise",promise,promise.onResolve(cb1));
  Callback cb2=new Callback(promise,"Hello");
  promise.onResolve(cb2);
  def.resolve("Hello");
  assertTrue("callback1 executed",cb1.latch.await(1,TimeUnit.SECONDS));
  assertEquals("callback1 succeeded",null,cb1.error);
  assertTrue("callback2 executed",cb2.latch.await(1,TimeUnit.SECONDS));
  assertEquals("callback2 succeeded",null,cb2.error);
  Callback cb3=new Callback(promise,"Hello");
  promise.onResolve(cb3);
  assertTrue("callback3 executed",cb3.latch.await(1,TimeUnit.SECONDS));
  assertEquals("callback3 succeeded",null,cb3.error);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.async.promise.test.ChainTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenSuccessException() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Promise<String> promise=def.getPromise();
  final Exception thenException=new Exception("then exception!");
  Promise<String> chain=promise.then(new Success<String,String>(){
    @Override public Promise<String> call(    Promise<String> resolved) throws Exception {
      throw thenException;
    }
  }
);
  assertFalse("chain not resolved",chain.isDone());
  def.resolve("ok");
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain failure matches",thenException,chain.getFailure());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenFail() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Promise<String> promise=def.getPromise();
  Promise<String> chain=promise.then(null,new Failure(){
    @Override public void fail(    Promise<?> resolved) throws Exception {
    }
  }
);
  assertFalse("chain not resolved",chain.isDone());
  Throwable failure=new Throwable("fail!");
  def.fail(failure);
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain failure matches",failure,chain.getFailure());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenResolved2() throws Exception {
  Deferred<String> def=new Deferred<String>();
  def.resolve("already resolved");
  Promise<String> chain=def.getPromise().then(new Success<String,String>(){
    @Override public Promise<String> call(    Promise<String> resolved) throws Exception {
      return Promises.resolved("success1");
    }
  }
).then(new Success<String,String>(){
    @Override public Promise<String> call(    Promise<String> resolved) throws Exception {
      return Promises.resolved("success2");
    }
  }
);
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain value matches","success2",chain.getValue());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenSuccessFailed() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Promise<String> promise=def.getPromise();
  final Throwable thenFail=new Throwable("failed!");
  Promise<String> chain=promise.then(new Success<String,String>(){
    @Override public Promise<String> call(    Promise<String> resolved) throws Exception {
      return Promises.failed(thenFail);
    }
  }
);
  assertFalse("chain not resolved",chain.isDone());
  def.resolve("ok");
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain failure matches",thenFail,chain.getFailure());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenSuccessDeferred() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Deferred<String> def2=new Deferred<String>();
  Promise<String> chain=def.getPromise().then(new Success<String,String>(){
    @Override public Promise<String> call(    Promise<String> resolved) throws Exception {
      return def2.getPromise();
    }
  }
);
  assertFalse("chain not resolved",chain.isDone());
  def.resolve("ok");
  assertFalse("chain still not resolved",chain.isDone());
  def2.resolve("success!");
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain value matches","success!",chain.getValue());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenFailNoCallback() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Promise<String> promise=def.getPromise();
  Promise<String> chain=promise.then(null);
  assertFalse("chain not resolved",chain.isDone());
  Throwable failure=new Throwable("fail!");
  def.fail(failure);
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain failure matches",failure,chain.getFailure());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThen2() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> chain1=def.getPromise().then(new Success<String,String>(){
    @Override public Promise<String> call(    Promise<String> resolved) throws Exception {
      return Promises.resolved("success1");
    }
  }
);
  assertFalse("chain not resolved",chain1.isDone());
  Promise<String> chain2=def.getPromise().then(new Success<String,String>(){
    @Override public Promise<String> call(    Promise<String> resolved) throws Exception {
      return Promises.resolved("success2");
    }
  }
);
  assertFalse("chain not resolved",chain2.isDone());
  def.resolve("ok");
  assertTrue("chain1 resolved",chain1.isDone());
  assertEquals("chain1 value matches","success1",chain1.getValue());
  assertTrue("chain2 resolved",chain2.isDone());
  assertEquals("chain2 value matches","success2",chain2.getValue());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenNullResolved() throws Exception {
  Deferred<String> def=new Deferred<String>();
  def.resolve("ok");
  Promise<String> chain=def.getPromise().then(null);
  assertTrue("chain resolved",chain.isDone());
  assertNull("chain value null",chain.getValue());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenSuccess() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> chain=def.getPromise().then(new Success<String,String>(){
    @Override public Promise<String> call(    Promise<String> resolved) throws Exception {
      return Promises.resolved("success!");
    }
  }
);
  assertFalse("chain not resolved",chain.isDone());
  def.resolve("ok");
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain value matches","success!",chain.getValue());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenResolved() throws Exception {
  Deferred<String> def=new Deferred<String>();
  def.resolve("already resolved");
  Promise<String> chain=def.getPromise().then(new Success<String,String>(){
    @Override public Promise<String> call(    Promise<String> resolved) throws Exception {
      return Promises.resolved("success!");
    }
  }
);
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain value matches","success!",chain.getValue());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenAlreadyResolved() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Promise<String> promise=def.getPromise();
  def.resolve("ok");
  Promise<String> chain=promise.then(new Success<String,String>(){
    @Override public Promise<String> call(    Promise<String> resolved) throws Exception {
      return Promises.resolved("success!");
    }
  }
);
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain value matches","success!",chain.getValue());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenFailException() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Promise<String> promise=def.getPromise();
  final Exception thenException=new Exception("eek!");
  Promise<String> chain=promise.then(null,new Failure(){
    @Override public void fail(    Promise<?> resolved) throws Exception {
      throw thenException;
    }
  }
);
  assertFalse("chain not resolved",chain.isDone());
  def.fail(new Throwable("failed"));
  assertTrue("chain resolved",chain.isDone());
  assertEquals("chain failure matches",thenException,chain.getFailure());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThenNull() throws Exception {
  Deferred<String> def=new Deferred<String>();
  final Promise<String> promise=def.getPromise();
  Promise<String> chain=promise.then(null);
  assertFalse("chain not resolved",chain.isDone());
  def.resolve("ok");
  assertTrue("chain resolved",chain.isDone());
  assertNull("chain value null",chain.getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.async.promise.test.DeferredTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveWithSuccess() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> promise=def.getPromise();
  Deferred<String> with=new Deferred<String>();
  Promise<Void> resolvedWith=def.resolveWith(with.getPromise());
  with.resolve("resolveWith");
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Value matches","resolveWith",promise.getValue());
  assertNull("resolveWith null",resolvedWith.getValue());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveWithAlreadyFailed() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Deferred<String> with=new Deferred<String>();
  Promise<Void> resolvedWith=def.resolveWith(with.getPromise());
  def.resolve("Already resolved");
  with.fail(new Throwable("failed"));
  @SuppressWarnings({"not thrown","all"}) Throwable failure=resolvedWith.getFailure();
  assertTrue("resolveWith IllegalStateException",failure instanceof IllegalStateException);
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolve() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> promise=def.getPromise();
  assertFalse("Initial Promise not resolved",promise.isDone());
  def.resolve("Hello");
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Value matches","Hello",promise.getValue());
  assertNull("Failure is null",promise.getFailure());
  try {
    def.resolve("Again");
    fail("Already resolved didn't throw IllegalStateException");
  }
 catch (  IllegalStateException e) {
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolveWithFailure() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> promise=def.getPromise();
  Deferred<String> def2=new Deferred<String>();
  Promise<String> promise2=def2.getPromise();
  Promise<Void> with=def.resolveWith(promise2);
  Exception failure=new Exception("resolveWithFailure");
  def2.fail(failure);
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Failure matches",failure,promise.getFailure());
  assertNull("resolveWith null",with.getValue());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFail() throws Exception {
  Deferred<String> def=new Deferred<String>();
  Promise<String> promise=def.getPromise();
  Exception failure=new Exception("Oops");
  def.fail(failure);
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Failure matches",failure,promise.getFailure());
  try {
    promise.getValue();
    fail("getValue didn't throw InvocationTargetException");
  }
 catch (  InvocationTargetException e) {
    assertEquals("Failure matches",failure,e.getCause());
  }
  try {
    def.fail(failure);
    fail("Already failed didn't throw IllegalStateException");
  }
 catch (  IllegalStateException e) {
    assertNotNull(e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.async.promise.test.FunctionTest </h4><pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFilter2() throws Exception {
  String bigValue=new String("value");
  Promise<String> p1=Promises.resolved(bigValue);
  Promise<String> p2=p1.filter(new Predicate<String>(){
    public boolean test(    String t){
      return t.length() > 0;
    }
  }
);
  assertTrue("Filter2 resolved",p2.isDone());
  assertEquals("Value2 matches",bigValue,p2.getValue());
  Promise<String> p3=p1.filter(new Predicate<String>(){
    public boolean test(    String t){
      return t.length() == 0;
    }
  }
);
  assertTrue("Filter3 resolved",p3.isDone());
  assertTrue("Value3 fail matches",p3.getFailure() instanceof NoSuchElementException);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.async.promise.test.PromisesTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testResolved() throws Exception {
  final Promise<String> promise=Promises.resolved("Resolved");
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Value matches","Resolved",promise.getValue());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailed() throws Exception {
  Exception failed=new Exception("Failed");
  final Promise<String> promise=Promises.failed(failed);
  assertTrue("Promise resolved",promise.isDone());
  assertEquals("Value matches",failed,promise.getFailure());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.BlueprintContainerTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSimple() throws Exception {
  URL url=getClass().getClassLoader().getResource("test.xml");
  BlueprintContainerImpl container=new BlueprintContainerImpl(getClass().getClassLoader(),Arrays.asList(url));
  Foo foo=(Foo)container.getComponentInstance("foo");
  System.out.println(foo);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals(1,foo.getB());
  container.destroy();
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPlaceholders() throws Exception {
  URL url1=getClass().getClassLoader().getResource("test.xml");
  URL url2=getClass().getClassLoader().getResource("test2.xml");
  BlueprintContainerImpl container=new BlueprintContainerImpl(getClass().getClassLoader(),Arrays.asList(url1,url2));
  Foo foo=(Foo)container.getComponentInstance("foo");
  System.out.println(foo);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals(1,foo.getB());
  container.destroy();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.container.BeanRecipeTest </h4><pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void parameterLessHiding() throws Exception {
  Set<Method> methods=new HashSet<Method>(Arrays.asList(Base.class.getMethod("getObject"),Middle.class.getMethod("getObject"),Top.class.getMethod("getObject"),Unrelated.class.getMethod("getObject")));
  methods=applyStaticHidingRules(methods);
  assertEquals(2,methods.size());
  assertTrue(methods.contains(Top.class.getMethod("getObject")));
  assertTrue(methods.contains(Unrelated.class.getMethod("getObject")));
  assertFalse(methods.contains(Middle.class.getMethod("getObject")));
}

</code></pre>

<br>
<pre class="type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void protectedClassAccess() throws Exception {
  BlueprintContainerImpl container=new BlueprintContainerImpl(null,null,null,null,null,null,null,null,null,null);
  BeanRecipe recipe=new BeanRecipe("a",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory().create()));
  recipe.setFactoryMethod("getA");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("b",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory().create()));
  recipe.setFactoryMethod("getB");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("c",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory().create()));
  recipe.setFactoryMethod("getC");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("d",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory().create()));
  recipe.setFactoryMethod("getD");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  try {
    assertNotNull(recipe.create());
    fail("Should have thrown an exception");
  }
 catch (  ComponentDefinitionException e) {
  }
  recipe=new BeanRecipe("a",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setProperty("a","a");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("b",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setProperty("b","b");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("c",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setProperty("c","c");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
  recipe=new BeanRecipe("d",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setProperty("d","d");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  try {
    assertNotNull(recipe.create());
    fail("Should have thrown an exception");
  }
 catch (  ComponentDefinitionException e) {
  }
  recipe=new BeanRecipe("a",container,null,false);
  recipe.setFactoryComponent(new PassThroughRecipe("factory",new Factory()));
  recipe.setFactoryMethod("create");
  recipe.setInitMethod("init");
  ExecutionContext.Holder.setContext(new BlueprintRepository(container));
  assertNotNull(recipe.create());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void parameterDistinction() throws Exception {
  Set<Method> methods=new HashSet<Method>(Arrays.asList(Base.class.getMethod("getOne",Object.class),Middle.class.getMethod("getOne",Number.class),Middle.class.getMethod("getOne",Object.class),Top.class.getMethod("getOne",Integer.class)));
  methods=applyStaticHidingRules(methods);
  assertEquals(3,methods.size());
  assertFalse(methods.contains(Base.class.getMethod("getOne",Object.class)));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void baseTypeHiding() throws Exception {
  Set<Method> methods=new HashSet<Method>(Arrays.asList(Middle.class.getMethod("getBasic",int.class),Top.class.getMethod("getBasic",int.class),Unrelated.class.getMethod("getBasic",int.class)));
  methods=applyStaticHidingRules(methods);
  assertEquals(2,methods.size());
  assertFalse(methods.contains(Middle.class.getMethod("getBasic",int.class)));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void multiParameterTest() throws Exception {
  Set<Method> methods=new HashSet<Method>(Arrays.asList(Base.class.getMethod("getMany",Object.class,String.class,String.class),Middle.class.getMethod("getMany",Object.class,String.class,Number.class),Top.class.getMethod("getMany",Object.class,String.class,Number.class)));
  methods=applyStaticHidingRules(methods);
  assertEquals(2,methods.size());
  assertFalse(methods.contains(Middle.class.getMethod("getMany",Object.class,String.class,Number.class)));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.ASMMultiBundleTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void multiBundleTest() throws Exception {
  Bundle bundlea=context().getBundleByName("org.apache.aries.blueprint.testbundlea");
  assertNotNull(bundlea);
  bundlea.start();
  Bundle bundleb=context().getBundleByName("org.apache.aries.blueprint.testbundleb");
  assertNotNull(bundleb);
  bundleb.start();
  BlueprintContainer beanContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.testbundleb");
  assertNotNull(beanContainer);
  Object obj1=beanContainer.getComponentInstance("TestBeanA");
  assertTrue(obj1 instanceof TestBean);
  TestBean testBeanA=(TestBean)obj1;
  org.junit.Assert.assertEquals("RED",testBeanA.getRed());
  org.junit.Assert.assertEquals("GREEN",testBeanA.getGreen());
  org.junit.Assert.assertEquals("BLUE",testBeanA.getBlue());
  Object obj2=beanContainer.getComponentInstance("TestBeanB");
  assertTrue(obj2 instanceof TestBean);
  TestBean testBeanB=(TestBean)obj2;
  org.junit.Assert.assertEquals("ONE_VALUE",testBeanB.getRed());
  org.junit.Assert.assertEquals("GREEN",testBeanB.getGreen());
  org.junit.Assert.assertEquals("BLUE",testBeanB.getBlue());
  Object obj3=beanContainer.getComponentInstance("TestBeanC");
  assertTrue(obj3 instanceof TestBean);
  TestBean testBeanC=(TestBean)obj3;
  BlueprintContainer handlerContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.testbundlea");
  assertNotNull(handlerContainer);
  Object ns1=handlerContainer.getComponentInstance("NSHandlerOne");
  assertTrue(ns1 instanceof NSHandlerOne);
  Object ns2=handlerContainer.getComponentInstance("NSHandlerTwo");
  assertTrue(ns2 instanceof NSHandlerTwo);
  NSHandlerTwo nstwo=(NSHandlerTwo)ns2;
  List<String> log=nstwo.getLog();
  checkInterceptorLog(new String[]{"PRECALL:TestBeanC:methodToInvoke:[RED]:","POSTCALL[true]:TestBeanC:methodToInvoke:[RED]:","PRECALL:TestBeanC:methodToInvoke:[BLUE]:","POSTCALL[false]:TestBeanC:methodToInvoke:[BLUE]:"},log);
  RuntimeException re=null;
  try {
    testBeanC.methodToInvoke("GREEN");
  }
 catch (  RuntimeException e) {
    re=e;
  }
  assertNotNull("invocation of Green did not cause an exception as expected",re);
  log=nstwo.getLog();
  checkInterceptorLog(new String[]{"PRECALL:TestBeanC:methodToInvoke:[RED]:","POSTCALL[true]:TestBeanC:methodToInvoke:[RED]:","PRECALL:TestBeanC:methodToInvoke:[BLUE]:","POSTCALL[false]:TestBeanC:methodToInvoke:[BLUE]:","PRECALL:TestBeanC:methodToInvoke:[GREEN]:","POSTCALLEXCEPTION[java.lang.RuntimeException: MATCHED ON GREEN (GREEN)]:TestBeanC:methodToInvoke:[GREEN]:"},log);
  Object obj4=beanContainer.getComponentInstance("ProcessedBean");
  assertTrue(obj4 instanceof ProcessableBean);
  ProcessableBean pb=(ProcessableBean)obj4;
  Object bp=beanContainer.getComponentInstance("http://ns.handler.three/BeanProcessor");
  assertNotNull(bp);
  assertTrue(bp instanceof BeanProcessor);
  assertEquals(1,pb.getProcessedBy().size());
  assertEquals(pb.getProcessedBy().get(0),bp);
  assertEquals(pb.getProcessedBy(Phase.BEFORE_INIT).get(0),bp);
  assertEquals(pb.getProcessedBy(Phase.AFTER_INIT).get(0),bp);
  Object objOther=beanContainer.getComponentInstance("PlaceHolderTestBean");
  assertTrue(objOther instanceof OtherBean);
  assertEquals("test1value",((OtherBean)objOther).getTestValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.BlueprintAnnotationTest </h4><pre class="type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void setUp() throws InvalidSyntaxException, InterruptedException {
  blueprintContainer=getBlueprintContainerForBundle("org.apache.aries.blueprint.sample-annotation");
  assertNotNull(blueprintContainer);
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testXmlConfig(){
  Object obj=blueprintContainer.getComponentInstance("testXmlConfigBean");
  assertNotNull(obj);
  assertEquals("org.apache.aries.blueprint.sample.TestXmlConfigBean",obj.getClass().getName());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  Object obj=blueprintContainer.getComponentInstance("bar");
  assertNotNull(obj);
  assertEquals(Bar.class,obj.getClass());
  Bar bar=(Bar)obj;
  assertEquals("Hello FooBar",bar.getValue());
  obj=blueprintContainer.getComponentInstance("foo");
  assertNotNull(obj);
  assertEquals(Foo.class,obj.getClass());
  Foo foo=(Foo)obj;
  assertEquals(5,foo.getA());
  assertSame(bar,foo.getBar());
  assertEquals(Currency.getInstance("PLN"),foo.getCurrency());
  assertEquals(new SimpleDateFormat("yyyy.MM.dd").parse("2009.04.17"),foo.getDate());
  assertTrue(foo.isInitialized());
  assertFalse(foo.isDestroyed());
  assertNotNull(blueprintContainer.getComponentInstance("fragment"));
  obj=context().getService(Foo.class,"(blueprint.annotation.sample=true)",5000);
  assertNotNull(obj);
  assertEquals(foo.toString(),obj.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.MultiInterfacesTest </h4><pre class="type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiInterfaceReferences() throws Exception {
  startBundleBlueprint("org.apache.aries.blueprint.testbundlea");
  BlueprintContainer beanContainer=startBundleBlueprint("org.apache.aries.blueprint.testbundleb");
  Object obj1=beanContainer.getComponentInstance("OnlyA");
  Object obj2=beanContainer.getComponentInstance("AandB");
  Object obj3=beanContainer.getComponentInstance("AandBandC");
  Object obj4=beanContainer.getComponentInstance("AandBandCandD");
  assertEquals("A",((InterfaceA)obj1).methodA());
  assertEquals("A",((InterfaceA)obj2).methodA());
  assertEquals("A",((InterfaceA)obj3).methodA());
  assertEquals("B",((InterfaceB)obj2).methodB());
  assertEquals("C",((InterfaceC)obj3).methodC());
  assertFalse(obj1 instanceof InterfaceC);
  assertFalse(obj2 instanceof InterfaceC);
  assertFalse(obj1 instanceof InterfaceB);
  assertTrue(obj4 instanceof InterfaceD);
  try {
    ((InterfaceD)obj4).methodD();
    fail("This should not work");
  }
 catch (  org.osgi.service.blueprint.container.ServiceUnavailableException t) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.QuiesceBlueprintTest </h4><pre class="type-12 type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultiBundleQuiesce() throws Exception {
  System.out.println("In testMultiBundleQuiesce");
  Object obj=context().getService(TestBean.class);
  if (obj != null) {
    QuiesceParticipant participant=getParticipant("org.apache.aries.blueprint.core");
    if (participant != null) {
      TestQuiesceCallback callback=new TestQuiesceCallback();
      Bundle bundlea=getBundle("org.apache.aries.blueprint.testbundlea");
      assertNotNull(bundlea);
      bundlea.start();
      Bundle bundleq=getBundle("org.apache.aries.blueprint.testquiescebundle");
      System.out.println("Got the bundle");
      List<Bundle> bundles=new ArrayList<Bundle>();
      bundles.add(bundlea);
      bundles.add(bundleq);
      Thread t=new Thread(new TestBeanClient((TestBean)obj,1500));
      t.start();
      Thread.sleep(200);
      participant.quiesce(callback,bundles);
      System.out.println("Called Quiesce");
      Thread.sleep(500);
      Assert.assertTrue("Quiesce callback should have occurred once for bundle a but not for bundle q; calls should be 1, but it is " + callback.getCalls(),callback.getCalls() == 1);
      Thread.sleep(1500);
      System.out.println("After second sleep");
      Assert.assertTrue("Quiesce callback should have occurred twice, once for bundle a and q respectively; calls should be 2, but it is " + callback.getCalls(),callback.getCalls() == 2);
    }
 else {
      throw new Exception("No Quiesce Participant found for the blueprint service");
    }
  }
 else {
    throw new Exception("No Service returned for " + TestBean.class);
  }
}

</code></pre>

<br>
<pre class="type-12 type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoServicesQuiesce() throws Exception {
  System.out.println("In testNoServicesQuiesce");
  Object obj=context().getService(TestBean.class);
  if (obj != null) {
    QuiesceParticipant participant=getParticipant("org.apache.aries.blueprint.core");
    if (participant != null) {
      TestQuiesceCallback callbackA=new TestQuiesceCallback();
      TestQuiesceCallback callbackB=new TestQuiesceCallback();
      Bundle bundlea=getBundle("org.apache.aries.blueprint.testbundlea");
      assertNotNull(bundlea);
      bundlea.start();
      Bundle bundleb=getBundle("org.apache.aries.blueprint.testbundleb");
      assertNotNull(bundleb);
      bundleb.start();
      Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.testbundleb");
      participant.quiesce(callbackB,Collections.singletonList(getBundle("org.apache.aries.blueprint.testbundleb")));
      System.out.println("Called Quiesce");
      Thread.sleep(200);
      Assert.assertTrue("Quiesce callback B should have occurred; calls should be 1, but it is " + callbackB.getCalls(),callbackB.getCalls() == 1);
      Assert.assertTrue("Quiesce callback A should not have occurred yet; calls should be 0, but it is " + callbackA.getCalls(),callbackA.getCalls() == 0);
      bundleb.stop();
      participant.quiesce(callbackA,Collections.singletonList(getBundle("org.apache.aries.blueprint.testbundlea")));
      Thread.sleep(1000);
      System.out.println("After second sleep");
      Assert.assertTrue("Quiesce callback A should have occurred once; calls should be 1, but it is " + callbackA.getCalls(),callbackA.getCalls() == 1);
      Assert.assertTrue("Quiesce callback B should have occurred once; calls should be 1, but it is " + callbackB.getCalls(),callbackB.getCalls() == 1);
    }
 else {
      throw new Exception("No Quiesce Participant found for the blueprint service");
    }
  }
 else {
    throw new Exception("No Service returned for " + TestBean.class);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.SpringExtenderTest </h4><pre class="type-5 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpringBundle() throws Exception {
  try {
    context().getService(BeanCItf.class,1);
    fail("The service should not be registered");
  }
 catch (  RuntimeException e) {
  }
  Bundle bundles=context().getBundleByName("org.apache.aries.blueprint.testbundlee");
  assertNotNull(bundles);
  bundles.start();
  BlueprintContainer container=startBundleBlueprint("org.apache.aries.blueprint.testbundlee");
  assertNotNull(container);
  BeanCItf beanC1=context().getService(BeanCItf.class,"(name=BeanC-1)");
  assertEquals(1,beanC1.getInitialized());
  BeanCItf beanC2=context().getService(BeanCItf.class,"(name=BeanC-2)");
  assertEquals(1,beanC2.getInitialized());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.SpringTest </h4><pre class="type-4 type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSpringBundle() throws Exception {
  Bundle bundles=context().getBundleByName("org.apache.aries.blueprint.testbundles");
  assertNotNull(bundles);
  bundles.start();
  BlueprintContainer container=startBundleBlueprint("org.apache.aries.blueprint.testbundles");
  List list=(List)container.getComponentInstance("springList");
  System.out.println(list);
  BeanCItf beanC=(BeanCItf)list.get(4);
  assertEquals(1,beanC.getInitialized());
  try {
    beanC.doSomething();
    fail("Should have thrown an exception because the transaction manager is not defined");
  }
 catch (  NoSuchBeanDefinitionException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.TestConfigAdmin </h4><pre class="type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testManagedServiceFactory() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory",null);
  cf.update(getConfig1());
  startTestBundle();
  Foo foo=context().getService(Foo.class,"(service.pid=blueprint-sample-managed-service-factory.*)");
  ServiceReference[] refs=context().getAllServiceReferences(Foo.class.getName(),"(service.pid=blueprint-sample-managed-service-factory.*)");
  assertNotNull("No services were registered for the managed service factory",refs);
  assertEquals("Multiple services were registered for the same pid.",1,refs.length);
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStrategyComponent() throws Exception {
  ca.getConfiguration("blueprint-sample-managed.component",null).update(getConfig1());
  startTestBundle();
  Foo foo=getComponent("component-managed");
  assertEquals(5,foo.getA());
  assertEquals(Currency.getInstance("PLN"),foo.getCurrency());
  ca.getConfiguration("blueprint-sample-managed.component",null).update(getConfig2());
  Thread.sleep(100);
  assertEquals(5,foo.getA());
  assertEquals(Currency.getInstance("PLN"),foo.getCurrency());
  assertNotNull(foo.getProps());
  assertEquals("10",foo.getProps().get("a"));
  assertEquals("USD",foo.getProps().get("currency"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.TestReferences </h4><pre class="type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testUnaryReference() throws Exception {
  BlueprintContainer blueprintContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.sample");
  assertNotNull(blueprintContainer);
  BindingListener listener=(BindingListener)blueprintContainer.getComponentInstance("bindingListener");
  assertNull(listener.getA());
  assertNull(listener.getReference());
  InterfaceA a=(InterfaceA)blueprintContainer.getComponentInstance("ref2");
  try {
    a.hello("world");
    fail("A ServiceUnavailableException should have been thrown");
  }
 catch (  ServiceUnavailableException e) {
  }
  ServiceRegistration reg1=bundleContext.registerService(InterfaceA.class.getName(),new InterfaceA(){
    public String hello(    String msg){
      return "Hello " + msg + "!";
    }
  }
,null);
  waitForAsynchronousHandling();
  assertNotNull(listener.getA());
  assertNotNull(listener.getReference());
  assertEquals("Hello world!",a.hello("world"));
  Hashtable<String,Object> props=new Hashtable<String,Object>();
  props.put(Constants.SERVICE_RANKING,Integer.valueOf(1));
  ServiceRegistration reg2=bundleContext.registerService(InterfaceA.class.getName(),new InterfaceA(){
    public String hello(    String msg){
      return "Good morning " + msg + "!";
    }
  }
,props);
  waitForAsynchronousHandling();
  assertNotNull(listener.getA());
  assertNotNull(listener.getReference());
  assertEquals("Hello world!",a.hello("world"));
  reg1.unregister();
  waitForAsynchronousHandling();
  assertNotNull(listener.getA());
  assertNotNull(listener.getReference());
  assertEquals("Good morning world!",a.hello("world"));
  reg2.unregister();
  waitForAsynchronousHandling();
  assertNull(listener.getA());
  assertNull(listener.getReference());
  try {
    a.hello("world");
    fail("A ServiceUnavailableException should have been thrown");
  }
 catch (  ServiceUnavailableException e) {
  }
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testReferencesCallableInDestroy() throws Exception {
  bundleContext.registerService(Runnable.class.getName(),new Thread(),null);
  BlueprintContainer blueprintContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.sample");
  assertNotNull(blueprintContainer);
  DestroyTest dt=(DestroyTest)blueprintContainer.getComponentInstance("destroyCallingReference");
  Bundle b=findBundle("org.apache.aries.blueprint.sample");
  assertNotNull(b);
  b.stop();
  assertTrue("The destroy method was called",dt.waitForDestruction(1000));
  Exception e=dt.getDestroyFailure();
  if (e != null)   throw e;
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testDefaultReference() throws Exception {
  BlueprintContainer blueprintContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.sample");
  assertNotNull(blueprintContainer);
  Runnable refRunnable=(Runnable)blueprintContainer.getComponentInstance("refWithDefault");
  DefaultRunnable defaultRunnable=(DefaultRunnable)blueprintContainer.getComponentInstance("defaultRunnable");
  refRunnable.run();
  waitForAsynchronousHandling();
  Thread.sleep(2000);
  assertEquals("The default runnable was not called",1,defaultRunnable.getCount());
  final AtomicBoolean called=new AtomicBoolean(false);
  Runnable mockService=new Runnable(){
    public void run(){
      called.set(true);
    }
  }
;
  ServiceRegistration reg=bundleContext.registerService(Runnable.class.getName(),mockService,null);
  waitForAsynchronousHandling();
  Thread.sleep(2000);
  refRunnable.run();
  assertEquals("The default runnable was called when a service was bound",1,defaultRunnable.getCount());
  Assert.assertTrue("Service should have been called",called.get());
  reg.unregister();
  waitForAsynchronousHandling();
  Thread.sleep(2000);
  refRunnable.run();
  assertEquals("The default runnable was not called",2,defaultRunnable.getCount());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListReferences() throws Exception {
  BlueprintContainer blueprintContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.sample");
  assertNotNull(blueprintContainer);
  BindingListener listener=(BindingListener)blueprintContainer.getComponentInstance("listBindingListener");
  assertNull(listener.getA());
  assertNull(listener.getReference());
  List<?> refs=(List<?>)blueprintContainer.getComponentInstance("ref-list");
  assertNotNull(refs);
  assertTrue(refs.isEmpty());
  InterfaceA testService=new InterfaceA(){
    public String hello(    String msg){
      return "Hello " + msg + "!";
    }
  }
;
  bundleContext.registerService(InterfaceA.class.getName(),testService,null);
  waitForAsynchronousHandling();
  assertNotNull(listener.getA());
  assertNotNull(listener.getReference());
  assertEquals(1,refs.size());
  InterfaceA a=(InterfaceA)refs.get(0);
  assertNotNull(a);
  assertEquals("Hello world!",a.hello("world"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.TestRegistrationListener </h4><pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWithAutoExportEnabled() throws Exception {
  BlueprintContainer blueprintContainer=Helper.getBlueprintContainerForBundle(context(),"org.apache.aries.blueprint.sample");
  assertNotNull(blueprintContainer);
  Foo foo=context().getService(Foo.class,"(" + BlueprintConstants.COMPONENT_NAME_PROPERTY + "=foo)");
  assertEquals(5,foo.getA());
  FooRegistrationListener listener=(FooRegistrationListener)blueprintContainer.getComponentInstance("fooRegistrationListener");
  Map<?,?> props=listener.getProperties();
  assertNotNull(props);
  assertTrue(props.containsKey(BlueprintConstants.COMPONENT_NAME_PROPERTY));
  assertEquals("foo",props.get(BlueprintConstants.COMPONENT_NAME_PROPERTY));
  assertTrue(props.containsKey("key"));
  assertEquals("value",props.get("key"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.itests.cm.ManagedServiceFactoryTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test2() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory2",null);
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put("a","5");
  cf.update(props);
  @SuppressWarnings("rawtypes") ServiceReference sr=getServiceRef(Foo.class,"(key=foo2)");
  Foo foo=(Foo)context().getService(sr);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertNull(sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
  props=new Hashtable<String,String>();
  props.put("a","5");
  props.put("b","foo");
  cf.update(props);
  Thread.sleep(500);
  assertEquals(5,foo.getA());
  assertEquals("foo",foo.getB());
  assertNull(sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFactoryCreation() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory5",null);
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put("a","5");
  cf.update(props);
  @SuppressWarnings("rawtypes") ServiceReference sr=getServiceRef(Foo.class,"(key=foo5)");
  Foo foo=(Foo)context().getService(sr);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
  props=new Hashtable<String,String>();
  props.put("a","5");
  props.put("b","foo");
  cf.update(props);
  Thread.sleep(500);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test3() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory3",null);
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put("a","5");
  cf.update(props);
  @SuppressWarnings("rawtypes") ServiceReference sr=getServiceRef(Foo.class,"(&(key=foo3)(a=5))");
  assertNotNull(sr);
  Foo foo=(Foo)context().getService(sr);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
  props=new Hashtable<String,String>();
  props.put("a","5");
  props.put("b","foo");
  cf.update(props);
  Thread.sleep(500);
  assertEquals(5,foo.getA());
  assertEquals("foo",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertEquals("foo",sr.getProperty("b"));
  cf.delete();
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test1() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory",null);
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put("a","5");
  cf.update(props);
  @SuppressWarnings("rawtypes") ServiceReference sr=getServiceRef(Foo.class,"(key=foo1)");
  Foo foo=(Foo)context().getService(sr);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
  props=new Hashtable<String,String>();
  props.put("a","5");
  props.put("b","foo");
  cf.update(props);
  Thread.sleep(500);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testCreateAndUpdateUsingUpdateMethod() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory4",null);
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put("a","5");
  cf.update(props);
  Configuration cf2=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory4",null);
  Hashtable<String,String> props2=new Hashtable<String,String>();
  props2.put("a","7");
  cf2.update(props2);
  ServiceReference sr=getServiceRef(Foo.class,"(&(key=foo4)(a=5))");
  ServiceReference sr2=getServiceRef(Foo.class,"(&(key=foo4)(a=7))");
  Foo foo=(Foo)context().getService(sr);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
  Foo foo2=(Foo)context().getService(sr2);
  assertNotNull(foo2);
  assertEquals(7,foo2.getA());
  assertEquals("default",foo2.getB());
  assertEquals("7",sr2.getProperty("a"));
  assertNull(sr2.getProperty("b"));
  props=new Hashtable<String,String>();
  props.put("a","5");
  props.put("b","foo");
  cf.update(props);
  props2=new Hashtable<String,String>();
  props2.put("a","7");
  props2.put("b","foo2");
  cf2.update(props2);
  Thread.sleep(500);
  assertEquals(5,foo.getA());
  assertEquals("foo",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertEquals("foo",sr.getProperty("b"));
  assertEquals(7,foo2.getA());
  assertEquals("foo2",foo2.getB());
  assertEquals("7",sr2.getProperty("a"));
  assertEquals("foo2",sr2.getProperty("b"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testCreateAndUpdate() throws Exception {
  Configuration cf=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory3",null);
  Hashtable<String,String> props=new Hashtable<String,String>();
  props.put("a","5");
  cf.update(props);
  Configuration cf2=ca.createFactoryConfiguration("blueprint-sample-managed-service-factory3",null);
  Hashtable<String,String> props2=new Hashtable<String,String>();
  props2.put("a","7");
  cf2.update(props2);
  ServiceReference sr=getServiceRef(Foo.class,"(&(key=foo3)(a=5))");
  ServiceReference sr2=getServiceRef(Foo.class,"(&(key=foo3)(a=7))");
  Foo foo=(Foo)context().getService(sr);
  assertNotNull(foo);
  assertEquals(5,foo.getA());
  assertEquals("default",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertNull(sr.getProperty("b"));
  Foo foo2=(Foo)context().getService(sr2);
  assertNotNull(foo2);
  assertEquals(7,foo2.getA());
  assertEquals("default",foo2.getB());
  assertEquals("7",sr2.getProperty("a"));
  assertNull(sr2.getProperty("b"));
  props=new Hashtable<String,String>();
  props.put("a","5");
  props.put("b","foo");
  cf.update(props);
  props2=new Hashtable<String,String>();
  props2.put("a","7");
  props2.put("b","foo2");
  cf2.update(props2);
  Thread.sleep(500);
  assertEquals(5,foo.getA());
  assertEquals("foo",foo.getB());
  assertEquals("5",sr.getProperty("a"));
  assertEquals("foo",sr.getProperty("b"));
  assertEquals(7,foo2.getA());
  assertEquals("foo2",foo2.getB());
  assertEquals("7",sr2.getProperty("a"));
  assertEquals("foo2",sr2.getProperty("b"));
  cf.delete();
  cf2.delete();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.plugin.model.BeanTest </h4><pre class="type-3 type-7 type-8 type-16 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBlueprintBundleContext(){
  Bean bean=new Bean(MyBean4.class);
  bean.resolve(new Context());
  Property bcProp=bean.properties.iterator().next();
  assertEquals("bundleContext",bcProp.name);
  assertEquals("blueprintBundleContext",bcProp.ref);
  assertFalse(bean.isPrototype);
  Set<TransactionalDef> expectedTxs=Sets.newHashSet(new TransactionalDef("txWithoutClassAnnotation","Supports"));
  assertEquals(expectedTxs,bean.transactionDefs);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseNamedBean(){
  Bean bean=new Bean(ServiceAImpl1.class);
  bean.resolve(new Context());
  String definedName=ServiceAImpl1.class.getAnnotation(Named.class).value();
  assertEquals("my1",definedName);
  assertEquals("Name should be defined using @Named",definedName,bean.id);
  assertNull("There should be no initMethod",bean.initMethod);
  assertNull("There should be no destroyMethod",bean.destroyMethod);
  assertEquals("There should be no persistence fields",0,bean.persistenceFields.size());
  assertTrue("There should be no transaction definition",bean.transactionDefs.isEmpty());
  assertEquals("There should be no properties",0,bean.properties.size());
  assertTrue(bean.isPrototype);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-16 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseMyBean1(){
  Bean bean=new Bean(MyBean1.class);
  bean.resolve(new Context());
  assertEquals(MyBean1.class,bean.clazz);
  assertEquals("myBean1",bean.id);
  assertEquals("init",bean.initMethod);
  assertEquals("destroy",bean.destroyMethod);
  Assert.assertEquals(2,bean.persistenceFields.size());
  assertEquals("em",bean.persistenceFields.get(0).getName());
  assertEquals("emf",bean.persistenceFields.get(1).getName());
  assertEquals(1,bean.properties.size());
  assertFalse(bean.isPrototype);
  Property prop=bean.properties.iterator().next();
  assertEquals("bean2",prop.name);
  assertEquals("serviceA",prop.ref);
  Set<TransactionalDef> expectedTxs=Sets.newHashSet(new TransactionalDef("*","RequiresNew"),new TransactionalDef("txNotSupported","NotSupported"),new TransactionalDef("txMandatory","Mandatory"),new TransactionalDef("txNever","Never"),new TransactionalDef("txRequired","Required"),new TransactionalDef("txOverridenWithRequiresNew","RequiresNew"),new TransactionalDef("txSupports","Supports"));
  assertEquals(expectedTxs,bean.transactionDefs);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseMyBean3(){
  Bean bean=new Bean(MyBean3.class);
  bean.resolve(new Context());
  assertEquals(MyBean3.class,bean.clazz);
  assertEquals("myBean3",bean.id);
  assertNull("There should be no initMethod",bean.initMethod);
  assertNull("There should be no destroyMethod",bean.destroyMethod);
  assertEquals("There should be no persistence fields",0,bean.persistenceFields.size());
  assertEquals(5,bean.properties.size());
  assertTrue(bean.isPrototype);
  Set<TransactionalDef> expectedTxs=Sets.newHashSet(new TransactionalDef("*","RequiresNew"),new TransactionalDef("txNotSupported","NotSupported"),new TransactionalDef("txMandatory","Mandatory"),new TransactionalDef("txNever","Never"),new TransactionalDef("txRequired","Required"),new TransactionalDef("txRequiresNew","RequiresNew"),new TransactionalDef("txSupports","Supports"));
  assertEquals(expectedTxs,bean.transactionDefs);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.plugin.model.PropertyTest </h4><pre class="type-4 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefInject() throws XMLStreamException {
  Field field=TestBeanForRef.class.getDeclaredFields()[0];
  Matcher matcher=new Matcher(){
    public Bean getMatching(    BeanRef template){
      return new Bean(ServiceAImpl1.class);
    }
  }
;
  Property property=Property.create(matcher,field);
  Assert.assertEquals("serviceA",property.name);
  Assert.assertNull("Value should be null",property.value);
  Assert.assertEquals("my1",property.ref);
}

</code></pre>

<br>
<pre class="type-4 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefAutowired() throws XMLStreamException {
  Field field=TestBeanForRef.class.getDeclaredFields()[1];
  Matcher matcher=new Matcher(){
    public Bean getMatching(    BeanRef template){
      return null;
    }
  }
;
  Property property=Property.create(matcher,field);
  Assert.assertEquals("serviceB",property.name);
  Assert.assertNull("Value should be null",property.value);
  Assert.assertEquals("Should be default name as no match is found","serviceB",property.ref);
}

</code></pre>

<br>
<pre class="type-4 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testValue() throws XMLStreamException {
  Field field=TestBeanForRef.class.getDeclaredFields()[2];
  Property property=Property.create(null,field);
  Assert.assertEquals("name",property.name);
  Assert.assertEquals("${name}",property.value);
  Assert.assertNull("Ref should be null",property.ref);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.AbstractProxyTest </h4><pre class="type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that we don't generate classes twice
 */
@Test public void testRetrieveClass() throws Exception {
  Class<?> retrieved=getProxyClass(getTestClass());
  assertNotNull("The new class was null",retrieved);
  assertEquals("The same class was not returned",retrieved,getProxyClass(getTestClass()));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test a method with generics
 */
@Test public void testGenerics() throws Exception {
  Class<?> proxy=getProxyClass(ProxyTestClassGeneric.class);
  Object o=getProxyInstance(proxy);
  Method m=getDeclaredMethod(ProxyTestClassGeneric.class,"setSomething",String.class);
  m.invoke(o,"aString");
  if (getClass() == WovenProxyGeneratorTest.class)   m=getDeclaredMethod(ProxyTestClassGeneric.class.getSuperclass(),"getSomething");
 else   m=getDeclaredMethod(ProxyTestClassGeneric.class,"getSomething");
  Object returned=m.invoke(o);
  assertTrue("Object was of wrong type",String.class.isInstance(returned));
  assertEquals("String had wrong value","aString",returned);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.InterfaceProxyingTest </h4><pre class="type-4 type-5 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test a class whose super couldn't be woven
 */
@Test public void testDelegationAndInterception() throws Exception {
  Collection<Class<?>> classes=new ArrayList<Class<?>>(Arrays.asList(Callable.class));
  TestListener tl=new TestListener();
  TestCallable tc=new TestCallable();
  Callable o=(Callable)InterfaceProxyGenerator.getProxyInstance(testBundle,null,classes,tc,tl);
  assertCalled(tl,false,false,false);
  assertNull(null,o.call());
  assertCalled(tl,true,true,false);
  assertEquals(Callable.class.getMethod("call"),tl.getLastMethod());
  tl.clear();
  assertCalled(tl,false,false,false);
  tc.setReturn(new Callable(){
    public Object call() throws Exception {
      throw new RuntimeException();
    }
  }
);
  try {
    o.call();
    fail("Should throw an exception");
  }
 catch (  RuntimeException re) {
    assertCalled(tl,true,false,true);
    assertSame(re,tl.getLastThrowable());
  }
  tl.clear();
  assertCalled(tl,false,false,false);
  tc.setReturn(new Callable(){
    public Object call() throws Exception {
      try {
        throw new RuntimeException();
      }
 catch (      RuntimeException re) {
        return new Object();
      }
    }
  }
);
  try {
    assertNotNull(o.call());
  }
  finally {
    assertCalled(tl,true,true,false);
  }
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testComplexInterface() throws Exception {
  Collection<Class<?>> classes=new ArrayList<Class<?>>(Arrays.asList(ProxyTestInterface.class));
  final TestCallable tc=new TestCallable();
  tc.setReturn(5);
  Object o=InterfaceProxyGenerator.getProxyInstance(testBundle,null,classes,constantly(tc),null);
  assertTrue(o instanceof ProxyTestInterface);
  assertTrue(o instanceof Callable);
  assertEquals(5,((Callable)o).call());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHandlesObjectMethods() throws Exception {
  TestListener listener=new TestListener();
  List<String> list=Arrays.asList("one","two","three");
  Object proxied=InterfaceProxyGenerator.getProxyInstance(testBundle,null,Arrays.<Class<?>>asList(List.class),constantly(list),listener);
  assertTrue(proxied.equals(Arrays.asList("one","two","three")));
  assertEquals(Collection.class.getMethod("equals",Object.class),listener.getLastMethod());
  listener.clear();
  assertEquals(Arrays.asList("one","two","three").hashCode(),proxied.hashCode());
  assertEquals(Collection.class.getMethod("hashCode"),listener.getLastMethod());
  listener.clear();
  assertEquals(list.toString(),proxied.toString());
  assertEquals(Object.class.getMethod("toString"),listener.getLastMethod());
  listener.clear();
  Runnable runnable=new Runnable(){
    public void run(){
    }
  }
;
  proxied=InterfaceProxyGenerator.getProxyInstance(testBundle,null,Arrays.<Class<?>>asList(Runnable.class),constantly(runnable),listener);
  assertTrue(proxied.equals(runnable));
  assertEquals(Object.class.getMethod("equals",Object.class),listener.getLastMethod());
  listener.clear();
  assertEquals(runnable.hashCode(),proxied.hashCode());
  assertEquals(Object.class.getMethod("hashCode"),listener.getLastMethod());
  listener.clear();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.ProxySubclassGeneratorTest </h4><pre class="type-4 type-3 type-7 type-8 type-16 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that the methods found declared on the generated proxy subclass are
 * the ones that we expect.
 */
@Test public void testExpectedMethods() throws Exception {
  Class<?> superclass=getTestClass();
  do {
    Method[] declaredMethods=superclass.getDeclaredMethods();
    List<Method> listOfDeclaredMethods=new ArrayList<Method>();
    for (    Method m : declaredMethods) {
      int i=m.getModifiers();
      if (Modifier.isPrivate(i) || Modifier.isFinal(i)) {
      }
 else       if (!(Modifier.isPublic(i) || Modifier.isPrivate(i) || Modifier.isProtected(i))) {
        if (m.getDeclaringClass().getPackage().equals(getTestClass().getPackage())) {
          listOfDeclaredMethods.add(m);
        }
      }
 else {
        listOfDeclaredMethods.add(m);
      }
    }
    declaredMethods=listOfDeclaredMethods.toArray(new Method[]{});
    ProxySubclassMethodHashSet<String> foundMethods=new ProxySubclassMethodHashSet<String>(declaredMethods.length);
    foundMethods.addMethodArray(declaredMethods);
    expectedMethods.addAll(foundMethods);
    superclass=superclass.getSuperclass();
  }
 while (superclass != null);
  Method[] ihMethods=new Method[]{generatedProxySubclass.getMethod("setInvocationHandler",new Class[]{InvocationHandler.class}),generatedProxySubclass.getMethod("getInvocationHandler",new Class[]{})};
  expectedMethods.addMethodArray(ihMethods);
  Method[] generatedProxySubclassMethods=generatedProxySubclass.getDeclaredMethods();
  ProxySubclassMethodHashSet<String> generatedMethods=new ProxySubclassMethodHashSet<String>(generatedProxySubclassMethods.length);
  generatedMethods.addMethodArray(generatedProxySubclassMethods);
  for (  String gen : generatedMethods) {
    assertTrue("Unexpected method: " + gen,expectedMethods.contains(gen));
  }
  for (  String exp : expectedMethods) {
    assertTrue("Method was not generated: " + exp,generatedMethods.contains(exp));
  }
  assertEquals("Sets were not the same",expectedMethods,generatedMethods);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.WovenProxyGeneratorTest </h4><pre class="type-5 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test a class whose super couldn't be woven
 */
@Test public void testUnweavableSuperWithFinalMethod() throws Exception {
  try {
    getProxyClass(ProxyTestClassUnweavableChildWithFinalMethodParent.class);
    fail();
  }
 catch (  RuntimeException re) {
    assertTrue(re.getCause() instanceof FinalModifierException);
    assertEquals(ProxyTestClassUnweavableSuperWithFinalMethod.class.getName(),((FinalModifierException)re.getCause()).getClassName());
    assertEquals("doStuff2",((FinalModifierException)re.getCause()).getFinalMethods());
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test a class whose super couldn't be woven
 */
@Test public void testUnweavableSuperWithDefaultMethodInWrongPackage() throws Exception {
  try {
    getProxyClass(ProxyTestClassUnweavableChildWithDefaultMethodWrongPackageParent.class);
    fail();
  }
 catch (  RuntimeException re) {
    assertTrue(re.getCause() instanceof UnableToProxyException);
    assertEquals(ProxyTestClassUnweavableSuperWithDefaultMethodWrongPackageParent.class.getName(),((UnableToProxyException)re.getCause()).getClassName());
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUnweavableSuperWithNoNoargsAllTheWay() throws Exception {
  try {
    getProxyClass(ProxyTestClassUnweavableSibling.class);
    fail();
  }
 catch (  RuntimeException re) {
    assertTrue(re.getCause() instanceof UnableToProxyException);
    assertEquals(ProxyTestClassUnweavableSibling.class.getName(),((UnableToProxyException)re.getCause()).getClassName());
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInnerWithNoParentNoArgs() throws Exception {
  try {
    getProxyClass(ProxyTestClassUnweavableInnerChild.class);
    fail();
  }
 catch (  RuntimeException re) {
    assertTrue(re.getCause() instanceof UnableToProxyException);
    assertEquals(ProxyTestClassUnweavableInnerChild.class.getName(),((UnableToProxyException)re.getCause()).getClassName());
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test a class whose super couldn't be woven
 */
@Test public void testUnweavableSuper() throws Exception {
  Class<?> woven=getProxyClass(ProxyTestClassUnweavableChild.class);
  assertNotNull(woven);
  assertNotNull(getProxyInstance(woven));
  TestListener tl=new TestListener();
  Object ptcuc=getProxyInstance(woven,tl);
  assertCalled(tl,false,false,false);
  Method m=ptcuc.getClass().getMethod("doStuff");
  assertEquals("Hi!",m.invoke(ptcuc));
  assertCalled(tl,true,true,false);
  assertEquals(ProxyTestClassUnweavableGrandParent.class.getMethod("doStuff"),tl.getLastMethod());
  tl.clear();
  m=getDeclaredMethod(ProxyTestClassUnweavableChild.class,"doStuff2");
  m.setAccessible(true);
  assertEquals("Hello!",m.invoke(ptcuc));
  assertCalled(tl,true,true,false);
  assertEquals(weavingLoader.loadClass(ProxyTestClassUnweavableSuper.class.getName()).getDeclaredMethod("doStuff2"),tl.getLastMethod());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that the methods found declared on the generated proxy are
 * the ones that we expect.
 */
@Test public void testExpectedMethods() throws Exception {
  ProxySubclassMethodHashSet<String> originalMethods=getMethods(getTestClass());
  ProxySubclassMethodHashSet<String> generatedMethods=getMethods(weavingLoader.loadClass(getTestClass().getName()));
  for (  String gen : generatedMethods) {
    assertTrue("Unexpected method: " + gen,originalMethods.contains(gen));
  }
  for (  String exp : originalMethods) {
    assertTrue("Method was not generated: " + exp,generatedMethods.contains(exp));
  }
  assertEquals("Sets were not the same",originalMethods,generatedMethods);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.WovenProxyPlusSubclassGeneratorTest </h4><pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddingInterfacesToClass() throws Exception {
  Object proxy=InterfaceProxyGenerator.getProxyInstance(testBundle,super.getProxyClass(getTestClass()),Arrays.asList(Map.class,Iterable.class),new Callable(){
    int calls=0;
    private Map<String,String> map=new HashMap<String,String>();
{
      map.put("key","value");
    }
    public Object call() throws Exception {
switch (++calls) {
case 1:
        return WovenProxyPlusSubclassGeneratorTest.super.getProxyInstance(weavingLoader.loadClass(getTestClass().getName()));
case 2:
      return map;
default :
    return map.values();
}
}
}
,null);
Method m=weavingLoader.loadClass(ProxyTestClassGeneral.class.getName()).getDeclaredMethod("testReturnInt");
m.setAccessible(true);
assertEquals(17,m.invoke(proxy));
assertEquals("value",((Map<String,String>)proxy).put("key","value2"));
Iterator<?> it=((Iterable<?>)proxy).iterator();
assertEquals("value2",it.next());
assertFalse(it.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.proxy.WovenSubclassGeneratorTest </h4><pre class="type-4 type-3 type-7 type-8 type-16 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test that the methods found declared on the generated proxy subclass are
 * the ones that we expect.
 */
@Test public void testExpectedMethods() throws Exception {
  Class<?> superclass=getTestClass();
  do {
    Method[] declaredMethods=superclass.getDeclaredMethods();
    List<Method> listOfDeclaredMethods=new ArrayList<Method>();
    for (    Method m : declaredMethods) {
      if (m.getName().equals("clone") || m.getName().equals("finalize"))       continue;
      int i=m.getModifiers();
      if (Modifier.isPrivate(i) || Modifier.isFinal(i)) {
      }
 else       if (!(Modifier.isPublic(i) || Modifier.isPrivate(i) || Modifier.isProtected(i))) {
        if (m.getDeclaringClass().getPackage().equals(getTestClass().getPackage())) {
          listOfDeclaredMethods.add(m);
        }
      }
 else {
        listOfDeclaredMethods.add(m);
      }
    }
    declaredMethods=listOfDeclaredMethods.toArray(new Method[]{});
    ProxySubclassMethodHashSet<String> foundMethods=new ProxySubclassMethodHashSet<String>(declaredMethods.length);
    foundMethods.addMethodArray(declaredMethods);
    expectedMethods.addAll(foundMethods);
    superclass=superclass.getSuperclass();
  }
 while (superclass != null);
  Method[] subclassMethods=getProxyClass(getTestClass()).getDeclaredMethods();
  List<Method> listOfDeclaredMethods=new ArrayList<Method>();
  for (  Method m : subclassMethods) {
    if (m.getName().startsWith(WovenProxy.class.getName().replace('.','_')))     continue;
    listOfDeclaredMethods.add(m);
  }
  subclassMethods=listOfDeclaredMethods.toArray(new Method[]{});
  ProxySubclassMethodHashSet<String> generatedMethods=new ProxySubclassMethodHashSet<String>(subclassMethods.length);
  generatedMethods.addMethodArray(subclassMethods);
  for (  String gen : generatedMethods) {
    assertTrue("Unexpected method: " + gen,expectedMethods.contains(gen));
  }
  for (  String exp : expectedMethods) {
    assertTrue("Method was not generated: " + exp,generatedMethods.contains(exp));
  }
  assertEquals("Sets were not the same",expectedMethods,generatedMethods);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddingInterfacesToClass() throws Exception {
  Object proxy=InterfaceProxyGenerator.getProxyInstance(null,getTestClass(),Arrays.asList(Map.class,Iterable.class),new Callable(){
    int calls=0;
    private Map<String,String> map=new HashMap<String,String>();
{
      map.put("key","value");
    }
    public Object call() throws Exception {
switch (++calls) {
case 1:
        return getTestClass().newInstance();
case 2:
      return map;
default :
    return map.values();
}
}
}
,null);
assertEquals(17,((ProxyTestClassGeneralWithNoDefaultOrProtectedAccess)proxy).testReturnInt());
assertEquals("value",((Map<String,String>)proxy).put("key","value2"));
Iterator<?> it=((Iterable<?>)proxy).iterator();
assertEquals("value2",it.next());
assertFalse(it.hasNext());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.blueprint.utils.ReflectionUtilsTest </h4><pre class="type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFieldsAndProps() throws Exception {
  loadProps(FieldsAndProps.class,true);
  assertEquals(3,sut.length);
  FieldsAndProps fap=new FieldsAndProps();
  assertEquals("hidden",sut[1].getName());
  assertTrue(sut[1].allowsGet());
  assertTrue(sut[1].allowsSet());
  assertEquals("ordeal",sut[1].get(fap,mockBlueprint));
  sut[1].set(fap,"calvary",mockBlueprint);
  assertEquals("calvary",sut[1].get(fap,mockBlueprint));
  assertEquals("nonHidden",sut[2].getName());
  assertTrue(sut[2].allowsGet());
  assertTrue(sut[2].allowsSet());
  sut[2].set(fap,"predicament",mockBlueprint);
  assertEquals("predicament",sut[2].get(fap,mockBlueprint));
}

</code></pre>

<br>
<pre class="type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetterAndGetter() throws Exception {
  loadProps(SetterAndGetter.class,false);
  assertEquals(2,sut.length);
  assertEquals("field",sut[1].getName());
  assertTrue(sut[1].allowsGet());
  assertTrue(sut[1].allowsSet());
  SetterAndGetter sag=new SetterAndGetter();
  sut[1].set(sag,"tribulation",mockBlueprint);
  assertEquals("tribulation",sut[1].get(sag,mockBlueprint));
}

</code></pre>

<br>
<pre class="type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetterOnly() throws Exception {
  loadProps(GetterOnly.class,true);
  assertEquals(2,sut.length);
  assertEquals("class",sut[0].getName());
  assertEquals("value",sut[1].getName());
  assertTrue(sut[1].allowsGet());
  assertFalse(sut[1].allowsSet());
  assertEquals("test",sut[1].get(new GetterOnly(),mockBlueprint));
}

</code></pre>

<br>
<pre class="type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetterOnly() throws Exception {
  loadProps(SetterOnly.class,false);
  assertEquals(2,sut.length);
  assertEquals("field",sut[1].getName());
  assertFalse(sut[1].allowsGet());
  assertTrue(sut[1].allowsSet());
  SetterOnly so=new SetterOnly();
  sut[1].set(so,"trial",mockBlueprint);
  assertEquals("trial",so.retrieve());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.ejb.container.itest.AbstractEJBModellerTest </h4><pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEJBJARAndAnnotatedOnClasspathInWebZip() throws Exception {
  ModelledResource mr=null;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"MANIFEST_4.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"ejb-jar.xml","WEB-INF/ejb-jar.xml");
  addToZip(zos,"beans/StatelessSessionBean.class","yes/beans/StatelessSessionBean.class");
  addToZip(zos,"beans/StatefulSessionBean.class","yes/beans/StatefulSessionBean.class");
  zos.close();
  mr=model(baos.toByteArray());
  Collection<? extends ExportedService> services=mr.getExportedServices();
  assertEquals("Wrong number of services",3,services.size());
  assertTrue(services.containsAll(getXMLservices()));
  assertTrue(services.containsAll(getAnnotatedservices()));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnnotatedOnlyInZip() throws Exception {
  ModelledResource mr=null;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"MANIFEST_1.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"beans/StatelessSessionBean.class");
  addToZip(zos,"beans/StatefulSessionBean.class");
  zos.close();
  mr=model(baos.toByteArray());
  Collection<? extends ExportedService> services=mr.getExportedServices();
  assertEquals("Wrong number of services",1,services.size());
  assertTrue(Collections.disjoint(services,getXMLservices()));
  assertTrue(services.containsAll(getAnnotatedservices()));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEJBJARAndAnnotatedOnClasspathInZip() throws Exception {
  ModelledResource mr=null;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"MANIFEST_2.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"ejb-jar.xml","META-INF/ejb-jar.xml");
  addToZip(zos,"beans/StatelessSessionBean.class","yes/beans/StatelessSessionBean.class");
  addToZip(zos,"beans/StatefulSessionBean.class","yes/beans/StatefulSessionBean.class");
  zos.close();
  mr=model(baos.toByteArray());
  Collection<? extends ExportedService> services=mr.getExportedServices();
  assertEquals("Wrong number of services",3,services.size());
  assertTrue(services.containsAll(getXMLservices()));
  assertTrue(services.containsAll(getAnnotatedservices()));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void modelBasicEJBBundleWithXML() throws Exception {
  ModelledResource mr=null;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"MANIFEST_1.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"ejb-jar.xml","META-INF/ejb-jar.xml");
  zos.close();
  mr=model(baos.toByteArray());
  Collection<? extends ExportedService> services=mr.getExportedServices();
  assertEquals("Wrong number of services",2,services.size());
  assertTrue(services.containsAll(getXMLservices()));
  assertTrue(Collections.disjoint(services,getAnnotatedservices()));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEJBJARAndAnnotatedInZip() throws Exception {
  ModelledResource mr=null;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"MANIFEST_1.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"ejb-jar.xml","META-INF/ejb-jar.xml");
  addToZip(zos,"beans/StatelessSessionBean.class");
  addToZip(zos,"beans/StatefulSessionBean.class");
  zos.close();
  mr=model(baos.toByteArray());
  Collection<? extends ExportedService> services=mr.getExportedServices();
  assertEquals("Wrong number of services",3,services.size());
  assertTrue(services.containsAll(getXMLservices()));
  assertTrue(services.containsAll(getAnnotatedservices()));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEJBJARAndAnnotatedNotOnClasspathInWebZip() throws Exception {
  ModelledResource mr=null;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"MANIFEST_4.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"ejb-jar.xml","WEB-INF/ejb-jar.xml");
  addToZip(zos,"beans/StatelessSessionBean.class","no/beans/StatelessSessionBean.class");
  addToZip(zos,"beans/StatefulSessionBean.class","no/beans/StatefulSessionBean.class");
  zos.close();
  mr=model(baos.toByteArray());
  Collection<? extends ExportedService> services=mr.getExportedServices();
  assertEquals("Wrong number of services",2,services.size());
  assertTrue(services.containsAll(getXMLservices()));
  assertTrue(Collections.disjoint(services,getAnnotatedservices()));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEJBJARAndAnnotatedNotOnClasspathInZip() throws Exception {
  ModelledResource mr=null;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"MANIFEST_2.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"ejb-jar.xml","META-INF/ejb-jar.xml");
  addToZip(zos,"beans/StatelessSessionBean.class","no/beans/StatelessSessionBean.class");
  addToZip(zos,"beans/StatefulSessionBean.class","no/beans/StatefulSessionBean.class");
  zos.close();
  mr=model(baos.toByteArray());
  Collection<? extends ExportedService> services=mr.getExportedServices();
  assertEquals("Wrong number of services",2,services.size());
  assertTrue(services.containsAll(getXMLservices()));
  assertTrue(Collections.disjoint(services,getAnnotatedservices()));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEJBJARInWebZip() throws Exception {
  ModelledResource mr=null;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"MANIFEST_3.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"ejb-jar.xml","WEB-INF/ejb-jar.xml");
  zos.close();
  mr=model(baos.toByteArray());
  Collection<? extends ExportedService> services=mr.getExportedServices();
  assertEquals("Wrong number of services",2,services.size());
  assertTrue(services.containsAll(getXMLservices()));
  assertTrue(Collections.disjoint(services,getAnnotatedservices()));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEJBJARAndAnnotatedInWebZip() throws Exception {
  ModelledResource mr=null;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"MANIFEST_3.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"ejb-jar.xml","WEB-INF/ejb-jar.xml");
  addToZip(zos,"beans/StatelessSessionBean.class");
  addToZip(zos,"beans/StatefulSessionBean.class");
  zos.close();
  mr=model(baos.toByteArray());
  Collection<? extends ExportedService> services=mr.getExportedServices();
  assertEquals("Wrong number of services",3,services.size());
  assertTrue(services.containsAll(getXMLservices()));
  assertTrue(services.containsAll(getAnnotatedservices()));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnnotatedOnlyInWebZip() throws Exception {
  ModelledResource mr=null;
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"MANIFEST_3.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"beans/StatelessSessionBean.class");
  addToZip(zos,"beans/StatefulSessionBean.class");
  zos.close();
  mr=model(baos.toByteArray());
  Collection<? extends ExportedService> services=mr.getExportedServices();
  assertEquals("Wrong number of services",1,services.size());
  assertTrue(Collections.disjoint(services,getXMLservices()));
  assertTrue(services.containsAll(getAnnotatedservices()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.ejb.modelling.impl.EJBLocatorFactoryTest </h4><pre class="type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEJBLocator(){
  EJBLocator locator=EJBLocatorFactory.getEJBLocator();
  assertNotNull(locator);
  assertTrue(locator.getClass().getName(),locator instanceof OpenEJBLocator);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetEJBLocatorNoOpenEJB() throws Exception {
  Class<?> elf=new ClassLoader(getClass().getClassLoader()){
    @Override public Class<?> loadClass(    String className) throws ClassNotFoundException {
      if (className.startsWith("org.apache.openejb"))       throw new ClassNotFoundException(className);
      if (className.equals(EJBLocatorFactory.class.getName())) {
        ByteArrayOutputStream baos=new ByteArrayOutputStream();
        try {
          IOUtils.copy(getResourceAsStream(className.replace('.','/') + ".class"),baos);
        }
 catch (        IOException e) {
          throw new ClassNotFoundException(className,e);
        }
        return defineClass(className,baos.toByteArray(),0,baos.size());
      }
      return super.loadClass(className);
    }
  }
.loadClass(EJBLocatorFactory.class.getName());
  EJBLocator locator=(EJBLocator)elf.getMethod("getEJBLocator").invoke(null);
  assertNotNull(locator);
  assertTrue(locator.getClass().getName(),locator instanceof EJBLocationUnavailable);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.ejb.openejb.extender.itest.AdvancedEJBBundleTest </h4><pre class="type-4 type-7 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testJPAContextSharing() throws Exception {
  System.setProperty("openejb.validation.output.level","VERBOSE");
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"JPA_MANIFEST.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"persistence.xml","META-INF/persistence.xml");
  addToZip(zos,"beans/integration/impl/JPASingleton.class");
  addToZip(zos,"beans/jpa/Laptop.class");
  zos.close();
  Bundle test=context().installBundle("",new ByteArrayInputStream(baos.toByteArray()));
  try {
    test.start();
    PersistenceContextProvider provider=context().getService(PersistenceContextProvider.class);
    HashMap<String,Object> props=new HashMap<String,Object>();
    props.put(PersistenceContextProvider.PERSISTENCE_CONTEXT_TYPE,PersistenceContextType.TRANSACTION);
    provider.registerContext("ejb-test",context().getBundle(),props);
    Object bean=context().getService(context().getServiceReference(JPASingleton.class.getName()));
    UserTransaction ut=context().getService(UserTransaction.class);
    Method m=bean.getClass().getMethod("editEntity",String.class);
    EntityManager em=context().getService(EntityManagerFactory.class,"(&(osgi.unit.name=ejb-test)(" + PersistenceUnitConstants.CONTAINER_MANAGED_PERSISTENCE_UNIT + "=true)"+ "("+ PersistenceContextProvider.PROXY_FACTORY_EMF_ATTRIBUTE+ "=*))").createEntityManager();
    ut.begin();
    try {
      Object e=test.loadClass(Laptop.class.getName()).newInstance();
      e.getClass().getMethod("setSerialNumber",String.class).invoke(e,"ABC123");
      e.getClass().getMethod("setNumberOfCores",int.class).invoke(e,1);
      em.persist(e);
      m.invoke(bean,"ABC123");
      assertEquals(4,e.getClass().getMethod("getNumberOfCores").invoke(e));
      assertEquals(Integer.MAX_VALUE,e.getClass().getMethod("getHardDiskSize").invoke(e));
    }
  finally {
      ut.commit();
    }
    test.stop();
  }
  finally {
    test.uninstall();
  }
}

</code></pre>

<br>
<pre class="type-4 type-13 type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testTransactionalEJB() throws Exception {
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  ZipOutputStream zos=new ZipOutputStream(baos);
  addToZip(zos,"TX_MANIFEST.MF","META-INF/MANIFEST.MF");
  addToZip(zos,"beans/integration/impl/TxSingleton.class");
  addToZip(zos,"beans/integration/Tx.class");
  zos.close();
  Bundle test=context().installBundle("",new ByteArrayInputStream(baos.toByteArray()));
  try {
    test.start();
    Object bean=context().getService(context().getServiceReference(Tx.class.getName()));
    UserTransaction ut=context().getService(UserTransaction.class);
    Method no=bean.getClass().getMethod("getNoTransactionId");
    Method maybe=bean.getClass().getMethod("getMaybeTransactionId");
    Method tx=bean.getClass().getMethod("getTransactionId");
    Method newTx=bean.getClass().getMethod("getNewTransactionId");
    assertNull(no.invoke(bean));
    assertNull(maybe.invoke(bean));
    assertNotNull(tx.invoke(bean));
    assertNotNull(newTx.invoke(bean));
    ut.begin();
    try {
      Object key=context().getService(TransactionSynchronizationRegistry.class).getTransactionKey();
      assertNotNull(key);
      assertNull(no.invoke(bean));
      assertSame(key,maybe.invoke(bean));
      assertSame(key,tx.invoke(bean));
      Object o=newTx.invoke(bean);
      assertNotNull(o);
      assertNotSame(key,o);
    }
  finally {
      ut.commit();
    }
    test.stop();
  }
  finally {
    test.uninstall();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.cm.ConfigurationAdminMBeanTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("ManagedServiceFactory tests failing.. " + "Some issues surrounding creating a factory configuration and then retrieving by pid to update.. Needs investigation") @Test @SuppressWarnings("unchecked") public void testMBeanInterface() throws Exception {
  Bundle a=getBundleByName("org.apache.aries.jmx.test.bundlea");
  assertNull(managedServiceA.getConfig());
  TabularData data=mbean.getProperties("org.apache.aries.jmx.test.ServiceA");
  assertEquals(0,data.size());
  PropertyData<String> p1=PropertyData.newInstance("A1","first");
  data.put(p1.toCompositeData());
  PropertyData<Integer> p2=PropertyData.newInstance("A2",2);
  data.put(p2.toCompositeData());
  mbean.update("org.apache.aries.jmx.test.ServiceA",data);
  Thread.sleep(1000);
  Dictionary<String,Object> config=managedServiceA.getConfig();
  assertNotNull(config);
  assertEquals(3,config.size());
  assertEquals("org.apache.aries.jmx.test.ServiceA",config.get(Constants.SERVICE_PID));
  assertEquals("first",config.get("A1"));
  assertEquals(2,config.get("A2"));
  mbean.deleteForLocation("org.apache.aries.jmx.test.ServiceA",a.getLocation());
  Thread.sleep(1000);
  assertNull(managedServiceA.getConfig());
  String cpid=mbean.createFactoryConfiguration("jmx.test.B.factory");
  assertNotNull(cpid);
  assertTrue(cpid.contains("jmx.test.B.factory"));
  TabularData fConfig=mbean.getProperties(cpid);
  assertNotNull(fConfig);
  assertEquals(0,fConfig.values().size());
  PropertyData<String> prop1=PropertyData.newInstance("B1","value1");
  fConfig.put(prop1.toCompositeData());
  PropertyData<Boolean> prop2=PropertyData.newInstance("B2",true);
  fConfig.put(prop2.toCompositeData());
  mbean.update(cpid,fConfig);
  Thread.sleep(1000);
  InterfaceB configured=managedFactory.getConfigured(cpid);
  assertNotNull(configured);
  config=configured.getConfig();
  assertNotNull(config);
  assertTrue(config.size() >= 4);
  assertEquals("jmx.test.B.factory",config.get(ConfigurationAdmin.SERVICE_FACTORYPID));
  assertEquals(cpid,config.get(Constants.SERVICE_PID));
  assertEquals("value1",config.get("B1"));
  assertEquals("true",config.get("B2"));
  assertEquals("jmx.test.B.factory",mbean.getFactoryPid(cpid));
  mbean.delete(cpid);
  Thread.sleep(1000);
  assertNull(managedFactory.getConfigured(cpid));
  data=mbean.getProperties("org.apache.aries.jmx.test.ServiceA");
  assertEquals(0,data.size());
  p1=PropertyData.newInstance("A1","a1Value");
  data.put(p1.toCompositeData());
  mbean.update("org.apache.aries.jmx.test.ServiceA",data);
  Thread.sleep(1000);
  config=managedServiceA.getConfig();
  assertNotNull(config);
  assertEquals(2,config.size());
  assertEquals("org.apache.aries.jmx.test.ServiceA",config.get(Constants.SERVICE_PID));
  assertEquals("a1Value",config.get("A1"));
  String[][] configurations=mbean.getConfigurations("(A1=a1Value)");
  assertNotNull(configurations);
  assertEquals(1,configurations.length);
  assertEquals("org.apache.aries.jmx.test.ServiceA",configurations[0][0]);
  assertEquals(a.getLocation(),configurations[0][1]);
  mbean.deleteConfigurations("(A1=a1Value)");
  Thread.sleep(1000);
  assertNull(managedServiceA.getConfig());
}

</code></pre>

<br>
<pre class="type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void doSetUp() throws Exception {
  waitForMBean(ConfigurationAdminMBean.OBJECTNAME);
  mbean=getMBean(ConfigurationAdminMBean.OBJECTNAME,ConfigurationAdminMBean.class);
  assertNotNull(mbean);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.cm.ConfigurationAdminTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetProperties() throws Exception {
  org.osgi.service.cm.ConfigurationAdmin admin=mock(org.osgi.service.cm.ConfigurationAdmin.class);
  String pid="org.apache.aries.jmx.mock";
  Configuration config=mock(Configuration.class);
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put("one","value");
  props.put("two",2);
  when(admin.getConfiguration(eq(pid),anyString())).thenReturn(config);
  when(config.getProperties()).thenReturn(props);
  ConfigurationAdmin mbean=new ConfigurationAdmin(admin);
  TabularData properties=mbean.getPropertiesForLocation(pid,null);
  assertNotNull(properties);
  assertEquals(PROPERTIES_TYPE,properties.getTabularType());
  assertEquals(2,properties.values().size());
  PropertyData<? extends Object> oneData=PropertyData.from(properties.get(new Object[]{"one"}));
  assertEquals("value",oneData.getValue());
  PropertyData<? extends Object> twoData=PropertyData.from(properties.get(new Object[]{"two"}));
  assertEquals(2,twoData.getValue());
  assertEquals("2",twoData.getEncodedValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.codec.BundleDataTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testToCompositeData() throws Exception {
  Bundle bundle=mock(Bundle.class);
  BundleContext context=mock(BundleContext.class);
  PackageAdmin packageAdmin=mock(PackageAdmin.class);
  StartLevel startLevel=mock(StartLevel.class);
  Bundle b1=mock(Bundle.class);
  when(b1.getSymbolicName()).thenReturn("b1");
  when(b1.getBundleId()).thenReturn(new Long(44));
  Bundle b2=mock(Bundle.class);
  when(b2.getSymbolicName()).thenReturn("b2");
  when(b2.getBundleId()).thenReturn(new Long(55));
  Bundle b3=mock(Bundle.class);
  when(b3.getSymbolicName()).thenReturn("b3");
  when(b3.getBundleId()).thenReturn(new Long(66));
  when(context.getBundles()).thenReturn(new Bundle[]{bundle,b1,b2,b3});
  when(bundle.getSymbolicName()).thenReturn("test");
  when(bundle.getVersion()).thenReturn(Version.emptyVersion);
  when(bundle.getBundleId()).thenReturn(new Long(1));
  when(bundle.getLastModified()).thenReturn(new Long(12345));
  when(bundle.getLocation()).thenReturn("location");
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(Constants.BUNDLE_SYMBOLICNAME,"test");
  headers.put(Constants.BUNDLE_VERSION,"0.0.0");
  when(bundle.getHeaders()).thenReturn(headers);
  ExportedPackage exported=mock(ExportedPackage.class);
  when(exported.getName()).thenReturn("org.apache.aries.jmx");
  when(exported.getVersion()).thenReturn(new Version("1.0.0"));
  when(exported.getExportingBundle()).thenReturn(bundle);
  when(packageAdmin.getExportedPackages(bundle)).thenReturn(new ExportedPackage[]{exported});
  ExportedPackage ep1=mock(ExportedPackage.class);
  when(ep1.getImportingBundles()).thenReturn(new Bundle[]{bundle,b2,b3});
  when(ep1.getName()).thenReturn("org.apache.aries.jmx.b1");
  when(ep1.getVersion()).thenReturn(Version.emptyVersion);
  when(ep1.getExportingBundle()).thenReturn(b1);
  ExportedPackage ep2=mock(ExportedPackage.class);
  when(ep2.getImportingBundles()).thenReturn(new Bundle[]{bundle,b3});
  when(ep2.getName()).thenReturn("org.apache.aries.jmx.b2");
  when(ep2.getVersion()).thenReturn(Version.parseVersion("2.0.1"));
  when(ep2.getExportingBundle()).thenReturn(b2);
  headers.put(Constants.DYNAMICIMPORT_PACKAGE,"*");
  when(packageAdmin.getExportedPackages(b1)).thenReturn(new ExportedPackage[]{ep1});
  when(packageAdmin.getExportedPackages(b2)).thenReturn(new ExportedPackage[]{ep2});
  when(packageAdmin.getExportedPackages(b3)).thenReturn(null);
  RequiredBundle rb1=mock(RequiredBundle.class);
  when(rb1.getBundle()).thenReturn(b1);
  when(rb1.getRequiringBundles()).thenReturn(new Bundle[]{bundle,b2});
  RequiredBundle rb2=mock(RequiredBundle.class);
  when(rb2.getBundle()).thenReturn(b2);
  when(rb2.getRequiringBundles()).thenReturn(new Bundle[]{b1});
  RequiredBundle rb3=mock(RequiredBundle.class);
  when(rb3.getBundle()).thenReturn(b3);
  when(rb3.getRequiringBundles()).thenReturn(new Bundle[]{bundle,b1,b2});
  headers.put(Constants.REQUIRE_BUNDLE,"b1;bundle-version=\"1.0.0\",b3;bundle-version=\"2.0.0\"");
  when(packageAdmin.getRequiredBundles("b1")).thenReturn(new RequiredBundle[]{rb1});
  when(packageAdmin.getRequiredBundles("b2")).thenReturn(new RequiredBundle[]{rb2});
  when(packageAdmin.getRequiredBundles("b3")).thenReturn(new RequiredBundle[]{rb3});
  ServiceReference s1=mock(ServiceReference.class);
  when(s1.getProperty(Constants.SERVICE_ID)).thenReturn(new Long(15));
  ServiceReference s2=mock(ServiceReference.class);
  when(s2.getProperty(Constants.SERVICE_ID)).thenReturn(new Long(16));
  ServiceReference s3=mock(ServiceReference.class);
  when(s3.getProperty(Constants.SERVICE_ID)).thenReturn(new Long(17));
  when(bundle.getServicesInUse()).thenReturn(new ServiceReference[]{s1,s2,s3});
  BundleData b=new BundleData(context,bundle,packageAdmin,startLevel);
  CompositeData compositeData=b.toCompositeData();
  assertEquals("test",compositeData.get(SYMBOLIC_NAME));
  assertEquals("0.0.0",compositeData.get(VERSION));
  TabularData headerTable=(TabularData)compositeData.get(HEADERS);
  assertEquals(4,headerTable.values().size());
  CompositeData header=headerTable.get(new Object[]{Constants.BUNDLE_SYMBOLICNAME});
  assertNotNull(header);
  String value=(String)header.get(VALUE);
  assertEquals("test",value);
  String key=(String)header.get(KEY);
  assertEquals(Constants.BUNDLE_SYMBOLICNAME,key);
  TabularData bundleTable=new TabularDataSupport(BUNDLES_TYPE);
  bundleTable.put(b.toCompositeData());
  CompositeData bundleData=bundleTable.get(new Object[]{Long.valueOf(1)});
  assertNotNull(bundleData);
  String location=(String)bundleData.get(LOCATION);
  assertEquals("location",location);
  assertArrayEquals(new String[]{"org.apache.aries.jmx;1.0.0"},(String[])compositeData.get(EXPORTED_PACKAGES));
  assertArrayEquals(new String[]{"org.apache.aries.jmx.b1;0.0.0","org.apache.aries.jmx.b2;2.0.1"},(String[])compositeData.get(IMPORTED_PACKAGES));
  assertEquals(toSet(new long[]{44,55,66}),toSet((Long[])compositeData.get(REQUIRED_BUNDLES)));
  assertArrayEquals(new Long[]{new Long(15),new Long(16),new Long(17)},(Long[])compositeData.get(SERVICES_IN_USE));
  assertEquals("UNKNOWN",compositeData.get(STATE));
  assertEquals(0,((Long[])compositeData.get(HOSTS)).length);
  assertEquals(0,((Long[])compositeData.get(FRAGMENTS)).length);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.codec.PropertyDataTest </h4><pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFromCompositeDataForPrimitiveTypes() throws Exception {
  Map<String,Object> items=new HashMap<String,Object>();
  items.put(KEY,"key");
  items.put(VALUE,"1");
  items.put(TYPE,P_INT);
  CompositeData compositeData=new CompositeDataSupport(PROPERTY_TYPE,items);
  PropertyData<Integer> intData=PropertyData.from(compositeData);
  assertEquals("key",intData.getKey());
  assertEquals(new Integer(1),intData.getValue());
  assertEquals(P_INT,intData.getEncodedType());
  assertTrue(intData.isEncodingPrimitive());
  items.clear();
  items.put(KEY,"key");
  items.put(VALUE,"1.0");
  items.put(TYPE,P_DOUBLE);
  compositeData=new CompositeDataSupport(PROPERTY_TYPE,items);
  PropertyData<Double> doubleData=PropertyData.from(compositeData);
  assertEquals("key",doubleData.getKey());
  assertEquals(Double.valueOf(1.0),doubleData.getValue());
  assertEquals(P_DOUBLE,doubleData.getEncodedType());
  assertTrue(doubleData.isEncodingPrimitive());
  items.clear();
  items.put(KEY,"key");
  items.put(VALUE,"a");
  items.put(TYPE,P_CHAR);
  compositeData=new CompositeDataSupport(PROPERTY_TYPE,items);
  PropertyData<Character> charData=PropertyData.from(compositeData);
  assertEquals("key",charData.getKey());
  assertEquals(Character.valueOf('a'),charData.getValue());
  assertEquals(P_CHAR,charData.getEncodedType());
  assertTrue(charData.isEncodingPrimitive());
  items.clear();
  items.put(KEY,"key");
  items.put(VALUE,"true");
  items.put(TYPE,P_BOOLEAN);
  compositeData=new CompositeDataSupport(PROPERTY_TYPE,items);
  PropertyData<Boolean> booleanData=PropertyData.from(compositeData);
  assertEquals("key",booleanData.getKey());
  assertTrue(booleanData.getValue());
  assertEquals(P_BOOLEAN,booleanData.getEncodedType());
  assertTrue(booleanData.isEncodingPrimitive());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFromCompositeDataForWrapperTypes() throws Exception {
  Map<String,Object> items=new HashMap<String,Object>();
  items.put(KEY,"key");
  items.put(VALUE,"1");
  items.put(TYPE,INTEGER);
  CompositeData compositeData=new CompositeDataSupport(PROPERTY_TYPE,items);
  PropertyData<Integer> intData=PropertyData.from(compositeData);
  assertEquals("key",intData.getKey());
  assertEquals(new Integer(1),intData.getValue());
  assertEquals(INTEGER,intData.getEncodedType());
  assertFalse(intData.isEncodingPrimitive());
  items.clear();
  items.put(KEY,"key");
  items.put(VALUE,"1.0");
  items.put(TYPE,DOUBLE);
  compositeData=new CompositeDataSupport(PROPERTY_TYPE,items);
  PropertyData<Double> doubleData=PropertyData.from(compositeData);
  assertEquals("key",doubleData.getKey());
  assertEquals(Double.valueOf(1.0),doubleData.getValue());
  assertEquals(DOUBLE,doubleData.getEncodedType());
  assertFalse(doubleData.isEncodingPrimitive());
  items.clear();
  items.put(KEY,"key");
  items.put(VALUE,"a");
  items.put(TYPE,CHARACTER);
  compositeData=new CompositeDataSupport(PROPERTY_TYPE,items);
  PropertyData<Character> charData=PropertyData.from(compositeData);
  assertEquals("key",charData.getKey());
  assertEquals(Character.valueOf('a'),charData.getValue());
  assertEquals(CHARACTER,charData.getEncodedType());
  assertFalse(charData.isEncodingPrimitive());
  items.clear();
  items.put(KEY,"key");
  items.put(VALUE,"true");
  items.put(TYPE,BOOLEAN);
  compositeData=new CompositeDataSupport(PROPERTY_TYPE,items);
  PropertyData<Boolean> booleanData=PropertyData.from(compositeData);
  assertEquals("key",booleanData.getKey());
  assertTrue(booleanData.getValue());
  assertEquals(BOOLEAN,booleanData.getEncodedType());
  assertFalse(booleanData.isEncodingPrimitive());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.codec.ServiceDataTest </h4><pre class="type-4 type-12 type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testToCompositeData() throws Exception {
  ServiceReference<?> reference=mock(ServiceReference.class);
  Bundle bundle=mock(Bundle.class);
  String[] interfaces=new String[]{"org.apache.aries.jmx.Test","org.apache.aries.jmx.Mock"};
  Bundle b1=mock(Bundle.class);
  when(b1.getBundleId()).thenReturn(new Long(6));
  Bundle b2=mock(Bundle.class);
  when(b2.getBundleId()).thenReturn(new Long(9));
  when(reference.getProperty(Constants.SERVICE_ID)).thenReturn(new Long(98));
  when(reference.getBundle()).thenReturn(bundle);
  when(bundle.getBundleId()).thenReturn(new Long(34));
  when(reference.getProperty(Constants.OBJECTCLASS)).thenReturn(interfaces);
  when(reference.getUsingBundles()).thenReturn(new Bundle[]{b1,b2});
  when(reference.getPropertyKeys()).thenReturn(new String[]{"x.vendor","x.domain","x.index","x.optimized"});
  when(reference.getProperty("x.vendor")).thenReturn("aries");
  when(reference.getProperty("x.domain")).thenReturn("test");
  when(reference.getProperty("x.index")).thenReturn(new Long(67));
  when(reference.getProperty("x.optimized")).thenReturn(true);
  ServiceData serviceData=new ServiceData(reference);
  CompositeData compositeData=serviceData.toCompositeData();
  assertEquals(new Long(98),compositeData.get(IDENTIFIER));
  assertEquals(new Long(34),compositeData.get(BUNDLE_IDENTIFIER));
  assertArrayEquals(new Long[]{new Long(6),new Long(9)},(Long[])compositeData.get(USING_BUNDLES));
  assertArrayEquals(interfaces,(String[])compositeData.get(OBJECT_CLASS));
  TabularData propertiesTable=(TabularData)compositeData.get(PROPERTIES);
  @SuppressWarnings("unchecked") Collection<CompositeData> propertyData=(Collection<CompositeData>)propertiesTable.values();
  assertEquals(4,propertyData.size());
  for (  CompositeData propertyRow : propertyData) {
    String key=(String)propertyRow.get(KEY);
    if (key.equals("x.vendor")) {
      assertEquals("aries",propertyRow.get(VALUE));
      assertEquals(STRING,propertyRow.get(TYPE));
    }
 else     if (key.equals("x.domain")) {
      assertEquals("test",propertyRow.get(VALUE));
      assertEquals(STRING,propertyRow.get(TYPE));
    }
 else     if (key.equals("x.index")) {
      assertEquals("67",propertyRow.get(VALUE));
      assertEquals(LONG,propertyRow.get(TYPE));
    }
 else     if (key.equals("x.optimized")) {
      assertEquals("true",propertyRow.get(VALUE));
      assertEquals(BOOLEAN,propertyRow.get(TYPE));
    }
 else {
      fail("unknown key parsed from properties");
    }
  }
}

</code></pre>

<br>
<pre class="type-4 type-12 type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFromCompositeData() throws Exception {
  Map<String,Object> items=new HashMap<String,Object>();
  items.put(IDENTIFIER,new Long(99));
  items.put(BUNDLE_IDENTIFIER,new Long(5));
  items.put(USING_BUNDLES,new Long[]{new Long(10),new Long(11)});
  items.put(OBJECT_CLASS,new String[]{"org.apache.aries.jmx.Test","org.apache.aries.jmx.Mock"});
  TabularData propertyTable=new TabularDataSupport(JmxConstants.PROPERTIES_TYPE);
  propertyTable.put(PropertyData.newInstance("a",true).toCompositeData());
  propertyTable.put(PropertyData.newInstance("b","value").toCompositeData());
  propertyTable.put(PropertyData.newInstance("c",new int[]{1,2}).toCompositeData());
  propertyTable.put(PropertyData.newInstance("d",new Long[]{new Long(3),new Long(4)}).toCompositeData());
  items.put(ServiceStateMBean.PROPERTIES,propertyTable);
  CompositeData compositeData=new CompositeDataSupport(SERVICE_TYPE,items);
  ServiceData data=ServiceData.from(compositeData);
  assertEquals(99,data.getServiceId());
  assertEquals(5,data.getBundleId());
  assertArrayEquals(new long[]{10,11},data.getUsingBundles());
  assertArrayEquals(new String[]{"org.apache.aries.jmx.Test","org.apache.aries.jmx.Mock"},data.getServiceInterfaces());
  List<PropertyData<? extends Object>> properties=data.getProperties();
  assertEquals(4,properties.size());
  for (  PropertyData<? extends Object> property : properties) {
    if (property.getKey().equals("a")) {
      assertTrue((Boolean)property.getValue());
      assertEquals(P_BOOLEAN,property.getEncodedType());
    }
 else     if (property.getKey().equals("b")) {
      assertEquals("value",property.getValue());
      assertEquals(STRING,property.getEncodedType());
    }
 else     if (property.getKey().equals("c")) {
      assertArrayEquals(new int[]{1,2},(int[])property.getValue());
      assertEquals("Array of int",property.getEncodedType());
      assertEquals("1,2",property.getEncodedValue());
    }
 else     if (property.getKey().equals("d")) {
      assertArrayEquals(new Long[]{new Long(3),new Long(4)},(Long[])property.getValue());
      assertEquals("Array of Long",property.getEncodedType());
      assertEquals("3,4",property.getEncodedValue());
    }
 else {
      fail("unknown key parsed from properties");
    }
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.BundleStateMBeanTest </h4><pre class="type-4 type-12 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings({"unchecked"}) public void testHeaderLocalization() throws Exception {
  Bundle bundleE=context().getBundleByName("org.apache.aries.jmx.test.bundlee");
  CompositeData cd=mbean.getBundle(bundleE.getBundleId());
  long id=(Long)cd.get(BundleStateMBean.IDENTIFIER);
  assertEquals("Description",mbean.getHeader(id,Constants.BUNDLE_DESCRIPTION));
  assertEquals("Description",mbean.getHeader(id,Constants.BUNDLE_DESCRIPTION,"en"));
  assertEquals("Omschrijving",mbean.getHeader(id,Constants.BUNDLE_DESCRIPTION,"nl"));
  TabularData td=mbean.getHeaders(id);
  boolean found=false;
  for (  CompositeData d : (Collection<CompositeData>)td.values()) {
    if (Constants.BUNDLE_DESCRIPTION.equals(d.get(BundleStateMBean.KEY))) {
      assertEquals("Description",d.get(BundleStateMBean.VALUE));
      found=true;
      break;
    }
  }
  assertTrue(found);
  TabularData tdNL=mbean.getHeaders(id,"nl");
  boolean foundNL=false;
  for (  CompositeData d : (Collection<CompositeData>)tdNL.values()) {
    if (Constants.BUNDLE_DESCRIPTION.equals(d.get(BundleStateMBean.KEY))) {
      assertEquals("Omschrijving",d.get(BundleStateMBean.VALUE));
      foundNL=true;
      break;
    }
  }
  assertTrue(foundNL);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMBeanInterface() throws Exception {
  String[] exports=mbean.getExportedPackages(a.getBundleId());
  assertEquals(2,exports.length);
  List<String> packages=Arrays.asList(exports);
  assertTrue(packages.contains("org.apache.aries.jmx.test.bundlea.api;2.0.0"));
  assertTrue(packages.contains("org.apache.aries.jmx.test.fragmentc;0.0.0"));
  long[] fragments=mbean.getFragments(a.getBundleId());
  assertEquals(1,fragments.length);
  assertEquals(fragc.getBundleId(),fragments[0]);
  TabularData headers=mbean.getHeaders(b.getBundleId());
  assertNotNull(headers);
  assertEquals(BundleStateMBean.HEADERS_TYPE,headers.getTabularType());
  assertTrue(headers.values().size() >= 4);
  assertEquals("org.apache.aries.jmx.test.bundleb",Header.from(headers.get(new Object[]{Constants.BUNDLE_SYMBOLICNAME})).getValue());
  long[] hosts=mbean.getHosts(fragc.getBundleId());
  assertEquals(1,hosts.length);
  assertEquals(a.getBundleId(),hosts[0]);
  String[] imports=mbean.getImportedPackages(a.getBundleId());
  assertTrue(imports.length >= 3);
  List<String> importedPackages=Arrays.asList(imports);
  Version version=getPackageVersion("org.osgi.framework");
  assertTrue(importedPackages.contains("org.osgi.framework;" + version.toString()));
  assertTrue(importedPackages.contains("org.apache.aries.jmx.test.bundleb.api;1.1.0"));
  assertTrue(mbean.getLastModified(b.getBundleId()) > 0);
  assertEquals(b.getLocation(),mbean.getLocation(b.getBundleId()));
  long[] serviceIds=mbean.getRegisteredServices(a.getBundleId());
  assertEquals(1,serviceIds.length);
  long[] required=mbean.getRequiredBundles(d.getBundleId());
  assertEquals(1,required.length);
  assertEquals(a.getBundleId(),required[0]);
  long[] requiring=mbean.getRequiringBundles(a.getBundleId());
  assertEquals(2,requiring.length);
  assertTrue(fragc.getSymbolicName(),arrayContains(fragc.getBundleId(),requiring));
  assertTrue(d.getSymbolicName(),arrayContains(d.getBundleId(),requiring));
  long[] servicesInUse=mbean.getServicesInUse(a.getBundleId());
  assertEquals(1,servicesInUse.length);
  long startLevel=mbean.getStartLevel(b.getBundleId());
  assertTrue(startLevel >= 0);
  assertEquals("ACTIVE",mbean.getState(b.getBundleId()));
  assertFalse(mbean.isFragment(b.getBundleId()));
  assertTrue(mbean.isFragment(fragc.getBundleId()));
  assertFalse(mbean.isRemovalPending(b.getBundleId()));
  assertTrue(mbean.isRequired(a.getBundleId()));
  assertTrue(mbean.isRequired(b.getBundleId()));
  TabularData bundlesTable=mbean.listBundles();
  assertNotNull(bundlesTable);
  assertEquals(BundleStateMBean.BUNDLES_TYPE,bundlesTable.getTabularType());
  assertEquals(bundleContext.getBundles().length,bundlesTable.values().size());
  final List<Notification> received=new ArrayList<Notification>();
  mbeanServer.addNotificationListener(objectName,new NotificationListener(){
    public void handleNotification(    Notification notification,    Object handback){
      received.add(notification);
    }
  }
,null,null);
  assertEquals(Bundle.ACTIVE,b.getState());
  b.stop();
  assertEquals(Bundle.RESOLVED,b.getState());
  b.start();
  assertEquals(Bundle.ACTIVE,b.getState());
  int i=0;
  while (received.size() < 2 && i < 3) {
    Thread.sleep(1000);
    i++;
  }
  assertEquals(2,received.size());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-16 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAttributeChangeNotifications() throws Exception {
  final List<AttributeChangeNotification> attributeChanges=new ArrayList<AttributeChangeNotification>();
  AttributeChangeNotificationFilter filter=new AttributeChangeNotificationFilter();
  filter.disableAllAttributes();
  filter.enableAttribute("BundleIds");
  mbeanServer.addNotificationListener(objectName,new NotificationListener(){
    public void handleNotification(    Notification notification,    Object handback){
      attributeChanges.add((AttributeChangeNotification)notification);
    }
  }
,filter,null);
  long[] idsWithout=mbean.getBundleIds();
  assertEquals("Precondition",0,attributeChanges.size());
  Manifest mf=new Manifest();
  mf.getMainAttributes().putValue("Bundle-ManifestVersion","2");
  mf.getMainAttributes().putValue("Bundle-SymbolicName","empty-test-bundle");
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  JarOutputStream jos=new JarOutputStream(baos,mf);
  jos.closeEntry();
  jos.close();
  InputStream bais=new ByteArrayInputStream(baos.toByteArray());
  Bundle bundle=bundleContext.installBundle("http://somelocation",bais);
  long[] idsWith=new long[idsWithout.length + 1];
  System.arraycopy(idsWithout,0,idsWith,0,idsWithout.length);
  idsWith[idsWith.length - 1]=bundle.getBundleId();
  Arrays.sort(idsWith);
  waitForListToReachSize(attributeChanges,1);
  assertEquals(1,attributeChanges.size());
  AttributeChangeNotification ac=attributeChanges.get(0);
  assertEquals("BundleIds",ac.getAttributeName());
  long oldSequence=ac.getSequenceNumber();
  assertTrue(Arrays.equals(idsWithout,(long[])ac.getOldValue()));
  assertTrue(Arrays.equals(idsWith,(long[])ac.getNewValue()));
  bundle.uninstall();
  waitForListToReachSize(attributeChanges,2);
  AttributeChangeNotification ac2=attributeChanges.get(1);
  assertEquals("BundleIds",ac2.getAttributeName());
  assertEquals(oldSequence + 1,ac2.getSequenceNumber());
  assertTrue(Arrays.equals(idsWith,(long[])ac2.getOldValue()));
  assertTrue(Arrays.equals(idsWithout,(long[])ac2.getNewValue()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.BundleStateTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifeCycleOfNotificationSupport() throws Exception {
  BundleContext context=mock(BundleContext.class);
  PackageAdmin admin=mock(PackageAdmin.class);
  StartLevel startLevel=mock(StartLevel.class);
  Logger logger=mock(Logger.class);
  BundleState bundleState=new BundleState(context,admin,startLevel,new StateConfig(),logger);
  MBeanServer server1=mock(MBeanServer.class);
  MBeanServer server2=mock(MBeanServer.class);
  ObjectName objectName=new ObjectName(OBJECTNAME);
  bundleState.preRegister(server1,objectName);
  bundleState.postRegister(true);
  ArgumentCaptor<BundleListener> argument=ArgumentCaptor.forClass(BundleListener.class);
  verify(context).addBundleListener(argument.capture());
  assertEquals(1,argument.getAllValues().size());
  BundleListener listener=argument.getValue();
  assertNotNull(listener);
  ExecutorService dispatcher=bundleState.getEventDispatcher();
  bundleState.preRegister(server2,objectName);
  bundleState.postRegister(true);
  argument=ArgumentCaptor.forClass(BundleListener.class);
  verify(context,atMost(1)).addBundleListener(argument.capture());
  assertEquals(1,argument.getAllValues().size());
  bundleState.postDeregister();
  verify(context,never()).removeBundleListener(listener);
  assertFalse(dispatcher.isShutdown());
  bundleState.postDeregister();
  verify(context).removeBundleListener(listener);
  assertTrue(dispatcher.isShutdown());
  dispatcher.awaitTermination(2,TimeUnit.SECONDS);
  assertTrue(dispatcher.isTerminated());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.FrameworkMBeanTest </h4><pre class="type-4 type-12 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefreshBundleAndWait() throws Exception {
  FrameworkWiring frameworkWiring=(FrameworkWiring)context().getBundle(0).adapt(FrameworkWiring.class);
  Bundle bundleA=getBundleByName("org.apache.aries.jmx.test.bundlea");
  Bundle bundleB=getBundleByName("org.apache.aries.jmx.test.bundleb");
  BundleWiring bw=(BundleWiring)bundleB.adapt(BundleWiring.class);
  List<BundleWire> initialRequiredWires=bw.getRequiredWires(BundleRevision.PACKAGE_NAMESPACE);
  assertEquals(1,initialRequiredWires.size());
  BundleWire wire=initialRequiredWires.get(0);
  Map<String,Object> capabilityAttributes=wire.getCapability().getAttributes();
  assertEquals("Precondition",bundleA.getSymbolicName(),capabilityAttributes.get(Constants.BUNDLE_SYMBOLICNAME_ATTRIBUTE));
  assertEquals("Precondition",new Version("1.0"),capabilityAttributes.get(Constants.BUNDLE_VERSION_ATTRIBUTE));
  assertEquals("Precondition","org.apache.aries.jmx.test.bundlea.api",capabilityAttributes.get(BundleRevision.PACKAGE_NAMESPACE));
  Manifest manifest=new Manifest();
  manifest.getMainAttributes().putValue("Manifest-Version","1.0");
  manifest.getMainAttributes().putValue(Constants.BUNDLE_SYMBOLICNAME,"org.apache.aries.jmx.test.bundlea");
  manifest.getMainAttributes().putValue(Constants.BUNDLE_VERSION,"1.1");
  manifest.getMainAttributes().putValue(Constants.EXPORT_PACKAGE,"org.apache.aries.jmx.test.bundlea.api,org.apache.aries.jmx.test.bundlea.impl");
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  JarOutputStream jos=new JarOutputStream(baos,manifest);
  addResourceToJar("org/apache/aries/jmx/test/bundlea/api/InterfaceA.class",jos,bundleA);
  addResourceToJar("org/apache/aries/jmx/test/bundlea/impl/A2.class",jos,bundleA);
  jos.close();
  assertEquals("Precondition",0,frameworkWiring.getRemovalPendingBundles().size());
  assertEquals(0,framework.getRemovalPendingBundles().length);
  assertEquals("Precondition",1,((BundleRevisions)bundleA.adapt(BundleRevisions.class)).getRevisions().size());
  bundleA.update(new ByteArrayInputStream(baos.toByteArray()));
  assertEquals("There should be 2 revisions now",2,((BundleRevisions)bundleA.adapt(BundleRevisions.class)).getRevisions().size());
  assertEquals("No refresh called, the bundle wiring for B should still be the old one",bw,bundleB.adapt(BundleWiring.class));
  assertEquals("Precondition",1,frameworkWiring.getRemovalPendingBundles().size());
  assertEquals(1,framework.getRemovalPendingBundles().length);
  assertEquals(((Bundle)frameworkWiring.getRemovalPendingBundles().iterator().next()).getBundleId(),framework.getRemovalPendingBundles()[0]);
  assertTrue(framework.refreshBundleAndWait(bundleB.getBundleId()));
  List<BundleWire> requiredWires=((BundleWiring)bundleB.adapt(BundleWiring.class)).getRequiredWires(BundleRevision.PACKAGE_NAMESPACE);
  assertEquals(2,requiredWires.size());
  List<String> imported=new ArrayList<String>();
  for (  BundleWire w : requiredWires) {
    Map<String,Object> ca=w.getCapability().getAttributes();
    assertEquals(bundleA.getSymbolicName(),ca.get(Constants.BUNDLE_SYMBOLICNAME_ATTRIBUTE));
    imported.add(ca.get(BundleRevision.PACKAGE_NAMESPACE).toString());
    if ("org.apache.aries.jmx.test.bundlea.impl".equals(ca.get(BundleRevision.PACKAGE_NAMESPACE))) {
      assertEquals(new Version("1.1"),ca.get(Constants.BUNDLE_VERSION_ATTRIBUTE));
    }
  }
  assertEquals(Arrays.asList("org.apache.aries.jmx.test.bundlea.api","org.apache.aries.jmx.test.bundlea.impl"),imported);
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMBeanInterface() throws IOException {
  long[] bundleIds=new long[]{1,2};
  int[] newlevels=new int[]{1,1};
  CompositeData compData=framework.setBundleStartLevels(bundleIds,newlevels);
  assertNotNull(compData);
  BatchActionResult batch2=BatchActionResult.from(compData);
  assertNotNull(batch2.getCompleted());
  assertTrue(batch2.isSuccess());
  assertNull(batch2.getError());
  assertNull(batch2.getRemainingItems());
  File file=File.createTempFile("bundletest",".jar");
  file.deleteOnExit();
  Manifest man=new Manifest();
  man.getMainAttributes().putValue("Manifest-Version","1.0");
  JarOutputStream jaros=new JarOutputStream(new FileOutputStream(file),man);
  jaros.flush();
  jaros.close();
  long bundleId=0;
  try {
    bundleId=framework.installBundleFromURL(file.getAbsolutePath(),file.toURI().toString());
  }
 catch (  Exception e) {
    fail("Installation of test bundle shouldn't fail");
  }
  try {
    framework.uninstallBundle(bundleId);
  }
 catch (  Exception e) {
    fail("Uninstallation of test bundle shouldn't fail");
  }
}

</code></pre>

<br>
<pre class="type-4 type-12 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefreshBundlesAndWait() throws Exception {
  Bundle bundleA=getBundleByName("org.apache.aries.jmx.test.bundlea");
  Bundle bundleB=getBundleByName("org.apache.aries.jmx.test.bundleb");
  BundleWiring bw=(BundleWiring)bundleB.adapt(BundleWiring.class);
  List<BundleWire> initialRequiredWires=bw.getRequiredWires(BundleRevision.PACKAGE_NAMESPACE);
  assertEquals(1,initialRequiredWires.size());
  BundleWire wire=initialRequiredWires.get(0);
  Map<String,Object> capabilityAttributes=wire.getCapability().getAttributes();
  assertEquals("Precondition",bundleA.getSymbolicName(),capabilityAttributes.get(Constants.BUNDLE_SYMBOLICNAME_ATTRIBUTE));
  assertEquals("Precondition",new Version("1.0"),capabilityAttributes.get(Constants.BUNDLE_VERSION_ATTRIBUTE));
  assertEquals("Precondition","org.apache.aries.jmx.test.bundlea.api",capabilityAttributes.get(BundleRevision.PACKAGE_NAMESPACE));
  Manifest manifest=new Manifest();
  manifest.getMainAttributes().putValue("Manifest-Version","1.0");
  manifest.getMainAttributes().putValue(Constants.BUNDLE_SYMBOLICNAME,"org.apache.aries.jmx.test.bundlea");
  manifest.getMainAttributes().putValue(Constants.BUNDLE_VERSION,"1.1");
  manifest.getMainAttributes().putValue(Constants.EXPORT_PACKAGE,"org.apache.aries.jmx.test.bundlea.api,org.apache.aries.jmx.test.bundlea.impl");
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  JarOutputStream jos=new JarOutputStream(baos,manifest);
  addResourceToJar("org/apache/aries/jmx/test/bundlea/api/InterfaceA.class",jos,bundleA);
  addResourceToJar("org/apache/aries/jmx/test/bundlea/impl/A2.class",jos,bundleA);
  jos.close();
  assertEquals("Precondition",1,((BundleRevisions)bundleA.adapt(BundleRevisions.class)).getRevisions().size());
  bundleA.update(new ByteArrayInputStream(baos.toByteArray()));
  assertEquals("There should be 2 revisions now",2,((BundleRevisions)bundleA.adapt(BundleRevisions.class)).getRevisions().size());
  assertEquals("No refresh called, the bundle wiring for B should still be the old one",bw,bundleB.adapt(BundleWiring.class));
  FrameworkMBean framework=getMBean(FrameworkMBean.OBJECTNAME,FrameworkMBean.class);
  CompositeData result=framework.refreshBundlesAndWait(new long[]{bundleB.getBundleId()});
  assertTrue((Boolean)result.get(FrameworkMBean.SUCCESS));
  assertTrue(Arrays.equals(new Long[]{bundleB.getBundleId()},(Long[])result.get(FrameworkMBean.COMPLETED)));
  List<BundleWire> requiredWires=((BundleWiring)bundleB.adapt(BundleWiring.class)).getRequiredWires(BundleRevision.PACKAGE_NAMESPACE);
  assertEquals(2,requiredWires.size());
  List<String> imported=new ArrayList<String>();
  for (  BundleWire w : requiredWires) {
    Map<String,Object> ca=w.getCapability().getAttributes();
    assertEquals(bundleA.getSymbolicName(),ca.get(Constants.BUNDLE_SYMBOLICNAME_ATTRIBUTE));
    imported.add(ca.get(BundleRevision.PACKAGE_NAMESPACE).toString());
    if ("org.apache.aries.jmx.test.bundlea.impl".equals(ca.get(BundleRevision.PACKAGE_NAMESPACE))) {
      assertEquals(new Version("1.1"),ca.get(Constants.BUNDLE_VERSION_ATTRIBUTE));
    }
  }
  assertEquals(Arrays.asList("org.apache.aries.jmx.test.bundlea.api","org.apache.aries.jmx.test.bundlea.impl"),imported);
}

</code></pre>

<br>
<pre class="type-4 type-12 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRefreshBundlesAndWait2() throws Exception {
  Bundle bundleA=getBundleByName("org.apache.aries.jmx.test.bundlea");
  Bundle bundleB=getBundleByName("org.apache.aries.jmx.test.bundleb");
  BundleWiring bw=(BundleWiring)bundleB.adapt(BundleWiring.class);
  List<BundleWire> initialRequiredWires=bw.getRequiredWires(BundleRevision.PACKAGE_NAMESPACE);
  assertEquals(1,initialRequiredWires.size());
  BundleWire wire=initialRequiredWires.get(0);
  Map<String,Object> capabilityAttributes=wire.getCapability().getAttributes();
  assertEquals("Precondition",bundleA.getSymbolicName(),capabilityAttributes.get(Constants.BUNDLE_SYMBOLICNAME_ATTRIBUTE));
  assertEquals("Precondition",new Version("1.0"),capabilityAttributes.get(Constants.BUNDLE_VERSION_ATTRIBUTE));
  assertEquals("Precondition","org.apache.aries.jmx.test.bundlea.api",capabilityAttributes.get(BundleRevision.PACKAGE_NAMESPACE));
  Manifest manifest=new Manifest();
  manifest.getMainAttributes().putValue("Manifest-Version","1.0");
  manifest.getMainAttributes().putValue(Constants.BUNDLE_SYMBOLICNAME,"org.apache.aries.jmx.test.bundlea");
  manifest.getMainAttributes().putValue(Constants.BUNDLE_VERSION,"1.1");
  manifest.getMainAttributes().putValue(Constants.EXPORT_PACKAGE,"org.apache.aries.jmx.test.bundlea.api,org.apache.aries.jmx.test.bundlea.impl");
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  JarOutputStream jos=new JarOutputStream(baos,manifest);
  addResourceToJar("org/apache/aries/jmx/test/bundlea/api/InterfaceA.class",jos,bundleA);
  addResourceToJar("org/apache/aries/jmx/test/bundlea/impl/A2.class",jos,bundleA);
  jos.close();
  assertEquals("Precondition",1,((BundleRevisions)bundleA.adapt(BundleRevisions.class)).getRevisions().size());
  bundleA.update(new ByteArrayInputStream(baos.toByteArray()));
  assertEquals("There should be 2 revisions now",2,((BundleRevisions)bundleA.adapt(BundleRevisions.class)).getRevisions().size());
  assertEquals("No refresh called, the bundle wiring for B should still be the old one",bw,((BundleWiring)bundleB.adapt(BundleWiring.class)));
  FrameworkMBean framework=getMBean(FrameworkMBean.OBJECTNAME,FrameworkMBean.class);
  CompositeData result=framework.refreshBundlesAndWait(null);
  Set<Long> completed=new HashSet<Long>(Arrays.asList((Long[])result.get(FrameworkMBean.COMPLETED)));
  assertTrue(completed.contains(bundleA.getBundleId()));
  assertTrue(completed.contains(bundleB.getBundleId()));
  List<BundleWire> requiredWires=((BundleWiring)bundleB.adapt(BundleWiring.class)).getRequiredWires(BundleRevision.PACKAGE_NAMESPACE);
  assertEquals(2,requiredWires.size());
  List<String> imported=new ArrayList<String>();
  for (  BundleWire w : requiredWires) {
    Map<String,Object> ca=w.getCapability().getAttributes();
    assertEquals(bundleA.getSymbolicName(),ca.get(Constants.BUNDLE_SYMBOLICNAME_ATTRIBUTE));
    imported.add(ca.get(BundleRevision.PACKAGE_NAMESPACE).toString());
    if ("org.apache.aries.jmx.test.bundlea.impl".equals(ca.get(BundleRevision.PACKAGE_NAMESPACE))) {
      assertEquals(new Version("1.1"),ca.get(Constants.BUNDLE_VERSION_ATTRIBUTE));
    }
  }
  assertEquals(Arrays.asList("org.apache.aries.jmx.test.bundlea.api","org.apache.aries.jmx.test.bundlea.impl"),imported);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.FrameworkTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallBundlesFromURL() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.installBundle(Mockito.anyString(),Mockito.any(InputStream.class))).thenReturn(bundle);
  Mockito.when(bundle.getBundleId()).thenReturn(Long.valueOf(2));
  Framework spiedMBean=Mockito.spy(mbean);
  InputStream stream=Mockito.mock(InputStream.class);
  Mockito.doReturn(stream).when(spiedMBean).createStream(Mockito.anyString());
  CompositeData data=spiedMBean.installBundlesFromURL(new String[]{"file:test.jar"},new String[]{"test.jar"});
  Assert.assertNotNull(data);
  BatchInstallResult batch=BatchInstallResult.from(data);
  Assert.assertEquals(2,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingLocationItems());
  Mockito.reset(context);
  Mockito.when(spiedMBean.createStream(Mockito.anyString())).thenReturn(stream);
  Mockito.when(context.installBundle(Mockito.anyString(),Mockito.any(InputStream.class))).thenThrow(new BundleException("location doesn't exist"));
  CompositeData data2=spiedMBean.installBundlesFromURL(new String[]{"file:test.jar"},new String[]{"test.jar"});
  BatchInstallResult batch2=BatchInstallResult.from(data2);
  Assert.assertNotNull(batch2);
  Assert.assertNotNull(batch2.getCompleted());
  Assert.assertEquals(0,batch2.getCompleted().length);
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertEquals("file:test.jar",batch2.getBundleInError());
  Assert.assertNotNull(batch2.getRemainingLocationItems());
  Assert.assertEquals(0,batch2.getRemainingLocationItems().length);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStartBundles() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(5)).thenReturn(bundle);
  CompositeData data=mbean.startBundles(new long[]{5});
  Mockito.verify(bundle).start();
  BatchActionResult batch=BatchActionResult.from(data);
  Assert.assertEquals(5,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingItems());
  CompositeData data2=mbean.startBundles(null);
  BatchActionResult batch2=BatchActionResult.from(data2);
  Assert.assertNull(batch2.getCompleted());
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNull(batch2.getRemainingItems());
}

</code></pre>

<br>
<pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallBundle() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.installBundle("file:test.jar")).thenReturn(bundle);
  Mockito.when(bundle.getBundleId()).thenReturn(Long.valueOf(2));
  long bundleId=mbean.installBundle("file:test.jar");
  Assert.assertEquals(2,bundleId);
  Mockito.reset(context);
  Mockito.when(context.installBundle("file:test2.jar")).thenThrow(new BundleException("location doesn't exist"));
  try {
    mbean.installBundle("file:test2.jar");
    Assert.fail("Shouldn't go to this stage, location doesn't exist");
  }
 catch (  IOException e) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateBundlesFromURL() throws Exception {
  Framework spiedMBean=Mockito.spy(mbean);
  InputStream stream=Mockito.mock(InputStream.class);
  Mockito.doReturn(stream).when(spiedMBean).createStream(Mockito.anyString());
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(5)).thenReturn(bundle);
  CompositeData data=spiedMBean.updateBundlesFromURL(new long[]{5},new String[]{"file:test.jar"});
  Mockito.verify(bundle).update(stream);
  BatchActionResult batch=BatchActionResult.from(data);
  Assert.assertEquals(5,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingItems());
  CompositeData data2=spiedMBean.updateBundlesFromURL(new long[]{2,4},new String[]{"file:test.jar"});
  BatchActionResult batch2=BatchActionResult.from(data2);
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNull(batch2.getRemainingItems());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallBundles() throws Exception {
  String[] locations=new String[]{"file:test.jar"};
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.installBundle("file:test.jar")).thenReturn(bundle);
  Mockito.when(bundle.getBundleId()).thenReturn(Long.valueOf(2));
  CompositeData data=mbean.installBundles(locations);
  BatchInstallResult batch=BatchInstallResult.from(data);
  Assert.assertNotNull(batch);
  Assert.assertEquals(2,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingLocationItems());
  Mockito.reset(context);
  Mockito.when(context.installBundle("file:test.jar")).thenThrow(new BundleException("location doesn't exist"));
  CompositeData data2=mbean.installBundles(locations);
  BatchInstallResult batch2=BatchInstallResult.from(data2);
  Assert.assertNotNull(batch2);
  Assert.assertNotNull(batch2.getCompleted());
  Assert.assertEquals(0,batch2.getCompleted().length);
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertEquals("file:test.jar",batch2.getBundleInError());
  Assert.assertNotNull(batch2.getRemainingLocationItems());
  Assert.assertEquals(0,batch2.getRemainingLocationItems().length);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSetBundleStartLevels() throws IOException {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(2)).thenReturn(bundle);
  CompositeData data=mbean.setBundleStartLevels(new long[]{2},new int[]{2});
  Mockito.verify(startLevel).setBundleStartLevel(bundle,2);
  BatchActionResult batch=BatchActionResult.from(data);
  Assert.assertEquals(2,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingItems());
  CompositeData data2=mbean.setBundleStartLevels(new long[]{2},new int[]{2,4});
  BatchActionResult batch2=BatchActionResult.from(data2);
  Assert.assertNull(batch2.getCompleted());
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNull(batch2.getRemainingItems());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUpdateBundles() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(5)).thenReturn(bundle);
  CompositeData data=mbean.updateBundles(new long[]{5});
  Mockito.verify(bundle).update();
  BatchActionResult batch=BatchActionResult.from(data);
  Assert.assertEquals(5,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingItems());
  CompositeData data2=mbean.updateBundles(null);
  BatchActionResult batch2=BatchActionResult.from(data2);
  Assert.assertNull(batch2.getCompleted());
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNull(batch2.getRemainingItems());
  Mockito.reset(bundle);
  CompositeData data3=mbean.updateBundles(new long[]{6});
  Mockito.when(context.getBundle(6)).thenReturn(bundle);
  Mockito.doThrow(new BundleException("")).when(bundle).update();
  BatchActionResult batch3=BatchActionResult.from(data3);
  Assert.assertEquals(0,batch3.getCompleted().length);
  Assert.assertFalse(batch3.isSuccess());
  Assert.assertNotNull(batch3.getError());
  Assert.assertEquals(6,batch3.getBundleInError());
  Bundle bundle6=Mockito.mock(Bundle.class);
  Bundle bundle8=Mockito.mock(Bundle.class);
  Bundle bundle7=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(6)).thenReturn(bundle6);
  Mockito.when(context.getBundle(8)).thenReturn(bundle8);
  Mockito.when(context.getBundle(7)).thenReturn(bundle7);
  Mockito.doThrow(new BundleException("")).when(bundle8).update();
  CompositeData data4=mbean.updateBundles(new long[]{6,8,7});
  BatchActionResult batch4=BatchActionResult.from(data4);
  Mockito.verify(bundle6).update();
  Assert.assertEquals(1,batch4.getCompleted().length);
  Assert.assertEquals(6,batch4.getCompleted()[0]);
  Assert.assertFalse(batch4.isSuccess());
  Assert.assertNotNull(batch4.getError());
  Assert.assertEquals(8,batch4.getBundleInError());
  Assert.assertEquals(1,batch4.getRemainingItems().length);
  Assert.assertEquals(7,batch4.getRemainingItems()[0]);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testUninstallBundles() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(5)).thenReturn(bundle);
  CompositeData data=mbean.uninstallBundles(new long[]{5});
  Mockito.verify(bundle).uninstall();
  BatchActionResult batch=BatchActionResult.from(data);
  Assert.assertEquals(5,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingItems());
  CompositeData data2=mbean.uninstallBundles(null);
  BatchActionResult batch2=BatchActionResult.from(data2);
  Assert.assertNull(batch2.getCompleted());
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNull(batch2.getRemainingItems());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallBundleFromURL() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.installBundle(Mockito.anyString(),Mockito.any(InputStream.class))).thenReturn(bundle);
  Mockito.when(bundle.getBundleId()).thenReturn(Long.valueOf(2));
  Framework spiedMBean=Mockito.spy(mbean);
  InputStream stream=Mockito.mock(InputStream.class);
  Mockito.doReturn(stream).when(spiedMBean).createStream("test.jar");
  long bundleId=spiedMBean.installBundleFromURL("file:test.jar","test.jar");
  Assert.assertEquals(2,bundleId);
  Mockito.reset(context);
  Mockito.doReturn(stream).when(spiedMBean).createStream(Mockito.anyString());
  Mockito.when(context.installBundle(Mockito.anyString(),Mockito.any(InputStream.class))).thenThrow(new BundleException("location doesn't exist"));
  try {
    spiedMBean.installBundleFromURL("file:test2.jar","test.jar");
    Assert.fail("Shouldn't go to this stage, location doesn't exist");
  }
 catch (  IOException e) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testStopBundles() throws Exception {
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(context.getBundle(5)).thenReturn(bundle);
  CompositeData data=mbean.stopBundles(new long[]{5});
  Mockito.verify(bundle).stop();
  BatchActionResult batch=BatchActionResult.from(data);
  Assert.assertEquals(5,batch.getCompleted()[0]);
  Assert.assertTrue(batch.isSuccess());
  Assert.assertNull(batch.getError());
  Assert.assertNull(batch.getRemainingItems());
  CompositeData data2=mbean.stopBundles(null);
  BatchActionResult batch2=BatchActionResult.from(data2);
  Assert.assertNull(batch2.getCompleted());
  Assert.assertFalse(batch2.isSuccess());
  Assert.assertNotNull(batch2.getError());
  Assert.assertNull(batch2.getRemainingItems());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.PackageStateMBeanTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMBeanInterface() throws IOException {
  PackageStateMBean packagaState=getMBean(PackageStateMBean.OBJECTNAME,PackageStateMBean.class);
  assertNotNull(packagaState);
  long[] exportingBundles=packagaState.getExportingBundles("org.osgi.jmx.framework","1.7.0");
  assertNotNull(exportingBundles);
  assertTrue("Should find a bundle exporting org.osgi.jmx.framework",exportingBundles.length > 0);
  long[] exportingBundles2=packagaState.getExportingBundles("test","1.0.0");
  assertNull("Shouldn't find a bundle exporting test package",exportingBundles2);
  long[] importingBundlesId=packagaState.getImportingBundles("org.osgi.jmx.framework","1.7.0",exportingBundles[0]);
  assertTrue("Should find bundles importing org.osgi.jmx.framework",importingBundlesId.length > 0);
  TabularData table=packagaState.listPackages();
  assertNotNull("TabularData containing CompositeData with packages info shouldn't be null",table);
  assertEquals("TabularData should be a type PACKAGES",PackageStateMBean.PACKAGES_TYPE,table.getTabularType());
  Collection<?> colData=table.values();
  assertNotNull("Collection of CompositeData shouldn't be null",colData);
  assertFalse("Collection of CompositeData should contain elements",colData.isEmpty());
  boolean isRemovalPending=packagaState.isRemovalPending("org.osgi.jmx.framework","1.7.0",exportingBundles[0]);
  assertFalse("Should removal pending on org.osgi.jmx.framework be false",isRemovalPending);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.PackageStateTest </h4><pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetExportingBundles() throws IOException {
  ExportedPackage exported=Mockito.mock(ExportedPackage.class);
  Bundle bundle=Mockito.mock(Bundle.class);
  Mockito.when(exported.getVersion()).thenReturn(Version.parseVersion("1.0.0"));
  Mockito.when(exported.getExportingBundle()).thenReturn(bundle);
  Mockito.when(bundle.getBundleId()).thenReturn(Long.valueOf(5));
  ExportedPackage exported2=Mockito.mock(ExportedPackage.class);
  Bundle bundle2=Mockito.mock(Bundle.class);
  Mockito.when(exported2.getVersion()).thenReturn(Version.parseVersion("1.0.0"));
  Mockito.when(exported2.getExportingBundle()).thenReturn(bundle2);
  Mockito.when(bundle2.getBundleId()).thenReturn(Long.valueOf(6));
  Mockito.when(admin.getExportedPackages(Mockito.anyString())).thenReturn(new ExportedPackage[]{exported,exported2});
  long[] ids=mbean.getExportingBundles("test","1.0.0");
  Assert.assertNotNull(ids);
  Assert.assertArrayEquals(new long[]{5,6},ids);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.ServiceStateMBeanTest </h4><pre class="type-4 type-9 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void doSetUp(){
  waitForMBean(ServiceStateMBean.OBJECTNAME);
  objectName=waitForMBean(ServiceStateMBean.OBJECTNAME);
  mbean=getMBean(objectName,ServiceStateMBean.class);
  assertNotNull(mbean);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetServiceAndGetProperty() throws Exception {
  ServiceReference sref=bundleContext.getServiceReference(InterfaceA.class);
  context().getService(sref);
  Long serviceID=(Long)sref.getProperty(Constants.SERVICE_ID);
  CompositeData svcData=mbean.getService(serviceID);
  assertEquals(serviceID,svcData.get(ServiceStateMBean.IDENTIFIER));
  assertEquals(sref.getBundle().getBundleId(),svcData.get(ServiceStateMBean.BUNDLE_IDENTIFIER));
  Set<String> expectedClasses=new HashSet<String>(Arrays.asList(InterfaceA.class.getName(),ManagedService.class.getName()));
  Set<String> actualClasses=new HashSet<String>(Arrays.asList((String[])svcData.get(ServiceStateMBean.OBJECT_CLASS)));
  assertEquals(expectedClasses,actualClasses);
  Bundle[] ub=sref.getUsingBundles();
  assertEquals("Precondition",1,ub.length);
  assertTrue(Arrays.equals(new Long[]{ub[0].getBundleId()},(Long[])svcData.get("UsingBundles")));
  String pid=(String)sref.getProperty(Constants.SERVICE_PID);
  CompositeData pidData=mbean.getProperty(serviceID,Constants.SERVICE_PID);
  assertEquals(pid,pidData.get("Value"));
  assertEquals("String",pidData.get("Type"));
  CompositeData idData=mbean.getProperty(serviceID,Constants.SERVICE_ID);
  assertEquals("" + serviceID,idData.get("Value"));
  assertEquals("Long",idData.get("Type"));
  CompositeData ocData=mbean.getProperty(serviceID,Constants.OBJECTCLASS);
  String form1=InterfaceA.class.getName() + "," + ManagedService.class.getName();
  String form2=ManagedService.class.getName() + "," + InterfaceA.class.getName();
  assertTrue(ocData.get("Value").equals(form1) || ocData.get("Value").equals(form2));
  assertEquals("Array of String",ocData.get("Type"));
  context().ungetService(sref);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMBeanInterface() throws Exception {
  Bundle a=getBundleByName("org.apache.aries.jmx.test.bundlea");
  assertBundleStarted(a);
  Bundle b=getBundleByName("org.apache.aries.jmx.test.bundleb");
  assertBundleStarted(b);
  ServiceReference refA=bundleContext.getServiceReference(InterfaceA.class.getName());
  assertNotNull(refA);
  long serviceAId=(Long)refA.getProperty(Constants.SERVICE_ID);
  assertTrue(serviceAId > -1);
  ServiceReference refB=bundleContext.getServiceReference(InterfaceB.class.getName());
  assertNotNull(refB);
  long serviceBId=(Long)refB.getProperty(Constants.SERVICE_ID);
  assertTrue(serviceBId > -1);
  ServiceReference[] refs=bundleContext.getServiceReferences(ManagedServiceFactory.class.getName(),"(" + Constants.SERVICE_PID + "=jmx.test.B.factory)");
  assertNotNull(refs);
  assertEquals(1,refs.length);
  ServiceReference msf=refs[0];
  assertEquals(a.getBundleId(),mbean.getBundleIdentifier(serviceAId));
  String[] objectClass=mbean.getObjectClass(serviceAId);
  assertEquals(2,objectClass.length);
  List<String> classNames=Arrays.asList(objectClass);
  assertTrue(classNames.contains(InterfaceA.class.getName()));
  assertTrue(classNames.contains(ManagedService.class.getName()));
  TabularData serviceProperties=mbean.getProperties(serviceBId);
  assertNotNull(serviceProperties);
  assertEquals(JmxConstants.PROPERTIES_TYPE,serviceProperties.getTabularType());
  assertTrue(serviceProperties.values().size() > 1);
  assertEquals("org.apache.aries.jmx.test.ServiceB",PropertyData.from(serviceProperties.get(new Object[]{Constants.SERVICE_PID})).getValue());
  long[] usingBundles=mbean.getUsingBundles(serviceBId);
  assertEquals(1,usingBundles.length);
  assertEquals(a.getBundleId(),usingBundles[0]);
  ServiceReference[] allSvsRefs=bundleContext.getAllServiceReferences(null,null);
  TabularData allServices=mbean.listServices();
  assertNotNull(allServices);
  assertEquals(allSvsRefs.length,allServices.values().size());
  final List<Notification> received=new ArrayList<Notification>();
  final List<AttributeChangeNotification> attributeChanges=new ArrayList<AttributeChangeNotification>();
  mbeanServer.addNotificationListener(objectName,new NotificationListener(){
    public void handleNotification(    Notification notification,    Object handback){
      if (notification instanceof AttributeChangeNotification) {
        attributeChanges.add((AttributeChangeNotification)notification);
      }
 else {
        received.add(notification);
      }
    }
  }
,null,null);
  assertNotNull(refB);
  assertNotNull(msf);
  b.stop();
  refB=bundleContext.getServiceReference(InterfaceB.class.getName());
  refs=bundleContext.getServiceReferences(ManagedServiceFactory.class.getName(),"(" + Constants.SERVICE_PID + "=jmx.test.B.factory)");
  assertNull(refs);
  assertNull(refB);
  b.start();
  refB=bundleContext.getServiceReference(InterfaceB.class.getName());
  refs=bundleContext.getServiceReferences(ManagedServiceFactory.class.getName(),"(" + Constants.SERVICE_PID + "=jmx.test.B.factory)");
  assertNotNull(refB);
  assertNotNull(refs);
  assertEquals(1,refs.length);
  waitForListToReachSize(received,4);
  assertEquals(4,received.size());
  assertEquals(4,attributeChanges.size());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-16 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAttributeChangeNotifications() throws Exception {
  final List<AttributeChangeNotification> attributeChanges=new ArrayList<AttributeChangeNotification>();
  mbeanServer.addNotificationListener(objectName,new NotificationListener(){
    public void handleNotification(    Notification notification,    Object handback){
      if (notification instanceof AttributeChangeNotification) {
        attributeChanges.add((AttributeChangeNotification)notification);
      }
    }
  }
,null,null);
  assertEquals("Precondition",0,attributeChanges.size());
  long[] idsWithout=mbean.getServiceIds();
  String svc="A String Service";
  ServiceRegistration reg=bundleContext.registerService(String.class.getName(),svc,null);
  long id=(Long)reg.getReference().getProperty(Constants.SERVICE_ID);
  long[] idsWith=new long[idsWithout.length + 1];
  System.arraycopy(idsWithout,0,idsWith,0,idsWithout.length);
  idsWith[idsWith.length - 1]=id;
  Arrays.sort(idsWith);
  waitForListToReachSize(attributeChanges,1);
  AttributeChangeNotification ac=attributeChanges.get(0);
  assertEquals("ServiceIds",ac.getAttributeName());
  long seq1=ac.getSequenceNumber();
  assertTrue(Arrays.equals(idsWithout,(long[])ac.getOldValue()));
  assertTrue(Arrays.equals(idsWith,(long[])ac.getNewValue()));
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put("somekey","someval");
  reg.setProperties(props);
  Thread.sleep(500);
  assertEquals("Changing the service registration should not cause an attribute notification",1,attributeChanges.size());
  reg.unregister();
  waitForListToReachSize(attributeChanges,2);
  AttributeChangeNotification ac2=attributeChanges.get(1);
  assertEquals("ServiceIds",ac2.getAttributeName());
  assertEquals(seq1 + 1,ac2.getSequenceNumber());
  assertTrue(Arrays.equals(idsWith,(long[])ac2.getOldValue()));
  assertTrue(Arrays.equals(idsWithout,(long[])ac2.getNewValue()));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testListServicesSelectiveItems() throws Exception {
  String filter="(|(service.pid=org.apache.aries.jmx.test.ServiceB)(service.pid=jmx.test.B.factory))";
  ServiceReference[] refs=bundleContext.getAllServiceReferences(null,filter);
  TabularData svcData=mbean.listServices(null,filter,ServiceStateMBean.BUNDLE_IDENTIFIER);
  assertEquals(refs.length,svcData.size());
  long id=refs[0].getBundle().getBundleId();
  for (  ServiceReference ref : refs) {
    assertEquals("Precondition",id,ref.getBundle().getBundleId());
  }
  for (  CompositeData cd : new ArrayList<CompositeData>((Collection<CompositeData>)svcData.values())) {
    assertEquals(id,cd.get(ServiceStateMBean.BUNDLE_IDENTIFIER));
    assertNotNull(cd.get(ServiceStateMBean.IDENTIFIER));
    assertNull(cd.get(ServiceStateMBean.OBJECT_CLASS));
    assertNull(cd.get(ServiceStateMBean.USING_BUNDLES));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.framework.ServiceStateTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLifeCycleOfNotificationSupport() throws Exception {
  BundleContext context=mock(BundleContext.class);
  Logger logger=mock(Logger.class);
  ServiceState serviceState=new ServiceState(context,new StateConfig(),logger);
  MBeanServer server1=mock(MBeanServer.class);
  MBeanServer server2=mock(MBeanServer.class);
  ObjectName objectName=new ObjectName(OBJECTNAME);
  serviceState.preRegister(server1,objectName);
  serviceState.postRegister(true);
  ArgumentCaptor<AllServiceListener> argument=ArgumentCaptor.forClass(AllServiceListener.class);
  verify(context).addServiceListener(argument.capture());
  AllServiceListener serviceListener=argument.getValue();
  assertNotNull(serviceListener);
  ExecutorService dispatcher=serviceState.getEventDispatcher();
  serviceState.preRegister(server2,objectName);
  serviceState.postRegister(true);
  argument=ArgumentCaptor.forClass(AllServiceListener.class);
  verify(context,atMost(1)).addServiceListener(argument.capture());
  assertEquals(1,argument.getAllValues().size());
  serviceState.postDeregister();
  verify(context,never()).removeServiceListener(serviceListener);
  assertFalse(dispatcher.isShutdown());
  serviceState.postDeregister();
  verify(context).removeServiceListener(serviceListener);
  assertTrue(dispatcher.isShutdown());
  dispatcher.awaitTermination(2,TimeUnit.SECONDS);
  assertTrue(dispatcher.isTerminated());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.permissionadmin.PermissionAdminMBeanTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMBeanInterface() throws IOException {
  PermissionAdminMBean mBean=getMBean(PermissionAdminMBean.OBJECTNAME,PermissionAdminMBean.class);
  PermissionAdmin permAdminService=context().getService(PermissionAdmin.class);
  assertNotNull(permAdminService);
  String[] serviceLocation=permAdminService.getLocations();
  String[] mBeanLocations=mBean.listLocations();
  assertArrayEquals(serviceLocation,mBeanLocations);
  PermissionInfo defPerm=new PermissionInfo("AllPermission","*","*");
  permAdminService.setDefaultPermissions(new PermissionInfo[]{defPerm});
  PermissionInfo[] permissions=permAdminService.getDefaultPermissions();
  assertNotNull(permissions);
  String[] encoded=toEncodedPerm(permissions);
  String[] mBeanDefPermissions=mBean.listDefaultPermissions();
  assertArrayEquals(encoded,mBeanDefPermissions);
  Bundle a=context().getBundleByName("org.apache.aries.jmx.test.bundlea");
  assertNotNull(a);
  String location=a.getLocation();
  PermissionInfo bundleaPerm=new PermissionInfo("ServicePermission","ServiceA","GET");
  mBean.setPermissions(location,new String[]{bundleaPerm.getEncoded()});
  String[] serviceBundleaPerm=toEncodedPerm(permAdminService.getPermissions(location));
  String[] mBeanBundleaPerm=mBean.getPermissions(location);
  assertNotNull(mBeanBundleaPerm);
  assertArrayEquals(serviceBundleaPerm,mBeanBundleaPerm);
  PermissionInfo defaultPerm=new PermissionInfo("AllPermission","*","GET");
  mBean.setDefaultPermissions(new String[]{defaultPerm.getEncoded()});
  String[] serviceDefaultPerm=toEncodedPerm(permAdminService.getDefaultPermissions());
  String[] mBeanDefaultPerm=mBean.listDefaultPermissions();
  assertNotNull(mBeanDefaultPerm);
  assertArrayEquals(serviceDefaultPerm,mBeanDefaultPerm);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.permissionadmin.PermissionAdminTest </h4><pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testGetPermissions() throws IOException {
  PermissionInfo info=new PermissionInfo("Admin","test","get");
  PermissionInfo[] permInfos=new PermissionInfo[]{info,info};
  Mockito.when(permAdmin.getPermissions(Mockito.anyString())).thenReturn(permInfos);
  String[] permissions=mbean.getPermissions("test");
  Assert.assertNotNull(permissions);
  Assert.assertEquals(2,permissions.length);
  Assert.assertArrayEquals("Checks encoded permissions",new String[]{info.getEncoded(),info.getEncoded()},permissions);
  Mockito.reset(permAdmin);
  Mockito.when(permAdmin.getPermissions(Mockito.anyString())).thenReturn(null);
  String[] permissions2=mbean.getPermissions("test");
  Assert.assertNull(permissions2);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListLocations() throws IOException {
  String[] locations1=new String[]{"test1","test2"};
  Mockito.when(permAdmin.getLocations()).thenReturn(locations1);
  String[] locations2=mbean.listLocations();
  Assert.assertNotNull(locations2);
  Assert.assertEquals(2,locations2.length);
  Assert.assertSame(locations1,locations2);
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListDefaultPermissions() throws IOException {
  PermissionInfo info=new PermissionInfo("Admin","test","get");
  PermissionInfo[] permInfos=new PermissionInfo[]{info,info};
  Mockito.when(permAdmin.getDefaultPermissions()).thenReturn(permInfos);
  String[] permissions=mbean.listDefaultPermissions();
  Assert.assertNotNull(permissions);
  Assert.assertEquals(2,permissions.length);
  Assert.assertArrayEquals("Checks encoded default permissions",new String[]{info.getEncoded(),info.getEncoded()},permissions);
  Mockito.reset(permAdmin);
  Mockito.when(permAdmin.getDefaultPermissions()).thenReturn(null);
  String[] permissions2=mbean.listDefaultPermissions();
  Assert.assertNull(permissions2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.provisioning.ProvisioningServiceMBeanTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Ignore("For now.. Cannot find public repo for org.eclipse.equinox.ip") @Test @SuppressWarnings({"unchecked"}) public void testMBeanInterface() throws Exception {
  ProvisioningServiceMBean mbean=getMBean(ProvisioningServiceMBean.OBJECTNAME,ProvisioningServiceMBean.class);
  Dictionary<String,Object> info;
  File provZip=createProvAgentConfigZip();
  mbean.addInformationFromZip(provZip.toURI().toURL().toExternalForm());
  info=ps.getInformation();
  assertNotNull(info);
  assertTrue(info.size() >= 1);
  assertProvAgentConfigCorrect(info);
  TabularData data=mbean.listInformation();
  assertNotNull(data);
  assertEquals(JmxConstants.PROPERTIES_TYPE,data.getTabularType());
  assertTrue(data.values().size() >= 1);
  PropertyData<byte[]> configEntry=PropertyData.from(data.get(new Object[]{PROVISIONING_AGENT_CONFIG}));
  assertNotNull(configEntry);
  assertArrayEquals(new byte[]{10,20,30},configEntry.getValue());
  PropertyData<String> reference=PropertyData.newInstance(PROVISIONING_REFERENCE,"rsh://0.0.0.0/provX");
  data.put(reference.toCompositeData());
  mbean.addInformation(data);
  info=ps.getInformation();
  assertNotNull(info);
  assertTrue(info.size() >= 2);
  assertProvAgentConfigCorrect(info);
  String ref=(String)info.get(PROVISIONING_REFERENCE);
  assertNotNull(ref);
  assertEquals("rsh://0.0.0.0/provX",ref);
  data.clear();
  PropertyData<String> newRef=PropertyData.newInstance(PROVISIONING_REFERENCE,"rsh://0.0.0.0/newProvRef");
  data.put(newRef.toCompositeData());
  mbean.setInformation(data);
  info=ps.getInformation();
  assertNotNull(info);
  assertTrue(info.size() >= 1);
  assertNull(info.get(PROVISIONING_AGENT_CONFIG));
  ref=(String)info.get(PROVISIONING_REFERENCE);
  assertNotNull(ref);
  assertEquals("rsh://0.0.0.0/newProvRef",ref);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.provisioning.ProvisioningServiceTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testListInformation() throws Exception {
  org.osgi.service.provisioning.ProvisioningService provService=mock(org.osgi.service.provisioning.ProvisioningService.class);
  ProvisioningService mbean=new ProvisioningService(provService);
  Dictionary<String,Object> info=new Hashtable<String,Object>();
  info.put(PROVISIONING_AGENT_CONFIG,new byte[]{20,30,40});
  info.put(PROVISIONING_SPID,"x.test");
  info.put(PROVISIONING_REFERENCE,"rsh://0.0.0.0/provX");
  info.put(PROVISIONING_RSH_SECRET,new byte[]{15,25,35});
  info.put(PROVISIONING_UPDATE_COUNT,1);
  when(provService.getInformation()).thenReturn(info);
  TabularData provData=mbean.listInformation();
  assertNotNull(provData);
  assertEquals(PROPERTIES_TYPE,provData.getTabularType());
  assertEquals(5,provData.values().size());
  PropertyData<byte[]> agentConfig=PropertyData.from(provData.get(new Object[]{PROVISIONING_AGENT_CONFIG}));
  assertArrayEquals(new byte[]{20,30,40},agentConfig.getValue());
  PropertyData<String> spid=PropertyData.from(provData.get(new Object[]{PROVISIONING_SPID}));
  assertEquals("x.test",spid.getValue());
  PropertyData<String> ref=PropertyData.from(provData.get(new Object[]{PROVISIONING_REFERENCE}));
  assertEquals("rsh://0.0.0.0/provX",ref.getValue());
  PropertyData<byte[]> sec=PropertyData.from(provData.get(new Object[]{PROVISIONING_RSH_SECRET}));
  assertArrayEquals(new byte[]{15,25,35},sec.getValue());
  PropertyData<Integer> count=PropertyData.from(provData.get(new Object[]{PROVISIONING_UPDATE_COUNT}));
  assertEquals(new Integer(1),count.getValue());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.useradmin.UserAdminTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#getAuthorization(java.lang.String)}.
 * @throws IOException
 */
@Test public void testGetAuthorization() throws IOException {
  Authorization auth=Mockito.mock(Authorization.class);
  User user=Mockito.mock(User.class);
  Mockito.when(user.getType()).thenReturn(Role.USER);
  Mockito.when(userAdmin.getAuthorization(user)).thenReturn(auth);
  Mockito.when(userAdmin.getRole("role1")).thenReturn(user);
  Mockito.when(auth.getName()).thenReturn("auth1");
  Mockito.when(auth.getRoles()).thenReturn(new String[]{"role1"});
  CompositeData data=mbean.getAuthorization("role1");
  Assert.assertNotNull(data);
  AuthorizationData authData=AuthorizationData.from(data);
  Assert.assertNotNull(authData);
  Assert.assertEquals("auth1",authData.getName());
  Assert.assertArrayEquals(new String[]{"role1"},authData.getRoles());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#getRole(java.lang.String)}.
 * @throws IOException
 */
@Test public void testGetRole() throws IOException {
  User user1=Mockito.mock(User.class);
  Mockito.when(user1.getType()).thenReturn(Role.USER);
  Mockito.when(user1.getName()).thenReturn("user1");
  Mockito.when(userAdmin.getRole(Mockito.anyString())).thenReturn(user1);
  CompositeData data=mbean.getRole("user1");
  Assert.assertNotNull(data);
  RoleData role=RoleData.from(data);
  Assert.assertNotNull(role);
  Assert.assertEquals("user1",role.getName());
  Assert.assertEquals(Role.USER,role.getType());
  Mockito.verify(userAdmin).getRole(Mockito.anyString());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#getGroup(java.lang.String)}.
 * @throws IOException
 */
@Test public void testGetGroup() throws IOException {
  Group group1=Mockito.mock(Group.class);
  Mockito.when(group1.getType()).thenReturn(Role.GROUP);
  Mockito.when(group1.getName()).thenReturn("group1");
  Role role1=Mockito.mock(Role.class);
  Mockito.when(role1.getName()).thenReturn("role1");
  Role role2=Mockito.mock(Role.class);
  Mockito.when(role2.getName()).thenReturn("role2");
  Mockito.when(group1.getRequiredMembers()).thenReturn(new Role[]{role1});
  Mockito.when(group1.getMembers()).thenReturn(new Role[]{role2});
  Mockito.when(userAdmin.getRole(Mockito.anyString())).thenReturn(group1);
  CompositeData data=mbean.getGroup("group1");
  Assert.assertNotNull(data);
  GroupData group=GroupData.from(data);
  Assert.assertNotNull(group);
  Assert.assertEquals("group1",group.getName());
  Assert.assertEquals(Role.GROUP,group.getType());
  Assert.assertArrayEquals(new String[]{"role2"},group.getMembers());
  Assert.assertArrayEquals(new String[]{"role1"},group.getRequiredMembers());
  Mockito.verify(userAdmin).getRole(Mockito.anyString());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#getProperties(java.lang.String)}.
 * @throws IOException
 */
@Test public void testGetProperties() throws IOException {
  User user1=Mockito.mock(User.class);
  Dictionary<String,Object> properties=new Hashtable<String,Object>();
  properties.put("key","value");
  Mockito.when(user1.getProperties()).thenReturn(properties);
  Mockito.when(userAdmin.getRole(Mockito.anyString())).thenReturn(user1);
  TabularData data=mbean.getProperties("user1");
  Assert.assertNotNull(data);
  Assert.assertEquals(JmxConstants.PROPERTIES_TYPE,data.getTabularType());
  CompositeData composite=data.get(new Object[]{"key"});
  Assert.assertNotNull(composite);
  Assert.assertEquals("key",(String)composite.get(JmxConstants.KEY));
  Assert.assertEquals("value",(String)composite.get(JmxConstants.VALUE));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#getUser(java.lang.String)}.
 * @throws IOException
 */
@Test public void testGetUser() throws IOException {
  User user1=Mockito.mock(User.class);
  Mockito.when(user1.getType()).thenReturn(Role.USER);
  Mockito.when(user1.getName()).thenReturn("user1");
  Mockito.when(userAdmin.getRole(Mockito.anyString())).thenReturn(user1);
  CompositeData data=mbean.getUser("user1");
  Assert.assertNotNull(data);
  UserData user=UserData.from(data);
  Assert.assertNotNull(user);
  Assert.assertEquals("user1",user.getName());
  Assert.assertEquals(Role.USER,user.getType());
  Mockito.verify(userAdmin).getRole(Mockito.anyString());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test method for {@link org.apache.aries.jmx.useradmin.UserAdmin#getCredentials(java.lang.String)}.
 * @throws IOException
 */
@Test public void testGetCredentials() throws IOException {
  User user1=Mockito.mock(User.class);
  Dictionary<String,Object> properties=new Hashtable<String,Object>();
  properties.put("key","value");
  Mockito.when(user1.getCredentials()).thenReturn(properties);
  Mockito.when(user1.getType()).thenReturn(Role.USER);
  Mockito.when(userAdmin.getRole(Mockito.anyString())).thenReturn(user1);
  TabularData data=mbean.getCredentials("user1");
  Assert.assertNotNull(data);
  Assert.assertEquals(JmxConstants.PROPERTIES_TYPE,data.getTabularType());
  CompositeData composite=data.get(new Object[]{"key"});
  Assert.assertNotNull(composite);
  Assert.assertEquals("key",(String)composite.get(JmxConstants.KEY));
  Assert.assertEquals("value",(String)composite.get(JmxConstants.VALUE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jmx.util.TypeUtilsTest </h4><pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFromString() throws Exception {
  String value;
  value="1";
  Integer integerValue=fromString(Integer.class,value);
  assertEquals(new Integer(1),integerValue);
  int intValue=fromString(Integer.TYPE,value);
  assertEquals(1,intValue);
  Long wrappedLongValue=fromString(Long.class,value);
  assertEquals(Long.valueOf(1),wrappedLongValue);
  long longValue=fromString(Long.TYPE,value);
  assertEquals(1,longValue);
  Double wrappedDoubleValue=fromString(Double.class,value);
  assertEquals(Double.valueOf(1),wrappedDoubleValue);
  double doubleValue=fromString(Double.TYPE,value);
  assertEquals(1,doubleValue,0);
  Float wrappedFloatValue=fromString(Float.class,value);
  assertEquals(Float.valueOf(1),wrappedFloatValue);
  float floatValue=fromString(Float.TYPE,value);
  assertEquals(1,floatValue,0);
  Short shortValue=fromString(Short.class,value);
  assertEquals(Short.valueOf(value),shortValue);
  Byte byteValue=fromString(Byte.class,value);
  assertEquals(Byte.valueOf(value),byteValue);
  value="true";
  assertTrue(fromString(Boolean.class,value));
  assertTrue(fromString(Boolean.TYPE,value));
  char charValue=fromString(Character.TYPE,"a");
  assertEquals('a',charValue);
  Character characterValue=fromString(Character.class,"a");
  assertEquals(Character.valueOf('a'),characterValue);
  BigDecimal bigDecimal=fromString(BigDecimal.class,"2");
  assertEquals(new BigDecimal("2"),bigDecimal);
  BigInteger bigInteger=fromString(BigInteger.class,"2");
  assertEquals(new BigInteger("2"),bigInteger);
  String stringValue=fromString(String.class,value);
  assertEquals(stringValue,value);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jndi.InitialContextTest </h4><pre class="type-5 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testURLContextErrorPropagation() throws Exception {
  ObjectFactory of=new ObjectFactory(){
    public Object getObjectInstance(    Object obj,    Name name,    Context nameCtx,    Hashtable<?,?> environment) throws Exception {
      throw new Exception("doh");
    }
  }
;
  registerURLObjectFactory(of,"test");
  ic=initialContext();
  try {
    ic.lookup("test:something");
    Assert.fail("Expected NamingException");
  }
 catch (  NamingException ne) {
    assertNotNull(ne.getCause());
    assertEquals("doh",ne.getCause().getMessage());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jndi.ObjectFactoryTest </h4><pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testContextDotObjectFactories() throws Exception {
  env.put(Context.OBJECT_FACTORIES,"org.apache.aries.jndi.ObjectFactoryTest$DummyObjectFactory");
  Reference ref=new Reference("anything");
  Object obj=NamingManager.getObjectInstance(ref,null,null,env);
  assertTrue(obj instanceof String);
  assertEquals((String)obj,"pass");
  env.remove(Context.OBJECT_FACTORIES);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jndi.itests.JndiUrlIntegrationTest </h4><pre class="type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test exercises the blueprint:comp/ jndi namespace by driving
 * a Servlet which then looks up some blueprint components from its own
 * bundle, including a reference which it uses to call a service from a 
 * second bundle.  
 * @throws Exception
 */
@Test public void testBlueprintCompNamespaceWorks() throws Exception {
  Bundle bBiz=context().getBundleByName("org.apache.aries.jndi.url.itest.biz");
  assertNotNull(bBiz);
  Bundle bweb=context().getBundleByName("org.apache.aries.jndi.url.itest.web");
  assertNotNull(bweb);
  context().getBundleByName("org.ops4j.pax.web.pax-web-extender-war").start();
  printBundleStatus("Before making web request");
  try {
    Thread.sleep(5000);
  }
 catch (  InterruptedException ix) {
  }
  System.out.println("In test and trying to get connection....");
  String response=getTestServletResponse();
  System.out.println("Got response `" + response + "`");
  assertEquals("ITest servlet response wrong","Mark.2.0.three",response);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jndi.url.BlueprintURLContextTest </h4><pre class="type-4 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Validate that we can create an InitialContext at blueprint:comp scope, and then 
 * look components up within it
 */
@Test public void testTwoLevelComponentLookup() throws Exception {
  InitialContext ctx=new InitialContext();
  Context ctx2=(Context)ctx.lookup("blueprint:comp");
  SimpleComponent sc=(SimpleComponent)ctx2.lookup("comp2");
  assertNotNull(sc);
  String msg=sc.getIdMessage();
  assertEquals("comp2 message wrong","AnotherComponent with id comp2",msg);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check that we can directly address a blueprint component
 */
@Test public void testSimpleComponentLookup() throws Exception {
  BlueprintURLContext bpURLc=new BlueprintURLContext(bundle,new Hashtable<String,String>());
  SimpleComponent sc=(SimpleComponent)bpURLc.lookup("blueprint:comp/comp1");
  assertNotNull(sc);
  String msg=sc.getIdMessage();
  assertEquals("comp1 message wrong","comp1_message",msg);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jndi.url.ServiceRegistryContextTest </h4><pre class="type-5 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkServiceListLookup() throws NamingException {
  BundleMock mock=new BundleMock("scooby.doo",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  InitialContext ctx=new InitialContext();
  String className=Runnable.class.getName();
  Runnable t=Skeleton.newMock(Runnable.class);
  reg.unregister();
  ServiceRegistration reg=bc.registerService(className,t,null);
  ServiceRegistration reg2=bc.registerService("java.lang.Thread",new Thread(),null);
  Context ctx2=(Context)ctx.lookup("osgi:servicelist/java.lang.Runnable");
  Runnable r=(Runnable)ctx2.lookup(String.valueOf(reg.getReference().getProperty(Constants.SERVICE_ID)));
  r.run();
  Skeleton.getSkeleton(t).assertCalled(new MethodCall(Runnable.class,"run"));
  reg.unregister();
  try {
    r.run();
    fail("Should have received a ServiceException");
  }
 catch (  ServiceException e) {
    assertEquals("service exception has the wrong type",ServiceException.UNREGISTERED,e.getType());
  }
  try {
    ctx2.lookup(String.valueOf(reg2.getReference().getProperty(Constants.SERVICE_ID)));
    fail("Expected a NameNotFoundException");
  }
 catch (  NameNotFoundException e) {
  }
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkServiceListListBindings() throws NamingException {
  BundleMock mock=new BundleMock("scooby.doo",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  InitialContext ctx=new InitialContext();
  String className=Runnable.class.getName();
  MethodCall run=new MethodCall(Runnable.class,"run");
  Runnable t=Skeleton.newMock(Runnable.class);
  Runnable t2=Skeleton.newMock(Runnable.class);
  reg.unregister();
  ServiceRegistration reg=bc.registerService(className,t,null);
  ServiceRegistration reg2=bc.registerService(className,t2,null);
  NamingEnumeration<Binding> ne=ctx.listBindings("osgi:servicelist/" + className);
  assertTrue(ne.hasMoreElements());
  Binding bnd=ne.nextElement();
  assertEquals(String.valueOf(reg.getReference().getProperty(Constants.SERVICE_ID)),bnd.getName());
  assertTrue("Class name not correct. Was: " + bnd.getClassName(),bnd.getClassName().contains("Proxy") || bnd.getClassName().contains("EnhancerByCGLIB"));
  Runnable r=(Runnable)bnd.getObject();
  assertNotNull(r);
  r.run();
  Skeleton.getSkeleton(t).assertCalledExactNumberOfTimes(run,1);
  Skeleton.getSkeleton(t2).assertNotCalled(run);
  assertTrue(ne.hasMoreElements());
  bnd=ne.nextElement();
  assertEquals(String.valueOf(reg2.getReference().getProperty(Constants.SERVICE_ID)),bnd.getName());
  assertTrue("Class name not correct. Was: " + bnd.getClassName(),bnd.getClassName().contains("Proxy") || bnd.getClassName().contains("EnhancerByCGLIB"));
  r=(Runnable)bnd.getObject();
  assertNotNull(r);
  r.run();
  Skeleton.getSkeleton(t).assertCalledExactNumberOfTimes(run,1);
  Skeleton.getSkeleton(t2).assertCalledExactNumberOfTimes(run,1);
  assertFalse(ne.hasMoreElements());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBaseLookup() throws NamingException {
  BundleMock mock=new BundleMock("scooby.doo",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  InitialContext ctx=new InitialContext();
  Context ctx2=(Context)ctx.lookup("osgi:service");
  Runnable r1=(Runnable)ctx2.lookup("java.lang.Runnable");
  assertNotNull(r1);
  assertTrue("expected proxied service class",r1 != service);
  Runnable r2=(Runnable)ctx.lookup("aries:services/java.lang.Runnable");
  assertNotNull(r2);
  assertTrue("expected non-proxied service class",r2 == service);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test does a simple JNDI lookup to prove that works.
 * @throws NamingException
 */
@Test public void simpleJNDILookup() throws NamingException {
  System.setProperty(Context.URL_PKG_PREFIXES,"helloMatey");
  InitialContext ctx=new InitialContext(new Hashtable<Object,Object>());
  BundleMock mock=new BundleMock("scooby.doo.1",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  Runnable s=(Runnable)ctx.lookup("osgi:service/java.lang.Runnable");
  assertNotNull("We didn't get a service back from our lookup :(",s);
  s.run();
  Skeleton.getSkeleton(service).assertCalledExactNumberOfTimes(new MethodCall(Runnable.class,"run"),1);
  Skeleton skel=Skeleton.getSkeleton(mock.getBundleContext());
  skel.assertCalled(new MethodCall(BundleContext.class,"getServiceReferences","java.lang.Runnable",null));
  ctx=new InitialContext(new Hashtable<Object,Object>());
  mock=new BundleMock("scooby.doo.2",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  s=(Runnable)ctx.lookup("osgi:service/java.lang.Runnable");
  String packages=System.getProperty(Context.URL_PKG_PREFIXES,null);
  assertTrue(ctx.getEnvironment().containsValue(packages));
  assertNotNull("We didn't get a service back from our lookup :(",s);
  s.run();
  Skeleton.getSkeleton(service).assertCalledExactNumberOfTimes(new MethodCall(Runnable.class,"run"),2);
  skel=Skeleton.getSkeleton(mock.getBundleContext());
  skel.assertCalled(new MethodCall(BundleContext.class,"getServiceReferences","java.lang.Runnable",null));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLookupWithPause() throws NamingException {
  BundleMock mock=new BundleMock("scooby.doo",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  Hashtable<Object,Object> env=new Hashtable<Object,Object>();
  env.put(JNDIConstants.REBIND_TIMEOUT,1000);
  InitialContext ctx=new InitialContext(env);
  Context ctx2=(Context)ctx.lookup("osgi:service");
  Runnable r1=(Runnable)ctx2.lookup("java.lang.Runnable");
  reg.unregister();
  long startTime=System.currentTimeMillis();
  try {
    r1.run();
    fail("Should have received an exception");
  }
 catch (  ServiceException e) {
    long endTime=System.currentTimeMillis();
    long diff=endTime - startTime;
    assertTrue("The run method did not fail in the expected time (1s): " + diff,diff >= 1000);
  }
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void checkServiceListList() throws NamingException {
  BundleMock mock=new BundleMock("scooby.doo",new Properties());
  Thread.currentThread().setContextClassLoader(mock.getClassLoader());
  InitialContext ctx=new InitialContext();
  String className=Runnable.class.getName();
  Runnable t=Skeleton.newMock(Runnable.class);
  reg.unregister();
  ServiceRegistration reg=bc.registerService(className,t,null);
  ServiceRegistration reg2=bc.registerService(className,new Thread(),null);
  NamingEnumeration<NameClassPair> ne=ctx.list("osgi:servicelist/" + className);
  assertTrue(ne.hasMoreElements());
  NameClassPair ncp=ne.nextElement();
  assertEquals(String.valueOf(reg.getReference().getProperty(Constants.SERVICE_ID)),ncp.getName());
  assertTrue("Class name not correct. Was: " + ncp.getClassName(),ncp.getClassName().contains("Proxy"));
  assertTrue(ne.hasMoreElements());
  ncp=ne.nextElement();
  assertEquals(String.valueOf(reg2.getReference().getProperty(Constants.SERVICE_ID)),ncp.getName());
  assertEquals("Class name not correct.",Thread.class.getName(),ncp.getClassName());
  assertFalse(ne.hasMoreElements());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jpa.container.itest.EclipseAdditionalTest </h4><pre class="type-5 type-10 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=IllegalStateException.class) public void testEntityManagerFactoryWithIncompletePersistenceUnit() throws Exception {
  getService(EntityManagerFactory.class,"(osgi.unit.name=incompleteTestUnit)",1000);
  Assert.fail("There should be no EntityManagerFactory registered since this persistence unit is incomplete");
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jpa.impl.EmSupplierTest </h4><pre class="type-3 type-7 type-13 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void lifeCycleTest(){
  EntityManagerFactory emf=mockEmf();
  Coordinator coordinator=new DummyCoordinator();
  EMSupplierImpl emSupplier=new EMSupplierImpl("myunit",emf,coordinator);
  assertIllegalState(emSupplier);
  coordinator.begin("test",0);
  EntityManager em=emSupplier.get();
  Assert.assertNotNull("EM should be present after preCall",em);
  coordinator.begin("testinner",0);
  Assert.assertSame("Same EM for inner preCall",em,emSupplier.get());
  coordinator.pop().end();
  Assert.assertSame("EM must still be the same after inner postCall",em,emSupplier.get());
  coordinator.pop().end();
  assertIllegalState(emSupplier);
  boolean clean=emSupplier.close();
  Assert.assertTrue("Shutdown should be clean",clean);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jpa.itest.karaf.DSTest </h4><pre class="type-4 type-7 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Test currently does not work as data source config is not deployed for unknown reason
 */
@Ignore @Test public void test() throws BundleException {
  resolveBundles();
  Assert.assertEquals(0,taskService.getTasks().size());
  Task task=new Task();
  task.setId(1);
  task.setDescription("My task");
  taskService.addTask(task);
  Collection<Task> tasks=taskService.getTasks();
  Assert.assertEquals(1,tasks.size());
  Task task1=tasks.iterator().next();
  Assert.assertEquals(1,task1.getId().intValue());
  Assert.assertEquals("My task",task1.getDescription());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.jpa.support.osgi.impl.EmfTrackerTest </h4><pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testLifecycle(){
  BundleContext context=mock(BundleContext.class);
  Coordinator coordinator=mock(Coordinator.class);
  EMFTracker tracker=new EMFTracker(context,coordinator);
  ServiceReference<EntityManagerFactory> ref=mock(ServiceReference.class);
  Mockito.when(ref.getProperty(EntityManagerFactoryBuilder.JPA_UNIT_NAME)).thenReturn("testunit");
  Mockito.when(ref.getProperty(PersistenceUnitTransactionType.class.getName())).thenReturn("JTA");
  Bundle puBundle=mock(Bundle.class);
  BundleContext puContext=mock(BundleContext.class);
  when(puBundle.getBundleContext()).thenReturn(puContext);
  when(ref.getBundle()).thenReturn(puBundle);
  EntityManagerFactory emf=mock(EntityManagerFactory.class);
  when(puContext.getService(ref)).thenReturn(emf);
  ServiceRegistration<?> emSupplierReg=mock(ServiceRegistration.class,"emSupplierReg");
  ServiceRegistration<?> emProxyReg=mock(ServiceRegistration.class,"emProxyReg");
  when(puContext.registerService(any(Class.class),any(),any(Dictionary.class))).thenReturn(emSupplierReg,emProxyReg);
  EMFTracker.TrackedEmf tracked=(TrackedEmf)tracker.addingService(ref);
  Assert.assertEquals(emf,tracked.emf);
  Assert.assertEquals(emSupplierReg,tracked.emSupplierReg);
  Assert.assertEquals(emProxyReg,tracked.emProxyReg);
  Assert.assertNotNull(tracked.tmTracker);
  Assert.assertNull(tracked.rlTxManagerReg);
  tracker.removedService(ref,tracked);
  verify(emSupplierReg,times(1)).unregister();
  verify(emProxyReg,times(1)).unregister();
  verify(puContext,times(1)).ungetService(ref);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.proxy.itests.AbstractBasicProxyTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test does two things. First of all it checks that we throw a FinalModifierException if we
 * try to proxy a final class. It also validates that the message and toString in the exception
 * works as expected.
 */
@Test public void checkProxyFinalClass() throws UnableToProxyException {
  Bundle b=bundleContext.getBundle();
  Callable c=new TestCallable();
  Collection<Class<?>> classes=new ArrayList<Class<?>>();
  classes.add(TestCallable.class);
  try {
    mgr.createDelegatingProxy(b,classes,c,null);
  }
 catch (  FinalModifierException e) {
    String msg=e.getMessage();
    assertEquals("The message didn't look right","The class " + TestCallable.class.getName() + " is final.",msg);
    assertTrue("The message didn't appear in the toString",e.toString().endsWith(msg));
  }
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This method checks that we correctly proxy an interface with default methods on java 8
 */
@Test public void checkProxydefaultMethodInterface() throws UnableToProxyException {
  Bundle b=bundleContext.getBundle();
  Callable c=new TestCallable();
  Collection<Class<?>> classes=new ArrayList<Class<?>>();
  classes.add(java.lang.CharSequence.class);
  try {
    mgr.createDelegatingProxy(b,classes,c,null);
  }
 catch (  FinalModifierException e) {
    String msg=e.getMessage();
    assertEquals("The message didn't look right","The class " + TestCallable.class.getName() + " is final.",msg);
    assertTrue("The message didn't appear in the toString",e.toString().endsWith(msg));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.proxy.itests.AbstractProxyTest </h4><pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInterception() throws Exception {
  Bundle b=bundleContext.getBundle();
  TestDelegate td=new TestDelegate("Hello");
  Collection<Class<?>> classes=new ArrayList<Class<?>>();
  classes.add(TestDelegate.class);
  TestListener tl=new TestListener();
  TestDelegate proxy=(TestDelegate)mgr.createInterceptingProxy(b,classes,td,tl);
  tl.clear();
  assertCalled(tl,false,false,false);
  assertEquals("Wrong message","Hello",proxy.call());
  assertCalled(tl,true,true,false);
  tl.clear();
  assertCalled(tl,false,false,false);
  try {
    proxy.throwException();
    fail("Should throw an exception");
  }
 catch (  RuntimeException re) {
    assertCalled(tl,true,false,true);
  }
  tl.clear();
  assertCalled(tl,false,false,false);
  try {
    proxy.testInternallyCaughtException();
  }
  finally {
    assertCalled(tl,true,true,false);
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDelegationAndInterception() throws Exception {
  Bundle b=bundleContext.getBundle();
  TestCallable c=new TestCallable();
  Collection<Class<?>> classes=new ArrayList<Class<?>>();
  classes.add(TestDelegate.class);
  TestListener tl=new TestListener();
  TestDelegate proxy=(TestDelegate)mgr.createDelegatingInterceptingProxy(b,classes,c,new TestDelegate(""),tl);
  c.setReturn(new TestDelegate("Hello"));
  tl.clear();
  assertCalled(tl,false,false,false);
  assertEquals("Wrong message","Hello",proxy.call());
  assertCalled(tl,true,true,false);
  tl.clear();
  assertCalled(tl,false,false,false);
  c.setReturn(new TestDelegate("Hello again"));
  assertEquals("Wrong message","Hello again",proxy.call());
  assertCalled(tl,true,true,false);
  tl.clear();
  assertCalled(tl,false,false,false);
  try {
    proxy.throwException();
    fail("Should throw an exception");
  }
 catch (  RuntimeException re) {
    assertCalled(tl,true,false,true);
  }
  tl.clear();
  assertCalled(tl,false,false,false);
  try {
    proxy.testInternallyCaughtException();
  }
  finally {
    assertCalled(tl,true,true,false);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.proxy.itests.AbstractWeavingProxyTest </h4><pre class="type-12 type-5 type-10 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies that exceptions are thrown during the test case execution">ExceptionVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies that exceptions are thrown during the test case execution
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test(expected=FinalModifierException.class) public void checkProxyController() throws Exception {
  context().registerService(ProxyWeavingController.class.getName(),new ProxyWeavingController(){
    public boolean shouldWeave(    WovenClass arg0,    WeavingHelper arg1){
      return false;
    }
  }
,null);
  Bundle b=bundleContext.getBundle();
  Callable c=new TestCallable();
  Collection<Class<?>> classes=new ArrayList<Class<?>>();
  Callable<?> callable=new TestFinalDelegate();
  classes.add(callable.getClass());
  Object o=mgr.createDelegatingProxy(b,classes,c,callable);
  if (o instanceof WovenProxy)   fail("Proxy should not have been woven!");
}

</code></pre>

<br>
<pre class="type-4 type-12 type-5 type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * This test does two things. First of all it checks that we can proxy a final 
 * class. It also validates that the class implements WovenProxy, and that the
 * delegation still works
 */
@Test public void checkProxyFinalClass() throws Exception {
  Bundle b=bundleContext.getBundle();
  TestCallable dispatcher=new TestCallable();
  TestCallable template=new TestCallable();
  Collection<Class<?>> classes=new ArrayList<Class<?>>();
  classes.add(TestCallable.class);
  @SuppressWarnings("unchecked") Callable o=(Callable)mgr.createDelegatingProxy(b,classes,dispatcher,template);
  if (!!!(o instanceof WovenProxy))   fail("Proxy should be woven!");
  Object inner=new Integer(3);
  dispatcher.setReturn(new TestCallable());
  ((TestCallable)dispatcher.call()).setReturn(inner);
  assertSame("Should return the same object",inner,o.call());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.quiesce.manager.itest.QuiesceManagerTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTwoBundles() throws Exception {
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant1,null);
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant2,null);
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant3,null);
  bundleList=new ArrayList<Bundle>();
  bundleList.add(b1);
  bundleList.add(b2);
  assertEquals("Bundle " + b1.getSymbolicName() + " should be in active state",Bundle.ACTIVE,b1.getState());
  assertEquals("Bundle " + b2.getSymbolicName() + " should be in active state",Bundle.ACTIVE,b2.getState());
  manager.quiesceWithFuture(10000,bundleList).get(15000,TimeUnit.MILLISECONDS);
  assertEquals("Participant 1 should have started once",1,participant1.getStartedCount());
  assertEquals("Participant 1 should finished once",1,participant1.getFinishedCount());
  assertEquals("Participant 2 should have started once",1,participant2.getStartedCount());
  assertEquals("Participant 2 should not have finished",0,participant2.getFinishedCount());
  assertEquals("Participant 3 should have started once",1,participant3.getStartedCount());
  assertEquals("Participant 3 should finished once",1,participant3.getFinishedCount());
  assertTrue("Bundle " + b1.getSymbolicName() + " should not be in active state",b1.getState() != Bundle.ACTIVE);
  assertTrue("Bundle " + b2.getSymbolicName() + " should not be in active state",b2.getState() != Bundle.ACTIVE);
}

</code></pre>

<br>
<pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFutureWithWait() throws Exception {
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant2,null);
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant3,null);
  bundleList=new ArrayList<Bundle>();
  bundleList.add(b1);
  assertEquals("Bundle " + b1.getSymbolicName() + " should be in active state",Bundle.ACTIVE,b1.getState());
  Future<?> future=manager.quiesceWithFuture(2000,Arrays.asList(b1));
  try {
    future.get(500,TimeUnit.MILLISECONDS);
    fail("Too short wait, should have thrown TimeoutException");
  }
 catch (  TimeoutException te) {
  }
  assertEquals("Participant 2 has started",1,participant2.getStartedCount());
  assertEquals("Participant 2 has finished",0,participant2.getFinishedCount());
  assertEquals("Participant 3 has started",1,participant3.getStartedCount());
  assertEquals("Participant 3 has finished",0,participant3.getFinishedCount());
  assertEquals("Bundle " + b1.getSymbolicName() + " should still be active, because we did not wait long enough",Bundle.ACTIVE,b1.getState());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWaitAShortTime() throws Exception {
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant3,null);
  bundleList=new ArrayList<Bundle>();
  bundleList.add(b1);
  assertEquals("Bundle " + b1.getSymbolicName() + " should be in active state",Bundle.ACTIVE,b1.getState());
  manager.quiesceWithFuture(10000,bundleList).get(7000,TimeUnit.MILLISECONDS);
  assertEquals("Participant should have started once",1,participant3.getStartedCount());
  assertEquals("Participant should finished once",1,participant3.getFinishedCount());
  assertTrue("Bundle " + b1.getSymbolicName() + " should not be in active state",b1.getState() != Bundle.ACTIVE);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testThreeParticipants() throws Exception {
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant1,null);
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant2,null);
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant3,null);
  bundleList=new ArrayList<Bundle>();
  bundleList.add(b1);
  assertEquals("Bundle " + b1.getSymbolicName() + " should be in active state",Bundle.ACTIVE,b1.getState());
  manager.quiesceWithFuture(10000,bundleList).get(15000,TimeUnit.MILLISECONDS);
  assertEquals("Participant 1 should have started once",1,participant1.getStartedCount());
  assertEquals("Participant 1 should finished once",1,participant1.getFinishedCount());
  assertEquals("Participant 2 should have started once",1,participant2.getStartedCount());
  assertEquals("Participant 2 should not have finished",0,participant2.getFinishedCount());
  assertEquals("Participant 3 should have started once",1,participant3.getStartedCount());
  assertEquals("Participant 3 should finished once",1,participant3.getFinishedCount());
  assertTrue("Bundle " + b1.getSymbolicName() + " should not be in active state",b1.getState() != Bundle.ACTIVE);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoReturn() throws Exception {
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant2,null);
  bundleList=new ArrayList<Bundle>();
  bundleList.add(b1);
  assertEquals("Bundle " + b1.getSymbolicName() + " should be in active state",Bundle.ACTIVE,b1.getState());
  manager.quiesce(1000,bundleList);
  timeoutTime=System.currentTimeMillis() + 5000;
  while (System.currentTimeMillis() < timeoutTime && b1.getState() == Bundle.ACTIVE) {
    Thread.sleep(500);
  }
  assertEquals("Participant should have started once",1,participant2.getStartedCount());
  assertEquals("Participant should not have finished",0,participant2.getFinishedCount());
  assertTrue("Bundle " + b1.getSymbolicName() + " should not be in active state",b1.getState() != Bundle.ACTIVE);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoParticipants() throws Exception {
  bundleList=new ArrayList<Bundle>();
  bundleList.add(b1);
  assertEquals("Bundle " + b1.getSymbolicName() + " should be in active state",Bundle.ACTIVE,b1.getState());
  manager.quiesceWithFuture(2000,bundleList).get(5000,TimeUnit.MILLISECONDS);
  assertTrue("Bundle " + b1.getSymbolicName() + " should not be in active state",b1.getState() != Bundle.ACTIVE);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testOverlappedQuiesces() throws Exception {
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant1,null);
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant2,null);
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant3,null);
  bundleList=new ArrayList<Bundle>();
  bundleList.add(b1);
  bundleList.add(b2);
  assertEquals("Bundle " + b1.getSymbolicName() + " should be in active state",Bundle.ACTIVE,b1.getState());
  assertEquals("Bundle " + b2.getSymbolicName() + " should be in active state",Bundle.ACTIVE,b2.getState());
  assertEquals("Bundle " + b3.getSymbolicName() + " should be in active state",Bundle.ACTIVE,b3.getState());
  manager.quiesce(2000,bundleList);
  bundleList=new ArrayList<Bundle>();
  bundleList.add(b2);
  bundleList.add(b3);
  manager.quiesce(2000,bundleList);
  timeoutTime=System.currentTimeMillis() + 10000;
  while (System.currentTimeMillis() < timeoutTime && (b1.getState() == Bundle.ACTIVE || b2.getState() == Bundle.ACTIVE || b3.getState() == Bundle.ACTIVE)) {
    Thread.sleep(500);
  }
  assertEquals("Participant 1 should have started twice as it has been asked to quiesce twice",2,participant1.getStartedCount());
  assertEquals("Participant 1 should finished twice as it should have returned from two quiesce requests immediately",2,participant1.getFinishedCount());
  assertEquals("Participant 2 should have started twice as it has been asked to quiesce twice",2,participant2.getStartedCount());
  assertEquals("Participant 2 should not have finished as it should never return from it's two quiesce requests",0,participant2.getFinishedCount());
  assertEquals("Participant 3 should have started twice as it has been asked to quiesce twice",2,participant3.getStartedCount());
  assertEquals("Participant 3 should finished twice as it should have waited a short time before returning from it's two quiesce requests",2,participant3.getFinishedCount());
  assertTrue("Bundle " + b1.getSymbolicName() + " should not be in active state",b1.getState() != Bundle.ACTIVE);
  assertTrue("Bundle " + b2.getSymbolicName() + " should not be in active state",b2.getState() != Bundle.ACTIVE);
  assertTrue("Bundle " + b3.getSymbolicName() + " should not be in active state",b3.getState() != Bundle.ACTIVE);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImmediateReturn() throws Exception {
  bundleList=new ArrayList<Bundle>();
  bundleList.add(b1);
  bundleContext.registerService(QuiesceParticipant.class.getName(),participant1,null);
  assertEquals("Bundle " + b1.getSymbolicName() + " should be in active state",Bundle.ACTIVE,b1.getState());
  manager.quiesceWithFuture(1000,bundleList).get(5000,TimeUnit.MILLISECONDS);
  assertEquals("Participant should have finished once",1,participant1.getFinishedCount());
  assertTrue("Bundle " + b1.getSymbolicName() + " should not be in active state",b1.getState() != Bundle.ACTIVE);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.sample.twitter.itest.TwitterTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test for ARIES-461
 * Application that bring in dependency bundles from a bundle repository doesn't deploy
 * @throws Exception
 */
@Test public void testTwitter() throws Exception {
  System.setProperty(AppConstants.PROVISON_EXCLUDE_LOCAL_REPO_SYSPROP,"false");
  deleteRepos();
  MavenArtifactUrlReference twitterEbaUrl=maven("org.apache.aries.samples.twitter","org.apache.aries.samples.twitter.eba").versionAsInProject().type("eba");
  MavenArtifactUrlReference twitterCommonLangJar=maven("commons-lang","commons-lang").versionAsInProject();
  MavenArtifactUrlReference twitterJar=maven("org.apache.aries.samples.twitter","org.apache.aries.samples.twitter.twitter4j").versionAsInProject();
  String repositoryXML=getRepoContent("/obr/twitter/TwitterRepository.xml");
  String repo=repositoryXML.replaceAll("commons.lang.location",twitterCommonLangJar.getURL()).replaceAll("twitter4j.location",twitterJar.getURL());
  URL url=getRepoUrl(repo);
  repositoryAdmin.addRepository(url);
  AriesApplication app=manager.createApplication(new URL(twitterEbaUrl.getURL()));
  app=manager.resolve(app);
  DeploymentMetadata depMeta=app.getDeploymentMetadata();
  List<DeploymentContent> provision=depMeta.getApplicationProvisionBundles();
  Collection<DeploymentContent> useBundles=depMeta.getDeployedUseBundle();
  Collection<DeploymentContent> appContent=depMeta.getApplicationDeploymentContents();
  List<String> provisionBundleSymbolicNames=new ArrayList<String>();
  for (  DeploymentContent dep : provision) {
    provisionBundleSymbolicNames.add(dep.getContentName());
  }
  String provision_bundle1="org.apache.commons.lang";
  String provision_bundle2="twitter4j";
  assertTrue("Bundle " + provision_bundle1 + " not found.",provisionBundleSymbolicNames.contains(provision_bundle1));
  assertTrue("Bundle " + provision_bundle2 + " not found.",provisionBundleSymbolicNames.contains(provision_bundle2));
  assertEquals(useBundles.toString(),0,useBundles.size());
  assertEquals(appContent.toString(),1,appContent.size());
  AriesApplicationContext ctx=manager.install(app);
  ctx.start();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.samples.blueprint.helloworld.itests.HelloworldSampleTest </h4><pre class="type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundlesStart() throws Exception {
  Bundle bapi=getInstalledBundle("org.apache.aries.samples.blueprint.helloworld.api");
  assertNotNull(bapi);
  failInBundleNotActiveInFiveSeconds(bapi);
  assertEquals(Bundle.ACTIVE,bapi.getState());
  Bundle bcli=getInstalledBundle("org.apache.aries.samples.blueprint.helloworld.client");
  assertNotNull(bcli);
  failInBundleNotActiveInFiveSeconds(bcli);
  Bundle bser=getInstalledBundle("org.apache.aries.samples.blueprint.helloworld.server");
  assertNotNull(bser);
  failInBundleNotActiveInFiveSeconds(bser);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.ProviderBundleTrackerCustomizerGenericCapabilityTest </h4><pre class="type-4 type-12 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testProvidedSPIDirective() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  BundleContext implBC=mockSPIBundleContext4();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI; approval=yeah, "+ SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "; "+ SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI2");
  Bundle implBundle=mockSPIBundle4(implBC,headers);
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  assertEquals("Expected 3 registrations, one for MySPI and 2 for MySPI2",3,registrations.size());
  Set<String> expectedObjectClasses=new HashSet<String>(Arrays.asList("org.apache.aries.mytest.MySPI","org.apache.aries.mytest.MySPI2"));
  Set<String> actualObjectClasses=new HashSet<String>();
  boolean foundMySPI=false;
  boolean foundMySPI2=false;
  for (  ServiceRegistration sr : registrations) {
    List<String> objectClasses=Arrays.asList((String[])sr.getReference().getProperty(Constants.OBJECTCLASS));
    actualObjectClasses.addAll(objectClasses);
    assertNotNull(sr.getReference().getProperty(SpiFlyConstants.SERVICELOADER_MEDIATOR_PROPERTY));
    if (objectClasses.contains("org.apache.aries.mytest.MySPI")) {
      assertEquals("yeah",sr.getReference().getProperty("approval"));
      foundMySPI=true;
    }
 else     if (objectClasses.contains("org.apache.aries.mytest.MySPI2")) {
      assertNull(sr.getReference().getProperty("approval"));
      foundMySPI2=true;
    }
  }
  assertTrue(foundMySPI);
  assertTrue(foundMySPI2);
  assertEquals(expectedObjectClasses,actualObjectClasses);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomAttributesBundle() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  ServiceRegistration sreg=EasyMock.createMock(ServiceRegistration.class);
  EasyMock.replay(sreg);
  BundleContext implBC=mockSPIBundleContext(sreg);
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI; approval=yeah; ");
  Bundle implBundle=mockSPIBundle(implBC,headers);
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  assertEquals(1,registrations.size());
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  Map<String,Object> attrs=activator.getCustomBundleAttributes("org.apache.aries.mytest.MySPI",implBundle);
  assertEquals(1,attrs.size());
  assertEquals("yeah",attrs.get("approval"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCapReqHeadersInFragment() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  ServiceRegistration<?> sreg=EasyMock.createNiceMock(ServiceRegistration.class);
  EasyMock.replay(sreg);
  BundleContext implBC=mockSPIBundleContext(sreg);
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,"osgi.ee;filter:=\"(&(osgi.ee=JavaSE)(version=1.6))\"");
  List<BundleWire> wires=new ArrayList<BundleWire>();
  BundleWire wire=EasyMock.createMock(BundleWire.class);
  Bundle fragment=EasyMock.createMock(Bundle.class);
  BundleRevision frev=EasyMock.createMock(BundleRevision.class);
  EasyMock.expect(frev.getBundle()).andReturn(fragment).anyTimes();
  EasyMock.replay(frev);
  BundleRequirement req=EasyMock.createMock(BundleRequirement.class);
  EasyMock.expect(req.getRevision()).andReturn(frev).anyTimes();
  EasyMock.replay(req);
  EasyMock.expect(wire.getRequirement()).andReturn(req).anyTimes();
  EasyMock.replay(wire);
  wires.add(wire);
  BundleWiring bw=EasyMock.createMock(BundleWiring.class);
  EasyMock.expect(bw.getProvidedWires("osgi.wiring.host")).andReturn(wires).anyTimes();
  EasyMock.replay(bw);
  BundleRevision rev=EasyMock.createMock(BundleRevision.class);
  EasyMock.expect(rev.getWiring()).andReturn(bw).anyTimes();
  EasyMock.replay(rev);
  Bundle implBundle=mockSPIBundle(implBC,headers,rev);
  Dictionary<String,String> fheaders=new Hashtable<String,String>();
  fheaders.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  fheaders.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI");
  EasyMock.expect(fragment.getHeaders()).andReturn(fheaders).anyTimes();
  EasyMock.replay(fragment);
  assertEquals("Precondition",0,activator.findProviderBundles("org.apache.aries.mytest.MySPI").size());
  customizer.addingBundle(implBundle,null);
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
}

</code></pre>

<br>
<pre class="type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testAddingBundleWithBundleClassPath() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  BundleContext implBC=EasyMock.createMock(BundleContext.class);
  EasyMock.expect(implBC.registerService(EasyMock.eq("org.apache.aries.mytest.MySPI"),EasyMock.isA(ServiceFactory.class),(Dictionary<String,?>)EasyMock.anyObject())).andReturn(EasyMock.createNiceMock(ServiceRegistration.class)).times(3);
  EasyMock.replay(implBC);
  Bundle implBundle=EasyMock.createNiceMock(Bundle.class);
  EasyMock.expect(implBundle.getBundleContext()).andReturn(implBC).anyTimes();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI");
  headers.put(Constants.BUNDLE_CLASSPATH,".,non-jar.jar,embedded.jar,embedded2.jar");
  EasyMock.expect(implBundle.getHeaders()).andReturn(headers).anyTimes();
  URL embeddedJar=getClass().getResource("/embedded.jar");
  assertNotNull("precondition",embeddedJar);
  EasyMock.expect(implBundle.getResource("embedded.jar")).andReturn(embeddedJar).anyTimes();
  URL embedded2Jar=getClass().getResource("/embedded2.jar");
  assertNotNull("precondition",embedded2Jar);
  EasyMock.expect(implBundle.getResource("embedded2.jar")).andReturn(embedded2Jar).anyTimes();
  URL dir=new URL("jar:" + embeddedJar + "!/META-INF/services");
  assertNotNull("precondition",dir);
  EasyMock.expect(implBundle.getResource("/META-INF/services")).andReturn(dir).anyTimes();
  EasyMock.expect(implBundle.findEntries((String)EasyMock.anyObject(),(String)EasyMock.anyObject(),EasyMock.anyBoolean())).andReturn(null).anyTimes();
  ClassLoader cl=new URLClassLoader(new URL[]{embeddedJar},getClass().getClassLoader());
  Class<?> clsA=cl.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2a");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2a")).andReturn(clsA).anyTimes();
  Class<?> clsB=cl.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2b");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2b")).andReturn(clsB).anyTimes();
  ClassLoader cl2=new URLClassLoader(new URL[]{embedded2Jar},getClass().getClassLoader());
  Class<?> clsC=cl2.loadClass("org.apache.aries.spifly.impl3.MySPIImpl3");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl3.MySPIImpl3")).andReturn(clsC).anyTimes();
  EasyMock.replay(implBundle);
  assertEquals("Precondition",0,activator.findProviderBundles("org.apache.aries.mytest.MySPI").size());
  customizer.addingBundle(implBundle,null);
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  EasyMock.verify(implBC);
}

</code></pre>

<br>
<pre class="type-4 type-12 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMultipleServiceInstancesAndTypes() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  BundleContext implBC=mockSPIBundleContext4();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI,"+ SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "; "+ SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI2");
  Bundle implBundle=mockSPIBundle4(implBC,headers);
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  assertEquals(3,registrations.size());
  boolean foundA=false, foundB=false, foundC=false;
  for (  ServiceRegistration sreg : registrations) {
    ServiceReference sref=sreg.getReference();
    String objectClassName=((String[])sref.getProperty(Constants.OBJECTCLASS))[0];
    String serviceImplClassName=(String)sref.getProperty(SpiFlyConstants.PROVIDER_IMPLCLASS_PROPERTY);
    if (MySPIImpl4a.class.getName().equals(serviceImplClassName)) {
      assertEquals("org.apache.aries.mytest.MySPI",objectClassName);
      MySPI svc=(MySPI)implBC.getService(sreg.getReference());
      assertEquals("impl4a",svc.someMethod(""));
      foundA=true;
    }
 else     if (MySPIImpl4b.class.getName().equals(serviceImplClassName)) {
      assertEquals("org.apache.aries.mytest.MySPI2",objectClassName);
      MySPI2 svc=(MySPI2)implBC.getService(sreg.getReference());
      assertEquals("impl4b",svc.someMethod(""));
      foundB=true;
    }
 else     if (MySPIImpl4c.class.getName().equals(serviceImplClassName)) {
      assertEquals("org.apache.aries.mytest.MySPI2",objectClassName);
      MySPI2 svc=(MySPI2)implBC.getService(sreg.getReference());
      assertEquals("impl4c",svc.someMethod(""));
      foundC=true;
    }
  }
  assertTrue(foundA);
  assertTrue(foundB);
  assertTrue(foundC);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoServiceRegistration() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  ServiceRegistration sreg=EasyMock.createMock(ServiceRegistration.class);
  EasyMock.replay(sreg);
  BundleContext implBC=mockSPIBundleContext(sreg);
  Bundle implBundle=mockSPIBundle(implBC,SpiFlyConstants.PROVIDER_REQUIREMENT);
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  assertEquals(0,registrations.size());
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testServiceSubsetSelectionAndRegistrationProperties() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  BundleContext implBC=mockSPIBundleContext4();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI2; approval=yeah; "+ SpiFlyConstants.REGISTER_DIRECTIVE+ ":=\"org.apache.aries.spifly.impl4.MySPIImpl4b\"");
  Bundle implBundle=mockSPIBundle4(implBC,headers);
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  assertEquals(1,registrations.size());
  String[] objectClassProp=(String[])registrations.iterator().next().getReference().getProperty(Constants.OBJECTCLASS);
  assertEquals(1,objectClassProp.length);
  assertEquals("org.apache.aries.mytest.MySPI2",objectClassProp[0]);
  assertNotNull(registrations.iterator().next().getReference().getProperty(SpiFlyConstants.SERVICELOADER_MEDIATOR_PROPERTY));
  assertEquals("yeah",registrations.iterator().next().getReference().getProperty("approval"));
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddingRemovedBundle() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  ServiceRegistration sreg=EasyMock.createMock(ServiceRegistration.class);
  sreg.unregister();
  EasyMock.expectLastCall();
  EasyMock.replay(sreg);
  BundleContext implBC=mockSPIBundleContext(sreg);
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI");
  Bundle implBundle=mockSPIBundle(implBC,headers);
  assertEquals("Precondition",0,activator.findProviderBundles("org.apache.aries.mytest.MySPI").size());
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  EasyMock.verify(implBC);
  customizer.removedBundle(implBundle,null,registrations);
  Collection<Bundle> bundles2=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(0,bundles2.size());
  EasyMock.verify(sreg);
}

</code></pre>

<br>
<pre class="type-4 type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNonServiceRegistryBundle() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  ServiceRegistration sreg=EasyMock.createMock(ServiceRegistration.class);
  EasyMock.replay(sreg);
  BundleContext implBC=mockSPIBundleContext(sreg);
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.PROVIDER_REQUIREMENT);
  headers.put(SpiFlyConstants.PROVIDE_CAPABILITY,SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE + "; " + SpiFlyConstants.SERVICELOADER_CAPABILITY_NAMESPACE+ "=org.apache.aries.mytest.MySPI; approval=yeah;"+ SpiFlyConstants.REGISTER_DIRECTIVE+ ":=\"\"");
  Bundle implBundle=mockSPIBundle(implBC,headers);
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  assertEquals(0,registrations.size());
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  Map<String,Object> attrs=activator.getCustomBundleAttributes("org.apache.aries.mytest.MySPI",implBundle);
  assertEquals(1,attrs.size());
  assertEquals("yeah",attrs.get("approval"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.ProviderBundleTrackerCustomizerTest </h4><pre class="type-4 type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAddingRemovedBundle() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  ServiceRegistration sreg=EasyMock.createMock(ServiceRegistration.class);
  sreg.unregister();
  EasyMock.expectLastCall();
  EasyMock.replay(sreg);
  BundleContext implBC=mockSPIBundleContext(sreg);
  Bundle implBundle=mockSPIBundle(implBC);
  assertEquals("Precondition",0,activator.findProviderBundles("org.apache.aries.mytest.MySPI").size());
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  EasyMock.verify(implBC);
  customizer.removedBundle(implBundle,null,registrations);
  EasyMock.verify(sreg);
}

</code></pre>

<br>
<pre class="type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test @SuppressWarnings("unchecked") public void testAddingBundleWithBundleClassPath() throws Exception {
  Bundle mediatorBundle=EasyMock.createMock(Bundle.class);
  EasyMock.expect(mediatorBundle.getBundleId()).andReturn(42l).anyTimes();
  EasyMock.replay(mediatorBundle);
  BaseActivator activator=new BaseActivator(){
    @Override public void start(    BundleContext context) throws Exception {
    }
  }
;
  ProviderBundleTrackerCustomizer customizer=new ProviderBundleTrackerCustomizer(activator,mediatorBundle);
  BundleContext implBC=EasyMock.createMock(BundleContext.class);
  EasyMock.expect(implBC.registerService(EasyMock.eq("org.apache.aries.mytest.MySPI"),EasyMock.isA(ServiceFactory.class),(Dictionary<String,?>)EasyMock.anyObject())).andReturn(EasyMock.createNiceMock(ServiceRegistration.class)).times(3);
  EasyMock.replay(implBC);
  Bundle implBundle=EasyMock.createNiceMock(Bundle.class);
  EasyMock.expect(implBundle.getBundleContext()).andReturn(implBC).anyTimes();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.SPI_PROVIDER_HEADER,"*");
  headers.put(Constants.BUNDLE_CLASSPATH,".,non-jar.jar,embedded.jar,embedded2.jar");
  EasyMock.expect(implBundle.getHeaders()).andReturn(headers).anyTimes();
  URL embeddedJar=getClass().getResource("/embedded.jar");
  assertNotNull("precondition",embeddedJar);
  EasyMock.expect(implBundle.getResource("embedded.jar")).andReturn(embeddedJar).anyTimes();
  URL embedded2Jar=getClass().getResource("/embedded2.jar");
  assertNotNull("precondition",embedded2Jar);
  EasyMock.expect(implBundle.getResource("embedded2.jar")).andReturn(embedded2Jar).anyTimes();
  URL dir=new URL("jar:" + embeddedJar + "!/META-INF/services");
  assertNotNull("precondition",dir);
  EasyMock.expect(implBundle.getResource("/META-INF/services")).andReturn(dir).anyTimes();
  EasyMock.expect(implBundle.findEntries((String)EasyMock.anyObject(),(String)EasyMock.anyObject(),EasyMock.anyBoolean())).andReturn(null).anyTimes();
  ClassLoader cl=new URLClassLoader(new URL[]{embeddedJar},getClass().getClassLoader());
  Class<?> clsA=cl.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2a");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2a")).andReturn(clsA).anyTimes();
  Class<?> clsB=cl.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2b");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl2.MySPIImpl2b")).andReturn(clsB).anyTimes();
  ClassLoader cl2=new URLClassLoader(new URL[]{embedded2Jar},getClass().getClassLoader());
  Class<?> clsC=cl2.loadClass("org.apache.aries.spifly.impl3.MySPIImpl3");
  EasyMock.expect(implBundle.loadClass("org.apache.aries.spifly.impl3.MySPIImpl3")).andReturn(clsC).anyTimes();
  EasyMock.replay(implBundle);
  assertEquals("Precondition",0,activator.findProviderBundles("org.apache.aries.mytest.MySPI").size());
  List<ServiceRegistration> registrations=customizer.addingBundle(implBundle,null);
  Collection<Bundle> bundles=activator.findProviderBundles("org.apache.aries.mytest.MySPI");
  assertEquals(1,bundles.size());
  assertSame(implBundle,bundles.iterator().next());
  EasyMock.verify(implBC);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.UtilTest </h4><pre class="type-13 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotInitialized() throws Exception {
  BaseActivator.activator=null;
  URL url=getClass().getResource("/embedded3.jar");
  assertNotNull("precondition",url);
  Bundle providerBundle=EasyMock.createMock(Bundle.class);
  final ClassLoader providerCL=new TestBundleClassLoader(new URL[]{url},getClass().getClassLoader(),providerBundle);
  EasyMock.expect(providerBundle.getBundleId()).andReturn(42L).anyTimes();
  EasyMock.expect(providerBundle.getEntryPaths((String)EasyMock.anyObject())).andReturn(null).anyTimes();
  Dictionary<String,String> providerHeaders=new Hashtable<String,String>();
  providerHeaders.put(Constants.BUNDLE_CLASSPATH,".,embedded3.jar");
  EasyMock.expect(providerBundle.getHeaders()).andReturn(providerHeaders).anyTimes();
  EasyMock.expect(providerBundle.getResource("embedded3.jar")).andReturn(url).anyTimes();
  providerBundle.loadClass((String)EasyMock.anyObject());
  EasyMock.expectLastCall().andAnswer(new IAnswer<Class<?>>(){
    @Override public Class<?> answer() throws Throwable {
      return providerCL.loadClass((String)EasyMock.getCurrentArguments()[0]);
    }
  }
).anyTimes();
  EasyMock.replay(providerBundle);
  Bundle clientBundle=EasyMock.createMock(Bundle.class);
  EasyMock.replay(clientBundle);
  ClassLoader clientCL=new TestBundleClassLoader(new URL[]{},getClass().getClassLoader(),clientBundle);
  Thread.currentThread().setContextClassLoader(null);
  Util.fixContextClassloader(ServiceLoader.class.getName(),"load",MySPI.class,clientCL);
  assertSame("The system is not yet initialized, so the TCCL should not be set",null,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<pre class="type-13 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFixContextClassLoaderSimpleViaEmbeddedJar() throws Exception {
  BaseActivator activator=new BaseActivator(){
    public void start(    BundleContext context) throws Exception {
    }
  }
;
  BaseActivator.activator=activator;
  URL url=getClass().getResource("/embedded3.jar");
  assertNotNull("precondition",url);
  Bundle providerBundle=EasyMock.createMock(Bundle.class);
  final ClassLoader providerCL=new TestBundleClassLoader(new URL[]{url},getClass().getClassLoader(),providerBundle);
  EasyMock.expect(providerBundle.getBundleContext()).andThrow(new IllegalStateException("Disable getBundleClassLoaderViaAdapt"));
  EasyMock.expect(providerBundle.getBundleId()).andReturn(42L).anyTimes();
  EasyMock.expect(providerBundle.getEntryPaths((String)EasyMock.anyObject())).andReturn(null).anyTimes();
  Dictionary<String,String> providerHeaders=new Hashtable<String,String>();
  providerHeaders.put(Constants.BUNDLE_CLASSPATH,".,embedded3.jar");
  EasyMock.expect(providerBundle.getHeaders()).andReturn(providerHeaders).anyTimes();
  EasyMock.expect(providerBundle.getResource("embedded3.jar")).andReturn(url).anyTimes();
  providerBundle.loadClass((String)EasyMock.anyObject());
  EasyMock.expectLastCall().andAnswer(new IAnswer<Class<?>>(){
    @Override public Class<?> answer() throws Throwable {
      return providerCL.loadClass((String)EasyMock.getCurrentArguments()[0]);
    }
  }
).anyTimes();
  EasyMock.replay(providerBundle);
  activator.registerProviderBundle(MySPI.class.getName(),providerBundle,new HashMap<String,Object>());
  Bundle clientBundle=EasyMock.createMock(Bundle.class);
  EasyMock.replay(clientBundle);
  ClassLoader clientCL=new TestBundleClassLoader(new URL[]{},getClass().getClassLoader(),clientBundle);
  Thread.currentThread().setContextClassLoader(null);
  Util.fixContextClassloader(ServiceLoader.class.getName(),"load",MySPI.class,clientCL);
  assertSame(providerCL,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.dynamic.ClientWeavingHookGenericCapabilityTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testHeadersFromFragment() throws Exception {
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Dictionary<String,String> fragmentConsumerHeaders=new Hashtable<String,String>();
  fragmentConsumerHeaders.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.CLIENT_REQUIREMENT);
  Bundle fragment=EasyMock.createMock(Bundle.class);
  EasyMock.expect(fragment.getHeaders()).andReturn(fragmentConsumerHeaders).anyTimes();
  EasyMock.replay(fragment);
  BundleRevision frev=EasyMock.createMock(BundleRevision.class);
  EasyMock.expect(frev.getBundle()).andReturn(fragment).anyTimes();
  EasyMock.replay(frev);
  BundleRequirement req=EasyMock.createMock(BundleRequirement.class);
  EasyMock.expect(req.getRevision()).andReturn(frev).anyTimes();
  EasyMock.replay(req);
  BundleWire wire=EasyMock.createMock(BundleWire.class);
  EasyMock.expect(wire.getRequirement()).andReturn(req).anyTimes();
  EasyMock.replay(wire);
  List<BundleWire> wires=Collections.singletonList(wire);
  BundleWiring wiring=EasyMock.createMock(BundleWiring.class);
  EasyMock.expect(wiring.getProvidedWires("osgi.wiring.host")).andReturn(wires).anyTimes();
  EasyMock.replay(wiring);
  BundleRevision rev=EasyMock.createMock(BundleRevision.class);
  EasyMock.expect(rev.getWiring()).andReturn(wiring).anyTimes();
  EasyMock.replay(rev);
  Bundle consumerBundle=mockConsumerBundle(new Hashtable<String,String>(),rev,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.REQUIRE_CAPABILITY);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  Object result=method.invoke(cls.newInstance(),"hello");
  Assert.assertEquals(Collections.singleton("olleh"),result);
}

</code></pre>

<br>
<pre class="type-4 type-5 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTCCLResettingOnException() throws Exception {
  ClassLoader cl=new URLClassLoader(new URL[]{});
  Thread.currentThread().setContextClassLoader(cl);
  Assert.assertSame("Precondition",cl,Thread.currentThread().getContextClassLoader());
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.CLIENT_REQUIREMENT);
  Bundle providerBundle5=mockProviderBundle("impl5",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle5,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(headers,providerBundle5);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.REQUIRE_CAPABILITY);
  Bundle spiFlyBundle=mockSpiFlyBundle(consumerBundle,providerBundle5);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  WovenClass wc=new MyWovenClass(clsUrl,"org.apache.aries.spifly.dynamic.TestClient",consumerBundle);
  wh.weave(wc);
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  try {
    method.invoke(cls.newInstance(),"hello");
    Assert.fail("Invocation should have thrown an exception");
  }
 catch (  InvocationTargetException ite) {
    RuntimeException re=(RuntimeException)ite.getCause();
    String msg=re.getMessage();
    Assert.assertEquals("Uh-oh: hello",msg);
    Assert.assertSame(cl,Thread.currentThread().getContextClassLoader());
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAltServiceLoaderLoadUnprocessed() throws Exception {
  Bundle spiFlyBundle=mockSpiFlyBundle();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.CLIENT_REQUIREMENT);
  Bundle consumerBundle=mockConsumerBundle(headers,spiFlyBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("UnaffectedTestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  WovenClass wc=new MyWovenClass(clsUrl,"org.apache.aries.spifly.dynamic.UnaffectedTestClient",consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals("The client is not affected so no additional imports should have been added",0,wc.getDynamicImports().size());
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  Object result=method.invoke(cls.newInstance(),"hello");
  Assert.assertEquals("impl4",result);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTCCLResetting() throws Exception {
  ClassLoader cl=new URLClassLoader(new URL[]{});
  Thread.currentThread().setContextClassLoader(cl);
  Assert.assertSame("Precondition",cl,Thread.currentThread().getContextClassLoader());
  Dictionary<String,String> consumerHeaders=new Hashtable<String,String>();
  consumerHeaders.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.CLIENT_REQUIREMENT);
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(consumerHeaders,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.REQUIRE_CAPABILITY);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  method.invoke(cls.newInstance(),"hi there");
  Assert.assertSame(cl,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicServiceLoaderUsage() throws Exception {
  Dictionary<String,String> consumerHeaders=new Hashtable<String,String>();
  consumerHeaders.put(SpiFlyConstants.REQUIRE_CAPABILITY,SpiFlyConstants.CLIENT_REQUIREMENT);
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(consumerHeaders,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.REQUIRE_CAPABILITY);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  Object result=method.invoke(cls.newInstance(),"hello");
  Assert.assertEquals(Collections.singleton("olleh"),result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.dynamic.ClientWeavingHookOSGi43Test </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicServiceLoaderUsageWithClassLoaderFromBundleRevision() throws Exception {
  Dictionary<String,String> consumerHeaders=new Hashtable<String,String>();
  consumerHeaders.put(SpiFlyConstants.SPI_CONSUMER_HEADER,"*");
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(consumerHeaders,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.SPI_CONSUMER_HEADER);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  Object result=method.invoke(cls.newInstance(),"hello");
  Assert.assertEquals(Collections.singleton("olleh"),result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.dynamic.ClientWeavingHookTest </h4><pre class="type-4 type-3 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testTCCLResetting() throws Exception {
  ClassLoader cl=new URLClassLoader(new URL[]{});
  Thread.currentThread().setContextClassLoader(cl);
  Assert.assertSame("Precondition",cl,Thread.currentThread().getContextClassLoader());
  Dictionary<String,String> consumerHeaders=new Hashtable<String,String>();
  consumerHeaders.put(SpiFlyConstants.SPI_CONSUMER_HEADER,"*");
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(consumerHeaders,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.SPI_CONSUMER_HEADER);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  method.invoke(cls.newInstance(),"hi there");
  Assert.assertSame(cl,Thread.currentThread().getContextClassLoader());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAltServiceLoaderLoadUnprocessed() throws Exception {
  Bundle spiFlyBundle=mockSpiFlyBundle();
  Dictionary<String,String> headers=new Hashtable<String,String>();
  headers.put(SpiFlyConstants.SPI_CONSUMER_HEADER,"*");
  Bundle consumerBundle=mockConsumerBundle(headers,spiFlyBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("UnaffectedTestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  WovenClass wc=new MyWovenClass(clsUrl,"org.apache.aries.spifly.dynamic.UnaffectedTestClient",consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals("The client is not affected so no additional imports should have been added",0,wc.getDynamicImports().size());
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  Object result=method.invoke(cls.newInstance(),"hello");
  Assert.assertEquals("impl4",result);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBasicServiceLoaderUsage() throws Exception {
  Dictionary<String,String> consumerHeaders=new Hashtable<String,String>();
  consumerHeaders.put(SpiFlyConstants.SPI_CONSUMER_HEADER,"*");
  Bundle providerBundle=mockProviderBundle("impl1",1);
  activator.registerProviderBundle("org.apache.aries.mytest.MySPI",providerBundle,new HashMap<String,Object>());
  Bundle consumerBundle=mockConsumerBundle(consumerHeaders,providerBundle);
  activator.addConsumerWeavingData(consumerBundle,SpiFlyConstants.SPI_CONSUMER_HEADER);
  Bundle spiFlyBundle=mockSpiFlyBundle("spifly",Version.parseVersion("1.9.4"),consumerBundle,providerBundle);
  WeavingHook wh=new ClientWeavingHook(spiFlyBundle.getBundleContext(),activator);
  URL clsUrl=getClass().getResource("TestClient.class");
  Assert.assertNotNull("Precondition",clsUrl);
  String clientClassName="org.apache.aries.spifly.dynamic.TestClient";
  WovenClass wc=new MyWovenClass(clsUrl,clientClassName,consumerBundle);
  Assert.assertEquals("Precondition",0,wc.getDynamicImports().size());
  wh.weave(wc);
  Assert.assertEquals(1,wc.getDynamicImports().size());
  String di1="org.apache.aries.spifly;bundle-symbolic-name=spifly;bundle-version=1.9.4";
  String di2="org.apache.aries.spifly;bundle-version=1.9.4;bundle-symbolic-name=spifly";
  String di=wc.getDynamicImports().get(0);
  Assert.assertTrue("Weaving should have added a dynamic import",di1.equals(di) || di2.equals(di));
  Class<?> cls=wc.getDefinedClass();
  Method method=cls.getMethod("test",new Class[]{String.class});
  Object result=method.invoke(cls.newInstance(),"hello");
  Assert.assertEquals(Collections.singleton("olleh"),result);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.statictool.ConsumerTest </h4><pre class="type-4 type-3 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConsumerBundle() throws Exception {
  String testClassFileName=TestClass.class.getName().replace('.','/') + ".class";
  URL testClassURL=getClass().getResource("/" + testClassFileName);
  String test2ClassFileName=Test2Class.class.getName().replace('.','/') + ".class";
  URL test2ClassURL=getClass().getResource("/" + test2ClassFileName);
  String test3ClassFileName=Test3Class.class.getName().replace('.','/') + ".class";
  URL test3ClassURL=getClass().getResource("/" + test3ClassFileName);
  File jarFile=new File(System.getProperty("java.io.tmpdir") + "/testjar_" + System.currentTimeMillis()+ ".jar");
  File expectedFile=null;
  try {
    Manifest mf=new Manifest();
    Attributes mainAttributes=mf.getMainAttributes();
    mainAttributes.putValue("Manifest-Version","1.0");
    mainAttributes.putValue("Bundle-ManifestVersion","2.0");
    mainAttributes.putValue("Bundle-SymbolicName","testbundle");
    mainAttributes.putValue("Foo","Bar Bar");
    mainAttributes.putValue(SpiFlyConstants.SPI_CONSUMER_HEADER,Test2Class.class.getName() + "#getTCCL()");
    JarOutputStream jos=new JarOutputStream(new FileOutputStream(jarFile),mf);
    jos.putNextEntry(new ZipEntry(testClassFileName));
    Streams.pump(testClassURL.openStream(),jos);
    jos.putNextEntry(new ZipEntry(test2ClassFileName));
    Streams.pump(test2ClassURL.openStream(),jos);
    jos.putNextEntry(new ZipEntry(test3ClassFileName));
    Streams.pump(test3ClassURL.openStream(),jos);
    jos.close();
    Main.main(jarFile.getCanonicalPath());
    expectedFile=new File(jarFile.getParent(),jarFile.getName().replaceAll("[.]jar","_spifly.jar"));
    Assert.assertTrue("A processed separate bundle should have been created",expectedFile.exists());
    JarFile transformedJarFile=new JarFile(expectedFile);
    Manifest expectedMF=transformedJarFile.getManifest();
    Assert.assertEquals("1.0",expectedMF.getMainAttributes().getValue("Manifest-Version"));
    Assert.assertEquals("2.0",expectedMF.getMainAttributes().getValue("Bundle-ManifestVersion"));
    Assert.assertEquals("testbundle",expectedMF.getMainAttributes().getValue("Bundle-SymbolicName"));
    Assert.assertEquals("Bar Bar",expectedMF.getMainAttributes().getValue("Foo"));
    Assert.assertEquals("org.apache.aries.spifly;version=\"[1.0.0,1.1.0)\"",expectedMF.getMainAttributes().getValue("Import-Package"));
    Assert.assertNull(expectedMF.getMainAttributes().get(SpiFlyConstants.SPI_CONSUMER_HEADER));
    JarFile initialJarFile=new JarFile(jarFile);
    byte[] orgBytes=Streams.suck(initialJarFile.getInputStream(new ZipEntry(testClassFileName)));
    byte[] transBytes=Streams.suck(transformedJarFile.getInputStream(new ZipEntry(testClassFileName)));
    Assert.assertFalse("The transformed class should be different",Arrays.equals(orgBytes,transBytes));
    byte[] orgBytes2=Streams.suck(initialJarFile.getInputStream(new ZipEntry(test2ClassFileName)));
    byte[] nonTransBytes2=Streams.suck(transformedJarFile.getInputStream(new ZipEntry(test2ClassFileName)));
    Assert.assertArrayEquals(orgBytes2,nonTransBytes2);
    byte[] orgBytes3=Streams.suck(initialJarFile.getInputStream(new ZipEntry(test3ClassFileName)));
    byte[] nonTransBytes3=Streams.suck(transformedJarFile.getInputStream(new ZipEntry(test3ClassFileName)));
    Assert.assertArrayEquals(orgBytes3,nonTransBytes3);
    initialJarFile.close();
    transformedJarFile.close();
  }
  finally {
    jarFile.delete();
    if (expectedFile != null)     expectedFile.delete();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.spifly.statictool.RequirementTest </h4><pre class="type-4 type-3 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testConsumerBundle() throws Exception {
  String testClassFileName=TestClass.class.getName().replace('.','/') + ".class";
  URL testClassURL=getClass().getResource("/" + testClassFileName);
  String test2ClassFileName=Test2Class.class.getName().replace('.','/') + ".class";
  URL test2ClassURL=getClass().getResource("/" + test2ClassFileName);
  String test3ClassFileName=Test3Class.class.getName().replace('.','/') + ".class";
  URL test3ClassURL=getClass().getResource("/" + test3ClassFileName);
  File jarFile=new File(System.getProperty("java.io.tmpdir") + "/testjar_" + System.currentTimeMillis()+ ".jar");
  File expectedFile=null;
  try {
    Manifest mf=new Manifest();
    Attributes mainAttributes=mf.getMainAttributes();
    mainAttributes.putValue("Manifest-Version","1.0");
    mainAttributes.putValue("Bundle-ManifestVersion","2.0");
    mainAttributes.putValue("Bundle-SymbolicName","testbundle");
    mainAttributes.putValue("Foo","Bar Bar");
    mainAttributes.putValue("Import-Package","org.foo.bar");
    mainAttributes.putValue(SpiFlyConstants.REQUIRE_CAPABILITY,"osgi.serviceloader; filter:=\"(osgi.serviceloader=org.apache.aries.spifly.mysvc.SPIProvider)\";cardinality:=multiple, " + "osgi.extender; filter:=\"(osgi.extender=osgi.serviceloader.processor)\"");
    JarOutputStream jos=new JarOutputStream(new FileOutputStream(jarFile),mf);
    jos.putNextEntry(new ZipEntry(testClassFileName));
    Streams.pump(testClassURL.openStream(),jos);
    jos.putNextEntry(new ZipEntry(test2ClassFileName));
    Streams.pump(test2ClassURL.openStream(),jos);
    jos.putNextEntry(new ZipEntry(test3ClassFileName));
    Streams.pump(test3ClassURL.openStream(),jos);
    jos.close();
    Main.main(jarFile.getCanonicalPath());
    expectedFile=new File(jarFile.getParent(),jarFile.getName().replaceAll("[.]jar","_spifly.jar"));
    Assert.assertTrue("A processed separate bundle should have been created",expectedFile.exists());
    JarFile transformedJarFile=new JarFile(expectedFile);
    Manifest actualMF=transformedJarFile.getManifest();
    Assert.assertEquals("1.0",actualMF.getMainAttributes().getValue("Manifest-Version"));
    Assert.assertEquals("2.0",actualMF.getMainAttributes().getValue("Bundle-ManifestVersion"));
    Assert.assertEquals("testbundle",actualMF.getMainAttributes().getValue("Bundle-SymbolicName"));
    Assert.assertEquals("Bar Bar",actualMF.getMainAttributes().getValue("Foo"));
    Assert.assertEquals("osgi.serviceloader; filter:=\"(osgi.serviceloader=org.apache.aries.spifly.mysvc.SPIProvider)\";cardinality:=multiple",actualMF.getMainAttributes().getValue(SpiFlyConstants.REQUIRE_CAPABILITY));
    Assert.assertNull("Should not generate this header when processing Require-Capability",actualMF.getMainAttributes().getValue(SpiFlyConstants.PROCESSED_SPI_CONSUMER_HEADER));
    String importPackage=actualMF.getMainAttributes().getValue("Import-Package");
    Assert.assertTrue("org.foo.bar,org.apache.aries.spifly;version=\"[1.0.0,1.1.0)\"".equals(importPackage) || "org.apache.aries.spifly;version=\"[1.0.0,1.1.0)\",org.foo.bar".equals(importPackage));
    JarFile initialJarFile=new JarFile(jarFile);
    byte[] orgBytes=Streams.suck(initialJarFile.getInputStream(new ZipEntry(testClassFileName)));
    byte[] nonTransBytes=Streams.suck(transformedJarFile.getInputStream(new ZipEntry(testClassFileName)));
    Assert.assertArrayEquals(orgBytes,nonTransBytes);
    byte[] orgBytes2=Streams.suck(initialJarFile.getInputStream(new ZipEntry(test2ClassFileName)));
    byte[] nonTransBytes2=Streams.suck(transformedJarFile.getInputStream(new ZipEntry(test2ClassFileName)));
    Assert.assertArrayEquals(orgBytes2,nonTransBytes2);
    byte[] orgBytes3=Streams.suck(initialJarFile.getInputStream(new ZipEntry(test3ClassFileName)));
    byte[] transBytes3=Streams.suck(transformedJarFile.getInputStream(new ZipEntry(test3ClassFileName)));
    Assert.assertFalse("The transformed class should be different",Arrays.equals(orgBytes3,transBytes3));
    initialJarFile.close();
    transformedJarFile.close();
  }
  finally {
    jarFile.delete();
    if (expectedFile != null)     expectedFile.delete();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.core.archive.Aries1425Test </h4><pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testToRequirement(){
  SubsystemContentHeader header=new SubsystemContentHeader(HEADER_1);
  Collection<SubsystemContentHeader.Clause> clauses=header.getClauses();
  assertEquals("Wrong size",3,clauses.size());
  Map<String,SubsystemContentHeader.Clause> map=new HashMap<String,SubsystemContentHeader.Clause>(3);
  for (  SubsystemContentHeader.Clause clause : clauses) {
    map.put(clause.toString(),clause);
  }
  Resource resource=new Resource(){
    @Override public List<Capability> getCapabilities(    String namespace){
      return Collections.emptyList();
    }
    @Override public List<Requirement> getRequirements(    String namespace){
      return Collections.emptyList();
    }
  }
;
  SubsystemContentHeader.Clause clause=map.get(BUNDLE_A);
  Requirement requirement=clause.toRequirement(resource);
  assertTrue("Wrong requirement",ResourceHelper.matches(requirement,new OsgiIdentityCapability(resource,BUNDLE_A,Version.emptyVersion,IdentityNamespace.TYPE_FRAGMENT)));
  assertTrue("Wrong requirement",ResourceHelper.matches(requirement,new OsgiIdentityCapability(resource,BUNDLE_A,Version.emptyVersion,IdentityNamespace.TYPE_BUNDLE)));
  clause=map.get(BUNDLE_B);
  requirement=clause.toRequirement(resource);
  assertFalse("Wrong requirement",ResourceHelper.matches(requirement,new OsgiIdentityCapability(resource,"bundle.b",Version.emptyVersion,IdentityNamespace.TYPE_FRAGMENT)));
  assertTrue("Wrong requirement",ResourceHelper.matches(requirement,new OsgiIdentityCapability(resource,"bundle.b",Version.emptyVersion,IdentityNamespace.TYPE_BUNDLE)));
  clause=map.get(BUNDLE_C);
  requirement=clause.toRequirement(resource);
  assertTrue("Wrong requirement",ResourceHelper.matches(requirement,new OsgiIdentityCapability(resource,"bundle.c",Version.emptyVersion,IdentityNamespace.TYPE_FRAGMENT)));
  assertFalse("Wrong requirement",ResourceHelper.matches(requirement,new OsgiIdentityCapability(resource,"bundle.c",Version.emptyVersion,IdentityNamespace.TYPE_BUNDLE)));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testClauseToString(){
  Set<String> clauseStrs=new HashSet<String>(Arrays.asList(HEADER_1.split(",")));
  SubsystemContentHeader header=new SubsystemContentHeader(HEADER_1);
  Collection<SubsystemContentHeader.Clause> clauses=header.getClauses();
  assertEquals("Wrong size",3,clauses.size());
  for (  SubsystemContentHeader.Clause clause : clauses) {
    String clauseStr=clause.toString();
    assertTrue("Wrong clause",clauseStrs.remove(clauseStr));
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.core.archive.Aries1453Test </h4><pre class="type-4 type-3 type-7 type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void shouldResolveFragmentHostWithVersionRangeAndMatchWithBundlesInThatRange(){
  FragmentHostHeader header=new FragmentHostHeader("host-bundle;bundle-version=\"[9.6.0,10)\"");
  FragmentHostRequirement requirement=new FragmentHostRequirement(header.getClauses().iterator().next(),null);
  FragmentHostCapability capability=new FragmentHostCapability(new BundleSymbolicNameHeader("host-bundle"),new BundleVersionHeader("9.6.1"),new Resource(){
    @Override public List<Capability> getCapabilities(    String namespace){
      return null;
    }
    @Override public List<Requirement> getRequirements(    String namespace){
      return null;
    }
  }
);
  String filterDirective=requirement.getDirectives().get(Namespace.REQUIREMENT_FILTER_DIRECTIVE);
  SimpleFilter simpleFilter=SimpleFilter.parse(filterDirective);
  CapabilitySet capabilitySet=new CapabilitySet(Arrays.asList(HostNamespace.HOST_NAMESPACE),true);
  capabilitySet.addCapability(capability);
  Set<Capability> capabilities=capabilitySet.match(simpleFilter,true);
  Assert.assertTrue(capabilities.size() == 1);
  Assert.assertSame(capabilities.iterator().next(),capability);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.core.archive.GenericHeaderTest </h4><pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testEmptyHeader(){
  try {
    GenericHeader header=new GenericHeader("Foo-Bar","");
    assertEquals("Empty headers are treated the same as those with an empty quoted string","\"\"",header.getValue());
    assertEquals("Empty headers should have one clause",1,header.getClauses().size());
  }
 catch (  Exception e) {
    fail("Empty headers are allowed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.core.internal.LocationTest </h4><pre class="type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnyLocationString(){
  String locationStr="anyLocation";
  Location location=null;
  try {
    location=new Location(locationStr);
  }
 catch (  Throwable t) {
    t.printStackTrace();
    fail("Any location string must be supported");
  }
  assertNull("Wrong symbolic name",location.getSymbolicName());
  assertEquals("Wrong value",locationStr,location.getValue());
  assertNull("Wrong version",location.getVersion());
  try {
    location.open();
    fail("Opening a location that does not represent a URL should fail");
  }
 catch (  MalformedURLException e) {
  }
catch (  Throwable t) {
    t.printStackTrace();
    fail("Wrong exception");
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testSubsystemLocationInvalid() throws Exception {
  String locationString="subsystem://?Subsystem-SymbolicName=org.osgi.service.subsystem.root&Subsystem-Version=1.0.0!/my-subsystem@0.5.0";
  Location location=new Location(locationString);
  assertEquals(locationString,location.getValue());
  try {
    String sn=location.getSymbolicName();
    fail("Expecting an error: " + sn);
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    Version v=location.getVersion();
    fail("Expecting an error: " + v);
  }
 catch (  IllegalArgumentException e) {
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.core.internal.ResolveContextTest </h4><pre class="type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInsertHostedCapability() throws Exception {
  Activator prev=getActivator();
  try {
    Activator activator=createActivator();
    setActivator(activator);
    SubsystemResource res=new SubsystemResource(new File("."));
    ResolveContext rc=new ResolveContext(res);
    HostedCapability hc=EasyMock.createNiceMock(HostedCapability.class);
    List<Capability> caps=new ArrayList<Capability>(){
      @Override public boolean add(      Capability e){
        throw new UnsupportedOperationException();
      }
      @Override public boolean addAll(      Collection<? extends Capability> c){
        throw new UnsupportedOperationException();
      }
      @Override public boolean addAll(      int index,      Collection<? extends Capability> c){
        throw new UnsupportedOperationException();
      }
    }
;
    caps.add(0,EasyMock.createNiceMock(HostedCapability.class));
    assertEquals(1,rc.insertHostedCapability(caps,hc));
    assertSame(hc,caps.get(1));
  }
  finally {
    setActivator(prev);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.AriesSubsystemTest </h4><pre class="type-5 type-13 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether two objects/variables are the same
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testServiceRegistrations(){
  Subsystem root1=null;
  try {
    root1=getRootSubsystem();
  }
 catch (  Exception e) {
    fail(Subsystem.class.getName() + " service not registered");
  }
  AriesSubsystem root2=null;
  try {
    root2=getRootAriesSubsystem();
  }
 catch (  Exception e) {
    fail(AriesSubsystem.class.getName() + " service not registered");
  }
  assertSame("Services should be the same instance",root1,root2);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.BundleEventHookTest </h4><pre class="type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoDeadlockWhenSubsystemsInitializing() throws Exception {
  final Bundle bundle=getSubsystemCoreBundle();
  bundle.stop();
  final AtomicBoolean completed=new AtomicBoolean(false);
  final ExecutorService executor=Executors.newFixedThreadPool(2);
  try {
    bundleContext.addServiceListener(new ServiceListener(){
      @Override public void serviceChanged(      ServiceEvent event){
        Future<?> future=executor.submit(new Runnable(){
          public void run(){
            try {
              Bundle a=bundle.getBundleContext().installBundle(BUNDLE_A,new FileInputStream(BUNDLE_A));
              completed.set(true);
              a.uninstall();
            }
 catch (            Exception e) {
              e.printStackTrace();
            }
          }
        }
);
        try {
          future.get();
          completed.set(true);
        }
 catch (        Exception e) {
          e.printStackTrace();
        }
      }
    }
,"(&(objectClass=org.osgi.service.subsystem.Subsystem)(subsystem.id=0))");
    Future<?> future=executor.submit(new Runnable(){
      public void run(){
        try {
          bundle.start();
        }
 catch (        Exception e) {
          e.printStackTrace();
        }
      }
    }
);
    try {
      future.get(3,TimeUnit.SECONDS);
      assertTrue("Deadlock detected",completed.get());
    }
 catch (    TimeoutException e) {
      fail("Deadlock detected");
    }
  }
  finally {
    executor.shutdownNow();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.CompositeServiceTest </h4><pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCompositeServiceImportExportWildcards() throws Exception {
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put("test","testCompositeServiceImports");
  ServiceRegistration<String> reg=bundleContext.registerService(String.class,"testCompositeServiceImports",props);
  Filter filter=bundleContext.createFilter("(&(objectClass=java.lang.String)(test=tb4))");
  ServiceTracker<String,String> st=new ServiceTracker<String,String>(bundleContext,filter,null);
  st.open();
  Subsystem subsystem=installSubsystemFromFile("composite2.esa");
  try {
    assertEquals(Subsystem.State.INSTALLED,subsystem.getState());
    subsystem.start();
    String svc=st.waitForService(5000);
    assertNotNull("The service registered by the bundle inside the composite cannot be found",svc);
    assertEquals(Subsystem.State.ACTIVE,subsystem.getState());
  }
  finally {
    subsystem.stop();
    uninstallSubsystem(subsystem);
    reg.unregister();
    st.close();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.CustomContentHandlerTest </h4><pre class="type-12 type-5 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomContentInstallationException() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleB".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler(true,"install");
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  assertEquals("Precondition",0,handler.calls.size());
  try {
    installSubsystemFromFile("customContent1.esa");
  }
 catch (  Exception ex) {
  }
  try {
    for (    Bundle b : bundleContext.getBundles()) {
      if ("org.apache.aries.subsystem.itests.customcontent.bundleB".equals(b.getSymbolicName())) {
        fail("Should not have installed the bundle");
      }
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("This test exposes a problem that needs to be fixed, namely that the previous test leaves stuff behind and that " + "customContent1.esa cannot be installed again. Currently ignored until someone finds the time to fix it.") public void testCustomContentInstallationSecondTime() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleB".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler();
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  try {
    Subsystem subsystem=installSubsystemFromFile("customContent1.esa");
    subsystem.uninstall();
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("This test currently doesn't pass, the bundle moves to the active state, while it shouldn't") public void testCustomContentStartException() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleC".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler(true,"start");
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  assertEquals("Precondition",0,handler.calls.size());
  Subsystem subsystem=installSubsystemFromFile("customContent2.esa");
  try {
    assertEquals(Arrays.asList("install:customContent3 sausages = 3"),handler.calls);
    try {
      Bundle theBundle=null;
      for (      Bundle b : bundleContext.getBundles()) {
        if ("org.apache.aries.subsystem.itests.customcontent.bundleC".equals(b.getSymbolicName())) {
          assertEquals(Bundle.INSTALLED,b.getState());
          theBundle=b;
        }
      }
      assertNotNull(theBundle);
      try {
        subsystem.start();
      }
 catch (      Exception ex) {
      }
      assertEquals("There was an exception during start, so the bundle should not be started",Bundle.INSTALLED,theBundle.getState());
    }
  finally {
      subsystem.uninstall();
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomContentInstallationCoordinationFails() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleC".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler(false,"install");
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  assertEquals("Precondition",0,handler.calls.size());
  try {
    installSubsystemFromFile("customContent2.esa");
  }
 catch (  Exception ex) {
  }
  try {
    for (    Bundle b : bundleContext.getBundles()) {
      if ("org.apache.aries.subsystem.itests.customcontent.bundleC".equals(b.getSymbolicName())) {
        fail("Should not have installed the bundle");
      }
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore("This test currently doesn't pass, the bundle moves to the active state, while it shouldn't") public void testCustomContentStartFailCoordination() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleD".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler(false,"start");
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  assertEquals("Precondition",0,handler.calls.size());
  Subsystem subsystem=installSubsystemFromFile("customContent3.esa");
  try {
    assertEquals(Arrays.asList("install:customContent4 sausages = 4"),handler.calls);
    try {
      Bundle theBundle=null;
      for (      Bundle b : bundleContext.getBundles()) {
        if ("org.apache.aries.subsystem.itests.customcontent.bundleD".equals(b.getSymbolicName())) {
          assertEquals(Bundle.INSTALLED,b.getState());
          theBundle=b;
        }
      }
      assertNotNull(theBundle);
      try {
        subsystem.start();
      }
 catch (      Exception ex) {
      }
      assertEquals("The coordination failued during start, so the bundle should not be started",Bundle.INSTALLED,theBundle.getState());
    }
  finally {
      subsystem.uninstall();
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<pre class="type-12 type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCustomContentHandler() throws Exception {
  for (  Bundle b : bundleContext.getBundles()) {
    if ("org.apache.aries.subsystem.itests.customcontent.bundleA".equals(b.getSymbolicName())) {
      fail("Precondition");
    }
  }
  SausagesContentHandler handler=new SausagesContentHandler();
  Dictionary<String,Object> props=new Hashtable<String,Object>();
  props.put(ContentHandler.CONTENT_TYPE_PROPERTY,"foo.sausages");
  ServiceRegistration<ContentHandler> reg=bundleContext.registerService(ContentHandler.class,handler,props);
  try {
    assertEquals("Precondition",0,handler.calls.size());
    Subsystem subsystem=installSubsystemFromFile("customContent.esa");
    try {
      assertEquals(Arrays.asList("install:customContent1 sausages = 1"),handler.calls);
      Collection<Resource> constituents=subsystem.getConstituents();
      assertEquals("The custom content should not show up as a subsystem constituent",1,constituents.size());
      boolean foundBundle=false;
      for (      Bundle b : bundleContext.getBundles()) {
        if ("org.apache.aries.subsystem.itests.customcontent.bundleA".equals(b.getSymbolicName())) {
          foundBundle=true;
        }
      }
      assertTrue(foundBundle);
      boolean foundBundleInConstituents=false;
      for (      Resource c : constituents) {
        for (        Capability idCap : c.getCapabilities(IdentityNamespace.IDENTITY_NAMESPACE)) {
          Object name=idCap.getAttributes().get(IdentityNamespace.IDENTITY_NAMESPACE);
          if ("org.apache.aries.subsystem.itests.customcontent.bundleA".equals(name))           foundBundleInConstituents=true;
        }
      }
      assertTrue(foundBundleInConstituents);
      handler.calls.clear();
      assertEquals(Subsystem.State.INSTALLED,subsystem.getState());
      subsystem.start();
      assertEquals(Arrays.asList("start:customContent1"),handler.calls);
      handler.calls.clear();
      assertEquals(Subsystem.State.ACTIVE,subsystem.getState());
      subsystem.stop();
      assertEquals(Arrays.asList("stop:customContent1"),handler.calls);
      assertEquals(Subsystem.State.RESOLVED,subsystem.getState());
    }
  finally {
      handler.calls.clear();
      subsystem.uninstall();
      assertEquals(Arrays.asList("uninstall:customContent1"),handler.calls);
      assertEquals(Subsystem.State.UNINSTALLED,subsystem.getState());
    }
  }
  finally {
    reg.unregister();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.DynamicImportTest </h4><pre class="type-4 type-5 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("rawtypes") @Test public void testDynamicPackageImportsAddedToSharingPolicyWhenNoImportPackageHeader() throws Exception {
  final AtomicBoolean weavingHookCalled=new AtomicBoolean(false);
  ServiceRegistration reg=bundleContext.registerService(WeavingHook.class,new WeavingHook(){
    @Override public void weave(    WovenClass wovenClass){
      if (BUNDLE_A.equals(wovenClass.getBundleWiring().getBundle().getSymbolicName())) {
        wovenClass.getDynamicImports().add("org.osgi.framework");
        weavingHookCalled.set(true);
      }
    }
  }
,null);
  try {
    Subsystem s=installSubsystemFromFile(APPLICATION_A);
    try {
      assertNull("Import-Package header should not exist",s.getSubsystemHeaders(null).get(Constants.IMPORT_PACKAGE));
      Bundle a=getConstituentAsBundle(s,BUNDLE_A,null,null);
      a.loadClass("Empty");
      assertTrue("Weaving hook not called",weavingHookCalled.get());
      try {
        a.loadClass("org.osgi.framework.Bundle");
      }
 catch (      Exception e) {
        fail("Woven dynamic package import not added to the region's sharing policy");
      }
    }
  finally {
      try {
        s.uninstall();
      }
 catch (      Exception e) {
      }
    }
  }
  finally {
    try {
      reg.unregister();
    }
 catch (    Exception e) {
    }
  }
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void verifyThatDynamicImportNeedsHandling() throws Exception {
  Subsystem subsystem=installSubsystemFromFile("dynamicImport.esa");
  try {
    startSubsystem(subsystem);
    Bundle[] bundles=subsystem.getBundleContext().getBundles();
    for (    Bundle b : bundles) {
      System.out.println(b.getSymbolicName() + " -> " + b.getState());
    }
    fail("dynamicImport.esa started when we didn't expect it to");
  }
 catch (  SubsystemException sx) {
    Throwable cause=sx.getCause();
    assertTrue("BundleException expected",cause instanceof BundleException);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.InstallTest </h4><pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLocationAsEmptyString() throws Exception {
  try {
    Subsystem a=installSubsystemFromFile(getRootSubsystem(),new File(APPLICATION_A),"");
    try {
      BasicSubsystem basic=(BasicSubsystem)a;
      String location=basic.getLocation();
      assertEquals("Location value should be an empty string","",location);
    }
  finally {
      uninstallSubsystemSilently(a);
    }
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.ProvisionPolicyTest </h4><pre class="type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFailInstallFeatureAcceptDependencies() throws Exception {
  Subsystem subsystem=null;
  try {
    subsystem=installSubsystemFromFile(FEATURE_A);
    fail("Feature with provision-policy:=acceptDependencies did not fail installation");
  }
 catch (  SubsystemException e) {
    assertTrue(e.getMessage().contains("Feature subsystems may not declare a provision-policy of acceptDependencies"));
  }
 finally {
    uninstallSubsystemSilently(subsystem);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.ResolutionTest </h4><pre class="type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingBundleRequiredExecutionEnvironment() throws Exception {
  Subsystem applicationB=null;
  try {
    applicationB=installSubsystemFromFile(APPLICATION_B);
    fail("Missing BREE should result in installation failure");
  }
 catch (  Exception e) {
    e.printStackTrace();
    assertTrue("Installation failure should be due to resolution error",e.getCause() instanceof ResolutionException);
  }
 finally {
    uninstallSubsystemSilently(applicationB);
  }
}

</code></pre>

<br>
<pre class="type-4 type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testContentWithNonConstituentDependencyWithNonConstituentDependency() throws Exception {
  registerRepositoryService(BUNDLE_B);
  Subsystem root=getRootSubsystem();
  Bundle bundleC=installBundleFromFile(BUNDLE_C,root);
  try {
    Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
    assertHeaderExists(applicationA,Constants.REQUIRE_CAPABILITY);
    RequireCapabilityHeader header=new RequireCapabilityHeader(applicationA.getSubsystemHeaders(null).get(Constants.REQUIRE_CAPABILITY));
    assertEquals("Wrong number of clauses",1,header.getClauses().size());
    Clause clause=header.getClauses().iterator().next();
    assertEquals("Wrong path","a",clause.getPath());
    assertEquals("Wrong resolution directive",Constants.RESOLUTION_MANDATORY,clause.getDirective(Constants.RESOLUTION_DIRECTIVE).getValue());
    assertEquals("Wrong effective directive",Constants.EFFECTIVE_RESOLVE,clause.getDirective(Constants.EFFECTIVE_DIRECTIVE).getValue());
    try {
      applicationA.start();
    }
 catch (    SubsystemException e) {
      fail("Application A should have started");
    }
 finally {
      stopAndUninstallSubsystemSilently(applicationA);
    }
  }
 catch (  SubsystemException e) {
    fail("Application A should have installed." + e.getMessage());
  }
 finally {
    uninstallSilently(bundleC);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.RootSubsystemTest </h4><pre class="type-5 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRegion() throws Exception {
  RegionDigraph digraph=context().getService(RegionDigraph.class);
  Bundle core=getSubsystemCoreBundle();
  Region kernel=digraph.getRegion(core);
  Subsystem root=getRootSubsystem();
  Bundle rootRegionContext=root.getBundleContext().getBundle();
  Region region=digraph.getRegion(root.getBundleContext().getBundle());
  assertEquals("Wrong region",kernel,region);
  core.uninstall();
  rootRegionContext.uninstall();
  Region user=digraph.createRegion("user");
  user.connectRegion(kernel,digraph.createRegionFilterBuilder().allowAll(RegionFilter.VISIBLE_ALL_NAMESPACE).build());
  kernel.connectRegion(user,digraph.createRegionFilterBuilder().allowAll(RegionFilter.VISIBLE_ALL_NAMESPACE).build());
  core=user.installBundle(normalizeBundleLocation(core.getLocation()));
  user=digraph.getRegion(core);
  core.start();
  root=getRootSubsystem();
  region=digraph.getRegion(root.getBundleContext().getBundle());
  assertEquals("Wrong region",user,region);
  try {
    Subsystem applicationA=installSubsystemFromFile(root,APPLICATION_A);
    uninstallSubsystemSilently(applicationA);
  }
 catch (  Exception e) {
    e.printStackTrace();
    fail("Subsystem should have installed");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.ServiceDependencyTest </h4><pre class="type-4 type-5 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testImportServiceDependencySatisfiedByContent() throws Exception {
  try {
    Subsystem subsystem=installSubsystemFromFile(APPLICATION_C);
    try {
      assertNull("Generated application Subsystem-ImportService header when dependency satisfied by content",subsystem.getSubsystemHeaders(null).get(SubsystemConstants.SUBSYSTEM_IMPORTSERVICE));
    }
  finally {
      uninstallSubsystemSilently(subsystem);
    }
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    fail("Installation must succeed if service dependency is satisfied");
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1368Test </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testApplicationWithFragmentInRepositoryWithSubsystemContentHeaderWithType() throws Exception {
  Subsystem applicationB=installSubsystemFromFile(APPLICATION_B);
  try {
    assertConstituents(3,applicationB);
    startSubsystem(applicationB);
    assertBundleState(Bundle.ACTIVE,BUNDLE_A,applicationB);
    assertBundleState(Bundle.RESOLVED,FRAGMENT_A,applicationB);
    Bundle bundle=context(applicationB).getBundleByName(FRAGMENT_A);
    assertNotNull("Bundle not found: " + FRAGMENT_A,bundle);
    Resource resource=bundle.adapt(BundleRevision.class);
    Capability capability=resource.getCapabilities(IdentityNamespace.IDENTITY_NAMESPACE).get(0);
    String type=String.valueOf(capability.getAttributes().get(IdentityNamespace.CAPABILITY_TYPE_ATTRIBUTE));
    assertEquals("Wrong type",IdentityNamespace.TYPE_FRAGMENT,type);
  }
  finally {
    stopAndUninstallSubsystemSilently(applicationB);
  }
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testApplicationWithFragmentInArchiveWithSubsystemContentHeaderWithType() throws Exception {
  Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
  try {
    assertConstituents(3,applicationA);
    startSubsystem(applicationA);
    assertBundleState(Bundle.ACTIVE,BUNDLE_A,applicationA);
    assertBundleState(Bundle.RESOLVED,FRAGMENT_A,applicationA);
    Bundle bundle=context(applicationA).getBundleByName(FRAGMENT_A);
    assertNotNull("Bundle not found: " + FRAGMENT_A,bundle);
    Resource resource=bundle.adapt(BundleRevision.class);
    Capability capability=resource.getCapabilities(IdentityNamespace.IDENTITY_NAMESPACE).get(0);
    assertEquals("Wrong type",IdentityNamespace.TYPE_FRAGMENT,capability.getAttributes().get(IdentityNamespace.CAPABILITY_TYPE_ATTRIBUTE));
  }
  finally {
    stopAndUninstallSubsystemSilently(applicationA);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1383Test </h4><pre class="type-4 type-7 type-13 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test19() throws Exception {
  Subsystem root=getRootSubsystem();
  subsystemEvents.clear();
  Subsystem feature1=installSubsystem(root,"feature1",new SubsystemArchiveBuilder().symbolicName("feature1").type(SubsystemConstants.SUBSYSTEM_TYPE_FEATURE).build());
  try {
    Subsystem feature2=installSubsystem(root,"feature2",new SubsystemArchiveBuilder().symbolicName("feature2").type(SubsystemConstants.SUBSYSTEM_TYPE_FEATURE + ';' + AriesProvisionDependenciesDirective.INSTALL.toString()).build());
    try {
      SubsystemArchiveBuilder applicationArchive=new SubsystemArchiveBuilder().symbolicName("application").type(SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION + ';' + AriesProvisionDependenciesDirective.RESOLVE.toString()+ ';'+ SubsystemConstants.PROVISION_POLICY_DIRECTIVE+ ":="+ SubsystemConstants.PROVISION_POLICY_ACCEPT_DEPENDENCIES).content("bundle1").bundle("bundle1",new BundleArchiveBuilder().symbolicName("bundle1").importPackage("a").build()).bundle("bundle2",new BundleArchiveBuilder().symbolicName("bundle2").exportPackage("a").build());
      Subsystem application1=feature1.install("application",applicationArchive.build());
      Subsystem application2=feature2.install("application",applicationArchive.build());
      assertSame("Wrong subsystem",application1,application2);
      assertEquals("Wrong subsystem",application1,application2);
      assertChild(feature1,"application");
      assertChild(feature2,"application");
      long id=application1.getSubsystemId();
      assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLING,subsystemEvents.poll(id,5000),ServiceEvent.REGISTERED);
      assertNull("Unexpected event",subsystemEvents.poll(id,1));
      assertConstituent(application1,"bundle1");
      assertNotConstituent(application1,"bundle2");
      application1.start();
      try {
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.INSTALLED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.RESOLVED,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.STARTING,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertEvent(id,"application",Version.emptyVersion,SubsystemConstants.SUBSYSTEM_TYPE_APPLICATION,State.ACTIVE,subsystemEvents.poll(id,5000),ServiceEvent.MODIFIED);
        assertNull("Unexpected event",subsystemEvents.poll(id,1));
        assertConstituent(application1,"bundle2");
      }
  finally {
        stopSubsystemSilently(application1);
      }
    }
  finally {
      uninstallSubsystemSilently(feature2);
    }
  }
  finally {
    uninstallSubsystemSilently(feature1);
  }
}

</code></pre>

<br>
<pre class="type-5 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test8() throws Exception {
  Subsystem root=getRootSubsystem();
  try {
    Subsystem subsystem=installSubsystem(root,APPLICATION_INSTALL_FAILED,applicationInstallFailed(),false);
    uninstallSubsystemSilently(subsystem);
    fail("Subsystem should not have installed");
  }
 catch (  SubsystemException e) {
    e.printStackTrace();
    assertEquals("Subsystem service should not exist",0,bundleContext.getServiceReferences(Subsystem.class,"(" + SubsystemConstants.SUBSYSTEM_ID_PROPERTY + "="+ lastSubsystemId()+ ")").size());
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1425Test </h4><pre class="type-12 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDeployedContentHeader() throws Exception {
  Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
  try {
    Map<String,String> headers=applicationA.getDeploymentHeaders();
    String header=headers.get(SubsystemConstants.DEPLOYED_CONTENT);
    DeployedContentHeader dch=new DeployedContentHeader(header);
    boolean foundClause=false;
    for (    DeployedContentHeader.Clause clause : dch.getClauses()) {
      if (BUNDLE_A.equals(clause.getSymbolicName())) {
        assertEquals("Wrong type",IdentityNamespace.TYPE_FRAGMENT,clause.getType());
        foundClause=true;
        break;
      }
    }
    assertTrue("Missing clause",foundClause);
  }
  finally {
    uninstallSubsystemSilently(applicationA);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1426Test </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNoEffectOnSharingPolicy() throws Exception {
  Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
  try {
    Map<String,String> headers=applicationA.getDeploymentHeaders();
    assertNull("Wrong Require-Capability",headers.get(Constants.REQUIRE_CAPABILITY));
    assertNull("Wrong Subsystem-ImportService",headers.get(SubsystemConstants.SUBSYSTEM_IMPORTSERVICE));
    org.apache.aries.subsystem.core.archive.Header<?> expected=new SubsystemContentHeader("bundle.a.jar;version=\"[0,0]\"");
    org.apache.aries.subsystem.core.archive.Header<?> actual=new SubsystemContentHeader(headers.get(SubsystemConstants.SUBSYSTEM_CONTENT));
    assertEquals("Wrong Subsystem-Content",expected,actual);
    expected=new GenericHeader("Application-ImportService","org.osgi.service.coordinator.Coordinator");
    actual=new GenericHeader("Application-ImportService",headers.get("Application-ImportService"));
    assertEquals("Wrong Application-ImportService",expected,actual);
    BundleContext context=applicationA.getBundleContext();
    assertNull("Coordinator service should not be visible",context.getServiceReference(Coordinator.class));
  }
  finally {
    uninstallSubsystemSilently(applicationA);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.itests.defect.Aries1429Test </h4><pre class="type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingParentChildEdgeTolerated() throws Exception {
  final AtomicBoolean weavingHookCalled=new AtomicBoolean();
  final AtomicReference<FrameworkEvent> frameworkEvent=new AtomicReference<FrameworkEvent>();
  bundleContext.registerService(WeavingHook.class,new WeavingHook(){
    @Override public void weave(    WovenClass wovenClass){
      Bundle bundle=wovenClass.getBundleWiring().getBundle();
      if (BUNDLE_A.equals(bundle.getSymbolicName())) {
        wovenClass.getDynamicImports().add("com.acme.tnt");
        weavingHookCalled.set(true);
      }
    }
  }
,null);
  Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
  try {
    removeConnectionWithParent(applicationA);
    BundleContext context=applicationA.getBundleContext();
    Bundle bundleA=context.installBundle(BUNDLE_A,TinyBundles.bundle().add(getClass().getClassLoader().loadClass("a.A"),InnerClassStrategy.NONE).set(Constants.BUNDLE_SYMBOLICNAME,BUNDLE_A).build(TinyBundles.withBnd()));
    bundleContext.addFrameworkListener(new FrameworkListener(){
      @Override public void frameworkEvent(      FrameworkEvent event){
        if (FrameworkEvent.ERROR == event.getType() && getSubsystemCoreBundle().equals(event.getBundle())) {
          frameworkEvent.set(event);
          if (event.getThrowable() != null) {
            event.getThrowable().printStackTrace();
          }
        }
      }
    }
);
    bundleA.loadClass("a.A");
    assertTrue("Weaving hook not called",weavingHookCalled.get());
    Thread.sleep(1000);
    assertNull("An exception was thrown",frameworkEvent.get());
  }
  finally {
    uninstallSubsystemSilently(applicationA);
  }
}

</code></pre>

<br>
<pre class="type-5 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMissingParentChildEdgeNotTolerated() throws Exception {
  Subsystem applicationA=installSubsystemFromFile(APPLICATION_A);
  try {
    removeConnectionWithParent(applicationA);
    try {
      ((AriesSubsystem)applicationA).addRequirements(Collections.singletonList((Requirement)new TestRequirement.Builder().namespace(PackageNamespace.PACKAGE_NAMESPACE).attribute(PackageNamespace.PACKAGE_NAMESPACE,"org.osgi.framework").build()));
      fail("No exception received");
    }
 catch (    SubsystemException e) {
      Throwable cause=e.getCause();
      assertNotNull("Wrong cause",cause);
      assertEquals("Wrong cause",IllegalStateException.class,cause.getClass());
    }
  }
  finally {
    uninstallSubsystemSilently(applicationA);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.BasicTest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testInstallBundleIntoRootScope() throws Exception {
  Scope scope=getScope();
  int previousSize=scope.getBundles().size();
  String location=getBundleLocation("tb-2.jar");
  URL url=new URL(location);
  InstallInfo tb2Info=new InstallInfo(location,url.openStream());
  ScopeUpdate scopeUpdate=scope.newScopeUpdate();
  scopeUpdate.getBundlesToInstall().add(tb2Info);
  assertTrue(scopeUpdate.commit());
  Bundle b=bundleContext.getBundle(location);
  assertNotNull(b);
  Collection<Bundle> bundles=scope.getBundles();
  assertEquals(previousSize + 1,bundles.size());
  assertTrue(bundles.contains(b));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testCreateChildScope() throws Exception {
  Scope scope=getScope();
  String name="scope1";
  ScopeUpdate parent=scope.newScopeUpdate();
  ScopeUpdate child=parent.newChild(name);
  parent.getChildren().add(child);
  assertTrue(parent.commit());
  Collection<Scope> children=scope.getChildren();
  assertEquals(1,children.size());
  Scope feature1=null;
  for (  Scope s : children) {
    if (name.equals(s.getName())) {
      feature1=s;
      break;
    }
  }
  assertNotNull(feature1);
  assertEmpty(feature1.getBundles());
  assertEmpty(feature1.getChildren());
  assertEquals(1,feature1.getId());
  assertNull(feature1.getLocation());
  assertEquals(name,feature1.getName());
  assertEquals(scope,feature1.getParent());
  assertEmpty(feature1.getSharePolicies(SharePolicy.TYPE_EXPORT));
  assertEmpty(feature1.getSharePolicies(SharePolicy.TYPE_IMPORT));
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Basic test of the initial state of the root scope.
 */
@Test public void testRootScopeInitialState(){
  Scope scope=getScope();
  Collection<Bundle> bundles=Arrays.asList(bundleContext.getBundles());
  assertCollectionEquals(bundles,scope.getBundles());
  assertEmpty(scope.getChildren());
  assertEquals(0,scope.getId());
  assertNull(scope.getLocation());
  assertEquals("root",scope.getName());
  assertNull(scope.getParent());
  assertEmpty(scope.getSharePolicies(SharePolicy.TYPE_EXPORT));
  assertEmpty(scope.getSharePolicies(SharePolicy.TYPE_IMPORT));
  assertNotNull(scope.newScopeUpdate());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.BundleVisibilityTest </h4><pre class="type-4 type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Install a bundle into the same scope as this one. Both bundles should be
 * able to see each other.
 * @throws Exception
 */
@Test public void test1() throws Exception {
  Scope scope=getScope();
  assertTrue(scope.getBundles().contains(bundleContext.getBundle()));
  ScopeUpdate scopeUpdate=scope.newScopeUpdate();
  String location=getBundleLocation("tb-4.jar");
  assertNull(bundleContext.getBundle(location));
  URL url=new URL(location);
  InstallInfo installInfo=new InstallInfo(location,url.openStream());
  scopeUpdate.getBundlesToInstall().add(installInfo);
  scopeUpdate.commit();
  Bundle bundle=bundleContext.getBundle(location);
  assertTrue(scope.getBundles().contains(bundle));
  bundle.start();
  ServiceReference<BundleProvider> bundleProviderRef=bundleContext.getServiceReference(BundleProvider.class);
  BundleProvider bundleProvider=bundleContext.getService(bundleProviderRef);
  assertTrue(bundleProvider.getBundles().contains(bundleContext.getBundle()));
  assertTrue(Arrays.asList(bundleContext.getBundles()).contains(bundle));
  assertNotNull(bundleContext.getBundle(bundle.getBundleId()));
  assertNotNull(bundleProvider.getBundle(bundle.getBundleId()));
  bundleContext.ungetService(bundleProviderRef);
  bundle.uninstall();
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Install a bundle into a different scope than this one. Neither bundle
 * should be able to see the other.
 * @throws Exception
 */
@Test public void test2() throws Exception {
  Scope scope=getScope();
  assertTrue(scope.getBundles().contains(bundleContext.getBundle()));
  ScopeUpdate scopeUpdate=scope.newScopeUpdate();
  ScopeUpdate child=scopeUpdate.newChild("tb4");
  scopeUpdate.getChildren().add(child);
  String location=getBundleLocation("tb-4.jar");
  assertNull(bundleContext.getBundle(location));
  URL url=new URL(location);
  InstallInfo installInfo=new InstallInfo(location,url.openStream());
  child.getBundlesToInstall().add(installInfo);
  addPackageImportPolicy("org.osgi.framework",child);
  addPackageImportPolicy("org.apache.aries.subsystem.scope",child);
  addPackageImportPolicy("org.apache.aries.subsystem.scope.itests",child);
  addServiceExportPolicy(BundleProvider.class,child);
  scopeUpdate.commit();
  Bundle bundle=bundleContext.getBundle(location);
  assertNotNull(bundle);
  Collection<Scope> childScopes=scope.getChildren();
  assertEquals(1,childScopes.size());
  assertTrue(childScopes.iterator().next().getBundles().contains(bundle));
  bundle.start();
  ServiceReference<BundleProvider> bundleProviderRef=bundleContext.getServiceReference(BundleProvider.class);
  BundleProvider bundleProvider=bundleContext.getService(bundleProviderRef);
  assertFalse(Arrays.asList(bundleContext.getBundles()).contains(bundle));
  assertNull(bundleContext.getBundle(bundle.getBundleId()));
  assertFalse(bundleProvider.getBundles().contains(bundleContext.getBundle()));
  assertNull(bundleProvider.getBundle(bundleContext.getBundle().getBundleId()));
  bundleContext.ungetService(bundleProviderRef);
  bundle.uninstall();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.GetScopeServiceTest </h4><pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * A new scope is created as a child of the root scope and the tb3 bundle
 * is added to it. The tb3 bundle should receive and be in the new scope.
 * The bundle is added directly as opposed to via an InstallInfo.
 * @throws Exception
 */
@Test public void test4() throws Exception {
  Scope scope=getScope();
  Bundle bundle=installBundle("tb-3.jar");
  ScopeUpdate scopeUpdate=scope.newScopeUpdate();
  scopeUpdate.getBundles().remove(bundle);
  ScopeUpdate child=scopeUpdate.newChild("tb3");
  scopeUpdate.getChildren().add(child);
  child.getBundles().add(bundle);
  addPackageImportPolicy("org.osgi.framework",child);
  addPackageImportPolicy("org.apache.aries.subsystem.scope",child);
  addPackageImportPolicy("org.apache.aries.subsystem.scope.itests",child);
  addServiceImportPolicy(Scope.class,child);
  addServiceExportPolicy(ScopeProvider.class,child);
  scopeUpdate.commit();
  bundle.start();
  ServiceReference<ScopeProvider> scopeProviderRef=bundleContext.getServiceReference(ScopeProvider.class);
  ScopeProvider scopeProvider=bundleContext.getService(scopeProviderRef);
  scope=scopeProvider.getScope();
  assertEquals("tb3",scope.getName());
  assertTrue(scope.getBundles().contains(bundle));
  bundleContext.ungetService(scopeProviderRef);
  bundle.uninstall();
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * The tb3 bundle should also be in and receive the root scope by default.
 * @throws Exception
 */
@Test public void test2() throws Exception {
  Bundle bundle=installBundle("tb-3.jar");
  bundle.start();
  ServiceReference<ScopeProvider> scopeProviderRef=bundleContext.getServiceReference(ScopeProvider.class);
  ScopeProvider scopeProvider=bundleContext.getService(scopeProviderRef);
  Scope scope=scopeProvider.getScope();
  assertEquals(getScope(),scope);
  assertTrue(scope.getBundles().contains(bundle));
  bundleContext.ungetService(scopeProviderRef);
  bundle.uninstall();
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * A new scope is created as a child of the root scope and the tb3 bundle
 * is added to it. The tb3 bundle should receive and be in the new scope.
 * @throws Exception
 */
@Test public void test3() throws Exception {
  Scope scope=getScope();
  ScopeUpdate scopeUpdate=scope.newScopeUpdate();
  ScopeUpdate child=scopeUpdate.newChild("tb3");
  scopeUpdate.getChildren().add(child);
  String location=getBundleLocation("tb-3.jar");
  URL url=new URL(location);
  InstallInfo installInfo=new InstallInfo(location,url.openStream());
  child.getBundlesToInstall().add(installInfo);
  addPackageImportPolicy("org.osgi.framework",child);
  addPackageImportPolicy("org.apache.aries.subsystem.scope",child);
  addPackageImportPolicy("org.apache.aries.subsystem.scope.itests",child);
  addServiceImportPolicy(Scope.class,child);
  addServiceExportPolicy(ScopeProvider.class,child);
  scopeUpdate.commit();
  Bundle bundle=bundleContext.getBundle(location);
  bundle.start();
  ServiceReference<ScopeProvider> scopeProviderRef=bundleContext.getServiceReference(ScopeProvider.class);
  ScopeProvider scopeProvider=bundleContext.getService(scopeProviderRef);
  scope=scopeProvider.getScope();
  assertEquals("tb3",scope.getName());
  assertTrue(scope.getBundles().contains(bundle));
  bundleContext.ungetService(scopeProviderRef);
  bundle.uninstall();
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * The test bundle should be in and receive the root scope by default. The
 * root scope will always have an ID of '0' and name of 'root'.
 * @throws Exception
 */
@Test public void test1() throws Exception {
  Scope scope=getScope();
  assertEquals(0,scope.getId());
  assertEquals("root",scope.getName());
  assertTrue(scope.getBundles().contains(bundleContext.getBundle()));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.MoveBundleTest </h4><pre class="type-3 type-7 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * Create two scopes off of the root scope with the following structure.
 * R
 * / \
 * S1   S2
 * Install a bundle using the test bundle's bundle context. This should add
 * the bundle to R since the test bundle is in R. Next, move the bundle 
 * into S1. Finally, move the bundle into S2.
 * @throws Exception
 */
@Test @Ignore public void test1() throws Exception {
  Bundle tb2=installBundle("tb-2.jar");
  Scope root=getScope();
  ScopeUpdate rootUpdate=root.newScopeUpdate();
  ScopeUpdate s1Update=rootUpdate.newChild("S1");
  ScopeUpdate s2Update=rootUpdate.newChild("S2");
  rootUpdate.getChildren().add(s1Update);
  rootUpdate.getChildren().add(s2Update);
  rootUpdate.commit();
  Scope s1=s1Update.getScope();
  Scope s2=s2Update.getScope();
  assertTrue(root.getBundles().contains(tb2));
  assertFalse(s1.getBundles().contains(tb2));
  assertFalse(s2.getBundles().contains(tb2));
  rootUpdate=root.newScopeUpdate();
  rootUpdate.getBundles().remove(tb2);
  s1Update=findChildUpdate("S1",rootUpdate);
  s1Update.getBundles().add(tb2);
  rootUpdate.commit();
  assertFalse(root.getBundles().contains(tb2));
  assertTrue(s1.getBundles().contains(tb2));
  assertFalse(s2.getBundles().contains(tb2));
  rootUpdate=root.newScopeUpdate();
  s1Update=findChildUpdate("S1",rootUpdate);
  s1Update.getBundles().remove(tb2);
  s2Update=findChildUpdate("S2",rootUpdate);
  s2Update.getBundles().add(tb2);
  rootUpdate.commit();
  assertFalse(root.getBundles().contains(tb2));
  assertFalse(s1.getBundles().contains(tb2));
  assertTrue(s2.getBundles().contains(tb2));
  tb2.uninstall();
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Create one scope off of the root scope with the following structure. 
 * R
 * |
 * S
 * Install a bundle using the test bundle's bundle context. This should add 
 * the bundle to R since the test bundle is in R. Next, move the bundle into
 * S without removing it from R. This should result in an 
 * IllegalStateException. Finally, correct the error using the same 
 * ScopeUpdate objects and commit again. This should succeed, and the bundle
 * should now be in S.
 * @throws Exception
 */
@Test public void test2() throws Exception {
  Bundle tb2=installBundle("tb-2.jar");
  Scope root=getScope();
  ScopeUpdate rootUpdate=root.newScopeUpdate();
  ScopeUpdate sUpdate=rootUpdate.newChild("S");
  rootUpdate.getChildren().add(sUpdate);
  rootUpdate.commit();
  Scope s=sUpdate.getScope();
  assertTrue(root.getBundles().contains(tb2));
  assertFalse(s.getBundles().contains(tb2));
  rootUpdate=root.newScopeUpdate();
  sUpdate=findChildUpdate("S",rootUpdate);
  sUpdate.getBundles().add(tb2);
  try {
    rootUpdate.commit();
    fail();
  }
 catch (  IllegalStateException e) {
  }
  assertTrue(root.getBundles().contains(tb2));
  assertFalse(s.getBundles().contains(tb2));
  rootUpdate.getBundles().remove(tb2);
  rootUpdate.commit();
  assertFalse(root.getBundles().contains(tb2));
  assertTrue(s.getBundles().contains(tb2));
  tb2.uninstall();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.PersistenceTest </h4><pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Stopping and starting the Scope Admin bundle should cause it to pull
 * from the persistent storage. If nothing changed after the original
 * bundle start, the persisted root bundle should look exactly the same
 * as before.
 * @throws Exception
 */
@Test public void test2() throws Exception {
  Scope scope=getScope();
  Bundle bundle=findBundle("org.apache.aries.subsystem.scope.impl");
  assertNotNull(bundle);
  bundle.stop();
  bundle.start();
  assertEquals(0,scope.getId());
  assertEquals("root",scope.getName());
  assertEquals(null,scope.getLocation());
  assertEquals(null,scope.getParent());
  assertEquals(0,scope.getChildren().size());
  assertCollectionEquals(Arrays.asList(bundleContext.getBundles()),scope.getBundles());
  assertEquals(0,scope.getSharePolicies(SharePolicy.TYPE_EXPORT).size());
  assertEquals(0,scope.getSharePolicies(SharePolicy.TYPE_IMPORT).size());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Create two scopes off of the root scope with the following structure.
 * R
 * / \
 * S1   S2
 * S1 contains bundle tb1, one import policy, and one export policy.
 * S2 contains bundle tb2 and two import policies.
 * This configuration should persist between restarts of the Scope Admin
 * bundle.
 * @throws Exception
 */
@Test public void test4() throws Exception {
  Scope root=getScope();
  ScopeUpdate rootUpdate=root.newScopeUpdate();
  ScopeUpdate s1Update=rootUpdate.newChild("S1");
  rootUpdate.getChildren().add(s1Update);
  ScopeUpdate s2Update=rootUpdate.newChild("S2");
  rootUpdate.getChildren().add(s2Update);
  s1Update.getBundlesToInstall().add(new InstallInfo(null,new URL(getBundleLocation("tb-1.jar"))));
  s2Update.getBundlesToInstall().add(new InstallInfo(null,new URL(getBundleLocation("tb-2.jar"))));
  addPackageImportPolicy("org.osgi.framework",s1Update);
  addPackageExportPolicy("org.apache.aries.subsystem.scope.itests.tb1",s1Update);
  addPackageImportPolicy("org.osgi.framework",s2Update);
  addPackageImportPolicy("org.apache.aries.subsystem.scope.itests.tb1",s2Update);
  assertTrue(rootUpdate.commit());
  root=getScope();
  assertEquals(2,root.getChildren().size());
  Scope s1=findChildScope("S1",root);
  Bundle tb1=findBundle("org.apache.aries.subsystem.scope.itests.tb1",s1);
  assertNotNull(tb1);
  assertTrue(s1.getBundles().contains(tb1));
  assertEquals(1,s1.getSharePolicies(SharePolicy.TYPE_IMPORT).get("osgi.wiring.package").size());
  assertEquals(1,s1.getSharePolicies(SharePolicy.TYPE_EXPORT).get("osgi.wiring.package").size());
  Scope s2=findChildScope("S2",root);
  Bundle tb2=findBundle("org.apache.aries.subsystem.scope.itests.tb2",s2);
  assertNotNull(tb2);
  assertTrue(s2.getBundles().contains(tb2));
  assertEquals(2,s2.getSharePolicies(SharePolicy.TYPE_IMPORT).get("osgi.wiring.package").size());
  Bundle scopeAdmin=findBundle("org.apache.aries.subsystem.scope.impl");
  assertNotNull(scopeAdmin);
  scopeAdmin.stop();
  scopeAdmin.start();
  root=getScope();
  assertEquals(2,root.getChildren().size());
  s1=findChildScope("S1",root);
  assertTrue(s1.getBundles().contains(tb1));
  assertEquals(1,s1.getSharePolicies(SharePolicy.TYPE_IMPORT).get("osgi.wiring.package").size());
  assertEquals(1,s1.getSharePolicies(SharePolicy.TYPE_EXPORT).get("osgi.wiring.package").size());
  s2=findChildScope("S2",root);
  assertTrue(s2.getBundles().contains(tb2));
  assertEquals(2,s2.getSharePolicies(SharePolicy.TYPE_IMPORT).get("osgi.wiring.package").size());
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
/** 
 * A scope's persisted bundle data will become stale if bundles are 
 * installed or uninstalled while Scope Admin is not connected to the 
 * environment. This should be detected and dealt with.
 * @throws Exception
 */
@Test @Ignore public void test3() throws Exception {
  Scope scope=getScope();
  Bundle tb1=findBundle("org.apache.aries.subsystem.scope.itests.tb1",scope);
  assertNull(tb1);
  tb1=installBundle("tb-1.jar");
  assertTrue(scope.getBundles().contains(tb1));
  Bundle scopeAdmin=findBundle("org.apache.aries.subsystem.scope.impl");
  assertNotNull(scopeAdmin);
  scopeAdmin.stop();
  scopeAdmin.start();
  scope=getScope();
  assertTrue(scope.getBundles().contains(tb1));
  scopeAdmin.stop();
  tb1.uninstall();
  Bundle tb2=findBundle("org.apache.aries.subsystem.scope.itests.tb2",scope);
  assertNull(tb2);
  tb2=installBundle("tb-2.jar");
  scopeAdmin.start();
  scope=getScope();
  assertFalse(scope.getBundles().contains(tb1));
  assertTrue(scope.getBundles().contains(tb2));
  tb2.uninstall();
  assertFalse(scope.getBundles().contains(tb2));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.ScopeAdminTest </h4><pre class="type-4 type-12 type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleServiceIsolation() throws Exception {
  assertNotNull("scope admin should not be null",scope);
  System.out.println("able to get scope admin service");
  bt=new BundleTracker(bundleContext,Bundle.INSTALLED | Bundle.UNINSTALLED | Bundle.ACTIVE,new BundleTrackerCustomizer(){
    public synchronized Object addingBundle(    Bundle bundle,    BundleEvent event){
      if (event == null) {
        System.out.println("ScopeAdminTest - adding Bundle: " + bundle.getSymbolicName() + " event: null");
      }
 else {
        System.out.println("ScopeAdminTest - adding Bundle: " + bundle.getSymbolicName() + " event: "+ event.getType());
        addEventCount++;
      }
      return bundle;
    }
    public synchronized void modifiedBundle(    Bundle bundle,    BundleEvent event,    Object object){
      if (event == null) {
        System.out.println("ScopeAdminTest - modifying Bundle: " + bundle.getSymbolicName() + " event: null");
      }
 else {
        System.out.println("ScopeAdminTest - modifying Bundle: " + bundle.getSymbolicName() + " event: "+ event.getType());
        modifyEventCount++;
      }
    }
    public synchronized void removedBundle(    Bundle bundle,    BundleEvent event,    Object object){
      if (event == null) {
        System.out.println("ScopeAdminTest - removing Bundle: " + bundle.getSymbolicName() + " event: null");
      }
 else {
        System.out.println("ScopeAdminTest - removing Bundle: " + bundle.getSymbolicName() + " event: "+ event.getType());
        removeEventCount++;
      }
    }
  }
);
  bt.open();
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  addPackageImportPolicy("org.osgi.util.tracker",childScopeUpdate);
  InstallInfo info1=new InstallInfo("helloIsolation",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT"));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info1);
  bundlesToInstall.add(info2);
  su.commit();
  assertEquals("add event count should be 0 since 0 bundles are installed in root scope",0,addEventCount);
  assertEquals("modify event count should be 0",0,modifyEventCount);
  assertEquals("remove event count should be 0",0,removeEventCount);
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    b.start();
  }
  assertEquals("add event count should be 0 since 0 bundles are installed in root scope",0,addEventCount);
  assertEquals("modify event count should be 0",0,modifyEventCount);
  assertEquals("remove event count should be 0",0,removeEventCount);
  try {
    ServiceReference sr=bundleContext.getServiceReference(HelloIsolation.class.getName());
    fail("should not be able to get the sr for HelloIsolation service");
  }
 catch (  Exception ex) {
  }
catch (  Error er) {
  }
  Bundle[] bundles=bundleContext.getBundles();
  for (  Bundle b : bundles) {
    System.out.println("Bundle is " + b.getBundleId() + ": "+ b.getSymbolicName());
    if (b.getSymbolicName().indexOf("org.apache.aries.subsystem.example.helloIsolation") > -1) {
      fail("bundles with name starts with org.apache.aries.subsystem.example.helloIsolation should be in a different scope");
    }
  }
  Collection<Scope> children=scope.getChildren();
  assertEquals(1,children.size());
  for (  Scope child : children) {
    if (child.getName().equals("scope_test1")) {
      Collection<Bundle> buns=child.getBundles();
      assertEquals(2,buns.size());
      assertEquals(0,child.getChildren().size());
      for (      Bundle b : buns) {
        assertTrue(b.getSymbolicName().indexOf("org.apache.aries.subsystem.example.helloIsolation") > -1);
      }
    }
  }
  URL url=new URL("mvn:org.apache.felix/org.apache.felix.fileinstall/2.0.8");
  bundleContext.installBundle("org.apache.felix.fileinstall-rootScope",url.openStream());
  assertEquals("add event count should be 1 since 1 bundles are installed",1,addEventCount);
  assertEquals("modify event count should be 0",0,modifyEventCount);
  assertEquals("remove event count should be 0",0,removeEventCount);
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testPackageSharingFromTestScope() throws Exception {
  assertNotNull("scope admin should not be null",scope);
  System.out.println("able to get scope admin service");
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  addPackageImportPolicy("org.osgi.util.tracker",childScopeUpdate);
  Map<String,List<SharePolicy>> sharePolicies=childScopeUpdate.getSharePolicies(SharePolicy.TYPE_EXPORT);
  final Filter filter1=FrameworkUtil.createFilter("(&" + "(osgi.wiring.package=org.apache.aries.subsystem.example.helloIsolation)" + ")");
  final Filter filter2=FrameworkUtil.createFilter("(&" + "(scope.share.service=org.apache.aries.subsystem.example.helloIsolation.HelloIsolation)" + ")");
  List<SharePolicy> packagePolicies=sharePolicies.get(BundleRevision.PACKAGE_NAMESPACE);
  if (packagePolicies == null) {
    packagePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put(BundleRevision.PACKAGE_NAMESPACE,packagePolicies);
  }
  packagePolicies.add(new SharePolicy(SharePolicy.TYPE_EXPORT,BundleRevision.PACKAGE_NAMESPACE,filter1));
  List<SharePolicy> servicePolicies=sharePolicies.get("scope.share.service");
  if (servicePolicies == null) {
    servicePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put("scope.share.service",servicePolicies);
  }
  servicePolicies.add(new SharePolicy(SharePolicy.TYPE_EXPORT,"scope.share.service",filter2));
  InstallInfo info1=new InstallInfo("helloIsolation",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT"));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info1);
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    b.start();
  }
  URL url1=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT");
  Bundle helloIsolationRef=bundleContext.installBundle("helloIsolationRef1-rootScope",url1.openStream());
  try {
    helloIsolationRef.start();
  }
 catch (  Exception ex) {
    fail("should be able to start helloIsolationRef by import packages from scope_test1");
  }
  helloIsolationRef.uninstall();
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testPackageSharingFromRootScope() throws Exception {
  URL url1=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT");
  Bundle helloIsolation=bundleContext.installBundle("helloIsolation1-rootScope",url1.openStream());
  try {
    helloIsolation.start();
  }
 catch (  Exception ex) {
    fail("should be able to start helloIsolation");
  }
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  Map<String,List<SharePolicy>> sharePolicies=childScopeUpdate.getSharePolicies(SharePolicy.TYPE_IMPORT);
  final Filter filter1=FrameworkUtil.createFilter("(&" + "(osgi.wiring.package=org.apache.aries.subsystem.example.helloIsolation)" + ")");
  final Filter filter2=FrameworkUtil.createFilter("(&" + "(scope.share.service=org.apache.aries.subsystem.example.helloIsolation.HelloIsolation)" + ")");
  List<SharePolicy> packagePolicies=sharePolicies.get(BundleRevision.PACKAGE_NAMESPACE);
  if (packagePolicies == null) {
    packagePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put(BundleRevision.PACKAGE_NAMESPACE,packagePolicies);
  }
  packagePolicies.add(new SharePolicy(SharePolicy.TYPE_IMPORT,BundleRevision.PACKAGE_NAMESPACE,filter1));
  List<SharePolicy> servicePolicies=sharePolicies.get("scope.share.service");
  if (servicePolicies == null) {
    servicePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put("scope.share.service",servicePolicies);
  }
  servicePolicies.add(new SharePolicy(SharePolicy.TYPE_IMPORT,"scope.share.service",filter2));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    try {
      b.start();
    }
 catch (    Exception ex) {
      ex.printStackTrace();
      fail("should be able to start helloIsolationRef in scope_test1");
    }
  }
  helloIsolation.uninstall();
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testScopeAffinity() throws Exception {
  Scope scope1=createScope(scope,"scope_test1","mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT","0.3");
  Scope scope2=createScope(scope,"scope_test2","mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT","2.0");
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test3");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  Scope scope3=childScopeUpdate.getScope();
  Map<String,List<SharePolicy>> sharePolicies=childScopeUpdate.getSharePolicies(SharePolicy.TYPE_IMPORT);
  final Filter filter1=FrameworkUtil.createFilter("(&" + "(osgi.wiring.package=org.apache.aries.subsystem.example.helloIsolation)" + ")");
  final Filter filter2=FrameworkUtil.createFilter("(&" + "(scope.share.service=org.apache.aries.subsystem.example.helloIsolation.HelloIsolation)" + ")");
  List<SharePolicy> packagePolicies=sharePolicies.get(BundleRevision.PACKAGE_NAMESPACE);
  if (packagePolicies == null) {
    packagePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put(BundleRevision.PACKAGE_NAMESPACE,packagePolicies);
  }
  packagePolicies.add(new SharePolicy(SharePolicy.TYPE_IMPORT,BundleRevision.PACKAGE_NAMESPACE,filter1));
  List<SharePolicy> servicePolicies=sharePolicies.get("scope.share.service");
  if (servicePolicies == null) {
    servicePolicies=new ArrayList<SharePolicy>();
    sharePolicies.put("scope.share.service",servicePolicies);
  }
  servicePolicies.add(new SharePolicy(SharePolicy.TYPE_IMPORT,"scope.share.service",filter2));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    try {
      b.start();
    }
 catch (    Exception ex) {
      ex.printStackTrace();
      fail("should be able to start helloIsolationRef in scope_test1");
    }
  }
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  scopes.clear();
  su.commit();
  assertTrue(scope.getChildren().isEmpty());
  assertTrue(scope.newScopeUpdate().getChildren().isEmpty());
}

</code></pre>

<br>
<pre class="type-4 type-5 type-3 type-7 type-1 type-8 type-2 type-14 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Is not executed with the test suite">IgnoredMethod</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
- Is not executed with the test suite
"></span><br>
@Test @Ignore public void testPackageIsolation() throws Exception {
  assertNotNull("scope admin should not be null",scope);
  System.out.println("able to get scope admin service");
  ScopeUpdate su=scope.newScopeUpdate();
  ScopeUpdate childScopeUpdate=su.newChild("scope_test1");
  su.getChildren().add(childScopeUpdate);
  addPackageImportPolicy("org.osgi.framework",childScopeUpdate);
  addPackageImportPolicy("org.osgi.util.tracker",childScopeUpdate);
  InstallInfo info1=new InstallInfo("helloIsolation",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT"));
  InstallInfo info2=new InstallInfo("helloIsolationRef",new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT"));
  List<InstallInfo> bundlesToInstall=childScopeUpdate.getBundlesToInstall();
  bundlesToInstall.add(info1);
  bundlesToInstall.add(info2);
  su.commit();
  Collection<Bundle> bundlesToStart=childScopeUpdate.getScope().getBundles();
  for (  Bundle b : bundlesToStart) {
    b.start();
  }
  URL url1=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolationRef/0.1-SNAPSHOT");
  Bundle helloIsolationRef=bundleContext.installBundle("helloIsolationRef1-rootScope",url1.openStream());
  try {
    helloIsolationRef.start();
    fail("should not be able to start helloIsolationRef since missing import packages");
  }
 catch (  Exception ex) {
  }
  URL url2=new URL("mvn:org.apache.aries.subsystem/org.apache.aries.subsystem.example.helloIsolation/0.1-SNAPSHOT");
  Bundle helloIsolation=bundleContext.installBundle("helloIsolation1-rootScope",url2.openStream());
  helloIsolation.start();
  helloIsolationRef.start();
  helloIsolationRef.uninstall();
  helloIsolation.uninstall();
  su=scope.newScopeUpdate();
  Collection<ScopeUpdate> scopes=su.getChildren();
  childScopeUpdate=scopes.iterator().next();
  Scope childScopeAdmin=childScopeUpdate.getScope();
  assertEquals(scope,childScopeAdmin.getParent());
  scopes.remove(childScopeUpdate);
  su.commit();
  assertFalse(scope.getChildren().contains(childScopeAdmin));
  su=scope.newScopeUpdate();
  assertFalse(su.getChildren().contains(childScopeUpdate));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.ServiceVisibilityTest </h4><pre class="type-4 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Install a bundle registering a service into the same scope as this one. 
 * This bundle should be able to see the service.
 * @throws Exception
 */
@Test public void test1() throws Exception {
  assertTrue(getScope().getBundles().contains(bundleContext.getBundle()));
  ScopeUpdate scopeUpdate=getScope().newScopeUpdate();
  String location=getBundleLocation("tb-7.jar");
  assertNull(bundleContext.getBundle(location));
  URL url=new URL(location);
  InstallInfo installInfo=new InstallInfo(location,url.openStream());
  scopeUpdate.getBundlesToInstall().add(installInfo);
  scopeUpdate.commit();
  Bundle bundle=bundleContext.getBundle(location);
  assertNotNull(bundle);
  assertTrue(getScope().getBundles().contains(bundle));
  bundle.start();
  ServiceReference<Service> serviceRef=bundleContext.getServiceReference(Service.class);
  assertNotNull(serviceRef);
  Service service=bundleContext.getService(serviceRef);
  assertNotNull(service);
  bundleContext.ungetService(serviceRef);
  bundle.uninstall();
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Install a bundle registering a service into a different scope than this 
 * one. This bundle should not be able to see the service.
 * @throws Exception
 */
@Test public void test2() throws Exception {
  assertTrue(getScope().getBundles().contains(bundleContext.getBundle()));
  String location=getBundleLocation("tb-7.jar");
  assertNull(bundleContext.getBundle(location));
  URL url=new URL(location);
  InstallInfo installInfo=new InstallInfo(location,url.openStream());
  ScopeUpdate scopeUpdate=getScope().newScopeUpdate();
  ScopeUpdate child=scopeUpdate.newChild("tb7");
  scopeUpdate.getChildren().add(child);
  child.getBundlesToInstall().add(installInfo);
  addPackageImportPolicy("org.osgi.framework",child);
  addPackageImportPolicy("org.apache.aries.subsystem.scope.itests",child);
  scopeUpdate.commit();
  Bundle bundle=bundleContext.getBundle(location);
  assertNotNull(bundle);
  assertTrue(child.getScope().getBundles().contains(bundle));
  bundle.start();
  ServiceReference<Service> serviceRef=bundleContext.getServiceReference(Service.class);
  assertNull(serviceRef);
  bundle.uninstall();
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.SharePolicyTest </h4><pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Bundle tb5
 * Bundle tb6
 * tb5 imports package exported by tb6
 * tb5 and tb6 in same scope
 * tb5 should resolve
 * Share policies have no effect within the same scope.
 * @throws Exception
 */
@Test public void test1() throws Exception {
  Bundle tb5=null;
  Bundle tb6=null;
  try {
    String tb5Location=getBundleLocation("tb-5.jar");
    String tb6Location=getBundleLocation("tb-6.jar");
    InstallInfo tb5Info=new InstallInfo(tb5Location,new URL(tb5Location));
    InstallInfo tb6Info=new InstallInfo(tb6Location,new URL(tb6Location));
    ScopeUpdate scopeUpdate=getScope().newScopeUpdate();
    scopeUpdate.getBundlesToInstall().add(tb5Info);
    scopeUpdate.commit();
    tb5=findBundleInRootScope("org.apache.aries.subsystem.scope.itests.tb5");
    assertNotNull(tb5);
    FrameworkWiring frameworkWiring=bundleContext.getBundle(0).adapt(FrameworkWiring.class);
    assertFalse(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5})));
    scopeUpdate=getScope().newScopeUpdate();
    scopeUpdate.getBundlesToInstall().add(tb6Info);
    scopeUpdate.commit();
    tb6=findBundleInRootScope("org.apache.aries.subsystem.scope.itests.tb6");
    assertNotNull(tb6);
    assertTrue(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5,tb6})));
  }
  finally {
    uninstallQuietly(tb6);
    uninstallQuietly(tb5);
  }
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Bundle tb5
 * Bundle tb6
 * tb5 imports package exported by tb6
 * tb5 in root scope
 * tb6 in child scope of root
 * tb6 scope exports tb6 package
 * tb5 should resolve
 * There is an implicit import between parent and child. In other words,
 * anything exported by a child is automatically available without the
 * parent explicitly importing it.
 * @throws Exception
 */
@Test public void test3() throws Exception {
  Bundle tb5=null;
  Bundle tb6=null;
  try {
    String tb5Location=getBundleLocation("tb-5.jar");
    String tb6Location=getBundleLocation("tb-6.jar");
    InstallInfo tb5Info=new InstallInfo(tb5Location,new URL(tb5Location));
    InstallInfo tb6Info=new InstallInfo(tb6Location,new URL(tb6Location));
    ScopeUpdate scopeUpdate=getScope().newScopeUpdate();
    scopeUpdate.getBundlesToInstall().add(tb5Info);
    scopeUpdate.commit();
    tb5=findBundleInRootScope("org.apache.aries.subsystem.scope.itests.tb5");
    assertNotNull(tb5);
    FrameworkWiring frameworkWiring=bundleContext.getBundle(0).adapt(FrameworkWiring.class);
    assertFalse(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5})));
    scopeUpdate=getScope().newScopeUpdate();
    ScopeUpdate tb6ScopeUpdate=scopeUpdate.newChild("tb6");
    scopeUpdate.getChildren().add(tb6ScopeUpdate);
    tb6ScopeUpdate.getBundlesToInstall().add(tb6Info);
    addPackageExportPolicy("org.apache.aries.subsystem.scope.itests.tb6",tb6ScopeUpdate);
    scopeUpdate.commit();
    tb6=findBundle("org.apache.aries.subsystem.scope.itests.tb6",tb6ScopeUpdate.getScope());
    assertNotNull(tb6);
    tb5.start();
    assertTrue(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5,tb6})));
  }
  finally {
    uninstallQuietly(tb6);
    uninstallQuietly(tb5);
  }
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Bundle tb5
 * Bundle tb6
 * tb5 imports package exported by tb6
 * tb5 in child scope of root
 * tb6 in different child scope of root
 * tb6 scope exports tb6 package
 * root scope exports tb6 package
 * tb5 scope imports tb6 package
 * tb5 should resolve
 * @throws Exception
 */
@Test public void test4() throws Exception {
  Bundle tb5=null;
  Bundle tb6=null;
  try {
    String tb5Location=getBundleLocation("tb-5.jar");
    String tb6Location=getBundleLocation("tb-6.jar");
    InstallInfo tb5Info=new InstallInfo(tb5Location,new URL(tb5Location));
    InstallInfo tb6Info=new InstallInfo(tb6Location,new URL(tb6Location));
    ScopeUpdate rootUpdate=getScope().newScopeUpdate();
    addPackageExportPolicy("org.apache.aries.subsystem.scope.itests.tb6",rootUpdate);
    ScopeUpdate tb5Update=rootUpdate.newChild("tb5");
    rootUpdate.getChildren().add(tb5Update);
    tb5Update.getBundlesToInstall().add(tb5Info);
    addPackageImportPolicy("org.apache.aries.subsystem.scope.itests.tb6",tb5Update);
    rootUpdate.commit();
    tb5=findBundle("org.apache.aries.subsystem.scope.itests.tb5",tb5Update.getScope());
    assertNotNull(tb5);
    FrameworkWiring frameworkWiring=bundleContext.getBundle(0).adapt(FrameworkWiring.class);
    assertFalse(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5})));
    rootUpdate=getScope().newScopeUpdate();
    ScopeUpdate tb6Update=rootUpdate.newChild("tb6");
    rootUpdate.getChildren().add(tb6Update);
    tb6Update.getBundlesToInstall().add(tb6Info);
    addPackageExportPolicy("org.apache.aries.subsystem.scope.itests.tb6",tb6Update);
    rootUpdate.commit();
    tb6=findBundle("org.apache.aries.subsystem.scope.itests.tb6",tb6Update.getScope());
    assertNotNull(tb6);
    assertTrue(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5,tb6})));
  }
  finally {
    uninstallQuietly(tb6);
    uninstallQuietly(tb5);
  }
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Bundle tb5
 * Bundle tb6
 * tb5 imports package exported by tb6
 * tb5 in root scope
 * tb6 in child scope of root
 * tb6 scope does not export tb6 package
 * tb5 should not resolve
 * @throws Exception
 */
@Test public void test2() throws Exception {
  Bundle tb5=null;
  Bundle tb6=null;
  try {
    String tb5Location=getBundleLocation("tb-5.jar");
    String tb6Location=getBundleLocation("tb-6.jar");
    InstallInfo tb5Info=new InstallInfo(tb5Location,new URL(tb5Location));
    InstallInfo tb6Info=new InstallInfo(tb6Location,new URL(tb6Location));
    ScopeUpdate scopeUpdate=getScope().newScopeUpdate();
    scopeUpdate.getBundlesToInstall().add(tb5Info);
    scopeUpdate.commit();
    tb5=findBundleInRootScope("org.apache.aries.subsystem.scope.itests.tb5");
    assertNotNull(tb5);
    FrameworkWiring frameworkWiring=bundleContext.getBundle(0).adapt(FrameworkWiring.class);
    assertFalse(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5})));
    scopeUpdate=getScope().newScopeUpdate();
    ScopeUpdate tb6ScopeUpdate=scopeUpdate.newChild("tb6");
    scopeUpdate.getChildren().add(tb6ScopeUpdate);
    tb6ScopeUpdate.getBundlesToInstall().add(tb6Info);
    scopeUpdate.commit();
    tb6=findBundle("org.apache.aries.subsystem.scope.itests.tb6",tb6ScopeUpdate.getScope());
    assertNotNull(tb6);
    assertFalse(frameworkWiring.resolveBundles(Arrays.asList(new Bundle[]{tb5,tb6})));
  }
  finally {
    uninstallQuietly(tb6);
    uninstallQuietly(tb5);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.subsystem.scope.itests.UninstallBundleTest </h4><pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test() throws Exception {
  ScopeUpdate scopeUpdate=getScope().newScopeUpdate();
  assertTrue("The bundle should have been removed",scopeUpdate.getBundles().remove(bundle));
  assertTrue("The commit should have been successful",scopeUpdate.commit());
  assertFalse(scopeUpdate.getScope().getBundles().contains(bundle));
  assertFalse("The bundle should have been removed from the scope",getScope().getBundles().contains(bundle));
  assertFalse(Arrays.asList(bundleContext.getBundles()).contains(bundle));
  assertNull("The bundle should have been uninstalled",bundleContext.getBundle(location));
}

</code></pre>

<br>
<pre class="type-4 type-9 type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Allocates resources before the execution of the test cases">TestInitializer</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Allocates resources before the execution of the test cases
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Before public void before0() throws Exception {
  location=getBundleLocation("tb-2.jar");
  bundle=bundleContext.getBundle(location);
  assertNull("The bundle should not exist",bundle);
  installBundles(getScope(),new String[]{"tb-2.jar"});
  bundle=bundleContext.getBundle(location);
  assertNotNull("The bundle should exist",bundle);
  assertTrue("The bundle should part of the scope",getScope().getBundles().contains(bundle));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.transaction.AnnotationEnablingNameSpaceHandlerTest </h4><pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testAnnotationEnabled() throws Exception {
  ComponentDefinitionRegistry cdr=parseCDR("enable-annotations.xml");
  checkCompTop(cdr);
  BeanMetadata pmd=(BeanMetadata)cdr.getComponentDefinition(TxNamespaceHandler.ANNOTATION_PARSER_BEAN_NAME);
  assertNotNull(pmd);
  assertEquals(3,pmd.getArguments().size());
  assertEquals(cdr,((PassThroughMetadata)pmd.getArguments().get(0).getValue()).getObject());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.transaction.ComponentTxDataTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testFindAnnotation() throws NoSuchMethodException, SecurityException {
  ComponentTxData txData=new ComponentTxData(AnnotatedPojo.class);
  Assert.assertTrue(txData.isTransactional());
  assertEquals(TxType.REQUIRED,getType(txData,"increment"));
  assertEquals(TxType.SUPPORTS,getType(txData,"checkValue"));
  assertEquals(TxType.MANDATORY,getType(txData,"getRealObject"));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.transaction.TranStrategyTest </h4><pre class="type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiresNew_BeginNoActiveTran() throws Exception {
  int[] manStatus=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_NO_TRANSACTION,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < manStatus.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(manStatus[i]);
    expect(tm.getTransaction()).andReturn(null);
    tm.begin();
    expectLastCall();
    c.replay();
    try {
      assertNull("TransactionStrategy.REQUIRES_NEW.begin() did not return null when manager status value is " + manStatus[i],TransactionAttribute.REQUIRES_NEW.begin(tm).getActiveTransaction());
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.REQUIRES_NEW.begin() threw unexpected exception when manager status value is " + manStatus[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNotSupportedBegin() throws Exception {
  expect(tm.getStatus()).andReturn(Status.STATUS_ACTIVE);
  expect(tm.suspend()).andReturn(null);
  c.replay();
  TransactionAttribute.NOT_SUPPORTED.begin(tm);
  c.verify();
  int[] invalids=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_NO_TRANSACTION,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < invalids.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(invalids[i]);
    expect(tm.getTransaction()).andReturn(null).anyTimes();
    c.replay();
    try {
      assertNull("TransactionStrategy.NOT_SUPPORTED.begin() did not return null when manager status value is " + invalids[i],TransactionAttribute.NOT_SUPPORTED.begin(tm).getActiveTransaction());
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.NOT_SUPPORTED.begin() threw unexpected exception when manager status value is " + invalids[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNeverBegin() throws Exception {
  expect(tm.getStatus()).andReturn(Status.STATUS_ACTIVE);
  try {
    assertNotNull("TransactionStrategy.NEVER.begin() returned null when manager status is STATUS_ACTIVE",TransactionAttribute.NEVER.begin(tm));
  }
 catch (  IllegalStateException ise) {
  }
catch (  Exception e) {
    fail("TransactionStrategy.NEVER.begin() threw an unexpected exception when tran manager status is STATUS_ACTIVE");
  }
  int[] invalids=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_NO_TRANSACTION,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < invalids.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(invalids[i]);
    expect(tm.getTransaction()).andReturn(null).anyTimes();
    c.replay();
    try {
      assertNull("TransactionStrategy.NEVER.begin() did not return null when manager status value is " + invalids[i],TransactionAttribute.NEVER.begin(tm).getActiveTransaction());
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.NEVER.begin() threw unexpected exception when manager status value is " + invalids[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-4 type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testMandatoryBegin() throws Exception {
  expect(tm.getStatus()).andReturn(Status.STATUS_NO_TRANSACTION);
  try {
    assertNotNull("TransactionStrategy.MANDATORY.begin(tm) returned null when manager " + "status is STATUS_NO_TRANSACTION",TransactionAttribute.MANDATORY.begin(tm).getActiveTransaction());
  }
 catch (  IllegalStateException ise) {
  }
catch (  Exception e) {
    fail("TransactionStrategy.MANDATORY.begin() threw an unexpected exception when tran manager status is STATUS_NO_TRANSACTION");
  }
  int[] invalids=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_ACTIVE,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < invalids.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(invalids[i]);
    expect(tm.getTransaction()).andReturn(null);
    c.replay();
    try {
      Transaction tran=TransactionAttribute.MANDATORY.begin(tm).getActiveTransaction();
      assertNull("TransactionStrategy.MANDATORY.begin() did not return null when manager status value is " + invalids[i],tran);
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.MANDATORY.begin() threw Exception when manager status value is " + invalids[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<pre class="type-15 type-5 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions in iterations">IterativeVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies assertions in iterations
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testRequiredBegin() throws Exception {
  expect(tm.getStatus()).andReturn(Status.STATUS_NO_TRANSACTION);
  expect(tm.getTransaction()).andReturn(null);
  tm.begin();
  expectLastCall();
  c.replay();
  TransactionAttribute.REQUIRED.begin(tm);
  c.verify();
  c.reset();
  int[] invalids=new int[]{Status.STATUS_COMMITTED,Status.STATUS_COMMITTING,Status.STATUS_MARKED_ROLLBACK,Status.STATUS_ACTIVE,Status.STATUS_PREPARED,Status.STATUS_PREPARING,Status.STATUS_ROLLEDBACK,Status.STATUS_ROLLING_BACK,Status.STATUS_UNKNOWN};
  for (int i=0; i < invalids.length; i++) {
    c.reset();
    expect(tm.getStatus()).andReturn(invalids[i]);
    expect(tm.getTransaction()).andReturn(null);
    c.replay();
    try {
      assertNull("TransactionStrategy.REQUIRED.begin() did not return null when manager status value is " + invalids[i],TransactionAttribute.REQUIRED.begin(tm).getActiveTransaction());
    }
 catch (    Exception ise) {
      fail("TransactionStrategy.REQUIRED.begin() threw unexpected exception when manager status value is " + invalids[i]);
    }
    c.verify();
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.FragmentUtilsTest </h4><pre class="type-4 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@SuppressWarnings("unchecked") @Test public void testFragmentCreation() throws Exception {
  Bundle exportBundle=makeBundleWithExports("export.bundle","1.2.3","export.package;version=\"1.0.0\";uses:=\"foo.jar,bar.jar\";singleton:=true");
  Dictionary fragmentHeaders=makeFragmentFromExportBundle(exportBundle).getHeaders();
  assertNotNull("No headers in the fragment",fragmentHeaders);
  assertEquals("Wrong symbolicName","scooby.doo.test.fragment",fragmentHeaders.get(Constants.BUNDLE_SYMBOLICNAME));
  assertEquals("Wrong version","0.0.0",fragmentHeaders.get(Constants.BUNDLE_VERSION));
  assertEquals("Wrong Bundle manifest version","2",fragmentHeaders.get(Constants.BUNDLE_MANIFESTVERSION));
  assertEquals("Wrong Fragment host","scooby.doo;bundle-version=\"0.0.0\"",fragmentHeaders.get(Constants.FRAGMENT_HOST));
  assertEquals("Wrong Bundle Name","Test Fragment bundle",fragmentHeaders.get(Constants.BUNDLE_NAME));
  assertEquals("Wrong Imports","export.package;version=\"1.0.0\";bundle-symbolic-name=\"export.bundle\";bundle-version=\"[1.2.3,1.2.3]\"",fragmentHeaders.get(Constants.IMPORT_PACKAGE));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.VersionRangeTest </h4><pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the version range created correctly
 * @throws Exception
 */
@Test public void testVersionRange() throws Exception {
  String version1="[1.2.3, 4.5.6]";
  String version2="(1, 2]";
  String version3="[2,4)";
  String version4="(1,2)";
  String version5="2";
  String version6="2.3";
  String version7="[1.2.3.q, 2.3.4.p)";
  String version8="1.2.2.5";
  String version9="a.b.c";
  String version10=null;
  String version11="";
  String version12="\"[1.2.3, 4.5.6]\"";
  VersionRange vr=new VersionRange(version1);
  assertEquals("The value is wrong","1.2.3",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","4.5.6",vr.getMaximumVersion().toString());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version2);
  assertEquals("The value is wrong","1.0.0",vr.getMinimumVersion().toString());
  assertTrue("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","2.0.0",vr.getMaximumVersion().toString());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version3);
  assertEquals("The value is wrong","2.0.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","4.0.0",vr.getMaximumVersion().toString());
  assertTrue("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version4);
  assertEquals("The value is wrong","1.0.0",vr.getMinimumVersion().toString());
  assertTrue("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","2.0.0",vr.getMaximumVersion().toString());
  assertTrue("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version5);
  assertEquals("The value is wrong","2.0.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version6);
  assertEquals("The value is wrong","2.3.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version7);
  assertEquals("The value is wrong","1.2.3.q",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","2.3.4.p",vr.getMaximumVersion().toString());
  assertTrue("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version8);
  assertEquals("The value is wrong","1.2.2.5",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  boolean exception=false;
  try {
    vr=new VersionRange(version9);
  }
 catch (  Exception e) {
    exception=true;
  }
  assertTrue("The value is wrong",exception);
  boolean exceptionNull=false;
  try {
    vr=new VersionRange(version10);
  }
 catch (  Exception e) {
    exceptionNull=true;
  }
  assertTrue("The value is wrong",exceptionNull);
  vr=new VersionRange(version11);
  assertEquals("The value is wrong","0.0.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=new VersionRange(version12);
  assertEquals("The value is wrong","1.2.3",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","4.5.6",vr.getMaximumVersion().toString());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIntersectVersionRange_Valid1(){
  VersionRange v1=new VersionRange("[1.0.0,3.0.0]");
  VersionRange v2=new VersionRange("[2.0.0,3.0.0)");
  VersionRange result=v1.intersect(v2);
  assertNotNull(result);
  assertEquals("[2.0.0,3.0.0)",result.toString());
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIntersectVersionRange_Valid3(){
  VersionRange v1=new VersionRange("[2.0.0,2.0.0]");
  VersionRange v2=new VersionRange("[1.0.0,3.0.0]");
  VersionRange result=v1.intersect(v2);
  assertNotNull(result);
  assertEquals("[2.0.0,2.0.0]",result.toString());
}

</code></pre>

<br>
<pre class="type-5 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExactVersion() throws Exception {
  VersionRange vr;
  try {
    vr=new VersionRange("[1.0.0, 2.0.0]",true);
    fail("from 1 to 2 not excludsive is not an exact range");
  }
 catch (  IllegalArgumentException e) {
  }
  vr=new VersionRange("[1.0.0, 1.0.0]",true);
  assertTrue(vr.isExactVersion());
  try {
    vr=new VersionRange("(1.0.0, 1.0.0]",true);
    fail("from 1 (not including 1) to 1, is not valid");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    vr=new VersionRange("[1.0.0, 1.0.0)",true);
    fail("sfrom 1 to 1 (not including 1), is not valid");
  }
 catch (  IllegalArgumentException e) {
  }
  vr=new VersionRange("1.0.0",true);
  assertTrue(vr.isExactVersion());
  vr=new VersionRange("1.0.0",false);
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0, 2.0.0]");
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0, 1.0.0]");
  assertTrue(vr.isExactVersion());
  vr=new VersionRange("1.0.0",true);
  assertEquals(new Version("1.0.0"),vr.getMinimumVersion());
  assertTrue(vr.isExactVersion());
  vr=new VersionRange("1.0.0",false);
  assertEquals(new Version("1.0.0"),vr.getMinimumVersion());
  assertNull(vr.getMaximumVersion());
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0,2.0.0)",false);
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0, 2.0.0]");
  assertFalse(vr.isExactVersion());
  vr=new VersionRange("[1.0.0, 1.0.0]");
  assertTrue(vr.isExactVersion());
}

</code></pre>

<br>
<pre class="type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testIntersectVersionRange_Valid2(){
  VersionRange v1=new VersionRange("[1.0.0,3.0.0)");
  VersionRange v2=new VersionRange("(2.0.0,3.0.0]");
  VersionRange result=v1.intersect(v2);
  assertNotNull(result);
  assertEquals("(2.0.0,3.0.0)",result.toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.filesystem.FileSystemTest </h4><pre class="type-3 type-7 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Make sure that the operations work with zip files inside other zip files. Performance is not going to be great though :)
 */
@Test public void nestedZipInZipInputStream() throws Exception {
  ICloseableDirectory outer=FileSystem.getFSRoot(new FileInputStream("fileSystemTest/outer.zip"));
  try {
    IFile innerFile=outer.getFile("app2.zip");
    assertNotNull(innerFile);
    IDirectory inner=innerFile.convertNested();
    assertNotNull(inner);
    File desiredFile=new File(new File(getTestResourceDir(),"/app1"),"META-INF/APPLICATION.MF");
    runBasicDirTest(inner,"app2.zip/",-1,desiredFile.lastModified());
    runBasicDirTest(inner.toCloseable(),"app2.zip/",desiredFile.length(),desiredFile.lastModified());
  }
  finally {
    outer.close();
    Field f=outer.getClass().getDeclaredField("tempFile");
    f.setAccessible(true);
    assertFalse(((File)f.get(outer)).exists());
  }
}

</code></pre>

<br>
<pre class="type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Make sure that operations work on zip files nested in file IDirectories
 * @throws IOException
 */
@Test public void nestedZipInDirectory() throws IOException {
  IDirectory dir=FileSystem.getFSRoot(new File("").getAbsoluteFile());
  IDirectory zip=dir.getFile("fileSystemTest/app2.zip").convert();
  assertNull(zip);
  zip=dir.getFile("fileSystemTest/app2.zip").convertNested();
  assertNotNull(zip);
  assertNotNull(zip.getParent());
  assertEquals("fileSystemTest",zip.getParent().getName());
  assertEquals("fileSystemTest/app2.zip",zip.getName());
  IFile appMf=zip.getFile("META-INF/APPLICATION.MF");
  assertNotNull(appMf);
  assertEquals("fileSystemTest/app2.zip/META-INF/APPLICATION.MF",appMf.getName());
  checkManifest(appMf.open());
  assertFalse(zip.isRoot());
  assertEquals(dir,zip.getRoot());
  assertEquals(dir,appMf.getRoot());
  checkManifest(appMf.toURL().openStream());
  runBasicDirTest(zip,"fileSystemTest/app2.zip/",appMf.getSize(),appMf.getLastModified());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.filesystem.FileUtilsTest </h4><pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Make sure we get the bundles files recursively regardless of the file extension.
 * @throws IOException
 */
@SuppressWarnings("deprecation") @Test public void testGetBundlesRecursive() throws IOException {
  File tmpDir=new File("../src/test/resources/tmpJars");
  tmpDir.mkdirs();
  for (int n=0; n < 2; n++) {
    ZipFixture bundle=ArchiveFixture.newJar().manifest().attribute(Constants.BUNDLE_SYMBOLICNAME,"aa" + n).attribute(Constants.BUNDLE_MANIFESTVERSION,"2").attribute(Constants.IMPORT_PACKAGE,"a.b.c, p.q.r, x.y.z, javax.naming").attribute(Constants.BUNDLE_VERSION,"1.0.0").end();
    FileOutputStream fout=new FileOutputStream(new File(tmpDir.getAbsoluteFile(),"aa" + n + ((n == 0) ? ".jar" : ".war")));
    bundle.writeOut(fout);
    fout.close();
  }
  File subDir=new File(tmpDir,"subDir");
  subDir.mkdirs();
  for (int n=0; n < 2; n++) {
    ZipFixture bundle=ArchiveFixture.newJar().manifest().attribute(Constants.BUNDLE_SYMBOLICNAME,"aa" + n).attribute(Constants.BUNDLE_MANIFESTVERSION,"2").attribute(Constants.IMPORT_PACKAGE,"a.b.c, p.q.r, x.y.z, javax.naming").attribute(Constants.BUNDLE_VERSION,"1.0.0").end();
    FileOutputStream fout=new FileOutputStream(new File(subDir.getAbsoluteFile(),"aa" + n + ((n == 0) ? ".jar" : ".war")));
    bundle.writeOut(fout);
    fout.close();
  }
  for (int n=0; n < 2; n++) {
    ZipFixture bundle=ArchiveFixture.newJar().manifest().attribute(Constants.BUNDLE_MANIFESTVERSION,"2").attribute(Constants.IMPORT_PACKAGE,"a.b.c, p.q.r, x.y.z, javax.naming").attribute(Constants.BUNDLE_VERSION,"1.0.0").end();
    FileOutputStream fout=new FileOutputStream(new File(tmpDir,"bb" + n + ".jar"));
    bundle.writeOut(fout);
    fout.close();
  }
  IOUtils.writeOut(tmpDir,"simple.jar",new ByteArrayInputStream("abc".getBytes()));
  IOUtils.writeOut(tmpDir,"simple.war",new ByteArrayInputStream("sss".getBytes()));
  IOUtils.writeOut(tmpDir,"simple.txt",new ByteArrayInputStream("abc".getBytes()));
  IOUtils.writeOut(tmpDir,"some/relative/directory/complex.jar",new ByteArrayInputStream("def".getBytes()));
  IOUtils.writeOut(tmpDir,"some/relative/directory/aa/complex2.war",new ByteArrayInputStream("ghi".getBytes()));
  IOUtils.writeOut(tmpDir,"simple",new ByteArrayInputStream("abc".getBytes()));
  List<URI> jarFiles=FileUtils.getBundlesRecursive(tmpDir.toURI());
  assertEquals("There should be 4 entries.",4,jarFiles.size());
  assertTrue("The entry should contain this aa0.jar",jarFiles.contains(new File(tmpDir,"aa0.jar").toURI()));
  assertTrue("The entry should contain this aa1.war",jarFiles.contains(new File(tmpDir,"aa1.war").toURI()));
  assertTrue("The entry should contain this aa0.jar",jarFiles.contains(new File(subDir,"aa0.jar").toURI()));
  assertTrue("The entry should contain this aa1.war",jarFiles.contains(new File(subDir,"aa1.war").toURI()));
  IOUtils.deleteRecursive(tmpDir);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.filesystem.IOUtilsTest </h4><pre class="type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteOutAndDoNotCloseInputStream() throws IOException {
  InputStream is=new InputStream(){
    int idx=0;
    int data[]=new int[]{1,2,3,4,5,-1};
    @Override public int read() throws IOException {
      if (idx < data.length)       return data[idx++];
 else       return -1;
    }
    @Override public void close() throws IOException {
      fail("Close was invoked");
    }
  }
;
  File f=new File("ioUtilsTest/outtest1");
  f.mkdirs();
  IOUtils.writeOutAndDontCloseInputStream(f,"/fred",is);
  File fred=new File(f,"/fred");
  assertTrue(fred.exists());
  File outtest=fred.getParentFile();
  fred.delete();
  outtest.delete();
}

</code></pre>

<br>
<pre class="type-3 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testWriteOut() throws IOException {
  File tmpDir=new File("target/ioUtilsTest/tmp");
  tmpDir.mkdirs();
  IOUtils.writeOut(tmpDir,"simple.txt",new ByteArrayInputStream("abc".getBytes()));
  IOUtils.writeOut(tmpDir,"some/relative/directory/complex.txt",new ByteArrayInputStream("def".getBytes()));
  IOUtils.writeOut(tmpDir,"some/relative/directory/complex2.txt",new ByteArrayInputStream("ghi".getBytes()));
  File simple=new File(tmpDir,"simple.txt");
  assertTrue(simple.exists());
  File complex=new File(tmpDir,"some/relative/directory/complex.txt");
  assertTrue(complex.exists());
  File complex2=new File(tmpDir,"some/relative/directory/complex2.txt");
  assertTrue(complex2.exists());
  BufferedReader r=new BufferedReader(new FileReader(simple));
  assertEquals("abc",r.readLine());
  assertNull(r.readLine());
  r.close();
  r=new BufferedReader(new FileReader(complex));
  assertEquals("def",r.readLine());
  assertNull(r.readLine());
  r.close();
  r=new BufferedReader(new FileReader(complex2));
  assertEquals("ghi",r.readLine());
  assertNull(r.readLine());
  r.close();
}

</code></pre>

<br>
<pre class="type-3 type-1 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects are null
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZipUpAndUnzipAndDeleteRecursive() throws IOException {
  new File("ioUtilsTest").mkdir();
  IOUtils.zipUp(new File("../src/test/resources/zip"),new File("ioUtilsTest/test.zip"));
  ZipFile zip=new ZipFile("ioUtilsTest/test.zip");
  assertNotNull(zip.getEntry("file.txt"));
  assertNotNull(zip.getEntry("subdir/someFile.txt"));
  zip.close();
  IDirectory dir=FileSystem.getFSRoot(new File("ioUtilsTest"));
  IFile izip=dir.getFile("test.zip");
  File output=new File("ioUtilsTest/zipout");
  output.mkdirs();
  IOUtils.unpackZip(izip,output);
  File a=new File(output,"file.txt");
  File b=new File(output,"subdir");
  File c=new File(b,"someFile.txt");
  assertTrue(output.exists());
  assertTrue(a.exists() && a.isFile());
  assertTrue(b.exists() && b.isDirectory());
  assertTrue(c.exists() && c.isFile());
  IOUtils.deleteRecursive(output);
  assertFalse(output.exists());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.log.LoggerTest </h4><pre class="type-13 type-8 type-16 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLogger3(){
  Logger logger=new Logger(ctx);
  logger.open();
  TestLogService tls=new TestLogService();
  ctx.registerService(LogService.class.getName(),tls,null);
  Assert.assertEquals("Precondition",0,tls.logData.size());
  ServiceReference sr=new MockServiceReference();
  logger.log(sr,LogService.LOG_INFO,"Hi");
  Assert.assertEquals(1,tls.logData.size());
  LogData ld=tls.logData.get(0);
  Assert.assertSame(sr,ld.serviceReference);
  Assert.assertEquals(LogService.LOG_INFO,ld.level);
  Assert.assertEquals("Hi",ld.message);
}

</code></pre>

<br>
<pre class="type-13 type-8 type-16 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values related to public fields.">PublicFieldVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Verifies values related to public fields.
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testLogger4(){
  Logger logger=new Logger(ctx);
  logger.open();
  TestLogService tls=new TestLogService();
  ctx.registerService(LogService.class.getName(),tls,null);
  Assert.assertEquals("Precondition",0,tls.logData.size());
  ServiceReference sr=new MockServiceReference();
  Throwable th=new Throwable();
  logger.log(sr,LogService.LOG_INFO,"Hi",th);
  Assert.assertEquals(1,tls.logData.size());
  LogData ld=tls.logData.get(0);
  Assert.assertSame(sr,ld.serviceReference);
  Assert.assertEquals(LogService.LOG_INFO,ld.level);
  Assert.assertEquals("Hi",ld.message);
  Assert.assertEquals(th,ld.throwable);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.manifest.BundleManifestTest </h4><pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZipWithName() throws Exception {
  JarInputStream jarIs=new JarInputStream(new FileInputStream(BUNDLE_WITH_NAME_HEADER));
  assertNull(jarIs.getManifest());
  jarIs.close();
  BundleManifest sut=BundleManifest.fromBundle(BUNDLE_WITH_NAME_HEADER);
  assertEquals(EXPECTED_SYMBOLIC_NAME,sut.getSymbolicName());
  assertEquals(EXPECTED_VERSION,sut.getVersion().toString());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZipWithNameFromIDirectory() throws Exception {
  JarInputStream jarIs=new JarInputStream(new FileInputStream(BUNDLE_WITH_NAME_HEADER));
  assertNull(jarIs.getManifest());
  jarIs.close();
  BundleManifest sut=BundleManifest.fromBundle(FileSystem.getFSRoot(BUNDLE_WITH_NAME_HEADER));
  assertEquals(EXPECTED_SYMBOLIC_NAME,sut.getSymbolicName());
  assertEquals(EXPECTED_VERSION,sut.getVersion().toString());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZipFromIDirectory() throws Exception {
  JarInputStream jarIs=new JarInputStream(new FileInputStream(BUNDLE_WITHOUT_NAME_HEADER));
  assertNull(jarIs.getManifest());
  jarIs.close();
  BundleManifest sut=BundleManifest.fromBundle(FileSystem.getFSRoot(BUNDLE_WITHOUT_NAME_HEADER));
  assertEquals(EXPECTED_SYMBOLIC_NAME,sut.getSymbolicName());
  assertEquals(EXPECTED_VERSION,sut.getVersion().toString());
}

</code></pre>

<br>
<pre class="type-4 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testZip() throws Exception {
  JarInputStream jarIs=new JarInputStream(new FileInputStream(BUNDLE_WITHOUT_NAME_HEADER));
  assertNull(jarIs.getManifest());
  jarIs.close();
  BundleManifest sut=BundleManifest.fromBundle(BUNDLE_WITHOUT_NAME_HEADER);
  assertEquals(EXPECTED_SYMBOLIC_NAME,sut.getSymbolicName());
  assertEquals(EXPECTED_VERSION,sut.getVersion().toString());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.util.manifest.ManifestHeaderProcessorTest </h4><pre class="type-7 type-13 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether two objects/variables are the same">IdentityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to AUT calls
- Verifies whether two objects/variables are the same
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testNameValuePair() throws Exception {
  HashMap<String,String> attrs=new HashMap<String,String>();
  attrs.put("some","value");
  NameValuePair nvp=new NameValuePair("key",attrs);
  assertEquals("The name value pair is not set properly.",nvp.getName(),"key");
  assertEquals("The value is not set properly.",nvp.getAttributes().get("some"),"value");
  attrs=new HashMap<String,String>();
  attrs.put("some","value");
  NameValuePair anotherNvp=new NameValuePair("key",attrs);
  assertEquals("The two objects of NameValuePair is not equal.",nvp,anotherNvp);
  nvp.setName("newKey");
  attrs=new HashMap<String,String>();
  attrs.put("some","newValue");
  nvp.setAttributes(attrs);
  assertEquals("The name value pair is not set properly.",nvp.getName(),"newKey");
  assertEquals("The value is not set properly.",nvp.getAttributes().get("some"),"newValue");
  Map<String,String> nvm1=new HashMap<String,String>();
  nvm1.put("a","b");
  nvm1.put("c","d");
  Map<String,String> nvm2=new HashMap<String,String>();
  nvm2.put("c","d");
  nvm2.put("a","b");
  assertEquals("The maps are not equal.",nvm1,nvm2);
  nvm2.put("e","f");
  assertNotSame("The maps are the same.",nvm1,nvm2);
  NameValuePair nvp1=new NameValuePair("one",nvm1);
  NameValuePair nvp2=new NameValuePair("one",nvm2);
  assertNotSame("The pairs are identical ",nvp1,nvp2);
  nvm1.put("e","f");
  assertEquals("The pairs are not equal.",nvp1,nvp2);
  List<NameValuePair> bundleInfoList1=new ArrayList<NameValuePair>();
  bundleInfoList1.add(nvp1);
  List<NameValuePair> bundleInfoList2=new ArrayList<NameValuePair>();
  bundleInfoList2.add(nvp1);
  bundleInfoList1.removeAll(bundleInfoList2);
  assertEquals("The List should be empty",bundleInfoList1.isEmpty(),true);
  assertNotSame("The two objects of NameValuePair is not equal.",nvp,anotherNvp);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the import package and import service
 * Import-Package: com.acme.foo;come.acm,e.bar;version="[1.23,1.24.5]";resolution:=mandatory
 */
@Test public void testParseImportString(){
  String importPackage="com.acme.foo,come.acm.e.bar;version=\"[1.23,1.24.5]\";resolution:=mandatory;company=\"ACME\",a.b.c;version=1.2.3;company=com";
  Map<String,Map<String,String>> importPackageReturn=ManifestHeaderProcessor.parseImportString(importPackage);
  assertTrue("The package is not set.",importPackageReturn.containsKey("com.acme.foo"));
  assertTrue("The package is not set.",importPackageReturn.containsKey("come.acm.e.bar"));
  assertTrue("The package is not set.",importPackageReturn.containsKey("come.acm.e.bar"));
  assertTrue("The package is not set.",importPackageReturn.containsKey("a.b.c"));
  assertTrue("The package should not contain any attributes.",importPackageReturn.get("com.acme.foo").isEmpty());
  assertEquals("The directive is not set correctly.","[1.23,1.24.5]",importPackageReturn.get("come.acm.e.bar").get("version"));
  assertEquals("The directive is not set correctly.","mandatory",importPackageReturn.get("come.acm.e.bar").get("resolution:"));
  assertEquals("The directive is not set correctly.","ACME",importPackageReturn.get("come.acm.e.bar").get("company"));
  assertEquals("The directive is not set correctly.","1.2.3",importPackageReturn.get("a.b.c").get("version"));
  assertEquals("The directive is not set correctly.","com",importPackageReturn.get("a.b.c").get("company"));
  importPackage="com.acme.foo";
  assertTrue("The package is not set.",importPackageReturn.containsKey("com.acme.foo"));
  assertTrue("The package should not contain any attributes.",importPackageReturn.get("com.acme.foo").isEmpty());
  importPackage="com.acme.foo;com.acme.bar;version=2";
  Map<String,Map<String,String>> importPackageReturn2=ManifestHeaderProcessor.parseImportString(importPackage);
  assertTrue("The package is not set.",importPackageReturn2.containsKey("com.acme.foo"));
  assertTrue("The package is not set.",importPackageReturn2.containsKey("com.acme.bar"));
  assertEquals("The directive is not set correctly.","2",importPackageReturn2.get("com.acme.foo").get("version"));
  assertEquals("The directive is not set correctly.","2",importPackageReturn2.get("com.acme.bar").get("version"));
}

</code></pre>

<br>
<pre class="type-5 type-3 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExactVersion() throws Exception {
  VersionRange vr;
  try {
    vr=ManifestHeaderProcessor.parseVersionRange("[1.0.0, 2.0.0]",true);
    fail("should not get here 1");
  }
 catch (  IllegalArgumentException e) {
  }
  vr=ManifestHeaderProcessor.parseVersionRange("[1.0.0, 1.0.0]",true);
  assertTrue(vr.isExactVersion());
  try {
    vr=ManifestHeaderProcessor.parseVersionRange("(1.0.0, 1.0.0]",true);
    fail("should not get here 2");
  }
 catch (  IllegalArgumentException e) {
  }
  try {
    vr=ManifestHeaderProcessor.parseVersionRange("[1.0.0, 1.0.0)",true);
    fail("should not get here 3");
  }
 catch (  IllegalArgumentException e) {
  }
  vr=ManifestHeaderProcessor.parseVersionRange("[1.0.0, 2.0.0]");
  assertFalse(vr.isExactVersion());
  vr=ManifestHeaderProcessor.parseVersionRange("[1.0.0, 1.0.0]");
  assertTrue(vr.isExactVersion());
}

</code></pre>

<br>
<pre class="type-4 type-12 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testParseExportString(){
  String exportPackage="com.acme.foo,com.acme.bar;version=1,com.acme.bar;version=2;uses:=\"a.b.c,d.e.f\";security=false;mandatory:=security";
  List<NameValuePair> exportPackageReturn=ManifestHeaderProcessor.parseExportString(exportPackage);
  int i=0;
  assertEquals("The number of the packages is wrong.",3,exportPackageReturn.size());
  for (  NameValuePair nvp : exportPackageReturn) {
    if (nvp.getName().equals("com.acme.foo")) {
      i++;
      assertTrue("The directive or attribute should not be set.",nvp.getAttributes().isEmpty());
    }
 else     if ((nvp.getName().equals("com.acme.bar")) && ("2".equals(nvp.getAttributes().get("version")))) {
      i++;
      assertEquals("The directive is wrong.","a.b.c,d.e.f",nvp.getAttributes().get("uses:"));
      assertEquals("The directive is wrong.","false",nvp.getAttributes().get("security"));
      assertEquals("The directive is wrong.","security",nvp.getAttributes().get("mandatory:"));
    }
 else     if ((nvp.getName().equals("com.acme.bar")) && ("1".equals(nvp.getAttributes().get("version")))) {
      i++;
      assertNull("The directive is wrong.",nvp.getAttributes().get("uses:"));
      assertNull("The directive is wrong.",nvp.getAttributes().get("security"));
      assertNull("The directive is wrong.",nvp.getAttributes().get("mandatory:"));
    }
  }
  assertEquals("The names of the packages are wrong.",3,i);
  exportPackage="com.acme.foo";
  exportPackageReturn=ManifestHeaderProcessor.parseExportString(exportPackage);
  int k=0;
  assertEquals("The number of the packages is wrong.",1,exportPackageReturn.size());
  for (  NameValuePair nvp : exportPackageReturn) {
    if (nvp.getName().equals("com.acme.foo")) {
      k++;
      assertTrue("The directive or attribute should not be set.",nvp.getAttributes().isEmpty());
    }
  }
  assertEquals("The names of the packages are wrong.",1,k);
  exportPackage="com.acme.foo;com.acme.bar;version=\"2\";resolution:=optional";
  exportPackageReturn=ManifestHeaderProcessor.parseExportString(exportPackage);
  k=0;
  assertEquals("The number of the packages is wrong.",2,exportPackageReturn.size());
  for (  NameValuePair nvp : exportPackageReturn) {
    if (nvp.getName().equals("com.acme.foo")) {
      k++;
      assertEquals("The attribute is wrong.","2",nvp.getAttributes().get("version"));
      assertEquals("The attribute is wrong.","optional",nvp.getAttributes().get("resolution:"));
    }
 else     if (nvp.getName().equals("com.acme.bar")) {
      k++;
      assertEquals("The attribute is wrong.","2",nvp.getAttributes().get("version"));
      assertEquals("The attribute is wrong.","optional",nvp.getAttributes().get("resolution:"));
    }
  }
  assertEquals("The names of the packages are wrong.",2,k);
  exportPackageReturn=ManifestHeaderProcessor.parseExportString("some.export.with.space.in;directive := spacey");
  assertEquals(exportPackageReturn.toString(),"spacey",exportPackageReturn.get(0).getAttributes().get("directive:"));
}

</code></pre>

<br>
<pre class="type-4 type-12 type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies assertions inside branch conditions">BranchVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies assertions inside branch conditions
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testExportMandatoryAttributes(){
  String exportPackage="com.acme.foo,com.acme.bar;version=2;company=dodo;security=false;mandatory:=\"security,company\"";
  List<NameValuePair> exportPackageReturn=ManifestHeaderProcessor.parseExportString(exportPackage);
  int i=0;
  assertEquals("The number of the packages is wrong.",2,exportPackageReturn.size());
  for (  NameValuePair nvp : exportPackageReturn) {
    if (nvp.getName().equals("com.acme.foo")) {
      i++;
      assertTrue("The directive or attribute should not be set.",nvp.getAttributes().isEmpty());
    }
 else     if ((nvp.getName().equals("com.acme.bar")) && ("2".equals(nvp.getAttributes().get("version")))) {
      i++;
      assertEquals("The directive is wrong.","dodo",nvp.getAttributes().get("company"));
      assertEquals("The directive is wrong.","false",nvp.getAttributes().get("security"));
      assertEquals("The directive is wrong.","security,company",nvp.getAttributes().get("mandatory:"));
    }
  }
  assertEquals("The names of the packages are wrong.",2,i);
}

</code></pre>

<br>
<pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test the version range created correctly
 * @throws Exception
 */
@Test public void testVersionRange() throws Exception {
  String version1="[1.2.3, 4.5.6]";
  String version2="(1, 2]";
  String version3="[2,4)";
  String version4="(1,2)";
  String version5="2";
  String version6="2.3";
  String version7="[1.2.3.q, 2.3.4.p)";
  String version8="1.2.2.5";
  String version9="a.b.c";
  String version10=null;
  String version11="";
  String version12="\"[1.2.3, 4.5.6]\"";
  VersionRange vr=ManifestHeaderProcessor.parseVersionRange(version1);
  assertEquals("The value is wrong","1.2.3",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","4.5.6",vr.getMaximumVersion().toString());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version2);
  assertEquals("The value is wrong","1.0.0",vr.getMinimumVersion().toString());
  assertTrue("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","2.0.0",vr.getMaximumVersion().toString());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version3);
  assertEquals("The value is wrong","2.0.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","4.0.0",vr.getMaximumVersion().toString());
  assertTrue("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version4);
  assertEquals("The value is wrong","1.0.0",vr.getMinimumVersion().toString());
  assertTrue("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","2.0.0",vr.getMaximumVersion().toString());
  assertTrue("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version5);
  assertEquals("The value is wrong","2.0.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version6);
  assertEquals("The value is wrong","2.3.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version7);
  assertEquals("The value is wrong","1.2.3.q",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","2.3.4.p",vr.getMaximumVersion().toString());
  assertTrue("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version8);
  assertEquals("The value is wrong","1.2.2.5",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  boolean exception=false;
  try {
    vr=ManifestHeaderProcessor.parseVersionRange(version9);
  }
 catch (  Exception e) {
    exception=true;
  }
  assertTrue("The value is wrong",exception);
  boolean exceptionNull=false;
  try {
    vr=ManifestHeaderProcessor.parseVersionRange(version10);
  }
 catch (  Exception e) {
    exceptionNull=true;
  }
  assertTrue("The value is wrong",exceptionNull);
  vr=ManifestHeaderProcessor.parseVersionRange(version11);
  assertEquals("The value is wrong","0.0.0",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertNull("The value is wrong",vr.getMaximumVersion());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
  vr=ManifestHeaderProcessor.parseVersionRange(version12);
  assertEquals("The value is wrong","1.2.3",vr.getMinimumVersion().toString());
  assertFalse("The value is wrong",vr.isMinimumExclusive());
  assertEquals("The value is wrong","4.5.6",vr.getMaximumVersion().toString());
  assertFalse("The value is wrong",vr.isMaximumExclusive());
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.versioning.tests.BinaryCompatibilityTest </h4><pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test changing the declared access of a method to permit less access, this should break compatibility.
 */
@Test public void test_jdk_chap13_4_6_2(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",null);
  cw.visitMethod(ACC_PUBLIC + ACC_STATIC,"convert","(Ljava/lang/Object;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",null);
  cw.visitMethod(ACC_STATIC,"convert","(Ljava/lang/Object;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int convert(java.lang.Object) is less accessible.",bcs.get(0));
  assertTrue("Changing the declared access of a member or contructor to permit less access  , this should break binary compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test of binary incompatibility where a class was not abstract is changed to be declared abstract,
 */
@Test public void test_jdk_chap13_4_1_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",null);
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT,"pkg/Test",null,"java/lang/Object",null);
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertTrue("When a class is changed from non abstract to abstract, this should break binary compatibility.",bcs.size() == 1);
  assertEquals(" The class pkg/Test was not abstract but is changed to be abstract.",bcs.get(0));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Changing a method parameter in an interface should  break compatibility.
 */
@Test public void test_jdk_chap13_5_5_2(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitMethod(ACC_PUBLIC,"getFoo","(I)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitMethod(ACC_PUBLIC,"getFoo","(IZ)I",null,null).visitEnd();
  cw.visitMethod(ACC_PUBLIC,"getMoo","I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int getFoo(int) has been deleted or its return type or parameter list has changed.",bcs.get(0));
  assertTrue("Changing a method parameter in an interface should  break compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * If a change to the direct superclass or the set of direct superinterfaces results in any class or interface no longer being a superclass or superinterface, respectively, it will break binary compatibility.
 */
@Test public void test_jdk_chap13_4_4_2(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertFalse("If a change to the direct superclass or the set of direct superinterfaces results in any class or interface no longer being a superclass or superinterface, respectively, it will break binary compatibility.",bcs.isCompatible());
  assertEquals(new HashSet<String>(Arrays.asList(new String[]{"The method int getFooLen(java.lang.String) has been deleted or its return type or parameter list has changed.","The method java.lang.String getFoo() has changed from non abstract to abstract.","The method int getBarLen(java.lang.String) has been deleted or its return type or parameter list has changed.","The method int getBooLen(java.lang.String) has been deleted or its return type or parameter list has changed.","The superclasses or superinterfaces have stopped being super: [versioning/java/files/TestC, versioning/java/files/TestA].","The protected field c has been deleted.","The public field bar was not final but has been changed to be final.","The public field bar was static but is changed to be non static or vice versa.","The public field bar has changed its type."})),new HashSet<String>(bcs));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test a binary incompatibility where a class was not final is changed to be final.
 */
@Test public void test_jdk_chap13_4_2_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",null);
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_FINAL,"pkg/Test",null,"java/lang/Object",null);
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertTrue("When a class is changed from non final to final, this should break binary compatibility.",bcs.size() == 1);
  assertEquals(" The class pkg/Test was not final but is changed to be final.",bcs.get(0));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check containing more abstract methods
 */
@Test public void test_containing_more_abstract_methods(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitMethod(ACC_PUBLIC + ACC_ABSTRACT,"getFoo","(I)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitMethod(ACC_PUBLIC + ACC_ABSTRACT,"getFoo","(I)I",null,null).visitEnd();
  cw.visitMethod(ACC_PUBLIC + ACC_ABSTRACT,"getMoo","()I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  assertTrue("Adding an abstract methods should not break compatibility.",newCV.getClassDeclaration().getBinaryCompatibleStatus(oldCV.getClassDeclaration()).isCompatible());
  Collection<MethodDeclaration> extraMethods=newCV.getClassDeclaration().getExtraMethods(oldCV.getClassDeclaration());
  assertEquals(1,extraMethods.size());
  for (  MethodDeclaration md : extraMethods) {
    assertEquals("getMoo",md.getName());
  }
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_ignore_clinit(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitField(ACC_PUBLIC,"foo","I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitField(ACC_PUBLIC + ACC_STATIC,"bar","I",null,null).visitEnd();
  cw.visitField(ACC_PUBLIC,"foo","I",null,null).visitEnd();
  cw.visitMethod(ACC_PUBLIC,"<clinit>","()V",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  assertTrue("No change should not break compatibility.",newCV.getClassDeclaration().getBinaryCompatibleStatus(oldCV.getClassDeclaration()).isCompatible());
  assertEquals("Containing more abstract methods should return false.",0,newCV.getClassDeclaration().getExtraMethods(oldCV.getClassDeclaration()).size());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * If a field was non-static is changed to be static, then it will break compatibility.
 */
@Test public void test_jdk_chap13_4_9_2(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC + ACC_STATIC,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The public field aa was static but is changed to be non static or vice versa.",bcs.get(0));
  assertTrue("If a field was non-static is changed to be static, then it will break compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Changing a method parameter type is a binary compatibility change.
 */
@Test public void test_jdk_chap13_4_12_2(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitMethod(ACC_PUBLIC,"getCooLen","(Ljava/lang/String;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC + ACC_TRANSIENT,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitMethod(ACC_PUBLIC,"getCooLen","(Ljava/lang/Object;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int getCooLen(java.lang.String) has been deleted or its return type or parameter list has changed.",bcs.get(0));
  assertTrue("Changing a method paramether type will break binary compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * If a method is not private was declared static and is changed to not be declared static, this breaks compatibility.
 */
@Test public void test_jdk_chap13_4_17_2(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitMethod(ACC_PUBLIC + ACC_STATIC,"getCooLen","(Ljava/lang/String;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC + ACC_TRANSIENT,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitMethod(ACC_PUBLIC,"getCooLen","(Ljava/lang/String;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int getCooLen(java.lang.String) has changed from static to non-static or vice versa.",bcs.get(0));
  assertTrue("If a method is not private was declared static and is changed to not be decalared static, this should break compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Check not containing more abstract methods
 */
@Test public void test_not_cotaining_more_abstract_methods(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitMethod(ACC_PUBLIC + ACC_ABSTRACT,"getFoo","(I)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitMethod(ACC_PUBLIC + ACC_ABSTRACT,"getFoo","(I)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  assertTrue("No change should not break compatibility.",newCV.getClassDeclaration().getBinaryCompatibleStatus(oldCV.getClassDeclaration()).isCompatible());
  assertEquals("Containing more abstract methods should return false.",0,newCV.getClassDeclaration().getExtraMethods(oldCV.getClassDeclaration()).size());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Changing field type breaks binary compatibility
 * with pre-existing binaries, provided that the total set of superclasses or superinterfaces, respectively, of the class type loses no members but the one of the fields has changed type.
 */
@Test public void test_jdk_chap13_4_7_4() throws IOException {
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertTrue("Changing the direct superclass or the set of direct superinterfaces of a class type results fields changes. This should breake binary compatibility if not losing any members.",bcs.size() == 2);
  assertEquals(new HashSet<String>(Arrays.asList(new String[]{"The public field bar was static but is changed to be non static or vice versa.","The public field bar has changed its type."})),new HashSet<String>(bcs));
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * If a field is added but is less accessible than the old one or change to static from non-static or from non-static to static.
 */
@Test public void test_jdk_chap13_4_7_2(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PROTECTED,"bar","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The public field bar becomes less accessible.",bcs.get(0));
  assertTrue("The new field conflicts with a field in the super class. Check chapter 13.4.7 java spec for more info.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Changing a method return type in an interface should  break compatibility.
 */
@Test public void test_jdk_chap13_5_5_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitMethod(ACC_PUBLIC,"getFoo","()I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitMethod(ACC_PUBLIC,"getFoo","(I)I",null,null).visitEnd();
  cw.visitMethod(ACC_PUBLIC,"getMoo","()I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int getFoo() has been deleted or its return type or parameter list has changed.",bcs.get(0));
  assertTrue("Changing a method return type in an interface should  break compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void test_jdk_chap13_4_6_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",null);
  cw.visitField(ACC_PUBLIC,"lESS","I",null,new Integer(-1)).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",null);
  cw.visitField(ACC_PROTECTED,"lESS","I",null,new Integer(-1)).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The public field lESS becomes less accessible.",bcs.get(0));
  assertTrue("Changing the declared access of a field to permit less access  , this should break binary compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test deleting a class member or constructor that is not declared private/default breaks binary compatibility.
 */
@Test public void test_jdk_chap13_4_5_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",null);
  cw.visitMethod(ACC_PROTECTED + ACC_ABSTRACT,"convert","(Ljava/lang/Object;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",null);
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int convert(java.lang.Object) has been deleted or its return type or parameter list has changed.",bcs.get(0));
  assertTrue("deleting a class member or constructor that is not declared private breaks binary compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Changes to the interface hierarchy resulting an interface not being a super interface should break compatibility.
 */
@Test public void test_jdk_chap13_5_2_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",null);
  cw.visitMethod(ACC_PUBLIC,"getFoo","I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals(new HashSet<String>(Arrays.asList(new String[]{"The public field bar has been deleted.","The superclasses or superinterfaces have stopped being super: [versioning/java/files/TestB].","The method java.lang.String getFoo() has been deleted or its return type or parameter list has changed."})),new HashSet<String>(bcs));
  assertFalse("Changes to the interface hierarchy resulting an interface not being a super interface should break compatibility.",bcs.isCompatible());
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Deleting a method in an interface should break compatibility.
 */
@Test public void test_jdk_chap13_5_3_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitMethod(ACC_PUBLIC,"getFoo","()I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC + ACC_ABSTRACT + ACC_INTERFACE,"pkg/Test",null,"java/lang/Object",new String[]{"versioning/java/files/TestB"});
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int getFoo() has been deleted or its return type or parameter list has changed.",bcs.get(0));
  assertTrue("Deleting a method in an interface should break compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Testing deleting a public/protected method when there is no such a method in the superclass breaks binary compatibility.
 */
@Test public void test_jdk_chap13_4_11_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitMethod(ACC_PUBLIC,"getFooLen","(Ljava/lang/STring;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC + ACC_TRANSIENT,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int getFooLen(java.lang.STring) has been deleted or its return type or parameter list has changed.",bcs.get(0));
  assertTrue("Deleting a public/protected method when there is no such a method in the superclass breaks binary compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Testing deleting a public/protected method when there is less accessible method in the superclass does break binary compatibility.
 */
@Test public void test_jdk_chap13_4_11_3(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitMethod(ACC_PUBLIC,"getFooLen","(Ljava/lang/String;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC + ACC_TRANSIENT,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int getFooLen(java.lang.String) is less accessible.",bcs.get(0));
  assertTrue("If a change to the direct superclass or the set of direct superinterfaces results in any class or interface no longer being a superclass or superinterface, respectively, it will break binary compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Adding a parameter is a binary compatibility change.
 */
@Test public void test_jdk_chap13_4_12_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitMethod(ACC_PUBLIC,"getCooLen","(Ljava/lang/String;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC + ACC_TRANSIENT,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitMethod(ACC_PUBLIC,"getCooLen","(Ljava/lang/String;I)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int getCooLen(java.lang.String) has been deleted or its return type or parameter list has changed.",bcs.get(0));
  assertTrue("Changing a parameter list will break binary compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Changing a method return type is a binary compatibility change.
 */
@Test public void test_jdk_chap13_4_13_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitMethod(ACC_PUBLIC,"getCooLen","(Ljava/lang/String;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC + ACC_TRANSIENT,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitMethod(ACC_PUBLIC,"getCooLen","(Ljava/lang/String;)[I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int getCooLen(java.lang.String) has been deleted or its return type or parameter list has changed.",bcs.get(0));
  assertTrue("Changing a method return type will break binary compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * If a method is not private was not declared static and is changed to be declared static, this breaks compatibility.
 */
@Test public void test_jdk_chap13_4_17_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitMethod(ACC_PUBLIC,"getCooLen","(Ljava/lang/String;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC + ACC_TRANSIENT,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitMethod(ACC_PUBLIC + ACC_STATIC,"getCooLen","(Ljava/lang/String;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int getCooLen(java.lang.String) has changed from static to non-static or vice versa.",bcs.get(0));
  assertTrue("If a method is not private was not declared static and is changed to be decalared static, this should break compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Change the signature of the field from Colllection<AA> to Collection<String>
 */
@Test public void test_jdk_chap13_4_7_5(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",null);
  cw.visitField(ACC_PUBLIC,"more","Ljava/util/Collection;","Lcom/bim/AA;",null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"java/lang/Object",null);
  cw.visitField(ACC_PROTECTED,"more","Ljava/util/Collection;","Ljava/lang/String;",null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals(new HashSet<String>(Arrays.asList(new String[]{"The public field more becomes less accessible."})),new HashSet<String>(bcs));
  assertTrue("Changing the declared access of a field to permit less access  , this should break binary compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * If a field was static is changed to be non-static, then it will break compatibility.
 */
@Test public void test_jdk_chap13_4_9_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC + ACC_STATIC,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The public field aa was static but is changed to be non static or vice versa.",bcs.get(0));
  assertTrue("If a field was static is changed to be non-static, then it will break compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Changing a method to be abstract is a binary compatibility change.
 */
@Test public void test_jdk_chap13_4_14_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitMethod(ACC_PUBLIC,"getCooLen","(Ljava/lang/String;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC + ACC_TRANSIENT,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitMethod(ACC_PUBLIC + ACC_ABSTRACT,"getCooLen","(Ljava/lang/String;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int getCooLen(java.lang.String) has changed from non abstract to abstract.",bcs.get(0));
  assertTrue("Changing a method to be abstract will break binary compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * If a field was not final is changed to be final, then it can break compatibility.
 */
@Test public void test_jdk_chap13_4_8_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC + ACC_FINAL,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The public field aa was not final but has been changed to be final.",bcs.get(0));
  assertTrue("Change that a public or protected field was final but is changed to be not final will break binary compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<pre class="type-3 type-7 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Changing an instance method that is not final to be final is a binary compatibility change.
 */
@Test public void test_jdk_chap13_4_15_1(){
  ClassWriter cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitMethod(ACC_PUBLIC,"getCooLen","(Ljava/lang/String;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] oldBytes=cw.toByteArray();
  cw=new ClassWriter(0);
  cw.visit(V1_5,ACC_PUBLIC,"pkg/Test",null,"versioning/java/files/TestA",null);
  cw.visitField(ACC_PUBLIC + ACC_TRANSIENT,"aa","Ljava/lang/String;",null,new String("newBar")).visitEnd();
  cw.visitMethod(ACC_PUBLIC + ACC_FINAL,"getCooLen","(Ljava/lang/String;)I",null,null).visitEnd();
  cw.visitEnd();
  byte[] newBytes=cw.toByteArray();
  SemanticVersioningClassVisitor oldCV=new SemanticVersioningClassVisitor(loader);
  SemanticVersioningClassVisitor newCV=new SemanticVersioningClassVisitor(loader);
  ClassReader newCR=new ClassReader(newBytes);
  ClassReader oldCR=new ClassReader(oldBytes);
  newCR.accept(newCV,0);
  oldCR.accept(oldCV,0);
  BinaryCompatibilityStatus bcs=newCV.getClassDeclaration().getBinaryCompatibleStatus((oldCV.getClassDeclaration()));
  assertEquals("The method int getCooLen(java.lang.String) was not final but has been changed to be final.",bcs.get(0));
  assertTrue("Changing an instance method from non-final to final will break binary compatibility.",bcs.size() == 1);
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.versioning.tests.FilterResultsTest </h4><pre class="type-4 type-5 type-3 type-7 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies (un)successful execution of the test case by reporting explicitly a failure">UtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies (un)successful execution of the test case by reporting explicitly a failure
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Contains more than 2 JUnit-based stereotypes
"></span><br>
/** 
 * Test an error is excluded when required. This test uses two bundles each containing the same
 * class, where the later versioned class has had a method removed.
 */
@Test public void testApiMethodErrorExcluded(){
  try {
    File oldBundleFile=new File("../src/test/resources/api_1.0.0.jar");
    BundleInfo oldBundle=new BundleInfo(BundleManifest.fromBundle(oldBundleFile),oldBundleFile);
    File newBundleFile=new File("../src/test/resources/api_1.0.1.jar");
    BundleInfo newBundle=new BundleInfo(BundleManifest.fromBundle(newBundleFile),newBundleFile);
    String bundleSymbolicName=newBundle.getBundleManifest().getSymbolicName();
    URLClassLoader oldClassLoader=new URLClassLoader(new URL[]{oldBundle.getBundle().toURI().toURL()});
    URLClassLoader newClassLoader=new URLClassLoader(new URL[]{newBundle.getBundle().toURI().toURL()});
    List<String> excludes=new ArrayList<String>();
    excludes.add("method void methodToBeExcludedFrom() has been deleted");
    BundleCompatibility bundleCompatibility=new BundleCompatibility(bundleSymbolicName,newBundle,oldBundle,oldClassLoader,newClassLoader,excludes);
    bundleCompatibility.invoke();
    String bundleElement=bundleCompatibility.getBundleElement();
    String pkgElement=bundleCompatibility.getPkgElements().toString();
    assertTrue("Unexpected bundle versioning issue",bundleElement == null);
    assertTrue("Unexpected package versioning issue",pkgElement.trim().length() == 0);
  }
 catch (  IOException e) {
    fail("Unexpected IOException " + e);
  }
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.web.converter.impl.WabConverterTest </h4><pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleContextPathOverride() throws Exception {
  Manifest m=new Manifest();
  Attributes attrs=m.getMainAttributes();
  attrs.putValue(Constants.BUNDLE_SYMBOLICNAME,"org.apache.test");
  attrs.putValue(Constants.BUNDLE_VERSION,"1.0");
  attrs.putValue(Constants.IMPORT_PACKAGE,"org.apache.util,org.apache.test;version=1.0");
  attrs.putValue(Constants.BUNDLE_CLASSPATH,"jsp/classes");
  attrs=convertWithProperties(m,WarToWabConverter.WEB_CONTEXT_PATH,"WebFiles");
  assertEquals("org.apache.test",attrs.getValue(Constants.BUNDLE_SYMBOLICNAME));
  assertEquals("1.0",attrs.getValue(Constants.BUNDLE_VERSION));
  assertTrue(attrs.getValue(Constants.IMPORT_PACKAGE).contains("org.apache.util"));
  assertTrue(attrs.getValue(Constants.IMPORT_PACKAGE).contains("org.apache.test;version=1.0"));
  assertEquals("jsp/classes",attrs.getValue(Constants.BUNDLE_CLASSPATH));
  assertEquals("/WebFiles",attrs.getValue(WarToWabConverter.WEB_CONTEXT_PATH));
}

</code></pre>

<br>
<pre class="type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testDefaultProperties() throws Exception {
  Attributes attrs=convertWithProperties(WarToWabConverter.WEB_CONTEXT_PATH,"/test");
  assertTrue(attrs.getValue(Constants.BUNDLE_SYMBOLICNAME).startsWith(WAR_FILE_NAME_WO_SUFFIX));
  assertEquals("1.0",attrs.getValue(Constants.BUNDLE_VERSION));
  assertEquals(DEFAULT_IMPORTS,attrs.getValue(Constants.IMPORT_PACKAGE));
  assertEquals("WEB-INF/classes",attrs.getValue(Constants.BUNDLE_CLASSPATH));
}

</code></pre>

<br>
<pre class="type-4 type-3 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void testBundleContextPathManifestOverride() throws Exception {
  Manifest m=new Manifest();
  Attributes attrs=m.getMainAttributes();
  attrs.putValue(Constants.BUNDLE_SYMBOLICNAME,"org.apache.test");
  attrs.putValue(WarToWabConverter.WEB_CONTEXT_PATH,"test");
  attrs.putValue(Constants.BUNDLE_VERSION,"1.0");
  attrs.putValue(Constants.IMPORT_PACKAGE,"org.apache.util,org.apache.test;version=1.0");
  attrs.putValue(Constants.BUNDLE_CLASSPATH,"jsp/classes");
  attrs=convertWithProperties(m,WarToWabConverter.WEB_CONTEXT_PATH,"WebFiles");
  assertEquals("org.apache.test",attrs.getValue(Constants.BUNDLE_SYMBOLICNAME));
  assertEquals("1.0",attrs.getValue(Constants.BUNDLE_VERSION));
  assertTrue(attrs.getValue(Constants.IMPORT_PACKAGE).contains("org.apache.util"));
  assertTrue(attrs.getValue(Constants.IMPORT_PACKAGE).contains("org.apache.test;version=1.0"));
  assertEquals("jsp/classes",attrs.getValue(Constants.BUNDLE_CLASSPATH));
  assertEquals("/WebFiles",attrs.getValue(WarToWabConverter.WEB_CONTEXT_PATH));
}

</code></pre>

<br>
<h4 style="margin:0px">Class: org.apache.aries.web.converter.itest.WabConverterITest </h4><pre class="type-4 type-3 type-7 type-1 type-8 type-2 "><code><span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to API calls (Java or TPL) ">APIUtilityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies boolean conditions">BooleanVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies values of objects/variables related to AUT calls">InternalCallVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects are null">NullVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Verifies whether objects/variable are equal to an expected value ">EqualityVerifier</span>&nbsp;<span class="label label-info" style="display: inline-block;" data-toggle="tooltip" title="Contains more than 2 JUnit-based stereotypes">HybridVerifier</span>&nbsp;<span class=" glyphicon glyphicon-comment" aria-hidden="true" label-info" data-toggle="tooltip" title="This method/test case: 
- Verifies values of objects/variables related to API calls (Java or TPL) 
- Verifies boolean conditions
- Verifies values of objects/variables related to AUT calls
- Verifies whether objects are null
- Verifies whether objects/variable are equal to an expected value 
- Contains more than 2 JUnit-based stereotypes
"></span><br>
@Test public void getStarted() throws Exception {
  File testWar=File.createTempFile("test",".war");
  createTestWar(testWar);
  String baseUrl="webbundle:" + testWar.toURI().toURL().toExternalForm();
  assertTrue("Time out waiting for webbundle URL handler",waitForURLHandler(baseUrl));
  Bundle converted=bundleContext.installBundle(baseUrl + "?Bundle-SymbolicName=test.war.bundle&Web-ContextPath=foo");
  assertNotNull(converted);
  Dictionary<String,String> man=converted.getHeaders();
  assertEquals("test.war.bundle",man.get(Constants.BUNDLE_SYMBOLICNAME));
  assertEquals("/foo",man.get("Web-ContextPath"));
  assertTrue(man.get(Constants.IMPORT_PACKAGE).contains("javax.naming"));
  new File("test.war").delete();
}

</code></pre>

<br>
<script>$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});</script>
